(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();var Xn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ws(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function w4(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var n=function r(){var i=!1;try{i=this instanceof r}catch{}return i?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var vy={exports:{}},lu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var US;function E4(){if(US)return lu;US=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,i,a){var c=null;if(a!==void 0&&(c=""+a),i.key!==void 0&&(c=""+i.key),"key"in i){a={};for(var u in i)u!=="key"&&(a[u]=i[u])}else a=i;return i=a.ref,{$$typeof:e,type:r,key:c,ref:i!==void 0?i:null,props:a}}return lu.Fragment=t,lu.jsx=n,lu.jsxs=n,lu}var BS;function S4(){return BS||(BS=1,vy.exports=E4()),vy.exports}var q=S4(),wy={exports:{}},Ne={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PS;function _4(){if(PS)return Ne;PS=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),g=Symbol.iterator;function y($){return $===null||typeof $!="object"?null:($=g&&$[g]||$["@@iterator"],typeof $=="function"?$:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,E={};function S($,W,te){this.props=$,this.context=W,this.refs=E,this.updater=te||b}S.prototype.isReactComponent={},S.prototype.setState=function($,W){if(typeof $!="object"&&typeof $!="function"&&$!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,$,W,"setState")},S.prototype.forceUpdate=function($){this.updater.enqueueForceUpdate(this,$,"forceUpdate")};function x(){}x.prototype=S.prototype;function T($,W,te){this.props=$,this.context=W,this.refs=E,this.updater=te||b}var O=T.prototype=new x;O.constructor=T,v(O,S.prototype),O.isPureReactComponent=!0;var U=Array.isArray,N={H:null,A:null,T:null,S:null,V:null},I=Object.prototype.hasOwnProperty;function j($,W,te,se,ne,ue){return te=ue.ref,{$$typeof:e,type:$,key:W,ref:te!==void 0?te:null,props:ue}}function z($,W){return j($.type,W,void 0,void 0,void 0,$.props)}function P($){return typeof $=="object"&&$!==null&&$.$$typeof===e}function G($){var W={"=":"=0",":":"=2"};return"$"+$.replace(/[=:]/g,function(te){return W[te]})}var F=/\/+/g;function K($,W){return typeof $=="object"&&$!==null&&$.key!=null?G(""+$.key):W.toString(36)}function re(){}function J($){switch($.status){case"fulfilled":return $.value;case"rejected":throw $.reason;default:switch(typeof $.status=="string"?$.then(re,re):($.status="pending",$.then(function(W){$.status==="pending"&&($.status="fulfilled",$.value=W)},function(W){$.status==="pending"&&($.status="rejected",$.reason=W)})),$.status){case"fulfilled":return $.value;case"rejected":throw $.reason}}throw $}function D($,W,te,se,ne){var ue=typeof $;(ue==="undefined"||ue==="boolean")&&($=null);var me=!1;if($===null)me=!0;else switch(ue){case"bigint":case"string":case"number":me=!0;break;case"object":switch($.$$typeof){case e:case t:me=!0;break;case p:return me=$._init,D(me($._payload),W,te,se,ne)}}if(me)return ne=ne($),me=se===""?"."+K($,0):se,U(ne)?(te="",me!=null&&(te=me.replace(F,"$&/")+"/"),D(ne,W,te,"",function(_e){return _e})):ne!=null&&(P(ne)&&(ne=z(ne,te+(ne.key==null||$&&$.key===ne.key?"":(""+ne.key).replace(F,"$&/")+"/")+me)),W.push(ne)),1;me=0;var Re=se===""?".":se+":";if(U($))for(var we=0;we<$.length;we++)se=$[we],ue=Re+K(se,we),me+=D(se,W,te,ue,ne);else if(we=y($),typeof we=="function")for($=we.call($),we=0;!(se=$.next()).done;)se=se.value,ue=Re+K(se,we++),me+=D(se,W,te,ue,ne);else if(ue==="object"){if(typeof $.then=="function")return D(J($),W,te,se,ne);throw W=String($),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys($).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.")}return me}function R($,W,te){if($==null)return $;var se=[],ne=0;return D($,se,"","",function(ue){return W.call(te,ue,ne++)}),se}function L($){if($._status===-1){var W=$._result;W=W(),W.then(function(te){($._status===0||$._status===-1)&&($._status=1,$._result=te)},function(te){($._status===0||$._status===-1)&&($._status=2,$._result=te)}),$._status===-1&&($._status=0,$._result=W)}if($._status===1)return $._result.default;throw $._result}var V=typeof reportError=="function"?reportError:function($){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var W=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof $=="object"&&$!==null&&typeof $.message=="string"?String($.message):String($),error:$});if(!window.dispatchEvent(W))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",$);return}console.error($)};function X(){}return Ne.Children={map:R,forEach:function($,W,te){R($,function(){W.apply(this,arguments)},te)},count:function($){var W=0;return R($,function(){W++}),W},toArray:function($){return R($,function(W){return W})||[]},only:function($){if(!P($))throw Error("React.Children.only expected to receive a single React element child.");return $}},Ne.Component=S,Ne.Fragment=n,Ne.Profiler=i,Ne.PureComponent=T,Ne.StrictMode=r,Ne.Suspense=f,Ne.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=N,Ne.__COMPILER_RUNTIME={__proto__:null,c:function($){return N.H.useMemoCache($)}},Ne.cache=function($){return function(){return $.apply(null,arguments)}},Ne.cloneElement=function($,W,te){if($==null)throw Error("The argument must be a React element, but you passed "+$+".");var se=v({},$.props),ne=$.key,ue=void 0;if(W!=null)for(me in W.ref!==void 0&&(ue=void 0),W.key!==void 0&&(ne=""+W.key),W)!I.call(W,me)||me==="key"||me==="__self"||me==="__source"||me==="ref"&&W.ref===void 0||(se[me]=W[me]);var me=arguments.length-2;if(me===1)se.children=te;else if(1<me){for(var Re=Array(me),we=0;we<me;we++)Re[we]=arguments[we+2];se.children=Re}return j($.type,ne,void 0,void 0,ue,se)},Ne.createContext=function($){return $={$$typeof:c,_currentValue:$,_currentValue2:$,_threadCount:0,Provider:null,Consumer:null},$.Provider=$,$.Consumer={$$typeof:a,_context:$},$},Ne.createElement=function($,W,te){var se,ne={},ue=null;if(W!=null)for(se in W.key!==void 0&&(ue=""+W.key),W)I.call(W,se)&&se!=="key"&&se!=="__self"&&se!=="__source"&&(ne[se]=W[se]);var me=arguments.length-2;if(me===1)ne.children=te;else if(1<me){for(var Re=Array(me),we=0;we<me;we++)Re[we]=arguments[we+2];ne.children=Re}if($&&$.defaultProps)for(se in me=$.defaultProps,me)ne[se]===void 0&&(ne[se]=me[se]);return j($,ue,void 0,void 0,null,ne)},Ne.createRef=function(){return{current:null}},Ne.forwardRef=function($){return{$$typeof:u,render:$}},Ne.isValidElement=P,Ne.lazy=function($){return{$$typeof:p,_payload:{_status:-1,_result:$},_init:L}},Ne.memo=function($,W){return{$$typeof:d,type:$,compare:W===void 0?null:W}},Ne.startTransition=function($){var W=N.T,te={};N.T=te;try{var se=$(),ne=N.S;ne!==null&&ne(te,se),typeof se=="object"&&se!==null&&typeof se.then=="function"&&se.then(X,V)}catch(ue){V(ue)}finally{N.T=W}},Ne.unstable_useCacheRefresh=function(){return N.H.useCacheRefresh()},Ne.use=function($){return N.H.use($)},Ne.useActionState=function($,W,te){return N.H.useActionState($,W,te)},Ne.useCallback=function($,W){return N.H.useCallback($,W)},Ne.useContext=function($){return N.H.useContext($)},Ne.useDebugValue=function(){},Ne.useDeferredValue=function($,W){return N.H.useDeferredValue($,W)},Ne.useEffect=function($,W,te){var se=N.H;if(typeof te=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return se.useEffect($,W)},Ne.useId=function(){return N.H.useId()},Ne.useImperativeHandle=function($,W,te){return N.H.useImperativeHandle($,W,te)},Ne.useInsertionEffect=function($,W){return N.H.useInsertionEffect($,W)},Ne.useLayoutEffect=function($,W){return N.H.useLayoutEffect($,W)},Ne.useMemo=function($,W){return N.H.useMemo($,W)},Ne.useOptimistic=function($,W){return N.H.useOptimistic($,W)},Ne.useReducer=function($,W,te){return N.H.useReducer($,W,te)},Ne.useRef=function($){return N.H.useRef($)},Ne.useState=function($){return N.H.useState($)},Ne.useSyncExternalStore=function($,W,te){return N.H.useSyncExternalStore($,W,te)},Ne.useTransition=function(){return N.H.useTransition()},Ne.version="19.1.0",Ne}var kS;function yv(){return kS||(kS=1,wy.exports=_4()),wy.exports}var M=yv();const In=ws(M);var Ey={exports:{}},uu={},Sy={exports:{}},_y={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var MS;function x4(){return MS||(MS=1,function(e){function t(R,L){var V=R.length;R.push(L);e:for(;0<V;){var X=V-1>>>1,$=R[X];if(0<i($,L))R[X]=L,R[V]=$,V=X;else break e}}function n(R){return R.length===0?null:R[0]}function r(R){if(R.length===0)return null;var L=R[0],V=R.pop();if(V!==L){R[0]=V;e:for(var X=0,$=R.length,W=$>>>1;X<W;){var te=2*(X+1)-1,se=R[te],ne=te+1,ue=R[ne];if(0>i(se,V))ne<$&&0>i(ue,se)?(R[X]=ue,R[ne]=V,X=ne):(R[X]=se,R[te]=V,X=te);else if(ne<$&&0>i(ue,V))R[X]=ue,R[ne]=V,X=ne;else break e}}return L}function i(R,L){var V=R.sortIndex-L.sortIndex;return V!==0?V:R.id-L.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var c=Date,u=c.now();e.unstable_now=function(){return c.now()-u}}var f=[],d=[],p=1,g=null,y=3,b=!1,v=!1,E=!1,S=!1,x=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;function U(R){for(var L=n(d);L!==null;){if(L.callback===null)r(d);else if(L.startTime<=R)r(d),L.sortIndex=L.expirationTime,t(f,L);else break;L=n(d)}}function N(R){if(E=!1,U(R),!v)if(n(f)!==null)v=!0,I||(I=!0,K());else{var L=n(d);L!==null&&D(N,L.startTime-R)}}var I=!1,j=-1,z=5,P=-1;function G(){return S?!0:!(e.unstable_now()-P<z)}function F(){if(S=!1,I){var R=e.unstable_now();P=R;var L=!0;try{e:{v=!1,E&&(E=!1,T(j),j=-1),b=!0;var V=y;try{t:{for(U(R),g=n(f);g!==null&&!(g.expirationTime>R&&G());){var X=g.callback;if(typeof X=="function"){g.callback=null,y=g.priorityLevel;var $=X(g.expirationTime<=R);if(R=e.unstable_now(),typeof $=="function"){g.callback=$,U(R),L=!0;break t}g===n(f)&&r(f),U(R)}else r(f);g=n(f)}if(g!==null)L=!0;else{var W=n(d);W!==null&&D(N,W.startTime-R),L=!1}}break e}finally{g=null,y=V,b=!1}L=void 0}}finally{L?K():I=!1}}}var K;if(typeof O=="function")K=function(){O(F)};else if(typeof MessageChannel<"u"){var re=new MessageChannel,J=re.port2;re.port1.onmessage=F,K=function(){J.postMessage(null)}}else K=function(){x(F,0)};function D(R,L){j=x(function(){R(e.unstable_now())},L)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(R){R.callback=null},e.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<R?Math.floor(1e3/R):5},e.unstable_getCurrentPriorityLevel=function(){return y},e.unstable_next=function(R){switch(y){case 1:case 2:case 3:var L=3;break;default:L=y}var V=y;y=L;try{return R()}finally{y=V}},e.unstable_requestPaint=function(){S=!0},e.unstable_runWithPriority=function(R,L){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var V=y;y=R;try{return L()}finally{y=V}},e.unstable_scheduleCallback=function(R,L,V){var X=e.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?X+V:X):V=X,R){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=V+$,R={id:p++,callback:L,priorityLevel:R,startTime:V,expirationTime:$,sortIndex:-1},V>X?(R.sortIndex=V,t(d,R),n(f)===null&&R===n(d)&&(E?(T(j),j=-1):E=!0,D(N,V-X))):(R.sortIndex=$,t(f,R),v||b||(v=!0,I||(I=!0,K()))),R},e.unstable_shouldYield=G,e.unstable_wrapCallback=function(R){var L=y;return function(){var V=y;y=L;try{return R.apply(this,arguments)}finally{y=V}}}}(_y)),_y}var LS;function A4(){return LS||(LS=1,Sy.exports=x4()),Sy.exports}var xy={exports:{}},An={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jS;function R4(){if(jS)return An;jS=1;var e=yv();function t(f){var d="https://react.dev/errors/"+f;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)d+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+f+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function a(f,d,p){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:g==null?null:""+g,children:f,containerInfo:d,implementation:p}}var c=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(f,d){if(f==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return An.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,An.createPortal=function(f,d){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(t(299));return a(f,d,null,p)},An.flushSync=function(f){var d=c.T,p=r.p;try{if(c.T=null,r.p=2,f)return f()}finally{c.T=d,r.p=p,r.d.f()}},An.preconnect=function(f,d){typeof f=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,r.d.C(f,d))},An.prefetchDNS=function(f){typeof f=="string"&&r.d.D(f)},An.preinit=function(f,d){if(typeof f=="string"&&d&&typeof d.as=="string"){var p=d.as,g=u(p,d.crossOrigin),y=typeof d.integrity=="string"?d.integrity:void 0,b=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;p==="style"?r.d.S(f,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:g,integrity:y,fetchPriority:b}):p==="script"&&r.d.X(f,{crossOrigin:g,integrity:y,fetchPriority:b,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},An.preinitModule=function(f,d){if(typeof f=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var p=u(d.as,d.crossOrigin);r.d.M(f,{crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&r.d.M(f)},An.preload=function(f,d){if(typeof f=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var p=d.as,g=u(p,d.crossOrigin);r.d.L(f,p,{crossOrigin:g,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},An.preloadModule=function(f,d){if(typeof f=="string")if(d){var p=u(d.as,d.crossOrigin);r.d.m(f,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else r.d.m(f)},An.requestFormReset=function(f){r.d.r(f)},An.unstable_batchedUpdates=function(f,d){return f(d)},An.useFormState=function(f,d,p){return c.H.useFormState(f,d,p)},An.useFormStatus=function(){return c.H.useHostTransitionStatus()},An.version="19.1.0",An}var zS;function KO(){if(zS)return xy.exports;zS=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),xy.exports=R4(),xy.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qS;function O4(){if(qS)return uu;qS=1;var e=A4(),t=yv(),n=KO();function r(s){var o="https://react.dev/errors/"+s;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)o+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+s+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function a(s){var o=s,l=s;if(s.alternate)for(;o.return;)o=o.return;else{s=o;do o=s,(o.flags&4098)!==0&&(l=o.return),s=o.return;while(s)}return o.tag===3?l:null}function c(s){if(s.tag===13){var o=s.memoizedState;if(o===null&&(s=s.alternate,s!==null&&(o=s.memoizedState)),o!==null)return o.dehydrated}return null}function u(s){if(a(s)!==s)throw Error(r(188))}function f(s){var o=s.alternate;if(!o){if(o=a(s),o===null)throw Error(r(188));return o!==s?null:s}for(var l=s,h=o;;){var m=l.return;if(m===null)break;var w=m.alternate;if(w===null){if(h=m.return,h!==null){l=h;continue}break}if(m.child===w.child){for(w=m.child;w;){if(w===l)return u(m),s;if(w===h)return u(m),o;w=w.sibling}throw Error(r(188))}if(l.return!==h.return)l=m,h=w;else{for(var C=!1,k=m.child;k;){if(k===l){C=!0,l=m,h=w;break}if(k===h){C=!0,h=m,l=w;break}k=k.sibling}if(!C){for(k=w.child;k;){if(k===l){C=!0,l=w,h=m;break}if(k===h){C=!0,h=w,l=m;break}k=k.sibling}if(!C)throw Error(r(189))}}if(l.alternate!==h)throw Error(r(190))}if(l.tag!==3)throw Error(r(188));return l.stateNode.current===l?s:o}function d(s){var o=s.tag;if(o===5||o===26||o===27||o===6)return s;for(s=s.child;s!==null;){if(o=d(s),o!==null)return o;s=s.sibling}return null}var p=Object.assign,g=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),x=Symbol.for("react.provider"),T=Symbol.for("react.consumer"),O=Symbol.for("react.context"),U=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),j=Symbol.for("react.memo"),z=Symbol.for("react.lazy"),P=Symbol.for("react.activity"),G=Symbol.for("react.memo_cache_sentinel"),F=Symbol.iterator;function K(s){return s===null||typeof s!="object"?null:(s=F&&s[F]||s["@@iterator"],typeof s=="function"?s:null)}var re=Symbol.for("react.client.reference");function J(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===re?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case v:return"Fragment";case S:return"Profiler";case E:return"StrictMode";case N:return"Suspense";case I:return"SuspenseList";case P:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case b:return"Portal";case O:return(s.displayName||"Context")+".Provider";case T:return(s._context.displayName||"Context")+".Consumer";case U:var o=s.render;return s=s.displayName,s||(s=o.displayName||o.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case j:return o=s.displayName||null,o!==null?o:J(s.type)||"Memo";case z:o=s._payload,s=s._init;try{return J(s(o))}catch{}}return null}var D=Array.isArray,R=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,L=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,V={pending:!1,data:null,method:null,action:null},X=[],$=-1;function W(s){return{current:s}}function te(s){0>$||(s.current=X[$],X[$]=null,$--)}function se(s,o){$++,X[$]=s.current,s.current=o}var ne=W(null),ue=W(null),me=W(null),Re=W(null);function we(s,o){switch(se(me,o),se(ue,s),se(ne,null),o.nodeType){case 9:case 11:s=(s=o.documentElement)&&(s=s.namespaceURI)?cS(s):0;break;default:if(s=o.tagName,o=o.namespaceURI)o=cS(o),s=lS(o,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}te(ne),se(ne,s)}function _e(){te(ne),te(ue),te(me)}function ze(s){s.memoizedState!==null&&se(Re,s);var o=ne.current,l=lS(o,s.type);o!==l&&(se(ue,s),se(ne,l))}function Xe(s){ue.current===s&&(te(ne),te(ue)),Re.current===s&&(te(Re),iu._currentValue=V)}var Vt=Object.prototype.hasOwnProperty,Ot=e.unstable_scheduleCallback,_t=e.unstable_cancelCallback,We=e.unstable_shouldYield,Vr=e.unstable_requestPaint,xt=e.unstable_now,vo=e.unstable_getCurrentPriorityLevel,Bi=e.unstable_ImmediatePriority,En=e.unstable_UserBlockingPriority,Qt=e.unstable_NormalPriority,Jt=e.unstable_LowPriority,Sr=e.unstable_IdlePriority,ai=e.log,Sn=e.unstable_setDisableYieldValue,sr=null,B=null;function _(s){if(typeof ai=="function"&&Sn(s),B&&typeof B.setStrictMode=="function")try{B.setStrictMode(sr,s)}catch{}}var A=Math.clz32?Math.clz32:le,H=Math.log,Q=Math.LN2;function le(s){return s>>>=0,s===0?32:31-(H(s)/Q|0)|0}var he=256,Ie=4194304;function Ze(s){var o=s&42;if(o!==0)return o;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Je(s,o,l){var h=s.pendingLanes;if(h===0)return 0;var m=0,w=s.suspendedLanes,C=s.pingedLanes;s=s.warmLanes;var k=h&134217727;return k!==0?(h=k&~w,h!==0?m=Ze(h):(C&=k,C!==0?m=Ze(C):l||(l=k&~s,l!==0&&(m=Ze(l))))):(k=h&~w,k!==0?m=Ze(k):C!==0?m=Ze(C):l||(l=h&~s,l!==0&&(m=Ze(l)))),m===0?0:o!==0&&o!==m&&(o&w)===0&&(w=m&-m,l=o&-o,w>=l||w===32&&(l&4194048)!==0)?o:m}function st(s,o){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&o)===0}function et(s,o){switch(s){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Vw(){var s=he;return he<<=1,(he&4194048)===0&&(he=256),s}function Gw(){var s=Ie;return Ie<<=1,(Ie&62914560)===0&&(Ie=4194304),s}function cg(s){for(var o=[],l=0;31>l;l++)o.push(s);return o}function pl(s,o){s.pendingLanes|=o,o!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function c8(s,o,l,h,m,w){var C=s.pendingLanes;s.pendingLanes=l,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=l,s.entangledLanes&=l,s.errorRecoveryDisabledLanes&=l,s.shellSuspendCounter=0;var k=s.entanglements,Y=s.expirationTimes,oe=s.hiddenUpdates;for(l=C&~l;0<l;){var fe=31-A(l),ge=1<<fe;k[fe]=0,Y[fe]=-1;var ae=oe[fe];if(ae!==null)for(oe[fe]=null,fe=0;fe<ae.length;fe++){var ce=ae[fe];ce!==null&&(ce.lane&=-536870913)}l&=~ge}h!==0&&Kw(s,h,0),w!==0&&m===0&&s.tag!==0&&(s.suspendedLanes|=w&~(C&~o))}function Kw(s,o,l){s.pendingLanes|=o,s.suspendedLanes&=~o;var h=31-A(o);s.entangledLanes|=o,s.entanglements[h]=s.entanglements[h]|1073741824|l&4194090}function Ww(s,o){var l=s.entangledLanes|=o;for(s=s.entanglements;l;){var h=31-A(l),m=1<<h;m&o|s[h]&o&&(s[h]|=o),l&=~m}}function lg(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function ug(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Yw(){var s=L.p;return s!==0?s:(s=window.event,s===void 0?32:TS(s.type))}function l8(s,o){var l=L.p;try{return L.p=s,o()}finally{L.p=l}}var Ss=Math.random().toString(36).slice(2),_n="__reactFiber$"+Ss,Mn="__reactProps$"+Ss,Oa="__reactContainer$"+Ss,fg="__reactEvents$"+Ss,u8="__reactListeners$"+Ss,f8="__reactHandles$"+Ss,Xw="__reactResources$"+Ss,gl="__reactMarker$"+Ss;function dg(s){delete s[_n],delete s[Mn],delete s[fg],delete s[u8],delete s[f8]}function Ta(s){var o=s[_n];if(o)return o;for(var l=s.parentNode;l;){if(o=l[Oa]||l[_n]){if(l=o.alternate,o.child!==null||l!==null&&l.child!==null)for(s=hS(s);s!==null;){if(l=s[_n])return l;s=hS(s)}return o}s=l,l=s.parentNode}return null}function Da(s){if(s=s[_n]||s[Oa]){var o=s.tag;if(o===5||o===6||o===13||o===26||o===27||o===3)return s}return null}function ml(s){var o=s.tag;if(o===5||o===26||o===27||o===6)return s.stateNode;throw Error(r(33))}function Ca(s){var o=s[Xw];return o||(o=s[Xw]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function en(s){s[gl]=!0}var Zw=new Set,Qw={};function wo(s,o){Ia(s,o),Ia(s+"Capture",o)}function Ia(s,o){for(Qw[s]=o,s=0;s<o.length;s++)Zw.add(o[s])}var d8=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Jw={},e1={};function h8(s){return Vt.call(e1,s)?!0:Vt.call(Jw,s)?!1:d8.test(s)?e1[s]=!0:(Jw[s]=!0,!1)}function Hf(s,o,l){if(h8(o))if(l===null)s.removeAttribute(o);else{switch(typeof l){case"undefined":case"function":case"symbol":s.removeAttribute(o);return;case"boolean":var h=o.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){s.removeAttribute(o);return}}s.setAttribute(o,""+l)}}function Ff(s,o,l){if(l===null)s.removeAttribute(o);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(o);return}s.setAttribute(o,""+l)}}function Pi(s,o,l,h){if(h===null)s.removeAttribute(l);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(l);return}s.setAttributeNS(o,l,""+h)}}var hg,t1;function Na(s){if(hg===void 0)try{throw Error()}catch(l){var o=l.stack.trim().match(/\n( *(at )?)/);hg=o&&o[1]||"",t1=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+hg+s+t1}var pg=!1;function gg(s,o){if(!s||pg)return"";pg=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(o){var ge=function(){throw Error()};if(Object.defineProperty(ge.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ge,[])}catch(ce){var ae=ce}Reflect.construct(s,[],ge)}else{try{ge.call()}catch(ce){ae=ce}s.call(ge.prototype)}}else{try{throw Error()}catch(ce){ae=ce}(ge=s())&&typeof ge.catch=="function"&&ge.catch(function(){})}}catch(ce){if(ce&&ae&&typeof ce.stack=="string")return[ce.stack,ae.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var w=h.DetermineComponentFrameRoot(),C=w[0],k=w[1];if(C&&k){var Y=C.split(`
`),oe=k.split(`
`);for(m=h=0;h<Y.length&&!Y[h].includes("DetermineComponentFrameRoot");)h++;for(;m<oe.length&&!oe[m].includes("DetermineComponentFrameRoot");)m++;if(h===Y.length||m===oe.length)for(h=Y.length-1,m=oe.length-1;1<=h&&0<=m&&Y[h]!==oe[m];)m--;for(;1<=h&&0<=m;h--,m--)if(Y[h]!==oe[m]){if(h!==1||m!==1)do if(h--,m--,0>m||Y[h]!==oe[m]){var fe=`
`+Y[h].replace(" at new "," at ");return s.displayName&&fe.includes("<anonymous>")&&(fe=fe.replace("<anonymous>",s.displayName)),fe}while(1<=h&&0<=m);break}}}finally{pg=!1,Error.prepareStackTrace=l}return(l=s?s.displayName||s.name:"")?Na(l):""}function p8(s){switch(s.tag){case 26:case 27:case 5:return Na(s.type);case 16:return Na("Lazy");case 13:return Na("Suspense");case 19:return Na("SuspenseList");case 0:case 15:return gg(s.type,!1);case 11:return gg(s.type.render,!1);case 1:return gg(s.type,!0);case 31:return Na("Activity");default:return""}}function n1(s){try{var o="";do o+=p8(s),s=s.return;while(s);return o}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}function _r(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function r1(s){var o=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function g8(s){var o=r1(s)?"checked":"value",l=Object.getOwnPropertyDescriptor(s.constructor.prototype,o),h=""+s[o];if(!s.hasOwnProperty(o)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var m=l.get,w=l.set;return Object.defineProperty(s,o,{configurable:!0,get:function(){return m.call(this)},set:function(C){h=""+C,w.call(this,C)}}),Object.defineProperty(s,o,{enumerable:l.enumerable}),{getValue:function(){return h},setValue:function(C){h=""+C},stopTracking:function(){s._valueTracker=null,delete s[o]}}}}function Vf(s){s._valueTracker||(s._valueTracker=g8(s))}function i1(s){if(!s)return!1;var o=s._valueTracker;if(!o)return!0;var l=o.getValue(),h="";return s&&(h=r1(s)?s.checked?"true":"false":s.value),s=h,s!==l?(o.setValue(s),!0):!1}function Gf(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var m8=/[\n"\\]/g;function xr(s){return s.replace(m8,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function mg(s,o,l,h,m,w,C,k){s.name="",C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?s.type=C:s.removeAttribute("type"),o!=null?C==="number"?(o===0&&s.value===""||s.value!=o)&&(s.value=""+_r(o)):s.value!==""+_r(o)&&(s.value=""+_r(o)):C!=="submit"&&C!=="reset"||s.removeAttribute("value"),o!=null?yg(s,C,_r(o)):l!=null?yg(s,C,_r(l)):h!=null&&s.removeAttribute("value"),m==null&&w!=null&&(s.defaultChecked=!!w),m!=null&&(s.checked=m&&typeof m!="function"&&typeof m!="symbol"),k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"?s.name=""+_r(k):s.removeAttribute("name")}function s1(s,o,l,h,m,w,C,k){if(w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(s.type=w),o!=null||l!=null){if(!(w!=="submit"&&w!=="reset"||o!=null))return;l=l!=null?""+_r(l):"",o=o!=null?""+_r(o):l,k||o===s.value||(s.value=o),s.defaultValue=o}h=h??m,h=typeof h!="function"&&typeof h!="symbol"&&!!h,s.checked=k?s.checked:!!h,s.defaultChecked=!!h,C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(s.name=C)}function yg(s,o,l){o==="number"&&Gf(s.ownerDocument)===s||s.defaultValue===""+l||(s.defaultValue=""+l)}function $a(s,o,l,h){if(s=s.options,o){o={};for(var m=0;m<l.length;m++)o["$"+l[m]]=!0;for(l=0;l<s.length;l++)m=o.hasOwnProperty("$"+s[l].value),s[l].selected!==m&&(s[l].selected=m),m&&h&&(s[l].defaultSelected=!0)}else{for(l=""+_r(l),o=null,m=0;m<s.length;m++){if(s[m].value===l){s[m].selected=!0,h&&(s[m].defaultSelected=!0);return}o!==null||s[m].disabled||(o=s[m])}o!==null&&(o.selected=!0)}}function o1(s,o,l){if(o!=null&&(o=""+_r(o),o!==s.value&&(s.value=o),l==null)){s.defaultValue!==o&&(s.defaultValue=o);return}s.defaultValue=l!=null?""+_r(l):""}function a1(s,o,l,h){if(o==null){if(h!=null){if(l!=null)throw Error(r(92));if(D(h)){if(1<h.length)throw Error(r(93));h=h[0]}l=h}l==null&&(l=""),o=l}l=_r(o),s.defaultValue=l,h=s.textContent,h===l&&h!==""&&h!==null&&(s.value=h)}function Ua(s,o){if(o){var l=s.firstChild;if(l&&l===s.lastChild&&l.nodeType===3){l.nodeValue=o;return}}s.textContent=o}var y8=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function c1(s,o,l){var h=o.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?h?s.setProperty(o,""):o==="float"?s.cssFloat="":s[o]="":h?s.setProperty(o,l):typeof l!="number"||l===0||y8.has(o)?o==="float"?s.cssFloat=l:s[o]=(""+l).trim():s[o]=l+"px"}function l1(s,o,l){if(o!=null&&typeof o!="object")throw Error(r(62));if(s=s.style,l!=null){for(var h in l)!l.hasOwnProperty(h)||o!=null&&o.hasOwnProperty(h)||(h.indexOf("--")===0?s.setProperty(h,""):h==="float"?s.cssFloat="":s[h]="");for(var m in o)h=o[m],o.hasOwnProperty(m)&&l[m]!==h&&c1(s,m,h)}else for(var w in o)o.hasOwnProperty(w)&&c1(s,w,o[w])}function bg(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var b8=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),v8=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Kf(s){return v8.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}var vg=null;function wg(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Ba=null,Pa=null;function u1(s){var o=Da(s);if(o&&(s=o.stateNode)){var l=s[Mn]||null;e:switch(s=o.stateNode,o.type){case"input":if(mg(s,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),o=l.name,l.type==="radio"&&o!=null){for(l=s;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+xr(""+o)+'"][type="radio"]'),o=0;o<l.length;o++){var h=l[o];if(h!==s&&h.form===s.form){var m=h[Mn]||null;if(!m)throw Error(r(90));mg(h,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(o=0;o<l.length;o++)h=l[o],h.form===s.form&&i1(h)}break e;case"textarea":o1(s,l.value,l.defaultValue);break e;case"select":o=l.value,o!=null&&$a(s,!!l.multiple,o,!1)}}}var Eg=!1;function f1(s,o,l){if(Eg)return s(o,l);Eg=!0;try{var h=s(o);return h}finally{if(Eg=!1,(Ba!==null||Pa!==null)&&(Nd(),Ba&&(o=Ba,s=Pa,Pa=Ba=null,u1(o),s)))for(o=0;o<s.length;o++)u1(s[o])}}function yl(s,o){var l=s.stateNode;if(l===null)return null;var h=l[Mn]||null;if(h===null)return null;l=h[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(s=s.type,h=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!h;break e;default:s=!1}if(s)return null;if(l&&typeof l!="function")throw Error(r(231,o,typeof l));return l}var ki=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Sg=!1;if(ki)try{var bl={};Object.defineProperty(bl,"passive",{get:function(){Sg=!0}}),window.addEventListener("test",bl,bl),window.removeEventListener("test",bl,bl)}catch{Sg=!1}var _s=null,_g=null,Wf=null;function d1(){if(Wf)return Wf;var s,o=_g,l=o.length,h,m="value"in _s?_s.value:_s.textContent,w=m.length;for(s=0;s<l&&o[s]===m[s];s++);var C=l-s;for(h=1;h<=C&&o[l-h]===m[w-h];h++);return Wf=m.slice(s,1<h?1-h:void 0)}function Yf(s){var o=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&o===13&&(s=13)):s=o,s===10&&(s=13),32<=s||s===13?s:0}function Xf(){return!0}function h1(){return!1}function Ln(s){function o(l,h,m,w,C){this._reactName=l,this._targetInst=m,this.type=h,this.nativeEvent=w,this.target=C,this.currentTarget=null;for(var k in s)s.hasOwnProperty(k)&&(l=s[k],this[k]=l?l(w):w[k]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?Xf:h1,this.isPropagationStopped=h1,this}return p(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Xf)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Xf)},persist:function(){},isPersistent:Xf}),o}var Eo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zf=Ln(Eo),vl=p({},Eo,{view:0,detail:0}),w8=Ln(vl),xg,Ag,wl,Qf=p({},vl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Og,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==wl&&(wl&&s.type==="mousemove"?(xg=s.screenX-wl.screenX,Ag=s.screenY-wl.screenY):Ag=xg=0,wl=s),xg)},movementY:function(s){return"movementY"in s?s.movementY:Ag}}),p1=Ln(Qf),E8=p({},Qf,{dataTransfer:0}),S8=Ln(E8),_8=p({},vl,{relatedTarget:0}),Rg=Ln(_8),x8=p({},Eo,{animationName:0,elapsedTime:0,pseudoElement:0}),A8=Ln(x8),R8=p({},Eo,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),O8=Ln(R8),T8=p({},Eo,{data:0}),g1=Ln(T8),D8={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},C8={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},I8={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function N8(s){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(s):(s=I8[s])?!!o[s]:!1}function Og(){return N8}var $8=p({},vl,{key:function(s){if(s.key){var o=D8[s.key]||s.key;if(o!=="Unidentified")return o}return s.type==="keypress"?(s=Yf(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?C8[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Og,charCode:function(s){return s.type==="keypress"?Yf(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Yf(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),U8=Ln($8),B8=p({},Qf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),m1=Ln(B8),P8=p({},vl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Og}),k8=Ln(P8),M8=p({},Eo,{propertyName:0,elapsedTime:0,pseudoElement:0}),L8=Ln(M8),j8=p({},Qf,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),z8=Ln(j8),q8=p({},Eo,{newState:0,oldState:0}),H8=Ln(q8),F8=[9,13,27,32],Tg=ki&&"CompositionEvent"in window,El=null;ki&&"documentMode"in document&&(El=document.documentMode);var V8=ki&&"TextEvent"in window&&!El,y1=ki&&(!Tg||El&&8<El&&11>=El),b1=" ",v1=!1;function w1(s,o){switch(s){case"keyup":return F8.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function E1(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var ka=!1;function G8(s,o){switch(s){case"compositionend":return E1(o);case"keypress":return o.which!==32?null:(v1=!0,b1);case"textInput":return s=o.data,s===b1&&v1?null:s;default:return null}}function K8(s,o){if(ka)return s==="compositionend"||!Tg&&w1(s,o)?(s=d1(),Wf=_g=_s=null,ka=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return y1&&o.locale!=="ko"?null:o.data;default:return null}}var W8={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function S1(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o==="input"?!!W8[s.type]:o==="textarea"}function _1(s,o,l,h){Ba?Pa?Pa.push(h):Pa=[h]:Ba=h,o=Md(o,"onChange"),0<o.length&&(l=new Zf("onChange","change",null,l,h),s.push({event:l,listeners:o}))}var Sl=null,_l=null;function Y8(s){rS(s,0)}function Jf(s){var o=ml(s);if(i1(o))return s}function x1(s,o){if(s==="change")return o}var A1=!1;if(ki){var Dg;if(ki){var Cg="oninput"in document;if(!Cg){var R1=document.createElement("div");R1.setAttribute("oninput","return;"),Cg=typeof R1.oninput=="function"}Dg=Cg}else Dg=!1;A1=Dg&&(!document.documentMode||9<document.documentMode)}function O1(){Sl&&(Sl.detachEvent("onpropertychange",T1),_l=Sl=null)}function T1(s){if(s.propertyName==="value"&&Jf(_l)){var o=[];_1(o,_l,s,wg(s)),f1(Y8,o)}}function X8(s,o,l){s==="focusin"?(O1(),Sl=o,_l=l,Sl.attachEvent("onpropertychange",T1)):s==="focusout"&&O1()}function Z8(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Jf(_l)}function Q8(s,o){if(s==="click")return Jf(o)}function J8(s,o){if(s==="input"||s==="change")return Jf(o)}function e6(s,o){return s===o&&(s!==0||1/s===1/o)||s!==s&&o!==o}var or=typeof Object.is=="function"?Object.is:e6;function xl(s,o){if(or(s,o))return!0;if(typeof s!="object"||s===null||typeof o!="object"||o===null)return!1;var l=Object.keys(s),h=Object.keys(o);if(l.length!==h.length)return!1;for(h=0;h<l.length;h++){var m=l[h];if(!Vt.call(o,m)||!or(s[m],o[m]))return!1}return!0}function D1(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function C1(s,o){var l=D1(s);s=0;for(var h;l;){if(l.nodeType===3){if(h=s+l.textContent.length,s<=o&&h>=o)return{node:l,offset:o-s};s=h}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=D1(l)}}function I1(s,o){return s&&o?s===o?!0:s&&s.nodeType===3?!1:o&&o.nodeType===3?I1(s,o.parentNode):"contains"in s?s.contains(o):s.compareDocumentPosition?!!(s.compareDocumentPosition(o)&16):!1:!1}function N1(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var o=Gf(s.document);o instanceof s.HTMLIFrameElement;){try{var l=typeof o.contentWindow.location.href=="string"}catch{l=!1}if(l)s=o.contentWindow;else break;o=Gf(s.document)}return o}function Ig(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o&&(o==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||o==="textarea"||s.contentEditable==="true")}var t6=ki&&"documentMode"in document&&11>=document.documentMode,Ma=null,Ng=null,Al=null,$g=!1;function $1(s,o,l){var h=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;$g||Ma==null||Ma!==Gf(h)||(h=Ma,"selectionStart"in h&&Ig(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),Al&&xl(Al,h)||(Al=h,h=Md(Ng,"onSelect"),0<h.length&&(o=new Zf("onSelect","select",null,o,l),s.push({event:o,listeners:h}),o.target=Ma)))}function So(s,o){var l={};return l[s.toLowerCase()]=o.toLowerCase(),l["Webkit"+s]="webkit"+o,l["Moz"+s]="moz"+o,l}var La={animationend:So("Animation","AnimationEnd"),animationiteration:So("Animation","AnimationIteration"),animationstart:So("Animation","AnimationStart"),transitionrun:So("Transition","TransitionRun"),transitionstart:So("Transition","TransitionStart"),transitioncancel:So("Transition","TransitionCancel"),transitionend:So("Transition","TransitionEnd")},Ug={},U1={};ki&&(U1=document.createElement("div").style,"AnimationEvent"in window||(delete La.animationend.animation,delete La.animationiteration.animation,delete La.animationstart.animation),"TransitionEvent"in window||delete La.transitionend.transition);function _o(s){if(Ug[s])return Ug[s];if(!La[s])return s;var o=La[s],l;for(l in o)if(o.hasOwnProperty(l)&&l in U1)return Ug[s]=o[l];return s}var B1=_o("animationend"),P1=_o("animationiteration"),k1=_o("animationstart"),n6=_o("transitionrun"),r6=_o("transitionstart"),i6=_o("transitioncancel"),M1=_o("transitionend"),L1=new Map,Bg="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Bg.push("scrollEnd");function Gr(s,o){L1.set(s,o),wo(o,[s])}var j1=new WeakMap;function Ar(s,o){if(typeof s=="object"&&s!==null){var l=j1.get(s);return l!==void 0?l:(o={value:s,source:o,stack:n1(o)},j1.set(s,o),o)}return{value:s,source:o,stack:n1(o)}}var Rr=[],ja=0,Pg=0;function ed(){for(var s=ja,o=Pg=ja=0;o<s;){var l=Rr[o];Rr[o++]=null;var h=Rr[o];Rr[o++]=null;var m=Rr[o];Rr[o++]=null;var w=Rr[o];if(Rr[o++]=null,h!==null&&m!==null){var C=h.pending;C===null?m.next=m:(m.next=C.next,C.next=m),h.pending=m}w!==0&&z1(l,m,w)}}function td(s,o,l,h){Rr[ja++]=s,Rr[ja++]=o,Rr[ja++]=l,Rr[ja++]=h,Pg|=h,s.lanes|=h,s=s.alternate,s!==null&&(s.lanes|=h)}function kg(s,o,l,h){return td(s,o,l,h),nd(s)}function za(s,o){return td(s,null,null,o),nd(s)}function z1(s,o,l){s.lanes|=l;var h=s.alternate;h!==null&&(h.lanes|=l);for(var m=!1,w=s.return;w!==null;)w.childLanes|=l,h=w.alternate,h!==null&&(h.childLanes|=l),w.tag===22&&(s=w.stateNode,s===null||s._visibility&1||(m=!0)),s=w,w=w.return;return s.tag===3?(w=s.stateNode,m&&o!==null&&(m=31-A(l),s=w.hiddenUpdates,h=s[m],h===null?s[m]=[o]:h.push(o),o.lane=l|536870912),w):null}function nd(s){if(50<Xl)throw Xl=0,Hm=null,Error(r(185));for(var o=s.return;o!==null;)s=o,o=s.return;return s.tag===3?s.stateNode:null}var qa={};function s6(s,o,l,h){this.tag=s,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ar(s,o,l,h){return new s6(s,o,l,h)}function Mg(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Mi(s,o){var l=s.alternate;return l===null?(l=ar(s.tag,o,s.key,s.mode),l.elementType=s.elementType,l.type=s.type,l.stateNode=s.stateNode,l.alternate=s,s.alternate=l):(l.pendingProps=o,l.type=s.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=s.flags&65011712,l.childLanes=s.childLanes,l.lanes=s.lanes,l.child=s.child,l.memoizedProps=s.memoizedProps,l.memoizedState=s.memoizedState,l.updateQueue=s.updateQueue,o=s.dependencies,l.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},l.sibling=s.sibling,l.index=s.index,l.ref=s.ref,l.refCleanup=s.refCleanup,l}function q1(s,o){s.flags&=65011714;var l=s.alternate;return l===null?(s.childLanes=0,s.lanes=o,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,o=l.dependencies,s.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),s}function rd(s,o,l,h,m,w){var C=0;if(h=s,typeof s=="function")Mg(s)&&(C=1);else if(typeof s=="string")C=a4(s,l,ne.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case P:return s=ar(31,l,o,m),s.elementType=P,s.lanes=w,s;case v:return xo(l.children,m,w,o);case E:C=8,m|=24;break;case S:return s=ar(12,l,o,m|2),s.elementType=S,s.lanes=w,s;case N:return s=ar(13,l,o,m),s.elementType=N,s.lanes=w,s;case I:return s=ar(19,l,o,m),s.elementType=I,s.lanes=w,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case x:case O:C=10;break e;case T:C=9;break e;case U:C=11;break e;case j:C=14;break e;case z:C=16,h=null;break e}C=29,l=Error(r(130,s===null?"null":typeof s,"")),h=null}return o=ar(C,l,o,m),o.elementType=s,o.type=h,o.lanes=w,o}function xo(s,o,l,h){return s=ar(7,s,h,o),s.lanes=l,s}function Lg(s,o,l){return s=ar(6,s,null,o),s.lanes=l,s}function jg(s,o,l){return o=ar(4,s.children!==null?s.children:[],s.key,o),o.lanes=l,o.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},o}var Ha=[],Fa=0,id=null,sd=0,Or=[],Tr=0,Ao=null,Li=1,ji="";function Ro(s,o){Ha[Fa++]=sd,Ha[Fa++]=id,id=s,sd=o}function H1(s,o,l){Or[Tr++]=Li,Or[Tr++]=ji,Or[Tr++]=Ao,Ao=s;var h=Li;s=ji;var m=32-A(h)-1;h&=~(1<<m),l+=1;var w=32-A(o)+m;if(30<w){var C=m-m%5;w=(h&(1<<C)-1).toString(32),h>>=C,m-=C,Li=1<<32-A(o)+m|l<<m|h,ji=w+s}else Li=1<<w|l<<m|h,ji=s}function zg(s){s.return!==null&&(Ro(s,1),H1(s,1,0))}function qg(s){for(;s===id;)id=Ha[--Fa],Ha[Fa]=null,sd=Ha[--Fa],Ha[Fa]=null;for(;s===Ao;)Ao=Or[--Tr],Or[Tr]=null,ji=Or[--Tr],Or[Tr]=null,Li=Or[--Tr],Or[Tr]=null}var $n=null,Tt=null,Ye=!1,Oo=null,ci=!1,Hg=Error(r(519));function To(s){var o=Error(r(418,""));throw Tl(Ar(o,s)),Hg}function F1(s){var o=s.stateNode,l=s.type,h=s.memoizedProps;switch(o[_n]=s,o[Mn]=h,l){case"dialog":ke("cancel",o),ke("close",o);break;case"iframe":case"object":case"embed":ke("load",o);break;case"video":case"audio":for(l=0;l<Ql.length;l++)ke(Ql[l],o);break;case"source":ke("error",o);break;case"img":case"image":case"link":ke("error",o),ke("load",o);break;case"details":ke("toggle",o);break;case"input":ke("invalid",o),s1(o,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0),Vf(o);break;case"select":ke("invalid",o);break;case"textarea":ke("invalid",o),a1(o,h.value,h.defaultValue,h.children),Vf(o)}l=h.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||o.textContent===""+l||h.suppressHydrationWarning===!0||aS(o.textContent,l)?(h.popover!=null&&(ke("beforetoggle",o),ke("toggle",o)),h.onScroll!=null&&ke("scroll",o),h.onScrollEnd!=null&&ke("scrollend",o),h.onClick!=null&&(o.onclick=Ld),o=!0):o=!1,o||To(s)}function V1(s){for($n=s.return;$n;)switch($n.tag){case 5:case 13:ci=!1;return;case 27:case 3:ci=!0;return;default:$n=$n.return}}function Rl(s){if(s!==$n)return!1;if(!Ye)return V1(s),Ye=!0,!1;var o=s.tag,l;if((l=o!==3&&o!==27)&&((l=o===5)&&(l=s.type,l=!(l!=="form"&&l!=="button")||sy(s.type,s.memoizedProps)),l=!l),l&&Tt&&To(s),V1(s),o===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));e:{for(s=s.nextSibling,o=0;s;){if(s.nodeType===8)if(l=s.data,l==="/$"){if(o===0){Tt=Wr(s.nextSibling);break e}o--}else l!=="$"&&l!=="$!"&&l!=="$?"||o++;s=s.nextSibling}Tt=null}}else o===27?(o=Tt,Ls(s.type)?(s=ly,ly=null,Tt=s):Tt=o):Tt=$n?Wr(s.stateNode.nextSibling):null;return!0}function Ol(){Tt=$n=null,Ye=!1}function G1(){var s=Oo;return s!==null&&(qn===null?qn=s:qn.push.apply(qn,s),Oo=null),s}function Tl(s){Oo===null?Oo=[s]:Oo.push(s)}var Fg=W(null),Do=null,zi=null;function xs(s,o,l){se(Fg,o._currentValue),o._currentValue=l}function qi(s){s._currentValue=Fg.current,te(Fg)}function Vg(s,o,l){for(;s!==null;){var h=s.alternate;if((s.childLanes&o)!==o?(s.childLanes|=o,h!==null&&(h.childLanes|=o)):h!==null&&(h.childLanes&o)!==o&&(h.childLanes|=o),s===l)break;s=s.return}}function Gg(s,o,l,h){var m=s.child;for(m!==null&&(m.return=s);m!==null;){var w=m.dependencies;if(w!==null){var C=m.child;w=w.firstContext;e:for(;w!==null;){var k=w;w=m;for(var Y=0;Y<o.length;Y++)if(k.context===o[Y]){w.lanes|=l,k=w.alternate,k!==null&&(k.lanes|=l),Vg(w.return,l,s),h||(C=null);break e}w=k.next}}else if(m.tag===18){if(C=m.return,C===null)throw Error(r(341));C.lanes|=l,w=C.alternate,w!==null&&(w.lanes|=l),Vg(C,l,s),C=null}else C=m.child;if(C!==null)C.return=m;else for(C=m;C!==null;){if(C===s){C=null;break}if(m=C.sibling,m!==null){m.return=C.return,C=m;break}C=C.return}m=C}}function Dl(s,o,l,h){s=null;for(var m=o,w=!1;m!==null;){if(!w){if((m.flags&524288)!==0)w=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var C=m.alternate;if(C===null)throw Error(r(387));if(C=C.memoizedProps,C!==null){var k=m.type;or(m.pendingProps.value,C.value)||(s!==null?s.push(k):s=[k])}}else if(m===Re.current){if(C=m.alternate,C===null)throw Error(r(387));C.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(s!==null?s.push(iu):s=[iu])}m=m.return}s!==null&&Gg(o,s,l,h),o.flags|=262144}function od(s){for(s=s.firstContext;s!==null;){if(!or(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function Co(s){Do=s,zi=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function xn(s){return K1(Do,s)}function ad(s,o){return Do===null&&Co(s),K1(s,o)}function K1(s,o){var l=o._currentValue;if(o={context:o,memoizedValue:l,next:null},zi===null){if(s===null)throw Error(r(308));zi=o,s.dependencies={lanes:0,firstContext:o},s.flags|=524288}else zi=zi.next=o;return l}var o6=typeof AbortController<"u"?AbortController:function(){var s=[],o=this.signal={aborted:!1,addEventListener:function(l,h){s.push(h)}};this.abort=function(){o.aborted=!0,s.forEach(function(l){return l()})}},a6=e.unstable_scheduleCallback,c6=e.unstable_NormalPriority,Gt={$$typeof:O,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Kg(){return{controller:new o6,data:new Map,refCount:0}}function Cl(s){s.refCount--,s.refCount===0&&a6(c6,function(){s.controller.abort()})}var Il=null,Wg=0,Va=0,Ga=null;function l6(s,o){if(Il===null){var l=Il=[];Wg=0,Va=Xm(),Ga={status:"pending",value:void 0,then:function(h){l.push(h)}}}return Wg++,o.then(W1,W1),o}function W1(){if(--Wg===0&&Il!==null){Ga!==null&&(Ga.status="fulfilled");var s=Il;Il=null,Va=0,Ga=null;for(var o=0;o<s.length;o++)(0,s[o])()}}function u6(s,o){var l=[],h={status:"pending",value:null,reason:null,then:function(m){l.push(m)}};return s.then(function(){h.status="fulfilled",h.value=o;for(var m=0;m<l.length;m++)(0,l[m])(o)},function(m){for(h.status="rejected",h.reason=m,m=0;m<l.length;m++)(0,l[m])(void 0)}),h}var Y1=R.S;R.S=function(s,o){typeof o=="object"&&o!==null&&typeof o.then=="function"&&l6(s,o),Y1!==null&&Y1(s,o)};var Io=W(null);function Yg(){var s=Io.current;return s!==null?s:gt.pooledCache}function cd(s,o){o===null?se(Io,Io.current):se(Io,o.pool)}function X1(){var s=Yg();return s===null?null:{parent:Gt._currentValue,pool:s}}var Nl=Error(r(460)),Z1=Error(r(474)),ld=Error(r(542)),Xg={then:function(){}};function Q1(s){return s=s.status,s==="fulfilled"||s==="rejected"}function ud(){}function J1(s,o,l){switch(l=s[l],l===void 0?s.push(o):l!==o&&(o.then(ud,ud),o=l),o.status){case"fulfilled":return o.value;case"rejected":throw s=o.reason,tE(s),s;default:if(typeof o.status=="string")o.then(ud,ud);else{if(s=gt,s!==null&&100<s.shellSuspendCounter)throw Error(r(482));s=o,s.status="pending",s.then(function(h){if(o.status==="pending"){var m=o;m.status="fulfilled",m.value=h}},function(h){if(o.status==="pending"){var m=o;m.status="rejected",m.reason=h}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw s=o.reason,tE(s),s}throw $l=o,Nl}}var $l=null;function eE(){if($l===null)throw Error(r(459));var s=$l;return $l=null,s}function tE(s){if(s===Nl||s===ld)throw Error(r(483))}var As=!1;function Zg(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Qg(s,o){s=s.updateQueue,o.updateQueue===s&&(o.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function Rs(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function Os(s,o,l){var h=s.updateQueue;if(h===null)return null;if(h=h.shared,(tt&2)!==0){var m=h.pending;return m===null?o.next=o:(o.next=m.next,m.next=o),h.pending=o,o=nd(s),z1(s,null,l),o}return td(s,h,o,l),nd(s)}function Ul(s,o,l){if(o=o.updateQueue,o!==null&&(o=o.shared,(l&4194048)!==0)){var h=o.lanes;h&=s.pendingLanes,l|=h,o.lanes=l,Ww(s,l)}}function Jg(s,o){var l=s.updateQueue,h=s.alternate;if(h!==null&&(h=h.updateQueue,l===h)){var m=null,w=null;if(l=l.firstBaseUpdate,l!==null){do{var C={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};w===null?m=w=C:w=w.next=C,l=l.next}while(l!==null);w===null?m=w=o:w=w.next=o}else m=w=o;l={baseState:h.baseState,firstBaseUpdate:m,lastBaseUpdate:w,shared:h.shared,callbacks:h.callbacks},s.updateQueue=l;return}s=l.lastBaseUpdate,s===null?l.firstBaseUpdate=o:s.next=o,l.lastBaseUpdate=o}var em=!1;function Bl(){if(em){var s=Ga;if(s!==null)throw s}}function Pl(s,o,l,h){em=!1;var m=s.updateQueue;As=!1;var w=m.firstBaseUpdate,C=m.lastBaseUpdate,k=m.shared.pending;if(k!==null){m.shared.pending=null;var Y=k,oe=Y.next;Y.next=null,C===null?w=oe:C.next=oe,C=Y;var fe=s.alternate;fe!==null&&(fe=fe.updateQueue,k=fe.lastBaseUpdate,k!==C&&(k===null?fe.firstBaseUpdate=oe:k.next=oe,fe.lastBaseUpdate=Y))}if(w!==null){var ge=m.baseState;C=0,fe=oe=Y=null,k=w;do{var ae=k.lane&-536870913,ce=ae!==k.lane;if(ce?(qe&ae)===ae:(h&ae)===ae){ae!==0&&ae===Va&&(em=!0),fe!==null&&(fe=fe.next={lane:0,tag:k.tag,payload:k.payload,callback:null,next:null});e:{var De=s,Oe=k;ae=o;var ct=l;switch(Oe.tag){case 1:if(De=Oe.payload,typeof De=="function"){ge=De.call(ct,ge,ae);break e}ge=De;break e;case 3:De.flags=De.flags&-65537|128;case 0:if(De=Oe.payload,ae=typeof De=="function"?De.call(ct,ge,ae):De,ae==null)break e;ge=p({},ge,ae);break e;case 2:As=!0}}ae=k.callback,ae!==null&&(s.flags|=64,ce&&(s.flags|=8192),ce=m.callbacks,ce===null?m.callbacks=[ae]:ce.push(ae))}else ce={lane:ae,tag:k.tag,payload:k.payload,callback:k.callback,next:null},fe===null?(oe=fe=ce,Y=ge):fe=fe.next=ce,C|=ae;if(k=k.next,k===null){if(k=m.shared.pending,k===null)break;ce=k,k=ce.next,ce.next=null,m.lastBaseUpdate=ce,m.shared.pending=null}}while(!0);fe===null&&(Y=ge),m.baseState=Y,m.firstBaseUpdate=oe,m.lastBaseUpdate=fe,w===null&&(m.shared.lanes=0),Bs|=C,s.lanes=C,s.memoizedState=ge}}function nE(s,o){if(typeof s!="function")throw Error(r(191,s));s.call(o)}function rE(s,o){var l=s.callbacks;if(l!==null)for(s.callbacks=null,s=0;s<l.length;s++)nE(l[s],o)}var Ka=W(null),fd=W(0);function iE(s,o){s=Yi,se(fd,s),se(Ka,o),Yi=s|o.baseLanes}function tm(){se(fd,Yi),se(Ka,Ka.current)}function nm(){Yi=fd.current,te(Ka),te(fd)}var Ts=0,Ue=null,ot=null,kt=null,dd=!1,Wa=!1,No=!1,hd=0,kl=0,Ya=null,f6=0;function Ut(){throw Error(r(321))}function rm(s,o){if(o===null)return!1;for(var l=0;l<o.length&&l<s.length;l++)if(!or(s[l],o[l]))return!1;return!0}function im(s,o,l,h,m,w){return Ts=w,Ue=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,R.H=s===null||s.memoizedState===null?zE:qE,No=!1,w=l(h,m),No=!1,Wa&&(w=oE(o,l,h,m)),sE(s),w}function sE(s){R.H=vd;var o=ot!==null&&ot.next!==null;if(Ts=0,kt=ot=Ue=null,dd=!1,kl=0,Ya=null,o)throw Error(r(300));s===null||tn||(s=s.dependencies,s!==null&&od(s)&&(tn=!0))}function oE(s,o,l,h){Ue=s;var m=0;do{if(Wa&&(Ya=null),kl=0,Wa=!1,25<=m)throw Error(r(301));if(m+=1,kt=ot=null,s.updateQueue!=null){var w=s.updateQueue;w.lastEffect=null,w.events=null,w.stores=null,w.memoCache!=null&&(w.memoCache.index=0)}R.H=b6,w=o(l,h)}while(Wa);return w}function d6(){var s=R.H,o=s.useState()[0];return o=typeof o.then=="function"?Ml(o):o,s=s.useState()[0],(ot!==null?ot.memoizedState:null)!==s&&(Ue.flags|=1024),o}function sm(){var s=hd!==0;return hd=0,s}function om(s,o,l){o.updateQueue=s.updateQueue,o.flags&=-2053,s.lanes&=~l}function am(s){if(dd){for(s=s.memoizedState;s!==null;){var o=s.queue;o!==null&&(o.pending=null),s=s.next}dd=!1}Ts=0,kt=ot=Ue=null,Wa=!1,kl=hd=0,Ya=null}function jn(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return kt===null?Ue.memoizedState=kt=s:kt=kt.next=s,kt}function Mt(){if(ot===null){var s=Ue.alternate;s=s!==null?s.memoizedState:null}else s=ot.next;var o=kt===null?Ue.memoizedState:kt.next;if(o!==null)kt=o,ot=s;else{if(s===null)throw Ue.alternate===null?Error(r(467)):Error(r(310));ot=s,s={memoizedState:ot.memoizedState,baseState:ot.baseState,baseQueue:ot.baseQueue,queue:ot.queue,next:null},kt===null?Ue.memoizedState=kt=s:kt=kt.next=s}return kt}function cm(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ml(s){var o=kl;return kl+=1,Ya===null&&(Ya=[]),s=J1(Ya,s,o),o=Ue,(kt===null?o.memoizedState:kt.next)===null&&(o=o.alternate,R.H=o===null||o.memoizedState===null?zE:qE),s}function pd(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Ml(s);if(s.$$typeof===O)return xn(s)}throw Error(r(438,String(s)))}function lm(s){var o=null,l=Ue.updateQueue;if(l!==null&&(o=l.memoCache),o==null){var h=Ue.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(o={data:h.data.map(function(m){return m.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),l===null&&(l=cm(),Ue.updateQueue=l),l.memoCache=o,l=o.data[o.index],l===void 0)for(l=o.data[o.index]=Array(s),h=0;h<s;h++)l[h]=G;return o.index++,l}function Hi(s,o){return typeof o=="function"?o(s):o}function gd(s){var o=Mt();return um(o,ot,s)}function um(s,o,l){var h=s.queue;if(h===null)throw Error(r(311));h.lastRenderedReducer=l;var m=s.baseQueue,w=h.pending;if(w!==null){if(m!==null){var C=m.next;m.next=w.next,w.next=C}o.baseQueue=m=w,h.pending=null}if(w=s.baseState,m===null)s.memoizedState=w;else{o=m.next;var k=C=null,Y=null,oe=o,fe=!1;do{var ge=oe.lane&-536870913;if(ge!==oe.lane?(qe&ge)===ge:(Ts&ge)===ge){var ae=oe.revertLane;if(ae===0)Y!==null&&(Y=Y.next={lane:0,revertLane:0,action:oe.action,hasEagerState:oe.hasEagerState,eagerState:oe.eagerState,next:null}),ge===Va&&(fe=!0);else if((Ts&ae)===ae){oe=oe.next,ae===Va&&(fe=!0);continue}else ge={lane:0,revertLane:oe.revertLane,action:oe.action,hasEagerState:oe.hasEagerState,eagerState:oe.eagerState,next:null},Y===null?(k=Y=ge,C=w):Y=Y.next=ge,Ue.lanes|=ae,Bs|=ae;ge=oe.action,No&&l(w,ge),w=oe.hasEagerState?oe.eagerState:l(w,ge)}else ae={lane:ge,revertLane:oe.revertLane,action:oe.action,hasEagerState:oe.hasEagerState,eagerState:oe.eagerState,next:null},Y===null?(k=Y=ae,C=w):Y=Y.next=ae,Ue.lanes|=ge,Bs|=ge;oe=oe.next}while(oe!==null&&oe!==o);if(Y===null?C=w:Y.next=k,!or(w,s.memoizedState)&&(tn=!0,fe&&(l=Ga,l!==null)))throw l;s.memoizedState=w,s.baseState=C,s.baseQueue=Y,h.lastRenderedState=w}return m===null&&(h.lanes=0),[s.memoizedState,h.dispatch]}function fm(s){var o=Mt(),l=o.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=s;var h=l.dispatch,m=l.pending,w=o.memoizedState;if(m!==null){l.pending=null;var C=m=m.next;do w=s(w,C.action),C=C.next;while(C!==m);or(w,o.memoizedState)||(tn=!0),o.memoizedState=w,o.baseQueue===null&&(o.baseState=w),l.lastRenderedState=w}return[w,h]}function aE(s,o,l){var h=Ue,m=Mt(),w=Ye;if(w){if(l===void 0)throw Error(r(407));l=l()}else l=o();var C=!or((ot||m).memoizedState,l);C&&(m.memoizedState=l,tn=!0),m=m.queue;var k=uE.bind(null,h,m,s);if(Ll(2048,8,k,[s]),m.getSnapshot!==o||C||kt!==null&&kt.memoizedState.tag&1){if(h.flags|=2048,Xa(9,md(),lE.bind(null,h,m,l,o),null),gt===null)throw Error(r(349));w||(Ts&124)!==0||cE(h,o,l)}return l}function cE(s,o,l){s.flags|=16384,s={getSnapshot:o,value:l},o=Ue.updateQueue,o===null?(o=cm(),Ue.updateQueue=o,o.stores=[s]):(l=o.stores,l===null?o.stores=[s]:l.push(s))}function lE(s,o,l,h){o.value=l,o.getSnapshot=h,fE(o)&&dE(s)}function uE(s,o,l){return l(function(){fE(o)&&dE(s)})}function fE(s){var o=s.getSnapshot;s=s.value;try{var l=o();return!or(s,l)}catch{return!0}}function dE(s){var o=za(s,2);o!==null&&dr(o,s,2)}function dm(s){var o=jn();if(typeof s=="function"){var l=s;if(s=l(),No){_(!0);try{l()}finally{_(!1)}}}return o.memoizedState=o.baseState=s,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hi,lastRenderedState:s},o}function hE(s,o,l,h){return s.baseState=l,um(s,ot,typeof h=="function"?h:Hi)}function h6(s,o,l,h,m){if(bd(s))throw Error(r(485));if(s=o.action,s!==null){var w={payload:m,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(C){w.listeners.push(C)}};R.T!==null?l(!0):w.isTransition=!1,h(w),l=o.pending,l===null?(w.next=o.pending=w,pE(o,w)):(w.next=l.next,o.pending=l.next=w)}}function pE(s,o){var l=o.action,h=o.payload,m=s.state;if(o.isTransition){var w=R.T,C={};R.T=C;try{var k=l(m,h),Y=R.S;Y!==null&&Y(C,k),gE(s,o,k)}catch(oe){hm(s,o,oe)}finally{R.T=w}}else try{w=l(m,h),gE(s,o,w)}catch(oe){hm(s,o,oe)}}function gE(s,o,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(h){mE(s,o,h)},function(h){return hm(s,o,h)}):mE(s,o,l)}function mE(s,o,l){o.status="fulfilled",o.value=l,yE(o),s.state=l,o=s.pending,o!==null&&(l=o.next,l===o?s.pending=null:(l=l.next,o.next=l,pE(s,l)))}function hm(s,o,l){var h=s.pending;if(s.pending=null,h!==null){h=h.next;do o.status="rejected",o.reason=l,yE(o),o=o.next;while(o!==h)}s.action=null}function yE(s){s=s.listeners;for(var o=0;o<s.length;o++)(0,s[o])()}function bE(s,o){return o}function vE(s,o){if(Ye){var l=gt.formState;if(l!==null){e:{var h=Ue;if(Ye){if(Tt){t:{for(var m=Tt,w=ci;m.nodeType!==8;){if(!w){m=null;break t}if(m=Wr(m.nextSibling),m===null){m=null;break t}}w=m.data,m=w==="F!"||w==="F"?m:null}if(m){Tt=Wr(m.nextSibling),h=m.data==="F!";break e}}To(h)}h=!1}h&&(o=l[0])}}return l=jn(),l.memoizedState=l.baseState=o,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:bE,lastRenderedState:o},l.queue=h,l=ME.bind(null,Ue,h),h.dispatch=l,h=dm(!1),w=bm.bind(null,Ue,!1,h.queue),h=jn(),m={state:o,dispatch:null,action:s,pending:null},h.queue=m,l=h6.bind(null,Ue,m,w,l),m.dispatch=l,h.memoizedState=s,[o,l,!1]}function wE(s){var o=Mt();return EE(o,ot,s)}function EE(s,o,l){if(o=um(s,o,bE)[0],s=gd(Hi)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var h=Ml(o)}catch(C){throw C===Nl?ld:C}else h=o;o=Mt();var m=o.queue,w=m.dispatch;return l!==o.memoizedState&&(Ue.flags|=2048,Xa(9,md(),p6.bind(null,m,l),null)),[h,w,s]}function p6(s,o){s.action=o}function SE(s){var o=Mt(),l=ot;if(l!==null)return EE(o,l,s);Mt(),o=o.memoizedState,l=Mt();var h=l.queue.dispatch;return l.memoizedState=s,[o,h,!1]}function Xa(s,o,l,h){return s={tag:s,create:l,deps:h,inst:o,next:null},o=Ue.updateQueue,o===null&&(o=cm(),Ue.updateQueue=o),l=o.lastEffect,l===null?o.lastEffect=s.next=s:(h=l.next,l.next=s,s.next=h,o.lastEffect=s),s}function md(){return{destroy:void 0,resource:void 0}}function _E(){return Mt().memoizedState}function yd(s,o,l,h){var m=jn();h=h===void 0?null:h,Ue.flags|=s,m.memoizedState=Xa(1|o,md(),l,h)}function Ll(s,o,l,h){var m=Mt();h=h===void 0?null:h;var w=m.memoizedState.inst;ot!==null&&h!==null&&rm(h,ot.memoizedState.deps)?m.memoizedState=Xa(o,w,l,h):(Ue.flags|=s,m.memoizedState=Xa(1|o,w,l,h))}function xE(s,o){yd(8390656,8,s,o)}function AE(s,o){Ll(2048,8,s,o)}function RE(s,o){return Ll(4,2,s,o)}function OE(s,o){return Ll(4,4,s,o)}function TE(s,o){if(typeof o=="function"){s=s();var l=o(s);return function(){typeof l=="function"?l():o(null)}}if(o!=null)return s=s(),o.current=s,function(){o.current=null}}function DE(s,o,l){l=l!=null?l.concat([s]):null,Ll(4,4,TE.bind(null,o,s),l)}function pm(){}function CE(s,o){var l=Mt();o=o===void 0?null:o;var h=l.memoizedState;return o!==null&&rm(o,h[1])?h[0]:(l.memoizedState=[s,o],s)}function IE(s,o){var l=Mt();o=o===void 0?null:o;var h=l.memoizedState;if(o!==null&&rm(o,h[1]))return h[0];if(h=s(),No){_(!0);try{s()}finally{_(!1)}}return l.memoizedState=[h,o],h}function gm(s,o,l){return l===void 0||(Ts&1073741824)!==0?s.memoizedState=o:(s.memoizedState=l,s=U2(),Ue.lanes|=s,Bs|=s,l)}function NE(s,o,l,h){return or(l,o)?l:Ka.current!==null?(s=gm(s,l,h),or(s,o)||(tn=!0),s):(Ts&42)===0?(tn=!0,s.memoizedState=l):(s=U2(),Ue.lanes|=s,Bs|=s,o)}function $E(s,o,l,h,m){var w=L.p;L.p=w!==0&&8>w?w:8;var C=R.T,k={};R.T=k,bm(s,!1,o,l);try{var Y=m(),oe=R.S;if(oe!==null&&oe(k,Y),Y!==null&&typeof Y=="object"&&typeof Y.then=="function"){var fe=u6(Y,h);jl(s,o,fe,fr(s))}else jl(s,o,h,fr(s))}catch(ge){jl(s,o,{then:function(){},status:"rejected",reason:ge},fr())}finally{L.p=w,R.T=C}}function g6(){}function mm(s,o,l,h){if(s.tag!==5)throw Error(r(476));var m=UE(s).queue;$E(s,m,o,V,l===null?g6:function(){return BE(s),l(h)})}function UE(s){var o=s.memoizedState;if(o!==null)return o;o={memoizedState:V,baseState:V,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hi,lastRenderedState:V},next:null};var l={};return o.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hi,lastRenderedState:l},next:null},s.memoizedState=o,s=s.alternate,s!==null&&(s.memoizedState=o),o}function BE(s){var o=UE(s).next.queue;jl(s,o,{},fr())}function ym(){return xn(iu)}function PE(){return Mt().memoizedState}function kE(){return Mt().memoizedState}function m6(s){for(var o=s.return;o!==null;){switch(o.tag){case 24:case 3:var l=fr();s=Rs(l);var h=Os(o,s,l);h!==null&&(dr(h,o,l),Ul(h,o,l)),o={cache:Kg()},s.payload=o;return}o=o.return}}function y6(s,o,l){var h=fr();l={lane:h,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null},bd(s)?LE(o,l):(l=kg(s,o,l,h),l!==null&&(dr(l,s,h),jE(l,o,h)))}function ME(s,o,l){var h=fr();jl(s,o,l,h)}function jl(s,o,l,h){var m={lane:h,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null};if(bd(s))LE(o,m);else{var w=s.alternate;if(s.lanes===0&&(w===null||w.lanes===0)&&(w=o.lastRenderedReducer,w!==null))try{var C=o.lastRenderedState,k=w(C,l);if(m.hasEagerState=!0,m.eagerState=k,or(k,C))return td(s,o,m,0),gt===null&&ed(),!1}catch{}finally{}if(l=kg(s,o,m,h),l!==null)return dr(l,s,h),jE(l,o,h),!0}return!1}function bm(s,o,l,h){if(h={lane:2,revertLane:Xm(),action:h,hasEagerState:!1,eagerState:null,next:null},bd(s)){if(o)throw Error(r(479))}else o=kg(s,l,h,2),o!==null&&dr(o,s,2)}function bd(s){var o=s.alternate;return s===Ue||o!==null&&o===Ue}function LE(s,o){Wa=dd=!0;var l=s.pending;l===null?o.next=o:(o.next=l.next,l.next=o),s.pending=o}function jE(s,o,l){if((l&4194048)!==0){var h=o.lanes;h&=s.pendingLanes,l|=h,o.lanes=l,Ww(s,l)}}var vd={readContext:xn,use:pd,useCallback:Ut,useContext:Ut,useEffect:Ut,useImperativeHandle:Ut,useLayoutEffect:Ut,useInsertionEffect:Ut,useMemo:Ut,useReducer:Ut,useRef:Ut,useState:Ut,useDebugValue:Ut,useDeferredValue:Ut,useTransition:Ut,useSyncExternalStore:Ut,useId:Ut,useHostTransitionStatus:Ut,useFormState:Ut,useActionState:Ut,useOptimistic:Ut,useMemoCache:Ut,useCacheRefresh:Ut},zE={readContext:xn,use:pd,useCallback:function(s,o){return jn().memoizedState=[s,o===void 0?null:o],s},useContext:xn,useEffect:xE,useImperativeHandle:function(s,o,l){l=l!=null?l.concat([s]):null,yd(4194308,4,TE.bind(null,o,s),l)},useLayoutEffect:function(s,o){return yd(4194308,4,s,o)},useInsertionEffect:function(s,o){yd(4,2,s,o)},useMemo:function(s,o){var l=jn();o=o===void 0?null:o;var h=s();if(No){_(!0);try{s()}finally{_(!1)}}return l.memoizedState=[h,o],h},useReducer:function(s,o,l){var h=jn();if(l!==void 0){var m=l(o);if(No){_(!0);try{l(o)}finally{_(!1)}}}else m=o;return h.memoizedState=h.baseState=m,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:m},h.queue=s,s=s.dispatch=y6.bind(null,Ue,s),[h.memoizedState,s]},useRef:function(s){var o=jn();return s={current:s},o.memoizedState=s},useState:function(s){s=dm(s);var o=s.queue,l=ME.bind(null,Ue,o);return o.dispatch=l,[s.memoizedState,l]},useDebugValue:pm,useDeferredValue:function(s,o){var l=jn();return gm(l,s,o)},useTransition:function(){var s=dm(!1);return s=$E.bind(null,Ue,s.queue,!0,!1),jn().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,o,l){var h=Ue,m=jn();if(Ye){if(l===void 0)throw Error(r(407));l=l()}else{if(l=o(),gt===null)throw Error(r(349));(qe&124)!==0||cE(h,o,l)}m.memoizedState=l;var w={value:l,getSnapshot:o};return m.queue=w,xE(uE.bind(null,h,w,s),[s]),h.flags|=2048,Xa(9,md(),lE.bind(null,h,w,l,o),null),l},useId:function(){var s=jn(),o=gt.identifierPrefix;if(Ye){var l=ji,h=Li;l=(h&~(1<<32-A(h)-1)).toString(32)+l,o=""+o+"R"+l,l=hd++,0<l&&(o+="H"+l.toString(32)),o+=""}else l=f6++,o=""+o+"r"+l.toString(32)+"";return s.memoizedState=o},useHostTransitionStatus:ym,useFormState:vE,useActionState:vE,useOptimistic:function(s){var o=jn();o.memoizedState=o.baseState=s;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=l,o=bm.bind(null,Ue,!0,l),l.dispatch=o,[s,o]},useMemoCache:lm,useCacheRefresh:function(){return jn().memoizedState=m6.bind(null,Ue)}},qE={readContext:xn,use:pd,useCallback:CE,useContext:xn,useEffect:AE,useImperativeHandle:DE,useInsertionEffect:RE,useLayoutEffect:OE,useMemo:IE,useReducer:gd,useRef:_E,useState:function(){return gd(Hi)},useDebugValue:pm,useDeferredValue:function(s,o){var l=Mt();return NE(l,ot.memoizedState,s,o)},useTransition:function(){var s=gd(Hi)[0],o=Mt().memoizedState;return[typeof s=="boolean"?s:Ml(s),o]},useSyncExternalStore:aE,useId:PE,useHostTransitionStatus:ym,useFormState:wE,useActionState:wE,useOptimistic:function(s,o){var l=Mt();return hE(l,ot,s,o)},useMemoCache:lm,useCacheRefresh:kE},b6={readContext:xn,use:pd,useCallback:CE,useContext:xn,useEffect:AE,useImperativeHandle:DE,useInsertionEffect:RE,useLayoutEffect:OE,useMemo:IE,useReducer:fm,useRef:_E,useState:function(){return fm(Hi)},useDebugValue:pm,useDeferredValue:function(s,o){var l=Mt();return ot===null?gm(l,s,o):NE(l,ot.memoizedState,s,o)},useTransition:function(){var s=fm(Hi)[0],o=Mt().memoizedState;return[typeof s=="boolean"?s:Ml(s),o]},useSyncExternalStore:aE,useId:PE,useHostTransitionStatus:ym,useFormState:SE,useActionState:SE,useOptimistic:function(s,o){var l=Mt();return ot!==null?hE(l,ot,s,o):(l.baseState=s,[s,l.queue.dispatch])},useMemoCache:lm,useCacheRefresh:kE},Za=null,zl=0;function wd(s){var o=zl;return zl+=1,Za===null&&(Za=[]),J1(Za,s,o)}function ql(s,o){o=o.props.ref,s.ref=o!==void 0?o:null}function Ed(s,o){throw o.$$typeof===g?Error(r(525)):(s=Object.prototype.toString.call(o),Error(r(31,s==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":s)))}function HE(s){var o=s._init;return o(s._payload)}function FE(s){function o(ee,Z){if(s){var ie=ee.deletions;ie===null?(ee.deletions=[Z],ee.flags|=16):ie.push(Z)}}function l(ee,Z){if(!s)return null;for(;Z!==null;)o(ee,Z),Z=Z.sibling;return null}function h(ee){for(var Z=new Map;ee!==null;)ee.key!==null?Z.set(ee.key,ee):Z.set(ee.index,ee),ee=ee.sibling;return Z}function m(ee,Z){return ee=Mi(ee,Z),ee.index=0,ee.sibling=null,ee}function w(ee,Z,ie){return ee.index=ie,s?(ie=ee.alternate,ie!==null?(ie=ie.index,ie<Z?(ee.flags|=67108866,Z):ie):(ee.flags|=67108866,Z)):(ee.flags|=1048576,Z)}function C(ee){return s&&ee.alternate===null&&(ee.flags|=67108866),ee}function k(ee,Z,ie,pe){return Z===null||Z.tag!==6?(Z=Lg(ie,ee.mode,pe),Z.return=ee,Z):(Z=m(Z,ie),Z.return=ee,Z)}function Y(ee,Z,ie,pe){var Se=ie.type;return Se===v?fe(ee,Z,ie.props.children,pe,ie.key):Z!==null&&(Z.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===z&&HE(Se)===Z.type)?(Z=m(Z,ie.props),ql(Z,ie),Z.return=ee,Z):(Z=rd(ie.type,ie.key,ie.props,null,ee.mode,pe),ql(Z,ie),Z.return=ee,Z)}function oe(ee,Z,ie,pe){return Z===null||Z.tag!==4||Z.stateNode.containerInfo!==ie.containerInfo||Z.stateNode.implementation!==ie.implementation?(Z=jg(ie,ee.mode,pe),Z.return=ee,Z):(Z=m(Z,ie.children||[]),Z.return=ee,Z)}function fe(ee,Z,ie,pe,Se){return Z===null||Z.tag!==7?(Z=xo(ie,ee.mode,pe,Se),Z.return=ee,Z):(Z=m(Z,ie),Z.return=ee,Z)}function ge(ee,Z,ie){if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return Z=Lg(""+Z,ee.mode,ie),Z.return=ee,Z;if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case y:return ie=rd(Z.type,Z.key,Z.props,null,ee.mode,ie),ql(ie,Z),ie.return=ee,ie;case b:return Z=jg(Z,ee.mode,ie),Z.return=ee,Z;case z:var pe=Z._init;return Z=pe(Z._payload),ge(ee,Z,ie)}if(D(Z)||K(Z))return Z=xo(Z,ee.mode,ie,null),Z.return=ee,Z;if(typeof Z.then=="function")return ge(ee,wd(Z),ie);if(Z.$$typeof===O)return ge(ee,ad(ee,Z),ie);Ed(ee,Z)}return null}function ae(ee,Z,ie,pe){var Se=Z!==null?Z.key:null;if(typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint")return Se!==null?null:k(ee,Z,""+ie,pe);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case y:return ie.key===Se?Y(ee,Z,ie,pe):null;case b:return ie.key===Se?oe(ee,Z,ie,pe):null;case z:return Se=ie._init,ie=Se(ie._payload),ae(ee,Z,ie,pe)}if(D(ie)||K(ie))return Se!==null?null:fe(ee,Z,ie,pe,null);if(typeof ie.then=="function")return ae(ee,Z,wd(ie),pe);if(ie.$$typeof===O)return ae(ee,Z,ad(ee,ie),pe);Ed(ee,ie)}return null}function ce(ee,Z,ie,pe,Se){if(typeof pe=="string"&&pe!==""||typeof pe=="number"||typeof pe=="bigint")return ee=ee.get(ie)||null,k(Z,ee,""+pe,Se);if(typeof pe=="object"&&pe!==null){switch(pe.$$typeof){case y:return ee=ee.get(pe.key===null?ie:pe.key)||null,Y(Z,ee,pe,Se);case b:return ee=ee.get(pe.key===null?ie:pe.key)||null,oe(Z,ee,pe,Se);case z:var Be=pe._init;return pe=Be(pe._payload),ce(ee,Z,ie,pe,Se)}if(D(pe)||K(pe))return ee=ee.get(ie)||null,fe(Z,ee,pe,Se,null);if(typeof pe.then=="function")return ce(ee,Z,ie,wd(pe),Se);if(pe.$$typeof===O)return ce(ee,Z,ie,ad(Z,pe),Se);Ed(Z,pe)}return null}function De(ee,Z,ie,pe){for(var Se=null,Be=null,xe=Z,Te=Z=0,rn=null;xe!==null&&Te<ie.length;Te++){xe.index>Te?(rn=xe,xe=null):rn=xe.sibling;var Fe=ae(ee,xe,ie[Te],pe);if(Fe===null){xe===null&&(xe=rn);break}s&&xe&&Fe.alternate===null&&o(ee,xe),Z=w(Fe,Z,Te),Be===null?Se=Fe:Be.sibling=Fe,Be=Fe,xe=rn}if(Te===ie.length)return l(ee,xe),Ye&&Ro(ee,Te),Se;if(xe===null){for(;Te<ie.length;Te++)xe=ge(ee,ie[Te],pe),xe!==null&&(Z=w(xe,Z,Te),Be===null?Se=xe:Be.sibling=xe,Be=xe);return Ye&&Ro(ee,Te),Se}for(xe=h(xe);Te<ie.length;Te++)rn=ce(xe,ee,Te,ie[Te],pe),rn!==null&&(s&&rn.alternate!==null&&xe.delete(rn.key===null?Te:rn.key),Z=w(rn,Z,Te),Be===null?Se=rn:Be.sibling=rn,Be=rn);return s&&xe.forEach(function(Fs){return o(ee,Fs)}),Ye&&Ro(ee,Te),Se}function Oe(ee,Z,ie,pe){if(ie==null)throw Error(r(151));for(var Se=null,Be=null,xe=Z,Te=Z=0,rn=null,Fe=ie.next();xe!==null&&!Fe.done;Te++,Fe=ie.next()){xe.index>Te?(rn=xe,xe=null):rn=xe.sibling;var Fs=ae(ee,xe,Fe.value,pe);if(Fs===null){xe===null&&(xe=rn);break}s&&xe&&Fs.alternate===null&&o(ee,xe),Z=w(Fs,Z,Te),Be===null?Se=Fs:Be.sibling=Fs,Be=Fs,xe=rn}if(Fe.done)return l(ee,xe),Ye&&Ro(ee,Te),Se;if(xe===null){for(;!Fe.done;Te++,Fe=ie.next())Fe=ge(ee,Fe.value,pe),Fe!==null&&(Z=w(Fe,Z,Te),Be===null?Se=Fe:Be.sibling=Fe,Be=Fe);return Ye&&Ro(ee,Te),Se}for(xe=h(xe);!Fe.done;Te++,Fe=ie.next())Fe=ce(xe,ee,Te,Fe.value,pe),Fe!==null&&(s&&Fe.alternate!==null&&xe.delete(Fe.key===null?Te:Fe.key),Z=w(Fe,Z,Te),Be===null?Se=Fe:Be.sibling=Fe,Be=Fe);return s&&xe.forEach(function(v4){return o(ee,v4)}),Ye&&Ro(ee,Te),Se}function ct(ee,Z,ie,pe){if(typeof ie=="object"&&ie!==null&&ie.type===v&&ie.key===null&&(ie=ie.props.children),typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case y:e:{for(var Se=ie.key;Z!==null;){if(Z.key===Se){if(Se=ie.type,Se===v){if(Z.tag===7){l(ee,Z.sibling),pe=m(Z,ie.props.children),pe.return=ee,ee=pe;break e}}else if(Z.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===z&&HE(Se)===Z.type){l(ee,Z.sibling),pe=m(Z,ie.props),ql(pe,ie),pe.return=ee,ee=pe;break e}l(ee,Z);break}else o(ee,Z);Z=Z.sibling}ie.type===v?(pe=xo(ie.props.children,ee.mode,pe,ie.key),pe.return=ee,ee=pe):(pe=rd(ie.type,ie.key,ie.props,null,ee.mode,pe),ql(pe,ie),pe.return=ee,ee=pe)}return C(ee);case b:e:{for(Se=ie.key;Z!==null;){if(Z.key===Se)if(Z.tag===4&&Z.stateNode.containerInfo===ie.containerInfo&&Z.stateNode.implementation===ie.implementation){l(ee,Z.sibling),pe=m(Z,ie.children||[]),pe.return=ee,ee=pe;break e}else{l(ee,Z);break}else o(ee,Z);Z=Z.sibling}pe=jg(ie,ee.mode,pe),pe.return=ee,ee=pe}return C(ee);case z:return Se=ie._init,ie=Se(ie._payload),ct(ee,Z,ie,pe)}if(D(ie))return De(ee,Z,ie,pe);if(K(ie)){if(Se=K(ie),typeof Se!="function")throw Error(r(150));return ie=Se.call(ie),Oe(ee,Z,ie,pe)}if(typeof ie.then=="function")return ct(ee,Z,wd(ie),pe);if(ie.$$typeof===O)return ct(ee,Z,ad(ee,ie),pe);Ed(ee,ie)}return typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint"?(ie=""+ie,Z!==null&&Z.tag===6?(l(ee,Z.sibling),pe=m(Z,ie),pe.return=ee,ee=pe):(l(ee,Z),pe=Lg(ie,ee.mode,pe),pe.return=ee,ee=pe),C(ee)):l(ee,Z)}return function(ee,Z,ie,pe){try{zl=0;var Se=ct(ee,Z,ie,pe);return Za=null,Se}catch(xe){if(xe===Nl||xe===ld)throw xe;var Be=ar(29,xe,null,ee.mode);return Be.lanes=pe,Be.return=ee,Be}finally{}}}var Qa=FE(!0),VE=FE(!1),Dr=W(null),li=null;function Ds(s){var o=s.alternate;se(Kt,Kt.current&1),se(Dr,s),li===null&&(o===null||Ka.current!==null||o.memoizedState!==null)&&(li=s)}function GE(s){if(s.tag===22){if(se(Kt,Kt.current),se(Dr,s),li===null){var o=s.alternate;o!==null&&o.memoizedState!==null&&(li=s)}}else Cs()}function Cs(){se(Kt,Kt.current),se(Dr,Dr.current)}function Fi(s){te(Dr),li===s&&(li=null),te(Kt)}var Kt=W(0);function Sd(s){for(var o=s;o!==null;){if(o.tag===13){var l=o.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||cy(l)))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}function vm(s,o,l,h){o=s.memoizedState,l=l(h,o),l=l==null?o:p({},o,l),s.memoizedState=l,s.lanes===0&&(s.updateQueue.baseState=l)}var wm={enqueueSetState:function(s,o,l){s=s._reactInternals;var h=fr(),m=Rs(h);m.payload=o,l!=null&&(m.callback=l),o=Os(s,m,h),o!==null&&(dr(o,s,h),Ul(o,s,h))},enqueueReplaceState:function(s,o,l){s=s._reactInternals;var h=fr(),m=Rs(h);m.tag=1,m.payload=o,l!=null&&(m.callback=l),o=Os(s,m,h),o!==null&&(dr(o,s,h),Ul(o,s,h))},enqueueForceUpdate:function(s,o){s=s._reactInternals;var l=fr(),h=Rs(l);h.tag=2,o!=null&&(h.callback=o),o=Os(s,h,l),o!==null&&(dr(o,s,l),Ul(o,s,l))}};function KE(s,o,l,h,m,w,C){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(h,w,C):o.prototype&&o.prototype.isPureReactComponent?!xl(l,h)||!xl(m,w):!0}function WE(s,o,l,h){s=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(l,h),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(l,h),o.state!==s&&wm.enqueueReplaceState(o,o.state,null)}function $o(s,o){var l=o;if("ref"in o){l={};for(var h in o)h!=="ref"&&(l[h]=o[h])}if(s=s.defaultProps){l===o&&(l=p({},l));for(var m in s)l[m]===void 0&&(l[m]=s[m])}return l}var _d=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)};function YE(s){_d(s)}function XE(s){console.error(s)}function ZE(s){_d(s)}function xd(s,o){try{var l=s.onUncaughtError;l(o.value,{componentStack:o.stack})}catch(h){setTimeout(function(){throw h})}}function QE(s,o,l){try{var h=s.onCaughtError;h(l.value,{componentStack:l.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function Em(s,o,l){return l=Rs(l),l.tag=3,l.payload={element:null},l.callback=function(){xd(s,o)},l}function JE(s){return s=Rs(s),s.tag=3,s}function e2(s,o,l,h){var m=l.type.getDerivedStateFromError;if(typeof m=="function"){var w=h.value;s.payload=function(){return m(w)},s.callback=function(){QE(o,l,h)}}var C=l.stateNode;C!==null&&typeof C.componentDidCatch=="function"&&(s.callback=function(){QE(o,l,h),typeof m!="function"&&(Ps===null?Ps=new Set([this]):Ps.add(this));var k=h.stack;this.componentDidCatch(h.value,{componentStack:k!==null?k:""})})}function v6(s,o,l,h,m){if(l.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(o=l.alternate,o!==null&&Dl(o,l,m,!0),l=Dr.current,l!==null){switch(l.tag){case 13:return li===null?Vm():l.alternate===null&&Dt===0&&(Dt=3),l.flags&=-257,l.flags|=65536,l.lanes=m,h===Xg?l.flags|=16384:(o=l.updateQueue,o===null?l.updateQueue=new Set([h]):o.add(h),Km(s,h,m)),!1;case 22:return l.flags|=65536,h===Xg?l.flags|=16384:(o=l.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([h])},l.updateQueue=o):(l=o.retryQueue,l===null?o.retryQueue=new Set([h]):l.add(h)),Km(s,h,m)),!1}throw Error(r(435,l.tag))}return Km(s,h,m),Vm(),!1}if(Ye)return o=Dr.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=m,h!==Hg&&(s=Error(r(422),{cause:h}),Tl(Ar(s,l)))):(h!==Hg&&(o=Error(r(423),{cause:h}),Tl(Ar(o,l))),s=s.current.alternate,s.flags|=65536,m&=-m,s.lanes|=m,h=Ar(h,l),m=Em(s.stateNode,h,m),Jg(s,m),Dt!==4&&(Dt=2)),!1;var w=Error(r(520),{cause:h});if(w=Ar(w,l),Yl===null?Yl=[w]:Yl.push(w),Dt!==4&&(Dt=2),o===null)return!0;h=Ar(h,l),l=o;do{switch(l.tag){case 3:return l.flags|=65536,s=m&-m,l.lanes|=s,s=Em(l.stateNode,h,s),Jg(l,s),!1;case 1:if(o=l.type,w=l.stateNode,(l.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Ps===null||!Ps.has(w))))return l.flags|=65536,m&=-m,l.lanes|=m,m=JE(m),e2(m,s,l,h),Jg(l,m),!1}l=l.return}while(l!==null);return!1}var t2=Error(r(461)),tn=!1;function un(s,o,l,h){o.child=s===null?VE(o,null,l,h):Qa(o,s.child,l,h)}function n2(s,o,l,h,m){l=l.render;var w=o.ref;if("ref"in h){var C={};for(var k in h)k!=="ref"&&(C[k]=h[k])}else C=h;return Co(o),h=im(s,o,l,C,w,m),k=sm(),s!==null&&!tn?(om(s,o,m),Vi(s,o,m)):(Ye&&k&&zg(o),o.flags|=1,un(s,o,h,m),o.child)}function r2(s,o,l,h,m){if(s===null){var w=l.type;return typeof w=="function"&&!Mg(w)&&w.defaultProps===void 0&&l.compare===null?(o.tag=15,o.type=w,i2(s,o,w,h,m)):(s=rd(l.type,null,h,o,o.mode,m),s.ref=o.ref,s.return=o,o.child=s)}if(w=s.child,!Dm(s,m)){var C=w.memoizedProps;if(l=l.compare,l=l!==null?l:xl,l(C,h)&&s.ref===o.ref)return Vi(s,o,m)}return o.flags|=1,s=Mi(w,h),s.ref=o.ref,s.return=o,o.child=s}function i2(s,o,l,h,m){if(s!==null){var w=s.memoizedProps;if(xl(w,h)&&s.ref===o.ref)if(tn=!1,o.pendingProps=h=w,Dm(s,m))(s.flags&131072)!==0&&(tn=!0);else return o.lanes=s.lanes,Vi(s,o,m)}return Sm(s,o,l,h,m)}function s2(s,o,l){var h=o.pendingProps,m=h.children,w=s!==null?s.memoizedState:null;if(h.mode==="hidden"){if((o.flags&128)!==0){if(h=w!==null?w.baseLanes|l:l,s!==null){for(m=o.child=s.child,w=0;m!==null;)w=w|m.lanes|m.childLanes,m=m.sibling;o.childLanes=w&~h}else o.childLanes=0,o.child=null;return o2(s,o,h,l)}if((l&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},s!==null&&cd(o,w!==null?w.cachePool:null),w!==null?iE(o,w):tm(),GE(o);else return o.lanes=o.childLanes=536870912,o2(s,o,w!==null?w.baseLanes|l:l,l)}else w!==null?(cd(o,w.cachePool),iE(o,w),Cs(),o.memoizedState=null):(s!==null&&cd(o,null),tm(),Cs());return un(s,o,m,l),o.child}function o2(s,o,l,h){var m=Yg();return m=m===null?null:{parent:Gt._currentValue,pool:m},o.memoizedState={baseLanes:l,cachePool:m},s!==null&&cd(o,null),tm(),GE(o),s!==null&&Dl(s,o,h,!0),null}function Ad(s,o){var l=o.ref;if(l===null)s!==null&&s.ref!==null&&(o.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(r(284));(s===null||s.ref!==l)&&(o.flags|=4194816)}}function Sm(s,o,l,h,m){return Co(o),l=im(s,o,l,h,void 0,m),h=sm(),s!==null&&!tn?(om(s,o,m),Vi(s,o,m)):(Ye&&h&&zg(o),o.flags|=1,un(s,o,l,m),o.child)}function a2(s,o,l,h,m,w){return Co(o),o.updateQueue=null,l=oE(o,h,l,m),sE(s),h=sm(),s!==null&&!tn?(om(s,o,w),Vi(s,o,w)):(Ye&&h&&zg(o),o.flags|=1,un(s,o,l,w),o.child)}function c2(s,o,l,h,m){if(Co(o),o.stateNode===null){var w=qa,C=l.contextType;typeof C=="object"&&C!==null&&(w=xn(C)),w=new l(h,w),o.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=wm,o.stateNode=w,w._reactInternals=o,w=o.stateNode,w.props=h,w.state=o.memoizedState,w.refs={},Zg(o),C=l.contextType,w.context=typeof C=="object"&&C!==null?xn(C):qa,w.state=o.memoizedState,C=l.getDerivedStateFromProps,typeof C=="function"&&(vm(o,l,C,h),w.state=o.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(C=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),C!==w.state&&wm.enqueueReplaceState(w,w.state,null),Pl(o,h,w,m),Bl(),w.state=o.memoizedState),typeof w.componentDidMount=="function"&&(o.flags|=4194308),h=!0}else if(s===null){w=o.stateNode;var k=o.memoizedProps,Y=$o(l,k);w.props=Y;var oe=w.context,fe=l.contextType;C=qa,typeof fe=="object"&&fe!==null&&(C=xn(fe));var ge=l.getDerivedStateFromProps;fe=typeof ge=="function"||typeof w.getSnapshotBeforeUpdate=="function",k=o.pendingProps!==k,fe||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(k||oe!==C)&&WE(o,w,h,C),As=!1;var ae=o.memoizedState;w.state=ae,Pl(o,h,w,m),Bl(),oe=o.memoizedState,k||ae!==oe||As?(typeof ge=="function"&&(vm(o,l,ge,h),oe=o.memoizedState),(Y=As||KE(o,l,Y,h,ae,oe,C))?(fe||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(o.flags|=4194308)):(typeof w.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=h,o.memoizedState=oe),w.props=h,w.state=oe,w.context=C,h=Y):(typeof w.componentDidMount=="function"&&(o.flags|=4194308),h=!1)}else{w=o.stateNode,Qg(s,o),C=o.memoizedProps,fe=$o(l,C),w.props=fe,ge=o.pendingProps,ae=w.context,oe=l.contextType,Y=qa,typeof oe=="object"&&oe!==null&&(Y=xn(oe)),k=l.getDerivedStateFromProps,(oe=typeof k=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(C!==ge||ae!==Y)&&WE(o,w,h,Y),As=!1,ae=o.memoizedState,w.state=ae,Pl(o,h,w,m),Bl();var ce=o.memoizedState;C!==ge||ae!==ce||As||s!==null&&s.dependencies!==null&&od(s.dependencies)?(typeof k=="function"&&(vm(o,l,k,h),ce=o.memoizedState),(fe=As||KE(o,l,fe,h,ae,ce,Y)||s!==null&&s.dependencies!==null&&od(s.dependencies))?(oe||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(h,ce,Y),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(h,ce,Y)),typeof w.componentDidUpdate=="function"&&(o.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof w.componentDidUpdate!="function"||C===s.memoizedProps&&ae===s.memoizedState||(o.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||C===s.memoizedProps&&ae===s.memoizedState||(o.flags|=1024),o.memoizedProps=h,o.memoizedState=ce),w.props=h,w.state=ce,w.context=Y,h=fe):(typeof w.componentDidUpdate!="function"||C===s.memoizedProps&&ae===s.memoizedState||(o.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||C===s.memoizedProps&&ae===s.memoizedState||(o.flags|=1024),h=!1)}return w=h,Ad(s,o),h=(o.flags&128)!==0,w||h?(w=o.stateNode,l=h&&typeof l.getDerivedStateFromError!="function"?null:w.render(),o.flags|=1,s!==null&&h?(o.child=Qa(o,s.child,null,m),o.child=Qa(o,null,l,m)):un(s,o,l,m),o.memoizedState=w.state,s=o.child):s=Vi(s,o,m),s}function l2(s,o,l,h){return Ol(),o.flags|=256,un(s,o,l,h),o.child}var _m={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function xm(s){return{baseLanes:s,cachePool:X1()}}function Am(s,o,l){return s=s!==null?s.childLanes&~l:0,o&&(s|=Cr),s}function u2(s,o,l){var h=o.pendingProps,m=!1,w=(o.flags&128)!==0,C;if((C=w)||(C=s!==null&&s.memoizedState===null?!1:(Kt.current&2)!==0),C&&(m=!0,o.flags&=-129),C=(o.flags&32)!==0,o.flags&=-33,s===null){if(Ye){if(m?Ds(o):Cs(),Ye){var k=Tt,Y;if(Y=k){e:{for(Y=k,k=ci;Y.nodeType!==8;){if(!k){k=null;break e}if(Y=Wr(Y.nextSibling),Y===null){k=null;break e}}k=Y}k!==null?(o.memoizedState={dehydrated:k,treeContext:Ao!==null?{id:Li,overflow:ji}:null,retryLane:536870912,hydrationErrors:null},Y=ar(18,null,null,0),Y.stateNode=k,Y.return=o,o.child=Y,$n=o,Tt=null,Y=!0):Y=!1}Y||To(o)}if(k=o.memoizedState,k!==null&&(k=k.dehydrated,k!==null))return cy(k)?o.lanes=32:o.lanes=536870912,null;Fi(o)}return k=h.children,h=h.fallback,m?(Cs(),m=o.mode,k=Rd({mode:"hidden",children:k},m),h=xo(h,m,l,null),k.return=o,h.return=o,k.sibling=h,o.child=k,m=o.child,m.memoizedState=xm(l),m.childLanes=Am(s,C,l),o.memoizedState=_m,h):(Ds(o),Rm(o,k))}if(Y=s.memoizedState,Y!==null&&(k=Y.dehydrated,k!==null)){if(w)o.flags&256?(Ds(o),o.flags&=-257,o=Om(s,o,l)):o.memoizedState!==null?(Cs(),o.child=s.child,o.flags|=128,o=null):(Cs(),m=h.fallback,k=o.mode,h=Rd({mode:"visible",children:h.children},k),m=xo(m,k,l,null),m.flags|=2,h.return=o,m.return=o,h.sibling=m,o.child=h,Qa(o,s.child,null,l),h=o.child,h.memoizedState=xm(l),h.childLanes=Am(s,C,l),o.memoizedState=_m,o=m);else if(Ds(o),cy(k)){if(C=k.nextSibling&&k.nextSibling.dataset,C)var oe=C.dgst;C=oe,h=Error(r(419)),h.stack="",h.digest=C,Tl({value:h,source:null,stack:null}),o=Om(s,o,l)}else if(tn||Dl(s,o,l,!1),C=(l&s.childLanes)!==0,tn||C){if(C=gt,C!==null&&(h=l&-l,h=(h&42)!==0?1:lg(h),h=(h&(C.suspendedLanes|l))!==0?0:h,h!==0&&h!==Y.retryLane))throw Y.retryLane=h,za(s,h),dr(C,s,h),t2;k.data==="$?"||Vm(),o=Om(s,o,l)}else k.data==="$?"?(o.flags|=192,o.child=s.child,o=null):(s=Y.treeContext,Tt=Wr(k.nextSibling),$n=o,Ye=!0,Oo=null,ci=!1,s!==null&&(Or[Tr++]=Li,Or[Tr++]=ji,Or[Tr++]=Ao,Li=s.id,ji=s.overflow,Ao=o),o=Rm(o,h.children),o.flags|=4096);return o}return m?(Cs(),m=h.fallback,k=o.mode,Y=s.child,oe=Y.sibling,h=Mi(Y,{mode:"hidden",children:h.children}),h.subtreeFlags=Y.subtreeFlags&65011712,oe!==null?m=Mi(oe,m):(m=xo(m,k,l,null),m.flags|=2),m.return=o,h.return=o,h.sibling=m,o.child=h,h=m,m=o.child,k=s.child.memoizedState,k===null?k=xm(l):(Y=k.cachePool,Y!==null?(oe=Gt._currentValue,Y=Y.parent!==oe?{parent:oe,pool:oe}:Y):Y=X1(),k={baseLanes:k.baseLanes|l,cachePool:Y}),m.memoizedState=k,m.childLanes=Am(s,C,l),o.memoizedState=_m,h):(Ds(o),l=s.child,s=l.sibling,l=Mi(l,{mode:"visible",children:h.children}),l.return=o,l.sibling=null,s!==null&&(C=o.deletions,C===null?(o.deletions=[s],o.flags|=16):C.push(s)),o.child=l,o.memoizedState=null,l)}function Rm(s,o){return o=Rd({mode:"visible",children:o},s.mode),o.return=s,s.child=o}function Rd(s,o){return s=ar(22,s,null,o),s.lanes=0,s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},s}function Om(s,o,l){return Qa(o,s.child,null,l),s=Rm(o,o.pendingProps.children),s.flags|=2,o.memoizedState=null,s}function f2(s,o,l){s.lanes|=o;var h=s.alternate;h!==null&&(h.lanes|=o),Vg(s.return,o,l)}function Tm(s,o,l,h,m){var w=s.memoizedState;w===null?s.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:h,tail:l,tailMode:m}:(w.isBackwards=o,w.rendering=null,w.renderingStartTime=0,w.last=h,w.tail=l,w.tailMode=m)}function d2(s,o,l){var h=o.pendingProps,m=h.revealOrder,w=h.tail;if(un(s,o,h.children,l),h=Kt.current,(h&2)!==0)h=h&1|2,o.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=o.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&f2(s,l,o);else if(s.tag===19)f2(s,l,o);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break e;for(;s.sibling===null;){if(s.return===null||s.return===o)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}h&=1}switch(se(Kt,h),m){case"forwards":for(l=o.child,m=null;l!==null;)s=l.alternate,s!==null&&Sd(s)===null&&(m=l),l=l.sibling;l=m,l===null?(m=o.child,o.child=null):(m=l.sibling,l.sibling=null),Tm(o,!1,m,l,w);break;case"backwards":for(l=null,m=o.child,o.child=null;m!==null;){if(s=m.alternate,s!==null&&Sd(s)===null){o.child=m;break}s=m.sibling,m.sibling=l,l=m,m=s}Tm(o,!0,l,null,w);break;case"together":Tm(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function Vi(s,o,l){if(s!==null&&(o.dependencies=s.dependencies),Bs|=o.lanes,(l&o.childLanes)===0)if(s!==null){if(Dl(s,o,l,!1),(l&o.childLanes)===0)return null}else return null;if(s!==null&&o.child!==s.child)throw Error(r(153));if(o.child!==null){for(s=o.child,l=Mi(s,s.pendingProps),o.child=l,l.return=o;s.sibling!==null;)s=s.sibling,l=l.sibling=Mi(s,s.pendingProps),l.return=o;l.sibling=null}return o.child}function Dm(s,o){return(s.lanes&o)!==0?!0:(s=s.dependencies,!!(s!==null&&od(s)))}function w6(s,o,l){switch(o.tag){case 3:we(o,o.stateNode.containerInfo),xs(o,Gt,s.memoizedState.cache),Ol();break;case 27:case 5:ze(o);break;case 4:we(o,o.stateNode.containerInfo);break;case 10:xs(o,o.type,o.memoizedProps.value);break;case 13:var h=o.memoizedState;if(h!==null)return h.dehydrated!==null?(Ds(o),o.flags|=128,null):(l&o.child.childLanes)!==0?u2(s,o,l):(Ds(o),s=Vi(s,o,l),s!==null?s.sibling:null);Ds(o);break;case 19:var m=(s.flags&128)!==0;if(h=(l&o.childLanes)!==0,h||(Dl(s,o,l,!1),h=(l&o.childLanes)!==0),m){if(h)return d2(s,o,l);o.flags|=128}if(m=o.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),se(Kt,Kt.current),h)break;return null;case 22:case 23:return o.lanes=0,s2(s,o,l);case 24:xs(o,Gt,s.memoizedState.cache)}return Vi(s,o,l)}function h2(s,o,l){if(s!==null)if(s.memoizedProps!==o.pendingProps)tn=!0;else{if(!Dm(s,l)&&(o.flags&128)===0)return tn=!1,w6(s,o,l);tn=(s.flags&131072)!==0}else tn=!1,Ye&&(o.flags&1048576)!==0&&H1(o,sd,o.index);switch(o.lanes=0,o.tag){case 16:e:{s=o.pendingProps;var h=o.elementType,m=h._init;if(h=m(h._payload),o.type=h,typeof h=="function")Mg(h)?(s=$o(h,s),o.tag=1,o=c2(null,o,h,s,l)):(o.tag=0,o=Sm(null,o,h,s,l));else{if(h!=null){if(m=h.$$typeof,m===U){o.tag=11,o=n2(null,o,h,s,l);break e}else if(m===j){o.tag=14,o=r2(null,o,h,s,l);break e}}throw o=J(h)||h,Error(r(306,o,""))}}return o;case 0:return Sm(s,o,o.type,o.pendingProps,l);case 1:return h=o.type,m=$o(h,o.pendingProps),c2(s,o,h,m,l);case 3:e:{if(we(o,o.stateNode.containerInfo),s===null)throw Error(r(387));h=o.pendingProps;var w=o.memoizedState;m=w.element,Qg(s,o),Pl(o,h,null,l);var C=o.memoizedState;if(h=C.cache,xs(o,Gt,h),h!==w.cache&&Gg(o,[Gt],l,!0),Bl(),h=C.element,w.isDehydrated)if(w={element:h,isDehydrated:!1,cache:C.cache},o.updateQueue.baseState=w,o.memoizedState=w,o.flags&256){o=l2(s,o,h,l);break e}else if(h!==m){m=Ar(Error(r(424)),o),Tl(m),o=l2(s,o,h,l);break e}else{switch(s=o.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(Tt=Wr(s.firstChild),$n=o,Ye=!0,Oo=null,ci=!0,l=VE(o,null,h,l),o.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(Ol(),h===m){o=Vi(s,o,l);break e}un(s,o,h,l)}o=o.child}return o;case 26:return Ad(s,o),s===null?(l=yS(o.type,null,o.pendingProps,null))?o.memoizedState=l:Ye||(l=o.type,s=o.pendingProps,h=jd(me.current).createElement(l),h[_n]=o,h[Mn]=s,dn(h,l,s),en(h),o.stateNode=h):o.memoizedState=yS(o.type,s.memoizedProps,o.pendingProps,s.memoizedState),null;case 27:return ze(o),s===null&&Ye&&(h=o.stateNode=pS(o.type,o.pendingProps,me.current),$n=o,ci=!0,m=Tt,Ls(o.type)?(ly=m,Tt=Wr(h.firstChild)):Tt=m),un(s,o,o.pendingProps.children,l),Ad(s,o),s===null&&(o.flags|=4194304),o.child;case 5:return s===null&&Ye&&((m=h=Tt)&&(h=W6(h,o.type,o.pendingProps,ci),h!==null?(o.stateNode=h,$n=o,Tt=Wr(h.firstChild),ci=!1,m=!0):m=!1),m||To(o)),ze(o),m=o.type,w=o.pendingProps,C=s!==null?s.memoizedProps:null,h=w.children,sy(m,w)?h=null:C!==null&&sy(m,C)&&(o.flags|=32),o.memoizedState!==null&&(m=im(s,o,d6,null,null,l),iu._currentValue=m),Ad(s,o),un(s,o,h,l),o.child;case 6:return s===null&&Ye&&((s=l=Tt)&&(l=Y6(l,o.pendingProps,ci),l!==null?(o.stateNode=l,$n=o,Tt=null,s=!0):s=!1),s||To(o)),null;case 13:return u2(s,o,l);case 4:return we(o,o.stateNode.containerInfo),h=o.pendingProps,s===null?o.child=Qa(o,null,h,l):un(s,o,h,l),o.child;case 11:return n2(s,o,o.type,o.pendingProps,l);case 7:return un(s,o,o.pendingProps,l),o.child;case 8:return un(s,o,o.pendingProps.children,l),o.child;case 12:return un(s,o,o.pendingProps.children,l),o.child;case 10:return h=o.pendingProps,xs(o,o.type,h.value),un(s,o,h.children,l),o.child;case 9:return m=o.type._context,h=o.pendingProps.children,Co(o),m=xn(m),h=h(m),o.flags|=1,un(s,o,h,l),o.child;case 14:return r2(s,o,o.type,o.pendingProps,l);case 15:return i2(s,o,o.type,o.pendingProps,l);case 19:return d2(s,o,l);case 31:return h=o.pendingProps,l=o.mode,h={mode:h.mode,children:h.children},s===null?(l=Rd(h,l),l.ref=o.ref,o.child=l,l.return=o,o=l):(l=Mi(s.child,h),l.ref=o.ref,o.child=l,l.return=o,o=l),o;case 22:return s2(s,o,l);case 24:return Co(o),h=xn(Gt),s===null?(m=Yg(),m===null&&(m=gt,w=Kg(),m.pooledCache=w,w.refCount++,w!==null&&(m.pooledCacheLanes|=l),m=w),o.memoizedState={parent:h,cache:m},Zg(o),xs(o,Gt,m)):((s.lanes&l)!==0&&(Qg(s,o),Pl(o,null,null,l),Bl()),m=s.memoizedState,w=o.memoizedState,m.parent!==h?(m={parent:h,cache:h},o.memoizedState=m,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=m),xs(o,Gt,h)):(h=w.cache,xs(o,Gt,h),h!==m.cache&&Gg(o,[Gt],l,!0))),un(s,o,o.pendingProps.children,l),o.child;case 29:throw o.pendingProps}throw Error(r(156,o.tag))}function Gi(s){s.flags|=4}function p2(s,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!SS(o)){if(o=Dr.current,o!==null&&((qe&4194048)===qe?li!==null:(qe&62914560)!==qe&&(qe&536870912)===0||o!==li))throw $l=Xg,Z1;s.flags|=8192}}function Od(s,o){o!==null&&(s.flags|=4),s.flags&16384&&(o=s.tag!==22?Gw():536870912,s.lanes|=o,nc|=o)}function Hl(s,o){if(!Ye)switch(s.tailMode){case"hidden":o=s.tail;for(var l=null;o!==null;)o.alternate!==null&&(l=o),o=o.sibling;l===null?s.tail=null:l.sibling=null;break;case"collapsed":l=s.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?o||s.tail===null?s.tail=null:s.tail.sibling=null:h.sibling=null}}function At(s){var o=s.alternate!==null&&s.alternate.child===s.child,l=0,h=0;if(o)for(var m=s.child;m!==null;)l|=m.lanes|m.childLanes,h|=m.subtreeFlags&65011712,h|=m.flags&65011712,m.return=s,m=m.sibling;else for(m=s.child;m!==null;)l|=m.lanes|m.childLanes,h|=m.subtreeFlags,h|=m.flags,m.return=s,m=m.sibling;return s.subtreeFlags|=h,s.childLanes=l,o}function E6(s,o,l){var h=o.pendingProps;switch(qg(o),o.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return At(o),null;case 1:return At(o),null;case 3:return l=o.stateNode,h=null,s!==null&&(h=s.memoizedState.cache),o.memoizedState.cache!==h&&(o.flags|=2048),qi(Gt),_e(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(s===null||s.child===null)&&(Rl(o)?Gi(o):s===null||s.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,G1())),At(o),null;case 26:return l=o.memoizedState,s===null?(Gi(o),l!==null?(At(o),p2(o,l)):(At(o),o.flags&=-16777217)):l?l!==s.memoizedState?(Gi(o),At(o),p2(o,l)):(At(o),o.flags&=-16777217):(s.memoizedProps!==h&&Gi(o),At(o),o.flags&=-16777217),null;case 27:Xe(o),l=me.current;var m=o.type;if(s!==null&&o.stateNode!=null)s.memoizedProps!==h&&Gi(o);else{if(!h){if(o.stateNode===null)throw Error(r(166));return At(o),null}s=ne.current,Rl(o)?F1(o):(s=pS(m,h,l),o.stateNode=s,Gi(o))}return At(o),null;case 5:if(Xe(o),l=o.type,s!==null&&o.stateNode!=null)s.memoizedProps!==h&&Gi(o);else{if(!h){if(o.stateNode===null)throw Error(r(166));return At(o),null}if(s=ne.current,Rl(o))F1(o);else{switch(m=jd(me.current),s){case 1:s=m.createElementNS("http://www.w3.org/2000/svg",l);break;case 2:s=m.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;default:switch(l){case"svg":s=m.createElementNS("http://www.w3.org/2000/svg",l);break;case"math":s=m.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;case"script":s=m.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof h.is=="string"?m.createElement("select",{is:h.is}):m.createElement("select"),h.multiple?s.multiple=!0:h.size&&(s.size=h.size);break;default:s=typeof h.is=="string"?m.createElement(l,{is:h.is}):m.createElement(l)}}s[_n]=o,s[Mn]=h;e:for(m=o.child;m!==null;){if(m.tag===5||m.tag===6)s.appendChild(m.stateNode);else if(m.tag!==4&&m.tag!==27&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===o)break e;for(;m.sibling===null;){if(m.return===null||m.return===o)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}o.stateNode=s;e:switch(dn(s,l,h),l){case"button":case"input":case"select":case"textarea":s=!!h.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&Gi(o)}}return At(o),o.flags&=-16777217,null;case 6:if(s&&o.stateNode!=null)s.memoizedProps!==h&&Gi(o);else{if(typeof h!="string"&&o.stateNode===null)throw Error(r(166));if(s=me.current,Rl(o)){if(s=o.stateNode,l=o.memoizedProps,h=null,m=$n,m!==null)switch(m.tag){case 27:case 5:h=m.memoizedProps}s[_n]=o,s=!!(s.nodeValue===l||h!==null&&h.suppressHydrationWarning===!0||aS(s.nodeValue,l)),s||To(o)}else s=jd(s).createTextNode(h),s[_n]=o,o.stateNode=s}return At(o),null;case 13:if(h=o.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(m=Rl(o),h!==null&&h.dehydrated!==null){if(s===null){if(!m)throw Error(r(318));if(m=o.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(r(317));m[_n]=o}else Ol(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;At(o),m=!1}else m=G1(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=m),m=!0;if(!m)return o.flags&256?(Fi(o),o):(Fi(o),null)}if(Fi(o),(o.flags&128)!==0)return o.lanes=l,o;if(l=h!==null,s=s!==null&&s.memoizedState!==null,l){h=o.child,m=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(m=h.alternate.memoizedState.cachePool.pool);var w=null;h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(w=h.memoizedState.cachePool.pool),w!==m&&(h.flags|=2048)}return l!==s&&l&&(o.child.flags|=8192),Od(o,o.updateQueue),At(o),null;case 4:return _e(),s===null&&ey(o.stateNode.containerInfo),At(o),null;case 10:return qi(o.type),At(o),null;case 19:if(te(Kt),m=o.memoizedState,m===null)return At(o),null;if(h=(o.flags&128)!==0,w=m.rendering,w===null)if(h)Hl(m,!1);else{if(Dt!==0||s!==null&&(s.flags&128)!==0)for(s=o.child;s!==null;){if(w=Sd(s),w!==null){for(o.flags|=128,Hl(m,!1),s=w.updateQueue,o.updateQueue=s,Od(o,s),o.subtreeFlags=0,s=l,l=o.child;l!==null;)q1(l,s),l=l.sibling;return se(Kt,Kt.current&1|2),o.child}s=s.sibling}m.tail!==null&&xt()>Cd&&(o.flags|=128,h=!0,Hl(m,!1),o.lanes=4194304)}else{if(!h)if(s=Sd(w),s!==null){if(o.flags|=128,h=!0,s=s.updateQueue,o.updateQueue=s,Od(o,s),Hl(m,!0),m.tail===null&&m.tailMode==="hidden"&&!w.alternate&&!Ye)return At(o),null}else 2*xt()-m.renderingStartTime>Cd&&l!==536870912&&(o.flags|=128,h=!0,Hl(m,!1),o.lanes=4194304);m.isBackwards?(w.sibling=o.child,o.child=w):(s=m.last,s!==null?s.sibling=w:o.child=w,m.last=w)}return m.tail!==null?(o=m.tail,m.rendering=o,m.tail=o.sibling,m.renderingStartTime=xt(),o.sibling=null,s=Kt.current,se(Kt,h?s&1|2:s&1),o):(At(o),null);case 22:case 23:return Fi(o),nm(),h=o.memoizedState!==null,s!==null?s.memoizedState!==null!==h&&(o.flags|=8192):h&&(o.flags|=8192),h?(l&536870912)!==0&&(o.flags&128)===0&&(At(o),o.subtreeFlags&6&&(o.flags|=8192)):At(o),l=o.updateQueue,l!==null&&Od(o,l.retryQueue),l=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),h=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(h=o.memoizedState.cachePool.pool),h!==l&&(o.flags|=2048),s!==null&&te(Io),null;case 24:return l=null,s!==null&&(l=s.memoizedState.cache),o.memoizedState.cache!==l&&(o.flags|=2048),qi(Gt),At(o),null;case 25:return null;case 30:return null}throw Error(r(156,o.tag))}function S6(s,o){switch(qg(o),o.tag){case 1:return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 3:return qi(Gt),_e(),s=o.flags,(s&65536)!==0&&(s&128)===0?(o.flags=s&-65537|128,o):null;case 26:case 27:case 5:return Xe(o),null;case 13:if(Fi(o),s=o.memoizedState,s!==null&&s.dehydrated!==null){if(o.alternate===null)throw Error(r(340));Ol()}return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 19:return te(Kt),null;case 4:return _e(),null;case 10:return qi(o.type),null;case 22:case 23:return Fi(o),nm(),s!==null&&te(Io),s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 24:return qi(Gt),null;case 25:return null;default:return null}}function g2(s,o){switch(qg(o),o.tag){case 3:qi(Gt),_e();break;case 26:case 27:case 5:Xe(o);break;case 4:_e();break;case 13:Fi(o);break;case 19:te(Kt);break;case 10:qi(o.type);break;case 22:case 23:Fi(o),nm(),s!==null&&te(Io);break;case 24:qi(Gt)}}function Fl(s,o){try{var l=o.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var m=h.next;l=m;do{if((l.tag&s)===s){h=void 0;var w=l.create,C=l.inst;h=w(),C.destroy=h}l=l.next}while(l!==m)}}catch(k){lt(o,o.return,k)}}function Is(s,o,l){try{var h=o.updateQueue,m=h!==null?h.lastEffect:null;if(m!==null){var w=m.next;h=w;do{if((h.tag&s)===s){var C=h.inst,k=C.destroy;if(k!==void 0){C.destroy=void 0,m=o;var Y=l,oe=k;try{oe()}catch(fe){lt(m,Y,fe)}}}h=h.next}while(h!==w)}}catch(fe){lt(o,o.return,fe)}}function m2(s){var o=s.updateQueue;if(o!==null){var l=s.stateNode;try{rE(o,l)}catch(h){lt(s,s.return,h)}}}function y2(s,o,l){l.props=$o(s.type,s.memoizedProps),l.state=s.memoizedState;try{l.componentWillUnmount()}catch(h){lt(s,o,h)}}function Vl(s,o){try{var l=s.ref;if(l!==null){switch(s.tag){case 26:case 27:case 5:var h=s.stateNode;break;case 30:h=s.stateNode;break;default:h=s.stateNode}typeof l=="function"?s.refCleanup=l(h):l.current=h}}catch(m){lt(s,o,m)}}function ui(s,o){var l=s.ref,h=s.refCleanup;if(l!==null)if(typeof h=="function")try{h()}catch(m){lt(s,o,m)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(m){lt(s,o,m)}else l.current=null}function b2(s){var o=s.type,l=s.memoizedProps,h=s.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":l.autoFocus&&h.focus();break e;case"img":l.src?h.src=l.src:l.srcSet&&(h.srcset=l.srcSet)}}catch(m){lt(s,s.return,m)}}function Cm(s,o,l){try{var h=s.stateNode;H6(h,s.type,l,o),h[Mn]=o}catch(m){lt(s,s.return,m)}}function v2(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&Ls(s.type)||s.tag===4}function Im(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||v2(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&Ls(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Nm(s,o,l){var h=s.tag;if(h===5||h===6)s=s.stateNode,o?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(s,o):(o=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,o.appendChild(s),l=l._reactRootContainer,l!=null||o.onclick!==null||(o.onclick=Ld));else if(h!==4&&(h===27&&Ls(s.type)&&(l=s.stateNode,o=null),s=s.child,s!==null))for(Nm(s,o,l),s=s.sibling;s!==null;)Nm(s,o,l),s=s.sibling}function Td(s,o,l){var h=s.tag;if(h===5||h===6)s=s.stateNode,o?l.insertBefore(s,o):l.appendChild(s);else if(h!==4&&(h===27&&Ls(s.type)&&(l=s.stateNode),s=s.child,s!==null))for(Td(s,o,l),s=s.sibling;s!==null;)Td(s,o,l),s=s.sibling}function w2(s){var o=s.stateNode,l=s.memoizedProps;try{for(var h=s.type,m=o.attributes;m.length;)o.removeAttributeNode(m[0]);dn(o,h,l),o[_n]=s,o[Mn]=l}catch(w){lt(s,s.return,w)}}var Ki=!1,Bt=!1,$m=!1,E2=typeof WeakSet=="function"?WeakSet:Set,nn=null;function _6(s,o){if(s=s.containerInfo,ry=Gd,s=N1(s),Ig(s)){if("selectionStart"in s)var l={start:s.selectionStart,end:s.selectionEnd};else e:{l=(l=s.ownerDocument)&&l.defaultView||window;var h=l.getSelection&&l.getSelection();if(h&&h.rangeCount!==0){l=h.anchorNode;var m=h.anchorOffset,w=h.focusNode;h=h.focusOffset;try{l.nodeType,w.nodeType}catch{l=null;break e}var C=0,k=-1,Y=-1,oe=0,fe=0,ge=s,ae=null;t:for(;;){for(var ce;ge!==l||m!==0&&ge.nodeType!==3||(k=C+m),ge!==w||h!==0&&ge.nodeType!==3||(Y=C+h),ge.nodeType===3&&(C+=ge.nodeValue.length),(ce=ge.firstChild)!==null;)ae=ge,ge=ce;for(;;){if(ge===s)break t;if(ae===l&&++oe===m&&(k=C),ae===w&&++fe===h&&(Y=C),(ce=ge.nextSibling)!==null)break;ge=ae,ae=ge.parentNode}ge=ce}l=k===-1||Y===-1?null:{start:k,end:Y}}else l=null}l=l||{start:0,end:0}}else l=null;for(iy={focusedElem:s,selectionRange:l},Gd=!1,nn=o;nn!==null;)if(o=nn,s=o.child,(o.subtreeFlags&1024)!==0&&s!==null)s.return=o,nn=s;else for(;nn!==null;){switch(o=nn,w=o.alternate,s=o.flags,o.tag){case 0:break;case 11:case 15:break;case 1:if((s&1024)!==0&&w!==null){s=void 0,l=o,m=w.memoizedProps,w=w.memoizedState,h=l.stateNode;try{var De=$o(l.type,m,l.elementType===l.type);s=h.getSnapshotBeforeUpdate(De,w),h.__reactInternalSnapshotBeforeUpdate=s}catch(Oe){lt(l,l.return,Oe)}}break;case 3:if((s&1024)!==0){if(s=o.stateNode.containerInfo,l=s.nodeType,l===9)ay(s);else if(l===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":ay(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(r(163))}if(s=o.sibling,s!==null){s.return=o.return,nn=s;break}nn=o.return}}function S2(s,o,l){var h=l.flags;switch(l.tag){case 0:case 11:case 15:Ns(s,l),h&4&&Fl(5,l);break;case 1:if(Ns(s,l),h&4)if(s=l.stateNode,o===null)try{s.componentDidMount()}catch(C){lt(l,l.return,C)}else{var m=$o(l.type,o.memoizedProps);o=o.memoizedState;try{s.componentDidUpdate(m,o,s.__reactInternalSnapshotBeforeUpdate)}catch(C){lt(l,l.return,C)}}h&64&&m2(l),h&512&&Vl(l,l.return);break;case 3:if(Ns(s,l),h&64&&(s=l.updateQueue,s!==null)){if(o=null,l.child!==null)switch(l.child.tag){case 27:case 5:o=l.child.stateNode;break;case 1:o=l.child.stateNode}try{rE(s,o)}catch(C){lt(l,l.return,C)}}break;case 27:o===null&&h&4&&w2(l);case 26:case 5:Ns(s,l),o===null&&h&4&&b2(l),h&512&&Vl(l,l.return);break;case 12:Ns(s,l);break;case 13:Ns(s,l),h&4&&A2(s,l),h&64&&(s=l.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(l=N6.bind(null,l),X6(s,l))));break;case 22:if(h=l.memoizedState!==null||Ki,!h){o=o!==null&&o.memoizedState!==null||Bt,m=Ki;var w=Bt;Ki=h,(Bt=o)&&!w?$s(s,l,(l.subtreeFlags&8772)!==0):Ns(s,l),Ki=m,Bt=w}break;case 30:break;default:Ns(s,l)}}function _2(s){var o=s.alternate;o!==null&&(s.alternate=null,_2(o)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(o=s.stateNode,o!==null&&dg(o)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Et=null,zn=!1;function Wi(s,o,l){for(l=l.child;l!==null;)x2(s,o,l),l=l.sibling}function x2(s,o,l){if(B&&typeof B.onCommitFiberUnmount=="function")try{B.onCommitFiberUnmount(sr,l)}catch{}switch(l.tag){case 26:Bt||ui(l,o),Wi(s,o,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:Bt||ui(l,o);var h=Et,m=zn;Ls(l.type)&&(Et=l.stateNode,zn=!1),Wi(s,o,l),eu(l.stateNode),Et=h,zn=m;break;case 5:Bt||ui(l,o);case 6:if(h=Et,m=zn,Et=null,Wi(s,o,l),Et=h,zn=m,Et!==null)if(zn)try{(Et.nodeType===9?Et.body:Et.nodeName==="HTML"?Et.ownerDocument.body:Et).removeChild(l.stateNode)}catch(w){lt(l,o,w)}else try{Et.removeChild(l.stateNode)}catch(w){lt(l,o,w)}break;case 18:Et!==null&&(zn?(s=Et,dS(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,l.stateNode),cu(s)):dS(Et,l.stateNode));break;case 4:h=Et,m=zn,Et=l.stateNode.containerInfo,zn=!0,Wi(s,o,l),Et=h,zn=m;break;case 0:case 11:case 14:case 15:Bt||Is(2,l,o),Bt||Is(4,l,o),Wi(s,o,l);break;case 1:Bt||(ui(l,o),h=l.stateNode,typeof h.componentWillUnmount=="function"&&y2(l,o,h)),Wi(s,o,l);break;case 21:Wi(s,o,l);break;case 22:Bt=(h=Bt)||l.memoizedState!==null,Wi(s,o,l),Bt=h;break;default:Wi(s,o,l)}}function A2(s,o){if(o.memoizedState===null&&(s=o.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{cu(s)}catch(l){lt(o,o.return,l)}}function x6(s){switch(s.tag){case 13:case 19:var o=s.stateNode;return o===null&&(o=s.stateNode=new E2),o;case 22:return s=s.stateNode,o=s._retryCache,o===null&&(o=s._retryCache=new E2),o;default:throw Error(r(435,s.tag))}}function Um(s,o){var l=x6(s);o.forEach(function(h){var m=$6.bind(null,s,h);l.has(h)||(l.add(h),h.then(m,m))})}function cr(s,o){var l=o.deletions;if(l!==null)for(var h=0;h<l.length;h++){var m=l[h],w=s,C=o,k=C;e:for(;k!==null;){switch(k.tag){case 27:if(Ls(k.type)){Et=k.stateNode,zn=!1;break e}break;case 5:Et=k.stateNode,zn=!1;break e;case 3:case 4:Et=k.stateNode.containerInfo,zn=!0;break e}k=k.return}if(Et===null)throw Error(r(160));x2(w,C,m),Et=null,zn=!1,w=m.alternate,w!==null&&(w.return=null),m.return=null}if(o.subtreeFlags&13878)for(o=o.child;o!==null;)R2(o,s),o=o.sibling}var Kr=null;function R2(s,o){var l=s.alternate,h=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:cr(o,s),lr(s),h&4&&(Is(3,s,s.return),Fl(3,s),Is(5,s,s.return));break;case 1:cr(o,s),lr(s),h&512&&(Bt||l===null||ui(l,l.return)),h&64&&Ki&&(s=s.updateQueue,s!==null&&(h=s.callbacks,h!==null&&(l=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=l===null?h:l.concat(h))));break;case 26:var m=Kr;if(cr(o,s),lr(s),h&512&&(Bt||l===null||ui(l,l.return)),h&4){var w=l!==null?l.memoizedState:null;if(h=s.memoizedState,l===null)if(h===null)if(s.stateNode===null){e:{h=s.type,l=s.memoizedProps,m=m.ownerDocument||m;t:switch(h){case"title":w=m.getElementsByTagName("title")[0],(!w||w[gl]||w[_n]||w.namespaceURI==="http://www.w3.org/2000/svg"||w.hasAttribute("itemprop"))&&(w=m.createElement(h),m.head.insertBefore(w,m.querySelector("head > title"))),dn(w,h,l),w[_n]=s,en(w),h=w;break e;case"link":var C=wS("link","href",m).get(h+(l.href||""));if(C){for(var k=0;k<C.length;k++)if(w=C[k],w.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&w.getAttribute("rel")===(l.rel==null?null:l.rel)&&w.getAttribute("title")===(l.title==null?null:l.title)&&w.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){C.splice(k,1);break t}}w=m.createElement(h),dn(w,h,l),m.head.appendChild(w);break;case"meta":if(C=wS("meta","content",m).get(h+(l.content||""))){for(k=0;k<C.length;k++)if(w=C[k],w.getAttribute("content")===(l.content==null?null:""+l.content)&&w.getAttribute("name")===(l.name==null?null:l.name)&&w.getAttribute("property")===(l.property==null?null:l.property)&&w.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&w.getAttribute("charset")===(l.charSet==null?null:l.charSet)){C.splice(k,1);break t}}w=m.createElement(h),dn(w,h,l),m.head.appendChild(w);break;default:throw Error(r(468,h))}w[_n]=s,en(w),h=w}s.stateNode=h}else ES(m,s.type,s.stateNode);else s.stateNode=vS(m,h,s.memoizedProps);else w!==h?(w===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):w.count--,h===null?ES(m,s.type,s.stateNode):vS(m,h,s.memoizedProps)):h===null&&s.stateNode!==null&&Cm(s,s.memoizedProps,l.memoizedProps)}break;case 27:cr(o,s),lr(s),h&512&&(Bt||l===null||ui(l,l.return)),l!==null&&h&4&&Cm(s,s.memoizedProps,l.memoizedProps);break;case 5:if(cr(o,s),lr(s),h&512&&(Bt||l===null||ui(l,l.return)),s.flags&32){m=s.stateNode;try{Ua(m,"")}catch(ce){lt(s,s.return,ce)}}h&4&&s.stateNode!=null&&(m=s.memoizedProps,Cm(s,m,l!==null?l.memoizedProps:m)),h&1024&&($m=!0);break;case 6:if(cr(o,s),lr(s),h&4){if(s.stateNode===null)throw Error(r(162));h=s.memoizedProps,l=s.stateNode;try{l.nodeValue=h}catch(ce){lt(s,s.return,ce)}}break;case 3:if(Hd=null,m=Kr,Kr=zd(o.containerInfo),cr(o,s),Kr=m,lr(s),h&4&&l!==null&&l.memoizedState.isDehydrated)try{cu(o.containerInfo)}catch(ce){lt(s,s.return,ce)}$m&&($m=!1,O2(s));break;case 4:h=Kr,Kr=zd(s.stateNode.containerInfo),cr(o,s),lr(s),Kr=h;break;case 12:cr(o,s),lr(s);break;case 13:cr(o,s),lr(s),s.child.flags&8192&&s.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(jm=xt()),h&4&&(h=s.updateQueue,h!==null&&(s.updateQueue=null,Um(s,h)));break;case 22:m=s.memoizedState!==null;var Y=l!==null&&l.memoizedState!==null,oe=Ki,fe=Bt;if(Ki=oe||m,Bt=fe||Y,cr(o,s),Bt=fe,Ki=oe,lr(s),h&8192)e:for(o=s.stateNode,o._visibility=m?o._visibility&-2:o._visibility|1,m&&(l===null||Y||Ki||Bt||Uo(s)),l=null,o=s;;){if(o.tag===5||o.tag===26){if(l===null){Y=l=o;try{if(w=Y.stateNode,m)C=w.style,typeof C.setProperty=="function"?C.setProperty("display","none","important"):C.display="none";else{k=Y.stateNode;var ge=Y.memoizedProps.style,ae=ge!=null&&ge.hasOwnProperty("display")?ge.display:null;k.style.display=ae==null||typeof ae=="boolean"?"":(""+ae).trim()}}catch(ce){lt(Y,Y.return,ce)}}}else if(o.tag===6){if(l===null){Y=o;try{Y.stateNode.nodeValue=m?"":Y.memoizedProps}catch(ce){lt(Y,Y.return,ce)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===s)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break e;for(;o.sibling===null;){if(o.return===null||o.return===s)break e;l===o&&(l=null),o=o.return}l===o&&(l=null),o.sibling.return=o.return,o=o.sibling}h&4&&(h=s.updateQueue,h!==null&&(l=h.retryQueue,l!==null&&(h.retryQueue=null,Um(s,l))));break;case 19:cr(o,s),lr(s),h&4&&(h=s.updateQueue,h!==null&&(s.updateQueue=null,Um(s,h)));break;case 30:break;case 21:break;default:cr(o,s),lr(s)}}function lr(s){var o=s.flags;if(o&2){try{for(var l,h=s.return;h!==null;){if(v2(h)){l=h;break}h=h.return}if(l==null)throw Error(r(160));switch(l.tag){case 27:var m=l.stateNode,w=Im(s);Td(s,w,m);break;case 5:var C=l.stateNode;l.flags&32&&(Ua(C,""),l.flags&=-33);var k=Im(s);Td(s,k,C);break;case 3:case 4:var Y=l.stateNode.containerInfo,oe=Im(s);Nm(s,oe,Y);break;default:throw Error(r(161))}}catch(fe){lt(s,s.return,fe)}s.flags&=-3}o&4096&&(s.flags&=-4097)}function O2(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var o=s;O2(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),s=s.sibling}}function Ns(s,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)S2(s,o.alternate,o),o=o.sibling}function Uo(s){for(s=s.child;s!==null;){var o=s;switch(o.tag){case 0:case 11:case 14:case 15:Is(4,o,o.return),Uo(o);break;case 1:ui(o,o.return);var l=o.stateNode;typeof l.componentWillUnmount=="function"&&y2(o,o.return,l),Uo(o);break;case 27:eu(o.stateNode);case 26:case 5:ui(o,o.return),Uo(o);break;case 22:o.memoizedState===null&&Uo(o);break;case 30:Uo(o);break;default:Uo(o)}s=s.sibling}}function $s(s,o,l){for(l=l&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var h=o.alternate,m=s,w=o,C=w.flags;switch(w.tag){case 0:case 11:case 15:$s(m,w,l),Fl(4,w);break;case 1:if($s(m,w,l),h=w,m=h.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(oe){lt(h,h.return,oe)}if(h=w,m=h.updateQueue,m!==null){var k=h.stateNode;try{var Y=m.shared.hiddenCallbacks;if(Y!==null)for(m.shared.hiddenCallbacks=null,m=0;m<Y.length;m++)nE(Y[m],k)}catch(oe){lt(h,h.return,oe)}}l&&C&64&&m2(w),Vl(w,w.return);break;case 27:w2(w);case 26:case 5:$s(m,w,l),l&&h===null&&C&4&&b2(w),Vl(w,w.return);break;case 12:$s(m,w,l);break;case 13:$s(m,w,l),l&&C&4&&A2(m,w);break;case 22:w.memoizedState===null&&$s(m,w,l),Vl(w,w.return);break;case 30:break;default:$s(m,w,l)}o=o.sibling}}function Bm(s,o){var l=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),s=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(s=o.memoizedState.cachePool.pool),s!==l&&(s!=null&&s.refCount++,l!=null&&Cl(l))}function Pm(s,o){s=null,o.alternate!==null&&(s=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==s&&(o.refCount++,s!=null&&Cl(s))}function fi(s,o,l,h){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)T2(s,o,l,h),o=o.sibling}function T2(s,o,l,h){var m=o.flags;switch(o.tag){case 0:case 11:case 15:fi(s,o,l,h),m&2048&&Fl(9,o);break;case 1:fi(s,o,l,h);break;case 3:fi(s,o,l,h),m&2048&&(s=null,o.alternate!==null&&(s=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==s&&(o.refCount++,s!=null&&Cl(s)));break;case 12:if(m&2048){fi(s,o,l,h),s=o.stateNode;try{var w=o.memoizedProps,C=w.id,k=w.onPostCommit;typeof k=="function"&&k(C,o.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(Y){lt(o,o.return,Y)}}else fi(s,o,l,h);break;case 13:fi(s,o,l,h);break;case 23:break;case 22:w=o.stateNode,C=o.alternate,o.memoizedState!==null?w._visibility&2?fi(s,o,l,h):Gl(s,o):w._visibility&2?fi(s,o,l,h):(w._visibility|=2,Ja(s,o,l,h,(o.subtreeFlags&10256)!==0)),m&2048&&Bm(C,o);break;case 24:fi(s,o,l,h),m&2048&&Pm(o.alternate,o);break;default:fi(s,o,l,h)}}function Ja(s,o,l,h,m){for(m=m&&(o.subtreeFlags&10256)!==0,o=o.child;o!==null;){var w=s,C=o,k=l,Y=h,oe=C.flags;switch(C.tag){case 0:case 11:case 15:Ja(w,C,k,Y,m),Fl(8,C);break;case 23:break;case 22:var fe=C.stateNode;C.memoizedState!==null?fe._visibility&2?Ja(w,C,k,Y,m):Gl(w,C):(fe._visibility|=2,Ja(w,C,k,Y,m)),m&&oe&2048&&Bm(C.alternate,C);break;case 24:Ja(w,C,k,Y,m),m&&oe&2048&&Pm(C.alternate,C);break;default:Ja(w,C,k,Y,m)}o=o.sibling}}function Gl(s,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var l=s,h=o,m=h.flags;switch(h.tag){case 22:Gl(l,h),m&2048&&Bm(h.alternate,h);break;case 24:Gl(l,h),m&2048&&Pm(h.alternate,h);break;default:Gl(l,h)}o=o.sibling}}var Kl=8192;function ec(s){if(s.subtreeFlags&Kl)for(s=s.child;s!==null;)D2(s),s=s.sibling}function D2(s){switch(s.tag){case 26:ec(s),s.flags&Kl&&s.memoizedState!==null&&l4(Kr,s.memoizedState,s.memoizedProps);break;case 5:ec(s);break;case 3:case 4:var o=Kr;Kr=zd(s.stateNode.containerInfo),ec(s),Kr=o;break;case 22:s.memoizedState===null&&(o=s.alternate,o!==null&&o.memoizedState!==null?(o=Kl,Kl=16777216,ec(s),Kl=o):ec(s));break;default:ec(s)}}function C2(s){var o=s.alternate;if(o!==null&&(s=o.child,s!==null)){o.child=null;do o=s.sibling,s.sibling=null,s=o;while(s!==null)}}function Wl(s){var o=s.deletions;if((s.flags&16)!==0){if(o!==null)for(var l=0;l<o.length;l++){var h=o[l];nn=h,N2(h,s)}C2(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)I2(s),s=s.sibling}function I2(s){switch(s.tag){case 0:case 11:case 15:Wl(s),s.flags&2048&&Is(9,s,s.return);break;case 3:Wl(s);break;case 12:Wl(s);break;case 22:var o=s.stateNode;s.memoizedState!==null&&o._visibility&2&&(s.return===null||s.return.tag!==13)?(o._visibility&=-3,Dd(s)):Wl(s);break;default:Wl(s)}}function Dd(s){var o=s.deletions;if((s.flags&16)!==0){if(o!==null)for(var l=0;l<o.length;l++){var h=o[l];nn=h,N2(h,s)}C2(s)}for(s=s.child;s!==null;){switch(o=s,o.tag){case 0:case 11:case 15:Is(8,o,o.return),Dd(o);break;case 22:l=o.stateNode,l._visibility&2&&(l._visibility&=-3,Dd(o));break;default:Dd(o)}s=s.sibling}}function N2(s,o){for(;nn!==null;){var l=nn;switch(l.tag){case 0:case 11:case 15:Is(8,l,o);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var h=l.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:Cl(l.memoizedState.cache)}if(h=l.child,h!==null)h.return=l,nn=h;else e:for(l=s;nn!==null;){h=nn;var m=h.sibling,w=h.return;if(_2(h),h===l){nn=null;break e}if(m!==null){m.return=w,nn=m;break e}nn=w}}}var A6={getCacheForType:function(s){var o=xn(Gt),l=o.data.get(s);return l===void 0&&(l=s(),o.data.set(s,l)),l}},R6=typeof WeakMap=="function"?WeakMap:Map,tt=0,gt=null,Pe=null,qe=0,nt=0,ur=null,Us=!1,tc=!1,km=!1,Yi=0,Dt=0,Bs=0,Bo=0,Mm=0,Cr=0,nc=0,Yl=null,qn=null,Lm=!1,jm=0,Cd=1/0,Id=null,Ps=null,fn=0,ks=null,rc=null,ic=0,zm=0,qm=null,$2=null,Xl=0,Hm=null;function fr(){if((tt&2)!==0&&qe!==0)return qe&-qe;if(R.T!==null){var s=Va;return s!==0?s:Xm()}return Yw()}function U2(){Cr===0&&(Cr=(qe&536870912)===0||Ye?Vw():536870912);var s=Dr.current;return s!==null&&(s.flags|=32),Cr}function dr(s,o,l){(s===gt&&(nt===2||nt===9)||s.cancelPendingCommit!==null)&&(sc(s,0),Ms(s,qe,Cr,!1)),pl(s,l),((tt&2)===0||s!==gt)&&(s===gt&&((tt&2)===0&&(Bo|=l),Dt===4&&Ms(s,qe,Cr,!1)),di(s))}function B2(s,o,l){if((tt&6)!==0)throw Error(r(327));var h=!l&&(o&124)===0&&(o&s.expiredLanes)===0||st(s,o),m=h?D6(s,o):Gm(s,o,!0),w=h;do{if(m===0){tc&&!h&&Ms(s,o,0,!1);break}else{if(l=s.current.alternate,w&&!O6(l)){m=Gm(s,o,!1),w=!1;continue}if(m===2){if(w=o,s.errorRecoveryDisabledLanes&w)var C=0;else C=s.pendingLanes&-536870913,C=C!==0?C:C&536870912?536870912:0;if(C!==0){o=C;e:{var k=s;m=Yl;var Y=k.current.memoizedState.isDehydrated;if(Y&&(sc(k,C).flags|=256),C=Gm(k,C,!1),C!==2){if(km&&!Y){k.errorRecoveryDisabledLanes|=w,Bo|=w,m=4;break e}w=qn,qn=m,w!==null&&(qn===null?qn=w:qn.push.apply(qn,w))}m=C}if(w=!1,m!==2)continue}}if(m===1){sc(s,0),Ms(s,o,0,!0);break}e:{switch(h=s,w=m,w){case 0:case 1:throw Error(r(345));case 4:if((o&4194048)!==o)break;case 6:Ms(h,o,Cr,!Us);break e;case 2:qn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((o&62914560)===o&&(m=jm+300-xt(),10<m)){if(Ms(h,o,Cr,!Us),Je(h,0,!0)!==0)break e;h.timeoutHandle=uS(P2.bind(null,h,l,qn,Id,Lm,o,Cr,Bo,nc,Us,w,2,-0,0),m);break e}P2(h,l,qn,Id,Lm,o,Cr,Bo,nc,Us,w,0,-0,0)}}break}while(!0);di(s)}function P2(s,o,l,h,m,w,C,k,Y,oe,fe,ge,ae,ce){if(s.timeoutHandle=-1,ge=o.subtreeFlags,(ge&8192||(ge&16785408)===16785408)&&(ru={stylesheets:null,count:0,unsuspend:c4},D2(o),ge=u4(),ge!==null)){s.cancelPendingCommit=ge(H2.bind(null,s,o,w,l,h,m,C,k,Y,fe,1,ae,ce)),Ms(s,w,C,!oe);return}H2(s,o,w,l,h,m,C,k,Y)}function O6(s){for(var o=s;;){var l=o.tag;if((l===0||l===11||l===15)&&o.flags&16384&&(l=o.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var h=0;h<l.length;h++){var m=l[h],w=m.getSnapshot;m=m.value;try{if(!or(w(),m))return!1}catch{return!1}}if(l=o.child,o.subtreeFlags&16384&&l!==null)l.return=o,o=l;else{if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Ms(s,o,l,h){o&=~Mm,o&=~Bo,s.suspendedLanes|=o,s.pingedLanes&=~o,h&&(s.warmLanes|=o),h=s.expirationTimes;for(var m=o;0<m;){var w=31-A(m),C=1<<w;h[w]=-1,m&=~C}l!==0&&Kw(s,l,o)}function Nd(){return(tt&6)===0?(Zl(0),!1):!0}function Fm(){if(Pe!==null){if(nt===0)var s=Pe.return;else s=Pe,zi=Do=null,am(s),Za=null,zl=0,s=Pe;for(;s!==null;)g2(s.alternate,s),s=s.return;Pe=null}}function sc(s,o){var l=s.timeoutHandle;l!==-1&&(s.timeoutHandle=-1,V6(l)),l=s.cancelPendingCommit,l!==null&&(s.cancelPendingCommit=null,l()),Fm(),gt=s,Pe=l=Mi(s.current,null),qe=o,nt=0,ur=null,Us=!1,tc=st(s,o),km=!1,nc=Cr=Mm=Bo=Bs=Dt=0,qn=Yl=null,Lm=!1,(o&8)!==0&&(o|=o&32);var h=s.entangledLanes;if(h!==0)for(s=s.entanglements,h&=o;0<h;){var m=31-A(h),w=1<<m;o|=s[m],h&=~w}return Yi=o,ed(),l}function k2(s,o){Ue=null,R.H=vd,o===Nl||o===ld?(o=eE(),nt=3):o===Z1?(o=eE(),nt=4):nt=o===t2?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,ur=o,Pe===null&&(Dt=1,xd(s,Ar(o,s.current)))}function M2(){var s=R.H;return R.H=vd,s===null?vd:s}function L2(){var s=R.A;return R.A=A6,s}function Vm(){Dt=4,Us||(qe&4194048)!==qe&&Dr.current!==null||(tc=!0),(Bs&134217727)===0&&(Bo&134217727)===0||gt===null||Ms(gt,qe,Cr,!1)}function Gm(s,o,l){var h=tt;tt|=2;var m=M2(),w=L2();(gt!==s||qe!==o)&&(Id=null,sc(s,o)),o=!1;var C=Dt;e:do try{if(nt!==0&&Pe!==null){var k=Pe,Y=ur;switch(nt){case 8:Fm(),C=6;break e;case 3:case 2:case 9:case 6:Dr.current===null&&(o=!0);var oe=nt;if(nt=0,ur=null,oc(s,k,Y,oe),l&&tc){C=0;break e}break;default:oe=nt,nt=0,ur=null,oc(s,k,Y,oe)}}T6(),C=Dt;break}catch(fe){k2(s,fe)}while(!0);return o&&s.shellSuspendCounter++,zi=Do=null,tt=h,R.H=m,R.A=w,Pe===null&&(gt=null,qe=0,ed()),C}function T6(){for(;Pe!==null;)j2(Pe)}function D6(s,o){var l=tt;tt|=2;var h=M2(),m=L2();gt!==s||qe!==o?(Id=null,Cd=xt()+500,sc(s,o)):tc=st(s,o);e:do try{if(nt!==0&&Pe!==null){o=Pe;var w=ur;t:switch(nt){case 1:nt=0,ur=null,oc(s,o,w,1);break;case 2:case 9:if(Q1(w)){nt=0,ur=null,z2(o);break}o=function(){nt!==2&&nt!==9||gt!==s||(nt=7),di(s)},w.then(o,o);break e;case 3:nt=7;break e;case 4:nt=5;break e;case 7:Q1(w)?(nt=0,ur=null,z2(o)):(nt=0,ur=null,oc(s,o,w,7));break;case 5:var C=null;switch(Pe.tag){case 26:C=Pe.memoizedState;case 5:case 27:var k=Pe;if(!C||SS(C)){nt=0,ur=null;var Y=k.sibling;if(Y!==null)Pe=Y;else{var oe=k.return;oe!==null?(Pe=oe,$d(oe)):Pe=null}break t}}nt=0,ur=null,oc(s,o,w,5);break;case 6:nt=0,ur=null,oc(s,o,w,6);break;case 8:Fm(),Dt=6;break e;default:throw Error(r(462))}}C6();break}catch(fe){k2(s,fe)}while(!0);return zi=Do=null,R.H=h,R.A=m,tt=l,Pe!==null?0:(gt=null,qe=0,ed(),Dt)}function C6(){for(;Pe!==null&&!We();)j2(Pe)}function j2(s){var o=h2(s.alternate,s,Yi);s.memoizedProps=s.pendingProps,o===null?$d(s):Pe=o}function z2(s){var o=s,l=o.alternate;switch(o.tag){case 15:case 0:o=a2(l,o,o.pendingProps,o.type,void 0,qe);break;case 11:o=a2(l,o,o.pendingProps,o.type.render,o.ref,qe);break;case 5:am(o);default:g2(l,o),o=Pe=q1(o,Yi),o=h2(l,o,Yi)}s.memoizedProps=s.pendingProps,o===null?$d(s):Pe=o}function oc(s,o,l,h){zi=Do=null,am(o),Za=null,zl=0;var m=o.return;try{if(v6(s,m,o,l,qe)){Dt=1,xd(s,Ar(l,s.current)),Pe=null;return}}catch(w){if(m!==null)throw Pe=m,w;Dt=1,xd(s,Ar(l,s.current)),Pe=null;return}o.flags&32768?(Ye||h===1?s=!0:tc||(qe&536870912)!==0?s=!1:(Us=s=!0,(h===2||h===9||h===3||h===6)&&(h=Dr.current,h!==null&&h.tag===13&&(h.flags|=16384))),q2(o,s)):$d(o)}function $d(s){var o=s;do{if((o.flags&32768)!==0){q2(o,Us);return}s=o.return;var l=E6(o.alternate,o,Yi);if(l!==null){Pe=l;return}if(o=o.sibling,o!==null){Pe=o;return}Pe=o=s}while(o!==null);Dt===0&&(Dt=5)}function q2(s,o){do{var l=S6(s.alternate,s);if(l!==null){l.flags&=32767,Pe=l;return}if(l=s.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!o&&(s=s.sibling,s!==null)){Pe=s;return}Pe=s=l}while(s!==null);Dt=6,Pe=null}function H2(s,o,l,h,m,w,C,k,Y){s.cancelPendingCommit=null;do Ud();while(fn!==0);if((tt&6)!==0)throw Error(r(327));if(o!==null){if(o===s.current)throw Error(r(177));if(w=o.lanes|o.childLanes,w|=Pg,c8(s,l,w,C,k,Y),s===gt&&(Pe=gt=null,qe=0),rc=o,ks=s,ic=l,zm=w,qm=m,$2=h,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,U6(Qt,function(){return W2(),null})):(s.callbackNode=null,s.callbackPriority=0),h=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||h){h=R.T,R.T=null,m=L.p,L.p=2,C=tt,tt|=4;try{_6(s,o,l)}finally{tt=C,L.p=m,R.T=h}}fn=1,F2(),V2(),G2()}}function F2(){if(fn===1){fn=0;var s=ks,o=rc,l=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||l){l=R.T,R.T=null;var h=L.p;L.p=2;var m=tt;tt|=4;try{R2(o,s);var w=iy,C=N1(s.containerInfo),k=w.focusedElem,Y=w.selectionRange;if(C!==k&&k&&k.ownerDocument&&I1(k.ownerDocument.documentElement,k)){if(Y!==null&&Ig(k)){var oe=Y.start,fe=Y.end;if(fe===void 0&&(fe=oe),"selectionStart"in k)k.selectionStart=oe,k.selectionEnd=Math.min(fe,k.value.length);else{var ge=k.ownerDocument||document,ae=ge&&ge.defaultView||window;if(ae.getSelection){var ce=ae.getSelection(),De=k.textContent.length,Oe=Math.min(Y.start,De),ct=Y.end===void 0?Oe:Math.min(Y.end,De);!ce.extend&&Oe>ct&&(C=ct,ct=Oe,Oe=C);var ee=C1(k,Oe),Z=C1(k,ct);if(ee&&Z&&(ce.rangeCount!==1||ce.anchorNode!==ee.node||ce.anchorOffset!==ee.offset||ce.focusNode!==Z.node||ce.focusOffset!==Z.offset)){var ie=ge.createRange();ie.setStart(ee.node,ee.offset),ce.removeAllRanges(),Oe>ct?(ce.addRange(ie),ce.extend(Z.node,Z.offset)):(ie.setEnd(Z.node,Z.offset),ce.addRange(ie))}}}}for(ge=[],ce=k;ce=ce.parentNode;)ce.nodeType===1&&ge.push({element:ce,left:ce.scrollLeft,top:ce.scrollTop});for(typeof k.focus=="function"&&k.focus(),k=0;k<ge.length;k++){var pe=ge[k];pe.element.scrollLeft=pe.left,pe.element.scrollTop=pe.top}}Gd=!!ry,iy=ry=null}finally{tt=m,L.p=h,R.T=l}}s.current=o,fn=2}}function V2(){if(fn===2){fn=0;var s=ks,o=rc,l=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||l){l=R.T,R.T=null;var h=L.p;L.p=2;var m=tt;tt|=4;try{S2(s,o.alternate,o)}finally{tt=m,L.p=h,R.T=l}}fn=3}}function G2(){if(fn===4||fn===3){fn=0,Vr();var s=ks,o=rc,l=ic,h=$2;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?fn=5:(fn=0,rc=ks=null,K2(s,s.pendingLanes));var m=s.pendingLanes;if(m===0&&(Ps=null),ug(l),o=o.stateNode,B&&typeof B.onCommitFiberRoot=="function")try{B.onCommitFiberRoot(sr,o,void 0,(o.current.flags&128)===128)}catch{}if(h!==null){o=R.T,m=L.p,L.p=2,R.T=null;try{for(var w=s.onRecoverableError,C=0;C<h.length;C++){var k=h[C];w(k.value,{componentStack:k.stack})}}finally{R.T=o,L.p=m}}(ic&3)!==0&&Ud(),di(s),m=s.pendingLanes,(l&4194090)!==0&&(m&42)!==0?s===Hm?Xl++:(Xl=0,Hm=s):Xl=0,Zl(0)}}function K2(s,o){(s.pooledCacheLanes&=o)===0&&(o=s.pooledCache,o!=null&&(s.pooledCache=null,Cl(o)))}function Ud(s){return F2(),V2(),G2(),W2()}function W2(){if(fn!==5)return!1;var s=ks,o=zm;zm=0;var l=ug(ic),h=R.T,m=L.p;try{L.p=32>l?32:l,R.T=null,l=qm,qm=null;var w=ks,C=ic;if(fn=0,rc=ks=null,ic=0,(tt&6)!==0)throw Error(r(331));var k=tt;if(tt|=4,I2(w.current),T2(w,w.current,C,l),tt=k,Zl(0,!1),B&&typeof B.onPostCommitFiberRoot=="function")try{B.onPostCommitFiberRoot(sr,w)}catch{}return!0}finally{L.p=m,R.T=h,K2(s,o)}}function Y2(s,o,l){o=Ar(l,o),o=Em(s.stateNode,o,2),s=Os(s,o,2),s!==null&&(pl(s,2),di(s))}function lt(s,o,l){if(s.tag===3)Y2(s,s,l);else for(;o!==null;){if(o.tag===3){Y2(o,s,l);break}else if(o.tag===1){var h=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(Ps===null||!Ps.has(h))){s=Ar(l,s),l=JE(2),h=Os(o,l,2),h!==null&&(e2(l,h,o,s),pl(h,2),di(h));break}}o=o.return}}function Km(s,o,l){var h=s.pingCache;if(h===null){h=s.pingCache=new R6;var m=new Set;h.set(o,m)}else m=h.get(o),m===void 0&&(m=new Set,h.set(o,m));m.has(l)||(km=!0,m.add(l),s=I6.bind(null,s,o,l),o.then(s,s))}function I6(s,o,l){var h=s.pingCache;h!==null&&h.delete(o),s.pingedLanes|=s.suspendedLanes&l,s.warmLanes&=~l,gt===s&&(qe&l)===l&&(Dt===4||Dt===3&&(qe&62914560)===qe&&300>xt()-jm?(tt&2)===0&&sc(s,0):Mm|=l,nc===qe&&(nc=0)),di(s)}function X2(s,o){o===0&&(o=Gw()),s=za(s,o),s!==null&&(pl(s,o),di(s))}function N6(s){var o=s.memoizedState,l=0;o!==null&&(l=o.retryLane),X2(s,l)}function $6(s,o){var l=0;switch(s.tag){case 13:var h=s.stateNode,m=s.memoizedState;m!==null&&(l=m.retryLane);break;case 19:h=s.stateNode;break;case 22:h=s.stateNode._retryCache;break;default:throw Error(r(314))}h!==null&&h.delete(o),X2(s,l)}function U6(s,o){return Ot(s,o)}var Bd=null,ac=null,Wm=!1,Pd=!1,Ym=!1,Po=0;function di(s){s!==ac&&s.next===null&&(ac===null?Bd=ac=s:ac=ac.next=s),Pd=!0,Wm||(Wm=!0,P6())}function Zl(s,o){if(!Ym&&Pd){Ym=!0;do for(var l=!1,h=Bd;h!==null;){if(s!==0){var m=h.pendingLanes;if(m===0)var w=0;else{var C=h.suspendedLanes,k=h.pingedLanes;w=(1<<31-A(42|s)+1)-1,w&=m&~(C&~k),w=w&201326741?w&201326741|1:w?w|2:0}w!==0&&(l=!0,eS(h,w))}else w=qe,w=Je(h,h===gt?w:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(w&3)===0||st(h,w)||(l=!0,eS(h,w));h=h.next}while(l);Ym=!1}}function B6(){Z2()}function Z2(){Pd=Wm=!1;var s=0;Po!==0&&(F6()&&(s=Po),Po=0);for(var o=xt(),l=null,h=Bd;h!==null;){var m=h.next,w=Q2(h,o);w===0?(h.next=null,l===null?Bd=m:l.next=m,m===null&&(ac=l)):(l=h,(s!==0||(w&3)!==0)&&(Pd=!0)),h=m}Zl(s)}function Q2(s,o){for(var l=s.suspendedLanes,h=s.pingedLanes,m=s.expirationTimes,w=s.pendingLanes&-62914561;0<w;){var C=31-A(w),k=1<<C,Y=m[C];Y===-1?((k&l)===0||(k&h)!==0)&&(m[C]=et(k,o)):Y<=o&&(s.expiredLanes|=k),w&=~k}if(o=gt,l=qe,l=Je(s,s===o?l:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),h=s.callbackNode,l===0||s===o&&(nt===2||nt===9)||s.cancelPendingCommit!==null)return h!==null&&h!==null&&_t(h),s.callbackNode=null,s.callbackPriority=0;if((l&3)===0||st(s,l)){if(o=l&-l,o===s.callbackPriority)return o;switch(h!==null&&_t(h),ug(l)){case 2:case 8:l=En;break;case 32:l=Qt;break;case 268435456:l=Sr;break;default:l=Qt}return h=J2.bind(null,s),l=Ot(l,h),s.callbackPriority=o,s.callbackNode=l,o}return h!==null&&h!==null&&_t(h),s.callbackPriority=2,s.callbackNode=null,2}function J2(s,o){if(fn!==0&&fn!==5)return s.callbackNode=null,s.callbackPriority=0,null;var l=s.callbackNode;if(Ud()&&s.callbackNode!==l)return null;var h=qe;return h=Je(s,s===gt?h:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),h===0?null:(B2(s,h,o),Q2(s,xt()),s.callbackNode!=null&&s.callbackNode===l?J2.bind(null,s):null)}function eS(s,o){if(Ud())return null;B2(s,o,!0)}function P6(){G6(function(){(tt&6)!==0?Ot(Bi,B6):Z2()})}function Xm(){return Po===0&&(Po=Vw()),Po}function tS(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:Kf(""+s)}function nS(s,o){var l=o.ownerDocument.createElement("input");return l.name=o.name,l.value=o.value,s.id&&l.setAttribute("form",s.id),o.parentNode.insertBefore(l,o),s=new FormData(s),l.parentNode.removeChild(l),s}function k6(s,o,l,h,m){if(o==="submit"&&l&&l.stateNode===m){var w=tS((m[Mn]||null).action),C=h.submitter;C&&(o=(o=C[Mn]||null)?tS(o.formAction):C.getAttribute("formAction"),o!==null&&(w=o,C=null));var k=new Zf("action","action",null,h,m);s.push({event:k,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(Po!==0){var Y=C?nS(m,C):new FormData(m);mm(l,{pending:!0,data:Y,method:m.method,action:w},null,Y)}}else typeof w=="function"&&(k.preventDefault(),Y=C?nS(m,C):new FormData(m),mm(l,{pending:!0,data:Y,method:m.method,action:w},w,Y))},currentTarget:m}]})}}for(var Zm=0;Zm<Bg.length;Zm++){var Qm=Bg[Zm],M6=Qm.toLowerCase(),L6=Qm[0].toUpperCase()+Qm.slice(1);Gr(M6,"on"+L6)}Gr(B1,"onAnimationEnd"),Gr(P1,"onAnimationIteration"),Gr(k1,"onAnimationStart"),Gr("dblclick","onDoubleClick"),Gr("focusin","onFocus"),Gr("focusout","onBlur"),Gr(n6,"onTransitionRun"),Gr(r6,"onTransitionStart"),Gr(i6,"onTransitionCancel"),Gr(M1,"onTransitionEnd"),Ia("onMouseEnter",["mouseout","mouseover"]),Ia("onMouseLeave",["mouseout","mouseover"]),Ia("onPointerEnter",["pointerout","pointerover"]),Ia("onPointerLeave",["pointerout","pointerover"]),wo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),wo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),wo("onBeforeInput",["compositionend","keypress","textInput","paste"]),wo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),wo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),wo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ql="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),j6=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ql));function rS(s,o){o=(o&4)!==0;for(var l=0;l<s.length;l++){var h=s[l],m=h.event;h=h.listeners;e:{var w=void 0;if(o)for(var C=h.length-1;0<=C;C--){var k=h[C],Y=k.instance,oe=k.currentTarget;if(k=k.listener,Y!==w&&m.isPropagationStopped())break e;w=k,m.currentTarget=oe;try{w(m)}catch(fe){_d(fe)}m.currentTarget=null,w=Y}else for(C=0;C<h.length;C++){if(k=h[C],Y=k.instance,oe=k.currentTarget,k=k.listener,Y!==w&&m.isPropagationStopped())break e;w=k,m.currentTarget=oe;try{w(m)}catch(fe){_d(fe)}m.currentTarget=null,w=Y}}}}function ke(s,o){var l=o[fg];l===void 0&&(l=o[fg]=new Set);var h=s+"__bubble";l.has(h)||(iS(o,s,2,!1),l.add(h))}function Jm(s,o,l){var h=0;o&&(h|=4),iS(l,s,h,o)}var kd="_reactListening"+Math.random().toString(36).slice(2);function ey(s){if(!s[kd]){s[kd]=!0,Zw.forEach(function(l){l!=="selectionchange"&&(j6.has(l)||Jm(l,!1,s),Jm(l,!0,s))});var o=s.nodeType===9?s:s.ownerDocument;o===null||o[kd]||(o[kd]=!0,Jm("selectionchange",!1,o))}}function iS(s,o,l,h){switch(TS(o)){case 2:var m=h4;break;case 8:m=p4;break;default:m=py}l=m.bind(null,o,l,s),m=void 0,!Sg||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(m=!0),h?m!==void 0?s.addEventListener(o,l,{capture:!0,passive:m}):s.addEventListener(o,l,!0):m!==void 0?s.addEventListener(o,l,{passive:m}):s.addEventListener(o,l,!1)}function ty(s,o,l,h,m){var w=h;if((o&1)===0&&(o&2)===0&&h!==null)e:for(;;){if(h===null)return;var C=h.tag;if(C===3||C===4){var k=h.stateNode.containerInfo;if(k===m)break;if(C===4)for(C=h.return;C!==null;){var Y=C.tag;if((Y===3||Y===4)&&C.stateNode.containerInfo===m)return;C=C.return}for(;k!==null;){if(C=Ta(k),C===null)return;if(Y=C.tag,Y===5||Y===6||Y===26||Y===27){h=w=C;continue e}k=k.parentNode}}h=h.return}f1(function(){var oe=w,fe=wg(l),ge=[];e:{var ae=L1.get(s);if(ae!==void 0){var ce=Zf,De=s;switch(s){case"keypress":if(Yf(l)===0)break e;case"keydown":case"keyup":ce=U8;break;case"focusin":De="focus",ce=Rg;break;case"focusout":De="blur",ce=Rg;break;case"beforeblur":case"afterblur":ce=Rg;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ce=p1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ce=S8;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ce=k8;break;case B1:case P1:case k1:ce=A8;break;case M1:ce=L8;break;case"scroll":case"scrollend":ce=w8;break;case"wheel":ce=z8;break;case"copy":case"cut":case"paste":ce=O8;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ce=m1;break;case"toggle":case"beforetoggle":ce=H8}var Oe=(o&4)!==0,ct=!Oe&&(s==="scroll"||s==="scrollend"),ee=Oe?ae!==null?ae+"Capture":null:ae;Oe=[];for(var Z=oe,ie;Z!==null;){var pe=Z;if(ie=pe.stateNode,pe=pe.tag,pe!==5&&pe!==26&&pe!==27||ie===null||ee===null||(pe=yl(Z,ee),pe!=null&&Oe.push(Jl(Z,pe,ie))),ct)break;Z=Z.return}0<Oe.length&&(ae=new ce(ae,De,null,l,fe),ge.push({event:ae,listeners:Oe}))}}if((o&7)===0){e:{if(ae=s==="mouseover"||s==="pointerover",ce=s==="mouseout"||s==="pointerout",ae&&l!==vg&&(De=l.relatedTarget||l.fromElement)&&(Ta(De)||De[Oa]))break e;if((ce||ae)&&(ae=fe.window===fe?fe:(ae=fe.ownerDocument)?ae.defaultView||ae.parentWindow:window,ce?(De=l.relatedTarget||l.toElement,ce=oe,De=De?Ta(De):null,De!==null&&(ct=a(De),Oe=De.tag,De!==ct||Oe!==5&&Oe!==27&&Oe!==6)&&(De=null)):(ce=null,De=oe),ce!==De)){if(Oe=p1,pe="onMouseLeave",ee="onMouseEnter",Z="mouse",(s==="pointerout"||s==="pointerover")&&(Oe=m1,pe="onPointerLeave",ee="onPointerEnter",Z="pointer"),ct=ce==null?ae:ml(ce),ie=De==null?ae:ml(De),ae=new Oe(pe,Z+"leave",ce,l,fe),ae.target=ct,ae.relatedTarget=ie,pe=null,Ta(fe)===oe&&(Oe=new Oe(ee,Z+"enter",De,l,fe),Oe.target=ie,Oe.relatedTarget=ct,pe=Oe),ct=pe,ce&&De)t:{for(Oe=ce,ee=De,Z=0,ie=Oe;ie;ie=cc(ie))Z++;for(ie=0,pe=ee;pe;pe=cc(pe))ie++;for(;0<Z-ie;)Oe=cc(Oe),Z--;for(;0<ie-Z;)ee=cc(ee),ie--;for(;Z--;){if(Oe===ee||ee!==null&&Oe===ee.alternate)break t;Oe=cc(Oe),ee=cc(ee)}Oe=null}else Oe=null;ce!==null&&sS(ge,ae,ce,Oe,!1),De!==null&&ct!==null&&sS(ge,ct,De,Oe,!0)}}e:{if(ae=oe?ml(oe):window,ce=ae.nodeName&&ae.nodeName.toLowerCase(),ce==="select"||ce==="input"&&ae.type==="file")var Se=x1;else if(S1(ae))if(A1)Se=J8;else{Se=Z8;var Be=X8}else ce=ae.nodeName,!ce||ce.toLowerCase()!=="input"||ae.type!=="checkbox"&&ae.type!=="radio"?oe&&bg(oe.elementType)&&(Se=x1):Se=Q8;if(Se&&(Se=Se(s,oe))){_1(ge,Se,l,fe);break e}Be&&Be(s,ae,oe),s==="focusout"&&oe&&ae.type==="number"&&oe.memoizedProps.value!=null&&yg(ae,"number",ae.value)}switch(Be=oe?ml(oe):window,s){case"focusin":(S1(Be)||Be.contentEditable==="true")&&(Ma=Be,Ng=oe,Al=null);break;case"focusout":Al=Ng=Ma=null;break;case"mousedown":$g=!0;break;case"contextmenu":case"mouseup":case"dragend":$g=!1,$1(ge,l,fe);break;case"selectionchange":if(t6)break;case"keydown":case"keyup":$1(ge,l,fe)}var xe;if(Tg)e:{switch(s){case"compositionstart":var Te="onCompositionStart";break e;case"compositionend":Te="onCompositionEnd";break e;case"compositionupdate":Te="onCompositionUpdate";break e}Te=void 0}else ka?w1(s,l)&&(Te="onCompositionEnd"):s==="keydown"&&l.keyCode===229&&(Te="onCompositionStart");Te&&(y1&&l.locale!=="ko"&&(ka||Te!=="onCompositionStart"?Te==="onCompositionEnd"&&ka&&(xe=d1()):(_s=fe,_g="value"in _s?_s.value:_s.textContent,ka=!0)),Be=Md(oe,Te),0<Be.length&&(Te=new g1(Te,s,null,l,fe),ge.push({event:Te,listeners:Be}),xe?Te.data=xe:(xe=E1(l),xe!==null&&(Te.data=xe)))),(xe=V8?G8(s,l):K8(s,l))&&(Te=Md(oe,"onBeforeInput"),0<Te.length&&(Be=new g1("onBeforeInput","beforeinput",null,l,fe),ge.push({event:Be,listeners:Te}),Be.data=xe)),k6(ge,s,oe,l,fe)}rS(ge,o)})}function Jl(s,o,l){return{instance:s,listener:o,currentTarget:l}}function Md(s,o){for(var l=o+"Capture",h=[];s!==null;){var m=s,w=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||w===null||(m=yl(s,l),m!=null&&h.unshift(Jl(s,m,w)),m=yl(s,o),m!=null&&h.push(Jl(s,m,w))),s.tag===3)return h;s=s.return}return[]}function cc(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function sS(s,o,l,h,m){for(var w=o._reactName,C=[];l!==null&&l!==h;){var k=l,Y=k.alternate,oe=k.stateNode;if(k=k.tag,Y!==null&&Y===h)break;k!==5&&k!==26&&k!==27||oe===null||(Y=oe,m?(oe=yl(l,w),oe!=null&&C.unshift(Jl(l,oe,Y))):m||(oe=yl(l,w),oe!=null&&C.push(Jl(l,oe,Y)))),l=l.return}C.length!==0&&s.push({event:o,listeners:C})}var z6=/\r\n?/g,q6=/\u0000|\uFFFD/g;function oS(s){return(typeof s=="string"?s:""+s).replace(z6,`
`).replace(q6,"")}function aS(s,o){return o=oS(o),oS(s)===o}function Ld(){}function at(s,o,l,h,m,w){switch(l){case"children":typeof h=="string"?o==="body"||o==="textarea"&&h===""||Ua(s,h):(typeof h=="number"||typeof h=="bigint")&&o!=="body"&&Ua(s,""+h);break;case"className":Ff(s,"class",h);break;case"tabIndex":Ff(s,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":Ff(s,l,h);break;case"style":l1(s,h,w);break;case"data":if(o!=="object"){Ff(s,"data",h);break}case"src":case"href":if(h===""&&(o!=="a"||l!=="href")){s.removeAttribute(l);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){s.removeAttribute(l);break}h=Kf(""+h),s.setAttribute(l,h);break;case"action":case"formAction":if(typeof h=="function"){s.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof w=="function"&&(l==="formAction"?(o!=="input"&&at(s,o,"name",m.name,m,null),at(s,o,"formEncType",m.formEncType,m,null),at(s,o,"formMethod",m.formMethod,m,null),at(s,o,"formTarget",m.formTarget,m,null)):(at(s,o,"encType",m.encType,m,null),at(s,o,"method",m.method,m,null),at(s,o,"target",m.target,m,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){s.removeAttribute(l);break}h=Kf(""+h),s.setAttribute(l,h);break;case"onClick":h!=null&&(s.onclick=Ld);break;case"onScroll":h!=null&&ke("scroll",s);break;case"onScrollEnd":h!=null&&ke("scrollend",s);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(r(61));if(l=h.__html,l!=null){if(m.children!=null)throw Error(r(60));s.innerHTML=l}}break;case"multiple":s.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":s.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){s.removeAttribute("xlink:href");break}l=Kf(""+h),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(l,""+h):s.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(l,""):s.removeAttribute(l);break;case"capture":case"download":h===!0?s.setAttribute(l,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(l,h):s.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?s.setAttribute(l,h):s.removeAttribute(l);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?s.removeAttribute(l):s.setAttribute(l,h);break;case"popover":ke("beforetoggle",s),ke("toggle",s),Hf(s,"popover",h);break;case"xlinkActuate":Pi(s,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":Pi(s,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":Pi(s,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":Pi(s,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":Pi(s,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":Pi(s,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":Pi(s,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":Pi(s,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":Pi(s,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":Hf(s,"is",h);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=b8.get(l)||l,Hf(s,l,h))}}function ny(s,o,l,h,m,w){switch(l){case"style":l1(s,h,w);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(r(61));if(l=h.__html,l!=null){if(m.children!=null)throw Error(r(60));s.innerHTML=l}}break;case"children":typeof h=="string"?Ua(s,h):(typeof h=="number"||typeof h=="bigint")&&Ua(s,""+h);break;case"onScroll":h!=null&&ke("scroll",s);break;case"onScrollEnd":h!=null&&ke("scrollend",s);break;case"onClick":h!=null&&(s.onclick=Ld);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Qw.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(m=l.endsWith("Capture"),o=l.slice(2,m?l.length-7:void 0),w=s[Mn]||null,w=w!=null?w[l]:null,typeof w=="function"&&s.removeEventListener(o,w,m),typeof h=="function")){typeof w!="function"&&w!==null&&(l in s?s[l]=null:s.hasAttribute(l)&&s.removeAttribute(l)),s.addEventListener(o,h,m);break e}l in s?s[l]=h:h===!0?s.setAttribute(l,""):Hf(s,l,h)}}}function dn(s,o,l){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ke("error",s),ke("load",s);var h=!1,m=!1,w;for(w in l)if(l.hasOwnProperty(w)){var C=l[w];if(C!=null)switch(w){case"src":h=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,o));default:at(s,o,w,C,l,null)}}m&&at(s,o,"srcSet",l.srcSet,l,null),h&&at(s,o,"src",l.src,l,null);return;case"input":ke("invalid",s);var k=w=C=m=null,Y=null,oe=null;for(h in l)if(l.hasOwnProperty(h)){var fe=l[h];if(fe!=null)switch(h){case"name":m=fe;break;case"type":C=fe;break;case"checked":Y=fe;break;case"defaultChecked":oe=fe;break;case"value":w=fe;break;case"defaultValue":k=fe;break;case"children":case"dangerouslySetInnerHTML":if(fe!=null)throw Error(r(137,o));break;default:at(s,o,h,fe,l,null)}}s1(s,w,k,Y,oe,C,m,!1),Vf(s);return;case"select":ke("invalid",s),h=C=w=null;for(m in l)if(l.hasOwnProperty(m)&&(k=l[m],k!=null))switch(m){case"value":w=k;break;case"defaultValue":C=k;break;case"multiple":h=k;default:at(s,o,m,k,l,null)}o=w,l=C,s.multiple=!!h,o!=null?$a(s,!!h,o,!1):l!=null&&$a(s,!!h,l,!0);return;case"textarea":ke("invalid",s),w=m=h=null;for(C in l)if(l.hasOwnProperty(C)&&(k=l[C],k!=null))switch(C){case"value":h=k;break;case"defaultValue":m=k;break;case"children":w=k;break;case"dangerouslySetInnerHTML":if(k!=null)throw Error(r(91));break;default:at(s,o,C,k,l,null)}a1(s,h,m,w),Vf(s);return;case"option":for(Y in l)if(l.hasOwnProperty(Y)&&(h=l[Y],h!=null))switch(Y){case"selected":s.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:at(s,o,Y,h,l,null)}return;case"dialog":ke("beforetoggle",s),ke("toggle",s),ke("cancel",s),ke("close",s);break;case"iframe":case"object":ke("load",s);break;case"video":case"audio":for(h=0;h<Ql.length;h++)ke(Ql[h],s);break;case"image":ke("error",s),ke("load",s);break;case"details":ke("toggle",s);break;case"embed":case"source":case"link":ke("error",s),ke("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(oe in l)if(l.hasOwnProperty(oe)&&(h=l[oe],h!=null))switch(oe){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,o));default:at(s,o,oe,h,l,null)}return;default:if(bg(o)){for(fe in l)l.hasOwnProperty(fe)&&(h=l[fe],h!==void 0&&ny(s,o,fe,h,l,void 0));return}}for(k in l)l.hasOwnProperty(k)&&(h=l[k],h!=null&&at(s,o,k,h,l,null))}function H6(s,o,l,h){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,w=null,C=null,k=null,Y=null,oe=null,fe=null;for(ce in l){var ge=l[ce];if(l.hasOwnProperty(ce)&&ge!=null)switch(ce){case"checked":break;case"value":break;case"defaultValue":Y=ge;default:h.hasOwnProperty(ce)||at(s,o,ce,null,h,ge)}}for(var ae in h){var ce=h[ae];if(ge=l[ae],h.hasOwnProperty(ae)&&(ce!=null||ge!=null))switch(ae){case"type":w=ce;break;case"name":m=ce;break;case"checked":oe=ce;break;case"defaultChecked":fe=ce;break;case"value":C=ce;break;case"defaultValue":k=ce;break;case"children":case"dangerouslySetInnerHTML":if(ce!=null)throw Error(r(137,o));break;default:ce!==ge&&at(s,o,ae,ce,h,ge)}}mg(s,C,k,Y,oe,fe,w,m);return;case"select":ce=C=k=ae=null;for(w in l)if(Y=l[w],l.hasOwnProperty(w)&&Y!=null)switch(w){case"value":break;case"multiple":ce=Y;default:h.hasOwnProperty(w)||at(s,o,w,null,h,Y)}for(m in h)if(w=h[m],Y=l[m],h.hasOwnProperty(m)&&(w!=null||Y!=null))switch(m){case"value":ae=w;break;case"defaultValue":k=w;break;case"multiple":C=w;default:w!==Y&&at(s,o,m,w,h,Y)}o=k,l=C,h=ce,ae!=null?$a(s,!!l,ae,!1):!!h!=!!l&&(o!=null?$a(s,!!l,o,!0):$a(s,!!l,l?[]:"",!1));return;case"textarea":ce=ae=null;for(k in l)if(m=l[k],l.hasOwnProperty(k)&&m!=null&&!h.hasOwnProperty(k))switch(k){case"value":break;case"children":break;default:at(s,o,k,null,h,m)}for(C in h)if(m=h[C],w=l[C],h.hasOwnProperty(C)&&(m!=null||w!=null))switch(C){case"value":ae=m;break;case"defaultValue":ce=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(r(91));break;default:m!==w&&at(s,o,C,m,h,w)}o1(s,ae,ce);return;case"option":for(var De in l)if(ae=l[De],l.hasOwnProperty(De)&&ae!=null&&!h.hasOwnProperty(De))switch(De){case"selected":s.selected=!1;break;default:at(s,o,De,null,h,ae)}for(Y in h)if(ae=h[Y],ce=l[Y],h.hasOwnProperty(Y)&&ae!==ce&&(ae!=null||ce!=null))switch(Y){case"selected":s.selected=ae&&typeof ae!="function"&&typeof ae!="symbol";break;default:at(s,o,Y,ae,h,ce)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Oe in l)ae=l[Oe],l.hasOwnProperty(Oe)&&ae!=null&&!h.hasOwnProperty(Oe)&&at(s,o,Oe,null,h,ae);for(oe in h)if(ae=h[oe],ce=l[oe],h.hasOwnProperty(oe)&&ae!==ce&&(ae!=null||ce!=null))switch(oe){case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(r(137,o));break;default:at(s,o,oe,ae,h,ce)}return;default:if(bg(o)){for(var ct in l)ae=l[ct],l.hasOwnProperty(ct)&&ae!==void 0&&!h.hasOwnProperty(ct)&&ny(s,o,ct,void 0,h,ae);for(fe in h)ae=h[fe],ce=l[fe],!h.hasOwnProperty(fe)||ae===ce||ae===void 0&&ce===void 0||ny(s,o,fe,ae,h,ce);return}}for(var ee in l)ae=l[ee],l.hasOwnProperty(ee)&&ae!=null&&!h.hasOwnProperty(ee)&&at(s,o,ee,null,h,ae);for(ge in h)ae=h[ge],ce=l[ge],!h.hasOwnProperty(ge)||ae===ce||ae==null&&ce==null||at(s,o,ge,ae,h,ce)}var ry=null,iy=null;function jd(s){return s.nodeType===9?s:s.ownerDocument}function cS(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function lS(s,o){if(s===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&o==="foreignObject"?0:s}function sy(s,o){return s==="textarea"||s==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var oy=null;function F6(){var s=window.event;return s&&s.type==="popstate"?s===oy?!1:(oy=s,!0):(oy=null,!1)}var uS=typeof setTimeout=="function"?setTimeout:void 0,V6=typeof clearTimeout=="function"?clearTimeout:void 0,fS=typeof Promise=="function"?Promise:void 0,G6=typeof queueMicrotask=="function"?queueMicrotask:typeof fS<"u"?function(s){return fS.resolve(null).then(s).catch(K6)}:uS;function K6(s){setTimeout(function(){throw s})}function Ls(s){return s==="head"}function dS(s,o){var l=o,h=0,m=0;do{var w=l.nextSibling;if(s.removeChild(l),w&&w.nodeType===8)if(l=w.data,l==="/$"){if(0<h&&8>h){l=h;var C=s.ownerDocument;if(l&1&&eu(C.documentElement),l&2&&eu(C.body),l&4)for(l=C.head,eu(l),C=l.firstChild;C;){var k=C.nextSibling,Y=C.nodeName;C[gl]||Y==="SCRIPT"||Y==="STYLE"||Y==="LINK"&&C.rel.toLowerCase()==="stylesheet"||l.removeChild(C),C=k}}if(m===0){s.removeChild(w),cu(o);return}m--}else l==="$"||l==="$?"||l==="$!"?m++:h=l.charCodeAt(0)-48;else h=0;l=w}while(l);cu(o)}function ay(s){var o=s.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var l=o;switch(o=o.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":ay(l),dg(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}s.removeChild(l)}}function W6(s,o,l,h){for(;s.nodeType===1;){var m=l;if(s.nodeName.toLowerCase()!==o.toLowerCase()){if(!h&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(h){if(!s[gl])switch(o){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(w=s.getAttribute("rel"),w==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(w!==m.rel||s.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||s.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||s.getAttribute("title")!==(m.title==null?null:m.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(w=s.getAttribute("src"),(w!==(m.src==null?null:m.src)||s.getAttribute("type")!==(m.type==null?null:m.type)||s.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&w&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(o==="input"&&s.type==="hidden"){var w=m.name==null?null:""+m.name;if(m.type==="hidden"&&s.getAttribute("name")===w)return s}else return s;if(s=Wr(s.nextSibling),s===null)break}return null}function Y6(s,o,l){if(o==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!l||(s=Wr(s.nextSibling),s===null))return null;return s}function cy(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState==="complete"}function X6(s,o){var l=s.ownerDocument;if(s.data!=="$?"||l.readyState==="complete")o();else{var h=function(){o(),l.removeEventListener("DOMContentLoaded",h)};l.addEventListener("DOMContentLoaded",h),s._reactRetry=h}}function Wr(s){for(;s!=null;s=s.nextSibling){var o=s.nodeType;if(o===1||o===3)break;if(o===8){if(o=s.data,o==="$"||o==="$!"||o==="$?"||o==="F!"||o==="F")break;if(o==="/$")return null}}return s}var ly=null;function hS(s){s=s.previousSibling;for(var o=0;s;){if(s.nodeType===8){var l=s.data;if(l==="$"||l==="$!"||l==="$?"){if(o===0)return s;o--}else l==="/$"&&o++}s=s.previousSibling}return null}function pS(s,o,l){switch(o=jd(l),s){case"html":if(s=o.documentElement,!s)throw Error(r(452));return s;case"head":if(s=o.head,!s)throw Error(r(453));return s;case"body":if(s=o.body,!s)throw Error(r(454));return s;default:throw Error(r(451))}}function eu(s){for(var o=s.attributes;o.length;)s.removeAttributeNode(o[0]);dg(s)}var Ir=new Map,gS=new Set;function zd(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var Xi=L.d;L.d={f:Z6,r:Q6,D:J6,C:e4,L:t4,m:n4,X:i4,S:r4,M:s4};function Z6(){var s=Xi.f(),o=Nd();return s||o}function Q6(s){var o=Da(s);o!==null&&o.tag===5&&o.type==="form"?BE(o):Xi.r(s)}var lc=typeof document>"u"?null:document;function mS(s,o,l){var h=lc;if(h&&typeof o=="string"&&o){var m=xr(o);m='link[rel="'+s+'"][href="'+m+'"]',typeof l=="string"&&(m+='[crossorigin="'+l+'"]'),gS.has(m)||(gS.add(m),s={rel:s,crossOrigin:l,href:o},h.querySelector(m)===null&&(o=h.createElement("link"),dn(o,"link",s),en(o),h.head.appendChild(o)))}}function J6(s){Xi.D(s),mS("dns-prefetch",s,null)}function e4(s,o){Xi.C(s,o),mS("preconnect",s,o)}function t4(s,o,l){Xi.L(s,o,l);var h=lc;if(h&&s&&o){var m='link[rel="preload"][as="'+xr(o)+'"]';o==="image"&&l&&l.imageSrcSet?(m+='[imagesrcset="'+xr(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(m+='[imagesizes="'+xr(l.imageSizes)+'"]')):m+='[href="'+xr(s)+'"]';var w=m;switch(o){case"style":w=uc(s);break;case"script":w=fc(s)}Ir.has(w)||(s=p({rel:"preload",href:o==="image"&&l&&l.imageSrcSet?void 0:s,as:o},l),Ir.set(w,s),h.querySelector(m)!==null||o==="style"&&h.querySelector(tu(w))||o==="script"&&h.querySelector(nu(w))||(o=h.createElement("link"),dn(o,"link",s),en(o),h.head.appendChild(o)))}}function n4(s,o){Xi.m(s,o);var l=lc;if(l&&s){var h=o&&typeof o.as=="string"?o.as:"script",m='link[rel="modulepreload"][as="'+xr(h)+'"][href="'+xr(s)+'"]',w=m;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":w=fc(s)}if(!Ir.has(w)&&(s=p({rel:"modulepreload",href:s},o),Ir.set(w,s),l.querySelector(m)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(nu(w)))return}h=l.createElement("link"),dn(h,"link",s),en(h),l.head.appendChild(h)}}}function r4(s,o,l){Xi.S(s,o,l);var h=lc;if(h&&s){var m=Ca(h).hoistableStyles,w=uc(s);o=o||"default";var C=m.get(w);if(!C){var k={loading:0,preload:null};if(C=h.querySelector(tu(w)))k.loading=5;else{s=p({rel:"stylesheet",href:s,"data-precedence":o},l),(l=Ir.get(w))&&uy(s,l);var Y=C=h.createElement("link");en(Y),dn(Y,"link",s),Y._p=new Promise(function(oe,fe){Y.onload=oe,Y.onerror=fe}),Y.addEventListener("load",function(){k.loading|=1}),Y.addEventListener("error",function(){k.loading|=2}),k.loading|=4,qd(C,o,h)}C={type:"stylesheet",instance:C,count:1,state:k},m.set(w,C)}}}function i4(s,o){Xi.X(s,o);var l=lc;if(l&&s){var h=Ca(l).hoistableScripts,m=fc(s),w=h.get(m);w||(w=l.querySelector(nu(m)),w||(s=p({src:s,async:!0},o),(o=Ir.get(m))&&fy(s,o),w=l.createElement("script"),en(w),dn(w,"link",s),l.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},h.set(m,w))}}function s4(s,o){Xi.M(s,o);var l=lc;if(l&&s){var h=Ca(l).hoistableScripts,m=fc(s),w=h.get(m);w||(w=l.querySelector(nu(m)),w||(s=p({src:s,async:!0,type:"module"},o),(o=Ir.get(m))&&fy(s,o),w=l.createElement("script"),en(w),dn(w,"link",s),l.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},h.set(m,w))}}function yS(s,o,l,h){var m=(m=me.current)?zd(m):null;if(!m)throw Error(r(446));switch(s){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(o=uc(l.href),l=Ca(m).hoistableStyles,h=l.get(o),h||(h={type:"style",instance:null,count:0,state:null},l.set(o,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){s=uc(l.href);var w=Ca(m).hoistableStyles,C=w.get(s);if(C||(m=m.ownerDocument||m,C={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},w.set(s,C),(w=m.querySelector(tu(s)))&&!w._p&&(C.instance=w,C.state.loading=5),Ir.has(s)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Ir.set(s,l),w||o4(m,s,l,C.state))),o&&h===null)throw Error(r(528,""));return C}if(o&&h!==null)throw Error(r(529,""));return null;case"script":return o=l.async,l=l.src,typeof l=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=fc(l),l=Ca(m).hoistableScripts,h=l.get(o),h||(h={type:"script",instance:null,count:0,state:null},l.set(o,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,s))}}function uc(s){return'href="'+xr(s)+'"'}function tu(s){return'link[rel="stylesheet"]['+s+"]"}function bS(s){return p({},s,{"data-precedence":s.precedence,precedence:null})}function o4(s,o,l,h){s.querySelector('link[rel="preload"][as="style"]['+o+"]")?h.loading=1:(o=s.createElement("link"),h.preload=o,o.addEventListener("load",function(){return h.loading|=1}),o.addEventListener("error",function(){return h.loading|=2}),dn(o,"link",l),en(o),s.head.appendChild(o))}function fc(s){return'[src="'+xr(s)+'"]'}function nu(s){return"script[async]"+s}function vS(s,o,l){if(o.count++,o.instance===null)switch(o.type){case"style":var h=s.querySelector('style[data-href~="'+xr(l.href)+'"]');if(h)return o.instance=h,en(h),h;var m=p({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return h=(s.ownerDocument||s).createElement("style"),en(h),dn(h,"style",m),qd(h,l.precedence,s),o.instance=h;case"stylesheet":m=uc(l.href);var w=s.querySelector(tu(m));if(w)return o.state.loading|=4,o.instance=w,en(w),w;h=bS(l),(m=Ir.get(m))&&uy(h,m),w=(s.ownerDocument||s).createElement("link"),en(w);var C=w;return C._p=new Promise(function(k,Y){C.onload=k,C.onerror=Y}),dn(w,"link",h),o.state.loading|=4,qd(w,l.precedence,s),o.instance=w;case"script":return w=fc(l.src),(m=s.querySelector(nu(w)))?(o.instance=m,en(m),m):(h=l,(m=Ir.get(w))&&(h=p({},l),fy(h,m)),s=s.ownerDocument||s,m=s.createElement("script"),en(m),dn(m,"link",h),s.head.appendChild(m),o.instance=m);case"void":return null;default:throw Error(r(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(h=o.instance,o.state.loading|=4,qd(h,l.precedence,s));return o.instance}function qd(s,o,l){for(var h=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=h.length?h[h.length-1]:null,w=m,C=0;C<h.length;C++){var k=h[C];if(k.dataset.precedence===o)w=k;else if(w!==m)break}w?w.parentNode.insertBefore(s,w.nextSibling):(o=l.nodeType===9?l.head:l,o.insertBefore(s,o.firstChild))}function uy(s,o){s.crossOrigin==null&&(s.crossOrigin=o.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=o.referrerPolicy),s.title==null&&(s.title=o.title)}function fy(s,o){s.crossOrigin==null&&(s.crossOrigin=o.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=o.referrerPolicy),s.integrity==null&&(s.integrity=o.integrity)}var Hd=null;function wS(s,o,l){if(Hd===null){var h=new Map,m=Hd=new Map;m.set(l,h)}else m=Hd,h=m.get(l),h||(h=new Map,m.set(l,h));if(h.has(s))return h;for(h.set(s,null),l=l.getElementsByTagName(s),m=0;m<l.length;m++){var w=l[m];if(!(w[gl]||w[_n]||s==="link"&&w.getAttribute("rel")==="stylesheet")&&w.namespaceURI!=="http://www.w3.org/2000/svg"){var C=w.getAttribute(o)||"";C=s+C;var k=h.get(C);k?k.push(w):h.set(C,[w])}}return h}function ES(s,o,l){s=s.ownerDocument||s,s.head.insertBefore(l,o==="title"?s.querySelector("head > title"):null)}function a4(s,o,l){if(l===1||o.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return s=o.disabled,typeof o.precedence=="string"&&s==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function SS(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}var ru=null;function c4(){}function l4(s,o,l){if(ru===null)throw Error(r(475));var h=ru;if(o.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var m=uc(l.href),w=s.querySelector(tu(m));if(w){s=w._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(h.count++,h=Fd.bind(h),s.then(h,h)),o.state.loading|=4,o.instance=w,en(w);return}w=s.ownerDocument||s,l=bS(l),(m=Ir.get(m))&&uy(l,m),w=w.createElement("link"),en(w);var C=w;C._p=new Promise(function(k,Y){C.onload=k,C.onerror=Y}),dn(w,"link",l),o.instance=w}h.stylesheets===null&&(h.stylesheets=new Map),h.stylesheets.set(o,s),(s=o.state.preload)&&(o.state.loading&3)===0&&(h.count++,o=Fd.bind(h),s.addEventListener("load",o),s.addEventListener("error",o))}}function u4(){if(ru===null)throw Error(r(475));var s=ru;return s.stylesheets&&s.count===0&&dy(s,s.stylesheets),0<s.count?function(o){var l=setTimeout(function(){if(s.stylesheets&&dy(s,s.stylesheets),s.unsuspend){var h=s.unsuspend;s.unsuspend=null,h()}},6e4);return s.unsuspend=o,function(){s.unsuspend=null,clearTimeout(l)}}:null}function Fd(){if(this.count--,this.count===0){if(this.stylesheets)dy(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var Vd=null;function dy(s,o){s.stylesheets=null,s.unsuspend!==null&&(s.count++,Vd=new Map,o.forEach(f4,s),Vd=null,Fd.call(s))}function f4(s,o){if(!(o.state.loading&4)){var l=Vd.get(s);if(l)var h=l.get(null);else{l=new Map,Vd.set(s,l);for(var m=s.querySelectorAll("link[data-precedence],style[data-precedence]"),w=0;w<m.length;w++){var C=m[w];(C.nodeName==="LINK"||C.getAttribute("media")!=="not all")&&(l.set(C.dataset.precedence,C),h=C)}h&&l.set(null,h)}m=o.instance,C=m.getAttribute("data-precedence"),w=l.get(C)||h,w===h&&l.set(null,m),l.set(C,m),this.count++,h=Fd.bind(this),m.addEventListener("load",h),m.addEventListener("error",h),w?w.parentNode.insertBefore(m,w.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(m,s.firstChild)),o.state.loading|=4}}var iu={$$typeof:O,Provider:null,Consumer:null,_currentValue:V,_currentValue2:V,_threadCount:0};function d4(s,o,l,h,m,w,C,k){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=cg(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=cg(0),this.hiddenUpdates=cg(null),this.identifierPrefix=h,this.onUncaughtError=m,this.onCaughtError=w,this.onRecoverableError=C,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=k,this.incompleteTransitions=new Map}function _S(s,o,l,h,m,w,C,k,Y,oe,fe,ge){return s=new d4(s,o,l,C,k,Y,oe,ge),o=1,w===!0&&(o|=24),w=ar(3,null,null,o),s.current=w,w.stateNode=s,o=Kg(),o.refCount++,s.pooledCache=o,o.refCount++,w.memoizedState={element:h,isDehydrated:l,cache:o},Zg(w),s}function xS(s){return s?(s=qa,s):qa}function AS(s,o,l,h,m,w){m=xS(m),h.context===null?h.context=m:h.pendingContext=m,h=Rs(o),h.payload={element:l},w=w===void 0?null:w,w!==null&&(h.callback=w),l=Os(s,h,o),l!==null&&(dr(l,s,o),Ul(l,s,o))}function RS(s,o){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var l=s.retryLane;s.retryLane=l!==0&&l<o?l:o}}function hy(s,o){RS(s,o),(s=s.alternate)&&RS(s,o)}function OS(s){if(s.tag===13){var o=za(s,67108864);o!==null&&dr(o,s,67108864),hy(s,67108864)}}var Gd=!0;function h4(s,o,l,h){var m=R.T;R.T=null;var w=L.p;try{L.p=2,py(s,o,l,h)}finally{L.p=w,R.T=m}}function p4(s,o,l,h){var m=R.T;R.T=null;var w=L.p;try{L.p=8,py(s,o,l,h)}finally{L.p=w,R.T=m}}function py(s,o,l,h){if(Gd){var m=gy(h);if(m===null)ty(s,o,h,Kd,l),DS(s,h);else if(m4(m,s,o,l,h))h.stopPropagation();else if(DS(s,h),o&4&&-1<g4.indexOf(s)){for(;m!==null;){var w=Da(m);if(w!==null)switch(w.tag){case 3:if(w=w.stateNode,w.current.memoizedState.isDehydrated){var C=Ze(w.pendingLanes);if(C!==0){var k=w;for(k.pendingLanes|=2,k.entangledLanes|=2;C;){var Y=1<<31-A(C);k.entanglements[1]|=Y,C&=~Y}di(w),(tt&6)===0&&(Cd=xt()+500,Zl(0))}}break;case 13:k=za(w,2),k!==null&&dr(k,w,2),Nd(),hy(w,2)}if(w=gy(h),w===null&&ty(s,o,h,Kd,l),w===m)break;m=w}m!==null&&h.stopPropagation()}else ty(s,o,h,null,l)}}function gy(s){return s=wg(s),my(s)}var Kd=null;function my(s){if(Kd=null,s=Ta(s),s!==null){var o=a(s);if(o===null)s=null;else{var l=o.tag;if(l===13){if(s=c(o),s!==null)return s;s=null}else if(l===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;s=null}else o!==s&&(s=null)}}return Kd=s,null}function TS(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(vo()){case Bi:return 2;case En:return 8;case Qt:case Jt:return 32;case Sr:return 268435456;default:return 32}default:return 32}}var yy=!1,js=null,zs=null,qs=null,su=new Map,ou=new Map,Hs=[],g4="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function DS(s,o){switch(s){case"focusin":case"focusout":js=null;break;case"dragenter":case"dragleave":zs=null;break;case"mouseover":case"mouseout":qs=null;break;case"pointerover":case"pointerout":su.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":ou.delete(o.pointerId)}}function au(s,o,l,h,m,w){return s===null||s.nativeEvent!==w?(s={blockedOn:o,domEventName:l,eventSystemFlags:h,nativeEvent:w,targetContainers:[m]},o!==null&&(o=Da(o),o!==null&&OS(o)),s):(s.eventSystemFlags|=h,o=s.targetContainers,m!==null&&o.indexOf(m)===-1&&o.push(m),s)}function m4(s,o,l,h,m){switch(o){case"focusin":return js=au(js,s,o,l,h,m),!0;case"dragenter":return zs=au(zs,s,o,l,h,m),!0;case"mouseover":return qs=au(qs,s,o,l,h,m),!0;case"pointerover":var w=m.pointerId;return su.set(w,au(su.get(w)||null,s,o,l,h,m)),!0;case"gotpointercapture":return w=m.pointerId,ou.set(w,au(ou.get(w)||null,s,o,l,h,m)),!0}return!1}function CS(s){var o=Ta(s.target);if(o!==null){var l=a(o);if(l!==null){if(o=l.tag,o===13){if(o=c(l),o!==null){s.blockedOn=o,l8(s.priority,function(){if(l.tag===13){var h=fr();h=lg(h);var m=za(l,h);m!==null&&dr(m,l,h),hy(l,h)}});return}}else if(o===3&&l.stateNode.current.memoizedState.isDehydrated){s.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Wd(s){if(s.blockedOn!==null)return!1;for(var o=s.targetContainers;0<o.length;){var l=gy(s.nativeEvent);if(l===null){l=s.nativeEvent;var h=new l.constructor(l.type,l);vg=h,l.target.dispatchEvent(h),vg=null}else return o=Da(l),o!==null&&OS(o),s.blockedOn=l,!1;o.shift()}return!0}function IS(s,o,l){Wd(s)&&l.delete(o)}function y4(){yy=!1,js!==null&&Wd(js)&&(js=null),zs!==null&&Wd(zs)&&(zs=null),qs!==null&&Wd(qs)&&(qs=null),su.forEach(IS),ou.forEach(IS)}function Yd(s,o){s.blockedOn===o&&(s.blockedOn=null,yy||(yy=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,y4)))}var Xd=null;function NS(s){Xd!==s&&(Xd=s,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Xd===s&&(Xd=null);for(var o=0;o<s.length;o+=3){var l=s[o],h=s[o+1],m=s[o+2];if(typeof h!="function"){if(my(h||l)===null)continue;break}var w=Da(l);w!==null&&(s.splice(o,3),o-=3,mm(w,{pending:!0,data:m,method:l.method,action:h},h,m))}}))}function cu(s){function o(Y){return Yd(Y,s)}js!==null&&Yd(js,s),zs!==null&&Yd(zs,s),qs!==null&&Yd(qs,s),su.forEach(o),ou.forEach(o);for(var l=0;l<Hs.length;l++){var h=Hs[l];h.blockedOn===s&&(h.blockedOn=null)}for(;0<Hs.length&&(l=Hs[0],l.blockedOn===null);)CS(l),l.blockedOn===null&&Hs.shift();if(l=(s.ownerDocument||s).$$reactFormReplay,l!=null)for(h=0;h<l.length;h+=3){var m=l[h],w=l[h+1],C=m[Mn]||null;if(typeof w=="function")C||NS(l);else if(C){var k=null;if(w&&w.hasAttribute("formAction")){if(m=w,C=w[Mn]||null)k=C.formAction;else if(my(m)!==null)continue}else k=C.action;typeof k=="function"?l[h+1]=k:(l.splice(h,3),h-=3),NS(l)}}}function by(s){this._internalRoot=s}Zd.prototype.render=by.prototype.render=function(s){var o=this._internalRoot;if(o===null)throw Error(r(409));var l=o.current,h=fr();AS(l,h,s,o,null,null)},Zd.prototype.unmount=by.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var o=s.containerInfo;AS(s.current,2,null,s,null,null),Nd(),o[Oa]=null}};function Zd(s){this._internalRoot=s}Zd.prototype.unstable_scheduleHydration=function(s){if(s){var o=Yw();s={blockedOn:null,target:s,priority:o};for(var l=0;l<Hs.length&&o!==0&&o<Hs[l].priority;l++);Hs.splice(l,0,s),l===0&&CS(s)}};var $S=t.version;if($S!=="19.1.0")throw Error(r(527,$S,"19.1.0"));L.findDOMNode=function(s){var o=s._reactInternals;if(o===void 0)throw typeof s.render=="function"?Error(r(188)):(s=Object.keys(s).join(","),Error(r(268,s)));return s=f(o),s=s!==null?d(s):null,s=s===null?null:s.stateNode,s};var b4={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:R,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Qd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Qd.isDisabled&&Qd.supportsFiber)try{sr=Qd.inject(b4),B=Qd}catch{}}return uu.createRoot=function(s,o){if(!i(s))throw Error(r(299));var l=!1,h="",m=YE,w=XE,C=ZE,k=null;return o!=null&&(o.unstable_strictMode===!0&&(l=!0),o.identifierPrefix!==void 0&&(h=o.identifierPrefix),o.onUncaughtError!==void 0&&(m=o.onUncaughtError),o.onCaughtError!==void 0&&(w=o.onCaughtError),o.onRecoverableError!==void 0&&(C=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(k=o.unstable_transitionCallbacks)),o=_S(s,1,!1,null,null,l,h,m,w,C,k,null),s[Oa]=o.current,ey(s),new by(o)},uu.hydrateRoot=function(s,o,l){if(!i(s))throw Error(r(299));var h=!1,m="",w=YE,C=XE,k=ZE,Y=null,oe=null;return l!=null&&(l.unstable_strictMode===!0&&(h=!0),l.identifierPrefix!==void 0&&(m=l.identifierPrefix),l.onUncaughtError!==void 0&&(w=l.onUncaughtError),l.onCaughtError!==void 0&&(C=l.onCaughtError),l.onRecoverableError!==void 0&&(k=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(Y=l.unstable_transitionCallbacks),l.formState!==void 0&&(oe=l.formState)),o=_S(s,1,!0,o,l??null,h,m,w,C,k,Y,oe),o.context=xS(null),l=o.current,h=fr(),h=lg(h),m=Rs(h),m.callback=null,Os(l,m,h),l=h,o.current.lanes=l,pl(o,l),di(o),s[Oa]=o.current,ey(s),new Zd(o)},uu.version="19.1.0",uu}var HS;function T4(){if(HS)return Ey.exports;HS=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Ey.exports=O4(),Ey.exports}var D4=T4(),fu={},FS;function C4(){if(FS)return fu;FS=1,Object.defineProperty(fu,"__esModule",{value:!0}),fu.parse=c,fu.serialize=d;const e=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,t=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,i=Object.prototype.toString,a=(()=>{const y=function(){};return y.prototype=Object.create(null),y})();function c(y,b){const v=new a,E=y.length;if(E<2)return v;const S=b?.decode||p;let x=0;do{const T=y.indexOf("=",x);if(T===-1)break;const O=y.indexOf(";",x),U=O===-1?E:O;if(T>U){x=y.lastIndexOf(";",T-1)+1;continue}const N=u(y,x,T),I=f(y,T,N),j=y.slice(N,I);if(v[j]===void 0){let z=u(y,T+1,U),P=f(y,U,z);const G=S(y.slice(z,P));v[j]=G}x=U+1}while(x<E);return v}function u(y,b,v){do{const E=y.charCodeAt(b);if(E!==32&&E!==9)return b}while(++b<v);return v}function f(y,b,v){for(;b>v;){const E=y.charCodeAt(--b);if(E!==32&&E!==9)return b+1}return v}function d(y,b,v){const E=v?.encode||encodeURIComponent;if(!e.test(y))throw new TypeError(`argument name is invalid: ${y}`);const S=E(b);if(!t.test(S))throw new TypeError(`argument val is invalid: ${b}`);let x=y+"="+S;if(!v)return x;if(v.maxAge!==void 0){if(!Number.isInteger(v.maxAge))throw new TypeError(`option maxAge is invalid: ${v.maxAge}`);x+="; Max-Age="+v.maxAge}if(v.domain){if(!n.test(v.domain))throw new TypeError(`option domain is invalid: ${v.domain}`);x+="; Domain="+v.domain}if(v.path){if(!r.test(v.path))throw new TypeError(`option path is invalid: ${v.path}`);x+="; Path="+v.path}if(v.expires){if(!g(v.expires)||!Number.isFinite(v.expires.valueOf()))throw new TypeError(`option expires is invalid: ${v.expires}`);x+="; Expires="+v.expires.toUTCString()}if(v.httpOnly&&(x+="; HttpOnly"),v.secure&&(x+="; Secure"),v.partitioned&&(x+="; Partitioned"),v.priority)switch(typeof v.priority=="string"?v.priority.toLowerCase():void 0){case"low":x+="; Priority=Low";break;case"medium":x+="; Priority=Medium";break;case"high":x+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${v.priority}`)}if(v.sameSite)switch(typeof v.sameSite=="string"?v.sameSite.toLowerCase():v.sameSite){case!0:case"strict":x+="; SameSite=Strict";break;case"lax":x+="; SameSite=Lax";break;case"none":x+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${v.sameSite}`)}return x}function p(y){if(y.indexOf("%")===-1)return y;try{return decodeURIComponent(y)}catch{return y}}function g(y){return i.call(y)==="[object Date]"}return fu}C4();var VS="popstate";function I4(e={}){function t(r,i){let{pathname:a,search:c,hash:u}=r.location;return tb("",{pathname:a,search:c,hash:u},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:ef(i)}return $4(t,n,null,e)}function Rt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Di(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function N4(){return Math.random().toString(36).substring(2,10)}function GS(e,t){return{usr:e.state,key:e.key,idx:t}}function tb(e,t,n=null,r){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?el(t):t,state:n,key:t&&t.key||r||N4()}}function ef({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function el(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function $4(e,t,n,r={}){let{window:i=document.defaultView,v5Compat:a=!1}=r,c=i.history,u="POP",f=null,d=p();d==null&&(d=0,c.replaceState({...c.state,idx:d},""));function p(){return(c.state||{idx:null}).idx}function g(){u="POP";let S=p(),x=S==null?null:S-d;d=S,f&&f({action:u,location:E.location,delta:x})}function y(S,x){u="PUSH";let T=tb(E.location,S,x);d=p()+1;let O=GS(T,d),U=E.createHref(T);try{c.pushState(O,"",U)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;i.location.assign(U)}a&&f&&f({action:u,location:E.location,delta:1})}function b(S,x){u="REPLACE";let T=tb(E.location,S,x);d=p();let O=GS(T,d),U=E.createHref(T);c.replaceState(O,"",U),a&&f&&f({action:u,location:E.location,delta:0})}function v(S){return U4(S)}let E={get action(){return u},get location(){return e(i,c)},listen(S){if(f)throw new Error("A history only accepts one active listener");return i.addEventListener(VS,g),f=S,()=>{i.removeEventListener(VS,g),f=null}},createHref(S){return t(i,S)},createURL:v,encodeLocation(S){let x=v(S);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:y,replace:b,go(S){return c.go(S)}};return E}function U4(e,t=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Rt(n,"No window.location.(origin|href) available to create URL");let r=typeof e=="string"?e:ef(e);return r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function WO(e,t,n="/"){return B4(e,t,n,!1)}function B4(e,t,n,r){let i=typeof t=="string"?el(t):t,a=gs(i.pathname||"/",n);if(a==null)return null;let c=YO(e);P4(c);let u=null;for(let f=0;u==null&&f<c.length;++f){let d=K4(a);u=V4(c[f],d,r)}return u}function YO(e,t=[],n=[],r=""){let i=(a,c,u)=>{let f={relativePath:u===void 0?a.path||"":u,caseSensitive:a.caseSensitive===!0,childrenIndex:c,route:a};f.relativePath.startsWith("/")&&(Rt(f.relativePath.startsWith(r),`Absolute route path "${f.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(r.length));let d=fs([r,f.relativePath]),p=n.concat(f);a.children&&a.children.length>0&&(Rt(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${d}".`),YO(a.children,t,p,d)),!(a.path==null&&!a.index)&&t.push({path:d,score:H4(d,a.index),routesMeta:p})};return e.forEach((a,c)=>{if(a.path===""||!a.path?.includes("?"))i(a,c);else for(let u of XO(a.path))i(a,c,u)}),t}function XO(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let c=XO(r.join("/")),u=[];return u.push(...c.map(f=>f===""?a:[a,f].join("/"))),i&&u.push(...c),u.map(f=>e.startsWith("/")&&f===""?"/":f)}function P4(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:F4(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var k4=/^:[\w-]+$/,M4=3,L4=2,j4=1,z4=10,q4=-2,KS=e=>e==="*";function H4(e,t){let n=e.split("/"),r=n.length;return n.some(KS)&&(r+=q4),t&&(r+=L4),n.filter(i=>!KS(i)).reduce((i,a)=>i+(k4.test(a)?M4:a===""?j4:z4),r)}function F4(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function V4(e,t,n=!1){let{routesMeta:r}=e,i={},a="/",c=[];for(let u=0;u<r.length;++u){let f=r[u],d=u===r.length-1,p=a==="/"?t:t.slice(a.length)||"/",g=Wh({path:f.relativePath,caseSensitive:f.caseSensitive,end:d},p),y=f.route;if(!g&&d&&n&&!r[r.length-1].route.index&&(g=Wh({path:f.relativePath,caseSensitive:f.caseSensitive,end:!1},p)),!g)return null;Object.assign(i,g.params),c.push({params:i,pathname:fs([a,g.pathname]),pathnameBase:Z4(fs([a,g.pathnameBase])),route:y}),g.pathnameBase!=="/"&&(a=fs([a,g.pathnameBase]))}return c}function Wh(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=G4(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let a=i[0],c=a.replace(/(.)\/+$/,"$1"),u=i.slice(1);return{params:r.reduce((d,{paramName:p,isOptional:g},y)=>{if(p==="*"){let v=u[y]||"";c=a.slice(0,a.length-v.length).replace(/(.)\/+$/,"$1")}const b=u[y];return g&&!b?d[p]=void 0:d[p]=(b||"").replace(/%2F/g,"/"),d},{}),pathname:a,pathnameBase:c,pattern:e}}function G4(e,t=!1,n=!0){Di(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,u,f)=>(r.push({paramName:u,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function K4(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Di(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function gs(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function W4(e,t="/"){let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?el(e):e;return{pathname:n?n.startsWith("/")?n:Y4(n,t):t,search:Q4(r),hash:J4(i)}}function Y4(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Ay(e,t,n,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function X4(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function ZO(e){let t=X4(e);return t.map((n,r)=>r===t.length-1?n.pathname:n.pathnameBase)}function QO(e,t,n,r=!1){let i;typeof e=="string"?i=el(e):(i={...e},Rt(!i.pathname||!i.pathname.includes("?"),Ay("?","pathname","search",i)),Rt(!i.pathname||!i.pathname.includes("#"),Ay("#","pathname","hash",i)),Rt(!i.search||!i.search.includes("#"),Ay("#","search","hash",i)));let a=e===""||i.pathname==="",c=a?"/":i.pathname,u;if(c==null)u=n;else{let g=t.length-1;if(!r&&c.startsWith("..")){let y=c.split("/");for(;y[0]==="..";)y.shift(),g-=1;i.pathname=y.join("/")}u=g>=0?t[g]:"/"}let f=W4(i,u),d=c&&c!=="/"&&c.endsWith("/"),p=(a||c===".")&&n.endsWith("/");return!f.pathname.endsWith("/")&&(d||p)&&(f.pathname+="/"),f}var fs=e=>e.join("/").replace(/\/\/+/g,"/"),Z4=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Q4=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,J4=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function e$(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var JO=["POST","PUT","PATCH","DELETE"];new Set(JO);var t$=["GET",...JO];new Set(t$);var tl=M.createContext(null);tl.displayName="DataRouter";var yp=M.createContext(null);yp.displayName="DataRouterState";var eT=M.createContext({isTransitioning:!1});eT.displayName="ViewTransition";var n$=M.createContext(new Map);n$.displayName="Fetchers";var r$=M.createContext(null);r$.displayName="Await";var $i=M.createContext(null);$i.displayName="Navigation";var wf=M.createContext(null);wf.displayName="Location";var Ui=M.createContext({outlet:null,matches:[],isDataRoute:!1});Ui.displayName="Route";var bv=M.createContext(null);bv.displayName="RouteError";function i$(e,{relative:t}={}){Rt(Ef(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=M.useContext($i),{hash:i,pathname:a,search:c}=Sf(e,{relative:t}),u=a;return n!=="/"&&(u=a==="/"?n:fs([n,a])),r.createHref({pathname:u,search:c,hash:i})}function Ef(){return M.useContext(wf)!=null}function ga(){return Rt(Ef(),"useLocation() may be used only in the context of a <Router> component."),M.useContext(wf).location}var tT="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function nT(e){M.useContext($i).static||M.useLayoutEffect(e)}function s$(){let{isDataRoute:e}=M.useContext(Ui);return e?w$():o$()}function o$(){Rt(Ef(),"useNavigate() may be used only in the context of a <Router> component.");let e=M.useContext(tl),{basename:t,navigator:n}=M.useContext($i),{matches:r}=M.useContext(Ui),{pathname:i}=ga(),a=JSON.stringify(ZO(r)),c=M.useRef(!1);return nT(()=>{c.current=!0}),M.useCallback((f,d={})=>{if(Di(c.current,tT),!c.current)return;if(typeof f=="number"){n.go(f);return}let p=QO(f,JSON.parse(a),i,d.relative==="path");e==null&&t!=="/"&&(p.pathname=p.pathname==="/"?t:fs([t,p.pathname])),(d.replace?n.replace:n.push)(p,d.state,d)},[t,n,a,i,e])}var a$=M.createContext(null);function c$(e){let t=M.useContext(Ui).outlet;return t&&M.createElement(a$.Provider,{value:e},t)}function Sf(e,{relative:t}={}){let{matches:n}=M.useContext(Ui),{pathname:r}=ga(),i=JSON.stringify(ZO(n));return M.useMemo(()=>QO(e,JSON.parse(i),r,t==="path"),[e,i,r,t])}function l$(e,t){return rT(e,t)}function rT(e,t,n,r){Rt(Ef(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=M.useContext($i),{matches:a}=M.useContext(Ui),c=a[a.length-1],u=c?c.params:{},f=c?c.pathname:"/",d=c?c.pathnameBase:"/",p=c&&c.route;{let x=p&&p.path||"";iT(f,!p||x.endsWith("*")||x.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${x}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${x}"> to <Route path="${x==="/"?"*":`${x}/*`}">.`)}let g=ga(),y;if(t){let x=typeof t=="string"?el(t):t;Rt(d==="/"||x.pathname?.startsWith(d),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${d}" but pathname "${x.pathname}" was given in the \`location\` prop.`),y=x}else y=g;let b=y.pathname||"/",v=b;if(d!=="/"){let x=d.replace(/^\//,"").split("/");v="/"+b.replace(/^\//,"").split("/").slice(x.length).join("/")}let E=WO(e,{pathname:v});Di(p||E!=null,`No routes matched location "${y.pathname}${y.search}${y.hash}" `),Di(E==null||E[E.length-1].route.element!==void 0||E[E.length-1].route.Component!==void 0||E[E.length-1].route.lazy!==void 0,`Matched leaf route at location "${y.pathname}${y.search}${y.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let S=p$(E&&E.map(x=>Object.assign({},x,{params:Object.assign({},u,x.params),pathname:fs([d,i.encodeLocation?i.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?d:fs([d,i.encodeLocation?i.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),a,n,r);return t&&S?M.createElement(wf.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...y},navigationType:"POP"}},S):S}function u$(){let e=v$(),t=e$(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},c=null;return console.error("Error handled by React Router default ErrorBoundary:",e),c=M.createElement(M.Fragment,null,M.createElement("p",null," Hey developer "),M.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",M.createElement("code",{style:a},"ErrorBoundary")," or"," ",M.createElement("code",{style:a},"errorElement")," prop on your route.")),M.createElement(M.Fragment,null,M.createElement("h2",null,"Unexpected Application Error!"),M.createElement("h3",{style:{fontStyle:"italic"}},t),n?M.createElement("pre",{style:i},n):null,c)}var f$=M.createElement(u$,null),d$=class extends M.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?M.createElement(Ui.Provider,{value:this.props.routeContext},M.createElement(bv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function h$({routeContext:e,match:t,children:n}){let r=M.useContext(tl);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),M.createElement(Ui.Provider,{value:e},n)}function p$(e,t=[],n=null,r=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let i=e,a=n?.errors;if(a!=null){let f=i.findIndex(d=>d.route.id&&a?.[d.route.id]!==void 0);Rt(f>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),i=i.slice(0,Math.min(i.length,f+1))}let c=!1,u=-1;if(n)for(let f=0;f<i.length;f++){let d=i[f];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(u=f),d.route.id){let{loaderData:p,errors:g}=n,y=d.route.loader&&!p.hasOwnProperty(d.route.id)&&(!g||g[d.route.id]===void 0);if(d.route.lazy||y){c=!0,u>=0?i=i.slice(0,u+1):i=[i[0]];break}}}return i.reduceRight((f,d,p)=>{let g,y=!1,b=null,v=null;n&&(g=a&&d.route.id?a[d.route.id]:void 0,b=d.route.errorElement||f$,c&&(u<0&&p===0?(iT("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),y=!0,v=null):u===p&&(y=!0,v=d.route.hydrateFallbackElement||null)));let E=t.concat(i.slice(0,p+1)),S=()=>{let x;return g?x=b:y?x=v:d.route.Component?x=M.createElement(d.route.Component,null):d.route.element?x=d.route.element:x=f,M.createElement(h$,{match:d,routeContext:{outlet:f,matches:E,isDataRoute:n!=null},children:x})};return n&&(d.route.ErrorBoundary||d.route.errorElement||p===0)?M.createElement(d$,{location:n.location,revalidation:n.revalidation,component:b,error:g,children:S(),routeContext:{outlet:null,matches:E,isDataRoute:!0}}):S()},null)}function vv(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function g$(e){let t=M.useContext(tl);return Rt(t,vv(e)),t}function m$(e){let t=M.useContext(yp);return Rt(t,vv(e)),t}function y$(e){let t=M.useContext(Ui);return Rt(t,vv(e)),t}function wv(e){let t=y$(e),n=t.matches[t.matches.length-1];return Rt(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function b$(){return wv("useRouteId")}function v$(){let e=M.useContext(bv),t=m$("useRouteError"),n=wv("useRouteError");return e!==void 0?e:t.errors?.[n]}function w$(){let{router:e}=g$("useNavigate"),t=wv("useNavigate"),n=M.useRef(!1);return nT(()=>{n.current=!0}),M.useCallback(async(i,a={})=>{Di(n.current,tT),n.current&&(typeof i=="number"?e.navigate(i):await e.navigate(i,{fromRouteId:t,...a}))},[e,t])}var WS={};function iT(e,t,n){!t&&!WS[e]&&(WS[e]=!0,Di(!1,n))}M.memo(E$);function E$({routes:e,future:t,state:n}){return rT(e,void 0,n,t)}function S$(e){return c$(e.context)}function Js(e){Rt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function _$({basename:e="/",children:t=null,location:n,navigationType:r="POP",navigator:i,static:a=!1}){Rt(!Ef(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=e.replace(/^\/*/,"/"),u=M.useMemo(()=>({basename:c,navigator:i,static:a,future:{}}),[c,i,a]);typeof n=="string"&&(n=el(n));let{pathname:f="/",search:d="",hash:p="",state:g=null,key:y="default"}=n,b=M.useMemo(()=>{let v=gs(f,c);return v==null?null:{location:{pathname:v,search:d,hash:p,state:g,key:y},navigationType:r}},[c,f,d,p,g,y,r]);return Di(b!=null,`<Router basename="${c}"> is not able to match the URL "${f}${d}${p}" because it does not start with the basename, so the <Router> won't render anything.`),b==null?null:M.createElement($i.Provider,{value:u},M.createElement(wf.Provider,{children:t,value:b}))}function x$({children:e,location:t}){return l$(nb(e),t)}function nb(e,t=[]){let n=[];return M.Children.forEach(e,(r,i)=>{if(!M.isValidElement(r))return;let a=[...t,i];if(r.type===M.Fragment){n.push.apply(n,nb(r.props.children,a));return}Rt(r.type===Js,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Rt(!r.props.index||!r.props.children,"An index route cannot have child routes.");let c={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(c.children=nb(r.props.children,a)),n.push(c)}),n}var Ih="get",Nh="application/x-www-form-urlencoded";function bp(e){return e!=null&&typeof e.tagName=="string"}function A$(e){return bp(e)&&e.tagName.toLowerCase()==="button"}function R$(e){return bp(e)&&e.tagName.toLowerCase()==="form"}function O$(e){return bp(e)&&e.tagName.toLowerCase()==="input"}function T$(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function D$(e,t){return e.button===0&&(!t||t==="_self")&&!T$(e)}var Jd=null;function C$(){if(Jd===null)try{new FormData(document.createElement("form"),0),Jd=!1}catch{Jd=!0}return Jd}var I$=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Ry(e){return e!=null&&!I$.has(e)?(Di(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Nh}"`),null):e}function N$(e,t){let n,r,i,a,c;if(R$(e)){let u=e.getAttribute("action");r=u?gs(u,t):null,n=e.getAttribute("method")||Ih,i=Ry(e.getAttribute("enctype"))||Nh,a=new FormData(e)}else if(A$(e)||O$(e)&&(e.type==="submit"||e.type==="image")){let u=e.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let f=e.getAttribute("formaction")||u.getAttribute("action");if(r=f?gs(f,t):null,n=e.getAttribute("formmethod")||u.getAttribute("method")||Ih,i=Ry(e.getAttribute("formenctype"))||Ry(u.getAttribute("enctype"))||Nh,a=new FormData(u,e),!C$()){let{name:d,type:p,value:g}=e;if(p==="image"){let y=d?`${d}.`:"";a.append(`${y}x`,"0"),a.append(`${y}y`,"0")}else d&&a.append(d,g)}}else{if(bp(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Ih,r=null,i=Nh,c=e}return a&&i==="text/plain"&&(c=a,a=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:a,body:c}}function Ev(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}async function $$(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function U$(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function B$(e,t,n){let r=await Promise.all(e.map(async i=>{let a=t.routes[i.route.id];if(a){let c=await $$(a,n);return c.links?c.links():[]}return[]}));return L$(r.flat(1).filter(U$).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function YS(e,t,n,r,i,a){let c=(f,d)=>n[d]?f.route.id!==n[d].route.id:!0,u=(f,d)=>n[d].pathname!==f.pathname||n[d].route.path?.endsWith("*")&&n[d].params["*"]!==f.params["*"];return a==="assets"?t.filter((f,d)=>c(f,d)||u(f,d)):a==="data"?t.filter((f,d)=>{let p=r.routes[f.route.id];if(!p||!p.hasLoader)return!1;if(c(f,d)||u(f,d))return!0;if(f.route.shouldRevalidate){let g=f.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:f.params,defaultShouldRevalidate:!0});if(typeof g=="boolean")return g}return!0}):[]}function P$(e,t,{includeHydrateFallback:n}={}){return k$(e.map(r=>{let i=t.routes[r.route.id];if(!i)return[];let a=[i.module];return i.clientActionModule&&(a=a.concat(i.clientActionModule)),i.clientLoaderModule&&(a=a.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(a=a.concat(i.hydrateFallbackModule)),i.imports&&(a=a.concat(i.imports)),a}).flat(1))}function k$(e){return[...new Set(e)]}function M$(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}function L$(e,t){let n=new Set;return new Set(t),e.reduce((r,i)=>{let a=JSON.stringify(M$(i));return n.has(a)||(n.add(a),r.push({key:a,link:i})),r},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var j$=new Set([100,101,204,205]);function z$(e,t){let n=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return n.pathname==="/"?n.pathname="_root.data":t&&gs(n.pathname,t)==="/"?n.pathname=`${t.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function sT(){let e=M.useContext(tl);return Ev(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function q$(){let e=M.useContext(yp);return Ev(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var Sv=M.createContext(void 0);Sv.displayName="FrameworkContext";function oT(){let e=M.useContext(Sv);return Ev(e,"You must render this element inside a <HydratedRouter> element"),e}function H$(e,t){let n=M.useContext(Sv),[r,i]=M.useState(!1),[a,c]=M.useState(!1),{onFocus:u,onBlur:f,onMouseEnter:d,onMouseLeave:p,onTouchStart:g}=t,y=M.useRef(null);M.useEffect(()=>{if(e==="render"&&c(!0),e==="viewport"){let E=x=>{x.forEach(T=>{c(T.isIntersecting)})},S=new IntersectionObserver(E,{threshold:.5});return y.current&&S.observe(y.current),()=>{S.disconnect()}}},[e]),M.useEffect(()=>{if(r){let E=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(E)}}},[r]);let b=()=>{i(!0)},v=()=>{i(!1),c(!1)};return n?e!=="intent"?[a,y,{}]:[a,y,{onFocus:du(u,b),onBlur:du(f,v),onMouseEnter:du(d,b),onMouseLeave:du(p,v),onTouchStart:du(g,b)}]:[!1,y,{}]}function du(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function F$({page:e,...t}){let{router:n}=sT(),r=M.useMemo(()=>WO(n.routes,e,n.basename),[n.routes,e,n.basename]);return r?M.createElement(G$,{page:e,matches:r,...t}):null}function V$(e){let{manifest:t,routeModules:n}=oT(),[r,i]=M.useState([]);return M.useEffect(()=>{let a=!1;return B$(e,t,n).then(c=>{a||i(c)}),()=>{a=!0}},[e,t,n]),r}function G$({page:e,matches:t,...n}){let r=ga(),{manifest:i,routeModules:a}=oT(),{basename:c}=sT(),{loaderData:u,matches:f}=q$(),d=M.useMemo(()=>YS(e,t,f,i,r,"data"),[e,t,f,i,r]),p=M.useMemo(()=>YS(e,t,f,i,r,"assets"),[e,t,f,i,r]),g=M.useMemo(()=>{if(e===r.pathname+r.search+r.hash)return[];let v=new Set,E=!1;if(t.forEach(x=>{let T=i.routes[x.route.id];!T||!T.hasLoader||(!d.some(O=>O.route.id===x.route.id)&&x.route.id in u&&a[x.route.id]?.shouldRevalidate||T.hasClientLoader?E=!0:v.add(x.route.id))}),v.size===0)return[];let S=z$(e,c);return E&&v.size>0&&S.searchParams.set("_routes",t.filter(x=>v.has(x.route.id)).map(x=>x.route.id).join(",")),[S.pathname+S.search]},[c,u,r,i,d,t,e,a]),y=M.useMemo(()=>P$(p,i),[p,i]),b=V$(p);return M.createElement(M.Fragment,null,g.map(v=>M.createElement("link",{key:v,rel:"prefetch",as:"fetch",href:v,...n})),y.map(v=>M.createElement("link",{key:v,rel:"modulepreload",href:v,...n})),b.map(({key:v,link:E})=>M.createElement("link",{key:v,...E})))}function K$(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var aT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{aT&&(window.__reactRouterVersion="7.6.3")}catch{}function W$({basename:e,children:t,window:n}){let r=M.useRef();r.current==null&&(r.current=I4({window:n,v5Compat:!0}));let i=r.current,[a,c]=M.useState({action:i.action,location:i.location}),u=M.useCallback(f=>{M.startTransition(()=>c(f))},[c]);return M.useLayoutEffect(()=>i.listen(u),[i,u]),M.createElement(_$,{basename:e,children:t,location:a.location,navigationType:a.action,navigator:i})}var cT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,lT=M.forwardRef(function({onClick:t,discover:n="render",prefetch:r="none",relative:i,reloadDocument:a,replace:c,state:u,target:f,to:d,preventScrollReset:p,viewTransition:g,...y},b){let{basename:v}=M.useContext($i),E=typeof d=="string"&&cT.test(d),S,x=!1;if(typeof d=="string"&&E&&(S=d,aT))try{let P=new URL(window.location.href),G=d.startsWith("//")?new URL(P.protocol+d):new URL(d),F=gs(G.pathname,v);G.origin===P.origin&&F!=null?d=F+G.search+G.hash:x=!0}catch{Di(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let T=i$(d,{relative:i}),[O,U,N]=H$(r,y),I=Z$(d,{replace:c,state:u,target:f,preventScrollReset:p,relative:i,viewTransition:g});function j(P){t&&t(P),P.defaultPrevented||I(P)}let z=M.createElement("a",{...y,...N,href:S||T,onClick:x||a?t:j,ref:K$(b,U),target:f,"data-discover":!E&&n==="render"?"true":void 0});return O&&!E?M.createElement(M.Fragment,null,z,M.createElement(F$,{page:T})):z});lT.displayName="Link";var eo=M.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:r="",end:i=!1,style:a,to:c,viewTransition:u,children:f,...d},p){let g=Sf(c,{relative:d.relative}),y=ga(),b=M.useContext(yp),{navigator:v,basename:E}=M.useContext($i),S=b!=null&&nU(g)&&u===!0,x=v.encodeLocation?v.encodeLocation(g).pathname:g.pathname,T=y.pathname,O=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;n||(T=T.toLowerCase(),O=O?O.toLowerCase():null,x=x.toLowerCase()),O&&E&&(O=gs(O,E)||O);const U=x!=="/"&&x.endsWith("/")?x.length-1:x.length;let N=T===x||!i&&T.startsWith(x)&&T.charAt(U)==="/",I=O!=null&&(O===x||!i&&O.startsWith(x)&&O.charAt(x.length)==="/"),j={isActive:N,isPending:I,isTransitioning:S},z=N?t:void 0,P;typeof r=="function"?P=r(j):P=[r,N?"active":null,I?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let G=typeof a=="function"?a(j):a;return M.createElement(lT,{...d,"aria-current":z,className:P,ref:p,style:G,to:c,viewTransition:u},typeof f=="function"?f(j):f)});eo.displayName="NavLink";var Y$=M.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:r,replace:i,state:a,method:c=Ih,action:u,onSubmit:f,relative:d,preventScrollReset:p,viewTransition:g,...y},b)=>{let v=eU(),E=tU(u,{relative:d}),S=c.toLowerCase()==="get"?"get":"post",x=typeof u=="string"&&cT.test(u),T=O=>{if(f&&f(O),O.defaultPrevented)return;O.preventDefault();let U=O.nativeEvent.submitter,N=U?.getAttribute("formmethod")||c;v(U||O.currentTarget,{fetcherKey:t,method:N,navigate:n,replace:i,state:a,relative:d,preventScrollReset:p,viewTransition:g})};return M.createElement("form",{ref:b,method:S,action:E,onSubmit:r?f:T,...y,"data-discover":!x&&e==="render"?"true":void 0})});Y$.displayName="Form";function X$(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function uT(e){let t=M.useContext(tl);return Rt(t,X$(e)),t}function Z$(e,{target:t,replace:n,state:r,preventScrollReset:i,relative:a,viewTransition:c}={}){let u=s$(),f=ga(),d=Sf(e,{relative:a});return M.useCallback(p=>{if(D$(p,t)){p.preventDefault();let g=n!==void 0?n:ef(f)===ef(d);u(e,{replace:g,state:r,preventScrollReset:i,relative:a,viewTransition:c})}},[f,u,d,n,r,t,e,i,a,c])}var Q$=0,J$=()=>`__${String(++Q$)}__`;function eU(){let{router:e}=uT("useSubmit"),{basename:t}=M.useContext($i),n=b$();return M.useCallback(async(r,i={})=>{let{action:a,method:c,encType:u,formData:f,body:d}=N$(r,t);if(i.navigate===!1){let p=i.fetcherKey||J$();await e.fetch(p,n,i.action||a,{preventScrollReset:i.preventScrollReset,formData:f,body:d,formMethod:i.method||c,formEncType:i.encType||u,flushSync:i.flushSync})}else await e.navigate(i.action||a,{preventScrollReset:i.preventScrollReset,formData:f,body:d,formMethod:i.method||c,formEncType:i.encType||u,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[e,t,n])}function tU(e,{relative:t}={}){let{basename:n}=M.useContext($i),r=M.useContext(Ui);Rt(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),a={...Sf(e||".",{relative:t})},c=ga();if(e==null){a.search=c.search;let u=new URLSearchParams(a.search),f=u.getAll("index");if(f.some(p=>p==="")){u.delete("index"),f.filter(g=>g).forEach(g=>u.append("index",g));let p=u.toString();a.search=p?`?${p}`:""}}return(!e||e===".")&&i.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(a.pathname=a.pathname==="/"?n:fs([n,a.pathname])),ef(a)}function nU(e,t={}){let n=M.useContext(eT);Rt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=uT("useViewTransitionState"),i=Sf(e,{relative:t.relative});if(!n.isTransitioning)return!1;let a=gs(n.currentLocation.pathname,r)||n.currentLocation.pathname,c=gs(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Wh(i.pathname,c)!=null||Wh(i.pathname,a)!=null}[...j$];var rU=KO();const Lc=ws(rU);let fT=null;const iU=e=>{fT=e};let ht=function(e){return e[e.debug=5]="debug",e[e.info=4]="info",e[e.log=3]="log",e[e.warn=2]="warn",e[e.error=1]="error",e}({});const sU=e=>{const{title:t,message:n}=e;return[`
    %c${t}
    ============================

    ${n}

    ============================
    `.replace(/\n[^\S\r\n]+/g,`
`).trim(),"font-weight:bold;font-family:monospace;"]},He=async e=>{const{title:t,message:n,level:r,always:i}=e,a=await fT?.()?.get("logger.level")??ht.warn;if(!i&&a<r)return;const c=sU({title:t,message:n});switch(r){case ht.debug:console.debug(...c);break;case ht.info:console.info(...c);break;case ht.warn:console.warn(...c);break;case ht.error:console.error(...c);break;default:console.log(...c)}};He.deprecate=e=>{const{pkg:t,subject:n,transition:r,level:i=ht.warn,message:a="",callback:c=null}=e,u=d=>d.charAt(0).toUpperCase()+d.slice(1),f=()=>He({title:`${t?t+" ":""}Deprecation Notice`,message:`
      ${n?`${u(n)} is deprecated and will cease to work in future releases${t?" of "+t:""}.`:""}${a?`
`+a:""}${r?`
You can learn more (including a guide on common transition paths) here: ${r}`:""}
    `.trim(),level:i});return typeof c=="function"?async function(){return await f(),await c(...arguments)}:f()};function de(e,t){if(!e){const a=new Error(`INVARIANT ${t}`);a.stack=a.stack?.split(`
`)?.filter(c=>!/at invariant/.test(c))?.join(`
`);for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw console.error(`

---

`,a,`

`,...r,`

---

`),a}}let eh;const oU=new Uint8Array(16);function aU(){if(!eh&&(eh=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!eh))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return eh(oU)}const mn=[];for(let e=0;e<256;++e)mn.push((e+256).toString(16).slice(1));function cU(e,t=0){return mn[e[t+0]]+mn[e[t+1]]+mn[e[t+2]]+mn[e[t+3]]+"-"+mn[e[t+4]]+mn[e[t+5]]+"-"+mn[e[t+6]]+mn[e[t+7]]+"-"+mn[e[t+8]]+mn[e[t+9]]+"-"+mn[e[t+10]]+mn[e[t+11]]+mn[e[t+12]]+mn[e[t+13]]+mn[e[t+14]]+mn[e[t+15]]}const lU=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),XS={randomUUID:lU};function _v(e,t,n){if(XS.randomUUID&&!e)return XS.randomUUID();e=e||{};const r=e.random||(e.rng||aU)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,cU(r)}var it=function(e){return e.UNKNOWN="UNKNOWN",e.SCRIPT="SCRIPT",e.TRANSACTION="TRANSACTION",e.GET_TRANSACTION_STATUS="GET_TRANSACTION_STATUS",e.GET_ACCOUNT="GET_ACCOUNT",e.GET_EVENTS="GET_EVENTS",e.PING="PING",e.GET_TRANSACTION="GET_TRANSACTION",e.GET_BLOCK="GET_BLOCK",e.GET_BLOCK_HEADER="GET_BLOCK_HEADER",e.GET_COLLECTION="GET_COLLECTION",e.GET_NETWORK_PARAMETERS="GET_NETWORK_PARAMETERS",e.SUBSCRIBE_EVENTS="SUBSCRIBE_EVENTS",e.GET_NODE_VERSION_INFO="GET_NODE_VERSION_INFO",e}({}),_f=function(e){return e.BAD="BAD",e.OK="OK",e}({}),tf=function(e){return e.AUTHORIZER="authorizer",e.PAYER="payer",e.PROPOSER="proposer",e}({}),vp=function(e){return e.ARGUMENT="ARGUMENT",e.ACCOUNT="ACCOUNT",e}({}),ZS=function(e){return e[e.UNKNOWN_ERROR=-1]="UNKNOWN_ERROR",e[e.TX_VALIDATION_ERROR=1e3]="TX_VALIDATION_ERROR",e[e.INVALID_TX_BYTE_SIZE_ERROR=1001]="INVALID_TX_BYTE_SIZE_ERROR",e[e.INVALID_REFERENCE_BLOCK_ERROR=1002]="INVALID_REFERENCE_BLOCK_ERROR",e[e.EXPIRED_TRANSACTION_ERROR=1003]="EXPIRED_TRANSACTION_ERROR",e[e.INVALID_SCRIPT_ERROR=1004]="INVALID_SCRIPT_ERROR",e[e.INVALID_GAS_LIMIT_ERROR=1005]="INVALID_GAS_LIMIT_ERROR",e[e.INVALID_PROPOSAL_SIGNATURE_ERROR=1006]="INVALID_PROPOSAL_SIGNATURE_ERROR",e[e.INVALID_PROPOSAL_SEQ_NUMBER_ERROR=1007]="INVALID_PROPOSAL_SEQ_NUMBER_ERROR",e[e.INVALID_PAYLOAD_SIGNATURE_ERROR=1008]="INVALID_PAYLOAD_SIGNATURE_ERROR",e[e.INVALID_ENVELOPE_SIGNATURE_ERROR=1009]="INVALID_ENVELOPE_SIGNATURE_ERROR",e[e.FVM_INTERNAL_ERROR=1050]="FVM_INTERNAL_ERROR",e[e.VALUE_ERROR=1051]="VALUE_ERROR",e[e.INVALID_ARGUMENT_ERROR=1052]="INVALID_ARGUMENT_ERROR",e[e.INVALID_ADDRESS_ERROR=1053]="INVALID_ADDRESS_ERROR",e[e.INVALID_LOCATION_ERROR=1054]="INVALID_LOCATION_ERROR",e[e.ACCOUNT_AUTHORIZATION_ERROR=1055]="ACCOUNT_AUTHORIZATION_ERROR",e[e.OPERATION_AUTHORIZATION_ERROR=1056]="OPERATION_AUTHORIZATION_ERROR",e[e.OPERATION_NOT_SUPPORTED_ERROR=1057]="OPERATION_NOT_SUPPORTED_ERROR",e[e.BLOCK_HEIGHT_OUT_OF_RANGE_ERROR=1058]="BLOCK_HEIGHT_OUT_OF_RANGE_ERROR",e[e.EXECUTION_ERROR=1100]="EXECUTION_ERROR",e[e.CADENCE_RUNTIME_ERROR=1101]="CADENCE_RUNTIME_ERROR",e[e.ENCODING_UNSUPPORTED_VALUE=1102]="ENCODING_UNSUPPORTED_VALUE",e[e.STORAGE_CAPACITY_EXCEEDED=1103]="STORAGE_CAPACITY_EXCEEDED",e[e.GAS_LIMIT_EXCEEDED_ERROR=1104]="GAS_LIMIT_EXCEEDED_ERROR",e[e.EVENT_LIMIT_EXCEEDED_ERROR=1105]="EVENT_LIMIT_EXCEEDED_ERROR",e[e.LEDGER_INTERACTION_LIMIT_EXCEEDED_ERROR=1106]="LEDGER_INTERACTION_LIMIT_EXCEEDED_ERROR",e[e.STATE_KEY_SIZE_LIMIT_ERROR=1107]="STATE_KEY_SIZE_LIMIT_ERROR",e[e.STATE_VALUE_SIZE_LIMIT_ERROR=1108]="STATE_VALUE_SIZE_LIMIT_ERROR",e[e.TRANSACTION_FEE_DEDUCTION_FAILED_ERROR=1109]="TRANSACTION_FEE_DEDUCTION_FAILED_ERROR",e[e.COMPUTATION_LIMIT_EXCEEDED_ERROR=1110]="COMPUTATION_LIMIT_EXCEEDED_ERROR",e[e.MEMORY_LIMIT_EXCEEDED_ERROR=1111]="MEMORY_LIMIT_EXCEEDED_ERROR",e[e.COULD_NOT_DECODE_EXECUTION_PARAMETER_FROM_STATE=1112]="COULD_NOT_DECODE_EXECUTION_PARAMETER_FROM_STATE",e[e.SCRIPT_EXECUTION_TIMED_OUT_ERROR=1113]="SCRIPT_EXECUTION_TIMED_OUT_ERROR",e[e.SCRIPT_EXECUTION_CANCELLED_ERROR=1114]="SCRIPT_EXECUTION_CANCELLED_ERROR",e[e.EVENT_ENCODING_ERROR=1115]="EVENT_ENCODING_ERROR",e[e.INVALID_INTERNAL_STATE_ACCESS_ERROR=1116]="INVALID_INTERNAL_STATE_ACCESS_ERROR",e[e.INSUFFICIENT_PAYER_BALANCE=1118]="INSUFFICIENT_PAYER_BALANCE",e[e.ACCOUNT_ERROR=1200]="ACCOUNT_ERROR",e[e.ACCOUNT_NOT_FOUND_ERROR=1201]="ACCOUNT_NOT_FOUND_ERROR",e[e.ACCOUNT_PUBLIC_KEY_NOT_FOUND_ERROR=1202]="ACCOUNT_PUBLIC_KEY_NOT_FOUND_ERROR",e[e.ACCOUNT_ALREADY_EXISTS_ERROR=1203]="ACCOUNT_ALREADY_EXISTS_ERROR",e[e.FROZEN_ACCOUNT_ERROR=1204]="FROZEN_ACCOUNT_ERROR",e[e.ACCOUNT_STORAGE_NOT_INITIALIZED_ERROR=1205]="ACCOUNT_STORAGE_NOT_INITIALIZED_ERROR",e[e.ACCOUNT_PUBLIC_KEY_LIMIT_ERROR=1206]="ACCOUNT_PUBLIC_KEY_LIMIT_ERROR",e[e.CONTRACT_ERROR=1250]="CONTRACT_ERROR",e[e.CONTRACT_NOT_FOUND_ERROR=1251]="CONTRACT_NOT_FOUND_ERROR",e[e.CONTRACT_NAMES_NOT_FOUND_ERROR=1252]="CONTRACT_NAMES_NOT_FOUND_ERROR",e[e.EVM_EXECUTION_ERROR=1300]="EVM_EXECUTION_ERROR",e}({}),ma=function(e){return e.BLOCKS="blocks",e.BLOCK_HEADERS="block_headers",e.BLOCK_DIGESTS="block_digests",e.ACCOUNT_STATUSES="account_statuses",e.TRANSACTION_STATUSES="transaction_statuses",e.EVENTS="events",e}({}),uU=function(e){return e[e.UNKNOWN=0]="UNKNOWN",e[e.PENDING=1]="PENDING",e[e.FINALIZED=2]="FINALIZED",e[e.EXECUTED=3]="EXECUTED",e[e.SEALED=4]="SEALED",e[e.EXPIRED=5]="EXPIRED",e}({});const fU=()=>{const e=[];let t;return{async deliver(n){e.push(n),t&&(t(e.shift()),t=void 0)},receive(){return new Promise(function(r){const i=e.shift();if(i)return r(i);t=r})}}};let QS;const dU=e=>(QS||(QS=Promise.resolve())).then(e).catch(t=>setTimeout(()=>{throw t},0)),nf="INIT",nl="SUBSCRIBE",ia="UNSUBSCRIBE",rb="UPDATED",dT="SNAPSHOT",ib="EXIT",JS="TERMINATE",$h=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||typeof window=="object"&&window.window===window&&window||{FCL_REGISTRY:null};$h.FCL_REGISTRY=$h.FCL_REGISTRY==null?{}:$h.FCL_REGISTRY;const dt=$h.FCL_REGISTRY;let Oy=0;const hU=5e3;function Zt(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{expectReply:!1};return new Promise((i,a)=>{const c=r.expectReply||!1,u=r.timeout!=null?r.timeout:hU;c&&u&&setTimeout(()=>a(new Error(`Timeout: ${u}ms passed without a response.`)),u);const f={to:e,from:r.from,tag:t,data:n,timeout:u,reply:i,reject:a};try{dt[e]&&dt[e].mailbox.deliver(f),c||i(!0)}catch(d){console.error("FCL.Actor -- Could Not Deliver Message",f,dt[e],d),a(d)}})}const pU=e=>{delete dt[e]},gU=e=>async t=>{typeof e[nf]=="function"&&await e[nf](t);e:for(;;){const n=await t.receive();try{if(n.tag===ib){typeof e[JS]=="function"&&await e[JS](t,n,n.data||{});break e}await e[n.tag]?.(t,n,n.data||{})}catch(r){console.error(`${t.self()} Error`,n,r)}finally{continue e}}},mU=e=>{if(e==null){for(;dt[String(Oy)];)Oy++;return String(Oy)}return String(e)},ya=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;const n=mU(t);if(dt[n]!=null)return n;dt[n]={addr:n,mailbox:fU(),subs:new Set,kvs:{},error:null};const r=yU(n);let i;return typeof e=="object"?i=gU(e):i=e,dU(async()=>{await i(r),pU(n)}),n},yU=e=>({self:()=>e,receive:()=>dt[e].mailbox.receive(),send:function(t,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};if(t!=null)return i.from=e,Zt(t,n,r,i)},sendSelf:function(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};dt[e]&&Zt(e,t,n,r)},broadcast:function(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};r.from=e;for(const i of dt[e].subs)Zt(i,t,n,r)},subscribe:t=>t!=null&&dt[e].subs.add(t),unsubscribe:t=>t!=null&&dt[e].subs.delete(t),subscriberCount:()=>dt[e].subs.size,hasSubs:()=>!!dt[e].subs.size,put:(t,n)=>{t!=null&&(dt[e].kvs[t]=n)},get:function(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;const r=dt[e].kvs[t];return r??n},delete:t=>{delete dt[e].kvs[t]},update:(t,n)=>{t!=null&&(dt[e].kvs[t]=n(dt[e].kvs[t]))},keys:()=>Object.keys(dt[e].kvs),all:()=>dt[e].kvs,where:t=>Object.keys(dt[e].kvs).reduce((n,r)=>t.test(r)?{...n,[r]:dt[e].kvs[r]}:n,{}),merge:function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.keys(t).forEach(n=>dt[e].kvs[n]=t[n])},fatalError:t=>{dt[e].error=t;for(const n of dt[e].subs)Zt(n,rb)}});function xv(e,t,n){t(e);const r=ya(async i=>{for(i.send(e,nl);;){const a=await i.receive(),c=dt[e].error;if(a.tag===ib){i.send(e,ia);return}if(c){n(null,c),i.send(e,ia);return}n(a.data,null)}});return()=>Zt(r,ib)}function hT(e,t){return t(e),Zt(e,dT,null,{expectReply:!0,timeout:0})}const Ty=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r=>t.reduce((i,a)=>a(i),r)},bU=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r=>t.reduce((i,a)=>({...i,...a(r)}),{})},Dy=e=>e&&typeof e=="object"&&!Array.isArray(e),sb=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(!n.length)return e;const i=n.shift();if(Dy(e)&&Dy(i))for(const a in i)Dy(i[a])?(e[a]||Object.assign(e,{[a]:{}}),sb(e[a],i[a])):Object.assign(e,{[a]:i[a]});return sb(e,...n)},vU=e=>Array.isArray(e)?sb({},...e):e,wU=e=>e.contracts?e.contracts:{},EU=e=>e.dependencies?e.dependencies:{},SU=e=>t=>Object.entries(t).reduce((n,r)=>{let[i,a]=r;const c=a?.aliases?.[e];return c&&(n[i]=c),n},{}),_U=e=>t=>Object.entries(t).reduce((n,r)=>{let[i,a]=r;const c=a?.aliases?.[e];return c&&(n[i]=c),n},{}),xU=e=>t=>{let{deployments:n={},accounts:r={}}=t;const i=n?.[e];return i?Object.entries(i).reduce((a,c)=>{let[u,f]=c;const d=r[u]?.address;return d?f.reduce((p,g)=>({...p,[g]:d}),{}):a},{}):{}},AU=(e,t)=>Ty(vU,bU(xU(t),Ty(wU,SU(t)),Ty(EU,_U(t))))(e),RU=e=>typeof e!="string"?!1:/^[0-9A-Fa-f]+$/.test(e),e_=e=>Object.entries(e?.accounts??[]).reduce((t,n)=>{let[,r]=n;return t?!0:r&&Object.prototype.hasOwnProperty.call(r,"key")&&RU(r?.key)},!1),OU=e=>Array.isArray(e)?e.some(e_):e_(e),TU=e=>{const t=e?.toLowerCase()==="local"?"emulator":e?.toLowerCase();if(t==="emulator"||t==="testnet"||t==="mainnet"||t==="previewnet")return t;throw new Error(`Invalid network "${e}". Must be one of "emulator", "local", "testnet", or "mainnet"`)};iU(Ae);const Ci="config",pT="PUT_CONFIG",gT="GET_CONFIG",mT="GET_ALL_CONFIG",yT="UPDATE_CONFIG",bT="DELETE_CONFIG",vT="CLEAR_CONFIG",wT="WHERE_CONFIG",hu="CONFIG/UPDATED",ET=e=>e,ST={[pT]:(e,t,n)=>{let{key:r,value:i}=n;if(r==null)throw new Error("Missing 'key' for config/put.");e.put(r,i),e.broadcast(hu,{...e.all()})},[gT]:(e,t,n)=>{let{key:r,fallback:i}=n;if(r==null)throw new Error("Missing 'key' for config/get");t.reply(e.get(r,i))},[mT]:(e,t)=>{t.reply({...e.all()})},[yT]:(e,t,n)=>{let{key:r,fn:i}=n;if(r==null)throw new Error("Missing 'key' for config/update");e.update(r,i||ET),e.broadcast(hu,{...e.all()})},[bT]:(e,t,n)=>{let{key:r}=n;if(r==null)throw new Error("Missing 'key' for config/delete");e.delete(r),e.broadcast(hu,{...e.all()})},[vT]:e=>{const t=Object.keys(e.all());for(const n of t)e.delete(n);e.broadcast(hu,{...e.all()})},[wT]:(e,t,n)=>{let{pattern:r}=n;if(r==null)throw new Error("Missing 'pattern' for config/where");t.reply(e.where(r))},[nl]:(e,t)=>{e.subscribe(t.from),e.send(t.from,hu,{...e.all()})},[ia]:(e,t)=>{e.unsubscribe(t.from)}};ya(ST,Ci);function rf(e,t){return Zt(Ci,pT,{key:e,value:t}),Ae()}function qc(e,t){return Zt(Ci,gT,{key:e,fallback:t},{expectReply:!0,timeout:10})}async function Av(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;if(!e.length)return t;const[n,...r]=e,i=await qc(n);return i??Av(r,t)}function Yh(){return Zt(Ci,mT,null,{expectReply:!0,timeout:10})}function _T(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ET;return Zt(Ci,yT,{key:e,fn:t}),Ae()}function xT(e){return Zt(Ci,bT,{key:e}),Ae()}function AT(e){return Zt(Ci,wT,{pattern:e},{expectReply:!0,timeout:10})}function RT(e){return xv(Ci,()=>ya(ST,Ci),e)}async function DU(){await Zt(Ci,vT)}async function CU(e){return DU().then(()=>Ae(e))}async function OT(e){let{ignoreConflicts:t=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=await qc("flow.network"),r=TU(n),{flowJSON:i}=e;if(de(!!i,"config.load -- 'flowJSON' must be defined"),de(!!r,'Flow Network Required -- In order for FCL to load your contracts please define "flow.network" to "emulator", "local", "testnet", or "mainnet" in your config. See more here: https://developers.flow.com/tools/fcl-js/reference/configure-fcl'),OU(i)){const a=r==="emulator";He({title:"Private Keys Detected",message:"Private keys should be stored in a separate flow.json file for security. See more here: https://developers.flow.com/tools/flow-cli/security",level:a?ht.warn:ht.error}),de(a,"Private keys should be stored in a separate flow.json file for security. See more here: https://developers.flow.com/tools/flow-cli/security")}for(const[a,c]of Object.entries(AU(i,r))){const u=`0x${a}`,f=await qc(u);f&&f!==c&&!t?He({title:"Contract Placeholder Conflict Detected",message:"A generated contract placeholder from config.load conflicts with a placeholder you've set manually in config have the same name.",level:ht.warn}):rf(u,c);const d=`system.contracts.${a}`,p=await qc(d);p&&p!==c&&!t?He({title:"Contract Placeholder Conflict Detected",message:"A generated contract placeholder from config.load conflicts with a placeholder you've set manually in config have the same name.",level:ht.warn}):rf(d,c)}}function Ae(e){return e!=null&&typeof e=="object"&&Object.keys(e).map(t=>rf(t,e[t])),{put:rf,get:qc,all:Yh,first:Av,update:_T,delete:xT,where:AT,subscribe:RT,overload:TT,load:OT}}Ae.put=rf;Ae.get=qc;Ae.all=Yh;Ae.first=Av;Ae.update=_T;Ae.delete=xT;Ae.where=AT;Ae.subscribe=RT;Ae.overload=TT;Ae.load=OT;async function TT(e,t){const n=await Yh();try{return Ae(e),await t(await Yh())}finally{await CU(n)}}var Cy={},pu={},t_;function IU(){if(t_)return pu;t_=1,pu.byteLength=u,pu.toByteArray=d,pu.fromByteArray=y;for(var e=[],t=[],n=typeof Uint8Array<"u"?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,a=r.length;i<a;++i)e[i]=r[i],t[r.charCodeAt(i)]=i;t[45]=62,t[95]=63;function c(b){var v=b.length;if(v%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var E=b.indexOf("=");E===-1&&(E=v);var S=E===v?0:4-E%4;return[E,S]}function u(b){var v=c(b),E=v[0],S=v[1];return(E+S)*3/4-S}function f(b,v,E){return(v+E)*3/4-E}function d(b){var v,E=c(b),S=E[0],x=E[1],T=new n(f(b,S,x)),O=0,U=x>0?S-4:S,N;for(N=0;N<U;N+=4)v=t[b.charCodeAt(N)]<<18|t[b.charCodeAt(N+1)]<<12|t[b.charCodeAt(N+2)]<<6|t[b.charCodeAt(N+3)],T[O++]=v>>16&255,T[O++]=v>>8&255,T[O++]=v&255;return x===2&&(v=t[b.charCodeAt(N)]<<2|t[b.charCodeAt(N+1)]>>4,T[O++]=v&255),x===1&&(v=t[b.charCodeAt(N)]<<10|t[b.charCodeAt(N+1)]<<4|t[b.charCodeAt(N+2)]>>2,T[O++]=v>>8&255,T[O++]=v&255),T}function p(b){return e[b>>18&63]+e[b>>12&63]+e[b>>6&63]+e[b&63]}function g(b,v,E){for(var S,x=[],T=v;T<E;T+=3)S=(b[T]<<16&16711680)+(b[T+1]<<8&65280)+(b[T+2]&255),x.push(p(S));return x.join("")}function y(b){for(var v,E=b.length,S=E%3,x=[],T=16383,O=0,U=E-S;O<U;O+=T)x.push(g(b,O,O+T>U?U:O+T));return S===1?(v=b[E-1],x.push(e[v>>2]+e[v<<4&63]+"==")):S===2&&(v=(b[E-2]<<8)+b[E-1],x.push(e[v>>10]+e[v>>4&63]+e[v<<2&63]+"=")),x.join("")}return pu}var th={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var n_;function NU(){return n_||(n_=1,th.read=function(e,t,n,r,i){var a,c,u=i*8-r-1,f=(1<<u)-1,d=f>>1,p=-7,g=n?i-1:0,y=n?-1:1,b=e[t+g];for(g+=y,a=b&(1<<-p)-1,b>>=-p,p+=u;p>0;a=a*256+e[t+g],g+=y,p-=8);for(c=a&(1<<-p)-1,a>>=-p,p+=r;p>0;c=c*256+e[t+g],g+=y,p-=8);if(a===0)a=1-d;else{if(a===f)return c?NaN:(b?-1:1)*(1/0);c=c+Math.pow(2,r),a=a-d}return(b?-1:1)*c*Math.pow(2,a-r)},th.write=function(e,t,n,r,i,a){var c,u,f,d=a*8-i-1,p=(1<<d)-1,g=p>>1,y=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,b=r?0:a-1,v=r?1:-1,E=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(u=isNaN(t)?1:0,c=p):(c=Math.floor(Math.log(t)/Math.LN2),t*(f=Math.pow(2,-c))<1&&(c--,f*=2),c+g>=1?t+=y/f:t+=y*Math.pow(2,1-g),t*f>=2&&(c++,f/=2),c+g>=p?(u=0,c=p):c+g>=1?(u=(t*f-1)*Math.pow(2,i),c=c+g):(u=t*Math.pow(2,g-1)*Math.pow(2,i),c=0));i>=8;e[n+b]=u&255,b+=v,u/=256,i-=8);for(c=c<<i|u,d+=i;d>0;e[n+b]=c&255,b+=v,c/=256,d-=8);e[n+b-v]|=E*128}),th}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var r_;function Rv(){return r_||(r_=1,function(e){const t=IU(),n=NU(),r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=u,e.SlowBuffer=T,e.INSPECT_MAX_BYTES=50;const i=2147483647;e.kMaxLength=i,u.TYPED_ARRAY_SUPPORT=a(),!u.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function a(){try{const B=new Uint8Array(1),_={foo:function(){return 42}};return Object.setPrototypeOf(_,Uint8Array.prototype),Object.setPrototypeOf(B,_),B.foo()===42}catch{return!1}}Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}});function c(B){if(B>i)throw new RangeError('The value "'+B+'" is invalid for option "size"');const _=new Uint8Array(B);return Object.setPrototypeOf(_,u.prototype),_}function u(B,_,A){if(typeof B=="number"){if(typeof _=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return g(B)}return f(B,_,A)}u.poolSize=8192;function f(B,_,A){if(typeof B=="string")return y(B,_);if(ArrayBuffer.isView(B))return v(B);if(B==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof B);if(Jt(B,ArrayBuffer)||B&&Jt(B.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Jt(B,SharedArrayBuffer)||B&&Jt(B.buffer,SharedArrayBuffer)))return E(B,_,A);if(typeof B=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const H=B.valueOf&&B.valueOf();if(H!=null&&H!==B)return u.from(H,_,A);const Q=S(B);if(Q)return Q;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof B[Symbol.toPrimitive]=="function")return u.from(B[Symbol.toPrimitive]("string"),_,A);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof B)}u.from=function(B,_,A){return f(B,_,A)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array);function d(B){if(typeof B!="number")throw new TypeError('"size" argument must be of type number');if(B<0)throw new RangeError('The value "'+B+'" is invalid for option "size"')}function p(B,_,A){return d(B),B<=0?c(B):_!==void 0?typeof A=="string"?c(B).fill(_,A):c(B).fill(_):c(B)}u.alloc=function(B,_,A){return p(B,_,A)};function g(B){return d(B),c(B<0?0:x(B)|0)}u.allocUnsafe=function(B){return g(B)},u.allocUnsafeSlow=function(B){return g(B)};function y(B,_){if((typeof _!="string"||_==="")&&(_="utf8"),!u.isEncoding(_))throw new TypeError("Unknown encoding: "+_);const A=O(B,_)|0;let H=c(A);const Q=H.write(B,_);return Q!==A&&(H=H.slice(0,Q)),H}function b(B){const _=B.length<0?0:x(B.length)|0,A=c(_);for(let H=0;H<_;H+=1)A[H]=B[H]&255;return A}function v(B){if(Jt(B,Uint8Array)){const _=new Uint8Array(B);return E(_.buffer,_.byteOffset,_.byteLength)}return b(B)}function E(B,_,A){if(_<0||B.byteLength<_)throw new RangeError('"offset" is outside of buffer bounds');if(B.byteLength<_+(A||0))throw new RangeError('"length" is outside of buffer bounds');let H;return _===void 0&&A===void 0?H=new Uint8Array(B):A===void 0?H=new Uint8Array(B,_):H=new Uint8Array(B,_,A),Object.setPrototypeOf(H,u.prototype),H}function S(B){if(u.isBuffer(B)){const _=x(B.length)|0,A=c(_);return A.length===0||B.copy(A,0,0,_),A}if(B.length!==void 0)return typeof B.length!="number"||Sr(B.length)?c(0):b(B);if(B.type==="Buffer"&&Array.isArray(B.data))return b(B.data)}function x(B){if(B>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return B|0}function T(B){return+B!=B&&(B=0),u.alloc(+B)}u.isBuffer=function(_){return _!=null&&_._isBuffer===!0&&_!==u.prototype},u.compare=function(_,A){if(Jt(_,Uint8Array)&&(_=u.from(_,_.offset,_.byteLength)),Jt(A,Uint8Array)&&(A=u.from(A,A.offset,A.byteLength)),!u.isBuffer(_)||!u.isBuffer(A))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(_===A)return 0;let H=_.length,Q=A.length;for(let le=0,he=Math.min(H,Q);le<he;++le)if(_[le]!==A[le]){H=_[le],Q=A[le];break}return H<Q?-1:Q<H?1:0},u.isEncoding=function(_){switch(String(_).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(_,A){if(!Array.isArray(_))throw new TypeError('"list" argument must be an Array of Buffers');if(_.length===0)return u.alloc(0);let H;if(A===void 0)for(A=0,H=0;H<_.length;++H)A+=_[H].length;const Q=u.allocUnsafe(A);let le=0;for(H=0;H<_.length;++H){let he=_[H];if(Jt(he,Uint8Array))le+he.length>Q.length?(u.isBuffer(he)||(he=u.from(he)),he.copy(Q,le)):Uint8Array.prototype.set.call(Q,he,le);else if(u.isBuffer(he))he.copy(Q,le);else throw new TypeError('"list" argument must be an Array of Buffers');le+=he.length}return Q};function O(B,_){if(u.isBuffer(B))return B.length;if(ArrayBuffer.isView(B)||Jt(B,ArrayBuffer))return B.byteLength;if(typeof B!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof B);const A=B.length,H=arguments.length>2&&arguments[2]===!0;if(!H&&A===0)return 0;let Q=!1;for(;;)switch(_){case"ascii":case"latin1":case"binary":return A;case"utf8":case"utf-8":return xt(B).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A*2;case"hex":return A>>>1;case"base64":return En(B).length;default:if(Q)return H?-1:xt(B).length;_=(""+_).toLowerCase(),Q=!0}}u.byteLength=O;function U(B,_,A){let H=!1;if((_===void 0||_<0)&&(_=0),_>this.length||((A===void 0||A>this.length)&&(A=this.length),A<=0)||(A>>>=0,_>>>=0,A<=_))return"";for(B||(B="utf8");;)switch(B){case"hex":return X(this,_,A);case"utf8":case"utf-8":return J(this,_,A);case"ascii":return L(this,_,A);case"latin1":case"binary":return V(this,_,A);case"base64":return re(this,_,A);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return $(this,_,A);default:if(H)throw new TypeError("Unknown encoding: "+B);B=(B+"").toLowerCase(),H=!0}}u.prototype._isBuffer=!0;function N(B,_,A){const H=B[_];B[_]=B[A],B[A]=H}u.prototype.swap16=function(){const _=this.length;if(_%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let A=0;A<_;A+=2)N(this,A,A+1);return this},u.prototype.swap32=function(){const _=this.length;if(_%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let A=0;A<_;A+=4)N(this,A,A+3),N(this,A+1,A+2);return this},u.prototype.swap64=function(){const _=this.length;if(_%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let A=0;A<_;A+=8)N(this,A,A+7),N(this,A+1,A+6),N(this,A+2,A+5),N(this,A+3,A+4);return this},u.prototype.toString=function(){const _=this.length;return _===0?"":arguments.length===0?J(this,0,_):U.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(_){if(!u.isBuffer(_))throw new TypeError("Argument must be a Buffer");return this===_?!0:u.compare(this,_)===0},u.prototype.inspect=function(){let _="";const A=e.INSPECT_MAX_BYTES;return _=this.toString("hex",0,A).replace(/(.{2})/g,"$1 ").trim(),this.length>A&&(_+=" ... "),"<Buffer "+_+">"},r&&(u.prototype[r]=u.prototype.inspect),u.prototype.compare=function(_,A,H,Q,le){if(Jt(_,Uint8Array)&&(_=u.from(_,_.offset,_.byteLength)),!u.isBuffer(_))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof _);if(A===void 0&&(A=0),H===void 0&&(H=_?_.length:0),Q===void 0&&(Q=0),le===void 0&&(le=this.length),A<0||H>_.length||Q<0||le>this.length)throw new RangeError("out of range index");if(Q>=le&&A>=H)return 0;if(Q>=le)return-1;if(A>=H)return 1;if(A>>>=0,H>>>=0,Q>>>=0,le>>>=0,this===_)return 0;let he=le-Q,Ie=H-A;const Ze=Math.min(he,Ie),Je=this.slice(Q,le),st=_.slice(A,H);for(let et=0;et<Ze;++et)if(Je[et]!==st[et]){he=Je[et],Ie=st[et];break}return he<Ie?-1:Ie<he?1:0};function I(B,_,A,H,Q){if(B.length===0)return-1;if(typeof A=="string"?(H=A,A=0):A>2147483647?A=2147483647:A<-2147483648&&(A=-2147483648),A=+A,Sr(A)&&(A=Q?0:B.length-1),A<0&&(A=B.length+A),A>=B.length){if(Q)return-1;A=B.length-1}else if(A<0)if(Q)A=0;else return-1;if(typeof _=="string"&&(_=u.from(_,H)),u.isBuffer(_))return _.length===0?-1:j(B,_,A,H,Q);if(typeof _=="number")return _=_&255,typeof Uint8Array.prototype.indexOf=="function"?Q?Uint8Array.prototype.indexOf.call(B,_,A):Uint8Array.prototype.lastIndexOf.call(B,_,A):j(B,[_],A,H,Q);throw new TypeError("val must be string, number or Buffer")}function j(B,_,A,H,Q){let le=1,he=B.length,Ie=_.length;if(H!==void 0&&(H=String(H).toLowerCase(),H==="ucs2"||H==="ucs-2"||H==="utf16le"||H==="utf-16le")){if(B.length<2||_.length<2)return-1;le=2,he/=2,Ie/=2,A/=2}function Ze(st,et){return le===1?st[et]:st.readUInt16BE(et*le)}let Je;if(Q){let st=-1;for(Je=A;Je<he;Je++)if(Ze(B,Je)===Ze(_,st===-1?0:Je-st)){if(st===-1&&(st=Je),Je-st+1===Ie)return st*le}else st!==-1&&(Je-=Je-st),st=-1}else for(A+Ie>he&&(A=he-Ie),Je=A;Je>=0;Je--){let st=!0;for(let et=0;et<Ie;et++)if(Ze(B,Je+et)!==Ze(_,et)){st=!1;break}if(st)return Je}return-1}u.prototype.includes=function(_,A,H){return this.indexOf(_,A,H)!==-1},u.prototype.indexOf=function(_,A,H){return I(this,_,A,H,!0)},u.prototype.lastIndexOf=function(_,A,H){return I(this,_,A,H,!1)};function z(B,_,A,H){A=Number(A)||0;const Q=B.length-A;H?(H=Number(H),H>Q&&(H=Q)):H=Q;const le=_.length;H>le/2&&(H=le/2);let he;for(he=0;he<H;++he){const Ie=parseInt(_.substr(he*2,2),16);if(Sr(Ie))return he;B[A+he]=Ie}return he}function P(B,_,A,H){return Qt(xt(_,B.length-A),B,A,H)}function G(B,_,A,H){return Qt(vo(_),B,A,H)}function F(B,_,A,H){return Qt(En(_),B,A,H)}function K(B,_,A,H){return Qt(Bi(_,B.length-A),B,A,H)}u.prototype.write=function(_,A,H,Q){if(A===void 0)Q="utf8",H=this.length,A=0;else if(H===void 0&&typeof A=="string")Q=A,H=this.length,A=0;else if(isFinite(A))A=A>>>0,isFinite(H)?(H=H>>>0,Q===void 0&&(Q="utf8")):(Q=H,H=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const le=this.length-A;if((H===void 0||H>le)&&(H=le),_.length>0&&(H<0||A<0)||A>this.length)throw new RangeError("Attempt to write outside buffer bounds");Q||(Q="utf8");let he=!1;for(;;)switch(Q){case"hex":return z(this,_,A,H);case"utf8":case"utf-8":return P(this,_,A,H);case"ascii":case"latin1":case"binary":return G(this,_,A,H);case"base64":return F(this,_,A,H);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return K(this,_,A,H);default:if(he)throw new TypeError("Unknown encoding: "+Q);Q=(""+Q).toLowerCase(),he=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function re(B,_,A){return _===0&&A===B.length?t.fromByteArray(B):t.fromByteArray(B.slice(_,A))}function J(B,_,A){A=Math.min(B.length,A);const H=[];let Q=_;for(;Q<A;){const le=B[Q];let he=null,Ie=le>239?4:le>223?3:le>191?2:1;if(Q+Ie<=A){let Ze,Je,st,et;switch(Ie){case 1:le<128&&(he=le);break;case 2:Ze=B[Q+1],(Ze&192)===128&&(et=(le&31)<<6|Ze&63,et>127&&(he=et));break;case 3:Ze=B[Q+1],Je=B[Q+2],(Ze&192)===128&&(Je&192)===128&&(et=(le&15)<<12|(Ze&63)<<6|Je&63,et>2047&&(et<55296||et>57343)&&(he=et));break;case 4:Ze=B[Q+1],Je=B[Q+2],st=B[Q+3],(Ze&192)===128&&(Je&192)===128&&(st&192)===128&&(et=(le&15)<<18|(Ze&63)<<12|(Je&63)<<6|st&63,et>65535&&et<1114112&&(he=et))}}he===null?(he=65533,Ie=1):he>65535&&(he-=65536,H.push(he>>>10&1023|55296),he=56320|he&1023),H.push(he),Q+=Ie}return R(H)}const D=4096;function R(B){const _=B.length;if(_<=D)return String.fromCharCode.apply(String,B);let A="",H=0;for(;H<_;)A+=String.fromCharCode.apply(String,B.slice(H,H+=D));return A}function L(B,_,A){let H="";A=Math.min(B.length,A);for(let Q=_;Q<A;++Q)H+=String.fromCharCode(B[Q]&127);return H}function V(B,_,A){let H="";A=Math.min(B.length,A);for(let Q=_;Q<A;++Q)H+=String.fromCharCode(B[Q]);return H}function X(B,_,A){const H=B.length;(!_||_<0)&&(_=0),(!A||A<0||A>H)&&(A=H);let Q="";for(let le=_;le<A;++le)Q+=ai[B[le]];return Q}function $(B,_,A){const H=B.slice(_,A);let Q="";for(let le=0;le<H.length-1;le+=2)Q+=String.fromCharCode(H[le]+H[le+1]*256);return Q}u.prototype.slice=function(_,A){const H=this.length;_=~~_,A=A===void 0?H:~~A,_<0?(_+=H,_<0&&(_=0)):_>H&&(_=H),A<0?(A+=H,A<0&&(A=0)):A>H&&(A=H),A<_&&(A=_);const Q=this.subarray(_,A);return Object.setPrototypeOf(Q,u.prototype),Q};function W(B,_,A){if(B%1!==0||B<0)throw new RangeError("offset is not uint");if(B+_>A)throw new RangeError("Trying to access beyond buffer length")}u.prototype.readUintLE=u.prototype.readUIntLE=function(_,A,H){_=_>>>0,A=A>>>0,H||W(_,A,this.length);let Q=this[_],le=1,he=0;for(;++he<A&&(le*=256);)Q+=this[_+he]*le;return Q},u.prototype.readUintBE=u.prototype.readUIntBE=function(_,A,H){_=_>>>0,A=A>>>0,H||W(_,A,this.length);let Q=this[_+--A],le=1;for(;A>0&&(le*=256);)Q+=this[_+--A]*le;return Q},u.prototype.readUint8=u.prototype.readUInt8=function(_,A){return _=_>>>0,A||W(_,1,this.length),this[_]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(_,A){return _=_>>>0,A||W(_,2,this.length),this[_]|this[_+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(_,A){return _=_>>>0,A||W(_,2,this.length),this[_]<<8|this[_+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(_,A){return _=_>>>0,A||W(_,4,this.length),(this[_]|this[_+1]<<8|this[_+2]<<16)+this[_+3]*16777216},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(_,A){return _=_>>>0,A||W(_,4,this.length),this[_]*16777216+(this[_+1]<<16|this[_+2]<<8|this[_+3])},u.prototype.readBigUInt64LE=Sn(function(_){_=_>>>0,Ot(_,"offset");const A=this[_],H=this[_+7];(A===void 0||H===void 0)&&_t(_,this.length-8);const Q=A+this[++_]*2**8+this[++_]*2**16+this[++_]*2**24,le=this[++_]+this[++_]*2**8+this[++_]*2**16+H*2**24;return BigInt(Q)+(BigInt(le)<<BigInt(32))}),u.prototype.readBigUInt64BE=Sn(function(_){_=_>>>0,Ot(_,"offset");const A=this[_],H=this[_+7];(A===void 0||H===void 0)&&_t(_,this.length-8);const Q=A*2**24+this[++_]*2**16+this[++_]*2**8+this[++_],le=this[++_]*2**24+this[++_]*2**16+this[++_]*2**8+H;return(BigInt(Q)<<BigInt(32))+BigInt(le)}),u.prototype.readIntLE=function(_,A,H){_=_>>>0,A=A>>>0,H||W(_,A,this.length);let Q=this[_],le=1,he=0;for(;++he<A&&(le*=256);)Q+=this[_+he]*le;return le*=128,Q>=le&&(Q-=Math.pow(2,8*A)),Q},u.prototype.readIntBE=function(_,A,H){_=_>>>0,A=A>>>0,H||W(_,A,this.length);let Q=A,le=1,he=this[_+--Q];for(;Q>0&&(le*=256);)he+=this[_+--Q]*le;return le*=128,he>=le&&(he-=Math.pow(2,8*A)),he},u.prototype.readInt8=function(_,A){return _=_>>>0,A||W(_,1,this.length),this[_]&128?(255-this[_]+1)*-1:this[_]},u.prototype.readInt16LE=function(_,A){_=_>>>0,A||W(_,2,this.length);const H=this[_]|this[_+1]<<8;return H&32768?H|4294901760:H},u.prototype.readInt16BE=function(_,A){_=_>>>0,A||W(_,2,this.length);const H=this[_+1]|this[_]<<8;return H&32768?H|4294901760:H},u.prototype.readInt32LE=function(_,A){return _=_>>>0,A||W(_,4,this.length),this[_]|this[_+1]<<8|this[_+2]<<16|this[_+3]<<24},u.prototype.readInt32BE=function(_,A){return _=_>>>0,A||W(_,4,this.length),this[_]<<24|this[_+1]<<16|this[_+2]<<8|this[_+3]},u.prototype.readBigInt64LE=Sn(function(_){_=_>>>0,Ot(_,"offset");const A=this[_],H=this[_+7];(A===void 0||H===void 0)&&_t(_,this.length-8);const Q=this[_+4]+this[_+5]*2**8+this[_+6]*2**16+(H<<24);return(BigInt(Q)<<BigInt(32))+BigInt(A+this[++_]*2**8+this[++_]*2**16+this[++_]*2**24)}),u.prototype.readBigInt64BE=Sn(function(_){_=_>>>0,Ot(_,"offset");const A=this[_],H=this[_+7];(A===void 0||H===void 0)&&_t(_,this.length-8);const Q=(A<<24)+this[++_]*2**16+this[++_]*2**8+this[++_];return(BigInt(Q)<<BigInt(32))+BigInt(this[++_]*2**24+this[++_]*2**16+this[++_]*2**8+H)}),u.prototype.readFloatLE=function(_,A){return _=_>>>0,A||W(_,4,this.length),n.read(this,_,!0,23,4)},u.prototype.readFloatBE=function(_,A){return _=_>>>0,A||W(_,4,this.length),n.read(this,_,!1,23,4)},u.prototype.readDoubleLE=function(_,A){return _=_>>>0,A||W(_,8,this.length),n.read(this,_,!0,52,8)},u.prototype.readDoubleBE=function(_,A){return _=_>>>0,A||W(_,8,this.length),n.read(this,_,!1,52,8)};function te(B,_,A,H,Q,le){if(!u.isBuffer(B))throw new TypeError('"buffer" argument must be a Buffer instance');if(_>Q||_<le)throw new RangeError('"value" argument is out of bounds');if(A+H>B.length)throw new RangeError("Index out of range")}u.prototype.writeUintLE=u.prototype.writeUIntLE=function(_,A,H,Q){if(_=+_,A=A>>>0,H=H>>>0,!Q){const Ie=Math.pow(2,8*H)-1;te(this,_,A,H,Ie,0)}let le=1,he=0;for(this[A]=_&255;++he<H&&(le*=256);)this[A+he]=_/le&255;return A+H},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(_,A,H,Q){if(_=+_,A=A>>>0,H=H>>>0,!Q){const Ie=Math.pow(2,8*H)-1;te(this,_,A,H,Ie,0)}let le=H-1,he=1;for(this[A+le]=_&255;--le>=0&&(he*=256);)this[A+le]=_/he&255;return A+H},u.prototype.writeUint8=u.prototype.writeUInt8=function(_,A,H){return _=+_,A=A>>>0,H||te(this,_,A,1,255,0),this[A]=_&255,A+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(_,A,H){return _=+_,A=A>>>0,H||te(this,_,A,2,65535,0),this[A]=_&255,this[A+1]=_>>>8,A+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(_,A,H){return _=+_,A=A>>>0,H||te(this,_,A,2,65535,0),this[A]=_>>>8,this[A+1]=_&255,A+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(_,A,H){return _=+_,A=A>>>0,H||te(this,_,A,4,4294967295,0),this[A+3]=_>>>24,this[A+2]=_>>>16,this[A+1]=_>>>8,this[A]=_&255,A+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(_,A,H){return _=+_,A=A>>>0,H||te(this,_,A,4,4294967295,0),this[A]=_>>>24,this[A+1]=_>>>16,this[A+2]=_>>>8,this[A+3]=_&255,A+4};function se(B,_,A,H,Q){Vt(_,H,Q,B,A,7);let le=Number(_&BigInt(4294967295));B[A++]=le,le=le>>8,B[A++]=le,le=le>>8,B[A++]=le,le=le>>8,B[A++]=le;let he=Number(_>>BigInt(32)&BigInt(4294967295));return B[A++]=he,he=he>>8,B[A++]=he,he=he>>8,B[A++]=he,he=he>>8,B[A++]=he,A}function ne(B,_,A,H,Q){Vt(_,H,Q,B,A,7);let le=Number(_&BigInt(4294967295));B[A+7]=le,le=le>>8,B[A+6]=le,le=le>>8,B[A+5]=le,le=le>>8,B[A+4]=le;let he=Number(_>>BigInt(32)&BigInt(4294967295));return B[A+3]=he,he=he>>8,B[A+2]=he,he=he>>8,B[A+1]=he,he=he>>8,B[A]=he,A+8}u.prototype.writeBigUInt64LE=Sn(function(_,A=0){return se(this,_,A,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeBigUInt64BE=Sn(function(_,A=0){return ne(this,_,A,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeIntLE=function(_,A,H,Q){if(_=+_,A=A>>>0,!Q){const Ze=Math.pow(2,8*H-1);te(this,_,A,H,Ze-1,-Ze)}let le=0,he=1,Ie=0;for(this[A]=_&255;++le<H&&(he*=256);)_<0&&Ie===0&&this[A+le-1]!==0&&(Ie=1),this[A+le]=(_/he>>0)-Ie&255;return A+H},u.prototype.writeIntBE=function(_,A,H,Q){if(_=+_,A=A>>>0,!Q){const Ze=Math.pow(2,8*H-1);te(this,_,A,H,Ze-1,-Ze)}let le=H-1,he=1,Ie=0;for(this[A+le]=_&255;--le>=0&&(he*=256);)_<0&&Ie===0&&this[A+le+1]!==0&&(Ie=1),this[A+le]=(_/he>>0)-Ie&255;return A+H},u.prototype.writeInt8=function(_,A,H){return _=+_,A=A>>>0,H||te(this,_,A,1,127,-128),_<0&&(_=255+_+1),this[A]=_&255,A+1},u.prototype.writeInt16LE=function(_,A,H){return _=+_,A=A>>>0,H||te(this,_,A,2,32767,-32768),this[A]=_&255,this[A+1]=_>>>8,A+2},u.prototype.writeInt16BE=function(_,A,H){return _=+_,A=A>>>0,H||te(this,_,A,2,32767,-32768),this[A]=_>>>8,this[A+1]=_&255,A+2},u.prototype.writeInt32LE=function(_,A,H){return _=+_,A=A>>>0,H||te(this,_,A,4,2147483647,-2147483648),this[A]=_&255,this[A+1]=_>>>8,this[A+2]=_>>>16,this[A+3]=_>>>24,A+4},u.prototype.writeInt32BE=function(_,A,H){return _=+_,A=A>>>0,H||te(this,_,A,4,2147483647,-2147483648),_<0&&(_=4294967295+_+1),this[A]=_>>>24,this[A+1]=_>>>16,this[A+2]=_>>>8,this[A+3]=_&255,A+4},u.prototype.writeBigInt64LE=Sn(function(_,A=0){return se(this,_,A,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),u.prototype.writeBigInt64BE=Sn(function(_,A=0){return ne(this,_,A,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function ue(B,_,A,H,Q,le){if(A+H>B.length)throw new RangeError("Index out of range");if(A<0)throw new RangeError("Index out of range")}function me(B,_,A,H,Q){return _=+_,A=A>>>0,Q||ue(B,_,A,4),n.write(B,_,A,H,23,4),A+4}u.prototype.writeFloatLE=function(_,A,H){return me(this,_,A,!0,H)},u.prototype.writeFloatBE=function(_,A,H){return me(this,_,A,!1,H)};function Re(B,_,A,H,Q){return _=+_,A=A>>>0,Q||ue(B,_,A,8),n.write(B,_,A,H,52,8),A+8}u.prototype.writeDoubleLE=function(_,A,H){return Re(this,_,A,!0,H)},u.prototype.writeDoubleBE=function(_,A,H){return Re(this,_,A,!1,H)},u.prototype.copy=function(_,A,H,Q){if(!u.isBuffer(_))throw new TypeError("argument should be a Buffer");if(H||(H=0),!Q&&Q!==0&&(Q=this.length),A>=_.length&&(A=_.length),A||(A=0),Q>0&&Q<H&&(Q=H),Q===H||_.length===0||this.length===0)return 0;if(A<0)throw new RangeError("targetStart out of bounds");if(H<0||H>=this.length)throw new RangeError("Index out of range");if(Q<0)throw new RangeError("sourceEnd out of bounds");Q>this.length&&(Q=this.length),_.length-A<Q-H&&(Q=_.length-A+H);const le=Q-H;return this===_&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(A,H,Q):Uint8Array.prototype.set.call(_,this.subarray(H,Q),A),le},u.prototype.fill=function(_,A,H,Q){if(typeof _=="string"){if(typeof A=="string"?(Q=A,A=0,H=this.length):typeof H=="string"&&(Q=H,H=this.length),Q!==void 0&&typeof Q!="string")throw new TypeError("encoding must be a string");if(typeof Q=="string"&&!u.isEncoding(Q))throw new TypeError("Unknown encoding: "+Q);if(_.length===1){const he=_.charCodeAt(0);(Q==="utf8"&&he<128||Q==="latin1")&&(_=he)}}else typeof _=="number"?_=_&255:typeof _=="boolean"&&(_=Number(_));if(A<0||this.length<A||this.length<H)throw new RangeError("Out of range index");if(H<=A)return this;A=A>>>0,H=H===void 0?this.length:H>>>0,_||(_=0);let le;if(typeof _=="number")for(le=A;le<H;++le)this[le]=_;else{const he=u.isBuffer(_)?_:u.from(_,Q),Ie=he.length;if(Ie===0)throw new TypeError('The value "'+_+'" is invalid for argument "value"');for(le=0;le<H-A;++le)this[le+A]=he[le%Ie]}return this};const we={};function _e(B,_,A){we[B]=class extends A{constructor(){super(),Object.defineProperty(this,"message",{value:_.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${B}]`,this.stack,delete this.name}get code(){return B}set code(Q){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Q,writable:!0})}toString(){return`${this.name} [${B}]: ${this.message}`}}}_e("ERR_BUFFER_OUT_OF_BOUNDS",function(B){return B?`${B} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),_e("ERR_INVALID_ARG_TYPE",function(B,_){return`The "${B}" argument must be of type number. Received type ${typeof _}`},TypeError),_e("ERR_OUT_OF_RANGE",function(B,_,A){let H=`The value of "${B}" is out of range.`,Q=A;return Number.isInteger(A)&&Math.abs(A)>2**32?Q=ze(String(A)):typeof A=="bigint"&&(Q=String(A),(A>BigInt(2)**BigInt(32)||A<-(BigInt(2)**BigInt(32)))&&(Q=ze(Q)),Q+="n"),H+=` It must be ${_}. Received ${Q}`,H},RangeError);function ze(B){let _="",A=B.length;const H=B[0]==="-"?1:0;for(;A>=H+4;A-=3)_=`_${B.slice(A-3,A)}${_}`;return`${B.slice(0,A)}${_}`}function Xe(B,_,A){Ot(_,"offset"),(B[_]===void 0||B[_+A]===void 0)&&_t(_,B.length-(A+1))}function Vt(B,_,A,H,Q,le){if(B>A||B<_){const he=typeof _=="bigint"?"n":"";let Ie;throw _===0||_===BigInt(0)?Ie=`>= 0${he} and < 2${he} ** ${(le+1)*8}${he}`:Ie=`>= -(2${he} ** ${(le+1)*8-1}${he}) and < 2 ** ${(le+1)*8-1}${he}`,new we.ERR_OUT_OF_RANGE("value",Ie,B)}Xe(H,Q,le)}function Ot(B,_){if(typeof B!="number")throw new we.ERR_INVALID_ARG_TYPE(_,"number",B)}function _t(B,_,A){throw Math.floor(B)!==B?(Ot(B,A),new we.ERR_OUT_OF_RANGE("offset","an integer",B)):_<0?new we.ERR_BUFFER_OUT_OF_BOUNDS:new we.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${_}`,B)}const We=/[^+/0-9A-Za-z-_]/g;function Vr(B){if(B=B.split("=")[0],B=B.trim().replace(We,""),B.length<2)return"";for(;B.length%4!==0;)B=B+"=";return B}function xt(B,_){_=_||1/0;let A;const H=B.length;let Q=null;const le=[];for(let he=0;he<H;++he){if(A=B.charCodeAt(he),A>55295&&A<57344){if(!Q){if(A>56319){(_-=3)>-1&&le.push(239,191,189);continue}else if(he+1===H){(_-=3)>-1&&le.push(239,191,189);continue}Q=A;continue}if(A<56320){(_-=3)>-1&&le.push(239,191,189),Q=A;continue}A=(Q-55296<<10|A-56320)+65536}else Q&&(_-=3)>-1&&le.push(239,191,189);if(Q=null,A<128){if((_-=1)<0)break;le.push(A)}else if(A<2048){if((_-=2)<0)break;le.push(A>>6|192,A&63|128)}else if(A<65536){if((_-=3)<0)break;le.push(A>>12|224,A>>6&63|128,A&63|128)}else if(A<1114112){if((_-=4)<0)break;le.push(A>>18|240,A>>12&63|128,A>>6&63|128,A&63|128)}else throw new Error("Invalid code point")}return le}function vo(B){const _=[];for(let A=0;A<B.length;++A)_.push(B.charCodeAt(A)&255);return _}function Bi(B,_){let A,H,Q;const le=[];for(let he=0;he<B.length&&!((_-=2)<0);++he)A=B.charCodeAt(he),H=A>>8,Q=A%256,le.push(Q),le.push(H);return le}function En(B){return t.toByteArray(Vr(B))}function Qt(B,_,A,H){let Q;for(Q=0;Q<H&&!(Q+A>=_.length||Q>=B.length);++Q)_[Q+A]=B[Q];return Q}function Jt(B,_){return B instanceof _||B!=null&&B.constructor!=null&&B.constructor.name!=null&&B.constructor.name===_.name}function Sr(B){return B!==B}const ai=function(){const B="0123456789abcdef",_=new Array(256);for(let A=0;A<16;++A){const H=A*16;for(let Q=0;Q<16;++Q)_[H+Q]=B[A]+B[Q]}return _}();function Sn(B){return typeof BigInt>"u"?sr:B}function sr(){throw new Error("BigInt not supported")}}(Cy)),Cy}var It=Rv();function Ov(e){if(Array.isArray(e)){const t=[];for(let r=0;r<e.length;r++)t.push(Ov(e[r]));const n=It.Buffer.concat(t);return It.Buffer.concat([i_(n.length,192),n])}else{const t=PU(e);return t.length===1&&t[0]<128?t:It.Buffer.concat([i_(t.length,128),t])}}function i_(e,t){if(e<56)return It.Buffer.from([e+t]);{const n=ob(e),r=n.length/2,i=ob(t+55+r);return It.Buffer.from(i+n,"hex")}}function DT(e){return e.slice(0,2)==="0x"}function $U(e){return typeof e!="string"?e:DT(e)?e.slice(2):e}function ob(e){if(e<0)throw new Error("Invalid integer as argument, must be unsigned!");const t=e.toString(16);return t.length%2?"0"+t:t}function UU(e){return e.length%2?"0"+e:e}function BU(e){const t=ob(e);return It.Buffer.from(t,"hex")}function PU(e){if(!It.Buffer.isBuffer(e)){if(typeof e=="string")return DT(e)?It.Buffer.from(UU($U(e)),"hex"):It.Buffer.from(e);if(typeof e=="number")return e?BU(e):It.Buffer.from([]);if(e==null)return It.Buffer.from([]);if(e instanceof Uint8Array)return It.Buffer.from(e);throw new Error("invalid type")}return e}var nh={exports:{}},s_;function kU(){return s_||(s_=1,function(e,t){var n=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof Xn<"u"&&Xn,r=function(){function a(){this.fetch=!1,this.DOMException=n.DOMException}return a.prototype=n,new a}();(function(a){(function(c){var u=typeof a<"u"&&a||typeof self<"u"&&self||typeof Xn<"u"&&Xn||{},f={searchParams:"URLSearchParams"in u,iterable:"Symbol"in u&&"iterator"in Symbol,blob:"FileReader"in u&&"Blob"in u&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in u,arrayBuffer:"ArrayBuffer"in u};function d(D){return D&&DataView.prototype.isPrototypeOf(D)}if(f.arrayBuffer)var p=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],g=ArrayBuffer.isView||function(D){return D&&p.indexOf(Object.prototype.toString.call(D))>-1};function y(D){if(typeof D!="string"&&(D=String(D)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(D)||D==="")throw new TypeError('Invalid character in header field name: "'+D+'"');return D.toLowerCase()}function b(D){return typeof D!="string"&&(D=String(D)),D}function v(D){var R={next:function(){var L=D.shift();return{done:L===void 0,value:L}}};return f.iterable&&(R[Symbol.iterator]=function(){return R}),R}function E(D){this.map={},D instanceof E?D.forEach(function(R,L){this.append(L,R)},this):Array.isArray(D)?D.forEach(function(R){if(R.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+R.length);this.append(R[0],R[1])},this):D&&Object.getOwnPropertyNames(D).forEach(function(R){this.append(R,D[R])},this)}E.prototype.append=function(D,R){D=y(D),R=b(R);var L=this.map[D];this.map[D]=L?L+", "+R:R},E.prototype.delete=function(D){delete this.map[y(D)]},E.prototype.get=function(D){return D=y(D),this.has(D)?this.map[D]:null},E.prototype.has=function(D){return this.map.hasOwnProperty(y(D))},E.prototype.set=function(D,R){this.map[y(D)]=b(R)},E.prototype.forEach=function(D,R){for(var L in this.map)this.map.hasOwnProperty(L)&&D.call(R,this.map[L],L,this)},E.prototype.keys=function(){var D=[];return this.forEach(function(R,L){D.push(L)}),v(D)},E.prototype.values=function(){var D=[];return this.forEach(function(R){D.push(R)}),v(D)},E.prototype.entries=function(){var D=[];return this.forEach(function(R,L){D.push([L,R])}),v(D)},f.iterable&&(E.prototype[Symbol.iterator]=E.prototype.entries);function S(D){if(!D._noBody){if(D.bodyUsed)return Promise.reject(new TypeError("Already read"));D.bodyUsed=!0}}function x(D){return new Promise(function(R,L){D.onload=function(){R(D.result)},D.onerror=function(){L(D.error)}})}function T(D){var R=new FileReader,L=x(R);return R.readAsArrayBuffer(D),L}function O(D){var R=new FileReader,L=x(R),V=/charset=([A-Za-z0-9_-]+)/.exec(D.type),X=V?V[1]:"utf-8";return R.readAsText(D,X),L}function U(D){for(var R=new Uint8Array(D),L=new Array(R.length),V=0;V<R.length;V++)L[V]=String.fromCharCode(R[V]);return L.join("")}function N(D){if(D.slice)return D.slice(0);var R=new Uint8Array(D.byteLength);return R.set(new Uint8Array(D)),R.buffer}function I(){return this.bodyUsed=!1,this._initBody=function(D){this.bodyUsed=this.bodyUsed,this._bodyInit=D,D?typeof D=="string"?this._bodyText=D:f.blob&&Blob.prototype.isPrototypeOf(D)?this._bodyBlob=D:f.formData&&FormData.prototype.isPrototypeOf(D)?this._bodyFormData=D:f.searchParams&&URLSearchParams.prototype.isPrototypeOf(D)?this._bodyText=D.toString():f.arrayBuffer&&f.blob&&d(D)?(this._bodyArrayBuffer=N(D.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):f.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(D)||g(D))?this._bodyArrayBuffer=N(D):this._bodyText=D=Object.prototype.toString.call(D):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof D=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):f.searchParams&&URLSearchParams.prototype.isPrototypeOf(D)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},f.blob&&(this.blob=function(){var D=S(this);if(D)return D;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var D=S(this);return D||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(f.blob)return this.blob().then(T);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var D=S(this);if(D)return D;if(this._bodyBlob)return O(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(U(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},f.formData&&(this.formData=function(){return this.text().then(G)}),this.json=function(){return this.text().then(JSON.parse)},this}var j=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function z(D){var R=D.toUpperCase();return j.indexOf(R)>-1?R:D}function P(D,R){if(!(this instanceof P))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');R=R||{};var L=R.body;if(D instanceof P){if(D.bodyUsed)throw new TypeError("Already read");this.url=D.url,this.credentials=D.credentials,R.headers||(this.headers=new E(D.headers)),this.method=D.method,this.mode=D.mode,this.signal=D.signal,!L&&D._bodyInit!=null&&(L=D._bodyInit,D.bodyUsed=!0)}else this.url=String(D);if(this.credentials=R.credentials||this.credentials||"same-origin",(R.headers||!this.headers)&&(this.headers=new E(R.headers)),this.method=z(R.method||this.method||"GET"),this.mode=R.mode||this.mode||null,this.signal=R.signal||this.signal||function(){if("AbortController"in u){var $=new AbortController;return $.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&L)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(L),(this.method==="GET"||this.method==="HEAD")&&(R.cache==="no-store"||R.cache==="no-cache")){var V=/([?&])_=[^&]*/;if(V.test(this.url))this.url=this.url.replace(V,"$1_="+new Date().getTime());else{var X=/\?/;this.url+=(X.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}P.prototype.clone=function(){return new P(this,{body:this._bodyInit})};function G(D){var R=new FormData;return D.trim().split("&").forEach(function(L){if(L){var V=L.split("="),X=V.shift().replace(/\+/g," "),$=V.join("=").replace(/\+/g," ");R.append(decodeURIComponent(X),decodeURIComponent($))}}),R}function F(D){var R=new E,L=D.replace(/\r?\n[\t ]+/g," ");return L.split("\r").map(function(V){return V.indexOf(`
`)===0?V.substr(1,V.length):V}).forEach(function(V){var X=V.split(":"),$=X.shift().trim();if($){var W=X.join(":").trim();try{R.append($,W)}catch(te){console.warn("Response "+te.message)}}}),R}I.call(P.prototype);function K(D,R){if(!(this instanceof K))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(R||(R={}),this.type="default",this.status=R.status===void 0?200:R.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=R.statusText===void 0?"":""+R.statusText,this.headers=new E(R.headers),this.url=R.url||"",this._initBody(D)}I.call(K.prototype),K.prototype.clone=function(){return new K(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new E(this.headers),url:this.url})},K.error=function(){var D=new K(null,{status:200,statusText:""});return D.ok=!1,D.status=0,D.type="error",D};var re=[301,302,303,307,308];K.redirect=function(D,R){if(re.indexOf(R)===-1)throw new RangeError("Invalid status code");return new K(null,{status:R,headers:{location:D}})},c.DOMException=u.DOMException;try{new c.DOMException}catch{c.DOMException=function(R,L){this.message=R,this.name=L;var V=Error(R);this.stack=V.stack},c.DOMException.prototype=Object.create(Error.prototype),c.DOMException.prototype.constructor=c.DOMException}function J(D,R){return new Promise(function(L,V){var X=new P(D,R);if(X.signal&&X.signal.aborted)return V(new c.DOMException("Aborted","AbortError"));var $=new XMLHttpRequest;function W(){$.abort()}$.onload=function(){var ne={statusText:$.statusText,headers:F($.getAllResponseHeaders()||"")};X.url.indexOf("file://")===0&&($.status<200||$.status>599)?ne.status=200:ne.status=$.status,ne.url="responseURL"in $?$.responseURL:ne.headers.get("X-Request-URL");var ue="response"in $?$.response:$.responseText;setTimeout(function(){L(new K(ue,ne))},0)},$.onerror=function(){setTimeout(function(){V(new TypeError("Network request failed"))},0)},$.ontimeout=function(){setTimeout(function(){V(new TypeError("Network request timed out"))},0)},$.onabort=function(){setTimeout(function(){V(new c.DOMException("Aborted","AbortError"))},0)};function te(ne){try{return ne===""&&u.location.href?u.location.href:ne}catch{return ne}}if($.open(X.method,te(X.url),!0),X.credentials==="include"?$.withCredentials=!0:X.credentials==="omit"&&($.withCredentials=!1),"responseType"in $&&(f.blob?$.responseType="blob":f.arrayBuffer&&($.responseType="arraybuffer")),R&&typeof R.headers=="object"&&!(R.headers instanceof E||u.Headers&&R.headers instanceof u.Headers)){var se=[];Object.getOwnPropertyNames(R.headers).forEach(function(ne){se.push(y(ne)),$.setRequestHeader(ne,b(R.headers[ne]))}),X.headers.forEach(function(ne,ue){se.indexOf(ue)===-1&&$.setRequestHeader(ue,ne)})}else X.headers.forEach(function(ne,ue){$.setRequestHeader(ue,ne)});X.signal&&(X.signal.addEventListener("abort",W),$.onreadystatechange=function(){$.readyState===4&&X.signal.removeEventListener("abort",W)}),$.send(typeof X._bodyInit>"u"?null:X._bodyInit)})}return J.polyfill=!0,u.fetch||(u.fetch=J,u.Headers=E,u.Request=P,u.Response=K),c.Headers=E,c.Request=P,c.Response=K,c.fetch=J,c})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var i=n.fetch?n:r;t=i.fetch,t.default=i.fetch,t.fetch=i.fetch,t.Headers=i.Headers,t.Request=i.Request,t.Response=i.Response,e.exports=t}(nh,nh.exports)),nh.exports}var MU=kU();const CT=ws(MU);function zt(e){return e==null?null:e.replace(/^0x/,"").replace(/^Fx/,"")}function Un(e){return e==null?null:"0x"+zt(e)}var rh={exports:{}},o_;function LU(){if(o_)return rh.exports;o_=1;var e=typeof Reflect=="object"?Reflect:null,t=e&&typeof e.apply=="function"?e.apply:function(N,I,j){return Function.prototype.apply.call(N,I,j)},n;e&&typeof e.ownKeys=="function"?n=e.ownKeys:Object.getOwnPropertySymbols?n=function(N){return Object.getOwnPropertyNames(N).concat(Object.getOwnPropertySymbols(N))}:n=function(N){return Object.getOwnPropertyNames(N)};function r(U){console&&console.warn&&console.warn(U)}var i=Number.isNaN||function(N){return N!==N};function a(){a.init.call(this)}rh.exports=a,rh.exports.once=x,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var c=10;function u(U){if(typeof U!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof U)}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return c},set:function(U){if(typeof U!="number"||U<0||i(U))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+U+".");c=U}}),a.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(N){if(typeof N!="number"||N<0||i(N))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+N+".");return this._maxListeners=N,this};function f(U){return U._maxListeners===void 0?a.defaultMaxListeners:U._maxListeners}a.prototype.getMaxListeners=function(){return f(this)},a.prototype.emit=function(N){for(var I=[],j=1;j<arguments.length;j++)I.push(arguments[j]);var z=N==="error",P=this._events;if(P!==void 0)z=z&&P.error===void 0;else if(!z)return!1;if(z){var G;if(I.length>0&&(G=I[0]),G instanceof Error)throw G;var F=new Error("Unhandled error."+(G?" ("+G.message+")":""));throw F.context=G,F}var K=P[N];if(K===void 0)return!1;if(typeof K=="function")t(K,this,I);else for(var re=K.length,J=v(K,re),j=0;j<re;++j)t(J[j],this,I);return!0};function d(U,N,I,j){var z,P,G;if(u(I),P=U._events,P===void 0?(P=U._events=Object.create(null),U._eventsCount=0):(P.newListener!==void 0&&(U.emit("newListener",N,I.listener?I.listener:I),P=U._events),G=P[N]),G===void 0)G=P[N]=I,++U._eventsCount;else if(typeof G=="function"?G=P[N]=j?[I,G]:[G,I]:j?G.unshift(I):G.push(I),z=f(U),z>0&&G.length>z&&!G.warned){G.warned=!0;var F=new Error("Possible EventEmitter memory leak detected. "+G.length+" "+String(N)+" listeners added. Use emitter.setMaxListeners() to increase limit");F.name="MaxListenersExceededWarning",F.emitter=U,F.type=N,F.count=G.length,r(F)}return U}a.prototype.addListener=function(N,I){return d(this,N,I,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(N,I){return d(this,N,I,!0)};function p(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function g(U,N,I){var j={fired:!1,wrapFn:void 0,target:U,type:N,listener:I},z=p.bind(j);return z.listener=I,j.wrapFn=z,z}a.prototype.once=function(N,I){return u(I),this.on(N,g(this,N,I)),this},a.prototype.prependOnceListener=function(N,I){return u(I),this.prependListener(N,g(this,N,I)),this},a.prototype.removeListener=function(N,I){var j,z,P,G,F;if(u(I),z=this._events,z===void 0)return this;if(j=z[N],j===void 0)return this;if(j===I||j.listener===I)--this._eventsCount===0?this._events=Object.create(null):(delete z[N],z.removeListener&&this.emit("removeListener",N,j.listener||I));else if(typeof j!="function"){for(P=-1,G=j.length-1;G>=0;G--)if(j[G]===I||j[G].listener===I){F=j[G].listener,P=G;break}if(P<0)return this;P===0?j.shift():E(j,P),j.length===1&&(z[N]=j[0]),z.removeListener!==void 0&&this.emit("removeListener",N,F||I)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(N){var I,j,z;if(j=this._events,j===void 0)return this;if(j.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):j[N]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete j[N]),this;if(arguments.length===0){var P=Object.keys(j),G;for(z=0;z<P.length;++z)G=P[z],G!=="removeListener"&&this.removeAllListeners(G);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(I=j[N],typeof I=="function")this.removeListener(N,I);else if(I!==void 0)for(z=I.length-1;z>=0;z--)this.removeListener(N,I[z]);return this};function y(U,N,I){var j=U._events;if(j===void 0)return[];var z=j[N];return z===void 0?[]:typeof z=="function"?I?[z.listener||z]:[z]:I?S(z):v(z,z.length)}a.prototype.listeners=function(N){return y(this,N,!0)},a.prototype.rawListeners=function(N){return y(this,N,!1)},a.listenerCount=function(U,N){return typeof U.listenerCount=="function"?U.listenerCount(N):b.call(U,N)},a.prototype.listenerCount=b;function b(U){var N=this._events;if(N!==void 0){var I=N[U];if(typeof I=="function")return 1;if(I!==void 0)return I.length}return 0}a.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]};function v(U,N){for(var I=new Array(N),j=0;j<N;++j)I[j]=U[j];return I}function E(U,N){for(;N+1<U.length;N++)U[N]=U[N+1];U.pop()}function S(U){for(var N=new Array(U.length),I=0;I<N.length;++I)N[I]=U[I].listener||U[I];return N}function x(U,N){return new Promise(function(I,j){function z(G){U.removeListener(N,P),j(G)}function P(){typeof U.removeListener=="function"&&U.removeListener("error",z),I([].slice.call(arguments))}O(U,N,P,{once:!0}),N!=="error"&&T(U,z,{once:!0})})}function T(U,N,I){typeof U.on=="function"&&O(U,"error",N,I)}function O(U,N,I,j){if(typeof U.on=="function")j.once?U.once(N,I):U.on(N,I);else if(typeof U.addEventListener=="function")U.addEventListener(N,function z(P){j.once&&U.removeEventListener(N,z),I(P)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof U)}return rh.exports}var tr=LU();const wp=ws(tr);var Pc=null;typeof WebSocket<"u"?Pc=WebSocket:typeof MozWebSocket<"u"?Pc=MozWebSocket:typeof global<"u"?Pc=global.WebSocket||global.MozWebSocket:typeof window<"u"?Pc=window.WebSocket||window.MozWebSocket:typeof self<"u"&&(Pc=self.WebSocket||self.MozWebSocket);const jU=Pc;function IT(e){try{return JSON.parse(e)}catch{return null}}function NT(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}const zU=globalThis.AbortController||require("abort-controller");class Uh extends Error{constructor(t){let{error:n,hostname:r,path:i,method:a,requestBody:c,responseBody:u,responseStatusText:f,statusCode:d}=t;const p=`
      HTTP Request Error: An error occurred when interacting with the Access API.
      ${n?`error=${n}`:""}
      ${r?`hostname=${r}`:""}
      ${i?`path=${i}`:""}
      ${a?`method=${a}`:""}
      ${c?`requestBody=${c}`:""}
      ${u?`responseBody=${u}`:""}
      ${f?`responseStatusText=${f}`:""}
      ${d?`statusCode=${d}`:""}
    `;super(p),this.name="HTTP Request Error",this.statusCode=d,this.errorMessage=n}}async function qt(e){let{hostname:t,path:n,method:r,body:i,headers:a,retryLimit:c=5,retryIntervalMs:u=1e3,timeoutLimit:f=3e4,enableRequestLogging:d=!0}=e;const p=i?JSON.stringify(i):null;function g(){const b=new zU,v=setTimeout(()=>{b.abort()},f);return CT(NT(t,n).toString(),{method:r,body:p,headers:a,signal:b.signal}).then(async E=>{if(E.ok)return E.json();const S=await E.text().catch(()=>null),x=IT(S);throw new Uh({error:x?.message,hostname:t,path:n,method:r,requestBody:p,responseBody:S,responseStatusText:E.statusText,statusCode:E.status})}).catch(async E=>{throw E instanceof Uh||E.name==="AbortError"?E:(d&&await He({title:"Access Node Error",message:`The provided access node ${t} does not appear to be a valid REST/HTTP access node.
  Please verify that you are not unintentionally using a GRPC access node.
  See more here: https://docs.onflow.org/fcl/reference/sdk-guidelines/#connect`,level:ht.error}),new Uh({error:E?.message,hostname:t,path:n,method:r,requestBody:p}))}).finally(()=>{clearTimeout(v)})}async function y(){let b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;try{return await g()}catch(v){const E=[408,429,500,502,503,504];if(v.name==="AbortError"||E.includes(v.statusCode))return await new Promise((S,x)=>{b<c?(d&&console.warn(`Access node unavailable, retrying in ${u} ms...`),setTimeout(()=>{S(y(b+1))},u)):x(v)});throw v}}return await y()}async function qU(e,t,n){const i=await(n.httpRequest||qt)({hostname:n.node,path:`/v1/scripts?block_id=${e.block.id}`,method:"POST",body:{script:t.Buffer.from(e.message.cadence).toString("base64"),arguments:e.message.arguments.map(a=>t.Buffer.from(JSON.stringify(e.arguments[a].asArgument)).toString("base64"))}});return Tv(e,t,i)}async function HU(e,t,n){const i=await(n.httpRequest||qt)({hostname:n.node,path:`/v1/scripts?block_height=${e.block.height}`,method:"POST",body:{script:t.Buffer.from(e.message.cadence).toString("base64"),arguments:e.message.arguments.map(a=>t.Buffer.from(JSON.stringify(e.arguments[a].asArgument)).toString("base64"))}});return Tv(e,t,i)}async function FU(e,t,n){const i=await(n.httpRequest||qt)({hostname:n.node,path:`/v1/scripts?block_height=${e.block.isSealed?"sealed":"final"}`,method:"POST",body:{script:t.Buffer.from(e.message.cadence).toString("base64"),arguments:e.message.arguments.map(a=>t.Buffer.from(JSON.stringify(e.arguments[a].asArgument)).toString("base64"))}});return Tv(e,t,i)}function Tv(e,t,n){let r=t.response();return r.tag=e.tag,r.encodedData=JSON.parse(t.Buffer.from(n,"base64").toString()),r}async function VU(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return de(n.node,"SDK Send Execute Script Error: opts.node must be defined."),de(t.response,"SDK Send Execute Script Error: context.response must be defined."),de(t.Buffer,"SDK Send Execute Script Error: context.Buffer must be defined."),e=await e,e.block.id?await qU(e,t,n):e.block.height?await HU(e,t,n):await FU(e,t,n)}const GU={SHA2_256:1,SHA2_384:2,SHA3_256:3,SHA3_384:4,KMAC128_BLS_BLS12_381:5},KU={ECDSA_P256:1,ECDSA_secp256k1:2,BLS_BLS12_381:3};async function WU(e,t,n){const i=await(n.httpRequest||qt)({hostname:n.node,path:`/v1/accounts/${e.account.addr}?block_height=${e.block.height}&expand=contracts,keys`,method:"GET",body:null});return $T(e,t,i)}async function YU(e,t,n){const i=await(n.httpRequest||qt)({hostname:n.node,path:`/v1/accounts/${e.account.addr}?block_height=${e.block.isSealed?"sealed":"final"}&expand=contracts,keys`,method:"GET",body:null});return $T(e,t,i)}function $T(e,t,n){let r=t.response();r.tag=e.tag;const i=a=>{const c={};if(!a)return c;for(let u of Object.keys(a))c[u]=t.Buffer.from(a[u],"base64").toString();return c};return r.account={address:n.address,balance:Number(n.balance),code:"",contracts:i(n.contracts),keys:n.keys?.map(a=>({index:Number(a.index),publicKey:a.public_key.replace(/^0x/,""),signAlgo:KU[a.signing_algorithm],signAlgoString:a.signing_algorithm,hashAlgo:GU[a.hashing_algorithm],hashAlgoString:a.hashing_algorithm,sequenceNumber:Number(a.sequence_number),weight:Number(a.weight),revoked:a.revoked}))??[]},r}async function XU(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return de(n.node,"SDK Send Get Account Error: opts.node must be defined."),de(t.response,"SDK Send Get Account Error: context.response must be defined."),de(t.Buffer,"SDK Send Get Account Error: context.Buffer must be defined."),e=await e,e.block.height!==null?await WU(e,t,n):await YU(e,t,n)}async function ZU(e,t,n){const i=await(n.httpRequest||qt)({hostname:n.node,path:`/v1/blocks/${e.block.id}`,method:"GET",body:null});return Dv(e,t,i)}async function QU(e,t,n){const i=await(n.httpRequest||qt)({hostname:n.node,path:`/v1/blocks?height=${e.block.height}`,method:"GET",body:null});return Dv(e,t,i)}async function JU(e,t,n){const r=n.httpRequest||qt,i=e.block?.isSealed?"sealed":"final",a=await r({hostname:n.node,path:`/v1/blocks?height=${i}`,method:"GET",body:null});return Dv(e,t,a)}function Dv(e,t,n){const r=n.length?n[0]:null,i=t.response();return i.tag=e.tag,i.blockHeader={id:r.header.id,parentId:r.header.parent_id,height:Number(r.header.height),timestamp:r.header.timestamp},i}async function eB(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};de(n.node,"SDK Send Get Block Header Error: opts.node must be defined."),de(t.response,"SDK Send Get Block Header Error: context.response must be defined."),e=await e;const r=e.block.id!==null,i=e.block.height!==null;return r?await ZU(e,t,n):i?await QU(e,t,n):await JU(e,t,n)}async function tB(e,t,n){const i=await(n.httpRequest||qt)({hostname:n.node,path:`/v1/blocks/${e.block.id}?expand=payload`,method:"GET",body:null});return Cv(e,t,i)}async function nB(e,t,n){const i=await(n.httpRequest||qt)({hostname:n.node,path:`/v1/blocks?height=${e.block.height}&expand=payload`,method:"GET",body:null});return Cv(e,t,i)}async function rB(e,t,n){const r=n.httpRequest||qt,i=e.block?.isSealed?"sealed":"final",a=await r({hostname:n.node,path:`/v1/blocks?height=${i}&expand=payload`,method:"GET",body:null});return Cv(e,t,a)}function Cv(e,t,n){const r=n.length?n[0]:null,i=t.response();return i.tag=e.tag,i.block={id:r.header.id,parentId:r.header.parent_id,height:Number(r.header.height),timestamp:r.header.timestamp,parentVoterSignature:r.header.parent_voter_signature,collectionGuarantees:r.payload.collection_guarantees.map(a=>({collectionId:a.collection_id,signerIds:a.signer_ids})),blockSeals:r.payload.block_seals.map(a=>({blockId:a.block_id,executionReceiptId:a.result_id}))},i}async function iB(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};de(n.node,"SDK Send Get Block Error: opts.node must be defined."),de(t.response,"SDK Send Get Block Error: context.response must be defined."),e=await e;const r=e.block.id!==null,i=e.block.height!==null;return r?await tB(e,t,n):i?await nB(e,t,n):await rB(e,t,n)}async function sB(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};de(n.node,"SDK Send Get Collection Error: opts.node must be defined."),de(t.response,"SDK Send Get Collection Error: context.response must be defined.");const i=await(n.httpRequest||qt)({hostname:n.node,path:`/v1/collections/${e.collection.id}?expand=transactions`,method:"GET",body:null}),a=t.response();return a.tag=e.tag,a.collection={id:i.id,transactionIds:i.transactions.map(c=>c.id)},a}async function oB(e,t,n){const i=await(n.httpRequest||qt)({hostname:n.node,path:`/v1/events?type=${e.events.eventType}&start_height=${e.events.start}&end_height=${e.events.end}`,method:"GET",body:null});return UT(e,t,i)}async function aB(e,t,n){const i=await(n.httpRequest||qt)({hostname:n.node,path:`/v1/events?type=${e.events.eventType}&block_ids=${e.events.blockIds.join(",")}`,method:"GET",body:null});return UT(e,t,i)}function UT(e,t,n){let r=t.response();return r.tag=e.tag,r.events=[],n.forEach(i=>i.events?i.events.forEach(a=>r.events.push({blockId:i.block_id,blockHeight:Number(i.block_height),blockTimestamp:i.block_timestamp,type:a.type,transactionId:a.transaction_id,transactionIndex:Number(a.transaction_index),eventIndex:Number(a.event_index),payload:JSON.parse(t.Buffer.from(a.payload,"base64").toString())})):null),r}async function cB(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};de(n.node,"SDK Send Get Events Error: opts.node must be defined."),de(t.response,"SDK Send Get Events Error: context.response must be defined."),de(t.Buffer,"SDK Send Get Events Error: context.Buffer must be defined."),e=await e;const r=e.events.start!==null,i=Array.isArray(e.events.blockIds)&&e.events.blockIds.length>0;return de(r||i,"SendGetEventsError: Unable to determine which get events request to send. Either a block height range, or block IDs must be specified."),r?await oB(e,t,n):await aB(e,t,n)}async function lB(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};de(n.node,"SDK Send Get Transaction Error: opts.node must be defined."),de(t.response,"SDK Send Get Transaction Error: context.response must be defined."),de(t.Buffer,"SDK Send Get Transaction Error: context.Buffer must be defined.");const r=n.httpRequest||qt;e=await e;const i=await r({hostname:n.node,path:`/v1/transactions/${e.transaction.id}`,method:"GET",body:null}),a=d=>({address:d.address,keyId:Number(d.key_index),sequenceNumber:Number(d.sequence_number)}),c=d=>({address:d.address,keyId:Number(d.key_index),signature:d.signature}),u=d=>JSON.parse(t.Buffer.from(d,"base64").toString());let f=t.response();return f.tag=e.tag,f.transaction={script:t.Buffer.from(i.script,"base64").toString(),args:[...i.arguments.map(u)],referenceBlockId:i.reference_block_id,gasLimit:Number(i.gas_limit),payer:i.payer,proposalKey:i.proposal_key?a(i.proposal_key):i.proposal_key,authorizers:i.authorizers,payloadSignatures:[...i.payload_signatures.map(c)],envelopeSignatures:[...i.envelope_signatures.map(c)]},f}const uB={UNKNOWN:0,PENDING:1,FINALIZED:2,EXECUTED:3,SEALED:4,EXPIRED:5};async function fB(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};de(n.node,"SDK Send Get Transaction Status Error: opts.node must be defined."),de(t.response,"SDK Send Get Transaction Status Error: context.response must be defined."),de(t.Buffer,"SDK Send Get Transaction Status Error: context.Buffer must be defined.");const r=n.httpRequest||qt;e=await e;const i=await r({hostname:n.node,path:`/v1/transaction_results/${e.transaction.id}`,method:"GET",body:null});let a=t.response();return a.tag=e.tag,a.transactionStatus={blockId:i.block_id,status:uB[i.status.toUpperCase()]||"",statusString:i.status.toUpperCase(),statusCode:i.status_code,errorMessage:i.error_message,events:i.events.map(c=>({type:c.type,transactionId:c.transaction_id,transactionIndex:Number(c.transaction_index),eventIndex:Number(c.event_index),payload:JSON.parse(t.Buffer.from(c.payload,"base64").toString())}))},a}async function dB(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};de(!!n.node,"SDK Send Ping Error: opts.node must be defined."),de(!!t.response,"SDK Send Ping Error: context.response must be defined."),await(n.httpRequest||qt)({hostname:n.node,path:"/v1/blocks?height=sealed",method:"GET",body:null});let i=typeof t?.response=="function"?t.response():{};return i.tag=e.tag,i}const hB=e=>`${withPrefix(e.addr)}-${e.keyId}`;async function pB(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};de(n.node,"SDK Send Transaction Error: opts.node must be defined."),de(t.response,"SDK Send Transaction Error: context.response must be defined."),de(t.Buffer,"SDK Send Transaction Error: context.Buffer must be defined.");const r=n.httpRequest||qt;e=await e;let i=[];for(let p of Object.values(e.accounts))try{if(!p.role.payer&&p.signature!=null){const g={address:zt(p.addr),key_index:String(p.keyId),signature:t.Buffer.from(p.signature,"hex").toString("base64")};i.find(y=>y.address===g.address&&y.key_index===g.key_index&&y.signature===g.signature)||i.push(g)}}catch(g){throw console.error("SDK HTTP Send Error: Trouble applying payload signature",{acct:p,ix:e}),g}let a={};for(let p of Object.values(e.accounts))try{if(p.role.payer&&p.signature!=null){let g=p.tempId||hB(p);a[g]=a[g]||{address:zt(p.addr),key_index:String(p.keyId),signature:t.Buffer.from(p.signature,"hex").toString("base64")}}}catch(g){throw console.error("SDK HTTP Send Error: Trouble applying envelope signature",{acct:p,ix:e}),g}a=Object.values(a);var c=Date.now();const u=await r({hostname:n.node,path:"/v1/transactions",method:"POST",body:{script:t.Buffer.from(e.message.cadence).toString("base64"),arguments:[...e.message.arguments.map(p=>t.Buffer.from(JSON.stringify(e.arguments[p].asArgument)).toString("base64"))],reference_block_id:e.message.refBlock?e.message.refBlock:null,gas_limit:String(e.message.computeLimit),payer:zt(e.accounts[Array.isArray(e.payer)?e.payer[0]:e.payer].addr),proposal_key:{address:zt(e.accounts[e.proposer].addr),key_index:String(e.accounts[e.proposer].keyId),sequence_number:String(e.accounts[e.proposer].sequenceNum)},authorizers:e.authorizations.map(p=>e.accounts[p].addr).reduce((p,g)=>p.find(y=>y===g)?p:[...p,g],[]).map(zt),payload_signatures:i,envelope_signatures:a}});var f=Date.now();let d=t.response();return d.tag=e.tag,d.transactionId=u.id,typeof window<"u"&&typeof CustomEvent<"u"&&window.dispatchEvent(new CustomEvent("FLOW::TX",{detail:{txId:d.transactionId,delta:f-c}})),d}async function gB(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};de(n.node,"SDK Send Get Network Parameters Error: opts.node must be defined."),de(t.response,"SDK Send Get Network Parameters Error: context.response must be defined.");const r=n.httpRequest||qt;e=await e;const i=await r({hostname:n.node,path:"/v1/network/parameters",method:"GET",body:null,enableRequestLogging:n.enableRequestLogging??!0});let a=t.response();return a.tag=e.tag,a.networkParameters={chainId:i.chain_id},a}async function mB(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};de(n.node,"SDK Send Get Node Version Info Error: opts.node must be defined."),de(t.response,"SDK Send Get Node Verison Info Error: context.response must be defined.");const r=n.httpRequest||qt;e=await e;const i=await r({hostname:n.node,path:"/v1/node_version_info",method:"GET"});let a=t.response();return a.tag=e.tag,a.nodeVersionInfo={semver:i.semver,commit:i.commit,sporkId:i.spork_id,protocolVersion:parseInt(i.protocol_version),sporkRootBlockHeight:parseInt(i.spork_root_block_height),nodeRootBlockHeight:parseInt(i.node_root_block_height)},a}const BT=jU;class a_ extends Error{constructor(t){let{code:n,reason:r,message:i,wasClean:a}=t;const c=`
      connectWs: connection closed with error${i?`: ${i}`:""}
      ${n?`code: ${n}`:""}
      ${r?`reason: ${r}`:""}
      ${a?`wasClean: ${a}`:""}
    `;super(c),this.name="WebsocketError",this.code=n,this.reason=r,this.wasClean=!1}}function yB(e){let{hostname:t,path:n,params:r,getParams:i,retryLimit:a=5,retryIntervalMs:c=1e3}=e;if(i&&r)throw new Error("connectWs: cannot specify both params and getParams");let u=new tr.EventEmitter,f=0;const d=i||(()=>r);let p=()=>{};return function g(){let y=!1,b=!1;const v=bB(t,n,d()),E=new BT(v);E.onmessage=function(S){const x=IT(S.data);x?u.emit("data",x):(u.emit("error",new a_({message:"invalid JSON data"})),this.close())},E.onclose=function(S){if(y){u.emit("close"),u.removeAllListeners();return}b?setTimeout(g,c):f<a?(f++,setTimeout(g,c)):(u.emit("error",new a_({wasClean:S.wasClean,code:S.code,reason:S.reason,message:"failed to connect"})),setTimeout(()=>{u.emit("close"),u.removeAllListeners()}))},E.onopen=function(){b=!0,f=0},p=()=>{y=!0,E.close()}}(),{on(g,y){return u.on(g,y),this},off(g,y){return u.off(g,y),this},close(){p()}}}function bB(e,t,n){const r=new URL(t||"",e);return r.protocol==="https:"?r.protocol="wss:":r.protocol==="http:"&&(r.protocol="ws:"),Object.entries(n||{}).forEach(i=>{let[a,c]=i;if(c){let u;Array.isArray(c)?u=c.join(","):u=c.toString(),r.searchParams.append(a,u)}}),r.toString()}function vB(e,t,n){const r=t.response();return r.tag=e.tag,r.events=n.Events?.length>0?n.Events.map(i=>({blockId:n.BlockID,blockHeight:Number(n.Height),blockTimestamp:n.BlockTimestamp,type:i.Type,transactionId:i.TransactionID,transactionIndex:Number(i.TransactionIndex),eventIndex:Number(i.EventIndex),payload:JSON.parse(t.Buffer.from(i.Payload,"base64").toString())})):null,r.heartbeat={blockId:n.BlockID,blockHeight:Number(n.Height),blockTimestamp:n.BlockTimestamp},r}function wB(e,t,n){const r=t.response();return r.tag=e.tag,r.streamConnection=n,r}async function EB(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};de(n.node,"SDK Send Get Events Error: opts.node must be defined."),de(t.response,"SDK Send Get Events Error: context.response must be defined."),de(t.Buffer,"SDK Send Get Events Error: context.Buffer must be defined.");const r=await e,i=n.connectWs||yB,a=new tr.EventEmitter;let c=null;const u=i({hostname:n.node,path:"/v1/subscribe_events",getParams:()=>{const d={event_types:r.subscribeEvents?.eventTypes,addresses:r.subscribeEvents?.addresses,contracts:r.subscribeEvents?.contracts,heartbeat_interval:r.subscribeEvents?.heartbeatInterval};return c?d.start_height=c+1:(d.start_block_id=r.subscribeEvents?.startBlockId,d.start_height=r.subscribeEvents?.startHeight),d}});return u.on("data",d=>{const p=vB(r,t,d);c=p.heartbeat.blockHeight,a.emit("data",p)}),u.on("error",d=>{a.emit("error",d)}),u.on("close",()=>{a.emit("close")}),wB(r,t,{on(d,p){return a.on(d,p),this},off(d,p){return a.off(d,p),this},close(){u.close()}})}const Iv=async function(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};switch(de(!!n?.node,'SDK Send Error: Either opts.node or "accessNode.api" in config must be defined.'),de(!!t.ix,"SDK Send Error: context.ix must be defined."),e=await e,!0){case t.ix.isTransaction(e):return n.sendTransaction?n.sendTransaction(e,t,n):pB(e,t,n);case t.ix.isGetTransactionStatus(e):return n.sendGetTransactionStatus?n.sendGetTransactionStatus(e,t,n):fB(e,t,n);case t.ix.isGetTransaction(e):return n.sendGetTransaction?n.sendGetTransaction(e,t,n):lB(e,t,n);case t.ix.isScript(e):return n.sendExecuteScript?n.sendExecuteScript(e,t,n):VU(e,t,n);case t.ix.isGetAccount(e):return n.sendGetAccount?n.sendGetAccount(e,t,n):XU(e,t,n);case t.ix.isGetEvents(e):return n.sendGetEvents?n.sendGetEvents(e,t,n):cB(e,t,n);case t.ix.isSubscribeEvents?.(e):return n.connectSubscribeEvents?n.connectSubscribeEvents(e,t,n):EB(e,t,n);case t.ix.isGetBlock(e):return n.sendGetBlock?n.sendGetBlock(e,t,n):iB(e,t,n);case t.ix.isGetBlockHeader(e):return n.sendGetBlockHeader?n.sendGetBlockHeader(e,t,n):eB(e,t,n);case t.ix.isGetCollection(e):return n.sendGetCollection?n.sendGetCollection(e,t,n):sB(e,t,n);case t.ix.isPing(e):return n.sendPing?n.sendPing(e,t,n):dB(e,t,n);case t.ix.isGetNetworkParameters(e):return n.sendGetNetworkParameters?n.sendGetNetworkParameters(e,t,n):gB(e,t,n);case t.ix.isGetNodeVersionInfo?.(e):return n.sendGetNodeVersionInfo?n.sendGetNodeVersionInfo(e,t,n):mB(e,t,n);default:return e}};let c_=function(e){return e.LIST_SUBSCRIPTIONS="list_subscriptions",e.SUBSCRIBE="subscribe",e.UNSUBSCRIBE="unsubscribe",e}({});class zu extends Error{constructor(t,n){super(n),this.name="SocketError",this.code=t}static fromMessage(t){return new zu(t.code,t.message)}}const SB=1;class _B{counter=0;socket=null;subscriptions=[];reconnectAttempts=0;connectPromise=null;closeConnection=null;constructor(t,n){this.config={...n,reconnectOptions:{initialReconnectDelay:500,reconnectAttempts:5,maxReconnectDelay:5e3,...n.reconnectOptions}},this.handlers=t}subscribe(t){const n=this._subscribe(t);return{unsubscribe:()=>{n.then(r=>r&&this.unsubscribe(r))}}}async _subscribe(t){const r=this.getHandler(t.topic).createSubscriber(t.args,t.onData,t.onError);let i=null;try{await this.connect(),i={id:String(this.counter++),topic:t.topic,subscriber:r},this.subscriptions.push(i);const a=await this.sendSubscribe(i);if(a.error)throw new Error(`Failed to subscribe to topic ${i.topic}`,{cause:zu.fromMessage(a.error)})}catch(a){return r.onError(a instanceof Error?a:new Error(String(a))),i&&this.unsubscribe(i.id),null}return i.id}unsubscribe(t){const n=this.subscriptions.find(r=>r.id===t);if(n){if(this.subscriptions=this.subscriptions.filter(r=>r.id!==t),this.subscriptions.length===0){this.closeConnection?.();return}this.sendUnsubscribe(n).catch(r=>{console.error(`Error while unsubscribing from topic: ${r}`)})}}async connect(){return this.connectPromise?this.connectPromise:(this.connectPromise=new Promise((t,n)=>{if(this.socket?.readyState===SB){t();return}this.socket=new BT(this.config.node);const r=c=>{const u=JSON.parse(c.data);if("action"in u&&u.error){const d=this.subscriptions.find(p=>p.id===u.subscription_id);d&&(d.subscriber.onError(new Error(`Failed to subscribe to topic ${d.topic}: ${u.error.message}`)),this.subscriptions=this.subscriptions.filter(p=>p.id!==u.subscription_id));return}const f=this.subscriptions.find(d=>d.id===u.subscription_id);f&&!("action"in u)&&u.subscription_id===f.id&&f.subscriber.onData(u.payload)},i=()=>{this.handleSocketError(new Error("WebSocket closed")).then(()=>{t()}).catch(c=>{n(c)})},a=()=>{t()};this.socket.addEventListener("message",r),this.socket.addEventListener("close",i),this.socket.addEventListener("open",a),this.closeConnection=()=>{this.socket?.removeEventListener("message",r),this.socket?.removeEventListener("close",i),this.socket?.removeEventListener("open",a),this.socket?.close(),this.socket=null,this.closeConnection=null,this.connectPromise=null}}),this.connectPromise)}async handleSocketError(t){if(this.closeConnection?.(),++this.reconnectAttempts>=this.config.reconnectOptions.reconnectAttempts)throw He({level:ht.error,title:"WebSocket Error",message:`Failed to reconnect to the server after ${this.reconnectAttempts+1} attempts: ${t}`}),this.subscriptions.forEach(n=>{n.subscriber.onError(new Error(`Failed to reconnect to the server after ${this.reconnectAttempts+1} attempts: ${t}`))}),this.subscriptions=[],this.reconnectAttempts=0,t;He({level:ht.warn,title:"WebSocket Error",message:`WebSocket error, reconnecting in ${this.backoffInterval}ms: ${t}`}),await new Promise(n=>setTimeout(n,this.backoffInterval)),await this.connect(),await Promise.all(this.subscriptions.map(async n=>{await this.sendSubscribe(n).catch(r=>{n.subscriber.onError(new Error(`Failed to restore subscription: ${r}`)),this.subscriptions=this.subscriptions.filter(i=>i.id!==n.id)})})),this.reconnectAttempts=0}async sendSubscribe(t){const n={action:c_.SUBSCRIBE,topic:t.topic,arguments:t.subscriber.getConnectionArgs(),subscription_id:String(t.id)},r=await this.request(n);if(r.error)throw new Error(`Failed to subscribe to topic ${t.topic}`,{cause:zu.fromMessage(r.error)});return r}async sendUnsubscribe(t){const n={action:c_.UNSUBSCRIBE,subscription_id:t.id};this.socket?.send(JSON.stringify(n));const r=await this.request(n);if(r.error)throw new Error(`Failed to unsubscribe from topic ${t.topic}`,{cause:zu.fromMessage(r.error)});return r}async request(t){let n=()=>{};return await new Promise((r,i)=>{if(!this.socket){i(new Error("WebSocket is not connected"));return}n=()=>{this.socket?.removeEventListener("error",a),this.socket?.removeEventListener("message",u),this.socket?.removeEventListener("close",c)},this.socket.addEventListener("error",a),this.socket.addEventListener("message",u),this.socket.addEventListener("close",c),this.socket.send(JSON.stringify(t));function a(f){i(new Error(`WebSocket error: ${f}`))}function c(){i(new Error("WebSocket closed"))}function u(f){const d=JSON.parse(f.data);d.subscription_id===t.subscription_id&&r(d)}}).finally(()=>{n()})}getHandler(t){const n=this.handlers.find(r=>r.topic===t);if(!n)throw new Error(`No handler found for topic ${t}`);return n}get backoffInterval(){return Math.min(this.config.reconnectOptions.maxReconnectDelay,this.config.reconnectOptions.initialReconnectDelay*2**this.reconnectAttempts)}}const xB={topic:ma.BLOCKS,createSubscriber:(e,t,n)=>{let r={...e};return{onData(i){const a={block:{id:i.header.id,parentId:i.header.parent_id,height:Number(i.header.height),timestamp:i.header.timestamp,parentVoterSignature:i.header.parent_voter_signature,collectionGuarantees:i.payload.collection_guarantees.map(c=>({collectionId:c.collection_id,signerIds:c.signer_indices})),blockSeals:i.payload.block_seals.map(c=>({blockId:c.block_id,executionReceiptId:c.result_id}))}};r={blockStatus:r.blockStatus,startBlockHeight:Number(BigInt(i.header.height)+BigInt(1))},t(a)},onError(i){n(i)},getConnectionArgs(){let i={block_status:r.blockStatus};return"startBlockHeight"in r&&r.startBlockHeight?{...i,start_block_height:String(r.startBlockHeight)}:"startBlockId"in r&&r.startBlockId?{...i,start_block_id:r.startBlockId}:i}}}},AB={topic:ma.BLOCK_HEADERS,createSubscriber:(e,t,n)=>{let r={...e};return{onData(i){const a={blockHeader:{id:i.id,parentId:i.parent_id,height:Number(i.height),timestamp:i.timestamp,parentVoterSignature:i.parent_voter_signature}};r={blockStatus:r.blockStatus,startBlockHeight:Number(BigInt(i.height)+BigInt(1))},t(a)},onError(i){n(i)},getConnectionArgs(){let i={block_status:r.blockStatus};return"startBlockHeight"in r&&r.startBlockHeight?{...i,start_block_height:r.startBlockHeight}:"startBlockId"in r&&r.startBlockId?{...i,start_block_id:r.startBlockId}:i}}}},RB={topic:ma.BLOCK_DIGESTS,createSubscriber:(e,t,n)=>{let r={...e};return{onData(i){const a={blockDigest:{id:i.block_id,height:Number(i.height),timestamp:i.timestamp}};r={blockStatus:r.blockStatus,startBlockId:String(BigInt(i.height)+BigInt(1))},t(a)},onError(i){n(i)},getConnectionArgs(){let i={block_status:r.blockStatus};return"startBlockHeight"in r&&r.startBlockHeight?{...i,start_block_height:r.startBlockHeight}:"startBlockId"in r&&r.startBlockId?{...i,start_block_id:r.startBlockId}:i}}}},OB={topic:ma.ACCOUNT_STATUSES,createSubscriber:(e,t,n)=>{let r={...e};return{onData(i){const a=[];for(const[c,u]of Object.entries(i.account_events)){for(const f of u){const d={accountStatusEvent:{accountAddress:c,blockId:i.block_id,blockHeight:Number(i.height),type:f.type,transactionId:f.transaction_id,transactionIndex:Number(f.transaction_index),eventIndex:Number(f.event_index),payload:JSON.parse(Buffer.from(f.payload,"base64").toString())}};a.push(d)}a.sort((f,d)=>{const p=f.accountStatusEvent.transactionIndex-d.accountStatusEvent.transactionIndex;return p!==0?p:f.accountStatusEvent.eventIndex-d.accountStatusEvent.eventIndex});for(const f of a)t(f);r={...r,startBlockHeight:Number(BigInt(i.height)+BigInt(1)),startBlockId:void 0}}},onError(i){n(i)},getConnectionArgs(){let i={event_types:r.eventTypes,addresses:r.addresses,account_addresses:r.accountAddresses};return"startBlockHeight"in r&&r.startBlockHeight?{...i,start_block_height:r.startBlockHeight}:"startBlockId"in r&&r.startBlockId?{...i,start_block_id:r.startBlockId}:i}}}},TB={UNKNOWN:0,PENDING:1,FINALIZED:2,EXECUTED:3,SEALED:4,EXPIRED:5},DB={topic:ma.TRANSACTION_STATUSES,createSubscriber:(e,t,n)=>{let r={...e};return{onData(i){const a={transactionStatus:{blockId:i.transaction_result.block_id,status:TB[i.transaction_result.status.toUpperCase()],statusString:i.transaction_result.status.toUpperCase(),statusCode:i.transaction_result.status_code,errorMessage:i.transaction_result.error_message,events:i.transaction_result.events.map(c=>({type:c.type,transactionId:c.transaction_id,transactionIndex:Number(c.transaction_index),eventIndex:Number(c.event_index),payload:JSON.parse(It.Buffer.from(c.payload,"base64").toString())}))}};t(a)},onError(i){n(i)},getConnectionArgs(){return{tx_id:r.transactionId}}}}},CB={topic:ma.EVENTS,createSubscriber:(e,t,n)=>{let r={...e};return{onData(i){for(const a of i.events){const c={event:{blockId:i.block_id,blockHeight:Number(i.block_height),blockTimestamp:i.block_timestamp,type:a.type,transactionId:a.transaction_id,transactionIndex:Number(a.transaction_index),eventIndex:Number(a.event_index),payload:JSON.parse(Buffer.from(a.payload,"base64").toString())}};t(c)}r={...r,startHeight:Number(BigInt(i.block_height)+BigInt(1)),startBlockId:void 0}},onError(i){n(i)},getConnectionArgs(){let i={event_types:r.eventTypes,addresses:r.addresses,contracts:r.contracts};return"startBlockHeight"in r&&r.startBlockHeight?{...i,start_block_height:r.startBlockHeight}:"startBlockId"in r&&r.startBlockId?{...i,start_block_id:r.startBlockId}:i}}}},IB=[xB,AB,RB,OB,DB,CB];let l_=new Map;function NB(e,t){let{topic:n,args:r,onData:i,onError:a}=e;const c=$B(t.node),u=l_.get(c)||new _B(IB,{node:c});return l_.set(c,u),u.subscribe({topic:n,args:r,onData:i,onError:a})}function $B(e){const t=new URL(NT(e,"/v1/ws"));return t.protocol==="https:"?t.protocol="wss:":t.protocol==="http:"&&(t.protocol="ws:"),t.toString()}const UB={send:Iv,subscribe:NB};var Iy={},Ny={},$y={},Uy={},By,u_;function Nv(){if(u_)return By;u_=1;var e=function(n,r){return function(i,a){var c=a*2,u=r*2;i[c]=n[u],i[c+1]=n[u+1]}};return By=e,By}var f_;function BB(){return f_||(f_=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=n(Nv());function n(a){return a&&a.__esModule?a:{default:a}}var r=function(c){for(var u=c.A,f=c.C,d=0;d<25;d+=5){for(var p=0;p<5;p++)(0,t.default)(u,d+p)(f,p);for(var g=0;g<5;g++){var y=(d+g)*2,b=(g+1)%5*2,v=(g+2)%5*2;u[y]^=~f[b]&f[v],u[y+1]^=~f[b+1]&f[v+1]}}},i=r;e.default=i}(Uy)),Uy}var Py={},ky={},d_;function PB(){return d_||(d_=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=new Uint32Array([0,1,0,32898,2147483648,32906,2147483648,2147516416,0,32907,0,2147483649,2147483648,2147516545,2147483648,32777,0,138,0,136,0,2147516425,0,2147483658,0,2147516555,2147483648,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,0,32778,2147483648,2147483658,2147483648,2147516545,2147483648,32896,0,2147483649,2147483648,2147516424]),n=t;e.default=n}(ky)),ky}var h_;function kB(){return h_||(h_=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=n(PB());function n(a){return a&&a.__esModule?a:{default:a}}var r=function(c){var u=c.A,f=c.roundIndex,d=f*2;u[0]^=t.default[d],u[1]^=t.default[d+1]},i=r;e.default=i}(Py)),Py}var My={},Ly={},p_;function MB(){return p_||(p_=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=[10,7,11,17,18,3,5,16,8,21,24,4,15,23,19,13,12,2,20,14,22,9,6,1],n=t;e.default=n}(Ly)),Ly}var jy={},g_;function LB(){return g_||(g_=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=[1,3,6,10,15,21,28,36,45,55,2,14,27,41,56,8,25,43,62,18,39,61,20,44],n=t;e.default=n}(jy)),jy}var m_;function jB(){return m_||(m_=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=i(MB()),n=i(LB()),r=i(Nv());function i(u){return u&&u.__esModule?u:{default:u}}var a=function(f){var d=f.A,p=f.C,g=f.W;(0,r.default)(d,1)(g,0);for(var y=0,b=0,v=0,E=32,S=0;S<24;S++){var x=t.default[S],T=n.default[S];(0,r.default)(d,x)(p,0),y=g[0],b=g[1],E=32-T,v=T<32?0:1,g[v]=y<<T|b>>>E,g[(v+1)%2]=b<<T|y>>>E,(0,r.default)(g,0)(d,x),(0,r.default)(p,0)(g,0)}},c=a;e.default=c}(My)),My}var zy={},y_;function zB(){return y_||(y_=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=n(Nv());function n(a){return a&&a.__esModule?a:{default:a}}var r=function(c){for(var u=c.A,f=c.C,d=c.D,p=c.W,g=0,y=0,b=0;b<5;b++){var v=b*2,E=(b+5)*2,S=(b+10)*2,x=(b+15)*2,T=(b+20)*2;f[v]=u[v]^u[E]^u[S]^u[x]^u[T],f[v+1]=u[v+1]^u[E+1]^u[S+1]^u[x+1]^u[T+1]}for(var O=0;O<5;O++){(0,t.default)(f,(O+1)%5)(p,0),g=p[0],y=p[1],p[0]=g<<1|y>>>31,p[1]=y<<1|g>>>31,d[O*2]=f[(O+4)%5*2]^p[0],d[O*2+1]=f[(O+4)%5*2+1]^p[1];for(var U=0;U<25;U+=5)u[(U+O)*2]^=d[O*2],u[(U+O)*2+1]^=d[O*2+1]}},i=r;e.default=i}(zy)),zy}var b_;function qB(){return b_||(b_=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=a(BB()),n=a(kB()),r=a(jB()),i=a(zB());function a(f){return f&&f.__esModule?f:{default:f}}var c=function(){var d=new Uint32Array(10),p=new Uint32Array(10),g=new Uint32Array(2);return function(y){for(var b=0;b<24;b++)(0,i.default)({A:y,C:d,D:p,W:g}),(0,r.default)({A:y,C:d,W:g}),(0,t.default)({A:y,C:d}),(0,n.default)({A:y,roundIndex:b});d.fill(0),p.fill(0),g.fill(0)}},u=c;e.default=u}($y)),$y}var v_;function HB(){return v_||(v_=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Rv(),n=r(qB());function r(f){return f&&f.__esModule?f:{default:f}}var i=function(d,p){for(var g=0;g<d.length;g+=8){var y=g/4;p[y]^=d[g+7]<<24|d[g+6]<<16|d[g+5]<<8|d[g+4],p[y+1]^=d[g+3]<<24|d[g+2]<<16|d[g+1]<<8|d[g]}return p},a=function(d,p){for(var g=0;g<p.length;g+=8){var y=g/4;p[g]=d[y+1],p[g+1]=d[y+1]>>>8,p[g+2]=d[y+1]>>>16,p[g+3]=d[y+1]>>>24,p[g+4]=d[y],p[g+5]=d[y]>>>8,p[g+6]=d[y]>>>16,p[g+7]=d[y]>>>24}return p},c=function(d){var p=this,g=d.capacity,y=d.padding,b=(0,n.default)(),v=200,E=g/8,S=v-g/4,x=0,T=new Uint32Array(v/4),O=t.Buffer.allocUnsafe(S);return this.absorb=function(U){for(var N=0;N<U.length;N++)O[x]=U[N],x+=1,x>=S&&(i(O,T),b(T),x=0);return p},this.squeeze=function(){var U=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},N={buffer:U.buffer||t.Buffer.allocUnsafe(E),padding:U.padding||y,queue:t.Buffer.allocUnsafe(O.length),state:new Uint32Array(T.length)};O.copy(N.queue);for(var I=0;I<T.length;I++)N.state[I]=T[I];N.queue.fill(0,x),N.queue[x]|=N.padding,N.queue[S-1]|=128,i(N.queue,N.state);for(var j=0;j<N.buffer.length;j+=S)b(N.state),a(N.state,N.buffer.slice(j,j+S));return N.buffer},this.reset=function(){return O.fill(0),T.fill(0),x=0,p},this},u=c;e.default=u}(Ny)),Ny}var w_;function FB(){return w_||(w_=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.SHAKE=e.SHA3Hash=e.SHA3=e.Keccak=void 0;var t=Rv(),n=r(HB());function r(p){return p&&p.__esModule?p:{default:p}}var i=function(g){var y=g.allowedSizes,b=g.defaultSize,v=g.padding;return function E(){var S=this,x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:b;if(!this||this.constructor!==E)return new E(x);if(y&&!y.includes(x))throw new Error("Unsupported hash length");var T=new n.default({capacity:x});return this.update=function(O){var U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"utf8";if(t.Buffer.isBuffer(O))return T.absorb(O),S;if(typeof O=="string")return S.update(t.Buffer.from(O,U));throw new TypeError("Not a string or buffer")},this.digest=function(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"binary",U=typeof O=="string"?{format:O}:O,N=T.squeeze({buffer:U.buffer,padding:U.padding||v});return U.format&&U.format!=="binary"?N.toString(U.format):N},this.reset=function(){return T.reset(),S},this}},a=i({allowedSizes:[224,256,384,512],defaultSize:512,padding:1});e.Keccak=a;var c=i({allowedSizes:[224,256,384,512],defaultSize:512,padding:6});e.SHA3=c;var u=i({allowedSizes:[128,256],defaultSize:256,padding:31});e.SHAKE=u;var f=a;e.SHA3Hash=f,c.SHA3Hash=f;var d=c;e.default=d}(Iy)),Iy}FB();function PT(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];if(!e.length&&!t.length||!e.length)return n;if(!t.length)return n.push(...e),n;const[r,...i]=e,[a,...c]=t;return r!==void 0&&n.push(r),a!==void 0&&n.push(a),PT(i,c,n)}function kT(e){return function(t){return typeof t=="function"?(He.deprecate({pkg:"FCL/SDK",subject:"Interopolation of functions into template literals",transition:"https://github.com/onflow/flow-js-sdk/blob/master/packages/sdk/TRANSITIONS.md#0001-deprecate-params"}),kT(e)(t(e))):String(t)}}function MT(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return typeof e=="string"?()=>e:typeof e=="function"?e:i=>PT([...e],n.map(kT(i))).join("").trim()}const Me=(e,t,n)=>({label:e,asArgument:t,asInjection:r=>(He.deprecate({pkg:"@onflow/types",subject:`Passing in ${e} as value for ${e}`,message:`Going forward, use ${e} as value for ${e}.`}),n(r))}),sa=e=>Array.isArray(e),go=e=>typeof e=="object",LT=e=>e==null,VB=e=>typeof e=="boolean",Nt=e=>typeof e=="number",Ht=e=>Number.isInteger(e),pt=e=>typeof e=="string",Ce=e=>{throw new Error("Type Error: "+e)},Ft=e=>{He.deprecate({pkg:"@onflow/types",subject:`Passing in Number as value for ${e}`,message:`Going forward, use String as value for ${e}.`,transition:"https://github.com/onflow/flow-js-sdk/blob/master/packages/types/WARNINGS.md#0002-[U]Int*-and-Word*-as-Number"})};let E_=!1;const GB={label:"Identity",asArgument:e=>(E_||(He.deprecate({pkg:"@onflow/types",subject:"Identity",message:"Identity type is deprecated and will be removed in v2.0.0.  Please remove it from your code."}),E_=!0),e),asInjection:e=>e},KB=Me("UInt",e=>Nt(e)&&Ht(e)?(Ft("UInt"),{type:"UInt",value:e.toString()}):pt(e)?{type:"UInt",value:e}:Ce("Expected Positive Integer for type Unsigned Int"),e=>e),WB=Me("Int",e=>Nt(e)&&Ht(e)?(Ft("Int"),{type:"Int",value:e.toString()}):pt(e)?{type:"Int",value:e}:Ce("Expected Integer for type Int"),e=>e),YB=Me("UInt8",e=>Nt(e)&&Ht(e)?(Ft("UInt8"),{type:"UInt8",value:e.toString()}):pt(e)?{type:"UInt8",value:e}:Ce("Expected integer for UInt8"),e=>e),XB=Me("Int8",e=>Nt(e)&&Ht(e)?(Ft("Int8"),{type:"Int8",value:e.toString()}):pt(e)?{type:"Int8",value:e}:Ce("Expected positive integer for Int8"),e=>e),ZB=Me("UInt16",e=>Nt(e)&&Ht(e)?(Ft("UInt16"),{type:"UInt16",value:e.toString()}):pt(e)?{type:"UInt16",value:e}:Ce("Expected integer for UInt16"),e=>e),QB=Me("Int16",e=>Nt(e)&&Ht(e)?(Ft("Int16"),{type:"Int16",value:e.toString()}):pt(e)?{type:"Int16",value:e}:Ce("Expected positive integer for Int16"),e=>e),JB=Me("UInt32",e=>Nt(e)&&Ht(e)?(Ft("UInt32"),{type:"UInt32",value:e.toString()}):pt(e)?{type:"UInt32",value:e}:Ce("Expected integer for UInt32"),e=>e),eP=Me("Int32",e=>Nt(e)&&Ht(e)?(Ft("Int32"),{type:"Int32",value:e.toString()}):pt(e)?{type:"Int32",value:e}:Ce("Expected positive integer for Int32"),e=>e),tP=Me("UInt64",e=>Nt(e)&&Ht(e)?(Ft("UInt64"),{type:"UInt64",value:e.toString()}):pt(e)?{type:"UInt64",value:e}:Ce("Expected integer for UInt64"),e=>e),nP=Me("Int64",e=>Nt(e)&&Ht(e)?(Ft("Int64"),{type:"Int64",value:e.toString()}):pt(e)?{type:"Int64",value:e}:Ce("Expected positive integer for Int64"),e=>e),rP=Me("UInt128",e=>Nt(e)&&Ht(e)?(Ft("UInt128"),{type:"UInt128",value:e.toString()}):pt(e)?{type:"UInt128",value:e}:Ce("Expected integer for UInt128"),e=>e),iP=Me("Int128",e=>Nt(e)&&Ht(e)?(Ft("Int128"),{type:"Int128",value:e.toString()}):pt(e)?{type:"Int128",value:e}:Ce("Expected positive integer for Int128"),e=>e),sP=Me("UInt256",e=>Nt(e)&&Ht(e)?(Ft("UInt256"),{type:"UInt256",value:e.toString()}):pt(e)?{type:"UInt256",value:e}:Ce("Expected integer for UInt256"),e=>e),oP=Me("Int256",e=>Nt(e)&&Ht(e)?(Ft("Int256"),{type:"Int256",value:e.toString()}):pt(e)?{type:"Int256",value:e}:Ce("Expected integer for Int256"),e=>e),aP=Me("Word8",e=>Nt(e)&&Ht(e)?(Ft("Word8"),{type:"Word8",value:e.toString()}):pt(e)?{type:"Word8",value:e}:Ce("Expected positive number for Word8"),e=>e),cP=Me("Word16",e=>Nt(e)&&Ht(e)?(Ft("Word16"),{type:"Word16",value:e.toString()}):pt(e)?{type:"Word16",value:e}:Ce("Expected positive number for Word16"),e=>e),lP=Me("Word32",e=>Nt(e)&&Ht(e)?(Ft("Word32"),{type:"Word32",value:e.toString()}):pt(e)?{type:"Word32",value:e}:Ce("Expected positive number for Word32"),e=>e),uP=Me("Word64",e=>Nt(e)&&Ht(e)?(Ft("Word64"),{type:"Word64",value:e.toString()}):pt(e)?{type:"Word64",value:e}:Ce("Expected positive number for Word64"),e=>e),fP=Me("Word128",e=>Nt(e)&&Ht(e)?(Ft("Word128"),{type:"Word128",value:e.toString()}):pt(e)?{type:"Word128",value:e}:Ce("Expected positive number for Word128"),e=>e),dP=Me("Word256",e=>Nt(e)&&Ht(e)?(Ft("Word256"),{type:"Word256",value:e.toString()}):pt(e)?{type:"Word256",value:e}:Ce("Expected positive number for Word256"),e=>e),jT=()=>{He.deprecate({subject:"Passing in Numbers as values for Fix64 and UFix64 types",pkg:"@onflow/types",transition:"https://github.com/onflow/flow-js-sdk/blob/master/packages/types/WARNINGS.md#0001-[U]Fix64-as-Number"})},hP=Me("UFix64",e=>{if(pt(e)){const t=e.split(".");return t.length!==2?Ce(`Expected one decimal but found ${t.length} in the [U]Fix64 value. Find out more about [U]Fix64 types here: https://docs.onflow.org/cadence/json-cadence-spec/#fixed-point-numbers`):t[1].length==0||t[1].length>8?Ce(`Expected at least one digit, and at most 8 digits following the decimal of the [U]Fix64 value but found ${t[1].length} digits. Find out more about [U]Fix64 types here: https://docs.onflow.org/cadence/json-cadence-spec/#fixed-point-numbers`):(t[1]=t[1].padEnd(8,"0"),e=t.join("."),{type:"UFix64",value:e})}else if(Nt(e))return jT(),{type:"UFix64",value:e.toString()};return Ce("Expected String for UFix64")},e=>e),pP=Me("Fix64",e=>{if(pt(e)){const t=e.split(".");return t.length!==2?Ce(`Expected one decimal but found ${t.length} in the [U]Fix64 value. Find out more about [U]Fix64 types here: https://docs.onflow.org/cadence/json-cadence-spec/#fixed-point-numbers`):t[1].length==0||t[1].length>8?Ce(`Expected at least one digit, and at most 8 digits following the decimal of the [U]Fix64 value but found ${t[1].length} digits. Find out more about [U]Fix64 types here: https://docs.onflow.org/cadence/json-cadence-spec/#fixed-point-numbers`):(t[1]=t[1].padEnd(8,"0"),e=t.join("."),{type:"Fix64",value:e})}else if(Nt(e))return jT(),{type:"Fix64",value:e.toString()};return Ce("Expected String for Fix64")},e=>e),gP=Me("String",e=>pt(e)?{type:"String",value:e}:Ce("Expected String for type String"),e=>e),mP=Me("Character",e=>pt(e)?{type:"Character",value:e}:Ce("Expected Character for type Character"),e=>e),yP=Me("Bool",e=>VB(e)?{type:"Bool",value:e}:Ce("Expected Boolean for type Bool"),e=>e),zT=Me("Address",e=>pt(e)?{type:"Address",value:e}:Ce("Expected Address for type Address"),e=>e),bP=Me("Void",e=>!e||LT(e)?{type:"Void",value:null}:Ce("Expected Void for type Void"),e=>e),vP=e=>Me("Optional",t=>({type:"Optional",value:LT(t)?null:e.asArgument(t)}),t=>t),wP=Me("Reference",e=>go(e)?{type:"Reference",value:e}:Ce("Expected Object for type Reference"),e=>e),S_=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Me("Array",t=>({type:"Array",value:sa(e)?e.map((n,r)=>n.asArgument(t[r])):t.map(n=>e.asArgument(n))}),t=>t)},EP=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Me("Dictionary",t=>{const n=sa(t),r=sa(e);return go(t)?{type:"Dictionary",value:r&&n?e.map((i,a)=>({key:i.key.asArgument(t[a].key),value:i.value.asArgument(t[a].value)})):n&&!r?t.map(i=>({key:e.key.asArgument(i.key),value:e.value.asArgument(i.value)})):!n&&!r?[{key:e.key.asArgument(t.key),value:e.value.asArgument(t.value)}]:Ce("Invalid arguments for Dictionary.")}:Ce("Expected Object for type Dictionary")},t=>t)},SP=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return Me("Event",n=>go(n)?{type:"Event",value:{id:e,fields:sa(t)?t.map((r,i)=>({name:n.fields[i].name,value:r.value.asArgument(n.fields[i].value)})):n.fields.map(r=>({name:r.name,value:t.value.asArgument(r.value)}))}}:Ce("Expected Object for type Event"),n=>n)},_P=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return Me("Resource",n=>go(n)?{type:"Resource",value:{id:e,fields:sa(t)?t.map((r,i)=>({name:n.fields[i].name,value:r.value.asArgument(n.fields[i].value)})):n.fields.map(r=>({name:r.name,value:t.value.asArgument(r.value)}))}}:Ce("Expected Object for type Resource"),n=>n)},xP=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return Me("Struct",n=>go(n)?{type:"Struct",value:{id:e,fields:sa(t)?t.map((r,i)=>({name:n.fields[i].name,value:r.value.asArgument(n.fields[i].value)})):n.fields.map(r=>({name:r.name,value:t.value.asArgument(r.value)}))}}:Ce("Expected Object for type Struct"),n=>n)},AP=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return Me("Enum",n=>go(n)?{type:"Enum",value:{id:e,fields:sa(t)?t.map((r,i)=>({name:n.fields[i].name,value:r.value.asArgument(n.fields[i].value)})):n.fields.map(r=>({name:r.name,value:t.value.asArgument(r.value)}))}}:Ce("Expected Object for type Enum"),n=>n)},RP=Me("Path",e=>go(e)?pt(e.domain)?e.domain==="storage"||e.domain==="private"||e.domain==="public"?pt(e.identifier)?{type:"Path",value:{domain:e.domain,identifier:e.identifier}}:Ce(`Expected a string for the Path identifier but found ${e.identifier}. Find out more about the Path type here: https://docs.onflow.org/cadence/json-cadence-spec/#path`):Ce(`Expected either "storage", "private" or "public" as the Path domain but found ${e.domain}. Find out more about the Path type here: https://docs.onflow.org/cadence/json-cadence-spec/#path`):Ce(`Expected a string for the Path domain but found ${e.domain}. Find out more about the Path type here: https://docs.onflow.org/cadence/json-cadence-spec/#path`):Ce("Expected Object for type Path"),e=>e),OP=e=>Me("InclusiveRange",t=>{if(go(t)){const{start:n,end:r,step:i}=t;return{type:"InclusiveRange",value:{start:e.asArgument(n),end:e.asArgument(r),step:e.asArgument(i)}}}return Ce("Expected Object for type InclusiveRange")},t=>t),TP=Object.freeze(Object.defineProperty({__proto__:null,Address:zT,Array:S_,Bool:yP,Character:mP,Dictionary:EP,Enum:AP,Event:SP,Fix64:pP,Identity:GB,InclusiveRange:OP,Int:WB,Int128:iP,Int16:QB,Int256:oP,Int32:eP,Int64:nP,Int8:XB,Optional:vP,Path:RP,Reference:wP,Resource:_P,String:gP,Struct:xP,UFix64:hP,UInt:KB,UInt128:rP,UInt16:ZB,UInt256:sP,UInt32:JB,UInt64:tP,UInt8:YB,Void:bP,Word128:fP,Word16:cP,Word256:dP,Word32:lP,Word64:uP,Word8:aP,_Array:S_},Symbol.toStringTag,{value:"Module"})),DP=`{
  "kind":"${vp.ACCOUNT}",
  "tempId":null,
  "addr":null,
  "keyId":null,
  "sequenceNum":null,
  "signature":null,
  "signingFunction":null,
  "resolve":null,
  "role": {
    "proposer":false,
    "authorizer":false,
    "payer":false,
    "param":false
  }
}`,CP=`{
  "kind":"${vp.ARGUMENT}",
  "tempId":null,
  "value":null,
  "asArgument":null,
  "xform":null,
  "resolve": null,
  "resolveArgument": null
}`,qT=`{
  "tag":"${it.UNKNOWN}",
  "assigns":{},
  "status":"${_f.OK}",
  "reason":null,
  "accounts":{},
  "params":{},
  "arguments":{},
  "message": {
    "cadence":null,
    "refBlock":null,
    "computeLimit":null,
    "proposer":null,
    "payer":null,
    "authorizations":[],
    "params":[],
    "arguments":[]
  },
  "proposer":null,
  "authorizations":[],
  "payer":[],
  "events": {
    "eventType":null,
    "start":null,
    "end":null,
    "blockIds":[]
  },
  "subscribeEvents": {
    "startBlockId":null,
    "startHeight":null,
    "eventTypes":null,
    "addresses":null,
    "contracts":null,
    "heartbeatInterval":null
  },
  "transaction": {
    "id":null
  },
  "block": {
    "id":null,
    "height":null,
    "isSealed":null
  },
  "account": {
    "addr":null
  },
  "collection": {
    "id":null
  }
}`,HT=new Set(Object.keys(JSON.parse(qT))),Ep=()=>JSON.parse(qT),IP=()=>(He.deprecate({pkg:"FCL/SDK",message:"The interaction been deprecated from the Flow JS-SDK/FCL. use initInteraction instead",transition:"https://github.com/onflow/flow-js-sdk/blob/master/packages/sdk/TRANSITIONS.md#0010-deprecate-interaction",level:ht.warn}),Ep()),FT=e=>typeof e=="number",VT=e=>Array.isArray(e),GT=e=>e!==null&&typeof e=="object",$v=e=>e==null,Gc=e=>typeof e=="function",KT=e=>{if(!GT(e)||$v(e)||FT(e))return!1;for(let t of HT)if(!e.hasOwnProperty(t))return!1;return!0},Er=e=>(e.status=_f.OK,e),Uv=(e,t)=>(e.status=_f.BAD,e.reason=t,e),nr=e=>t=>(t.tag=e,Er(t)),__=e=>e.keyId==null?e:(de(!isNaN(parseInt(e.keyId.toString())),"account.keyId must be an integer"),{...e,keyId:parseInt(e.keyId.toString())}),WT=()=>JSON.parse(DP),Sp=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return n=>{de(typeof e=="function"||typeof e=="object","prepAccount must be passed an authorization function or an account object"),de(t.role!=null,"Account must have a role");const r=WT(),i=t.role,a=_v();let c={...e};e.authorization&&Gc(e.authorization)&&(c={resolve:e.authorization}),!e.authorization&&Gc(e)&&(c={resolve:e});const u=c.resolve;return u&&(c.resolve=function(f){for(var d=arguments.length,p=new Array(d>1?d-1:0),g=1;g<d;g++)p[g-1]=arguments[g];return[u,__].reduce(async(y,b)=>b(await y,...p),f)}),c=__(c),n.accounts[a]={...r,tempId:a,...c,role:{...r.role,...typeof e.role=="object"?e.role:{},...i?{[i]:!0}:{}}},i===tf.AUTHORIZER?n.authorizations.push(a):i===tf.PAYER?n.payer.push(a):i&&(n[i]=a),n}},YT=e=>t=>{let n=_v();return t.message.arguments.push(n),t.arguments[n]=JSON.parse(CP),t.arguments[n].tempId=n,t.arguments[n].value=e.value,t.arguments[n].asArgument=e.asArgument,t.arguments[n].xform=e.xform,t.arguments[n].resolve=e.resolve,t.arguments[n].resolveArgument=Gc(e.resolveArgument)?e.resolveArgument.bind(e):e.resolveArgument,Er(t)},NP=nr(it.UNKNOWN),XT=nr(it.SCRIPT),ZT=nr(it.TRANSACTION),QT=nr(it.GET_TRANSACTION_STATUS),$P=nr(it.GET_TRANSACTION),JT=nr(it.GET_ACCOUNT),UP=nr(it.GET_EVENTS),BP=nr(it.PING),e3=nr(it.GET_BLOCK),PP=nr(it.GET_BLOCK_HEADER),kP=nr(it.GET_COLLECTION),t3=nr(it.GET_NETWORK_PARAMETERS),MP=nr(it.SUBSCRIBE_EVENTS),LP=nr(it.GET_NODE_VERSION_INFO),rr=e=>t=>t.tag===e,n3=rr(it.UNKNOWN),Bv=rr(it.SCRIPT),mo=rr(it.TRANSACTION),jP=rr(it.GET_TRANSACTION_STATUS),zP=rr(it.GET_TRANSACTION),qP=rr(it.GET_ACCOUNT),HP=rr(it.GET_EVENTS),FP=rr(it.PING),VP=rr(it.GET_BLOCK),GP=rr(it.GET_BLOCK_HEADER),KP=rr(it.GET_COLLECTION),WP=rr(it.GET_NETWORK_PARAMETERS),YP=rr(it.GET_NODE_VERSION_INFO),XP=rr(it.SUBSCRIBE_EVENTS),ZP=e=>e.status===_f.OK,r3=e=>e.status===_f.BAD,QP=e=>e.reason,JP=e=>e.kind===vp.ACCOUNT,ek=e=>e.kind===vp.ARGUMENT,tk=e=>{for(let t of Object.keys(e))if(!HT.has(t))throw new Error(`"${t}" is an invalid root level Interaction property.`);return e},Bh=async function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];try{if(e=tk(await e),r3(e))throw new Error(`Interaction Error: ${e.reason}`);if(!t.length)return e;const[n,...r]=t,i=await n;if(Gc(i))return Bh(i(e),r);if($v(i)||!i)return Bh(e,r);if(KT(i))return Bh(i,r);throw new Error("Invalid Interaction Composition")}catch(n){throw n}};function Nn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const[r,i]=t;return VT(r)?u=>Nn(u,r):Bh(r,i)}const nk=function(e){return e},_p=function(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;return e.assigns[t]==null?n:e.assigns[t]},Pv=(e,t)=>n=>(n.assigns[e]=t,Er(n)),i3=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:nk;return n=>(n.assigns[e]=t(n.assigns[e],n),Er(n))},rk=e=>t=>(delete t.assigns[e],Er(t));var kv=Object.freeze({__proto__:null,Bad:Uv,Ok:Er,destroy:rk,get:_p,initAccount:WT,initInteraction:Ep,interaction:IP,isAccount:JP,isArgument:ek,isArray:VT,isBad:r3,isFn:Gc,isGetAccount:qP,isGetBlock:VP,isGetBlockHeader:GP,isGetCollection:KP,isGetEvents:HP,isGetNetworkParameters:WP,isGetNodeVersionInfo:YP,isGetTransaction:zP,isGetTransactionStatus:jP,isInteraction:KT,isNull:$v,isNumber:FT,isObj:GT,isOk:ZP,isPing:FP,isScript:Bv,isSubscribeEvents:XP,isTransaction:mo,isUnknown:n3,makeArgument:YT,makeGetAccount:JT,makeGetBlock:e3,makeGetBlockHeader:PP,makeGetCollection:kP,makeGetEvents:UP,makeGetNetworkParameters:t3,makeGetNodeVerionInfo:LP,makeGetTransaction:$P,makeGetTransactionStatus:QT,makePing:BP,makeScript:XT,makeSubscribeEvents:MP,makeTransaction:ZT,makeUnknown:NP,pipe:Nn,prepAccount:Sp,put:Pv,update:i3,why:QP});function s3(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Nn(Ep(),e)}const ik={tag:null,transaction:null,transactionStatus:null,transactionId:null,encodedData:null,events:null,event:null,accountStatusEvent:null,account:null,block:null,blockHeader:null,blockDigest:null,latestBlock:null,collection:null,networkParameters:null,streamConnection:null,heartbeat:null,nodeVersionInfo:null},Mv=()=>({...ik});function sk(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return Nn([e3,t=>(t.block.isSealed=e,Er(t))])}function ok(e){return Nn([JT,t=>(t.account.addr=zt(e),Er(t))])}const ak=(e,t,n)=>{const r=new wp;let i=ck();e.on("data",async c=>{const u=Object.keys(c).filter(d=>c[d]!=null&&d!=="tag");let f=Promise.all(u.map(async d=>{const p={[d]:c[d]},g=await t(p,n);return{channel:d,message:g}}));i.push(async()=>{(await f).forEach(p=>{let{channel:g,message:y}=p;r.emit(g,y)})})});function a(c){e.on(c,u=>{i.push(async()=>{r.emit(c,u)})})}return a("close"),a("error"),{on(c,u){return r.on(c,u),this},off(c,u){return r.off(c,u),this},close:()=>{e.close()}}};function ck(){let e=[],t=!1;async function n(){if(!t){for(t=!0;e.length>0;)await e.shift()?.();t=!1}}return{push:r=>{e.push(r),n()}}}const lk=()=>{He.deprecate({pkg:"@onflow/decode",subject:"Operating upon data of the latestBlock field of the response object",transition:"https://github.com/onflow/flow-js-sdk/blob/master/packages/decode/WARNINGS.md#0001-Deprecating-latestBlock-field"})},rt=async e=>e,uk=async()=>null,fk=async e=>e.staticType,dk=async(e,t,n)=>e?await oa(e,t,n):null,hk=async(e,t,n)=>await Promise.all(e.map(r=>new Promise(async i=>i(await oa(r,t,[...n,r.type]))))),pk=async(e,t,n)=>await e.reduce(async(r,i)=>(r=await r,r[await oa(i.key,t,[...n,i.key])]=await oa(i.value,t,[...n,i.key]),r),Promise.resolve({})),ih=async(e,t,n)=>{const r=await e.fields.reduce(async(a,c)=>(a=await a,a[c.name]=await oa(c.value,t,[...n,c.name]),a),Promise.resolve({})),i=e.id&&o3(t,e.id);return i?await i(r):r},gk=async(e,t,n)=>{const r=["start","end","step"];return await Object.keys(e).reduce(async(a,c)=>(a=await a,r.includes(c)&&(a[c]=await oa(e[c],t,[...n,c])),a),Promise.resolve({}))},x_={UInt:rt,Int:rt,UInt8:rt,Int8:rt,UInt16:rt,Int16:rt,UInt32:rt,Int32:rt,UInt64:rt,Int64:rt,UInt128:rt,Int128:rt,UInt256:rt,Int256:rt,Word8:rt,Word16:rt,Word32:rt,Word64:rt,Word128:rt,Word256:rt,UFix64:rt,Fix64:rt,String:rt,Character:rt,Bool:rt,Address:rt,Void:uk,Optional:dk,Reference:rt,Array:hk,Dictionary:pk,Event:ih,Resource:ih,Struct:ih,Enum:ih,Type:fk,Path:rt,Capability:rt,InclusiveRange:gk},o3=(e,t)=>{const n=Object.keys(e).find(r=>/^\/.*\/$/.test(r)?new RegExp(r.substring(1,r.length-1)).test(t):r===t);return t&&n&&e[n]},oa=async(e,t,n)=>{let r=o3(t,e.type);if(!r)throw new Error(`Undefined Decoder Error: ${e.type}@${n.join(".")}`);return await r(e.value,t,n)},gu=async function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];const i={...Object.keys(x_).filter(a=>!Object.keys(t).find(c=>new RegExp(c).test(a))).reduce((a,c)=>(a[c]=x_[c],a),t),...t};return oa(e,i,n)},xf=async function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e.encodedData)return gu(e.encodedData,t);if(e.transactionStatus)return{...e.transactionStatus,events:await Promise.all(e.transactionStatus.events.map(async function(r){return{type:r.type,transactionId:r.transactionId,transactionIndex:r.transactionIndex,eventIndex:r.eventIndex,data:await gu(r.payload,t)}}))};if(e.transaction)return e.transaction;if(e.events)return await Promise.all(e.events.map(async function(r){return{blockId:r.blockId,blockHeight:r.blockHeight,blockTimestamp:r.blockTimestamp,type:r.type,transactionId:r.transactionId,transactionIndex:r.transactionIndex,eventIndex:r.eventIndex,data:await gu(r.payload,t)}}));if(e.event){const{payload:n,...r}=e.event;return{...r,data:await gu(n,t)}}else if(e.accountStatusEvent){const{payload:n,...r}=e.accountStatusEvent;return{...r,data:await gu(n,t)}}else{if(e.account)return e.account;if(e.block)return e.block;if(e.blockHeader)return e.blockHeader;if(e.blockDigest)return e.blockDigest;if(e.latestBlock)return lk(),e.latestBlock;if(e.transactionId)return e.transactionId;if(e.collection)return e.collection;if(e.networkParameters){const n=/^flow-/,r=e.networkParameters.chainId;let i;return r==="flow-emulator"?i="local":n.test(r)?i=r.replace(n,""):i=r,{chainId:i}}else{if(e.streamConnection)return ak(e.streamConnection,xf,t);if(e.heartbeat)return e.heartbeat;if(e.nodeVersionInfo)return e.nodeVersionInfo}}return null},A_=e=>typeof e=="function",R_=e=>typeof e=="string",mk=()=>/\b(0x\w+)\b/g;function O_(e){return mk().test(e)}const a3=()=>/import\s+"(\w+)"/g;function T_(e){return a3().test(e)}function yk(e){return e.matchAll(a3())}async function bk(e){if(!mo(e)&&!Bv(e))return e;var t=_p(e,"ix.cadence");if(de(A_(t)||R_(t),"Cadence needs to be a function or a string."),A_(t)&&(t=await t({})),de(R_(t),"Cadence needs to be a string at this point."),de(!O_(t)||!T_(t),"Both account identifier and contract identifier syntax not simultaneously supported."),O_(t)&&(t=await Ae().where(/^0x/).then(n=>Object.entries(n).reduce((r,i)=>{let[a,c]=i;const u=new RegExp("(\\b"+a+"\\b)","g");return r.replace(u,c)},t))),T_(t))for(const[n,r]of yk(t)){const i=await Ae().get(`system.contracts.${r}`);i?t=t.replace(n,`import ${r} from ${Un(i)}`):He({title:"Contract Placeholder not found",message:`Cannot find a value for contract placeholder ${r}. Please add to your flow.json or explicitly add it to the config 'contracts.*' namespace.`,level:ht.warn})}return e.message.cadence=t,e}const ab=e=>typeof e=="function";function vk(e){if(de(typeof e.xform!=null,`No type specified for argument: ${e.value}`),ab(e.xform))return e.xform(e.value);if(ab(e.xform.asArgument))return e.xform.asArgument(e.value);de(!1,"Invalid Argument",e)}async function c3(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:3;if(de(t>0,`Argument Resolve Recursion Limit Exceeded for Arg: ${e.tempId}`),ab(e.resolveArgument)){const n=await e.resolveArgument();return c3(n,t-1)}else return e}async function wk(e){if(mo(e)||Bv(e))for(let[t,n]of Object.entries(e.arguments)){const r=await c3(n);e.arguments[t].asArgument=vk(r)}return e}const Ek=e=>u3(f3(d3(e))),Sk=e=>u3(f3(Dk(e))),_k=(e,t)=>It.Buffer.from(e.padEnd(t*2,"0"),"hex"),l3=(e,t)=>It.Buffer.from(e.padStart(t*2,"0"),"hex"),xk=_k(It.Buffer.from("FLOW-V0.0-transaction").toString("hex"),32).toString("hex"),u3=e=>xk+e,qy=e=>l3(e,8),Ak=e=>l3(e,32),Rk=e=>It.Buffer.from(JSON.stringify(e),"utf8"),Ok=e=>It.Buffer.from(e,"utf8"),Tk=e=>It.Buffer.from(e,"hex"),f3=e=>Ov(e).toString("hex"),d3=e=>(Nk(e),[Ok(e.cadence||""),e.arguments.map(Rk),Ak(e.refBlock||""),e.computeLimit,qy(zt(e.proposalKey.address||"")),e.proposalKey.keyId,e.proposalKey.sequenceNum,qy(zt(e.payer)),e.authorizers.map(t=>qy(zt(t)))]),Dk=e=>($k(e),[d3(e),Ck(e)]),Ck=e=>{const t=Ik(e);return e.payloadSigs?.map(n=>({signerIndex:t.get(zt(n.address))||"",keyId:n.keyId,sig:n.sig})).sort((n,r)=>n.signerIndex>r.signerIndex?1:n.signerIndex<r.signerIndex?-1:n.keyId>r.keyId?1:n.keyId<r.keyId?-1:0).map(n=>[n.signerIndex,n.keyId,Tk(n.sig)])},Ik=e=>{const t=new Map;let n=0;const r=i=>{t.has(i)||(t.set(i,n),n++)};return e.proposalKey.address&&r(e.proposalKey.address),r(e.payer),e.authorizers.forEach(r),t},Nk=e=>{Uk.forEach(t=>Zh(e,t)),Bk.forEach(t=>Zh(e.proposalKey,t,"proposalKey"))},$k=e=>{Pk.forEach(t=>Zh(e,t)),e.payloadSigs?.forEach((t,n)=>{kk.forEach(r=>Zh(t,r,"payloadSigs",n))})},Xh=e=>typeof e=="number",Hc=e=>typeof e=="string",h3=e=>e!==null&&typeof e=="object",cb=e=>h3(e)&&e instanceof Array,Uk=[{name:"cadence",check:Hc},{name:"arguments",check:cb},{name:"refBlock",check:Hc,defaultVal:"0"},{name:"computeLimit",check:Xh},{name:"proposalKey",check:h3},{name:"payer",check:Hc},{name:"authorizers",check:cb}],Bk=[{name:"address",check:Hc},{name:"keyId",check:Xh},{name:"sequenceNum",check:Xh}],Pk=[{name:"payloadSigs",check:cb}],kk=[{name:"address",check:Hc},{name:"keyId",check:Xh},{name:"sig",check:Hc}],Zh=(e,t,n,r)=>{const{name:i,check:a,defaultVal:c}=t;if(e[i]==null&&c!=null&&(e[i]=c),e[i]==null)throw Mk(i,n,r);if(!a(e[i]))throw Lk(i,n,r)},p3=(e,t,n)=>t?n==null?`${t}.${e}`:`${t}.${n}.${e}`:e,Mk=(e,t,n)=>new Error(`Missing field ${p3(e,t,n)}`),Lk=(e,t,n)=>new Error(`Invalid field ${p3(e,t,n)}`);function g3(e){let t=new Set(e.authorizations);return e.proposer&&t.add(e.proposer),Array.isArray(e.payer)?e.payer.forEach(n=>t.delete(n)):t.delete(e.payer),Array.from(t)}function m3(e){let t=new Set(Array.isArray(e.payer)?e.payer:[e.payer]);return Array.from(t)}const Lv=e=>{const t=()=>e.authorizations.map(c=>Un(e.accounts[c].addr)).reduce((c,u)=>c.find(f=>f===u)?c:[...c,u],[]),n=()=>g3(e).map(a=>({address:Un(e.accounts[a].addr),keyId:e.accounts[a].keyId,sig:e.accounts[a].signature})),r=()=>m3(e).map(a=>({address:Un(e.accounts[a].addr),keyId:e.accounts[a].keyId,sig:e.accounts[a].signature})),i=e.proposer?{address:Un(e.accounts[e.proposer].addr),keyId:e.accounts[e.proposer].keyId,sequenceNum:e.accounts[e.proposer].sequenceNum}:{};return{cadence:e.message.cadence,refBlock:e.message.refBlock||null,computeLimit:e.message.computeLimit,arguments:e.message.arguments.map(a=>e.arguments[a].asArgument),proposalKey:i,payer:Un(e.accounts[Array.isArray(e.payer)?e.payer[0]:e.payer].addr),authorizers:t(),payloadSigs:n(),envelopeSigs:r()}},Ei=5,jk=e=>`${Un(e.addr)}-${e.keyId}`,zk=e=>e&&(Object.prototype.toString.call(e)==="[object Function]"||typeof e=="function"||e instanceof Function),qk=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.join("-")};var mr=function(e){return e.PAYER="payer",e.PROPOSER="proposer",e.AUTHORIZATIONS="authorizations",e}(mr||{});function Hk(){const e=" ",n=[];return[function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;n.push(Array(i*4).fill(e).join("-")+r)},function(){return n.reduce((r,i)=>r+`
`+i)}]}function jv(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:3;return t<=0||!Array.isArray(e)?e:jv(e.flatMap(n=>n),t-1)}function Fk(e,t){try{return{f_type:"PreSignable",f_vsn:"1.0.1",roles:e.role,cadence:t.message.cadence,args:t.message.arguments.map(n=>t.arguments[n].asArgument),data:{},interaction:t,voucher:Lv(t)}}catch(n){throw console.error("buildPreSignable",n),n}}async function Vk(e,t){const n=Array.isArray(e.payer)?e.payer:[e.payer],r=Array.isArray(e.authorizations)?e.authorizations:[e.authorizations],i=e.proposer===null?[]:Array.isArray(e.proposer)?e.proposer:[e.proposer],a=Object.keys(e.accounts),c=[...new Set(n.concat(r,i))];for(const u of a)c.find(f=>f===u)||delete e.accounts[u]}function D_(e,t){typeof t.addr=="string"&&(typeof t.keyId=="number"||typeof t.keyId=="string")?t.tempId=jk(t):t.tempId=t.tempId||_v();const n=e.accounts[t.tempId]||t;return e.accounts[t.tempId]||(e.accounts[t.tempId]=t),e.accounts[t.tempId].role.proposer=n.role.proposer||t.role.proposer,e.accounts[t.tempId].role.payer=n.role.payer||t.role.payer,e.accounts[t.tempId].role.authorizer=n.role.authorizer||t.role.authorizer,e.accounts[t.tempId]}function Gk(e){const t=jv(e),n=new Set;return t.map(i=>{const a=qk(i.tempId,i.role.payer,i.role.proposer,i.role.authorizer,i.role.param);return n.has(a)?null:(n.add(a),i)}).filter(i=>i!==null)}async function Kk(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ei,{debugLogger:r}=arguments.length>3?arguments[3]:void 0;if(n<=0)throw new Error(`recurseResolveAccount Error: Depth limit (${Ei}) reached. Ensure your authorization functions resolve to an account after ${Ei} resolves.`);let i=e.accounts[t];if(!i)return[[],!1];if(r(`account: ${i.tempId}`,Math.max(Ei-n,0)),i?.resolve)if(zk(i?.resolve)){r(`account: ${i.tempId} -- cache MISS`,Math.max(Ei-n,0));const{resolve:a,...c}=i;let u=await a(c,Fk(c,e));u=Array.isArray(u)?u:[u];let f=jv(u);return f=f.map(d=>D_(e,d)),i.resolve=f.map(d=>d.tempId),i=D_(e,i),[f.map(d=>d.tempId),!0]}else return r(`account: ${i.tempId} -- cache HIT`,Math.max(Ei-n,0)),[i.resolve,!1];return[i.tempId?[i.tempId]:[],!1]}const Uu=e=>e===null?[]:Array.isArray(e)?e:[e];async function Wk(e,t,n){for(let r of Object.values(mr))if(r===mr.AUTHORIZATIONS||r===mr.PAYER)e[r]=Uu(e[r]).reduce((i,a)=>a===t?i.concat(...n.filter(c=>r===mr.PAYER&&c.role.payer||r===mr.AUTHORIZATIONS&&c.role.authorizer).map(c=>c.tempId)):i.concat(a),[]);else if(r===mr.PROPOSER){const i=n.filter(a=>a.role.proposer);if(i.length>1)throw new Error("replaceRoles Error: Multiple proposer keys were resolved, but only one is allowed");e[r]=i[0]?.tempId??e[r]}}async function Yk(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ei,{debugLogger:r}=arguments.length>3?arguments[3]:void 0;de(e&&typeof e=="object","resolveAccountType Error: ix not defined");let i=new Set;for(let c of t){let u=e.accounts[c];de(!!u,"resolveAccountType Error: account not found");const[f,d]=await Kk(e,c,n,{debugLogger:r});if(d){const p=f.map(y=>e.accounts[y]),g=Gk(p);g.forEach(y=>i.add(y.tempId)),Wk(e,c,g)}}let a;for(const c of e[mr.PAYER]){let u=e.accounts[c];if(!a)a=u.addr;else if(a!==u.addr)throw new Error("resolveAccountType Error: payers from different accounts detected")}return i}async function Xk(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(mo(e)){Array.isArray(e.payer)||He.deprecate({pkg:"FCL",subject:'"ix.payer" must be an array. Support for ix.payer as a singular',message:"See changelog for more info."});let[n,r]=Hk();try{let i=Ei,a=new Set([...Uu(e[mr.PAYER]),...Uu(e[mr.PROPOSER]),...Uu(e[mr.AUTHORIZATIONS])]);for(;a.size>0;){if(i<=0)throw new Error(`resolveAccounts Error: Depth limit (${Ei}) reached. Ensure your authorization functions resolve to an account after ${Ei} resolves.`);a=await Yk(e,a,i,{debugLogger:n}),i--}await Vk(e,{debugLogger:n});for(const c of Object.values(mr))de(Uu(e[c]).length>0||c===mr.AUTHORIZATIONS,`resolveAccountType Error: no accounts for role "${c}" found`);t.enableDebug&&console.debug(r())}catch(i){throw console.error(`=== SAD PANDA ===

`,i,`

=== SAD PANDA ===`),i}}return e}async function Zk(e){if(mo(e))try{let t=g3(e);const n=Ek(I_(e));await Promise.all(t.map(C_(e,n)));let r=m3(e);const i=Sk({...I_(e),payloadSigs:t.map(a=>({address:e.accounts[a].addr||"",keyId:e.accounts[a].keyId||0,sig:e.accounts[a].signature||""}))});await Promise.all(r.map(C_(e,i)))}catch(t){throw console.error("Signatures",t,{ix:e}),t}return e}function C_(e,t){return async function(r){const i=e.accounts[r];if(i.signature!=null&&i.signature!==void 0)return;const{signature:a}=await i.signingFunction(Qk(i,t,e));e.accounts[r].signature=a}}function Qk(e,t,n){try{return{f_type:"Signable",f_vsn:"1.0.1",message:t,addr:zt(e.addr),keyId:e.keyId,roles:e.role,cadence:n.message.cadence,args:n.message.arguments.map(r=>n.arguments[r].asArgument),data:{},interaction:n,voucher:Lv(n)}}catch(r){throw console.error("buildSignable",r),r}}function I_(e){const t=zt((Array.isArray(e.payer)?e.accounts[e.payer[0]]:e.accounts[e.payer]).addr||""),n=e.proposer?{address:zt(e.accounts[e.proposer].addr)||"",keyId:e.accounts[e.proposer].keyId||0,sequenceNum:e.accounts[e.proposer].sequenceNum||0}:{};return{cadence:e.message.cadence,refBlock:e.message.refBlock,computeLimit:e.message.computeLimit,arguments:e.message.arguments.map(r=>e.arguments[r].asArgument),proposalKey:n,payer:t,authorizers:e.authorizations.map(r=>zt(e.accounts[r].addr)||"").reduce((r,i)=>r.find(a=>a===i)?r:[...r,i],[])}}async function Jk(e){const t=_p(e,"ix.validators",[]);return Nn(e,t.map(n=>r=>n(r,{Ok:Er,Bad:Uv})))}async function e5(e){for(let t of Object.keys(e.accounts))e.accounts[t].addr=zt(e.accounts[t].addr);return e}async function t5(e){const t=_p(e,"ix.voucher-intercept");return Gc(t)&&await t(Lv(e)),e}const n5=100;async function r5(e){return mo(e)&&(e.message.computeLimit=e.message.computeLimit||await Ae.get("fcl.limit"),e.message.computeLimit||(He.deprecate({pkg:"FCL/SDK",subject:"The built-in default compute limit (DEFAULT_COMPUTE_LIMIT=10)",transition:"https://github.com/onflow/flow-js-sdk/blob/master/packages/sdk/TRANSITIONS.md#0009-deprecate-default-compute-limit"}),e.message.computeLimit=n5)),e}const i5=e=>e,dc=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:i5;return async n=>{const r=a=>[`
Accounts:`,{proposer:a.proposer,authorizations:a.authorizations,payer:a.payer},`

Details:`,a.accounts].filter(Boolean),i=function(){for(var a=arguments.length,c=new Array(a),u=0;u<a;u++)c[u]=arguments[u];console.log(`debug[${e}] ---
`,...c,`


---`)};return await Ae.get(`debug.${e}`)&&await t(n,i,r),n}},s5=Nn([bk,dc("cadence",(e,t)=>t(e.message.cadence)),r5,dc("compute limit",(e,t)=>t(e.message.computeLimit)),wk,dc("arguments",(e,t)=>t(e.message.arguments,e.message)),Xk,dc("accounts",(e,t,n)=>t(...n(e))),o5,a5,Zk,dc("signatures",(e,t,n)=>t(...n(e))),e5,Jk,t5,dc("resolved",(e,t)=>t(e))]);async function o5(e){if(mo(e)&&e.message.refBlock==null){const t=await Ae().get("accessNode.api"),n=await Ae.first(["sdk.transport","sdk.send"],Iv);de(n,"Required value for sdk.transport is not defined in config. See: https://github.com/onflow/fcl-js/blob/master/packages/sdk/CHANGELOG.md#0057-alpha1----2022-01-21"),e.message.refBlock=(await n(s3([sk()]),{config:Ae,response:Mv,Buffer:It.Buffer,ix:kv},{node:t}).then(xf)).id}return e}async function a5(e){if(mo(e)){var t=Object.values(e.accounts).find(n=>n.role.proposer);if(de(t!==void 0,"Transactions require a proposer"),t&&t.sequenceNum==null){const n=await Ae().get("accessNode.api"),r=await Ae.first(["sdk.transport","sdk.send"],Iv);de(r,"Required value for sdk.transport is not defined in config. See: https://github.com/onflow/fcl-js/blob/master/packages/sdk/CHANGELOG.md#0057-alpha1----2022-01-21"),e.accounts[t.tempId].sequenceNum=await r(await s3([ok(t.addr)]),{config:Ae,response:Mv,Buffer:It.Buffer,ix:kv},{node:n}).then(xf).then(i=>i.keys).then(i=>i.find(a=>a.index===t.keyId)).then(i=>i.sequenceNumber)}}return e}function y3(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(t.length>1){const[i,a]=t;return y3((c,u)=>{let{Ok:f,Bad:d}=u;return i?f(c):d(c,a)})}const[r]=t;return i=>r(i,{Ok:Er,Bad:Uv})}class b3 extends Error{constructor(){super("The current transport does not support subscriptions.  If you have provided a custom transport (e.g. via `sdk.transport` configuration), ensure that it implements the subscribe method."),this.name="SubscriptionsNotSupportedError"}}async function v3(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};de(e.send==null||e.transport==null,'SDK Transport Error: Cannot provide both "transport" and legacy "send" options.');const t=e.transport||e.send||await Ae().first(["sdk.transport","sdk.send"],UB);return c5(t)?t:{send:t,subscribe:()=>{throw new b3}}}function c5(e){return e.send!==void 0&&e.subscribe!==void 0&&typeof e.send=="function"&&typeof e.subscribe=="function"}const xp=async function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=await v3(t),r=n.send.bind(n);y3(r,"Required value for sdk.transport is not defined in config. See: https://github.com/onflow/fcl-js/blob/master/packages/sdk/CHANGELOG.md#0057-alpha1----2022-01-21");const i=await Ae.first(["sdk.resolve"],t.resolve||s5);return t.node=t.node||await Ae().get("accessNode.api"),Array.isArray(e)&&(e=Nn(Ep(),e)),r(await i(e),{config:Ae,response:Mv,ix:kv,Buffer:It.Buffer},t)};function l5(e){let{topic:t,args:n,onData:r,onError:i}=e,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};async function c(){let f,d;try{f=await v3(a),d=a?.node||await Ae().get("accessNode.api"),de(!!d,'SDK Send Error: Either opts.node or "accessNode.api" in config must be defined.')}catch(p){i(p instanceof Error?p:new Error(String(p)));return}return f.subscribe({topic:t,args:n,onData:r,onError:i},{node:d,...a})}let u=c();return{unsubscribe:()=>{u.then(f=>f?.unsubscribe?.())}}}function u5(e){let{topic:t,args:n,onData:r,onError:i}=e,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const c=l5({topic:t,args:n,onData:u=>{xf(u).then(r).catch(f=>{i(new Error(`Failed to decode response: ${f.message}`)),c?.unsubscribe?.()})},onError:i},a);return c}async function Ap(e){const t=await Ae().where(/^decoder\./),n=Object.entries(t).map(r=>{let[i,a]=r;return i=`/${i.replace(/^decoder\./,"")}$/`,[i,a]});return xf(e,Object.fromEntries(n))}function f5(e){return i3("ix.validators",t=>Array.isArray(t)?[...t,e]:[e])}function d5(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return Nn([t=>(t.block.isSealed=e,t),f5(t=>{if(t.block.id)throw new Error("Unable to specify both block finality and block id.");if(t.block.height)throw new Error("Unable to specify both block finality and block height.");return t})])}function h5(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Nn(e.map(t=>Sp(t,{role:tf.AUTHORIZER})))}function p5(e){return Nn([QT,t=>(t.transaction.id=e,Er(t))])}function g5(){return Nn([t3,e=>Er(e)])}function w3(e){return t=>(t.message.computeLimit=e,t)}function E3(e){return Nn(e.map(YT))}function S3(e,t){return{value:e,xform:t}}function m5(e){return Sp(e,{role:tf.PROPOSER})}function y5(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Array.isArray(e)||(e=[e]),Nn(e.map(t=>Sp(t,{role:tf.PAYER})))}function b5(){return Nn([XT,Pv("ix.cadence",MT(...arguments))])}const v5=[],w5=null;function E5(){return Nn([ZT,Pv("ix.cadence",MT(...arguments)),e=>(e.message.refBlock=e.message.refBlock||w5,e.authorizations=e.authorizations||v5,Er(e))])}var Ph={exports:{}},S5=Ph.exports,N_;function _5(){return N_||(N_=1,function(e,t){(function(n,r){e.exports=r()})(S5,function(){return n={418:function(i,a){(function(c,u){for(var f in u)c[f]=u[f]})(a,function(c){var u={};function f(d){if(u[d])return u[d].exports;var p=u[d]={i:d,l:!1,exports:{}};return c[d].call(p.exports,p,p.exports,f),p.l=!0,p.exports}return f.m=c,f.c=u,f.i=function(d){return d},f.d=function(d,p,g){f.o(d,p)||Object.defineProperty(d,p,{configurable:!1,enumerable:!0,get:g})},f.n=function(d){var p=d&&d.__esModule?function(){return d.default}:function(){return d};return f.d(p,"a",p),p},f.o=function(d,p){return Object.prototype.hasOwnProperty.call(d,p)},f.p="",f(f.s=1)}([function(c,u,f){Object.defineProperty(u,"__esModule",{value:!0});var d=f(3),p=function(){function g(y,b){y===void 0&&(y={}),b===void 0&&(b={splitValues:!1});var v,E=this;this.headersMap={},y&&(typeof Headers<"u"&&y instanceof Headers?d.getHeaderKeys(y).forEach(function(S){d.getHeaderValues(y,S).forEach(function(x){b.splitValues?E.append(S,d.splitHeaderValue(x)):E.append(S,x)})}):typeof(v=y)=="object"&&typeof v.headersMap=="object"&&typeof v.forEach=="function"?y.forEach(function(S,x){E.append(S,x)}):typeof Map<"u"&&y instanceof Map?y.forEach(function(S,x){E.append(x,S)}):typeof y=="string"?this.appendFromString(y):typeof y=="object"&&Object.getOwnPropertyNames(y).forEach(function(S){var x=y[S];Array.isArray(x)?x.forEach(function(T){E.append(S,T)}):E.append(S,x)}))}return g.prototype.appendFromString=function(y){for(var b=y.split(`\r
`),v=0;v<b.length;v++){var E=b[v],S=E.indexOf(":");if(S>0){var x=E.substring(0,S).trim(),T=E.substring(S+1).trim();this.append(x,T)}}},g.prototype.delete=function(y,b){var v=d.normalizeName(y);if(b===void 0)delete this.headersMap[v];else{var E=this.headersMap[v];if(E){var S=E.indexOf(b);S>=0&&E.splice(S,1),E.length===0&&delete this.headersMap[v]}}},g.prototype.append=function(y,b){var v=this,E=d.normalizeName(y);Array.isArray(this.headersMap[E])||(this.headersMap[E]=[]),Array.isArray(b)?b.forEach(function(S){v.headersMap[E].push(d.normalizeValue(S))}):this.headersMap[E].push(d.normalizeValue(b))},g.prototype.set=function(y,b){var v=d.normalizeName(y);if(Array.isArray(b)){var E=[];b.forEach(function(S){E.push(d.normalizeValue(S))}),this.headersMap[v]=E}else this.headersMap[v]=[d.normalizeValue(b)]},g.prototype.has=function(y,b){var v=this.headersMap[d.normalizeName(y)];if(!Array.isArray(v))return!1;if(b!==void 0){var E=d.normalizeValue(b);return v.indexOf(E)>=0}return!0},g.prototype.get=function(y){var b=this.headersMap[d.normalizeName(y)];return b!==void 0?b.concat():[]},g.prototype.forEach=function(y){var b=this;Object.getOwnPropertyNames(this.headersMap).forEach(function(v){y(v,b.headersMap[v])},this)},g.prototype.toHeaders=function(){if(typeof Headers<"u"){var y=new Headers;return this.forEach(function(b,v){v.forEach(function(E){y.append(b,E)})}),y}throw new Error("Headers class is not defined")},g}();u.BrowserHeaders=p},function(c,u,f){Object.defineProperty(u,"__esModule",{value:!0});var d=f(0);u.BrowserHeaders=d.BrowserHeaders},function(c,u,f){Object.defineProperty(u,"__esModule",{value:!0}),u.iterateHeaders=function(d,p){for(var g=d[Symbol.iterator](),y=g.next();!y.done;)p(y.value[0]),y=g.next()},u.iterateHeadersKeys=function(d,p){for(var g=d.keys(),y=g.next();!y.done;)p(y.value),y=g.next()}},function(c,u,f){Object.defineProperty(u,"__esModule",{value:!0});var d=f(2);u.normalizeName=function(p){if(typeof p!="string"&&(p=String(p)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(p))throw new TypeError("Invalid character in header field name");return p.toLowerCase()},u.normalizeValue=function(p){return typeof p!="string"&&(p=String(p)),p},u.getHeaderValues=function(p,g){var y=p;if(y instanceof Headers&&y.getAll)return y.getAll(g);var b=y.get(g);return b&&typeof b=="string"?[b]:b},u.getHeaderKeys=function(p){var g=p,y={},b=[];return g.keys?d.iterateHeadersKeys(g,function(v){y[v]||(y[v]=!0,b.push(v))}):g.forEach?g.forEach(function(v,E){y[E]||(y[E]=!0,b.push(E))}):d.iterateHeaders(g,function(v){var E=v[0];y[E]||(y[E]=!0,b.push(E))}),b},u.splitHeaderValue=function(p){var g=[];return p.split(", ").forEach(function(y){y.split(",").forEach(function(b){g.push(b)})}),g}}]))},617:function(i,a,c){Object.defineProperty(a,"__esModule",{value:!0}),a.ChunkParser=a.ChunkType=a.encodeASCII=a.decodeASCII=void 0;var u,f=c(65);function d(S){return(x=S)===9||x===10||x===13||S>=32&&S<=126;var x}function p(S){for(var x=0;x!==S.length;++x)if(!d(S[x]))throw new Error("Metadata is not valid (printable) ASCII");return String.fromCharCode.apply(String,Array.prototype.slice.call(S))}function g(S){return(128&S.getUint8(0))==128}function y(S){return S.getUint32(1,!1)}function b(S,x,T){return S.byteLength-x>=T}function v(S,x,T){if(S.slice)return S.slice(x,T);var O=S.length;T!==void 0&&(O=T);for(var U=new Uint8Array(O-x),N=0,I=x;I<O;I++)U[N++]=S[I];return U}a.decodeASCII=p,a.encodeASCII=function(S){for(var x=new Uint8Array(S.length),T=0;T!==S.length;++T){var O=S.charCodeAt(T);if(!d(O))throw new Error("Metadata contains invalid ASCII");x[T]=O}return x},function(S){S[S.MESSAGE=1]="MESSAGE",S[S.TRAILERS=2]="TRAILERS"}(u=a.ChunkType||(a.ChunkType={}));var E=function(){function S(){this.buffer=null,this.position=0}return S.prototype.parse=function(x,T){if(x.length===0&&T)return[];var O,U=[];if(this.buffer==null)this.buffer=x,this.position=0;else if(this.position===this.buffer.byteLength)this.buffer=x,this.position=0;else{var N=this.buffer.byteLength-this.position,I=new Uint8Array(N+x.byteLength),j=v(this.buffer,this.position);I.set(j,0);var z=new Uint8Array(x);I.set(z,N),this.buffer=I,this.position=0}for(;;){if(!b(this.buffer,this.position,5))return U;var P=v(this.buffer,this.position,this.position+5),G=new DataView(P.buffer,P.byteOffset,P.byteLength),F=y(G);if(!b(this.buffer,this.position,5+F))return U;var K=v(this.buffer,this.position+5,this.position+5+F);if(this.position+=5+F,g(G))return U.push({chunkType:u.TRAILERS,trailers:(O=K,new f.Metadata(p(O)))}),U;U.push({chunkType:u.MESSAGE,data:K})}},S}();a.ChunkParser=E},8:function(i,a){var c;Object.defineProperty(a,"__esModule",{value:!0}),a.httpStatusToCode=a.Code=void 0,function(u){u[u.OK=0]="OK",u[u.Canceled=1]="Canceled",u[u.Unknown=2]="Unknown",u[u.InvalidArgument=3]="InvalidArgument",u[u.DeadlineExceeded=4]="DeadlineExceeded",u[u.NotFound=5]="NotFound",u[u.AlreadyExists=6]="AlreadyExists",u[u.PermissionDenied=7]="PermissionDenied",u[u.ResourceExhausted=8]="ResourceExhausted",u[u.FailedPrecondition=9]="FailedPrecondition",u[u.Aborted=10]="Aborted",u[u.OutOfRange=11]="OutOfRange",u[u.Unimplemented=12]="Unimplemented",u[u.Internal=13]="Internal",u[u.Unavailable=14]="Unavailable",u[u.DataLoss=15]="DataLoss",u[u.Unauthenticated=16]="Unauthenticated"}(c=a.Code||(a.Code={})),a.httpStatusToCode=function(u){switch(u){case 0:return c.Internal;case 200:return c.OK;case 400:return c.InvalidArgument;case 401:return c.Unauthenticated;case 403:return c.PermissionDenied;case 404:return c.NotFound;case 409:return c.Aborted;case 412:return c.FailedPrecondition;case 429:return c.ResourceExhausted;case 499:return c.Canceled;case 500:return c.Unknown;case 501:return c.Unimplemented;case 503:return c.Unavailable;case 504:return c.DeadlineExceeded;default:return c.Unknown}}},934:function(i,a,c){Object.defineProperty(a,"__esModule",{value:!0}),a.client=void 0;var u=c(65),f=c(617),d=c(8),p=c(346),g=c(57),y=c(882);a.client=function(E,S){return new b(E,S)};var b=function(){function E(S,x){this.started=!1,this.sentFirstMessage=!1,this.completed=!1,this.closed=!1,this.finishedSending=!1,this.onHeadersCallbacks=[],this.onMessageCallbacks=[],this.onEndCallbacks=[],this.parser=new f.ChunkParser,this.methodDefinition=S,this.props=x,this.createTransport()}return E.prototype.createTransport=function(){var S=this.props.host+"/"+this.methodDefinition.service.serviceName+"/"+this.methodDefinition.methodName,x={methodDefinition:this.methodDefinition,debug:this.props.debug||!1,url:S,onHeaders:this.onTransportHeaders.bind(this),onChunk:this.onTransportChunk.bind(this),onEnd:this.onTransportEnd.bind(this)};this.props.transport?this.transport=this.props.transport(x):this.transport=g.makeDefaultTransport(x)},E.prototype.onTransportHeaders=function(S,x){if(this.props.debug&&p.debug("onHeaders",S,x),this.closed)this.props.debug&&p.debug("grpc.onHeaders received after request was closed - ignoring");else if(x!==0){this.responseHeaders=S,this.props.debug&&p.debug("onHeaders.responseHeaders",JSON.stringify(this.responseHeaders,null,2));var T=v(S);this.props.debug&&p.debug("onHeaders.gRPCStatus",T);var O=T&&T>=0?T:d.httpStatusToCode(x);this.props.debug&&p.debug("onHeaders.code",O);var U=S.get("grpc-message")||[];if(this.props.debug&&p.debug("onHeaders.gRPCMessage",U),this.rawOnHeaders(S),O!==d.Code.OK){var N=this.decodeGRPCStatus(U[0]);this.rawOnError(O,N,S)}}},E.prototype.onTransportChunk=function(S){var x=this;if(this.closed)this.props.debug&&p.debug("grpc.onChunk received after request was closed - ignoring");else{var T=[];try{T=this.parser.parse(S)}catch(O){return this.props.debug&&p.debug("onChunk.parsing error",O,O.message),void this.rawOnError(d.Code.Internal,"parsing error: "+O.message)}T.forEach(function(O){if(O.chunkType===f.ChunkType.MESSAGE){var U=x.methodDefinition.responseType.deserializeBinary(O.data);x.rawOnMessage(U)}else O.chunkType===f.ChunkType.TRAILERS&&(x.responseHeaders?(x.responseTrailers=new u.Metadata(O.trailers),x.props.debug&&p.debug("onChunk.trailers",x.responseTrailers)):(x.responseHeaders=new u.Metadata(O.trailers),x.rawOnHeaders(x.responseHeaders)))})}},E.prototype.onTransportEnd=function(){if(this.props.debug&&p.debug("grpc.onEnd"),this.closed)this.props.debug&&p.debug("grpc.onEnd received after request was closed - ignoring");else if(this.responseTrailers!==void 0){var S=v(this.responseTrailers);if(S!==null){var x=this.responseTrailers.get("grpc-message"),T=this.decodeGRPCStatus(x[0]);this.rawOnEnd(S,T,this.responseTrailers)}else this.rawOnError(d.Code.Internal,"Response closed without grpc-status (Trailers provided)")}else{if(this.responseHeaders===void 0)return void this.rawOnError(d.Code.Unknown,"Response closed without headers");var O=v(this.responseHeaders),U=this.responseHeaders.get("grpc-message");if(this.props.debug&&p.debug("grpc.headers only response ",O,U),O===null)return void this.rawOnEnd(d.Code.Unknown,"Response closed without grpc-status (Headers only)",this.responseHeaders);var N=this.decodeGRPCStatus(U[0]);this.rawOnEnd(O,N,this.responseHeaders)}},E.prototype.decodeGRPCStatus=function(S){if(!S)return"";try{return decodeURIComponent(S)}catch{return S}},E.prototype.rawOnEnd=function(S,x,T){var O=this;this.props.debug&&p.debug("rawOnEnd",S,x,T),this.completed||(this.completed=!0,this.onEndCallbacks.forEach(function(U){if(!O.closed)try{U(S,x,T)}catch(N){setTimeout(function(){throw N},0)}}))},E.prototype.rawOnHeaders=function(S){this.props.debug&&p.debug("rawOnHeaders",S),this.completed||this.onHeadersCallbacks.forEach(function(x){try{x(S)}catch(T){setTimeout(function(){throw T},0)}})},E.prototype.rawOnError=function(S,x,T){var O=this;T===void 0&&(T=new u.Metadata),this.props.debug&&p.debug("rawOnError",S,x),this.completed||(this.completed=!0,this.onEndCallbacks.forEach(function(U){if(!O.closed)try{U(S,x,T)}catch(N){setTimeout(function(){throw N},0)}}))},E.prototype.rawOnMessage=function(S){var x=this;this.props.debug&&p.debug("rawOnMessage",S.toObject()),this.completed||this.closed||this.onMessageCallbacks.forEach(function(T){if(!x.closed)try{T(S)}catch(O){setTimeout(function(){throw O},0)}})},E.prototype.onHeaders=function(S){this.onHeadersCallbacks.push(S)},E.prototype.onMessage=function(S){this.onMessageCallbacks.push(S)},E.prototype.onEnd=function(S){this.onEndCallbacks.push(S)},E.prototype.start=function(S){if(this.started)throw new Error("Client already started - cannot .start()");this.started=!0;var x=new u.Metadata(S||{});x.set("content-type","application/grpc-web+proto"),x.set("x-grpc-web","1"),this.transport.start(x)},E.prototype.send=function(S){if(!this.started)throw new Error("Client not started - .start() must be called before .send()");if(this.closed)throw new Error("Client already closed - cannot .send()");if(this.finishedSending)throw new Error("Client already finished sending - cannot .send()");if(!this.methodDefinition.requestStream&&this.sentFirstMessage)throw new Error("Message already sent for non-client-streaming method - cannot .send()");this.sentFirstMessage=!0;var x=y.frameRequest(S);this.transport.sendMessage(x)},E.prototype.finishSend=function(){if(!this.started)throw new Error("Client not started - .finishSend() must be called before .close()");if(this.closed)throw new Error("Client already closed - cannot .send()");if(this.finishedSending)throw new Error("Client already finished sending - cannot .finishSend()");this.finishedSending=!0,this.transport.finishSend()},E.prototype.close=function(){if(!this.started)throw new Error("Client not started - .start() must be called before .close()");if(this.closed)throw new Error("Client already closed - cannot .close()");this.closed=!0,this.props.debug&&p.debug("request.abort aborting request"),this.transport.cancel()},E}();function v(E){var S=E.get("grpc-status")||[];if(S.length>0)try{var x=S[0];return parseInt(x,10)}catch{return null}return null}},346:function(i,a){Object.defineProperty(a,"__esModule",{value:!0}),a.debug=void 0,a.debug=function(){for(var c=[],u=0;u<arguments.length;u++)c[u]=arguments[u];console.debug?console.debug.apply(null,c):console.log.apply(null,c)}},607:function(i,a,c){Object.defineProperty(a,"__esModule",{value:!0}),a.grpc=void 0;var u,f=c(418),d=c(57),p=c(229),g=c(540),y=c(210),b=c(859),v=c(8),E=c(938),S=c(35),x=c(934);(u=a.grpc||(a.grpc={})).setDefaultTransport=d.setDefaultTransportFactory,u.CrossBrowserHttpTransport=b.CrossBrowserHttpTransport,u.FetchReadableStreamTransport=p.FetchReadableStreamTransport,u.XhrTransport=y.XhrTransport,u.WebsocketTransport=g.WebsocketTransport,u.Code=v.Code,u.Metadata=f.BrowserHeaders,u.client=function(T,O){return x.client(T,O)},u.invoke=E.invoke,u.unary=S.unary},938:function(i,a,c){Object.defineProperty(a,"__esModule",{value:!0}),a.invoke=void 0;var u=c(934);a.invoke=function(f,d){if(f.requestStream)throw new Error(".invoke cannot be used with client-streaming methods. Use .client instead.");var p=u.client(f,{host:d.host,transport:d.transport,debug:d.debug});return d.onHeaders&&p.onHeaders(d.onHeaders),d.onMessage&&p.onMessage(d.onMessage),d.onEnd&&p.onEnd(d.onEnd),p.start(d.metadata),p.send(d.request),p.finishSend(),{close:function(){p.close()}}}},65:function(i,a,c){Object.defineProperty(a,"__esModule",{value:!0}),a.Metadata=void 0;var u=c(418);Object.defineProperty(a,"Metadata",{enumerable:!0,get:function(){return u.BrowserHeaders}})},57:function(i,a,c){Object.defineProperty(a,"__esModule",{value:!0}),a.makeDefaultTransport=a.setDefaultTransportFactory=void 0;var u=c(859),f=function(d){return u.CrossBrowserHttpTransport({withCredentials:!1})(d)};a.setDefaultTransportFactory=function(d){f=d},a.makeDefaultTransport=function(d){return f(d)}},229:function(i,a,c){var u=this&&this.__assign||function(){return(u=Object.assign||function(g){for(var y,b=1,v=arguments.length;b<v;b++)for(var E in y=arguments[b])Object.prototype.hasOwnProperty.call(y,E)&&(g[E]=y[E]);return g}).apply(this,arguments)};Object.defineProperty(a,"__esModule",{value:!0}),a.detectFetchSupport=a.FetchReadableStreamTransport=void 0;var f=c(65),d=c(346);a.FetchReadableStreamTransport=function(g){return function(y){return function(b,v){return b.debug&&d.debug("fetchRequest",b),new p(b,v)}(y,g)}};var p=function(){function g(y,b){this.cancelled=!1,this.controller=self.AbortController&&new AbortController,this.options=y,this.init=b}return g.prototype.pump=function(y,b){var v=this;if(this.reader=y,this.cancelled)return this.options.debug&&d.debug("Fetch.pump.cancel at first pump"),void this.reader.cancel().catch(function(E){v.options.debug&&d.debug("Fetch.pump.reader.cancel exception",E)});this.reader.read().then(function(E){if(E.done)return v.options.onEnd(),b;v.options.onChunk(E.value),v.pump(v.reader,b)}).catch(function(E){v.cancelled?v.options.debug&&d.debug("Fetch.catch - request cancelled"):(v.cancelled=!0,v.options.debug&&d.debug("Fetch.catch",E.message),v.options.onEnd(E))})},g.prototype.send=function(y){var b=this;fetch(this.options.url,u(u({},this.init),{headers:this.metadata.toHeaders(),method:"POST",body:y,signal:this.controller&&this.controller.signal})).then(function(v){if(b.options.debug&&d.debug("Fetch.response",v),b.options.onHeaders(new f.Metadata(v.headers),v.status),!v.body)return v;b.pump(v.body.getReader(),v)}).catch(function(v){b.cancelled?b.options.debug&&d.debug("Fetch.catch - request cancelled"):(b.cancelled=!0,b.options.debug&&d.debug("Fetch.catch",v.message),b.options.onEnd(v))})},g.prototype.sendMessage=function(y){this.send(y)},g.prototype.finishSend=function(){},g.prototype.start=function(y){this.metadata=y},g.prototype.cancel=function(){var y=this;this.cancelled?this.options.debug&&d.debug("Fetch.cancel already cancelled"):(this.cancelled=!0,this.controller?(this.options.debug&&d.debug("Fetch.cancel.controller.abort"),this.controller.abort()):this.options.debug&&d.debug("Fetch.cancel.missing abort controller"),this.reader?(this.options.debug&&d.debug("Fetch.cancel.reader.cancel"),this.reader.cancel().catch(function(b){y.options.debug&&d.debug("Fetch.cancel.reader.cancel exception",b)})):this.options.debug&&d.debug("Fetch.cancel before reader"))},g}();a.detectFetchSupport=function(){return typeof Response<"u"&&Response.prototype.hasOwnProperty("body")&&typeof Headers=="function"}},859:function(i,a,c){Object.defineProperty(a,"__esModule",{value:!0}),a.CrossBrowserHttpTransport=void 0;var u=c(229),f=c(210);a.CrossBrowserHttpTransport=function(d){if(u.detectFetchSupport()){var p={credentials:d.withCredentials?"include":"same-origin"};return u.FetchReadableStreamTransport(p)}return f.XhrTransport({withCredentials:d.withCredentials})}},210:function(i,a,c){var u,f=this&&this.__extends||(u=function(S,x){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(T,O){T.__proto__=O}||function(T,O){for(var U in O)Object.prototype.hasOwnProperty.call(O,U)&&(T[U]=O[U])})(S,x)},function(S,x){function T(){this.constructor=S}u(S,x),S.prototype=x===null?Object.create(x):(T.prototype=x.prototype,new T)});Object.defineProperty(a,"__esModule",{value:!0}),a.stringToArrayBuffer=a.MozChunkedArrayBufferXHR=a.XHR=a.XhrTransport=void 0;var d=c(65),p=c(346),g=c(849);a.XhrTransport=function(S){return function(x){if(g.detectMozXHRSupport())return new b(x,S);if(g.detectXHROverrideMimeTypeSupport())return new y(x,S);throw new Error("This environment's XHR implementation cannot support binary transfer.")}};var y=function(){function S(x,T){this.options=x,this.init=T}return S.prototype.onProgressEvent=function(){this.options.debug&&p.debug("XHR.onProgressEvent.length: ",this.xhr.response.length);var x=this.xhr.response.substr(this.index);this.index=this.xhr.response.length;var T=E(x);this.options.onChunk(T)},S.prototype.onLoadEvent=function(){this.options.debug&&p.debug("XHR.onLoadEvent"),this.options.onEnd()},S.prototype.onStateChange=function(){this.options.debug&&p.debug("XHR.onStateChange",this.xhr.readyState),this.xhr.readyState===XMLHttpRequest.HEADERS_RECEIVED&&this.options.onHeaders(new d.Metadata(this.xhr.getAllResponseHeaders()),this.xhr.status)},S.prototype.sendMessage=function(x){this.xhr.send(x)},S.prototype.finishSend=function(){},S.prototype.start=function(x){var T=this;this.metadata=x;var O=new XMLHttpRequest;this.xhr=O,O.open("POST",this.options.url),this.configureXhr(),this.metadata.forEach(function(U,N){O.setRequestHeader(U,N.join(", "))}),O.withCredentials=!!this.init.withCredentials,O.addEventListener("readystatechange",this.onStateChange.bind(this)),O.addEventListener("progress",this.onProgressEvent.bind(this)),O.addEventListener("loadend",this.onLoadEvent.bind(this)),O.addEventListener("error",function(U){T.options.debug&&p.debug("XHR.error",U),T.options.onEnd(U.error)})},S.prototype.configureXhr=function(){this.xhr.responseType="text",this.xhr.overrideMimeType("text/plain; charset=x-user-defined")},S.prototype.cancel=function(){this.options.debug&&p.debug("XHR.abort"),this.xhr.abort()},S}();a.XHR=y;var b=function(S){function x(){return S!==null&&S.apply(this,arguments)||this}return f(x,S),x.prototype.configureXhr=function(){this.options.debug&&p.debug("MozXHR.configureXhr: setting responseType to 'moz-chunked-arraybuffer'"),this.xhr.responseType="moz-chunked-arraybuffer"},x.prototype.onProgressEvent=function(){var T=this.xhr.response;this.options.debug&&p.debug("MozXHR.onProgressEvent: ",new Uint8Array(T)),this.options.onChunk(new Uint8Array(T))},x}(y);function v(S,x){var T=S.charCodeAt(x);if(T>=55296&&T<=56319){var O=S.charCodeAt(x+1);O>=56320&&O<=57343&&(T=65536+(T-55296<<10)+(O-56320))}return T}function E(S){for(var x=new Uint8Array(S.length),T=0,O=0;O<S.length;O++){var U=String.prototype.codePointAt?S.codePointAt(O):v(S,O);x[T++]=255&U}return x}a.MozChunkedArrayBufferXHR=b,a.stringToArrayBuffer=E},849:function(i,a){var c;function u(){if(c!==void 0)return c;if(XMLHttpRequest){c=new XMLHttpRequest;try{c.open("GET","https://localhost")}catch{}}return c}function f(d){var p=u();if(!p)return!1;try{return p.responseType=d,p.responseType===d}catch{}return!1}Object.defineProperty(a,"__esModule",{value:!0}),a.detectXHROverrideMimeTypeSupport=a.detectMozXHRSupport=a.xhrSupportsResponseType=void 0,a.xhrSupportsResponseType=f,a.detectMozXHRSupport=function(){return typeof XMLHttpRequest<"u"&&f("moz-chunked-arraybuffer")},a.detectXHROverrideMimeTypeSupport=function(){return typeof XMLHttpRequest<"u"&&XMLHttpRequest.prototype.hasOwnProperty("overrideMimeType")}},540:function(i,a,c){Object.defineProperty(a,"__esModule",{value:!0}),a.WebsocketTransport=void 0;var u,f=c(346),d=c(617);(function(g){g[g.FINISH_SEND=1]="FINISH_SEND"})(u||(u={}));var p=new Uint8Array([1]);a.WebsocketTransport=function(){return function(g){return function(y){y.debug&&f.debug("websocketRequest",y);var b,v=function(x){if(x.substr(0,8)==="https://")return"wss://"+x.substr(8);if(x.substr(0,7)==="http://")return"ws://"+x.substr(7);throw new Error("Websocket transport constructed with non-https:// or http:// host.")}(y.url),E=[];function S(x){if(x===u.FINISH_SEND)b.send(p);else{var T=x,O=new Int8Array(T.byteLength+1);O.set(new Uint8Array([0])),O.set(T,1),b.send(O)}}return{sendMessage:function(x){b&&b.readyState!==b.CONNECTING?S(x):E.push(x)},finishSend:function(){b&&b.readyState!==b.CONNECTING?S(u.FINISH_SEND):E.push(u.FINISH_SEND)},start:function(x){(b=new WebSocket(v,["grpc-websockets"])).binaryType="arraybuffer",b.onopen=function(){var T;y.debug&&f.debug("websocketRequest.onopen"),b.send((T="",x.forEach(function(O,U){T+=O+": "+U.join(", ")+`\r
`}),d.encodeASCII(T))),E.forEach(function(O){S(O)})},b.onclose=function(T){y.debug&&f.debug("websocketRequest.onclose",T),y.onEnd()},b.onerror=function(T){y.debug&&f.debug("websocketRequest.onerror",T)},b.onmessage=function(T){y.onChunk(new Uint8Array(T.data))}},cancel:function(){y.debug&&f.debug("websocket.abort"),b.close()}}}(g)}}},35:function(i,a,c){Object.defineProperty(a,"__esModule",{value:!0}),a.unary=void 0;var u=c(65),f=c(934);a.unary=function(d,p){if(d.responseStream)throw new Error(".unary cannot be used with server-streaming methods. Use .invoke or .client instead.");if(d.requestStream)throw new Error(".unary cannot be used with client-streaming methods. Use .client instead.");var g=null,y=null,b=f.client(d,{host:p.host,transport:p.transport,debug:p.debug});return b.onHeaders(function(v){g=v}),b.onMessage(function(v){y=v}),b.onEnd(function(v,E,S){p.onEnd({status:v,statusMessage:E,headers:g||new u.Metadata,message:y,trailers:S})}),b.start(p.metadata),b.send(p.request),b.finishSend(),{close:function(){b.close()}}}},882:function(i,a){Object.defineProperty(a,"__esModule",{value:!0}),a.frameRequest=void 0,a.frameRequest=function(c){var u=c.serializeBinary(),f=new ArrayBuffer(u.byteLength+5);return new DataView(f,1,4).setUint32(0,u.length,!1),new Uint8Array(f,5).set(u),new Uint8Array(f)}}},r={},function i(a){if(r[a])return r[a].exports;var c=r[a]={exports:{}};return n[a].call(c.exports,c,c.exports,i),c.exports}(607);var n,r})}(Ph)),Ph.exports}var x5=_5(),$_=/^[0-9]+$/,A5=function(t,n){var r=$_.test(t),i=$_.test(n);return r&&i&&(t=+t,n=+n),t===n?0:r&&!i?-1:i&&!r?1:t<n?-1:1},U_=/^(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)(?:-((?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$/,R5=function(t,n){if(typeof t!="string"||typeof n!="string")throw new Error("Invalid input");var r=t.match(U_),i=n.match(U_);if(!r||!i)throw new Error("Invalid input");for(var a=1;a<=3;a++){if(parseInt(r[a])>parseInt(i[a]))return 1;if(parseInt(r[a])<parseInt(i[a]))return-1}if(r[4]&&i[4])for(var c=(r[4]||"").split("."),u=(i[4]||"").split("."),f=0;f<Math.max(c.length,u.length);f++){if(c[f]===void 0)return-1;if(u[f]===void 0)return 1;var d=A5(c[f],u[f]);if(d!==0)return d}return 0};const zv="1.20.0",Rp=e=>t=>typeof t===e,as=e=>e!=null,O5=Rp("object"),Fc=Rp("string"),_3=Rp("function"),T5=Rp("number");function x3(e){return _3(e)?e(S3,TP):[]}async function A3(e,t){de(as(t),`${e}(opts) -- opts is required`),de(O5(t),`${e}(opts) -- opts must be an object`),de(!(t.cadence&&t.template),`${e}({ template, cadence }) -- cannot pass both cadence and template`),de(as(t.cadence||t?.template),`${e}({ cadence }) -- cadence is required`),de(Fc(t.cadence)||t?.template,`${e}({ cadence }) -- cadence must be a string`),de(await Ae().get("accessNode.api"),`${e}(opts) -- Required value for "accessNode.api" not defined in config. See: https://github.com/onflow/flow-js-sdk/blob/master/packages/fcl/src/exec/query.md#configuration`)}async function D5(e){return A3("mutate",e)}async function C5(e){return A3("query",e)}async function B_(e){let{url:t}=e;de(typeof t<"u","retrieve({ url }) -- url must be defined");let n;try{n=await CT(t)}catch{throw new Error("httpDocumentResolver Error: Failed to retrieve document.")}return n.ok?await n.json():null}const P_=new Map([["http",B_],["https",B_]]);async function I5(e){let{url:t}=e;de(typeof t<"u","retrieve({ url }) -- url must be defined"),de(typeof t=="string","retrieve({ url }) -- url must be a string");const n=await Ae().where(/^document\.resolver\./);Object.keys(n).map(u=>{const f=n[u],d=u.replace(/^document\.resolver\./,"");P_.set(d,f)});const r=/^(.*):\/\/([A-Za-z0-9\-\.]+)(:[0-9]+)?(.*)$/.exec(t);de(r,"Failed to parse URL");const i=r[1];de(r,"Failed to parse URL protocol");const a=P_.get(i);return de(a,`No resolver found for protcol=${i}`),await a({url:t})}async function N5(e){let{network:t,template:n}=e;return de(n.f_version==="1.0.0","deriveCadenceByNetwork100({ template }) -- template must be version 1.0.0"),Object.keys(n?.data?.dependencies).map(i=>{const a=Object.values(n?.data?.dependencies?.[i]);de(a!==void 0,`deriveCadenceByNetwork100 -- Could not find contracts for dependency placeholder: ${i}`),de(a.length>0,`deriveCadenceByNetwork100 -- Could not find contracts for dependency placeholder: ${i}`);const u=a[0]?.[t];return de(u,`deriveCadenceByNetwork100 -- Could not find ${t} network information for dependency: ${i}`),[i,u?.address]}).reduce((i,a)=>{let[c,u]=a;const f=new RegExp("(\\b"+c+"\\b)","g");return i.replace(f,u)},n.data.cadence)}function $5(e){let{cadence:t,networkDependencies:n}=e;return Object.keys(n).reduce((r,i)=>{const a=n[i],c=new RegExp(`import "\\b${i}\\b"`,"g");return r.replace(c,`import ${i} from ${a}`)},t)}async function U5(e){let{network:t,template:n}=e;de(n.f_version==="1.1.0","deriveCadenceByNetwork110({ template }) -- template must be version 1.0.0");const r={};return n?.data?.dependencies.forEach(i=>{i.contracts.forEach(a=>{const c=a.contract;a.networks.forEach(u=>{u.network===t&&(r[c]=u.address)}),de(r[c]!==void 0,`deriveCadenceByNetwork110 -- Could not find contracts Network Address: ${t} ${c}`)})}),de(Object.keys(r).length===n?.data?.dependencies.length,`deriveCadenceByNetwork110 -- Could not find contracts for import dependencies: ${r}`),de(Object.keys(r).length===Object.values(r).length,`deriveCadenceByNetwork110 -- Could not find all addresses for network ${t} dependencies:  ${r}`),de(n?.data?.cadence?.body,`no cadence found -- Could not replace import dependencies: ${r}`),$5({cadence:n?.data?.cadence?.body,networkDependencies:r})}async function B5(e){let{network:t,template:n}=e;switch(de(t!=null,"deriveCadenceByNetwork({ network }) -- network must be defined"),de(typeof t=="string","deriveCadenceByNetwork({ network }) -- network must be a string"),de(n!=null,"deriveCadenceByNetwork({ template }) -- template must be defined"),de(typeof n=="object","deriveCadenceByNetwork({ template }) -- template must be an object"),de(n.f_type==="InteractionTemplate","deriveCadenceByNetwork({ template }) -- template must be an InteractionTemplate"),n.f_version){case"1.1.0":return await U5({network:t,template:n});case"1.0.0":return await N5({network:t,template:n});default:throw new Error("deriveCadenceByNetwork Error: Unsupported template version")}}async function P5(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(await xp([g5()],e).then(Ap)).chainId}let hc={},k_=!1;async function ba(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=await Ae.get("flow.network"),n=await Ae.get("env");n&&!k_&&(He.deprecate({pkg:"FCL",subject:'Using the "env" configuration key for specifying the flow network',message:"Configuring to specify flow network is no longer required",transition:"https://github.com/onflow/flow-js-sdk/blob/master/packages/fcl/TRANSITIONS.md#0001-deprecate-env-config-key"}),k_=!0);const r=e.node||await Ae.get("accessNode.api");if(!r){if(t)return t;if(n)return n;throw new Error('Either the "accessNode.api" config key or opts.node must be set')}if(hc[r])try{return await hc[r]}catch{}hc[r]||(hc[r]=P5(e).catch(i=>{throw hc[r]=null,i}));try{return await hc[r]}catch(i){if(t)return t;if(n)return n;throw new Error(`Error getting chainId from access node - are you using the correct access node endpoint.  If running locally, is your emulator up-to-date? ${i.message}`)}}function k5(){return Ae.subscribe(()=>{ba({enableRequestLogging:!1}).catch(()=>{})})}async function R3(e){Fc(e?.template)&&(e.template=await I5({url:e?.template}));const t=e.cadence||await B5({template:e.template,network:await ba(e)});return e.cadence=t,e}async function M5(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return await C5(e),e=await R3(e),xp([b5(e.cadence),E3(x3(e.args||[])),d5(e.isSealed??!1),e.limit&&typeof e.limit=="number"&&w3(e.limit)])}async function L5(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return M5(e).then(Ap)}const yr={"HTTP/RPC":"HTTP/RPC","HTTP/POST":"HTTP/POST","IFRAME/RPC":"IFRAME/RPC","POP/RPC":"POP/RPC","TAB/RPC":"TAB/RPC","EXT/RPC":"EXT/RPC","DEEPLINK/RPC":"DEEPLINK/RPC"},j5=globalThis.URL;let qv=class extends j5{constructor(t,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];super(t,n,...i)}};const rl={f_type:"Service",f_vsn:"1.0.0"},O3={f_type:"Identity",f_vsn:"1.0.0"},z5={f_type:"USER",f_vsn:"1.0.0"},q5={f_type:"PollingResponse",f_vsn:"1.0.0"},H5={f_type:"CompositeSignature",f_vsn:"1.0.0"},F5="USER_SIGNATURE",V5=e=>{if(e.appIdentifier){const{appIdentifier:t,address:n,nonce:r,signatures:i}=e;return de(Fc(t),"verifyAccountProof({ appIdentifier }) -- appIdentifier must be a string"),de(Fc(n)&&zt(n).length===16,"verifyAccountProof({ address }) -- address must be a valid address"),de(/^[0-9a-f]+$/i.test(r),"nonce must be a hex string"),de(Array.isArray(i)&&i.every((a,c,u)=>a.f_type==="CompositeSignature"),"Must include an Array of CompositeSignatures to verify"),de(i.map(a=>a.addr).every((a,c,u)=>a===u[0]),"User signatures to be verified must be from a single account address"),!0}else{const{message:t,address:n,compSigs:r}=e;return de(/^[0-9a-f]+$/i.test(t),"Signed message must be a hex string"),de(Fc(n)&&zt(n).length===16,"verifyUserSignatures({ address }) -- address must be a valid address"),de(Array.isArray(r)&&r.every((i,a,c)=>i.f_type==="CompositeSignature"),"Must include an Array of CompositeSignatures to verify"),de(r.map(i=>i.addr).every((i,a,c)=>i===c[0]),"User signatures to be verified must be from a single account address"),!0}},G5=async(e,t)=>{const n="verifyUserSignatures";let r=await ba(t);const i={testnet:"0x74daa6f9c7ef24b1",mainnet:"0xb4b82a1c9d21d284",previewnet:"0x40b5b8b2ce81ea4a"},a=t.fclCryptoContract||i[r];return de(a,`${n}({ fclCryptoContract }) -- FCLCrypto contract address is unknown for network: ${r}. Please manually specify the FCLCrypto contract address.`),`
      import FCLCrypto from ${a}

      access(all) fun main(
          address: Address, 
          message: String, 
          keyIndices: [Int], 
          signatures: [String]
      ): Bool {
        return FCLCrypto.${n}(address: address, message: message, keyIndices: keyIndices, signatures: signatures)
      }
    `};async function K5(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const r=Un(t[0].addr);V5({message:e,address:r,compSigs:t});let i=[],a=[];for(const c of t)i.push(c.signature),a.push(c.keyId.toString());return L5({cadence:await G5(F5,n),args:(c,u)=>[c(r,u.Address),c(e,u.String),c(a,u.Array(u.Int)),c(i,u.Array(u.String))]})}He.deprecate({pkg:"FCL",subject:"fcl.verifyUserSignatures()",message:"Please use fcl.AppUtils.verifyUserSignatures()",callback:function(t,n){return K5(t,n)}});const W5=/\[Error Code: (\d+)\]/;class Op extends Error{constructor(t,n){super(t),this.code=n,this.type=ZS[n]}static fromErrorMessage(t){const n=t.match(W5),r=n?parseInt(n[1],10):void 0;return new Op(t,r||ZS.UNKNOWN_ERROR)}}async function M_(e){return Object.fromEntries(Object.entries(await Ae().where(e)).map(t=>{let[n,r]=t;return[n.replace(e,""),r]}))}const T3=e=>e.status===5,uo=e=>e.status>=4,Tp=e=>e.status>=3,Dp=e=>e.status>=2,D3=e=>e.status>=1,Y5=e=>e.status>=0,C3=(e,t)=>{if(e===t)return!0;if(typeof e!="object"||typeof t!="object"||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!C3(e[n],t[n]))return!1;return!0},lb=(e,t)=>!C3(e,t),Qh=e=>{if(typeof e=="object"&&(e=e.transactionId),e==null)throw new Error("transactionId required");return e},I3=/^[0-9a-fA-F]{64}$/,Hy="POLL",L_="TIMEOUT",X5=async e=>xp([p5(e)]).then(Ap),Z5=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return{[nf]:async t=>{setTimeout(()=>t.sendSelf(L_),e.txNotFoundTimeout),t.sendSelf(Hy)},[nl]:(t,n)=>{t.subscribe(n.from),t.send(n.from,rb,t.all())},[ia]:(t,n)=>{t.unsubscribe(n.from)},[dT]:async(t,n)=>{n.reply(t.all())},[L_]:async t=>{Object.keys(t.all()).length===0&&t.fatalError(new Error(`TX status polling failed: no transaction was found within timeout interval (${e.txNotFoundTimeout}ms)`))},[Hy]:async t=>{const n=()=>setTimeout(()=>t.sendSelf(Hy),e.pollRate);let r;const i=t.all();try{r=await X5(t.self())}catch(a){const c=a instanceof Uh&&a.statusCode===404,u=a.code===x5.grpc.Code.NotFound;return c||u?n():t.fatalError(a)}uo(r)||n(),lb(i,r)&&t.broadcast(rb,r),t.merge(r)}}},j_=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return t=>ya(Z5(e),Qh(t))};function va(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{txNotFoundTimeout:12500,pollRate:1e3};if(!I3.test(Qh(e)))throw new Error("Invalid transactionId");function n(){return hT(e,j_(t))}function r(a){return xv(Qh(e),j_(t),a)}function i(a){return function(){const f=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}).suppress||!1;return new Promise((d,p)=>{const g=r((y,b)=>{if((b||y.statusCode)&&!f){if(b!=null)p(b),g();else if(y.statusCode===1){const v=Op.fromErrorMessage(y.errorMessage);p(v),g()}return}a(y)&&(d(y),g())})})}}return{snapshot:n,subscribe:r,onceFinalized:i(Dp),onceExecuted:i(Tp),onceSealed:i(uo)}}va.isUnknown=Y5;va.isPending=D3;va.isFinalized=Dp;va.isExecuted=Tp;va.isSealed=uo;va.isExpired=T3;const Q5="local",z_=new Map;function wa(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{txNotFoundTimeout:12500,pollRate:1e3};if(!I3.test(Qh(e)))throw new Error("Invalid transactionId");function n(){let c=z_.get(e);return c||(c=J5(e,t),z_.set(e,c)),c}function r(){return Promise.resolve(n().value)}function i(c,u){const f=n(),{unsubscribe:d}=f.subscribe(c,u);return()=>d()}function a(c){return function(){const d=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{suppress:!1}).suppress||!1;return new Promise((p,g)=>{const y=i(b=>{if(b.statusCode===1){const v=Op.fromErrorMessage(b.errorMessage);g(v),y()}else c(b)&&(p(b),y())},b=>{d||(g(b),y())})})}}return{snapshot:r,subscribe:i,onceFinalized:a(Dp),onceExecuted:a(Tp),onceSealed:a(uo)}}wa.isUnknown=n3;wa.isPending=D3;wa.isFinalized=Dp;wa.isExecuted=Tp;wa.isSealed=uo;wa.isExpired=T3;function J5(e,t){const n=new Set;let r={blockId:"",status:uU.UNKNOWN,statusCode:0,errorMessage:"",events:[],statusString:""};i().catch(f);async function i(){await ba()===Q5?(console.warn("Events are not supported on the Flow emulator, falling back to legacy polling."),c()):a()}function a(){const d=u5({topic:ma.TRANSACTION_STATUSES,args:{transactionId:e},onData:p=>{lb(r,p)&&(r=p,u(p)),uo(p)&&new Promise(g=>setTimeout(g,0)).then(()=>{uo(p)&&d.unsubscribe()})},onError:p=>{p instanceof b3?(console.warn("Failed to subscribe to transaction status updates using real-time streaming (are you using the deprecated GRPC transport?), falling back to polling."),c()):f(p)}})}function c(){const d=va(e,t).subscribe((p,g)=>{g?f(g):p&&lb(r,p)&&(r=p,u(p),uo(p)&&new Promise(y=>setTimeout(y,0)).then(()=>{d()}))})}function u(d){for(const p of n)try{p.onData(d)}catch(g){console.error("Error in transaction observer",g)}}function f(d){for(const p of n)try{p.onError(d)}catch(g){console.error("Error in transaction observer",g)}}return{subscribe(d,p){const g={onData:d,onError:p||(()=>{})};return n.add(g),d(r),{unsubscribe:()=>n.delete(g)}},get value(){return r}}}const pc=()=>{throw new Error("Platform specific Core Strategies are not initialized")},eM={[yr["EXT/RPC"]]:pc,[yr["HTTP/POST"]]:pc,[yr["IFRAME/RPC"]]:pc,[yr["POP/RPC"]]:pc,[yr["TAB/RPC"]]:pc,[yr["EXT/RPC"]]:pc},tM=["ServicePlugin"],nM=["discovery-service"],rM=e=>{const{services:t=[],serviceStrategy:n}=e;de(Array.isArray(t),"Services must be an array");for(const r of t)de(as(r.f_type)&&r.f_type==="Service","Service is required"),de(as(r.type)&&r.type==="authn",`Service must be type authn. Received ${r.type}`),de(r.method in yr||n.method===r.method,`Service method ${r.method} is not supported`);return de(as(n),"Service strategy is required"),de(as(n.method)&&Fc(n.method),"Service strategy method is required"),de(as(n.exec)&&_3(n.exec),"Service strategy exec function is required"),{discoveryServices:t,serviceStrategy:n}},iM=e=>{let{coreStrategies:t}=e,n=new Set,r=new Map(Object.entries(t));const i=d=>{if(de(nM.includes(d.type),`Service Plugin type ${d.type} is not supported`),d.type==="discovery-service"){const{discoveryServices:p,serviceStrategy:g}=rM(d);a(p),r.has(g.method)?He({title:"Add Service Plugin",message:`Service strategy for ${g.method} already exists`,level:ht.warn}):r.set(g.method,g.exec)}},a=d=>n=new Set([...d]);return Object.freeze({add:i,getServices:()=>[...n],getStrategy:d=>r.get(d),getStrategies:()=>[...r.keys()]})},sM=e=>{let t;de(!!e,"No plugins supplied"),Array.isArray(e)?t=[...e]:t=[e];for(const n of t)de(as(n.name),"Plugin name is required"),de(as(n.f_type),"Plugin f_type is required"),de(tM.includes(n.f_type),`Plugin type ${n.f_type} is not supported`);return t},oM=()=>{const e=new Map;return Object.freeze({add:r=>{const i=sM(r);for(const a of i)e.set(a.name,a),a.f_type==="ServicePlugin"&&sf.add(a)},getPlugins:()=>e})};let sf;const N3=()=>typeof sf<"u",$3=e=>{let{coreStrategies:t}=e;if(N3())return sf;const n=iM({coreStrategies:t});return sf=n,n},Af=()=>N3()?sf:(console.warn("Registry is not initalized, it will be initialized with stub core strategies"),$3({coreStrategies:eM})),ub=oM(),U3=async()=>[...window?.fcl_extensions||[],...Af().getServices()];async function aM(e){const t=await Ae.get("discovery.authn.include",[]),n=await Ae.get("discovery.authn.exclude",[]),r=await Ae.get("discovery.features.suggested",[]),i=await Ae.first(["discovery.wallet.method","discovery.wallet.method.default"]),a=e?.method?e.method:i,c=e?.endpoint??await Ae.first(["discovery.wallet","challenge.handshake"]);return de(c,`
    If no service is passed to "authenticate," then "discovery.wallet" must be defined in fcl config.
    See: "https://docs.onflow.org/fcl/reference/api/#setting-configuration-values"
    `),{...e,type:"authn",endpoint:c,method:a,discoveryAuthnInclude:t,discoveryAuthnExclude:n,discoveryFeaturesSuggested:r}}async function cM(e){let{types:t}=e;const n=await Ae.get("discovery.authn.endpoint");de(!!n,'"discovery.authn.endpoint" in config must be defined.');const r=await Ae.get("discovery.authn.include",[]),i=await Ae.get("discovery.authn.exclude",[]),a=new qv(n);return fetch(a,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:t,fclVersion:zv,include:r,exclude:i,features:{suggested:await Ae.get("discovery.features.suggested",[])},clientServices:await U3(),supportedStrategies:Af().getStrategies(),userAgent:window?.navigator?.userAgent,network:await ba()})}).then(c=>c.json())}const _i={AUTHN:"authn",RESULTS:"results",SNAPSHOT:"SNAPSHOT",UPDATED:"UPDATED",UPDATE_RESULTS:"UPDATE_RESULTS"},lM=(e,t)=>{e&&console.warn(`
      %cFCL Warning
      ============================
      ${t}
      For more info, please see the docs: https://docs.onflow.org/fcl/
      ============================
      `,"font-weight:bold;font-family:monospace;")},fb=async()=>{try{const e=await cM({types:[_i.AUTHN]});Zt(_i.AUTHN,_i.UPDATE_RESULTS,{results:e})}catch(e){He({title:`${e.name} Error fetching Discovery API services.`,message:e.message,level:ht.error})}},uM={[nf]:async e=>{lM(typeof window>"u",'"fcl.discovery" is only available in the browser.'),document.readyState==="complete"?fb():window.addEventListener("load",()=>{fb()})},[_i.UPDATE_RESULTS]:(e,t,n)=>{e.merge(n),e.broadcast(_i.UPDATED,{...e.all()})},[nl]:(e,t)=>{e.subscribe(t.from),e.send(t.from,_i.UPDATED,{...e.all()})},[ia]:(e,t)=>e.unsubscribe(t.from),[_i.SNAPSHOT]:async(e,t)=>t.reply({...e.all()})},q_=()=>ya(uM,_i.AUTHN),fM={subscribe:e=>xv(_i.AUTHN,q_,e),snapshot:()=>hT(_i.AUTHN,q_),update:()=>{document.readyState==="complete"&&fb()}},B3={authn:fM};async function dM(e,t){if(e==null||t==null)return[];const n=new qv(e);n.searchParams.append("code",t);const r=await fetch(n,{method:"GET",headers:{"Content-Type":"application/json"}}).then(a=>a.json());if(Array.isArray(r))return r;const i=[];if(Array.isArray(r.authorizations))for(let a of r.authorizations)i.push({type:"authz",keyId:r.keyId,...a});return r.provider!=null&&i.push({type:"authn",id:"wallet-provider#authn",...r.provider}),i}function hM(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return[...e,...t]}function pM(e){if(e==null)return null;if(!e.f_vsn)return{...rl,type:e.type,uid:e.id,endpoint:e.authn,id:e.pid,provider:{address:Un(e.addr),name:e.name,icon:e.icon}};switch(e.f_vsn){case"1.0.0":return e;default:return null}}function gM(e){if(e==null)return null;if(!e.f_vsn)return{...rl,type:e.type,uid:e.id,endpoint:e.endpoint,method:e.method,identity:{...O3,address:Un(e.addr),keyId:e.keyId},params:e.params,data:e.data};switch(e.f_vsn){case"1.0.0":return e;default:return null}}function mM(e){if(e==null)return null;if(!e.f_vsn)return{...rl,type:e.type,uid:e.id,endpoint:e.endpoint,method:e.method,identity:{...O3,address:Un(e.addr),keyId:e.keyId},params:e.params,data:e.data};switch(e.f_vsn){case"1.0.0":return e;default:return null}}function P3(e){if(e==null)return null;if(!e.f_vsn)return{old:e,...rl,type:"frame",endpoint:e.endpoint,params:e.params||{},data:e.data||{}};switch(e.f_vsn){case"1.0.0":return e;default:return null}}function k3(e){if(e==null)return null;if(!e.f_vsn)return{...rl,type:"back-channel-rpc",endpoint:e.endpoint,method:e.method,params:e.params||{},data:e.data||{}};switch(e.f_vsn){case"1.0.0":return e;default:return null}}function yM(e){if(e==null)return null;switch(e.f_vsn){case"1.0.0":return e;default:return null}}function bM(e){if(e==null)return null;if(!e.f_vsn)throw new Error("Invalid user-signature service");switch(e.f_vsn){case"1.0.0":return e;default:return null}}function M3(e){if(e==null)return null;if(e.method==null&&(e={...e,type:"local-view",method:"VIEW/IFRAME"}),!e.f_vsn)return{...rl,type:e.type||"local-view",method:e.method,endpoint:e.endpoint,data:e.data||{},params:e.params||{}};switch(e.f_vsn){case"1.0.0":return e;default:return null}}function vM(e){if(e==null)return null;if(!e.f_vsn)throw new Error("FCL Normalizer Error: Invalid account-proof service");switch(e.f_vsn){case"1.0.0":return e;default:return null}}function wM(e){if(e==null)return null;if(!e.f_vsn)throw new Error("Invalid authn-refresh service");switch(e.f_vsn){case"1.0.0":return e;default:return null}}function EM(e,t){return e.map(n=>_M(n,t)).filter(Boolean)}const SM={"back-channel-rpc":k3,"pre-authz":mM,authz:gM,authn:pM,frame:P3,"open-id":yM,"user-signature":bM,"local-view":M3,"account-proof":vM,"authn-refresh":wM};function _M(e,t){try{var n=SM[e.type](e,t);return n}catch(r){return console.error(`Unrecognized FCL Service Type [${e.type}]`,e,r),e}}function of(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return e.reduce((n,r)=>r.type===t&&(!n||R5(r.f_vsn,n.f_vsn)>0)?r:n,null)}function xM(e){return Ov([e.provider?.address||e.provider?.name||"UNSPECIFIED",e.id]).toString("hex")}function AM(e){return e.addr=e.addr?Un(e.addr):null,e.paddr=e.paddr?Un(e.paddr):null,e}async function H_(e){e=AM(e);var t=EM(hM(e.services||[],await dM(e.hks,e.code)));const n=of(t,"authn");return{...z5,addr:Un(e.addr),cid:xM(n),loggedIn:!0,services:t,expiresAt:e.expires}}const RM="WC/RPC",OM=typeof window>"u";function TM(){if(OM)return;Af().getStrategies().includes(RM)||He({title:"FCL WalletConnect Service Plugin",level:ht.error,message:"All dApps are expected to register for a WalletConnect projectId & add this to their FCL configuration.  If you do not do so, users will be unable to use certain wallets to interact with your dApp.  See https://developers.flow.com/tools/clients/fcl-js/configure-fcl for more information."})}const DM=globalThis.AbortController||require("abort-controller"),Cp=async e=>{let{service:t,body:n,config:r,abortSignal:i,customRpc:a,user:c,opts:u}=e;return Af().getStrategy(t.method)({service:t,body:n,config:r,abortSignal:i,customRpc:a,opts:u,user:c})};async function aa(e){let{service:t,msg:n={},config:r={},opts:i={},platform:a,abortSignal:c=new DM().signal,execStrategy:u,user:f}=e;TM(),n.data=t.data;const d={services:await M_(/^service\./),app:await M_(/^app\.detail\./),client:{...r.client,platform:a,fclVersion:zv,fclLibrary:"https://github.com/onflow/fcl-js",hostname:window?.location?.hostname??null,network:await ba(i)}};try{const p=await(u||Cp)({service:t,body:n,config:d,opts:i,user:f,abortSignal:c});return p.status==="REDIRECT"?(de(t.type===p.data.type,"Cannot shift recursive service type in execService"),await aa({service:p.data,msg:n,config:d,opts:i,abortSignal:c,platform:a,user:f})):p}catch(p){throw He({title:`Error on execService ${t?.type}`,message:p,level:ht.error}),p}}function db(e){if(e==null)return null;if(!e.f_vsn)return{...H5,addr:zt(e.addr||e.address),signature:e.signature||e.sig,keyId:e.keyId};switch(e.f_vsn){case"1.0.0":return e;default:return null}}const CM=e=>typeof e=="function",si="CURRENT_USER",Fy="CURRENT_USER/UPDATED",L3="SNAPSHOT",hb="SET_CURRENT_USER",j3="DEL_CURRENT_USER",pb=`{
  "f_type": "User",
  "f_vsn": "1.0.0",
  "addr":null,
  "cid":null,
  "loggedIn":null,
  "expiresAt":null,
  "services":[]
}`,IM=async e=>{const t=JSON.parse(pb),n=await e.get(si);return n!=null&&t.f_vsn!==n.f_vsn?(e.removeItem(si),t):n||t},NM=e=>{const t=async()=>e.getStorageProvider?await e.getStorageProvider():await Ae.first(["fcl.storage","fcl.storage.default"]);return{[nf]:async n=>{typeof window>"u"&&console.warn(`
        %cFCL Warning
        ============================
        "currentUser" is only available in the browser.
        For more info, please see the docs: https://docs.onflow.org/fcl/
        ============================
        `,"font-weight:bold;font-family:monospace;"),n.merge(JSON.parse(pb));const r=await t();if(r.can){const i=await IM(r);$M(i)&&n.merge(i)}},[nl]:(n,r)=>{n.subscribe(r.from),n.send(r.from,Fy,{...n.all()})},[ia]:(n,r)=>{n.unsubscribe(r.from)},[L3]:async(n,r)=>{r.reply({...n.all()})},[hb]:async(n,r,i)=>{n.merge(i);const a=await t();a.can&&a.put(si,n.all()),n.broadcast(Fy,{...n.all()})},[j3]:async(n,r)=>{n.merge(JSON.parse(pb));const i=await t();i.can&&i.put(si,n.all()),n.broadcast(Fy,{...n.all()})}}},il=e=>ya(NM(e),si);function $M(e){return e.expiresAt==null||e.expiresAt===0||e.expiresAt>Date.now()}async function UM(){let e=await Ae.get("fcl.accountProof.resolver");if(e==null)return;if(!CM(e)){He({title:"Account Proof Data Resolver must be a function",message:`Check fcl.accountProof.resolver configuration.
                Expected: fcl.accountProof.resolver: async () => { ... }
                Received: fcl.accountProof.resolver: ${typeof e}
                `,level:ht.warn});return}const t={...await e()},n=window?.location?.origin;return t.appIdentifier?n&&(He.deprecate({pkg:"FCL",subject:"appIdentifier in fcl.accountProof.resolver",message:"Manually set app identifiers in the account proof resolver function are now deprecated.  These are now automatically set to the application origin URL by FCL",transition:"https://github.com/onflow/flow-js-sdk/blob/master/packages/fcl/TRANSITIONS.md#0002-deprecate-appIdentifier-field-in-account-proof-resolver"}),de(typeof t.appIdentifier=="string","appIdentifier must be a string")):(de(n,"The appIdentifier (origin) could not be inferred from the window.location.origin.  Please set the appIdentifier manually in the fcl.accountProof.resolver function."),t.appIdentifier=n),de(/^[0-9a-f]+$/i.test(t.nonce),"Nonce must be a hex string"),t}const BM=async e=>{let{discoveryAuthnInclude:t,discoveryAuthnExclude:n,discoveryFeaturesSuggested:r}=e;return{client:{discoveryAuthnInclude:t,discoveryAuthnExclude:n,discoveryFeaturesSuggested:r,clientServices:await U3(),supportedStrategies:Af().getStrategies()}}},Ip=e=>async function(){let{service:t,redir:n=!1,forceReauth:r=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(t&&!t?.provider?.is_installed&&t?.provider?.requires_install){window.location.href=t?.provider?.install_link;return}return new Promise(async(i,a)=>{il(e);const c={redir:n},u=await kh(e)(),f=of(u.services,"authn-refresh");let d;if(u.loggedIn&&!r)if(f)try{const p=await aa({service:f,msg:d,opts:c,platform:e.platform,user:u});Zt(si,hb,await H_(p))}catch(p){He({title:`${p.name} Could not refresh wallet authentication.`,message:p.message,level:ht.error})}finally{return i(await kh(e)())}else return i(u);try{d=await UM()}catch(p){return He({title:`${p.name} On Authentication: Could not resolve account proof data.`,message:p.message,level:ht.error}),a(p)}try{const p=await aM(t),g=await aa({service:p,msg:d,config:await BM(p),opts:c,platform:e.platform,execStrategy:e.discovery?.execStrategy,user:u});Zt(si,hb,await H_(g))}catch(p){He({title:`${p} On Authentication`,message:p,level:ht.error})}finally{i(await kh(e)())}})};function PM(e){return function(){il(e),Zt(si,j3)}}const kM=e=>({f_type:"PreAuthzResponse",f_vsn:"1.0.0",proposer:(e||{}).proposer,payer:(e||{}).payer||[],authorization:(e||{}).authorization||[]}),MM=e=>(t,n)=>{let{user:r}=n;const i=kM(t),a=[];i.proposer!=null&&a.push(["PROPOSER",i.proposer]);for(let u of i.payer||[])a.push(["PAYER",u]);for(let u of i.authorization||[])a.push(["AUTHORIZER",u]);var c=a.map(u=>{let[f,d]=u;return{tempId:[d.identity.address,d.identity.keyId].join("|"),addr:d.identity.address,keyId:d.identity.keyId,signingFunction(p){return aa({service:d,msg:p,platform:e.platform,user:r})},role:{proposer:f==="PROPOSER",payer:f==="PAYER",authorizer:f==="AUTHORIZER"}}});return c},LM=e=>async t=>(il(e),{...t,tempId:"CURRENT_USER",async resolve(n,r){const i=await Ip(e)({redir:!0}),a=of(i.services,"authz"),c=of(i.services,"pre-authz");if(c)return MM(e)(await aa({service:c,msg:r,platform:e.platform,user:i}),{user:i});if(a)return{...n,tempId:"CURRENT_USER",resolve:null,addr:zt(a.identity.address),keyId:a.identity.keyId,sequenceNum:null,signature:null,async signingFunction(u){return db(await aa({service:a,msg:u,opts:{includeOlderJsonRpcCall:!0},platform:e.platform,user:i}))}};throw new Error("No Authz or PreAuthz Service configured for CURRENT_USER")}});function jM(e){return function(n){il(e);const r="@EXIT",i=ya(async a=>{for(a.send(si,nl);;){const c=await a.receive();if(c.tag===r){a.send(si,ia);return}n(c.data)}});return()=>Zt(i,r)}}function kh(e){return function(){return il(e),Zt(si,L3,null,{expectReply:!0,timeout:0})}}const zM=e=>async()=>{const{addr:t}=await Ip(e)();return S3(Un(t),zT)},qM=e=>(de(/^[0-9a-f]+$/i.test(e),"Message must be a hex string"),{message:e}),HM=e=>async t=>{il(e);const n=await Ip(e)({redir:!0}),r=of(n.services,"user-signature");de(r,"Current user must have authorized a signing service.");try{const i=await aa({service:r,msg:qM(t),platform:e.platform,user:n});return Array.isArray(i)?i.map(a=>db(a)):[db(i)]}catch(i){return i}},z3=e=>{const t={authenticate:Ip(e),unauthenticate:PM(e),authorization:LM(e),signUserMessage:HM(e),subscribe:jM(e),snapshot:kh(e),resolveArgument:zM(e)};return Object.assign(()=>({...t}),{...t})},FM=e=>async function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};var r;try{await D5(n),n=await R3(n);const i=typeof e=="function"?e:z3(e),a=await Ae().get("fcl.authz",i().authorization);return r=xp([E5(n.cadence),E3(x3(n.args||[])),n.limit&&T5(n.limit)&&w3(n.limit),m5(n.proposer||n.authz||a),y5(n.payer||n.authz||a),h5(n.authorizations||[n.authz||a])]).then(Ap),r}catch(i){throw i}};function Rf(e){const t=new qv(e.endpoint);if(window?.location?.origin&&t.searchParams.append("l6n",window.location.origin),e.params!=null)for(let[n,r]of Object.entries(e.params||{}))t.searchParams.append(n,r);return t}function q3(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=t.method||"POST",r=n==="GET"?void 0:JSON.stringify(t.data||e.data||{});return fetch(Rf(e),{method:n,headers:{...e.headers||{},...t.headers||{},"Content-Type":"application/json"},body:r}).then(i=>i.json())}function Ii(e){if(e==null)return null;if(!e.f_vsn)return{...q5,status:e.status??"APPROVED",reason:e.reason??null,data:e.compositeSignature||e.data||{...e},updates:k3(e.authorizationUpdates),local:P3((e.local||[])[0])};switch(e.f_vsn){case"1.0.0":return e;default:return null}}const F_={"HTTP/GET":"GET","HTTP/POST":"POST"},VM=e=>(de(F_[e.method],"Invalid Service Method for type back-channel-rpc",{service:e}),F_[e.method]);async function gb(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:()=>!0;if(de(e,"Missing Polling Service",{service:e}),!t())throw new Error("Externally Halted");let r;try{if(typeof document<"u"&&document.visibilityState==="hidden")return await new Promise(i=>setTimeout(i,500)),gb(e,t);r=await q3(e,{method:VM(e)}).then(Ii)}catch(i){throw i}switch(r.status){case"APPROVED":return r.data;case"DECLINED":throw new Error(`Declined: ${r.reason||"No reason supplied."}`);default:return await new Promise(i=>setTimeout(i,500)),gb(r.updates,t)}}const V_=e=>async t=>{let{service:n,body:r,config:i,opts:a}=t;const c=await q3(n,{data:{fclVersion:zv,service:{params:n.params,data:n.data,type:n.type},config:i,...r}}).then(Ii);if(c.status==="APPROVED")return c.data;if(c.status==="DECLINED")throw new Error(`Declined: ${c.reason||"No reason supplied."}`);if(c.status==="REDIRECT")return c;if(c.status==="PENDING"){var u=!0,f=!0;const[d,p]=await e(M3(c.local),{serviceEndpoint:Rf,onClose:()=>f=!1}),g=()=>{try{p(),f=!1}catch(b){console.error("Frame Close Error",b)}},y=()=>{const b=u;return u=f,b};return gb(c.updates,y).then(b=>(g(),b)).catch(b=>{throw console.error(b),g(),b})}else throw console.error("Auto Decline: Invalid Response",{service:n,resp:c}),new Error("Auto Decline: Invalid Response")},sh="FCL:VIEW:CLOSE",Vy="FCL:VIEW:READY",Gy="FCL:VIEW:RESPONSE",GM="FCL:VIEW:CUSTOM_RPC",Ct=e=>typeof e=="string"&&e.toLowerCase(),KM=new Set(["monetizationstart","monetizationpending","monetizationprogress","monetizationstop"]),ko=(e,t)=>console.warn("DEPRECATION NOTICE",`Received ${e}, please use ${t} for this and future versions of FCL`),Np=e=>{let{close:t,send:n,onReady:r,onResponse:i,onMessage:a,onCustomRpc:c,getSource:u}=e,f;return d=>{try{f=u?.()||f}catch{f=null}try{if(typeof d.data!="object"||KM.has(d.data.type)||f!=null&&d.source!==f)return;Ct(d.data.type)===Ct(sh)&&t(),Ct(d.data.type)===Ct(Vy)&&(r(d,{send:n,close:t}),f||=d.source),Ct(d.data.type)===Ct(Gy)&&i(d,{send:n,close:t}),Ct(d.data.type)===Ct(GM)&&c(d.data.payload,{send:n,close:t}),a(d,{send:n,close:t}),Ct(d.data.type)===Ct("FCL:FRAME:READY")&&(ko(d.data.type,Vy),r(d,{send:n,close:t}),f||=d.source),Ct(d.data.type)===Ct("FCL:FRAME:RESPONSE")&&(ko(d.data.type,Gy),i(d,{send:n,close:t})),Ct(d.data.type)===Ct("FCL:FRAME:CLOSE")&&(ko(d.data.type,sh),t()),Ct(d.data.type)===Ct("FCL::CHALLENGE::RESPONSE")&&(ko(d.data.type,Gy),i(d,{send:n,close:t})),Ct(d.data.type)===Ct("FCL::AUTHZ_READY")&&(ko(d.data.type,Vy),r(d,{send:n,close:t}),f||=d.source),Ct(d.data.type)===Ct("FCL::CHALLENGE::CANCEL")&&(ko(d.data.type,sh),t()),Ct(d.data.type)===Ct("FCL::CANCEL")&&(ko(d.data.type,sh),t())}catch(p){console.error("Frame Callback Error",p),t()}}};k5();let G_=function(e){return e[e.INVALID_REQUEST=-32600]="INVALID_REQUEST",e[e.METHOD_NOT_FOUND=-32601]="METHOD_NOT_FOUND",e[e.INVALID_PARAMS=-32602]="INVALID_PARAMS",e[e.INTERNAL_ERROR=-32603]="INTERNAL_ERROR",e[e.PARSE_ERROR=-32700]="PARSE_ERROR",e}({});class K_ extends Error{constructor(t,n,r){super(n),this.code=t,this.message=n,this.data=r}}var mb=function(e){return e.HELLO="rpc_hello",e}(mb||{});class WM{id=0;setSend=()=>{};_send=new Promise(t=>{this.setSend=t});peerInfo=new Promise((t,n)=>{this.resolvePeerInfo=t,this.rejectPeerInfo=n});enabledNotifications=[];requestHandlers={};subscriptions={};messageListeners=[];constructor(t){let{notifications:n}=t;this.enabledNotifications=n||[],this.on(mb.HELLO,r=>(this.resolvePeerInfo(r),this.ownInfo()))}connect(t){let{send:n}=t;this.setSend(n),this.requestWithoutConnection(mb.HELLO,this.ownInfo()).then(r=>{this.resolvePeerInfo(r)}).catch(this.rejectPeerInfo)}ownInfo(){return{requests:Object.keys(this.requestHandlers),notifications:this.enabledNotifications}}async send(t){return(await this._send)(t)}receive(t){t?.jsonrpc==="2.0"&&("method"in t&&("id"in t?this.handleRequest(t):this.handleNotification(t)),this.messageListeners.forEach(n=>n(t)))}async handleRequest(t){const n=this.requestHandlers[t.method];if(n)try{const r=await n(t.params);this.send({jsonrpc:"2.0",id:t.id,result:r})}catch(r){r instanceof K_?this.send({jsonrpc:"2.0",id:t.id,error:{code:r.code,message:r.message,data:r.data}}):this.send({jsonrpc:"2.0",id:t.id,error:{code:G_.INTERNAL_ERROR,message:r?.message}})}else this.send({jsonrpc:"2.0",id:t.id,error:{code:G_.METHOD_NOT_FOUND,message:`Method not found: ${t.method}`}})}handleNotification(t){this.subscriptions[t.method]&&this.subscriptions[t.method].forEach(n=>n(t.params))}onMessage(t){return this.messageListeners.push(t),()=>{this.messageListeners=this.messageListeners.filter(n=>n!==t)}}async notify(t,n){await this.onceConnected(),this.send({jsonrpc:"2.0",method:t,params:n})}async request(t,n){return await this.onceConnected(),this.requestWithoutConnection(t,n)}async requestWithoutConnection(t,n){const r=this.id++;let i=()=>{};const a=new Promise((c,u)=>{i=this.onMessage(f=>{if(f.id===r&&("result"in f||"error"in f)){if(f.error){const d=new K_(f.error.code,f.error.message,f.error.data);u(d)}c(f.result)}})}).finally(i);return this.send({jsonrpc:"2.0",method:t,params:n,id:r}),a}on(t,n){this.requestHandlers[t]=n}subscribe(t,n){this.subscriptions[t]=this.subscriptions[t]||new Set,this.subscriptions[t].add(n)}unsubscribe(t,n){this.subscriptions[t]?.delete(n)}async onceConnected(){return this.peerInfo.then(()=>{})}async getAvailableRequests(){return this.peerInfo.then(t=>t.requests)}async getAvailableNotifications(){return this.peerInfo.then(t=>t.notifications)}}const YM="modulepreload",XM=function(e){return"/"+e},W_={},H3=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){let f=function(d){return Promise.all(d.map(p=>Promise.resolve(p).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),u=c?.nonce||c?.getAttribute("nonce");i=f(n.map(d=>{if(d=XM(d),d in W_)return;W_[d]=!0;const p=d.endsWith(".css"),g=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${g}`))return;const y=document.createElement("link");if(y.rel=p?"stylesheet":YM,p||(y.as="script"),y.crossOrigin="",y.href=d,u&&y.setAttribute("nonce",u),document.head.appendChild(y),p)return new Promise((b,v)=>{y.addEventListener("load",b),y.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${d}`)))})}))}function a(c){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=c,window.dispatchEvent(u),!u.defaultPrevented)throw c}return i.then(c=>{for(const u of c||[])u.status==="rejected"&&a(u.reason);return t().catch(a)})};var Y_=function(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,a;r<i;r++)(a||!(r in t))&&(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))},ZM=function(){function e(t,n,r){this.name=t,this.version=n,this.os=r,this.type="browser"}return e}(),QM=function(){function e(t){this.version=t,this.type="node",this.name="node",this.os=process.platform}return e}(),JM=function(){function e(t,n,r,i){this.name=t,this.version=n,this.os=r,this.bot=i,this.type="bot-device"}return e}(),eL=function(){function e(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return e}(),tL=function(){function e(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return e}(),nL=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,rL=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,X_=3,iL=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",nL]],Z_=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function sL(e){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new tL:typeof navigator<"u"?aL(navigator.userAgent):lL()}function oL(e){return e!==""&&iL.reduce(function(t,n){var r=n[0],i=n[1];if(t)return t;var a=i.exec(e);return!!a&&[r,a]},!1)}function aL(e){var t=oL(e);if(!t)return null;var n=t[0],r=t[1];if(n==="searchbot")return new eL;var i=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);i?i.length<X_&&(i=Y_(Y_([],i,!0),uL(X_-i.length),!0)):i=[];var a=i.join("."),c=cL(e),u=rL.exec(e);return u&&u[1]?new JM(n,a,c,u[1]):new ZM(n,a,c)}function cL(e){for(var t=0,n=Z_.length;t<n;t++){var r=Z_[t],i=r[0],a=r[1],c=a.exec(e);if(c)return i}return null}function lL(){var e=typeof process<"u"&&process.version;return e?new QM(process.version.slice(1)):null}function uL(e){for(var t=[],n=0;n<e;n++)t.push("0");return t}var Ky={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var yb=function(e,t){return yb=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},yb(e,t)};function fL(e,t){yb(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var bb=function(){return bb=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},bb.apply(this,arguments)};function dL(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function hL(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(e,t,n,r);else for(var u=e.length-1;u>=0;u--)(c=e[u])&&(a=(i<3?c(a):i>3?c(t,n,a):c(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a}function pL(e,t){return function(n,r){t(n,r,e)}}function gL(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function mL(e,t,n,r){function i(a){return a instanceof n?a:new n(function(c){c(a)})}return new(n||(n=Promise))(function(a,c){function u(p){try{d(r.next(p))}catch(g){c(g)}}function f(p){try{d(r.throw(p))}catch(g){c(g)}}function d(p){p.done?a(p.value):i(p.value).then(u,f)}d((r=r.apply(e,t||[])).next())})}function yL(e,t){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,c;return c={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function u(d){return function(p){return f([d,p])}}function f(d){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(a=d[0]&2?i.return:d[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,d[1])).done)return a;switch(i=0,a&&(d=[d[0]&2,a.value]),d[0]){case 0:case 1:a=d;break;case 4:return n.label++,{value:d[1],done:!1};case 5:n.label++,i=d[1],d=[0];continue;case 7:d=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(d[0]===6||d[0]===2)){n=0;continue}if(d[0]===3&&(!a||d[1]>a[0]&&d[1]<a[3])){n.label=d[1];break}if(d[0]===6&&n.label<a[1]){n.label=a[1],a=d;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(d);break}a[2]&&n.ops.pop(),n.trys.pop();continue}d=t.call(e,n)}catch(p){d=[6,p],i=0}finally{r=a=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}function bL(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}function vL(e,t){for(var n in e)n!=="default"&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function vb(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function F3(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,a=[],c;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(u){c={error:u}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(c)throw c.error}}return a}function wL(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(F3(arguments[t]));return e}function EL(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),i=0,t=0;t<n;t++)for(var a=arguments[t],c=0,u=a.length;c<u;c++,i++)r[i]=a[c];return r}function af(e){return this instanceof af?(this.v=e,this):new af(e)}function SL(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,a=[];return i={},c("next"),c("throw"),c("return"),i[Symbol.asyncIterator]=function(){return this},i;function c(y){r[y]&&(i[y]=function(b){return new Promise(function(v,E){a.push([y,b,v,E])>1||u(y,b)})})}function u(y,b){try{f(r[y](b))}catch(v){g(a[0][3],v)}}function f(y){y.value instanceof af?Promise.resolve(y.value.v).then(d,p):g(a[0][2],y)}function d(y){u("next",y)}function p(y){u("throw",y)}function g(y,b){y(b),a.shift(),a.length&&u(a[0][0],a[0][1])}}function _L(e){var t,n;return t={},r("next"),r("throw",function(i){throw i}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(i,a){t[i]=e[i]?function(c){return(n=!n)?{value:af(e[i](c)),done:i==="return"}:a?a(c):c}:a}}function xL(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof vb=="function"?vb(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(a){n[a]=e[a]&&function(c){return new Promise(function(u,f){c=e[a](c),i(u,f,c.done,c.value)})}}function i(a,c,u,f){Promise.resolve(f).then(function(d){a({value:d,done:u})},c)}}function AL(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function RL(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function OL(e){return e&&e.__esModule?e:{default:e}}function TL(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function DL(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n}const CL=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return bb},__asyncDelegator:_L,__asyncGenerator:SL,__asyncValues:xL,__await:af,__awaiter:mL,__classPrivateFieldGet:TL,__classPrivateFieldSet:DL,__createBinding:bL,__decorate:hL,__exportStar:vL,__extends:fL,__generator:yL,__importDefault:OL,__importStar:RL,__makeTemplateObject:AL,__metadata:gL,__param:pL,__read:F3,__rest:dL,__spread:wL,__spreadArrays:EL,__values:vb},Symbol.toStringTag,{value:"Module"})),Of=w4(CL);var Wy={},mu={},Q_;function IL(){if(Q_)return mu;Q_=1,Object.defineProperty(mu,"__esModule",{value:!0}),mu.delay=void 0;function e(t){return new Promise(n=>{setTimeout(()=>{n(!0)},t)})}return mu.delay=e,mu}var Mo={},Yy={},Lo={},J_;function NL(){return J_||(J_=1,Object.defineProperty(Lo,"__esModule",{value:!0}),Lo.ONE_THOUSAND=Lo.ONE_HUNDRED=void 0,Lo.ONE_HUNDRED=100,Lo.ONE_THOUSAND=1e3),Lo}var Xy={},ex;function $L(){return ex||(ex=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ONE_YEAR=e.FOUR_WEEKS=e.THREE_WEEKS=e.TWO_WEEKS=e.ONE_WEEK=e.THIRTY_DAYS=e.SEVEN_DAYS=e.FIVE_DAYS=e.THREE_DAYS=e.ONE_DAY=e.TWENTY_FOUR_HOURS=e.TWELVE_HOURS=e.SIX_HOURS=e.THREE_HOURS=e.ONE_HOUR=e.SIXTY_MINUTES=e.THIRTY_MINUTES=e.TEN_MINUTES=e.FIVE_MINUTES=e.ONE_MINUTE=e.SIXTY_SECONDS=e.THIRTY_SECONDS=e.TEN_SECONDS=e.FIVE_SECONDS=e.ONE_SECOND=void 0,e.ONE_SECOND=1,e.FIVE_SECONDS=5,e.TEN_SECONDS=10,e.THIRTY_SECONDS=30,e.SIXTY_SECONDS=60,e.ONE_MINUTE=e.SIXTY_SECONDS,e.FIVE_MINUTES=e.ONE_MINUTE*5,e.TEN_MINUTES=e.ONE_MINUTE*10,e.THIRTY_MINUTES=e.ONE_MINUTE*30,e.SIXTY_MINUTES=e.ONE_MINUTE*60,e.ONE_HOUR=e.SIXTY_MINUTES,e.THREE_HOURS=e.ONE_HOUR*3,e.SIX_HOURS=e.ONE_HOUR*6,e.TWELVE_HOURS=e.ONE_HOUR*12,e.TWENTY_FOUR_HOURS=e.ONE_HOUR*24,e.ONE_DAY=e.TWENTY_FOUR_HOURS,e.THREE_DAYS=e.ONE_DAY*3,e.FIVE_DAYS=e.ONE_DAY*5,e.SEVEN_DAYS=e.ONE_DAY*7,e.THIRTY_DAYS=e.ONE_DAY*30,e.ONE_WEEK=e.SEVEN_DAYS,e.TWO_WEEKS=e.ONE_WEEK*2,e.THREE_WEEKS=e.ONE_WEEK*3,e.FOUR_WEEKS=e.ONE_WEEK*4,e.ONE_YEAR=e.ONE_DAY*365}(Xy)),Xy}var tx;function V3(){return tx||(tx=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});const t=Of;t.__exportStar(NL(),e),t.__exportStar($L(),e)}(Yy)),Yy}var nx;function UL(){if(nx)return Mo;nx=1,Object.defineProperty(Mo,"__esModule",{value:!0}),Mo.fromMiliseconds=Mo.toMiliseconds=void 0;const e=V3();function t(r){return r*e.ONE_THOUSAND}Mo.toMiliseconds=t;function n(r){return Math.floor(r/e.ONE_THOUSAND)}return Mo.fromMiliseconds=n,Mo}var rx;function BL(){return rx||(rx=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});const t=Of;t.__exportStar(IL(),e),t.__exportStar(UL(),e)}(Wy)),Wy}var gc={},ix;function PL(){if(ix)return gc;ix=1,Object.defineProperty(gc,"__esModule",{value:!0}),gc.Watch=void 0;class e{constructor(){this.timestamps=new Map}start(n){if(this.timestamps.has(n))throw new Error(`Watch already started for label: ${n}`);this.timestamps.set(n,{started:Date.now()})}stop(n){const r=this.get(n);if(typeof r.elapsed<"u")throw new Error(`Watch already stopped for label: ${n}`);const i=Date.now()-r.started;this.timestamps.set(n,{started:r.started,elapsed:i})}get(n){const r=this.timestamps.get(n);if(typeof r>"u")throw new Error(`No timestamp found for label: ${n}`);return r}elapsed(n){const r=this.get(n);return r.elapsed||Date.now()-r.started}}return gc.Watch=e,gc.default=e,gc}var Zy={},yu={},sx;function kL(){if(sx)return yu;sx=1,Object.defineProperty(yu,"__esModule",{value:!0}),yu.IWatch=void 0;class e{}return yu.IWatch=e,yu}var ox;function ML(){return ox||(ox=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Of.__exportStar(kL(),e)}(Zy)),Zy}var ax;function LL(){return ax||(ax=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});const t=Of;t.__exportStar(BL(),e),t.__exportStar(PL(),e),t.__exportStar(ML(),e),t.__exportStar(V3(),e)}(Ky)),Ky}var ve=LL(),ut={},cx;function G3(){if(cx)return ut;cx=1,Object.defineProperty(ut,"__esModule",{value:!0}),ut.getLocalStorage=ut.getLocalStorageOrThrow=ut.getCrypto=ut.getCryptoOrThrow=ut.getLocation=ut.getLocationOrThrow=ut.getNavigator=ut.getNavigatorOrThrow=ut.getDocument=ut.getDocumentOrThrow=ut.getFromWindowOrThrow=ut.getFromWindow=void 0;function e(y){let b;return typeof window<"u"&&typeof window[y]<"u"&&(b=window[y]),b}ut.getFromWindow=e;function t(y){const b=e(y);if(!b)throw new Error(`${y} is not defined in Window`);return b}ut.getFromWindowOrThrow=t;function n(){return t("document")}ut.getDocumentOrThrow=n;function r(){return e("document")}ut.getDocument=r;function i(){return t("navigator")}ut.getNavigatorOrThrow=i;function a(){return e("navigator")}ut.getNavigator=a;function c(){return t("location")}ut.getLocationOrThrow=c;function u(){return e("location")}ut.getLocation=u;function f(){return t("crypto")}ut.getCryptoOrThrow=f;function d(){return e("crypto")}ut.getCrypto=d;function p(){return t("localStorage")}ut.getLocalStorageOrThrow=p;function g(){return e("localStorage")}return ut.getLocalStorage=g,ut}var ms=G3(),bu={},lx;function jL(){if(lx)return bu;lx=1,Object.defineProperty(bu,"__esModule",{value:!0}),bu.getWindowMetadata=void 0;const e=G3();function t(){let n,r;try{n=e.getDocumentOrThrow(),r=e.getLocationOrThrow()}catch{return null}function i(){const b=n.getElementsByTagName("link"),v=[];for(let E=0;E<b.length;E++){const S=b[E],x=S.getAttribute("rel");if(x&&x.toLowerCase().indexOf("icon")>-1){const T=S.getAttribute("href");if(T)if(T.toLowerCase().indexOf("https:")===-1&&T.toLowerCase().indexOf("http:")===-1&&T.indexOf("//")!==0){let O=r.protocol+"//"+r.host;if(T.indexOf("/")===0)O+=T;else{const U=r.pathname.split("/");U.pop();const N=U.join("/");O+=N+"/"+T}v.push(O)}else if(T.indexOf("//")===0){const O=r.protocol+T;v.push(O)}else v.push(T)}}return v}function a(...b){const v=n.getElementsByTagName("meta");for(let E=0;E<v.length;E++){const S=v[E],x=["itemprop","property","name"].map(T=>S.getAttribute(T)).filter(T=>T?b.includes(T):!1);if(x.length&&x){const T=S.getAttribute("content");if(T)return T}}return""}function c(){let b=a("name","og:site_name","og:title","twitter:title");return b||(b=n.title),b}function u(){return a("description","og:description","twitter:description","keywords")}const f=c(),d=u(),p=r.origin,g=i();return{description:d,url:p,icons:g,name:f}}return bu.getWindowMetadata=t,bu}var zL=jL();function cf(e,{strict:t=!0}={}){return!e||typeof e!="string"?!1:t?/^0x[0-9a-fA-F]*$/.test(e):e.startsWith("0x")}function wb(e){return cf(e,{strict:!1})?Math.ceil((e.length-2)/2):e.length}const K3="2.31.0";let Qy={getDocsUrl:({docsBaseUrl:e,docsPath:t="",docsSlug:n})=>t?`${e??"https://viem.sh"}${t}${n?`#${n}`:""}`:void 0,version:`viem@${K3}`};class ca extends Error{constructor(t,n={}){const r=n.cause instanceof ca?n.cause.details:n.cause?.message?n.cause.message:n.details,i=n.cause instanceof ca&&n.cause.docsPath||n.docsPath,a=Qy.getDocsUrl?.({...n,docsPath:i}),c=[t||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...a?[`Docs: ${a}`]:[],...r?[`Details: ${r}`]:[],...Qy.version?[`Version: ${Qy.version}`]:[]].join(`
`);super(c,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=i,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=t,this.version=K3}walk(t){return W3(this,t)}}function W3(e,t){return t?.(e)?e:e&&typeof e=="object"&&"cause"in e&&e.cause!==void 0?W3(e.cause,t):t?null:e}class Y3 extends ca{constructor({size:t,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${t}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}}function sl(e,{dir:t,size:n=32}={}){return typeof e=="string"?qL(e,{dir:t,size:n}):HL(e,{dir:t,size:n})}function qL(e,{dir:t,size:n=32}={}){if(n===null)return e;const r=e.replace("0x","");if(r.length>n*2)throw new Y3({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[t==="right"?"padEnd":"padStart"](n*2,"0")}`}function HL(e,{dir:t,size:n=32}={}){if(n===null)return e;if(e.length>n)throw new Y3({size:e.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let i=0;i<n;i++){const a=t==="right";r[a?i:n-i-1]=e[a?i:e.length-i-1]}return r}class FL extends ca{constructor({max:t,min:n,signed:r,size:i,value:a}){super(`Number "${a}" is not in safe ${i?`${i*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${t?`(${n} to ${t})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}}class VL extends ca{constructor({givenSize:t,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${t} bytes.`,{name:"SizeOverflowError"})}}function ol(e,{size:t}){if(wb(e)>t)throw new VL({givenSize:wb(e),maxSize:t})}function Eb(e,t={}){const{signed:n}=t;t.size&&ol(e,{size:t.size});const r=BigInt(e);if(!n)return r;const i=(e.length-2)/2,a=(1n<<BigInt(i)*8n-1n)-1n;return r<=a?r:r-BigInt(`0x${"f".padStart(i*2,"f")}`)-1n}function GL(e,t={}){return Number(Eb(e,t))}const KL=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Sb(e,t={}){return typeof e=="number"||typeof e=="bigint"?Z3(e,t):typeof e=="string"?XL(e,t):typeof e=="boolean"?WL(e,t):X3(e,t)}function WL(e,t={}){const n=`0x${Number(e)}`;return typeof t.size=="number"?(ol(n,{size:t.size}),sl(n,{size:t.size})):n}function X3(e,t={}){let n="";for(let i=0;i<e.length;i++)n+=KL[e[i]];const r=`0x${n}`;return typeof t.size=="number"?(ol(r,{size:t.size}),sl(r,{dir:"right",size:t.size})):r}function Z3(e,t={}){const{signed:n,size:r}=t,i=BigInt(e);let a;r?n?a=(1n<<BigInt(r)*8n-1n)-1n:a=2n**(BigInt(r)*8n)-1n:typeof e=="number"&&(a=BigInt(Number.MAX_SAFE_INTEGER));const c=typeof a=="bigint"&&n?-a-1n:0;if(a&&i>a||i<c){const f=typeof e=="bigint"?"n":"";throw new FL({max:a?`${a}${f}`:void 0,min:`${c}${f}`,signed:n,size:r,value:`${e}${f}`})}const u=`0x${(n&&i<0?(1n<<BigInt(r*8))+BigInt(i):i).toString(16)}`;return r?sl(u,{size:r}):u}const YL=new TextEncoder;function XL(e,t={}){const n=YL.encode(e);return X3(n,t)}const ZL=new TextEncoder;function QL(e,t={}){return typeof e=="number"||typeof e=="bigint"?ej(e,t):typeof e=="boolean"?JL(e,t):cf(e)?Q3(e,t):J3(e,t)}function JL(e,t={}){const n=new Uint8Array(1);return n[0]=Number(e),typeof t.size=="number"?(ol(n,{size:t.size}),sl(n,{size:t.size})):n}const Zi={zero:48,nine:57,A:65,F:70,a:97,f:102};function ux(e){if(e>=Zi.zero&&e<=Zi.nine)return e-Zi.zero;if(e>=Zi.A&&e<=Zi.F)return e-(Zi.A-10);if(e>=Zi.a&&e<=Zi.f)return e-(Zi.a-10)}function Q3(e,t={}){let n=e;t.size&&(ol(n,{size:t.size}),n=sl(n,{dir:"right",size:t.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const i=r.length/2,a=new Uint8Array(i);for(let c=0,u=0;c<i;c++){const f=ux(r.charCodeAt(u++)),d=ux(r.charCodeAt(u++));if(f===void 0||d===void 0)throw new ca(`Invalid byte sequence ("${r[u-2]}${r[u-1]}" in "${r}").`);a[c]=f*16+d}return a}function ej(e,t){const n=Z3(e,t);return Q3(n)}function J3(e,t={}){const n=ZL.encode(e);return typeof t.size=="number"?(ol(n,{size:t.size}),sl(n,{dir:"right",size:t.size})):n}const oh=BigInt(2**32-1),fx=BigInt(32);function tj(e,t=!1){return t?{h:Number(e&oh),l:Number(e>>fx&oh)}:{h:Number(e>>fx&oh)|0,l:Number(e&oh)|0}}function nj(e,t=!1){const n=e.length;let r=new Uint32Array(n),i=new Uint32Array(n);for(let a=0;a<n;a++){const{h:c,l:u}=tj(e[a],t);[r[a],i[a]]=[c,u]}return[r,i]}const rj=(e,t,n)=>e<<n|t>>>32-n,ij=(e,t,n)=>t<<n|e>>>32-n,sj=(e,t,n)=>t<<n-32|e>>>64-n,oj=(e,t,n)=>e<<n-32|t>>>64-n,mc=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function aj(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function Jh(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function lf(e,...t){if(!aj(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function toe(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");Jh(e.outputLen),Jh(e.blockLen)}function dx(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function cj(e,t){lf(e);const n=t.outputLen;if(e.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function lj(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))}function eD(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}function noe(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function roe(e,t){return e<<32-t|e>>>t}const uj=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function fj(e){return e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255}function dj(e){for(let t=0;t<e.length;t++)e[t]=fj(e[t]);return e}const hx=uj?e=>e:dj;function hj(e){if(typeof e!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(e))}function tD(e){return typeof e=="string"&&(e=hj(e)),lf(e),e}function ioe(...e){let t=0;for(let r=0;r<e.length;r++){const i=e[r];lf(i),t+=i.length}const n=new Uint8Array(t);for(let r=0,i=0;r<e.length;r++){const a=e[r];n.set(a,i),i+=a.length}return n}class pj{}function gj(e){const t=r=>e().update(tD(r)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function soe(e=32){if(mc&&typeof mc.getRandomValues=="function")return mc.getRandomValues(new Uint8Array(e));if(mc&&typeof mc.randomBytes=="function")return Uint8Array.from(mc.randomBytes(e));throw new Error("crypto.getRandomValues must be defined")}const mj=BigInt(0),vu=BigInt(1),yj=BigInt(2),bj=BigInt(7),vj=BigInt(256),wj=BigInt(113),nD=[],rD=[],iD=[];for(let e=0,t=vu,n=1,r=0;e<24;e++){[n,r]=[r,(2*n+3*r)%5],nD.push(2*(5*r+n)),rD.push((e+1)*(e+2)/2%64);let i=mj;for(let a=0;a<7;a++)t=(t<<vu^(t>>bj)*wj)%vj,t&yj&&(i^=vu<<(vu<<BigInt(a))-vu);iD.push(i)}const sD=nj(iD,!0),Ej=sD[0],Sj=sD[1],px=(e,t,n)=>n>32?sj(e,t,n):rj(e,t,n),gx=(e,t,n)=>n>32?oj(e,t,n):ij(e,t,n);function _j(e,t=24){const n=new Uint32Array(10);for(let r=24-t;r<24;r++){for(let c=0;c<10;c++)n[c]=e[c]^e[c+10]^e[c+20]^e[c+30]^e[c+40];for(let c=0;c<10;c+=2){const u=(c+8)%10,f=(c+2)%10,d=n[f],p=n[f+1],g=px(d,p,1)^n[u],y=gx(d,p,1)^n[u+1];for(let b=0;b<50;b+=10)e[c+b]^=g,e[c+b+1]^=y}let i=e[2],a=e[3];for(let c=0;c<24;c++){const u=rD[c],f=px(i,a,u),d=gx(i,a,u),p=nD[c];i=e[p],a=e[p+1],e[p]=f,e[p+1]=d}for(let c=0;c<50;c+=10){for(let u=0;u<10;u++)n[u]=e[c+u];for(let u=0;u<10;u++)e[c+u]^=~n[(u+2)%10]&n[(u+4)%10]}e[0]^=Ej[r],e[1]^=Sj[r]}eD(n)}class Hv extends pj{constructor(t,n,r,i=!1,a=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=t,this.suffix=n,this.outputLen=r,this.enableXOF=i,this.rounds=a,Jh(r),!(0<t&&t<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=lj(this.state)}clone(){return this._cloneInto()}keccak(){hx(this.state32),_j(this.state32,this.rounds),hx(this.state32),this.posOut=0,this.pos=0}update(t){dx(this),t=tD(t),lf(t);const{blockLen:n,state:r}=this,i=t.length;for(let a=0;a<i;){const c=Math.min(n-this.pos,i-a);for(let u=0;u<c;u++)r[this.pos++]^=t[a++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:n,pos:r,blockLen:i}=this;t[r]^=n,(n&128)!==0&&r===i-1&&this.keccak(),t[i-1]^=128,this.keccak()}writeInto(t){dx(this,!1),lf(t),this.finish();const n=this.state,{blockLen:r}=this;for(let i=0,a=t.length;i<a;){this.posOut>=r&&this.keccak();const c=Math.min(r-this.posOut,a-i);t.set(n.subarray(this.posOut,this.posOut+c),i),this.posOut+=c,i+=c}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return Jh(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(cj(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,eD(this.state)}_cloneInto(t){const{blockLen:n,suffix:r,outputLen:i,rounds:a,enableXOF:c}=this;return t||(t=new Hv(n,r,i,c,a)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=a,t.suffix=r,t.outputLen=i,t.enableXOF=c,t.destroyed=this.destroyed,t}}const xj=(e,t,n)=>gj(()=>new Hv(t,e,n)),Aj=xj(1,136,256/8);function oD(e,t){const n=t||"hex",r=Aj(cf(e,{strict:!1})?QL(e):e);return n==="bytes"?r:Sb(r)}class Rj extends Map{constructor(t){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=t}get(t){const n=super.get(t);return super.has(t)&&n!==void 0&&(this.delete(t),super.set(t,n)),n}set(t,n){if(super.set(t,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}}const Jy=new Rj(8192);function Oj(e,t){if(Jy.has(`${e}.${t}`))return Jy.get(`${e}.${t}`);const n=e.substring(2).toLowerCase(),r=oD(J3(n),"bytes"),i=n.split("");for(let c=0;c<40;c+=2)r[c>>1]>>4>=8&&i[c]&&(i[c]=i[c].toUpperCase()),(r[c>>1]&15)>=8&&i[c+1]&&(i[c+1]=i[c+1].toUpperCase());const a=`0x${i.join("")}`;return Jy.set(`${e}.${t}`,a),a}function Tj(e){const t=oD(`0x${e.substring(4)}`).substring(26);return Oj(`0x${t}`)}async function Dj({hash:e,signature:t}){const n=cf(e)?e:Sb(e),{secp256k1:r}=await H3(async()=>{const{secp256k1:c}=await import("./secp256k1-DmGCwGGp.js");return{secp256k1:c}},[]);return`0x${(()=>{if(typeof t=="object"&&"r"in t&&"s"in t){const{r:d,s:p,v:g,yParity:y}=t,b=Number(y??g),v=mx(b);return new r.Signature(Eb(d),Eb(p)).addRecoveryBit(v)}const c=cf(t)?t:Sb(t);if(wb(c)!==65)throw new Error("invalid signature length");const u=GL(`0x${c.slice(130)}`),f=mx(u);return r.Signature.fromCompact(c.substring(2,130)).addRecoveryBit(f)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function mx(e){if(e===0||e===1)return e;if(e===27)return 0;if(e===28)return 1;throw new Error("Invalid yParityOrV value")}async function Cj({hash:e,signature:t}){return Tj(await Dj({hash:e,signature:t}))}function Ij(e){if(e.length>=255)throw new TypeError("Alphabet too long");const t=new Uint8Array(256);for(let d=0;d<t.length;d++)t[d]=255;for(let d=0;d<e.length;d++){const p=e.charAt(d),g=p.charCodeAt(0);if(t[g]!==255)throw new TypeError(p+" is ambiguous");t[g]=d}const n=e.length,r=e.charAt(0),i=Math.log(n)/Math.log(256),a=Math.log(256)/Math.log(n);function c(d){if(d instanceof Uint8Array||(ArrayBuffer.isView(d)?d=new Uint8Array(d.buffer,d.byteOffset,d.byteLength):Array.isArray(d)&&(d=Uint8Array.from(d))),!(d instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(d.length===0)return"";let p=0,g=0,y=0;const b=d.length;for(;y!==b&&d[y]===0;)y++,p++;const v=(b-y)*a+1>>>0,E=new Uint8Array(v);for(;y!==b;){let T=d[y],O=0;for(let U=v-1;(T!==0||O<g)&&U!==-1;U--,O++)T+=256*E[U]>>>0,E[U]=T%n>>>0,T=T/n>>>0;if(T!==0)throw new Error("Non-zero carry");g=O,y++}let S=v-g;for(;S!==v&&E[S]===0;)S++;let x=r.repeat(p);for(;S<v;++S)x+=e.charAt(E[S]);return x}function u(d){if(typeof d!="string")throw new TypeError("Expected String");if(d.length===0)return new Uint8Array;let p=0,g=0,y=0;for(;d[p]===r;)g++,p++;const b=(d.length-p)*i+1>>>0,v=new Uint8Array(b);for(;p<d.length;){const T=d.charCodeAt(p);if(T>255)return;let O=t[T];if(O===255)return;let U=0;for(let N=b-1;(O!==0||U<y)&&N!==-1;N--,U++)O+=n*v[N]>>>0,v[N]=O%256>>>0,O=O/256>>>0;if(O!==0)throw new Error("Non-zero carry");y=U,p++}let E=b-y;for(;E!==b&&v[E]===0;)E++;const S=new Uint8Array(g+(b-E));let x=g;for(;E!==b;)S[x++]=v[E++];return S}function f(d){const p=u(d);if(p)return p;throw new Error("Non-base"+n+" character")}return{encode:c,decodeUnsafe:u,decode:f}}var Nj="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const Tf=Ij(Nj);function $j(e){const t=e.length;let n=0,r=0;for(;r<t;){let i=e.charCodeAt(r++);if((i&4294967168)===0){n++;continue}else if((i&4294965248)===0)n+=2;else{if(i>=55296&&i<=56319&&r<t){const a=e.charCodeAt(r);(a&64512)===56320&&(++r,i=((i&1023)<<10)+(a&1023)+65536)}(i&4294901760)===0?n+=3:n+=4}}return n}function Uj(e,t,n){const r=e.length;let i=n,a=0;for(;a<r;){let c=e.charCodeAt(a++);if((c&4294967168)===0){t[i++]=c;continue}else if((c&4294965248)===0)t[i++]=c>>6&31|192;else{if(c>=55296&&c<=56319&&a<r){const u=e.charCodeAt(a);(u&64512)===56320&&(++a,c=((c&1023)<<10)+(u&1023)+65536)}(c&4294901760)===0?(t[i++]=c>>12&15|224,t[i++]=c>>6&63|128):(t[i++]=c>>18&7|240,t[i++]=c>>12&63|128,t[i++]=c>>6&63|128)}t[i++]=c&63|128}}const Bj=new TextEncoder,Pj=50;function kj(e,t,n){Bj.encodeInto(e,t.subarray(n))}function Mj(e,t,n){e.length>Pj?kj(e,t,n):Uj(e,t,n)}const Lj=4096;function aD(e,t,n){let r=t;const i=r+n,a=[];let c="";for(;r<i;){const u=e[r++];if((u&128)===0)a.push(u);else if((u&224)===192){const f=e[r++]&63;a.push((u&31)<<6|f)}else if((u&240)===224){const f=e[r++]&63,d=e[r++]&63;a.push((u&31)<<12|f<<6|d)}else if((u&248)===240){const f=e[r++]&63,d=e[r++]&63,p=e[r++]&63;let g=(u&7)<<18|f<<12|d<<6|p;g>65535&&(g-=65536,a.push(g>>>10&1023|55296),g=56320|g&1023),a.push(g)}else a.push(u);a.length>=Lj&&(c+=String.fromCharCode(...a),a.length=0)}return a.length>0&&(c+=String.fromCharCode(...a)),c}const jj=new TextDecoder,zj=200;function qj(e,t,n){const r=e.subarray(t,t+n);return jj.decode(r)}function Hj(e,t,n){return n>zj?qj(e,t,n):aD(e,t,n)}class ah{constructor(t,n){this.type=t,this.data=n}}class gr extends Error{constructor(t){super(t);const n=Object.create(gr.prototype);Object.setPrototypeOf(this,n),Object.defineProperty(this,"name",{configurable:!0,enumerable:!1,value:gr.name})}}const wu=4294967295;function Fj(e,t,n){const r=n/4294967296,i=n;e.setUint32(t,r),e.setUint32(t+4,i)}function cD(e,t,n){const r=Math.floor(n/4294967296),i=n;e.setUint32(t,r),e.setUint32(t+4,i)}function lD(e,t){const n=e.getInt32(t),r=e.getUint32(t+4);return n*4294967296+r}function Vj(e,t){const n=e.getUint32(t),r=e.getUint32(t+4);return n*4294967296+r}const Gj=-1,Kj=4294967296-1,Wj=17179869184-1;function Yj({sec:e,nsec:t}){if(e>=0&&t>=0&&e<=Wj)if(t===0&&e<=Kj){const n=new Uint8Array(4);return new DataView(n.buffer).setUint32(0,e),n}else{const n=e/4294967296,r=e&4294967295,i=new Uint8Array(8),a=new DataView(i.buffer);return a.setUint32(0,t<<2|n&3),a.setUint32(4,r),i}else{const n=new Uint8Array(12),r=new DataView(n.buffer);return r.setUint32(0,t),cD(r,4,e),n}}function Xj(e){const t=e.getTime(),n=Math.floor(t/1e3),r=(t-n*1e3)*1e6,i=Math.floor(r/1e9);return{sec:n+i,nsec:r-i*1e9}}function Zj(e){if(e instanceof Date){const t=Xj(e);return Yj(t)}else return null}function Qj(e){const t=new DataView(e.buffer,e.byteOffset,e.byteLength);switch(e.byteLength){case 4:return{sec:t.getUint32(0),nsec:0};case 8:{const n=t.getUint32(0),r=t.getUint32(4),i=(n&3)*4294967296+r,a=n>>>2;return{sec:i,nsec:a}}case 12:{const n=lD(t,4),r=t.getUint32(0);return{sec:n,nsec:r}}default:throw new gr(`Unrecognized data size for timestamp (expected 4, 8, or 12): ${e.length}`)}}function Jj(e){const t=Qj(e);return new Date(t.sec*1e3+t.nsec/1e6)}const e9={type:Gj,encode:Zj,decode:Jj};class ep{constructor(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(e9)}register({type:t,encode:n,decode:r}){if(t>=0)this.encoders[t]=n,this.decoders[t]=r;else{const i=-1-t;this.builtInEncoders[i]=n,this.builtInDecoders[i]=r}}tryToEncode(t,n){for(let r=0;r<this.builtInEncoders.length;r++){const i=this.builtInEncoders[r];if(i!=null){const a=i(t,n);if(a!=null){const c=-1-r;return new ah(c,a)}}}for(let r=0;r<this.encoders.length;r++){const i=this.encoders[r];if(i!=null){const a=i(t,n);if(a!=null){const c=r;return new ah(c,a)}}}return t instanceof ah?t:null}decode(t,n,r){const i=n<0?this.builtInDecoders[-1-n]:this.decoders[n];return i?i(t,n,r):new ah(n,t)}}ep.defaultCodec=new ep;function t9(e){return e instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&e instanceof SharedArrayBuffer}function _b(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):t9(e)?new Uint8Array(e):Uint8Array.from(e)}const n9=100,r9=2048;let i9=class uD{constructor(t){this.entered=!1,this.extensionCodec=t?.extensionCodec??ep.defaultCodec,this.context=t?.context,this.useBigInt64=t?.useBigInt64??!1,this.maxDepth=t?.maxDepth??n9,this.initialBufferSize=t?.initialBufferSize??r9,this.sortKeys=t?.sortKeys??!1,this.forceFloat32=t?.forceFloat32??!1,this.ignoreUndefined=t?.ignoreUndefined??!1,this.forceIntegerToFloat=t?.forceIntegerToFloat??!1,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}clone(){return new uD({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,maxDepth:this.maxDepth,initialBufferSize:this.initialBufferSize,sortKeys:this.sortKeys,forceFloat32:this.forceFloat32,ignoreUndefined:this.ignoreUndefined,forceIntegerToFloat:this.forceIntegerToFloat})}reinitializeState(){this.pos=0}encodeSharedRef(t){if(this.entered)return this.clone().encodeSharedRef(t);try{return this.entered=!0,this.reinitializeState(),this.doEncode(t,1),this.bytes.subarray(0,this.pos)}finally{this.entered=!1}}encode(t){if(this.entered)return this.clone().encode(t);try{return this.entered=!0,this.reinitializeState(),this.doEncode(t,1),this.bytes.slice(0,this.pos)}finally{this.entered=!1}}doEncode(t,n){if(n>this.maxDepth)throw new Error(`Too deep objects in depth ${n}`);t==null?this.encodeNil():typeof t=="boolean"?this.encodeBoolean(t):typeof t=="number"?this.forceIntegerToFloat?this.encodeNumberAsFloat(t):this.encodeNumber(t):typeof t=="string"?this.encodeString(t):this.useBigInt64&&typeof t=="bigint"?this.encodeBigInt64(t):this.encodeObject(t,n)}ensureBufferSizeToWrite(t){const n=this.pos+t;this.view.byteLength<n&&this.resizeBuffer(n*2)}resizeBuffer(t){const n=new ArrayBuffer(t),r=new Uint8Array(n),i=new DataView(n);r.set(this.bytes),this.view=i,this.bytes=r}encodeNil(){this.writeU8(192)}encodeBoolean(t){t===!1?this.writeU8(194):this.writeU8(195)}encodeNumber(t){!this.forceIntegerToFloat&&Number.isSafeInteger(t)?t>=0?t<128?this.writeU8(t):t<256?(this.writeU8(204),this.writeU8(t)):t<65536?(this.writeU8(205),this.writeU16(t)):t<4294967296?(this.writeU8(206),this.writeU32(t)):this.useBigInt64?this.encodeNumberAsFloat(t):(this.writeU8(207),this.writeU64(t)):t>=-32?this.writeU8(224|t+32):t>=-128?(this.writeU8(208),this.writeI8(t)):t>=-32768?(this.writeU8(209),this.writeI16(t)):t>=-2147483648?(this.writeU8(210),this.writeI32(t)):this.useBigInt64?this.encodeNumberAsFloat(t):(this.writeU8(211),this.writeI64(t)):this.encodeNumberAsFloat(t)}encodeNumberAsFloat(t){this.forceFloat32?(this.writeU8(202),this.writeF32(t)):(this.writeU8(203),this.writeF64(t))}encodeBigInt64(t){t>=BigInt(0)?(this.writeU8(207),this.writeBigUint64(t)):(this.writeU8(211),this.writeBigInt64(t))}writeStringHeader(t){if(t<32)this.writeU8(160+t);else if(t<256)this.writeU8(217),this.writeU8(t);else if(t<65536)this.writeU8(218),this.writeU16(t);else if(t<4294967296)this.writeU8(219),this.writeU32(t);else throw new Error(`Too long string: ${t} bytes in UTF-8`)}encodeString(t){const r=$j(t);this.ensureBufferSizeToWrite(5+r),this.writeStringHeader(r),Mj(t,this.bytes,this.pos),this.pos+=r}encodeObject(t,n){const r=this.extensionCodec.tryToEncode(t,this.context);if(r!=null)this.encodeExtension(r);else if(Array.isArray(t))this.encodeArray(t,n);else if(ArrayBuffer.isView(t))this.encodeBinary(t);else if(typeof t=="object")this.encodeMap(t,n);else throw new Error(`Unrecognized object: ${Object.prototype.toString.apply(t)}`)}encodeBinary(t){const n=t.byteLength;if(n<256)this.writeU8(196),this.writeU8(n);else if(n<65536)this.writeU8(197),this.writeU16(n);else if(n<4294967296)this.writeU8(198),this.writeU32(n);else throw new Error(`Too large binary: ${n}`);const r=_b(t);this.writeU8a(r)}encodeArray(t,n){const r=t.length;if(r<16)this.writeU8(144+r);else if(r<65536)this.writeU8(220),this.writeU16(r);else if(r<4294967296)this.writeU8(221),this.writeU32(r);else throw new Error(`Too large array: ${r}`);for(const i of t)this.doEncode(i,n+1)}countWithoutUndefined(t,n){let r=0;for(const i of n)t[i]!==void 0&&r++;return r}encodeMap(t,n){const r=Object.keys(t);this.sortKeys&&r.sort();const i=this.ignoreUndefined?this.countWithoutUndefined(t,r):r.length;if(i<16)this.writeU8(128+i);else if(i<65536)this.writeU8(222),this.writeU16(i);else if(i<4294967296)this.writeU8(223),this.writeU32(i);else throw new Error(`Too large map object: ${i}`);for(const a of r){const c=t[a];this.ignoreUndefined&&c===void 0||(this.encodeString(a),this.doEncode(c,n+1))}}encodeExtension(t){if(typeof t.data=="function"){const r=t.data(this.pos+6),i=r.length;if(i>=4294967296)throw new Error(`Too large extension object: ${i}`);this.writeU8(201),this.writeU32(i),this.writeI8(t.type),this.writeU8a(r);return}const n=t.data.length;if(n===1)this.writeU8(212);else if(n===2)this.writeU8(213);else if(n===4)this.writeU8(214);else if(n===8)this.writeU8(215);else if(n===16)this.writeU8(216);else if(n<256)this.writeU8(199),this.writeU8(n);else if(n<65536)this.writeU8(200),this.writeU16(n);else if(n<4294967296)this.writeU8(201),this.writeU32(n);else throw new Error(`Too large extension object: ${n}`);this.writeI8(t.type),this.writeU8a(t.data)}writeU8(t){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,t),this.pos++}writeU8a(t){const n=t.length;this.ensureBufferSizeToWrite(n),this.bytes.set(t,this.pos),this.pos+=n}writeI8(t){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,t),this.pos++}writeU16(t){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,t),this.pos+=2}writeI16(t){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,t),this.pos+=2}writeU32(t){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,t),this.pos+=4}writeI32(t){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,t),this.pos+=4}writeF32(t){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,t),this.pos+=4}writeF64(t){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,t),this.pos+=8}writeU64(t){this.ensureBufferSizeToWrite(8),Fj(this.view,this.pos,t),this.pos+=8}writeI64(t){this.ensureBufferSizeToWrite(8),cD(this.view,this.pos,t),this.pos+=8}writeBigUint64(t){this.ensureBufferSizeToWrite(8),this.view.setBigUint64(this.pos,t),this.pos+=8}writeBigInt64(t){this.ensureBufferSizeToWrite(8),this.view.setBigInt64(this.pos,t),this.pos+=8}};function s9(e,t){return new i9(t).encodeSharedRef(e)}function e0(e){return`${e<0?"-":""}0x${Math.abs(e).toString(16).padStart(2,"0")}`}const o9=16,a9=16;class c9{constructor(t=o9,n=a9){this.hit=0,this.miss=0,this.maxKeyLength=t,this.maxLengthPerKey=n,this.caches=[];for(let r=0;r<this.maxKeyLength;r++)this.caches.push([])}canBeCached(t){return t>0&&t<=this.maxKeyLength}find(t,n,r){const i=this.caches[r-1];e:for(const a of i){const c=a.bytes;for(let u=0;u<r;u++)if(c[u]!==t[n+u])continue e;return a.str}return null}store(t,n){const r=this.caches[t.length-1],i={bytes:t,str:n};r.length>=this.maxLengthPerKey?r[Math.random()*r.length|0]=i:r.push(i)}decode(t,n,r){const i=this.find(t,n,r);if(i!=null)return this.hit++,i;this.miss++;const a=aD(t,n,r),c=Uint8Array.prototype.slice.call(t,n,n+r);return this.store(c,a),a}}const xb="array",qu="map_key",fD="map_value",l9=e=>{if(typeof e=="string"||typeof e=="number")return e;throw new gr("The type of key must be string or number but "+typeof e)};class u9{constructor(){this.stack=[],this.stackHeadPosition=-1}get length(){return this.stackHeadPosition+1}top(){return this.stack[this.stackHeadPosition]}pushArrayState(t){const n=this.getUninitializedStateFromPool();n.type=xb,n.position=0,n.size=t,n.array=new Array(t)}pushMapState(t){const n=this.getUninitializedStateFromPool();n.type=qu,n.readCount=0,n.size=t,n.map={}}getUninitializedStateFromPool(){if(this.stackHeadPosition++,this.stackHeadPosition===this.stack.length){const t={type:void 0,size:0,array:void 0,position:0,readCount:0,map:void 0,key:null};this.stack.push(t)}return this.stack[this.stackHeadPosition]}release(t){if(this.stack[this.stackHeadPosition]!==t)throw new Error("Invalid stack state. Released state is not on top of the stack.");if(t.type===xb){const r=t;r.size=0,r.array=void 0,r.position=0,r.type=void 0}if(t.type===qu||t.type===fD){const r=t;r.size=0,r.map=void 0,r.readCount=0,r.type=void 0}this.stackHeadPosition--}reset(){this.stack.length=0,this.stackHeadPosition=-1}}const Eu=-1,Fv=new DataView(new ArrayBuffer(0)),f9=new Uint8Array(Fv.buffer);try{Fv.getInt8(0)}catch(e){if(!(e instanceof RangeError))throw new Error("This module is not supported in the current JavaScript engine because DataView does not throw RangeError on out-of-bounds access")}const yx=new RangeError("Insufficient data"),d9=new c9;let h9=class dD{constructor(t){this.totalPos=0,this.pos=0,this.view=Fv,this.bytes=f9,this.headByte=Eu,this.stack=new u9,this.entered=!1,this.extensionCodec=t?.extensionCodec??ep.defaultCodec,this.context=t?.context,this.useBigInt64=t?.useBigInt64??!1,this.rawStrings=t?.rawStrings??!1,this.maxStrLength=t?.maxStrLength??wu,this.maxBinLength=t?.maxBinLength??wu,this.maxArrayLength=t?.maxArrayLength??wu,this.maxMapLength=t?.maxMapLength??wu,this.maxExtLength=t?.maxExtLength??wu,this.keyDecoder=t?.keyDecoder!==void 0?t.keyDecoder:d9,this.mapKeyConverter=t?.mapKeyConverter??l9}clone(){return new dD({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,rawStrings:this.rawStrings,maxStrLength:this.maxStrLength,maxBinLength:this.maxBinLength,maxArrayLength:this.maxArrayLength,maxMapLength:this.maxMapLength,maxExtLength:this.maxExtLength,keyDecoder:this.keyDecoder})}reinitializeState(){this.totalPos=0,this.headByte=Eu,this.stack.reset()}setBuffer(t){const n=_b(t);this.bytes=n,this.view=new DataView(n.buffer,n.byteOffset,n.byteLength),this.pos=0}appendBuffer(t){if(this.headByte===Eu&&!this.hasRemaining(1))this.setBuffer(t);else{const n=this.bytes.subarray(this.pos),r=_b(t),i=new Uint8Array(n.length+r.length);i.set(n),i.set(r,n.length),this.setBuffer(i)}}hasRemaining(t){return this.view.byteLength-this.pos>=t}createExtraByteError(t){const{view:n,pos:r}=this;return new RangeError(`Extra ${n.byteLength-r} of ${n.byteLength} byte(s) found at buffer[${t}]`)}decode(t){if(this.entered)return this.clone().decode(t);try{this.entered=!0,this.reinitializeState(),this.setBuffer(t);const n=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return n}finally{this.entered=!1}}*decodeMulti(t){if(this.entered){yield*this.clone().decodeMulti(t);return}try{for(this.entered=!0,this.reinitializeState(),this.setBuffer(t);this.hasRemaining(1);)yield this.doDecodeSync()}finally{this.entered=!1}}async decodeAsync(t){if(this.entered)return this.clone().decodeAsync(t);try{this.entered=!0;let n=!1,r;for await(const u of t){if(n)throw this.entered=!1,this.createExtraByteError(this.totalPos);this.appendBuffer(u);try{r=this.doDecodeSync(),n=!0}catch(f){if(!(f instanceof RangeError))throw f}this.totalPos+=this.pos}if(n){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return r}const{headByte:i,pos:a,totalPos:c}=this;throw new RangeError(`Insufficient data in parsing ${e0(i)} at ${c} (${a} in the current buffer)`)}finally{this.entered=!1}}decodeArrayStream(t){return this.decodeMultiAsync(t,!0)}decodeStream(t){return this.decodeMultiAsync(t,!1)}async*decodeMultiAsync(t,n){if(this.entered){yield*this.clone().decodeMultiAsync(t,n);return}try{this.entered=!0;let r=n,i=-1;for await(const a of t){if(n&&i===0)throw this.createExtraByteError(this.totalPos);this.appendBuffer(a),r&&(i=this.readArraySize(),r=!1,this.complete());try{for(;yield this.doDecodeSync(),--i!==0;);}catch(c){if(!(c instanceof RangeError))throw c}this.totalPos+=this.pos}}finally{this.entered=!1}}doDecodeSync(){e:for(;;){const t=this.readHeadByte();let n;if(t>=224)n=t-256;else if(t<192)if(t<128)n=t;else if(t<144){const i=t-128;if(i!==0){this.pushMapState(i),this.complete();continue e}else n={}}else if(t<160){const i=t-144;if(i!==0){this.pushArrayState(i),this.complete();continue e}else n=[]}else{const i=t-160;n=this.decodeString(i,0)}else if(t===192)n=null;else if(t===194)n=!1;else if(t===195)n=!0;else if(t===202)n=this.readF32();else if(t===203)n=this.readF64();else if(t===204)n=this.readU8();else if(t===205)n=this.readU16();else if(t===206)n=this.readU32();else if(t===207)this.useBigInt64?n=this.readU64AsBigInt():n=this.readU64();else if(t===208)n=this.readI8();else if(t===209)n=this.readI16();else if(t===210)n=this.readI32();else if(t===211)this.useBigInt64?n=this.readI64AsBigInt():n=this.readI64();else if(t===217){const i=this.lookU8();n=this.decodeString(i,1)}else if(t===218){const i=this.lookU16();n=this.decodeString(i,2)}else if(t===219){const i=this.lookU32();n=this.decodeString(i,4)}else if(t===220){const i=this.readU16();if(i!==0){this.pushArrayState(i),this.complete();continue e}else n=[]}else if(t===221){const i=this.readU32();if(i!==0){this.pushArrayState(i),this.complete();continue e}else n=[]}else if(t===222){const i=this.readU16();if(i!==0){this.pushMapState(i),this.complete();continue e}else n={}}else if(t===223){const i=this.readU32();if(i!==0){this.pushMapState(i),this.complete();continue e}else n={}}else if(t===196){const i=this.lookU8();n=this.decodeBinary(i,1)}else if(t===197){const i=this.lookU16();n=this.decodeBinary(i,2)}else if(t===198){const i=this.lookU32();n=this.decodeBinary(i,4)}else if(t===212)n=this.decodeExtension(1,0);else if(t===213)n=this.decodeExtension(2,0);else if(t===214)n=this.decodeExtension(4,0);else if(t===215)n=this.decodeExtension(8,0);else if(t===216)n=this.decodeExtension(16,0);else if(t===199){const i=this.lookU8();n=this.decodeExtension(i,1)}else if(t===200){const i=this.lookU16();n=this.decodeExtension(i,2)}else if(t===201){const i=this.lookU32();n=this.decodeExtension(i,4)}else throw new gr(`Unrecognized type byte: ${e0(t)}`);this.complete();const r=this.stack;for(;r.length>0;){const i=r.top();if(i.type===xb)if(i.array[i.position]=n,i.position++,i.position===i.size)n=i.array,r.release(i);else continue e;else if(i.type===qu){if(n==="__proto__")throw new gr("The key __proto__ is not allowed");i.key=this.mapKeyConverter(n),i.type=fD;continue e}else if(i.map[i.key]=n,i.readCount++,i.readCount===i.size)n=i.map,r.release(i);else{i.key=null,i.type=qu;continue e}}return n}}readHeadByte(){return this.headByte===Eu&&(this.headByte=this.readU8()),this.headByte}complete(){this.headByte=Eu}readArraySize(){const t=this.readHeadByte();switch(t){case 220:return this.readU16();case 221:return this.readU32();default:{if(t<160)return t-144;throw new gr(`Unrecognized array type byte: ${e0(t)}`)}}}pushMapState(t){if(t>this.maxMapLength)throw new gr(`Max length exceeded: map length (${t}) > maxMapLengthLength (${this.maxMapLength})`);this.stack.pushMapState(t)}pushArrayState(t){if(t>this.maxArrayLength)throw new gr(`Max length exceeded: array length (${t}) > maxArrayLength (${this.maxArrayLength})`);this.stack.pushArrayState(t)}decodeString(t,n){return!this.rawStrings||this.stateIsMapKey()?this.decodeUtf8String(t,n):this.decodeBinary(t,n)}decodeUtf8String(t,n){if(t>this.maxStrLength)throw new gr(`Max length exceeded: UTF-8 byte length (${t}) > maxStrLength (${this.maxStrLength})`);if(this.bytes.byteLength<this.pos+n+t)throw yx;const r=this.pos+n;let i;return this.stateIsMapKey()&&this.keyDecoder?.canBeCached(t)?i=this.keyDecoder.decode(this.bytes,r,t):i=Hj(this.bytes,r,t),this.pos+=n+t,i}stateIsMapKey(){return this.stack.length>0?this.stack.top().type===qu:!1}decodeBinary(t,n){if(t>this.maxBinLength)throw new gr(`Max length exceeded: bin length (${t}) > maxBinLength (${this.maxBinLength})`);if(!this.hasRemaining(t+n))throw yx;const r=this.pos+n,i=this.bytes.subarray(r,r+t);return this.pos+=n+t,i}decodeExtension(t,n){if(t>this.maxExtLength)throw new gr(`Max length exceeded: ext length (${t}) > maxExtLength (${this.maxExtLength})`);const r=this.view.getInt8(this.pos+n),i=this.decodeBinary(t,n+1);return this.extensionCodec.decode(i,r,this.context)}lookU8(){return this.view.getUint8(this.pos)}lookU16(){return this.view.getUint16(this.pos)}lookU32(){return this.view.getUint32(this.pos)}readU8(){const t=this.view.getUint8(this.pos);return this.pos++,t}readI8(){const t=this.view.getInt8(this.pos);return this.pos++,t}readU16(){const t=this.view.getUint16(this.pos);return this.pos+=2,t}readI16(){const t=this.view.getInt16(this.pos);return this.pos+=2,t}readU32(){const t=this.view.getUint32(this.pos);return this.pos+=4,t}readI32(){const t=this.view.getInt32(this.pos);return this.pos+=4,t}readU64(){const t=Vj(this.view,this.pos);return this.pos+=8,t}readI64(){const t=lD(this.view,this.pos);return this.pos+=8,t}readU64AsBigInt(){const t=this.view.getBigUint64(this.pos);return this.pos+=8,t}readI64AsBigInt(){const t=this.view.getBigInt64(this.pos);return this.pos+=8,t}readF32(){const t=this.view.getFloat32(this.pos);return this.pos+=4,t}readF64(){const t=this.view.getFloat64(this.pos);return this.pos+=8,t}};function p9(e,t){return new h9(t).decode(e)}/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */function g9(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function hD(e,t){return Array.isArray(t)?t.length===0?!0:e?t.every(n=>typeof n=="string"):t.every(n=>Number.isSafeInteger(n)):!1}function tp(e,t){if(typeof t!="string")throw new Error(`${e}: string expected`);return!0}function Vv(e){if(!Number.isSafeInteger(e))throw new Error(`invalid integer: ${e}`)}function Ab(e){if(!Array.isArray(e))throw new Error("array expected")}function np(e,t){if(!hD(!0,t))throw new Error(`${e}: array of strings expected`)}function m9(e,t){if(!hD(!1,t))throw new Error(`${e}: array of numbers expected`)}function y9(...e){const t=a=>a,n=(a,c)=>u=>a(c(u)),r=e.map(a=>a.encode).reduceRight(n,t),i=e.map(a=>a.decode).reduce(n,t);return{encode:r,decode:i}}function b9(e){const t=typeof e=="string"?e.split(""):e,n=t.length;np("alphabet",t);const r=new Map(t.map((i,a)=>[i,a]));return{encode:i=>(Ab(i),i.map(a=>{if(!Number.isSafeInteger(a)||a<0||a>=n)throw new Error(`alphabet.encode: digit index outside alphabet "${a}". Allowed: ${e}`);return t[a]})),decode:i=>(Ab(i),i.map(a=>{tp("alphabet.decode",a);const c=r.get(a);if(c===void 0)throw new Error(`Unknown letter: "${a}". Allowed: ${e}`);return c}))}}function v9(e=""){return tp("join",e),{encode:t=>(np("join.decode",t),t.join(e)),decode:t=>(tp("join.decode",t),t.split(e))}}function w9(e,t="="){return Vv(e),tp("padding",t),{encode(n){for(np("padding.encode",n);n.length*e%8;)n.push(t);return n},decode(n){np("padding.decode",n);let r=n.length;if(r*e%8)throw new Error("padding: invalid, string should have whole number of bytes");for(;r>0&&n[r-1]===t;r--)if((r-1)*e%8===0)throw new Error("padding: invalid, string has too much padding");return n.slice(0,r)}}}const pD=(e,t)=>t===0?e:pD(t,e%t),rp=(e,t)=>e+(t-pD(e,t)),t0=(()=>{let e=[];for(let t=0;t<40;t++)e.push(2**t);return e})();function bx(e,t,n,r){if(Ab(e),t<=0||t>32)throw new Error(`convertRadix2: wrong from=${t}`);if(n<=0||n>32)throw new Error(`convertRadix2: wrong to=${n}`);if(rp(t,n)>32)throw new Error(`convertRadix2: carry overflow from=${t} to=${n} carryBits=${rp(t,n)}`);let i=0,a=0;const c=t0[t],u=t0[n]-1,f=[];for(const d of e){if(Vv(d),d>=c)throw new Error(`convertRadix2: invalid data word=${d} from=${t}`);if(i=i<<t|d,a+t>32)throw new Error(`convertRadix2: carry overflow pos=${a} from=${t}`);for(a+=t;a>=n;a-=n)f.push((i>>a-n&u)>>>0);const p=t0[a];if(p===void 0)throw new Error("invalid carry");i&=p-1}if(i=i<<n-a&u,!r&&a>=t)throw new Error("Excess padding");if(!r&&i>0)throw new Error(`Non-zero padding: ${i}`);return r&&a>0&&f.push(i>>>0),f}function E9(e,t=!1){if(Vv(e),e<=0||e>32)throw new Error("radix2: bits should be in (0..32]");if(rp(8,e)>32||rp(e,8)>32)throw new Error("radix2: carry overflow");return{encode:n=>{if(!g9(n))throw new Error("radix2.encode input should be Uint8Array");return bx(Array.from(n),8,e,!t)},decode:n=>(m9("radix2.decode",n),Uint8Array.from(bx(n,e,8,t)))}}const S9=y9(E9(5),b9("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),w9(5),v9("")),_9=e=>JSON.stringify(e,(t,n)=>typeof n=="bigint"?n.toString()+"n":n),x9=e=>{const t=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,n=e.replace(t,'$1"$2n"$3');return JSON.parse(n,(r,i)=>typeof i=="string"&&i.match(/^\d+n$/)?BigInt(i.substring(0,i.length-1)):i)};function la(e){if(typeof e!="string")throw new Error(`Cannot safe json parse value of type ${typeof e}`);try{return x9(e)}catch{return e}}function ys(e){return typeof e=="string"?e:_9(e)||""}function A9(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function gD(e,...t){if(!A9(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function vx(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function R9(e,t){gD(e);const n=t.outputLen;if(e.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const yc=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const n0=e=>new DataView(e.buffer,e.byteOffset,e.byteLength);function O9(e){if(typeof e!="string")throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array(new TextEncoder().encode(e))}function mD(e){return typeof e=="string"&&(e=O9(e)),gD(e),e}let T9=class{clone(){return this._cloneInto()}};function D9(e){const t=r=>e().update(mD(r)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function yD(e=32){if(yc&&typeof yc.getRandomValues=="function")return yc.getRandomValues(new Uint8Array(e));if(yc&&typeof yc.randomBytes=="function")return yc.randomBytes(e);throw new Error("crypto.getRandomValues must be defined")}function C9(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const i=BigInt(32),a=BigInt(4294967295),c=Number(n>>i&a),u=Number(n&a),f=r?4:0,d=r?0:4;e.setUint32(t+f,c,r),e.setUint32(t+d,u,r)}let I9=class extends T9{constructor(t,n,r,i){super(),this.blockLen=t,this.outputLen=n,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=n0(this.buffer)}update(t){vx(this);const{view:n,buffer:r,blockLen:i}=this;t=mD(t);const a=t.length;for(let c=0;c<a;){const u=Math.min(i-this.pos,a-c);if(u===i){const f=n0(t);for(;i<=a-c;c+=i)this.process(f,c);continue}r.set(t.subarray(c,c+u),this.pos),this.pos+=u,c+=u,this.pos===i&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){vx(this),R9(t,this),this.finished=!0;const{buffer:n,view:r,blockLen:i,isLE:a}=this;let{pos:c}=this;n[c++]=128,this.buffer.subarray(c).fill(0),this.padOffset>i-c&&(this.process(r,0),c=0);for(let g=c;g<i;g++)n[g]=0;C9(r,i-8,BigInt(this.length*8),a),this.process(r,0);const u=n0(t),f=this.outputLen;if(f%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const d=f/4,p=this.get();if(d>p.length)throw new Error("_sha2: outputLen bigger than state");for(let g=0;g<d;g++)u.setUint32(4*g,p[g],a)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:r,length:i,finished:a,destroyed:c,pos:u}=this;return t.length=i,t.pos=u,t.finished=a,t.destroyed=c,i%n&&t.buffer.set(r),t}};const ch=BigInt(2**32-1),Rb=BigInt(32);function bD(e,t=!1){return t?{h:Number(e&ch),l:Number(e>>Rb&ch)}:{h:Number(e>>Rb&ch)|0,l:Number(e&ch)|0}}function N9(e,t=!1){let n=new Uint32Array(e.length),r=new Uint32Array(e.length);for(let i=0;i<e.length;i++){const{h:a,l:c}=bD(e[i],t);[n[i],r[i]]=[a,c]}return[n,r]}const $9=(e,t)=>BigInt(e>>>0)<<Rb|BigInt(t>>>0),U9=(e,t,n)=>e>>>n,B9=(e,t,n)=>e<<32-n|t>>>n,P9=(e,t,n)=>e>>>n|t<<32-n,k9=(e,t,n)=>e<<32-n|t>>>n,M9=(e,t,n)=>e<<64-n|t>>>n-32,L9=(e,t,n)=>e>>>n-32|t<<64-n,j9=(e,t)=>t,z9=(e,t)=>e,q9=(e,t,n)=>e<<n|t>>>32-n,H9=(e,t,n)=>t<<n|e>>>32-n,F9=(e,t,n)=>t<<n-32|e>>>64-n,V9=(e,t,n)=>e<<n-32|t>>>64-n;function G9(e,t,n,r){const i=(t>>>0)+(r>>>0);return{h:e+n+(i/2**32|0)|0,l:i|0}}const K9=(e,t,n)=>(e>>>0)+(t>>>0)+(n>>>0),W9=(e,t,n,r)=>t+n+r+(e/2**32|0)|0,Y9=(e,t,n,r)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0),X9=(e,t,n,r,i)=>t+n+r+i+(e/2**32|0)|0,Z9=(e,t,n,r,i)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0)+(i>>>0),Q9=(e,t,n,r,i,a)=>t+n+r+i+a+(e/2**32|0)|0,$e={fromBig:bD,split:N9,toBig:$9,shrSH:U9,shrSL:B9,rotrSH:P9,rotrSL:k9,rotrBH:M9,rotrBL:L9,rotr32H:j9,rotr32L:z9,rotlSH:q9,rotlSL:H9,rotlBH:F9,rotlBL:V9,add:G9,add3L:K9,add3H:W9,add4L:Y9,add4H:X9,add5H:Q9,add5L:Z9},[J9,e7]=$e.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),Vs=new Uint32Array(80),Gs=new Uint32Array(80);let t7=class extends I9{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:t,Al:n,Bh:r,Bl:i,Ch:a,Cl:c,Dh:u,Dl:f,Eh:d,El:p,Fh:g,Fl:y,Gh:b,Gl:v,Hh:E,Hl:S}=this;return[t,n,r,i,a,c,u,f,d,p,g,y,b,v,E,S]}set(t,n,r,i,a,c,u,f,d,p,g,y,b,v,E,S){this.Ah=t|0,this.Al=n|0,this.Bh=r|0,this.Bl=i|0,this.Ch=a|0,this.Cl=c|0,this.Dh=u|0,this.Dl=f|0,this.Eh=d|0,this.El=p|0,this.Fh=g|0,this.Fl=y|0,this.Gh=b|0,this.Gl=v|0,this.Hh=E|0,this.Hl=S|0}process(t,n){for(let O=0;O<16;O++,n+=4)Vs[O]=t.getUint32(n),Gs[O]=t.getUint32(n+=4);for(let O=16;O<80;O++){const U=Vs[O-15]|0,N=Gs[O-15]|0,I=$e.rotrSH(U,N,1)^$e.rotrSH(U,N,8)^$e.shrSH(U,N,7),j=$e.rotrSL(U,N,1)^$e.rotrSL(U,N,8)^$e.shrSL(U,N,7),z=Vs[O-2]|0,P=Gs[O-2]|0,G=$e.rotrSH(z,P,19)^$e.rotrBH(z,P,61)^$e.shrSH(z,P,6),F=$e.rotrSL(z,P,19)^$e.rotrBL(z,P,61)^$e.shrSL(z,P,6),K=$e.add4L(j,F,Gs[O-7],Gs[O-16]),re=$e.add4H(K,I,G,Vs[O-7],Vs[O-16]);Vs[O]=re|0,Gs[O]=K|0}let{Ah:r,Al:i,Bh:a,Bl:c,Ch:u,Cl:f,Dh:d,Dl:p,Eh:g,El:y,Fh:b,Fl:v,Gh:E,Gl:S,Hh:x,Hl:T}=this;for(let O=0;O<80;O++){const U=$e.rotrSH(g,y,14)^$e.rotrSH(g,y,18)^$e.rotrBH(g,y,41),N=$e.rotrSL(g,y,14)^$e.rotrSL(g,y,18)^$e.rotrBL(g,y,41),I=g&b^~g&E,j=y&v^~y&S,z=$e.add5L(T,N,j,e7[O],Gs[O]),P=$e.add5H(z,x,U,I,J9[O],Vs[O]),G=z|0,F=$e.rotrSH(r,i,28)^$e.rotrBH(r,i,34)^$e.rotrBH(r,i,39),K=$e.rotrSL(r,i,28)^$e.rotrBL(r,i,34)^$e.rotrBL(r,i,39),re=r&a^r&u^a&u,J=i&c^i&f^c&f;x=E|0,T=S|0,E=b|0,S=v|0,b=g|0,v=y|0,{h:g,l:y}=$e.add(d|0,p|0,P|0,G|0),d=u|0,p=f|0,u=a|0,f=c|0,a=r|0,c=i|0;const D=$e.add3L(G,K,J);r=$e.add3H(D,P,F,re),i=D|0}({h:r,l:i}=$e.add(this.Ah|0,this.Al|0,r|0,i|0)),{h:a,l:c}=$e.add(this.Bh|0,this.Bl|0,a|0,c|0),{h:u,l:f}=$e.add(this.Ch|0,this.Cl|0,u|0,f|0),{h:d,l:p}=$e.add(this.Dh|0,this.Dl|0,d|0,p|0),{h:g,l:y}=$e.add(this.Eh|0,this.El|0,g|0,y|0),{h:b,l:v}=$e.add(this.Fh|0,this.Fl|0,b|0,v|0),{h:E,l:S}=$e.add(this.Gh|0,this.Gl|0,E|0,S|0),{h:x,l:T}=$e.add(this.Hh|0,this.Hl|0,x|0,T|0),this.set(r,i,a,c,u,f,d,p,g,y,b,v,E,S,x,T)}roundClean(){Vs.fill(0),Gs.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};const n7=D9(()=>new t7);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Gv=BigInt(0),vD=BigInt(1),r7=BigInt(2);function Kv(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function Wv(e){if(!Kv(e))throw new Error("Uint8Array expected")}function r0(e,t){if(typeof t!="boolean")throw new Error(e+" boolean expected, got "+t)}const i7=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Yv(e){Wv(e);let t="";for(let n=0;n<e.length;n++)t+=i7[e[n]];return t}function wD(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return e===""?Gv:BigInt("0x"+e)}const Qi={_0:48,_9:57,A:65,F:70,a:97,f:102};function wx(e){if(e>=Qi._0&&e<=Qi._9)return e-Qi._0;if(e>=Qi.A&&e<=Qi.F)return e-(Qi.A-10);if(e>=Qi.a&&e<=Qi.f)return e-(Qi.a-10)}function ED(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);const t=e.length,n=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(n);for(let i=0,a=0;i<n;i++,a+=2){const c=wx(e.charCodeAt(a)),u=wx(e.charCodeAt(a+1));if(c===void 0||u===void 0){const f=e[a]+e[a+1];throw new Error('hex string expected, got non-hex character "'+f+'" at index '+a)}r[i]=c*16+u}return r}function s7(e){return wD(Yv(e))}function Mh(e){return Wv(e),wD(Yv(Uint8Array.from(e).reverse()))}function SD(e,t){return ED(e.toString(16).padStart(t*2,"0"))}function Ob(e,t){return SD(e,t).reverse()}function Ji(e,t,n){let r;if(typeof t=="string")try{r=ED(t)}catch(a){throw new Error(e+" must be hex string or Uint8Array, cause: "+a)}else if(Kv(t))r=Uint8Array.from(t);else throw new Error(e+" must be hex string or Uint8Array");const i=r.length;if(typeof n=="number"&&i!==n)throw new Error(e+" of length "+n+" expected, got "+i);return r}function Ex(...e){let t=0;for(let r=0;r<e.length;r++){const i=e[r];Wv(i),t+=i.length}const n=new Uint8Array(t);for(let r=0,i=0;r<e.length;r++){const a=e[r];n.set(a,i),i+=a.length}return n}const i0=e=>typeof e=="bigint"&&Gv<=e;function o7(e,t,n){return i0(e)&&i0(t)&&i0(n)&&t<=e&&e<n}function Su(e,t,n,r){if(!o7(t,n,r))throw new Error("expected valid "+e+": "+n+" <= n < "+r+", got "+t)}function a7(e){let t;for(t=0;e>Gv;e>>=vD,t+=1);return t}const c7=e=>(r7<<BigInt(e-1))-vD,l7={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",stringOrUint8Array:e=>typeof e=="string"||Kv(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function Xv(e,t,n={}){const r=(i,a,c)=>{const u=l7[a];if(typeof u!="function")throw new Error("invalid validator function");const f=e[i];if(!(c&&f===void 0)&&!u(f,e))throw new Error("param "+String(i)+" is invalid. Expected "+a+", got "+f)};for(const[i,a]of Object.entries(t))r(i,a,!1);for(const[i,a]of Object.entries(n))r(i,a,!0);return e}function Sx(e){const t=new WeakMap;return(n,...r)=>{const i=t.get(n);if(i!==void 0)return i;const a=e(n,...r);return t.set(n,a),a}}const ln=BigInt(0),Pt=BigInt(1),Wo=BigInt(2),u7=BigInt(3),Tb=BigInt(4),_x=BigInt(5),xx=BigInt(8);function Xt(e,t){const n=e%t;return n>=ln?n:t+n}function f7(e,t,n){if(t<ln)throw new Error("invalid exponent, negatives unsupported");if(n<=ln)throw new Error("invalid modulus");if(n===Pt)return ln;let r=Pt;for(;t>ln;)t&Pt&&(r=r*e%n),e=e*e%n,t>>=Pt;return r}function hi(e,t,n){let r=e;for(;t-- >ln;)r*=r,r%=n;return r}function Ax(e,t){if(e===ln)throw new Error("invert: expected non-zero number");if(t<=ln)throw new Error("invert: expected positive modulus, got "+t);let n=Xt(e,t),r=t,i=ln,a=Pt;for(;n!==ln;){const c=r/n,u=r%n,f=i-a*c;r=n,n=u,i=a,a=f}if(r!==Pt)throw new Error("invert: does not exist");return Xt(i,t)}function d7(e){const t=(e-Pt)/Wo;let n,r,i;for(n=e-Pt,r=0;n%Wo===ln;n/=Wo,r++);for(i=Wo;i<e&&f7(i,t,e)!==e-Pt;i++)if(i>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const c=(e+Pt)/Tb;return function(u,f){const d=u.pow(f,c);if(!u.eql(u.sqr(d),f))throw new Error("Cannot find square root");return d}}const a=(n+Pt)/Wo;return function(c,u){if(c.pow(u,t)===c.neg(c.ONE))throw new Error("Cannot find square root");let f=r,d=c.pow(c.mul(c.ONE,i),n),p=c.pow(u,a),g=c.pow(u,n);for(;!c.eql(g,c.ONE);){if(c.eql(g,c.ZERO))return c.ZERO;let y=1;for(let v=c.sqr(g);y<f&&!c.eql(v,c.ONE);y++)v=c.sqr(v);const b=c.pow(d,Pt<<BigInt(f-y-1));d=c.sqr(b),p=c.mul(p,b),g=c.mul(g,d),f=y}return p}}function h7(e){if(e%Tb===u7){const t=(e+Pt)/Tb;return function(n,r){const i=n.pow(r,t);if(!n.eql(n.sqr(i),r))throw new Error("Cannot find square root");return i}}if(e%xx===_x){const t=(e-_x)/xx;return function(n,r){const i=n.mul(r,Wo),a=n.pow(i,t),c=n.mul(r,a),u=n.mul(n.mul(c,Wo),a),f=n.mul(c,n.sub(u,n.ONE));if(!n.eql(n.sqr(f),r))throw new Error("Cannot find square root");return f}}return d7(e)}const p7=(e,t)=>(Xt(e,t)&Pt)===Pt,g7=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function m7(e){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=g7.reduce((r,i)=>(r[i]="function",r),t);return Xv(e,n)}function y7(e,t,n){if(n<ln)throw new Error("invalid exponent, negatives unsupported");if(n===ln)return e.ONE;if(n===Pt)return t;let r=e.ONE,i=t;for(;n>ln;)n&Pt&&(r=e.mul(r,i)),i=e.sqr(i),n>>=Pt;return r}function b7(e,t){const n=new Array(t.length),r=t.reduce((a,c,u)=>e.is0(c)?a:(n[u]=a,e.mul(a,c)),e.ONE),i=e.inv(r);return t.reduceRight((a,c,u)=>e.is0(c)?a:(n[u]=e.mul(a,n[u]),e.mul(a,c)),i),n}function _D(e,t){const n=t!==void 0?t:e.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function xD(e,t,n=!1,r={}){if(e<=ln)throw new Error("invalid field: expected ORDER > 0, got "+e);const{nBitLength:i,nByteLength:a}=_D(e,t);if(a>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let c;const u=Object.freeze({ORDER:e,isLE:n,BITS:i,BYTES:a,MASK:c7(i),ZERO:ln,ONE:Pt,create:f=>Xt(f,e),isValid:f=>{if(typeof f!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof f);return ln<=f&&f<e},is0:f=>f===ln,isOdd:f=>(f&Pt)===Pt,neg:f=>Xt(-f,e),eql:(f,d)=>f===d,sqr:f=>Xt(f*f,e),add:(f,d)=>Xt(f+d,e),sub:(f,d)=>Xt(f-d,e),mul:(f,d)=>Xt(f*d,e),pow:(f,d)=>y7(u,f,d),div:(f,d)=>Xt(f*Ax(d,e),e),sqrN:f=>f*f,addN:(f,d)=>f+d,subN:(f,d)=>f-d,mulN:(f,d)=>f*d,inv:f=>Ax(f,e),sqrt:r.sqrt||(f=>(c||(c=h7(e)),c(u,f))),invertBatch:f=>b7(u,f),cmov:(f,d,p)=>p?d:f,toBytes:f=>n?Ob(f,a):SD(f,a),fromBytes:f=>{if(f.length!==a)throw new Error("Field.fromBytes: expected "+a+" bytes, got "+f.length);return n?Mh(f):s7(f)}});return Object.freeze(u)}const Rx=BigInt(0),lh=BigInt(1);function s0(e,t){const n=t.negate();return e?n:t}function AD(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+e)}function o0(e,t){AD(e,t);const n=Math.ceil(t/e)+1,r=2**(e-1);return{windows:n,windowSize:r}}function v7(e,t){if(!Array.isArray(e))throw new Error("array expected");e.forEach((n,r)=>{if(!(n instanceof t))throw new Error("invalid point at index "+r)})}function w7(e,t){if(!Array.isArray(e))throw new Error("array of scalars expected");e.forEach((n,r)=>{if(!t.isValid(n))throw new Error("invalid scalar at index "+r)})}const a0=new WeakMap,RD=new WeakMap;function c0(e){return RD.get(e)||1}function E7(e,t){return{constTimeNegate:s0,hasPrecomputes(n){return c0(n)!==1},unsafeLadder(n,r,i=e.ZERO){let a=n;for(;r>Rx;)r&lh&&(i=i.add(a)),a=a.double(),r>>=lh;return i},precomputeWindow(n,r){const{windows:i,windowSize:a}=o0(r,t),c=[];let u=n,f=u;for(let d=0;d<i;d++){f=u,c.push(f);for(let p=1;p<a;p++)f=f.add(u),c.push(f);u=f.double()}return c},wNAF(n,r,i){const{windows:a,windowSize:c}=o0(n,t);let u=e.ZERO,f=e.BASE;const d=BigInt(2**n-1),p=2**n,g=BigInt(n);for(let y=0;y<a;y++){const b=y*c;let v=Number(i&d);i>>=g,v>c&&(v-=p,i+=lh);const E=b,S=b+Math.abs(v)-1,x=y%2!==0,T=v<0;v===0?f=f.add(s0(x,r[E])):u=u.add(s0(T,r[S]))}return{p:u,f}},wNAFUnsafe(n,r,i,a=e.ZERO){const{windows:c,windowSize:u}=o0(n,t),f=BigInt(2**n-1),d=2**n,p=BigInt(n);for(let g=0;g<c;g++){const y=g*u;if(i===Rx)break;let b=Number(i&f);if(i>>=p,b>u&&(b-=d,i+=lh),b===0)continue;let v=r[y+Math.abs(b)-1];b<0&&(v=v.negate()),a=a.add(v)}return a},getPrecomputes(n,r,i){let a=a0.get(r);return a||(a=this.precomputeWindow(r,n),n!==1&&a0.set(r,i(a))),a},wNAFCached(n,r,i){const a=c0(n);return this.wNAF(a,this.getPrecomputes(a,n,i),r)},wNAFCachedUnsafe(n,r,i,a){const c=c0(n);return c===1?this.unsafeLadder(n,r,a):this.wNAFUnsafe(c,this.getPrecomputes(c,n,i),r,a)},setWindowSize(n,r){AD(r,t),RD.set(n,r),a0.delete(n)}}}function S7(e,t,n,r){if(v7(n,e),w7(r,t),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const i=e.ZERO,a=a7(BigInt(n.length)),c=a>12?a-3:a>4?a-2:a?2:1,u=(1<<c)-1,f=new Array(u+1).fill(i),d=Math.floor((t.BITS-1)/c)*c;let p=i;for(let g=d;g>=0;g-=c){f.fill(i);for(let b=0;b<r.length;b++){const v=r[b],E=Number(v>>BigInt(g)&BigInt(u));f[E]=f[E].add(n[b])}let y=i;for(let b=f.length-1,v=i;b>0;b--)v=v.add(f[b]),y=y.add(v);if(p=p.add(y),g!==0)for(let b=0;b<c;b++)p=p.double()}return p}function _7(e){return m7(e.Fp),Xv(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({..._D(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}const Yr=BigInt(0),Hn=BigInt(1),uh=BigInt(2),x7=BigInt(8),A7={zip215:!0};function R7(e){const t=_7(e);return Xv(e,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...t})}function O7(e){const t=R7(e),{Fp:n,n:r,prehash:i,hash:a,randomBytes:c,nByteLength:u,h:f}=t,d=uh<<BigInt(u*8)-Hn,p=n.create,g=xD(t.n,t.nBitLength),y=t.uvRatio||((D,R)=>{try{return{isValid:!0,value:n.sqrt(D*n.inv(R))}}catch{return{isValid:!1,value:Yr}}}),b=t.adjustScalarBytes||(D=>D),v=t.domain||((D,R,L)=>{if(r0("phflag",L),R.length||L)throw new Error("Contexts/pre-hash are not supported");return D});function E(D,R){Su("coordinate "+D,R,Yr,d)}function S(D){if(!(D instanceof O))throw new Error("ExtendedPoint expected")}const x=Sx((D,R)=>{const{ex:L,ey:V,ez:X}=D,$=D.is0();R==null&&(R=$?x7:n.inv(X));const W=p(L*R),te=p(V*R),se=p(X*R);if($)return{x:Yr,y:Hn};if(se!==Hn)throw new Error("invZ was invalid");return{x:W,y:te}}),T=Sx(D=>{const{a:R,d:L}=t;if(D.is0())throw new Error("bad point: ZERO");const{ex:V,ey:X,ez:$,et:W}=D,te=p(V*V),se=p(X*X),ne=p($*$),ue=p(ne*ne),me=p(te*R),Re=p(ne*p(me+se)),we=p(ue+p(L*p(te*se)));if(Re!==we)throw new Error("bad point: equation left != right (1)");const _e=p(V*X),ze=p($*W);if(_e!==ze)throw new Error("bad point: equation left != right (2)");return!0});class O{constructor(R,L,V,X){this.ex=R,this.ey=L,this.ez=V,this.et=X,E("x",R),E("y",L),E("z",V),E("t",X),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(R){if(R instanceof O)throw new Error("extended point not allowed");const{x:L,y:V}=R||{};return E("x",L),E("y",V),new O(L,V,Hn,p(L*V))}static normalizeZ(R){const L=n.invertBatch(R.map(V=>V.ez));return R.map((V,X)=>V.toAffine(L[X])).map(O.fromAffine)}static msm(R,L){return S7(O,g,R,L)}_setWindowSize(R){I.setWindowSize(this,R)}assertValidity(){T(this)}equals(R){S(R);const{ex:L,ey:V,ez:X}=this,{ex:$,ey:W,ez:te}=R,se=p(L*te),ne=p($*X),ue=p(V*te),me=p(W*X);return se===ne&&ue===me}is0(){return this.equals(O.ZERO)}negate(){return new O(p(-this.ex),this.ey,this.ez,p(-this.et))}double(){const{a:R}=t,{ex:L,ey:V,ez:X}=this,$=p(L*L),W=p(V*V),te=p(uh*p(X*X)),se=p(R*$),ne=L+V,ue=p(p(ne*ne)-$-W),me=se+W,Re=me-te,we=se-W,_e=p(ue*Re),ze=p(me*we),Xe=p(ue*we),Vt=p(Re*me);return new O(_e,ze,Vt,Xe)}add(R){S(R);const{a:L,d:V}=t,{ex:X,ey:$,ez:W,et:te}=this,{ex:se,ey:ne,ez:ue,et:me}=R;if(L===BigInt(-1)){const Bi=p(($-X)*(ne+se)),En=p(($+X)*(ne-se)),Qt=p(En-Bi);if(Qt===Yr)return this.double();const Jt=p(W*uh*me),Sr=p(te*uh*ue),ai=Sr+Jt,Sn=En+Bi,sr=Sr-Jt,B=p(ai*Qt),_=p(Sn*sr),A=p(ai*sr),H=p(Qt*Sn);return new O(B,_,H,A)}const Re=p(X*se),we=p($*ne),_e=p(te*V*me),ze=p(W*ue),Xe=p((X+$)*(se+ne)-Re-we),Vt=ze-_e,Ot=ze+_e,_t=p(we-L*Re),We=p(Xe*Vt),Vr=p(Ot*_t),xt=p(Xe*_t),vo=p(Vt*Ot);return new O(We,Vr,vo,xt)}subtract(R){return this.add(R.negate())}wNAF(R){return I.wNAFCached(this,R,O.normalizeZ)}multiply(R){const L=R;Su("scalar",L,Hn,r);const{p:V,f:X}=this.wNAF(L);return O.normalizeZ([V,X])[0]}multiplyUnsafe(R,L=O.ZERO){const V=R;return Su("scalar",V,Yr,r),V===Yr?N:this.is0()||V===Hn?this:I.wNAFCachedUnsafe(this,V,O.normalizeZ,L)}isSmallOrder(){return this.multiplyUnsafe(f).is0()}isTorsionFree(){return I.unsafeLadder(this,r).is0()}toAffine(R){return x(this,R)}clearCofactor(){const{h:R}=t;return R===Hn?this:this.multiplyUnsafe(R)}static fromHex(R,L=!1){const{d:V,a:X}=t,$=n.BYTES;R=Ji("pointHex",R,$),r0("zip215",L);const W=R.slice(),te=R[$-1];W[$-1]=te&-129;const se=Mh(W),ne=L?d:n.ORDER;Su("pointHex.y",se,Yr,ne);const ue=p(se*se),me=p(ue-Hn),Re=p(V*ue-X);let{isValid:we,value:_e}=y(me,Re);if(!we)throw new Error("Point.fromHex: invalid y coordinate");const ze=(_e&Hn)===Hn,Xe=(te&128)!==0;if(!L&&_e===Yr&&Xe)throw new Error("Point.fromHex: x=0 and x_0=1");return Xe!==ze&&(_e=p(-_e)),O.fromAffine({x:_e,y:se})}static fromPrivateKey(R){return P(R).point}toRawBytes(){const{x:R,y:L}=this.toAffine(),V=Ob(L,n.BYTES);return V[V.length-1]|=R&Hn?128:0,V}toHex(){return Yv(this.toRawBytes())}}O.BASE=new O(t.Gx,t.Gy,Hn,p(t.Gx*t.Gy)),O.ZERO=new O(Yr,Hn,Hn,Yr);const{BASE:U,ZERO:N}=O,I=E7(O,u*8);function j(D){return Xt(D,r)}function z(D){return j(Mh(D))}function P(D){const R=n.BYTES;D=Ji("private key",D,R);const L=Ji("hashed private key",a(D),2*R),V=b(L.slice(0,R)),X=L.slice(R,2*R),$=z(V),W=U.multiply($),te=W.toRawBytes();return{head:V,prefix:X,scalar:$,point:W,pointBytes:te}}function G(D){return P(D).pointBytes}function F(D=new Uint8Array,...R){const L=Ex(...R);return z(a(v(L,Ji("context",D),!!i)))}function K(D,R,L={}){D=Ji("message",D),i&&(D=i(D));const{prefix:V,scalar:X,pointBytes:$}=P(R),W=F(L.context,V,D),te=U.multiply(W).toRawBytes(),se=F(L.context,te,$,D),ne=j(W+se*X);Su("signature.s",ne,Yr,r);const ue=Ex(te,Ob(ne,n.BYTES));return Ji("result",ue,n.BYTES*2)}const re=A7;function J(D,R,L,V=re){const{context:X,zip215:$}=V,W=n.BYTES;D=Ji("signature",D,2*W),R=Ji("message",R),L=Ji("publicKey",L,W),$!==void 0&&r0("zip215",$),i&&(R=i(R));const te=Mh(D.slice(W,2*W));let se,ne,ue;try{se=O.fromHex(L,$),ne=O.fromHex(D.slice(0,W),$),ue=U.multiplyUnsafe(te)}catch{return!1}if(!$&&se.isSmallOrder())return!1;const me=F(X,ne.toRawBytes(),se.toRawBytes(),R);return ne.add(se.multiplyUnsafe(me)).subtract(ue).clearCofactor().equals(O.ZERO)}return U._setWindowSize(8),{CURVE:t,getPublicKey:G,sign:K,verify:J,ExtendedPoint:O,utils:{getExtendedPublicKey:P,randomPrivateKey:()=>c(n.BYTES),precompute(D=8,R=O.BASE){return R._setWindowSize(D),R.multiply(BigInt(3)),R}}}}BigInt(0),BigInt(1);const Zv=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),Ox=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const T7=BigInt(1),Tx=BigInt(2);BigInt(3);const D7=BigInt(5),C7=BigInt(8);function I7(e){const t=BigInt(10),n=BigInt(20),r=BigInt(40),i=BigInt(80),a=Zv,c=e*e%a*e%a,u=hi(c,Tx,a)*c%a,f=hi(u,T7,a)*e%a,d=hi(f,D7,a)*f%a,p=hi(d,t,a)*d%a,g=hi(p,n,a)*p%a,y=hi(g,r,a)*g%a,b=hi(y,i,a)*y%a,v=hi(b,i,a)*y%a,E=hi(v,t,a)*d%a;return{pow_p_5_8:hi(E,Tx,a)*e%a,b2:c}}function N7(e){return e[0]&=248,e[31]&=127,e[31]|=64,e}function $7(e,t){const n=Zv,r=Xt(t*t*t,n),i=Xt(r*r*t,n),a=I7(e*i).pow_p_5_8;let c=Xt(e*r*a,n);const u=Xt(t*c*c,n),f=c,d=Xt(c*Ox,n),p=u===e,g=u===Xt(-e,n),y=u===Xt(-e*Ox,n);return p&&(c=f),(g||y)&&(c=d),p7(c,n)&&(c=Xt(-c,n)),{isValid:p||g,value:c}}const U7=xD(Zv,void 0,!0),B7={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:U7,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:C7,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:n7,randomBytes:yD,adjustScalarBytes:N7,uvRatio:$7},OD=O7(B7),P7="EdDSA",k7="JWT",ip=".",$p="base64url",TD="utf8",DD="utf8",M7=":",L7="did",j7="key",Dx="base58btc",z7="z",q7="K36",H7=32;function Qv(e){return globalThis.Buffer!=null?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}function CD(e=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?Qv(globalThis.Buffer.allocUnsafe(e)):new Uint8Array(e)}function ID(e,t){t||(t=e.reduce((i,a)=>i+a.length,0));const n=CD(t);let r=0;for(const i of e)n.set(i,r),r+=i.length;return Qv(n)}function F7(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var i=0;i<e.length;i++){var a=e.charAt(i),c=a.charCodeAt(0);if(n[c]!==255)throw new TypeError(a+" is ambiguous");n[c]=i}var u=e.length,f=e.charAt(0),d=Math.log(u)/Math.log(256),p=Math.log(256)/Math.log(u);function g(v){if(v instanceof Uint8Array||(ArrayBuffer.isView(v)?v=new Uint8Array(v.buffer,v.byteOffset,v.byteLength):Array.isArray(v)&&(v=Uint8Array.from(v))),!(v instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(v.length===0)return"";for(var E=0,S=0,x=0,T=v.length;x!==T&&v[x]===0;)x++,E++;for(var O=(T-x)*p+1>>>0,U=new Uint8Array(O);x!==T;){for(var N=v[x],I=0,j=O-1;(N!==0||I<S)&&j!==-1;j--,I++)N+=256*U[j]>>>0,U[j]=N%u>>>0,N=N/u>>>0;if(N!==0)throw new Error("Non-zero carry");S=I,x++}for(var z=O-S;z!==O&&U[z]===0;)z++;for(var P=f.repeat(E);z<O;++z)P+=e.charAt(U[z]);return P}function y(v){if(typeof v!="string")throw new TypeError("Expected String");if(v.length===0)return new Uint8Array;var E=0;if(v[E]!==" "){for(var S=0,x=0;v[E]===f;)S++,E++;for(var T=(v.length-E)*d+1>>>0,O=new Uint8Array(T);v[E];){var U=n[v.charCodeAt(E)];if(U===255)return;for(var N=0,I=T-1;(U!==0||N<x)&&I!==-1;I--,N++)U+=u*O[I]>>>0,O[I]=U%256>>>0,U=U/256>>>0;if(U!==0)throw new Error("Non-zero carry");x=N,E++}if(v[E]!==" "){for(var j=T-x;j!==T&&O[j]===0;)j++;for(var z=new Uint8Array(S+(T-j)),P=S;j!==T;)z[P++]=O[j++];return z}}}function b(v){var E=y(v);if(E)return E;throw new Error(`Non-${t} character`)}return{encode:g,decodeUnsafe:y,decode:b}}var V7=F7,G7=V7;const ND=e=>{if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")},K7=e=>new TextEncoder().encode(e),W7=e=>new TextDecoder().decode(e);let Y7=class{constructor(t,n,r){this.name=t,this.prefix=n,this.baseEncode=r}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}},X7=class{constructor(t,n,r){if(this.name=t,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return $D(this,t)}},Z7=class{constructor(t){this.decoders=t}or(t){return $D(this,t)}decode(t){const n=t[0],r=this.decoders[n];if(r)return r.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const $D=(e,t)=>new Z7({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});let Q7=class{constructor(t,n,r,i){this.name=t,this.prefix=n,this.baseEncode=r,this.baseDecode=i,this.encoder=new Y7(t,n,r),this.decoder=new X7(t,n,i)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}};const Up=({name:e,prefix:t,encode:n,decode:r})=>new Q7(e,t,n,r),Df=({prefix:e,name:t,alphabet:n})=>{const{encode:r,decode:i}=G7(n,t);return Up({prefix:e,name:t,encode:r,decode:a=>ND(i(a))})},J7=(e,t,n,r)=>{const i={};for(let p=0;p<t.length;++p)i[t[p]]=p;let a=e.length;for(;e[a-1]==="=";)--a;const c=new Uint8Array(a*n/8|0);let u=0,f=0,d=0;for(let p=0;p<a;++p){const g=i[e[p]];if(g===void 0)throw new SyntaxError(`Non-${r} character`);f=f<<n|g,u+=n,u>=8&&(u-=8,c[d++]=255&f>>u)}if(u>=n||255&f<<8-u)throw new SyntaxError("Unexpected end of data");return c},ez=(e,t,n)=>{const r=t[t.length-1]==="=",i=(1<<n)-1;let a="",c=0,u=0;for(let f=0;f<e.length;++f)for(u=u<<8|e[f],c+=8;c>n;)c-=n,a+=t[i&u>>c];if(c&&(a+=t[i&u<<n-c]),r)for(;a.length*n&7;)a+="=";return a},bn=({name:e,prefix:t,bitsPerChar:n,alphabet:r})=>Up({prefix:t,name:e,encode(i){return ez(i,r,n)},decode(i){return J7(i,r,n,e)}}),tz=Up({prefix:"\0",name:"identity",encode:e=>W7(e),decode:e=>K7(e)});var nz=Object.freeze({__proto__:null,identity:tz});const rz=bn({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var iz=Object.freeze({__proto__:null,base2:rz});const sz=bn({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var oz=Object.freeze({__proto__:null,base8:sz});const az=Df({prefix:"9",name:"base10",alphabet:"0123456789"});var cz=Object.freeze({__proto__:null,base10:az});const lz=bn({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),uz=bn({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var fz=Object.freeze({__proto__:null,base16:lz,base16upper:uz});const dz=bn({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),hz=bn({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),pz=bn({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),gz=bn({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),mz=bn({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),yz=bn({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),bz=bn({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),vz=bn({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),wz=bn({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Ez=Object.freeze({__proto__:null,base32:dz,base32upper:hz,base32pad:pz,base32padupper:gz,base32hex:mz,base32hexupper:yz,base32hexpad:bz,base32hexpadupper:vz,base32z:wz});const Sz=Df({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),_z=Df({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var xz=Object.freeze({__proto__:null,base36:Sz,base36upper:_z});const Az=Df({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Rz=Df({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Oz=Object.freeze({__proto__:null,base58btc:Az,base58flickr:Rz});const Tz=bn({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Dz=bn({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Cz=bn({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Iz=bn({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Nz=Object.freeze({__proto__:null,base64:Tz,base64pad:Dz,base64url:Cz,base64urlpad:Iz});const UD=Array.from(""),$z=UD.reduce((e,t,n)=>(e[n]=t,e),[]),Uz=UD.reduce((e,t,n)=>(e[t.codePointAt(0)]=n,e),[]);function Bz(e){return e.reduce((t,n)=>(t+=$z[n],t),"")}function Pz(e){const t=[];for(const n of e){const r=Uz[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);t.push(r)}return new Uint8Array(t)}const kz=Up({prefix:"",name:"base256emoji",encode:Bz,decode:Pz});var Mz=Object.freeze({__proto__:null,base256emoji:kz}),Lz=BD,Cx=128,jz=-128,zz=Math.pow(2,31);function BD(e,t,n){t=t||[],n=n||0;for(var r=n;e>=zz;)t[n++]=e&255|Cx,e/=128;for(;e&jz;)t[n++]=e&255|Cx,e>>>=7;return t[n]=e|0,BD.bytes=n-r+1,t}var qz=Db,Hz=128,Ix=127;function Db(e,r){var n=0,r=r||0,i=0,a=r,c,u=e.length;do{if(a>=u)throw Db.bytes=0,new RangeError("Could not decode varint");c=e[a++],n+=i<28?(c&Ix)<<i:(c&Ix)*Math.pow(2,i),i+=7}while(c>=Hz);return Db.bytes=a-r,n}var Fz=Math.pow(2,7),Vz=Math.pow(2,14),Gz=Math.pow(2,21),Kz=Math.pow(2,28),Wz=Math.pow(2,35),Yz=Math.pow(2,42),Xz=Math.pow(2,49),Zz=Math.pow(2,56),Qz=Math.pow(2,63),Jz=function(e){return e<Fz?1:e<Vz?2:e<Gz?3:e<Kz?4:e<Wz?5:e<Yz?6:e<Xz?7:e<Zz?8:e<Qz?9:10},eq={encode:Lz,decode:qz,encodingLength:Jz},PD=eq;const Nx=(e,t,n=0)=>(PD.encode(e,t,n),t),$x=e=>PD.encodingLength(e),Cb=(e,t)=>{const n=t.byteLength,r=$x(e),i=r+$x(n),a=new Uint8Array(i+n);return Nx(e,a,0),Nx(n,a,r),a.set(t,i),new tq(e,n,t,a)};let tq=class{constructor(t,n,r,i){this.code=t,this.size=n,this.digest=r,this.bytes=i}};const kD=({name:e,code:t,encode:n})=>new nq(e,t,n);let nq=class{constructor(t,n,r){this.name=t,this.code=n,this.encode=r}digest(t){if(t instanceof Uint8Array){const n=this.encode(t);return n instanceof Uint8Array?Cb(this.code,n):n.then(r=>Cb(this.code,r))}else throw Error("Unknown type, must be binary type")}};const MD=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),rq=kD({name:"sha2-256",code:18,encode:MD("SHA-256")}),iq=kD({name:"sha2-512",code:19,encode:MD("SHA-512")});var sq=Object.freeze({__proto__:null,sha256:rq,sha512:iq});const LD=0,oq="identity",jD=ND,aq=e=>Cb(LD,jD(e)),cq={code:LD,name:oq,encode:jD,digest:aq};var lq=Object.freeze({__proto__:null,identity:cq});new TextEncoder,new TextDecoder;const Ux={...nz,...iz,...oz,...cz,...fz,...Ez,...xz,...Oz,...Nz,...Mz};({...sq,...lq});function zD(e,t,n,r){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:n},decoder:{decode:r}}}const Bx=zD("utf8","u",e=>"u"+new TextDecoder("utf8").decode(e),e=>new TextEncoder().encode(e.substring(1))),l0=zD("ascii","a",e=>{let t="a";for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t},e=>{e=e.substring(1);const t=CD(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}),qD={utf8:Bx,"utf-8":Bx,hex:Ux.base16,latin1:l0,ascii:l0,binary:l0,...Ux};function Bp(e,t="utf8"){const n=qD[t];if(!n)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8"):n.encoder.encode(e).substring(1)}function al(e,t="utf8"){const n=qD[t];if(!n)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Qv(globalThis.Buffer.from(e,"utf-8")):n.decoder.decode(`${n.prefix}${e}`)}function Px(e){return la(Bp(al(e,$p),TD))}function sp(e){return Bp(al(ys(e),TD),$p)}function HD(e){const t=al(q7,Dx),n=z7+Bp(ID([t,e]),Dx);return[L7,j7,n].join(M7)}function uq(e){return Bp(e,$p)}function fq(e){return al(e,$p)}function dq(e){return al([sp(e.header),sp(e.payload)].join(ip),DD)}function hq(e){return[sp(e.header),sp(e.payload),uq(e.signature)].join(ip)}function Ib(e){const t=e.split(ip),n=Px(t[0]),r=Px(t[1]),i=fq(t[2]),a=al(t.slice(0,2).join(ip),DD);return{header:n,payload:r,signature:i,data:a}}function kx(e=yD(H7)){const t=OD.getPublicKey(e);return{secretKey:ID([e,t]),publicKey:t}}async function pq(e,t,n,r,i=ve.fromMiliseconds(Date.now())){const a={alg:P7,typ:k7},c=HD(r.publicKey),u=i+n,f={iss:c,sub:e,aud:t,iat:i,exp:u},d=dq({header:a,payload:f}),p=OD.sign(d,r.secretKey.slice(0,32));return hq({header:a,payload:f,signature:p})}function Jv(e){return globalThis.Buffer!=null?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}function FD(e=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?Jv(globalThis.Buffer.allocUnsafe(e)):new Uint8Array(e)}function Hu(e,t){t||(t=e.reduce((i,a)=>i+a.length,0));const n=FD(t);let r=0;for(const i of e)n.set(i,r),r+=i.length;return Jv(n)}function gq(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var i=0;i<e.length;i++){var a=e.charAt(i),c=a.charCodeAt(0);if(n[c]!==255)throw new TypeError(a+" is ambiguous");n[c]=i}var u=e.length,f=e.charAt(0),d=Math.log(u)/Math.log(256),p=Math.log(256)/Math.log(u);function g(v){if(v instanceof Uint8Array||(ArrayBuffer.isView(v)?v=new Uint8Array(v.buffer,v.byteOffset,v.byteLength):Array.isArray(v)&&(v=Uint8Array.from(v))),!(v instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(v.length===0)return"";for(var E=0,S=0,x=0,T=v.length;x!==T&&v[x]===0;)x++,E++;for(var O=(T-x)*p+1>>>0,U=new Uint8Array(O);x!==T;){for(var N=v[x],I=0,j=O-1;(N!==0||I<S)&&j!==-1;j--,I++)N+=256*U[j]>>>0,U[j]=N%u>>>0,N=N/u>>>0;if(N!==0)throw new Error("Non-zero carry");S=I,x++}for(var z=O-S;z!==O&&U[z]===0;)z++;for(var P=f.repeat(E);z<O;++z)P+=e.charAt(U[z]);return P}function y(v){if(typeof v!="string")throw new TypeError("Expected String");if(v.length===0)return new Uint8Array;var E=0;if(v[E]!==" "){for(var S=0,x=0;v[E]===f;)S++,E++;for(var T=(v.length-E)*d+1>>>0,O=new Uint8Array(T);v[E];){var U=n[v.charCodeAt(E)];if(U===255)return;for(var N=0,I=T-1;(U!==0||N<x)&&I!==-1;I--,N++)U+=u*O[I]>>>0,O[I]=U%256>>>0,U=U/256>>>0;if(U!==0)throw new Error("Non-zero carry");x=N,E++}if(v[E]!==" "){for(var j=T-x;j!==T&&O[j]===0;)j++;for(var z=new Uint8Array(S+(T-j)),P=S;j!==T;)z[P++]=O[j++];return z}}}function b(v){var E=y(v);if(E)return E;throw new Error(`Non-${t} character`)}return{encode:g,decodeUnsafe:y,decode:b}}var mq=gq,yq=mq;const bq=e=>{if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")},vq=e=>new TextEncoder().encode(e),wq=e=>new TextDecoder().decode(e);class Eq{constructor(t,n,r){this.name=t,this.prefix=n,this.baseEncode=r}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}}class Sq{constructor(t,n,r){if(this.name=t,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return VD(this,t)}}class _q{constructor(t){this.decoders=t}or(t){return VD(this,t)}decode(t){const n=t[0],r=this.decoders[n];if(r)return r.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const VD=(e,t)=>new _q({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class xq{constructor(t,n,r,i){this.name=t,this.prefix=n,this.baseEncode=r,this.baseDecode=i,this.encoder=new Eq(t,n,r),this.decoder=new Sq(t,n,i)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}}const Pp=({name:e,prefix:t,encode:n,decode:r})=>new xq(e,t,n,r),Cf=({prefix:e,name:t,alphabet:n})=>{const{encode:r,decode:i}=yq(n,t);return Pp({prefix:e,name:t,encode:r,decode:a=>bq(i(a))})},Aq=(e,t,n,r)=>{const i={};for(let p=0;p<t.length;++p)i[t[p]]=p;let a=e.length;for(;e[a-1]==="=";)--a;const c=new Uint8Array(a*n/8|0);let u=0,f=0,d=0;for(let p=0;p<a;++p){const g=i[e[p]];if(g===void 0)throw new SyntaxError(`Non-${r} character`);f=f<<n|g,u+=n,u>=8&&(u-=8,c[d++]=255&f>>u)}if(u>=n||255&f<<8-u)throw new SyntaxError("Unexpected end of data");return c},Rq=(e,t,n)=>{const r=t[t.length-1]==="=",i=(1<<n)-1;let a="",c=0,u=0;for(let f=0;f<e.length;++f)for(u=u<<8|e[f],c+=8;c>n;)c-=n,a+=t[i&u>>c];if(c&&(a+=t[i&u<<n-c]),r)for(;a.length*n&7;)a+="=";return a},vn=({name:e,prefix:t,bitsPerChar:n,alphabet:r})=>Pp({prefix:t,name:e,encode(i){return Rq(i,r,n)},decode(i){return Aq(i,r,n,e)}}),Oq=Pp({prefix:"\0",name:"identity",encode:e=>wq(e),decode:e=>vq(e)}),Tq=Object.freeze(Object.defineProperty({__proto__:null,identity:Oq},Symbol.toStringTag,{value:"Module"})),Dq=vn({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),Cq=Object.freeze(Object.defineProperty({__proto__:null,base2:Dq},Symbol.toStringTag,{value:"Module"})),Iq=vn({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),Nq=Object.freeze(Object.defineProperty({__proto__:null,base8:Iq},Symbol.toStringTag,{value:"Module"})),$q=Cf({prefix:"9",name:"base10",alphabet:"0123456789"}),Uq=Object.freeze(Object.defineProperty({__proto__:null,base10:$q},Symbol.toStringTag,{value:"Module"})),Bq=vn({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Pq=vn({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),kq=Object.freeze(Object.defineProperty({__proto__:null,base16:Bq,base16upper:Pq},Symbol.toStringTag,{value:"Module"})),Mq=vn({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Lq=vn({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),jq=vn({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),zq=vn({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),qq=vn({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Hq=vn({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Fq=vn({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Vq=vn({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Gq=vn({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),Kq=Object.freeze(Object.defineProperty({__proto__:null,base32:Mq,base32hex:qq,base32hexpad:Fq,base32hexpadupper:Vq,base32hexupper:Hq,base32pad:jq,base32padupper:zq,base32upper:Lq,base32z:Gq},Symbol.toStringTag,{value:"Module"})),Wq=Cf({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Yq=Cf({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),Xq=Object.freeze(Object.defineProperty({__proto__:null,base36:Wq,base36upper:Yq},Symbol.toStringTag,{value:"Module"})),Zq=Cf({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Qq=Cf({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),Jq=Object.freeze(Object.defineProperty({__proto__:null,base58btc:Zq,base58flickr:Qq},Symbol.toStringTag,{value:"Module"})),eH=vn({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),tH=vn({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),nH=vn({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),rH=vn({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),iH=Object.freeze(Object.defineProperty({__proto__:null,base64:eH,base64pad:tH,base64url:nH,base64urlpad:rH},Symbol.toStringTag,{value:"Module"})),GD=Array.from(""),sH=GD.reduce((e,t,n)=>(e[n]=t,e),[]),oH=GD.reduce((e,t,n)=>(e[t.codePointAt(0)]=n,e),[]);function aH(e){return e.reduce((t,n)=>(t+=sH[n],t),"")}function cH(e){const t=[];for(const n of e){const r=oH[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);t.push(r)}return new Uint8Array(t)}const lH=Pp({prefix:"",name:"base256emoji",encode:aH,decode:cH}),uH=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:lH},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const Mx={...Tq,...Cq,...Nq,...Uq,...kq,...Kq,...Xq,...Jq,...iH,...uH};function KD(e,t,n,r){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:n},decoder:{decode:r}}}const Lx=KD("utf8","u",e=>"u"+new TextDecoder("utf8").decode(e),e=>new TextEncoder().encode(e.substring(1))),u0=KD("ascii","a",e=>{let t="a";for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t},e=>{e=e.substring(1);const t=FD(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}),WD={utf8:Lx,"utf-8":Lx,hex:Mx.base16,latin1:u0,ascii:u0,binary:u0,...Mx};function Mr(e,t="utf8"){const n=WD[t];if(!n)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Jv(globalThis.Buffer.from(e,"utf-8")):n.decoder.decode(`${n.prefix}${e}`)}function Qn(e,t="utf8"){const n=WD[t];if(!n)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8"):n.encoder.encode(e).substring(1)}const fH={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}};var f0,jx;function YD(){if(jx)return f0;jx=1;const e="Input must be an string, Buffer or Uint8Array";function t(c){let u;if(c instanceof Uint8Array)u=c;else if(typeof c=="string")u=new TextEncoder().encode(c);else throw new Error(e);return u}function n(c){return Array.prototype.map.call(c,function(u){return(u<16?"0":"")+u.toString(16)}).join("")}function r(c){return(4294967296+c).toString(16).substring(1)}function i(c,u,f){let d=`
`+c+" = ";for(let p=0;p<u.length;p+=2){if(f===32)d+=r(u[p]).toUpperCase(),d+=" ",d+=r(u[p+1]).toUpperCase();else if(f===64)d+=r(u[p+1]).toUpperCase(),d+=r(u[p]).toUpperCase();else throw new Error("Invalid size "+f);p%6===4?d+=`
`+new Array(c.length+4).join(" "):p<u.length-2&&(d+=" ")}console.log(d)}function a(c,u,f){let d=new Date().getTime();const p=new Uint8Array(u);for(let y=0;y<u;y++)p[y]=y%256;const g=new Date().getTime();console.log("Generated random input in "+(g-d)+"ms"),d=g;for(let y=0;y<f;y++){const b=c(p),v=new Date().getTime(),E=v-d;d=v,console.log("Hashed in "+E+"ms: "+b.substring(0,20)+"..."),console.log(Math.round(u/(1<<20)/(E/1e3)*100)/100+" MB PER SECOND")}}return f0={normalizeInput:t,toHex:n,debugPrint:i,testSpeed:a},f0}var d0,zx;function dH(){if(zx)return d0;zx=1;const e=YD();function t(x,T,O){const U=x[T]+x[O];let N=x[T+1]+x[O+1];U>=4294967296&&N++,x[T]=U,x[T+1]=N}function n(x,T,O,U){let N=x[T]+O;O<0&&(N+=4294967296);let I=x[T+1]+U;N>=4294967296&&I++,x[T]=N,x[T+1]=I}function r(x,T){return x[T]^x[T+1]<<8^x[T+2]<<16^x[T+3]<<24}function i(x,T,O,U,N,I){const j=d[N],z=d[N+1],P=d[I],G=d[I+1];t(f,x,T),n(f,x,j,z);let F=f[U]^f[x],K=f[U+1]^f[x+1];f[U]=K,f[U+1]=F,t(f,O,U),F=f[T]^f[O],K=f[T+1]^f[O+1],f[T]=F>>>24^K<<8,f[T+1]=K>>>24^F<<8,t(f,x,T),n(f,x,P,G),F=f[U]^f[x],K=f[U+1]^f[x+1],f[U]=F>>>16^K<<16,f[U+1]=K>>>16^F<<16,t(f,O,U),F=f[T]^f[O],K=f[T+1]^f[O+1],f[T]=K>>>31^F<<1,f[T+1]=F>>>31^K<<1}const a=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),c=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3],u=new Uint8Array(c.map(function(x){return x*2})),f=new Uint32Array(32),d=new Uint32Array(32);function p(x,T){let O=0;for(O=0;O<16;O++)f[O]=x.h[O],f[O+16]=a[O];for(f[24]=f[24]^x.t,f[25]=f[25]^x.t/4294967296,T&&(f[28]=~f[28],f[29]=~f[29]),O=0;O<32;O++)d[O]=r(x.b,4*O);for(O=0;O<12;O++)i(0,8,16,24,u[O*16+0],u[O*16+1]),i(2,10,18,26,u[O*16+2],u[O*16+3]),i(4,12,20,28,u[O*16+4],u[O*16+5]),i(6,14,22,30,u[O*16+6],u[O*16+7]),i(0,10,20,30,u[O*16+8],u[O*16+9]),i(2,12,22,24,u[O*16+10],u[O*16+11]),i(4,14,16,26,u[O*16+12],u[O*16+13]),i(6,8,18,28,u[O*16+14],u[O*16+15]);for(O=0;O<16;O++)x.h[O]=x.h[O]^f[O]^f[O+16]}const g=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);function y(x,T,O,U){if(x===0||x>64)throw new Error("Illegal output length, expected 0 < length <= 64");if(T&&T.length>64)throw new Error("Illegal key, expected Uint8Array with 0 < length <= 64");if(O&&O.length!==16)throw new Error("Illegal salt, expected Uint8Array with length is 16");if(U&&U.length!==16)throw new Error("Illegal personal, expected Uint8Array with length is 16");const N={b:new Uint8Array(128),h:new Uint32Array(16),t:0,c:0,outlen:x};g.fill(0),g[0]=x,T&&(g[1]=T.length),g[2]=1,g[3]=1,O&&g.set(O,32),U&&g.set(U,48);for(let I=0;I<16;I++)N.h[I]=a[I]^r(g,I*4);return T&&(b(N,T),N.c=128),N}function b(x,T){for(let O=0;O<T.length;O++)x.c===128&&(x.t+=x.c,p(x,!1),x.c=0),x.b[x.c++]=T[O]}function v(x){for(x.t+=x.c;x.c<128;)x.b[x.c++]=0;p(x,!0);const T=new Uint8Array(x.outlen);for(let O=0;O<x.outlen;O++)T[O]=x.h[O>>2]>>8*(O&3);return T}function E(x,T,O,U,N){O=O||64,x=e.normalizeInput(x),U&&(U=e.normalizeInput(U)),N&&(N=e.normalizeInput(N));const I=y(O,T,U,N);return b(I,x),v(I)}function S(x,T,O,U,N){const I=E(x,T,O,U,N);return e.toHex(I)}return d0={blake2b:E,blake2bHex:S,blake2bInit:y,blake2bUpdate:b,blake2bFinal:v},d0}var h0,qx;function hH(){if(qx)return h0;qx=1;const e=YD();function t(v,E){return v[E]^v[E+1]<<8^v[E+2]<<16^v[E+3]<<24}function n(v,E,S,x,T,O){c[v]=c[v]+c[E]+T,c[x]=r(c[x]^c[v],16),c[S]=c[S]+c[x],c[E]=r(c[E]^c[S],12),c[v]=c[v]+c[E]+O,c[x]=r(c[x]^c[v],8),c[S]=c[S]+c[x],c[E]=r(c[E]^c[S],7)}function r(v,E){return v>>>E^v<<32-E}const i=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),a=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0]),c=new Uint32Array(16),u=new Uint32Array(16);function f(v,E){let S=0;for(S=0;S<8;S++)c[S]=v.h[S],c[S+8]=i[S];for(c[12]^=v.t,c[13]^=v.t/4294967296,E&&(c[14]=~c[14]),S=0;S<16;S++)u[S]=t(v.b,4*S);for(S=0;S<10;S++)n(0,4,8,12,u[a[S*16+0]],u[a[S*16+1]]),n(1,5,9,13,u[a[S*16+2]],u[a[S*16+3]]),n(2,6,10,14,u[a[S*16+4]],u[a[S*16+5]]),n(3,7,11,15,u[a[S*16+6]],u[a[S*16+7]]),n(0,5,10,15,u[a[S*16+8]],u[a[S*16+9]]),n(1,6,11,12,u[a[S*16+10]],u[a[S*16+11]]),n(2,7,8,13,u[a[S*16+12]],u[a[S*16+13]]),n(3,4,9,14,u[a[S*16+14]],u[a[S*16+15]]);for(S=0;S<8;S++)v.h[S]^=c[S]^c[S+8]}function d(v,E){if(!(v>0&&v<=32))throw new Error("Incorrect output length, should be in [1, 32]");const S=E?E.length:0;if(E&&!(S>0&&S<=32))throw new Error("Incorrect key length, should be in [1, 32]");const x={h:new Uint32Array(i),b:new Uint8Array(64),c:0,t:0,outlen:v};return x.h[0]^=16842752^S<<8^v,S>0&&(p(x,E),x.c=64),x}function p(v,E){for(let S=0;S<E.length;S++)v.c===64&&(v.t+=v.c,f(v,!1),v.c=0),v.b[v.c++]=E[S]}function g(v){for(v.t+=v.c;v.c<64;)v.b[v.c++]=0;f(v,!0);const E=new Uint8Array(v.outlen);for(let S=0;S<v.outlen;S++)E[S]=v.h[S>>2]>>8*(S&3)&255;return E}function y(v,E,S){S=S||32,v=e.normalizeInput(v);const x=d(S,E);return p(x,v),g(x)}function b(v,E,S){const x=y(v,E,S);return e.toHex(x)}return h0={blake2s:y,blake2sHex:b,blake2sInit:d,blake2sUpdate:p,blake2sFinal:g},h0}var p0,Hx;function pH(){if(Hx)return p0;Hx=1;const e=dH(),t=hH();return p0={blake2b:e.blake2b,blake2bHex:e.blake2bHex,blake2bInit:e.blake2bInit,blake2bUpdate:e.blake2bUpdate,blake2bFinal:e.blake2bFinal,blake2s:t.blake2s,blake2sHex:t.blake2sHex,blake2sInit:t.blake2sInit,blake2sUpdate:t.blake2sUpdate,blake2sFinal:t.blake2sFinal},p0}var gH=pH(),mH={};const yH=":";function Vc(e){const[t,n]=e.split(yH);return{namespace:t,reference:n}}function XD(e,t){return e.includes(":")?[e]:t.chains||[]}var bH=Object.defineProperty,vH=Object.defineProperties,wH=Object.getOwnPropertyDescriptors,Fx=Object.getOwnPropertySymbols,EH=Object.prototype.hasOwnProperty,SH=Object.prototype.propertyIsEnumerable,Nb=(e,t,n)=>t in e?bH(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Vx=(e,t)=>{for(var n in t||(t={}))EH.call(t,n)&&Nb(e,n,t[n]);if(Fx)for(var n of Fx(t))SH.call(t,n)&&Nb(e,n,t[n]);return e},_H=(e,t)=>vH(e,wH(t)),Gx=(e,t,n)=>Nb(e,typeof t!="symbol"?t+"":t,n);const xH="ReactNative",br={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},AH="js";function op(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function yo(){return!ms.getDocument()&&!!ms.getNavigator()&&navigator.product===xH}function RH(){return yo()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="android"}function OH(){return yo()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="ios"}function cl(){return!op()&&!!ms.getNavigator()&&!!ms.getDocument()}function If(){return yo()?br.reactNative:op()?br.node:cl()?br.browser:br.unknown}function Kx(){var e;try{return yo()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(e=global.Application)==null?void 0:e.applicationId:void 0}catch{return}}function TH(e,t){const n=new URLSearchParams(e);for(const r of Object.keys(t).sort())if(t.hasOwnProperty(r)){const i=t[r];i!==void 0&&n.set(r,i)}return n.toString()}function DH(e){var t,n;const r=ZD();try{return e!=null&&e.url&&r.url&&new URL(e.url).host!==new URL(r.url).host&&(console.warn(`The configured WalletConnect 'metadata.url':${e.url} differs from the actual page url:${r.url}. This is probably unintended and can lead to issues.`),e.url=r.url),(t=e?.icons)!=null&&t.length&&e.icons.length>0&&(e.icons=e.icons.filter(i=>i!=="")),_H(Vx(Vx({},r),e),{url:e?.url||r.url,name:e?.name||r.name,description:e?.description||r.description,icons:(n=e?.icons)!=null&&n.length&&e.icons.length>0?e.icons:r.icons})}catch(i){return console.warn("Error populating app metadata",i),e||r}}function ZD(){return zL.getWindowMetadata()||{name:"",description:"",url:"",icons:[""]}}function CH(){if(If()===br.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:n,Version:r}=global.Platform;return[n,r].join("-")}const e=sL();if(e===null)return"unknown";const t=e.os?e.os.replace(" ","").toLowerCase():"unknown";return e.type==="browser"?[t,e.name,e.version].join("-"):[t,e.version].join("-")}function IH(){var e;const t=If();return t===br.browser?[t,((e=ms.getLocation())==null?void 0:e.host)||"unknown"].join(":"):t}function QD(e,t,n){const r=CH(),i=IH();return[[e,t].join("-"),[AH,n].join("-"),r,i].join("/")}function NH({protocol:e,version:t,relayUrl:n,sdkVersion:r,auth:i,projectId:a,useOnCloseEvent:c,bundleId:u,packageName:f}){const d=n.split("?"),p=QD(e,t,r),g={auth:i,ua:p,projectId:a,useOnCloseEvent:c,packageName:f||void 0,bundleId:u||void 0},y=TH(d[1]||"",g);return d[0]+"?"+y}function Qo(e,t){return e.filter(n=>t.includes(n)).length===e.length}function $b(e){return Object.fromEntries(e.entries())}function Ub(e){return new Map(Object.entries(e))}function Ko(e=ve.FIVE_MINUTES,t){const n=ve.toMiliseconds(e||ve.FIVE_MINUTES);let r,i,a,c;return{resolve:u=>{a&&r&&(clearTimeout(a),r(u),c=Promise.resolve(u))},reject:u=>{a&&i&&(clearTimeout(a),i(u))},done:()=>new Promise((u,f)=>{if(c)return u(c);a=setTimeout(()=>{const d=new Error(t);c=Promise.reject(d),f(d)},n),r=u,i=f})}}function ao(e,t,n){return new Promise(async(r,i)=>{const a=setTimeout(()=>i(new Error(n)),t);try{const c=await e;r(c)}catch(c){i(c)}clearTimeout(a)})}function JD(e,t){if(typeof t=="string"&&t.startsWith(`${e}:`))return t;if(e.toLowerCase()==="topic"){if(typeof t!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${t}`}else if(e.toLowerCase()==="id"){if(typeof t!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${t}`}throw new Error(`Unknown expirer target type: ${e}`)}function $H(e){return JD("topic",e)}function UH(e){return JD("id",e)}function eC(e){const[t,n]=e.split(":"),r={id:void 0,topic:void 0};if(t==="topic"&&typeof n=="string")r.topic=n;else if(t==="id"&&Number.isInteger(Number(n)))r.id=Number(n);else throw new Error(`Invalid target, expected id:number or topic:string, got ${t}:${n}`);return r}function Yt(e,t){return ve.fromMiliseconds(Date.now()+ve.toMiliseconds(e))}function to(e){return Date.now()>=ve.toMiliseconds(e)}function Qe(e,t){return`${e}${t?`:${t}`:""}`}function Ai(e=[],t=[]){return[...new Set([...e,...t])]}async function BH({id:e,topic:t,wcDeepLink:n}){var r;try{if(!n)return;const i=typeof n=="string"?JSON.parse(n):n,a=i?.href;if(typeof a!="string")return;const c=PH(a,e,t),u=If();if(u===br.browser){if(!((r=ms.getDocument())!=null&&r.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}kH(c)}else u===br.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(c)}catch(i){console.error(i)}}function PH(e,t,n){const r=`requestId=${t}&sessionTopic=${n}`;e.endsWith("/")&&(e=e.slice(0,-1));let i=`${e}`;if(e.startsWith("https://t.me")){const a=e.includes("?")?"&startapp=":"?startapp=";i=`${i}${a}${zH(r,!0)}`}else i=`${i}/wc?${r}`;return i}function kH(e){let t="_self";jH()?t="_top":(LH()||e.startsWith("https://")||e.startsWith("http://"))&&(t="_blank"),window.open(e,t,"noreferrer noopener")}async function MH(e,t){let n="";try{if(cl()&&(n=localStorage.getItem(t),n))return n;n=await e.getItem(t)}catch(r){console.error(r)}return n}function Wx(e,t){if(!e.includes(t))return null;const n=e.split(/([&,?,=])/),r=n.indexOf(t);return n[r+2]}function Yx(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})}function ew(){return typeof process<"u"&&mH.IS_VITEST==="true"}function LH(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function jH(){try{return window.self!==window.top}catch{return!1}}function zH(e,t=!1){const n=Buffer.from(e).toString("base64");return t?n.replace(/[=]/g,""):n}function tC(e){return Buffer.from(e,"base64").toString("utf-8")}function qH(e){return new Promise(t=>setTimeout(t,e))}let HH=class{constructor({limit:t}){Gx(this,"limit"),Gx(this,"set"),this.limit=t,this.set=new Set}add(t){if(!this.set.has(t)){if(this.set.size>=this.limit){const n=this.set.values().next().value;n&&this.set.delete(n)}this.set.add(t)}}has(t){return this.set.has(t)}};const fh=BigInt(2**32-1),Xx=BigInt(32);function nC(e,t=!1){return t?{h:Number(e&fh),l:Number(e>>Xx&fh)}:{h:Number(e>>Xx&fh)|0,l:Number(e&fh)|0}}function rC(e,t=!1){const n=e.length;let r=new Uint32Array(n),i=new Uint32Array(n);for(let a=0;a<n;a++){const{h:c,l:u}=nC(e[a],t);[r[a],i[a]]=[c,u]}return[r,i]}const Zx=(e,t,n)=>e>>>n,Qx=(e,t,n)=>e<<32-n|t>>>n,no=(e,t,n)=>e>>>n|t<<32-n,ro=(e,t,n)=>e<<32-n|t>>>n,Bu=(e,t,n)=>e<<64-n|t>>>n-32,Pu=(e,t,n)=>e>>>n-32|t<<64-n,FH=(e,t)=>t,VH=(e,t)=>e,GH=(e,t,n)=>e<<n|t>>>32-n,KH=(e,t,n)=>t<<n|e>>>32-n,WH=(e,t,n)=>t<<n-32|e>>>64-n,YH=(e,t,n)=>e<<n-32|t>>>64-n;function ti(e,t,n,r){const i=(t>>>0)+(r>>>0);return{h:e+n+(i/2**32|0)|0,l:i|0}}const tw=(e,t,n)=>(e>>>0)+(t>>>0)+(n>>>0),nw=(e,t,n,r)=>t+n+r+(e/2**32|0)|0,XH=(e,t,n,r)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0),ZH=(e,t,n,r,i)=>t+n+r+i+(e/2**32|0)|0,QH=(e,t,n,r,i)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0)+(i>>>0),JH=(e,t,n,r,i,a)=>t+n+r+i+a+(e/2**32|0)|0,bc=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function rw(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function bs(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function Lr(e,...t){if(!rw(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function iw(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");bs(e.outputLen),bs(e.blockLen)}function ho(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function sw(e,t){Lr(e);const n=t.outputLen;if(e.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function uf(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))}function jr(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}function g0(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function pi(e,t){return e<<32-t|e>>>t}const iC=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function sC(e){return e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255}const rs=iC?e=>e:e=>sC(e);function eF(e){for(let t=0;t<e.length;t++)e[t]=sC(e[t]);return e}const io=iC?e=>e:eF,oC=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",tF=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function ff(e){if(Lr(e),oC)return e.toHex();let t="";for(let n=0;n<e.length;n++)t+=tF[e[n]];return t}const es={_0:48,_9:57,A:65,F:70,a:97,f:102};function Jx(e){if(e>=es._0&&e<=es._9)return e-es._0;if(e>=es.A&&e<=es.F)return e-(es.A-10);if(e>=es.a&&e<=es.f)return e-(es.a-10)}function ow(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);if(oC)return Uint8Array.fromHex(e);const t=e.length,n=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(n);for(let i=0,a=0;i<n;i++,a+=2){const c=Jx(e.charCodeAt(a)),u=Jx(e.charCodeAt(a+1));if(c===void 0||u===void 0){const f=e[a]+e[a+1];throw new Error('hex string expected, got non-hex character "'+f+'" at index '+a)}r[i]=c*16+u}return r}function nF(e){if(typeof e!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(e))}function ii(e){return typeof e=="string"&&(e=nF(e)),Lr(e),e}function Jo(...e){let t=0;for(let r=0;r<e.length;r++){const i=e[r];Lr(i),t+=i.length}const n=new Uint8Array(t);for(let r=0,i=0;r<e.length;r++){const a=e[r];n.set(a,i),i+=a.length}return n}let kp=class{};function Nf(e){const t=r=>e().update(ii(r)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function rF(e){const t=(r,i)=>e(i).update(ii(r)).digest(),n=e({});return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=r=>e(r),t}function ll(e=32){if(bc&&typeof bc.getRandomValues=="function")return bc.getRandomValues(new Uint8Array(e));if(bc&&typeof bc.randomBytes=="function")return Uint8Array.from(bc.randomBytes(e));throw new Error("crypto.getRandomValues must be defined")}const iF=BigInt(0),_u=BigInt(1),sF=BigInt(2),oF=BigInt(7),aF=BigInt(256),cF=BigInt(113),aC=[],cC=[],lC=[];for(let e=0,t=_u,n=1,r=0;e<24;e++){[n,r]=[r,(2*n+3*r)%5],aC.push(2*(5*r+n)),cC.push((e+1)*(e+2)/2%64);let i=iF;for(let a=0;a<7;a++)t=(t<<_u^(t>>oF)*cF)%aF,t&sF&&(i^=_u<<(_u<<BigInt(a))-_u);lC.push(i)}const uC=rC(lC,!0),lF=uC[0],uF=uC[1],eA=(e,t,n)=>n>32?WH(e,t,n):GH(e,t,n),tA=(e,t,n)=>n>32?YH(e,t,n):KH(e,t,n);function fF(e,t=24){const n=new Uint32Array(10);for(let r=24-t;r<24;r++){for(let c=0;c<10;c++)n[c]=e[c]^e[c+10]^e[c+20]^e[c+30]^e[c+40];for(let c=0;c<10;c+=2){const u=(c+8)%10,f=(c+2)%10,d=n[f],p=n[f+1],g=eA(d,p,1)^n[u],y=tA(d,p,1)^n[u+1];for(let b=0;b<50;b+=10)e[c+b]^=g,e[c+b+1]^=y}let i=e[2],a=e[3];for(let c=0;c<24;c++){const u=cC[c],f=eA(i,a,u),d=tA(i,a,u),p=aC[c];i=e[p],a=e[p+1],e[p]=f,e[p+1]=d}for(let c=0;c<50;c+=10){for(let u=0;u<10;u++)n[u]=e[c+u];for(let u=0;u<10;u++)e[c+u]^=~n[(u+2)%10]&n[(u+4)%10]}e[0]^=lF[r],e[1]^=uF[r]}jr(n)}let dF=class fC extends kp{constructor(t,n,r,i=!1,a=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=t,this.suffix=n,this.outputLen=r,this.enableXOF=i,this.rounds=a,bs(r),!(0<t&&t<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=uf(this.state)}clone(){return this._cloneInto()}keccak(){io(this.state32),fF(this.state32,this.rounds),io(this.state32),this.posOut=0,this.pos=0}update(t){ho(this),t=ii(t),Lr(t);const{blockLen:n,state:r}=this,i=t.length;for(let a=0;a<i;){const c=Math.min(n-this.pos,i-a);for(let u=0;u<c;u++)r[this.pos++]^=t[a++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:n,pos:r,blockLen:i}=this;t[r]^=n,(n&128)!==0&&r===i-1&&this.keccak(),t[i-1]^=128,this.keccak()}writeInto(t){ho(this,!1),Lr(t),this.finish();const n=this.state,{blockLen:r}=this;for(let i=0,a=t.length;i<a;){this.posOut>=r&&this.keccak();const c=Math.min(r-this.posOut,a-i);t.set(n.subarray(this.posOut,this.posOut+c),i),this.posOut+=c,i+=c}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return bs(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(sw(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,jr(this.state)}_cloneInto(t){const{blockLen:n,suffix:r,outputLen:i,rounds:a,enableXOF:c}=this;return t||(t=new fC(n,r,i,c,a)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=a,t.suffix=r,t.outputLen=i,t.enableXOF=c,t.destroyed=this.destroyed,t}};const hF=(e,t,n)=>Nf(()=>new dF(t,e,n)),pF=hF(1,136,256/8);function gF(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const i=BigInt(32),a=BigInt(4294967295),c=Number(n>>i&a),u=Number(n&a),f=r?4:0,d=r?0:4;e.setUint32(t+f,c,r),e.setUint32(t+d,u,r)}function mF(e,t,n){return e&t^~e&n}function yF(e,t,n){return e&t^e&n^t&n}let dC=class extends kp{constructor(t,n,r,i){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=t,this.outputLen=n,this.padOffset=r,this.isLE=i,this.buffer=new Uint8Array(t),this.view=g0(this.buffer)}update(t){ho(this),t=ii(t),Lr(t);const{view:n,buffer:r,blockLen:i}=this,a=t.length;for(let c=0;c<a;){const u=Math.min(i-this.pos,a-c);if(u===i){const f=g0(t);for(;i<=a-c;c+=i)this.process(f,c);continue}r.set(t.subarray(c,c+u),this.pos),this.pos+=u,c+=u,this.pos===i&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){ho(this),sw(t,this),this.finished=!0;const{buffer:n,view:r,blockLen:i,isLE:a}=this;let{pos:c}=this;n[c++]=128,jr(this.buffer.subarray(c)),this.padOffset>i-c&&(this.process(r,0),c=0);for(let g=c;g<i;g++)n[g]=0;gF(r,i-8,BigInt(this.length*8),a),this.process(r,0);const u=g0(t),f=this.outputLen;if(f%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const d=f/4,p=this.get();if(d>p.length)throw new Error("_sha2: outputLen bigger than state");for(let g=0;g<d;g++)u.setUint32(4*g,p[g],a)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:r,length:i,finished:a,destroyed:c,pos:u}=this;return t.destroyed=c,t.finished=a,t.length=i,t.pos=u,i%n&&t.buffer.set(r),t}clone(){return this._cloneInto()}};const Ks=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Rn=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),On=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),bF=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Ws=new Uint32Array(64);let vF=class extends dC{constructor(t=32){super(64,t,8,!1),this.A=Ks[0]|0,this.B=Ks[1]|0,this.C=Ks[2]|0,this.D=Ks[3]|0,this.E=Ks[4]|0,this.F=Ks[5]|0,this.G=Ks[6]|0,this.H=Ks[7]|0}get(){const{A:t,B:n,C:r,D:i,E:a,F:c,G:u,H:f}=this;return[t,n,r,i,a,c,u,f]}set(t,n,r,i,a,c,u,f){this.A=t|0,this.B=n|0,this.C=r|0,this.D=i|0,this.E=a|0,this.F=c|0,this.G=u|0,this.H=f|0}process(t,n){for(let g=0;g<16;g++,n+=4)Ws[g]=t.getUint32(n,!1);for(let g=16;g<64;g++){const y=Ws[g-15],b=Ws[g-2],v=pi(y,7)^pi(y,18)^y>>>3,E=pi(b,17)^pi(b,19)^b>>>10;Ws[g]=E+Ws[g-7]+v+Ws[g-16]|0}let{A:r,B:i,C:a,D:c,E:u,F:f,G:d,H:p}=this;for(let g=0;g<64;g++){const y=pi(u,6)^pi(u,11)^pi(u,25),b=p+y+mF(u,f,d)+bF[g]+Ws[g]|0,v=(pi(r,2)^pi(r,13)^pi(r,22))+yF(r,i,a)|0;p=d,d=f,f=u,u=c+b|0,c=a,a=i,i=r,r=b+v|0}r=r+this.A|0,i=i+this.B|0,a=a+this.C|0,c=c+this.D|0,u=u+this.E|0,f=f+this.F|0,d=d+this.G|0,p=p+this.H|0,this.set(r,i,a,c,u,f,d,p)}roundClean(){jr(Ws)}destroy(){this.set(0,0,0,0,0,0,0,0),jr(this.buffer)}};const hC=rC(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),wF=hC[0],EF=hC[1],Ys=new Uint32Array(80),Xs=new Uint32Array(80);let aw=class extends dC{constructor(t=64){super(128,t,16,!1),this.Ah=On[0]|0,this.Al=On[1]|0,this.Bh=On[2]|0,this.Bl=On[3]|0,this.Ch=On[4]|0,this.Cl=On[5]|0,this.Dh=On[6]|0,this.Dl=On[7]|0,this.Eh=On[8]|0,this.El=On[9]|0,this.Fh=On[10]|0,this.Fl=On[11]|0,this.Gh=On[12]|0,this.Gl=On[13]|0,this.Hh=On[14]|0,this.Hl=On[15]|0}get(){const{Ah:t,Al:n,Bh:r,Bl:i,Ch:a,Cl:c,Dh:u,Dl:f,Eh:d,El:p,Fh:g,Fl:y,Gh:b,Gl:v,Hh:E,Hl:S}=this;return[t,n,r,i,a,c,u,f,d,p,g,y,b,v,E,S]}set(t,n,r,i,a,c,u,f,d,p,g,y,b,v,E,S){this.Ah=t|0,this.Al=n|0,this.Bh=r|0,this.Bl=i|0,this.Ch=a|0,this.Cl=c|0,this.Dh=u|0,this.Dl=f|0,this.Eh=d|0,this.El=p|0,this.Fh=g|0,this.Fl=y|0,this.Gh=b|0,this.Gl=v|0,this.Hh=E|0,this.Hl=S|0}process(t,n){for(let O=0;O<16;O++,n+=4)Ys[O]=t.getUint32(n),Xs[O]=t.getUint32(n+=4);for(let O=16;O<80;O++){const U=Ys[O-15]|0,N=Xs[O-15]|0,I=no(U,N,1)^no(U,N,8)^Zx(U,N,7),j=ro(U,N,1)^ro(U,N,8)^Qx(U,N,7),z=Ys[O-2]|0,P=Xs[O-2]|0,G=no(z,P,19)^Bu(z,P,61)^Zx(z,P,6),F=ro(z,P,19)^Pu(z,P,61)^Qx(z,P,6),K=XH(j,F,Xs[O-7],Xs[O-16]),re=ZH(K,I,G,Ys[O-7],Ys[O-16]);Ys[O]=re|0,Xs[O]=K|0}let{Ah:r,Al:i,Bh:a,Bl:c,Ch:u,Cl:f,Dh:d,Dl:p,Eh:g,El:y,Fh:b,Fl:v,Gh:E,Gl:S,Hh:x,Hl:T}=this;for(let O=0;O<80;O++){const U=no(g,y,14)^no(g,y,18)^Bu(g,y,41),N=ro(g,y,14)^ro(g,y,18)^Pu(g,y,41),I=g&b^~g&E,j=y&v^~y&S,z=QH(T,N,j,EF[O],Xs[O]),P=JH(z,x,U,I,wF[O],Ys[O]),G=z|0,F=no(r,i,28)^Bu(r,i,34)^Bu(r,i,39),K=ro(r,i,28)^Pu(r,i,34)^Pu(r,i,39),re=r&a^r&u^a&u,J=i&c^i&f^c&f;x=E|0,T=S|0,E=b|0,S=v|0,b=g|0,v=y|0,{h:g,l:y}=ti(d|0,p|0,P|0,G|0),d=u|0,p=f|0,u=a|0,f=c|0,a=r|0,c=i|0;const D=tw(G,K,J);r=nw(D,P,F,re),i=D|0}({h:r,l:i}=ti(this.Ah|0,this.Al|0,r|0,i|0)),{h:a,l:c}=ti(this.Bh|0,this.Bl|0,a|0,c|0),{h:u,l:f}=ti(this.Ch|0,this.Cl|0,u|0,f|0),{h:d,l:p}=ti(this.Dh|0,this.Dl|0,d|0,p|0),{h:g,l:y}=ti(this.Eh|0,this.El|0,g|0,y|0),{h:b,l:v}=ti(this.Fh|0,this.Fl|0,b|0,v|0),{h:E,l:S}=ti(this.Gh|0,this.Gl|0,E|0,S|0),{h:x,l:T}=ti(this.Hh|0,this.Hl|0,x|0,T|0),this.set(r,i,a,c,u,f,d,p,g,y,b,v,E,S,x,T)}roundClean(){jr(Ys,Xs)}destroy(){jr(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}},SF=class extends aw{constructor(){super(48),this.Ah=Rn[0]|0,this.Al=Rn[1]|0,this.Bh=Rn[2]|0,this.Bl=Rn[3]|0,this.Ch=Rn[4]|0,this.Cl=Rn[5]|0,this.Dh=Rn[6]|0,this.Dl=Rn[7]|0,this.Eh=Rn[8]|0,this.El=Rn[9]|0,this.Fh=Rn[10]|0,this.Fl=Rn[11]|0,this.Gh=Rn[12]|0,this.Gl=Rn[13]|0,this.Hh=Rn[14]|0,this.Hl=Rn[15]|0}};const Tn=Uint32Array.from([573645204,4230739756,2673172387,3360449730,596883563,1867755857,2520282905,1497426621,2519219938,2827943907,3193839141,1401305490,721525244,746961066,246885852,2177182882]);class _F extends aw{constructor(){super(32),this.Ah=Tn[0]|0,this.Al=Tn[1]|0,this.Bh=Tn[2]|0,this.Bl=Tn[3]|0,this.Ch=Tn[4]|0,this.Cl=Tn[5]|0,this.Dh=Tn[6]|0,this.Dl=Tn[7]|0,this.Eh=Tn[8]|0,this.El=Tn[9]|0,this.Fh=Tn[10]|0,this.Fl=Tn[11]|0,this.Gh=Tn[12]|0,this.Gl=Tn[13]|0,this.Hh=Tn[14]|0,this.Hl=Tn[15]|0}}const Mp=Nf(()=>new vF),xF=Nf(()=>new aw),AF=Nf(()=>new SF),RF=Nf(()=>new _F),OF=Uint8Array.from([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9]),Wt=Uint32Array.from([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),Ee=new Uint32Array(32);function Zs(e,t,n,r,i,a){const c=i[a],u=i[a+1];let f=Ee[2*e],d=Ee[2*e+1],p=Ee[2*t],g=Ee[2*t+1],y=Ee[2*n],b=Ee[2*n+1],v=Ee[2*r],E=Ee[2*r+1],S=tw(f,p,c);d=nw(S,d,g,u),f=S|0,{Dh:E,Dl:v}={Dh:E^d,Dl:v^f},{Dh:E,Dl:v}={Dh:FH(E,v),Dl:VH(E)},{h:b,l:y}=ti(b,y,E,v),{Bh:g,Bl:p}={Bh:g^b,Bl:p^y},{Bh:g,Bl:p}={Bh:no(g,p,24),Bl:ro(g,p,24)},Ee[2*e]=f,Ee[2*e+1]=d,Ee[2*t]=p,Ee[2*t+1]=g,Ee[2*n]=y,Ee[2*n+1]=b,Ee[2*r]=v,Ee[2*r+1]=E}function Qs(e,t,n,r,i,a){const c=i[a],u=i[a+1];let f=Ee[2*e],d=Ee[2*e+1],p=Ee[2*t],g=Ee[2*t+1],y=Ee[2*n],b=Ee[2*n+1],v=Ee[2*r],E=Ee[2*r+1],S=tw(f,p,c);d=nw(S,d,g,u),f=S|0,{Dh:E,Dl:v}={Dh:E^d,Dl:v^f},{Dh:E,Dl:v}={Dh:no(E,v,16),Dl:ro(E,v,16)},{h:b,l:y}=ti(b,y,E,v),{Bh:g,Bl:p}={Bh:g^b,Bl:p^y},{Bh:g,Bl:p}={Bh:Bu(g,p,63),Bl:Pu(g,p,63)},Ee[2*e]=f,Ee[2*e+1]=d,Ee[2*t]=p,Ee[2*t+1]=g,Ee[2*n]=y,Ee[2*n+1]=b,Ee[2*r]=v,Ee[2*r+1]=E}function TF(e,t={},n,r,i){if(bs(n),e<0||e>n)throw new Error("outputLen bigger than keyLen");const{key:a,salt:c,personalization:u}=t;if(a!==void 0&&(a.length<1||a.length>n))throw new Error("key length must be undefined or 1.."+n);if(c!==void 0&&c.length!==r)throw new Error("salt must be undefined or "+r);if(u!==void 0&&u.length!==i)throw new Error("personalization must be undefined or "+i)}class DF extends kp{constructor(t,n){super(),this.finished=!1,this.destroyed=!1,this.length=0,this.pos=0,bs(t),bs(n),this.blockLen=t,this.outputLen=n,this.buffer=new Uint8Array(t),this.buffer32=uf(this.buffer)}update(t){ho(this),t=ii(t),Lr(t);const{blockLen:n,buffer:r,buffer32:i}=this,a=t.length,c=t.byteOffset,u=t.buffer;for(let f=0;f<a;){this.pos===n&&(io(i),this.compress(i,0,!1),io(i),this.pos=0);const d=Math.min(n-this.pos,a-f),p=c+f;if(d===n&&!(p%4)&&f+d<a){const g=new Uint32Array(u,p,Math.floor((a-f)/4));io(g);for(let y=0;f+n<a;y+=i.length,f+=n)this.length+=n,this.compress(g,y,!1);io(g);continue}r.set(t.subarray(f,f+d),this.pos),this.pos+=d,this.length+=d,f+=d}return this}digestInto(t){ho(this),sw(t,this);const{pos:n,buffer32:r}=this;this.finished=!0,jr(this.buffer.subarray(n)),io(r),this.compress(r,0,!0),io(r);const i=uf(t);this.get().forEach((a,c)=>i[c]=rs(a))}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){const{buffer:n,length:r,finished:i,destroyed:a,outputLen:c,pos:u}=this;return t||(t=new this.constructor({dkLen:c})),t.set(...this.get()),t.buffer.set(n),t.destroyed=a,t.finished=i,t.length=r,t.pos=u,t.outputLen=c,t}clone(){return this._cloneInto()}}class CF extends DF{constructor(t={}){const n=t.dkLen===void 0?64:t.dkLen;super(128,n),this.v0l=Wt[0]|0,this.v0h=Wt[1]|0,this.v1l=Wt[2]|0,this.v1h=Wt[3]|0,this.v2l=Wt[4]|0,this.v2h=Wt[5]|0,this.v3l=Wt[6]|0,this.v3h=Wt[7]|0,this.v4l=Wt[8]|0,this.v4h=Wt[9]|0,this.v5l=Wt[10]|0,this.v5h=Wt[11]|0,this.v6l=Wt[12]|0,this.v6h=Wt[13]|0,this.v7l=Wt[14]|0,this.v7h=Wt[15]|0,TF(n,t,64,16,16);let{key:r,personalization:i,salt:a}=t,c=0;if(r!==void 0&&(r=ii(r),c=r.length),this.v0l^=this.outputLen|c<<8|65536|1<<24,a!==void 0){a=ii(a);const u=uf(a);this.v4l^=rs(u[0]),this.v4h^=rs(u[1]),this.v5l^=rs(u[2]),this.v5h^=rs(u[3])}if(i!==void 0){i=ii(i);const u=uf(i);this.v6l^=rs(u[0]),this.v6h^=rs(u[1]),this.v7l^=rs(u[2]),this.v7h^=rs(u[3])}if(r!==void 0){const u=new Uint8Array(this.blockLen);u.set(r),this.update(u)}}get(){let{v0l:t,v0h:n,v1l:r,v1h:i,v2l:a,v2h:c,v3l:u,v3h:f,v4l:d,v4h:p,v5l:g,v5h:y,v6l:b,v6h:v,v7l:E,v7h:S}=this;return[t,n,r,i,a,c,u,f,d,p,g,y,b,v,E,S]}set(t,n,r,i,a,c,u,f,d,p,g,y,b,v,E,S){this.v0l=t|0,this.v0h=n|0,this.v1l=r|0,this.v1h=i|0,this.v2l=a|0,this.v2h=c|0,this.v3l=u|0,this.v3h=f|0,this.v4l=d|0,this.v4h=p|0,this.v5l=g|0,this.v5h=y|0,this.v6l=b|0,this.v6h=v|0,this.v7l=E|0,this.v7h=S|0}compress(t,n,r){this.get().forEach((f,d)=>Ee[d]=f),Ee.set(Wt,16);let{h:i,l:a}=nC(BigInt(this.length));Ee[24]=Wt[8]^a,Ee[25]=Wt[9]^i,r&&(Ee[28]=~Ee[28],Ee[29]=~Ee[29]);let c=0;const u=OF;for(let f=0;f<12;f++)Zs(0,4,8,12,t,n+2*u[c++]),Qs(0,4,8,12,t,n+2*u[c++]),Zs(1,5,9,13,t,n+2*u[c++]),Qs(1,5,9,13,t,n+2*u[c++]),Zs(2,6,10,14,t,n+2*u[c++]),Qs(2,6,10,14,t,n+2*u[c++]),Zs(3,7,11,15,t,n+2*u[c++]),Qs(3,7,11,15,t,n+2*u[c++]),Zs(0,5,10,15,t,n+2*u[c++]),Qs(0,5,10,15,t,n+2*u[c++]),Zs(1,6,11,12,t,n+2*u[c++]),Qs(1,6,11,12,t,n+2*u[c++]),Zs(2,7,8,13,t,n+2*u[c++]),Qs(2,7,8,13,t,n+2*u[c++]),Zs(3,4,9,14,t,n+2*u[c++]),Qs(3,4,9,14,t,n+2*u[c++]);this.v0l^=Ee[0]^Ee[16],this.v0h^=Ee[1]^Ee[17],this.v1l^=Ee[2]^Ee[18],this.v1h^=Ee[3]^Ee[19],this.v2l^=Ee[4]^Ee[20],this.v2h^=Ee[5]^Ee[21],this.v3l^=Ee[6]^Ee[22],this.v3h^=Ee[7]^Ee[23],this.v4l^=Ee[8]^Ee[24],this.v4h^=Ee[9]^Ee[25],this.v5l^=Ee[10]^Ee[26],this.v5h^=Ee[11]^Ee[27],this.v6l^=Ee[12]^Ee[28],this.v6h^=Ee[13]^Ee[29],this.v7l^=Ee[14]^Ee[30],this.v7h^=Ee[15]^Ee[31],jr(Ee)}destroy(){this.destroyed=!0,jr(this.buffer32),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const IF=rF(e=>new CF(e)),NF="https://rpc.walletconnect.org/v1";function pC(e){const t=`Ethereum Signed Message:
${e.length}`,n=new TextEncoder().encode(t+e);return"0x"+Buffer.from(pF(n)).toString("hex")}async function $F(e,t,n,r,i,a){switch(n.t){case"eip191":return await UF(e,t,n.s);case"eip1271":return await BF(e,t,n.s,r,i,a);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${n.t}`)}}async function UF(e,t,n){return(await Cj({hash:pC(t),signature:n})).toLowerCase()===e.toLowerCase()}async function BF(e,t,n,r,i,a){const c=Vc(r);if(!c.namespace||!c.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${r}`);try{const u="0x1626ba7e",f="0000000000000000000000000000000000000000000000000000000000000040",d=n.substring(2),p=(d.length/2).toString(16).padStart(64,"0"),g=(t.startsWith("0x")?t:pC(t)).substring(2),y=u+g+f+p+d,b=await fetch(`${a||NF}/?chainId=${r}&projectId=${i}`,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({id:PF(),jsonrpc:"2.0",method:"eth_call",params:[{to:e,data:y},"latest"]})}),{result:v}=await b.json();return v?v.slice(0,u.length).toLowerCase()===u.toLowerCase():!1}catch(u){return console.error("isValidEip1271Signature: ",u),!1}}function PF(){return Date.now()+Math.floor(Math.random()*1e3)}function kF(e){const t=atob(e),n=new Uint8Array(t.length);for(let c=0;c<t.length;c++)n[c]=t.charCodeAt(c);const r=n[0];if(r===0)throw new Error("No signatures found");const i=1+r*64;if(n.length<i)throw new Error("Transaction data too short for claimed signature count");if(n.length<100)throw new Error("Transaction too short");const a=Buffer.from(e,"base64").slice(1,65);return Tf.encode(a)}function MF(e){const t=new Uint8Array(Buffer.from(e,"base64")),n=Array.from("TransactionData::").map(a=>a.charCodeAt(0)),r=new Uint8Array(n.length+t.length);r.set(n),r.set(t,n.length);const i=IF(r,{dkLen:32});return Tf.encode(i)}function nA(e){const t=new Uint8Array(Mp(LF(e)));return Tf.encode(t)}function LF(e){if(e instanceof Uint8Array)return e;if(Array.isArray(e))return new Uint8Array(e);if(typeof e=="object"&&e!=null&&e.data)return new Uint8Array(Object.values(e.data));if(typeof e=="object"&&e)return new Uint8Array(Object.values(e));throw new Error("getNearUint8ArrayFromBytes: Unexpected result type from bytes array")}function rA(e){const t=Buffer.from(e,"base64"),n=p9(t).txn;if(!n)throw new Error("Invalid signed transaction: missing 'txn' field");const r=s9(n),i=Buffer.from("TX"),a=Buffer.concat([i,Buffer.from(r)]),c=RF(a);return S9.encode(c).replace(/=+$/,"")}function m0(e){const t=[];let n=BigInt(e);for(;n>=BigInt(128);)t.push(Number(n&BigInt(127)|BigInt(128))),n>>=BigInt(7);return t.push(Number(n)),Buffer.from(t)}function jF(e){const t=Buffer.from(e.signed.bodyBytes,"base64"),n=Buffer.from(e.signed.authInfoBytes,"base64"),r=Buffer.from(e.signature.signature,"base64"),i=[];i.push(Buffer.from([10])),i.push(m0(t.length)),i.push(t),i.push(Buffer.from([18])),i.push(m0(n.length)),i.push(n),i.push(Buffer.from([26])),i.push(m0(r.length)),i.push(r);const a=Buffer.concat(i),c=Mp(a);return Buffer.from(c).toString("hex").toUpperCase()}var zF=Object.defineProperty,qF=Object.defineProperties,HF=Object.getOwnPropertyDescriptors,iA=Object.getOwnPropertySymbols,FF=Object.prototype.hasOwnProperty,VF=Object.prototype.propertyIsEnumerable,sA=(e,t,n)=>t in e?zF(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,GF=(e,t)=>{for(var n in t||(t={}))FF.call(t,n)&&sA(e,n,t[n]);if(iA)for(var n of iA(t))VF.call(t,n)&&sA(e,n,t[n]);return e},KF=(e,t)=>qF(e,HF(t));const WF="did:pkh:",cw=e=>e?.split(":"),YF=e=>{const t=e&&cw(e);if(t)return e.includes(WF)?t[3]:t[1]},Bb=e=>{const t=e&&cw(e);if(t)return t[2]+":"+t[3]},ap=e=>{const t=e&&cw(e);if(t)return t.pop()};async function oA(e){const{cacao:t,projectId:n}=e,{s:r,p:i}=t,a=gC(i,i.iss),c=ap(i.iss);return await $F(c,a,r,Bb(i.iss),n)}const gC=(e,t)=>{const n=`${e.domain} wants you to sign in with your Ethereum account:`,r=ap(t);if(!e.aud&&!e.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let i=e.statement||void 0;const a=`URI: ${e.aud||e.uri}`,c=`Version: ${e.version}`,u=`Chain ID: ${YF(t)}`,f=`Nonce: ${e.nonce}`,d=`Issued At: ${e.iat}`,p=e.exp?`Expiration Time: ${e.exp}`:void 0,g=e.nbf?`Not Before: ${e.nbf}`:void 0,y=e.requestId?`Request ID: ${e.requestId}`:void 0,b=e.resources?`Resources:${e.resources.map(E=>`
- ${E}`).join("")}`:void 0,v=Lh(e.resources);if(v){const E=df(v);i=iV(i,E)}return[n,r,"",i,"",a,c,u,f,d,p,g,y,b].filter(E=>E!=null).join(`
`)};function XF(e){return Buffer.from(JSON.stringify(e)).toString("base64")}function ZF(e){return JSON.parse(Buffer.from(e,"base64").toString("utf-8"))}function ua(e){if(!e)throw new Error("No recap provided, value is undefined");if(!e.att)throw new Error("No `att` property found");const t=Object.keys(e.att);if(!(t!=null&&t.length))throw new Error("No resources found in `att` property");t.forEach(n=>{const r=e.att[n];if(Array.isArray(r))throw new Error(`Resource must be an object: ${n}`);if(typeof r!="object")throw new Error(`Resource must be an object: ${n}`);if(!Object.keys(r).length)throw new Error(`Resource object is empty: ${n}`);Object.keys(r).forEach(i=>{const a=r[i];if(!Array.isArray(a))throw new Error(`Ability limits ${i} must be an array of objects, found: ${a}`);if(!a.length)throw new Error(`Value of ${i} is empty array, must be an array with objects`);a.forEach(c=>{if(typeof c!="object")throw new Error(`Ability limits (${i}) must be an array of objects, found: ${c}`)})})})}function QF(e,t,n,r={}){return n?.sort((i,a)=>i.localeCompare(a)),{att:{[e]:JF(t,n,r)}}}function JF(e,t,n={}){t=t?.sort((i,a)=>i.localeCompare(a));const r=t.map(i=>({[`${e}/${i}`]:[n]}));return Object.assign({},...r)}function mC(e){return ua(e),`urn:recap:${XF(e).replace(/=/g,"")}`}function df(e){const t=ZF(e.replace("urn:recap:",""));return ua(t),t}function eV(e,t,n){const r=QF(e,t,n);return mC(r)}function tV(e){return e&&e.includes("urn:recap:")}function nV(e,t){const n=df(e),r=df(t),i=rV(n,r);return mC(i)}function rV(e,t){ua(e),ua(t);const n=Object.keys(e.att).concat(Object.keys(t.att)).sort((i,a)=>i.localeCompare(a)),r={att:{}};return n.forEach(i=>{var a,c;Object.keys(((a=e.att)==null?void 0:a[i])||{}).concat(Object.keys(((c=t.att)==null?void 0:c[i])||{})).sort((u,f)=>u.localeCompare(f)).forEach(u=>{var f,d;r.att[i]=KF(GF({},r.att[i]),{[u]:((f=e.att[i])==null?void 0:f[u])||((d=t.att[i])==null?void 0:d[u])})})}),r}function iV(e="",t){ua(t);const n="I further authorize the stated URI to perform the following actions on my behalf: ";if(e.includes(n))return e;const r=[];let i=0;Object.keys(t.att).forEach(u=>{const f=Object.keys(t.att[u]).map(g=>({ability:g.split("/")[0],action:g.split("/")[1]}));f.sort((g,y)=>g.action.localeCompare(y.action));const d={};f.forEach(g=>{d[g.ability]||(d[g.ability]=[]),d[g.ability].push(g.action)});const p=Object.keys(d).map(g=>(i++,`(${i}) '${g}': '${d[g].join("', '")}' for '${u}'.`));r.push(p.join(", ").replace(".,","."))});const a=r.join(" "),c=`${n}${a}`;return`${e?e+" ":""}${c}`}function aA(e){var t;const n=df(e);ua(n);const r=(t=n.att)==null?void 0:t.eip155;return r?Object.keys(r).map(i=>i.split("/")[1]):[]}function cA(e){const t=df(e);ua(t);const n=[];return Object.values(t.att).forEach(r=>{Object.values(r).forEach(i=>{var a;(a=i?.[0])!=null&&a.chains&&n.push(i[0].chains)})}),[...new Set(n.flat())]}function Lh(e){if(!e)return;const t=e?.[e.length-1];return tV(t)?t:void 0}/*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) */function yC(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function Pb(e){if(typeof e!="boolean")throw new Error(`boolean expected, not ${e}`)}function y0(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function Yn(e,...t){if(!yC(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function lA(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function sV(e,t){Yn(e);const n=t.outputLen;if(e.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function fo(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))}function Kc(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}function oV(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}const aV=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function cV(e){if(typeof e!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(e))}function kb(e){if(typeof e=="string")e=cV(e);else if(yC(e))e=Mb(e);else throw new Error("Uint8Array expected, got "+typeof e);return e}function lV(e,t){if(t==null||typeof t!="object")throw new Error("options must be defined");return Object.assign(e,t)}function uV(e,t){if(e.length!==t.length)return!1;let n=0;for(let r=0;r<e.length;r++)n|=e[r]^t[r];return n===0}const fV=(e,t)=>{function n(r,...i){if(Yn(r),!aV)throw new Error("Non little-endian hardware is not yet supported");if(e.nonceLength!==void 0){const d=i[0];if(!d)throw new Error("nonce / iv required");e.varSizeNonce?Yn(d):Yn(d,e.nonceLength)}const a=e.tagLength;a&&i[1]!==void 0&&Yn(i[1]);const c=t(r,...i),u=(d,p)=>{if(p!==void 0){if(d!==2)throw new Error("cipher output not supported");Yn(p)}};let f=!1;return{encrypt(d,p){if(f)throw new Error("cannot encrypt() twice with same key + nonce");return f=!0,Yn(d),u(c.encrypt.length,p),c.encrypt(d,p)},decrypt(d,p){if(Yn(d),a&&d.length<a)throw new Error("invalid ciphertext length: smaller than tagLength="+a);return u(c.decrypt.length,p),c.decrypt(d,p)}}}return Object.assign(n,e),n};function uA(e,t,n=!0){if(t===void 0)return new Uint8Array(e);if(t.length!==e)throw new Error("invalid output length, expected "+e+", got: "+t.length);if(n&&!hV(t))throw new Error("invalid output, must be aligned");return t}function fA(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const i=BigInt(32),a=BigInt(4294967295),c=Number(n>>i&a),u=Number(n&a);e.setUint32(t+4,c,r),e.setUint32(t+0,u,r)}function dV(e,t,n){Pb(n);const r=new Uint8Array(16),i=oV(r);return fA(i,0,BigInt(t),n),fA(i,8,BigInt(e),n),r}function hV(e){return e.byteOffset%4===0}function Mb(e){return Uint8Array.from(e)}const bC=e=>Uint8Array.from(e.split("").map(t=>t.charCodeAt(0))),pV=bC("expand 16-byte k"),gV=bC("expand 32-byte k"),mV=fo(pV),yV=fo(gV);function Ve(e,t){return e<<t|e>>>32-t}function Lb(e){return e.byteOffset%4===0}const dh=64,bV=16,vC=2**32-1,dA=new Uint32Array;function vV(e,t,n,r,i,a,c,u){const f=i.length,d=new Uint8Array(dh),p=fo(d),g=Lb(i)&&Lb(a),y=g?fo(i):dA,b=g?fo(a):dA;for(let v=0;v<f;c++){if(e(t,n,r,p,c,u),c>=vC)throw new Error("arx: counter overflow");const E=Math.min(dh,f-v);if(g&&E===dh){const S=v/4;if(v%4!==0)throw new Error("arx: invalid block position");for(let x=0,T;x<bV;x++)T=S+x,b[T]=y[T]^p[x];v+=dh;continue}for(let S=0,x;S<E;S++)x=v+S,a[x]=i[x]^d[S];v+=E}}function wV(e,t){const{allowShortKeys:n,extendNonceFn:r,counterLength:i,counterRight:a,rounds:c}=lV({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},t);if(typeof e!="function")throw new Error("core must be a function");return y0(i),y0(c),Pb(a),Pb(n),(u,f,d,p,g=0)=>{Yn(u),Yn(f),Yn(d);const y=d.length;if(p===void 0&&(p=new Uint8Array(y)),Yn(p),y0(g),g<0||g>=vC)throw new Error("arx: counter overflow");if(p.length<y)throw new Error(`arx: output (${p.length}) is shorter than data (${y})`);const b=[];let v=u.length,E,S;if(v===32)b.push(E=Mb(u)),S=yV;else if(v===16&&n)E=new Uint8Array(32),E.set(u),E.set(u,16),S=mV,b.push(E);else throw new Error(`arx: invalid 32-byte key, got length=${v}`);Lb(f)||b.push(f=Mb(f));const x=fo(E);if(r){if(f.length!==24)throw new Error("arx: extended nonce must be 24 bytes");r(S,x,fo(f.subarray(0,16)),x),f=f.subarray(16)}const T=16-i;if(T!==f.length)throw new Error(`arx: nonce must be ${T} or 16 bytes`);if(T!==12){const U=new Uint8Array(12);U.set(f,a?0:12-f.length),f=U,b.push(f)}const O=fo(f);return vV(e,S,x,O,d,p,g,c),Kc(...b),p}}const hn=(e,t)=>e[t++]&255|(e[t++]&255)<<8;class EV{constructor(t){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,t=kb(t),Yn(t,32);const n=hn(t,0),r=hn(t,2),i=hn(t,4),a=hn(t,6),c=hn(t,8),u=hn(t,10),f=hn(t,12),d=hn(t,14);this.r[0]=n&8191,this.r[1]=(n>>>13|r<<3)&8191,this.r[2]=(r>>>10|i<<6)&7939,this.r[3]=(i>>>7|a<<9)&8191,this.r[4]=(a>>>4|c<<12)&255,this.r[5]=c>>>1&8190,this.r[6]=(c>>>14|u<<2)&8191,this.r[7]=(u>>>11|f<<5)&8065,this.r[8]=(f>>>8|d<<8)&8191,this.r[9]=d>>>5&127;for(let p=0;p<8;p++)this.pad[p]=hn(t,16+2*p)}process(t,n,r=!1){const i=r?0:2048,{h:a,r:c}=this,u=c[0],f=c[1],d=c[2],p=c[3],g=c[4],y=c[5],b=c[6],v=c[7],E=c[8],S=c[9],x=hn(t,n+0),T=hn(t,n+2),O=hn(t,n+4),U=hn(t,n+6),N=hn(t,n+8),I=hn(t,n+10),j=hn(t,n+12),z=hn(t,n+14);let P=a[0]+(x&8191),G=a[1]+((x>>>13|T<<3)&8191),F=a[2]+((T>>>10|O<<6)&8191),K=a[3]+((O>>>7|U<<9)&8191),re=a[4]+((U>>>4|N<<12)&8191),J=a[5]+(N>>>1&8191),D=a[6]+((N>>>14|I<<2)&8191),R=a[7]+((I>>>11|j<<5)&8191),L=a[8]+((j>>>8|z<<8)&8191),V=a[9]+(z>>>5|i),X=0,$=X+P*u+G*(5*S)+F*(5*E)+K*(5*v)+re*(5*b);X=$>>>13,$&=8191,$+=J*(5*y)+D*(5*g)+R*(5*p)+L*(5*d)+V*(5*f),X+=$>>>13,$&=8191;let W=X+P*f+G*u+F*(5*S)+K*(5*E)+re*(5*v);X=W>>>13,W&=8191,W+=J*(5*b)+D*(5*y)+R*(5*g)+L*(5*p)+V*(5*d),X+=W>>>13,W&=8191;let te=X+P*d+G*f+F*u+K*(5*S)+re*(5*E);X=te>>>13,te&=8191,te+=J*(5*v)+D*(5*b)+R*(5*y)+L*(5*g)+V*(5*p),X+=te>>>13,te&=8191;let se=X+P*p+G*d+F*f+K*u+re*(5*S);X=se>>>13,se&=8191,se+=J*(5*E)+D*(5*v)+R*(5*b)+L*(5*y)+V*(5*g),X+=se>>>13,se&=8191;let ne=X+P*g+G*p+F*d+K*f+re*u;X=ne>>>13,ne&=8191,ne+=J*(5*S)+D*(5*E)+R*(5*v)+L*(5*b)+V*(5*y),X+=ne>>>13,ne&=8191;let ue=X+P*y+G*g+F*p+K*d+re*f;X=ue>>>13,ue&=8191,ue+=J*u+D*(5*S)+R*(5*E)+L*(5*v)+V*(5*b),X+=ue>>>13,ue&=8191;let me=X+P*b+G*y+F*g+K*p+re*d;X=me>>>13,me&=8191,me+=J*f+D*u+R*(5*S)+L*(5*E)+V*(5*v),X+=me>>>13,me&=8191;let Re=X+P*v+G*b+F*y+K*g+re*p;X=Re>>>13,Re&=8191,Re+=J*d+D*f+R*u+L*(5*S)+V*(5*E),X+=Re>>>13,Re&=8191;let we=X+P*E+G*v+F*b+K*y+re*g;X=we>>>13,we&=8191,we+=J*p+D*d+R*f+L*u+V*(5*S),X+=we>>>13,we&=8191;let _e=X+P*S+G*E+F*v+K*b+re*y;X=_e>>>13,_e&=8191,_e+=J*g+D*p+R*d+L*f+V*u,X+=_e>>>13,_e&=8191,X=(X<<2)+X|0,X=X+$|0,$=X&8191,X=X>>>13,W+=X,a[0]=$,a[1]=W,a[2]=te,a[3]=se,a[4]=ne,a[5]=ue,a[6]=me,a[7]=Re,a[8]=we,a[9]=_e}finalize(){const{h:t,pad:n}=this,r=new Uint16Array(10);let i=t[1]>>>13;t[1]&=8191;for(let u=2;u<10;u++)t[u]+=i,i=t[u]>>>13,t[u]&=8191;t[0]+=i*5,i=t[0]>>>13,t[0]&=8191,t[1]+=i,i=t[1]>>>13,t[1]&=8191,t[2]+=i,r[0]=t[0]+5,i=r[0]>>>13,r[0]&=8191;for(let u=1;u<10;u++)r[u]=t[u]+i,i=r[u]>>>13,r[u]&=8191;r[9]-=8192;let a=(i^1)-1;for(let u=0;u<10;u++)r[u]&=a;a=~a;for(let u=0;u<10;u++)t[u]=t[u]&a|r[u];t[0]=(t[0]|t[1]<<13)&65535,t[1]=(t[1]>>>3|t[2]<<10)&65535,t[2]=(t[2]>>>6|t[3]<<7)&65535,t[3]=(t[3]>>>9|t[4]<<4)&65535,t[4]=(t[4]>>>12|t[5]<<1|t[6]<<14)&65535,t[5]=(t[6]>>>2|t[7]<<11)&65535,t[6]=(t[7]>>>5|t[8]<<8)&65535,t[7]=(t[8]>>>8|t[9]<<5)&65535;let c=t[0]+n[0];t[0]=c&65535;for(let u=1;u<8;u++)c=(t[u]+n[u]|0)+(c>>>16)|0,t[u]=c&65535;Kc(r)}update(t){lA(this),t=kb(t),Yn(t);const{buffer:n,blockLen:r}=this,i=t.length;for(let a=0;a<i;){const c=Math.min(r-this.pos,i-a);if(c===r){for(;r<=i-a;a+=r)this.process(t,a);continue}n.set(t.subarray(a,a+c),this.pos),this.pos+=c,a+=c,this.pos===r&&(this.process(n,0,!1),this.pos=0)}return this}destroy(){Kc(this.h,this.r,this.buffer,this.pad)}digestInto(t){lA(this),sV(t,this),this.finished=!0;const{buffer:n,h:r}=this;let{pos:i}=this;if(i){for(n[i++]=1;i<16;i++)n[i]=0;this.process(n,0,!0)}this.finalize();let a=0;for(let c=0;c<8;c++)t[a++]=r[c]>>>0,t[a++]=r[c]>>>8;return t}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}}function SV(e){const t=(r,i)=>e(i).update(kb(r)).digest(),n=e(new Uint8Array(32));return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=r=>e(r),t}const _V=SV(e=>new EV(e));function xV(e,t,n,r,i,a=20){let c=e[0],u=e[1],f=e[2],d=e[3],p=t[0],g=t[1],y=t[2],b=t[3],v=t[4],E=t[5],S=t[6],x=t[7],T=i,O=n[0],U=n[1],N=n[2],I=c,j=u,z=f,P=d,G=p,F=g,K=y,re=b,J=v,D=E,R=S,L=x,V=T,X=O,$=U,W=N;for(let se=0;se<a;se+=2)I=I+G|0,V=Ve(V^I,16),J=J+V|0,G=Ve(G^J,12),I=I+G|0,V=Ve(V^I,8),J=J+V|0,G=Ve(G^J,7),j=j+F|0,X=Ve(X^j,16),D=D+X|0,F=Ve(F^D,12),j=j+F|0,X=Ve(X^j,8),D=D+X|0,F=Ve(F^D,7),z=z+K|0,$=Ve($^z,16),R=R+$|0,K=Ve(K^R,12),z=z+K|0,$=Ve($^z,8),R=R+$|0,K=Ve(K^R,7),P=P+re|0,W=Ve(W^P,16),L=L+W|0,re=Ve(re^L,12),P=P+re|0,W=Ve(W^P,8),L=L+W|0,re=Ve(re^L,7),I=I+F|0,W=Ve(W^I,16),R=R+W|0,F=Ve(F^R,12),I=I+F|0,W=Ve(W^I,8),R=R+W|0,F=Ve(F^R,7),j=j+K|0,V=Ve(V^j,16),L=L+V|0,K=Ve(K^L,12),j=j+K|0,V=Ve(V^j,8),L=L+V|0,K=Ve(K^L,7),z=z+re|0,X=Ve(X^z,16),J=J+X|0,re=Ve(re^J,12),z=z+re|0,X=Ve(X^z,8),J=J+X|0,re=Ve(re^J,7),P=P+G|0,$=Ve($^P,16),D=D+$|0,G=Ve(G^D,12),P=P+G|0,$=Ve($^P,8),D=D+$|0,G=Ve(G^D,7);let te=0;r[te++]=c+I|0,r[te++]=u+j|0,r[te++]=f+z|0,r[te++]=d+P|0,r[te++]=p+G|0,r[te++]=g+F|0,r[te++]=y+K|0,r[te++]=b+re|0,r[te++]=v+J|0,r[te++]=E+D|0,r[te++]=S+R|0,r[te++]=x+L|0,r[te++]=T+V|0,r[te++]=O+X|0,r[te++]=U+$|0,r[te++]=N+W|0}const AV=wV(xV,{counterRight:!1,counterLength:4,allowShortKeys:!1}),RV=new Uint8Array(16),hA=(e,t)=>{e.update(t);const n=t.length%16;n&&e.update(RV.subarray(n))},OV=new Uint8Array(32);function pA(e,t,n,r,i){const a=e(t,n,OV),c=_V.create(a);i&&hA(c,i),hA(c,r);const u=dV(r.length,i?i.length:0,!0);c.update(u);const f=c.digest();return Kc(a,u),f}const TV=e=>(t,n,r)=>({encrypt(i,a){const c=i.length;a=uA(c+16,a,!1),a.set(i);const u=a.subarray(0,-16);e(t,n,u,u,1);const f=pA(e,t,n,u,r);return a.set(f,c),Kc(f),a},decrypt(i,a){a=uA(i.length-16,a,!1);const c=i.subarray(0,-16),u=i.subarray(-16),f=pA(e,t,n,c,r);if(!uV(u,f))throw new Error("invalid tag");return a.set(i.subarray(0,-16)),e(t,n,a,a,1),Kc(f),a}}),wC=fV({blockSize:64,nonceLength:12,tagLength:16},TV(AV));let EC=class extends kp{constructor(t,n){super(),this.finished=!1,this.destroyed=!1,iw(t);const r=ii(n);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,a=new Uint8Array(i);a.set(r.length>i?t.create().update(r).digest():r);for(let c=0;c<a.length;c++)a[c]^=54;this.iHash.update(a),this.oHash=t.create();for(let c=0;c<a.length;c++)a[c]^=106;this.oHash.update(a),jr(a)}update(t){return ho(this),this.iHash.update(t),this}digestInto(t){ho(this),Lr(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:i,destroyed:a,blockLen:c,outputLen:u}=this;return t=t,t.finished=i,t.destroyed=a,t.blockLen=c,t.outputLen=u,t.oHash=n._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const Lp=(e,t,n)=>new EC(e,t).update(n).digest();Lp.create=(e,t)=>new EC(e,t);function DV(e,t,n){return iw(e),n===void 0&&(n=new Uint8Array(e.outputLen)),Lp(e,ii(n),ii(t))}const b0=Uint8Array.from([0]),gA=Uint8Array.of();function CV(e,t,n,r=32){iw(e),bs(r);const i=e.outputLen;if(r>255*i)throw new Error("Length should be <= 255*HashLen");const a=Math.ceil(r/i);n===void 0&&(n=gA);const c=new Uint8Array(a*i),u=Lp.create(e,t),f=u._cloneInto(),d=new Uint8Array(u.outputLen);for(let p=0;p<a;p++)b0[0]=p+1,f.update(p===0?gA:d).update(n).update(b0).digestInto(d),c.set(d,i*p),u._cloneInto(f);return u.destroy(),f.destroy(),jr(d,b0),c.slice(0,r)}const IV=(e,t,n,r,i)=>CV(e,DV(e,t,n),r,i),jp=Mp,lw=BigInt(0),jb=BigInt(1);function cp(e,t){if(typeof t!="boolean")throw new Error(e+" boolean expected, got "+t)}function hh(e){const t=e.toString(16);return t.length&1?"0"+t:t}function SC(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return e===""?lw:BigInt("0x"+e)}function zp(e){return SC(ff(e))}function lp(e){return Lr(e),SC(ff(Uint8Array.from(e).reverse()))}function uw(e,t){return ow(e.toString(16).padStart(t*2,"0"))}function fw(e,t){return uw(e,t).reverse()}function Wn(e,t,n){let r;if(typeof t=="string")try{r=ow(t)}catch(a){throw new Error(e+" must be hex string or Uint8Array, cause: "+a)}else if(rw(t))r=Uint8Array.from(t);else throw new Error(e+" must be hex string or Uint8Array");const i=r.length;if(typeof n=="number"&&i!==n)throw new Error(e+" of length "+n+" expected, got "+i);return r}const v0=e=>typeof e=="bigint"&&lw<=e;function NV(e,t,n){return v0(e)&&v0(t)&&v0(n)&&t<=e&&e<n}function zb(e,t,n,r){if(!NV(t,n,r))throw new Error("expected valid "+e+": "+n+" <= n < "+r+", got "+t)}function $V(e){let t;for(t=0;e>lw;e>>=jb,t+=1);return t}const qp=e=>(jb<<BigInt(e))-jb;function UV(e,t,n){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");const r=y=>new Uint8Array(y),i=y=>Uint8Array.of(y);let a=r(e),c=r(e),u=0;const f=()=>{a.fill(1),c.fill(0),u=0},d=(...y)=>n(c,a,...y),p=(y=r(0))=>{c=d(i(0),y),a=d(),y.length!==0&&(c=d(i(1),y),a=d())},g=()=>{if(u++>=1e3)throw new Error("drbg: tried 1000 values");let y=0;const b=[];for(;y<t;){a=d();const v=a.slice();b.push(v),y+=a.length}return Jo(...b)};return(y,b)=>{f(),p(y);let v;for(;!(v=b(g()));)p();return f(),v}}function Hp(e,t,n={}){if(!e||typeof e!="object")throw new Error("expected valid options object");function r(i,a,c){const u=e[i];if(c&&u===void 0)return;const f=typeof u;if(f!==a||u===null)throw new Error(`param "${i}" is invalid: expected ${a}, got ${f}`)}Object.entries(t).forEach(([i,a])=>r(i,a,!1)),Object.entries(n).forEach(([i,a])=>r(i,a,!0))}function mA(e){const t=new WeakMap;return(n,...r)=>{const i=t.get(n);if(i!==void 0)return i;const a=e(n,...r);return t.set(n,a),a}}const Zn=BigInt(0),Bn=BigInt(1),ea=BigInt(2),BV=BigInt(3),_C=BigInt(4),xC=BigInt(5),AC=BigInt(8);function kr(e,t){const n=e%t;return n>=Zn?n:t+n}function ei(e,t,n){let r=e;for(;t-- >Zn;)r*=r,r%=n;return r}function yA(e,t){if(e===Zn)throw new Error("invert: expected non-zero number");if(t<=Zn)throw new Error("invert: expected positive modulus, got "+t);let n=kr(e,t),r=t,i=Zn,a=Bn;for(;n!==Zn;){const c=r/n,u=r%n,f=i-a*c;r=n,n=u,i=a,a=f}if(r!==Bn)throw new Error("invert: does not exist");return kr(i,t)}function RC(e,t){const n=(e.ORDER+Bn)/_C,r=e.pow(t,n);if(!e.eql(e.sqr(r),t))throw new Error("Cannot find square root");return r}function PV(e,t){const n=(e.ORDER-xC)/AC,r=e.mul(t,ea),i=e.pow(r,n),a=e.mul(t,i),c=e.mul(e.mul(a,ea),i),u=e.mul(a,e.sub(c,e.ONE));if(!e.eql(e.sqr(u),t))throw new Error("Cannot find square root");return u}function kV(e){if(e<BigInt(3))throw new Error("sqrt is not defined for small field");let t=e-Bn,n=0;for(;t%ea===Zn;)t/=ea,n++;let r=ea;const i=ul(e);for(;bA(i,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return RC;let a=i.pow(r,t);const c=(t+Bn)/ea;return function(u,f){if(u.is0(f))return f;if(bA(u,f)!==1)throw new Error("Cannot find square root");let d=n,p=u.mul(u.ONE,a),g=u.pow(f,t),y=u.pow(f,c);for(;!u.eql(g,u.ONE);){if(u.is0(g))return u.ZERO;let b=1,v=u.sqr(g);for(;!u.eql(v,u.ONE);)if(b++,v=u.sqr(v),b===d)throw new Error("Cannot find square root");const E=Bn<<BigInt(d-b-1),S=u.pow(p,E);d=b,p=u.sqr(S),g=u.mul(g,p),y=u.mul(y,S)}return y}}function MV(e){return e%_C===BV?RC:e%AC===xC?PV:kV(e)}const LV=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function jV(e){const t={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},n=LV.reduce((r,i)=>(r[i]="function",r),t);return Hp(e,n),e}function zV(e,t,n){if(n<Zn)throw new Error("invalid exponent, negatives unsupported");if(n===Zn)return e.ONE;if(n===Bn)return t;let r=e.ONE,i=t;for(;n>Zn;)n&Bn&&(r=e.mul(r,i)),i=e.sqr(i),n>>=Bn;return r}function OC(e,t,n=!1){const r=new Array(t.length).fill(n?e.ZERO:void 0),i=t.reduce((c,u,f)=>e.is0(u)?c:(r[f]=c,e.mul(c,u)),e.ONE),a=e.inv(i);return t.reduceRight((c,u,f)=>e.is0(u)?c:(r[f]=e.mul(c,r[f]),e.mul(c,u)),a),r}function bA(e,t){const n=(e.ORDER-Bn)/ea,r=e.pow(t,n),i=e.eql(r,e.ONE),a=e.eql(r,e.ZERO),c=e.eql(r,e.neg(e.ONE));if(!i&&!a&&!c)throw new Error("invalid Legendre symbol result");return i?1:a?0:-1}function qV(e,t){t!==void 0&&bs(t);const n=t!==void 0?t:e.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function ul(e,t,n=!1,r={}){if(e<=Zn)throw new Error("invalid field: expected ORDER > 0, got "+e);let i,a;if(typeof t=="object"&&t!=null){if(r.sqrt||n)throw new Error("cannot specify opts in two arguments");const p=t;p.BITS&&(i=p.BITS),p.sqrt&&(a=p.sqrt),typeof p.isLE=="boolean"&&(n=p.isLE)}else typeof t=="number"&&(i=t),r.sqrt&&(a=r.sqrt);const{nBitLength:c,nByteLength:u}=qV(e,i);if(u>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let f;const d=Object.freeze({ORDER:e,isLE:n,BITS:c,BYTES:u,MASK:qp(c),ZERO:Zn,ONE:Bn,create:p=>kr(p,e),isValid:p=>{if(typeof p!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof p);return Zn<=p&&p<e},is0:p=>p===Zn,isValidNot0:p=>!d.is0(p)&&d.isValid(p),isOdd:p=>(p&Bn)===Bn,neg:p=>kr(-p,e),eql:(p,g)=>p===g,sqr:p=>kr(p*p,e),add:(p,g)=>kr(p+g,e),sub:(p,g)=>kr(p-g,e),mul:(p,g)=>kr(p*g,e),pow:(p,g)=>zV(d,p,g),div:(p,g)=>kr(p*yA(g,e),e),sqrN:p=>p*p,addN:(p,g)=>p+g,subN:(p,g)=>p-g,mulN:(p,g)=>p*g,inv:p=>yA(p,e),sqrt:a||(p=>(f||(f=MV(e)),f(d,p))),toBytes:p=>n?fw(p,u):uw(p,u),fromBytes:p=>{if(p.length!==u)throw new Error("Field.fromBytes: expected "+u+" bytes, got "+p.length);return n?lp(p):zp(p)},invertBatch:p=>OC(d,p),cmov:(p,g,y)=>y?g:p});return Object.freeze(d)}function TC(e){if(typeof e!="bigint")throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function DC(e){const t=TC(e);return t+Math.ceil(t/2)}function HV(e,t,n=!1){const r=e.length,i=TC(t),a=DC(t);if(r<16||r<a||r>1024)throw new Error("expected "+a+"-1024 bytes of input, got "+r);const c=n?lp(e):zp(e),u=kr(c,t-Bn)+Bn;return n?fw(u,i):uw(u,i)}const Wc=BigInt(0),ta=BigInt(1);function Fu(e,t){const n=t.negate();return e?n:t}function FV(e,t,n){const r=a=>a.pz,i=OC(e.Fp,n.map(r));return n.map((a,c)=>a.toAffine(i[c])).map(e.fromAffine)}function CC(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+e)}function w0(e,t){CC(e,t);const n=Math.ceil(t/e)+1,r=2**(e-1),i=2**e,a=qp(e),c=BigInt(e);return{windows:n,windowSize:r,mask:a,maxNumber:i,shiftBy:c}}function vA(e,t,n){const{windowSize:r,mask:i,maxNumber:a,shiftBy:c}=n;let u=Number(e&i),f=e>>c;u>r&&(u-=a,f+=ta);const d=t*r,p=d+Math.abs(u)-1,g=u===0,y=u<0,b=t%2!==0;return{nextN:f,offset:p,isZero:g,isNeg:y,isNegF:b,offsetF:d}}function VV(e,t){if(!Array.isArray(e))throw new Error("array expected");e.forEach((n,r)=>{if(!(n instanceof t))throw new Error("invalid point at index "+r)})}function GV(e,t){if(!Array.isArray(e))throw new Error("array of scalars expected");e.forEach((n,r)=>{if(!t.isValid(n))throw new Error("invalid scalar at index "+r)})}const E0=new WeakMap,IC=new WeakMap;function S0(e){return IC.get(e)||1}function wA(e){if(e!==Wc)throw new Error("invalid wNAF")}function KV(e,t){return{constTimeNegate:Fu,hasPrecomputes(n){return S0(n)!==1},unsafeLadder(n,r,i=e.ZERO){let a=n;for(;r>Wc;)r&ta&&(i=i.add(a)),a=a.double(),r>>=ta;return i},precomputeWindow(n,r){const{windows:i,windowSize:a}=w0(r,t),c=[];let u=n,f=u;for(let d=0;d<i;d++){f=u,c.push(f);for(let p=1;p<a;p++)f=f.add(u),c.push(f);u=f.double()}return c},wNAF(n,r,i){let a=e.ZERO,c=e.BASE;const u=w0(n,t);for(let f=0;f<u.windows;f++){const{nextN:d,offset:p,isZero:g,isNeg:y,isNegF:b,offsetF:v}=vA(i,f,u);i=d,g?c=c.add(Fu(b,r[v])):a=a.add(Fu(y,r[p]))}return wA(i),{p:a,f:c}},wNAFUnsafe(n,r,i,a=e.ZERO){const c=w0(n,t);for(let u=0;u<c.windows&&i!==Wc;u++){const{nextN:f,offset:d,isZero:p,isNeg:g}=vA(i,u,c);if(i=f,!p){const y=r[d];a=a.add(g?y.negate():y)}}return wA(i),a},getPrecomputes(n,r,i){let a=E0.get(r);return a||(a=this.precomputeWindow(r,n),n!==1&&(typeof i=="function"&&(a=i(a)),E0.set(r,a))),a},wNAFCached(n,r,i){const a=S0(n);return this.wNAF(a,this.getPrecomputes(a,n,i),r)},wNAFCachedUnsafe(n,r,i,a){const c=S0(n);return c===1?this.unsafeLadder(n,r,a):this.wNAFUnsafe(c,this.getPrecomputes(c,n,i),r,a)},setWindowSize(n,r){CC(r,t),IC.set(n,r),E0.delete(n)}}}function WV(e,t,n,r){let i=t,a=e.ZERO,c=e.ZERO;for(;n>Wc||r>Wc;)n&ta&&(a=a.add(i)),r&ta&&(c=c.add(i)),i=i.double(),n>>=ta,r>>=ta;return{p1:a,p2:c}}function YV(e,t,n,r){VV(n,e),GV(r,t);const i=n.length,a=r.length;if(i!==a)throw new Error("arrays of points and scalars must have equal length");const c=e.ZERO,u=$V(BigInt(i));let f=1;u>12?f=u-3:u>4?f=u-2:u>0&&(f=2);const d=qp(f),p=new Array(Number(d)+1).fill(c),g=Math.floor((t.BITS-1)/f)*f;let y=c;for(let b=g;b>=0;b-=f){p.fill(c);for(let E=0;E<a;E++){const S=r[E],x=Number(S>>BigInt(b)&d);p[x]=p[x].add(n[E])}let v=c;for(let E=p.length-1,S=c;E>0;E--)S=S.add(p[E]),v=v.add(S);if(y=y.add(v),b!==0)for(let E=0;E<f;E++)y=y.double()}return y}function EA(e,t){if(t){if(t.ORDER!==e)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return jV(t),t}else return ul(e)}function XV(e,t,n={}){if(!t||typeof t!="object")throw new Error(`expected valid ${e} CURVE object`);for(const c of["p","n","h"]){const u=t[c];if(!(typeof u=="bigint"&&u>Wc))throw new Error(`CURVE.${c} must be positive bigint`)}const r=EA(t.p,n.Fp),i=EA(t.n,n.Fn),a=["Gx","Gy","a","b"];for(const c of a)if(!r.isValid(t[c]))throw new Error(`CURVE.${c} must be valid field element of CURVE.Fp`);return{Fp:r,Fn:i}}BigInt(0),BigInt(1),BigInt(2),BigInt(8);const xu=BigInt(0),vc=BigInt(1),ph=BigInt(2);function ZV(e){return Hp(e,{adjustScalarBytes:"function",powPminus2:"function"}),Object.freeze({...e})}function QV(e){const t=ZV(e),{P:n,type:r,adjustScalarBytes:i,powPminus2:a,randomBytes:c}=t,u=r==="x25519";if(!u&&r!=="x448")throw new Error("invalid type");const f=c||ll,d=u?255:448,p=u?32:56,g=BigInt(u?9:5),y=BigInt(u?121665:39081),b=u?ph**BigInt(254):ph**BigInt(447),v=u?BigInt(8)*ph**BigInt(251)-vc:BigInt(4)*ph**BigInt(445)-vc,E=b+v+vc,S=P=>kr(P,n),x=T(g);function T(P){return fw(S(P),p)}function O(P){const G=Wn("u coordinate",P,p);return u&&(G[31]&=127),S(lp(G))}function U(P){return lp(i(Wn("scalar",P,p)))}function N(P,G){const F=z(O(G),U(P));if(F===xu)throw new Error("invalid private or public key received");return T(F)}function I(P){return N(P,x)}function j(P,G,F){const K=S(P*(G-F));return G=S(G-K),F=S(F+K),{x_2:G,x_3:F}}function z(P,G){zb("u",P,xu,n),zb("scalar",G,b,E);const F=G,K=P;let re=vc,J=xu,D=P,R=vc,L=xu;for(let X=BigInt(d-1);X>=xu;X--){const $=F>>X&vc;L^=$,{x_2:re,x_3:D}=j(L,re,D),{x_2:J,x_3:R}=j(L,J,R),L=$;const W=re+J,te=S(W*W),se=re-J,ne=S(se*se),ue=te-ne,me=D+R,Re=D-R,we=S(Re*W),_e=S(me*se),ze=we+_e,Xe=we-_e;D=S(ze*ze),R=S(K*S(Xe*Xe)),re=S(te*ne),J=S(ue*(te+S(y*ue)))}({x_2:re,x_3:D}=j(L,re,D)),{x_2:J,x_3:R}=j(L,J,R);const V=a(J);return S(re*V)}return{scalarMult:N,scalarMultBase:I,getSharedSecret:(P,G)=>N(P,G),getPublicKey:P=>I(P),utils:{randomPrivateKey:()=>f(p)},GuBytes:x.slice()}}BigInt(0);const JV=BigInt(1),SA=BigInt(2),eG=BigInt(3),tG=BigInt(5);BigInt(8);const NC={p:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function nG(e){const t=BigInt(10),n=BigInt(20),r=BigInt(40),i=BigInt(80),a=NC.p,c=e*e%a*e%a,u=ei(c,SA,a)*c%a,f=ei(u,JV,a)*e%a,d=ei(f,tG,a)*f%a,p=ei(d,t,a)*d%a,g=ei(p,n,a)*p%a,y=ei(g,r,a)*g%a,b=ei(y,i,a)*y%a,v=ei(b,i,a)*y%a,E=ei(v,t,a)*d%a;return{pow_p_5_8:ei(E,SA,a)*e%a,b2:c}}function rG(e){return e[0]&=248,e[31]&=127,e[31]|=64,e}const qb=(()=>{const e=NC.p;return QV({P:e,type:"x25519",powPminus2:t=>{const{pow_p_5_8:n,b2:r}=nG(t);return kr(ei(n,eG,e)*r,e)},adjustScalarBytes:rG})})();function _A(e){e.lowS!==void 0&&cp("lowS",e.lowS),e.prehash!==void 0&&cp("prehash",e.prehash)}class iG extends Error{constructor(t=""){super(t)}}const ss={Err:iG,_tlv:{encode:(e,t)=>{const{Err:n}=ss;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(t.length&1)throw new n("tlv.encode: unpadded data");const r=t.length/2,i=hh(r);if(i.length/2&128)throw new n("tlv.encode: long form length too big");const a=r>127?hh(i.length/2|128):"";return hh(e)+a+i+t},decode(e,t){const{Err:n}=ss;let r=0;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(t.length<2||t[r++]!==e)throw new n("tlv.decode: wrong tlv");const i=t[r++],a=!!(i&128);let c=0;if(!a)c=i;else{const f=i&127;if(!f)throw new n("tlv.decode(long): indefinite length not supported");if(f>4)throw new n("tlv.decode(long): byte length is too big");const d=t.subarray(r,r+f);if(d.length!==f)throw new n("tlv.decode: length bytes not complete");if(d[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const p of d)c=c<<8|p;if(r+=f,c<128)throw new n("tlv.decode(long): not minimal encoding")}const u=t.subarray(r,r+c);if(u.length!==c)throw new n("tlv.decode: wrong value length");return{v:u,l:t.subarray(r+c)}}},_int:{encode(e){const{Err:t}=ss;if(e<Vu)throw new t("integer: negative integers are not allowed");let n=hh(e);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new t("unexpected DER parsing assertion: unpadded hex");return n},decode(e){const{Err:t}=ss;if(e[0]&128)throw new t("invalid signature integer: negative");if(e[0]===0&&!(e[1]&128))throw new t("invalid signature integer: unnecessary leading zero");return zp(e)}},toSig(e){const{Err:t,_int:n,_tlv:r}=ss,i=Wn("signature",e),{v:a,l:c}=r.decode(48,i);if(c.length)throw new t("invalid signature: left bytes after parsing");const{v:u,l:f}=r.decode(2,a),{v:d,l:p}=r.decode(2,f);if(p.length)throw new t("invalid signature: left bytes after parsing");return{r:n.decode(u),s:n.decode(d)}},hexFromSig(e){const{_tlv:t,_int:n}=ss,r=t.encode(2,n.encode(e.r)),i=t.encode(2,n.encode(e.s)),a=r+i;return t.encode(48,a)}},Vu=BigInt(0),Gu=BigInt(1),sG=BigInt(2),gh=BigInt(3),oG=BigInt(4);function aG(e,t,n){function r(i){const a=e.sqr(i),c=e.mul(a,i);return e.add(e.add(c,e.mul(i,t)),n)}return r}function $C(e,t,n){const{BYTES:r}=e;function i(a){let c;if(typeof a=="bigint")c=a;else{let u=Wn("private key",a);if(t){if(!t.includes(u.length*2))throw new Error("invalid private key");const f=new Uint8Array(r);f.set(u,f.length-u.length),u=f}try{c=e.fromBytes(u)}catch{throw new Error(`invalid private key: expected ui8a of size ${r}, got ${typeof a}`)}}if(n&&(c=e.create(c)),!e.isValidNot0(c))throw new Error("invalid private key: out of range [1..N-1]");return c}return i}function cG(e,t={}){const{Fp:n,Fn:r}=XV("weierstrass",e,t),{h:i,n:a}=e;Hp(t,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:c}=t;if(c&&(!n.is0(e.a)||typeof c.beta!="bigint"||typeof c.splitScalar!="function"))throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function');function u(){if(!n.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function f(z,P,G){const{x:F,y:K}=P.toAffine(),re=n.toBytes(F);if(cp("isCompressed",G),G){u();const J=!n.isOdd(K);return Jo(UC(J),re)}else return Jo(Uint8Array.of(4),re,n.toBytes(K))}function d(z){Lr(z);const P=n.BYTES,G=P+1,F=2*P+1,K=z.length,re=z[0],J=z.subarray(1);if(K===G&&(re===2||re===3)){const D=n.fromBytes(J);if(!n.isValid(D))throw new Error("bad point: is not on curve, wrong x");const R=y(D);let L;try{L=n.sqrt(R)}catch(X){const $=X instanceof Error?": "+X.message:"";throw new Error("bad point: is not on curve, sqrt error"+$)}u();const V=n.isOdd(L);return(re&1)===1!==V&&(L=n.neg(L)),{x:D,y:L}}else if(K===F&&re===4){const D=n.fromBytes(J.subarray(P*0,P*1)),R=n.fromBytes(J.subarray(P*1,P*2));if(!b(D,R))throw new Error("bad point: is not on curve");return{x:D,y:R}}else throw new Error(`bad point: got length ${K}, expected compressed=${G} or uncompressed=${F}`)}const p=t.toBytes||f,g=t.fromBytes||d,y=aG(n,e.a,e.b);function b(z,P){const G=n.sqr(P),F=y(z);return n.eql(G,F)}if(!b(e.Gx,e.Gy))throw new Error("bad curve params: generator point");const v=n.mul(n.pow(e.a,gh),oG),E=n.mul(n.sqr(e.b),BigInt(27));if(n.is0(n.add(v,E)))throw new Error("bad curve params: a or b");function S(z,P,G=!1){if(!n.isValid(P)||G&&n.is0(P))throw new Error(`bad point coordinate ${z}`);return P}function x(z){if(!(z instanceof N))throw new Error("ProjectivePoint expected")}const T=mA((z,P)=>{const{px:G,py:F,pz:K}=z;if(n.eql(K,n.ONE))return{x:G,y:F};const re=z.is0();P==null&&(P=re?n.ONE:n.inv(K));const J=n.mul(G,P),D=n.mul(F,P),R=n.mul(K,P);if(re)return{x:n.ZERO,y:n.ZERO};if(!n.eql(R,n.ONE))throw new Error("invZ was invalid");return{x:J,y:D}}),O=mA(z=>{if(z.is0()){if(t.allowInfinityPoint&&!n.is0(z.py))return;throw new Error("bad point: ZERO")}const{x:P,y:G}=z.toAffine();if(!n.isValid(P)||!n.isValid(G))throw new Error("bad point: x or y not field elements");if(!b(P,G))throw new Error("bad point: equation left != right");if(!z.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function U(z,P,G,F,K){return G=new N(n.mul(G.px,z),G.py,G.pz),P=Fu(F,P),G=Fu(K,G),P.add(G)}class N{constructor(P,G,F){this.px=S("x",P),this.py=S("y",G,!0),this.pz=S("z",F),Object.freeze(this)}static fromAffine(P){const{x:G,y:F}=P||{};if(!P||!n.isValid(G)||!n.isValid(F))throw new Error("invalid affine point");if(P instanceof N)throw new Error("projective point not allowed");return n.is0(G)&&n.is0(F)?N.ZERO:new N(G,F,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(P){return FV(N,"pz",P)}static fromBytes(P){return Lr(P),N.fromHex(P)}static fromHex(P){const G=N.fromAffine(g(Wn("pointHex",P)));return G.assertValidity(),G}static fromPrivateKey(P){const G=$C(r,t.allowedPrivateKeyLengths,t.wrapPrivateKey);return N.BASE.multiply(G(P))}static msm(P,G){return YV(N,r,P,G)}precompute(P=8,G=!0){return j.setWindowSize(this,P),G||this.multiply(gh),this}_setWindowSize(P){this.precompute(P)}assertValidity(){O(this)}hasEvenY(){const{y:P}=this.toAffine();if(!n.isOdd)throw new Error("Field doesn't support isOdd");return!n.isOdd(P)}equals(P){x(P);const{px:G,py:F,pz:K}=this,{px:re,py:J,pz:D}=P,R=n.eql(n.mul(G,D),n.mul(re,K)),L=n.eql(n.mul(F,D),n.mul(J,K));return R&&L}negate(){return new N(this.px,n.neg(this.py),this.pz)}double(){const{a:P,b:G}=e,F=n.mul(G,gh),{px:K,py:re,pz:J}=this;let D=n.ZERO,R=n.ZERO,L=n.ZERO,V=n.mul(K,K),X=n.mul(re,re),$=n.mul(J,J),W=n.mul(K,re);return W=n.add(W,W),L=n.mul(K,J),L=n.add(L,L),D=n.mul(P,L),R=n.mul(F,$),R=n.add(D,R),D=n.sub(X,R),R=n.add(X,R),R=n.mul(D,R),D=n.mul(W,D),L=n.mul(F,L),$=n.mul(P,$),W=n.sub(V,$),W=n.mul(P,W),W=n.add(W,L),L=n.add(V,V),V=n.add(L,V),V=n.add(V,$),V=n.mul(V,W),R=n.add(R,V),$=n.mul(re,J),$=n.add($,$),V=n.mul($,W),D=n.sub(D,V),L=n.mul($,X),L=n.add(L,L),L=n.add(L,L),new N(D,R,L)}add(P){x(P);const{px:G,py:F,pz:K}=this,{px:re,py:J,pz:D}=P;let R=n.ZERO,L=n.ZERO,V=n.ZERO;const X=e.a,$=n.mul(e.b,gh);let W=n.mul(G,re),te=n.mul(F,J),se=n.mul(K,D),ne=n.add(G,F),ue=n.add(re,J);ne=n.mul(ne,ue),ue=n.add(W,te),ne=n.sub(ne,ue),ue=n.add(G,K);let me=n.add(re,D);return ue=n.mul(ue,me),me=n.add(W,se),ue=n.sub(ue,me),me=n.add(F,K),R=n.add(J,D),me=n.mul(me,R),R=n.add(te,se),me=n.sub(me,R),V=n.mul(X,ue),R=n.mul($,se),V=n.add(R,V),R=n.sub(te,V),V=n.add(te,V),L=n.mul(R,V),te=n.add(W,W),te=n.add(te,W),se=n.mul(X,se),ue=n.mul($,ue),te=n.add(te,se),se=n.sub(W,se),se=n.mul(X,se),ue=n.add(ue,se),W=n.mul(te,ue),L=n.add(L,W),W=n.mul(me,ue),R=n.mul(ne,R),R=n.sub(R,W),W=n.mul(ne,te),V=n.mul(me,V),V=n.add(V,W),new N(R,L,V)}subtract(P){return this.add(P.negate())}is0(){return this.equals(N.ZERO)}multiply(P){const{endo:G}=t;if(!r.isValidNot0(P))throw new Error("invalid scalar: out of range");let F,K;const re=J=>j.wNAFCached(this,J,N.normalizeZ);if(G){const{k1neg:J,k1:D,k2neg:R,k2:L}=G.splitScalar(P),{p:V,f:X}=re(D),{p:$,f:W}=re(L);K=X.add(W),F=U(G.beta,V,$,J,R)}else{const{p:J,f:D}=re(P);F=J,K=D}return N.normalizeZ([F,K])[0]}multiplyUnsafe(P){const{endo:G}=t,F=this;if(!r.isValid(P))throw new Error("invalid scalar: out of range");if(P===Vu||F.is0())return N.ZERO;if(P===Gu)return F;if(j.hasPrecomputes(this))return this.multiply(P);if(G){const{k1neg:K,k1:re,k2neg:J,k2:D}=G.splitScalar(P),{p1:R,p2:L}=WV(N,F,re,D);return U(G.beta,R,L,K,J)}else return j.wNAFCachedUnsafe(F,P)}multiplyAndAddUnsafe(P,G,F){const K=this.multiplyUnsafe(G).add(P.multiplyUnsafe(F));return K.is0()?void 0:K}toAffine(P){return T(this,P)}isTorsionFree(){const{isTorsionFree:P}=t;return i===Gu?!0:P?P(N,this):j.wNAFCachedUnsafe(this,a).is0()}clearCofactor(){const{clearCofactor:P}=t;return i===Gu?this:P?P(N,this):this.multiplyUnsafe(i)}toBytes(P=!0){return cp("isCompressed",P),this.assertValidity(),p(N,this,P)}toRawBytes(P=!0){return this.toBytes(P)}toHex(P=!0){return ff(this.toBytes(P))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}N.BASE=new N(e.Gx,e.Gy,n.ONE),N.ZERO=new N(n.ZERO,n.ONE,n.ZERO),N.Fp=n,N.Fn=r;const I=r.BITS,j=KV(N,t.endo?Math.ceil(I/2):I);return N}function UC(e){return Uint8Array.of(e?2:3)}function lG(e,t,n={}){Hp(t,{hash:"function"},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const r=t.randomBytes||ll,i=t.hmac||((F,...K)=>Lp(t.hash,F,Jo(...K))),{Fp:a,Fn:c}=e,{ORDER:u,BITS:f}=c;function d(F){const K=u>>Gu;return F>K}function p(F){return d(F)?c.neg(F):F}function g(F,K){if(!c.isValidNot0(K))throw new Error(`invalid signature ${F}: out of range 1..CURVE.n`)}class y{constructor(K,re,J){g("r",K),g("s",re),this.r=K,this.s=re,J!=null&&(this.recovery=J),Object.freeze(this)}static fromCompact(K){const re=c.BYTES,J=Wn("compactSignature",K,re*2);return new y(c.fromBytes(J.subarray(0,re)),c.fromBytes(J.subarray(re,re*2)))}static fromDER(K){const{r:re,s:J}=ss.toSig(Wn("DER",K));return new y(re,J)}assertValidity(){}addRecoveryBit(K){return new y(this.r,this.s,K)}recoverPublicKey(K){const re=a.ORDER,{r:J,s:D,recovery:R}=this;if(R==null||![0,1,2,3].includes(R))throw new Error("recovery id invalid");if(u*sG<re&&R>1)throw new Error("recovery id is ambiguous for h>1 curve");const L=R===2||R===3?J+u:J;if(!a.isValid(L))throw new Error("recovery id 2 or 3 invalid");const V=a.toBytes(L),X=e.fromHex(Jo(UC((R&1)===0),V)),$=c.inv(L),W=O(Wn("msgHash",K)),te=c.create(-W*$),se=c.create(D*$),ne=e.BASE.multiplyUnsafe(te).add(X.multiplyUnsafe(se));if(ne.is0())throw new Error("point at infinify");return ne.assertValidity(),ne}hasHighS(){return d(this.s)}normalizeS(){return this.hasHighS()?new y(this.r,c.neg(this.s),this.recovery):this}toBytes(K){if(K==="compact")return Jo(c.toBytes(this.r),c.toBytes(this.s));if(K==="der")return ow(ss.hexFromSig(this));throw new Error("invalid format")}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return ff(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return ff(this.toBytes("compact"))}}const b=$C(c,n.allowedPrivateKeyLengths,n.wrapPrivateKey),v={isValidPrivateKey(F){try{return b(F),!0}catch{return!1}},normPrivateKeyToScalar:b,randomPrivateKey:()=>{const F=u;return HV(r(DC(F)),F)},precompute(F=8,K=e.BASE){return K.precompute(F,!1)}};function E(F,K=!0){return e.fromPrivateKey(F).toBytes(K)}function S(F){if(typeof F=="bigint")return!1;if(F instanceof e)return!0;const K=Wn("key",F).length,re=a.BYTES,J=re+1,D=2*re+1;if(!(n.allowedPrivateKeyLengths||c.BYTES===J))return K===J||K===D}function x(F,K,re=!0){if(S(F)===!0)throw new Error("first arg must be private key");if(S(K)===!1)throw new Error("second arg must be public key");return e.fromHex(K).multiply(b(F)).toBytes(re)}const T=t.bits2int||function(F){if(F.length>8192)throw new Error("input is too large");const K=zp(F),re=F.length*8-f;return re>0?K>>BigInt(re):K},O=t.bits2int_modN||function(F){return c.create(T(F))},U=qp(f);function N(F){return zb("num < 2^"+f,F,Vu,U),c.toBytes(F)}function I(F,K,re=j){if(["recovered","canonical"].some(ne=>ne in re))throw new Error("sign() legacy options not supported");const{hash:J}=t;let{lowS:D,prehash:R,extraEntropy:L}=re;D==null&&(D=!0),F=Wn("msgHash",F),_A(re),R&&(F=Wn("prehashed msgHash",J(F)));const V=O(F),X=b(K),$=[N(X),N(V)];if(L!=null&&L!==!1){const ne=L===!0?r(a.BYTES):L;$.push(Wn("extraEntropy",ne))}const W=Jo(...$),te=V;function se(ne){const ue=T(ne);if(!c.isValidNot0(ue))return;const me=c.inv(ue),Re=e.BASE.multiply(ue).toAffine(),we=c.create(Re.x);if(we===Vu)return;const _e=c.create(me*c.create(te+we*X));if(_e===Vu)return;let ze=(Re.x===we?0:2)|Number(Re.y&Gu),Xe=_e;return D&&d(_e)&&(Xe=p(_e),ze^=1),new y(we,Xe,ze)}return{seed:W,k2sig:se}}const j={lowS:t.lowS,prehash:!1},z={lowS:t.lowS,prehash:!1};function P(F,K,re=j){const{seed:J,k2sig:D}=I(F,K,re);return UV(t.hash.outputLen,c.BYTES,i)(J,D)}e.BASE.precompute(8);function G(F,K,re,J=z){const D=F;K=Wn("msgHash",K),re=Wn("publicKey",re),_A(J);const{lowS:R,prehash:L,format:V}=J;if("strict"in J)throw new Error("options.strict was renamed to lowS");if(V!==void 0&&!["compact","der","js"].includes(V))throw new Error('format must be "compact", "der" or "js"');const X=typeof D=="string"||rw(D),$=!X&&!V&&typeof D=="object"&&D!==null&&typeof D.r=="bigint"&&typeof D.s=="bigint";if(!X&&!$)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let W,te;try{if($)if(V===void 0||V==="js")W=new y(D.r,D.s);else throw new Error("invalid format");if(X){try{V!=="compact"&&(W=y.fromDER(D))}catch(ze){if(!(ze instanceof ss.Err))throw ze}!W&&V!=="der"&&(W=y.fromCompact(D))}te=e.fromHex(re)}catch{return!1}if(!W||R&&W.hasHighS())return!1;L&&(K=t.hash(K));const{r:se,s:ne}=W,ue=O(K),me=c.inv(ne),Re=c.create(ue*me),we=c.create(se*me),_e=e.BASE.multiplyUnsafe(Re).add(te.multiplyUnsafe(we));return _e.is0()?!1:c.create(_e.x)===se}return Object.freeze({getPublicKey:E,getSharedSecret:x,sign:P,verify:G,utils:v,Point:e,Signature:y})}function uG(e){const t={a:e.a,b:e.b,p:e.Fp.ORDER,n:e.n,h:e.h,Gx:e.Gx,Gy:e.Gy},n=e.Fp,r=ul(t.n,e.nBitLength),i={Fp:n,Fn:r,allowedPrivateKeyLengths:e.allowedPrivateKeyLengths,allowInfinityPoint:e.allowInfinityPoint,endo:e.endo,wrapPrivateKey:e.wrapPrivateKey,isTorsionFree:e.isTorsionFree,clearCofactor:e.clearCofactor,fromBytes:e.fromBytes,toBytes:e.toBytes};return{CURVE:t,curveOpts:i}}function fG(e){const{CURVE:t,curveOpts:n}=uG(e),r={hash:e.hash,hmac:e.hmac,randomBytes:e.randomBytes,lowS:e.lowS,bits2int:e.bits2int,bits2int_modN:e.bits2int_modN};return{CURVE:t,curveOpts:n,ecdsaOpts:r}}function dG(e,t){return Object.assign({},t,{ProjectivePoint:t.Point,CURVE:e})}function hG(e){const{CURVE:t,curveOpts:n,ecdsaOpts:r}=fG(e),i=cG(t,n),a=lG(i,r,n);return dG(e,a)}function Hb(e,t){const n=r=>hG({...e,hash:r});return{...n(t),create:n}}const BC={p:BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff"),n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),h:BigInt(1),a:BigInt("0xffffffff00000001000000000000000000000000fffffffffffffffffffffffc"),b:BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5")},PC={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000ffffffff"),n:BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffc7634d81f4372ddf581a0db248b0a77aecec196accc52973"),h:BigInt(1),a:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000fffffffc"),b:BigInt("0xb3312fa7e23ee7e4988e056be3f82d19181d9c6efe8141120314088f5013875ac656398d8a2ed19d2a85c8edd3ec2aef"),Gx:BigInt("0xaa87ca22be8b05378eb1c71ef320ad746e1d3b628ba79b9859f741e082542a385502f25dbf55296c3a545e3872760ab7"),Gy:BigInt("0x3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f")},kC={p:BigInt("0x1ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),n:BigInt("0x01fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffa51868783bf2f966b7fcc0148f709a5d03bb5c9b8899c47aebb6fb71e91386409"),h:BigInt(1),a:BigInt("0x1fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc"),b:BigInt("0x0051953eb9618e1c9a1f929a21a0b68540eea2da725b99b315f3b8b489918ef109e156193951ec7e937b1652c0bd3bb1bf073573df883d2c34f1ef451fd46b503f00"),Gx:BigInt("0x00c6858e06b70404e9cd9e3ecb662395b4429c648139053fb521f828af606b4d3dbaa14b5e77efe75928fe1dc127a2ffa8de3348b3c1856a429bf97e7e31c2e5bd66"),Gy:BigInt("0x011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650")},pG=ul(BC.p),gG=ul(PC.p),mG=ul(kC.p),yG=Hb({...BC,Fp:pG,lowS:!1},Mp);Hb({...PC,Fp:gG,lowS:!1},AF),Hb({...kC,Fp:mG,lowS:!1,allowedPrivateKeyLengths:[130,131,132]},xF);const bG=yG,MC="base10",Pn="base16",ri="base64pad",oo="base64url",$f="utf8",LC=0,ds=1,Uf=2,vG=0,xA=1,Ku=12,dw=32;function wG(){const e=qb.utils.randomPrivateKey(),t=qb.getPublicKey(e);return{privateKey:Qn(e,Pn),publicKey:Qn(t,Pn)}}function Fb(){const e=ll(dw);return Qn(e,Pn)}function EG(e,t){const n=qb.getSharedSecret(Mr(e,Pn),Mr(t,Pn)),r=IV(jp,n,void 0,void 0,dw);return Qn(r,Pn)}function jh(e){const t=jp(Mr(e,Pn));return Qn(t,Pn)}function Si(e){const t=jp(Mr(e,$f));return Qn(t,Pn)}function jC(e){return Mr(`${e}`,MC)}function fa(e){return Number(Qn(e,MC))}function zC(e){return e.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function qC(e){const t=e.replace(/-/g,"+").replace(/_/g,"/"),n=(4-t.length%4)%4;return t+"=".repeat(n)}function SG(e){const t=jC(typeof e.type<"u"?e.type:LC);if(fa(t)===ds&&typeof e.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const n=typeof e.senderPublicKey<"u"?Mr(e.senderPublicKey,Pn):void 0,r=typeof e.iv<"u"?Mr(e.iv,Pn):ll(Ku),i=Mr(e.symKey,Pn),a=wC(i,r).encrypt(Mr(e.message,$f)),c=HC({type:t,sealed:a,iv:r,senderPublicKey:n});return e.encoding===oo?zC(c):c}function _G(e){const t=Mr(e.symKey,Pn),{sealed:n,iv:r}=hf({encoded:e.encoded,encoding:e.encoding}),i=wC(t,r).decrypt(n);if(i===null)throw new Error("Failed to decrypt");return Qn(i,$f)}function xG(e,t){const n=jC(Uf),r=ll(Ku),i=Mr(e,$f),a=HC({type:n,sealed:i,iv:r});return t===oo?zC(a):a}function AG(e,t){const{sealed:n}=hf({encoded:e,encoding:t});return Qn(n,$f)}function HC(e){if(fa(e.type)===Uf)return Qn(Hu([e.type,e.sealed]),ri);if(fa(e.type)===ds){if(typeof e.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return Qn(Hu([e.type,e.senderPublicKey,e.iv,e.sealed]),ri)}return Qn(Hu([e.type,e.iv,e.sealed]),ri)}function hf(e){const t=(e.encoding||ri)===oo?qC(e.encoded):e.encoded,n=Mr(t,ri),r=n.slice(vG,xA),i=xA;if(fa(r)===ds){const f=i+dw,d=f+Ku,p=n.slice(i,f),g=n.slice(f,d),y=n.slice(d);return{type:r,sealed:y,iv:g,senderPublicKey:p}}if(fa(r)===Uf){const f=n.slice(i),d=ll(Ku);return{type:r,sealed:f,iv:d}}const a=i+Ku,c=n.slice(i,a),u=n.slice(a);return{type:r,sealed:u,iv:c}}function RG(e,t){const n=hf({encoded:e,encoding:t?.encoding});return FC({type:fa(n.type),senderPublicKey:typeof n.senderPublicKey<"u"?Qn(n.senderPublicKey,Pn):void 0,receiverPublicKey:t?.receiverPublicKey})}function FC(e){const t=e?.type||LC;if(t===ds){if(typeof e?.senderPublicKey>"u")throw new Error("missing sender public key");if(typeof e?.receiverPublicKey>"u")throw new Error("missing receiver public key")}return{type:t,senderPublicKey:e?.senderPublicKey,receiverPublicKey:e?.receiverPublicKey}}function AA(e){return e.type===ds&&typeof e.senderPublicKey=="string"&&typeof e.receiverPublicKey=="string"}function RA(e){return e.type===Uf}function OG(e){const t=Buffer.from(e.x,"base64"),n=Buffer.from(e.y,"base64");return Hu([new Uint8Array([4]),t,n])}function TG(e,t){const[n,r,i]=e.split("."),a=Buffer.from(qC(i),"base64");if(a.length!==64)throw new Error("Invalid signature length");const c=a.slice(0,32),u=a.slice(32,64),f=`${n}.${r}`,d=jp(f),p=OG(t);if(!bG.verify(Hu([c,u]),d,p))throw new Error("Invalid signature");return Ib(e).payload}const DG="irn";function up(e){return e?.relay||{protocol:DG}}function ku(e){const t=fH[e];if(typeof t>"u")throw new Error(`Relay Protocol not supported: ${e}`);return t}function CG(e,t="-"){const n={},r="relay"+t;return Object.keys(e).forEach(i=>{if(i.startsWith(r)){const a=i.replace(r,""),c=e[i];n[a]=c}}),n}function OA(e){if(!e.includes("wc:")){const d=tC(e);d!=null&&d.includes("wc:")&&(e=d)}e=e.includes("wc://")?e.replace("wc://",""):e,e=e.includes("wc:")?e.replace("wc:",""):e;const t=e.indexOf(":"),n=e.indexOf("?")!==-1?e.indexOf("?"):void 0,r=e.substring(0,t),i=e.substring(t+1,n).split("@"),a=typeof n<"u"?e.substring(n):"",c=new URLSearchParams(a),u={};c.forEach((d,p)=>{u[p]=d});const f=typeof u.methods=="string"?u.methods.split(","):void 0;return{protocol:r,topic:IG(i[0]),version:parseInt(i[1],10),symKey:u.symKey,relay:CG(u),methods:f,expiryTimestamp:u.expiryTimestamp?parseInt(u.expiryTimestamp,10):void 0}}function IG(e){return e.startsWith("//")?e.substring(2):e}function NG(e,t="-"){const n="relay",r={};return Object.keys(e).forEach(i=>{const a=i,c=n+t+a;e[a]&&(r[c]=e[a])}),r}function TA(e){const t=new URLSearchParams,n=NG(e.relay);Object.keys(n).sort().forEach(i=>{t.set(i,n[i])}),t.set("symKey",e.symKey),e.expiryTimestamp&&t.set("expiryTimestamp",e.expiryTimestamp.toString()),e.methods&&t.set("methods",e.methods.join(","));const r=t.toString();return`${e.protocol}:${e.topic}@${e.version}?${r}`}function mh(e,t,n){return`${e}?wc_ev=${n}&topic=${t}`}var $G=Object.defineProperty,UG=Object.defineProperties,BG=Object.getOwnPropertyDescriptors,DA=Object.getOwnPropertySymbols,PG=Object.prototype.hasOwnProperty,kG=Object.prototype.propertyIsEnumerable,CA=(e,t,n)=>t in e?$G(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,MG=(e,t)=>{for(var n in t||(t={}))PG.call(t,n)&&CA(e,n,t[n]);if(DA)for(var n of DA(t))kG.call(t,n)&&CA(e,n,t[n]);return e},LG=(e,t)=>UG(e,BG(t));function fl(e){const t=[];return e.forEach(n=>{const[r,i]=n.split(":");t.push(`${r}:${i}`)}),t}function jG(e){const t=[];return Object.values(e).forEach(n=>{t.push(...fl(n.accounts))}),t}function zG(e,t){const n=[];return Object.values(e).forEach(r=>{fl(r.accounts).includes(t)&&n.push(...r.methods)}),n}function qG(e,t){const n=[];return Object.values(e).forEach(r=>{fl(r.accounts).includes(t)&&n.push(...r.events)}),n}function Fp(e){return e.includes(":")}function jc(e){return Fp(e)?e.split(":")[0]:e}function IA(e){var t,n,r;const i={};if(!Ri(e))return i;for(const[a,c]of Object.entries(e)){const u=Fp(a)?[a]:c.chains,f=c.methods||[],d=c.events||[],p=jc(a);i[p]=LG(MG({},i[p]),{chains:Ai(u,(t=i[p])==null?void 0:t.chains),methods:Ai(f,(n=i[p])==null?void 0:n.methods),events:Ai(d,(r=i[p])==null?void 0:r.events)})}return i}function HG(e){const t={};return e?.forEach(n=>{var r;const[i,a]=n.split(":");t[i]||(t[i]={accounts:[],chains:[],events:[],methods:[]}),t[i].accounts.push(n),(r=t[i].chains)==null||r.push(`${i}:${a}`)}),t}function NA(e,t){t=t.map(r=>r.replace("did:pkh:",""));const n=HG(t);for(const[r,i]of Object.entries(n))i.methods?i.methods=Ai(i.methods,e):i.methods=e,i.events=["chainChanged","accountsChanged"];return n}function FG(e,t){var n,r,i,a,c,u;const f=IA(e),d=IA(t),p={},g=Object.keys(f).concat(Object.keys(d));for(const y of g)p[y]={chains:Ai((n=f[y])==null?void 0:n.chains,(r=d[y])==null?void 0:r.chains),methods:Ai((i=f[y])==null?void 0:i.methods,(a=d[y])==null?void 0:a.methods),events:Ai((c=f[y])==null?void 0:c.events,(u=d[y])==null?void 0:u.events)};return p}const VG={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},GG={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function be(e,t){const{message:n,code:r}=GG[e];return{message:t?`${n} ${t}`:n,code:r}}function St(e,t){const{message:n,code:r}=VG[e];return{message:t?`${n} ${t}`:n,code:r}}function hs(e,t){return!!Array.isArray(e)}function Ri(e){return Object.getPrototypeOf(e)===Object.prototype&&Object.keys(e).length}function yn(e){return typeof e>"u"}function jt(e,t){return t&&yn(e)?!0:typeof e=="string"&&!!e.trim().length}function hw(e,t){return t&&yn(e)?!0:typeof e=="number"&&!isNaN(e)}function KG(e,t){const{requiredNamespaces:n}=t,r=Object.keys(e.namespaces),i=Object.keys(n);let a=!0;return Qo(i,r)?(r.forEach(c=>{const{accounts:u,methods:f,events:d}=e.namespaces[c],p=fl(u),g=n[c];(!Qo(XD(c,g),p)||!Qo(g.methods,f)||!Qo(g.events,d))&&(a=!1)}),a):!1}function fp(e){return jt(e,!1)&&e.includes(":")?e.split(":").length===2:!1}function WG(e){if(jt(e,!1)&&e.includes(":")){const t=e.split(":");if(t.length===3){const n=t[0]+":"+t[1];return!!t[2]&&fp(n)}}return!1}function YG(e){function t(n){try{return typeof new URL(n)<"u"}catch{return!1}}try{if(jt(e,!1)){if(t(e))return!0;const n=tC(e);return t(n)}}catch{}return!1}function XG(e){var t;return(t=e?.proposer)==null?void 0:t.publicKey}function ZG(e){return e?.topic}function QG(e,t){let n=null;return jt(e?.publicKey,!1)||(n=be("MISSING_OR_INVALID",`${t} controller public key should be a string`)),n}function $A(e){let t=!0;return hs(e)?e.length&&(t=e.every(n=>jt(n,!1))):t=!1,t}function JG(e,t,n){let r=null;return hs(t)&&t.length?t.forEach(i=>{r||fp(i)||(r=St("UNSUPPORTED_CHAINS",`${n}, chain ${i} should be a string and conform to "namespace:chainId" format`))}):fp(e)||(r=St("UNSUPPORTED_CHAINS",`${n}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),r}function eK(e,t,n){let r=null;return Object.entries(e).forEach(([i,a])=>{if(r)return;const c=JG(i,XD(i,a),`${t} ${n}`);c&&(r=c)}),r}function tK(e,t){let n=null;return hs(e)?e.forEach(r=>{n||WG(r)||(n=St("UNSUPPORTED_ACCOUNTS",`${t}, account ${r} should be a string and conform to "namespace:chainId:address" format`))}):n=St("UNSUPPORTED_ACCOUNTS",`${t}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),n}function nK(e,t){let n=null;return Object.values(e).forEach(r=>{if(n)return;const i=tK(r?.accounts,`${t} namespace`);i&&(n=i)}),n}function rK(e,t){let n=null;return $A(e?.methods)?$A(e?.events)||(n=St("UNSUPPORTED_EVENTS",`${t}, events should be an array of strings or empty array for no events`)):n=St("UNSUPPORTED_METHODS",`${t}, methods should be an array of strings or empty array for no methods`),n}function VC(e,t){let n=null;return Object.values(e).forEach(r=>{if(n)return;const i=rK(r,`${t}, namespace`);i&&(n=i)}),n}function iK(e,t,n){let r=null;if(e&&Ri(e)){const i=VC(e,t);i&&(r=i);const a=eK(e,t,n);a&&(r=a)}else r=be("MISSING_OR_INVALID",`${t}, ${n} should be an object with data`);return r}function _0(e,t){let n=null;if(e&&Ri(e)){const r=VC(e,t);r&&(n=r);const i=nK(e,t);i&&(n=i)}else n=be("MISSING_OR_INVALID",`${t}, namespaces should be an object with data`);return n}function GC(e){return jt(e.protocol,!0)}function sK(e,t){let n=!1;return e?e&&hs(e)&&e.length&&e.forEach(r=>{n=GC(r)}):n=!0,n}function oK(e){return typeof e=="number"}function Kn(e){return typeof e<"u"&&typeof e!==null}function aK(e){return!(!e||typeof e!="object"||!e.code||!hw(e.code,!1)||!e.message||!jt(e.message,!1))}function cK(e){return!(yn(e)||!jt(e.method,!1))}function lK(e){return!(yn(e)||yn(e.result)&&yn(e.error)||!hw(e.id,!1)||!jt(e.jsonrpc,!1))}function uK(e){return!(yn(e)||!jt(e.name,!1))}function UA(e,t){return!(!fp(t)||!jG(e).includes(t))}function fK(e,t,n){return jt(n,!1)?zG(e,t).includes(n):!1}function dK(e,t,n){return jt(n,!1)?qG(e,t).includes(n):!1}function BA(e,t,n){let r=null;const i=hK(e),a=pK(t),c=Object.keys(i),u=Object.keys(a),f=PA(Object.keys(e)),d=PA(Object.keys(t)),p=f.filter(g=>!d.includes(g));return p.length&&(r=be("NON_CONFORMING_NAMESPACES",`${n} namespaces keys don't satisfy requiredNamespaces.
      Required: ${p.toString()}
      Received: ${Object.keys(t).toString()}`)),Qo(c,u)||(r=be("NON_CONFORMING_NAMESPACES",`${n} namespaces chains don't satisfy required namespaces.
      Required: ${c.toString()}
      Approved: ${u.toString()}`)),Object.keys(t).forEach(g=>{if(!g.includes(":")||r)return;const y=fl(t[g].accounts);y.includes(g)||(r=be("NON_CONFORMING_NAMESPACES",`${n} namespaces accounts don't satisfy namespace accounts for ${g}
        Required: ${g}
        Approved: ${y.toString()}`))}),c.forEach(g=>{r||(Qo(i[g].methods,a[g].methods)?Qo(i[g].events,a[g].events)||(r=be("NON_CONFORMING_NAMESPACES",`${n} namespaces events don't satisfy namespace events for ${g}`)):r=be("NON_CONFORMING_NAMESPACES",`${n} namespaces methods don't satisfy namespace methods for ${g}`))}),r}function hK(e){const t={};return Object.keys(e).forEach(n=>{var r;n.includes(":")?t[n]=e[n]:(r=e[n].chains)==null||r.forEach(i=>{t[i]={methods:e[n].methods,events:e[n].events}})}),t}function PA(e){return[...new Set(e.map(t=>t.includes(":")?t.split(":")[0]:t))]}function pK(e){const t={};return Object.keys(e).forEach(n=>{n.includes(":")?t[n]=e[n]:fl(e[n].accounts)?.forEach(i=>{t[i]={accounts:e[n].accounts.filter(a=>a.includes(`${i}:`)),methods:e[n].methods,events:e[n].events}})}),t}function gK(e,t){return hw(e,!1)&&e<=t.max&&e>=t.min}function kA(){const e=If();return new Promise(t=>{switch(e){case br.browser:t(mK());break;case br.reactNative:t(yK());break;case br.node:t(bK());break;default:t(!0)}})}function mK(){return cl()&&navigator?.onLine}async function yK(){return yo()&&typeof global<"u"&&global!=null&&global.NetInfo?(await(global==null?void 0:global.NetInfo.fetch()))?.isConnected:!0}function bK(){return!0}function vK(e){switch(If()){case br.browser:wK(e);break;case br.reactNative:EK(e);break}}function wK(e){!yo()&&cl()&&(window.addEventListener("online",()=>e(!0)),window.addEventListener("offline",()=>e(!1)))}function EK(e){yo()&&typeof global<"u"&&global!=null&&global.NetInfo&&global?.NetInfo.addEventListener(t=>e(t?.isConnected))}function SK(){var e;return cl()&&ms.getDocument()?((e=ms.getDocument())==null?void 0:e.visibilityState)==="visible":!0}const x0={};class Au{static get(t){return x0[t]}static set(t,n){x0[t]=n}static delete(t){delete x0[t]}}function _K(e){const t=Tf.decode(e);if(t.length<33)throw new Error("Too short to contain a public key");return t.slice(1,33)}function xK({publicKey:e,signature:t,payload:n}){var r;const i=Vb(n.method),a=128|parseInt(((r=n.version)==null?void 0:r.toString())||"4"),c=OK(n.address),u=n.era==="00"?new Uint8Array([0]):Vb(n.era);if(u.length!==1&&u.length!==2)throw new Error("Invalid era length");const f=parseInt(n.nonce,16),d=new Uint8Array([f&255,f>>8&255]),p=BigInt(`0x${RK(n.tip)}`),g=DK(p),y=new Uint8Array([0,...e,c,...t,...u,...d,...g,...i]),b=TK(y.length+1);return new Uint8Array([...b,a,...y])}function AK(e){const t=Vb(e),n=gH.blake2b(t,void 0,32);return"0x"+Buffer.from(n).toString("hex")}function Vb(e){return new Uint8Array(e.replace(/^0x/,"").match(/.{1,2}/g).map(t=>parseInt(t,16)))}function RK(e){return e.startsWith("0x")?e.slice(2):e}function OK(e){const t=Tf.decode(e)[0];return t===42?0:t===60?2:1}function TK(e){if(e<64)return new Uint8Array([e<<2]);if(e<16384){const t=e<<2|1;return new Uint8Array([t&255,t>>8&255])}else if(e<1<<30){const t=e<<2|2;return new Uint8Array([t&255,t>>8&255,t>>16&255,t>>24&255])}else throw new Error("Compact encoding > 2^30 not supported")}function DK(e){if(e<BigInt(1)<<BigInt(6))return new Uint8Array([Number(e<<BigInt(2))]);if(e<BigInt(1)<<BigInt(14)){const t=e<<BigInt(2)|BigInt(1);return new Uint8Array([Number(t&BigInt(255)),Number(t>>BigInt(8)&BigInt(255))])}else if(e<BigInt(1)<<BigInt(30)){const t=e<<BigInt(2)|BigInt(2);return new Uint8Array([Number(t&BigInt(255)),Number(t>>BigInt(8)&BigInt(255)),Number(t>>BigInt(16)&BigInt(255)),Number(t>>BigInt(24)&BigInt(255))])}else throw new Error("BigInt compact encoding not supported > 2^30")}function CK(e){const t=Uint8Array.from(Buffer.from(e.signature,"hex")),n=_K(e.transaction.address),r=xK({publicKey:n,signature:t,payload:e.transaction}),i=Buffer.from(r).toString("hex");return AK(i)}var Vp,yt,KC,Yo,MA,WC,YC,XC,pw,Gb,Kb,pf={},ZC=[],IK=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Gp=Array.isArray;function ls(e,t){for(var n in t)e[n]=t[n];return e}function gw(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function NK(e,t,n){var r,i,a,c={};for(a in t)a=="key"?r=t[a]:a=="ref"?i=t[a]:c[a]=t[a];if(arguments.length>2&&(c.children=arguments.length>3?Vp.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(a in e.defaultProps)c[a]===void 0&&(c[a]=e.defaultProps[a]);return zh(e,c,r,i,null)}function zh(e,t,n,r,i){var a={type:e,props:t,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:i??++KC,__i:-1,__u:0};return i==null&&yt.vnode!=null&&yt.vnode(a),a}function Kp(e){return e.children}function qh(e,t){this.props=e,this.context=t}function Yc(e,t){if(t==null)return e.__?Yc(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?Yc(e):null}function QC(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return QC(e)}}function LA(e){(!e.__d&&(e.__d=!0)&&Yo.push(e)&&!dp.__r++||MA!=yt.debounceRendering)&&((MA=yt.debounceRendering)||WC)(dp)}function dp(){for(var e,t,n,r,i,a,c,u=1;Yo.length;)Yo.length>u&&Yo.sort(YC),e=Yo.shift(),u=Yo.length,e.__d&&(n=void 0,i=(r=(t=e).__v).__e,a=[],c=[],t.__P&&((n=ls({},r)).__v=r.__v+1,yt.vnode&&yt.vnode(n),mw(t.__P,n,r,t.__n,t.__P.namespaceURI,32&r.__u?[i]:null,a,i??Yc(r),!!(32&r.__u),c),n.__v=r.__v,n.__.__k[n.__i]=n,tI(a,n,c),n.__e!=i&&QC(n)));dp.__r=0}function JC(e,t,n,r,i,a,c,u,f,d,p){var g,y,b,v,E,S,x=r&&r.__k||ZC,T=t.length;for(f=$K(n,t,x,f,T),g=0;g<T;g++)(b=n.__k[g])!=null&&(y=b.__i==-1?pf:x[b.__i]||pf,b.__i=g,S=mw(e,b,y,i,a,c,u,f,d,p),v=b.__e,b.ref&&y.ref!=b.ref&&(y.ref&&yw(y.ref,null,b),p.push(b.ref,b.__c||v,b)),E==null&&v!=null&&(E=v),4&b.__u||y.__k===b.__k?f=eI(b,f,e):typeof b.type=="function"&&S!==void 0?f=S:v&&(f=v.nextSibling),b.__u&=-7);return n.__e=E,f}function $K(e,t,n,r,i){var a,c,u,f,d,p=n.length,g=p,y=0;for(e.__k=new Array(i),a=0;a<i;a++)(c=t[a])!=null&&typeof c!="boolean"&&typeof c!="function"?(f=a+y,(c=e.__k[a]=typeof c=="string"||typeof c=="number"||typeof c=="bigint"||c.constructor==String?zh(null,c,null,null,null):Gp(c)?zh(Kp,{children:c},null,null,null):c.constructor==null&&c.__b>0?zh(c.type,c.props,c.key,c.ref?c.ref:null,c.__v):c).__=e,c.__b=e.__b+1,u=null,(d=c.__i=UK(c,n,f,g))!=-1&&(g--,(u=n[d])&&(u.__u|=2)),u==null||u.__v==null?(d==-1&&(i>p?y--:i<p&&y++),typeof c.type!="function"&&(c.__u|=4)):d!=f&&(d==f-1?y--:d==f+1?y++:(d>f?y--:y++,c.__u|=4))):e.__k[a]=null;if(g)for(a=0;a<p;a++)(u=n[a])!=null&&(2&u.__u)==0&&(u.__e==r&&(r=Yc(u)),rI(u,u));return r}function eI(e,t,n){var r,i;if(typeof e.type=="function"){for(r=e.__k,i=0;r&&i<r.length;i++)r[i]&&(r[i].__=e,t=eI(r[i],t,n));return t}e.__e!=t&&(t&&e.type&&!n.contains(t)&&(t=Yc(e)),n.insertBefore(e.__e,t||null),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType==8);return t}function UK(e,t,n,r){var i,a,c=e.key,u=e.type,f=t[n];if(f===null&&e.key==null||f&&c==f.key&&u==f.type&&(2&f.__u)==0)return n;if(r>(f!=null&&(2&f.__u)==0?1:0))for(i=n-1,a=n+1;i>=0||a<t.length;){if(i>=0){if((f=t[i])&&(2&f.__u)==0&&c==f.key&&u==f.type)return i;i--}if(a<t.length){if((f=t[a])&&(2&f.__u)==0&&c==f.key&&u==f.type)return a;a++}}return-1}function jA(e,t,n){t[0]=="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||IK.test(t)?n:n+"px"}function yh(e,t,n,r,i){var a,c;e:if(t=="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof r=="string"&&(e.style.cssText=r=""),r)for(t in r)n&&t in n||jA(e.style,t,"");if(n)for(t in n)r&&n[t]==r[t]||jA(e.style,t,n[t])}else if(t[0]=="o"&&t[1]=="n")a=t!=(t=t.replace(XC,"$1")),c=t.toLowerCase(),t=c in e||t=="onFocusOut"||t=="onFocusIn"?c.slice(2):t.slice(2),e.l||(e.l={}),e.l[t+a]=n,n?r?n.u=r.u:(n.u=pw,e.addEventListener(t,a?Kb:Gb,a)):e.removeEventListener(t,a?Kb:Gb,a);else{if(i=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&n==1?"":n))}}function zA(e){return function(t){if(this.l){var n=this.l[t.type+e];if(t.t==null)t.t=pw++;else if(t.t<n.u)return;return n(yt.event?yt.event(t):t)}}}function mw(e,t,n,r,i,a,c,u,f,d){var p,g,y,b,v,E,S,x,T,O,U,N,I,j,z,P,G,F=t.type;if(t.constructor!=null)return null;128&n.__u&&(f=!!(32&n.__u),a=[u=t.__e=n.__e]),(p=yt.__b)&&p(t);e:if(typeof F=="function")try{if(x=t.props,T="prototype"in F&&F.prototype.render,O=(p=F.contextType)&&r[p.__c],U=p?O?O.props.value:p.__:r,n.__c?S=(g=t.__c=n.__c).__=g.__E:(T?t.__c=g=new F(x,U):(t.__c=g=new qh(x,U),g.constructor=F,g.render=PK),O&&O.sub(g),g.props=x,g.state||(g.state={}),g.context=U,g.__n=r,y=g.__d=!0,g.__h=[],g._sb=[]),T&&g.__s==null&&(g.__s=g.state),T&&F.getDerivedStateFromProps!=null&&(g.__s==g.state&&(g.__s=ls({},g.__s)),ls(g.__s,F.getDerivedStateFromProps(x,g.__s))),b=g.props,v=g.state,g.__v=t,y)T&&F.getDerivedStateFromProps==null&&g.componentWillMount!=null&&g.componentWillMount(),T&&g.componentDidMount!=null&&g.__h.push(g.componentDidMount);else{if(T&&F.getDerivedStateFromProps==null&&x!==b&&g.componentWillReceiveProps!=null&&g.componentWillReceiveProps(x,U),!g.__e&&g.shouldComponentUpdate!=null&&g.shouldComponentUpdate(x,g.__s,U)===!1||t.__v==n.__v){for(t.__v!=n.__v&&(g.props=x,g.state=g.__s,g.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.some(function(K){K&&(K.__=t)}),N=0;N<g._sb.length;N++)g.__h.push(g._sb[N]);g._sb=[],g.__h.length&&c.push(g);break e}g.componentWillUpdate!=null&&g.componentWillUpdate(x,g.__s,U),T&&g.componentDidUpdate!=null&&g.__h.push(function(){g.componentDidUpdate(b,v,E)})}if(g.context=U,g.props=x,g.__P=e,g.__e=!1,I=yt.__r,j=0,T){for(g.state=g.__s,g.__d=!1,I&&I(t),p=g.render(g.props,g.state,g.context),z=0;z<g._sb.length;z++)g.__h.push(g._sb[z]);g._sb=[]}else do g.__d=!1,I&&I(t),p=g.render(g.props,g.state,g.context),g.state=g.__s;while(g.__d&&++j<25);g.state=g.__s,g.getChildContext!=null&&(r=ls(ls({},r),g.getChildContext())),T&&!y&&g.getSnapshotBeforeUpdate!=null&&(E=g.getSnapshotBeforeUpdate(b,v)),P=p,p!=null&&p.type===Kp&&p.key==null&&(P=nI(p.props.children)),u=JC(e,Gp(P)?P:[P],t,n,r,i,a,c,u,f,d),g.base=t.__e,t.__u&=-161,g.__h.length&&c.push(g),S&&(g.__E=g.__=null)}catch(K){if(t.__v=null,f||a!=null)if(K.then){for(t.__u|=f?160:128;u&&u.nodeType==8&&u.nextSibling;)u=u.nextSibling;a[a.indexOf(u)]=null,t.__e=u}else for(G=a.length;G--;)gw(a[G]);else t.__e=n.__e,t.__k=n.__k;yt.__e(K,t,n)}else a==null&&t.__v==n.__v?(t.__k=n.__k,t.__e=n.__e):u=t.__e=BK(n.__e,t,n,r,i,a,c,f,d);return(p=yt.diffed)&&p(t),128&t.__u?void 0:u}function tI(e,t,n){for(var r=0;r<n.length;r++)yw(n[r],n[++r],n[++r]);yt.__c&&yt.__c(t,e),e.some(function(i){try{e=i.__h,i.__h=[],e.some(function(a){a.call(i)})}catch(a){yt.__e(a,i.__v)}})}function nI(e){return typeof e!="object"||e==null||e.__b&&e.__b>0?e:Gp(e)?e.map(nI):ls({},e)}function BK(e,t,n,r,i,a,c,u,f){var d,p,g,y,b,v,E,S=n.props,x=t.props,T=t.type;if(T=="svg"?i="http://www.w3.org/2000/svg":T=="math"?i="http://www.w3.org/1998/Math/MathML":i||(i="http://www.w3.org/1999/xhtml"),a!=null){for(d=0;d<a.length;d++)if((b=a[d])&&"setAttribute"in b==!!T&&(T?b.localName==T:b.nodeType==3)){e=b,a[d]=null;break}}if(e==null){if(T==null)return document.createTextNode(x);e=document.createElementNS(i,T,x.is&&x),u&&(yt.__m&&yt.__m(t,a),u=!1),a=null}if(T==null)S===x||u&&e.data==x||(e.data=x);else{if(a=a&&Vp.call(e.childNodes),S=n.props||pf,!u&&a!=null)for(S={},d=0;d<e.attributes.length;d++)S[(b=e.attributes[d]).name]=b.value;for(d in S)if(b=S[d],d!="children"){if(d=="dangerouslySetInnerHTML")g=b;else if(!(d in x)){if(d=="value"&&"defaultValue"in x||d=="checked"&&"defaultChecked"in x)continue;yh(e,d,null,b,i)}}for(d in x)b=x[d],d=="children"?y=b:d=="dangerouslySetInnerHTML"?p=b:d=="value"?v=b:d=="checked"?E=b:u&&typeof b!="function"||S[d]===b||yh(e,d,b,S[d],i);if(p)u||g&&(p.__html==g.__html||p.__html==e.innerHTML)||(e.innerHTML=p.__html),t.__k=[];else if(g&&(e.innerHTML=""),JC(t.type=="template"?e.content:e,Gp(y)?y:[y],t,n,r,T=="foreignObject"?"http://www.w3.org/1999/xhtml":i,a,c,a?a[0]:n.__k&&Yc(n,0),u,f),a!=null)for(d=a.length;d--;)gw(a[d]);u||(d="value",T=="progress"&&v==null?e.removeAttribute("value"):v!=null&&(v!==e[d]||T=="progress"&&!v||T=="option"&&v!=S[d])&&yh(e,d,v,S[d],i),d="checked",E!=null&&E!=e[d]&&yh(e,d,E,S[d],i))}return e}function yw(e,t,n){try{if(typeof e=="function"){var r=typeof e.__u=="function";r&&e.__u(),r&&t==null||(e.__u=e(t))}else e.current=t}catch(i){yt.__e(i,n)}}function rI(e,t,n){var r,i;if(yt.unmount&&yt.unmount(e),(r=e.ref)&&(r.current&&r.current!=e.__e||yw(r,null,t)),(r=e.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(a){yt.__e(a,t)}r.base=r.__P=null}if(r=e.__k)for(i=0;i<r.length;i++)r[i]&&rI(r[i],t,n||typeof e.type!="function");n||gw(e.__e),e.__c=e.__=e.__e=void 0}function PK(e,t,n){return this.constructor(e,n)}function qA(e,t,n){var r,i,a,c;t==document&&(t=document.documentElement),yt.__&&yt.__(e,t),i=(r=!1)?null:t.__k,a=[],c=[],mw(t,e=t.__k=NK(Kp,null,[e]),i||pf,pf,t.namespaceURI,i?null:t.firstChild?Vp.call(t.childNodes):null,a,i?i.__e:t.firstChild,r,c),tI(a,e,c)}Vp=ZC.slice,yt={__e:function(e,t,n,r){for(var i,a,c;t=t.__;)if((i=t.__c)&&!i.__)try{if((a=i.constructor)&&a.getDerivedStateFromError!=null&&(i.setState(a.getDerivedStateFromError(e)),c=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(e,r||{}),c=i.__d),c)return i.__E=i}catch(u){e=u}throw e}},KC=0,qh.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=ls({},this.state),typeof e=="function"&&(e=e(ls({},n),this.props)),e&&ls(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),LA(this))},qh.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),LA(this))},qh.prototype.render=Kp,Yo=[],WC=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,YC=function(e,t){return e.__v.__b-t.__v.__b},dp.__r=0,XC=/(PointerCapture)$|Capture$/i,pw=0,Gb=zA(!1),Kb=zA(!0);var kK=0;function yi(e,t,n,r,i,a){t||(t={});var c,u,f=t;if("ref"in f)for(u in f={},t)u=="ref"?c=t[u]:f[u]=t[u];var d={type:e,props:f,key:n,ref:c,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--kK,__i:-1,__u:0,__source:i,__self:a};if(typeof e=="function"&&(c=e.defaultProps))for(u in c)f[u]===void 0&&(f[u]=c[u]);return yt.vnode&&yt.vnode(d),d}class Ea{}let MK=class extends Ea{constructor(t){super()}};const HA=ve.FIVE_SECONDS,Sa={pulse:"heartbeat_pulse"};let LK=class iI extends MK{constructor(t){super(t),this.events=new tr.EventEmitter,this.interval=HA,this.interval=t?.interval||HA}static async init(t){const n=new iI(t);return await n.init(),n}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(t,n){this.events.on(t,n)}once(t,n){this.events.once(t,n)}off(t,n){this.events.off(t,n)}removeListener(t,n){this.events.removeListener(t,n)}async initialize(){this.intervalRef=setInterval(()=>this.pulse(),ve.toMiliseconds(this.interval))}pulse(){this.events.emit(Sa.pulse)}};const jK=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,zK=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,qK=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function HK(e,t){if(e==="__proto__"||e==="constructor"&&t&&typeof t=="object"&&"prototype"in t){FK(e);return}return t}function FK(e){console.warn(`[destr] Dropping "${e}" key to prevent prototype pollution.`)}function bh(e,t={}){if(typeof e!="string")return e;if(e[0]==='"'&&e[e.length-1]==='"'&&e.indexOf("\\")===-1)return e.slice(1,-1);const n=e.trim();if(n.length<=9)switch(n.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!qK.test(e)){if(t.strict)throw new SyntaxError("[destr] Invalid JSON");return e}try{if(jK.test(e)||zK.test(e)){if(t.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(e,HK)}return JSON.parse(e)}catch(r){if(t.strict)throw r;return e}}function VK(e){return!e||typeof e.then!="function"?Promise.resolve(e):e}function an(e,...t){try{return VK(e(...t))}catch(n){return Promise.reject(n)}}function GK(e){const t=typeof e;return e===null||t!=="object"&&t!=="function"}function KK(e){const t=Object.getPrototypeOf(e);return!t||t.isPrototypeOf(Object)}function Hh(e){if(GK(e))return String(e);if(KK(e)||Array.isArray(e))return JSON.stringify(e);if(typeof e.toJSON=="function")return Hh(e.toJSON());throw new Error("[unstorage] Cannot stringify value!")}const Wb="base64:";function WK(e){return typeof e=="string"?e:Wb+ZK(e)}function YK(e){return typeof e!="string"||!e.startsWith(Wb)?e:XK(e.slice(Wb.length))}function XK(e){return globalThis.Buffer?Buffer.from(e,"base64"):Uint8Array.from(globalThis.atob(e),t=>t.codePointAt(0))}function ZK(e){return globalThis.Buffer?Buffer.from(e).toString("base64"):globalThis.btoa(String.fromCodePoint(...e))}function Gn(e){return e&&e.split("?")[0]?.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,"")||""}function QK(...e){return Gn(e.join(":"))}function vh(e){return e=Gn(e),e?e+":":""}function JK(e,t){if(t===void 0)return!0;let n=0,r=e.indexOf(":");for(;r>-1;)n++,r=e.indexOf(":",r+1);return n<=t}function eW(e,t){return t?e.startsWith(t)&&e[e.length-1]!=="$":e[e.length-1]!=="$"}const tW="memory",nW=()=>{const e=new Map;return{name:tW,getInstance:()=>e,hasItem(t){return e.has(t)},getItem(t){return e.get(t)??null},getItemRaw(t){return e.get(t)??null},setItem(t,n){e.set(t,n)},setItemRaw(t,n){e.set(t,n)},removeItem(t){e.delete(t)},getKeys(){return[...e.keys()]},clear(){e.clear()},dispose(){e.clear()}}};function rW(e={}){const t={mounts:{"":e.driver||nW()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},n=d=>{for(const p of t.mountpoints)if(d.startsWith(p))return{base:p,relativeKey:d.slice(p.length),driver:t.mounts[p]};return{base:"",relativeKey:d,driver:t.mounts[""]}},r=(d,p)=>t.mountpoints.filter(g=>g.startsWith(d)||p&&d.startsWith(g)).map(g=>({relativeBase:d.length>g.length?d.slice(g.length):void 0,mountpoint:g,driver:t.mounts[g]})),i=(d,p)=>{if(t.watching){p=Gn(p);for(const g of t.watchListeners)g(d,p)}},a=async()=>{if(!t.watching){t.watching=!0;for(const d in t.mounts)t.unwatch[d]=await FA(t.mounts[d],i,d)}},c=async()=>{if(t.watching){for(const d in t.unwatch)await t.unwatch[d]();t.unwatch={},t.watching=!1}},u=(d,p,g)=>{const y=new Map,b=v=>{let E=y.get(v.base);return E||(E={driver:v.driver,base:v.base,items:[]},y.set(v.base,E)),E};for(const v of d){const E=typeof v=="string",S=Gn(E?v:v.key),x=E?void 0:v.value,T=E||!v.options?p:{...p,...v.options},O=n(S);b(O).items.push({key:S,value:x,relativeKey:O.relativeKey,options:T})}return Promise.all([...y.values()].map(v=>g(v))).then(v=>v.flat())},f={hasItem(d,p={}){d=Gn(d);const{relativeKey:g,driver:y}=n(d);return an(y.hasItem,g,p)},getItem(d,p={}){d=Gn(d);const{relativeKey:g,driver:y}=n(d);return an(y.getItem,g,p).then(b=>bh(b))},getItems(d,p={}){return u(d,p,g=>g.driver.getItems?an(g.driver.getItems,g.items.map(y=>({key:y.relativeKey,options:y.options})),p).then(y=>y.map(b=>({key:QK(g.base,b.key),value:bh(b.value)}))):Promise.all(g.items.map(y=>an(g.driver.getItem,y.relativeKey,y.options).then(b=>({key:y.key,value:bh(b)})))))},getItemRaw(d,p={}){d=Gn(d);const{relativeKey:g,driver:y}=n(d);return y.getItemRaw?an(y.getItemRaw,g,p):an(y.getItem,g,p).then(b=>YK(b))},async setItem(d,p,g={}){if(p===void 0)return f.removeItem(d);d=Gn(d);const{relativeKey:y,driver:b}=n(d);b.setItem&&(await an(b.setItem,y,Hh(p),g),b.watch||i("update",d))},async setItems(d,p){await u(d,p,async g=>{if(g.driver.setItems)return an(g.driver.setItems,g.items.map(y=>({key:y.relativeKey,value:Hh(y.value),options:y.options})),p);g.driver.setItem&&await Promise.all(g.items.map(y=>an(g.driver.setItem,y.relativeKey,Hh(y.value),y.options)))})},async setItemRaw(d,p,g={}){if(p===void 0)return f.removeItem(d,g);d=Gn(d);const{relativeKey:y,driver:b}=n(d);if(b.setItemRaw)await an(b.setItemRaw,y,p,g);else if(b.setItem)await an(b.setItem,y,WK(p),g);else return;b.watch||i("update",d)},async removeItem(d,p={}){typeof p=="boolean"&&(p={removeMeta:p}),d=Gn(d);const{relativeKey:g,driver:y}=n(d);y.removeItem&&(await an(y.removeItem,g,p),(p.removeMeta||p.removeMata)&&await an(y.removeItem,g+"$",p),y.watch||i("remove",d))},async getMeta(d,p={}){typeof p=="boolean"&&(p={nativeOnly:p}),d=Gn(d);const{relativeKey:g,driver:y}=n(d),b=Object.create(null);if(y.getMeta&&Object.assign(b,await an(y.getMeta,g,p)),!p.nativeOnly){const v=await an(y.getItem,g+"$",p).then(E=>bh(E));v&&typeof v=="object"&&(typeof v.atime=="string"&&(v.atime=new Date(v.atime)),typeof v.mtime=="string"&&(v.mtime=new Date(v.mtime)),Object.assign(b,v))}return b},setMeta(d,p,g={}){return this.setItem(d+"$",p,g)},removeMeta(d,p={}){return this.removeItem(d+"$",p)},async getKeys(d,p={}){d=vh(d);const g=r(d,!0);let y=[];const b=[];let v=!0;for(const S of g){S.driver.flags?.maxDepth||(v=!1);const x=await an(S.driver.getKeys,S.relativeBase,p);for(const T of x){const O=S.mountpoint+Gn(T);y.some(U=>O.startsWith(U))||b.push(O)}y=[S.mountpoint,...y.filter(T=>!T.startsWith(S.mountpoint))]}const E=p.maxDepth!==void 0&&!v;return b.filter(S=>(!E||JK(S,p.maxDepth))&&eW(S,d))},async clear(d,p={}){d=vh(d),await Promise.all(r(d,!1).map(async g=>{if(g.driver.clear)return an(g.driver.clear,g.relativeBase,p);if(g.driver.removeItem){const y=await g.driver.getKeys(g.relativeBase||"",p);return Promise.all(y.map(b=>g.driver.removeItem(b,p)))}}))},async dispose(){await Promise.all(Object.values(t.mounts).map(d=>VA(d)))},async watch(d){return await a(),t.watchListeners.push(d),async()=>{t.watchListeners=t.watchListeners.filter(p=>p!==d),t.watchListeners.length===0&&await c()}},async unwatch(){t.watchListeners=[],await c()},mount(d,p){if(d=vh(d),d&&t.mounts[d])throw new Error(`already mounted at ${d}`);return d&&(t.mountpoints.push(d),t.mountpoints.sort((g,y)=>y.length-g.length)),t.mounts[d]=p,t.watching&&Promise.resolve(FA(p,i,d)).then(g=>{t.unwatch[d]=g}).catch(console.error),f},async unmount(d,p=!0){d=vh(d),!(!d||!t.mounts[d])&&(t.watching&&d in t.unwatch&&(t.unwatch[d]?.(),delete t.unwatch[d]),p&&await VA(t.mounts[d]),t.mountpoints=t.mountpoints.filter(g=>g!==d),delete t.mounts[d])},getMount(d=""){d=Gn(d)+":";const p=n(d);return{driver:p.driver,base:p.base}},getMounts(d="",p={}){return d=Gn(d),r(d,p.parents).map(y=>({driver:y.driver,base:y.mountpoint}))},keys:(d,p={})=>f.getKeys(d,p),get:(d,p={})=>f.getItem(d,p),set:(d,p,g={})=>f.setItem(d,p,g),has:(d,p={})=>f.hasItem(d,p),del:(d,p={})=>f.removeItem(d,p),remove:(d,p={})=>f.removeItem(d,p)};return f}function FA(e,t,n){return e.watch?e.watch((r,i)=>t(r,n+i)):()=>{}}async function VA(e){typeof e.dispose=="function"&&await an(e.dispose)}function _a(e){return new Promise((t,n)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>n(e.error)})}function sI(e,t){let n;const r=()=>{if(n)return n;const i=indexedDB.open(e);return i.onupgradeneeded=()=>i.result.createObjectStore(t),n=_a(i),n.then(a=>{a.onclose=()=>n=void 0},()=>{}),n};return(i,a)=>r().then(c=>a(c.transaction(t,i).objectStore(t)))}let A0;function Bf(){return A0||(A0=sI("keyval-store","keyval")),A0}function GA(e,t=Bf()){return t("readonly",n=>_a(n.get(e)))}function iW(e,t,n=Bf()){return n("readwrite",r=>(r.put(t,e),_a(r.transaction)))}function sW(e,t=Bf()){return t("readwrite",n=>(n.delete(e),_a(n.transaction)))}function oW(e=Bf()){return e("readwrite",t=>(t.clear(),_a(t.transaction)))}function aW(e,t){return e.openCursor().onsuccess=function(){this.result&&(t(this.result),this.result.continue())},_a(e.transaction)}function cW(e=Bf()){return e("readonly",t=>{if(t.getAllKeys)return _a(t.getAllKeys());const n=[];return aW(t,r=>n.push(r.key)).then(()=>n)})}const lW="idb-keyval";var uW=(e={})=>{const t=e.base&&e.base.length>0?`${e.base}:`:"",n=i=>t+i;let r;return e.dbName&&e.storeName&&(r=sI(e.dbName,e.storeName)),{name:lW,options:e,async hasItem(i){return!(typeof await GA(n(i),r)>"u")},async getItem(i){return await GA(n(i),r)??null},setItem(i,a){return iW(n(i),a,r)},removeItem(i){return sW(n(i),r)},getKeys(){return cW(r)},clear(){return oW(r)}}};const fW="WALLET_CONNECT_V2_INDEXED_DB",dW="keyvaluestorage";let hW=class{constructor(){this.indexedDb=rW({driver:uW({dbName:fW,storeName:dW})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(t=>[t.key,t.value])}async getItem(t){const n=await this.indexedDb.getItem(t);if(n!==null)return n}async setItem(t,n){await this.indexedDb.setItem(t,ys(n))}async removeItem(t){await this.indexedDb.removeItem(t)}};var R0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Fh={exports:{}};(function(){let e;function t(){}e=t,e.prototype.getItem=function(n){return this.hasOwnProperty(n)?String(this[n]):null},e.prototype.setItem=function(n,r){this[n]=String(r)},e.prototype.removeItem=function(n){delete this[n]},e.prototype.clear=function(){const n=this;Object.keys(n).forEach(function(r){n[r]=void 0,delete n[r]})},e.prototype.key=function(n){return n=n||0,Object.keys(this)[n]},e.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof R0<"u"&&R0.localStorage?Fh.exports=R0.localStorage:typeof window<"u"&&window.localStorage?Fh.exports=window.localStorage:Fh.exports=new t})();function pW(e){var t;return[e[0],la((t=e[1])!=null?t:"")]}let gW=class{constructor(){this.localStorage=Fh.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(pW)}async getItem(t){const n=this.localStorage.getItem(t);if(n!==null)return la(n)}async setItem(t,n){this.localStorage.setItem(t,ys(n))}async removeItem(t){this.localStorage.removeItem(t)}};const mW="wc_storage_version",KA=1,yW=async(e,t,n)=>{const r=mW,i=await t.getItem(r);if(i&&i>=KA){n(t);return}const a=await e.getKeys();if(!a.length){n(t);return}const c=[];for(;a.length;){const u=a.shift();if(!u)continue;const f=u.toLowerCase();if(f.includes("wc@")||f.includes("walletconnect")||f.includes("wc_")||f.includes("wallet_connect")){const d=await e.getItem(u);await t.setItem(u,d),c.push(u)}}await t.setItem(r,KA),n(t),bW(e,c)},bW=async(e,t)=>{t.length&&t.forEach(async n=>{await e.removeItem(n)})};let vW=class{constructor(){this.initialized=!1,this.setInitialized=n=>{this.storage=n,this.initialized=!0};const t=new gW;this.storage=t;try{const n=new hW;yW(t,n,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(t){return await this.initialize(),this.storage.getItem(t)}async setItem(t,n){return await this.initialize(),this.storage.setItem(t,n)}async removeItem(t){return await this.initialize(),this.storage.removeItem(t)}async initialize(){this.initialized||await new Promise(t=>{const n=setInterval(()=>{this.initialized&&(clearInterval(n),t())},20)})}};var O0,WA;function wW(){if(WA)return O0;WA=1;function e(n){try{return JSON.stringify(n)}catch{return'"[Circular]"'}}O0=t;function t(n,r,i){var a=i&&i.stringify||e,c=1;if(typeof n=="object"&&n!==null){var u=r.length+c;if(u===1)return n;var f=new Array(u);f[0]=a(n);for(var d=1;d<u;d++)f[d]=a(r[d]);return f.join(" ")}if(typeof n!="string")return n;var p=r.length;if(p===0)return n;for(var g="",y=1-c,b=-1,v=n&&n.length||0,E=0;E<v;){if(n.charCodeAt(E)===37&&E+1<v){switch(b=b>-1?b:0,n.charCodeAt(E+1)){case 100:case 102:if(y>=p||r[y]==null)break;b<E&&(g+=n.slice(b,E)),g+=Number(r[y]),b=E+2,E++;break;case 105:if(y>=p||r[y]==null)break;b<E&&(g+=n.slice(b,E)),g+=Math.floor(Number(r[y])),b=E+2,E++;break;case 79:case 111:case 106:if(y>=p||r[y]===void 0)break;b<E&&(g+=n.slice(b,E));var S=typeof r[y];if(S==="string"){g+="'"+r[y]+"'",b=E+2,E++;break}if(S==="function"){g+=r[y].name||"<anonymous>",b=E+2,E++;break}g+=a(r[y]),b=E+2,E++;break;case 115:if(y>=p)break;b<E&&(g+=n.slice(b,E)),g+=String(r[y]),b=E+2,E++;break;case 37:b<E&&(g+=n.slice(b,E)),g+="%",b=E+2,E++,y--;break}++y}++E}return b===-1?n:(b<v&&(g+=n.slice(b)),g)}return O0}var T0,YA;function EW(){if(YA)return T0;YA=1;const e=wW();T0=i;const t=N().console||{},n={mapHttpRequest:v,mapHttpResponse:v,wrapRequestSerializer:E,wrapResponseSerializer:E,wrapErrorSerializer:E,req:v,res:v,err:y};function r(I,j){return Array.isArray(I)?I.filter(function(P){return P!=="!stdSerializers.err"}):I===!0?Object.keys(j):!1}function i(I){I=I||{},I.browser=I.browser||{};const j=I.browser.transmit;if(j&&typeof j.send!="function")throw Error("pino: transmit option must have a send function");const z=I.browser.write||t;I.browser.write&&(I.browser.asObject=!0);const P=I.serializers||{},G=r(I.browser.serialize,P);let F=I.browser.serialize;Array.isArray(I.browser.serialize)&&I.browser.serialize.indexOf("!stdSerializers.err")>-1&&(F=!1);const K=["error","fatal","warn","info","debug","trace"];typeof z=="function"&&(z.error=z.fatal=z.warn=z.info=z.debug=z.trace=z),I.enabled===!1&&(I.level="silent");const re=I.level||"info",J=Object.create(z);J.log||(J.log=S),Object.defineProperty(J,"levelVal",{get:R}),Object.defineProperty(J,"level",{get:L,set:V});const D={transmit:j,serialize:G,asObject:I.browser.asObject,levels:K,timestamp:b(I)};J.levels=i.levels,J.level=re,J.setMaxListeners=J.getMaxListeners=J.emit=J.addListener=J.on=J.prependListener=J.once=J.prependOnceListener=J.removeListener=J.removeAllListeners=J.listeners=J.listenerCount=J.eventNames=J.write=J.flush=S,J.serializers=P,J._serialize=G,J._stdErrSerialize=F,J.child=X,j&&(J._logEvent=g());function R(){return this.level==="silent"?1/0:this.levels.values[this.level]}function L(){return this._level}function V($){if($!=="silent"&&!this.levels.values[$])throw Error("unknown level "+$);this._level=$,a(D,J,"error","log"),a(D,J,"fatal","error"),a(D,J,"warn","error"),a(D,J,"info","log"),a(D,J,"debug","log"),a(D,J,"trace","log")}function X($,W){if(!$)throw new Error("missing bindings for child Pino");W=W||{},G&&$.serializers&&(W.serializers=$.serializers);const te=W.serializers;if(G&&te){var se=Object.assign({},P,te),ne=I.browser.serialize===!0?Object.keys(se):G;delete $.serializers,f([$],ne,se,this._stdErrSerialize)}function ue(me){this._childLevel=(me._childLevel|0)+1,this.error=d(me,$,"error"),this.fatal=d(me,$,"fatal"),this.warn=d(me,$,"warn"),this.info=d(me,$,"info"),this.debug=d(me,$,"debug"),this.trace=d(me,$,"trace"),se&&(this.serializers=se,this._serialize=ne),j&&(this._logEvent=g([].concat(me._logEvent.bindings,$)))}return ue.prototype=this,new ue(this)}return J}i.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},i.stdSerializers=n,i.stdTimeFunctions=Object.assign({},{nullTime:x,epochTime:T,unixTime:O,isoTime:U});function a(I,j,z,P){const G=Object.getPrototypeOf(j);j[z]=j.levelVal>j.levels.values[z]?S:G[z]?G[z]:t[z]||t[P]||S,c(I,j,z)}function c(I,j,z){!I.transmit&&j[z]===S||(j[z]=function(P){return function(){const F=I.timestamp(),K=new Array(arguments.length),re=Object.getPrototypeOf&&Object.getPrototypeOf(this)===t?t:this;for(var J=0;J<K.length;J++)K[J]=arguments[J];if(I.serialize&&!I.asObject&&f(K,this._serialize,this.serializers,this._stdErrSerialize),I.asObject?P.call(re,u(this,z,K,F)):P.apply(re,K),I.transmit){const D=I.transmit.level||j.level,R=i.levels.values[D],L=i.levels.values[z];if(L<R)return;p(this,{ts:F,methodLevel:z,methodValue:L,transmitValue:i.levels.values[I.transmit.level||j.level],send:I.transmit.send,val:j.levelVal},K)}}}(j[z]))}function u(I,j,z,P){I._serialize&&f(z,I._serialize,I.serializers,I._stdErrSerialize);const G=z.slice();let F=G[0];const K={};P&&(K.time=P),K.level=i.levels.values[j];let re=(I._childLevel|0)+1;if(re<1&&(re=1),F!==null&&typeof F=="object"){for(;re--&&typeof G[0]=="object";)Object.assign(K,G.shift());F=G.length?e(G.shift(),G):void 0}else typeof F=="string"&&(F=e(G.shift(),G));return F!==void 0&&(K.msg=F),K}function f(I,j,z,P){for(const G in I)if(P&&I[G]instanceof Error)I[G]=i.stdSerializers.err(I[G]);else if(typeof I[G]=="object"&&!Array.isArray(I[G]))for(const F in I[G])j&&j.indexOf(F)>-1&&F in z&&(I[G][F]=z[F](I[G][F]))}function d(I,j,z){return function(){const P=new Array(1+arguments.length);P[0]=j;for(var G=1;G<P.length;G++)P[G]=arguments[G-1];return I[z].apply(this,P)}}function p(I,j,z){const P=j.send,G=j.ts,F=j.methodLevel,K=j.methodValue,re=j.val,J=I._logEvent.bindings;f(z,I._serialize||Object.keys(I.serializers),I.serializers,I._stdErrSerialize===void 0?!0:I._stdErrSerialize),I._logEvent.ts=G,I._logEvent.messages=z.filter(function(D){return J.indexOf(D)===-1}),I._logEvent.level.label=F,I._logEvent.level.value=K,P(F,I._logEvent,re),I._logEvent=g(J)}function g(I){return{ts:0,messages:[],bindings:I||[],level:{label:"",value:0}}}function y(I){const j={type:I.constructor.name,msg:I.message,stack:I.stack};for(const z in I)j[z]===void 0&&(j[z]=I[z]);return j}function b(I){return typeof I.timestamp=="function"?I.timestamp:I.timestamp===!1?x:T}function v(){return{}}function E(I){return I}function S(){}function x(){return!1}function T(){return Date.now()}function O(){return Math.round(Date.now()/1e3)}function U(){return new Date(Date.now()).toISOString()}function N(){function I(j){return typeof j<"u"&&j}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return I(self)||I(window)||I(this)||{}}}return T0}var kc=EW();const Pf=ws(kc),SW={level:"info"},kf="custom_context",bw=1e3*1024;let _W=class{constructor(t){this.nodeValue=t,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}},XA=class{constructor(t){this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=t,this.sizeInBytes=0}append(t){const n=new _W(t);if(n.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${t} with size ${n.size}`);for(;this.size+n.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=n),this.tail=n):(this.head=n,this.tail=n),this.lengthInNodes++,this.sizeInBytes+=n.size}shift(){if(!this.head)return;const t=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=t.size}toArray(){const t=[];let n=this.head;for(;n!==null;)t.push(n.value),n=n.next;return t}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let t=this.head;return{next:()=>{if(!t)return{done:!0,value:null};const n=t.value;return t=t.next,{done:!1,value:n}}}}},oI=class{constructor(t,n=bw){this.level=t??"error",this.levelValue=kc.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=n,this.logs=new XA(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(t,n){n===kc.levels.values.error?console.error(t):n===kc.levels.values.warn?console.warn(t):n===kc.levels.values.debug?console.debug(t):n===kc.levels.values.trace?console.trace(t):console.log(t)}appendToLogs(t){this.logs.append(ys({timestamp:new Date().toISOString(),log:t}));const n=typeof t=="string"?JSON.parse(t).level:t.level;n>=this.levelValue&&this.forwardToConsole(t,n)}getLogs(){return this.logs}clearLogs(){this.logs=new XA(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(t){const n=this.getLogArray();return n.push(ys({extraMetadata:t})),new Blob(n,{type:"application/json"})}},xW=class{constructor(t,n=bw){this.baseChunkLogger=new oI(t,n)}write(t){this.baseChunkLogger.appendToLogs(t)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(t){return this.baseChunkLogger.logsToBlob(t)}downloadLogsBlobInBrowser(t){const n=URL.createObjectURL(this.logsToBlob(t)),r=document.createElement("a");r.href=n,r.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)}},AW=class{constructor(t,n=bw){this.baseChunkLogger=new oI(t,n)}write(t){this.baseChunkLogger.appendToLogs(t)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(t){return this.baseChunkLogger.logsToBlob(t)}};var RW=Object.defineProperty,OW=Object.defineProperties,TW=Object.getOwnPropertyDescriptors,ZA=Object.getOwnPropertySymbols,DW=Object.prototype.hasOwnProperty,CW=Object.prototype.propertyIsEnumerable,QA=(e,t,n)=>t in e?RW(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,hp=(e,t)=>{for(var n in t||(t={}))DW.call(t,n)&&QA(e,n,t[n]);if(ZA)for(var n of ZA(t))CW.call(t,n)&&QA(e,n,t[n]);return e},pp=(e,t)=>OW(e,TW(t));function Wp(e){return pp(hp({},e),{level:e?.level||SW.level})}function IW(e,t=kf){return e[t]||""}function NW(e,t,n=kf){return e[n]=t,e}function ir(e,t=kf){let n="";return typeof e.bindings>"u"?n=IW(e,t):n=e.bindings().context||"",n}function $W(e,t,n=kf){const r=ir(e,n);return r.trim()?`${r}/${t}`:t}function kn(e,t,n=kf){const r=$W(e,t,n),i=e.child({context:r});return NW(i,r,n)}function UW(e){var t,n;const r=new xW((t=e.opts)==null?void 0:t.level,e.maxSizeInBytes);return{logger:Pf(pp(hp({},e.opts),{level:"trace",browser:pp(hp({},(n=e.opts)==null?void 0:n.browser),{write:i=>r.write(i)})})),chunkLoggerController:r}}function BW(e){var t;const n=new AW((t=e.opts)==null?void 0:t.level,e.maxSizeInBytes);return{logger:Pf(pp(hp({},e.opts),{level:"trace"}),n),chunkLoggerController:n}}function PW(e){return typeof e.loggerOverride<"u"&&typeof e.loggerOverride!="string"?{logger:e.loggerOverride,chunkLoggerController:null}:typeof window<"u"?UW(e):BW(e)}var kW=Object.defineProperty,MW=(e,t,n)=>t in e?kW(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,JA=(e,t,n)=>MW(e,typeof t!="symbol"?t+"":t,n);let LW=class extends Ea{constructor(t){super(),this.opts=t,JA(this,"protocol","wc"),JA(this,"version",2)}};var jW=Object.defineProperty,zW=(e,t,n)=>t in e?jW(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,qW=(e,t,n)=>zW(e,t+"",n);let HW=class extends Ea{constructor(t,n){super(),this.core=t,this.logger=n,qW(this,"records",new Map)}},FW=class{constructor(t,n){this.logger=t,this.core=n}};class VW extends Ea{constructor(t,n){super(),this.relayer=t,this.logger=n}}let GW=class extends Ea{constructor(t){super()}},KW=class{constructor(t,n,r,i){this.core=t,this.logger=n,this.name=r}},WW=class extends Ea{constructor(t,n){super(),this.relayer=t,this.logger=n}},YW=class extends Ea{constructor(t,n){super(),this.core=t,this.logger=n}},XW=class{constructor(t,n,r){this.core=t,this.logger=n,this.store=r}},ZW=class{constructor(t,n){this.projectId=t,this.logger=n}},QW=class{constructor(t,n,r){this.core=t,this.logger=n,this.telemetryEnabled=r}};var JW=Object.defineProperty,eY=(e,t,n)=>t in e?JW(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,eR=(e,t,n)=>eY(e,typeof t!="symbol"?t+"":t,n);class tY{constructor(t){this.opts=t,eR(this,"protocol","wc"),eR(this,"version",2)}}let nY=class{constructor(t){this.client=t}};const rY="PARSE_ERROR",iY="INVALID_REQUEST",sY="METHOD_NOT_FOUND",oY="INVALID_PARAMS",aI="INTERNAL_ERROR",vw="SERVER_ERROR",aY=[-32700,-32600,-32601,-32602,-32603],Wu={[rY]:{code:-32700,message:"Parse error"},[iY]:{code:-32600,message:"Invalid Request"},[sY]:{code:-32601,message:"Method not found"},[oY]:{code:-32602,message:"Invalid params"},[aI]:{code:-32603,message:"Internal error"},[vw]:{code:-32e3,message:"Server error"}},cI=vw;function cY(e){return aY.includes(e)}function tR(e){return Object.keys(Wu).includes(e)?Wu[e]:Wu[cI]}function lY(e){const t=Object.values(Wu).find(n=>n.code===e);return t||Wu[cI]}function lI(e,t,n){return e.message.includes("getaddrinfo ENOTFOUND")||e.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${n} RPC url at ${t}`):e}var D0={},ts={},nR;function uY(){if(nR)return ts;nR=1,Object.defineProperty(ts,"__esModule",{value:!0}),ts.isBrowserCryptoAvailable=ts.getSubtleCrypto=ts.getBrowerCrypto=void 0;function e(){return Xn?.crypto||Xn?.msCrypto||{}}ts.getBrowerCrypto=e;function t(){const r=e();return r.subtle||r.webkitSubtle}ts.getSubtleCrypto=t;function n(){return!!e()&&!!t()}return ts.isBrowserCryptoAvailable=n,ts}var ns={},rR;function fY(){if(rR)return ns;rR=1,Object.defineProperty(ns,"__esModule",{value:!0}),ns.isBrowser=ns.isNode=ns.isReactNative=void 0;function e(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}ns.isReactNative=e;function t(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}ns.isNode=t;function n(){return!e()&&!t()}return ns.isBrowser=n,ns}var iR;function dY(){return iR||(iR=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});const t=Of;t.__exportStar(uY(),e),t.__exportStar(fY(),e)}(D0)),D0}var hY=dY();function vi(e=3){const t=Date.now()*Math.pow(10,e),n=Math.floor(Math.random()*Math.pow(10,e));return t+n}function na(e=6){return BigInt(vi(e))}function co(e,t,n){return{id:n||vi(),jsonrpc:"2.0",method:e,params:t}}function Yp(e,t){return{id:e,jsonrpc:"2.0",result:t}}function Xp(e,t,n){return{id:e,jsonrpc:"2.0",error:pY(t)}}function pY(e,t){return typeof e>"u"?tR(aI):(typeof e=="string"&&(e=Object.assign(Object.assign({},tR(vw)),{message:e})),cY(e.code)&&(e=lY(e.code)),e)}class gY{}class mY extends gY{constructor(){super()}}class yY extends mY{constructor(t){super()}}const bY="^https?:",vY="^wss?:";function wY(e){const t=e.match(new RegExp(/^\w+:/,"gi"));if(!(!t||!t.length))return t[0]}function uI(e,t){const n=wY(e);return typeof n>"u"?!1:new RegExp(t).test(n)}function sR(e){return uI(e,bY)}function oR(e){return uI(e,vY)}function EY(e){return new RegExp("wss?://localhost(:d{2,5})?").test(e)}function fI(e){return typeof e=="object"&&"id"in e&&"jsonrpc"in e&&e.jsonrpc==="2.0"}function ww(e){return fI(e)&&"method"in e}function Zp(e){return fI(e)&&(wi(e)||Pr(e))}function wi(e){return"result"in e}function Pr(e){return"error"in e}let Hr=class extends yY{constructor(t){super(t),this.events=new tr.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(t),this.connection.connected&&this.registerEventListeners()}async connect(t=this.connection){await this.open(t)}async disconnect(){await this.close()}on(t,n){this.events.on(t,n)}once(t,n){this.events.once(t,n)}off(t,n){this.events.off(t,n)}removeListener(t,n){this.events.removeListener(t,n)}async request(t,n){return this.requestStrict(co(t.method,t.params||[],t.id||na().toString()),n)}async requestStrict(t,n){return new Promise(async(r,i)=>{if(!this.connection.connected)try{await this.open()}catch(a){i(a)}this.events.on(`${t.id}`,a=>{Pr(a)?i(a.error):r(a.result)});try{await this.connection.send(t,n)}catch(a){i(a)}})}setConnection(t=this.connection){return t}onPayload(t){this.events.emit("payload",t),Zp(t)?this.events.emit(`${t.id}`,t):this.events.emit("message",{type:t.method,data:t.params})}onClose(t){t&&t.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${t.code} ${t.reason?`(${t.reason})`:""}`)),this.events.emit("disconnect")}async open(t=this.connection){this.connection===t&&this.connection.connected||(this.connection.connected&&this.close(),typeof t=="string"&&(await this.connection.open(t),t=this.connection),this.connection=this.setConnection(t),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",t=>this.onPayload(t)),this.connection.on("close",t=>this.onClose(t)),this.connection.on("error",t=>this.events.emit("error",t)),this.connection.on("register_error",t=>this.onClose()),this.hasRegisteredEventListeners=!0)}};const SY=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),_Y=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",aR=e=>e.split("?")[0],cR=10,xY=SY();let AY=class{constructor(t){if(this.url=t,this.events=new tr.EventEmitter,this.registering=!1,!oR(t))throw new Error(`Provided URL is not compatible with WebSocket connection: ${t}`);this.url=t}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(t,n){this.events.on(t,n)}once(t,n){this.events.once(t,n)}off(t,n){this.events.off(t,n)}removeListener(t,n){this.events.removeListener(t,n)}async open(t=this.url){await this.register(t)}async close(){return new Promise((t,n)=>{if(typeof this.socket>"u"){n(new Error("Connection already closed"));return}this.socket.onclose=r=>{this.onClose(r),t()},this.socket.close()})}async send(t){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(ys(t))}catch(n){this.onError(t.id,n)}}register(t=this.url){if(!oR(t))throw new Error(`Provided URL is not compatible with WebSocket connection: ${t}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((r,i)=>{this.events.once("register_error",a=>{this.resetMaxListeners(),i(a)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return i(new Error("WebSocket connection is missing or invalid"));r(this.socket)})})}return this.url=t,this.registering=!0,new Promise((n,r)=>{const i=hY.isReactNative()?void 0:{rejectUnauthorized:!EY(t)},a=new xY(t,[],i);_Y()?a.onerror=c=>{const u=c;r(this.emitError(u.error))}:a.on("error",c=>{r(this.emitError(c))}),a.onopen=()=>{this.onOpen(a),n(a)}})}onOpen(t){t.onmessage=n=>this.onPayload(n),t.onclose=n=>this.onClose(n),this.socket=t,this.registering=!1,this.events.emit("open")}onClose(t){this.socket=void 0,this.registering=!1,this.events.emit("close",t)}onPayload(t){if(typeof t.data>"u")return;const n=typeof t.data=="string"?la(t.data):t.data;this.events.emit("payload",n)}onError(t,n){const r=this.parseError(n),i=r.message||r.toString(),a=Xp(t,i);this.events.emit("payload",a)}parseError(t,n=this.url){return lI(t,aR(n),"WS")}resetMaxListeners(){this.events.getMaxListeners()>cR&&this.events.setMaxListeners(cR)}emitError(t){const n=this.parseError(new Error(t?.message||`WebSocket connection failed for host: ${aR(this.url)}`));return this.events.emit("register_error",n),n}};var RY={};const dI="wc",hI=2,Yb="core",Ni=`${dI}@2:${Yb}:`,OY={logger:"error"},TY={database:":memory:"},DY="crypto",lR="client_ed25519_seed",CY=ve.ONE_DAY,IY="keychain",NY="0.3",$Y="messages",UY="0.3",uR=ve.SIX_HOURS,BY="publisher",pI="irn",PY="error",gI="wss://relay.walletconnect.org",kY="relayer",cn={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},MY="_subscription",Nr={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},LY=.1,Xb="2.21.4",wt={link_mode:"link_mode",relay:"relay"},Vh={inbound:"inbound",outbound:"outbound"},jY="0.3",zY="WALLETCONNECT_CLIENT_ID",fR="WALLETCONNECT_LINK_MODE_APPS",pr={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},qY="subscription",HY="0.3",FY="pairing",VY="0.3",Ru={wc_pairingDelete:{req:{ttl:ve.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:ve.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:ve.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:ve.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:ve.ONE_DAY,prompt:!1,tag:0},res:{ttl:ve.ONE_DAY,prompt:!1,tag:0}}},Xo={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},Xr={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},GY="history",KY="0.3",WY="expirer",Br={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},YY="0.3",XY="verify-api",ZY="https://verify.walletconnect.com",mI="https://verify.walletconnect.org",Yu=mI,QY=`${Yu}/v3`,JY=[ZY,mI],eX="echo",tX="https://echo.walletconnect.com",bi={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal",subscribing_to_pairing_topic:"subscribing_to_pairing_topic"},is={no_wss_connection:"no_wss_connection",no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_expired:"proposal_expired",proposal_listener_not_found:"proposal_listener_not_found"},Zr={session_approve_started:"session_approve_started",proposal_not_expired:"proposal_not_expired",session_namespaces_validation_success:"session_namespaces_validation_success",create_session_topic:"create_session_topic",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success"},jo={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found"},zo={authenticated_session_approve_started:"authenticated_session_approve_started",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve"},Ou={no_internet_connection:"no_internet_connection",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"},nX=.1,rX="event-client",iX=86400,sX="https://pulse.walletconnect.org/batch";function oX(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var i=0;i<e.length;i++){var a=e.charAt(i),c=a.charCodeAt(0);if(n[c]!==255)throw new TypeError(a+" is ambiguous");n[c]=i}var u=e.length,f=e.charAt(0),d=Math.log(u)/Math.log(256),p=Math.log(256)/Math.log(u);function g(v){if(v instanceof Uint8Array||(ArrayBuffer.isView(v)?v=new Uint8Array(v.buffer,v.byteOffset,v.byteLength):Array.isArray(v)&&(v=Uint8Array.from(v))),!(v instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(v.length===0)return"";for(var E=0,S=0,x=0,T=v.length;x!==T&&v[x]===0;)x++,E++;for(var O=(T-x)*p+1>>>0,U=new Uint8Array(O);x!==T;){for(var N=v[x],I=0,j=O-1;(N!==0||I<S)&&j!==-1;j--,I++)N+=256*U[j]>>>0,U[j]=N%u>>>0,N=N/u>>>0;if(N!==0)throw new Error("Non-zero carry");S=I,x++}for(var z=O-S;z!==O&&U[z]===0;)z++;for(var P=f.repeat(E);z<O;++z)P+=e.charAt(U[z]);return P}function y(v){if(typeof v!="string")throw new TypeError("Expected String");if(v.length===0)return new Uint8Array;var E=0;if(v[E]!==" "){for(var S=0,x=0;v[E]===f;)S++,E++;for(var T=(v.length-E)*d+1>>>0,O=new Uint8Array(T);v[E];){var U=n[v.charCodeAt(E)];if(U===255)return;for(var N=0,I=T-1;(U!==0||N<x)&&I!==-1;I--,N++)U+=u*O[I]>>>0,O[I]=U%256>>>0,U=U/256>>>0;if(U!==0)throw new Error("Non-zero carry");x=N,E++}if(v[E]!==" "){for(var j=T-x;j!==T&&O[j]===0;)j++;for(var z=new Uint8Array(S+(T-j)),P=S;j!==T;)z[P++]=O[j++];return z}}}function b(v){var E=y(v);if(E)return E;throw new Error(`Non-${t} character`)}return{encode:g,decodeUnsafe:y,decode:b}}var aX=oX,cX=aX;const yI=e=>{if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")},lX=e=>new TextEncoder().encode(e),uX=e=>new TextDecoder().decode(e);class fX{constructor(t,n,r){this.name=t,this.prefix=n,this.baseEncode=r}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}}class dX{constructor(t,n,r){if(this.name=t,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return bI(this,t)}}class hX{constructor(t){this.decoders=t}or(t){return bI(this,t)}decode(t){const n=t[0],r=this.decoders[n];if(r)return r.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const bI=(e,t)=>new hX({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class pX{constructor(t,n,r,i){this.name=t,this.prefix=n,this.baseEncode=r,this.baseDecode=i,this.encoder=new fX(t,n,r),this.decoder=new dX(t,n,i)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}}const Qp=({name:e,prefix:t,encode:n,decode:r})=>new pX(e,t,n,r),Mf=({prefix:e,name:t,alphabet:n})=>{const{encode:r,decode:i}=cX(n,t);return Qp({prefix:e,name:t,encode:r,decode:a=>yI(i(a))})},gX=(e,t,n,r)=>{const i={};for(let p=0;p<t.length;++p)i[t[p]]=p;let a=e.length;for(;e[a-1]==="=";)--a;const c=new Uint8Array(a*n/8|0);let u=0,f=0,d=0;for(let p=0;p<a;++p){const g=i[e[p]];if(g===void 0)throw new SyntaxError(`Non-${r} character`);f=f<<n|g,u+=n,u>=8&&(u-=8,c[d++]=255&f>>u)}if(u>=n||255&f<<8-u)throw new SyntaxError("Unexpected end of data");return c},mX=(e,t,n)=>{const r=t[t.length-1]==="=",i=(1<<n)-1;let a="",c=0,u=0;for(let f=0;f<e.length;++f)for(u=u<<8|e[f],c+=8;c>n;)c-=n,a+=t[i&u>>c];if(c&&(a+=t[i&u<<n-c]),r)for(;a.length*n&7;)a+="=";return a},wn=({name:e,prefix:t,bitsPerChar:n,alphabet:r})=>Qp({prefix:t,name:e,encode(i){return mX(i,r,n)},decode(i){return gX(i,r,n,e)}}),yX=Qp({prefix:"\0",name:"identity",encode:e=>uX(e),decode:e=>lX(e)});var bX=Object.freeze({__proto__:null,identity:yX});const vX=wn({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var wX=Object.freeze({__proto__:null,base2:vX});const EX=wn({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var SX=Object.freeze({__proto__:null,base8:EX});const _X=Mf({prefix:"9",name:"base10",alphabet:"0123456789"});var xX=Object.freeze({__proto__:null,base10:_X});const AX=wn({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),RX=wn({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var OX=Object.freeze({__proto__:null,base16:AX,base16upper:RX});const TX=wn({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),DX=wn({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),CX=wn({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),IX=wn({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),NX=wn({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),$X=wn({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),UX=wn({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),BX=wn({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),PX=wn({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var kX=Object.freeze({__proto__:null,base32:TX,base32upper:DX,base32pad:CX,base32padupper:IX,base32hex:NX,base32hexupper:$X,base32hexpad:UX,base32hexpadupper:BX,base32z:PX});const MX=Mf({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),LX=Mf({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var jX=Object.freeze({__proto__:null,base36:MX,base36upper:LX});const zX=Mf({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),qX=Mf({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var HX=Object.freeze({__proto__:null,base58btc:zX,base58flickr:qX});const FX=wn({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),VX=wn({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),GX=wn({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),KX=wn({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var WX=Object.freeze({__proto__:null,base64:FX,base64pad:VX,base64url:GX,base64urlpad:KX});const vI=Array.from(""),YX=vI.reduce((e,t,n)=>(e[n]=t,e),[]),XX=vI.reduce((e,t,n)=>(e[t.codePointAt(0)]=n,e),[]);function ZX(e){return e.reduce((t,n)=>(t+=YX[n],t),"")}function QX(e){const t=[];for(const n of e){const r=XX[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);t.push(r)}return new Uint8Array(t)}const JX=Qp({prefix:"",name:"base256emoji",encode:ZX,decode:QX});var eZ=Object.freeze({__proto__:null,base256emoji:JX}),tZ=wI,dR=128,nZ=-128,rZ=Math.pow(2,31);function wI(e,t,n){t=t||[],n=n||0;for(var r=n;e>=rZ;)t[n++]=e&255|dR,e/=128;for(;e&nZ;)t[n++]=e&255|dR,e>>>=7;return t[n]=e|0,wI.bytes=n-r+1,t}var iZ=Zb,sZ=128,hR=127;function Zb(e,r){var n=0,r=r||0,i=0,a=r,c,u=e.length;do{if(a>=u)throw Zb.bytes=0,new RangeError("Could not decode varint");c=e[a++],n+=i<28?(c&hR)<<i:(c&hR)*Math.pow(2,i),i+=7}while(c>=sZ);return Zb.bytes=a-r,n}var oZ=Math.pow(2,7),aZ=Math.pow(2,14),cZ=Math.pow(2,21),lZ=Math.pow(2,28),uZ=Math.pow(2,35),fZ=Math.pow(2,42),dZ=Math.pow(2,49),hZ=Math.pow(2,56),pZ=Math.pow(2,63),gZ=function(e){return e<oZ?1:e<aZ?2:e<cZ?3:e<lZ?4:e<uZ?5:e<fZ?6:e<dZ?7:e<hZ?8:e<pZ?9:10},mZ={encode:tZ,decode:iZ,encodingLength:gZ},EI=mZ;const pR=(e,t,n=0)=>(EI.encode(e,t,n),t),gR=e=>EI.encodingLength(e),Qb=(e,t)=>{const n=t.byteLength,r=gR(e),i=r+gR(n),a=new Uint8Array(i+n);return pR(e,a,0),pR(n,a,r),a.set(t,i),new yZ(e,n,t,a)};class yZ{constructor(t,n,r,i){this.code=t,this.size=n,this.digest=r,this.bytes=i}}const SI=({name:e,code:t,encode:n})=>new bZ(e,t,n);class bZ{constructor(t,n,r){this.name=t,this.code=n,this.encode=r}digest(t){if(t instanceof Uint8Array){const n=this.encode(t);return n instanceof Uint8Array?Qb(this.code,n):n.then(r=>Qb(this.code,r))}else throw Error("Unknown type, must be binary type")}}const _I=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),vZ=SI({name:"sha2-256",code:18,encode:_I("SHA-256")}),wZ=SI({name:"sha2-512",code:19,encode:_I("SHA-512")});var EZ=Object.freeze({__proto__:null,sha256:vZ,sha512:wZ});const xI=0,SZ="identity",AI=yI,_Z=e=>Qb(xI,AI(e)),xZ={code:xI,name:SZ,encode:AI,digest:_Z};var AZ=Object.freeze({__proto__:null,identity:xZ});new TextEncoder,new TextDecoder;const mR={...bX,...wX,...SX,...xX,...OX,...kX,...jX,...HX,...WX,...eZ};({...EZ,...AZ});function RI(e){return globalThis.Buffer!=null?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}function RZ(e=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?RI(globalThis.Buffer.allocUnsafe(e)):new Uint8Array(e)}function OI(e,t,n,r){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:n},decoder:{decode:r}}}const yR=OI("utf8","u",e=>"u"+new TextDecoder("utf8").decode(e),e=>new TextEncoder().encode(e.substring(1))),C0=OI("ascii","a",e=>{let t="a";for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t},e=>{e=e.substring(1);const t=RZ(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}),OZ={utf8:yR,"utf-8":yR,hex:mR.base16,latin1:C0,ascii:C0,binary:C0,...mR};function TZ(e,t="utf8"){const n=OZ[t];if(!n)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?RI(globalThis.Buffer.from(e,"utf-8")):n.decoder.decode(`${n.prefix}${e}`)}var DZ=Object.defineProperty,CZ=(e,t,n)=>t in e?DZ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,gi=(e,t,n)=>CZ(e,typeof t!="symbol"?t+"":t,n);class IZ{constructor(t,n){this.core=t,this.logger=n,gi(this,"keychain",new Map),gi(this,"name",IY),gi(this,"version",NY),gi(this,"initialized",!1),gi(this,"storagePrefix",Ni),gi(this,"init",async()=>{if(!this.initialized){const r=await this.getKeyChain();typeof r<"u"&&(this.keychain=r),this.initialized=!0}}),gi(this,"has",r=>(this.isInitialized(),this.keychain.has(r))),gi(this,"set",async(r,i)=>{this.isInitialized(),this.keychain.set(r,i),await this.persist()}),gi(this,"get",r=>{this.isInitialized();const i=this.keychain.get(r);if(typeof i>"u"){const{message:a}=be("NO_MATCHING_KEY",`${this.name}: ${r}`);throw new Error(a)}return i}),gi(this,"del",async r=>{this.isInitialized(),this.keychain.delete(r),await this.persist()}),this.core=t,this.logger=kn(n,this.name)}get context(){return ir(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(t){await this.core.storage.setItem(this.storageKey,$b(t))}async getKeyChain(){const t=await this.core.storage.getItem(this.storageKey);return typeof t<"u"?Ub(t):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:t}=be("NOT_INITIALIZED",this.name);throw new Error(t)}}}var NZ=Object.defineProperty,$Z=(e,t,n)=>t in e?NZ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,pn=(e,t,n)=>$Z(e,typeof t!="symbol"?t+"":t,n);class UZ{constructor(t,n,r){this.core=t,this.logger=n,pn(this,"name",DY),pn(this,"keychain"),pn(this,"randomSessionIdentifier",Fb()),pn(this,"initialized",!1),pn(this,"init",async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)}),pn(this,"hasKeys",i=>(this.isInitialized(),this.keychain.has(i))),pn(this,"getClientId",async()=>{this.isInitialized();const i=await this.getClientSeed(),a=kx(i);return HD(a.publicKey)}),pn(this,"generateKeyPair",()=>{this.isInitialized();const i=wG();return this.setPrivateKey(i.publicKey,i.privateKey)}),pn(this,"signJWT",async i=>{this.isInitialized();const a=await this.getClientSeed(),c=kx(a),u=this.randomSessionIdentifier;return await pq(u,i,CY,c)}),pn(this,"generateSharedKey",(i,a,c)=>{this.isInitialized();const u=this.getPrivateKey(i),f=EG(u,a);return this.setSymKey(f,c)}),pn(this,"setSymKey",async(i,a)=>{this.isInitialized();const c=a||jh(i);return await this.keychain.set(c,i),c}),pn(this,"deleteKeyPair",async i=>{this.isInitialized(),await this.keychain.del(i)}),pn(this,"deleteSymKey",async i=>{this.isInitialized(),await this.keychain.del(i)}),pn(this,"encode",async(i,a,c)=>{this.isInitialized();const u=FC(c),f=ys(a);if(RA(u))return xG(f,c?.encoding);if(AA(u)){const y=u.senderPublicKey,b=u.receiverPublicKey;i=await this.generateSharedKey(y,b)}const d=this.getSymKey(i),{type:p,senderPublicKey:g}=u;return SG({type:p,symKey:d,message:f,senderPublicKey:g,encoding:c?.encoding})}),pn(this,"decode",async(i,a,c)=>{this.isInitialized();const u=RG(a,c);if(RA(u)){const f=AG(a,c?.encoding);return la(f)}if(AA(u)){const f=u.receiverPublicKey,d=u.senderPublicKey;i=await this.generateSharedKey(f,d)}try{const f=this.getSymKey(i),d=_G({symKey:f,encoded:a,encoding:c?.encoding});return la(d)}catch(f){this.logger.error(`Failed to decode message from topic: '${i}', clientId: '${await this.getClientId()}'`),this.logger.error(f)}}),pn(this,"getPayloadType",(i,a=ri)=>{const c=hf({encoded:i,encoding:a});return fa(c.type)}),pn(this,"getPayloadSenderPublicKey",(i,a=ri)=>{const c=hf({encoded:i,encoding:a});return c.senderPublicKey?Qn(c.senderPublicKey,Pn):void 0}),this.core=t,this.logger=kn(n,this.name),this.keychain=r||new IZ(this.core,this.logger)}get context(){return ir(this.logger)}async setPrivateKey(t,n){return await this.keychain.set(t,n),t}getPrivateKey(t){return this.keychain.get(t)}async getClientSeed(){let t="";try{t=this.keychain.get(lR)}catch{t=Fb(),await this.keychain.set(lR,t)}return TZ(t,"base16")}getSymKey(t){return this.keychain.get(t)}isInitialized(){if(!this.initialized){const{message:t}=be("NOT_INITIALIZED",this.name);throw new Error(t)}}}var BZ=Object.defineProperty,PZ=Object.defineProperties,kZ=Object.getOwnPropertyDescriptors,bR=Object.getOwnPropertySymbols,MZ=Object.prototype.hasOwnProperty,LZ=Object.prototype.propertyIsEnumerable,Jb=(e,t,n)=>t in e?BZ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,jZ=(e,t)=>{for(var n in t||(t={}))MZ.call(t,n)&&Jb(e,n,t[n]);if(bR)for(var n of bR(t))LZ.call(t,n)&&Jb(e,n,t[n]);return e},zZ=(e,t)=>PZ(e,kZ(t)),hr=(e,t,n)=>Jb(e,typeof t!="symbol"?t+"":t,n);class qZ extends FW{constructor(t,n){super(t,n),this.logger=t,this.core=n,hr(this,"messages",new Map),hr(this,"messagesWithoutClientAck",new Map),hr(this,"name",$Y),hr(this,"version",UY),hr(this,"initialized",!1),hr(this,"storagePrefix",Ni),hr(this,"init",async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const r=await this.getRelayerMessages();typeof r<"u"&&(this.messages=r);const i=await this.getRelayerMessagesWithoutClientAck();typeof i<"u"&&(this.messagesWithoutClientAck=i),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(r){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(r)}finally{this.initialized=!0}}}),hr(this,"set",async(r,i,a)=>{this.isInitialized();const c=Si(i);let u=this.messages.get(r);if(typeof u>"u"&&(u={}),typeof u[c]<"u")return c;if(u[c]=i,this.messages.set(r,u),a===Vh.inbound){const f=this.messagesWithoutClientAck.get(r)||{};this.messagesWithoutClientAck.set(r,zZ(jZ({},f),{[c]:i}))}return await this.persist(),c}),hr(this,"get",r=>{this.isInitialized();let i=this.messages.get(r);return typeof i>"u"&&(i={}),i}),hr(this,"getWithoutAck",r=>{this.isInitialized();const i={};for(const a of r){const c=this.messagesWithoutClientAck.get(a)||{};i[a]=Object.values(c)}return i}),hr(this,"has",(r,i)=>{this.isInitialized();const a=this.get(r),c=Si(i);return typeof a[c]<"u"}),hr(this,"ack",async(r,i)=>{this.isInitialized();const a=this.messagesWithoutClientAck.get(r);if(typeof a>"u")return;const c=Si(i);delete a[c],Object.keys(a).length===0?this.messagesWithoutClientAck.delete(r):this.messagesWithoutClientAck.set(r,a),await this.persist()}),hr(this,"del",async r=>{this.isInitialized(),this.messages.delete(r),this.messagesWithoutClientAck.delete(r),await this.persist()}),this.logger=kn(t,this.name),this.core=n}get context(){return ir(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get storageKeyWithoutClientAck(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name+"_withoutClientAck"}async setRelayerMessages(t){await this.core.storage.setItem(this.storageKey,$b(t))}async setRelayerMessagesWithoutClientAck(t){await this.core.storage.setItem(this.storageKeyWithoutClientAck,$b(t))}async getRelayerMessages(){const t=await this.core.storage.getItem(this.storageKey);return typeof t<"u"?Ub(t):void 0}async getRelayerMessagesWithoutClientAck(){const t=await this.core.storage.getItem(this.storageKeyWithoutClientAck);return typeof t<"u"?Ub(t):void 0}async persist(){await this.setRelayerMessages(this.messages),await this.setRelayerMessagesWithoutClientAck(this.messagesWithoutClientAck)}isInitialized(){if(!this.initialized){const{message:t}=be("NOT_INITIALIZED",this.name);throw new Error(t)}}}var HZ=Object.defineProperty,FZ=Object.defineProperties,VZ=Object.getOwnPropertyDescriptors,vR=Object.getOwnPropertySymbols,GZ=Object.prototype.hasOwnProperty,KZ=Object.prototype.propertyIsEnumerable,ev=(e,t,n)=>t in e?HZ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,wh=(e,t)=>{for(var n in t||(t={}))GZ.call(t,n)&&ev(e,n,t[n]);if(vR)for(var n of vR(t))KZ.call(t,n)&&ev(e,n,t[n]);return e},I0=(e,t)=>FZ(e,VZ(t)),Qr=(e,t,n)=>ev(e,typeof t!="symbol"?t+"":t,n);class WZ extends VW{constructor(t,n){super(t,n),this.relayer=t,this.logger=n,Qr(this,"events",new tr.EventEmitter),Qr(this,"name",BY),Qr(this,"queue",new Map),Qr(this,"publishTimeout",ve.toMiliseconds(ve.ONE_MINUTE)),Qr(this,"initialPublishTimeout",ve.toMiliseconds(ve.ONE_SECOND*15)),Qr(this,"needsTransportRestart",!1),Qr(this,"publish",async(r,i,a)=>{var c;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:r,message:i,opts:a}});const u=a?.ttl||uR,f=up(a),d=a?.prompt||!1,p=a?.tag||0,g=a?.id||na().toString(),y={topic:r,message:i,opts:{ttl:u,relay:f,prompt:d,tag:p,id:g,attestation:a?.attestation,tvf:a?.tvf}},b=`Failed to publish payload, please try again. id:${g} tag:${p}`;try{const v=new Promise(async E=>{const S=({id:T})=>{y.opts.id===T&&(this.removeRequestFromQueue(T),this.relayer.events.removeListener(cn.publish,S),E(y))};this.relayer.events.on(cn.publish,S);const x=ao(new Promise((T,O)=>{this.rpcPublish({topic:r,message:i,ttl:u,prompt:d,tag:p,id:g,attestation:a?.attestation,tvf:a?.tvf}).then(T).catch(U=>{this.logger.warn(U,U?.message),O(U)})}),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${g} tag:${p}`);try{await x,this.events.removeListener(cn.publish,S)}catch(T){this.queue.set(g,I0(wh({},y),{attempt:1})),this.logger.warn(T,T?.message)}});this.logger.trace({type:"method",method:"publish",params:{id:g,topic:r,message:i,opts:a}}),await ao(v,this.publishTimeout,b)}catch(v){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(v),(c=a?.internal)!=null&&c.throwOnFailedPublish)throw v}finally{this.queue.delete(g)}}),Qr(this,"on",(r,i)=>{this.events.on(r,i)}),Qr(this,"once",(r,i)=>{this.events.once(r,i)}),Qr(this,"off",(r,i)=>{this.events.off(r,i)}),Qr(this,"removeListener",(r,i)=>{this.events.removeListener(r,i)}),this.relayer=t,this.logger=kn(n,this.name),this.registerEventListeners()}get context(){return ir(this.logger)}async rpcPublish(t){var n,r,i,a;const{topic:c,message:u,ttl:f=uR,prompt:d,tag:p,id:g,attestation:y,tvf:b}=t,v={method:ku(up().protocol).publish,params:wh({topic:c,message:u,ttl:f,prompt:d,tag:p,attestation:y},b),id:g};yn((n=v.params)==null?void 0:n.prompt)&&((r=v.params)==null||delete r.prompt),yn((i=v.params)==null?void 0:i.tag)&&((a=v.params)==null||delete a.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:v});const E=await this.relayer.request(v);return this.relayer.events.emit(cn.publish,t),this.logger.debug("Successfully Published Payload"),E}removeRequestFromQueue(t){this.queue.delete(t)}checkQueue(){this.queue.forEach(async(t,n)=>{const r=t.attempt+1;this.queue.set(n,I0(wh({},t),{attempt:r}));const{topic:i,message:a,opts:c,attestation:u}=t;this.logger.warn({},`Publisher: queue->publishing: ${t.opts.id}, tag: ${t.opts.tag}, attempt: ${r}`),await this.rpcPublish(I0(wh({},t),{topic:i,message:a,ttl:c.ttl,prompt:c.prompt,tag:c.tag,id:c.id,attestation:u,tvf:c.tvf})),this.logger.warn({},`Publisher: queue->published: ${t.opts.id}`)})}registerEventListeners(){this.relayer.core.heartbeat.on(Sa.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(cn.connection_stalled);return}this.checkQueue()}),this.relayer.on(cn.message_ack,t=>{this.removeRequestFromQueue(t.id.toString())})}}var YZ=Object.defineProperty,XZ=(e,t,n)=>t in e?YZ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,wc=(e,t,n)=>XZ(e,typeof t!="symbol"?t+"":t,n);class ZZ{constructor(){wc(this,"map",new Map),wc(this,"set",(t,n)=>{const r=this.get(t);this.exists(t,n)||this.map.set(t,[...r,n])}),wc(this,"get",t=>this.map.get(t)||[]),wc(this,"exists",(t,n)=>this.get(t).includes(n)),wc(this,"delete",(t,n)=>{if(typeof n>"u"){this.map.delete(t);return}if(!this.map.has(t))return;const r=this.get(t);if(!this.exists(t,n))return;const i=r.filter(a=>a!==n);if(!i.length){this.map.delete(t);return}this.map.set(t,i)}),wc(this,"clear",()=>{this.map.clear()})}get topics(){return Array.from(this.map.keys())}}var QZ=Object.defineProperty,JZ=Object.defineProperties,eQ=Object.getOwnPropertyDescriptors,wR=Object.getOwnPropertySymbols,tQ=Object.prototype.hasOwnProperty,nQ=Object.prototype.propertyIsEnumerable,tv=(e,t,n)=>t in e?QZ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Tu=(e,t)=>{for(var n in t||(t={}))tQ.call(t,n)&&tv(e,n,t[n]);if(wR)for(var n of wR(t))nQ.call(t,n)&&tv(e,n,t[n]);return e},N0=(e,t)=>JZ(e,eQ(t)),ft=(e,t,n)=>tv(e,typeof t!="symbol"?t+"":t,n);class rQ extends WW{constructor(t,n){super(t,n),this.relayer=t,this.logger=n,ft(this,"subscriptions",new Map),ft(this,"topicMap",new ZZ),ft(this,"events",new tr.EventEmitter),ft(this,"name",qY),ft(this,"version",HY),ft(this,"pending",new Map),ft(this,"cached",[]),ft(this,"initialized",!1),ft(this,"storagePrefix",Ni),ft(this,"subscribeTimeout",ve.toMiliseconds(ve.ONE_MINUTE)),ft(this,"initialSubscribeTimeout",ve.toMiliseconds(ve.ONE_SECOND*15)),ft(this,"clientId"),ft(this,"batchSubscribeTopicsLimit",500),ft(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),await this.restore()),this.initialized=!0}),ft(this,"subscribe",async(r,i)=>{this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:i}});try{const a=up(i),c={topic:r,relay:a,transportType:i?.transportType};this.pending.set(r,c);const u=await this.rpcSubscribe(r,a,i);return typeof u=="string"&&(this.onSubscribe(u,c),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:i}})),u}catch(a){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(a),a}}),ft(this,"unsubscribe",async(r,i)=>{this.isInitialized(),typeof i?.id<"u"?await this.unsubscribeById(r,i.id,i):await this.unsubscribeByTopic(r,i)}),ft(this,"isSubscribed",r=>new Promise(i=>{i(this.topicMap.topics.includes(r))})),ft(this,"isKnownTopic",r=>new Promise(i=>{i(this.topicMap.topics.includes(r)||this.pending.has(r)||this.cached.some(a=>a.topic===r))})),ft(this,"on",(r,i)=>{this.events.on(r,i)}),ft(this,"once",(r,i)=>{this.events.once(r,i)}),ft(this,"off",(r,i)=>{this.events.off(r,i)}),ft(this,"removeListener",(r,i)=>{this.events.removeListener(r,i)}),ft(this,"start",async()=>{await this.onConnect()}),ft(this,"stop",async()=>{await this.onDisconnect()}),ft(this,"restart",async()=>{await this.restore(),await this.onRestart()}),ft(this,"checkPending",async()=>{if(this.pending.size===0&&(!this.initialized||!this.relayer.connected))return;const r=[];this.pending.forEach(i=>{r.push(i)}),await this.batchSubscribe(r)}),ft(this,"registerEventListeners",()=>{this.relayer.core.heartbeat.on(Sa.pulse,async()=>{await this.checkPending()}),this.events.on(pr.created,async r=>{const i=pr.created;this.logger.info(`Emitting ${i}`),this.logger.debug({type:"event",event:i,data:r}),await this.persist()}),this.events.on(pr.deleted,async r=>{const i=pr.deleted;this.logger.info(`Emitting ${i}`),this.logger.debug({type:"event",event:i,data:r}),await this.persist()})}),this.relayer=t,this.logger=kn(n,this.name),this.clientId=""}get context(){return ir(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}get hasAnyTopics(){return this.topicMap.topics.length>0||this.pending.size>0||this.cached.length>0||this.subscriptions.size>0}hasSubscription(t,n){let r=!1;try{r=this.getSubscription(t).topic===n}catch{}return r}reset(){this.cached=[],this.initialized=!0}onDisable(){this.values.length>0&&(this.cached=this.values),this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(t,n){const r=this.topicMap.get(t);await Promise.all(r.map(async i=>await this.unsubscribeById(t,i,n)))}async unsubscribeById(t,n,r){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:t,id:n,opts:r}});try{const i=up(r);await this.restartToComplete({topic:t,id:n,relay:i}),await this.rpcUnsubscribe(t,n,i);const a=St("USER_DISCONNECTED",`${this.name}, ${t}`);await this.onUnsubscribe(t,n,a),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:t,id:n,opts:r}})}catch(i){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(i),i}}async rpcSubscribe(t,n,r){var i;(!r||r?.transportType===wt.relay)&&await this.restartToComplete({topic:t,id:t,relay:n});const a={method:ku(n.protocol).subscribe,params:{topic:t}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:a});const c=(i=r?.internal)==null?void 0:i.throwOnFailedPublish;try{const u=await this.getSubscriptionId(t);if(r?.transportType===wt.link_mode)return setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(a).catch(p=>this.logger.warn(p))},ve.toMiliseconds(ve.ONE_SECOND)),u;const f=new Promise(async p=>{const g=y=>{y.topic===t&&(this.events.removeListener(pr.created,g),p(y.id))};this.events.on(pr.created,g);try{const y=await ao(new Promise((b,v)=>{this.relayer.request(a).catch(E=>{this.logger.warn(E,E?.message),v(E)}).then(b)}),this.initialSubscribeTimeout,`Subscribing to ${t} failed, please try again`);this.events.removeListener(pr.created,g),p(y)}catch{}}),d=await ao(f,this.subscribeTimeout,`Subscribing to ${t} failed, please try again`);if(!d&&c)throw new Error(`Subscribing to ${t} failed, please try again`);return d?u:null}catch(u){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(cn.connection_stalled),c)throw u}return null}async rpcBatchSubscribe(t){if(!t.length)return;const n=t[0].relay,r={method:ku(n.protocol).batchSubscribe,params:{topics:t.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});try{await await ao(new Promise(i=>{this.relayer.request(r).catch(a=>this.logger.warn(a)).then(i)}),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{this.relayer.events.emit(cn.connection_stalled)}}async rpcBatchFetchMessages(t){if(!t.length)return;const n=t[0].relay,r={method:ku(n.protocol).batchFetchMessages,params:{topics:t.map(a=>a.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});let i;try{i=await await ao(new Promise((a,c)=>{this.relayer.request(r).catch(u=>{this.logger.warn(u),c(u)}).then(a)}),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(cn.connection_stalled)}return i}rpcUnsubscribe(t,n,r){const i={method:ku(r.protocol).unsubscribe,params:{topic:t,id:n}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i}),this.relayer.request(i)}onSubscribe(t,n){this.setSubscription(t,N0(Tu({},n),{id:t})),this.pending.delete(n.topic)}onBatchSubscribe(t){t.length&&t.forEach(n=>{this.setSubscription(n.id,Tu({},n)),this.pending.delete(n.topic)})}async onUnsubscribe(t,n,r){this.events.removeAllListeners(n),this.hasSubscription(n,t)&&this.deleteSubscription(n,r),await this.relayer.messages.del(t)}async setRelayerSubscriptions(t){await this.relayer.core.storage.setItem(this.storageKey,t)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(t,n){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:t,subscription:n}),this.addSubscription(t,n)}addSubscription(t,n){this.subscriptions.set(t,Tu({},n)),this.topicMap.set(n.topic,t),this.events.emit(pr.created,n)}getSubscription(t){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:t});const n=this.subscriptions.get(t);if(!n){const{message:r}=be("NO_MATCHING_KEY",`${this.name}: ${t}`);throw new Error(r)}return n}deleteSubscription(t,n){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:t,reason:n});const r=this.getSubscription(t);this.subscriptions.delete(t),this.topicMap.delete(r.topic,t),this.events.emit(pr.deleted,N0(Tu({},r),{reason:n}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(pr.sync)}async onRestart(){if(this.cached.length){const t=[...this.cached],n=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<n;r++){const i=t.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(i)}}this.events.emit(pr.resubscribed)}async restore(){try{const t=await this.getRelayerSubscriptions();if(typeof t>"u"||!t.length)return;if(this.subscriptions.size){const{message:n}=be("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(n)}this.cached=t,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(t){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(t)}}async batchSubscribe(t){t.length&&(await this.rpcBatchSubscribe(t),this.onBatchSubscribe(await Promise.all(t.map(async n=>N0(Tu({},n),{id:await this.getSubscriptionId(n.topic)})))))}async batchFetchMessages(t){if(!t.length)return;this.logger.trace(`Fetching batch messages for ${t.length} subscriptions`);const n=await this.rpcBatchFetchMessages(t);n&&n.messages&&(await qH(ve.toMiliseconds(ve.ONE_SECOND)),await this.relayer.handleBatchMessageEvents(n.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){const{message:t}=be("NOT_INITIALIZED",this.name);throw new Error(t)}}async restartToComplete(t){!this.relayer.connected&&!this.relayer.connecting&&(this.cached.push(t),await this.relayer.transportOpen())}async getClientId(){return this.clientId||(this.clientId=await this.relayer.core.crypto.getClientId()),this.clientId}async getSubscriptionId(t){return Si(t+await this.getClientId())}}var iQ=Object.defineProperty,ER=Object.getOwnPropertySymbols,sQ=Object.prototype.hasOwnProperty,oQ=Object.prototype.propertyIsEnumerable,nv=(e,t,n)=>t in e?iQ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,SR=(e,t)=>{for(var n in t||(t={}))sQ.call(t,n)&&nv(e,n,t[n]);if(ER)for(var n of ER(t))oQ.call(t,n)&&nv(e,n,t[n]);return e},Ge=(e,t,n)=>nv(e,typeof t!="symbol"?t+"":t,n);class aQ extends GW{constructor(t){super(t),Ge(this,"protocol","wc"),Ge(this,"version",2),Ge(this,"core"),Ge(this,"logger"),Ge(this,"events",new tr.EventEmitter),Ge(this,"provider"),Ge(this,"messages"),Ge(this,"subscriber"),Ge(this,"publisher"),Ge(this,"name",kY),Ge(this,"transportExplicitlyClosed",!1),Ge(this,"initialized",!1),Ge(this,"connectionAttemptInProgress",!1),Ge(this,"relayUrl"),Ge(this,"projectId"),Ge(this,"packageName"),Ge(this,"bundleId"),Ge(this,"hasExperiencedNetworkDisruption",!1),Ge(this,"pingTimeout"),Ge(this,"heartBeatTimeout",ve.toMiliseconds(ve.THIRTY_SECONDS+ve.FIVE_SECONDS)),Ge(this,"reconnectTimeout"),Ge(this,"connectPromise"),Ge(this,"reconnectInProgress",!1),Ge(this,"requestsInFlight",[]),Ge(this,"connectTimeout",ve.toMiliseconds(ve.ONE_SECOND*15)),Ge(this,"request",async n=>{var r,i;this.logger.debug("Publishing Request Payload");const a=n.id||na().toString();await this.toEstablishConnection();try{this.logger.trace({id:a,method:n.method,topic:(r=n.params)==null?void 0:r.topic},"relayer.request - publishing...");const c=`${a}:${((i=n.params)==null?void 0:i.tag)||""}`;this.requestsInFlight.push(c);const u=await this.provider.request(n);return this.requestsInFlight=this.requestsInFlight.filter(f=>f!==c),u}catch(c){throw this.logger.debug(`Failed to Publish Request: ${a}`),c}}),Ge(this,"resetPingTimeout",()=>{op()&&(clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var n,r,i,a;try{this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),(a=(i=(r=(n=this.provider)==null?void 0:n.connection)==null?void 0:r.socket)==null?void 0:i.terminate)==null||a.call(i)}catch(c){this.logger.warn(c,c?.message)}},this.heartBeatTimeout))}),Ge(this,"onPayloadHandler",n=>{this.onProviderPayload(n),this.resetPingTimeout()}),Ge(this,"onConnectHandler",()=>{this.logger.warn({},"Relayer connected "),this.startPingTimeout(),this.events.emit(cn.connect)}),Ge(this,"onDisconnectHandler",()=>{this.logger.warn({},"Relayer disconnected "),this.requestsInFlight=[],this.onProviderDisconnect()}),Ge(this,"onProviderErrorHandler",n=>{this.logger.fatal(`Fatal socket error: ${n.message}`),this.events.emit(cn.error,n),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()}),Ge(this,"registerProviderListeners",()=>{this.provider.on(Nr.payload,this.onPayloadHandler),this.provider.on(Nr.connect,this.onConnectHandler),this.provider.on(Nr.disconnect,this.onDisconnectHandler),this.provider.on(Nr.error,this.onProviderErrorHandler)}),this.core=t.core,this.logger=typeof t.logger<"u"&&typeof t.logger!="string"?kn(t.logger,this.name):Pf(Wp({level:t.logger||PY})),this.messages=new qZ(this.logger,t.core),this.subscriber=new rQ(this,this.logger),this.publisher=new WZ(this,this.logger),this.relayUrl=t?.relayUrl||gI,this.projectId=t.projectId,RH()?this.packageName=Kx():OH()&&(this.bundleId=Kx()),this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.transportOpen().catch(t=>this.logger.warn(t,t?.message))}get context(){return ir(this.logger)}get connected(){var t,n,r;return((r=(n=(t=this.provider)==null?void 0:t.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===1||!1}get connecting(){var t,n,r;return((r=(n=(t=this.provider)==null?void 0:t.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===0||this.connectPromise!==void 0||!1}async publish(t,n,r){this.isInitialized(),await this.publisher.publish(t,n,r),await this.recordMessageEvent({topic:t,message:n,publishedAt:Date.now(),transportType:wt.relay},Vh.outbound)}async subscribe(t,n){var r,i,a;this.isInitialized(),(!(n!=null&&n.transportType)||n?.transportType==="relay")&&await this.toEstablishConnection();const c=typeof((r=n?.internal)==null?void 0:r.throwOnFailedPublish)>"u"?!0:(i=n?.internal)==null?void 0:i.throwOnFailedPublish;let u=((a=this.subscriber.topicMap.get(t))==null?void 0:a[0])||"",f;const d=p=>{p.topic===t&&(this.subscriber.off(pr.created,d),f())};return await Promise.all([new Promise(p=>{f=p,this.subscriber.on(pr.created,d)}),new Promise(async(p,g)=>{u=await this.subscriber.subscribe(t,SR({internal:{throwOnFailedPublish:c}},n)).catch(y=>{c&&g(y)})||u,p()})]),u}async unsubscribe(t,n){this.isInitialized(),await this.subscriber.unsubscribe(t,n)}on(t,n){this.events.on(t,n)}once(t,n){this.events.once(t,n)}off(t,n){this.events.off(t,n)}removeListener(t,n){this.events.removeListener(t,n)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await ao(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(t){if(!this.subscriber.hasAnyTopics){this.logger.warn("Starting WS connection skipped because the client has no topics to work with.");return}if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise(async(n,r)=>{await this.connect(t).then(n).catch(r).finally(()=>{this.connectPromise=void 0})}),await this.connectPromise),!this.connected)throw new Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}async restartTransport(t){this.logger.debug({},"Restarting transport..."),!this.connectionAttemptInProgress&&(this.relayUrl=t||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await kA())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(t){if(t?.length===0){this.logger.trace("Batch message events is empty. Ignoring...");return}const n=t.sort((r,i)=>r.publishedAt-i.publishedAt);this.logger.debug(`Batch of ${n.length} message events sorted`);for(const r of n)try{await this.onMessageEvent(r)}catch(i){this.logger.warn(i,"Error while processing batch message event: "+i?.message)}this.logger.trace(`Batch of ${n.length} message events processed`)}async onLinkMessageEvent(t,n){const{topic:r}=t;if(!n.sessionExists){const i=Yt(ve.FIVE_MINUTES),a={topic:r,expiry:i,relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(r,a)}this.events.emit(cn.message,t),await this.recordMessageEvent(t,Vh.inbound)}async connect(t){await this.confirmOnlineStateOrThrow(),t&&t!==this.relayUrl&&(this.relayUrl=t,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let n=1;for(;n<6;){try{if(this.transportExplicitlyClosed)break;this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${n}...`),await this.createProvider(),await new Promise(async(r,i)=>{const a=()=>{i(new Error("Connection interrupted while trying to connect"))};this.provider.once(Nr.disconnect,a),await ao(new Promise((c,u)=>{this.provider.connect().then(c).catch(u)}),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(c=>{i(c)}).finally(()=>{this.provider.off(Nr.disconnect,a),clearTimeout(this.reconnectTimeout)}),await new Promise(async(c,u)=>{const f=()=>{i(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(Nr.disconnect,f),await this.subscriber.start().then(c).catch(u).finally(()=>{this.provider.off(Nr.disconnect,f)})}),this.hasExperiencedNetworkDisruption=!1,r()})}catch(r){await this.subscriber.stop();const i=r;this.logger.warn({},i.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${n}`);break}await new Promise(r=>setTimeout(r,ve.toMiliseconds(n*1))),n++}}startPingTimeout(){var t,n,r,i,a;if(op())try{(n=(t=this.provider)==null?void 0:t.connection)!=null&&n.socket&&((a=(i=(r=this.provider)==null?void 0:r.connection)==null?void 0:i.socket)==null||a.on("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(c){this.logger.warn(c,c?.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const t=await this.core.crypto.signJWT(this.relayUrl);this.provider=new Hr(new AY(NH({sdkVersion:Xb,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:t,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(t,n){const{topic:r,message:i}=t;await this.messages.set(r,i,n)}async shouldIgnoreMessageEvent(t){const{topic:n,message:r}=t;if(!r||r.length===0)return this.logger.warn(`Ignoring invalid/empty message: ${r}`),!0;if(!await this.subscriber.isKnownTopic(n))return this.logger.warn(`Ignoring message for unknown topic ${n}`),!0;const i=this.messages.has(n,r);return i&&this.logger.warn(`Ignoring duplicate message: ${r}`),i}async onProviderPayload(t){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:t}),ww(t)){if(!t.method.endsWith(MY))return;const n=t.params,{topic:r,message:i,publishedAt:a,attestation:c}=n.data,u={topic:r,message:i,publishedAt:a,transportType:wt.relay,attestation:c};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(SR({type:"event",event:n.id},u)),this.events.emit(n.id,u),await this.acknowledgePayload(t),await this.onMessageEvent(u)}else Zp(t)&&this.events.emit(cn.message_ack,t)}async onMessageEvent(t){await this.shouldIgnoreMessageEvent(t)||(await this.recordMessageEvent(t,Vh.inbound),this.events.emit(cn.message,t))}async acknowledgePayload(t){const n=Yp(t.id,!0);await this.provider.connection.send(n)}unregisterProviderListeners(){this.provider.off(Nr.payload,this.onPayloadHandler),this.provider.off(Nr.connect,this.onConnectHandler),this.provider.off(Nr.disconnect,this.onDisconnectHandler),this.provider.off(Nr.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let t=await kA();vK(async n=>{t!==n&&(t=n,n?await this.transportOpen().catch(r=>this.logger.error(r,r?.message)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))}),this.core.heartbeat.on(Sa.pulse,async()=>{if(!this.transportExplicitlyClosed&&!this.connected&&SK())try{await this.confirmOnlineStateOrThrow(),await this.transportOpen()}catch(n){this.logger.warn(n,n?.message)}})}async onProviderDisconnect(){clearTimeout(this.pingTimeout),this.events.emit(cn.disconnect),this.connectionAttemptInProgress=!1,!this.reconnectInProgress&&(this.reconnectInProgress=!0,await this.subscriber.stop(),this.subscriber.hasAnyTopics&&(this.transportExplicitlyClosed||(this.reconnectTimeout=setTimeout(async()=>{await this.transportOpen().catch(t=>this.logger.error(t,t?.message)),this.reconnectTimeout=void 0,this.reconnectInProgress=!1},ve.toMiliseconds(LY)))))}isInitialized(){if(!this.initialized){const{message:t}=be("NOT_INITIALIZED",this.name);throw new Error(t)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectPromise){await this.connectPromise;return}await this.connect()}}}function cQ(e,t){return e===t||Number.isNaN(e)&&Number.isNaN(t)}function _R(e){return Object.getOwnPropertySymbols(e).filter(t=>Object.prototype.propertyIsEnumerable.call(e,t))}function xR(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const lQ="[object RegExp]",uQ="[object String]",fQ="[object Number]",dQ="[object Boolean]",AR="[object Arguments]",hQ="[object Symbol]",pQ="[object Date]",gQ="[object Map]",mQ="[object Set]",yQ="[object Array]",bQ="[object Function]",vQ="[object ArrayBuffer]",$0="[object Object]",wQ="[object Error]",EQ="[object DataView]",SQ="[object Uint8Array]",_Q="[object Uint8ClampedArray]",xQ="[object Uint16Array]",AQ="[object Uint32Array]",RQ="[object BigUint64Array]",OQ="[object Int8Array]",TQ="[object Int16Array]",DQ="[object Int32Array]",CQ="[object BigInt64Array]",IQ="[object Float32Array]",NQ="[object Float64Array]";function $Q(){}function RR(e){if(!e||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);return t===null||t===Object.prototype||Object.getPrototypeOf(t)===null?Object.prototype.toString.call(e)==="[object Object]":!1}function UQ(e,t,n){return Mu(e,t,void 0,void 0,void 0,void 0,n)}function Mu(e,t,n,r,i,a,c){const u=c(e,t,n,r,i,a);if(u!==void 0)return u;if(typeof e==typeof t)switch(typeof e){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return e===t;case"number":return e===t||Object.is(e,t);case"function":return e===t;case"object":return Xu(e,t,a,c)}return Xu(e,t,a,c)}function Xu(e,t,n,r){if(Object.is(e,t))return!0;let i=xR(e),a=xR(t);if(i===AR&&(i=$0),a===AR&&(a=$0),i!==a)return!1;switch(i){case uQ:return e.toString()===t.toString();case fQ:{const f=e.valueOf(),d=t.valueOf();return cQ(f,d)}case dQ:case pQ:case hQ:return Object.is(e.valueOf(),t.valueOf());case lQ:return e.source===t.source&&e.flags===t.flags;case bQ:return e===t}n=n??new Map;const c=n.get(e),u=n.get(t);if(c!=null&&u!=null)return c===t;n.set(e,t),n.set(t,e);try{switch(i){case gQ:{if(e.size!==t.size)return!1;for(const[f,d]of e.entries())if(!t.has(f)||!Mu(d,t.get(f),f,e,t,n,r))return!1;return!0}case mQ:{if(e.size!==t.size)return!1;const f=Array.from(e.values()),d=Array.from(t.values());for(let p=0;p<f.length;p++){const g=f[p],y=d.findIndex(b=>Mu(g,b,void 0,e,t,n,r));if(y===-1)return!1;d.splice(y,1)}return!0}case yQ:case SQ:case _Q:case xQ:case AQ:case RQ:case OQ:case TQ:case DQ:case CQ:case IQ:case NQ:{if(typeof Buffer<"u"&&Buffer.isBuffer(e)!==Buffer.isBuffer(t)||e.length!==t.length)return!1;for(let f=0;f<e.length;f++)if(!Mu(e[f],t[f],f,e,t,n,r))return!1;return!0}case vQ:return e.byteLength!==t.byteLength?!1:Xu(new Uint8Array(e),new Uint8Array(t),n,r);case EQ:return e.byteLength!==t.byteLength||e.byteOffset!==t.byteOffset?!1:Xu(new Uint8Array(e),new Uint8Array(t),n,r);case wQ:return e.name===t.name&&e.message===t.message;case $0:{if(!(Xu(e.constructor,t.constructor,n,r)||RR(e)&&RR(t)))return!1;const f=[...Object.keys(e),..._R(e)],d=[...Object.keys(t),..._R(t)];if(f.length!==d.length)return!1;for(let p=0;p<f.length;p++){const g=f[p],y=e[g];if(!Object.hasOwn(t,g))return!1;const b=t[g];if(!Mu(y,b,g,e,t,n,r))return!1}return!0}default:return!1}}finally{n.delete(e),n.delete(t)}}function BQ(e,t){return UQ(e,t,$Q)}var PQ=Object.defineProperty,OR=Object.getOwnPropertySymbols,kQ=Object.prototype.hasOwnProperty,MQ=Object.prototype.propertyIsEnumerable,rv=(e,t,n)=>t in e?PQ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,TR=(e,t)=>{for(var n in t||(t={}))kQ.call(t,n)&&rv(e,n,t[n]);if(OR)for(var n of OR(t))MQ.call(t,n)&&rv(e,n,t[n]);return e},Fn=(e,t,n)=>rv(e,typeof t!="symbol"?t+"":t,n);class xa extends KW{constructor(t,n,r,i=Ni,a=void 0){super(t,n,r,i),this.core=t,this.logger=n,this.name=r,Fn(this,"map",new Map),Fn(this,"version",jY),Fn(this,"cached",[]),Fn(this,"initialized",!1),Fn(this,"getKey"),Fn(this,"storagePrefix",Ni),Fn(this,"recentlyDeleted",[]),Fn(this,"recentlyDeletedLimit",200),Fn(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(c=>{this.getKey&&c!==null&&!yn(c)?this.map.set(this.getKey(c),c):XG(c)?this.map.set(c.id,c):ZG(c)&&this.map.set(c.topic,c)}),this.cached=[],this.initialized=!0)}),Fn(this,"set",async(c,u)=>{this.isInitialized(),this.map.has(c)?await this.update(c,u):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:c,value:u}),this.map.set(c,u),await this.persist())}),Fn(this,"get",c=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:c}),this.getData(c))),Fn(this,"getAll",c=>(this.isInitialized(),c?this.values.filter(u=>Object.keys(c).every(f=>BQ(u[f],c[f]))):this.values)),Fn(this,"update",async(c,u)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:c,update:u});const f=TR(TR({},this.getData(c)),u);this.map.set(c,f),await this.persist()}),Fn(this,"delete",async(c,u)=>{this.isInitialized(),this.map.has(c)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:c,reason:u}),this.map.delete(c),this.addToRecentlyDeleted(c),await this.persist())}),this.logger=kn(n,this.name),this.storagePrefix=i,this.getKey=a}get context(){return ir(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(t){this.recentlyDeleted.push(t),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(t){await this.core.storage.setItem(this.storageKey,t)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(t){const n=this.map.get(t);if(!n){if(this.recentlyDeleted.includes(t)){const{message:i}=be("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${t}`);throw this.logger.error(i),new Error(i)}const{message:r}=be("NO_MATCHING_KEY",`${this.name}: ${t}`);throw this.logger.error(r),new Error(r)}return n}async persist(){await this.setDataStore(this.values)}async restore(){try{const t=await this.getDataStore();if(typeof t>"u"||!t.length)return;if(this.map.size){const{message:n}=be("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=t,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(t){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(t)}}isInitialized(){if(!this.initialized){const{message:t}=be("NOT_INITIALIZED",this.name);throw new Error(t)}}}var LQ=Object.defineProperty,jQ=(e,t,n)=>t in e?LQ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Le=(e,t,n)=>jQ(e,typeof t!="symbol"?t+"":t,n);class zQ{constructor(t,n){this.core=t,this.logger=n,Le(this,"name",FY),Le(this,"version",VY),Le(this,"events",new wp),Le(this,"pairings"),Le(this,"initialized",!1),Le(this,"storagePrefix",Ni),Le(this,"ignoredPayloadTypes",[ds]),Le(this,"registeredMethods",[]),Le(this,"init",async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))}),Le(this,"register",({methods:r})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...r])]}),Le(this,"create",async r=>{this.isInitialized();const i=Fb(),a=await this.core.crypto.setSymKey(i),c=Yt(ve.FIVE_MINUTES),u={protocol:pI},f={topic:a,expiry:c,relay:u,active:!1,methods:r?.methods},d=TA({protocol:this.core.protocol,version:this.core.version,topic:a,symKey:i,relay:u,expiryTimestamp:c,methods:r?.methods});return this.events.emit(Xo.create,f),this.core.expirer.set(a,c),await this.pairings.set(a,f),await this.core.relayer.subscribe(a,{transportType:r?.transportType}),{topic:a,uri:d}}),Le(this,"pair",async r=>{this.isInitialized();const i=this.core.eventClient.createEvent({properties:{topic:r?.uri,trace:[bi.pairing_started]}});this.isValidPair(r,i);const{topic:a,symKey:c,relay:u,expiryTimestamp:f,methods:d}=OA(r.uri);i.props.properties.topic=a,i.addTrace(bi.pairing_uri_validation_success),i.addTrace(bi.pairing_uri_not_expired);let p;if(this.pairings.keys.includes(a)){if(p=this.pairings.get(a),i.addTrace(bi.existing_pairing),p.active)throw i.setError(is.active_pairing_already_exists),new Error(`Pairing already exists: ${a}. Please try again with a new connection URI.`);i.addTrace(bi.pairing_not_expired)}const g=f||Yt(ve.FIVE_MINUTES),y={topic:a,relay:u,expiry:g,active:!1,methods:d};this.core.expirer.set(a,g),await this.pairings.set(a,y),i.addTrace(bi.store_new_pairing),r.activatePairing&&await this.activate({topic:a}),this.events.emit(Xo.create,y),i.addTrace(bi.emit_inactive_pairing),this.core.crypto.keychain.has(a)||await this.core.crypto.setSymKey(c,a),i.addTrace(bi.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{i.setError(is.no_internet_connection)}try{await this.core.relayer.subscribe(a,{relay:u})}catch(b){throw i.setError(is.subscribe_pairing_topic_failure),b}return i.addTrace(bi.subscribe_pairing_topic_success),y}),Le(this,"activate",async({topic:r})=>{this.isInitialized();const i=Yt(ve.FIVE_MINUTES);this.core.expirer.set(r,i),await this.pairings.update(r,{active:!0,expiry:i})}),Le(this,"ping",async r=>{this.isInitialized(),await this.isValidPing(r),this.logger.warn("ping() is deprecated and will be removed in the next major release.");const{topic:i}=r;if(this.pairings.keys.includes(i)){const a=await this.sendRequest(i,"wc_pairingPing",{}),{done:c,resolve:u,reject:f}=Ko();this.events.once(Qe("pairing_ping",a),({error:d})=>{d?f(d):u()}),await c()}}),Le(this,"updateExpiry",async({topic:r,expiry:i})=>{this.isInitialized(),await this.pairings.update(r,{expiry:i})}),Le(this,"updateMetadata",async({topic:r,metadata:i})=>{this.isInitialized(),await this.pairings.update(r,{peerMetadata:i})}),Le(this,"getPairings",()=>(this.isInitialized(),this.pairings.values)),Le(this,"disconnect",async r=>{this.isInitialized(),await this.isValidDisconnect(r);const{topic:i}=r;this.pairings.keys.includes(i)&&(await this.sendRequest(i,"wc_pairingDelete",St("USER_DISCONNECTED")),await this.deletePairing(i))}),Le(this,"formatUriFromPairing",r=>{this.isInitialized();const{topic:i,relay:a,expiry:c,methods:u}=r,f=this.core.crypto.keychain.get(i);return TA({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:f,relay:a,expiryTimestamp:c,methods:u})}),Le(this,"sendRequest",async(r,i,a)=>{const c=co(i,a),u=await this.core.crypto.encode(r,c),f=Ru[i].req;return this.core.history.set(r,c),this.core.relayer.publish(r,u,f),c.id}),Le(this,"sendResult",async(r,i,a)=>{const c=Yp(r,a),u=await this.core.crypto.encode(i,c),f=(await this.core.history.get(i,r)).request.method,d=Ru[f].res;await this.core.relayer.publish(i,u,d),await this.core.history.resolve(c)}),Le(this,"sendError",async(r,i,a)=>{const c=Xp(r,a),u=await this.core.crypto.encode(i,c),f=(await this.core.history.get(i,r)).request.method,d=Ru[f]?Ru[f].res:Ru.unregistered_method.res;await this.core.relayer.publish(i,u,d),await this.core.history.resolve(c)}),Le(this,"deletePairing",async(r,i)=>{await this.core.relayer.unsubscribe(r),await Promise.all([this.pairings.delete(r,St("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(r),i?Promise.resolve():this.core.expirer.del(r)])}),Le(this,"cleanup",async()=>{const r=this.pairings.getAll().filter(i=>to(i.expiry));await Promise.all(r.map(i=>this.deletePairing(i.topic)))}),Le(this,"onRelayEventRequest",async r=>{const{topic:i,payload:a}=r;switch(a.method){case"wc_pairingPing":return await this.onPairingPingRequest(i,a);case"wc_pairingDelete":return await this.onPairingDeleteRequest(i,a);default:return await this.onUnknownRpcMethodRequest(i,a)}}),Le(this,"onRelayEventResponse",async r=>{const{topic:i,payload:a}=r,c=(await this.core.history.get(i,a.id)).request.method;switch(c){case"wc_pairingPing":return this.onPairingPingResponse(i,a);default:return this.onUnknownRpcMethodResponse(c)}}),Le(this,"onPairingPingRequest",async(r,i)=>{const{id:a}=i;try{this.isValidPing({topic:r}),await this.sendResult(a,r,!0),this.events.emit(Xo.ping,{id:a,topic:r})}catch(c){await this.sendError(a,r,c),this.logger.error(c)}}),Le(this,"onPairingPingResponse",(r,i)=>{const{id:a}=i;setTimeout(()=>{wi(i)?this.events.emit(Qe("pairing_ping",a),{}):Pr(i)&&this.events.emit(Qe("pairing_ping",a),{error:i.error})},500)}),Le(this,"onPairingDeleteRequest",async(r,i)=>{const{id:a}=i;try{this.isValidDisconnect({topic:r}),await this.deletePairing(r),this.events.emit(Xo.delete,{id:a,topic:r})}catch(c){await this.sendError(a,r,c),this.logger.error(c)}}),Le(this,"onUnknownRpcMethodRequest",async(r,i)=>{const{id:a,method:c}=i;try{if(this.registeredMethods.includes(c))return;const u=St("WC_METHOD_UNSUPPORTED",c);await this.sendError(a,r,u),this.logger.error(u)}catch(u){await this.sendError(a,r,u),this.logger.error(u)}}),Le(this,"onUnknownRpcMethodResponse",r=>{this.registeredMethods.includes(r)||this.logger.error(St("WC_METHOD_UNSUPPORTED",r))}),Le(this,"isValidPair",(r,i)=>{var a;if(!Kn(r)){const{message:u}=be("MISSING_OR_INVALID",`pair() params: ${r}`);throw i.setError(is.malformed_pairing_uri),new Error(u)}if(!YG(r.uri)){const{message:u}=be("MISSING_OR_INVALID",`pair() uri: ${r.uri}`);throw i.setError(is.malformed_pairing_uri),new Error(u)}const c=OA(r?.uri);if(!((a=c?.relay)!=null&&a.protocol)){const{message:u}=be("MISSING_OR_INVALID","pair() uri#relay-protocol");throw i.setError(is.malformed_pairing_uri),new Error(u)}if(!(c!=null&&c.symKey)){const{message:u}=be("MISSING_OR_INVALID","pair() uri#symKey");throw i.setError(is.malformed_pairing_uri),new Error(u)}if(c!=null&&c.expiryTimestamp&&ve.toMiliseconds(c?.expiryTimestamp)<Date.now()){i.setError(is.pairing_expired);const{message:u}=be("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(u)}}),Le(this,"isValidPing",async r=>{if(!Kn(r)){const{message:a}=be("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(a)}const{topic:i}=r;await this.isValidPairingTopic(i)}),Le(this,"isValidDisconnect",async r=>{if(!Kn(r)){const{message:a}=be("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(a)}const{topic:i}=r;await this.isValidPairingTopic(i)}),Le(this,"isValidPairingTopic",async r=>{if(!jt(r,!1)){const{message:i}=be("MISSING_OR_INVALID",`pairing topic should be a string: ${r}`);throw new Error(i)}if(!this.pairings.keys.includes(r)){const{message:i}=be("NO_MATCHING_KEY",`pairing topic doesn't exist: ${r}`);throw new Error(i)}if(to(this.pairings.get(r).expiry)){await this.deletePairing(r);const{message:i}=be("EXPIRED",`pairing topic: ${r}`);throw new Error(i)}}),this.core=t,this.logger=kn(n,this.name),this.pairings=new xa(this.core,this.logger,this.name,this.storagePrefix)}get context(){return ir(this.logger)}isInitialized(){if(!this.initialized){const{message:t}=be("NOT_INITIALIZED",this.name);throw new Error(t)}}registerRelayerEvents(){this.core.relayer.on(cn.message,async t=>{const{topic:n,message:r,transportType:i}=t;if(this.pairings.keys.includes(n)&&i!==wt.link_mode&&!this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(r)))try{const a=await this.core.crypto.decode(n,r);ww(a)?(this.core.history.set(n,a),await this.onRelayEventRequest({topic:n,payload:a})):Zp(a)&&(await this.core.history.resolve(a),await this.onRelayEventResponse({topic:n,payload:a}),this.core.history.delete(n,a.id)),await this.core.relayer.messages.ack(n,r)}catch(a){this.logger.error(a)}})}registerExpirerEvents(){this.core.expirer.on(Br.expired,async t=>{const{topic:n}=eC(t.target);n&&this.pairings.keys.includes(n)&&(await this.deletePairing(n,!0),this.events.emit(Xo.expire,{topic:n}))})}}var qQ=Object.defineProperty,HQ=(e,t,n)=>t in e?qQ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,gn=(e,t,n)=>HQ(e,typeof t!="symbol"?t+"":t,n);class FQ extends HW{constructor(t,n){super(t,n),this.core=t,this.logger=n,gn(this,"records",new Map),gn(this,"events",new tr.EventEmitter),gn(this,"name",GY),gn(this,"version",KY),gn(this,"cached",[]),gn(this,"initialized",!1),gn(this,"storagePrefix",Ni),gn(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.records.set(r.id,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),gn(this,"set",(r,i,a)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:r,request:i,chainId:a}),this.records.has(i.id))return;const c={id:i.id,topic:r,request:{method:i.method,params:i.params||null},chainId:a,expiry:Yt(ve.THIRTY_DAYS)};this.records.set(c.id,c),this.persist(),this.events.emit(Xr.created,c)}),gn(this,"resolve",async r=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:r}),!this.records.has(r.id))return;const i=await this.getRecord(r.id);typeof i.response>"u"&&(i.response=Pr(r)?{error:r.error}:{result:r.result},this.records.set(i.id,i),this.persist(),this.events.emit(Xr.updated,i))}),gn(this,"get",async(r,i)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:r,id:i}),await this.getRecord(i))),gn(this,"delete",(r,i)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:i}),this.values.forEach(a=>{if(a.topic===r){if(typeof i<"u"&&a.id!==i)return;this.records.delete(a.id),this.events.emit(Xr.deleted,a)}}),this.persist()}),gn(this,"exists",async(r,i)=>(this.isInitialized(),this.records.has(i)?(await this.getRecord(i)).topic===r:!1)),gn(this,"on",(r,i)=>{this.events.on(r,i)}),gn(this,"once",(r,i)=>{this.events.once(r,i)}),gn(this,"off",(r,i)=>{this.events.off(r,i)}),gn(this,"removeListener",(r,i)=>{this.events.removeListener(r,i)}),this.logger=kn(n,this.name)}get context(){return ir(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const t=[];return this.values.forEach(n=>{if(typeof n.response<"u")return;const r={topic:n.topic,request:co(n.request.method,n.request.params,n.id),chainId:n.chainId};return t.push(r)}),t}async setJsonRpcRecords(t){await this.core.storage.setItem(this.storageKey,t)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(t){this.isInitialized();const n=this.records.get(t);if(!n){const{message:r}=be("NO_MATCHING_KEY",`${this.name}: ${t}`);throw new Error(r)}return n}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(Xr.sync)}async restore(){try{const t=await this.getJsonRpcRecords();if(typeof t>"u"||!t.length)return;if(this.records.size){const{message:n}=be("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=t,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(t){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(t)}}registerEventListeners(){this.events.on(Xr.created,t=>{const n=Xr.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:t})}),this.events.on(Xr.updated,t=>{const n=Xr.updated;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:t})}),this.events.on(Xr.deleted,t=>{const n=Xr.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:t})}),this.core.heartbeat.on(Sa.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let t=!1;this.records.forEach(n=>{ve.toMiliseconds(n.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${n.id}`),this.records.delete(n.id),this.events.emit(Xr.deleted,n,!1),t=!0)}),t&&this.persist()}catch(t){this.logger.warn(t)}}isInitialized(){if(!this.initialized){const{message:t}=be("NOT_INITIALIZED",this.name);throw new Error(t)}}}var VQ=Object.defineProperty,GQ=(e,t,n)=>t in e?VQ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Dn=(e,t,n)=>GQ(e,typeof t!="symbol"?t+"":t,n);class KQ extends YW{constructor(t,n){super(t,n),this.core=t,this.logger=n,Dn(this,"expirations",new Map),Dn(this,"events",new tr.EventEmitter),Dn(this,"name",WY),Dn(this,"version",YY),Dn(this,"cached",[]),Dn(this,"initialized",!1),Dn(this,"storagePrefix",Ni),Dn(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.expirations.set(r.target,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),Dn(this,"has",r=>{try{const i=this.formatTarget(r);return typeof this.getExpiration(i)<"u"}catch{return!1}}),Dn(this,"set",(r,i)=>{this.isInitialized();const a=this.formatTarget(r),c={target:a,expiry:i};this.expirations.set(a,c),this.checkExpiry(a,c),this.events.emit(Br.created,{target:a,expiration:c})}),Dn(this,"get",r=>{this.isInitialized();const i=this.formatTarget(r);return this.getExpiration(i)}),Dn(this,"del",r=>{if(this.isInitialized(),this.has(r)){const i=this.formatTarget(r),a=this.getExpiration(i);this.expirations.delete(i),this.events.emit(Br.deleted,{target:i,expiration:a})}}),Dn(this,"on",(r,i)=>{this.events.on(r,i)}),Dn(this,"once",(r,i)=>{this.events.once(r,i)}),Dn(this,"off",(r,i)=>{this.events.off(r,i)}),Dn(this,"removeListener",(r,i)=>{this.events.removeListener(r,i)}),this.logger=kn(n,this.name)}get context(){return ir(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(t){if(typeof t=="string")return $H(t);if(typeof t=="number")return UH(t);const{message:n}=be("UNKNOWN_TYPE",`Target type: ${typeof t}`);throw new Error(n)}async setExpirations(t){await this.core.storage.setItem(this.storageKey,t)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(Br.sync)}async restore(){try{const t=await this.getExpirations();if(typeof t>"u"||!t.length)return;if(this.expirations.size){const{message:n}=be("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=t,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(t){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(t)}}getExpiration(t){const n=this.expirations.get(t);if(!n){const{message:r}=be("NO_MATCHING_KEY",`${this.name}: ${t}`);throw this.logger.warn(r),new Error(r)}return n}checkExpiry(t,n){const{expiry:r}=n;ve.toMiliseconds(r)-Date.now()<=0&&this.expire(t,n)}expire(t,n){this.expirations.delete(t),this.events.emit(Br.expired,{target:t,expiration:n})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((t,n)=>this.checkExpiry(n,t))}registerEventListeners(){this.core.heartbeat.on(Sa.pulse,()=>this.checkExpirations()),this.events.on(Br.created,t=>{const n=Br.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:t}),this.persist()}),this.events.on(Br.expired,t=>{const n=Br.expired;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:t}),this.persist()}),this.events.on(Br.deleted,t=>{const n=Br.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:t}),this.persist()})}isInitialized(){if(!this.initialized){const{message:t}=be("NOT_INITIALIZED",this.name);throw new Error(t)}}}var WQ=Object.defineProperty,YQ=(e,t,n)=>t in e?WQ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Lt=(e,t,n)=>YQ(e,typeof t!="symbol"?t+"":t,n);class XQ extends XW{constructor(t,n,r){super(t,n,r),this.core=t,this.logger=n,this.store=r,Lt(this,"name",XY),Lt(this,"abortController"),Lt(this,"isDevEnv"),Lt(this,"verifyUrlV3",QY),Lt(this,"storagePrefix",Ni),Lt(this,"version",hI),Lt(this,"publicKey"),Lt(this,"fetchPromise"),Lt(this,"init",async()=>{var i;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&ve.toMiliseconds((i=this.publicKey)==null?void 0:i.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))}),Lt(this,"register",async i=>{if(!cl()||this.isDevEnv)return;const a=window.location.origin,{id:c,decryptedId:u}=i,f=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${a}&id=${c}&decryptedId=${u}`;try{const d=ms.getDocument(),p=this.startAbortTimer(ve.ONE_SECOND*5),g=await new Promise((y,b)=>{const v=()=>{window.removeEventListener("message",S),d.body.removeChild(E),b("attestation aborted")};this.abortController.signal.addEventListener("abort",v);const E=d.createElement("iframe");E.src=f,E.style.display="none",E.addEventListener("error",v,{signal:this.abortController.signal});const S=x=>{if(x.data&&typeof x.data=="string")try{const T=JSON.parse(x.data);if(T.type==="verify_attestation"){if(Ib(T.attestation).payload.id!==c)return;clearInterval(p),d.body.removeChild(E),this.abortController.signal.removeEventListener("abort",v),window.removeEventListener("message",S),y(T.attestation===null?"":T.attestation)}}catch(T){this.logger.warn(T)}};d.body.appendChild(E),window.addEventListener("message",S,{signal:this.abortController.signal})});return this.logger.debug("jwt attestation",g),g}catch(d){this.logger.warn(d)}return""}),Lt(this,"resolve",async i=>{if(this.isDevEnv)return"";const{attestationId:a,hash:c,encryptedId:u}=i;if(a===""){this.logger.debug("resolve: attestationId is empty, skipping");return}if(a){if(Ib(a).payload.id!==u)return;const d=await this.isValidJwtAttestation(a);if(d){if(!d.isVerified){this.logger.warn("resolve: jwt attestation: origin url not verified");return}return d}}if(!c)return;const f=this.getVerifyUrl(i?.verifyUrl);return this.fetchAttestation(c,f)}),Lt(this,"fetchAttestation",async(i,a)=>{this.logger.debug(`resolving attestation: ${i} from url: ${a}`);const c=this.startAbortTimer(ve.ONE_SECOND*5),u=await fetch(`${a}/attestation/${i}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(c),u.status===200?await u.json():void 0}),Lt(this,"getVerifyUrl",i=>{let a=i||Yu;return JY.includes(a)||(this.logger.info(`verify url: ${a}, not included in trusted list, assigning default: ${Yu}`),a=Yu),a}),Lt(this,"fetchPublicKey",async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const i=this.startAbortTimer(ve.FIVE_SECONDS),a=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(i),await a.json()}catch(i){this.logger.warn(i)}}),Lt(this,"persistPublicKey",async i=>{this.logger.debug("persisting public key to local storage",i),await this.store.setItem(this.storeKey,i),this.publicKey=i}),Lt(this,"removePublicKey",async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0}),Lt(this,"isValidJwtAttestation",async i=>{const a=await this.getPublicKey();try{if(a)return this.validateAttestation(i,a)}catch(u){this.logger.error(u),this.logger.warn("error validating attestation")}const c=await this.fetchAndPersistPublicKey();try{if(c)return this.validateAttestation(i,c)}catch(u){this.logger.error(u),this.logger.warn("error validating attestation")}}),Lt(this,"getPublicKey",async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey()),Lt(this,"fetchAndPersistPublicKey",async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async a=>{const c=await this.fetchPublicKey();c&&(await this.persistPublicKey(c),a(c))});const i=await this.fetchPromise;return this.fetchPromise=void 0,i}),Lt(this,"validateAttestation",(i,a)=>{const c=TG(i,a.publicKey),u={hasExpired:ve.toMiliseconds(c.exp)<Date.now(),payload:c};if(u.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:u.payload.origin,isScam:u.payload.isScam,isVerified:u.payload.isVerified}}),this.logger=kn(n,this.name),this.abortController=new AbortController,this.isDevEnv=ew(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return ir(this.logger)}startAbortTimer(t){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),ve.toMiliseconds(t))}}var ZQ=Object.defineProperty,QQ=(e,t,n)=>t in e?ZQ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,DR=(e,t,n)=>QQ(e,typeof t!="symbol"?t+"":t,n);class JQ extends ZW{constructor(t,n){super(t,n),this.projectId=t,this.logger=n,DR(this,"context",eX),DR(this,"registerDeviceToken",async r=>{const{clientId:i,token:a,notificationType:c,enableEncrypted:u=!1}=r,f=`${tX}/${this.projectId}/clients`;await fetch(f,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:i,type:c,token:a,always_raw:u})})}),this.logger=kn(n,this.context)}}var eJ=Object.defineProperty,CR=Object.getOwnPropertySymbols,tJ=Object.prototype.hasOwnProperty,nJ=Object.prototype.propertyIsEnumerable,iv=(e,t,n)=>t in e?eJ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Du=(e,t)=>{for(var n in t||(t={}))tJ.call(t,n)&&iv(e,n,t[n]);if(CR)for(var n of CR(t))nJ.call(t,n)&&iv(e,n,t[n]);return e},sn=(e,t,n)=>iv(e,typeof t!="symbol"?t+"":t,n);class rJ extends QW{constructor(t,n,r=!0){super(t,n,r),this.core=t,this.logger=n,sn(this,"context",rX),sn(this,"storagePrefix",Ni),sn(this,"storageVersion",nX),sn(this,"events",new Map),sn(this,"shouldPersist",!1),sn(this,"init",async()=>{if(!ew())try{const i={eventId:Yx(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:QD(this.core.relayer.protocol,this.core.relayer.version,Xb)}}};await this.sendEvent([i])}catch(i){this.logger.warn(i)}}),sn(this,"createEvent",i=>{const{event:a="ERROR",type:c="",properties:{topic:u,trace:f}}=i,d=Yx(),p=this.core.projectId||"",g=Date.now(),y=Du({eventId:d,timestamp:g,props:{event:a,type:c,properties:{topic:u,trace:f}},bundleId:p,domain:this.getAppDomain()},this.setMethods(d));return this.telemetryEnabled&&(this.events.set(d,y),this.shouldPersist=!0),y}),sn(this,"getEvent",i=>{const{eventId:a,topic:c}=i;if(a)return this.events.get(a);const u=Array.from(this.events.values()).find(f=>f.props.properties.topic===c);if(u)return Du(Du({},u),this.setMethods(u.eventId))}),sn(this,"deleteEvent",i=>{const{eventId:a}=i;this.events.delete(a),this.shouldPersist=!0}),sn(this,"setEventListeners",()=>{this.core.heartbeat.on(Sa.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(i=>{ve.fromMiliseconds(Date.now())-ve.fromMiliseconds(i.timestamp)>iX&&(this.events.delete(i.eventId),this.shouldPersist=!0)})})}),sn(this,"setMethods",i=>({addTrace:a=>this.addTrace(i,a),setError:a=>this.setError(i,a)})),sn(this,"addTrace",(i,a)=>{const c=this.events.get(i);c&&(c.props.properties.trace.push(a),this.events.set(i,c),this.shouldPersist=!0)}),sn(this,"setError",(i,a)=>{const c=this.events.get(i);c&&(c.props.type=a,c.timestamp=Date.now(),this.events.set(i,c),this.shouldPersist=!0)}),sn(this,"persist",async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1}),sn(this,"restore",async()=>{try{const i=await this.core.storage.getItem(this.storageKey)||[];if(!i.length)return;i.forEach(a=>{this.events.set(a.eventId,Du(Du({},a),this.setMethods(a.eventId)))})}catch(i){this.logger.warn(i)}}),sn(this,"submit",async()=>{if(!this.telemetryEnabled||this.events.size===0)return;const i=[];for(const[a,c]of this.events)c.props.type&&i.push(c);if(i.length!==0)try{if((await this.sendEvent(i)).ok)for(const a of i)this.events.delete(a.eventId),this.shouldPersist=!0}catch(a){this.logger.warn(a)}}),sn(this,"sendEvent",async i=>{const a=this.getAppDomain()?"":"&sp=desktop";return await fetch(`${sX}?projectId=${this.core.projectId}&st=events_sdk&sv=js-${Xb}${a}`,{method:"POST",body:JSON.stringify(i)})}),sn(this,"getAppDomain",()=>ZD().url),this.logger=kn(n,this.context),this.telemetryEnabled=r,r?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}var iJ=Object.defineProperty,IR=Object.getOwnPropertySymbols,sJ=Object.prototype.hasOwnProperty,oJ=Object.prototype.propertyIsEnumerable,sv=(e,t,n)=>t in e?iJ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,NR=(e,t)=>{for(var n in t||(t={}))sJ.call(t,n)&&sv(e,n,t[n]);if(IR)for(var n of IR(t))oJ.call(t,n)&&sv(e,n,t[n]);return e},mt=(e,t,n)=>sv(e,typeof t!="symbol"?t+"":t,n);let aJ=class TI extends LW{constructor(t){var n;super(t),mt(this,"protocol",dI),mt(this,"version",hI),mt(this,"name",Yb),mt(this,"relayUrl"),mt(this,"projectId"),mt(this,"customStoragePrefix"),mt(this,"events",new tr.EventEmitter),mt(this,"logger"),mt(this,"heartbeat"),mt(this,"relayer"),mt(this,"crypto"),mt(this,"storage"),mt(this,"history"),mt(this,"expirer"),mt(this,"pairing"),mt(this,"verify"),mt(this,"echoClient"),mt(this,"linkModeSupportedApps"),mt(this,"eventClient"),mt(this,"initialized",!1),mt(this,"logChunkController"),mt(this,"on",(u,f)=>this.events.on(u,f)),mt(this,"once",(u,f)=>this.events.once(u,f)),mt(this,"off",(u,f)=>this.events.off(u,f)),mt(this,"removeListener",(u,f)=>this.events.removeListener(u,f)),mt(this,"dispatchEnvelope",({topic:u,message:f,sessionExists:d})=>{if(!u||!f)return;const p={topic:u,message:f,publishedAt:Date.now(),transportType:wt.link_mode};this.relayer.onLinkMessageEvent(p,{sessionExists:d})});const r=this.getGlobalCore(t?.customStoragePrefix);if(r)try{return this.customStoragePrefix=r.customStoragePrefix,this.logger=r.logger,this.heartbeat=r.heartbeat,this.crypto=r.crypto,this.history=r.history,this.expirer=r.expirer,this.storage=r.storage,this.relayer=r.relayer,this.pairing=r.pairing,this.verify=r.verify,this.echoClient=r.echoClient,this.linkModeSupportedApps=r.linkModeSupportedApps,this.eventClient=r.eventClient,this.initialized=r.initialized,this.logChunkController=r.logChunkController,r}catch(u){console.warn("Failed to copy global core",u)}this.projectId=t?.projectId,this.relayUrl=t?.relayUrl||gI,this.customStoragePrefix=t!=null&&t.customStoragePrefix?`:${t.customStoragePrefix}`:"";const i=Wp({level:typeof t?.logger=="string"&&t.logger?t.logger:OY.logger,name:Yb}),{logger:a,chunkLoggerController:c}=PW({opts:i,maxSizeInBytes:t?.maxLogBlobSizeInBytes,loggerOverride:t?.logger});this.logChunkController=c,(n=this.logChunkController)!=null&&n.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var u,f;(u=this.logChunkController)!=null&&u.downloadLogsBlobInBrowser&&((f=this.logChunkController)==null||f.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=kn(a,this.name),this.heartbeat=new LK,this.crypto=new UZ(this,this.logger,t?.keychain),this.history=new FQ(this,this.logger),this.expirer=new KQ(this,this.logger),this.storage=t!=null&&t.storage?t.storage:new vW(NR(NR({},TY),t?.storageOptions)),this.relayer=new aQ({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new zQ(this,this.logger),this.verify=new XQ(this,this.logger,this.storage),this.echoClient=new JQ(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new rJ(this,this.logger,t?.telemetryEnabled),this.setGlobalCore(this)}static async init(t){const n=new TI(t);await n.initialize();const r=await n.crypto.getClientId();return await n.storage.setItem(zY,r),n}get context(){return ir(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var t;return(t=this.logChunkController)==null?void 0:t.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(t){this.linkModeSupportedApps.includes(t)||(this.linkModeSupportedApps.push(t),await this.storage.setItem(fR,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem(fR)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(t){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,t),this.logger.error(t.message),t}}getGlobalCore(t=""){try{if(this.isGlobalCoreDisabled())return;const n=`_walletConnectCore_${t}`,r=`${n}_count`;return globalThis[r]=(globalThis[r]||0)+1,globalThis[r]>1&&console.warn(`WalletConnect Core is already initialized. This is probably a mistake and can lead to unexpected behavior. Init() was called ${globalThis[r]} times.`),globalThis[n]}catch(n){console.warn("Failed to get global WalletConnect core",n);return}}setGlobalCore(t){var n;try{if(this.isGlobalCoreDisabled())return;const r=`_walletConnectCore_${((n=t.opts)==null?void 0:n.customStoragePrefix)||""}`;globalThis[r]=t}catch(r){console.warn("Failed to set global WalletConnect core",r)}}isGlobalCoreDisabled(){try{return typeof process<"u"&&RY.DISABLE_GLOBAL_CORE==="true"}catch{return!0}}};const cJ=aJ,DI="wc",CI=2,II="client",Ew=`${DI}@${CI}:${II}:`,U0={name:II,logger:"error"},$R="WALLETCONNECT_DEEPLINK_CHOICE",lJ="proposal",UR="Proposal expired",uJ="session",Ec=ve.SEVEN_DAYS,fJ="engine",on={wc_sessionPropose:{req:{ttl:ve.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:ve.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:ve.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:ve.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:ve.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:ve.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:ve.ONE_DAY,prompt:!1,tag:1104},res:{ttl:ve.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:ve.ONE_DAY,prompt:!1,tag:1106},res:{ttl:ve.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:ve.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:ve.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:ve.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:ve.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:ve.ONE_DAY,prompt:!1,tag:1112},res:{ttl:ve.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:ve.ONE_DAY,prompt:!1,tag:1114},res:{ttl:ve.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:ve.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:ve.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:ve.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:ve.FIVE_MINUTES,prompt:!1,tag:1119}}},B0={min:ve.FIVE_MINUTES,max:ve.SEVEN_DAYS},mi={idle:"IDLE",active:"ACTIVE"},dJ={eth_sendTransaction:{key:""},eth_sendRawTransaction:{key:""},wallet_sendCalls:{key:""},solana_signTransaction:{key:"signature"},solana_signAllTransactions:{key:"transactions"},solana_signAndSendTransaction:{key:"signature"},sui_signAndExecuteTransaction:{key:"digest"},sui_signTransaction:{key:""},hedera_signAndExecuteTransaction:{key:"transactionId"},hedera_executeTransaction:{key:"transactionId"},near_signTransaction:{key:""},near_signTransactions:{key:""},tron_signTransaction:{key:"txID"},xrpl_signTransaction:{key:""},xrpl_signTransactionFor:{key:""},algo_signTxn:{key:""},sendTransfer:{key:"txid"},stacks_stxTransfer:{key:"txId"},polkadot_signTransaction:{key:""},cosmos_signDirect:{key:""}},hJ="request",pJ=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],gJ="wc",mJ="auth",yJ="authKeys",bJ="pairingTopics",vJ="requests",Jp=`${gJ}@${1.5}:${mJ}:`,Gh=`${Jp}:PUB_KEY`;var wJ=Object.defineProperty,EJ=Object.defineProperties,SJ=Object.getOwnPropertyDescriptors,BR=Object.getOwnPropertySymbols,_J=Object.prototype.hasOwnProperty,xJ=Object.prototype.propertyIsEnumerable,ov=(e,t,n)=>t in e?wJ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,vt=(e,t)=>{for(var n in t||(t={}))_J.call(t,n)&&ov(e,n,t[n]);if(BR)for(var n of BR(t))xJ.call(t,n)&&ov(e,n,t[n]);return e},Vn=(e,t)=>EJ(e,SJ(t)),ye=(e,t,n)=>ov(e,typeof t!="symbol"?t+"":t,n);class AJ extends nY{constructor(t){super(t),ye(this,"name",fJ),ye(this,"events",new wp),ye(this,"initialized",!1),ye(this,"requestQueue",{state:mi.idle,queue:[]}),ye(this,"sessionRequestQueue",{state:mi.idle,queue:[]}),ye(this,"emittedSessionRequests",new HH({limit:500})),ye(this,"requestQueueDelay",ve.ONE_SECOND),ye(this,"expectedPairingMethodMap",new Map),ye(this,"recentlyDeletedMap",new Map),ye(this,"recentlyDeletedLimit",200),ye(this,"relayMessageCache",[]),ye(this,"pendingSessions",new Map),ye(this,"init",async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(on)}),this.initialized=!0,setTimeout(async()=>{await this.processPendingMessageEvents(),this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},ve.toMiliseconds(this.requestQueueDelay)))}),ye(this,"connect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();const r=Vn(vt({},n),{requiredNamespaces:n.requiredNamespaces||{},optionalNamespaces:n.optionalNamespaces||{}});await this.isValidConnect(r),r.optionalNamespaces=FG(r.requiredNamespaces,r.optionalNamespaces),r.requiredNamespaces={};const{pairingTopic:i,requiredNamespaces:a,optionalNamespaces:c,sessionProperties:u,scopedProperties:f,relays:d}=r;let p=i,g,y=!1;try{if(p){const I=this.client.core.pairing.pairings.get(p);this.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),y=I.active}}catch(I){throw this.client.logger.error(`connect() -> pairing.get(${p}) failed`),I}if(!p||!y){const{topic:I,uri:j}=await this.client.core.pairing.create();p=I,g=j}if(!p){const{message:I}=be("NO_MATCHING_KEY",`connect() pairing topic: ${p}`);throw new Error(I)}const b=await this.client.core.crypto.generateKeyPair(),v=on.wc_sessionPropose.req.ttl||ve.FIVE_MINUTES,E=Yt(v),S=Vn(vt(vt({requiredNamespaces:a,optionalNamespaces:c,relays:d??[{protocol:pI}],proposer:{publicKey:b,metadata:this.client.metadata},expiryTimestamp:E,pairingTopic:p},u&&{sessionProperties:u}),f&&{scopedProperties:f}),{id:vi()}),x=Qe("session_connect",S.id),{reject:T,resolve:O,done:U}=Ko(v,UR),N=({id:I})=>{I===S.id&&(this.client.events.off("proposal_expire",N),this.pendingSessions.delete(S.id),this.events.emit(x,{error:{message:UR,code:0}}))};return this.client.events.on("proposal_expire",N),this.events.once(x,({error:I,session:j})=>{this.client.events.off("proposal_expire",N),I?T(I):j&&O(j)}),await this.sendRequest({topic:p,method:"wc_sessionPropose",params:S,throwOnFailedPublish:!0,clientRpcId:S.id}),await this.setProposal(S.id,S),{uri:g,approval:U}}),ye(this,"pair",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(n)}catch(r){throw this.client.logger.error("pair() failed"),r}}),ye(this,"approve",async n=>{var r,i,a;const c=this.client.core.eventClient.createEvent({properties:{topic:(r=n?.id)==null?void 0:r.toString(),trace:[Zr.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(P){throw c.setError(jo.no_internet_connection),P}try{await this.isValidProposalId(n?.id)}catch(P){throw this.client.logger.error(`approve() -> proposal.get(${n?.id}) failed`),c.setError(jo.proposal_not_found),P}try{await this.isValidApprove(n)}catch(P){throw this.client.logger.error("approve() -> isValidApprove() failed"),c.setError(jo.session_approve_namespace_validation_failure),P}const{id:u,relayProtocol:f,namespaces:d,sessionProperties:p,scopedProperties:g,sessionConfig:y}=n,b=this.client.proposal.get(u);this.client.core.eventClient.deleteEvent({eventId:c.eventId});const{pairingTopic:v,proposer:E,requiredNamespaces:S,optionalNamespaces:x}=b;let T=(i=this.client.core.eventClient)==null?void 0:i.getEvent({topic:v});T||(T=(a=this.client.core.eventClient)==null?void 0:a.createEvent({type:Zr.session_approve_started,properties:{topic:v,trace:[Zr.session_approve_started,Zr.session_namespaces_validation_success]}}));const O=await this.client.core.crypto.generateKeyPair(),U=E.publicKey,N=await this.client.core.crypto.generateSharedKey(O,U),I=vt(vt(vt({relay:{protocol:f??"irn"},namespaces:d,controller:{publicKey:O,metadata:this.client.metadata},expiry:Yt(Ec)},p&&{sessionProperties:p}),g&&{scopedProperties:g}),y&&{sessionConfig:y}),j=wt.relay;T.addTrace(Zr.subscribing_session_topic);try{await this.client.core.relayer.subscribe(N,{transportType:j})}catch(P){throw T.setError(jo.subscribe_session_topic_failure),P}T.addTrace(Zr.subscribe_session_topic_success);const z=Vn(vt({},I),{topic:N,requiredNamespaces:S,optionalNamespaces:x,pairingTopic:v,acknowledged:!1,self:I.controller,peer:{publicKey:E.publicKey,metadata:E.metadata},controller:O,transportType:wt.relay});await this.client.session.set(N,z),T.addTrace(Zr.store_session);try{T.addTrace(Zr.publishing_session_settle),await this.sendRequest({topic:N,method:"wc_sessionSettle",params:I,throwOnFailedPublish:!0}).catch(P=>{throw T?.setError(jo.session_settle_publish_failure),P}),T.addTrace(Zr.session_settle_publish_success),T.addTrace(Zr.publishing_session_approve),await this.sendResult({id:u,topic:v,result:{relay:{protocol:f??"irn"},responderPublicKey:O},throwOnFailedPublish:!0}).catch(P=>{throw T?.setError(jo.session_approve_publish_failure),P}),T.addTrace(Zr.session_approve_publish_success)}catch(P){throw this.client.logger.error(P),this.client.session.delete(N,St("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(N),P}return this.client.core.eventClient.deleteEvent({eventId:T.eventId}),await this.client.core.pairing.updateMetadata({topic:v,metadata:E.metadata}),await this.deleteProposal(u),await this.client.core.pairing.activate({topic:v}),await this.setExpiry(N,Yt(Ec)),{topic:N,acknowledged:()=>Promise.resolve(this.client.session.get(N))}}),ye(this,"reject",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(n)}catch(c){throw this.client.logger.error("reject() -> isValidReject() failed"),c}const{id:r,reason:i}=n;let a;try{a=this.client.proposal.get(r).pairingTopic}catch(c){throw this.client.logger.error(`reject() -> proposal.get(${r}) failed`),c}a&&await this.sendError({id:r,topic:a,error:i,rpcOpts:on.wc_sessionPropose.reject}),await this.deleteProposal(r)}),ye(this,"update",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(n)}catch(g){throw this.client.logger.error("update() -> isValidUpdate() failed"),g}const{topic:r,namespaces:i}=n,{done:a,resolve:c,reject:u}=Ko(),f=vi(),d=na().toString(),p=this.client.session.get(r).namespaces;return this.events.once(Qe("session_update",f),({error:g})=>{g?u(g):c()}),await this.client.session.update(r,{namespaces:i}),await this.sendRequest({topic:r,method:"wc_sessionUpdate",params:{namespaces:i},throwOnFailedPublish:!0,clientRpcId:f,relayRpcId:d}).catch(g=>{this.client.logger.error(g),this.client.session.update(r,{namespaces:p}),u(g)}),{acknowledged:a}}),ye(this,"extend",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(n)}catch(f){throw this.client.logger.error("extend() -> isValidExtend() failed"),f}const{topic:r}=n,i=vi(),{done:a,resolve:c,reject:u}=Ko();return this.events.once(Qe("session_extend",i),({error:f})=>{f?u(f):c()}),await this.setExpiry(r,Yt(Ec)),this.sendRequest({topic:r,method:"wc_sessionExtend",params:{},clientRpcId:i,throwOnFailedPublish:!0}).catch(f=>{u(f)}),{acknowledged:a}}),ye(this,"request",async n=>{this.isInitialized();try{await this.isValidRequest(n)}catch(S){throw this.client.logger.error("request() -> isValidRequest() failed"),S}const{chainId:r,request:i,topic:a,expiry:c=on.wc_sessionRequest.req.ttl}=n,u=this.client.session.get(a);u?.transportType===wt.relay&&await this.confirmOnlineStateOrThrow();const f=vi(),d=na().toString(),{done:p,resolve:g,reject:y}=Ko(c,"Request expired. Please try again.");this.events.once(Qe("session_request",f),({error:S,result:x})=>{S?y(S):g(x)});const b="wc_sessionRequest",v=this.getAppLinkIfEnabled(u.peer.metadata,u.transportType);if(v)return await this.sendRequest({clientRpcId:f,relayRpcId:d,topic:a,method:b,params:{request:Vn(vt({},i),{expiryTimestamp:Yt(c)}),chainId:r},expiry:c,throwOnFailedPublish:!0,appLink:v}).catch(S=>y(S)),this.client.events.emit("session_request_sent",{topic:a,request:i,chainId:r,id:f}),await p();const E={request:Vn(vt({},i),{expiryTimestamp:Yt(c)}),chainId:r};return await Promise.all([new Promise(async S=>{await this.sendRequest({clientRpcId:f,relayRpcId:d,topic:a,method:b,params:E,expiry:c,throwOnFailedPublish:!0,tvf:this.getTVFParams(f,E)}).catch(x=>y(x)),this.client.events.emit("session_request_sent",{topic:a,request:i,chainId:r,id:f}),S()}),new Promise(async S=>{var x;if(!((x=u.sessionConfig)!=null&&x.disableDeepLink)){const T=await MH(this.client.core.storage,$R);await BH({id:f,topic:a,wcDeepLink:T})}S()}),p()]).then(S=>S[2])}),ye(this,"respond",async n=>{this.isInitialized(),await this.isValidRespond(n);const{topic:r,response:i}=n,{id:a}=i,c=this.client.session.get(r);c.transportType===wt.relay&&await this.confirmOnlineStateOrThrow();const u=this.getAppLinkIfEnabled(c.peer.metadata,c.transportType);wi(i)?await this.sendResult({id:a,topic:r,result:i.result,throwOnFailedPublish:!0,appLink:u}):Pr(i)&&await this.sendError({id:a,topic:r,error:i.error,appLink:u}),this.cleanupAfterResponse(n)}),ye(this,"ping",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(n)}catch(i){throw this.client.logger.error("ping() -> isValidPing() failed"),i}const{topic:r}=n;if(this.client.session.keys.includes(r)){const i=vi(),a=na().toString(),{done:c,resolve:u,reject:f}=Ko();this.events.once(Qe("session_ping",i),({error:d})=>{d?f(d):u()}),await Promise.all([this.sendRequest({topic:r,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:i,relayRpcId:a}),c()])}else this.client.core.pairing.pairings.keys.includes(r)&&(this.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),await this.client.core.pairing.ping({topic:r}))}),ye(this,"emit",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(n);const{topic:r,event:i,chainId:a}=n,c=na().toString(),u=vi();await this.sendRequest({topic:r,method:"wc_sessionEvent",params:{event:i,chainId:a},throwOnFailedPublish:!0,relayRpcId:c,clientRpcId:u})}),ye(this,"disconnect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(n);const{topic:r}=n;if(this.client.session.keys.includes(r))await this.sendRequest({topic:r,method:"wc_sessionDelete",params:St("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:r,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(r))await this.client.core.pairing.disconnect({topic:r});else{const{message:i}=be("MISMATCHED_TOPIC",`Session or pairing topic not found: ${r}`);throw new Error(i)}}),ye(this,"find",n=>(this.isInitialized(),this.client.session.getAll().filter(r=>KG(r,n)))),ye(this,"getPendingSessionRequests",()=>this.client.pendingRequest.getAll()),ye(this,"authenticate",async(n,r)=>{var i;this.isInitialized(),this.isValidAuthenticate(n);const a=r&&this.client.core.linkModeSupportedApps.includes(r)&&((i=this.client.metadata.redirect)==null?void 0:i.linkMode),c=a?wt.link_mode:wt.relay;c===wt.relay&&await this.confirmOnlineStateOrThrow();const{chains:u,statement:f="",uri:d,domain:p,nonce:g,type:y,exp:b,nbf:v,methods:E=[],expiry:S}=n,x=[...n.resources||[]],{topic:T,uri:O}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:c});this.client.logger.info({message:"Generated new pairing",pairing:{topic:T,uri:O}});const U=await this.client.core.crypto.generateKeyPair(),N=jh(U);if(await Promise.all([this.client.auth.authKeys.set(Gh,{responseTopic:N,publicKey:U}),this.client.auth.pairingTopics.set(N,{topic:N,pairingTopic:T})]),await this.client.core.relayer.subscribe(N,{transportType:c}),this.client.logger.info(`sending request to new pairing topic: ${T}`),E.length>0){const{namespace:X}=Vc(u[0]);let $=eV(X,"request",E);Lh(x)&&($=nV($,x.pop())),x.push($)}const I=S&&S>on.wc_sessionAuthenticate.req.ttl?S:on.wc_sessionAuthenticate.req.ttl,j={authPayload:{type:y??"caip122",chains:u,statement:f,aud:d,domain:p,version:"1",nonce:g,iat:new Date().toISOString(),exp:b,nbf:v,resources:x},requester:{publicKey:U,metadata:this.client.metadata},expiryTimestamp:Yt(I)},z={eip155:{chains:u,methods:[...new Set(["personal_sign",...E])],events:["chainChanged","accountsChanged"]}},P={requiredNamespaces:{},optionalNamespaces:z,relays:[{protocol:"irn"}],pairingTopic:T,proposer:{publicKey:U,metadata:this.client.metadata},expiryTimestamp:Yt(on.wc_sessionPropose.req.ttl),id:vi()},{done:G,resolve:F,reject:K}=Ko(I,"Request expired"),re=vi(),J=Qe("session_connect",P.id),D=Qe("session_request",re),R=async({error:X,session:$})=>{this.events.off(D,L),X?K(X):$&&F({session:$})},L=async X=>{var $,W,te;if(await this.deletePendingAuthRequest(re,{message:"fulfilled",code:0}),X.error){const _e=St("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return X.error.code===_e.code?void 0:(this.events.off(J,R),K(X.error.message))}await this.deleteProposal(P.id),this.events.off(J,R);const{cacaos:se,responder:ne}=X.result,ue=[],me=[];for(const _e of se){await oA({cacao:_e,projectId:this.client.core.projectId})||(this.client.logger.error(_e,"Signature verification failed"),K(St("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:ze}=_e,Xe=Lh(ze.resources),Vt=[Bb(ze.iss)],Ot=ap(ze.iss);if(Xe){const _t=aA(Xe),We=cA(Xe);ue.push(..._t),Vt.push(...We)}for(const _t of Vt)me.push(`${_t}:${Ot}`)}const Re=await this.client.core.crypto.generateSharedKey(U,ne.publicKey);let we;ue.length>0&&(we={topic:Re,acknowledged:!0,self:{publicKey:U,metadata:this.client.metadata},peer:ne,controller:ne.publicKey,expiry:Yt(Ec),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:T,namespaces:NA([...new Set(ue)],[...new Set(me)]),transportType:c},await this.client.core.relayer.subscribe(Re,{transportType:c}),await this.client.session.set(Re,we),T&&await this.client.core.pairing.updateMetadata({topic:T,metadata:ne.metadata}),we=this.client.session.get(Re)),($=this.client.metadata.redirect)!=null&&$.linkMode&&(W=ne.metadata.redirect)!=null&&W.linkMode&&(te=ne.metadata.redirect)!=null&&te.universal&&r&&(this.client.core.addLinkModeSupportedApp(ne.metadata.redirect.universal),this.client.session.update(Re,{transportType:wt.link_mode})),F({auths:se,session:we})};this.events.once(J,R),this.events.once(D,L);let V;try{if(a){const X=co("wc_sessionAuthenticate",j,re);this.client.core.history.set(T,X);const $=await this.client.core.crypto.encode("",X,{type:Uf,encoding:oo});V=mh(r,T,$)}else await Promise.all([this.sendRequest({topic:T,method:"wc_sessionAuthenticate",params:j,expiry:n.expiry,throwOnFailedPublish:!0,clientRpcId:re}),this.sendRequest({topic:T,method:"wc_sessionPropose",params:P,expiry:on.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:P.id})])}catch(X){throw this.events.off(J,R),this.events.off(D,L),X}return await this.setProposal(P.id,P),await this.setAuthRequest(re,{request:Vn(vt({},j),{verifyContext:{}}),pairingTopic:T,transportType:c}),{uri:V??O,response:G}}),ye(this,"approveSessionAuthenticate",async n=>{const{id:r,auths:i}=n,a=this.client.core.eventClient.createEvent({properties:{topic:r.toString(),trace:[zo.authenticated_session_approve_started]}});try{this.isInitialized()}catch(S){throw a.setError(Ou.no_internet_connection),S}const c=this.getPendingAuthRequest(r);if(!c)throw a.setError(Ou.authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${r}`);const u=c.transportType||wt.relay;u===wt.relay&&await this.confirmOnlineStateOrThrow();const f=c.requester.publicKey,d=await this.client.core.crypto.generateKeyPair(),p=jh(f),g={type:ds,receiverPublicKey:f,senderPublicKey:d},y=[],b=[];for(const S of i){if(!await oA({cacao:S,projectId:this.client.core.projectId})){a.setError(Ou.invalid_cacao);const N=St("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:r,topic:p,error:N,encodeOpts:g}),new Error(N.message)}a.addTrace(zo.cacaos_verified);const{p:x}=S,T=Lh(x.resources),O=[Bb(x.iss)],U=ap(x.iss);if(T){const N=aA(T),I=cA(T);y.push(...N),O.push(...I)}for(const N of O)b.push(`${N}:${U}`)}const v=await this.client.core.crypto.generateSharedKey(d,f);a.addTrace(zo.create_authenticated_session_topic);let E;if(y?.length>0){E={topic:v,acknowledged:!0,self:{publicKey:d,metadata:this.client.metadata},peer:{publicKey:f,metadata:c.requester.metadata},controller:f,expiry:Yt(Ec),authentication:i,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:c.pairingTopic,namespaces:NA([...new Set(y)],[...new Set(b)]),transportType:u},a.addTrace(zo.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(v,{transportType:u})}catch(S){throw a.setError(Ou.subscribe_authenticated_session_topic_failure),S}a.addTrace(zo.subscribe_authenticated_session_topic_success),await this.client.session.set(v,E),a.addTrace(zo.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:c.pairingTopic,metadata:c.requester.metadata})}a.addTrace(zo.publishing_authenticated_session_approve);try{await this.sendResult({topic:p,id:r,result:{cacaos:i,responder:{publicKey:d,metadata:this.client.metadata}},encodeOpts:g,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(c.requester.metadata,u)})}catch(S){throw a.setError(Ou.authenticated_session_approve_publish_failure),S}return await this.client.auth.requests.delete(r,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:c.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:a.eventId}),{session:E}}),ye(this,"rejectSessionAuthenticate",async n=>{this.isInitialized();const{id:r,reason:i}=n,a=this.getPendingAuthRequest(r);if(!a)throw new Error(`Could not find pending auth request with id ${r}`);a.transportType===wt.relay&&await this.confirmOnlineStateOrThrow();const c=a.requester.publicKey,u=await this.client.core.crypto.generateKeyPair(),f=jh(c),d={type:ds,receiverPublicKey:c,senderPublicKey:u};await this.sendError({id:r,topic:f,error:i,encodeOpts:d,rpcOpts:on.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(a.requester.metadata,a.transportType)}),await this.client.auth.requests.delete(r,{message:"rejected",code:0}),await this.deleteProposal(r)}),ye(this,"formatAuthMessage",n=>{this.isInitialized();const{request:r,iss:i}=n;return gC(r,i)}),ye(this,"processRelayMessageCache",()=>{setTimeout(async()=>{if(this.relayMessageCache.length!==0)for(;this.relayMessageCache.length>0;)try{const n=this.relayMessageCache.shift();n&&await this.onRelayMessage(n)}catch(n){this.client.logger.error(n)}},50)}),ye(this,"cleanupDuplicatePairings",async n=>{if(n.pairingTopic)try{const r=this.client.core.pairing.pairings.get(n.pairingTopic),i=this.client.core.pairing.pairings.getAll().filter(a=>{var c,u;return((c=a.peerMetadata)==null?void 0:c.url)&&((u=a.peerMetadata)==null?void 0:u.url)===n.peer.metadata.url&&a.topic&&a.topic!==r.topic});if(i.length===0)return;this.client.logger.info(`Cleaning up ${i.length} duplicate pairing(s)`),await Promise.all(i.map(a=>this.client.core.pairing.disconnect({topic:a.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(r){this.client.logger.error(r)}}),ye(this,"deleteSession",async n=>{var r;const{topic:i,expirerHasDeleted:a=!1,emitEvent:c=!0,id:u=0}=n,{self:f}=this.client.session.get(i);await this.client.core.relayer.unsubscribe(i),await this.client.session.delete(i,St("USER_DISCONNECTED")),this.addToRecentlyDeleted(i,"session"),this.client.core.crypto.keychain.has(f.publicKey)&&await this.client.core.crypto.deleteKeyPair(f.publicKey),this.client.core.crypto.keychain.has(i)&&await this.client.core.crypto.deleteSymKey(i),a||this.client.core.expirer.del(i),this.client.core.storage.removeItem($R).catch(d=>this.client.logger.warn(d)),this.getPendingSessionRequests().forEach(d=>{d.topic===i&&this.deletePendingSessionRequest(d.id,St("USER_DISCONNECTED"))}),i===((r=this.sessionRequestQueue.queue[0])==null?void 0:r.topic)&&(this.sessionRequestQueue.state=mi.idle),c&&this.client.events.emit("session_delete",{id:u,topic:i})}),ye(this,"deleteProposal",async(n,r)=>{if(r)try{const i=this.client.proposal.get(n);this.client.core.eventClient.getEvent({topic:i.pairingTopic})?.setError(jo.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(n,St("USER_DISCONNECTED")),r?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"proposal")}),ye(this,"deletePendingSessionRequest",async(n,r,i=!1)=>{await Promise.all([this.client.pendingRequest.delete(n,r),i?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(a=>a.id!==n),i&&(this.sessionRequestQueue.state=mi.idle,this.client.events.emit("session_request_expire",{id:n}))}),ye(this,"deletePendingAuthRequest",async(n,r,i=!1)=>{await Promise.all([this.client.auth.requests.delete(n,r),i?Promise.resolve():this.client.core.expirer.del(n)])}),ye(this,"setExpiry",async(n,r)=>{this.client.session.keys.includes(n)&&(this.client.core.expirer.set(n,r),await this.client.session.update(n,{expiry:r}))}),ye(this,"setProposal",async(n,r)=>{this.client.core.expirer.set(n,Yt(on.wc_sessionPropose.req.ttl)),await this.client.proposal.set(n,r)}),ye(this,"setAuthRequest",async(n,r)=>{const{request:i,pairingTopic:a,transportType:c=wt.relay}=r;this.client.core.expirer.set(n,i.expiryTimestamp),await this.client.auth.requests.set(n,{authPayload:i.authPayload,requester:i.requester,expiryTimestamp:i.expiryTimestamp,id:n,pairingTopic:a,verifyContext:i.verifyContext,transportType:c})}),ye(this,"setPendingSessionRequest",async n=>{const{id:r,topic:i,params:a,verifyContext:c}=n,u=a.request.expiryTimestamp||Yt(on.wc_sessionRequest.req.ttl);this.client.core.expirer.set(r,u),await this.client.pendingRequest.set(r,{id:r,topic:i,params:a,verifyContext:c})}),ye(this,"sendRequest",async n=>{const{topic:r,method:i,params:a,expiry:c,relayRpcId:u,clientRpcId:f,throwOnFailedPublish:d,appLink:p,tvf:g}=n,y=co(i,a,f);let b;const v=!!p;try{const x=v?oo:ri;b=await this.client.core.crypto.encode(r,y,{encoding:x})}catch(x){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${r} failed`),x}let E;if(pJ.includes(i)){const x=Si(JSON.stringify(y)),T=Si(b);E=await this.client.core.verify.register({id:T,decryptedId:x})}const S=on[i].req;if(S.attestation=E,c&&(S.ttl=c),u&&(S.id=u),this.client.core.history.set(r,y),v){const x=mh(p,r,b);await global.Linking.openURL(x,this.client.name)}else{const x=on[i].req;c&&(x.ttl=c),u&&(x.id=u),x.tvf=Vn(vt({},g),{correlationId:y.id}),d?(x.internal=Vn(vt({},x.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(r,b,x)):this.client.core.relayer.publish(r,b,x).catch(T=>this.client.logger.error(T))}return y.id}),ye(this,"sendResult",async n=>{const{id:r,topic:i,result:a,throwOnFailedPublish:c,encodeOpts:u,appLink:f}=n,d=Yp(r,a);let p;const g=f&&typeof(global==null?void 0:global.Linking)<"u";try{const v=g?oo:ri;p=await this.client.core.crypto.encode(i,d,Vn(vt({},u||{}),{encoding:v}))}catch(v){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${i} failed`),v}let y,b;try{y=await this.client.core.history.get(i,r);const v=y.request;try{b=this.getTVFParams(r,v.params,a)}catch(E){this.client.logger.warn(`sendResult() -> getTVFParams() failed: ${E?.message}`)}}catch(v){throw this.client.logger.error(`sendResult() -> history.get(${i}, ${r}) failed`),v}if(g){const v=mh(f,i,p);await global.Linking.openURL(v,this.client.name)}else{const v=y.request.method,E=on[v].res;E.tvf=Vn(vt({},b),{correlationId:r}),c?(E.internal=Vn(vt({},E.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(i,p,E)):this.client.core.relayer.publish(i,p,E).catch(S=>this.client.logger.error(S))}await this.client.core.history.resolve(d)}),ye(this,"sendError",async n=>{const{id:r,topic:i,error:a,encodeOpts:c,rpcOpts:u,appLink:f}=n,d=Xp(r,a);let p;const g=f&&typeof(global==null?void 0:global.Linking)<"u";try{const b=g?oo:ri;p=await this.client.core.crypto.encode(i,d,Vn(vt({},c||{}),{encoding:b}))}catch(b){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${i} failed`),b}let y;try{y=await this.client.core.history.get(i,r)}catch(b){throw this.client.logger.error(`sendError() -> history.get(${i}, ${r}) failed`),b}if(g){const b=mh(f,i,p);await global.Linking.openURL(b,this.client.name)}else{const b=y.request.method,v=u||on[b].res;this.client.core.relayer.publish(i,p,v)}await this.client.core.history.resolve(d)}),ye(this,"cleanup",async()=>{const n=[],r=[];this.client.session.getAll().forEach(i=>{let a=!1;to(i.expiry)&&(a=!0),this.client.core.crypto.keychain.has(i.topic)||(a=!0),a&&n.push(i.topic)}),this.client.proposal.getAll().forEach(i=>{to(i.expiryTimestamp)&&r.push(i.id)}),await Promise.all([...n.map(i=>this.deleteSession({topic:i})),...r.map(i=>this.deleteProposal(i))])}),ye(this,"onProviderMessageEvent",async n=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(n):await this.onRelayMessage(n)}),ye(this,"onRelayEventRequest",async n=>{this.requestQueue.queue.push(n),await this.processRequestsQueue()}),ye(this,"processRequestsQueue",async()=>{if(this.requestQueue.state===mi.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=mi.active;const n=this.requestQueue.queue.shift();if(n)try{await this.processRequest(n)}catch(r){this.client.logger.warn(r)}}this.requestQueue.state=mi.idle}),ye(this,"processRequest",async n=>{const{topic:r,payload:i,attestation:a,transportType:c,encryptedId:u}=n,f=i.method;if(!this.shouldIgnorePairingRequest({topic:r,requestMethod:f}))switch(f){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:r,payload:i,attestation:a,encryptedId:u});case"wc_sessionSettle":return await this.onSessionSettleRequest(r,i);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(r,i);case"wc_sessionExtend":return await this.onSessionExtendRequest(r,i);case"wc_sessionPing":return await this.onSessionPingRequest(r,i);case"wc_sessionDelete":return await this.onSessionDeleteRequest(r,i);case"wc_sessionRequest":return await this.onSessionRequest({topic:r,payload:i,attestation:a,encryptedId:u,transportType:c});case"wc_sessionEvent":return await this.onSessionEventRequest(r,i);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:r,payload:i,attestation:a,encryptedId:u,transportType:c});default:return this.client.logger.info(`Unsupported request method ${f}`)}}),ye(this,"onRelayEventResponse",async n=>{const{topic:r,payload:i,transportType:a}=n,c=(await this.client.core.history.get(r,i.id)).request.method;switch(c){case"wc_sessionPropose":return this.onSessionProposeResponse(r,i,a);case"wc_sessionSettle":return this.onSessionSettleResponse(r,i);case"wc_sessionUpdate":return this.onSessionUpdateResponse(r,i);case"wc_sessionExtend":return this.onSessionExtendResponse(r,i);case"wc_sessionPing":return this.onSessionPingResponse(r,i);case"wc_sessionRequest":return this.onSessionRequestResponse(r,i);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(r,i);default:return this.client.logger.info(`Unsupported response method ${c}`)}}),ye(this,"onRelayEventUnknownPayload",n=>{const{topic:r}=n,{message:i}=be("MISSING_OR_INVALID",`Decoded payload on topic ${r} is not identifiable as a JSON-RPC request or a response.`);throw new Error(i)}),ye(this,"shouldIgnorePairingRequest",n=>{const{topic:r,requestMethod:i}=n,a=this.expectedPairingMethodMap.get(r);return!a||a.includes(i)?!1:!!(a.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)}),ye(this,"onSessionProposeRequest",async n=>{const{topic:r,payload:i,attestation:a,encryptedId:c}=n,{params:u,id:f}=i;try{const d=this.client.core.eventClient.getEvent({topic:r});this.client.events.listenerCount("session_proposal")===0&&(console.warn("No listener for session_proposal event"),d?.setError(is.proposal_listener_not_found)),this.isValidConnect(vt({},i.params));const p=u.expiryTimestamp||Yt(on.wc_sessionPropose.req.ttl),g=vt({id:f,pairingTopic:r,expiryTimestamp:p,attestation:a,encryptedId:c},u);await this.setProposal(f,g);const y=await this.getVerifyContext({attestationId:a,hash:Si(JSON.stringify(i)),encryptedId:c,metadata:g.proposer.metadata});d?.addTrace(bi.emit_session_proposal),this.client.events.emit("session_proposal",{id:f,params:g,verifyContext:y})}catch(d){await this.sendError({id:f,topic:r,error:d,rpcOpts:on.wc_sessionPropose.autoReject}),this.client.logger.error(d)}}),ye(this,"onSessionProposeResponse",async(n,r,i)=>{const{id:a}=r;if(wi(r)){const{result:c}=r;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:c});const u=this.client.proposal.get(a);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:u});const f=u.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:f});const d=c.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:d});const p=await this.client.core.crypto.generateSharedKey(f,d);this.pendingSessions.set(a,{sessionTopic:p,pairingTopic:n,proposalId:a,publicKey:f});const g=await this.client.core.relayer.subscribe(p,{transportType:i});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:g}),await this.client.core.pairing.activate({topic:n})}else if(Pr(r)){await this.deleteProposal(a);const c=Qe("session_connect",a);if(this.events.listenerCount(c)===0)throw new Error(`emitting ${c} without any listeners, 954`);this.events.emit(c,{error:r.error})}}),ye(this,"onSessionSettleRequest",async(n,r)=>{const{id:i,params:a}=r;try{this.isValidSessionSettleRequest(a);const{relay:c,controller:u,expiry:f,namespaces:d,sessionProperties:p,scopedProperties:g,sessionConfig:y}=r.params,b=[...this.pendingSessions.values()].find(S=>S.sessionTopic===n);if(!b)return this.client.logger.error(`Pending session not found for topic ${n}`);const v=this.client.proposal.get(b.proposalId),E=Vn(vt(vt(vt({topic:n,relay:c,expiry:f,namespaces:d,acknowledged:!0,pairingTopic:b.pairingTopic,requiredNamespaces:v.requiredNamespaces,optionalNamespaces:v.optionalNamespaces,controller:u.publicKey,self:{publicKey:b.publicKey,metadata:this.client.metadata},peer:{publicKey:u.publicKey,metadata:u.metadata}},p&&{sessionProperties:p}),g&&{scopedProperties:g}),y&&{sessionConfig:y}),{transportType:wt.relay});await this.client.session.set(E.topic,E),await this.setExpiry(E.topic,E.expiry),await this.client.core.pairing.updateMetadata({topic:b.pairingTopic,metadata:E.peer.metadata}),this.client.events.emit("session_connect",{session:E}),this.events.emit(Qe("session_connect",b.proposalId),{session:E}),this.pendingSessions.delete(b.proposalId),this.deleteProposal(b.proposalId,!1),this.cleanupDuplicatePairings(E),await this.sendResult({id:r.id,topic:n,result:!0})}catch(c){await this.sendError({id:i,topic:n,error:c}),this.client.logger.error(c)}}),ye(this,"onSessionSettleResponse",async(n,r)=>{const{id:i}=r;wi(r)?(await this.client.session.update(n,{acknowledged:!0}),this.events.emit(Qe("session_approve",i),{})):Pr(r)&&(await this.client.session.delete(n,St("USER_DISCONNECTED")),this.events.emit(Qe("session_approve",i),{error:r.error}))}),ye(this,"onSessionUpdateRequest",async(n,r)=>{const{params:i,id:a}=r;try{const c=`${n}_session_update`,u=Au.get(c);if(u&&this.isRequestOutOfSync(u,a)){this.client.logger.warn(`Discarding out of sync request - ${a}`),this.sendError({id:a,topic:n,error:St("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(vt({topic:n},i));try{Au.set(c,a),await this.client.session.update(n,{namespaces:i.namespaces}),await this.sendResult({id:a,topic:n,result:!0})}catch(f){throw Au.delete(c),f}this.client.events.emit("session_update",{id:a,topic:n,params:i})}catch(c){await this.sendError({id:a,topic:n,error:c}),this.client.logger.error(c)}}),ye(this,"isRequestOutOfSync",(n,r)=>r.toString().slice(0,-3)<n.toString().slice(0,-3)),ye(this,"onSessionUpdateResponse",(n,r)=>{const{id:i}=r,a=Qe("session_update",i);if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners`);wi(r)?this.events.emit(Qe("session_update",i),{}):Pr(r)&&this.events.emit(Qe("session_update",i),{error:r.error})}),ye(this,"onSessionExtendRequest",async(n,r)=>{const{id:i}=r;try{this.isValidExtend({topic:n}),await this.setExpiry(n,Yt(Ec)),await this.sendResult({id:i,topic:n,result:!0}),this.client.events.emit("session_extend",{id:i,topic:n})}catch(a){await this.sendError({id:i,topic:n,error:a}),this.client.logger.error(a)}}),ye(this,"onSessionExtendResponse",(n,r)=>{const{id:i}=r,a=Qe("session_extend",i);if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners`);wi(r)?this.events.emit(Qe("session_extend",i),{}):Pr(r)&&this.events.emit(Qe("session_extend",i),{error:r.error})}),ye(this,"onSessionPingRequest",async(n,r)=>{const{id:i}=r;try{this.isValidPing({topic:n}),await this.sendResult({id:i,topic:n,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:i,topic:n})}catch(a){await this.sendError({id:i,topic:n,error:a}),this.client.logger.error(a)}}),ye(this,"onSessionPingResponse",(n,r)=>{const{id:i}=r,a=Qe("session_ping",i);setTimeout(()=>{if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners 2176`);wi(r)?this.events.emit(Qe("session_ping",i),{}):Pr(r)&&this.events.emit(Qe("session_ping",i),{error:r.error})},500)}),ye(this,"onSessionDeleteRequest",async(n,r)=>{const{id:i}=r;try{this.isValidDisconnect({topic:n,reason:r.params}),Promise.all([new Promise(a=>{this.client.core.relayer.once(cn.publish,async()=>{a(await this.deleteSession({topic:n,id:i}))})}),this.sendResult({id:i,topic:n,result:!0}),this.cleanupPendingSentRequestsForTopic({topic:n,error:St("USER_DISCONNECTED")})]).catch(a=>this.client.logger.error(a))}catch(a){this.client.logger.error(a)}}),ye(this,"onSessionRequest",async n=>{var r,i,a;const{topic:c,payload:u,attestation:f,encryptedId:d,transportType:p}=n,{id:g,params:y}=u;try{await this.isValidRequest(vt({topic:c},y));const b=this.client.session.get(c),v=await this.getVerifyContext({attestationId:f,hash:Si(JSON.stringify(co("wc_sessionRequest",y,g))),encryptedId:d,metadata:b.peer.metadata,transportType:p}),E={id:g,topic:c,params:y,verifyContext:v};await this.setPendingSessionRequest(E),p===wt.link_mode&&(r=b.peer.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp((i=b.peer.metadata.redirect)==null?void 0:i.universal),(a=this.client.signConfig)!=null&&a.disableRequestQueue?this.emitSessionRequest(E):(this.addSessionRequestToSessionRequestQueue(E),this.processSessionRequestQueue())}catch(b){await this.sendError({id:g,topic:c,error:b}),this.client.logger.error(b)}}),ye(this,"onSessionRequestResponse",(n,r)=>{const{id:i}=r,a=Qe("session_request",i);if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners`);wi(r)?this.events.emit(Qe("session_request",i),{result:r.result}):Pr(r)&&this.events.emit(Qe("session_request",i),{error:r.error})}),ye(this,"onSessionEventRequest",async(n,r)=>{const{id:i,params:a}=r;try{const c=`${n}_session_event_${a.event.name}`,u=Au.get(c);if(u&&this.isRequestOutOfSync(u,i)){this.client.logger.info(`Discarding out of sync request - ${i}`);return}this.isValidEmit(vt({topic:n},a)),this.client.events.emit("session_event",{id:i,topic:n,params:a}),Au.set(c,i)}catch(c){await this.sendError({id:i,topic:n,error:c}),this.client.logger.error(c)}}),ye(this,"onSessionAuthenticateResponse",(n,r)=>{const{id:i}=r;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:n,payload:r}),wi(r)?this.events.emit(Qe("session_request",i),{result:r.result}):Pr(r)&&this.events.emit(Qe("session_request",i),{error:r.error})}),ye(this,"onSessionAuthenticateRequest",async n=>{var r;const{topic:i,payload:a,attestation:c,encryptedId:u,transportType:f}=n;try{const{requester:d,authPayload:p,expiryTimestamp:g}=a.params,y=await this.getVerifyContext({attestationId:c,hash:Si(JSON.stringify(a)),encryptedId:u,metadata:d.metadata,transportType:f}),b={requester:d,pairingTopic:i,id:a.id,authPayload:p,verifyContext:y,expiryTimestamp:g};await this.setAuthRequest(a.id,{request:b,pairingTopic:i,transportType:f}),f===wt.link_mode&&(r=d.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp(d.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:i,params:a.params,id:a.id,verifyContext:y})}catch(d){this.client.logger.error(d);const p=a.params.requester.publicKey,g=await this.client.core.crypto.generateKeyPair(),y=this.getAppLinkIfEnabled(a.params.requester.metadata,f),b={type:ds,receiverPublicKey:p,senderPublicKey:g};await this.sendError({id:a.id,topic:i,error:d,encodeOpts:b,rpcOpts:on.wc_sessionAuthenticate.autoReject,appLink:y})}}),ye(this,"addSessionRequestToSessionRequestQueue",n=>{this.sessionRequestQueue.queue.push(n)}),ye(this,"cleanupAfterResponse",n=>{this.deletePendingSessionRequest(n.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=mi.idle,this.processSessionRequestQueue()},ve.toMiliseconds(this.requestQueueDelay))}),ye(this,"cleanupPendingSentRequestsForTopic",({topic:n,error:r})=>{const i=this.client.core.history.pending;i.length>0&&i.filter(a=>a.topic===n&&a.request.method==="wc_sessionRequest").forEach(a=>{const c=a.request.id,u=Qe("session_request",c);if(this.events.listenerCount(u)===0)throw new Error(`emitting ${u} without any listeners`);this.events.emit(Qe("session_request",a.request.id),{error:r})})}),ye(this,"processSessionRequestQueue",()=>{if(this.sessionRequestQueue.state===mi.active){this.client.logger.info("session request queue is already active.");return}const n=this.sessionRequestQueue.queue[0];if(!n){this.client.logger.info("session request queue is empty.");return}try{this.emitSessionRequest(n)}catch(r){this.client.logger.error(r)}}),ye(this,"emitSessionRequest",n=>{if(this.emittedSessionRequests.has(n.id)){this.client.logger.warn({id:n.id},`Skipping emitting \`session_request\` event for duplicate request. id: ${n.id}`);return}this.sessionRequestQueue.state=mi.active,this.emittedSessionRequests.add(n.id),this.client.events.emit("session_request",n)}),ye(this,"onPairingCreated",n=>{if(n.methods&&this.expectedPairingMethodMap.set(n.topic,n.methods),n.active)return;const r=this.client.proposal.getAll().find(i=>i.pairingTopic===n.topic);r&&this.onSessionProposeRequest({topic:n.topic,payload:co("wc_sessionPropose",Vn(vt({},r),{requiredNamespaces:r.requiredNamespaces,optionalNamespaces:r.optionalNamespaces,relays:r.relays,proposer:r.proposer,sessionProperties:r.sessionProperties,scopedProperties:r.scopedProperties}),r.id),attestation:r.attestation,encryptedId:r.encryptedId})}),ye(this,"isValidConnect",async n=>{if(!Kn(n)){const{message:d}=be("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(n)}`);throw new Error(d)}const{pairingTopic:r,requiredNamespaces:i,optionalNamespaces:a,sessionProperties:c,scopedProperties:u,relays:f}=n;if(yn(r)||await this.isValidPairingTopic(r),!sK(f)){const{message:d}=be("MISSING_OR_INVALID",`connect() relays: ${f}`);throw new Error(d)}if(!yn(i)&&Ri(i)!==0){const d="requiredNamespaces are deprecated and are automatically assigned to optionalNamespaces";["fatal","error","silent"].includes(this.client.logger.level)?console.warn(d):this.client.logger.warn(d),this.validateNamespaces(i,"requiredNamespaces")}if(!yn(a)&&Ri(a)!==0&&this.validateNamespaces(a,"optionalNamespaces"),yn(c)||this.validateSessionProps(c,"sessionProperties"),!yn(u)){this.validateSessionProps(u,"scopedProperties");const d=Object.keys(i||{}).concat(Object.keys(a||{}));if(!Object.keys(u).every(p=>d.includes(p.split(":")[0])))throw new Error(`Scoped properties must be a subset of required/optional namespaces, received: ${JSON.stringify(u)}, required/optional namespaces: ${JSON.stringify(d)}`)}}),ye(this,"validateNamespaces",(n,r)=>{const i=iK(n,"connect()",r);if(i)throw new Error(i.message)}),ye(this,"isValidApprove",async n=>{if(!Kn(n))throw new Error(be("MISSING_OR_INVALID",`approve() params: ${n}`).message);const{id:r,namespaces:i,relayProtocol:a,sessionProperties:c,scopedProperties:u}=n;this.checkRecentlyDeleted(r),await this.isValidProposalId(r);const f=this.client.proposal.get(r),d=_0(i,"approve()");if(d)throw new Error(d.message);const p=BA(f.requiredNamespaces,i,"approve()");if(p)throw new Error(p.message);if(!jt(a,!0)){const{message:g}=be("MISSING_OR_INVALID",`approve() relayProtocol: ${a}`);throw new Error(g)}if(yn(c)||this.validateSessionProps(c,"sessionProperties"),!yn(u)){this.validateSessionProps(u,"scopedProperties");const g=new Set(Object.keys(i));if(!Object.keys(u).every(y=>g.has(y.split(":")[0])))throw new Error(`Scoped properties must be a subset of approved namespaces, received: ${JSON.stringify(u)}, approved namespaces: ${Array.from(g).join(", ")}`)}}),ye(this,"isValidReject",async n=>{if(!Kn(n)){const{message:a}=be("MISSING_OR_INVALID",`reject() params: ${n}`);throw new Error(a)}const{id:r,reason:i}=n;if(this.checkRecentlyDeleted(r),await this.isValidProposalId(r),!aK(i)){const{message:a}=be("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(i)}`);throw new Error(a)}}),ye(this,"isValidSessionSettleRequest",n=>{if(!Kn(n)){const{message:d}=be("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${n}`);throw new Error(d)}const{relay:r,controller:i,namespaces:a,expiry:c}=n;if(!GC(r)){const{message:d}=be("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(d)}const u=QG(i,"onSessionSettleRequest()");if(u)throw new Error(u.message);const f=_0(a,"onSessionSettleRequest()");if(f)throw new Error(f.message);if(to(c)){const{message:d}=be("EXPIRED","onSessionSettleRequest()");throw new Error(d)}}),ye(this,"isValidUpdate",async n=>{if(!Kn(n)){const{message:f}=be("MISSING_OR_INVALID",`update() params: ${n}`);throw new Error(f)}const{topic:r,namespaces:i}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const a=this.client.session.get(r),c=_0(i,"update()");if(c)throw new Error(c.message);const u=BA(a.requiredNamespaces,i,"update()");if(u)throw new Error(u.message)}),ye(this,"isValidExtend",async n=>{if(!Kn(n)){const{message:i}=be("MISSING_OR_INVALID",`extend() params: ${n}`);throw new Error(i)}const{topic:r}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r)}),ye(this,"isValidRequest",async n=>{if(!Kn(n)){const{message:f}=be("MISSING_OR_INVALID",`request() params: ${n}`);throw new Error(f)}const{topic:r,request:i,chainId:a,expiry:c}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const{namespaces:u}=this.client.session.get(r);if(!UA(u,a)){const{message:f}=be("MISSING_OR_INVALID",`request() chainId: ${a}`);throw new Error(f)}if(!cK(i)){const{message:f}=be("MISSING_OR_INVALID",`request() ${JSON.stringify(i)}`);throw new Error(f)}if(!fK(u,a,i.method)){const{message:f}=be("MISSING_OR_INVALID",`request() method: ${i.method}`);throw new Error(f)}if(c&&!gK(c,B0)){const{message:f}=be("MISSING_OR_INVALID",`request() expiry: ${c}. Expiry must be a number (in seconds) between ${B0.min} and ${B0.max}`);throw new Error(f)}}),ye(this,"isValidRespond",async n=>{var r;if(!Kn(n)){const{message:c}=be("MISSING_OR_INVALID",`respond() params: ${n}`);throw new Error(c)}const{topic:i,response:a}=n;try{await this.isValidSessionTopic(i)}catch(c){throw(r=n?.response)!=null&&r.id&&this.cleanupAfterResponse(n),c}if(!lK(a)){const{message:c}=be("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(a)}`);throw new Error(c)}}),ye(this,"isValidPing",async n=>{if(!Kn(n)){const{message:i}=be("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(i)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),ye(this,"isValidEmit",async n=>{if(!Kn(n)){const{message:u}=be("MISSING_OR_INVALID",`emit() params: ${n}`);throw new Error(u)}const{topic:r,event:i,chainId:a}=n;await this.isValidSessionTopic(r);const{namespaces:c}=this.client.session.get(r);if(!UA(c,a)){const{message:u}=be("MISSING_OR_INVALID",`emit() chainId: ${a}`);throw new Error(u)}if(!uK(i)){const{message:u}=be("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw new Error(u)}if(!dK(c,a,i.name)){const{message:u}=be("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw new Error(u)}}),ye(this,"isValidDisconnect",async n=>{if(!Kn(n)){const{message:i}=be("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(i)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),ye(this,"isValidAuthenticate",n=>{const{chains:r,uri:i,domain:a,nonce:c}=n;if(!Array.isArray(r)||r.length===0)throw new Error("chains is required and must be a non-empty array");if(!jt(i,!1))throw new Error("uri is required parameter");if(!jt(a,!1))throw new Error("domain is required parameter");if(!jt(c,!1))throw new Error("nonce is required parameter");if([...new Set(r.map(f=>Vc(f).namespace))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:u}=Vc(r[0]);if(u!=="eip155")throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")}),ye(this,"getVerifyContext",async n=>{const{attestationId:r,hash:i,encryptedId:a,metadata:c,transportType:u}=n,f={verified:{verifyUrl:c.verifyUrl||Yu,validation:"UNKNOWN",origin:c.url||""}};try{if(u===wt.link_mode){const p=this.getAppLinkIfEnabled(c,u);return f.verified.validation=p&&new URL(p).origin===new URL(c.url).origin?"VALID":"INVALID",f}const d=await this.client.core.verify.resolve({attestationId:r,hash:i,encryptedId:a,verifyUrl:c.verifyUrl});d&&(f.verified.origin=d.origin,f.verified.isScam=d.isScam,f.verified.validation=d.origin===new URL(c.url).origin?"VALID":"INVALID")}catch(d){this.client.logger.warn(d)}return this.client.logger.debug(`Verify context: ${JSON.stringify(f)}`),f}),ye(this,"validateSessionProps",(n,r)=>{Object.values(n).forEach((i,a)=>{if(i==null){const{message:c}=be("MISSING_OR_INVALID",`${r} must contain an existing value for each key. Received: ${i} for key ${Object.keys(n)[a]}`);throw new Error(c)}})}),ye(this,"getPendingAuthRequest",n=>{const r=this.client.auth.requests.get(n);return typeof r=="object"?r:void 0}),ye(this,"addToRecentlyDeleted",(n,r)=>{if(this.recentlyDeletedMap.set(n,r),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let i=0;const a=this.recentlyDeletedLimit/2;for(const c of this.recentlyDeletedMap.keys()){if(i++>=a)break;this.recentlyDeletedMap.delete(c)}}}),ye(this,"checkRecentlyDeleted",n=>{const r=this.recentlyDeletedMap.get(n);if(r){const{message:i}=be("MISSING_OR_INVALID",`Record was recently deleted - ${r}: ${n}`);throw new Error(i)}}),ye(this,"isLinkModeEnabled",(n,r)=>{var i,a,c,u,f,d,p,g,y;return!n||r!==wt.link_mode?!1:((a=(i=this.client.metadata)==null?void 0:i.redirect)==null?void 0:a.linkMode)===!0&&((u=(c=this.client.metadata)==null?void 0:c.redirect)==null?void 0:u.universal)!==void 0&&((d=(f=this.client.metadata)==null?void 0:f.redirect)==null?void 0:d.universal)!==""&&((p=n?.redirect)==null?void 0:p.universal)!==void 0&&((g=n?.redirect)==null?void 0:g.universal)!==""&&((y=n?.redirect)==null?void 0:y.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(n.redirect.universal)&&typeof(global==null?void 0:global.Linking)<"u"}),ye(this,"getAppLinkIfEnabled",(n,r)=>{var i;return this.isLinkModeEnabled(n,r)?(i=n?.redirect)==null?void 0:i.universal:void 0}),ye(this,"handleLinkModeMessage",({url:n})=>{if(!n||!n.includes("wc_ev")||!n.includes("topic"))return;const r=Wx(n,"topic")||"",i=decodeURIComponent(Wx(n,"wc_ev")||""),a=this.client.session.keys.includes(r);a&&this.client.session.update(r,{transportType:wt.link_mode}),this.client.core.dispatchEnvelope({topic:r,message:i,sessionExists:a})}),ye(this,"registerLinkModeListeners",async()=>{var n;if(ew()||yo()&&(n=this.client.metadata.redirect)!=null&&n.linkMode){const r=global==null?void 0:global.Linking;if(typeof r<"u"){r.addEventListener("url",this.handleLinkModeMessage,this.client.name);const i=await r.getInitialURL();i&&setTimeout(()=>{this.handleLinkModeMessage({url:i})},50)}}}),ye(this,"getTVFParams",(n,r,i)=>{var a,c,u;if(!((a=r.request)!=null&&a.method))return{};const f={correlationId:n,rpcMethods:[r.request.method],chainId:r.chainId};try{const d=this.extractTxHashesFromResult(r.request,i);f.txHashes=d,f.contractAddresses=this.isValidContractData(r.request.params)?[(u=(c=r.request.params)==null?void 0:c[0])==null?void 0:u.to]:[]}catch(d){this.client.logger.warn("Error getting TVF params",d)}return f}),ye(this,"isValidContractData",n=>{var r;if(!n)return!1;try{const i=n?.data||((r=n?.[0])==null?void 0:r.data);if(!i.startsWith("0x"))return!1;const a=i.slice(2);return/^[0-9a-fA-F]*$/.test(a)?a.length%2===0:!1}catch{}return!1}),ye(this,"extractTxHashesFromResult",(n,r)=>{var i;try{if(!r)return[];const a=n.method,c=dJ[a];if(a==="sui_signTransaction")return[MF(r.transactionBytes)];if(a==="near_signTransaction")return[nA(r)];if(a==="near_signTransactions")return r.map(f=>nA(f));if(a==="xrpl_signTransactionFor"||a==="xrpl_signTransaction")return[(i=r.tx_json)==null?void 0:i.hash];if(a==="polkadot_signTransaction")return[CK({transaction:n.params.transactionPayload,signature:r.signature})];if(a==="algo_signTxn")return hs(r)?r.map(f=>rA(f)):[rA(r)];if(a==="cosmos_signDirect")return[jF(r)];if(typeof r=="string")return[r];const u=r[c.key];if(hs(u))return a==="solana_signAllTransactions"?u.map(f=>kF(f)):u;if(typeof u=="string")return[u]}catch(a){this.client.logger.warn("Error extracting tx hashes from result",a)}return[]})}async processPendingMessageEvents(){try{const t=this.client.session.keys,n=this.client.core.relayer.messages.getWithoutAck(t);for(const[r,i]of Object.entries(n))for(const a of i)try{await this.onProviderMessageEvent({topic:r,message:a,publishedAt:Date.now()})}catch{this.client.logger.warn(`Error processing pending message event for topic: ${r}, message: ${a}`)}}catch(t){this.client.logger.warn("processPendingMessageEvents failed",t)}}isInitialized(){if(!this.initialized){const{message:t}=be("NOT_INITIALIZED",this.name);throw new Error(t)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(cn.message,t=>{this.onProviderMessageEvent(t)})}async onRelayMessage(t){const{topic:n,message:r,attestation:i,transportType:a}=t,{publicKey:c}=this.client.auth.authKeys.keys.includes(Gh)?this.client.auth.authKeys.get(Gh):{publicKey:void 0};try{const u=await this.client.core.crypto.decode(n,r,{receiverPublicKey:c,encoding:a===wt.link_mode?oo:ri});ww(u)?(this.client.core.history.set(n,u),await this.onRelayEventRequest({topic:n,payload:u,attestation:i,transportType:a,encryptedId:Si(r)})):Zp(u)?(await this.client.core.history.resolve(u),await this.onRelayEventResponse({topic:n,payload:u,transportType:a}),this.client.core.history.delete(n,u.id)):await this.onRelayEventUnknownPayload({topic:n,payload:u,transportType:a}),await this.client.core.relayer.messages.ack(n,r)}catch(u){this.client.logger.error(u)}}registerExpirerEvents(){this.client.core.expirer.on(Br.expired,async t=>{const{topic:n,id:r}=eC(t.target);if(r&&this.client.pendingRequest.keys.includes(r))return await this.deletePendingSessionRequest(r,be("EXPIRED"),!0);if(r&&this.client.auth.requests.keys.includes(r))return await this.deletePendingAuthRequest(r,be("EXPIRED"),!0);n?this.client.session.keys.includes(n)&&(await this.deleteSession({topic:n,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:n})):r&&(await this.deleteProposal(r,!0),this.client.events.emit("proposal_expire",{id:r}))})}registerPairingEvents(){this.client.core.pairing.events.on(Xo.create,t=>this.onPairingCreated(t)),this.client.core.pairing.events.on(Xo.delete,t=>{this.addToRecentlyDeleted(t.topic,"pairing")})}isValidPairingTopic(t){if(!jt(t,!1)){const{message:n}=be("MISSING_OR_INVALID",`pairing topic should be a string: ${t}`);throw new Error(n)}if(!this.client.core.pairing.pairings.keys.includes(t)){const{message:n}=be("NO_MATCHING_KEY",`pairing topic doesn't exist: ${t}`);throw new Error(n)}if(to(this.client.core.pairing.pairings.get(t).expiry)){const{message:n}=be("EXPIRED",`pairing topic: ${t}`);throw new Error(n)}}async isValidSessionTopic(t){if(!jt(t,!1)){const{message:n}=be("MISSING_OR_INVALID",`session topic should be a string: ${t}`);throw new Error(n)}if(this.checkRecentlyDeleted(t),!this.client.session.keys.includes(t)){const{message:n}=be("NO_MATCHING_KEY",`session topic doesn't exist: ${t}`);throw new Error(n)}if(to(this.client.session.get(t).expiry)){await this.deleteSession({topic:t});const{message:n}=be("EXPIRED",`session topic: ${t}`);throw new Error(n)}if(!this.client.core.crypto.keychain.has(t)){const{message:n}=be("MISSING_OR_INVALID",`session topic does not exist in keychain: ${t}`);throw await this.deleteSession({topic:t}),new Error(n)}}async isValidSessionOrPairingTopic(t){if(this.checkRecentlyDeleted(t),this.client.session.keys.includes(t))await this.isValidSessionTopic(t);else if(this.client.core.pairing.pairings.keys.includes(t))this.isValidPairingTopic(t);else if(jt(t,!1)){const{message:n}=be("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${t}`);throw new Error(n)}else{const{message:n}=be("MISSING_OR_INVALID",`session or pairing topic should be a string: ${t}`);throw new Error(n)}}async isValidProposalId(t){if(!oK(t)){const{message:n}=be("MISSING_OR_INVALID",`proposal id should be a number: ${t}`);throw new Error(n)}if(!this.client.proposal.keys.includes(t)){const{message:n}=be("NO_MATCHING_KEY",`proposal id doesn't exist: ${t}`);throw new Error(n)}if(to(this.client.proposal.get(t).expiryTimestamp)){await this.deleteProposal(t);const{message:n}=be("EXPIRED",`proposal id: ${t}`);throw new Error(n)}}}class RJ extends xa{constructor(t,n){super(t,n,lJ,Ew),this.core=t,this.logger=n}}let OJ=class extends xa{constructor(t,n){super(t,n,uJ,Ew),this.core=t,this.logger=n}};class TJ extends xa{constructor(t,n){super(t,n,hJ,Ew,r=>r.id),this.core=t,this.logger=n}}class DJ extends xa{constructor(t,n){super(t,n,yJ,Jp,()=>Gh),this.core=t,this.logger=n}}class CJ extends xa{constructor(t,n){super(t,n,bJ,Jp),this.core=t,this.logger=n}}class IJ extends xa{constructor(t,n){super(t,n,vJ,Jp,r=>r.id),this.core=t,this.logger=n}}var NJ=Object.defineProperty,$J=(e,t,n)=>t in e?NJ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,P0=(e,t,n)=>$J(e,typeof t!="symbol"?t+"":t,n);class UJ{constructor(t,n){this.core=t,this.logger=n,P0(this,"authKeys"),P0(this,"pairingTopics"),P0(this,"requests"),this.authKeys=new DJ(this.core,this.logger),this.pairingTopics=new CJ(this.core,this.logger),this.requests=new IJ(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}var BJ=Object.defineProperty,PJ=(e,t,n)=>t in e?BJ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,je=(e,t,n)=>PJ(e,typeof t!="symbol"?t+"":t,n);let kJ=class NI extends tY{constructor(t){super(t),je(this,"protocol",DI),je(this,"version",CI),je(this,"name",U0.name),je(this,"metadata"),je(this,"core"),je(this,"logger"),je(this,"events",new tr.EventEmitter),je(this,"engine"),je(this,"session"),je(this,"proposal"),je(this,"pendingRequest"),je(this,"auth"),je(this,"signConfig"),je(this,"on",(r,i)=>this.events.on(r,i)),je(this,"once",(r,i)=>this.events.once(r,i)),je(this,"off",(r,i)=>this.events.off(r,i)),je(this,"removeListener",(r,i)=>this.events.removeListener(r,i)),je(this,"removeAllListeners",r=>this.events.removeAllListeners(r)),je(this,"connect",async r=>{try{return await this.engine.connect(r)}catch(i){throw this.logger.error(i.message),i}}),je(this,"pair",async r=>{try{return await this.engine.pair(r)}catch(i){throw this.logger.error(i.message),i}}),je(this,"approve",async r=>{try{return await this.engine.approve(r)}catch(i){throw this.logger.error(i.message),i}}),je(this,"reject",async r=>{try{return await this.engine.reject(r)}catch(i){throw this.logger.error(i.message),i}}),je(this,"update",async r=>{try{return await this.engine.update(r)}catch(i){throw this.logger.error(i.message),i}}),je(this,"extend",async r=>{try{return await this.engine.extend(r)}catch(i){throw this.logger.error(i.message),i}}),je(this,"request",async r=>{try{return await this.engine.request(r)}catch(i){throw this.logger.error(i.message),i}}),je(this,"respond",async r=>{try{return await this.engine.respond(r)}catch(i){throw this.logger.error(i.message),i}}),je(this,"ping",async r=>{try{return await this.engine.ping(r)}catch(i){throw this.logger.error(i.message),i}}),je(this,"emit",async r=>{try{return await this.engine.emit(r)}catch(i){throw this.logger.error(i.message),i}}),je(this,"disconnect",async r=>{try{return await this.engine.disconnect(r)}catch(i){throw this.logger.error(i.message),i}}),je(this,"find",r=>{try{return this.engine.find(r)}catch(i){throw this.logger.error(i.message),i}}),je(this,"getPendingSessionRequests",()=>{try{return this.engine.getPendingSessionRequests()}catch(r){throw this.logger.error(r.message),r}}),je(this,"authenticate",async(r,i)=>{try{return await this.engine.authenticate(r,i)}catch(a){throw this.logger.error(a.message),a}}),je(this,"formatAuthMessage",r=>{try{return this.engine.formatAuthMessage(r)}catch(i){throw this.logger.error(i.message),i}}),je(this,"approveSessionAuthenticate",async r=>{try{return await this.engine.approveSessionAuthenticate(r)}catch(i){throw this.logger.error(i.message),i}}),je(this,"rejectSessionAuthenticate",async r=>{try{return await this.engine.rejectSessionAuthenticate(r)}catch(i){throw this.logger.error(i.message),i}}),this.name=t?.name||U0.name,this.metadata=DH(t?.metadata),this.signConfig=t?.signConfig;const n=typeof t?.logger<"u"&&typeof t?.logger!="string"?t.logger:Pf(Wp({level:t?.logger||U0.logger}));this.core=t?.core||new cJ(t),this.logger=kn(n,this.name),this.session=new OJ(this.core,this.logger),this.proposal=new RJ(this.core,this.logger),this.pendingRequest=new TJ(this.core,this.logger),this.engine=new AJ(this),this.auth=new UJ(this.core,this.logger)}static async init(t){const n=new NI(t);return await n.initialize(),n}get context(){return ir(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success")}catch(t){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(t.message),t}}};var Eh={exports:{}},PR;function MJ(){return PR||(PR=1,function(e,t){var n=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof Xn<"u"&&Xn,r=function(){function a(){this.fetch=!1,this.DOMException=n.DOMException}return a.prototype=n,new a}();(function(a){(function(c){var u=typeof a<"u"&&a||typeof self<"u"&&self||typeof Xn<"u"&&Xn||{},f={searchParams:"URLSearchParams"in u,iterable:"Symbol"in u&&"iterator"in Symbol,blob:"FileReader"in u&&"Blob"in u&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in u,arrayBuffer:"ArrayBuffer"in u};function d(D){return D&&DataView.prototype.isPrototypeOf(D)}if(f.arrayBuffer)var p=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],g=ArrayBuffer.isView||function(D){return D&&p.indexOf(Object.prototype.toString.call(D))>-1};function y(D){if(typeof D!="string"&&(D=String(D)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(D)||D==="")throw new TypeError('Invalid character in header field name: "'+D+'"');return D.toLowerCase()}function b(D){return typeof D!="string"&&(D=String(D)),D}function v(D){var R={next:function(){var L=D.shift();return{done:L===void 0,value:L}}};return f.iterable&&(R[Symbol.iterator]=function(){return R}),R}function E(D){this.map={},D instanceof E?D.forEach(function(R,L){this.append(L,R)},this):Array.isArray(D)?D.forEach(function(R){if(R.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+R.length);this.append(R[0],R[1])},this):D&&Object.getOwnPropertyNames(D).forEach(function(R){this.append(R,D[R])},this)}E.prototype.append=function(D,R){D=y(D),R=b(R);var L=this.map[D];this.map[D]=L?L+", "+R:R},E.prototype.delete=function(D){delete this.map[y(D)]},E.prototype.get=function(D){return D=y(D),this.has(D)?this.map[D]:null},E.prototype.has=function(D){return this.map.hasOwnProperty(y(D))},E.prototype.set=function(D,R){this.map[y(D)]=b(R)},E.prototype.forEach=function(D,R){for(var L in this.map)this.map.hasOwnProperty(L)&&D.call(R,this.map[L],L,this)},E.prototype.keys=function(){var D=[];return this.forEach(function(R,L){D.push(L)}),v(D)},E.prototype.values=function(){var D=[];return this.forEach(function(R){D.push(R)}),v(D)},E.prototype.entries=function(){var D=[];return this.forEach(function(R,L){D.push([L,R])}),v(D)},f.iterable&&(E.prototype[Symbol.iterator]=E.prototype.entries);function S(D){if(!D._noBody){if(D.bodyUsed)return Promise.reject(new TypeError("Already read"));D.bodyUsed=!0}}function x(D){return new Promise(function(R,L){D.onload=function(){R(D.result)},D.onerror=function(){L(D.error)}})}function T(D){var R=new FileReader,L=x(R);return R.readAsArrayBuffer(D),L}function O(D){var R=new FileReader,L=x(R),V=/charset=([A-Za-z0-9_-]+)/.exec(D.type),X=V?V[1]:"utf-8";return R.readAsText(D,X),L}function U(D){for(var R=new Uint8Array(D),L=new Array(R.length),V=0;V<R.length;V++)L[V]=String.fromCharCode(R[V]);return L.join("")}function N(D){if(D.slice)return D.slice(0);var R=new Uint8Array(D.byteLength);return R.set(new Uint8Array(D)),R.buffer}function I(){return this.bodyUsed=!1,this._initBody=function(D){this.bodyUsed=this.bodyUsed,this._bodyInit=D,D?typeof D=="string"?this._bodyText=D:f.blob&&Blob.prototype.isPrototypeOf(D)?this._bodyBlob=D:f.formData&&FormData.prototype.isPrototypeOf(D)?this._bodyFormData=D:f.searchParams&&URLSearchParams.prototype.isPrototypeOf(D)?this._bodyText=D.toString():f.arrayBuffer&&f.blob&&d(D)?(this._bodyArrayBuffer=N(D.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):f.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(D)||g(D))?this._bodyArrayBuffer=N(D):this._bodyText=D=Object.prototype.toString.call(D):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof D=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):f.searchParams&&URLSearchParams.prototype.isPrototypeOf(D)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},f.blob&&(this.blob=function(){var D=S(this);if(D)return D;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var D=S(this);return D||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(f.blob)return this.blob().then(T);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var D=S(this);if(D)return D;if(this._bodyBlob)return O(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(U(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},f.formData&&(this.formData=function(){return this.text().then(G)}),this.json=function(){return this.text().then(JSON.parse)},this}var j=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function z(D){var R=D.toUpperCase();return j.indexOf(R)>-1?R:D}function P(D,R){if(!(this instanceof P))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');R=R||{};var L=R.body;if(D instanceof P){if(D.bodyUsed)throw new TypeError("Already read");this.url=D.url,this.credentials=D.credentials,R.headers||(this.headers=new E(D.headers)),this.method=D.method,this.mode=D.mode,this.signal=D.signal,!L&&D._bodyInit!=null&&(L=D._bodyInit,D.bodyUsed=!0)}else this.url=String(D);if(this.credentials=R.credentials||this.credentials||"same-origin",(R.headers||!this.headers)&&(this.headers=new E(R.headers)),this.method=z(R.method||this.method||"GET"),this.mode=R.mode||this.mode||null,this.signal=R.signal||this.signal||function(){if("AbortController"in u){var $=new AbortController;return $.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&L)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(L),(this.method==="GET"||this.method==="HEAD")&&(R.cache==="no-store"||R.cache==="no-cache")){var V=/([?&])_=[^&]*/;if(V.test(this.url))this.url=this.url.replace(V,"$1_="+new Date().getTime());else{var X=/\?/;this.url+=(X.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}P.prototype.clone=function(){return new P(this,{body:this._bodyInit})};function G(D){var R=new FormData;return D.trim().split("&").forEach(function(L){if(L){var V=L.split("="),X=V.shift().replace(/\+/g," "),$=V.join("=").replace(/\+/g," ");R.append(decodeURIComponent(X),decodeURIComponent($))}}),R}function F(D){var R=new E,L=D.replace(/\r?\n[\t ]+/g," ");return L.split("\r").map(function(V){return V.indexOf(`
`)===0?V.substr(1,V.length):V}).forEach(function(V){var X=V.split(":"),$=X.shift().trim();if($){var W=X.join(":").trim();try{R.append($,W)}catch(te){console.warn("Response "+te.message)}}}),R}I.call(P.prototype);function K(D,R){if(!(this instanceof K))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(R||(R={}),this.type="default",this.status=R.status===void 0?200:R.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=R.statusText===void 0?"":""+R.statusText,this.headers=new E(R.headers),this.url=R.url||"",this._initBody(D)}I.call(K.prototype),K.prototype.clone=function(){return new K(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new E(this.headers),url:this.url})},K.error=function(){var D=new K(null,{status:200,statusText:""});return D.ok=!1,D.status=0,D.type="error",D};var re=[301,302,303,307,308];K.redirect=function(D,R){if(re.indexOf(R)===-1)throw new RangeError("Invalid status code");return new K(null,{status:R,headers:{location:D}})},c.DOMException=u.DOMException;try{new c.DOMException}catch{c.DOMException=function(R,L){this.message=R,this.name=L;var V=Error(R);this.stack=V.stack},c.DOMException.prototype=Object.create(Error.prototype),c.DOMException.prototype.constructor=c.DOMException}function J(D,R){return new Promise(function(L,V){var X=new P(D,R);if(X.signal&&X.signal.aborted)return V(new c.DOMException("Aborted","AbortError"));var $=new XMLHttpRequest;function W(){$.abort()}$.onload=function(){var ne={statusText:$.statusText,headers:F($.getAllResponseHeaders()||"")};X.url.indexOf("file://")===0&&($.status<200||$.status>599)?ne.status=200:ne.status=$.status,ne.url="responseURL"in $?$.responseURL:ne.headers.get("X-Request-URL");var ue="response"in $?$.response:$.responseText;setTimeout(function(){L(new K(ue,ne))},0)},$.onerror=function(){setTimeout(function(){V(new TypeError("Network request failed"))},0)},$.ontimeout=function(){setTimeout(function(){V(new TypeError("Network request timed out"))},0)},$.onabort=function(){setTimeout(function(){V(new c.DOMException("Aborted","AbortError"))},0)};function te(ne){try{return ne===""&&u.location.href?u.location.href:ne}catch{return ne}}if($.open(X.method,te(X.url),!0),X.credentials==="include"?$.withCredentials=!0:X.credentials==="omit"&&($.withCredentials=!1),"responseType"in $&&(f.blob?$.responseType="blob":f.arrayBuffer&&($.responseType="arraybuffer")),R&&typeof R.headers=="object"&&!(R.headers instanceof E||u.Headers&&R.headers instanceof u.Headers)){var se=[];Object.getOwnPropertyNames(R.headers).forEach(function(ne){se.push(y(ne)),$.setRequestHeader(ne,b(R.headers[ne]))}),X.headers.forEach(function(ne,ue){se.indexOf(ue)===-1&&$.setRequestHeader(ue,ne)})}else X.headers.forEach(function(ne,ue){$.setRequestHeader(ue,ne)});X.signal&&(X.signal.addEventListener("abort",W),$.onreadystatechange=function(){$.readyState===4&&X.signal.removeEventListener("abort",W)}),$.send(typeof X._bodyInit>"u"?null:X._bodyInit)})}return J.polyfill=!0,u.fetch||(u.fetch=J,u.Headers=E,u.Request=P,u.Response=K),c.Headers=E,c.Request=P,c.Response=K,c.fetch=J,Object.defineProperty(c,"__esModule",{value:!0}),c})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var i=n.fetch?n:r;t=i.fetch,t.default=i.fetch,t.fetch=i.fetch,t.Headers=i.Headers,t.Request=i.Request,t.Response=i.Response,e.exports=t}(Eh,Eh.exports)),Eh.exports}var LJ=MJ();const kR=ws(LJ);var jJ=Object.defineProperty,zJ=Object.defineProperties,qJ=Object.getOwnPropertyDescriptors,MR=Object.getOwnPropertySymbols,HJ=Object.prototype.hasOwnProperty,FJ=Object.prototype.propertyIsEnumerable,LR=(e,t,n)=>t in e?jJ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,jR=(e,t)=>{for(var n in t||(t={}))HJ.call(t,n)&&LR(e,n,t[n]);if(MR)for(var n of MR(t))FJ.call(t,n)&&LR(e,n,t[n]);return e},zR=(e,t)=>zJ(e,qJ(t));const VJ={Accept:"application/json","Content-Type":"application/json"},GJ="POST",qR={headers:VJ,method:GJ},HR=10;let oi=class{constructor(t,n=!1){if(this.url=t,this.disableProviderPing=n,this.events=new tr.EventEmitter,this.isAvailable=!1,this.registering=!1,!sR(t))throw new Error(`Provided URL is not compatible with HTTP connection: ${t}`);this.url=t,this.disableProviderPing=n}get connected(){return this.isAvailable}get connecting(){return this.registering}on(t,n){this.events.on(t,n)}once(t,n){this.events.once(t,n)}off(t,n){this.events.off(t,n)}removeListener(t,n){this.events.removeListener(t,n)}async open(t=this.url){await this.register(t)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(t){this.isAvailable||await this.register();try{const n=ys(t),r=await(await kR(this.url,zR(jR({},qR),{body:n}))).json();this.onPayload({data:r})}catch(n){this.onError(t.id,n)}}async register(t=this.url){if(!sR(t))throw new Error(`Provided URL is not compatible with HTTP connection: ${t}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((r,i)=>{this.events.once("register_error",a=>{this.resetMaxListeners(),i(a)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return i(new Error("HTTP connection is missing or invalid"));r()})})}this.url=t,this.registering=!0;try{if(!this.disableProviderPing){const n=ys({id:1,jsonrpc:"2.0",method:"test",params:[]});await kR(t,zR(jR({},qR),{body:n}))}this.onOpen()}catch(n){const r=this.parseError(n);throw this.events.emit("register_error",r),this.onClose(),r}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(t){if(typeof t.data>"u")return;const n=typeof t.data=="string"?la(t.data):t.data;this.events.emit("payload",n)}onError(t,n){const r=this.parseError(n),i=r.message||r.toString(),a=Xp(t,i);this.events.emit("payload",a)}parseError(t,n=this.url){return lI(t,n,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>HR&&this.events.setMaxListeners(HR)}};const FR="error",KJ="wss://relay.walletconnect.org",WJ="wc",YJ="universal_provider",Sh=`${WJ}@2:${YJ}:`,$I="https://rpc.walletconnect.org/v1/",Mc="generic",XJ=`${$I}bundler`,Fr={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};function Sw(e){return e==null||typeof e!="object"&&typeof e!="function"}function UI(e){return Object.getOwnPropertySymbols(e).filter(t=>Object.prototype.propertyIsEnumerable.call(e,t))}function BI(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const ZJ="[object RegExp]",PI="[object String]",kI="[object Number]",MI="[object Boolean]",LI="[object Arguments]",QJ="[object Symbol]",JJ="[object Date]",eee="[object Map]",tee="[object Set]",nee="[object Array]",ree="[object ArrayBuffer]",iee="[object Object]",see="[object DataView]",oee="[object Uint8Array]",aee="[object Uint8ClampedArray]",cee="[object Uint16Array]",lee="[object Uint32Array]",uee="[object Int8Array]",fee="[object Int16Array]",dee="[object Int32Array]",hee="[object Float32Array]",pee="[object Float64Array]";function _w(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function gee(e,t){return zc(e,void 0,e,new Map,t)}function zc(e,t,n,r=new Map,i=void 0){const a=i?.(e,t,n,r);if(a!=null)return a;if(Sw(e))return e;if(r.has(e))return r.get(e);if(Array.isArray(e)){const c=new Array(e.length);r.set(e,c);for(let u=0;u<e.length;u++)c[u]=zc(e[u],u,n,r,i);return Object.hasOwn(e,"index")&&(c.index=e.index),Object.hasOwn(e,"input")&&(c.input=e.input),c}if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp){const c=new RegExp(e.source,e.flags);return c.lastIndex=e.lastIndex,c}if(e instanceof Map){const c=new Map;r.set(e,c);for(const[u,f]of e)c.set(u,zc(f,u,n,r,i));return c}if(e instanceof Set){const c=new Set;r.set(e,c);for(const u of e)c.add(zc(u,void 0,n,r,i));return c}if(typeof Buffer<"u"&&Buffer.isBuffer(e))return e.subarray();if(_w(e)){const c=new(Object.getPrototypeOf(e)).constructor(e.length);r.set(e,c);for(let u=0;u<e.length;u++)c[u]=zc(e[u],u,n,r,i);return c}if(e instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&e instanceof SharedArrayBuffer)return e.slice(0);if(e instanceof DataView){const c=new DataView(e.buffer.slice(0),e.byteOffset,e.byteLength);return r.set(e,c),Zo(c,e,n,r,i),c}if(typeof File<"u"&&e instanceof File){const c=new File([e],e.name,{type:e.type});return r.set(e,c),Zo(c,e,n,r,i),c}if(e instanceof Blob){const c=new Blob([e],{type:e.type});return r.set(e,c),Zo(c,e,n,r,i),c}if(e instanceof Error){const c=new e.constructor;return r.set(e,c),c.message=e.message,c.name=e.name,c.stack=e.stack,c.cause=e.cause,Zo(c,e,n,r,i),c}if(typeof e=="object"&&mee(e)){const c=Object.create(Object.getPrototypeOf(e));return r.set(e,c),Zo(c,e,n,r,i),c}return e}function Zo(e,t,n=e,r,i){const a=[...Object.keys(t),...UI(t)];for(let c=0;c<a.length;c++){const u=a[c],f=Object.getOwnPropertyDescriptor(e,u);(f==null||f.writable)&&(e[u]=zc(t[u],u,n,r,i))}}function mee(e){switch(BI(e)){case LI:case nee:case ree:case see:case MI:case JJ:case hee:case pee:case uee:case fee:case dee:case eee:case kI:case iee:case ZJ:case tee:case PI:case QJ:case oee:case aee:case cee:case lee:return!0;default:return!1}}function yee(e,t){return gee(e,(n,r,i,a)=>{if(typeof e=="object")switch(Object.prototype.toString.call(e)){case kI:case PI:case MI:{const c=new e.constructor(e?.valueOf());return Zo(c,e),c}case LI:{const c={};return Zo(c,e),c.length=e.length,c[Symbol.iterator]=e[Symbol.iterator],c}default:return}})}function VR(e){return yee(e)}function GR(e){return e!==null&&typeof e=="object"&&BI(e)==="[object Arguments]"}function KR(e){return typeof e=="object"&&e!==null}function bee(){}function vee(e){return _w(e)}function wee(e){if(typeof e!="object"||e==null)return!1;if(Object.getPrototypeOf(e)===null)return!0;if(Object.prototype.toString.call(e)!=="[object Object]"){const n=e[Symbol.toStringTag];return n==null||!Object.getOwnPropertyDescriptor(e,Symbol.toStringTag)?.writable?!1:e.toString()===`[object ${n}]`}let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function Eee(e){if(Sw(e))return e;if(Array.isArray(e)||_w(e)||e instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&e instanceof SharedArrayBuffer)return e.slice(0);const t=Object.getPrototypeOf(e),n=t.constructor;if(e instanceof Date||e instanceof Map||e instanceof Set)return new n(e);if(e instanceof RegExp){const r=new n(e);return r.lastIndex=e.lastIndex,r}if(e instanceof DataView)return new n(e.buffer.slice(0));if(e instanceof Error){const r=new n(e.message);return r.stack=e.stack,r.name=e.name,r.cause=e.cause,r}if(typeof File<"u"&&e instanceof File)return new n([e],e.name,{type:e.type,lastModified:e.lastModified});if(typeof e=="object"){const r=Object.create(t);return Object.assign(r,e)}return e}function See(e,...t){const n=t.slice(0,-1),r=t[t.length-1];let i=e;for(let a=0;a<n.length;a++){const c=n[a];i=av(i,c,r,new Map)}return i}function av(e,t,n,r){if(Sw(e)&&(e=Object(e)),t==null||typeof t!="object")return e;if(r.has(t))return Eee(r.get(t));if(r.set(t,e),Array.isArray(t)){t=t.slice();for(let a=0;a<t.length;a++)t[a]=t[a]??void 0}const i=[...Object.keys(t),...UI(t)];for(let a=0;a<i.length;a++){const c=i[a];let u=t[c],f=e[c];if(GR(u)&&(u={...u}),GR(f)&&(f={...f}),typeof Buffer<"u"&&Buffer.isBuffer(u)&&(u=VR(u)),Array.isArray(u))if(typeof f=="object"&&f!=null){const p=[],g=Reflect.ownKeys(f);for(let y=0;y<g.length;y++){const b=g[y];p[b]=f[b]}f=p}else f=[];const d=n(f,u,c,e,t,r);d!=null?e[c]=d:Array.isArray(u)||KR(f)&&KR(u)?e[c]=av(f,u,n,r):f==null&&wee(u)?e[c]=av({},u,n,r):f==null&&vee(u)?e[c]=VR(u):(f===void 0||u!==void 0)&&(e[c]=u)}return e}function _ee(e,...t){return See(e,...t,bee)}var xee=Object.defineProperty,Aee=Object.defineProperties,Ree=Object.getOwnPropertyDescriptors,WR=Object.getOwnPropertySymbols,Oee=Object.prototype.hasOwnProperty,Tee=Object.prototype.propertyIsEnumerable,YR=(e,t,n)=>t in e?xee(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,_h=(e,t)=>{for(var n in t||(t={}))Oee.call(t,n)&&YR(e,n,t[n]);if(WR)for(var n of WR(t))Tee.call(t,n)&&YR(e,n,t[n]);return e},Dee=(e,t)=>Aee(e,Ree(t));function vr(e,t,n){var r;const i=Vc(e);return((r=t.rpcMap)==null?void 0:r[i.reference])||`${$I}?chainId=${i.namespace}:${i.reference}&projectId=${n}`}function Aa(e){return e.includes(":")?e.split(":")[1]:e}function jI(e){return e.map(t=>`${t.split(":")[0]}:${t.split(":")[1]}`)}function Cee(e,t){const n=Object.keys(t.namespaces).filter(i=>i.includes(e));if(!n.length)return[];const r=[];return n.forEach(i=>{const a=t.namespaces[i].accounts;r.push(...a)}),r}function xh(e={},t={}){const n=XR(e),r=XR(t);return _ee(n,r)}function XR(e){var t,n,r,i,a;const c={};if(!Ri(e))return c;for(const[u,f]of Object.entries(e)){const d=Fp(u)?[u]:f.chains,p=f.methods||[],g=f.events||[],y=f.rpcMap||{},b=jc(u);c[b]=Dee(_h(_h({},c[b]),f),{chains:Ai(d,(t=c[b])==null?void 0:t.chains),methods:Ai(p,(n=c[b])==null?void 0:n.methods),events:Ai(g,(r=c[b])==null?void 0:r.events)}),(Ri(y)||Ri(((i=c[b])==null?void 0:i.rpcMap)||{}))&&(c[b].rpcMap=_h(_h({},y),(a=c[b])==null?void 0:a.rpcMap))}return c}function ZR(e){return e.includes(":")?e.split(":")[2]:e}function QR(e){const t={};for(const[n,r]of Object.entries(e)){const i=r.methods||[],a=r.events||[],c=r.accounts||[],u=Fp(n)?[n]:r.chains?r.chains:jI(r.accounts);t[n]={chains:u,methods:i,events:a,accounts:c}}return t}function k0(e){return typeof e=="number"?e:e.includes("0x")?parseInt(e,16):(e=e.includes(":")?e.split(":")[1]:e,isNaN(Number(e))?e:Number(e))}const zI={},Ke=e=>zI[e],M0=(e,t)=>{zI[e]=t};var Iee=Object.defineProperty,JR=Object.getOwnPropertySymbols,Nee=Object.prototype.hasOwnProperty,$ee=Object.prototype.propertyIsEnumerable,eO=(e,t,n)=>t in e?Iee(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,tO=(e,t)=>{for(var n in t||(t={}))Nee.call(t,n)&&eO(e,n,t[n]);if(JR)for(var n of JR(t))$ee.call(t,n)&&eO(e,n,t[n]);return e};const nO="eip155",Uee=["atomic","flow-control","paymasterService","sessionKeys","auxiliaryFunds"],Bee=e=>e&&e.startsWith("0x")?BigInt(e).toString(10):e,L0=e=>e&&e.startsWith("0x")?e:`0x${BigInt(e).toString(16)}`,rO=e=>Object.keys(e).filter(t=>Uee.includes(t)).reduce((t,n)=>(t[n]=e[n],t),{}),Pee=(e,t,n)=>{const{sessionProperties:r={},scopedProperties:i={}}=e,a={};if(!Ri(i)&&!Ri(r))return;const c=rO(r);for(const u of n){const f=Bee(u);if(!f)continue;a[L0(f)]=c;const d=i?.[`${nO}:${f}`];if(d){const p=d?.[`${nO}:${f}:${t}`];a[L0(f)]=tO(tO({},a[L0(f)]),rO(p||d))}}for(const[u,f]of Object.entries(a))Object.keys(f).length===0&&delete a[u];return Object.keys(a).length>0?a:void 0};var kee=Object.defineProperty,Mee=(e,t,n)=>t in e?kee(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Sc=(e,t,n)=>Mee(e,typeof t!="symbol"?t+"":t,n);class Lee{constructor(t){Sc(this,"name","polkadot"),Sc(this,"client"),Sc(this,"httpProviders"),Sc(this,"events"),Sc(this,"namespace"),Sc(this,"chainId"),this.namespace=t.namespace,this.events=Ke("events"),this.client=Ke("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,n){this.httpProviders[t]||this.setHttpProvider(t,n),this.chainId=t,this.events.emit(Fr.DEFAULT_CHAIN_CHANGED,`${this.name}:${t}`)}getAccounts(){const t=this.namespace.accounts;return t?t.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(n=>{var r;const i=Aa(n);t[i]=this.createHttpProvider(i,(r=this.namespace.rpcMap)==null?void 0:r[n])}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,n=this.httpProviders[t];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return n}setHttpProvider(t,n){const r=this.createHttpProvider(t,n);r&&(this.httpProviders[t]=r)}createHttpProvider(t,n){const r=n||vr(t,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${t}`);return new Hr(new oi(r,Ke("disableProviderPing")))}}var jee=Object.defineProperty,zee=Object.defineProperties,qee=Object.getOwnPropertyDescriptors,iO=Object.getOwnPropertySymbols,Hee=Object.prototype.hasOwnProperty,Fee=Object.prototype.propertyIsEnumerable,cv=(e,t,n)=>t in e?jee(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,sO=(e,t)=>{for(var n in t||(t={}))Hee.call(t,n)&&cv(e,n,t[n]);if(iO)for(var n of iO(t))Fee.call(t,n)&&cv(e,n,t[n]);return e},oO=(e,t)=>zee(e,qee(t)),_c=(e,t,n)=>cv(e,typeof t!="symbol"?t+"":t,n);class Vee{constructor(t){_c(this,"name","eip155"),_c(this,"client"),_c(this,"chainId"),_c(this,"namespace"),_c(this,"httpProviders"),_c(this,"events"),this.namespace=t.namespace,this.events=Ke("events"),this.client=Ke("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(t){switch(t.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(t);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(t);case"wallet_getCallsStatus":return await this.getCallStatus(t)}return this.namespace.methods.includes(t.request.method)?await this.client.request(t):this.getHttpProvider().request(t.request)}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}setDefaultChain(t,n){this.httpProviders[t]||this.setHttpProvider(parseInt(t),n),this.chainId=parseInt(t),this.events.emit(Fr.DEFAULT_CHAIN_CHANGED,`${this.name}:${t}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}createHttpProvider(t,n){const r=n||vr(`${this.name}:${t}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${t}`);return new Hr(new oi(r,Ke("disableProviderPing")))}setHttpProvider(t,n){const r=this.createHttpProvider(t,n);r&&(this.httpProviders[t]=r)}createHttpProviders(){const t={};return this.namespace.chains.forEach(n=>{var r;const i=parseInt(Aa(n));t[i]=this.createHttpProvider(i,(r=this.namespace.rpcMap)==null?void 0:r[n])}),t}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}getHttpProvider(){const t=this.chainId,n=this.httpProviders[t];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return n}async handleSwitchChain(t){var n,r;let i=t.request.params?(n=t.request.params[0])==null?void 0:n.chainId:"0x0";i=i.startsWith("0x")?i:`0x${i}`;const a=parseInt(i,16);if(this.isChainApproved(a))this.setDefaultChain(`${a}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:t.topic,request:{method:t.request.method,params:[{chainId:i}]},chainId:(r=this.namespace.chains)==null?void 0:r[0]}),this.setDefaultChain(`${a}`);else throw new Error(`Failed to switch to chain 'eip155:${a}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(t){return this.namespace.chains.includes(`${this.name}:${t}`)}async getCapabilities(t){var n,r,i,a,c;const u=(r=(n=t.request)==null?void 0:n.params)==null?void 0:r[0],f=((a=(i=t.request)==null?void 0:i.params)==null?void 0:a[1])||[];if(!u)throw new Error("Missing address parameter in `wallet_getCapabilities` request");const d=this.client.session.get(t.topic),p=((c=d?.sessionProperties)==null?void 0:c.capabilities)||{},g=`${u}${f.join(",")}`,y=p?.[g];if(y)return y;let b;try{b=Pee(d,u,f)}catch(E){console.warn("Failed to extract capabilities from session",E)}if(b)return b;const v=await this.client.request(t);try{await this.client.session.update(t.topic,{sessionProperties:oO(sO({},d.sessionProperties||{}),{capabilities:oO(sO({},p||{}),{[g]:v})})})}catch(E){console.warn("Failed to update session with capabilities",E)}return v}async getCallStatus(t){var n,r;const i=this.client.session.get(t.topic),a=(n=i.sessionProperties)==null?void 0:n.bundler_name;if(a){const u=this.getBundlerUrl(t.chainId,a);try{return await this.getUserOperationReceipt(u,t)}catch(f){console.warn("Failed to fetch call status from bundler",f,u)}}const c=(r=i.sessionProperties)==null?void 0:r.bundler_url;if(c)try{return await this.getUserOperationReceipt(c,t)}catch(u){console.warn("Failed to fetch call status from custom bundler",u,c)}if(this.namespace.methods.includes(t.request.method))return await this.client.request(t);throw new Error("Fetching call status not approved by the wallet.")}async getUserOperationReceipt(t,n){var r;const i=new URL(t),a=await fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(co("eth_getUserOperationReceipt",[(r=n.request.params)==null?void 0:r[0]]))});if(!a.ok)throw new Error(`Failed to fetch user operation receipt - ${a.status}`);return await a.json()}getBundlerUrl(t,n){return`${XJ}?projectId=${this.client.core.projectId}&chainId=${t}&bundler=${n}`}}var Gee=Object.defineProperty,Kee=(e,t,n)=>t in e?Gee(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,xc=(e,t,n)=>Kee(e,typeof t!="symbol"?t+"":t,n);class Wee{constructor(t){xc(this,"name","solana"),xc(this,"client"),xc(this,"httpProviders"),xc(this,"events"),xc(this,"namespace"),xc(this,"chainId"),this.namespace=t.namespace,this.events=Ke("events"),this.client=Ke("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,n){this.httpProviders[t]||this.setHttpProvider(t,n),this.chainId=t,this.events.emit(Fr.DEFAULT_CHAIN_CHANGED,`${this.name}:${t}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(n=>{var r;const i=Aa(n);t[i]=this.createHttpProvider(i,(r=this.namespace.rpcMap)==null?void 0:r[n])}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,n=this.httpProviders[t];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return n}setHttpProvider(t,n){const r=this.createHttpProvider(t,n);r&&(this.httpProviders[t]=r)}createHttpProvider(t,n){const r=n||vr(t,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${t}`);return new Hr(new oi(r,Ke("disableProviderPing")))}}var Yee=Object.defineProperty,Xee=(e,t,n)=>t in e?Yee(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ac=(e,t,n)=>Xee(e,typeof t!="symbol"?t+"":t,n);class Zee{constructor(t){Ac(this,"name","cosmos"),Ac(this,"client"),Ac(this,"httpProviders"),Ac(this,"events"),Ac(this,"namespace"),Ac(this,"chainId"),this.namespace=t.namespace,this.events=Ke("events"),this.client=Ke("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,n){this.httpProviders[t]||this.setHttpProvider(t,n),this.chainId=t,this.events.emit(Fr.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(n=>{var r;const i=Aa(n);t[i]=this.createHttpProvider(i,(r=this.namespace.rpcMap)==null?void 0:r[n])}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,n=this.httpProviders[t];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return n}setHttpProvider(t,n){const r=this.createHttpProvider(t,n);r&&(this.httpProviders[t]=r)}createHttpProvider(t,n){const r=n||vr(t,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${t}`);return new Hr(new oi(r,Ke("disableProviderPing")))}}var Qee=Object.defineProperty,Jee=(e,t,n)=>t in e?Qee(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Rc=(e,t,n)=>Jee(e,typeof t!="symbol"?t+"":t,n);class ete{constructor(t){Rc(this,"name","algorand"),Rc(this,"client"),Rc(this,"httpProviders"),Rc(this,"events"),Rc(this,"namespace"),Rc(this,"chainId"),this.namespace=t.namespace,this.events=Ke("events"),this.client=Ke("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,n){if(!this.httpProviders[t]){const r=n||vr(`${this.name}:${t}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${t}`);this.setHttpProvider(t,r)}this.chainId=t,this.events.emit(Fr.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(n=>{var r;t[n]=this.createHttpProvider(n,(r=this.namespace.rpcMap)==null?void 0:r[n])}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,n=this.httpProviders[t];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return n}setHttpProvider(t,n){const r=this.createHttpProvider(t,n);r&&(this.httpProviders[t]=r)}createHttpProvider(t,n){const r=n||vr(t,this.namespace,this.client.core.projectId);return typeof r>"u"?void 0:new Hr(new oi(r,Ke("disableProviderPing")))}}var tte=Object.defineProperty,nte=(e,t,n)=>t in e?tte(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Oc=(e,t,n)=>nte(e,typeof t!="symbol"?t+"":t,n);class rte{constructor(t){Oc(this,"name","cip34"),Oc(this,"client"),Oc(this,"httpProviders"),Oc(this,"events"),Oc(this,"namespace"),Oc(this,"chainId"),this.namespace=t.namespace,this.events=Ke("events"),this.client=Ke("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,n){this.httpProviders[t]||this.setHttpProvider(t,n),this.chainId=t,this.events.emit(Fr.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(n=>{const r=this.getCardanoRPCUrl(n),i=Aa(n);t[i]=this.createHttpProvider(i,r)}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,n=this.httpProviders[t];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return n}getCardanoRPCUrl(t){const n=this.namespace.rpcMap;if(n)return n[t]}setHttpProvider(t,n){const r=this.createHttpProvider(t,n);r&&(this.httpProviders[t]=r)}createHttpProvider(t,n){const r=n||this.getCardanoRPCUrl(t);if(!r)throw new Error(`No RPC url provided for chainId: ${t}`);return new Hr(new oi(r,Ke("disableProviderPing")))}}var ite=Object.defineProperty,ste=(e,t,n)=>t in e?ite(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Tc=(e,t,n)=>ste(e,typeof t!="symbol"?t+"":t,n);class ote{constructor(t){Tc(this,"name","elrond"),Tc(this,"client"),Tc(this,"httpProviders"),Tc(this,"events"),Tc(this,"namespace"),Tc(this,"chainId"),this.namespace=t.namespace,this.events=Ke("events"),this.client=Ke("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,n){this.httpProviders[t]||this.setHttpProvider(t,n),this.chainId=t,this.events.emit(Fr.DEFAULT_CHAIN_CHANGED,`${this.name}:${t}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(n=>{var r;const i=Aa(n);t[i]=this.createHttpProvider(i,(r=this.namespace.rpcMap)==null?void 0:r[n])}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,n=this.httpProviders[t];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return n}setHttpProvider(t,n){const r=this.createHttpProvider(t,n);r&&(this.httpProviders[t]=r)}createHttpProvider(t,n){const r=n||vr(t,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${t}`);return new Hr(new oi(r,Ke("disableProviderPing")))}}var ate=Object.defineProperty,cte=(e,t,n)=>t in e?ate(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Dc=(e,t,n)=>cte(e,typeof t!="symbol"?t+"":t,n);class lte{constructor(t){Dc(this,"name","multiversx"),Dc(this,"client"),Dc(this,"httpProviders"),Dc(this,"events"),Dc(this,"namespace"),Dc(this,"chainId"),this.namespace=t.namespace,this.events=Ke("events"),this.client=Ke("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,n){this.httpProviders[t]||this.setHttpProvider(t,n),this.chainId=t,this.events.emit(Fr.DEFAULT_CHAIN_CHANGED,`${this.name}:${t}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(n=>{var r;const i=Aa(n);t[i]=this.createHttpProvider(i,(r=this.namespace.rpcMap)==null?void 0:r[n])}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,n=this.httpProviders[t];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return n}setHttpProvider(t,n){const r=this.createHttpProvider(t,n);r&&(this.httpProviders[t]=r)}createHttpProvider(t,n){const r=n||vr(t,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${t}`);return new Hr(new oi(r,Ke("disableProviderPing")))}}var ute=Object.defineProperty,fte=(e,t,n)=>t in e?ute(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Cc=(e,t,n)=>fte(e,typeof t!="symbol"?t+"":t,n);class dte{constructor(t){Cc(this,"name","near"),Cc(this,"client"),Cc(this,"httpProviders"),Cc(this,"events"),Cc(this,"namespace"),Cc(this,"chainId"),this.namespace=t.namespace,this.events=Ke("events"),this.client=Ke("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,n){if(this.chainId=t,!this.httpProviders[t]){const r=n||vr(`${this.name}:${t}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${t}`);this.setHttpProvider(t,r)}this.events.emit(Fr.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const t=this.namespace.accounts;return t?t.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(n=>{var r;t[n]=this.createHttpProvider(n,(r=this.namespace.rpcMap)==null?void 0:r[n])}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,n=this.httpProviders[t];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return n}setHttpProvider(t,n){const r=this.createHttpProvider(t,n);r&&(this.httpProviders[t]=r)}createHttpProvider(t,n){const r=n||vr(t,this.namespace);return typeof r>"u"?void 0:new Hr(new oi(r,Ke("disableProviderPing")))}}var hte=Object.defineProperty,pte=(e,t,n)=>t in e?hte(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ic=(e,t,n)=>pte(e,typeof t!="symbol"?t+"":t,n);class gte{constructor(t){Ic(this,"name","tezos"),Ic(this,"client"),Ic(this,"httpProviders"),Ic(this,"events"),Ic(this,"namespace"),Ic(this,"chainId"),this.namespace=t.namespace,this.events=Ke("events"),this.client=Ke("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,n){if(this.chainId=t,!this.httpProviders[t]){const r=n||vr(`${this.name}:${t}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${t}`);this.setHttpProvider(t,r)}this.events.emit(Fr.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const t=this.namespace.accounts;return t?t.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(n=>{t[n]=this.createHttpProvider(n)}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,n=this.httpProviders[t];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return n}setHttpProvider(t,n){const r=this.createHttpProvider(t,n);r&&(this.httpProviders[t]=r)}createHttpProvider(t,n){const r=n||vr(t,this.namespace);return typeof r>"u"?void 0:new Hr(new oi(r))}}var mte=Object.defineProperty,yte=(e,t,n)=>t in e?mte(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Nc=(e,t,n)=>yte(e,typeof t!="symbol"?t+"":t,n);class bte{constructor(t){Nc(this,"name",Mc),Nc(this,"client"),Nc(this,"httpProviders"),Nc(this,"events"),Nc(this,"namespace"),Nc(this,"chainId"),this.namespace=t.namespace,this.events=Ke("events"),this.client=Ke("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(t.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(t.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(t.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(t.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider(t.chainId).request(t.request)}setDefaultChain(t,n){this.httpProviders[t]||this.setHttpProvider(t,n),this.chainId=t,this.events.emit(Fr.DEFAULT_CHAIN_CHANGED,`${this.name}:${t}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){var t,n;const r={};return(n=(t=this.namespace)==null?void 0:t.accounts)==null||n.forEach(i=>{const a=Vc(i);r[`${a.namespace}:${a.reference}`]=this.createHttpProvider(i)}),r}getHttpProvider(t){const n=this.httpProviders[t];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return n}setHttpProvider(t,n){const r=this.createHttpProvider(t,n);r&&(this.httpProviders[t]=r)}createHttpProvider(t,n){const r=n||vr(t,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${t}`);return new Hr(new oi(r,Ke("disableProviderPing")))}}var vte=Object.defineProperty,wte=Object.defineProperties,Ete=Object.getOwnPropertyDescriptors,aO=Object.getOwnPropertySymbols,Ste=Object.prototype.hasOwnProperty,_te=Object.prototype.propertyIsEnumerable,lv=(e,t,n)=>t in e?vte(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ah=(e,t)=>{for(var n in t||(t={}))Ste.call(t,n)&&lv(e,n,t[n]);if(aO)for(var n of aO(t))_te.call(t,n)&&lv(e,n,t[n]);return e},j0=(e,t)=>wte(e,Ete(t)),$r=(e,t,n)=>lv(e,typeof t!="symbol"?t+"":t,n);class xw{constructor(t){$r(this,"client"),$r(this,"namespaces"),$r(this,"optionalNamespaces"),$r(this,"sessionProperties"),$r(this,"scopedProperties"),$r(this,"events",new wp),$r(this,"rpcProviders",{}),$r(this,"session"),$r(this,"providerOpts"),$r(this,"logger"),$r(this,"uri"),$r(this,"disableProviderPing",!1),this.providerOpts=t,this.logger=typeof t?.logger<"u"&&typeof t?.logger!="string"?t.logger:Pf(Wp({level:t?.logger||FR})),this.disableProviderPing=t?.disableProviderPing||!1}static async init(t){const n=new xw(t);return await n.initialize(),n}async request(t,n,r){const[i,a]=this.validateChain(n);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(i).request({request:Ah({},t),chainId:`${i}:${a}`,topic:this.session.topic,expiry:r})}sendAsync(t,n,r,i){const a=new Date().getTime();this.request(t,r,i).then(c=>n(null,Yp(a,c))).catch(c=>n(c,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties}),await this.requestAccounts()}async disconnect(){var t;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(t=this.session)==null?void 0:t.topic,reason:St("USER_DISCONNECTED")}),await this.cleanup()}async connect(t){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(t),await this.cleanupPendingPairings(),!t.skipPairing)return await this.pair(t.pairingTopic)}async authenticate(t,n){if(!this.client)throw new Error("Sign Client not initialized");this.setNamespaces(t),await this.cleanupPendingPairings();const{uri:r,response:i}=await this.client.authenticate(t,n);r&&(this.uri=r,this.events.emit("display_uri",r));const a=await i();if(this.session=a.session,this.session){const c=QR(this.session.namespaces);this.namespaces=xh(this.namespaces,c),await this.persist("namespaces",this.namespaces),this.onConnect()}return a}on(t,n){this.events.on(t,n)}once(t,n){this.events.once(t,n)}removeListener(t,n){this.events.removeListener(t,n)}off(t,n){this.events.off(t,n)}get isWalletConnect(){return!0}async pair(t){const{uri:n,approval:r}=await this.client.connect({pairingTopic:t,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties});n&&(this.uri=n,this.events.emit("display_uri",n));const i=await r();this.session=i;const a=QR(i.namespaces);return this.namespaces=xh(this.namespaces,a),await this.persist("namespaces",this.namespaces),await this.persist("optionalNamespaces",this.optionalNamespaces),this.onConnect(),this.session}setDefaultChain(t,n){try{if(!this.session)return;const[r,i]=this.validateChain(t),a=this.getProvider(r);a.name===Mc?a.setDefaultChain(`${r}:${i}`,n):a.setDefaultChain(i,n)}catch(r){if(!/Please call connect/.test(r.message))throw r}}async cleanupPendingPairings(t={}){this.logger.info("Cleaning up inactive pairings...");const n=this.client.pairing.getAll();if(hs(n)){for(const r of n)t.deletePairings?this.client.core.expirer.set(r.topic,0):await this.client.core.relayer.subscriber.unsubscribe(r.topic);this.logger.info(`Inactive pairings cleared: ${n.length}`)}}abortPairingAttempt(){this.logger.warn("abortPairingAttempt is deprecated. This is now a no-op.")}async checkStorage(){this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.session&&this.createProviders()}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){var t,n;if(this.client=this.providerOpts.client||await kJ.init({core:this.providerOpts.core,logger:this.providerOpts.logger||FR,relayUrl:this.providerOpts.relayUrl||KJ,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.providerOpts.session)try{this.session=this.client.session.get(this.providerOpts.session.topic)}catch(r){throw this.logger.error("Failed to get session",r),new Error(`The provided session: ${(n=(t=this.providerOpts)==null?void 0:t.session)==null?void 0:n.topic} doesn't exist in the Sign client`)}else{const r=this.client.session.getAll();this.session=r[0]}this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const t=[...new Set(Object.keys(this.session.namespaces).map(n=>jc(n)))];M0("client",this.client),M0("events",this.events),M0("disableProviderPing",this.disableProviderPing),t.forEach(n=>{if(!this.session)return;const r=Cee(n,this.session),i=jI(r),a=xh(this.namespaces,this.optionalNamespaces),c=j0(Ah({},a[n]),{accounts:r,chains:i});switch(n){case"eip155":this.rpcProviders[n]=new Vee({namespace:c});break;case"algorand":this.rpcProviders[n]=new ete({namespace:c});break;case"solana":this.rpcProviders[n]=new Wee({namespace:c});break;case"cosmos":this.rpcProviders[n]=new Zee({namespace:c});break;case"polkadot":this.rpcProviders[n]=new Lee({namespace:c});break;case"cip34":this.rpcProviders[n]=new rte({namespace:c});break;case"elrond":this.rpcProviders[n]=new ote({namespace:c});break;case"multiversx":this.rpcProviders[n]=new lte({namespace:c});break;case"near":this.rpcProviders[n]=new dte({namespace:c});break;case"tezos":this.rpcProviders[n]=new gte({namespace:c});break;default:this.rpcProviders[Mc]?this.rpcProviders[Mc].updateNamespace(c):this.rpcProviders[Mc]=new bte({namespace:c})}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",t=>{var n;const{topic:r}=t;r===((n=this.session)==null?void 0:n.topic)&&this.events.emit("session_ping",t)}),this.client.on("session_event",t=>{var n;const{params:r,topic:i}=t;if(i!==((n=this.session)==null?void 0:n.topic))return;const{event:a}=r;if(a.name==="accountsChanged"){const c=a.data;c&&hs(c)&&this.events.emit("accountsChanged",c.map(ZR))}else if(a.name==="chainChanged"){const c=r.chainId,u=r.event.data,f=jc(c),d=k0(c)!==k0(u)?`${f}:${k0(u)}`:c;this.onChainChanged(d)}else this.events.emit(a.name,a.data);this.events.emit("session_event",t)}),this.client.on("session_update",({topic:t,params:n})=>{var r,i;if(t!==((r=this.session)==null?void 0:r.topic))return;const{namespaces:a}=n,c=(i=this.client)==null?void 0:i.session.get(t);this.session=j0(Ah({},c),{namespaces:a}),this.onSessionUpdate(),this.events.emit("session_update",{topic:t,params:n})}),this.client.on("session_delete",async t=>{var n;t.topic===((n=this.session)==null?void 0:n.topic)&&(await this.cleanup(),this.events.emit("session_delete",t),this.events.emit("disconnect",j0(Ah({},St("USER_DISCONNECTED")),{data:t.topic})))}),this.on(Fr.DEFAULT_CHAIN_CHANGED,t=>{this.onChainChanged(t,!0)})}getProvider(t){return this.rpcProviders[t]||this.rpcProviders[Mc]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(t=>{var n;this.getProvider(t).updateNamespace((n=this.session)==null?void 0:n.namespaces[t])})}setNamespaces(t){const{namespaces:n={},optionalNamespaces:r={},sessionProperties:i,scopedProperties:a}=t;this.optionalNamespaces=xh(n,r),this.sessionProperties=i,this.scopedProperties=a}validateChain(t){const[n,r]=t?.split(":")||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[n,r];if(n&&!Object.keys(this.namespaces||{}).map(c=>jc(c)).includes(n))throw new Error(`Namespace '${n}' is not configured. Please call connect() first with namespace config.`);if(n&&r)return[n,r];const i=jc(Object.keys(this.namespaces)[0]),a=this.rpcProviders[i].getDefaultChain();return[i,a]}async requestAccounts(){const[t]=this.validateChain();return await this.getProvider(t).requestAccounts()}async onChainChanged(t,n=!1){if(!this.namespaces)return;const[r,i]=this.validateChain(t);if(!i)return;this.updateNamespaceChain(r,i),this.events.emit("chainChanged",i);const a=this.getProvider(r).getDefaultChain();n||this.getProvider(r).setDefaultChain(i),this.emitAccountsChangedOnChainChange({namespace:r,previousChainId:a,newChainId:t}),await this.persist("namespaces",this.namespaces)}emitAccountsChangedOnChainChange({namespace:t,previousChainId:n,newChainId:r}){var i,a;try{if(n===r)return;const c=(a=(i=this.session)==null?void 0:i.namespaces[t])==null?void 0:a.accounts;if(!c)return;const u=c.filter(f=>f.includes(`${r}:`)).map(ZR);if(!hs(u))return;this.events.emit("accountsChanged",u)}catch(c){this.logger.warn("Failed to emit accountsChanged on chain change",c)}}updateNamespaceChain(t,n){if(!this.namespaces)return;const r=this.namespaces[t]?t:`${t}:${n}`,i={chains:[],methods:[],events:[],defaultChain:n};this.namespaces[r]?this.namespaces[r]&&(this.namespaces[r].defaultChain=n):this.namespaces[r]=i}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,await this.deleteFromStore("namespaces"),await this.deleteFromStore("optionalNamespaces"),await this.deleteFromStore("sessionProperties"),this.session=void 0,await this.cleanupPendingPairings({deletePairings:!0}),await this.cleanupStorage()}async persist(t,n){var r;const i=((r=this.session)==null?void 0:r.topic)||"";await this.client.core.storage.setItem(`${Sh}/${t}${i}`,n)}async getFromStore(t){var n;const r=((n=this.session)==null?void 0:n.topic)||"";return await this.client.core.storage.getItem(`${Sh}/${t}${r}`)}async deleteFromStore(t){var n;const r=((n=this.session)==null?void 0:n.topic)||"";await this.client.core.storage.removeItem(`${Sh}/${t}${r}`)}async cleanupStorage(){var t;try{if(((t=this.client)==null?void 0:t.session.length)>0)return;const n=await this.client.core.storage.getKeys();for(const r of n)r.startsWith(Sh)&&await this.client.core.storage.removeItem(r)}catch(n){this.logger.warn("Failed to cleanup storage",n)}}}const xte=xw;let xi=function(e){return e.FLOW_AUTHN="flow_authn",e.FLOW_PRE_AUTHZ="flow_pre_authz",e.FLOW_AUTHZ="flow_authz",e.FLOW_USER_SIGN="flow_user_sign",e}({}),qI=function(e){return e.SESSION_REQUEST="session_proposal",e.SIGNING_REQUEST="signing_request",e}({});const HI="fcl-plugin-service-walletconnect",FI="WC/RPC",Ate="pre-authz";function Rte(){return typeof navigator<"u"&&/android/i.test(navigator.userAgent)}function Ote(){return typeof navigator<"u"&&/iPhone|iPod/.test(navigator.userAgent)}function Tte(){return typeof navigator<"u"&&/iPad/.test(navigator.userAgent)}function Dte(){return Ote()||Tte()}function gf(){return Rte()||Dte()}function Aw(e){if(e.startsWith("http")){const t=document.createElement("a");t.href=e,t.target="_blank",t.rel="noreferrer noopener",t.click()}else window.open(e,"_blank")}function Cte(e){let{service:t,user:n}=e;return!(!gf()||t.endpoint===xi.FLOW_AUTHN||t.endpoint===xi.FLOW_AUTHZ&&n?.services?.find(r=>r.method===FI&&r.type===Ate))}function Ite(e){if(!e)return;const t=new Image;t.src=e}async function VI(e){let{provider:t,existingPairing:n}=e;const r=await ba(),i={flow:{methods:[xi.FLOW_AUTHN,xi.FLOW_PRE_AUTHZ,xi.FLOW_AUTHZ,xi.FLOW_USER_SIGN],chains:[`flow:${r}`],events:["chainChanged","accountsChanged"]}};let a;const c=new Promise((f,d)=>{const p=g=>{f(g)};t.on("display_uri",p),a=()=>{t.removeListener("display_uri",p),d(new Error("WalletConnect Session Request aborted"))}}),u=t.connect({pairingTopic:n?.topic,namespaces:i}).finally(()=>{a()});return{uri:await c,approval:()=>u}}const GI=async e=>{let{method:t,body:n,session:r,provider:i,isExternal:a,abortSignal:c,disableNotifications:u}=e;const[f,d,p]=Nte(r),g=JSON.stringify({...n,addr:d,address:p}),y=await Promise.race([i.client.request({request:{method:t,params:[g]},chainId:f,topic:i.session?.topic}),new Promise((b,v)=>{c?.aborted&&v(new Error("WalletConnect Request aborted")),c?.addEventListener("abort",()=>{v(new Error("WalletConnect Request aborted"))})})]);if(!(typeof y!="object"||y==null))switch(y.status){case"APPROVED":let b=function(v){return v.method==="WC/RPC"?{...v,params:{...v.params,...a?{externalProvider:r.topic}:{},...u?{disableNotifications:u}:{}}}:v};if(t===xi.FLOW_AUTHN){const v=(y?.data?.services??[]).map(b);return{...y.data?y.data:{},services:v}}return t===xi.FLOW_PRE_AUTHZ?{...y.data,...y.data?.proposer?{proposer:b(y.data.proposer)}:{},payer:[...y.data?.payer?.map(b)],authorization:[...y.data?.authorization?.map(b)]}:y.data;case"DECLINED":throw new Error(`Declined: ${y.reason||"No reason supplied"}`);case"REDIRECT":return y.data;default:throw new Error("Declined: No reason supplied")}};function Nte(e){const[t,n,r]=Object.values(e.namespaces).map(c=>c.accounts).flat().filter(c=>c.startsWith("flow:"))[0].split(":");return[`${t}:${n}`,r,r]}var $te='*,:after,:before{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgba(59,130,246,.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }::backdrop{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgba(59,130,246,.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }/*! tailwindcss v3.4.14 | MIT License | https://tailwindcss.com*/*,:after,:before{border:0 solid #e5e7eb;box-sizing:border-box}:after,:before{--tw-content:""}:host,html{-webkit-text-size-adjust:100%;font-feature-settings:normal;-webkit-tap-highlight-color:transparent;font-family:ui-sans-serif,system-ui,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;font-variation-settings:normal;line-height:1.5;-moz-tab-size:4;tab-size:4}body{line-height:inherit;margin:0}hr{border-top-width:1px;color:inherit;height:0}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,pre,samp{font-feature-settings:normal;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-size:1em;font-variation-settings:normal}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{border-collapse:collapse;border-color:inherit;text-indent:0}button,input,optgroup,select,textarea{font-feature-settings:inherit;color:inherit;font-family:inherit;font-size:100%;font-variation-settings:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;margin:0;padding:0}button,select{text-transform:none}button,input:where([type=button]),input:where([type=reset]),input:where([type=submit]){-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dd,dl,figure,h1,h2,h3,h4,h5,h6,hr,p,pre{margin:0}fieldset{margin:0}fieldset,legend{padding:0}menu,ol,ul{list-style:none;margin:0;padding:0}dialog{padding:0}textarea{resize:vertical}input::placeholder,textarea::placeholder{color:#9ca3af;opacity:1}[role=button],button{cursor:pointer}:disabled{cursor:default}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{height:auto;max-width:100%}[hidden]:where(:not([hidden=until-found])){display:none}.container{width:100%}@media (min-width:640px){.container{max-width:640px}}@media (min-width:768px){.container{max-width:768px}}@media (min-width:1024px){.container{max-width:1024px}}@media (min-width:1280px){.container{max-width:1280px}}@media (min-width:1536px){.container{max-width:1536px}}.sr-only{clip:rect(0,0,0,0);border-width:0;height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;white-space:nowrap;width:1px}.fixed{position:fixed}.bottom-3{bottom:.75rem}.left-3{left:.75rem}.right-3{right:.75rem}.z-\\[2147483647\\]{z-index:2147483647}.mx-auto{margin-left:auto;margin-right:auto}.ml-2{margin-left:.5rem}.ml-3{margin-left:.75rem}.mt-1{margin-top:.25rem}.flex{display:flex}.inline-flex{display:inline-flex}.h-10{height:2.5rem}.h-5{height:1.25rem}.w-10{width:2.5rem}.w-5{width:1.25rem}.max-w-sm{max-width:24rem}.grow{flex-grow:1}@keyframes slideUp{0%{transform:translateY(100%)}to{transform:translateY(0)}}.animate-slideUp{animation:slideUp .2s ease-out forwards}.self-start{align-self:flex-start}.self-center{align-self:center}.overflow-hidden{overflow:hidden}.rounded-full{border-radius:9999px}.rounded-lg{border-radius:.5rem}.rounded-md{border-radius:.375rem}.border{border-width:1px}.border-gray-200{--tw-border-opacity:1;border-color:rgb(229 231 235/var(--tw-border-opacity))}.border-transparent{border-color:transparent}.bg-transparent{background-color:transparent}.bg-white{--tw-bg-opacity:1;background-color:rgb(255 255 255/var(--tw-bg-opacity))}.p-0{padding:0}.p-2{padding:.5rem}.p-4{padding:1rem}.text-sm{font-size:.875rem;line-height:1.25rem}.font-medium{font-weight:500}.text-gray-400{--tw-text-opacity:1;color:rgb(156 163 175/var(--tw-text-opacity))}.text-gray-500{--tw-text-opacity:1;color:rgb(107 114 128/var(--tw-text-opacity))}.text-gray-900{--tw-text-opacity:1;color:rgb(17 24 39/var(--tw-text-opacity))}.shadow-lg{--tw-shadow:0 10px 15px -3px rgba(0,0,0,.1),0 4px 6px -4px rgba(0,0,0,.1);--tw-shadow-colored:0 10px 15px -3px var(--tw-shadow-color),0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.filter{filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.hover\\:text-gray-500:hover{--tw-text-opacity:1;color:rgb(107 114 128/var(--tw-text-opacity))}.focus\\:border-transparent:focus{border-color:transparent}.focus\\:ring-0:focus{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow,0 0 #0000)}.dark\\:border-gray-600:is(.dark *){--tw-border-opacity:1;border-color:rgb(75 85 99/var(--tw-border-opacity))}.dark\\:bg-gray-700:is(.dark *){--tw-bg-opacity:1;background-color:rgb(55 65 81/var(--tw-bg-opacity))}.dark\\:text-gray-100:is(.dark *){--tw-text-opacity:1;color:rgb(243 244 246/var(--tw-text-opacity))}.dark\\:text-gray-200:is(.dark *){--tw-text-opacity:1;color:rgb(229 231 235/var(--tw-text-opacity))}.dark\\:text-gray-300:is(.dark *){--tw-text-opacity:1;color:rgb(209 213 219/var(--tw-text-opacity))}.dark\\:hover\\:text-gray-300:hover:is(.dark *){--tw-text-opacity:1;color:rgb(209 213 219/var(--tw-text-opacity))}@media (min-width:768px){.md\\:bottom-4{bottom:1rem}.md\\:left-auto{left:auto}.md\\:right-4{right:1rem}.md\\:self-start{align-self:flex-start}}';function Ute(e){let{title:t,message:n,icon:r,onClick:i,onDismiss:a,animate:c}=e;return yi("div",{className:`fixed bottom-3 left-3 right-3 mx-auto z-[2147483647] flex max-w-sm
        overflow-hidden rounded-lg border border-gray-200 bg-white p-4 shadow-lg
        md:bottom-4 md:left-auto md:right-4 dark:bg-gray-700 dark:border-gray-600
        ${c?"animate-slideUp":""}`,role:"alert",onClick:u=>{i&&(u.stopPropagation(),i?.())},children:[r&&yi("img",{className:"h-10 w-10 self-center rounded-md md:self-start",src:r,alt:t}),yi("div",{className:"ml-3 grow",children:[yi("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:t}),yi("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-300",children:n})]}),yi("button",{className:`ml-2 inline-flex rounded-full text-gray-400 hover:text-gray-500 focus:ring-0
          dark:text-gray-200 dark:hover:text-gray-300 ${gf()?"self-center p-2":"self-start p-0 bg-transparent border-transparent focus:border-transparent"}`,onClick:u=>{u.stopPropagation(),a?.()},children:[yi("span",{className:"sr-only",children:"Close"}),yi("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:yi("path",{fillRule:"evenodd",d:"M14.354 5.646a.5.5 0 00-.708 0L10 9.293 5.354 4.646a.5.5 0 00-.708.708L9.293 10l-4.647 4.646a.5.5 0 00.708.708L10 10.707l4.646 4.647a.5.5 0 00.708-.708L10.707 10l4.647-4.646a.5.5 0 000-.708z"})})]})]})}let Cu=null,Bte=0,$c=null;function Pte(){const e=document.createElement("div"),t=e.attachShadow({mode:"open"}),n=document.createElement("div");t.appendChild(n),document.body.appendChild(e);const r=document.createElement("style");r.textContent=$te,t.appendChild(r);const i=window.matchMedia("(prefers-color-scheme: dark)"),a=()=>{n.classList.toggle("dark",i.matches)};return i.addEventListener("change",a),a(),n}function kte(e){let{title:t,message:n,icon:r,onClick:i,onDismiss:a,debounceDelay:c=0}=e;Cu||(Cu=Pte());const u=!$c;$c&&(clearTimeout($c),$c=null),qA(yi(Ute,{title:t,message:n,icon:r,onClick:i,onDismiss:()=>{a?.(),f()},animate:u},Bte++),Cu);function f(){Cu&&qA(null,Cu)}return{dismiss:()=>{$c=setTimeout(()=>{$c=null,f()},c)}}}var Mte="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 384 512'%3e%3c!--!Font Awesome Free 6.7.1 by %40fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons%2c Inc.--%3e%3cpath d='M16 64C16 28.7 44.7 0 80 0L304 0c35.3 0 64 28.7 64 64l0 384c0 35.3-28.7 64-64 64L80 512c-35.3 0-64-28.7-64-64L16 64zM224 448a32 32 0 1 0 -64 0 32 32 0 1 0 64 0zM304 64L80 64l0 320 224 0 0-320z'/%3e%3c/svg%3e";function Lte(e){const t=new Set;let n=e;return{subscribe:c=>(t.add(c),()=>{t.delete(c)}),setState:c=>{n=c,t.forEach(u=>u(n))},getState:()=>n}}let Rh=Lte({});const jte=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{wcRequestHook:null,pairingModalOverride:null,disableNotifications:!1};return{name:HI,f_type:"ServicePlugin",type:"discovery-service",serviceStrategy:{method:FI,exec:zte(e,t,H3(()=>import("./index-CSP3eZBN.js").then(n=>n.i),[]).then(n=>n.WalletConnectModal))},services:[]}},zte=(e,t,n)=>async r=>{let{service:i,body:a,opts:c,abortSignal:u,user:f}=r;Ite(i.provider?.icon);const{wcRequestHook:d,pairingModalOverride:p,disableNotifications:g}=t,y=i.params?.disableNotifications??g,b=await Fte({provider:e,externalProviderOrTopic:i.params?.externalProvider});de(!!b,"WalletConnect is not initialized");const{provider:v,isExternal:E}=b;let S=v.session??null,x;const T=i.endpoint,O=I(i);if(S?.topic&&S?.topic===i.params?.externalProvider&&T===xi.FLOW_AUTHN)return f;S==null&&(S=await new Promise((j,z)=>{function P(){z("Declined: Externally Halted")}qte(n)({service:i,onClose:P,appLink:O,provider:v,method:T,pairing:x,wcRequestHook:d,pairingModalOverride:p,abortSignal:u}).then(j,z)})),d&&d instanceof Function&&d({type:qI.SIGNING_REQUEST,method:T,service:i,session:S??null,pairing:null,uri:null}),Cte({service:i,user:f})&&Aw(O);const U=S?.sessionProperties?.["fclWc.disableNotificationsOnMobile"]==="true",N=!y&&!U?Hte({user:f,service:i}):null;return await GI({method:T,body:a,session:S,provider:v,abortSignal:u,isExternal:E,disableNotifications:i.params?.disableNotifications}).finally(()=>N?.dismiss());function I(j){let{uid:z}=j;return z&&/^(ftp|http|https):\/\/[^ "]+$/.test(z)||He({title:"WalletConnect Service Warning",message:`service.uid should be a valid universal link url. Found: ${z}`,level:ht.warn}),z}};function qte(e){return async t=>{let{service:n,onClose:r,appLink:i,provider:a,method:c,pairing:u,wcRequestHook:f,pairingModalOverride:d,abortSignal:p}=t;const g=a.providerOpts.projectId;de(!!g,"Cannot establish connection, WalletConnect projectId is undefined");let y=null,b=null;try{const{uri:v,approval:E}=await VI({provider:a,existingPairing:u});if(f&&f instanceof Function&&f({type:qI.SESSION_REQUEST,method:c,service:n,session:null,pairing:u??null,uri:v??null}),gf()){const x=new URLSearchParams({uri:v}).toString();let T=u==null?i+"?"+x:i;Aw(T)}else if(!u)if(d)d(v,r);else{b=new(await e)({projectId:g}),b.openModal({uri:v,onClose:r});const x=b.subscribeModal(T=>{T.open===!1&&(r?.(),x())})}const S=await Promise.race([E(),new Promise((x,T)=>{p?.aborted&&T(new Error("Session request aborted")),p?.addEventListener("abort",()=>{T(new Error("Session request aborted"))})})]);if(S==null)throw new Error("Session request failed");return S}catch(v){throw v instanceof Error&&He({title:`${v.name} Error establishing WalletConnect session`,message:`
          ${v.message}
          uri: ${y}
        `,level:ht.error}),r(),v}finally{b?.closeModal()}}}function Hte(e){let{service:t,user:n}=e;const i=n?.services?.find(a=>a.type==="authn")?.provider||t.provider;return kte({title:i?.name||"Mobile Wallet",message:gf()?"Tap to view request in app":"Pending request on your mobile device",icon:i?.icon||Mte,onClick:gf()&&t.uid?()=>Aw(t.uid):void 0,debounceDelay:t.type==="pre-authz"?500:0})}async function Fte(e){let{provider:t,externalProviderOrTopic:n}=e;if(!n){const a=await t;return a?{provider:a,isExternal:!1}:null}if(typeof n!="string"){const a=n.session?.topic;if(!a)throw new Error("Cannot resolve provider: UniversalProvider is not initialized");return Rh.setState({[a]:n}),{provider:n,isExternal:!0}}const r=n;if(r){let a=Rh.getState()[r];if(!a){let c,u;a=await new Promise((f,d)=>{c=Rh.subscribe(()=>{const p=Rh.getState()[r];p&&f(p)}),u=setTimeout(()=>{d(new Error(`Provider for external topic ${r} not found after 5 seconds`))},5e3)}).finally(()=>{clearTimeout(u),c()})}return{provider:a,isExternal:!0}}const i=await t;return i?{provider:i,isExternal:!1}:null}const Vte="wss://relay.walletconnect.com",Gte="debug";let Lu=Promise.resolve(null);const Kte=async e=>{let{projectId:t,metadata:n}=e;de(t!=null,"FCL Wallet Connect Error: WalletConnect projectId is required");try{return xte.init({logger:Gte,relayUrl:Vte,projectId:t,metadata:n})}catch(r){throw r instanceof Error&&He({title:`${r.name} fcl-wc Init Client`,message:r.message,level:ht.error}),r}},KI=e=>{const{FclWcServicePlugin:t,providerPromise:n}=Yte(e);return B3.authn.update(),{FclWcServicePlugin:t,providerPromise:n}},Wte=async e=>{const{FclWcServicePlugin:t,providerPromise:n}=KI(e),r=await n;return B3.authn.update(),{FclWcServicePlugin:t,client:r}},Yte=e=>{if(typeof window>"u")throw new Error("FCL Wallet Connect Plugin can only be initialized in the browser");return Lu=Lu.catch(()=>null).then(n=>n||Kte({projectId:e.projectId,metadata:e.metadata})).catch(n=>{throw He({title:"WalletConnect Client Initialization Error",message:n.message?n.message:n,level:ht.error}),n}),{FclWcServicePlugin:jte(Lu,e),providerPromise:Lu}};async function WI(){return Lu.then(e=>{if(!e)throw new Error("WalletConnect client not initialized");return e})}const YI="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",Xte=YI.length;function Rw(){let e="",t=32;for(;t--;)e+=YI[Math.random()*Xte|0];return e}const Zte=globalThis.AbortController||require("abort-controller");function Qte(e){const t=new Zte;return e?.aborted&&t.abort(),e?.addEventListener("abort",()=>t.abort()),t}let z0=function(e){return e.NOTIFY_QRCODE_CONNECTING="notifyQrCodeConnecting",e.NOTIFY_QRCODE_CONNECTED="notifyQrCodeConnected",e.NOTIFY_QRCODE_ERROR="notifyQrCodeError",e}({}),cO=function(e){return e.REQUEST_WALLETCONNECT_QRCODE="requestWalletConnectQrCode",e.EXEC_SERVICE="execService",e}({});const lO="APPROVED",Jte=e=>{let{onExecResult:t,execStrategyOpts:n,execStrategyArgs:r,abortSignal:i}=e;return async a=>{let{service:c}=a;try{const u=await Cp({...n,service:c,config:n.config,abortSignal:i},...r.slice(1));if((Ii(u)?.status||lO)===lO)return t(u),null;throw new Error(u?.reason||"Service was declined")}catch(u){throw new Error(u?.message||"Service execution failed")}}},ene=e=>{let{rpc:t,onExecResult:n,authnBody:r,abortSignal:i}=e;const a=tne({rpc:t,authnBody:r});return async c=>{if(i.aborted)throw new Error("Handler has been terminated");const u=await WI(),{uri:f,approval:d}=await VI({provider:u});return a({uri:f,approval:d,onExecResult:n}),{uri:f}}};function tne(e){let{rpc:t,authnBody:n}=e;return r=>{let{uri:i,approval:a,onExecResult:c}=r;setTimeout(async()=>{try{const u=await WI(),f=await a();t.notify(z0.NOTIFY_QRCODE_CONNECTING,{uri:i});const d=await GI({method:xi.FLOW_AUTHN,body:n,session:f,provider:u});t.notify(z0.NOTIFY_QRCODE_CONNECTED,{uri:i}),c(d)}catch(u){t.notify(z0.NOTIFY_QRCODE_ERROR,{uri:i,error:u?.message})}},0)}}function nne(e){let{onExecResult:t,body:n,opts:r,args:i,abortSignal:a}=e;const c=new WM({notifications:[]});return c.on(cO.REQUEST_WALLETCONNECT_QRCODE,ene({rpc:c,onExecResult:t,authnBody:n,abortSignal:a})),c.on(cO.EXEC_SERVICE,Jte({onExecResult:t,execStrategyOpts:r,execStrategyArgs:i,abortSignal:a})),{connect:c.connect.bind(c),receive:c.receive.bind(c)}}async function rne(e){let{customRpc:t,opts:n,args:r,abortSignal:i}=e;const a={...n.config,client:{...n.config.client,discoveryRpcEnabled:!0}};return Cp({...n,config:a,customRpc:t,abortSignal:i},...r.slice(1))}const uO="authn";async function ine(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const[r]=t,{body:i,abortSignal:a,service:c}=r;if(c?.type!==uO)return console.error(`ERROR: Invalid service type for FCL Discovery execStrategyHook, expected "${uO}" but got "${c?.type}"`),Cp(...t);const u=Qte(a);let f;const d=new Promise(async(p,g)=>{const y=nne({onExecResult:p,body:i,opts:r,args:t,abortSignal:u.signal});f=rne({customRpc:y,opts:r,args:t,abortSignal:u.signal}).then(p,g)});return await d.catch(()=>{}),await Promise.race([new Promise(p=>setTimeout(p,1e3)),f]).catch(()=>{}),u.abort(),d}const Oh="FCL_IFRAME",sne=`
  position:fixed;
  top: 0px;
  right: 0px;
  bottom: 0px;
  left: 0px;
  height: 100%;
  width: 100vw;
  display:block;
  background:rgba(0,0,0,0.25);
  z-index: 2147483647;
  box-sizing: border-box;
  color-scheme: light;
`;function XI(e){de(!document.getElementById(Oh),"Attempt at triggering multiple Frames",{src:e});const t=document.createElement("iframe");t.src=e,t.id=Oh,t.allow="usb *; hid *; clipboard-write",t.frameBorder="0",t.style.cssText=sne,document.body.append(t);const n=()=>{document.getElementById(Oh)&&document.getElementById(Oh).remove()};return[t.contentWindow,n]}const one="FCL_POP";let Jr=null,fO=null;function ane(e,t,n,r,i){const a=n.top.outerHeight/2+n.top.screenY-i/2,c=n.top.outerWidth/2+n.top.screenX-r/2,u=n.open(e,t,`toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width=${r}, height=${i}, top=${a}, left=${c}`);if(!u)throw new Error("Popup failed to open (was it blocked by a popup blocker?)");return u}function ZI(e){return Jr==null||Jr?.closed?Jr=ane(e,one,window,640,770):(fO!==e&&Jr.location.replace(e),Jr.focus()),fO=e,[Jr,()=>{Jr&&!Jr.closed&&Jr.close(),Jr=null}]}let Ur=null,dO=null;function QI(e){if(Ur==null||Ur?.closed){if(Ur=window.open(e,"_blank"),!Ur)throw new Error("Tab failed to open (was it blocked by the browser?)")}else dO!==e&&Ur.location.replace(e),Ur.focus();return dO=e,[Ur,()=>{Ur&&!Ur.closed&&Ur.close(),Ur=null}]}const cne=()=>({"discovery.wallet.method.default":"IFRAME/RPC"}),qo=()=>{};function lne(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null)return{send:qo,close:qo};const n=t.onClose||qo,r=t.onMessage||qo,i=t.onReady||qo,a=t.onResponse||qo,c=t.onCustomRpc||qo;let u,f;const d=Np({close:p,send:g,onReady:i,onResponse:a,onMessage:r,onCustomRpc:c,getSource:()=>u});return window.addEventListener("message",d),[u,f]=XI(Rf(e)),{send:g,close:p};function p(){try{window.removeEventListener("message",d),f(),n()}catch(y){console.error("Frame Close Error",y)}}function g(y){try{u.postMessage(JSON.parse(JSON.stringify(y||{})),"*")}catch(b){console.error("Frame Send Error",y,b)}}}const da="1.19.0";function une(e){let{service:t,body:n,config:r,customRpc:i,abortSignal:a,opts:c}=e;return new Promise((u,f)=>{const d=Rw(),p=c.includeOlderJsonRpcCall,{close:g}=lne(t,{async onReady(y,b){let{send:v}=b;try{v({type:"FCL:VIEW:READY:RESPONSE",fclVersion:da,body:n,service:{params:t.params,data:t.data,type:t.type},config:r}),v({fclVersion:da,type:"FCL:FRAME:READY:RESPONSE",body:n,service:{params:t.params,data:t.data,type:t.type},config:r,deprecated:{message:"FCL:FRAME:READY:RESPONSE is deprecated and replaced with type: FCL:VIEW:READY:RESPONSE"}}),p&&v({jsonrpc:"2.0",id:d,method:"fcl:sign",params:[n,t.params],deprecated:{message:"jsonrpc is deprecated and replaced with type: FCL:VIEW:READY:RESPONSE"}}),i?.connect({send:E=>{v({type:"FCL:VIEW:CUSTOM_RPC",payload:E})}})}catch(E){throw E}},onResponse(y,b){let{close:v}=b;try{if(typeof y.data!="object")return;const E=Ii(y.data);switch(E.status){case"APPROVED":u(E.data),v();break;case"DECLINED":f(`Declined: ${E.reason||"No reason supplied"}`),v();break;case"REDIRECT":u(E),v();break;default:f("Declined: No reason supplied"),v();break}}catch(E){throw console.error("execIframeRPC onResponse error",E),E}},onMessage(y,b){let{close:v}=b;try{if(typeof y.data!="object"||y.data.jsonrpc!=="2.0"||y.data.id!==d)return;const E=Ii(y.data.result);switch(E.status){case"APPROVED":u(E.data),v();break;case"DECLINED":f(`Declined: ${E.reason||"No reason supplied"}`),v();break;case"REDIRECT":u(E),v();break;default:f("Declined: No reason supplied"),v();break}}catch(E){throw console.error("execIframeRPC onMessage error",E),E}},onClose(){f("Declined: Externally Halted")},onCustomRpc(y){i?.receive(y)}});a&&(a.aborted&&(f("Declined: Aborted"),g()),a.addEventListener("abort",()=>{f("Declined: Aborted"),g()}))})}const Ho=()=>{};function fne(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null)return{send:Ho,close:Ho};const n=t.onClose||Ho,r=t.onMessage||Ho,i=t.onReady||Ho,a=t.onResponse||Ho,c=t.onCustomRpc||Ho;let u,f;const d=Np({close:g,send:y,onReady:i,onResponse:a,onMessage:r,onCustomRpc:c,getSource:()=>u});window.addEventListener("message",d),[u,f]=ZI(Rf(e));const p=setInterval(function(){u&&u.closed&&g()},500);return{send:y,close:g};function g(){try{window.removeEventListener("message",d),clearInterval(p),f(),n()}catch(b){console.error("Popup Close Error",b)}}function y(b){try{u.postMessage(JSON.parse(JSON.stringify(b||{})),"*")}catch(v){console.error("Popup Send Error",b,v)}}}function dne(e){let{service:t,body:n,config:r,abortSignal:i,customRpc:a,opts:c}=e;return new Promise((u,f)=>{const d=Rw(),{redir:p,includeOlderJsonRpcCall:g}=c,{close:y}=fne(t,{customRpc:a,async onReady(b,v){let{send:E}=v;try{E({fclVersion:da,type:"FCL:VIEW:READY:RESPONSE",body:n,service:{params:t.params,data:t.data,type:t.type},config:r}),E({fclVersion:da,type:"FCL:FRAME:READY:RESPONSE",body:n,service:{params:t.params,data:t.data,type:t.type},config:r,deprecated:{message:"FCL:FRAME:READY:RESPONSE is deprecated and replaced with type: FCL:VIEW:READY:RESPONSE"}}),g&&E({jsonrpc:"2.0",id:d,method:"fcl:sign",params:[n,t.params]}),a?.connect({send:S=>{E({type:"FCL:VIEW:CUSTOM_RPC",payload:S})}})}catch(S){throw S}},onResponse(b,v){let{close:E}=v;try{if(typeof b.data!="object")return;const S=Ii(b.data);switch(S.status){case"APPROVED":u(S.data),!p&&E();break;case"DECLINED":f(`Declined: ${S.reason||"No reason supplied"}`),E();break;case"REDIRECT":u(S),E();break;default:f("Declined: No reason supplied"),E();break}}catch(S){throw console.error("execPopRPC onResponse error",S),S}},onMessage(b,v){let{close:E}=v;try{if(typeof b.data!="object"||b.data.jsonrpc!=="2.0"||b.data.id!==d)return;const S=Ii(b.data.result);switch(S.status){case"APPROVED":u(S.data),!p&&E();break;case"DECLINED":f(`Declined: ${S.reason||"No reason supplied"}`),E();break;case"REDIRECT":u(S),E();break;default:f("Declined: No reason supplied"),E();break}}catch(S){throw console.error("execPopRPC onMessage error",S),S}},onClose(){f("Declined: Externally Halted")},onCustomRpc(b){a?.receive(b)}});i&&(i.aborted&&(f("Declined: Aborted"),y()),i.addEventListener("abort",()=>{f("Declined: Aborted"),y()}))})}const Fo=()=>{};function hne(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null)return{send:Fo,close:Fo};const n=t.onClose||Fo,r=t.onMessage||Fo,i=t.onReady||Fo,a=t.onResponse||Fo,c=t.onCustomRpc||Fo;let u,f;const d=Np({close:g,send:y,onReady:i,onResponse:a,onMessage:r,onCustomRpc:c,getSource:()=>u});window.addEventListener("message",d),[u,f]=QI(Rf(e));const p=setInterval(function(){u&&u.closed&&g()},500);return{send:y,close:g};function g(){try{window.removeEventListener("message",d),clearInterval(p),f(),n()}catch(b){console.error("Tab Close Error",b)}}function y(b){try{u.postMessage(JSON.parse(JSON.stringify(b||{})),"*")}catch(v){console.error("Tab Send Error",b,v)}}}function pne(e){let{service:t,body:n,config:r,abortSignal:i,customRpc:a,opts:c}=e;return new Promise((u,f)=>{const d=Rw(),{redir:p,includeOlderJsonRpcCall:g}=c,{close:y}=hne(t,{customRpc:a,async onReady(b,v){let{send:E}=v;try{E({fclVersion:da,type:"FCL:VIEW:READY:RESPONSE",body:n,service:{params:t.params,data:t.data,type:t.type},config:r}),E({fclVersion:da,type:"FCL:FRAME:READY:RESPONSE",body:n,service:{params:t.params,data:t.data,type:t.type},config:r,deprecated:{message:"FCL:FRAME:READY:RESPONSE is deprecated and replaced with type: FCL:VIEW:READY:RESPONSE"}}),g&&E({jsonrpc:"2.0",id:d,method:"fcl:sign",params:[n,t.params]}),a?.connect({send:S=>{E({type:"FCL:VIEW:CUSTOM_RPC",payload:S})}})}catch(S){throw S}},onResponse(b,v){let{close:E}=v;try{if(typeof b.data!="object")return;const S=Ii(b.data);switch(S.status){case"APPROVED":u(S.data),!p&&E();break;case"DECLINED":f(`Declined: ${S.reason||"No reason supplied"}`),E();break;case"REDIRECT":u(S),E();break;default:f("Declined: No reason supplied"),E();break}}catch(S){throw console.error("execPopRPC onResponse error",S),S}},onMessage(b,v){let{close:E}=v;try{if(typeof b.data!="object"||b.data.jsonrpc!=="2.0"||b.data.id!==d)return;const S=Ii(b.data.result);switch(S.status){case"APPROVED":u(S.data),!p&&E();break;case"DECLINED":f(`Declined: ${S.reason||"No reason supplied"}`),E();break;case"REDIRECT":u(S),E();break;default:f("Declined: No reason supplied"),E();break}}catch(S){throw console.error("execPopRPC onMessage error",S),S}},onClose(){f("Declined: Externally Halted")},onCustomRpc(b){a?.receive(b)}});i&&(i.aborted&&(y(),f("Declined: Aborted")),i.addEventListener("abort",()=>{y(),f("Declined: Aborted")}))})}const Vo=()=>{};function gne(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null)return{send:Vo,close:Vo};const n=t.onClose||Vo,r=t.onMessage||Vo,i=t.onReady||Vo,a=t.onResponse||Vo,c=t.onCustomRpc||Vo,u=Np({close:f,send:d,onReady:i,onResponse:a,onMessage:r,onCustomRpc:c});return window.addEventListener("message",u),d({service:e}),{send:d,close:f};function f(){try{window.removeEventListener("message",u),n()}catch(p){console.error("Ext Close Error",p)}}function d(p){try{window&&window.postMessage(JSON.parse(JSON.stringify(p||{})),"*")}catch(g){console.error("Ext Send Error",p,g)}}}function mne(e){let{service:t,body:n,config:r,abortSignal:i,customRpc:a,opts:c}=e;return new Promise((u,f)=>{const{close:d}=gne(t,{async onReady(p,g){let{send:y}=g;try{y({fclVersion:da,type:"FCL:VIEW:READY:RESPONSE",body:n,service:{params:t.params,data:t.data,type:t.type},config:r}),a?.connect({send:b=>{y({type:"FCL:VIEW:CUSTOM_RPC",body:b})}})}catch(b){throw b}},onResponse(p,g){let{close:y}=g;try{if(typeof p.data!="object")return;const b=Ii(p.data);switch(b.status){case"APPROVED":u(b.data),y();break;case"DECLINED":f(`Declined: ${b.reason||"No reason supplied"}`),y();break;case"REDIRECT":u(b),y();break;default:f("Declined: No reason supplied"),y();break}}catch(b){throw console.error("execExtRPC onResponse error",b),b}},onClose(){f("Declined: Externally Halted")},onCustomRpc(p){a?.receive(p)}});i&&(i.aborted&&(d(),f("Declined: Aborted")),i.addEventListener("abort",()=>{d(),f("Declined: Aborted")}))})}const hO=()=>{throw new Error("Strategy util has not been implemented on this platform")},yne={"VIEW/IFRAME":XI,"VIEW/POP":ZI,"VIEW/TAB":QI,"VIEW/MOBILE_BROWSER":hO,"VIEW/DEEPLINK":hO};async function pO(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{serviceEndpoint:()=>{}};const{serviceEndpoint:n}=t;try{return yne[e.method](n(e),t)}catch(r){throw console.error("execLocal({service, opts = {}})",r,{service:e,opts:t}),r}}const bne={[yr["HTTP/RPC"]]:V_(pO),[yr["HTTP/POST"]]:V_(pO),[yr["IFRAME/RPC"]]:une,[yr["POP/RPC"]]:dne,[yr["TAB/RPC"]]:pne,[yr["EXT/RPC"]]:mne},vne=()=>typeof window>"u",wne=e=>{if(e==null)return null;try{return JSON.parse(e)}catch{return null}},Ene={can:!vne()&&!!window.localStorage,get:async e=>wne(localStorage.getItem(e)),put:async(e,t)=>localStorage.setItem(e,JSON.stringify(t))},Sne=typeof window>"u",_ne=e=>{const t=e["app.detail.title"],n=e["app.detail.icon"],r=e["app.detail.description"],i=e["app.detail.url"];return{name:t??document.title,description:r??"",url:i??window.location.origin,icons:n?[n]:[]}};function xne(){if(Sne)return;let e=null,t=!1;Ae.subscribe(async n=>{const r={"walletconnect.projectId":n["walletconnect.projectId"],"walletconnect.disableNotifications":n["walletconnect.disableNotifications"],"app.detail.title":n["app.detail.title"],"app.detail.icon":n["app.detail.icon"],"app.detail.description":n["app.detail.description"],"app.detail.url":n["app.detail.url"]},i=r["walletconnect.projectId"],a=r["walletconnect.disableNotifications"],c=e;if(e=JSON.stringify(r,null,2),t){c!==e&&console.warn(`FCL WalletConnect Plugin has been already loaded with different configuration. It is not possible to change the configuration after the plugin has been loaded.

Previous configuration:
${c}

Current configuration:
${e}`);return}if(!!!i)return;if(de(!!i,"FCL Configuration value for 'walletconnect.projectId' is required"),ub.getPlugins().has(HI)){t||console.warn("It seems like the FCL WalletConnect plugins has been already loaded manually. This is no longer necessary, please see the documentation for more information."),t=!0;return}t=!0;const{FclWcServicePlugin:f}=KI({projectId:i,metadata:_ne(r),disableNotifications:a});ub.add([f])})}const Ane={execStrategy:ine},us=z3({platform:"web",discovery:Ane,getStorageProvider:async()=>await Ae.get("fcl.storage")||Ene}),Rne=FM(us),One=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return us().authenticate(e)},Tne=()=>us().unauthenticate();us().authorization;Ae(cne());$3({coreStrategies:bne});xne();const Dne="56fce212e878d76623e53be15ab998c5";Ae().put("app.detail.title","MVP on Flow").put("app.detail.icon","https://mvponflow.cc/favicon.png").put("accessNode.api","https://rest-mainnet.onflow.org").put("discovery.wallet","https://fcl-discovery.onflow.org/authn").put("flow.network","mainnet").put("discovery.authn.include",["0x33f75ff0b830dcec"]).put("discovery.authn.exclude",["0x95b85a9ef4daabb1","0x55ad22f01ef568a1"]);Wte({projectId:Dne,metadata:{name:"MVP on Flow",description:"Fan-powered Jokic project",url:"https://mvponflow.cc",icons:["https://mvponflow.cc/favicon.png"]}}).then(({FclWcServicePlugin:e})=>{ub.add(e)});var q0={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var gO;function Cne(){return gO||(gO=1,function(e){(function(){var t={}.hasOwnProperty;function n(){for(var a="",c=0;c<arguments.length;c++){var u=arguments[c];u&&(a=i(a,r(u)))}return a}function r(a){if(typeof a=="string"||typeof a=="number")return a;if(typeof a!="object")return"";if(Array.isArray(a))return n.apply(null,a);if(a.toString!==Object.prototype.toString&&!a.toString.toString().includes("[native code]"))return a.toString();var c="";for(var u in a)t.call(a,u)&&a[u]&&(c=i(c,u));return c}function i(a,c){return c?a?a+" "+c:a+c:a}e.exports?(n.default=n,e.exports=n):window.classNames=n})()}(q0)),q0.exports}var Ine=Cne();const bt=ws(Ine);function uv(){return uv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},uv.apply(null,arguments)}function JI(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function mO(e){return"default"+e.charAt(0).toUpperCase()+e.substr(1)}function Nne(e){var t=$ne(e,"string");return typeof t=="symbol"?t:String(t)}function $ne(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Une(e,t,n){var r=M.useRef(e!==void 0),i=M.useState(t),a=i[0],c=i[1],u=e!==void 0,f=r.current;return r.current=u,!u&&f&&a!==t&&c(t),[u?e:a,M.useCallback(function(d){for(var p=arguments.length,g=new Array(p>1?p-1:0),y=1;y<p;y++)g[y-1]=arguments[y];n&&n.apply(void 0,[d].concat(g)),c(d)},[n])]}function Ow(e,t){return Object.keys(t).reduce(function(n,r){var i,a=n,c=a[mO(r)],u=a[r],f=JI(a,[mO(r),r].map(Nne)),d=t[r],p=Une(u,c,e[d]),g=p[0],y=p[1];return uv({},f,(i={},i[r]=g,i[d]=y,i))},e)}function fv(e,t){return fv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},fv(e,t)}function Bne(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,fv(e,t)}const Pne=["xxl","xl","lg","md","sm","xs"],kne="xs",Tw=M.createContext({prefixes:{},breakpoints:Pne,minBreakpoint:kne}),{Consumer:Goe,Provider:Koe}=Tw;function $t(e,t){const{prefixes:n}=M.useContext(Tw);return e||n[t]||t}function Mne(){const{dir:e}=M.useContext(Tw);return e==="rtl"}function eg(e){return e&&e.ownerDocument||document}function Lne(e){var t=eg(e);return t&&t.defaultView||window}function jne(e,t){return Lne(e).getComputedStyle(e,t)}var zne=/([A-Z])/g;function qne(e){return e.replace(zne,"-$1").toLowerCase()}var Hne=/^ms-/;function Th(e){return qne(e).replace(Hne,"-ms-")}var Fne=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function Vne(e){return!!(e&&Fne.test(e))}function ps(e,t){var n="",r="";if(typeof t=="string")return e.style.getPropertyValue(Th(t))||jne(e).getPropertyValue(Th(t));Object.keys(t).forEach(function(i){var a=t[i];!a&&a!==0?e.style.removeProperty(Th(i)):Vne(i)?r+=i+"("+a+") ":n+=Th(i)+": "+a+";"}),r&&(n+="transform: "+r+";"),e.style.cssText+=";"+n}var H0={exports:{}},F0,yO;function Gne(){if(yO)return F0;yO=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return F0=e,F0}var V0,bO;function Kne(){if(bO)return V0;bO=1;var e=Gne();function t(){}function n(){}return n.resetWarningCache=t,V0=function(){function r(c,u,f,d,p,g){if(g!==e){var y=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw y.name="Invariant Violation",y}}r.isRequired=r;function i(){return r}var a={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:n,resetWarningCache:t};return a.PropTypes=a,a},V0}var vO;function Wne(){return vO||(vO=1,H0.exports=Kne()()),H0.exports}var Yne=Wne();const G0=ws(Yne),wO={disabled:!1},eN=In.createContext(null);var Xne=function(t){return t.scrollTop},ju="unmounted",so="exited",ni="entering",cs="entered",mf="exiting",Es=function(e){Bne(t,e);function t(r,i){var a;a=e.call(this,r,i)||this;var c=i,u=c&&!c.isMounting?r.enter:r.appear,f;return a.appearStatus=null,r.in?u?(f=so,a.appearStatus=ni):f=cs:r.unmountOnExit||r.mountOnEnter?f=ju:f=so,a.state={status:f},a.nextCallback=null,a}t.getDerivedStateFromProps=function(i,a){var c=i.in;return c&&a.status===ju?{status:so}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(i){var a=null;if(i!==this.props){var c=this.state.status;this.props.in?c!==ni&&c!==cs&&(a=ni):(c===ni||c===cs)&&(a=mf)}this.updateStatus(!1,a)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var i=this.props.timeout,a,c,u;return a=c=u=i,i!=null&&typeof i!="number"&&(a=i.exit,c=i.enter,u=i.appear!==void 0?i.appear:c),{exit:a,enter:c,appear:u}},n.updateStatus=function(i,a){if(i===void 0&&(i=!1),a!==null)if(this.cancelNextCallback(),a===ni){if(this.props.unmountOnExit||this.props.mountOnEnter){var c=this.props.nodeRef?this.props.nodeRef.current:Lc.findDOMNode(this);c&&Xne(c)}this.performEnter(i)}else this.performExit();else this.props.unmountOnExit&&this.state.status===so&&this.setState({status:ju})},n.performEnter=function(i){var a=this,c=this.props.enter,u=this.context?this.context.isMounting:i,f=this.props.nodeRef?[u]:[Lc.findDOMNode(this),u],d=f[0],p=f[1],g=this.getTimeouts(),y=u?g.appear:g.enter;if(!i&&!c||wO.disabled){this.safeSetState({status:cs},function(){a.props.onEntered(d)});return}this.props.onEnter(d,p),this.safeSetState({status:ni},function(){a.props.onEntering(d,p),a.onTransitionEnd(y,function(){a.safeSetState({status:cs},function(){a.props.onEntered(d,p)})})})},n.performExit=function(){var i=this,a=this.props.exit,c=this.getTimeouts(),u=this.props.nodeRef?void 0:Lc.findDOMNode(this);if(!a||wO.disabled){this.safeSetState({status:so},function(){i.props.onExited(u)});return}this.props.onExit(u),this.safeSetState({status:mf},function(){i.props.onExiting(u),i.onTransitionEnd(c.exit,function(){i.safeSetState({status:so},function(){i.props.onExited(u)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(i,a){a=this.setNextCallback(a),this.setState(i,a)},n.setNextCallback=function(i){var a=this,c=!0;return this.nextCallback=function(u){c&&(c=!1,a.nextCallback=null,i(u))},this.nextCallback.cancel=function(){c=!1},this.nextCallback},n.onTransitionEnd=function(i,a){this.setNextCallback(a);var c=this.props.nodeRef?this.props.nodeRef.current:Lc.findDOMNode(this),u=i==null&&!this.props.addEndListener;if(!c||u){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var f=this.props.nodeRef?[this.nextCallback]:[c,this.nextCallback],d=f[0],p=f[1];this.props.addEndListener(d,p)}i!=null&&setTimeout(this.nextCallback,i)},n.render=function(){var i=this.state.status;if(i===ju)return null;var a=this.props,c=a.children;a.in,a.mountOnEnter,a.unmountOnExit,a.appear,a.enter,a.exit,a.timeout,a.addEndListener,a.onEnter,a.onEntering,a.onEntered,a.onExit,a.onExiting,a.onExited,a.nodeRef;var u=JI(a,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return In.createElement(eN.Provider,{value:null},typeof c=="function"?c(i,u):In.cloneElement(In.Children.only(c),u))},t}(In.Component);Es.contextType=eN;Es.propTypes={};function Uc(){}Es.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Uc,onEntering:Uc,onEntered:Uc,onExit:Uc,onExiting:Uc,onExited:Uc};Es.UNMOUNTED=ju;Es.EXITED=so;Es.ENTERING=ni;Es.ENTERED=cs;Es.EXITING=mf;function Zne(e){return e.code==="Escape"||e.keyCode===27}function Qne(){const e=M.version.split(".");return{major:+e[0],minor:+e[1],patch:+e[2]}}function dl(e){if(!e||typeof e=="function")return null;const{major:t}=Qne();return t>=19?e.props.ref:e.ref}const tg=!!(typeof window<"u"&&window.document&&window.document.createElement);var dv=!1,hv=!1;try{var K0={get passive(){return dv=!0},get once(){return hv=dv=!0}};tg&&(window.addEventListener("test",K0,K0),window.removeEventListener("test",K0,!0))}catch{}function tN(e,t,n,r){if(r&&typeof r!="boolean"&&!hv){var i=r.once,a=r.capture,c=n;!hv&&i&&(c=n.__once||function u(f){this.removeEventListener(t,u,a),n.call(this,f)},n.__once=c),e.addEventListener(t,c,dv?r:a)}e.addEventListener(t,n,r)}function Jne(e,t,n,r){var i=r&&typeof r!="boolean"?r.capture:r;e.removeEventListener(t,n,i),n.__once&&e.removeEventListener(t,n.__once,i)}function lo(e,t,n,r){return tN(e,t,n,r),function(){Jne(e,t,n,r)}}function ere(e,t,n,r){if(r===void 0&&(r=!0),e){var i=document.createEvent("HTMLEvents");i.initEvent(t,n,r),e.dispatchEvent(i)}}function tre(e){var t=ps(e,"transitionDuration")||"",n=t.indexOf("ms")===-1?1e3:1;return parseFloat(t)*n}function nre(e,t,n){n===void 0&&(n=5);var r=!1,i=setTimeout(function(){r||ere(e,"transitionend",!0)},t+n),a=lo(e,"transitionend",function(){r=!0},{once:!0});return function(){clearTimeout(i),a()}}function rre(e,t,n,r){n==null&&(n=tre(e)||0);var i=nre(e,n,r),a=lo(e,"transitionend",t);return function(){i(),a()}}function EO(e,t){const n=ps(e,t)||"",r=n.indexOf("ms")===-1?1e3:1;return parseFloat(n)*r}function Dw(e,t){const n=EO(e,"transitionDuration"),r=EO(e,"transitionDelay"),i=rre(e,a=>{a.target===e&&(i(),t(a))},n+r)}function Iu(...e){return e.filter(t=>t!=null).reduce((t,n)=>{if(typeof n!="function")throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return t===null?n:function(...i){t.apply(this,i),n.apply(this,i)}},null)}function nN(e){e.offsetHeight}const SO=e=>!e||typeof e=="function"?e:t=>{e.current=t};function ire(e,t){const n=SO(e),r=SO(t);return i=>{n&&n(i),r&&r(i)}}function Cw(e,t){return M.useMemo(()=>ire(e,t),[e,t])}function sre(e){return e&&"setState"in e?Lc.findDOMNode(e):e??null}const ng=In.forwardRef(({onEnter:e,onEntering:t,onEntered:n,onExit:r,onExiting:i,onExited:a,addEndListener:c,children:u,childRef:f,...d},p)=>{const g=M.useRef(null),y=Cw(g,f),b=I=>{y(sre(I))},v=I=>j=>{I&&g.current&&I(g.current,j)},E=M.useCallback(v(e),[e]),S=M.useCallback(v(t),[t]),x=M.useCallback(v(n),[n]),T=M.useCallback(v(r),[r]),O=M.useCallback(v(i),[i]),U=M.useCallback(v(a),[a]),N=M.useCallback(v(c),[c]);return q.jsx(Es,{ref:p,...d,onEnter:E,onEntered:x,onEntering:S,onExit:T,onExited:U,onExiting:O,addEndListener:N,nodeRef:g,children:typeof u=="function"?(I,j)=>u(I,{...j,ref:b}):In.cloneElement(u,{ref:b})})});ng.displayName="TransitionWrapper";const ore={height:["marginTop","marginBottom"],width:["marginLeft","marginRight"]};function are(e,t){const n=`offset${e[0].toUpperCase()}${e.slice(1)}`,r=t[n],i=ore[e];return r+parseInt(ps(t,i[0]),10)+parseInt(ps(t,i[1]),10)}const cre={[so]:"collapse",[mf]:"collapsing",[ni]:"collapsing",[cs]:"collapse show"},rN=In.forwardRef(({onEnter:e,onEntering:t,onEntered:n,onExit:r,onExiting:i,className:a,children:c,dimension:u="height",in:f=!1,timeout:d=300,mountOnEnter:p=!1,unmountOnExit:g=!1,appear:y=!1,getDimensionValue:b=are,...v},E)=>{const S=typeof u=="function"?u():u,x=M.useMemo(()=>Iu(I=>{I.style[S]="0"},e),[S,e]),T=M.useMemo(()=>Iu(I=>{const j=`scroll${S[0].toUpperCase()}${S.slice(1)}`;I.style[S]=`${I[j]}px`},t),[S,t]),O=M.useMemo(()=>Iu(I=>{I.style[S]=null},n),[S,n]),U=M.useMemo(()=>Iu(I=>{I.style[S]=`${b(S,I)}px`,nN(I)},r),[r,b,S]),N=M.useMemo(()=>Iu(I=>{I.style[S]=null},i),[S,i]);return q.jsx(ng,{ref:E,addEndListener:Dw,...v,"aria-expanded":v.role?f:null,onEnter:x,onEntering:T,onEntered:O,onExit:U,onExiting:N,childRef:dl(c),in:f,timeout:d,mountOnEnter:p,unmountOnExit:g,appear:y,children:(I,j)=>In.cloneElement(c,{...j,className:bt(a,c.props.className,cre[I],S==="width"&&"collapse-horizontal")})})});rN.displayName="Collapse";function lre(e){const t=M.useRef(e);return M.useEffect(()=>{t.current=e},[e]),t}function Lf(e){const t=lre(e);return M.useCallback(function(...n){return t.current&&t.current(...n)},[t])}const ure=e=>M.forwardRef((t,n)=>q.jsx("div",{...t,ref:n,className:bt(t.className,e)}));function fre(){return M.useState(null)}function dre(e){const t=M.useRef(e);return M.useEffect(()=>{t.current=e},[e]),t}function Cn(e){const t=dre(e);return M.useCallback(function(...n){return t.current&&t.current(...n)},[t])}function hre(e,t,n,r=!1){const i=Cn(n);M.useEffect(()=>{const a=typeof e=="function"?e():e;return a.addEventListener(t,i,r),()=>a.removeEventListener(t,i,r)},[e])}function iN(){const e=M.useRef(!0),t=M.useRef(()=>e.current);return M.useEffect(()=>(e.current=!0,()=>{e.current=!1}),[]),t.current}function sN(e){const t=M.useRef(null);return M.useEffect(()=>{t.current=e}),t.current}const pre=typeof global<"u"&&global.navigator&&global.navigator.product==="ReactNative",gre=typeof document<"u",_O=gre||pre?M.useLayoutEffect:M.useEffect,mre=["as","disabled"];function yre(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function bre(e){return!e||e.trim()==="#"}function Iw({tagName:e,disabled:t,href:n,target:r,rel:i,role:a,onClick:c,tabIndex:u=0,type:f}){e||(n!=null||r!=null||i!=null?e="a":e="button");const d={tagName:e};if(e==="button")return[{type:f||"button",disabled:t},d];const p=y=>{if((t||e==="a"&&bre(n))&&y.preventDefault(),t){y.stopPropagation();return}c?.(y)},g=y=>{y.key===" "&&(y.preventDefault(),p(y))};return e==="a"&&(n||(n="#"),t&&(n=void 0)),[{role:a??"button",disabled:void 0,tabIndex:t?void 0:u,href:n,target:e==="a"?r:void 0,"aria-disabled":t||void 0,rel:e==="a"?i:void 0,onClick:p,onKeyDown:g},d]}const Nw=M.forwardRef((e,t)=>{let{as:n,disabled:r}=e,i=yre(e,mre);const[a,{tagName:c}]=Iw(Object.assign({tagName:n,disabled:r},i));return q.jsx(c,Object.assign({},i,a,{ref:t}))});Nw.displayName="Button";const vre=["onKeyDown"];function wre(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Ere(e){return!e||e.trim()==="#"}const $w=M.forwardRef((e,t)=>{let{onKeyDown:n}=e,r=wre(e,vre);const[i]=Iw(Object.assign({tagName:"a"},r)),a=Cn(c=>{i.onKeyDown(c),n?.(c)});return Ere(r.href)||r.role==="button"?q.jsx("a",Object.assign({ref:t},r,i,{onKeyDown:a})):q.jsx("a",Object.assign({ref:t},r,{onKeyDown:n}))});$w.displayName="Anchor";const Sre={[ni]:"show",[cs]:"show"},oN=M.forwardRef(({className:e,children:t,transitionClasses:n={},onEnter:r,...i},a)=>{const c={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,...i},u=M.useCallback((f,d)=>{nN(f),r?.(f,d)},[r]);return q.jsx(ng,{ref:a,addEndListener:Dw,...c,onEnter:u,childRef:dl(t),children:(f,d)=>M.cloneElement(t,{...d,className:bt("fade",e,t.props.className,Sre[f],n[f])})})});oN.displayName="Fade";const _re={"aria-label":G0.string,onClick:G0.func,variant:G0.oneOf(["white"])},Uw=M.forwardRef(({className:e,variant:t,"aria-label":n="Close",...r},i)=>q.jsx("button",{ref:i,type:"button",className:bt("btn-close",t&&`btn-close-${t}`,e),"aria-label":n,...r}));Uw.displayName="CloseButton";Uw.propTypes=_re;const aN=M.forwardRef(({as:e,bsPrefix:t,variant:n="primary",size:r,active:i=!1,disabled:a=!1,className:c,...u},f)=>{const d=$t(t,"btn"),[p,{tagName:g}]=Iw({tagName:e,disabled:a,...u}),y=g;return q.jsx(y,{...p,...u,ref:f,disabled:a,className:bt(c,d,i&&"active",n&&`${d}-${n}`,r&&`${d}-${r}`,u.href&&a&&"disabled")})});aN.displayName="Button";const cN=M.createContext(null);cN.displayName="CardHeaderContext";const lN=M.forwardRef(({bsPrefix:e,fluid:t=!1,as:n="div",className:r,...i},a)=>{const c=$t(e,"container"),u=typeof t=="string"?`-${t}`:"-fluid";return q.jsx(n,{ref:a,...i,className:bt(r,t?`${c}${u}`:c)})});lN.displayName="Container";var xre=Function.prototype.bind.call(Function.prototype.call,[].slice);function os(e,t){return xre(e.querySelectorAll(t))}function Are(e,t,n){const r=M.useRef(e!==void 0),[i,a]=M.useState(t),c=e!==void 0,u=r.current;return r.current=c,!c&&u&&i!==t&&a(t),[c?e:i,M.useCallback((...f)=>{const[d,...p]=f;let g=n?.(d,...p);return a(d),g},[n])]}function uN(){const[,e]=M.useReducer(t=>t+1,0);return e}const rg=M.createContext(null);var xO=Object.prototype.hasOwnProperty;function AO(e,t,n){for(n of e.keys())if(Zu(n,t))return n}function Zu(e,t){var n,r,i;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((r=e.length)===t.length)for(;r--&&Zu(e[r],t[r]););return r===-1}if(n===Set){if(e.size!==t.size)return!1;for(r of e)if(i=r,i&&typeof i=="object"&&(i=AO(t,i),!i)||!t.has(i))return!1;return!0}if(n===Map){if(e.size!==t.size)return!1;for(r of e)if(i=r[0],i&&typeof i=="object"&&(i=AO(t,i),!i)||!Zu(r[1],t.get(i)))return!1;return!0}if(n===ArrayBuffer)e=new Uint8Array(e),t=new Uint8Array(t);else if(n===DataView){if((r=e.byteLength)===t.byteLength)for(;r--&&e.getInt8(r)===t.getInt8(r););return r===-1}if(ArrayBuffer.isView(e)){if((r=e.byteLength)===t.byteLength)for(;r--&&e[r]===t[r];);return r===-1}if(!n||typeof e=="object"){r=0;for(n in e)if(xO.call(e,n)&&++r&&!xO.call(t,n)||!(n in t)||!Zu(e[n],t[n]))return!1;return Object.keys(t).length===r}}return e!==e&&t!==t}function Rre(e){const t=iN();return[e[0],M.useCallback(n=>{if(t())return e[1](n)},[t,e[1]])]}var Jn="top",zr="bottom",qr="right",er="left",Bw="auto",jf=[Jn,zr,qr,er],Xc="start",yf="end",Ore="clippingParents",fN="viewport",Nu="popper",Tre="reference",RO=jf.reduce(function(e,t){return e.concat([t+"-"+Xc,t+"-"+yf])},[]),dN=[].concat(jf,[Bw]).reduce(function(e,t){return e.concat([t,t+"-"+Xc,t+"-"+yf])},[]),Dre="beforeRead",Cre="read",Ire="afterRead",Nre="beforeMain",$re="main",Ure="afterMain",Bre="beforeWrite",Pre="write",kre="afterWrite",Mre=[Dre,Cre,Ire,Nre,$re,Ure,Bre,Pre,kre];function Oi(e){return e.split("-")[0]}function wr(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function ha(e){var t=wr(e).Element;return e instanceof t||e instanceof Element}function Ti(e){var t=wr(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function Pw(e){if(typeof ShadowRoot>"u")return!1;var t=wr(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}var ra=Math.max,gp=Math.min,Zc=Math.round;function pv(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function hN(){return!/^((?!chrome|android).)*safari/i.test(pv())}function Qc(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!1);var r=e.getBoundingClientRect(),i=1,a=1;t&&Ti(e)&&(i=e.offsetWidth>0&&Zc(r.width)/e.offsetWidth||1,a=e.offsetHeight>0&&Zc(r.height)/e.offsetHeight||1);var c=ha(e)?wr(e):window,u=c.visualViewport,f=!hN()&&n,d=(r.left+(f&&u?u.offsetLeft:0))/i,p=(r.top+(f&&u?u.offsetTop:0))/a,g=r.width/i,y=r.height/a;return{width:g,height:y,top:p,right:d+g,bottom:p+y,left:d,x:d,y:p}}function kw(e){var t=Qc(e),n=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:r}}function pN(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&Pw(n)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function po(e){return e?(e.nodeName||"").toLowerCase():null}function vs(e){return wr(e).getComputedStyle(e)}function Lre(e){return["table","td","th"].indexOf(po(e))>=0}function bo(e){return((ha(e)?e.ownerDocument:e.document)||window.document).documentElement}function ig(e){return po(e)==="html"?e:e.assignedSlot||e.parentNode||(Pw(e)?e.host:null)||bo(e)}function OO(e){return!Ti(e)||vs(e).position==="fixed"?null:e.offsetParent}function jre(e){var t=/firefox/i.test(pv()),n=/Trident/i.test(pv());if(n&&Ti(e)){var r=vs(e);if(r.position==="fixed")return null}var i=ig(e);for(Pw(i)&&(i=i.host);Ti(i)&&["html","body"].indexOf(po(i))<0;){var a=vs(i);if(a.transform!=="none"||a.perspective!=="none"||a.contain==="paint"||["transform","perspective"].indexOf(a.willChange)!==-1||t&&a.willChange==="filter"||t&&a.filter&&a.filter!=="none")return i;i=i.parentNode}return null}function zf(e){for(var t=wr(e),n=OO(e);n&&Lre(n)&&vs(n).position==="static";)n=OO(n);return n&&(po(n)==="html"||po(n)==="body"&&vs(n).position==="static")?t:n||jre(e)||t}function Mw(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Qu(e,t,n){return ra(e,gp(t,n))}function zre(e,t,n){var r=Qu(e,t,n);return r>n?n:r}function gN(){return{top:0,right:0,bottom:0,left:0}}function mN(e){return Object.assign({},gN(),e)}function yN(e,t){return t.reduce(function(n,r){return n[r]=e,n},{})}var qre=function(t,n){return t=typeof t=="function"?t(Object.assign({},n.rects,{placement:n.placement})):t,mN(typeof t!="number"?t:yN(t,jf))};function Hre(e){var t,n=e.state,r=e.name,i=e.options,a=n.elements.arrow,c=n.modifiersData.popperOffsets,u=Oi(n.placement),f=Mw(u),d=[er,qr].indexOf(u)>=0,p=d?"height":"width";if(!(!a||!c)){var g=qre(i.padding,n),y=kw(a),b=f==="y"?Jn:er,v=f==="y"?zr:qr,E=n.rects.reference[p]+n.rects.reference[f]-c[f]-n.rects.popper[p],S=c[f]-n.rects.reference[f],x=zf(a),T=x?f==="y"?x.clientHeight||0:x.clientWidth||0:0,O=E/2-S/2,U=g[b],N=T-y[p]-g[v],I=T/2-y[p]/2+O,j=Qu(U,I,N),z=f;n.modifiersData[r]=(t={},t[z]=j,t.centerOffset=j-I,t)}}function Fre(e){var t=e.state,n=e.options,r=n.element,i=r===void 0?"[data-popper-arrow]":r;i!=null&&(typeof i=="string"&&(i=t.elements.popper.querySelector(i),!i)||pN(t.elements.popper,i)&&(t.elements.arrow=i))}const Vre={name:"arrow",enabled:!0,phase:"main",fn:Hre,effect:Fre,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Jc(e){return e.split("-")[1]}var Gre={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Kre(e,t){var n=e.x,r=e.y,i=t.devicePixelRatio||1;return{x:Zc(n*i)/i||0,y:Zc(r*i)/i||0}}function TO(e){var t,n=e.popper,r=e.popperRect,i=e.placement,a=e.variation,c=e.offsets,u=e.position,f=e.gpuAcceleration,d=e.adaptive,p=e.roundOffsets,g=e.isFixed,y=c.x,b=y===void 0?0:y,v=c.y,E=v===void 0?0:v,S=typeof p=="function"?p({x:b,y:E}):{x:b,y:E};b=S.x,E=S.y;var x=c.hasOwnProperty("x"),T=c.hasOwnProperty("y"),O=er,U=Jn,N=window;if(d){var I=zf(n),j="clientHeight",z="clientWidth";if(I===wr(n)&&(I=bo(n),vs(I).position!=="static"&&u==="absolute"&&(j="scrollHeight",z="scrollWidth")),I=I,i===Jn||(i===er||i===qr)&&a===yf){U=zr;var P=g&&I===N&&N.visualViewport?N.visualViewport.height:I[j];E-=P-r.height,E*=f?1:-1}if(i===er||(i===Jn||i===zr)&&a===yf){O=qr;var G=g&&I===N&&N.visualViewport?N.visualViewport.width:I[z];b-=G-r.width,b*=f?1:-1}}var F=Object.assign({position:u},d&&Gre),K=p===!0?Kre({x:b,y:E},wr(n)):{x:b,y:E};if(b=K.x,E=K.y,f){var re;return Object.assign({},F,(re={},re[U]=T?"0":"",re[O]=x?"0":"",re.transform=(N.devicePixelRatio||1)<=1?"translate("+b+"px, "+E+"px)":"translate3d("+b+"px, "+E+"px, 0)",re))}return Object.assign({},F,(t={},t[U]=T?E+"px":"",t[O]=x?b+"px":"",t.transform="",t))}function Wre(e){var t=e.state,n=e.options,r=n.gpuAcceleration,i=r===void 0?!0:r,a=n.adaptive,c=a===void 0?!0:a,u=n.roundOffsets,f=u===void 0?!0:u,d={placement:Oi(t.placement),variation:Jc(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:i,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,TO(Object.assign({},d,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:c,roundOffsets:f})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,TO(Object.assign({},d,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:f})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const Yre={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Wre,data:{}};var Dh={passive:!0};function Xre(e){var t=e.state,n=e.instance,r=e.options,i=r.scroll,a=i===void 0?!0:i,c=r.resize,u=c===void 0?!0:c,f=wr(t.elements.popper),d=[].concat(t.scrollParents.reference,t.scrollParents.popper);return a&&d.forEach(function(p){p.addEventListener("scroll",n.update,Dh)}),u&&f.addEventListener("resize",n.update,Dh),function(){a&&d.forEach(function(p){p.removeEventListener("scroll",n.update,Dh)}),u&&f.removeEventListener("resize",n.update,Dh)}}const Zre={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Xre,data:{}};var Qre={left:"right",right:"left",bottom:"top",top:"bottom"};function Kh(e){return e.replace(/left|right|bottom|top/g,function(t){return Qre[t]})}var Jre={start:"end",end:"start"};function DO(e){return e.replace(/start|end/g,function(t){return Jre[t]})}function Lw(e){var t=wr(e),n=t.pageXOffset,r=t.pageYOffset;return{scrollLeft:n,scrollTop:r}}function jw(e){return Qc(bo(e)).left+Lw(e).scrollLeft}function eie(e,t){var n=wr(e),r=bo(e),i=n.visualViewport,a=r.clientWidth,c=r.clientHeight,u=0,f=0;if(i){a=i.width,c=i.height;var d=hN();(d||!d&&t==="fixed")&&(u=i.offsetLeft,f=i.offsetTop)}return{width:a,height:c,x:u+jw(e),y:f}}function tie(e){var t,n=bo(e),r=Lw(e),i=(t=e.ownerDocument)==null?void 0:t.body,a=ra(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),c=ra(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),u=-r.scrollLeft+jw(e),f=-r.scrollTop;return vs(i||n).direction==="rtl"&&(u+=ra(n.clientWidth,i?i.clientWidth:0)-a),{width:a,height:c,x:u,y:f}}function zw(e){var t=vs(e),n=t.overflow,r=t.overflowX,i=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function bN(e){return["html","body","#document"].indexOf(po(e))>=0?e.ownerDocument.body:Ti(e)&&zw(e)?e:bN(ig(e))}function Ju(e,t){var n;t===void 0&&(t=[]);var r=bN(e),i=r===((n=e.ownerDocument)==null?void 0:n.body),a=wr(r),c=i?[a].concat(a.visualViewport||[],zw(r)?r:[]):r,u=t.concat(c);return i?u:u.concat(Ju(ig(c)))}function gv(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function nie(e,t){var n=Qc(e,!1,t==="fixed");return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}function CO(e,t,n){return t===fN?gv(eie(e,n)):ha(t)?nie(t,n):gv(tie(bo(e)))}function rie(e){var t=Ju(ig(e)),n=["absolute","fixed"].indexOf(vs(e).position)>=0,r=n&&Ti(e)?zf(e):e;return ha(r)?t.filter(function(i){return ha(i)&&pN(i,r)&&po(i)!=="body"}):[]}function iie(e,t,n,r){var i=t==="clippingParents"?rie(e):[].concat(t),a=[].concat(i,[n]),c=a[0],u=a.reduce(function(f,d){var p=CO(e,d,r);return f.top=ra(p.top,f.top),f.right=gp(p.right,f.right),f.bottom=gp(p.bottom,f.bottom),f.left=ra(p.left,f.left),f},CO(e,c,r));return u.width=u.right-u.left,u.height=u.bottom-u.top,u.x=u.left,u.y=u.top,u}function vN(e){var t=e.reference,n=e.element,r=e.placement,i=r?Oi(r):null,a=r?Jc(r):null,c=t.x+t.width/2-n.width/2,u=t.y+t.height/2-n.height/2,f;switch(i){case Jn:f={x:c,y:t.y-n.height};break;case zr:f={x:c,y:t.y+t.height};break;case qr:f={x:t.x+t.width,y:u};break;case er:f={x:t.x-n.width,y:u};break;default:f={x:t.x,y:t.y}}var d=i?Mw(i):null;if(d!=null){var p=d==="y"?"height":"width";switch(a){case Xc:f[d]=f[d]-(t[p]/2-n[p]/2);break;case yf:f[d]=f[d]+(t[p]/2-n[p]/2);break}}return f}function bf(e,t){t===void 0&&(t={});var n=t,r=n.placement,i=r===void 0?e.placement:r,a=n.strategy,c=a===void 0?e.strategy:a,u=n.boundary,f=u===void 0?Ore:u,d=n.rootBoundary,p=d===void 0?fN:d,g=n.elementContext,y=g===void 0?Nu:g,b=n.altBoundary,v=b===void 0?!1:b,E=n.padding,S=E===void 0?0:E,x=mN(typeof S!="number"?S:yN(S,jf)),T=y===Nu?Tre:Nu,O=e.rects.popper,U=e.elements[v?T:y],N=iie(ha(U)?U:U.contextElement||bo(e.elements.popper),f,p,c),I=Qc(e.elements.reference),j=vN({reference:I,element:O,placement:i}),z=gv(Object.assign({},O,j)),P=y===Nu?z:I,G={top:N.top-P.top+x.top,bottom:P.bottom-N.bottom+x.bottom,left:N.left-P.left+x.left,right:P.right-N.right+x.right},F=e.modifiersData.offset;if(y===Nu&&F){var K=F[i];Object.keys(G).forEach(function(re){var J=[qr,zr].indexOf(re)>=0?1:-1,D=[Jn,zr].indexOf(re)>=0?"y":"x";G[re]+=K[D]*J})}return G}function sie(e,t){t===void 0&&(t={});var n=t,r=n.placement,i=n.boundary,a=n.rootBoundary,c=n.padding,u=n.flipVariations,f=n.allowedAutoPlacements,d=f===void 0?dN:f,p=Jc(r),g=p?u?RO:RO.filter(function(v){return Jc(v)===p}):jf,y=g.filter(function(v){return d.indexOf(v)>=0});y.length===0&&(y=g);var b=y.reduce(function(v,E){return v[E]=bf(e,{placement:E,boundary:i,rootBoundary:a,padding:c})[Oi(E)],v},{});return Object.keys(b).sort(function(v,E){return b[v]-b[E]})}function oie(e){if(Oi(e)===Bw)return[];var t=Kh(e);return[DO(e),t,DO(t)]}function aie(e){var t=e.state,n=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var i=n.mainAxis,a=i===void 0?!0:i,c=n.altAxis,u=c===void 0?!0:c,f=n.fallbackPlacements,d=n.padding,p=n.boundary,g=n.rootBoundary,y=n.altBoundary,b=n.flipVariations,v=b===void 0?!0:b,E=n.allowedAutoPlacements,S=t.options.placement,x=Oi(S),T=x===S,O=f||(T||!v?[Kh(S)]:oie(S)),U=[S].concat(O).reduce(function(ne,ue){return ne.concat(Oi(ue)===Bw?sie(t,{placement:ue,boundary:p,rootBoundary:g,padding:d,flipVariations:v,allowedAutoPlacements:E}):ue)},[]),N=t.rects.reference,I=t.rects.popper,j=new Map,z=!0,P=U[0],G=0;G<U.length;G++){var F=U[G],K=Oi(F),re=Jc(F)===Xc,J=[Jn,zr].indexOf(K)>=0,D=J?"width":"height",R=bf(t,{placement:F,boundary:p,rootBoundary:g,altBoundary:y,padding:d}),L=J?re?qr:er:re?zr:Jn;N[D]>I[D]&&(L=Kh(L));var V=Kh(L),X=[];if(a&&X.push(R[K]<=0),u&&X.push(R[L]<=0,R[V]<=0),X.every(function(ne){return ne})){P=F,z=!1;break}j.set(F,X)}if(z)for(var $=v?3:1,W=function(ue){var me=U.find(function(Re){var we=j.get(Re);if(we)return we.slice(0,ue).every(function(_e){return _e})});if(me)return P=me,"break"},te=$;te>0;te--){var se=W(te);if(se==="break")break}t.placement!==P&&(t.modifiersData[r]._skip=!0,t.placement=P,t.reset=!0)}}const cie={name:"flip",enabled:!0,phase:"main",fn:aie,requiresIfExists:["offset"],data:{_skip:!1}};function IO(e,t,n){return n===void 0&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function NO(e){return[Jn,qr,zr,er].some(function(t){return e[t]>=0})}function lie(e){var t=e.state,n=e.name,r=t.rects.reference,i=t.rects.popper,a=t.modifiersData.preventOverflow,c=bf(t,{elementContext:"reference"}),u=bf(t,{altBoundary:!0}),f=IO(c,r),d=IO(u,i,a),p=NO(f),g=NO(d);t.modifiersData[n]={referenceClippingOffsets:f,popperEscapeOffsets:d,isReferenceHidden:p,hasPopperEscaped:g},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":p,"data-popper-escaped":g})}const uie={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:lie};function fie(e,t,n){var r=Oi(e),i=[er,Jn].indexOf(r)>=0?-1:1,a=typeof n=="function"?n(Object.assign({},t,{placement:e})):n,c=a[0],u=a[1];return c=c||0,u=(u||0)*i,[er,qr].indexOf(r)>=0?{x:u,y:c}:{x:c,y:u}}function die(e){var t=e.state,n=e.options,r=e.name,i=n.offset,a=i===void 0?[0,0]:i,c=dN.reduce(function(p,g){return p[g]=fie(g,t.rects,a),p},{}),u=c[t.placement],f=u.x,d=u.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=f,t.modifiersData.popperOffsets.y+=d),t.modifiersData[r]=c}const hie={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:die};function pie(e){var t=e.state,n=e.name;t.modifiersData[n]=vN({reference:t.rects.reference,element:t.rects.popper,placement:t.placement})}const gie={name:"popperOffsets",enabled:!0,phase:"read",fn:pie,data:{}};function mie(e){return e==="x"?"y":"x"}function yie(e){var t=e.state,n=e.options,r=e.name,i=n.mainAxis,a=i===void 0?!0:i,c=n.altAxis,u=c===void 0?!1:c,f=n.boundary,d=n.rootBoundary,p=n.altBoundary,g=n.padding,y=n.tether,b=y===void 0?!0:y,v=n.tetherOffset,E=v===void 0?0:v,S=bf(t,{boundary:f,rootBoundary:d,padding:g,altBoundary:p}),x=Oi(t.placement),T=Jc(t.placement),O=!T,U=Mw(x),N=mie(U),I=t.modifiersData.popperOffsets,j=t.rects.reference,z=t.rects.popper,P=typeof E=="function"?E(Object.assign({},t.rects,{placement:t.placement})):E,G=typeof P=="number"?{mainAxis:P,altAxis:P}:Object.assign({mainAxis:0,altAxis:0},P),F=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,K={x:0,y:0};if(I){if(a){var re,J=U==="y"?Jn:er,D=U==="y"?zr:qr,R=U==="y"?"height":"width",L=I[U],V=L+S[J],X=L-S[D],$=b?-z[R]/2:0,W=T===Xc?j[R]:z[R],te=T===Xc?-z[R]:-j[R],se=t.elements.arrow,ne=b&&se?kw(se):{width:0,height:0},ue=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:gN(),me=ue[J],Re=ue[D],we=Qu(0,j[R],ne[R]),_e=O?j[R]/2-$-we-me-G.mainAxis:W-we-me-G.mainAxis,ze=O?-j[R]/2+$+we+Re+G.mainAxis:te+we+Re+G.mainAxis,Xe=t.elements.arrow&&zf(t.elements.arrow),Vt=Xe?U==="y"?Xe.clientTop||0:Xe.clientLeft||0:0,Ot=(re=F?.[U])!=null?re:0,_t=L+_e-Ot-Vt,We=L+ze-Ot,Vr=Qu(b?gp(V,_t):V,L,b?ra(X,We):X);I[U]=Vr,K[U]=Vr-L}if(u){var xt,vo=U==="x"?Jn:er,Bi=U==="x"?zr:qr,En=I[N],Qt=N==="y"?"height":"width",Jt=En+S[vo],Sr=En-S[Bi],ai=[Jn,er].indexOf(x)!==-1,Sn=(xt=F?.[N])!=null?xt:0,sr=ai?Jt:En-j[Qt]-z[Qt]-Sn+G.altAxis,B=ai?En+j[Qt]+z[Qt]-Sn-G.altAxis:Sr,_=b&&ai?zre(sr,En,B):Qu(b?sr:Jt,En,b?B:Sr);I[N]=_,K[N]=_-En}t.modifiersData[r]=K}}const bie={name:"preventOverflow",enabled:!0,phase:"main",fn:yie,requiresIfExists:["offset"]};function vie(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function wie(e){return e===wr(e)||!Ti(e)?Lw(e):vie(e)}function Eie(e){var t=e.getBoundingClientRect(),n=Zc(t.width)/e.offsetWidth||1,r=Zc(t.height)/e.offsetHeight||1;return n!==1||r!==1}function Sie(e,t,n){n===void 0&&(n=!1);var r=Ti(t),i=Ti(t)&&Eie(t),a=bo(t),c=Qc(e,i,n),u={scrollLeft:0,scrollTop:0},f={x:0,y:0};return(r||!r&&!n)&&((po(t)!=="body"||zw(a))&&(u=wie(t)),Ti(t)?(f=Qc(t,!0),f.x+=t.clientLeft,f.y+=t.clientTop):a&&(f.x=jw(a))),{x:c.left+u.scrollLeft-f.x,y:c.top+u.scrollTop-f.y,width:c.width,height:c.height}}function _ie(e){var t=new Map,n=new Set,r=[];e.forEach(function(a){t.set(a.name,a)});function i(a){n.add(a.name);var c=[].concat(a.requires||[],a.requiresIfExists||[]);c.forEach(function(u){if(!n.has(u)){var f=t.get(u);f&&i(f)}}),r.push(a)}return e.forEach(function(a){n.has(a.name)||i(a)}),r}function xie(e){var t=_ie(e);return Mre.reduce(function(n,r){return n.concat(t.filter(function(i){return i.phase===r}))},[])}function Aie(e){var t;return function(){return t||(t=new Promise(function(n){Promise.resolve().then(function(){t=void 0,n(e())})})),t}}function Rie(e){var t=e.reduce(function(n,r){var i=n[r.name];return n[r.name]=i?Object.assign({},i,r,{options:Object.assign({},i.options,r.options),data:Object.assign({},i.data,r.data)}):r,n},{});return Object.keys(t).map(function(n){return t[n]})}var $O={placement:"bottom",modifiers:[],strategy:"absolute"};function UO(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function Oie(e){e===void 0&&(e={});var t=e,n=t.defaultModifiers,r=n===void 0?[]:n,i=t.defaultOptions,a=i===void 0?$O:i;return function(u,f,d){d===void 0&&(d=a);var p={placement:"bottom",orderedModifiers:[],options:Object.assign({},$O,a),modifiersData:{},elements:{reference:u,popper:f},attributes:{},styles:{}},g=[],y=!1,b={state:p,setOptions:function(x){var T=typeof x=="function"?x(p.options):x;E(),p.options=Object.assign({},a,p.options,T),p.scrollParents={reference:ha(u)?Ju(u):u.contextElement?Ju(u.contextElement):[],popper:Ju(f)};var O=xie(Rie([].concat(r,p.options.modifiers)));return p.orderedModifiers=O.filter(function(U){return U.enabled}),v(),b.update()},forceUpdate:function(){if(!y){var x=p.elements,T=x.reference,O=x.popper;if(UO(T,O)){p.rects={reference:Sie(T,zf(O),p.options.strategy==="fixed"),popper:kw(O)},p.reset=!1,p.placement=p.options.placement,p.orderedModifiers.forEach(function(G){return p.modifiersData[G.name]=Object.assign({},G.data)});for(var U=0;U<p.orderedModifiers.length;U++){if(p.reset===!0){p.reset=!1,U=-1;continue}var N=p.orderedModifiers[U],I=N.fn,j=N.options,z=j===void 0?{}:j,P=N.name;typeof I=="function"&&(p=I({state:p,options:z,name:P,instance:b})||p)}}}},update:Aie(function(){return new Promise(function(S){b.forceUpdate(),S(p)})}),destroy:function(){E(),y=!0}};if(!UO(u,f))return b;b.setOptions(d).then(function(S){!y&&d.onFirstUpdate&&d.onFirstUpdate(S)});function v(){p.orderedModifiers.forEach(function(S){var x=S.name,T=S.options,O=T===void 0?{}:T,U=S.effect;if(typeof U=="function"){var N=U({state:p,name:x,instance:b,options:O}),I=function(){};g.push(N||I)}})}function E(){g.forEach(function(S){return S()}),g=[]}return b}}const Tie=Oie({defaultModifiers:[uie,gie,Yre,Zre,hie,cie,bie,Vre]}),Die=["enabled","placement","strategy","modifiers"];function Cie(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}const Iie={name:"applyStyles",enabled:!1,phase:"afterWrite",fn:()=>{}},Nie={name:"ariaDescribedBy",enabled:!0,phase:"afterWrite",effect:({state:e})=>()=>{const{reference:t,popper:n}=e.elements;if("removeAttribute"in t){const r=(t.getAttribute("aria-describedby")||"").split(",").filter(i=>i.trim()!==n.id);r.length?t.setAttribute("aria-describedby",r.join(",")):t.removeAttribute("aria-describedby")}},fn:({state:e})=>{var t;const{popper:n,reference:r}=e.elements,i=(t=n.getAttribute("role"))==null?void 0:t.toLowerCase();if(n.id&&i==="tooltip"&&"setAttribute"in r){const a=r.getAttribute("aria-describedby");if(a&&a.split(",").indexOf(n.id)!==-1)return;r.setAttribute("aria-describedby",a?`${a},${n.id}`:n.id)}}},$ie=[];function Uie(e,t,n={}){let{enabled:r=!0,placement:i="bottom",strategy:a="absolute",modifiers:c=$ie}=n,u=Cie(n,Die);const f=M.useRef(c),d=M.useRef(),p=M.useCallback(()=>{var S;(S=d.current)==null||S.update()},[]),g=M.useCallback(()=>{var S;(S=d.current)==null||S.forceUpdate()},[]),[y,b]=Rre(M.useState({placement:i,update:p,forceUpdate:g,attributes:{},styles:{popper:{},arrow:{}}})),v=M.useMemo(()=>({name:"updateStateModifier",enabled:!0,phase:"write",requires:["computeStyles"],fn:({state:S})=>{const x={},T={};Object.keys(S.elements).forEach(O=>{x[O]=S.styles[O],T[O]=S.attributes[O]}),b({state:S,styles:x,attributes:T,update:p,forceUpdate:g,placement:S.placement})}}),[p,g,b]),E=M.useMemo(()=>(Zu(f.current,c)||(f.current=c),f.current),[c]);return M.useEffect(()=>{!d.current||!r||d.current.setOptions({placement:i,strategy:a,modifiers:[...E,v,Iie]})},[a,i,v,r,E]),M.useEffect(()=>{if(!(!r||e==null||t==null))return d.current=Tie(e,t,Object.assign({},u,{placement:i,strategy:a,modifiers:[...E,Nie,v]})),()=>{d.current!=null&&(d.current.destroy(),d.current=void 0,b(S=>Object.assign({},S,{attributes:{},styles:{popper:{}}})))}},[r,e,t]),y}function mp(e,t){if(e.contains)return e.contains(t);if(e.compareDocumentPosition)return e===t||!!(e.compareDocumentPosition(t)&16)}var W0,BO;function Bie(){if(BO)return W0;BO=1;var e=function(){};return W0=e,W0}var Pie=Bie();const kie=ws(Pie),PO=()=>{};function Mie(e){return e.button===0}function Lie(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}const Y0=e=>e&&("current"in e?e.current:e),kO={click:"mousedown",mouseup:"mousedown",pointerup:"pointerdown"};function jie(e,t=PO,{disabled:n,clickTrigger:r="click"}={}){const i=M.useRef(!1),a=M.useRef(!1),c=M.useCallback(d=>{const p=Y0(e);kie(!!p,"ClickOutside captured a close event but does not have a ref to compare it to. useClickOutside(), should be passed a ref that resolves to a DOM node"),i.current=!p||Lie(d)||!Mie(d)||!!mp(p,d.target)||a.current,a.current=!1},[e]),u=Cn(d=>{const p=Y0(e);p&&mp(p,d.target)?a.current=!0:a.current=!1}),f=Cn(d=>{i.current||t(d)});M.useEffect(()=>{var d,p;if(n||e==null)return;const g=eg(Y0(e)),y=g.defaultView||window;let b=(d=y.event)!=null?d:(p=y.parent)==null?void 0:p.event,v=null;kO[r]&&(v=lo(g,kO[r],u,!0));const E=lo(g,r,c,!0),S=lo(g,r,T=>{if(T===b){b=void 0;return}f(T)});let x=[];return"ontouchstart"in g.documentElement&&(x=[].slice.call(g.body.children).map(T=>lo(T,"mousemove",PO))),()=>{v?.(),E(),S(),x.forEach(T=>T())}},[e,n,r,c,u,f])}function zie(e){const t={};return Array.isArray(e)?(e?.forEach(n=>{t[n.name]=n}),t):e||t}function qie(e={}){return Array.isArray(e)?e:Object.keys(e).map(t=>(e[t].name=t,e[t]))}function Hie({enabled:e,enableEvents:t,placement:n,flip:r,offset:i,fixed:a,containerPadding:c,arrowElement:u,popperConfig:f={}}){var d,p,g,y,b;const v=zie(f.modifiers);return Object.assign({},f,{placement:n,enabled:e,strategy:a?"fixed":f.strategy,modifiers:qie(Object.assign({},v,{eventListeners:{enabled:t,options:(d=v.eventListeners)==null?void 0:d.options},preventOverflow:Object.assign({},v.preventOverflow,{options:c?Object.assign({padding:c},(p=v.preventOverflow)==null?void 0:p.options):(g=v.preventOverflow)==null?void 0:g.options}),offset:{options:Object.assign({offset:i},(y=v.offset)==null?void 0:y.options)},arrow:Object.assign({},v.arrow,{enabled:!!u,options:Object.assign({},(b=v.arrow)==null?void 0:b.options,{element:u})}),flip:Object.assign({enabled:!!r},v.flip)}))})}const Fie=["children","usePopper"];function Vie(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}const Gie=()=>{};function wN(e={}){const t=M.useContext(rg),[n,r]=fre(),i=M.useRef(!1),{flip:a,offset:c,rootCloseEvent:u,fixed:f=!1,placement:d,popperConfig:p={},enableEventListeners:g=!0,usePopper:y=!!t}=e,b=t?.show==null?!!e.show:t.show;b&&!i.current&&(i.current=!0);const v=I=>{t?.toggle(!1,I)},{placement:E,setMenu:S,menuElement:x,toggleElement:T}=t||{},O=Uie(T,x,Hie({placement:d||E||"bottom-start",enabled:y,enableEvents:g??b,offset:c,flip:a,fixed:f,arrowElement:n,popperConfig:p})),U=Object.assign({ref:S||Gie,"aria-labelledby":T?.id},O.attributes.popper,{style:O.styles.popper}),N={show:b,placement:E,hasShown:i.current,toggle:t?.toggle,popper:y?O:null,arrowProps:y?Object.assign({ref:r},O.attributes.arrow,{style:O.styles.arrow}):{}};return jie(x,v,{clickTrigger:u,disabled:!b}),[U,N]}function EN(e){let{children:t,usePopper:n=!0}=e,r=Vie(e,Fie);const[i,a]=wN(Object.assign({},r,{usePopper:n}));return q.jsx(q.Fragment,{children:t(i,a)})}EN.displayName="DropdownMenu";const SN={prefix:String(Math.round(Math.random()*1e10)),current:0},_N=In.createContext(SN),Kie=In.createContext(!1);let X0=new WeakMap;function Wie(e=!1){let t=M.useContext(_N),n=M.useRef(null);if(n.current===null&&!e){var r,i;let a=(i=In.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED)===null||i===void 0||(r=i.ReactCurrentOwner)===null||r===void 0?void 0:r.current;if(a){let c=X0.get(a);c==null?X0.set(a,{id:t.current,state:a.memoizedState}):a.memoizedState!==c.state&&(t.current=c.id,X0.delete(a))}n.current=++t.current}return n.current}function Yie(e){let t=M.useContext(_N),n=Wie(!!e),r=`react-aria${t.prefix}`;return e||`${r}-${n}`}function Xie(e){let t=In.useId(),[n]=M.useState(tse()),r=n?"react-aria":`react-aria${SN.prefix}`;return e||`${r}-${t}`}const Zie=typeof In.useId=="function"?Xie:Yie;function Qie(){return!1}function Jie(){return!0}function ese(e){return()=>{}}function tse(){return typeof In.useSyncExternalStore=="function"?In.useSyncExternalStore(ese,Qie,Jie):M.useContext(Kie)}const xN=e=>{var t;return((t=e.getAttribute("role"))==null?void 0:t.toLowerCase())==="menu"},MO=()=>{};function AN(){const e=Zie(),{show:t=!1,toggle:n=MO,setToggle:r,menuElement:i}=M.useContext(rg)||{},a=M.useCallback(u=>{n(!t,u)},[t,n]),c={id:e,ref:r||MO,onClick:a,"aria-expanded":!!t};return i&&xN(i)&&(c["aria-haspopup"]=!0),[c,{show:t,toggle:n}]}function RN({children:e}){const[t,n]=AN();return q.jsx(q.Fragment,{children:e(t,n)})}RN.displayName="DropdownToggle";const pa=M.createContext(null),vf=(e,t=null)=>e!=null?String(e):t||null,sg=M.createContext(null);sg.displayName="NavContext";const nse="data-rr-ui-",rse="rrUi";function hl(e){return`${nse}${e}`}function ise(e){return`${rse}${e}`}const sse=["eventKey","disabled","onClick","active","as"];function ose(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function ON({key:e,href:t,active:n,disabled:r,onClick:i}){const a=M.useContext(pa),c=M.useContext(sg),{activeKey:u}=c||{},f=vf(e,t),d=n==null&&e!=null?vf(u)===f:n;return[{onClick:Cn(g=>{r||(i?.(g),a&&!g.isPropagationStopped()&&a(f,g))}),"aria-disabled":r||void 0,"aria-selected":d,[hl("dropdown-item")]:""},{isActive:d}]}const TN=M.forwardRef((e,t)=>{let{eventKey:n,disabled:r,onClick:i,active:a,as:c=Nw}=e,u=ose(e,sse);const[f]=ON({key:n,href:u.href,disabled:r,onClick:i,active:a});return q.jsx(c,Object.assign({},u,{ref:t},f))});TN.displayName="DropdownItem";const DN=M.createContext(tg?window:void 0);DN.Provider;function og(){return M.useContext(DN)}function LO(){const e=uN(),t=M.useRef(null),n=M.useCallback(r=>{t.current=r,e()},[e]);return[t,n]}function qf({defaultShow:e,show:t,onSelect:n,onToggle:r,itemSelector:i=`* [${hl("dropdown-item")}]`,focusFirstItemOnShow:a,placement:c="bottom-start",children:u}){const f=og(),[d,p]=Are(t,e,r),[g,y]=LO(),b=g.current,[v,E]=LO(),S=v.current,x=sN(d),T=M.useRef(null),O=M.useRef(!1),U=M.useContext(pa),N=M.useCallback((F,K,re=K?.type)=>{p(F,{originalEvent:K,source:re})},[p]),I=Cn((F,K)=>{n?.(F,K),N(!1,K,"select"),K.isPropagationStopped()||U?.(F,K)}),j=M.useMemo(()=>({toggle:N,placement:c,show:d,menuElement:b,toggleElement:S,setMenu:y,setToggle:E}),[N,c,d,b,S,y,E]);b&&x&&!d&&(O.current=b.contains(b.ownerDocument.activeElement));const z=Cn(()=>{S&&S.focus&&S.focus()}),P=Cn(()=>{const F=T.current;let K=a;if(K==null&&(K=g.current&&xN(g.current)?"keyboard":!1),K===!1||K==="keyboard"&&!/^key.+$/.test(F))return;const re=os(g.current,i)[0];re&&re.focus&&re.focus()});M.useEffect(()=>{d?P():O.current&&(O.current=!1,z())},[d,O,z,P]),M.useEffect(()=>{T.current=null});const G=(F,K)=>{if(!g.current)return null;const re=os(g.current,i);let J=re.indexOf(F)+K;return J=Math.max(0,Math.min(J,re.length)),re[J]};return hre(M.useCallback(()=>f.document,[f]),"keydown",F=>{var K,re;const{key:J}=F,D=F.target,R=(K=g.current)==null?void 0:K.contains(D),L=(re=v.current)==null?void 0:re.contains(D);if(/input|textarea/i.test(D.tagName)&&(J===" "||J!=="Escape"&&R||J==="Escape"&&D.type==="search")||!R&&!L||J==="Tab"&&(!g.current||!d))return;T.current=F.type;const X={originalEvent:F,source:F.type};switch(J){case"ArrowUp":{const $=G(D,-1);$&&$.focus&&$.focus(),F.preventDefault();return}case"ArrowDown":if(F.preventDefault(),!d)p(!0,X);else{const $=G(D,1);$&&$.focus&&$.focus()}return;case"Tab":tN(D.ownerDocument,"keyup",$=>{var W;($.key==="Tab"&&!$.target||!((W=g.current)!=null&&W.contains($.target)))&&p(!1,X)},{once:!0});break;case"Escape":J==="Escape"&&(F.preventDefault(),F.stopPropagation()),p(!1,X);break}}),q.jsx(pa.Provider,{value:I,children:q.jsx(rg.Provider,{value:j,children:u})})}qf.displayName="Dropdown";qf.Menu=EN;qf.Toggle=RN;qf.Item=TN;const qw=M.createContext({});qw.displayName="DropdownContext";const CN=M.forwardRef(({className:e,bsPrefix:t,as:n="hr",role:r="separator",...i},a)=>(t=$t(t,"dropdown-divider"),q.jsx(n,{ref:a,className:bt(e,t),role:r,...i})));CN.displayName="DropdownDivider";const IN=M.forwardRef(({className:e,bsPrefix:t,as:n="div",role:r="heading",...i},a)=>(t=$t(t,"dropdown-header"),q.jsx(n,{ref:a,className:bt(e,t),role:r,...i})));IN.displayName="DropdownHeader";const NN=M.forwardRef(({bsPrefix:e,className:t,eventKey:n,disabled:r=!1,onClick:i,active:a,as:c=$w,...u},f)=>{const d=$t(e,"dropdown-item"),[p,g]=ON({key:n,href:u.href,disabled:r,onClick:i,active:a});return q.jsx(c,{...u,...p,ref:f,className:bt(t,d,g.isActive&&"active",r&&"disabled")})});NN.displayName="DropdownItem";const $N=M.forwardRef(({className:e,bsPrefix:t,as:n="span",...r},i)=>(t=$t(t,"dropdown-item-text"),q.jsx(n,{ref:i,className:bt(e,t),...r})));$N.displayName="DropdownItemText";const ase=typeof global<"u"&&global.navigator&&global.navigator.product==="ReactNative",cse=typeof document<"u",UN=cse||ase?M.useLayoutEffect:M.useEffect,Hw=M.createContext(null);Hw.displayName="InputGroupContext";const Ra=M.createContext(null);Ra.displayName="NavbarContext";function BN(e,t){return e}function PN(e,t,n){const r=n?"top-end":"top-start",i=n?"top-start":"top-end",a=n?"bottom-end":"bottom-start",c=n?"bottom-start":"bottom-end",u=n?"right-start":"left-start",f=n?"right-end":"left-end",d=n?"left-start":"right-start",p=n?"left-end":"right-end";let g=e?c:a;return t==="up"?g=e?i:r:t==="end"?g=e?p:d:t==="start"?g=e?f:u:t==="down-centered"?g="bottom":t==="up-centered"&&(g="top"),g}const kN=M.forwardRef(({bsPrefix:e,className:t,align:n,rootCloseEvent:r,flip:i=!0,show:a,renderOnMount:c,as:u="div",popperConfig:f,variant:d,...p},g)=>{let y=!1;const b=M.useContext(Ra),v=$t(e,"dropdown-menu"),{align:E,drop:S,isRTL:x}=M.useContext(qw);n=n||E;const T=M.useContext(Hw),O=[];if(n)if(typeof n=="object"){const F=Object.keys(n);if(F.length){const K=F[0],re=n[K];y=re==="start",O.push(`${v}-${K}-${re}`)}}else n==="end"&&(y=!0);const U=PN(y,S,x),[N,{hasShown:I,popper:j,show:z,toggle:P}]=wN({flip:i,rootCloseEvent:r,show:a,usePopper:!b&&O.length===0,offset:[0,2],popperConfig:f,placement:U});if(N.ref=Cw(BN(g),N.ref),UN(()=>{z&&j?.update()},[z]),!I&&!c&&!T)return null;typeof u!="string"&&(N.show=z,N.close=()=>P?.(!1),N.align=n);let G=p.style;return j!=null&&j.placement&&(G={...p.style,...N.style},p["x-placement"]=j.placement),q.jsx(u,{...p,...N,style:G,...(O.length||b)&&{"data-bs-popper":"static"},className:bt(t,v,z&&"show",y&&`${v}-end`,d&&`${v}-${d}`,...O)})});kN.displayName="DropdownMenu";const MN=M.forwardRef(({bsPrefix:e,split:t,className:n,childBsPrefix:r,as:i=aN,...a},c)=>{const u=$t(e,"dropdown-toggle"),f=M.useContext(rg);r!==void 0&&(a.bsPrefix=r);const[d]=AN();return d.ref=Cw(d.ref,BN(c)),q.jsx(i,{className:bt(n,u,t&&`${u}-split`,f?.show&&"show"),...d,...a})});MN.displayName="DropdownToggle";const LN=M.forwardRef((e,t)=>{const{bsPrefix:n,drop:r="down",show:i,className:a,align:c="start",onSelect:u,onToggle:f,focusFirstItemOnShow:d,as:p="div",navbar:g,autoClose:y=!0,...b}=Ow(e,{show:"onToggle"}),v=M.useContext(Hw),E=$t(n,"dropdown"),S=Mne(),x=j=>y===!1?j==="click":y==="inside"?j!=="rootClose":y==="outside"?j!=="select":!0,T=Lf((j,z)=>{var P;!((P=z.originalEvent)==null||(P=P.target)==null)&&P.classList.contains("dropdown-toggle")&&z.source==="mousedown"||(z.originalEvent.currentTarget===document&&(z.source!=="keydown"||z.originalEvent.key==="Escape")&&(z.source="rootClose"),x(z.source)&&f?.(j,z))}),U=PN(c==="end",r,S),N=M.useMemo(()=>({align:c,drop:r,isRTL:S}),[c,r,S]),I={down:E,"down-centered":`${E}-center`,up:"dropup","up-centered":"dropup-center dropup",end:"dropend",start:"dropstart"};return q.jsx(qw.Provider,{value:N,children:q.jsx(qf,{placement:U,show:i,onSelect:u,onToggle:T,focusFirstItemOnShow:d,itemSelector:`.${E}-item:not(.disabled):not(:disabled)`,children:v?b.children:q.jsx(p,{...b,ref:t,className:bt(a,i&&"show",I[r])})})})});LN.displayName="Dropdown";const $u=Object.assign(LN,{Toggle:MN,Menu:kN,Item:NN,ItemText:$N,Divider:CN,Header:IN}),jO=e=>!e||typeof e=="function"?e:t=>{e.current=t};function lse(e,t){const n=jO(e),r=jO(t);return i=>{n&&n(i),r&&r(i)}}function ag(e,t){return M.useMemo(()=>lse(e,t),[e,t])}const jN=M.createContext(null),use=["as","active","eventKey"];function fse(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function zN({key:e,onClick:t,active:n,id:r,role:i,disabled:a}){const c=M.useContext(pa),u=M.useContext(sg),f=M.useContext(jN);let d=n;const p={role:i};if(u){!i&&u.role==="tablist"&&(p.role="tab");const g=u.getControllerId(e??null),y=u.getControlledId(e??null);p[hl("event-key")]=e,p.id=g||r,d=n==null&&e!=null?u.activeKey===e:n,(d||!(f!=null&&f.unmountOnExit)&&!(f!=null&&f.mountOnEnter))&&(p["aria-controls"]=y)}return p.role==="tab"&&(p["aria-selected"]=d,d||(p.tabIndex=-1),a&&(p.tabIndex=-1,p["aria-disabled"]=!0)),p.onClick=Cn(g=>{a||(t?.(g),e!=null&&c&&!g.isPropagationStopped()&&c(e,g))}),[p,{isActive:d}]}const qN=M.forwardRef((e,t)=>{let{as:n=Nw,active:r,eventKey:i}=e,a=fse(e,use);const[c,u]=zN(Object.assign({key:vf(i,a.href),active:r},a));return c[hl("active")]=u.isActive,q.jsx(n,Object.assign({},a,c,{ref:t}))});qN.displayName="NavItem";const dse=["as","onSelect","activeKey","role","onKeyDown"];function hse(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}const zO=()=>{},qO=hl("event-key"),HN=M.forwardRef((e,t)=>{let{as:n="div",onSelect:r,activeKey:i,role:a,onKeyDown:c}=e,u=hse(e,dse);const f=uN(),d=M.useRef(!1),p=M.useContext(pa),g=M.useContext(jN);let y,b;g&&(a=a||"tablist",i=g.activeKey,y=g.getControlledId,b=g.getControllerId);const v=M.useRef(null),E=O=>{const U=v.current;if(!U)return null;const N=os(U,`[${qO}]:not([aria-disabled=true])`),I=U.querySelector("[aria-selected=true]");if(!I||I!==document.activeElement)return null;const j=N.indexOf(I);if(j===-1)return null;let z=j+O;return z>=N.length&&(z=0),z<0&&(z=N.length-1),N[z]},S=(O,U)=>{O!=null&&(r?.(O,U),p?.(O,U))},x=O=>{if(c?.(O),!g)return;let U;switch(O.key){case"ArrowLeft":case"ArrowUp":U=E(-1);break;case"ArrowRight":case"ArrowDown":U=E(1);break;default:return}U&&(O.preventDefault(),S(U.dataset[ise("EventKey")]||null,O),d.current=!0,f())};M.useEffect(()=>{if(v.current&&d.current){const O=v.current.querySelector(`[${qO}][aria-selected=true]`);O?.focus()}d.current=!1});const T=ag(t,v);return q.jsx(pa.Provider,{value:S,children:q.jsx(sg.Provider,{value:{role:a,activeKey:vf(i),getControlledId:y||zO,getControllerId:b||zO},children:q.jsx(n,Object.assign({},u,{onKeyDown:x,ref:T,role:a}))})})});HN.displayName="Nav";const pse=Object.assign(HN,{Item:qN});function Z0(e){e===void 0&&(e=eg());try{var t=e.activeElement;return!t||!t.nodeName?null:t}catch{return e.body}}function gse(e){const t=M.useRef(e);return t.current=e,t}function mse(e){const t=gse(e);M.useEffect(()=>()=>t.current(),[])}function yse(e=document){const t=e.defaultView;return Math.abs(t.innerWidth-e.documentElement.clientWidth)}const HO=hl("modal-open");class Fw{constructor({ownerDocument:t,handleContainerOverflow:n=!0,isRTL:r=!1}={}){this.handleContainerOverflow=n,this.isRTL=r,this.modals=[],this.ownerDocument=t}getScrollbarWidth(){return yse(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(t){}removeModalAttributes(t){}setContainerStyle(t){const n={overflow:"hidden"},r=this.isRTL?"paddingLeft":"paddingRight",i=this.getElement();t.style={overflow:i.style.overflow,[r]:i.style[r]},t.scrollBarWidth&&(n[r]=`${parseInt(ps(i,r)||"0",10)+t.scrollBarWidth}px`),i.setAttribute(HO,""),ps(i,n)}reset(){[...this.modals].forEach(t=>this.remove(t))}removeContainerStyle(t){const n=this.getElement();n.removeAttribute(HO),Object.assign(n.style,t.style)}add(t){let n=this.modals.indexOf(t);return n!==-1||(n=this.modals.length,this.modals.push(t),this.setModalAttributes(t),n!==0)||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),n}remove(t){const n=this.modals.indexOf(t);n!==-1&&(this.modals.splice(n,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(t))}isTopModal(t){return!!this.modals.length&&this.modals[this.modals.length-1]===t}}const Q0=(e,t)=>tg?e==null?(t||eg()).body:(typeof e=="function"&&(e=e()),e&&"current"in e&&(e=e.current),e&&("nodeType"in e||e.getBoundingClientRect)?e:null):null;function bse(e,t){const n=og(),[r,i]=M.useState(()=>Q0(e,n?.document));if(!r){const a=Q0(e);a&&i(a)}return M.useEffect(()=>{},[t,r]),M.useEffect(()=>{const a=Q0(e);a!==r&&i(a)},[e,r]),r}function vse({children:e,in:t,onExited:n,mountOnEnter:r,unmountOnExit:i}){const a=M.useRef(null),c=M.useRef(t),u=Cn(n);M.useEffect(()=>{t?c.current=!0:u(a.current)},[t,u]);const f=ag(a,dl(e)),d=M.cloneElement(e,{ref:f});return t?d:i||!c.current&&r?null:d}const wse=["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children"];function Ese(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Sse(e){let{onEnter:t,onEntering:n,onEntered:r,onExit:i,onExiting:a,onExited:c,addEndListener:u,children:f}=e,d=Ese(e,wse);const p=M.useRef(null),g=ag(p,dl(f)),y=U=>N=>{U&&p.current&&U(p.current,N)},b=M.useCallback(y(t),[t]),v=M.useCallback(y(n),[n]),E=M.useCallback(y(r),[r]),S=M.useCallback(y(i),[i]),x=M.useCallback(y(a),[a]),T=M.useCallback(y(c),[c]),O=M.useCallback(y(u),[u]);return Object.assign({},d,{nodeRef:p},t&&{onEnter:b},n&&{onEntering:v},r&&{onEntered:E},i&&{onExit:S},a&&{onExiting:x},c&&{onExited:T},u&&{addEndListener:O},{children:typeof f=="function"?(U,N)=>f(U,Object.assign({},N,{ref:g})):M.cloneElement(f,{ref:g})})}const _se=["component"];function xse(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}const Ase=M.forwardRef((e,t)=>{let{component:n}=e,r=xse(e,_se);const i=Sse(r);return q.jsx(n,Object.assign({ref:t},i))});function Rse({in:e,onTransition:t}){const n=M.useRef(null),r=M.useRef(!0),i=Cn(t);return _O(()=>{if(!n.current)return;let a=!1;return i({in:e,element:n.current,initial:r.current,isStale:()=>a}),()=>{a=!0}},[e,i]),_O(()=>(r.current=!1,()=>{r.current=!0}),[]),n}function Ose({children:e,in:t,onExited:n,onEntered:r,transition:i}){const[a,c]=M.useState(!t);t&&a&&c(!1);const u=Rse({in:!!t,onTransition:d=>{const p=()=>{d.isStale()||(d.in?r?.(d.element,d.initial):(c(!0),n?.(d.element)))};Promise.resolve(i(d)).then(p,g=>{throw d.in||c(!0),g})}}),f=ag(u,dl(e));return a&&!t?null:M.cloneElement(e,{ref:f})}function FO(e,t,n){return e?q.jsx(Ase,Object.assign({},n,{component:e})):t?q.jsx(Ose,Object.assign({},n,{transition:t})):q.jsx(vse,Object.assign({},n))}const Tse=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];function Dse(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}let J0;function Cse(e){return J0||(J0=new Fw({ownerDocument:e?.document})),J0}function Ise(e){const t=og(),n=e||Cse(t),r=M.useRef({dialog:null,backdrop:null});return Object.assign(r.current,{add:()=>n.add(r.current),remove:()=>n.remove(r.current),isTopModal:()=>n.isTopModal(r.current),setDialogRef:M.useCallback(i=>{r.current.dialog=i},[]),setBackdropRef:M.useCallback(i=>{r.current.backdrop=i},[])})}const FN=M.forwardRef((e,t)=>{let{show:n=!1,role:r="dialog",className:i,style:a,children:c,backdrop:u=!0,keyboard:f=!0,onBackdropClick:d,onEscapeKeyDown:p,transition:g,runTransition:y,backdropTransition:b,runBackdropTransition:v,autoFocus:E=!0,enforceFocus:S=!0,restoreFocus:x=!0,restoreFocusOptions:T,renderDialog:O,renderBackdrop:U=We=>q.jsx("div",Object.assign({},We)),manager:N,container:I,onShow:j,onHide:z=()=>{},onExit:P,onExited:G,onExiting:F,onEnter:K,onEntering:re,onEntered:J}=e,D=Dse(e,Tse);const R=og(),L=bse(I),V=Ise(N),X=iN(),$=sN(n),[W,te]=M.useState(!n),se=M.useRef(null);M.useImperativeHandle(t,()=>V,[V]),tg&&!$&&n&&(se.current=Z0(R?.document)),n&&W&&te(!1);const ne=Cn(()=>{if(V.add(),ze.current=lo(document,"keydown",we),_e.current=lo(document,"focus",()=>setTimeout(me),!0),j&&j(),E){var We,Vr;const xt=Z0((We=(Vr=V.dialog)==null?void 0:Vr.ownerDocument)!=null?We:R?.document);V.dialog&&xt&&!mp(V.dialog,xt)&&(se.current=xt,V.dialog.focus())}}),ue=Cn(()=>{if(V.remove(),ze.current==null||ze.current(),_e.current==null||_e.current(),x){var We;(We=se.current)==null||We.focus==null||We.focus(T),se.current=null}});M.useEffect(()=>{!n||!L||ne()},[n,L,ne]),M.useEffect(()=>{W&&ue()},[W,ue]),mse(()=>{ue()});const me=Cn(()=>{if(!S||!X()||!V.isTopModal())return;const We=Z0(R?.document);V.dialog&&We&&!mp(V.dialog,We)&&V.dialog.focus()}),Re=Cn(We=>{We.target===We.currentTarget&&(d?.(We),u===!0&&z())}),we=Cn(We=>{f&&Zne(We)&&V.isTopModal()&&(p?.(We),We.defaultPrevented||z())}),_e=M.useRef(),ze=M.useRef(),Xe=(...We)=>{te(!0),G?.(...We)};if(!L)return null;const Vt=Object.assign({role:r,ref:V.setDialogRef,"aria-modal":r==="dialog"?!0:void 0},D,{style:a,className:i,tabIndex:-1});let Ot=O?O(Vt):q.jsx("div",Object.assign({},Vt,{children:M.cloneElement(c,{role:"document"})}));Ot=FO(g,y,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!n,onExit:P,onExiting:F,onExited:Xe,onEnter:K,onEntering:re,onEntered:J,children:Ot});let _t=null;return u&&(_t=U({ref:V.setBackdropRef,onClick:Re}),_t=FO(b,v,{in:!!n,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:_t})),q.jsx(q.Fragment,{children:Lc.createPortal(q.jsxs(q.Fragment,{children:[_t,Ot]}),L)})});FN.displayName="Modal";const Nse=Object.assign(FN,{Manager:Fw});function $se(e,t){return e.classList?e.classList.contains(t):(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")!==-1}function Use(e,t){e.classList?e.classList.add(t):$se(e,t)||(typeof e.className=="string"?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))}function VO(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function Bse(e,t){e.classList?e.classList.remove(t):typeof e.className=="string"?e.className=VO(e.className,t):e.setAttribute("class",VO(e.className&&e.className.baseVal||"",t))}const Bc={FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",STICKY_CONTENT:".sticky-top",NAVBAR_TOGGLER:".navbar-toggler"};class VN extends Fw{adjustAndStore(t,n,r){const i=n.style[t];n.dataset[t]=i,ps(n,{[t]:`${parseFloat(ps(n,t))+r}px`})}restore(t,n){const r=n.dataset[t];r!==void 0&&(delete n.dataset[t],ps(n,{[t]:r}))}setContainerStyle(t){super.setContainerStyle(t);const n=this.getElement();if(Use(n,"modal-open"),!t.scrollBarWidth)return;const r=this.isRTL?"paddingLeft":"paddingRight",i=this.isRTL?"marginLeft":"marginRight";os(n,Bc.FIXED_CONTENT).forEach(a=>this.adjustAndStore(r,a,t.scrollBarWidth)),os(n,Bc.STICKY_CONTENT).forEach(a=>this.adjustAndStore(i,a,-t.scrollBarWidth)),os(n,Bc.NAVBAR_TOGGLER).forEach(a=>this.adjustAndStore(i,a,t.scrollBarWidth))}removeContainerStyle(t){super.removeContainerStyle(t);const n=this.getElement();Bse(n,"modal-open");const r=this.isRTL?"paddingLeft":"paddingRight",i=this.isRTL?"marginLeft":"marginRight";os(n,Bc.FIXED_CONTENT).forEach(a=>this.restore(r,a)),os(n,Bc.STICKY_CONTENT).forEach(a=>this.restore(i,a)),os(n,Bc.NAVBAR_TOGGLER).forEach(a=>this.restore(i,a))}}let eb;function Pse(e){return eb||(eb=new VN(e)),eb}const GN=M.createContext({onHide(){}}),KN=M.forwardRef(({closeLabel:e="Close",closeVariant:t,closeButton:n=!1,onHide:r,children:i,...a},c)=>{const u=M.useContext(GN),f=Lf(()=>{u?.onHide(),r?.()});return q.jsxs("div",{ref:c,...a,children:[i,n&&q.jsx(Uw,{"aria-label":e,variant:t,onClick:f})]})});KN.displayName="AbstractModalHeader";const WN=M.forwardRef(({className:e,bsPrefix:t,as:n="div",...r},i)=>(t=$t(t,"nav-item"),q.jsx(n,{ref:i,className:bt(e,t),...r})));WN.displayName="NavItem";const YN=M.forwardRef(({bsPrefix:e,className:t,as:n=$w,active:r,eventKey:i,disabled:a=!1,...c},u)=>{e=$t(e,"nav-link");const[f,d]=zN({key:vf(i,c.href),active:r,disabled:a,...c});return q.jsx(n,{...c,...f,ref:u,disabled:a,className:bt(t,e,a&&"disabled",d.isActive&&"active")})});YN.displayName="NavLink";const XN=M.forwardRef((e,t)=>{const{as:n="div",bsPrefix:r,variant:i,fill:a=!1,justify:c=!1,navbar:u,navbarScroll:f,className:d,activeKey:p,...g}=Ow(e,{activeKey:"onSelect"}),y=$t(r,"nav");let b,v,E=!1;const S=M.useContext(Ra),x=M.useContext(cN);return S?(b=S.bsPrefix,E=u??!0):x&&({cardHeaderBsPrefix:v}=x),q.jsx(pse,{as:n,ref:t,activeKey:p,className:bt(d,{[y]:!E,[`${b}-nav`]:E,[`${b}-nav-scroll`]:E&&f,[`${v}-${i}`]:!!v,[`${y}-${i}`]:!!i,[`${y}-fill`]:a,[`${y}-justified`]:c}),...g})});XN.displayName="Nav";const Go=Object.assign(XN,{Item:WN,Link:YN}),ZN=M.forwardRef(({bsPrefix:e,className:t,as:n,...r},i)=>{e=$t(e,"navbar-brand");const a=n||(r.href?"a":"span");return q.jsx(a,{...r,ref:i,className:bt(t,e)})});ZN.displayName="NavbarBrand";const QN=M.forwardRef(({children:e,bsPrefix:t,...n},r)=>{t=$t(t,"navbar-collapse");const i=M.useContext(Ra);return q.jsx(rN,{in:!!(i&&i.expanded),...n,children:q.jsx("div",{ref:r,className:t,children:e})})});QN.displayName="NavbarCollapse";const JN=M.forwardRef(({bsPrefix:e,className:t,children:n,label:r="Toggle navigation",as:i="button",onClick:a,...c},u)=>{e=$t(e,"navbar-toggler");const{onToggle:f,expanded:d}=M.useContext(Ra)||{},p=Lf(g=>{a&&a(g),f&&f()});return i==="button"&&(c.type="button"),q.jsx(i,{...c,ref:u,onClick:p,"aria-label":r,className:bt(t,e,!d&&"collapsed"),children:n||q.jsx("span",{className:`${e}-icon`})})});JN.displayName="NavbarToggle";const mv=new WeakMap,GO=(e,t)=>{if(!e||!t)return;const n=mv.get(t)||new Map;mv.set(t,n);let r=n.get(e);return r||(r=t.matchMedia(e),r.refCount=0,n.set(r.media,r)),r};function kse(e,t=typeof window>"u"?void 0:window){const n=GO(e,t),[r,i]=M.useState(()=>n?n.matches:!1);return UN(()=>{let a=GO(e,t);if(!a)return i(!1);let c=mv.get(t);const u=()=>{i(a.matches)};return a.refCount++,a.addListener(u),u(),()=>{a.removeListener(u),a.refCount--,a.refCount<=0&&c?.delete(a.media),a=void 0}},[e]),r}function Mse(e){const t=Object.keys(e);function n(u,f){return u===f?f:u?`${u} and ${f}`:f}function r(u){return t[Math.min(t.indexOf(u)+1,t.length-1)]}function i(u){const f=r(u);let d=e[f];return typeof d=="number"?d=`${d-.2}px`:d=`calc(${d} - 0.2px)`,`(max-width: ${d})`}function a(u){let f=e[u];return typeof f=="number"&&(f=`${f}px`),`(min-width: ${f})`}function c(u,f,d){let p;typeof u=="object"?(p=u,d=f,f=!0):(f=f||!0,p={[u]:f});let g=M.useMemo(()=>Object.entries(p).reduce((y,[b,v])=>((v==="up"||v===!0)&&(y=n(y,a(b))),(v==="down"||v===!0)&&(y=n(y,i(b))),y),""),[JSON.stringify(p)]);return kse(g,d)}return c}const Lse=Mse({xs:0,sm:576,md:768,lg:992,xl:1200,xxl:1400}),e8=M.forwardRef(({className:e,bsPrefix:t,as:n="div",...r},i)=>(t=$t(t,"offcanvas-body"),q.jsx(n,{ref:i,className:bt(e,t),...r})));e8.displayName="OffcanvasBody";const jse={[ni]:"show",[cs]:"show"},t8=M.forwardRef(({bsPrefix:e,className:t,children:n,in:r=!1,mountOnEnter:i=!1,unmountOnExit:a=!1,appear:c=!1,...u},f)=>(e=$t(e,"offcanvas"),q.jsx(ng,{ref:f,addEndListener:Dw,in:r,mountOnEnter:i,unmountOnExit:a,appear:c,...u,childRef:dl(n),children:(d,p)=>M.cloneElement(n,{...p,className:bt(t,n.props.className,(d===ni||d===mf)&&`${e}-toggling`,jse[d])})})));t8.displayName="OffcanvasToggling";const n8=M.forwardRef(({bsPrefix:e,className:t,closeLabel:n="Close",closeButton:r=!1,...i},a)=>(e=$t(e,"offcanvas-header"),q.jsx(KN,{ref:a,...i,className:bt(t,e),closeLabel:n,closeButton:r})));n8.displayName="OffcanvasHeader";const zse=ure("h5"),r8=M.forwardRef(({className:e,bsPrefix:t,as:n=zse,...r},i)=>(t=$t(t,"offcanvas-title"),q.jsx(n,{ref:i,className:bt(e,t),...r})));r8.displayName="OffcanvasTitle";function qse(e){return q.jsx(t8,{...e})}function Hse(e){return q.jsx(oN,{...e})}const i8=M.forwardRef(({bsPrefix:e,className:t,children:n,"aria-labelledby":r,placement:i="start",responsive:a,show:c=!1,backdrop:u=!0,keyboard:f=!0,scroll:d=!1,onEscapeKeyDown:p,onShow:g,onHide:y,container:b,autoFocus:v=!0,enforceFocus:E=!0,restoreFocus:S=!0,restoreFocusOptions:x,onEntered:T,onExit:O,onExiting:U,onEnter:N,onEntering:I,onExited:j,backdropClassName:z,manager:P,renderStaticNode:G=!1,...F},K)=>{const re=M.useRef();e=$t(e,"offcanvas");const[J,D]=M.useState(!1),R=Lf(y),L=Lse(a||"xs","up");M.useEffect(()=>{D(a?c&&!L:c)},[c,a,L]);const V=M.useMemo(()=>({onHide:R}),[R]);function X(){return P||(d?(re.current||(re.current=new VN({handleContainerOverflow:!1})),re.current):Pse())}const $=(ne,...ue)=>{ne&&(ne.style.visibility="visible"),N?.(ne,...ue)},W=(ne,...ue)=>{ne&&(ne.style.visibility=""),j?.(...ue)},te=M.useCallback(ne=>q.jsx("div",{...ne,className:bt(`${e}-backdrop`,z)}),[z,e]),se=ne=>q.jsx("div",{...ne,...F,className:bt(t,a?`${e}-${a}`:e,`${e}-${i}`),"aria-labelledby":r,children:n});return q.jsxs(q.Fragment,{children:[!J&&(a||G)&&se({}),q.jsx(GN.Provider,{value:V,children:q.jsx(Nse,{show:J,ref:K,backdrop:u,container:b,keyboard:f,autoFocus:v,enforceFocus:E&&!d,restoreFocus:S,restoreFocusOptions:x,onEscapeKeyDown:p,onShow:g,onHide:R,onEnter:$,onEntering:I,onEntered:T,onExit:O,onExiting:U,onExited:W,manager:X(),transition:qse,backdropTransition:Hse,renderBackdrop:te,renderDialog:se})})]})});i8.displayName="Offcanvas";const Fse=Object.assign(i8,{Body:e8,Header:n8,Title:r8}),s8=M.forwardRef(({onHide:e,...t},n)=>{const r=M.useContext(Ra),i=Lf(()=>{r==null||r.onToggle==null||r.onToggle(),e?.()});return q.jsx(Fse,{ref:n,show:!!(r!=null&&r.expanded),...t,renderStaticNode:!0,onHide:i})});s8.displayName="NavbarOffcanvas";const o8=M.forwardRef(({className:e,bsPrefix:t,as:n="span",...r},i)=>(t=$t(t,"navbar-text"),q.jsx(n,{ref:i,className:bt(e,t),...r})));o8.displayName="NavbarText";const a8=M.forwardRef((e,t)=>{const{bsPrefix:n,expand:r=!0,variant:i="light",bg:a,fixed:c,sticky:u,className:f,as:d="nav",expanded:p,onToggle:g,onSelect:y,collapseOnSelect:b=!1,...v}=Ow(e,{expanded:"onToggle"}),E=$t(n,"navbar"),S=M.useCallback((...O)=>{y?.(...O),b&&p&&g?.(!1)},[y,b,p,g]);v.role===void 0&&d!=="nav"&&(v.role="navigation");let x=`${E}-expand`;typeof r=="string"&&(x=`${x}-${r}`);const T=M.useMemo(()=>({onToggle:()=>g?.(!p),bsPrefix:E,expanded:!!p,expand:r}),[E,p,r,g]);return q.jsx(Ra.Provider,{value:T,children:q.jsx(pa.Provider,{value:S,children:q.jsx(d,{ref:t,...v,className:bt(f,E,r&&x,i&&`${E}-${i}`,a&&`bg-${a}`,u&&`sticky-${u}`,c&&`fixed-${c}`)})})})});a8.displayName="Navbar";const Ch=Object.assign(a8,{Brand:ZN,Collapse:QN,Offcanvas:s8,Text:o8,Toggle:JN});function Vse(){const[e,t]=M.useState({loggedIn:null});M.useEffect(()=>{us().subscribe(t)},[]);const n=()=>{One()},r=()=>{Tne()};return q.jsxs(q.Fragment,{children:[q.jsx(Ch,{expand:"lg",className:"navbar mb-3",children:q.jsxs(lN,{fluid:!0,children:[q.jsx(Ch.Brand,{as:eo,to:"/",children:q.jsx("img",{src:"/favicon.png",alt:"MVP on Flow Logo",height:"40",className:"me-2"})}),q.jsx(Ch.Toggle,{"aria-controls":"navbarNav",style:{borderColor:"#FDB927",color:"#FDB927"},children:q.jsx("span",{className:"navbar-toggler-icon",style:{filter:"invert(80%) sepia(100%) saturate(400%) hue-rotate(10deg)"}})}),q.jsxs(Ch.Collapse,{id:"navbarNav",children:[q.jsxs(Go,{className:"me-auto mb-2 mb-lg-0",children:[q.jsx(Go.Link,{as:eo,to:"/",children:"Home"}),q.jsx(Go.Link,{as:eo,to:"/swapfest",children:"Swapfest"}),q.jsx(Go.Link,{as:eo,to:"/treasury",children:"Treasury"}),q.jsx(Go.Link,{as:eo,to:"/vote",children:"Vote"}),q.jsxs($u,{as:Go.Item,children:[q.jsx($u.Toggle,{as:Go.Link,className:"nav-link fastbreak-dropdown-toggle",children:"Fastbreak"}),q.jsxs($u.Menu,{className:"fastbreak-dropdown-menu",children:[q.jsx($u.Item,{as:eo,to:"/fastbreak",children:"Race Track"}),q.jsx($u.Item,{as:eo,to:"/horsestats",children:"Horse Stats"})]})]})]}),q.jsx("div",{className:"d-flex align-items-center",children:e.loggedIn?q.jsxs(q.Fragment,{children:[q.jsx("span",{className:"wallet-address me-2",children:e.addr}),q.jsx("button",{className:"btn-wallet",onClick:r,children:"Disconnect"})]}):q.jsx("button",{className:"btn-wallet",onClick:n,children:"Connect Wallet"})})]})]})}),q.jsx("div",{className:"container-fluid mt-4 flex-grow-1",children:q.jsx(S$,{})}),q.jsxs("div",{className:"footer mt-auto",children:[q.jsx("p",{children:"This is a fan project and is not affiliated with NBA TopShot, Nikola Joki, or any official organization."}),q.jsxs("div",{className:"d-flex justify-content-center align-items-center gap-3 mt-2",children:[q.jsx("a",{href:"https://discord.gg/3p3ff9PHqW",target:"_blank","aria-label":"Discord",rel:"noreferrer",children:q.jsx("i",{className:"bi bi-discord",style:{fontSize:"1.5rem"}})}),q.jsx("a",{href:"https://x.com/petjokicshorses",target:"_blank","aria-label":"Twitter",rel:"noreferrer",children:q.jsx("i",{className:"bi bi-twitter-x",style:{fontSize:"1.5rem"}})})]})]})]})}function Gse(){return q.jsxs(q.Fragment,{children:[q.jsxs("div",{className:"hero",children:[q.jsx("h1",{children:" MVP on Flow - Pet Jokic's Horses "}),q.jsxs("p",{children:["MVP on Flow, also known as ",q.jsx("strong",{children:"Pet Jokic's horses"}),", is a ",q.jsx("strong",{children:"fan-powered project"})," celebrating Nikola Jokic and his NBA TopShot moments on the Flow blockchain."]}),q.jsx("p",{children:"Join our Discord community for Jokic-themed fun, prediction contests, raffles, giveaways, and more!"}),q.jsxs("p",{children:["Earn and use ",q.jsx("strong",{children:"$MVP"})," tokens in community games, swap them for Jokic moments, trade them on Flow exchanges or stake them to earn rewards. Whether you're a collector or a fan, there's something for everyone."]}),q.jsxs("a",{href:"https://discord.gg/3p3ff9PHqW",target:"_blank",rel:"noopener noreferrer",className:"btn btn-discord",children:[q.jsx("i",{className:"bi bi-discord"})," Join Our Discord"]})]}),q.jsx("div",{className:"card shadow mb-4",children:q.jsxs("div",{className:"card-body",children:[q.jsx("h2",{className:"card-title text-center mb-3",children:" $MVP Tokenomics"}),q.jsx("p",{className:"card-text text-center",children:"Learn how $MVP works: swap Jokic moments, earn rewards, and power community events."}),q.jsx("div",{className:"text-center mt-3",children:q.jsx("img",{src:"/images/Tokenomics.png",alt:"MVP Tokenomics",className:"img-fluid rounded shadow"})})]})})]})}function Kse(){const[e,t]=M.useState(0),[n,r]=M.useState([]);return M.useEffect(()=>{fetch("https://pjh-gzerbpd3gecjhab5.westus-01.azurewebsites.net/api/leaderboard").then(i=>i.json()).then(i=>{t(i.prize_pool),r(i.leaderboard)})},[]),q.jsx("div",{className:"container",children:q.jsx("div",{className:"card shadow mb-4",children:q.jsxs("div",{className:"card-body",children:[q.jsx("h2",{className:"mb-4 text-center",children:" $MVP Swap Fest July 1st - 11th "}),q.jsx("div",{className:"text-center mb-4",children:q.jsx("img",{src:"/images/1-11-07-25.png",alt:"Swap Fest Rules",className:"img-fluid rounded shadow"})}),q.jsxs("p",{className:"text-center mb-3",children:["Prize Pool: ",e," points"]}),q.jsx("div",{className:"table-responsive",children:q.jsxs("table",{className:"mvp-table",children:[q.jsx("thead",{children:q.jsxs("tr",{children:[q.jsx("th",{children:"#"}),q.jsx("th",{children:"TopShot Username"}),q.jsx("th",{children:"Points"}),q.jsx("th",{children:"Prize"})]})}),q.jsx("tbody",{children:n.map((i,a)=>q.jsxs("tr",{children:[q.jsx("td",{children:a+1}),q.jsx("td",{children:i.username}),q.jsx("td",{children:i.points}),q.jsx("td",{children:i.prize})]},a))})]})})]})})})}function Wse(){const[e,t]=M.useState(null);return M.useEffect(()=>{fetch("https://pjh-gzerbpd3gecjhab5.westus-01.azurewebsites.net/api/treasury").then(n=>n.json()).then(n=>t(n))},[]),e?q.jsx("div",{className:"container",children:q.jsx("div",{className:"card shadow mb-4",children:q.jsxs("div",{className:"card-body",children:[q.jsx("h2",{className:"mb-3 text-center",children:" $MVP Treasury Overview"}),q.jsx("p",{className:"text-center mb-2",children:"See the current state of the treasury and the $MVP token economy."}),q.jsxs("p",{className:"text-center mb-4",children:["Last Updated: ",e.last_updated]}),q.jsxs("div",{className:"row",children:[q.jsx("div",{className:"col-md-6 mb-3",children:q.jsx("div",{className:"card treasury-card h-100",children:q.jsxs("div",{className:"card-body",children:[q.jsx("h5",{className:"fw-bold mb-3",children:" Tokens in the Wild"}),q.jsx("p",{className:"display-6",children:e.tokens_in_wild}),q.jsx("p",{children:"Total $MVP tokens released into circulation, not owned by the treasury."})]})})}),q.jsx("div",{className:"col-md-6 mb-3",children:q.jsx("div",{className:"card treasury-card h-100",children:q.jsxs("div",{className:"card-body",children:[q.jsx("h5",{className:"fw-bold mb-3",children:" Treasury Holdings"}),q.jsxs("ul",{className:"list-group list-group-flush",children:[q.jsxs("li",{className:"list-group-item",children:["Common Moments: ",q.jsx("strong",{children:e.common_count})]}),q.jsxs("li",{className:"list-group-item",children:["Rare Moments: ",q.jsx("strong",{children:e.rare_count})]}),q.jsxs("li",{className:"list-group-item",children:["Top Shot Debut: ",q.jsx("strong",{children:e.tsd_count})]}),q.jsxs("li",{className:"list-group-item",children:["Legendary Moments: ",q.jsx("strong",{children:e.lego_count})]})]})]})})}),q.jsx("div",{className:"col-md-6 mb-3",children:q.jsx("div",{className:"card treasury-card h-100",children:q.jsxs("div",{className:"card-body",children:[q.jsx("h5",{className:"fw-bold mb-3",children:" Backed Supply"}),q.jsx("p",{className:"display-6",children:e.backed_supply}),q.jsxs("p",{children:["Calculated as:",q.jsx("br",{}),"2x Common + 100x Rare + 500x TSD + 2000x Legendary"]})]})})}),q.jsx("div",{className:"col-md-6 mb-3",children:q.jsx("div",{className:"card treasury-card h-100",children:q.jsxs("div",{className:"card-body",children:[q.jsx("h5",{className:"fw-bold mb-3",children:" Treasury Surplus"}),q.jsx("p",{className:"display-6",children:e.surplus}),q.jsx("p",{children:"Backed Supply minus Tokens in the Wild."})]})})})]})]})})}):q.jsx("div",{className:"container",children:q.jsx("p",{children:"Loading..."})})}function Yse(){const[e,t]=M.useState(!1),n=M.useRef(null),r=M.useRef(null),i=()=>{t(!0)},a=c=>{const u=Math.floor(Math.random()*200)-100,f=Math.floor(Math.random()*200)-100;c.current.style.transform=`translate(${u}px, ${f}px)`};return q.jsx("div",{className:"container",children:q.jsx("div",{className:"card shadow mb-4",children:q.jsxs("div",{className:"card-body text-center",children:[q.jsx("h2",{className:"mb-4",children:"Who is the only real $MVP of the past 5 seasons in the NBA?"}),q.jsx("p",{className:"text-muted mb-4",children:"Result of this vote will decide which player's moments the project will collect in the following period."}),e?q.jsxs("div",{id:"result-section",className:"mt-4",children:[q.jsx("h3",{className:"mb-3",children:" Voting Results:"}),q.jsxs("div",{className:"list-group w-50 mx-auto",children:[q.jsxs("div",{className:"list-group-item d-flex justify-content-between",children:[q.jsx("span",{children:"Joki"}),q.jsx("span",{children:"100%"})]}),q.jsxs("div",{className:"list-group-item d-flex justify-content-between",children:[q.jsx("span",{children:"Embiid"}),q.jsx("span",{children:"0%"})]}),q.jsxs("div",{className:"list-group-item d-flex justify-content-between",children:[q.jsx("span",{children:"SGA"}),q.jsx("span",{children:"0%"})]})]})]}):q.jsxs("div",{id:"vote-section",children:[q.jsx("button",{className:"btn btn-success btn-lg mb-3",onClick:i,children:"Joki"}),q.jsx("button",{ref:n,className:"btn btn-outline-secondary btn-lg mb-3",onMouseEnter:()=>a(n),children:"Embiid"}),q.jsx("button",{ref:r,className:"btn btn-outline-secondary btn-lg mb-3",onMouseEnter:()=>a(r),children:"SGA"})]})]})})})}function Xse(){const[e,t]=M.useState({loggedIn:null}),[n,r]=M.useState(""),[i,a]=M.useState(!1),[c,u]=M.useState([]),[f,d]=M.useState(null),[p,g]=M.useState(""),[y,b]=M.useState(null),[v,E]=M.useState(""),S="0x2459710b1d10aed0";M.useEffect(()=>{us().subscribe(t),x()},[]),M.useEffect(()=>{f&&T(f.id,e.addr)},[e,f]),M.useEffect(()=>{if(!f||!f.lock_timestamp){E("");return}const I=setInterval(()=>{const j=Math.floor(Date.now()/1e3),z=f.lock_timestamp-j;if(z<=0)E("Contest has started!"),clearInterval(I);else{const P=String(Math.floor(z/3600)).padStart(2,"0"),G=String(Math.floor(z%3600/60)).padStart(2,"0"),F=String(z%60).padStart(2,"0");E(`${P}:${G}:${F}`)}},1e3);return()=>clearInterval(I)},[f]);const x=async()=>{try{const j=await(await fetch("https://pjh-gzerbpd3gecjhab5.westus-01.azurewebsites.net/api/fastbreak/contests")).json();u(j),j.length>0&&d(j[0])}catch(I){console.error("Failed to load contests",I)}},T=async(I,j)=>{try{const P=await(await fetch(`https://pjh-gzerbpd3gecjhab5.westus-01.azurewebsites.net/api/fastbreak/contest/${I}/prediction-leaderboard?userWallet=${j}`)).json();b(P)}catch(z){console.error("Failed to load leaderboard",z)}},O=I=>{const j=parseInt(I.target.value),z=c.find(P=>P.id===j);d(z),b(null),z&&T(z.id,e.addr)},U=I=>String(I).includes(".")?String(I):`${I}.0`,N=async()=>{if(!e.loggedIn){r(" Please connect your wallet first.");return}if(!f){r(" Please select a contest.");return}if(!p.trim()){r(" Please enter your TopShot username.");return}try{a(!0),r("Waiting for wallet approval...");const I=await Rne({cadence:`
          import FungibleToken from 0xf233dcee88fe0abe
          import StorageRent from 0x707adbad1428c624
          import PetJokicsHorses from 0x6fd2465f3a22e34c

          transaction(amount: UFix64, recipient: Address) {
              let sentVault: @{FungibleToken.Vault}

              prepare(signer: auth(Storage, BorrowValue) &Account) {
                  let vaultRef = signer.storage.borrow<auth(FungibleToken.Withdraw) &PetJokicsHorses.Vault>(
                      from: /storage/PetJokicsHorsesVault
                  ) ?? panic("Could not borrow reference to the owner's Vault!")
                  self.sentVault <- vaultRef.withdraw(amount: amount)
              }

              execute {
                  let recipientAccount = getAccount(recipient)
                  let receiverRef = recipientAccount.capabilities.borrow<&{FungibleToken.Vault}>(
                      /public/PetJokicsHorsesReceiver
                  )!
                  receiverRef.deposit(from: <-self.sentVault)
                  StorageRent.tryRefill(recipient)
              }
          }
        `,args:(j,z)=>[j(U(f.buy_in_amount),z.UFix64),j(S,z.Address)],proposer:us().authorization,payer:us().authorization,authorizations:[us().authorization],limit:9999});r(` Transaction submitted! TX ID: <a href="https://flowscan.io/tx/${I}" target="_blank" rel="noopener noreferrer">${I}</a>`),await wa(I).onceSealed(),r(` Transaction sealed on-chain! View TX: <a href="https://flowscan.io/tx/${I}" target="_blank" rel="noopener noreferrer">${I}</a><br/>Registering your entry...`),await fetch(`https://pjh-gzerbpd3gecjhab5.westus-01.azurewebsites.net/api/fastbreak/contest/${f.id}/entries`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({topshotUsernamePrediction:p,userWalletAddress:e.addr})}),r(` Entry submitted! Thank you for joining.<br/>TX: <a href="https://flowscan.io/tx/${I}" target="_blank" rel="noopener noreferrer">${I}</a>`),a(!1),g(""),T(f.id,e.addr)}catch(I){console.error(I),a(!1),r(` Error: ${I.message}`)}};return q.jsxs("div",{className:"container",children:[q.jsx("div",{className:"card shadow mb-4",children:q.jsxs("div",{className:"card-body",children:[q.jsx("h2",{className:"mb-4 text-center",children:"Fastbreak Horse Race"}),q.jsx("p",{className:"text-center mb-4",children:"Pick the top-ranked NBA Top Shot user in the NBA Fastbreak. Buy in, submit your pick before lock, and if your horse is the fastest, i.e. ranks better than everyone else's pick, you win the pot!"}),e.loggedIn&&q.jsxs("p",{className:"text-muted text-center",children:["Connected as: ",q.jsx("strong",{children:e.addr})]}),v&&q.jsxs("p",{className:"text-center text-muted mb-2",children:["Contest starts in: ",q.jsx("strong",{children:v})]}),q.jsxs("div",{className:"mb-3",children:[q.jsx("label",{children:"Select Contest"}),q.jsx("select",{className:"form-select",onChange:O,value:f?.id||"",children:c.map(I=>q.jsxs("option",{value:I.id,children:[I.display_name||I.fastbreak_id,` (Buy-in: ${I.buy_in_amount} ${I.buy_in_currency})`]},I.id))})]}),q.jsxs("div",{className:"mb-3",children:[q.jsx("label",{children:"TopShot Username Prediction"}),q.jsx("input",{type:"text",className:"form-control",value:p,onChange:I=>g(I.target.value),placeholder:"Enter TopShot username of your champion"})]}),q.jsx("button",{className:"btn btn-primary btn-lg w-100",onClick:N,disabled:!e.loggedIn||i||y?.status==="STARTED",children:i?"Processing...":`Buy In for ${f?.buy_in_amount||""} ${f?.buy_in_currency||""}`}),!e.loggedIn&&q.jsx("p",{className:"text-muted text-center mt-2",children:"Please connect your wallet using the top-right button to buy in."}),y?.status==="STARTED"&&q.jsx("p",{className:"text-danger mt-2 text-center",children:" This contest is locked for new entries."}),n&&q.jsx("div",{className:"mt-3 text-center",children:q.jsx("p",{dangerouslySetInnerHTML:{__html:n}})})]})}),y&&q.jsx("div",{className:"card shadow mb-4",children:q.jsxs("div",{className:"card-body",children:[q.jsx("h4",{className:"mb-3 text-center",children:" Contest Info"}),v&&q.jsxs("p",{children:[q.jsx("strong",{children:"Contest locks in:"})," ",v]}),q.jsxs("p",{children:[q.jsx("strong",{children:"Total entries:"})," ",y.totalEntries]}),q.jsxs("p",{children:[q.jsx("strong",{children:"Total pot:"})," ",y.totalPot," $MVP"]}),y.status==="STARTED"?q.jsxs(q.Fragment,{children:[q.jsx("h4",{className:"mt-4 mb-3 text-center",children:" Contest Leaderboard"}),q.jsx("div",{className:"table-responsive",children:q.jsxs("table",{className:"mvp-table",children:[q.jsx("thead",{children:q.jsxs("tr",{children:[q.jsx("th",{children:"Rank"}),q.jsx("th",{children:"Wallet"}),q.jsx("th",{children:"Prediction"}),q.jsx("th",{children:"Fastbreak Rank"}),q.jsx("th",{children:"Lineup"})]})}),q.jsx("tbody",{children:y.entries.map(I=>q.jsxs("tr",{className:I.isUser?"mvp-user-row":"",children:[q.jsx("td",{children:I.position}),q.jsx("td",{children:I.wallet}),q.jsx("td",{children:I.prediction}),q.jsx("td",{children:I.rank}),q.jsx("td",{children:I.lineup?I.lineup.join(", "):"N/A"})]},`${I.wallet}-${I.prediction}`))})]})})]}):q.jsx(q.Fragment,{children:y.userEntries.length>0?q.jsxs(q.Fragment,{children:[q.jsx("h5",{className:"mt-4",children:"Your Entries:"}),q.jsx("div",{className:"table-responsive",children:q.jsxs("table",{className:"table table-striped table-bordered",children:[q.jsx("thead",{children:q.jsxs("tr",{children:[q.jsx("th",{children:"Prediction"}),q.jsx("th",{children:"Fastbreak Rank"}),q.jsx("th",{children:"Lineup"})]})}),q.jsx("tbody",{children:y.userEntries.map((I,j)=>q.jsxs("tr",{children:[q.jsx("td",{children:I.prediction}),q.jsx("td",{children:I.rank!==void 0?I.rank:"N/A"}),q.jsx("td",{children:I.lineup?I.lineup.join(", "):"N/A"})]},j))})]})})]}):q.jsx("p",{className:"text-muted mt-3",children:"You have not submitted any entries yet."})})]})})]})}function Zse(){return q.jsx("div",{className:"container d-flex justify-content-center align-items-center",style:{minHeight:"60vh"},children:q.jsx("h1",{style:{color:"#FDB927",fontSize:"3rem",textAlign:"center"},children:" COMING SOON "})})}function Qse(){return q.jsx(W$,{children:q.jsx(x$,{children:q.jsxs(Js,{path:"/",element:q.jsx(Vse,{}),children:[q.jsx(Js,{index:!0,element:q.jsx(Gse,{})}),q.jsx(Js,{path:"swapfest",element:q.jsx(Kse,{})}),q.jsx(Js,{path:"treasury",element:q.jsx(Wse,{})}),q.jsx(Js,{path:"vote",element:q.jsx(Yse,{})}),q.jsx(Js,{path:"fastbreak",element:q.jsx(Xse,{})}),q.jsx(Js,{path:"horsestats",element:q.jsx(Zse,{})})]})})})}D4.createRoot(document.getElementById("root")).render(q.jsx(M.StrictMode,{children:q.jsx(Qse,{})}));export{pj as H,H3 as _,dx as a,lf as b,noe as c,cj as d,eD as e,gj as f,toe as g,Jh as h,soe as i,ioe as j,ws as k,roe as r,tD as t};
