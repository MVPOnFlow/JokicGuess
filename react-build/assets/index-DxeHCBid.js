(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();var Xn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function vs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function R4(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var n=function r(){var i=!1;try{i=this instanceof r}catch{}return i?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var wy={exports:{}},lu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kS;function O4(){if(kS)return lu;kS=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,i,a){var c=null;if(a!==void 0&&(c=""+a),i.key!==void 0&&(c=""+i.key),"key"in i){a={};for(var u in i)u!=="key"&&(a[u]=i[u])}else a=i;return i=a.ref,{$$typeof:e,type:r,key:c,ref:i!==void 0?i:null,props:a}}return lu.Fragment=t,lu.jsx=n,lu.jsxs=n,lu}var MS;function T4(){return MS||(MS=1,wy.exports=O4()),wy.exports}var P=T4(),Ey={exports:{}},$e={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jS;function D4(){if(jS)return $e;jS=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),g=Symbol.iterator;function y(N){return N===null||typeof N!="object"?null:(N=g&&N[g]||N["@@iterator"],typeof N=="function"?N:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,E={};function S(N,K,te){this.props=N,this.context=K,this.refs=E,this.updater=te||b}S.prototype.isReactComponent={},S.prototype.setState=function(N,K){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,K,"setState")},S.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function _(){}_.prototype=S.prototype;function T(N,K,te){this.props=N,this.context=K,this.refs=E,this.updater=te||b}var O=T.prototype=new _;O.constructor=T,v(O,S.prototype),O.isPureReactComponent=!0;var $=Array.isArray,I={H:null,A:null,T:null,S:null,V:null},B=Object.prototype.hasOwnProperty;function z(N,K,te,se,ie,fe){return te=fe.ref,{$$typeof:e,type:N,key:K,ref:te!==void 0?te:null,props:fe}}function q(N,K){return z(N.type,K,void 0,void 0,void 0,N.props)}function k(N){return typeof N=="object"&&N!==null&&N.$$typeof===e}function W(N){var K={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(te){return K[te]})}var F=/\/+/g;function G(N,K){return typeof N=="object"&&N!==null&&N.key!=null?W(""+N.key):K.toString(36)}function ne(){}function ee(N){switch(N.status){case"fulfilled":return N.value;case"rejected":throw N.reason;default:switch(typeof N.status=="string"?N.then(ne,ne):(N.status="pending",N.then(function(K){N.status==="pending"&&(N.status="fulfilled",N.value=K)},function(K){N.status==="pending"&&(N.status="rejected",N.reason=K)})),N.status){case"fulfilled":return N.value;case"rejected":throw N.reason}}throw N}function D(N,K,te,se,ie){var fe=typeof N;(fe==="undefined"||fe==="boolean")&&(N=null);var Q=!1;if(N===null)Q=!0;else switch(fe){case"bigint":case"string":case"number":Q=!0;break;case"object":switch(N.$$typeof){case e:case t:Q=!0;break;case p:return Q=N._init,D(Q(N._payload),K,te,se,ie)}}if(Q)return ie=ie(N),Q=se===""?"."+G(N,0):se,$(ie)?(te="",Q!=null&&(te=Q.replace(F,"$&/")+"/"),D(ie,K,te,"",function(_e){return _e})):ie!=null&&(k(ie)&&(ie=q(ie,te+(ie.key==null||N&&N.key===ie.key?"":(""+ie.key).replace(F,"$&/")+"/")+Q)),K.push(ie)),1;Q=0;var ve=se===""?".":se+":";if($(N))for(var ye=0;ye<N.length;ye++)se=N[ye],fe=ve+G(se,ye),Q+=D(se,K,te,fe,ie);else if(ye=y(N),typeof ye=="function")for(N=ye.call(N),ye=0;!(se=N.next()).done;)se=se.value,fe=ve+G(se,ye++),Q+=D(se,K,te,fe,ie);else if(fe==="object"){if(typeof N.then=="function")return D(ee(N),K,te,se,ie);throw K=String(N),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.")}return Q}function R(N,K,te){if(N==null)return N;var se=[],ie=0;return D(N,se,"","",function(fe){return K.call(te,fe,ie++)}),se}function L(N){if(N._status===-1){var K=N._result;K=K(),K.then(function(te){(N._status===0||N._status===-1)&&(N._status=1,N._result=te)},function(te){(N._status===0||N._status===-1)&&(N._status=2,N._result=te)}),N._status===-1&&(N._status=0,N._result=K)}if(N._status===1)return N._result.default;throw N._result}var V=typeof reportError=="function"?reportError:function(N){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var K=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof N=="object"&&N!==null&&typeof N.message=="string"?String(N.message):String(N),error:N});if(!window.dispatchEvent(K))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",N);return}console.error(N)};function X(){}return $e.Children={map:R,forEach:function(N,K,te){R(N,function(){K.apply(this,arguments)},te)},count:function(N){var K=0;return R(N,function(){K++}),K},toArray:function(N){return R(N,function(K){return K})||[]},only:function(N){if(!k(N))throw Error("React.Children.only expected to receive a single React element child.");return N}},$e.Component=S,$e.Fragment=n,$e.Profiler=i,$e.PureComponent=T,$e.StrictMode=r,$e.Suspense=f,$e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=I,$e.__COMPILER_RUNTIME={__proto__:null,c:function(N){return I.H.useMemoCache(N)}},$e.cache=function(N){return function(){return N.apply(null,arguments)}},$e.cloneElement=function(N,K,te){if(N==null)throw Error("The argument must be a React element, but you passed "+N+".");var se=v({},N.props),ie=N.key,fe=void 0;if(K!=null)for(Q in K.ref!==void 0&&(fe=void 0),K.key!==void 0&&(ie=""+K.key),K)!B.call(K,Q)||Q==="key"||Q==="__self"||Q==="__source"||Q==="ref"&&K.ref===void 0||(se[Q]=K[Q]);var Q=arguments.length-2;if(Q===1)se.children=te;else if(1<Q){for(var ve=Array(Q),ye=0;ye<Q;ye++)ve[ye]=arguments[ye+2];se.children=ve}return z(N.type,ie,void 0,void 0,fe,se)},$e.createContext=function(N){return N={$$typeof:c,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null},N.Provider=N,N.Consumer={$$typeof:a,_context:N},N},$e.createElement=function(N,K,te){var se,ie={},fe=null;if(K!=null)for(se in K.key!==void 0&&(fe=""+K.key),K)B.call(K,se)&&se!=="key"&&se!=="__self"&&se!=="__source"&&(ie[se]=K[se]);var Q=arguments.length-2;if(Q===1)ie.children=te;else if(1<Q){for(var ve=Array(Q),ye=0;ye<Q;ye++)ve[ye]=arguments[ye+2];ie.children=ve}if(N&&N.defaultProps)for(se in Q=N.defaultProps,Q)ie[se]===void 0&&(ie[se]=Q[se]);return z(N,fe,void 0,void 0,null,ie)},$e.createRef=function(){return{current:null}},$e.forwardRef=function(N){return{$$typeof:u,render:N}},$e.isValidElement=k,$e.lazy=function(N){return{$$typeof:p,_payload:{_status:-1,_result:N},_init:L}},$e.memo=function(N,K){return{$$typeof:d,type:N,compare:K===void 0?null:K}},$e.startTransition=function(N){var K=I.T,te={};I.T=te;try{var se=N(),ie=I.S;ie!==null&&ie(te,se),typeof se=="object"&&se!==null&&typeof se.then=="function"&&se.then(X,V)}catch(fe){V(fe)}finally{I.T=K}},$e.unstable_useCacheRefresh=function(){return I.H.useCacheRefresh()},$e.use=function(N){return I.H.use(N)},$e.useActionState=function(N,K,te){return I.H.useActionState(N,K,te)},$e.useCallback=function(N,K){return I.H.useCallback(N,K)},$e.useContext=function(N){return I.H.useContext(N)},$e.useDebugValue=function(){},$e.useDeferredValue=function(N,K){return I.H.useDeferredValue(N,K)},$e.useEffect=function(N,K,te){var se=I.H;if(typeof te=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return se.useEffect(N,K)},$e.useId=function(){return I.H.useId()},$e.useImperativeHandle=function(N,K,te){return I.H.useImperativeHandle(N,K,te)},$e.useInsertionEffect=function(N,K){return I.H.useInsertionEffect(N,K)},$e.useLayoutEffect=function(N,K){return I.H.useLayoutEffect(N,K)},$e.useMemo=function(N,K){return I.H.useMemo(N,K)},$e.useOptimistic=function(N,K){return I.H.useOptimistic(N,K)},$e.useReducer=function(N,K,te){return I.H.useReducer(N,K,te)},$e.useRef=function(N){return I.H.useRef(N)},$e.useState=function(N){return I.H.useState(N)},$e.useSyncExternalStore=function(N,K,te){return I.H.useSyncExternalStore(N,K,te)},$e.useTransition=function(){return I.H.useTransition()},$e.version="19.1.0",$e}var LS;function wv(){return LS||(LS=1,Ey.exports=D4()),Ey.exports}var j=wv();const bn=vs(j);var Sy={exports:{}},uu={},_y={exports:{}},xy={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zS;function C4(){return zS||(zS=1,function(e){function t(R,L){var V=R.length;R.push(L);e:for(;0<V;){var X=V-1>>>1,N=R[X];if(0<i(N,L))R[X]=L,R[V]=N,V=X;else break e}}function n(R){return R.length===0?null:R[0]}function r(R){if(R.length===0)return null;var L=R[0],V=R.pop();if(V!==L){R[0]=V;e:for(var X=0,N=R.length,K=N>>>1;X<K;){var te=2*(X+1)-1,se=R[te],ie=te+1,fe=R[ie];if(0>i(se,V))ie<N&&0>i(fe,se)?(R[X]=fe,R[ie]=V,X=ie):(R[X]=se,R[te]=V,X=te);else if(ie<N&&0>i(fe,V))R[X]=fe,R[ie]=V,X=ie;else break e}}return L}function i(R,L){var V=R.sortIndex-L.sortIndex;return V!==0?V:R.id-L.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var c=Date,u=c.now();e.unstable_now=function(){return c.now()-u}}var f=[],d=[],p=1,g=null,y=3,b=!1,v=!1,E=!1,S=!1,_=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;function $(R){for(var L=n(d);L!==null;){if(L.callback===null)r(d);else if(L.startTime<=R)r(d),L.sortIndex=L.expirationTime,t(f,L);else break;L=n(d)}}function I(R){if(E=!1,$(R),!v)if(n(f)!==null)v=!0,B||(B=!0,G());else{var L=n(d);L!==null&&D(I,L.startTime-R)}}var B=!1,z=-1,q=5,k=-1;function W(){return S?!0:!(e.unstable_now()-k<q)}function F(){if(S=!1,B){var R=e.unstable_now();k=R;var L=!0;try{e:{v=!1,E&&(E=!1,T(z),z=-1),b=!0;var V=y;try{t:{for($(R),g=n(f);g!==null&&!(g.expirationTime>R&&W());){var X=g.callback;if(typeof X=="function"){g.callback=null,y=g.priorityLevel;var N=X(g.expirationTime<=R);if(R=e.unstable_now(),typeof N=="function"){g.callback=N,$(R),L=!0;break t}g===n(f)&&r(f),$(R)}else r(f);g=n(f)}if(g!==null)L=!0;else{var K=n(d);K!==null&&D(I,K.startTime-R),L=!1}}break e}finally{g=null,y=V,b=!1}L=void 0}}finally{L?G():B=!1}}}var G;if(typeof O=="function")G=function(){O(F)};else if(typeof MessageChannel<"u"){var ne=new MessageChannel,ee=ne.port2;ne.port1.onmessage=F,G=function(){ee.postMessage(null)}}else G=function(){_(F,0)};function D(R,L){z=_(function(){R(e.unstable_now())},L)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(R){R.callback=null},e.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):q=0<R?Math.floor(1e3/R):5},e.unstable_getCurrentPriorityLevel=function(){return y},e.unstable_next=function(R){switch(y){case 1:case 2:case 3:var L=3;break;default:L=y}var V=y;y=L;try{return R()}finally{y=V}},e.unstable_requestPaint=function(){S=!0},e.unstable_runWithPriority=function(R,L){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var V=y;y=R;try{return L()}finally{y=V}},e.unstable_scheduleCallback=function(R,L,V){var X=e.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?X+V:X):V=X,R){case 1:var N=-1;break;case 2:N=250;break;case 5:N=1073741823;break;case 4:N=1e4;break;default:N=5e3}return N=V+N,R={id:p++,callback:L,priorityLevel:R,startTime:V,expirationTime:N,sortIndex:-1},V>X?(R.sortIndex=V,t(d,R),n(f)===null&&R===n(d)&&(E?(T(z),z=-1):E=!0,D(I,V-X))):(R.sortIndex=N,t(f,R),v||b||(v=!0,B||(B=!0,G()))),R},e.unstable_shouldYield=W,e.unstable_wrapCallback=function(R){var L=y;return function(){var V=y;y=L;try{return R.apply(this,arguments)}finally{y=V}}}}(xy)),xy}var qS;function I4(){return qS||(qS=1,_y.exports=C4()),_y.exports}var Ay={exports:{}},Rn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HS;function N4(){if(HS)return Rn;HS=1;var e=wv();function t(f){var d="https://react.dev/errors/"+f;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)d+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+f+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function a(f,d,p){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:g==null?null:""+g,children:f,containerInfo:d,implementation:p}}var c=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(f,d){if(f==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return Rn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Rn.createPortal=function(f,d){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(t(299));return a(f,d,null,p)},Rn.flushSync=function(f){var d=c.T,p=r.p;try{if(c.T=null,r.p=2,f)return f()}finally{c.T=d,r.p=p,r.d.f()}},Rn.preconnect=function(f,d){typeof f=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,r.d.C(f,d))},Rn.prefetchDNS=function(f){typeof f=="string"&&r.d.D(f)},Rn.preinit=function(f,d){if(typeof f=="string"&&d&&typeof d.as=="string"){var p=d.as,g=u(p,d.crossOrigin),y=typeof d.integrity=="string"?d.integrity:void 0,b=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;p==="style"?r.d.S(f,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:g,integrity:y,fetchPriority:b}):p==="script"&&r.d.X(f,{crossOrigin:g,integrity:y,fetchPriority:b,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},Rn.preinitModule=function(f,d){if(typeof f=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var p=u(d.as,d.crossOrigin);r.d.M(f,{crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&r.d.M(f)},Rn.preload=function(f,d){if(typeof f=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var p=d.as,g=u(p,d.crossOrigin);r.d.L(f,p,{crossOrigin:g,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},Rn.preloadModule=function(f,d){if(typeof f=="string")if(d){var p=u(d.as,d.crossOrigin);r.d.m(f,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else r.d.m(f)},Rn.requestFormReset=function(f){r.d.r(f)},Rn.unstable_batchedUpdates=function(f,d){return f(d)},Rn.useFormState=function(f,d,p){return c.H.useFormState(f,d,p)},Rn.useFormStatus=function(){return c.H.useHostTransitionStatus()},Rn.version="19.1.0",Rn}var FS;function ZO(){if(FS)return Ay.exports;FS=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Ay.exports=N4(),Ay.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VS;function $4(){if(VS)return uu;VS=1;var e=I4(),t=wv(),n=ZO();function r(s){var o="https://react.dev/errors/"+s;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)o+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+s+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function a(s){var o=s,l=s;if(s.alternate)for(;o.return;)o=o.return;else{s=o;do o=s,(o.flags&4098)!==0&&(l=o.return),s=o.return;while(s)}return o.tag===3?l:null}function c(s){if(s.tag===13){var o=s.memoizedState;if(o===null&&(s=s.alternate,s!==null&&(o=s.memoizedState)),o!==null)return o.dehydrated}return null}function u(s){if(a(s)!==s)throw Error(r(188))}function f(s){var o=s.alternate;if(!o){if(o=a(s),o===null)throw Error(r(188));return o!==s?null:s}for(var l=s,h=o;;){var m=l.return;if(m===null)break;var w=m.alternate;if(w===null){if(h=m.return,h!==null){l=h;continue}break}if(m.child===w.child){for(w=m.child;w;){if(w===l)return u(m),s;if(w===h)return u(m),o;w=w.sibling}throw Error(r(188))}if(l.return!==h.return)l=m,h=w;else{for(var C=!1,M=m.child;M;){if(M===l){C=!0,l=m,h=w;break}if(M===h){C=!0,h=m,l=w;break}M=M.sibling}if(!C){for(M=w.child;M;){if(M===l){C=!0,l=w,h=m;break}if(M===h){C=!0,h=w,l=m;break}M=M.sibling}if(!C)throw Error(r(189))}}if(l.alternate!==h)throw Error(r(190))}if(l.tag!==3)throw Error(r(188));return l.stateNode.current===l?s:o}function d(s){var o=s.tag;if(o===5||o===26||o===27||o===6)return s;for(s=s.child;s!==null;){if(o=d(s),o!==null)return o;s=s.sibling}return null}var p=Object.assign,g=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),_=Symbol.for("react.provider"),T=Symbol.for("react.consumer"),O=Symbol.for("react.context"),$=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),B=Symbol.for("react.suspense_list"),z=Symbol.for("react.memo"),q=Symbol.for("react.lazy"),k=Symbol.for("react.activity"),W=Symbol.for("react.memo_cache_sentinel"),F=Symbol.iterator;function G(s){return s===null||typeof s!="object"?null:(s=F&&s[F]||s["@@iterator"],typeof s=="function"?s:null)}var ne=Symbol.for("react.client.reference");function ee(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===ne?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case v:return"Fragment";case S:return"Profiler";case E:return"StrictMode";case I:return"Suspense";case B:return"SuspenseList";case k:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case b:return"Portal";case O:return(s.displayName||"Context")+".Provider";case T:return(s._context.displayName||"Context")+".Consumer";case $:var o=s.render;return s=s.displayName,s||(s=o.displayName||o.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case z:return o=s.displayName||null,o!==null?o:ee(s.type)||"Memo";case q:o=s._payload,s=s._init;try{return ee(s(o))}catch{}}return null}var D=Array.isArray,R=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,L=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,V={pending:!1,data:null,method:null,action:null},X=[],N=-1;function K(s){return{current:s}}function te(s){0>N||(s.current=X[N],X[N]=null,N--)}function se(s,o){N++,X[N]=s.current,s.current=o}var ie=K(null),fe=K(null),Q=K(null),ve=K(null);function ye(s,o){switch(se(Q,o),se(fe,s),se(ie,null),o.nodeType){case 9:case 11:s=(s=o.documentElement)&&(s=s.namespaceURI)?fS(s):0;break;default:if(s=o.tagName,o=o.namespaceURI)o=fS(o),s=dS(o,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}te(ie),se(ie,s)}function _e(){te(ie),te(fe),te(Q)}function Oe(s){s.memoizedState!==null&&se(ve,s);var o=ie.current,l=dS(o,s.type);o!==l&&(se(fe,s),se(ie,l))}function ke(s){fe.current===s&&(te(ie),te(fe)),ve.current===s&&(te(ve),iu._currentValue=V)}var Et=Object.prototype.hasOwnProperty,Tt=e.unstable_scheduleCallback,xt=e.unstable_cancelCallback,Ye=e.unstable_shouldYield,Vr=e.unstable_requestPaint,At=e.unstable_now,vo=e.unstable_getCurrentPriorityLevel,Pi=e.unstable_ImmediatePriority,Sn=e.unstable_UserBlockingPriority,Qt=e.unstable_NormalPriority,Jt=e.unstable_LowPriority,Sr=e.unstable_IdlePriority,ai=e.log,_n=e.unstable_setDisableYieldValue,sr=null,U=null;function x(s){if(typeof ai=="function"&&_n(s),U&&typeof U.setStrictMode=="function")try{U.setStrictMode(sr,s)}catch{}}var A=Math.clz32?Math.clz32:ue,H=Math.log,J=Math.LN2;function ue(s){return s>>>=0,s===0?32:31-(H(s)/J|0)|0}var pe=256,Ne=4194304;function Ze(s){var o=s&42;if(o!==0)return o;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Je(s,o,l){var h=s.pendingLanes;if(h===0)return 0;var m=0,w=s.suspendedLanes,C=s.pingedLanes;s=s.warmLanes;var M=h&134217727;return M!==0?(h=M&~w,h!==0?m=Ze(h):(C&=M,C!==0?m=Ze(C):l||(l=M&~s,l!==0&&(m=Ze(l))))):(M=h&~w,M!==0?m=Ze(M):C!==0?m=Ze(C):l||(l=h&~s,l!==0&&(m=Ze(l)))),m===0?0:o!==0&&o!==m&&(o&w)===0&&(w=m&-m,l=o&-o,w>=l||w===32&&(l&4194048)!==0)?o:m}function st(s,o){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&o)===0}function et(s,o){switch(s){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ww(){var s=pe;return pe<<=1,(pe&4194048)===0&&(pe=256),s}function Yw(){var s=Ne;return Ne<<=1,(Ne&62914560)===0&&(Ne=4194304),s}function lg(s){for(var o=[],l=0;31>l;l++)o.push(s);return o}function pl(s,o){s.pendingLanes|=o,o!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function p8(s,o,l,h,m,w){var C=s.pendingLanes;s.pendingLanes=l,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=l,s.entangledLanes&=l,s.errorRecoveryDisabledLanes&=l,s.shellSuspendCounter=0;var M=s.entanglements,Y=s.expirationTimes,ae=s.hiddenUpdates;for(l=C&~l;0<l;){var de=31-A(l),me=1<<de;M[de]=0,Y[de]=-1;var ce=ae[de];if(ce!==null)for(ae[de]=null,de=0;de<ce.length;de++){var le=ce[de];le!==null&&(le.lane&=-536870913)}l&=~me}h!==0&&Xw(s,h,0),w!==0&&m===0&&s.tag!==0&&(s.suspendedLanes|=w&~(C&~o))}function Xw(s,o,l){s.pendingLanes|=o,s.suspendedLanes&=~o;var h=31-A(o);s.entangledLanes|=o,s.entanglements[h]=s.entanglements[h]|1073741824|l&4194090}function Zw(s,o){var l=s.entangledLanes|=o;for(s=s.entanglements;l;){var h=31-A(l),m=1<<h;m&o|s[h]&o&&(s[h]|=o),l&=~m}}function ug(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function fg(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Qw(){var s=L.p;return s!==0?s:(s=window.event,s===void 0?32:IS(s.type))}function g8(s,o){var l=L.p;try{return L.p=s,o()}finally{L.p=l}}var Es=Math.random().toString(36).slice(2),xn="__reactFiber$"+Es,Mn="__reactProps$"+Es,Oa="__reactContainer$"+Es,dg="__reactEvents$"+Es,m8="__reactListeners$"+Es,y8="__reactHandles$"+Es,Jw="__reactResources$"+Es,gl="__reactMarker$"+Es;function hg(s){delete s[xn],delete s[Mn],delete s[dg],delete s[m8],delete s[y8]}function Ta(s){var o=s[xn];if(o)return o;for(var l=s.parentNode;l;){if(o=l[Oa]||l[xn]){if(l=o.alternate,o.child!==null||l!==null&&l.child!==null)for(s=mS(s);s!==null;){if(l=s[xn])return l;s=mS(s)}return o}s=l,l=s.parentNode}return null}function Da(s){if(s=s[xn]||s[Oa]){var o=s.tag;if(o===5||o===6||o===13||o===26||o===27||o===3)return s}return null}function ml(s){var o=s.tag;if(o===5||o===26||o===27||o===6)return s.stateNode;throw Error(r(33))}function Ca(s){var o=s[Jw];return o||(o=s[Jw]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function en(s){s[gl]=!0}var e1=new Set,t1={};function wo(s,o){Ia(s,o),Ia(s+"Capture",o)}function Ia(s,o){for(t1[s]=o,s=0;s<o.length;s++)e1.add(o[s])}var b8=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),n1={},r1={};function v8(s){return Et.call(r1,s)?!0:Et.call(n1,s)?!1:b8.test(s)?r1[s]=!0:(n1[s]=!0,!1)}function Hf(s,o,l){if(v8(o))if(l===null)s.removeAttribute(o);else{switch(typeof l){case"undefined":case"function":case"symbol":s.removeAttribute(o);return;case"boolean":var h=o.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){s.removeAttribute(o);return}}s.setAttribute(o,""+l)}}function Ff(s,o,l){if(l===null)s.removeAttribute(o);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(o);return}s.setAttribute(o,""+l)}}function Ui(s,o,l,h){if(h===null)s.removeAttribute(l);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(l);return}s.setAttributeNS(o,l,""+h)}}var pg,i1;function Na(s){if(pg===void 0)try{throw Error()}catch(l){var o=l.stack.trim().match(/\n( *(at )?)/);pg=o&&o[1]||"",i1=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+pg+s+i1}var gg=!1;function mg(s,o){if(!s||gg)return"";gg=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(o){var me=function(){throw Error()};if(Object.defineProperty(me.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(me,[])}catch(le){var ce=le}Reflect.construct(s,[],me)}else{try{me.call()}catch(le){ce=le}s.call(me.prototype)}}else{try{throw Error()}catch(le){ce=le}(me=s())&&typeof me.catch=="function"&&me.catch(function(){})}}catch(le){if(le&&ce&&typeof le.stack=="string")return[le.stack,ce.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var w=h.DetermineComponentFrameRoot(),C=w[0],M=w[1];if(C&&M){var Y=C.split(`
`),ae=M.split(`
`);for(m=h=0;h<Y.length&&!Y[h].includes("DetermineComponentFrameRoot");)h++;for(;m<ae.length&&!ae[m].includes("DetermineComponentFrameRoot");)m++;if(h===Y.length||m===ae.length)for(h=Y.length-1,m=ae.length-1;1<=h&&0<=m&&Y[h]!==ae[m];)m--;for(;1<=h&&0<=m;h--,m--)if(Y[h]!==ae[m]){if(h!==1||m!==1)do if(h--,m--,0>m||Y[h]!==ae[m]){var de=`
`+Y[h].replace(" at new "," at ");return s.displayName&&de.includes("<anonymous>")&&(de=de.replace("<anonymous>",s.displayName)),de}while(1<=h&&0<=m);break}}}finally{gg=!1,Error.prepareStackTrace=l}return(l=s?s.displayName||s.name:"")?Na(l):""}function w8(s){switch(s.tag){case 26:case 27:case 5:return Na(s.type);case 16:return Na("Lazy");case 13:return Na("Suspense");case 19:return Na("SuspenseList");case 0:case 15:return mg(s.type,!1);case 11:return mg(s.type.render,!1);case 1:return mg(s.type,!0);case 31:return Na("Activity");default:return""}}function s1(s){try{var o="";do o+=w8(s),s=s.return;while(s);return o}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}function _r(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function o1(s){var o=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function E8(s){var o=o1(s)?"checked":"value",l=Object.getOwnPropertyDescriptor(s.constructor.prototype,o),h=""+s[o];if(!s.hasOwnProperty(o)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var m=l.get,w=l.set;return Object.defineProperty(s,o,{configurable:!0,get:function(){return m.call(this)},set:function(C){h=""+C,w.call(this,C)}}),Object.defineProperty(s,o,{enumerable:l.enumerable}),{getValue:function(){return h},setValue:function(C){h=""+C},stopTracking:function(){s._valueTracker=null,delete s[o]}}}}function Vf(s){s._valueTracker||(s._valueTracker=E8(s))}function a1(s){if(!s)return!1;var o=s._valueTracker;if(!o)return!0;var l=o.getValue(),h="";return s&&(h=o1(s)?s.checked?"true":"false":s.value),s=h,s!==l?(o.setValue(s),!0):!1}function Gf(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var S8=/[\n"\\]/g;function xr(s){return s.replace(S8,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function yg(s,o,l,h,m,w,C,M){s.name="",C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?s.type=C:s.removeAttribute("type"),o!=null?C==="number"?(o===0&&s.value===""||s.value!=o)&&(s.value=""+_r(o)):s.value!==""+_r(o)&&(s.value=""+_r(o)):C!=="submit"&&C!=="reset"||s.removeAttribute("value"),o!=null?bg(s,C,_r(o)):l!=null?bg(s,C,_r(l)):h!=null&&s.removeAttribute("value"),m==null&&w!=null&&(s.defaultChecked=!!w),m!=null&&(s.checked=m&&typeof m!="function"&&typeof m!="symbol"),M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"?s.name=""+_r(M):s.removeAttribute("name")}function c1(s,o,l,h,m,w,C,M){if(w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(s.type=w),o!=null||l!=null){if(!(w!=="submit"&&w!=="reset"||o!=null))return;l=l!=null?""+_r(l):"",o=o!=null?""+_r(o):l,M||o===s.value||(s.value=o),s.defaultValue=o}h=h??m,h=typeof h!="function"&&typeof h!="symbol"&&!!h,s.checked=M?s.checked:!!h,s.defaultChecked=!!h,C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(s.name=C)}function bg(s,o,l){o==="number"&&Gf(s.ownerDocument)===s||s.defaultValue===""+l||(s.defaultValue=""+l)}function $a(s,o,l,h){if(s=s.options,o){o={};for(var m=0;m<l.length;m++)o["$"+l[m]]=!0;for(l=0;l<s.length;l++)m=o.hasOwnProperty("$"+s[l].value),s[l].selected!==m&&(s[l].selected=m),m&&h&&(s[l].defaultSelected=!0)}else{for(l=""+_r(l),o=null,m=0;m<s.length;m++){if(s[m].value===l){s[m].selected=!0,h&&(s[m].defaultSelected=!0);return}o!==null||s[m].disabled||(o=s[m])}o!==null&&(o.selected=!0)}}function l1(s,o,l){if(o!=null&&(o=""+_r(o),o!==s.value&&(s.value=o),l==null)){s.defaultValue!==o&&(s.defaultValue=o);return}s.defaultValue=l!=null?""+_r(l):""}function u1(s,o,l,h){if(o==null){if(h!=null){if(l!=null)throw Error(r(92));if(D(h)){if(1<h.length)throw Error(r(93));h=h[0]}l=h}l==null&&(l=""),o=l}l=_r(o),s.defaultValue=l,h=s.textContent,h===l&&h!==""&&h!==null&&(s.value=h)}function Ba(s,o){if(o){var l=s.firstChild;if(l&&l===s.lastChild&&l.nodeType===3){l.nodeValue=o;return}}s.textContent=o}var _8=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function f1(s,o,l){var h=o.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?h?s.setProperty(o,""):o==="float"?s.cssFloat="":s[o]="":h?s.setProperty(o,l):typeof l!="number"||l===0||_8.has(o)?o==="float"?s.cssFloat=l:s[o]=(""+l).trim():s[o]=l+"px"}function d1(s,o,l){if(o!=null&&typeof o!="object")throw Error(r(62));if(s=s.style,l!=null){for(var h in l)!l.hasOwnProperty(h)||o!=null&&o.hasOwnProperty(h)||(h.indexOf("--")===0?s.setProperty(h,""):h==="float"?s.cssFloat="":s[h]="");for(var m in o)h=o[m],o.hasOwnProperty(m)&&l[m]!==h&&f1(s,m,h)}else for(var w in o)o.hasOwnProperty(w)&&f1(s,w,o[w])}function vg(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var x8=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),A8=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Kf(s){return A8.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}var wg=null;function Eg(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Pa=null,Ua=null;function h1(s){var o=Da(s);if(o&&(s=o.stateNode)){var l=s[Mn]||null;e:switch(s=o.stateNode,o.type){case"input":if(yg(s,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),o=l.name,l.type==="radio"&&o!=null){for(l=s;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+xr(""+o)+'"][type="radio"]'),o=0;o<l.length;o++){var h=l[o];if(h!==s&&h.form===s.form){var m=h[Mn]||null;if(!m)throw Error(r(90));yg(h,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(o=0;o<l.length;o++)h=l[o],h.form===s.form&&a1(h)}break e;case"textarea":l1(s,l.value,l.defaultValue);break e;case"select":o=l.value,o!=null&&$a(s,!!l.multiple,o,!1)}}}var Sg=!1;function p1(s,o,l){if(Sg)return s(o,l);Sg=!0;try{var h=s(o);return h}finally{if(Sg=!1,(Pa!==null||Ua!==null)&&(Nd(),Pa&&(o=Pa,s=Ua,Ua=Pa=null,h1(o),s)))for(o=0;o<s.length;o++)h1(s[o])}}function yl(s,o){var l=s.stateNode;if(l===null)return null;var h=l[Mn]||null;if(h===null)return null;l=h[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(s=s.type,h=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!h;break e;default:s=!1}if(s)return null;if(l&&typeof l!="function")throw Error(r(231,o,typeof l));return l}var ki=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),_g=!1;if(ki)try{var bl={};Object.defineProperty(bl,"passive",{get:function(){_g=!0}}),window.addEventListener("test",bl,bl),window.removeEventListener("test",bl,bl)}catch{_g=!1}var Ss=null,xg=null,Wf=null;function g1(){if(Wf)return Wf;var s,o=xg,l=o.length,h,m="value"in Ss?Ss.value:Ss.textContent,w=m.length;for(s=0;s<l&&o[s]===m[s];s++);var C=l-s;for(h=1;h<=C&&o[l-h]===m[w-h];h++);return Wf=m.slice(s,1<h?1-h:void 0)}function Yf(s){var o=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&o===13&&(s=13)):s=o,s===10&&(s=13),32<=s||s===13?s:0}function Xf(){return!0}function m1(){return!1}function jn(s){function o(l,h,m,w,C){this._reactName=l,this._targetInst=m,this.type=h,this.nativeEvent=w,this.target=C,this.currentTarget=null;for(var M in s)s.hasOwnProperty(M)&&(l=s[M],this[M]=l?l(w):w[M]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?Xf:m1,this.isPropagationStopped=m1,this}return p(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Xf)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Xf)},persist:function(){},isPersistent:Xf}),o}var Eo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zf=jn(Eo),vl=p({},Eo,{view:0,detail:0}),R8=jn(vl),Ag,Rg,wl,Qf=p({},vl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tg,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==wl&&(wl&&s.type==="mousemove"?(Ag=s.screenX-wl.screenX,Rg=s.screenY-wl.screenY):Rg=Ag=0,wl=s),Ag)},movementY:function(s){return"movementY"in s?s.movementY:Rg}}),y1=jn(Qf),O8=p({},Qf,{dataTransfer:0}),T8=jn(O8),D8=p({},vl,{relatedTarget:0}),Og=jn(D8),C8=p({},Eo,{animationName:0,elapsedTime:0,pseudoElement:0}),I8=jn(C8),N8=p({},Eo,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),$8=jn(N8),B8=p({},Eo,{data:0}),b1=jn(B8),P8={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},U8={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},k8={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function M8(s){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(s):(s=k8[s])?!!o[s]:!1}function Tg(){return M8}var j8=p({},vl,{key:function(s){if(s.key){var o=P8[s.key]||s.key;if(o!=="Unidentified")return o}return s.type==="keypress"?(s=Yf(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?U8[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tg,charCode:function(s){return s.type==="keypress"?Yf(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Yf(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),L8=jn(j8),z8=p({},Qf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),v1=jn(z8),q8=p({},vl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tg}),H8=jn(q8),F8=p({},Eo,{propertyName:0,elapsedTime:0,pseudoElement:0}),V8=jn(F8),G8=p({},Qf,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),K8=jn(G8),W8=p({},Eo,{newState:0,oldState:0}),Y8=jn(W8),X8=[9,13,27,32],Dg=ki&&"CompositionEvent"in window,El=null;ki&&"documentMode"in document&&(El=document.documentMode);var Z8=ki&&"TextEvent"in window&&!El,w1=ki&&(!Dg||El&&8<El&&11>=El),E1=" ",S1=!1;function _1(s,o){switch(s){case"keyup":return X8.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function x1(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var ka=!1;function Q8(s,o){switch(s){case"compositionend":return x1(o);case"keypress":return o.which!==32?null:(S1=!0,E1);case"textInput":return s=o.data,s===E1&&S1?null:s;default:return null}}function J8(s,o){if(ka)return s==="compositionend"||!Dg&&_1(s,o)?(s=g1(),Wf=xg=Ss=null,ka=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return w1&&o.locale!=="ko"?null:o.data;default:return null}}var e6={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function A1(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o==="input"?!!e6[s.type]:o==="textarea"}function R1(s,o,l,h){Pa?Ua?Ua.push(h):Ua=[h]:Pa=h,o=Md(o,"onChange"),0<o.length&&(l=new Zf("onChange","change",null,l,h),s.push({event:l,listeners:o}))}var Sl=null,_l=null;function t6(s){oS(s,0)}function Jf(s){var o=ml(s);if(a1(o))return s}function O1(s,o){if(s==="change")return o}var T1=!1;if(ki){var Cg;if(ki){var Ig="oninput"in document;if(!Ig){var D1=document.createElement("div");D1.setAttribute("oninput","return;"),Ig=typeof D1.oninput=="function"}Cg=Ig}else Cg=!1;T1=Cg&&(!document.documentMode||9<document.documentMode)}function C1(){Sl&&(Sl.detachEvent("onpropertychange",I1),_l=Sl=null)}function I1(s){if(s.propertyName==="value"&&Jf(_l)){var o=[];R1(o,_l,s,Eg(s)),p1(t6,o)}}function n6(s,o,l){s==="focusin"?(C1(),Sl=o,_l=l,Sl.attachEvent("onpropertychange",I1)):s==="focusout"&&C1()}function r6(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Jf(_l)}function i6(s,o){if(s==="click")return Jf(o)}function s6(s,o){if(s==="input"||s==="change")return Jf(o)}function o6(s,o){return s===o&&(s!==0||1/s===1/o)||s!==s&&o!==o}var or=typeof Object.is=="function"?Object.is:o6;function xl(s,o){if(or(s,o))return!0;if(typeof s!="object"||s===null||typeof o!="object"||o===null)return!1;var l=Object.keys(s),h=Object.keys(o);if(l.length!==h.length)return!1;for(h=0;h<l.length;h++){var m=l[h];if(!Et.call(o,m)||!or(s[m],o[m]))return!1}return!0}function N1(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function $1(s,o){var l=N1(s);s=0;for(var h;l;){if(l.nodeType===3){if(h=s+l.textContent.length,s<=o&&h>=o)return{node:l,offset:o-s};s=h}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=N1(l)}}function B1(s,o){return s&&o?s===o?!0:s&&s.nodeType===3?!1:o&&o.nodeType===3?B1(s,o.parentNode):"contains"in s?s.contains(o):s.compareDocumentPosition?!!(s.compareDocumentPosition(o)&16):!1:!1}function P1(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var o=Gf(s.document);o instanceof s.HTMLIFrameElement;){try{var l=typeof o.contentWindow.location.href=="string"}catch{l=!1}if(l)s=o.contentWindow;else break;o=Gf(s.document)}return o}function Ng(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o&&(o==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||o==="textarea"||s.contentEditable==="true")}var a6=ki&&"documentMode"in document&&11>=document.documentMode,Ma=null,$g=null,Al=null,Bg=!1;function U1(s,o,l){var h=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Bg||Ma==null||Ma!==Gf(h)||(h=Ma,"selectionStart"in h&&Ng(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),Al&&xl(Al,h)||(Al=h,h=Md($g,"onSelect"),0<h.length&&(o=new Zf("onSelect","select",null,o,l),s.push({event:o,listeners:h}),o.target=Ma)))}function So(s,o){var l={};return l[s.toLowerCase()]=o.toLowerCase(),l["Webkit"+s]="webkit"+o,l["Moz"+s]="moz"+o,l}var ja={animationend:So("Animation","AnimationEnd"),animationiteration:So("Animation","AnimationIteration"),animationstart:So("Animation","AnimationStart"),transitionrun:So("Transition","TransitionRun"),transitionstart:So("Transition","TransitionStart"),transitioncancel:So("Transition","TransitionCancel"),transitionend:So("Transition","TransitionEnd")},Pg={},k1={};ki&&(k1=document.createElement("div").style,"AnimationEvent"in window||(delete ja.animationend.animation,delete ja.animationiteration.animation,delete ja.animationstart.animation),"TransitionEvent"in window||delete ja.transitionend.transition);function _o(s){if(Pg[s])return Pg[s];if(!ja[s])return s;var o=ja[s],l;for(l in o)if(o.hasOwnProperty(l)&&l in k1)return Pg[s]=o[l];return s}var M1=_o("animationend"),j1=_o("animationiteration"),L1=_o("animationstart"),c6=_o("transitionrun"),l6=_o("transitionstart"),u6=_o("transitioncancel"),z1=_o("transitionend"),q1=new Map,Ug="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ug.push("scrollEnd");function Gr(s,o){q1.set(s,o),wo(o,[s])}var H1=new WeakMap;function Ar(s,o){if(typeof s=="object"&&s!==null){var l=H1.get(s);return l!==void 0?l:(o={value:s,source:o,stack:s1(o)},H1.set(s,o),o)}return{value:s,source:o,stack:s1(o)}}var Rr=[],La=0,kg=0;function ed(){for(var s=La,o=kg=La=0;o<s;){var l=Rr[o];Rr[o++]=null;var h=Rr[o];Rr[o++]=null;var m=Rr[o];Rr[o++]=null;var w=Rr[o];if(Rr[o++]=null,h!==null&&m!==null){var C=h.pending;C===null?m.next=m:(m.next=C.next,C.next=m),h.pending=m}w!==0&&F1(l,m,w)}}function td(s,o,l,h){Rr[La++]=s,Rr[La++]=o,Rr[La++]=l,Rr[La++]=h,kg|=h,s.lanes|=h,s=s.alternate,s!==null&&(s.lanes|=h)}function Mg(s,o,l,h){return td(s,o,l,h),nd(s)}function za(s,o){return td(s,null,null,o),nd(s)}function F1(s,o,l){s.lanes|=l;var h=s.alternate;h!==null&&(h.lanes|=l);for(var m=!1,w=s.return;w!==null;)w.childLanes|=l,h=w.alternate,h!==null&&(h.childLanes|=l),w.tag===22&&(s=w.stateNode,s===null||s._visibility&1||(m=!0)),s=w,w=w.return;return s.tag===3?(w=s.stateNode,m&&o!==null&&(m=31-A(l),s=w.hiddenUpdates,h=s[m],h===null?s[m]=[o]:h.push(o),o.lane=l|536870912),w):null}function nd(s){if(50<Xl)throw Xl=0,Fm=null,Error(r(185));for(var o=s.return;o!==null;)s=o,o=s.return;return s.tag===3?s.stateNode:null}var qa={};function f6(s,o,l,h){this.tag=s,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ar(s,o,l,h){return new f6(s,o,l,h)}function jg(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Mi(s,o){var l=s.alternate;return l===null?(l=ar(s.tag,o,s.key,s.mode),l.elementType=s.elementType,l.type=s.type,l.stateNode=s.stateNode,l.alternate=s,s.alternate=l):(l.pendingProps=o,l.type=s.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=s.flags&65011712,l.childLanes=s.childLanes,l.lanes=s.lanes,l.child=s.child,l.memoizedProps=s.memoizedProps,l.memoizedState=s.memoizedState,l.updateQueue=s.updateQueue,o=s.dependencies,l.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},l.sibling=s.sibling,l.index=s.index,l.ref=s.ref,l.refCleanup=s.refCleanup,l}function V1(s,o){s.flags&=65011714;var l=s.alternate;return l===null?(s.childLanes=0,s.lanes=o,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,o=l.dependencies,s.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),s}function rd(s,o,l,h,m,w){var C=0;if(h=s,typeof s=="function")jg(s)&&(C=1);else if(typeof s=="string")C=h4(s,l,ie.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case k:return s=ar(31,l,o,m),s.elementType=k,s.lanes=w,s;case v:return xo(l.children,m,w,o);case E:C=8,m|=24;break;case S:return s=ar(12,l,o,m|2),s.elementType=S,s.lanes=w,s;case I:return s=ar(13,l,o,m),s.elementType=I,s.lanes=w,s;case B:return s=ar(19,l,o,m),s.elementType=B,s.lanes=w,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case _:case O:C=10;break e;case T:C=9;break e;case $:C=11;break e;case z:C=14;break e;case q:C=16,h=null;break e}C=29,l=Error(r(130,s===null?"null":typeof s,"")),h=null}return o=ar(C,l,o,m),o.elementType=s,o.type=h,o.lanes=w,o}function xo(s,o,l,h){return s=ar(7,s,h,o),s.lanes=l,s}function Lg(s,o,l){return s=ar(6,s,null,o),s.lanes=l,s}function zg(s,o,l){return o=ar(4,s.children!==null?s.children:[],s.key,o),o.lanes=l,o.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},o}var Ha=[],Fa=0,id=null,sd=0,Or=[],Tr=0,Ao=null,ji=1,Li="";function Ro(s,o){Ha[Fa++]=sd,Ha[Fa++]=id,id=s,sd=o}function G1(s,o,l){Or[Tr++]=ji,Or[Tr++]=Li,Or[Tr++]=Ao,Ao=s;var h=ji;s=Li;var m=32-A(h)-1;h&=~(1<<m),l+=1;var w=32-A(o)+m;if(30<w){var C=m-m%5;w=(h&(1<<C)-1).toString(32),h>>=C,m-=C,ji=1<<32-A(o)+m|l<<m|h,Li=w+s}else ji=1<<w|l<<m|h,Li=s}function qg(s){s.return!==null&&(Ro(s,1),G1(s,1,0))}function Hg(s){for(;s===id;)id=Ha[--Fa],Ha[Fa]=null,sd=Ha[--Fa],Ha[Fa]=null;for(;s===Ao;)Ao=Or[--Tr],Or[Tr]=null,Li=Or[--Tr],Or[Tr]=null,ji=Or[--Tr],Or[Tr]=null}var $n=null,Dt=null,Xe=!1,Oo=null,ci=!1,Fg=Error(r(519));function To(s){var o=Error(r(418,""));throw Tl(Ar(o,s)),Fg}function K1(s){var o=s.stateNode,l=s.type,h=s.memoizedProps;switch(o[xn]=s,o[Mn]=h,l){case"dialog":je("cancel",o),je("close",o);break;case"iframe":case"object":case"embed":je("load",o);break;case"video":case"audio":for(l=0;l<Ql.length;l++)je(Ql[l],o);break;case"source":je("error",o);break;case"img":case"image":case"link":je("error",o),je("load",o);break;case"details":je("toggle",o);break;case"input":je("invalid",o),c1(o,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0),Vf(o);break;case"select":je("invalid",o);break;case"textarea":je("invalid",o),u1(o,h.value,h.defaultValue,h.children),Vf(o)}l=h.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||o.textContent===""+l||h.suppressHydrationWarning===!0||uS(o.textContent,l)?(h.popover!=null&&(je("beforetoggle",o),je("toggle",o)),h.onScroll!=null&&je("scroll",o),h.onScrollEnd!=null&&je("scrollend",o),h.onClick!=null&&(o.onclick=jd),o=!0):o=!1,o||To(s)}function W1(s){for($n=s.return;$n;)switch($n.tag){case 5:case 13:ci=!1;return;case 27:case 3:ci=!0;return;default:$n=$n.return}}function Rl(s){if(s!==$n)return!1;if(!Xe)return W1(s),Xe=!0,!1;var o=s.tag,l;if((l=o!==3&&o!==27)&&((l=o===5)&&(l=s.type,l=!(l!=="form"&&l!=="button")||oy(s.type,s.memoizedProps)),l=!l),l&&Dt&&To(s),W1(s),o===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));e:{for(s=s.nextSibling,o=0;s;){if(s.nodeType===8)if(l=s.data,l==="/$"){if(o===0){Dt=Wr(s.nextSibling);break e}o--}else l!=="$"&&l!=="$!"&&l!=="$?"||o++;s=s.nextSibling}Dt=null}}else o===27?(o=Dt,Ms(s.type)?(s=uy,uy=null,Dt=s):Dt=o):Dt=$n?Wr(s.stateNode.nextSibling):null;return!0}function Ol(){Dt=$n=null,Xe=!1}function Y1(){var s=Oo;return s!==null&&(qn===null?qn=s:qn.push.apply(qn,s),Oo=null),s}function Tl(s){Oo===null?Oo=[s]:Oo.push(s)}var Vg=K(null),Do=null,zi=null;function _s(s,o,l){se(Vg,o._currentValue),o._currentValue=l}function qi(s){s._currentValue=Vg.current,te(Vg)}function Gg(s,o,l){for(;s!==null;){var h=s.alternate;if((s.childLanes&o)!==o?(s.childLanes|=o,h!==null&&(h.childLanes|=o)):h!==null&&(h.childLanes&o)!==o&&(h.childLanes|=o),s===l)break;s=s.return}}function Kg(s,o,l,h){var m=s.child;for(m!==null&&(m.return=s);m!==null;){var w=m.dependencies;if(w!==null){var C=m.child;w=w.firstContext;e:for(;w!==null;){var M=w;w=m;for(var Y=0;Y<o.length;Y++)if(M.context===o[Y]){w.lanes|=l,M=w.alternate,M!==null&&(M.lanes|=l),Gg(w.return,l,s),h||(C=null);break e}w=M.next}}else if(m.tag===18){if(C=m.return,C===null)throw Error(r(341));C.lanes|=l,w=C.alternate,w!==null&&(w.lanes|=l),Gg(C,l,s),C=null}else C=m.child;if(C!==null)C.return=m;else for(C=m;C!==null;){if(C===s){C=null;break}if(m=C.sibling,m!==null){m.return=C.return,C=m;break}C=C.return}m=C}}function Dl(s,o,l,h){s=null;for(var m=o,w=!1;m!==null;){if(!w){if((m.flags&524288)!==0)w=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var C=m.alternate;if(C===null)throw Error(r(387));if(C=C.memoizedProps,C!==null){var M=m.type;or(m.pendingProps.value,C.value)||(s!==null?s.push(M):s=[M])}}else if(m===ve.current){if(C=m.alternate,C===null)throw Error(r(387));C.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(s!==null?s.push(iu):s=[iu])}m=m.return}s!==null&&Kg(o,s,l,h),o.flags|=262144}function od(s){for(s=s.firstContext;s!==null;){if(!or(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function Co(s){Do=s,zi=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function An(s){return X1(Do,s)}function ad(s,o){return Do===null&&Co(s),X1(s,o)}function X1(s,o){var l=o._currentValue;if(o={context:o,memoizedValue:l,next:null},zi===null){if(s===null)throw Error(r(308));zi=o,s.dependencies={lanes:0,firstContext:o},s.flags|=524288}else zi=zi.next=o;return l}var d6=typeof AbortController<"u"?AbortController:function(){var s=[],o=this.signal={aborted:!1,addEventListener:function(l,h){s.push(h)}};this.abort=function(){o.aborted=!0,s.forEach(function(l){return l()})}},h6=e.unstable_scheduleCallback,p6=e.unstable_NormalPriority,Gt={$$typeof:O,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Wg(){return{controller:new d6,data:new Map,refCount:0}}function Cl(s){s.refCount--,s.refCount===0&&h6(p6,function(){s.controller.abort()})}var Il=null,Yg=0,Va=0,Ga=null;function g6(s,o){if(Il===null){var l=Il=[];Yg=0,Va=Zm(),Ga={status:"pending",value:void 0,then:function(h){l.push(h)}}}return Yg++,o.then(Z1,Z1),o}function Z1(){if(--Yg===0&&Il!==null){Ga!==null&&(Ga.status="fulfilled");var s=Il;Il=null,Va=0,Ga=null;for(var o=0;o<s.length;o++)(0,s[o])()}}function m6(s,o){var l=[],h={status:"pending",value:null,reason:null,then:function(m){l.push(m)}};return s.then(function(){h.status="fulfilled",h.value=o;for(var m=0;m<l.length;m++)(0,l[m])(o)},function(m){for(h.status="rejected",h.reason=m,m=0;m<l.length;m++)(0,l[m])(void 0)}),h}var Q1=R.S;R.S=function(s,o){typeof o=="object"&&o!==null&&typeof o.then=="function"&&g6(s,o),Q1!==null&&Q1(s,o)};var Io=K(null);function Xg(){var s=Io.current;return s!==null?s:gt.pooledCache}function cd(s,o){o===null?se(Io,Io.current):se(Io,o.pool)}function J1(){var s=Xg();return s===null?null:{parent:Gt._currentValue,pool:s}}var Nl=Error(r(460)),eE=Error(r(474)),ld=Error(r(542)),Zg={then:function(){}};function tE(s){return s=s.status,s==="fulfilled"||s==="rejected"}function ud(){}function nE(s,o,l){switch(l=s[l],l===void 0?s.push(o):l!==o&&(o.then(ud,ud),o=l),o.status){case"fulfilled":return o.value;case"rejected":throw s=o.reason,iE(s),s;default:if(typeof o.status=="string")o.then(ud,ud);else{if(s=gt,s!==null&&100<s.shellSuspendCounter)throw Error(r(482));s=o,s.status="pending",s.then(function(h){if(o.status==="pending"){var m=o;m.status="fulfilled",m.value=h}},function(h){if(o.status==="pending"){var m=o;m.status="rejected",m.reason=h}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw s=o.reason,iE(s),s}throw $l=o,Nl}}var $l=null;function rE(){if($l===null)throw Error(r(459));var s=$l;return $l=null,s}function iE(s){if(s===Nl||s===ld)throw Error(r(483))}var xs=!1;function Qg(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Jg(s,o){s=s.updateQueue,o.updateQueue===s&&(o.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function As(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function Rs(s,o,l){var h=s.updateQueue;if(h===null)return null;if(h=h.shared,(tt&2)!==0){var m=h.pending;return m===null?o.next=o:(o.next=m.next,m.next=o),h.pending=o,o=nd(s),F1(s,null,l),o}return td(s,h,o,l),nd(s)}function Bl(s,o,l){if(o=o.updateQueue,o!==null&&(o=o.shared,(l&4194048)!==0)){var h=o.lanes;h&=s.pendingLanes,l|=h,o.lanes=l,Zw(s,l)}}function em(s,o){var l=s.updateQueue,h=s.alternate;if(h!==null&&(h=h.updateQueue,l===h)){var m=null,w=null;if(l=l.firstBaseUpdate,l!==null){do{var C={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};w===null?m=w=C:w=w.next=C,l=l.next}while(l!==null);w===null?m=w=o:w=w.next=o}else m=w=o;l={baseState:h.baseState,firstBaseUpdate:m,lastBaseUpdate:w,shared:h.shared,callbacks:h.callbacks},s.updateQueue=l;return}s=l.lastBaseUpdate,s===null?l.firstBaseUpdate=o:s.next=o,l.lastBaseUpdate=o}var tm=!1;function Pl(){if(tm){var s=Ga;if(s!==null)throw s}}function Ul(s,o,l,h){tm=!1;var m=s.updateQueue;xs=!1;var w=m.firstBaseUpdate,C=m.lastBaseUpdate,M=m.shared.pending;if(M!==null){m.shared.pending=null;var Y=M,ae=Y.next;Y.next=null,C===null?w=ae:C.next=ae,C=Y;var de=s.alternate;de!==null&&(de=de.updateQueue,M=de.lastBaseUpdate,M!==C&&(M===null?de.firstBaseUpdate=ae:M.next=ae,de.lastBaseUpdate=Y))}if(w!==null){var me=m.baseState;C=0,de=ae=Y=null,M=w;do{var ce=M.lane&-536870913,le=ce!==M.lane;if(le?(He&ce)===ce:(h&ce)===ce){ce!==0&&ce===Va&&(tm=!0),de!==null&&(de=de.next={lane:0,tag:M.tag,payload:M.payload,callback:null,next:null});e:{var Ce=s,Te=M;ce=o;var ct=l;switch(Te.tag){case 1:if(Ce=Te.payload,typeof Ce=="function"){me=Ce.call(ct,me,ce);break e}me=Ce;break e;case 3:Ce.flags=Ce.flags&-65537|128;case 0:if(Ce=Te.payload,ce=typeof Ce=="function"?Ce.call(ct,me,ce):Ce,ce==null)break e;me=p({},me,ce);break e;case 2:xs=!0}}ce=M.callback,ce!==null&&(s.flags|=64,le&&(s.flags|=8192),le=m.callbacks,le===null?m.callbacks=[ce]:le.push(ce))}else le={lane:ce,tag:M.tag,payload:M.payload,callback:M.callback,next:null},de===null?(ae=de=le,Y=me):de=de.next=le,C|=ce;if(M=M.next,M===null){if(M=m.shared.pending,M===null)break;le=M,M=le.next,le.next=null,m.lastBaseUpdate=le,m.shared.pending=null}}while(!0);de===null&&(Y=me),m.baseState=Y,m.firstBaseUpdate=ae,m.lastBaseUpdate=de,w===null&&(m.shared.lanes=0),Bs|=C,s.lanes=C,s.memoizedState=me}}function sE(s,o){if(typeof s!="function")throw Error(r(191,s));s.call(o)}function oE(s,o){var l=s.callbacks;if(l!==null)for(s.callbacks=null,s=0;s<l.length;s++)sE(l[s],o)}var Ka=K(null),fd=K(0);function aE(s,o){s=Yi,se(fd,s),se(Ka,o),Yi=s|o.baseLanes}function nm(){se(fd,Yi),se(Ka,Ka.current)}function rm(){Yi=fd.current,te(Ka),te(fd)}var Os=0,Pe=null,ot=null,Mt=null,dd=!1,Wa=!1,No=!1,hd=0,kl=0,Ya=null,y6=0;function Pt(){throw Error(r(321))}function im(s,o){if(o===null)return!1;for(var l=0;l<o.length&&l<s.length;l++)if(!or(s[l],o[l]))return!1;return!0}function sm(s,o,l,h,m,w){return Os=w,Pe=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,R.H=s===null||s.memoizedState===null?FE:VE,No=!1,w=l(h,m),No=!1,Wa&&(w=lE(o,l,h,m)),cE(s),w}function cE(s){R.H=vd;var o=ot!==null&&ot.next!==null;if(Os=0,Mt=ot=Pe=null,dd=!1,kl=0,Ya=null,o)throw Error(r(300));s===null||tn||(s=s.dependencies,s!==null&&od(s)&&(tn=!0))}function lE(s,o,l,h){Pe=s;var m=0;do{if(Wa&&(Ya=null),kl=0,Wa=!1,25<=m)throw Error(r(301));if(m+=1,Mt=ot=null,s.updateQueue!=null){var w=s.updateQueue;w.lastEffect=null,w.events=null,w.stores=null,w.memoCache!=null&&(w.memoCache.index=0)}R.H=x6,w=o(l,h)}while(Wa);return w}function b6(){var s=R.H,o=s.useState()[0];return o=typeof o.then=="function"?Ml(o):o,s=s.useState()[0],(ot!==null?ot.memoizedState:null)!==s&&(Pe.flags|=1024),o}function om(){var s=hd!==0;return hd=0,s}function am(s,o,l){o.updateQueue=s.updateQueue,o.flags&=-2053,s.lanes&=~l}function cm(s){if(dd){for(s=s.memoizedState;s!==null;){var o=s.queue;o!==null&&(o.pending=null),s=s.next}dd=!1}Os=0,Mt=ot=Pe=null,Wa=!1,kl=hd=0,Ya=null}function Ln(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Mt===null?Pe.memoizedState=Mt=s:Mt=Mt.next=s,Mt}function jt(){if(ot===null){var s=Pe.alternate;s=s!==null?s.memoizedState:null}else s=ot.next;var o=Mt===null?Pe.memoizedState:Mt.next;if(o!==null)Mt=o,ot=s;else{if(s===null)throw Pe.alternate===null?Error(r(467)):Error(r(310));ot=s,s={memoizedState:ot.memoizedState,baseState:ot.baseState,baseQueue:ot.baseQueue,queue:ot.queue,next:null},Mt===null?Pe.memoizedState=Mt=s:Mt=Mt.next=s}return Mt}function lm(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ml(s){var o=kl;return kl+=1,Ya===null&&(Ya=[]),s=nE(Ya,s,o),o=Pe,(Mt===null?o.memoizedState:Mt.next)===null&&(o=o.alternate,R.H=o===null||o.memoizedState===null?FE:VE),s}function pd(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Ml(s);if(s.$$typeof===O)return An(s)}throw Error(r(438,String(s)))}function um(s){var o=null,l=Pe.updateQueue;if(l!==null&&(o=l.memoCache),o==null){var h=Pe.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(o={data:h.data.map(function(m){return m.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),l===null&&(l=lm(),Pe.updateQueue=l),l.memoCache=o,l=o.data[o.index],l===void 0)for(l=o.data[o.index]=Array(s),h=0;h<s;h++)l[h]=W;return o.index++,l}function Hi(s,o){return typeof o=="function"?o(s):o}function gd(s){var o=jt();return fm(o,ot,s)}function fm(s,o,l){var h=s.queue;if(h===null)throw Error(r(311));h.lastRenderedReducer=l;var m=s.baseQueue,w=h.pending;if(w!==null){if(m!==null){var C=m.next;m.next=w.next,w.next=C}o.baseQueue=m=w,h.pending=null}if(w=s.baseState,m===null)s.memoizedState=w;else{o=m.next;var M=C=null,Y=null,ae=o,de=!1;do{var me=ae.lane&-536870913;if(me!==ae.lane?(He&me)===me:(Os&me)===me){var ce=ae.revertLane;if(ce===0)Y!==null&&(Y=Y.next={lane:0,revertLane:0,action:ae.action,hasEagerState:ae.hasEagerState,eagerState:ae.eagerState,next:null}),me===Va&&(de=!0);else if((Os&ce)===ce){ae=ae.next,ce===Va&&(de=!0);continue}else me={lane:0,revertLane:ae.revertLane,action:ae.action,hasEagerState:ae.hasEagerState,eagerState:ae.eagerState,next:null},Y===null?(M=Y=me,C=w):Y=Y.next=me,Pe.lanes|=ce,Bs|=ce;me=ae.action,No&&l(w,me),w=ae.hasEagerState?ae.eagerState:l(w,me)}else ce={lane:me,revertLane:ae.revertLane,action:ae.action,hasEagerState:ae.hasEagerState,eagerState:ae.eagerState,next:null},Y===null?(M=Y=ce,C=w):Y=Y.next=ce,Pe.lanes|=me,Bs|=me;ae=ae.next}while(ae!==null&&ae!==o);if(Y===null?C=w:Y.next=M,!or(w,s.memoizedState)&&(tn=!0,de&&(l=Ga,l!==null)))throw l;s.memoizedState=w,s.baseState=C,s.baseQueue=Y,h.lastRenderedState=w}return m===null&&(h.lanes=0),[s.memoizedState,h.dispatch]}function dm(s){var o=jt(),l=o.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=s;var h=l.dispatch,m=l.pending,w=o.memoizedState;if(m!==null){l.pending=null;var C=m=m.next;do w=s(w,C.action),C=C.next;while(C!==m);or(w,o.memoizedState)||(tn=!0),o.memoizedState=w,o.baseQueue===null&&(o.baseState=w),l.lastRenderedState=w}return[w,h]}function uE(s,o,l){var h=Pe,m=jt(),w=Xe;if(w){if(l===void 0)throw Error(r(407));l=l()}else l=o();var C=!or((ot||m).memoizedState,l);C&&(m.memoizedState=l,tn=!0),m=m.queue;var M=hE.bind(null,h,m,s);if(jl(2048,8,M,[s]),m.getSnapshot!==o||C||Mt!==null&&Mt.memoizedState.tag&1){if(h.flags|=2048,Xa(9,md(),dE.bind(null,h,m,l,o),null),gt===null)throw Error(r(349));w||(Os&124)!==0||fE(h,o,l)}return l}function fE(s,o,l){s.flags|=16384,s={getSnapshot:o,value:l},o=Pe.updateQueue,o===null?(o=lm(),Pe.updateQueue=o,o.stores=[s]):(l=o.stores,l===null?o.stores=[s]:l.push(s))}function dE(s,o,l,h){o.value=l,o.getSnapshot=h,pE(o)&&gE(s)}function hE(s,o,l){return l(function(){pE(o)&&gE(s)})}function pE(s){var o=s.getSnapshot;s=s.value;try{var l=o();return!or(s,l)}catch{return!0}}function gE(s){var o=za(s,2);o!==null&&dr(o,s,2)}function hm(s){var o=Ln();if(typeof s=="function"){var l=s;if(s=l(),No){x(!0);try{l()}finally{x(!1)}}}return o.memoizedState=o.baseState=s,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hi,lastRenderedState:s},o}function mE(s,o,l,h){return s.baseState=l,fm(s,ot,typeof h=="function"?h:Hi)}function v6(s,o,l,h,m){if(bd(s))throw Error(r(485));if(s=o.action,s!==null){var w={payload:m,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(C){w.listeners.push(C)}};R.T!==null?l(!0):w.isTransition=!1,h(w),l=o.pending,l===null?(w.next=o.pending=w,yE(o,w)):(w.next=l.next,o.pending=l.next=w)}}function yE(s,o){var l=o.action,h=o.payload,m=s.state;if(o.isTransition){var w=R.T,C={};R.T=C;try{var M=l(m,h),Y=R.S;Y!==null&&Y(C,M),bE(s,o,M)}catch(ae){pm(s,o,ae)}finally{R.T=w}}else try{w=l(m,h),bE(s,o,w)}catch(ae){pm(s,o,ae)}}function bE(s,o,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(h){vE(s,o,h)},function(h){return pm(s,o,h)}):vE(s,o,l)}function vE(s,o,l){o.status="fulfilled",o.value=l,wE(o),s.state=l,o=s.pending,o!==null&&(l=o.next,l===o?s.pending=null:(l=l.next,o.next=l,yE(s,l)))}function pm(s,o,l){var h=s.pending;if(s.pending=null,h!==null){h=h.next;do o.status="rejected",o.reason=l,wE(o),o=o.next;while(o!==h)}s.action=null}function wE(s){s=s.listeners;for(var o=0;o<s.length;o++)(0,s[o])()}function EE(s,o){return o}function SE(s,o){if(Xe){var l=gt.formState;if(l!==null){e:{var h=Pe;if(Xe){if(Dt){t:{for(var m=Dt,w=ci;m.nodeType!==8;){if(!w){m=null;break t}if(m=Wr(m.nextSibling),m===null){m=null;break t}}w=m.data,m=w==="F!"||w==="F"?m:null}if(m){Dt=Wr(m.nextSibling),h=m.data==="F!";break e}}To(h)}h=!1}h&&(o=l[0])}}return l=Ln(),l.memoizedState=l.baseState=o,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:EE,lastRenderedState:o},l.queue=h,l=zE.bind(null,Pe,h),h.dispatch=l,h=hm(!1),w=vm.bind(null,Pe,!1,h.queue),h=Ln(),m={state:o,dispatch:null,action:s,pending:null},h.queue=m,l=v6.bind(null,Pe,m,w,l),m.dispatch=l,h.memoizedState=s,[o,l,!1]}function _E(s){var o=jt();return xE(o,ot,s)}function xE(s,o,l){if(o=fm(s,o,EE)[0],s=gd(Hi)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var h=Ml(o)}catch(C){throw C===Nl?ld:C}else h=o;o=jt();var m=o.queue,w=m.dispatch;return l!==o.memoizedState&&(Pe.flags|=2048,Xa(9,md(),w6.bind(null,m,l),null)),[h,w,s]}function w6(s,o){s.action=o}function AE(s){var o=jt(),l=ot;if(l!==null)return xE(o,l,s);jt(),o=o.memoizedState,l=jt();var h=l.queue.dispatch;return l.memoizedState=s,[o,h,!1]}function Xa(s,o,l,h){return s={tag:s,create:l,deps:h,inst:o,next:null},o=Pe.updateQueue,o===null&&(o=lm(),Pe.updateQueue=o),l=o.lastEffect,l===null?o.lastEffect=s.next=s:(h=l.next,l.next=s,s.next=h,o.lastEffect=s),s}function md(){return{destroy:void 0,resource:void 0}}function RE(){return jt().memoizedState}function yd(s,o,l,h){var m=Ln();h=h===void 0?null:h,Pe.flags|=s,m.memoizedState=Xa(1|o,md(),l,h)}function jl(s,o,l,h){var m=jt();h=h===void 0?null:h;var w=m.memoizedState.inst;ot!==null&&h!==null&&im(h,ot.memoizedState.deps)?m.memoizedState=Xa(o,w,l,h):(Pe.flags|=s,m.memoizedState=Xa(1|o,w,l,h))}function OE(s,o){yd(8390656,8,s,o)}function TE(s,o){jl(2048,8,s,o)}function DE(s,o){return jl(4,2,s,o)}function CE(s,o){return jl(4,4,s,o)}function IE(s,o){if(typeof o=="function"){s=s();var l=o(s);return function(){typeof l=="function"?l():o(null)}}if(o!=null)return s=s(),o.current=s,function(){o.current=null}}function NE(s,o,l){l=l!=null?l.concat([s]):null,jl(4,4,IE.bind(null,o,s),l)}function gm(){}function $E(s,o){var l=jt();o=o===void 0?null:o;var h=l.memoizedState;return o!==null&&im(o,h[1])?h[0]:(l.memoizedState=[s,o],s)}function BE(s,o){var l=jt();o=o===void 0?null:o;var h=l.memoizedState;if(o!==null&&im(o,h[1]))return h[0];if(h=s(),No){x(!0);try{s()}finally{x(!1)}}return l.memoizedState=[h,o],h}function mm(s,o,l){return l===void 0||(Os&1073741824)!==0?s.memoizedState=o:(s.memoizedState=l,s=k2(),Pe.lanes|=s,Bs|=s,l)}function PE(s,o,l,h){return or(l,o)?l:Ka.current!==null?(s=mm(s,l,h),or(s,o)||(tn=!0),s):(Os&42)===0?(tn=!0,s.memoizedState=l):(s=k2(),Pe.lanes|=s,Bs|=s,o)}function UE(s,o,l,h,m){var w=L.p;L.p=w!==0&&8>w?w:8;var C=R.T,M={};R.T=M,vm(s,!1,o,l);try{var Y=m(),ae=R.S;if(ae!==null&&ae(M,Y),Y!==null&&typeof Y=="object"&&typeof Y.then=="function"){var de=m6(Y,h);Ll(s,o,de,fr(s))}else Ll(s,o,h,fr(s))}catch(me){Ll(s,o,{then:function(){},status:"rejected",reason:me},fr())}finally{L.p=w,R.T=C}}function E6(){}function ym(s,o,l,h){if(s.tag!==5)throw Error(r(476));var m=kE(s).queue;UE(s,m,o,V,l===null?E6:function(){return ME(s),l(h)})}function kE(s){var o=s.memoizedState;if(o!==null)return o;o={memoizedState:V,baseState:V,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hi,lastRenderedState:V},next:null};var l={};return o.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hi,lastRenderedState:l},next:null},s.memoizedState=o,s=s.alternate,s!==null&&(s.memoizedState=o),o}function ME(s){var o=kE(s).next.queue;Ll(s,o,{},fr())}function bm(){return An(iu)}function jE(){return jt().memoizedState}function LE(){return jt().memoizedState}function S6(s){for(var o=s.return;o!==null;){switch(o.tag){case 24:case 3:var l=fr();s=As(l);var h=Rs(o,s,l);h!==null&&(dr(h,o,l),Bl(h,o,l)),o={cache:Wg()},s.payload=o;return}o=o.return}}function _6(s,o,l){var h=fr();l={lane:h,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null},bd(s)?qE(o,l):(l=Mg(s,o,l,h),l!==null&&(dr(l,s,h),HE(l,o,h)))}function zE(s,o,l){var h=fr();Ll(s,o,l,h)}function Ll(s,o,l,h){var m={lane:h,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null};if(bd(s))qE(o,m);else{var w=s.alternate;if(s.lanes===0&&(w===null||w.lanes===0)&&(w=o.lastRenderedReducer,w!==null))try{var C=o.lastRenderedState,M=w(C,l);if(m.hasEagerState=!0,m.eagerState=M,or(M,C))return td(s,o,m,0),gt===null&&ed(),!1}catch{}finally{}if(l=Mg(s,o,m,h),l!==null)return dr(l,s,h),HE(l,o,h),!0}return!1}function vm(s,o,l,h){if(h={lane:2,revertLane:Zm(),action:h,hasEagerState:!1,eagerState:null,next:null},bd(s)){if(o)throw Error(r(479))}else o=Mg(s,l,h,2),o!==null&&dr(o,s,2)}function bd(s){var o=s.alternate;return s===Pe||o!==null&&o===Pe}function qE(s,o){Wa=dd=!0;var l=s.pending;l===null?o.next=o:(o.next=l.next,l.next=o),s.pending=o}function HE(s,o,l){if((l&4194048)!==0){var h=o.lanes;h&=s.pendingLanes,l|=h,o.lanes=l,Zw(s,l)}}var vd={readContext:An,use:pd,useCallback:Pt,useContext:Pt,useEffect:Pt,useImperativeHandle:Pt,useLayoutEffect:Pt,useInsertionEffect:Pt,useMemo:Pt,useReducer:Pt,useRef:Pt,useState:Pt,useDebugValue:Pt,useDeferredValue:Pt,useTransition:Pt,useSyncExternalStore:Pt,useId:Pt,useHostTransitionStatus:Pt,useFormState:Pt,useActionState:Pt,useOptimistic:Pt,useMemoCache:Pt,useCacheRefresh:Pt},FE={readContext:An,use:pd,useCallback:function(s,o){return Ln().memoizedState=[s,o===void 0?null:o],s},useContext:An,useEffect:OE,useImperativeHandle:function(s,o,l){l=l!=null?l.concat([s]):null,yd(4194308,4,IE.bind(null,o,s),l)},useLayoutEffect:function(s,o){return yd(4194308,4,s,o)},useInsertionEffect:function(s,o){yd(4,2,s,o)},useMemo:function(s,o){var l=Ln();o=o===void 0?null:o;var h=s();if(No){x(!0);try{s()}finally{x(!1)}}return l.memoizedState=[h,o],h},useReducer:function(s,o,l){var h=Ln();if(l!==void 0){var m=l(o);if(No){x(!0);try{l(o)}finally{x(!1)}}}else m=o;return h.memoizedState=h.baseState=m,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:m},h.queue=s,s=s.dispatch=_6.bind(null,Pe,s),[h.memoizedState,s]},useRef:function(s){var o=Ln();return s={current:s},o.memoizedState=s},useState:function(s){s=hm(s);var o=s.queue,l=zE.bind(null,Pe,o);return o.dispatch=l,[s.memoizedState,l]},useDebugValue:gm,useDeferredValue:function(s,o){var l=Ln();return mm(l,s,o)},useTransition:function(){var s=hm(!1);return s=UE.bind(null,Pe,s.queue,!0,!1),Ln().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,o,l){var h=Pe,m=Ln();if(Xe){if(l===void 0)throw Error(r(407));l=l()}else{if(l=o(),gt===null)throw Error(r(349));(He&124)!==0||fE(h,o,l)}m.memoizedState=l;var w={value:l,getSnapshot:o};return m.queue=w,OE(hE.bind(null,h,w,s),[s]),h.flags|=2048,Xa(9,md(),dE.bind(null,h,w,l,o),null),l},useId:function(){var s=Ln(),o=gt.identifierPrefix;if(Xe){var l=Li,h=ji;l=(h&~(1<<32-A(h)-1)).toString(32)+l,o=""+o+"R"+l,l=hd++,0<l&&(o+="H"+l.toString(32)),o+=""}else l=y6++,o=""+o+"r"+l.toString(32)+"";return s.memoizedState=o},useHostTransitionStatus:bm,useFormState:SE,useActionState:SE,useOptimistic:function(s){var o=Ln();o.memoizedState=o.baseState=s;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=l,o=vm.bind(null,Pe,!0,l),l.dispatch=o,[s,o]},useMemoCache:um,useCacheRefresh:function(){return Ln().memoizedState=S6.bind(null,Pe)}},VE={readContext:An,use:pd,useCallback:$E,useContext:An,useEffect:TE,useImperativeHandle:NE,useInsertionEffect:DE,useLayoutEffect:CE,useMemo:BE,useReducer:gd,useRef:RE,useState:function(){return gd(Hi)},useDebugValue:gm,useDeferredValue:function(s,o){var l=jt();return PE(l,ot.memoizedState,s,o)},useTransition:function(){var s=gd(Hi)[0],o=jt().memoizedState;return[typeof s=="boolean"?s:Ml(s),o]},useSyncExternalStore:uE,useId:jE,useHostTransitionStatus:bm,useFormState:_E,useActionState:_E,useOptimistic:function(s,o){var l=jt();return mE(l,ot,s,o)},useMemoCache:um,useCacheRefresh:LE},x6={readContext:An,use:pd,useCallback:$E,useContext:An,useEffect:TE,useImperativeHandle:NE,useInsertionEffect:DE,useLayoutEffect:CE,useMemo:BE,useReducer:dm,useRef:RE,useState:function(){return dm(Hi)},useDebugValue:gm,useDeferredValue:function(s,o){var l=jt();return ot===null?mm(l,s,o):PE(l,ot.memoizedState,s,o)},useTransition:function(){var s=dm(Hi)[0],o=jt().memoizedState;return[typeof s=="boolean"?s:Ml(s),o]},useSyncExternalStore:uE,useId:jE,useHostTransitionStatus:bm,useFormState:AE,useActionState:AE,useOptimistic:function(s,o){var l=jt();return ot!==null?mE(l,ot,s,o):(l.baseState=s,[s,l.queue.dispatch])},useMemoCache:um,useCacheRefresh:LE},Za=null,zl=0;function wd(s){var o=zl;return zl+=1,Za===null&&(Za=[]),nE(Za,s,o)}function ql(s,o){o=o.props.ref,s.ref=o!==void 0?o:null}function Ed(s,o){throw o.$$typeof===g?Error(r(525)):(s=Object.prototype.toString.call(o),Error(r(31,s==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":s)))}function GE(s){var o=s._init;return o(s._payload)}function KE(s){function o(re,Z){if(s){var oe=re.deletions;oe===null?(re.deletions=[Z],re.flags|=16):oe.push(Z)}}function l(re,Z){if(!s)return null;for(;Z!==null;)o(re,Z),Z=Z.sibling;return null}function h(re){for(var Z=new Map;re!==null;)re.key!==null?Z.set(re.key,re):Z.set(re.index,re),re=re.sibling;return Z}function m(re,Z){return re=Mi(re,Z),re.index=0,re.sibling=null,re}function w(re,Z,oe){return re.index=oe,s?(oe=re.alternate,oe!==null?(oe=oe.index,oe<Z?(re.flags|=67108866,Z):oe):(re.flags|=67108866,Z)):(re.flags|=1048576,Z)}function C(re){return s&&re.alternate===null&&(re.flags|=67108866),re}function M(re,Z,oe,ge){return Z===null||Z.tag!==6?(Z=Lg(oe,re.mode,ge),Z.return=re,Z):(Z=m(Z,oe),Z.return=re,Z)}function Y(re,Z,oe,ge){var xe=oe.type;return xe===v?de(re,Z,oe.props.children,ge,oe.key):Z!==null&&(Z.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===q&&GE(xe)===Z.type)?(Z=m(Z,oe.props),ql(Z,oe),Z.return=re,Z):(Z=rd(oe.type,oe.key,oe.props,null,re.mode,ge),ql(Z,oe),Z.return=re,Z)}function ae(re,Z,oe,ge){return Z===null||Z.tag!==4||Z.stateNode.containerInfo!==oe.containerInfo||Z.stateNode.implementation!==oe.implementation?(Z=zg(oe,re.mode,ge),Z.return=re,Z):(Z=m(Z,oe.children||[]),Z.return=re,Z)}function de(re,Z,oe,ge,xe){return Z===null||Z.tag!==7?(Z=xo(oe,re.mode,ge,xe),Z.return=re,Z):(Z=m(Z,oe),Z.return=re,Z)}function me(re,Z,oe){if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return Z=Lg(""+Z,re.mode,oe),Z.return=re,Z;if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case y:return oe=rd(Z.type,Z.key,Z.props,null,re.mode,oe),ql(oe,Z),oe.return=re,oe;case b:return Z=zg(Z,re.mode,oe),Z.return=re,Z;case q:var ge=Z._init;return Z=ge(Z._payload),me(re,Z,oe)}if(D(Z)||G(Z))return Z=xo(Z,re.mode,oe,null),Z.return=re,Z;if(typeof Z.then=="function")return me(re,wd(Z),oe);if(Z.$$typeof===O)return me(re,ad(re,Z),oe);Ed(re,Z)}return null}function ce(re,Z,oe,ge){var xe=Z!==null?Z.key:null;if(typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint")return xe!==null?null:M(re,Z,""+oe,ge);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case y:return oe.key===xe?Y(re,Z,oe,ge):null;case b:return oe.key===xe?ae(re,Z,oe,ge):null;case q:return xe=oe._init,oe=xe(oe._payload),ce(re,Z,oe,ge)}if(D(oe)||G(oe))return xe!==null?null:de(re,Z,oe,ge,null);if(typeof oe.then=="function")return ce(re,Z,wd(oe),ge);if(oe.$$typeof===O)return ce(re,Z,ad(re,oe),ge);Ed(re,oe)}return null}function le(re,Z,oe,ge,xe){if(typeof ge=="string"&&ge!==""||typeof ge=="number"||typeof ge=="bigint")return re=re.get(oe)||null,M(Z,re,""+ge,xe);if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case y:return re=re.get(ge.key===null?oe:ge.key)||null,Y(Z,re,ge,xe);case b:return re=re.get(ge.key===null?oe:ge.key)||null,ae(Z,re,ge,xe);case q:var Ue=ge._init;return ge=Ue(ge._payload),le(re,Z,oe,ge,xe)}if(D(ge)||G(ge))return re=re.get(oe)||null,de(Z,re,ge,xe,null);if(typeof ge.then=="function")return le(re,Z,oe,wd(ge),xe);if(ge.$$typeof===O)return le(re,Z,oe,ad(Z,ge),xe);Ed(Z,ge)}return null}function Ce(re,Z,oe,ge){for(var xe=null,Ue=null,Ae=Z,De=Z=0,rn=null;Ae!==null&&De<oe.length;De++){Ae.index>De?(rn=Ae,Ae=null):rn=Ae.sibling;var Ve=ce(re,Ae,oe[De],ge);if(Ve===null){Ae===null&&(Ae=rn);break}s&&Ae&&Ve.alternate===null&&o(re,Ae),Z=w(Ve,Z,De),Ue===null?xe=Ve:Ue.sibling=Ve,Ue=Ve,Ae=rn}if(De===oe.length)return l(re,Ae),Xe&&Ro(re,De),xe;if(Ae===null){for(;De<oe.length;De++)Ae=me(re,oe[De],ge),Ae!==null&&(Z=w(Ae,Z,De),Ue===null?xe=Ae:Ue.sibling=Ae,Ue=Ae);return Xe&&Ro(re,De),xe}for(Ae=h(Ae);De<oe.length;De++)rn=le(Ae,re,De,oe[De],ge),rn!==null&&(s&&rn.alternate!==null&&Ae.delete(rn.key===null?De:rn.key),Z=w(rn,Z,De),Ue===null?xe=rn:Ue.sibling=rn,Ue=rn);return s&&Ae.forEach(function(Hs){return o(re,Hs)}),Xe&&Ro(re,De),xe}function Te(re,Z,oe,ge){if(oe==null)throw Error(r(151));for(var xe=null,Ue=null,Ae=Z,De=Z=0,rn=null,Ve=oe.next();Ae!==null&&!Ve.done;De++,Ve=oe.next()){Ae.index>De?(rn=Ae,Ae=null):rn=Ae.sibling;var Hs=ce(re,Ae,Ve.value,ge);if(Hs===null){Ae===null&&(Ae=rn);break}s&&Ae&&Hs.alternate===null&&o(re,Ae),Z=w(Hs,Z,De),Ue===null?xe=Hs:Ue.sibling=Hs,Ue=Hs,Ae=rn}if(Ve.done)return l(re,Ae),Xe&&Ro(re,De),xe;if(Ae===null){for(;!Ve.done;De++,Ve=oe.next())Ve=me(re,Ve.value,ge),Ve!==null&&(Z=w(Ve,Z,De),Ue===null?xe=Ve:Ue.sibling=Ve,Ue=Ve);return Xe&&Ro(re,De),xe}for(Ae=h(Ae);!Ve.done;De++,Ve=oe.next())Ve=le(Ae,re,De,Ve.value,ge),Ve!==null&&(s&&Ve.alternate!==null&&Ae.delete(Ve.key===null?De:Ve.key),Z=w(Ve,Z,De),Ue===null?xe=Ve:Ue.sibling=Ve,Ue=Ve);return s&&Ae.forEach(function(A4){return o(re,A4)}),Xe&&Ro(re,De),xe}function ct(re,Z,oe,ge){if(typeof oe=="object"&&oe!==null&&oe.type===v&&oe.key===null&&(oe=oe.props.children),typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case y:e:{for(var xe=oe.key;Z!==null;){if(Z.key===xe){if(xe=oe.type,xe===v){if(Z.tag===7){l(re,Z.sibling),ge=m(Z,oe.props.children),ge.return=re,re=ge;break e}}else if(Z.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===q&&GE(xe)===Z.type){l(re,Z.sibling),ge=m(Z,oe.props),ql(ge,oe),ge.return=re,re=ge;break e}l(re,Z);break}else o(re,Z);Z=Z.sibling}oe.type===v?(ge=xo(oe.props.children,re.mode,ge,oe.key),ge.return=re,re=ge):(ge=rd(oe.type,oe.key,oe.props,null,re.mode,ge),ql(ge,oe),ge.return=re,re=ge)}return C(re);case b:e:{for(xe=oe.key;Z!==null;){if(Z.key===xe)if(Z.tag===4&&Z.stateNode.containerInfo===oe.containerInfo&&Z.stateNode.implementation===oe.implementation){l(re,Z.sibling),ge=m(Z,oe.children||[]),ge.return=re,re=ge;break e}else{l(re,Z);break}else o(re,Z);Z=Z.sibling}ge=zg(oe,re.mode,ge),ge.return=re,re=ge}return C(re);case q:return xe=oe._init,oe=xe(oe._payload),ct(re,Z,oe,ge)}if(D(oe))return Ce(re,Z,oe,ge);if(G(oe)){if(xe=G(oe),typeof xe!="function")throw Error(r(150));return oe=xe.call(oe),Te(re,Z,oe,ge)}if(typeof oe.then=="function")return ct(re,Z,wd(oe),ge);if(oe.$$typeof===O)return ct(re,Z,ad(re,oe),ge);Ed(re,oe)}return typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint"?(oe=""+oe,Z!==null&&Z.tag===6?(l(re,Z.sibling),ge=m(Z,oe),ge.return=re,re=ge):(l(re,Z),ge=Lg(oe,re.mode,ge),ge.return=re,re=ge),C(re)):l(re,Z)}return function(re,Z,oe,ge){try{zl=0;var xe=ct(re,Z,oe,ge);return Za=null,xe}catch(Ae){if(Ae===Nl||Ae===ld)throw Ae;var Ue=ar(29,Ae,null,re.mode);return Ue.lanes=ge,Ue.return=re,Ue}finally{}}}var Qa=KE(!0),WE=KE(!1),Dr=K(null),li=null;function Ts(s){var o=s.alternate;se(Kt,Kt.current&1),se(Dr,s),li===null&&(o===null||Ka.current!==null||o.memoizedState!==null)&&(li=s)}function YE(s){if(s.tag===22){if(se(Kt,Kt.current),se(Dr,s),li===null){var o=s.alternate;o!==null&&o.memoizedState!==null&&(li=s)}}else Ds()}function Ds(){se(Kt,Kt.current),se(Dr,Dr.current)}function Fi(s){te(Dr),li===s&&(li=null),te(Kt)}var Kt=K(0);function Sd(s){for(var o=s;o!==null;){if(o.tag===13){var l=o.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||ly(l)))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}function wm(s,o,l,h){o=s.memoizedState,l=l(h,o),l=l==null?o:p({},o,l),s.memoizedState=l,s.lanes===0&&(s.updateQueue.baseState=l)}var Em={enqueueSetState:function(s,o,l){s=s._reactInternals;var h=fr(),m=As(h);m.payload=o,l!=null&&(m.callback=l),o=Rs(s,m,h),o!==null&&(dr(o,s,h),Bl(o,s,h))},enqueueReplaceState:function(s,o,l){s=s._reactInternals;var h=fr(),m=As(h);m.tag=1,m.payload=o,l!=null&&(m.callback=l),o=Rs(s,m,h),o!==null&&(dr(o,s,h),Bl(o,s,h))},enqueueForceUpdate:function(s,o){s=s._reactInternals;var l=fr(),h=As(l);h.tag=2,o!=null&&(h.callback=o),o=Rs(s,h,l),o!==null&&(dr(o,s,l),Bl(o,s,l))}};function XE(s,o,l,h,m,w,C){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(h,w,C):o.prototype&&o.prototype.isPureReactComponent?!xl(l,h)||!xl(m,w):!0}function ZE(s,o,l,h){s=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(l,h),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(l,h),o.state!==s&&Em.enqueueReplaceState(o,o.state,null)}function $o(s,o){var l=o;if("ref"in o){l={};for(var h in o)h!=="ref"&&(l[h]=o[h])}if(s=s.defaultProps){l===o&&(l=p({},l));for(var m in s)l[m]===void 0&&(l[m]=s[m])}return l}var _d=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)};function QE(s){_d(s)}function JE(s){console.error(s)}function e2(s){_d(s)}function xd(s,o){try{var l=s.onUncaughtError;l(o.value,{componentStack:o.stack})}catch(h){setTimeout(function(){throw h})}}function t2(s,o,l){try{var h=s.onCaughtError;h(l.value,{componentStack:l.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function Sm(s,o,l){return l=As(l),l.tag=3,l.payload={element:null},l.callback=function(){xd(s,o)},l}function n2(s){return s=As(s),s.tag=3,s}function r2(s,o,l,h){var m=l.type.getDerivedStateFromError;if(typeof m=="function"){var w=h.value;s.payload=function(){return m(w)},s.callback=function(){t2(o,l,h)}}var C=l.stateNode;C!==null&&typeof C.componentDidCatch=="function"&&(s.callback=function(){t2(o,l,h),typeof m!="function"&&(Ps===null?Ps=new Set([this]):Ps.add(this));var M=h.stack;this.componentDidCatch(h.value,{componentStack:M!==null?M:""})})}function A6(s,o,l,h,m){if(l.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(o=l.alternate,o!==null&&Dl(o,l,m,!0),l=Dr.current,l!==null){switch(l.tag){case 13:return li===null?Gm():l.alternate===null&&Ct===0&&(Ct=3),l.flags&=-257,l.flags|=65536,l.lanes=m,h===Zg?l.flags|=16384:(o=l.updateQueue,o===null?l.updateQueue=new Set([h]):o.add(h),Wm(s,h,m)),!1;case 22:return l.flags|=65536,h===Zg?l.flags|=16384:(o=l.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([h])},l.updateQueue=o):(l=o.retryQueue,l===null?o.retryQueue=new Set([h]):l.add(h)),Wm(s,h,m)),!1}throw Error(r(435,l.tag))}return Wm(s,h,m),Gm(),!1}if(Xe)return o=Dr.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=m,h!==Fg&&(s=Error(r(422),{cause:h}),Tl(Ar(s,l)))):(h!==Fg&&(o=Error(r(423),{cause:h}),Tl(Ar(o,l))),s=s.current.alternate,s.flags|=65536,m&=-m,s.lanes|=m,h=Ar(h,l),m=Sm(s.stateNode,h,m),em(s,m),Ct!==4&&(Ct=2)),!1;var w=Error(r(520),{cause:h});if(w=Ar(w,l),Yl===null?Yl=[w]:Yl.push(w),Ct!==4&&(Ct=2),o===null)return!0;h=Ar(h,l),l=o;do{switch(l.tag){case 3:return l.flags|=65536,s=m&-m,l.lanes|=s,s=Sm(l.stateNode,h,s),em(l,s),!1;case 1:if(o=l.type,w=l.stateNode,(l.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Ps===null||!Ps.has(w))))return l.flags|=65536,m&=-m,l.lanes|=m,m=n2(m),r2(m,s,l,h),em(l,m),!1}l=l.return}while(l!==null);return!1}var i2=Error(r(461)),tn=!1;function un(s,o,l,h){o.child=s===null?WE(o,null,l,h):Qa(o,s.child,l,h)}function s2(s,o,l,h,m){l=l.render;var w=o.ref;if("ref"in h){var C={};for(var M in h)M!=="ref"&&(C[M]=h[M])}else C=h;return Co(o),h=sm(s,o,l,C,w,m),M=om(),s!==null&&!tn?(am(s,o,m),Vi(s,o,m)):(Xe&&M&&qg(o),o.flags|=1,un(s,o,h,m),o.child)}function o2(s,o,l,h,m){if(s===null){var w=l.type;return typeof w=="function"&&!jg(w)&&w.defaultProps===void 0&&l.compare===null?(o.tag=15,o.type=w,a2(s,o,w,h,m)):(s=rd(l.type,null,h,o,o.mode,m),s.ref=o.ref,s.return=o,o.child=s)}if(w=s.child,!Cm(s,m)){var C=w.memoizedProps;if(l=l.compare,l=l!==null?l:xl,l(C,h)&&s.ref===o.ref)return Vi(s,o,m)}return o.flags|=1,s=Mi(w,h),s.ref=o.ref,s.return=o,o.child=s}function a2(s,o,l,h,m){if(s!==null){var w=s.memoizedProps;if(xl(w,h)&&s.ref===o.ref)if(tn=!1,o.pendingProps=h=w,Cm(s,m))(s.flags&131072)!==0&&(tn=!0);else return o.lanes=s.lanes,Vi(s,o,m)}return _m(s,o,l,h,m)}function c2(s,o,l){var h=o.pendingProps,m=h.children,w=s!==null?s.memoizedState:null;if(h.mode==="hidden"){if((o.flags&128)!==0){if(h=w!==null?w.baseLanes|l:l,s!==null){for(m=o.child=s.child,w=0;m!==null;)w=w|m.lanes|m.childLanes,m=m.sibling;o.childLanes=w&~h}else o.childLanes=0,o.child=null;return l2(s,o,h,l)}if((l&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},s!==null&&cd(o,w!==null?w.cachePool:null),w!==null?aE(o,w):nm(),YE(o);else return o.lanes=o.childLanes=536870912,l2(s,o,w!==null?w.baseLanes|l:l,l)}else w!==null?(cd(o,w.cachePool),aE(o,w),Ds(),o.memoizedState=null):(s!==null&&cd(o,null),nm(),Ds());return un(s,o,m,l),o.child}function l2(s,o,l,h){var m=Xg();return m=m===null?null:{parent:Gt._currentValue,pool:m},o.memoizedState={baseLanes:l,cachePool:m},s!==null&&cd(o,null),nm(),YE(o),s!==null&&Dl(s,o,h,!0),null}function Ad(s,o){var l=o.ref;if(l===null)s!==null&&s.ref!==null&&(o.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(r(284));(s===null||s.ref!==l)&&(o.flags|=4194816)}}function _m(s,o,l,h,m){return Co(o),l=sm(s,o,l,h,void 0,m),h=om(),s!==null&&!tn?(am(s,o,m),Vi(s,o,m)):(Xe&&h&&qg(o),o.flags|=1,un(s,o,l,m),o.child)}function u2(s,o,l,h,m,w){return Co(o),o.updateQueue=null,l=lE(o,h,l,m),cE(s),h=om(),s!==null&&!tn?(am(s,o,w),Vi(s,o,w)):(Xe&&h&&qg(o),o.flags|=1,un(s,o,l,w),o.child)}function f2(s,o,l,h,m){if(Co(o),o.stateNode===null){var w=qa,C=l.contextType;typeof C=="object"&&C!==null&&(w=An(C)),w=new l(h,w),o.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=Em,o.stateNode=w,w._reactInternals=o,w=o.stateNode,w.props=h,w.state=o.memoizedState,w.refs={},Qg(o),C=l.contextType,w.context=typeof C=="object"&&C!==null?An(C):qa,w.state=o.memoizedState,C=l.getDerivedStateFromProps,typeof C=="function"&&(wm(o,l,C,h),w.state=o.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(C=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),C!==w.state&&Em.enqueueReplaceState(w,w.state,null),Ul(o,h,w,m),Pl(),w.state=o.memoizedState),typeof w.componentDidMount=="function"&&(o.flags|=4194308),h=!0}else if(s===null){w=o.stateNode;var M=o.memoizedProps,Y=$o(l,M);w.props=Y;var ae=w.context,de=l.contextType;C=qa,typeof de=="object"&&de!==null&&(C=An(de));var me=l.getDerivedStateFromProps;de=typeof me=="function"||typeof w.getSnapshotBeforeUpdate=="function",M=o.pendingProps!==M,de||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(M||ae!==C)&&ZE(o,w,h,C),xs=!1;var ce=o.memoizedState;w.state=ce,Ul(o,h,w,m),Pl(),ae=o.memoizedState,M||ce!==ae||xs?(typeof me=="function"&&(wm(o,l,me,h),ae=o.memoizedState),(Y=xs||XE(o,l,Y,h,ce,ae,C))?(de||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(o.flags|=4194308)):(typeof w.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=h,o.memoizedState=ae),w.props=h,w.state=ae,w.context=C,h=Y):(typeof w.componentDidMount=="function"&&(o.flags|=4194308),h=!1)}else{w=o.stateNode,Jg(s,o),C=o.memoizedProps,de=$o(l,C),w.props=de,me=o.pendingProps,ce=w.context,ae=l.contextType,Y=qa,typeof ae=="object"&&ae!==null&&(Y=An(ae)),M=l.getDerivedStateFromProps,(ae=typeof M=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(C!==me||ce!==Y)&&ZE(o,w,h,Y),xs=!1,ce=o.memoizedState,w.state=ce,Ul(o,h,w,m),Pl();var le=o.memoizedState;C!==me||ce!==le||xs||s!==null&&s.dependencies!==null&&od(s.dependencies)?(typeof M=="function"&&(wm(o,l,M,h),le=o.memoizedState),(de=xs||XE(o,l,de,h,ce,le,Y)||s!==null&&s.dependencies!==null&&od(s.dependencies))?(ae||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(h,le,Y),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(h,le,Y)),typeof w.componentDidUpdate=="function"&&(o.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof w.componentDidUpdate!="function"||C===s.memoizedProps&&ce===s.memoizedState||(o.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||C===s.memoizedProps&&ce===s.memoizedState||(o.flags|=1024),o.memoizedProps=h,o.memoizedState=le),w.props=h,w.state=le,w.context=Y,h=de):(typeof w.componentDidUpdate!="function"||C===s.memoizedProps&&ce===s.memoizedState||(o.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||C===s.memoizedProps&&ce===s.memoizedState||(o.flags|=1024),h=!1)}return w=h,Ad(s,o),h=(o.flags&128)!==0,w||h?(w=o.stateNode,l=h&&typeof l.getDerivedStateFromError!="function"?null:w.render(),o.flags|=1,s!==null&&h?(o.child=Qa(o,s.child,null,m),o.child=Qa(o,null,l,m)):un(s,o,l,m),o.memoizedState=w.state,s=o.child):s=Vi(s,o,m),s}function d2(s,o,l,h){return Ol(),o.flags|=256,un(s,o,l,h),o.child}var xm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Am(s){return{baseLanes:s,cachePool:J1()}}function Rm(s,o,l){return s=s!==null?s.childLanes&~l:0,o&&(s|=Cr),s}function h2(s,o,l){var h=o.pendingProps,m=!1,w=(o.flags&128)!==0,C;if((C=w)||(C=s!==null&&s.memoizedState===null?!1:(Kt.current&2)!==0),C&&(m=!0,o.flags&=-129),C=(o.flags&32)!==0,o.flags&=-33,s===null){if(Xe){if(m?Ts(o):Ds(),Xe){var M=Dt,Y;if(Y=M){e:{for(Y=M,M=ci;Y.nodeType!==8;){if(!M){M=null;break e}if(Y=Wr(Y.nextSibling),Y===null){M=null;break e}}M=Y}M!==null?(o.memoizedState={dehydrated:M,treeContext:Ao!==null?{id:ji,overflow:Li}:null,retryLane:536870912,hydrationErrors:null},Y=ar(18,null,null,0),Y.stateNode=M,Y.return=o,o.child=Y,$n=o,Dt=null,Y=!0):Y=!1}Y||To(o)}if(M=o.memoizedState,M!==null&&(M=M.dehydrated,M!==null))return ly(M)?o.lanes=32:o.lanes=536870912,null;Fi(o)}return M=h.children,h=h.fallback,m?(Ds(),m=o.mode,M=Rd({mode:"hidden",children:M},m),h=xo(h,m,l,null),M.return=o,h.return=o,M.sibling=h,o.child=M,m=o.child,m.memoizedState=Am(l),m.childLanes=Rm(s,C,l),o.memoizedState=xm,h):(Ts(o),Om(o,M))}if(Y=s.memoizedState,Y!==null&&(M=Y.dehydrated,M!==null)){if(w)o.flags&256?(Ts(o),o.flags&=-257,o=Tm(s,o,l)):o.memoizedState!==null?(Ds(),o.child=s.child,o.flags|=128,o=null):(Ds(),m=h.fallback,M=o.mode,h=Rd({mode:"visible",children:h.children},M),m=xo(m,M,l,null),m.flags|=2,h.return=o,m.return=o,h.sibling=m,o.child=h,Qa(o,s.child,null,l),h=o.child,h.memoizedState=Am(l),h.childLanes=Rm(s,C,l),o.memoizedState=xm,o=m);else if(Ts(o),ly(M)){if(C=M.nextSibling&&M.nextSibling.dataset,C)var ae=C.dgst;C=ae,h=Error(r(419)),h.stack="",h.digest=C,Tl({value:h,source:null,stack:null}),o=Tm(s,o,l)}else if(tn||Dl(s,o,l,!1),C=(l&s.childLanes)!==0,tn||C){if(C=gt,C!==null&&(h=l&-l,h=(h&42)!==0?1:ug(h),h=(h&(C.suspendedLanes|l))!==0?0:h,h!==0&&h!==Y.retryLane))throw Y.retryLane=h,za(s,h),dr(C,s,h),i2;M.data==="$?"||Gm(),o=Tm(s,o,l)}else M.data==="$?"?(o.flags|=192,o.child=s.child,o=null):(s=Y.treeContext,Dt=Wr(M.nextSibling),$n=o,Xe=!0,Oo=null,ci=!1,s!==null&&(Or[Tr++]=ji,Or[Tr++]=Li,Or[Tr++]=Ao,ji=s.id,Li=s.overflow,Ao=o),o=Om(o,h.children),o.flags|=4096);return o}return m?(Ds(),m=h.fallback,M=o.mode,Y=s.child,ae=Y.sibling,h=Mi(Y,{mode:"hidden",children:h.children}),h.subtreeFlags=Y.subtreeFlags&65011712,ae!==null?m=Mi(ae,m):(m=xo(m,M,l,null),m.flags|=2),m.return=o,h.return=o,h.sibling=m,o.child=h,h=m,m=o.child,M=s.child.memoizedState,M===null?M=Am(l):(Y=M.cachePool,Y!==null?(ae=Gt._currentValue,Y=Y.parent!==ae?{parent:ae,pool:ae}:Y):Y=J1(),M={baseLanes:M.baseLanes|l,cachePool:Y}),m.memoizedState=M,m.childLanes=Rm(s,C,l),o.memoizedState=xm,h):(Ts(o),l=s.child,s=l.sibling,l=Mi(l,{mode:"visible",children:h.children}),l.return=o,l.sibling=null,s!==null&&(C=o.deletions,C===null?(o.deletions=[s],o.flags|=16):C.push(s)),o.child=l,o.memoizedState=null,l)}function Om(s,o){return o=Rd({mode:"visible",children:o},s.mode),o.return=s,s.child=o}function Rd(s,o){return s=ar(22,s,null,o),s.lanes=0,s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},s}function Tm(s,o,l){return Qa(o,s.child,null,l),s=Om(o,o.pendingProps.children),s.flags|=2,o.memoizedState=null,s}function p2(s,o,l){s.lanes|=o;var h=s.alternate;h!==null&&(h.lanes|=o),Gg(s.return,o,l)}function Dm(s,o,l,h,m){var w=s.memoizedState;w===null?s.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:h,tail:l,tailMode:m}:(w.isBackwards=o,w.rendering=null,w.renderingStartTime=0,w.last=h,w.tail=l,w.tailMode=m)}function g2(s,o,l){var h=o.pendingProps,m=h.revealOrder,w=h.tail;if(un(s,o,h.children,l),h=Kt.current,(h&2)!==0)h=h&1|2,o.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=o.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&p2(s,l,o);else if(s.tag===19)p2(s,l,o);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break e;for(;s.sibling===null;){if(s.return===null||s.return===o)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}h&=1}switch(se(Kt,h),m){case"forwards":for(l=o.child,m=null;l!==null;)s=l.alternate,s!==null&&Sd(s)===null&&(m=l),l=l.sibling;l=m,l===null?(m=o.child,o.child=null):(m=l.sibling,l.sibling=null),Dm(o,!1,m,l,w);break;case"backwards":for(l=null,m=o.child,o.child=null;m!==null;){if(s=m.alternate,s!==null&&Sd(s)===null){o.child=m;break}s=m.sibling,m.sibling=l,l=m,m=s}Dm(o,!0,l,null,w);break;case"together":Dm(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function Vi(s,o,l){if(s!==null&&(o.dependencies=s.dependencies),Bs|=o.lanes,(l&o.childLanes)===0)if(s!==null){if(Dl(s,o,l,!1),(l&o.childLanes)===0)return null}else return null;if(s!==null&&o.child!==s.child)throw Error(r(153));if(o.child!==null){for(s=o.child,l=Mi(s,s.pendingProps),o.child=l,l.return=o;s.sibling!==null;)s=s.sibling,l=l.sibling=Mi(s,s.pendingProps),l.return=o;l.sibling=null}return o.child}function Cm(s,o){return(s.lanes&o)!==0?!0:(s=s.dependencies,!!(s!==null&&od(s)))}function R6(s,o,l){switch(o.tag){case 3:ye(o,o.stateNode.containerInfo),_s(o,Gt,s.memoizedState.cache),Ol();break;case 27:case 5:Oe(o);break;case 4:ye(o,o.stateNode.containerInfo);break;case 10:_s(o,o.type,o.memoizedProps.value);break;case 13:var h=o.memoizedState;if(h!==null)return h.dehydrated!==null?(Ts(o),o.flags|=128,null):(l&o.child.childLanes)!==0?h2(s,o,l):(Ts(o),s=Vi(s,o,l),s!==null?s.sibling:null);Ts(o);break;case 19:var m=(s.flags&128)!==0;if(h=(l&o.childLanes)!==0,h||(Dl(s,o,l,!1),h=(l&o.childLanes)!==0),m){if(h)return g2(s,o,l);o.flags|=128}if(m=o.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),se(Kt,Kt.current),h)break;return null;case 22:case 23:return o.lanes=0,c2(s,o,l);case 24:_s(o,Gt,s.memoizedState.cache)}return Vi(s,o,l)}function m2(s,o,l){if(s!==null)if(s.memoizedProps!==o.pendingProps)tn=!0;else{if(!Cm(s,l)&&(o.flags&128)===0)return tn=!1,R6(s,o,l);tn=(s.flags&131072)!==0}else tn=!1,Xe&&(o.flags&1048576)!==0&&G1(o,sd,o.index);switch(o.lanes=0,o.tag){case 16:e:{s=o.pendingProps;var h=o.elementType,m=h._init;if(h=m(h._payload),o.type=h,typeof h=="function")jg(h)?(s=$o(h,s),o.tag=1,o=f2(null,o,h,s,l)):(o.tag=0,o=_m(null,o,h,s,l));else{if(h!=null){if(m=h.$$typeof,m===$){o.tag=11,o=s2(null,o,h,s,l);break e}else if(m===z){o.tag=14,o=o2(null,o,h,s,l);break e}}throw o=ee(h)||h,Error(r(306,o,""))}}return o;case 0:return _m(s,o,o.type,o.pendingProps,l);case 1:return h=o.type,m=$o(h,o.pendingProps),f2(s,o,h,m,l);case 3:e:{if(ye(o,o.stateNode.containerInfo),s===null)throw Error(r(387));h=o.pendingProps;var w=o.memoizedState;m=w.element,Jg(s,o),Ul(o,h,null,l);var C=o.memoizedState;if(h=C.cache,_s(o,Gt,h),h!==w.cache&&Kg(o,[Gt],l,!0),Pl(),h=C.element,w.isDehydrated)if(w={element:h,isDehydrated:!1,cache:C.cache},o.updateQueue.baseState=w,o.memoizedState=w,o.flags&256){o=d2(s,o,h,l);break e}else if(h!==m){m=Ar(Error(r(424)),o),Tl(m),o=d2(s,o,h,l);break e}else{switch(s=o.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(Dt=Wr(s.firstChild),$n=o,Xe=!0,Oo=null,ci=!0,l=WE(o,null,h,l),o.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(Ol(),h===m){o=Vi(s,o,l);break e}un(s,o,h,l)}o=o.child}return o;case 26:return Ad(s,o),s===null?(l=wS(o.type,null,o.pendingProps,null))?o.memoizedState=l:Xe||(l=o.type,s=o.pendingProps,h=Ld(Q.current).createElement(l),h[xn]=o,h[Mn]=s,dn(h,l,s),en(h),o.stateNode=h):o.memoizedState=wS(o.type,s.memoizedProps,o.pendingProps,s.memoizedState),null;case 27:return Oe(o),s===null&&Xe&&(h=o.stateNode=yS(o.type,o.pendingProps,Q.current),$n=o,ci=!0,m=Dt,Ms(o.type)?(uy=m,Dt=Wr(h.firstChild)):Dt=m),un(s,o,o.pendingProps.children,l),Ad(s,o),s===null&&(o.flags|=4194304),o.child;case 5:return s===null&&Xe&&((m=h=Dt)&&(h=e4(h,o.type,o.pendingProps,ci),h!==null?(o.stateNode=h,$n=o,Dt=Wr(h.firstChild),ci=!1,m=!0):m=!1),m||To(o)),Oe(o),m=o.type,w=o.pendingProps,C=s!==null?s.memoizedProps:null,h=w.children,oy(m,w)?h=null:C!==null&&oy(m,C)&&(o.flags|=32),o.memoizedState!==null&&(m=sm(s,o,b6,null,null,l),iu._currentValue=m),Ad(s,o),un(s,o,h,l),o.child;case 6:return s===null&&Xe&&((s=l=Dt)&&(l=t4(l,o.pendingProps,ci),l!==null?(o.stateNode=l,$n=o,Dt=null,s=!0):s=!1),s||To(o)),null;case 13:return h2(s,o,l);case 4:return ye(o,o.stateNode.containerInfo),h=o.pendingProps,s===null?o.child=Qa(o,null,h,l):un(s,o,h,l),o.child;case 11:return s2(s,o,o.type,o.pendingProps,l);case 7:return un(s,o,o.pendingProps,l),o.child;case 8:return un(s,o,o.pendingProps.children,l),o.child;case 12:return un(s,o,o.pendingProps.children,l),o.child;case 10:return h=o.pendingProps,_s(o,o.type,h.value),un(s,o,h.children,l),o.child;case 9:return m=o.type._context,h=o.pendingProps.children,Co(o),m=An(m),h=h(m),o.flags|=1,un(s,o,h,l),o.child;case 14:return o2(s,o,o.type,o.pendingProps,l);case 15:return a2(s,o,o.type,o.pendingProps,l);case 19:return g2(s,o,l);case 31:return h=o.pendingProps,l=o.mode,h={mode:h.mode,children:h.children},s===null?(l=Rd(h,l),l.ref=o.ref,o.child=l,l.return=o,o=l):(l=Mi(s.child,h),l.ref=o.ref,o.child=l,l.return=o,o=l),o;case 22:return c2(s,o,l);case 24:return Co(o),h=An(Gt),s===null?(m=Xg(),m===null&&(m=gt,w=Wg(),m.pooledCache=w,w.refCount++,w!==null&&(m.pooledCacheLanes|=l),m=w),o.memoizedState={parent:h,cache:m},Qg(o),_s(o,Gt,m)):((s.lanes&l)!==0&&(Jg(s,o),Ul(o,null,null,l),Pl()),m=s.memoizedState,w=o.memoizedState,m.parent!==h?(m={parent:h,cache:h},o.memoizedState=m,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=m),_s(o,Gt,h)):(h=w.cache,_s(o,Gt,h),h!==m.cache&&Kg(o,[Gt],l,!0))),un(s,o,o.pendingProps.children,l),o.child;case 29:throw o.pendingProps}throw Error(r(156,o.tag))}function Gi(s){s.flags|=4}function y2(s,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!AS(o)){if(o=Dr.current,o!==null&&((He&4194048)===He?li!==null:(He&62914560)!==He&&(He&536870912)===0||o!==li))throw $l=Zg,eE;s.flags|=8192}}function Od(s,o){o!==null&&(s.flags|=4),s.flags&16384&&(o=s.tag!==22?Yw():536870912,s.lanes|=o,nc|=o)}function Hl(s,o){if(!Xe)switch(s.tailMode){case"hidden":o=s.tail;for(var l=null;o!==null;)o.alternate!==null&&(l=o),o=o.sibling;l===null?s.tail=null:l.sibling=null;break;case"collapsed":l=s.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?o||s.tail===null?s.tail=null:s.tail.sibling=null:h.sibling=null}}function Rt(s){var o=s.alternate!==null&&s.alternate.child===s.child,l=0,h=0;if(o)for(var m=s.child;m!==null;)l|=m.lanes|m.childLanes,h|=m.subtreeFlags&65011712,h|=m.flags&65011712,m.return=s,m=m.sibling;else for(m=s.child;m!==null;)l|=m.lanes|m.childLanes,h|=m.subtreeFlags,h|=m.flags,m.return=s,m=m.sibling;return s.subtreeFlags|=h,s.childLanes=l,o}function O6(s,o,l){var h=o.pendingProps;switch(Hg(o),o.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Rt(o),null;case 1:return Rt(o),null;case 3:return l=o.stateNode,h=null,s!==null&&(h=s.memoizedState.cache),o.memoizedState.cache!==h&&(o.flags|=2048),qi(Gt),_e(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(s===null||s.child===null)&&(Rl(o)?Gi(o):s===null||s.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Y1())),Rt(o),null;case 26:return l=o.memoizedState,s===null?(Gi(o),l!==null?(Rt(o),y2(o,l)):(Rt(o),o.flags&=-16777217)):l?l!==s.memoizedState?(Gi(o),Rt(o),y2(o,l)):(Rt(o),o.flags&=-16777217):(s.memoizedProps!==h&&Gi(o),Rt(o),o.flags&=-16777217),null;case 27:ke(o),l=Q.current;var m=o.type;if(s!==null&&o.stateNode!=null)s.memoizedProps!==h&&Gi(o);else{if(!h){if(o.stateNode===null)throw Error(r(166));return Rt(o),null}s=ie.current,Rl(o)?K1(o):(s=yS(m,h,l),o.stateNode=s,Gi(o))}return Rt(o),null;case 5:if(ke(o),l=o.type,s!==null&&o.stateNode!=null)s.memoizedProps!==h&&Gi(o);else{if(!h){if(o.stateNode===null)throw Error(r(166));return Rt(o),null}if(s=ie.current,Rl(o))K1(o);else{switch(m=Ld(Q.current),s){case 1:s=m.createElementNS("http://www.w3.org/2000/svg",l);break;case 2:s=m.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;default:switch(l){case"svg":s=m.createElementNS("http://www.w3.org/2000/svg",l);break;case"math":s=m.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;case"script":s=m.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof h.is=="string"?m.createElement("select",{is:h.is}):m.createElement("select"),h.multiple?s.multiple=!0:h.size&&(s.size=h.size);break;default:s=typeof h.is=="string"?m.createElement(l,{is:h.is}):m.createElement(l)}}s[xn]=o,s[Mn]=h;e:for(m=o.child;m!==null;){if(m.tag===5||m.tag===6)s.appendChild(m.stateNode);else if(m.tag!==4&&m.tag!==27&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===o)break e;for(;m.sibling===null;){if(m.return===null||m.return===o)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}o.stateNode=s;e:switch(dn(s,l,h),l){case"button":case"input":case"select":case"textarea":s=!!h.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&Gi(o)}}return Rt(o),o.flags&=-16777217,null;case 6:if(s&&o.stateNode!=null)s.memoizedProps!==h&&Gi(o);else{if(typeof h!="string"&&o.stateNode===null)throw Error(r(166));if(s=Q.current,Rl(o)){if(s=o.stateNode,l=o.memoizedProps,h=null,m=$n,m!==null)switch(m.tag){case 27:case 5:h=m.memoizedProps}s[xn]=o,s=!!(s.nodeValue===l||h!==null&&h.suppressHydrationWarning===!0||uS(s.nodeValue,l)),s||To(o)}else s=Ld(s).createTextNode(h),s[xn]=o,o.stateNode=s}return Rt(o),null;case 13:if(h=o.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(m=Rl(o),h!==null&&h.dehydrated!==null){if(s===null){if(!m)throw Error(r(318));if(m=o.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(r(317));m[xn]=o}else Ol(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Rt(o),m=!1}else m=Y1(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=m),m=!0;if(!m)return o.flags&256?(Fi(o),o):(Fi(o),null)}if(Fi(o),(o.flags&128)!==0)return o.lanes=l,o;if(l=h!==null,s=s!==null&&s.memoizedState!==null,l){h=o.child,m=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(m=h.alternate.memoizedState.cachePool.pool);var w=null;h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(w=h.memoizedState.cachePool.pool),w!==m&&(h.flags|=2048)}return l!==s&&l&&(o.child.flags|=8192),Od(o,o.updateQueue),Rt(o),null;case 4:return _e(),s===null&&ty(o.stateNode.containerInfo),Rt(o),null;case 10:return qi(o.type),Rt(o),null;case 19:if(te(Kt),m=o.memoizedState,m===null)return Rt(o),null;if(h=(o.flags&128)!==0,w=m.rendering,w===null)if(h)Hl(m,!1);else{if(Ct!==0||s!==null&&(s.flags&128)!==0)for(s=o.child;s!==null;){if(w=Sd(s),w!==null){for(o.flags|=128,Hl(m,!1),s=w.updateQueue,o.updateQueue=s,Od(o,s),o.subtreeFlags=0,s=l,l=o.child;l!==null;)V1(l,s),l=l.sibling;return se(Kt,Kt.current&1|2),o.child}s=s.sibling}m.tail!==null&&At()>Cd&&(o.flags|=128,h=!0,Hl(m,!1),o.lanes=4194304)}else{if(!h)if(s=Sd(w),s!==null){if(o.flags|=128,h=!0,s=s.updateQueue,o.updateQueue=s,Od(o,s),Hl(m,!0),m.tail===null&&m.tailMode==="hidden"&&!w.alternate&&!Xe)return Rt(o),null}else 2*At()-m.renderingStartTime>Cd&&l!==536870912&&(o.flags|=128,h=!0,Hl(m,!1),o.lanes=4194304);m.isBackwards?(w.sibling=o.child,o.child=w):(s=m.last,s!==null?s.sibling=w:o.child=w,m.last=w)}return m.tail!==null?(o=m.tail,m.rendering=o,m.tail=o.sibling,m.renderingStartTime=At(),o.sibling=null,s=Kt.current,se(Kt,h?s&1|2:s&1),o):(Rt(o),null);case 22:case 23:return Fi(o),rm(),h=o.memoizedState!==null,s!==null?s.memoizedState!==null!==h&&(o.flags|=8192):h&&(o.flags|=8192),h?(l&536870912)!==0&&(o.flags&128)===0&&(Rt(o),o.subtreeFlags&6&&(o.flags|=8192)):Rt(o),l=o.updateQueue,l!==null&&Od(o,l.retryQueue),l=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),h=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(h=o.memoizedState.cachePool.pool),h!==l&&(o.flags|=2048),s!==null&&te(Io),null;case 24:return l=null,s!==null&&(l=s.memoizedState.cache),o.memoizedState.cache!==l&&(o.flags|=2048),qi(Gt),Rt(o),null;case 25:return null;case 30:return null}throw Error(r(156,o.tag))}function T6(s,o){switch(Hg(o),o.tag){case 1:return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 3:return qi(Gt),_e(),s=o.flags,(s&65536)!==0&&(s&128)===0?(o.flags=s&-65537|128,o):null;case 26:case 27:case 5:return ke(o),null;case 13:if(Fi(o),s=o.memoizedState,s!==null&&s.dehydrated!==null){if(o.alternate===null)throw Error(r(340));Ol()}return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 19:return te(Kt),null;case 4:return _e(),null;case 10:return qi(o.type),null;case 22:case 23:return Fi(o),rm(),s!==null&&te(Io),s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 24:return qi(Gt),null;case 25:return null;default:return null}}function b2(s,o){switch(Hg(o),o.tag){case 3:qi(Gt),_e();break;case 26:case 27:case 5:ke(o);break;case 4:_e();break;case 13:Fi(o);break;case 19:te(Kt);break;case 10:qi(o.type);break;case 22:case 23:Fi(o),rm(),s!==null&&te(Io);break;case 24:qi(Gt)}}function Fl(s,o){try{var l=o.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var m=h.next;l=m;do{if((l.tag&s)===s){h=void 0;var w=l.create,C=l.inst;h=w(),C.destroy=h}l=l.next}while(l!==m)}}catch(M){lt(o,o.return,M)}}function Cs(s,o,l){try{var h=o.updateQueue,m=h!==null?h.lastEffect:null;if(m!==null){var w=m.next;h=w;do{if((h.tag&s)===s){var C=h.inst,M=C.destroy;if(M!==void 0){C.destroy=void 0,m=o;var Y=l,ae=M;try{ae()}catch(de){lt(m,Y,de)}}}h=h.next}while(h!==w)}}catch(de){lt(o,o.return,de)}}function v2(s){var o=s.updateQueue;if(o!==null){var l=s.stateNode;try{oE(o,l)}catch(h){lt(s,s.return,h)}}}function w2(s,o,l){l.props=$o(s.type,s.memoizedProps),l.state=s.memoizedState;try{l.componentWillUnmount()}catch(h){lt(s,o,h)}}function Vl(s,o){try{var l=s.ref;if(l!==null){switch(s.tag){case 26:case 27:case 5:var h=s.stateNode;break;case 30:h=s.stateNode;break;default:h=s.stateNode}typeof l=="function"?s.refCleanup=l(h):l.current=h}}catch(m){lt(s,o,m)}}function ui(s,o){var l=s.ref,h=s.refCleanup;if(l!==null)if(typeof h=="function")try{h()}catch(m){lt(s,o,m)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(m){lt(s,o,m)}else l.current=null}function E2(s){var o=s.type,l=s.memoizedProps,h=s.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":l.autoFocus&&h.focus();break e;case"img":l.src?h.src=l.src:l.srcSet&&(h.srcset=l.srcSet)}}catch(m){lt(s,s.return,m)}}function Im(s,o,l){try{var h=s.stateNode;Y6(h,s.type,l,o),h[Mn]=o}catch(m){lt(s,s.return,m)}}function S2(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&Ms(s.type)||s.tag===4}function Nm(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||S2(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&Ms(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function $m(s,o,l){var h=s.tag;if(h===5||h===6)s=s.stateNode,o?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(s,o):(o=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,o.appendChild(s),l=l._reactRootContainer,l!=null||o.onclick!==null||(o.onclick=jd));else if(h!==4&&(h===27&&Ms(s.type)&&(l=s.stateNode,o=null),s=s.child,s!==null))for($m(s,o,l),s=s.sibling;s!==null;)$m(s,o,l),s=s.sibling}function Td(s,o,l){var h=s.tag;if(h===5||h===6)s=s.stateNode,o?l.insertBefore(s,o):l.appendChild(s);else if(h!==4&&(h===27&&Ms(s.type)&&(l=s.stateNode),s=s.child,s!==null))for(Td(s,o,l),s=s.sibling;s!==null;)Td(s,o,l),s=s.sibling}function _2(s){var o=s.stateNode,l=s.memoizedProps;try{for(var h=s.type,m=o.attributes;m.length;)o.removeAttributeNode(m[0]);dn(o,h,l),o[xn]=s,o[Mn]=l}catch(w){lt(s,s.return,w)}}var Ki=!1,Ut=!1,Bm=!1,x2=typeof WeakSet=="function"?WeakSet:Set,nn=null;function D6(s,o){if(s=s.containerInfo,iy=Gd,s=P1(s),Ng(s)){if("selectionStart"in s)var l={start:s.selectionStart,end:s.selectionEnd};else e:{l=(l=s.ownerDocument)&&l.defaultView||window;var h=l.getSelection&&l.getSelection();if(h&&h.rangeCount!==0){l=h.anchorNode;var m=h.anchorOffset,w=h.focusNode;h=h.focusOffset;try{l.nodeType,w.nodeType}catch{l=null;break e}var C=0,M=-1,Y=-1,ae=0,de=0,me=s,ce=null;t:for(;;){for(var le;me!==l||m!==0&&me.nodeType!==3||(M=C+m),me!==w||h!==0&&me.nodeType!==3||(Y=C+h),me.nodeType===3&&(C+=me.nodeValue.length),(le=me.firstChild)!==null;)ce=me,me=le;for(;;){if(me===s)break t;if(ce===l&&++ae===m&&(M=C),ce===w&&++de===h&&(Y=C),(le=me.nextSibling)!==null)break;me=ce,ce=me.parentNode}me=le}l=M===-1||Y===-1?null:{start:M,end:Y}}else l=null}l=l||{start:0,end:0}}else l=null;for(sy={focusedElem:s,selectionRange:l},Gd=!1,nn=o;nn!==null;)if(o=nn,s=o.child,(o.subtreeFlags&1024)!==0&&s!==null)s.return=o,nn=s;else for(;nn!==null;){switch(o=nn,w=o.alternate,s=o.flags,o.tag){case 0:break;case 11:case 15:break;case 1:if((s&1024)!==0&&w!==null){s=void 0,l=o,m=w.memoizedProps,w=w.memoizedState,h=l.stateNode;try{var Ce=$o(l.type,m,l.elementType===l.type);s=h.getSnapshotBeforeUpdate(Ce,w),h.__reactInternalSnapshotBeforeUpdate=s}catch(Te){lt(l,l.return,Te)}}break;case 3:if((s&1024)!==0){if(s=o.stateNode.containerInfo,l=s.nodeType,l===9)cy(s);else if(l===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":cy(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(r(163))}if(s=o.sibling,s!==null){s.return=o.return,nn=s;break}nn=o.return}}function A2(s,o,l){var h=l.flags;switch(l.tag){case 0:case 11:case 15:Is(s,l),h&4&&Fl(5,l);break;case 1:if(Is(s,l),h&4)if(s=l.stateNode,o===null)try{s.componentDidMount()}catch(C){lt(l,l.return,C)}else{var m=$o(l.type,o.memoizedProps);o=o.memoizedState;try{s.componentDidUpdate(m,o,s.__reactInternalSnapshotBeforeUpdate)}catch(C){lt(l,l.return,C)}}h&64&&v2(l),h&512&&Vl(l,l.return);break;case 3:if(Is(s,l),h&64&&(s=l.updateQueue,s!==null)){if(o=null,l.child!==null)switch(l.child.tag){case 27:case 5:o=l.child.stateNode;break;case 1:o=l.child.stateNode}try{oE(s,o)}catch(C){lt(l,l.return,C)}}break;case 27:o===null&&h&4&&_2(l);case 26:case 5:Is(s,l),o===null&&h&4&&E2(l),h&512&&Vl(l,l.return);break;case 12:Is(s,l);break;case 13:Is(s,l),h&4&&T2(s,l),h&64&&(s=l.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(l=M6.bind(null,l),n4(s,l))));break;case 22:if(h=l.memoizedState!==null||Ki,!h){o=o!==null&&o.memoizedState!==null||Ut,m=Ki;var w=Ut;Ki=h,(Ut=o)&&!w?Ns(s,l,(l.subtreeFlags&8772)!==0):Is(s,l),Ki=m,Ut=w}break;case 30:break;default:Is(s,l)}}function R2(s){var o=s.alternate;o!==null&&(s.alternate=null,R2(o)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(o=s.stateNode,o!==null&&hg(o)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var St=null,zn=!1;function Wi(s,o,l){for(l=l.child;l!==null;)O2(s,o,l),l=l.sibling}function O2(s,o,l){if(U&&typeof U.onCommitFiberUnmount=="function")try{U.onCommitFiberUnmount(sr,l)}catch{}switch(l.tag){case 26:Ut||ui(l,o),Wi(s,o,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:Ut||ui(l,o);var h=St,m=zn;Ms(l.type)&&(St=l.stateNode,zn=!1),Wi(s,o,l),eu(l.stateNode),St=h,zn=m;break;case 5:Ut||ui(l,o);case 6:if(h=St,m=zn,St=null,Wi(s,o,l),St=h,zn=m,St!==null)if(zn)try{(St.nodeType===9?St.body:St.nodeName==="HTML"?St.ownerDocument.body:St).removeChild(l.stateNode)}catch(w){lt(l,o,w)}else try{St.removeChild(l.stateNode)}catch(w){lt(l,o,w)}break;case 18:St!==null&&(zn?(s=St,gS(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,l.stateNode),cu(s)):gS(St,l.stateNode));break;case 4:h=St,m=zn,St=l.stateNode.containerInfo,zn=!0,Wi(s,o,l),St=h,zn=m;break;case 0:case 11:case 14:case 15:Ut||Cs(2,l,o),Ut||Cs(4,l,o),Wi(s,o,l);break;case 1:Ut||(ui(l,o),h=l.stateNode,typeof h.componentWillUnmount=="function"&&w2(l,o,h)),Wi(s,o,l);break;case 21:Wi(s,o,l);break;case 22:Ut=(h=Ut)||l.memoizedState!==null,Wi(s,o,l),Ut=h;break;default:Wi(s,o,l)}}function T2(s,o){if(o.memoizedState===null&&(s=o.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{cu(s)}catch(l){lt(o,o.return,l)}}function C6(s){switch(s.tag){case 13:case 19:var o=s.stateNode;return o===null&&(o=s.stateNode=new x2),o;case 22:return s=s.stateNode,o=s._retryCache,o===null&&(o=s._retryCache=new x2),o;default:throw Error(r(435,s.tag))}}function Pm(s,o){var l=C6(s);o.forEach(function(h){var m=j6.bind(null,s,h);l.has(h)||(l.add(h),h.then(m,m))})}function cr(s,o){var l=o.deletions;if(l!==null)for(var h=0;h<l.length;h++){var m=l[h],w=s,C=o,M=C;e:for(;M!==null;){switch(M.tag){case 27:if(Ms(M.type)){St=M.stateNode,zn=!1;break e}break;case 5:St=M.stateNode,zn=!1;break e;case 3:case 4:St=M.stateNode.containerInfo,zn=!0;break e}M=M.return}if(St===null)throw Error(r(160));O2(w,C,m),St=null,zn=!1,w=m.alternate,w!==null&&(w.return=null),m.return=null}if(o.subtreeFlags&13878)for(o=o.child;o!==null;)D2(o,s),o=o.sibling}var Kr=null;function D2(s,o){var l=s.alternate,h=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:cr(o,s),lr(s),h&4&&(Cs(3,s,s.return),Fl(3,s),Cs(5,s,s.return));break;case 1:cr(o,s),lr(s),h&512&&(Ut||l===null||ui(l,l.return)),h&64&&Ki&&(s=s.updateQueue,s!==null&&(h=s.callbacks,h!==null&&(l=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=l===null?h:l.concat(h))));break;case 26:var m=Kr;if(cr(o,s),lr(s),h&512&&(Ut||l===null||ui(l,l.return)),h&4){var w=l!==null?l.memoizedState:null;if(h=s.memoizedState,l===null)if(h===null)if(s.stateNode===null){e:{h=s.type,l=s.memoizedProps,m=m.ownerDocument||m;t:switch(h){case"title":w=m.getElementsByTagName("title")[0],(!w||w[gl]||w[xn]||w.namespaceURI==="http://www.w3.org/2000/svg"||w.hasAttribute("itemprop"))&&(w=m.createElement(h),m.head.insertBefore(w,m.querySelector("head > title"))),dn(w,h,l),w[xn]=s,en(w),h=w;break e;case"link":var C=_S("link","href",m).get(h+(l.href||""));if(C){for(var M=0;M<C.length;M++)if(w=C[M],w.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&w.getAttribute("rel")===(l.rel==null?null:l.rel)&&w.getAttribute("title")===(l.title==null?null:l.title)&&w.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){C.splice(M,1);break t}}w=m.createElement(h),dn(w,h,l),m.head.appendChild(w);break;case"meta":if(C=_S("meta","content",m).get(h+(l.content||""))){for(M=0;M<C.length;M++)if(w=C[M],w.getAttribute("content")===(l.content==null?null:""+l.content)&&w.getAttribute("name")===(l.name==null?null:l.name)&&w.getAttribute("property")===(l.property==null?null:l.property)&&w.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&w.getAttribute("charset")===(l.charSet==null?null:l.charSet)){C.splice(M,1);break t}}w=m.createElement(h),dn(w,h,l),m.head.appendChild(w);break;default:throw Error(r(468,h))}w[xn]=s,en(w),h=w}s.stateNode=h}else xS(m,s.type,s.stateNode);else s.stateNode=SS(m,h,s.memoizedProps);else w!==h?(w===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):w.count--,h===null?xS(m,s.type,s.stateNode):SS(m,h,s.memoizedProps)):h===null&&s.stateNode!==null&&Im(s,s.memoizedProps,l.memoizedProps)}break;case 27:cr(o,s),lr(s),h&512&&(Ut||l===null||ui(l,l.return)),l!==null&&h&4&&Im(s,s.memoizedProps,l.memoizedProps);break;case 5:if(cr(o,s),lr(s),h&512&&(Ut||l===null||ui(l,l.return)),s.flags&32){m=s.stateNode;try{Ba(m,"")}catch(le){lt(s,s.return,le)}}h&4&&s.stateNode!=null&&(m=s.memoizedProps,Im(s,m,l!==null?l.memoizedProps:m)),h&1024&&(Bm=!0);break;case 6:if(cr(o,s),lr(s),h&4){if(s.stateNode===null)throw Error(r(162));h=s.memoizedProps,l=s.stateNode;try{l.nodeValue=h}catch(le){lt(s,s.return,le)}}break;case 3:if(Hd=null,m=Kr,Kr=zd(o.containerInfo),cr(o,s),Kr=m,lr(s),h&4&&l!==null&&l.memoizedState.isDehydrated)try{cu(o.containerInfo)}catch(le){lt(s,s.return,le)}Bm&&(Bm=!1,C2(s));break;case 4:h=Kr,Kr=zd(s.stateNode.containerInfo),cr(o,s),lr(s),Kr=h;break;case 12:cr(o,s),lr(s);break;case 13:cr(o,s),lr(s),s.child.flags&8192&&s.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(zm=At()),h&4&&(h=s.updateQueue,h!==null&&(s.updateQueue=null,Pm(s,h)));break;case 22:m=s.memoizedState!==null;var Y=l!==null&&l.memoizedState!==null,ae=Ki,de=Ut;if(Ki=ae||m,Ut=de||Y,cr(o,s),Ut=de,Ki=ae,lr(s),h&8192)e:for(o=s.stateNode,o._visibility=m?o._visibility&-2:o._visibility|1,m&&(l===null||Y||Ki||Ut||Bo(s)),l=null,o=s;;){if(o.tag===5||o.tag===26){if(l===null){Y=l=o;try{if(w=Y.stateNode,m)C=w.style,typeof C.setProperty=="function"?C.setProperty("display","none","important"):C.display="none";else{M=Y.stateNode;var me=Y.memoizedProps.style,ce=me!=null&&me.hasOwnProperty("display")?me.display:null;M.style.display=ce==null||typeof ce=="boolean"?"":(""+ce).trim()}}catch(le){lt(Y,Y.return,le)}}}else if(o.tag===6){if(l===null){Y=o;try{Y.stateNode.nodeValue=m?"":Y.memoizedProps}catch(le){lt(Y,Y.return,le)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===s)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break e;for(;o.sibling===null;){if(o.return===null||o.return===s)break e;l===o&&(l=null),o=o.return}l===o&&(l=null),o.sibling.return=o.return,o=o.sibling}h&4&&(h=s.updateQueue,h!==null&&(l=h.retryQueue,l!==null&&(h.retryQueue=null,Pm(s,l))));break;case 19:cr(o,s),lr(s),h&4&&(h=s.updateQueue,h!==null&&(s.updateQueue=null,Pm(s,h)));break;case 30:break;case 21:break;default:cr(o,s),lr(s)}}function lr(s){var o=s.flags;if(o&2){try{for(var l,h=s.return;h!==null;){if(S2(h)){l=h;break}h=h.return}if(l==null)throw Error(r(160));switch(l.tag){case 27:var m=l.stateNode,w=Nm(s);Td(s,w,m);break;case 5:var C=l.stateNode;l.flags&32&&(Ba(C,""),l.flags&=-33);var M=Nm(s);Td(s,M,C);break;case 3:case 4:var Y=l.stateNode.containerInfo,ae=Nm(s);$m(s,ae,Y);break;default:throw Error(r(161))}}catch(de){lt(s,s.return,de)}s.flags&=-3}o&4096&&(s.flags&=-4097)}function C2(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var o=s;C2(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),s=s.sibling}}function Is(s,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)A2(s,o.alternate,o),o=o.sibling}function Bo(s){for(s=s.child;s!==null;){var o=s;switch(o.tag){case 0:case 11:case 14:case 15:Cs(4,o,o.return),Bo(o);break;case 1:ui(o,o.return);var l=o.stateNode;typeof l.componentWillUnmount=="function"&&w2(o,o.return,l),Bo(o);break;case 27:eu(o.stateNode);case 26:case 5:ui(o,o.return),Bo(o);break;case 22:o.memoizedState===null&&Bo(o);break;case 30:Bo(o);break;default:Bo(o)}s=s.sibling}}function Ns(s,o,l){for(l=l&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var h=o.alternate,m=s,w=o,C=w.flags;switch(w.tag){case 0:case 11:case 15:Ns(m,w,l),Fl(4,w);break;case 1:if(Ns(m,w,l),h=w,m=h.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(ae){lt(h,h.return,ae)}if(h=w,m=h.updateQueue,m!==null){var M=h.stateNode;try{var Y=m.shared.hiddenCallbacks;if(Y!==null)for(m.shared.hiddenCallbacks=null,m=0;m<Y.length;m++)sE(Y[m],M)}catch(ae){lt(h,h.return,ae)}}l&&C&64&&v2(w),Vl(w,w.return);break;case 27:_2(w);case 26:case 5:Ns(m,w,l),l&&h===null&&C&4&&E2(w),Vl(w,w.return);break;case 12:Ns(m,w,l);break;case 13:Ns(m,w,l),l&&C&4&&T2(m,w);break;case 22:w.memoizedState===null&&Ns(m,w,l),Vl(w,w.return);break;case 30:break;default:Ns(m,w,l)}o=o.sibling}}function Um(s,o){var l=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),s=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(s=o.memoizedState.cachePool.pool),s!==l&&(s!=null&&s.refCount++,l!=null&&Cl(l))}function km(s,o){s=null,o.alternate!==null&&(s=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==s&&(o.refCount++,s!=null&&Cl(s))}function fi(s,o,l,h){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)I2(s,o,l,h),o=o.sibling}function I2(s,o,l,h){var m=o.flags;switch(o.tag){case 0:case 11:case 15:fi(s,o,l,h),m&2048&&Fl(9,o);break;case 1:fi(s,o,l,h);break;case 3:fi(s,o,l,h),m&2048&&(s=null,o.alternate!==null&&(s=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==s&&(o.refCount++,s!=null&&Cl(s)));break;case 12:if(m&2048){fi(s,o,l,h),s=o.stateNode;try{var w=o.memoizedProps,C=w.id,M=w.onPostCommit;typeof M=="function"&&M(C,o.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(Y){lt(o,o.return,Y)}}else fi(s,o,l,h);break;case 13:fi(s,o,l,h);break;case 23:break;case 22:w=o.stateNode,C=o.alternate,o.memoizedState!==null?w._visibility&2?fi(s,o,l,h):Gl(s,o):w._visibility&2?fi(s,o,l,h):(w._visibility|=2,Ja(s,o,l,h,(o.subtreeFlags&10256)!==0)),m&2048&&Um(C,o);break;case 24:fi(s,o,l,h),m&2048&&km(o.alternate,o);break;default:fi(s,o,l,h)}}function Ja(s,o,l,h,m){for(m=m&&(o.subtreeFlags&10256)!==0,o=o.child;o!==null;){var w=s,C=o,M=l,Y=h,ae=C.flags;switch(C.tag){case 0:case 11:case 15:Ja(w,C,M,Y,m),Fl(8,C);break;case 23:break;case 22:var de=C.stateNode;C.memoizedState!==null?de._visibility&2?Ja(w,C,M,Y,m):Gl(w,C):(de._visibility|=2,Ja(w,C,M,Y,m)),m&&ae&2048&&Um(C.alternate,C);break;case 24:Ja(w,C,M,Y,m),m&&ae&2048&&km(C.alternate,C);break;default:Ja(w,C,M,Y,m)}o=o.sibling}}function Gl(s,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var l=s,h=o,m=h.flags;switch(h.tag){case 22:Gl(l,h),m&2048&&Um(h.alternate,h);break;case 24:Gl(l,h),m&2048&&km(h.alternate,h);break;default:Gl(l,h)}o=o.sibling}}var Kl=8192;function ec(s){if(s.subtreeFlags&Kl)for(s=s.child;s!==null;)N2(s),s=s.sibling}function N2(s){switch(s.tag){case 26:ec(s),s.flags&Kl&&s.memoizedState!==null&&g4(Kr,s.memoizedState,s.memoizedProps);break;case 5:ec(s);break;case 3:case 4:var o=Kr;Kr=zd(s.stateNode.containerInfo),ec(s),Kr=o;break;case 22:s.memoizedState===null&&(o=s.alternate,o!==null&&o.memoizedState!==null?(o=Kl,Kl=16777216,ec(s),Kl=o):ec(s));break;default:ec(s)}}function $2(s){var o=s.alternate;if(o!==null&&(s=o.child,s!==null)){o.child=null;do o=s.sibling,s.sibling=null,s=o;while(s!==null)}}function Wl(s){var o=s.deletions;if((s.flags&16)!==0){if(o!==null)for(var l=0;l<o.length;l++){var h=o[l];nn=h,P2(h,s)}$2(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)B2(s),s=s.sibling}function B2(s){switch(s.tag){case 0:case 11:case 15:Wl(s),s.flags&2048&&Cs(9,s,s.return);break;case 3:Wl(s);break;case 12:Wl(s);break;case 22:var o=s.stateNode;s.memoizedState!==null&&o._visibility&2&&(s.return===null||s.return.tag!==13)?(o._visibility&=-3,Dd(s)):Wl(s);break;default:Wl(s)}}function Dd(s){var o=s.deletions;if((s.flags&16)!==0){if(o!==null)for(var l=0;l<o.length;l++){var h=o[l];nn=h,P2(h,s)}$2(s)}for(s=s.child;s!==null;){switch(o=s,o.tag){case 0:case 11:case 15:Cs(8,o,o.return),Dd(o);break;case 22:l=o.stateNode,l._visibility&2&&(l._visibility&=-3,Dd(o));break;default:Dd(o)}s=s.sibling}}function P2(s,o){for(;nn!==null;){var l=nn;switch(l.tag){case 0:case 11:case 15:Cs(8,l,o);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var h=l.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:Cl(l.memoizedState.cache)}if(h=l.child,h!==null)h.return=l,nn=h;else e:for(l=s;nn!==null;){h=nn;var m=h.sibling,w=h.return;if(R2(h),h===l){nn=null;break e}if(m!==null){m.return=w,nn=m;break e}nn=w}}}var I6={getCacheForType:function(s){var o=An(Gt),l=o.data.get(s);return l===void 0&&(l=s(),o.data.set(s,l)),l}},N6=typeof WeakMap=="function"?WeakMap:Map,tt=0,gt=null,Me=null,He=0,nt=0,ur=null,$s=!1,tc=!1,Mm=!1,Yi=0,Ct=0,Bs=0,Po=0,jm=0,Cr=0,nc=0,Yl=null,qn=null,Lm=!1,zm=0,Cd=1/0,Id=null,Ps=null,fn=0,Us=null,rc=null,ic=0,qm=0,Hm=null,U2=null,Xl=0,Fm=null;function fr(){if((tt&2)!==0&&He!==0)return He&-He;if(R.T!==null){var s=Va;return s!==0?s:Zm()}return Qw()}function k2(){Cr===0&&(Cr=(He&536870912)===0||Xe?Ww():536870912);var s=Dr.current;return s!==null&&(s.flags|=32),Cr}function dr(s,o,l){(s===gt&&(nt===2||nt===9)||s.cancelPendingCommit!==null)&&(sc(s,0),ks(s,He,Cr,!1)),pl(s,l),((tt&2)===0||s!==gt)&&(s===gt&&((tt&2)===0&&(Po|=l),Ct===4&&ks(s,He,Cr,!1)),di(s))}function M2(s,o,l){if((tt&6)!==0)throw Error(r(327));var h=!l&&(o&124)===0&&(o&s.expiredLanes)===0||st(s,o),m=h?P6(s,o):Km(s,o,!0),w=h;do{if(m===0){tc&&!h&&ks(s,o,0,!1);break}else{if(l=s.current.alternate,w&&!$6(l)){m=Km(s,o,!1),w=!1;continue}if(m===2){if(w=o,s.errorRecoveryDisabledLanes&w)var C=0;else C=s.pendingLanes&-536870913,C=C!==0?C:C&536870912?536870912:0;if(C!==0){o=C;e:{var M=s;m=Yl;var Y=M.current.memoizedState.isDehydrated;if(Y&&(sc(M,C).flags|=256),C=Km(M,C,!1),C!==2){if(Mm&&!Y){M.errorRecoveryDisabledLanes|=w,Po|=w,m=4;break e}w=qn,qn=m,w!==null&&(qn===null?qn=w:qn.push.apply(qn,w))}m=C}if(w=!1,m!==2)continue}}if(m===1){sc(s,0),ks(s,o,0,!0);break}e:{switch(h=s,w=m,w){case 0:case 1:throw Error(r(345));case 4:if((o&4194048)!==o)break;case 6:ks(h,o,Cr,!$s);break e;case 2:qn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((o&62914560)===o&&(m=zm+300-At(),10<m)){if(ks(h,o,Cr,!$s),Je(h,0,!0)!==0)break e;h.timeoutHandle=hS(j2.bind(null,h,l,qn,Id,Lm,o,Cr,Po,nc,$s,w,2,-0,0),m);break e}j2(h,l,qn,Id,Lm,o,Cr,Po,nc,$s,w,0,-0,0)}}break}while(!0);di(s)}function j2(s,o,l,h,m,w,C,M,Y,ae,de,me,ce,le){if(s.timeoutHandle=-1,me=o.subtreeFlags,(me&8192||(me&16785408)===16785408)&&(ru={stylesheets:null,count:0,unsuspend:p4},N2(o),me=m4(),me!==null)){s.cancelPendingCommit=me(G2.bind(null,s,o,w,l,h,m,C,M,Y,de,1,ce,le)),ks(s,w,C,!ae);return}G2(s,o,w,l,h,m,C,M,Y)}function $6(s){for(var o=s;;){var l=o.tag;if((l===0||l===11||l===15)&&o.flags&16384&&(l=o.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var h=0;h<l.length;h++){var m=l[h],w=m.getSnapshot;m=m.value;try{if(!or(w(),m))return!1}catch{return!1}}if(l=o.child,o.subtreeFlags&16384&&l!==null)l.return=o,o=l;else{if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function ks(s,o,l,h){o&=~jm,o&=~Po,s.suspendedLanes|=o,s.pingedLanes&=~o,h&&(s.warmLanes|=o),h=s.expirationTimes;for(var m=o;0<m;){var w=31-A(m),C=1<<w;h[w]=-1,m&=~C}l!==0&&Xw(s,l,o)}function Nd(){return(tt&6)===0?(Zl(0),!1):!0}function Vm(){if(Me!==null){if(nt===0)var s=Me.return;else s=Me,zi=Do=null,cm(s),Za=null,zl=0,s=Me;for(;s!==null;)b2(s.alternate,s),s=s.return;Me=null}}function sc(s,o){var l=s.timeoutHandle;l!==-1&&(s.timeoutHandle=-1,Z6(l)),l=s.cancelPendingCommit,l!==null&&(s.cancelPendingCommit=null,l()),Vm(),gt=s,Me=l=Mi(s.current,null),He=o,nt=0,ur=null,$s=!1,tc=st(s,o),Mm=!1,nc=Cr=jm=Po=Bs=Ct=0,qn=Yl=null,Lm=!1,(o&8)!==0&&(o|=o&32);var h=s.entangledLanes;if(h!==0)for(s=s.entanglements,h&=o;0<h;){var m=31-A(h),w=1<<m;o|=s[m],h&=~w}return Yi=o,ed(),l}function L2(s,o){Pe=null,R.H=vd,o===Nl||o===ld?(o=rE(),nt=3):o===eE?(o=rE(),nt=4):nt=o===i2?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,ur=o,Me===null&&(Ct=1,xd(s,Ar(o,s.current)))}function z2(){var s=R.H;return R.H=vd,s===null?vd:s}function q2(){var s=R.A;return R.A=I6,s}function Gm(){Ct=4,$s||(He&4194048)!==He&&Dr.current!==null||(tc=!0),(Bs&134217727)===0&&(Po&134217727)===0||gt===null||ks(gt,He,Cr,!1)}function Km(s,o,l){var h=tt;tt|=2;var m=z2(),w=q2();(gt!==s||He!==o)&&(Id=null,sc(s,o)),o=!1;var C=Ct;e:do try{if(nt!==0&&Me!==null){var M=Me,Y=ur;switch(nt){case 8:Vm(),C=6;break e;case 3:case 2:case 9:case 6:Dr.current===null&&(o=!0);var ae=nt;if(nt=0,ur=null,oc(s,M,Y,ae),l&&tc){C=0;break e}break;default:ae=nt,nt=0,ur=null,oc(s,M,Y,ae)}}B6(),C=Ct;break}catch(de){L2(s,de)}while(!0);return o&&s.shellSuspendCounter++,zi=Do=null,tt=h,R.H=m,R.A=w,Me===null&&(gt=null,He=0,ed()),C}function B6(){for(;Me!==null;)H2(Me)}function P6(s,o){var l=tt;tt|=2;var h=z2(),m=q2();gt!==s||He!==o?(Id=null,Cd=At()+500,sc(s,o)):tc=st(s,o);e:do try{if(nt!==0&&Me!==null){o=Me;var w=ur;t:switch(nt){case 1:nt=0,ur=null,oc(s,o,w,1);break;case 2:case 9:if(tE(w)){nt=0,ur=null,F2(o);break}o=function(){nt!==2&&nt!==9||gt!==s||(nt=7),di(s)},w.then(o,o);break e;case 3:nt=7;break e;case 4:nt=5;break e;case 7:tE(w)?(nt=0,ur=null,F2(o)):(nt=0,ur=null,oc(s,o,w,7));break;case 5:var C=null;switch(Me.tag){case 26:C=Me.memoizedState;case 5:case 27:var M=Me;if(!C||AS(C)){nt=0,ur=null;var Y=M.sibling;if(Y!==null)Me=Y;else{var ae=M.return;ae!==null?(Me=ae,$d(ae)):Me=null}break t}}nt=0,ur=null,oc(s,o,w,5);break;case 6:nt=0,ur=null,oc(s,o,w,6);break;case 8:Vm(),Ct=6;break e;default:throw Error(r(462))}}U6();break}catch(de){L2(s,de)}while(!0);return zi=Do=null,R.H=h,R.A=m,tt=l,Me!==null?0:(gt=null,He=0,ed(),Ct)}function U6(){for(;Me!==null&&!Ye();)H2(Me)}function H2(s){var o=m2(s.alternate,s,Yi);s.memoizedProps=s.pendingProps,o===null?$d(s):Me=o}function F2(s){var o=s,l=o.alternate;switch(o.tag){case 15:case 0:o=u2(l,o,o.pendingProps,o.type,void 0,He);break;case 11:o=u2(l,o,o.pendingProps,o.type.render,o.ref,He);break;case 5:cm(o);default:b2(l,o),o=Me=V1(o,Yi),o=m2(l,o,Yi)}s.memoizedProps=s.pendingProps,o===null?$d(s):Me=o}function oc(s,o,l,h){zi=Do=null,cm(o),Za=null,zl=0;var m=o.return;try{if(A6(s,m,o,l,He)){Ct=1,xd(s,Ar(l,s.current)),Me=null;return}}catch(w){if(m!==null)throw Me=m,w;Ct=1,xd(s,Ar(l,s.current)),Me=null;return}o.flags&32768?(Xe||h===1?s=!0:tc||(He&536870912)!==0?s=!1:($s=s=!0,(h===2||h===9||h===3||h===6)&&(h=Dr.current,h!==null&&h.tag===13&&(h.flags|=16384))),V2(o,s)):$d(o)}function $d(s){var o=s;do{if((o.flags&32768)!==0){V2(o,$s);return}s=o.return;var l=O6(o.alternate,o,Yi);if(l!==null){Me=l;return}if(o=o.sibling,o!==null){Me=o;return}Me=o=s}while(o!==null);Ct===0&&(Ct=5)}function V2(s,o){do{var l=T6(s.alternate,s);if(l!==null){l.flags&=32767,Me=l;return}if(l=s.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!o&&(s=s.sibling,s!==null)){Me=s;return}Me=s=l}while(s!==null);Ct=6,Me=null}function G2(s,o,l,h,m,w,C,M,Y){s.cancelPendingCommit=null;do Bd();while(fn!==0);if((tt&6)!==0)throw Error(r(327));if(o!==null){if(o===s.current)throw Error(r(177));if(w=o.lanes|o.childLanes,w|=kg,p8(s,l,w,C,M,Y),s===gt&&(Me=gt=null,He=0),rc=o,Us=s,ic=l,qm=w,Hm=m,U2=h,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,L6(Qt,function(){return Z2(),null})):(s.callbackNode=null,s.callbackPriority=0),h=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||h){h=R.T,R.T=null,m=L.p,L.p=2,C=tt,tt|=4;try{D6(s,o,l)}finally{tt=C,L.p=m,R.T=h}}fn=1,K2(),W2(),Y2()}}function K2(){if(fn===1){fn=0;var s=Us,o=rc,l=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||l){l=R.T,R.T=null;var h=L.p;L.p=2;var m=tt;tt|=4;try{D2(o,s);var w=sy,C=P1(s.containerInfo),M=w.focusedElem,Y=w.selectionRange;if(C!==M&&M&&M.ownerDocument&&B1(M.ownerDocument.documentElement,M)){if(Y!==null&&Ng(M)){var ae=Y.start,de=Y.end;if(de===void 0&&(de=ae),"selectionStart"in M)M.selectionStart=ae,M.selectionEnd=Math.min(de,M.value.length);else{var me=M.ownerDocument||document,ce=me&&me.defaultView||window;if(ce.getSelection){var le=ce.getSelection(),Ce=M.textContent.length,Te=Math.min(Y.start,Ce),ct=Y.end===void 0?Te:Math.min(Y.end,Ce);!le.extend&&Te>ct&&(C=ct,ct=Te,Te=C);var re=$1(M,Te),Z=$1(M,ct);if(re&&Z&&(le.rangeCount!==1||le.anchorNode!==re.node||le.anchorOffset!==re.offset||le.focusNode!==Z.node||le.focusOffset!==Z.offset)){var oe=me.createRange();oe.setStart(re.node,re.offset),le.removeAllRanges(),Te>ct?(le.addRange(oe),le.extend(Z.node,Z.offset)):(oe.setEnd(Z.node,Z.offset),le.addRange(oe))}}}}for(me=[],le=M;le=le.parentNode;)le.nodeType===1&&me.push({element:le,left:le.scrollLeft,top:le.scrollTop});for(typeof M.focus=="function"&&M.focus(),M=0;M<me.length;M++){var ge=me[M];ge.element.scrollLeft=ge.left,ge.element.scrollTop=ge.top}}Gd=!!iy,sy=iy=null}finally{tt=m,L.p=h,R.T=l}}s.current=o,fn=2}}function W2(){if(fn===2){fn=0;var s=Us,o=rc,l=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||l){l=R.T,R.T=null;var h=L.p;L.p=2;var m=tt;tt|=4;try{A2(s,o.alternate,o)}finally{tt=m,L.p=h,R.T=l}}fn=3}}function Y2(){if(fn===4||fn===3){fn=0,Vr();var s=Us,o=rc,l=ic,h=U2;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?fn=5:(fn=0,rc=Us=null,X2(s,s.pendingLanes));var m=s.pendingLanes;if(m===0&&(Ps=null),fg(l),o=o.stateNode,U&&typeof U.onCommitFiberRoot=="function")try{U.onCommitFiberRoot(sr,o,void 0,(o.current.flags&128)===128)}catch{}if(h!==null){o=R.T,m=L.p,L.p=2,R.T=null;try{for(var w=s.onRecoverableError,C=0;C<h.length;C++){var M=h[C];w(M.value,{componentStack:M.stack})}}finally{R.T=o,L.p=m}}(ic&3)!==0&&Bd(),di(s),m=s.pendingLanes,(l&4194090)!==0&&(m&42)!==0?s===Fm?Xl++:(Xl=0,Fm=s):Xl=0,Zl(0)}}function X2(s,o){(s.pooledCacheLanes&=o)===0&&(o=s.pooledCache,o!=null&&(s.pooledCache=null,Cl(o)))}function Bd(s){return K2(),W2(),Y2(),Z2()}function Z2(){if(fn!==5)return!1;var s=Us,o=qm;qm=0;var l=fg(ic),h=R.T,m=L.p;try{L.p=32>l?32:l,R.T=null,l=Hm,Hm=null;var w=Us,C=ic;if(fn=0,rc=Us=null,ic=0,(tt&6)!==0)throw Error(r(331));var M=tt;if(tt|=4,B2(w.current),I2(w,w.current,C,l),tt=M,Zl(0,!1),U&&typeof U.onPostCommitFiberRoot=="function")try{U.onPostCommitFiberRoot(sr,w)}catch{}return!0}finally{L.p=m,R.T=h,X2(s,o)}}function Q2(s,o,l){o=Ar(l,o),o=Sm(s.stateNode,o,2),s=Rs(s,o,2),s!==null&&(pl(s,2),di(s))}function lt(s,o,l){if(s.tag===3)Q2(s,s,l);else for(;o!==null;){if(o.tag===3){Q2(o,s,l);break}else if(o.tag===1){var h=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(Ps===null||!Ps.has(h))){s=Ar(l,s),l=n2(2),h=Rs(o,l,2),h!==null&&(r2(l,h,o,s),pl(h,2),di(h));break}}o=o.return}}function Wm(s,o,l){var h=s.pingCache;if(h===null){h=s.pingCache=new N6;var m=new Set;h.set(o,m)}else m=h.get(o),m===void 0&&(m=new Set,h.set(o,m));m.has(l)||(Mm=!0,m.add(l),s=k6.bind(null,s,o,l),o.then(s,s))}function k6(s,o,l){var h=s.pingCache;h!==null&&h.delete(o),s.pingedLanes|=s.suspendedLanes&l,s.warmLanes&=~l,gt===s&&(He&l)===l&&(Ct===4||Ct===3&&(He&62914560)===He&&300>At()-zm?(tt&2)===0&&sc(s,0):jm|=l,nc===He&&(nc=0)),di(s)}function J2(s,o){o===0&&(o=Yw()),s=za(s,o),s!==null&&(pl(s,o),di(s))}function M6(s){var o=s.memoizedState,l=0;o!==null&&(l=o.retryLane),J2(s,l)}function j6(s,o){var l=0;switch(s.tag){case 13:var h=s.stateNode,m=s.memoizedState;m!==null&&(l=m.retryLane);break;case 19:h=s.stateNode;break;case 22:h=s.stateNode._retryCache;break;default:throw Error(r(314))}h!==null&&h.delete(o),J2(s,l)}function L6(s,o){return Tt(s,o)}var Pd=null,ac=null,Ym=!1,Ud=!1,Xm=!1,Uo=0;function di(s){s!==ac&&s.next===null&&(ac===null?Pd=ac=s:ac=ac.next=s),Ud=!0,Ym||(Ym=!0,q6())}function Zl(s,o){if(!Xm&&Ud){Xm=!0;do for(var l=!1,h=Pd;h!==null;){if(s!==0){var m=h.pendingLanes;if(m===0)var w=0;else{var C=h.suspendedLanes,M=h.pingedLanes;w=(1<<31-A(42|s)+1)-1,w&=m&~(C&~M),w=w&201326741?w&201326741|1:w?w|2:0}w!==0&&(l=!0,rS(h,w))}else w=He,w=Je(h,h===gt?w:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(w&3)===0||st(h,w)||(l=!0,rS(h,w));h=h.next}while(l);Xm=!1}}function z6(){eS()}function eS(){Ud=Ym=!1;var s=0;Uo!==0&&(X6()&&(s=Uo),Uo=0);for(var o=At(),l=null,h=Pd;h!==null;){var m=h.next,w=tS(h,o);w===0?(h.next=null,l===null?Pd=m:l.next=m,m===null&&(ac=l)):(l=h,(s!==0||(w&3)!==0)&&(Ud=!0)),h=m}Zl(s)}function tS(s,o){for(var l=s.suspendedLanes,h=s.pingedLanes,m=s.expirationTimes,w=s.pendingLanes&-62914561;0<w;){var C=31-A(w),M=1<<C,Y=m[C];Y===-1?((M&l)===0||(M&h)!==0)&&(m[C]=et(M,o)):Y<=o&&(s.expiredLanes|=M),w&=~M}if(o=gt,l=He,l=Je(s,s===o?l:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),h=s.callbackNode,l===0||s===o&&(nt===2||nt===9)||s.cancelPendingCommit!==null)return h!==null&&h!==null&&xt(h),s.callbackNode=null,s.callbackPriority=0;if((l&3)===0||st(s,l)){if(o=l&-l,o===s.callbackPriority)return o;switch(h!==null&&xt(h),fg(l)){case 2:case 8:l=Sn;break;case 32:l=Qt;break;case 268435456:l=Sr;break;default:l=Qt}return h=nS.bind(null,s),l=Tt(l,h),s.callbackPriority=o,s.callbackNode=l,o}return h!==null&&h!==null&&xt(h),s.callbackPriority=2,s.callbackNode=null,2}function nS(s,o){if(fn!==0&&fn!==5)return s.callbackNode=null,s.callbackPriority=0,null;var l=s.callbackNode;if(Bd()&&s.callbackNode!==l)return null;var h=He;return h=Je(s,s===gt?h:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),h===0?null:(M2(s,h,o),tS(s,At()),s.callbackNode!=null&&s.callbackNode===l?nS.bind(null,s):null)}function rS(s,o){if(Bd())return null;M2(s,o,!0)}function q6(){Q6(function(){(tt&6)!==0?Tt(Pi,z6):eS()})}function Zm(){return Uo===0&&(Uo=Ww()),Uo}function iS(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:Kf(""+s)}function sS(s,o){var l=o.ownerDocument.createElement("input");return l.name=o.name,l.value=o.value,s.id&&l.setAttribute("form",s.id),o.parentNode.insertBefore(l,o),s=new FormData(s),l.parentNode.removeChild(l),s}function H6(s,o,l,h,m){if(o==="submit"&&l&&l.stateNode===m){var w=iS((m[Mn]||null).action),C=h.submitter;C&&(o=(o=C[Mn]||null)?iS(o.formAction):C.getAttribute("formAction"),o!==null&&(w=o,C=null));var M=new Zf("action","action",null,h,m);s.push({event:M,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(Uo!==0){var Y=C?sS(m,C):new FormData(m);ym(l,{pending:!0,data:Y,method:m.method,action:w},null,Y)}}else typeof w=="function"&&(M.preventDefault(),Y=C?sS(m,C):new FormData(m),ym(l,{pending:!0,data:Y,method:m.method,action:w},w,Y))},currentTarget:m}]})}}for(var Qm=0;Qm<Ug.length;Qm++){var Jm=Ug[Qm],F6=Jm.toLowerCase(),V6=Jm[0].toUpperCase()+Jm.slice(1);Gr(F6,"on"+V6)}Gr(M1,"onAnimationEnd"),Gr(j1,"onAnimationIteration"),Gr(L1,"onAnimationStart"),Gr("dblclick","onDoubleClick"),Gr("focusin","onFocus"),Gr("focusout","onBlur"),Gr(c6,"onTransitionRun"),Gr(l6,"onTransitionStart"),Gr(u6,"onTransitionCancel"),Gr(z1,"onTransitionEnd"),Ia("onMouseEnter",["mouseout","mouseover"]),Ia("onMouseLeave",["mouseout","mouseover"]),Ia("onPointerEnter",["pointerout","pointerover"]),Ia("onPointerLeave",["pointerout","pointerover"]),wo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),wo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),wo("onBeforeInput",["compositionend","keypress","textInput","paste"]),wo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),wo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),wo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ql="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),G6=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ql));function oS(s,o){o=(o&4)!==0;for(var l=0;l<s.length;l++){var h=s[l],m=h.event;h=h.listeners;e:{var w=void 0;if(o)for(var C=h.length-1;0<=C;C--){var M=h[C],Y=M.instance,ae=M.currentTarget;if(M=M.listener,Y!==w&&m.isPropagationStopped())break e;w=M,m.currentTarget=ae;try{w(m)}catch(de){_d(de)}m.currentTarget=null,w=Y}else for(C=0;C<h.length;C++){if(M=h[C],Y=M.instance,ae=M.currentTarget,M=M.listener,Y!==w&&m.isPropagationStopped())break e;w=M,m.currentTarget=ae;try{w(m)}catch(de){_d(de)}m.currentTarget=null,w=Y}}}}function je(s,o){var l=o[dg];l===void 0&&(l=o[dg]=new Set);var h=s+"__bubble";l.has(h)||(aS(o,s,2,!1),l.add(h))}function ey(s,o,l){var h=0;o&&(h|=4),aS(l,s,h,o)}var kd="_reactListening"+Math.random().toString(36).slice(2);function ty(s){if(!s[kd]){s[kd]=!0,e1.forEach(function(l){l!=="selectionchange"&&(G6.has(l)||ey(l,!1,s),ey(l,!0,s))});var o=s.nodeType===9?s:s.ownerDocument;o===null||o[kd]||(o[kd]=!0,ey("selectionchange",!1,o))}}function aS(s,o,l,h){switch(IS(o)){case 2:var m=v4;break;case 8:m=w4;break;default:m=gy}l=m.bind(null,o,l,s),m=void 0,!_g||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(m=!0),h?m!==void 0?s.addEventListener(o,l,{capture:!0,passive:m}):s.addEventListener(o,l,!0):m!==void 0?s.addEventListener(o,l,{passive:m}):s.addEventListener(o,l,!1)}function ny(s,o,l,h,m){var w=h;if((o&1)===0&&(o&2)===0&&h!==null)e:for(;;){if(h===null)return;var C=h.tag;if(C===3||C===4){var M=h.stateNode.containerInfo;if(M===m)break;if(C===4)for(C=h.return;C!==null;){var Y=C.tag;if((Y===3||Y===4)&&C.stateNode.containerInfo===m)return;C=C.return}for(;M!==null;){if(C=Ta(M),C===null)return;if(Y=C.tag,Y===5||Y===6||Y===26||Y===27){h=w=C;continue e}M=M.parentNode}}h=h.return}p1(function(){var ae=w,de=Eg(l),me=[];e:{var ce=q1.get(s);if(ce!==void 0){var le=Zf,Ce=s;switch(s){case"keypress":if(Yf(l)===0)break e;case"keydown":case"keyup":le=L8;break;case"focusin":Ce="focus",le=Og;break;case"focusout":Ce="blur",le=Og;break;case"beforeblur":case"afterblur":le=Og;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":le=y1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":le=T8;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":le=H8;break;case M1:case j1:case L1:le=I8;break;case z1:le=V8;break;case"scroll":case"scrollend":le=R8;break;case"wheel":le=K8;break;case"copy":case"cut":case"paste":le=$8;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":le=v1;break;case"toggle":case"beforetoggle":le=Y8}var Te=(o&4)!==0,ct=!Te&&(s==="scroll"||s==="scrollend"),re=Te?ce!==null?ce+"Capture":null:ce;Te=[];for(var Z=ae,oe;Z!==null;){var ge=Z;if(oe=ge.stateNode,ge=ge.tag,ge!==5&&ge!==26&&ge!==27||oe===null||re===null||(ge=yl(Z,re),ge!=null&&Te.push(Jl(Z,ge,oe))),ct)break;Z=Z.return}0<Te.length&&(ce=new le(ce,Ce,null,l,de),me.push({event:ce,listeners:Te}))}}if((o&7)===0){e:{if(ce=s==="mouseover"||s==="pointerover",le=s==="mouseout"||s==="pointerout",ce&&l!==wg&&(Ce=l.relatedTarget||l.fromElement)&&(Ta(Ce)||Ce[Oa]))break e;if((le||ce)&&(ce=de.window===de?de:(ce=de.ownerDocument)?ce.defaultView||ce.parentWindow:window,le?(Ce=l.relatedTarget||l.toElement,le=ae,Ce=Ce?Ta(Ce):null,Ce!==null&&(ct=a(Ce),Te=Ce.tag,Ce!==ct||Te!==5&&Te!==27&&Te!==6)&&(Ce=null)):(le=null,Ce=ae),le!==Ce)){if(Te=y1,ge="onMouseLeave",re="onMouseEnter",Z="mouse",(s==="pointerout"||s==="pointerover")&&(Te=v1,ge="onPointerLeave",re="onPointerEnter",Z="pointer"),ct=le==null?ce:ml(le),oe=Ce==null?ce:ml(Ce),ce=new Te(ge,Z+"leave",le,l,de),ce.target=ct,ce.relatedTarget=oe,ge=null,Ta(de)===ae&&(Te=new Te(re,Z+"enter",Ce,l,de),Te.target=oe,Te.relatedTarget=ct,ge=Te),ct=ge,le&&Ce)t:{for(Te=le,re=Ce,Z=0,oe=Te;oe;oe=cc(oe))Z++;for(oe=0,ge=re;ge;ge=cc(ge))oe++;for(;0<Z-oe;)Te=cc(Te),Z--;for(;0<oe-Z;)re=cc(re),oe--;for(;Z--;){if(Te===re||re!==null&&Te===re.alternate)break t;Te=cc(Te),re=cc(re)}Te=null}else Te=null;le!==null&&cS(me,ce,le,Te,!1),Ce!==null&&ct!==null&&cS(me,ct,Ce,Te,!0)}}e:{if(ce=ae?ml(ae):window,le=ce.nodeName&&ce.nodeName.toLowerCase(),le==="select"||le==="input"&&ce.type==="file")var xe=O1;else if(A1(ce))if(T1)xe=s6;else{xe=r6;var Ue=n6}else le=ce.nodeName,!le||le.toLowerCase()!=="input"||ce.type!=="checkbox"&&ce.type!=="radio"?ae&&vg(ae.elementType)&&(xe=O1):xe=i6;if(xe&&(xe=xe(s,ae))){R1(me,xe,l,de);break e}Ue&&Ue(s,ce,ae),s==="focusout"&&ae&&ce.type==="number"&&ae.memoizedProps.value!=null&&bg(ce,"number",ce.value)}switch(Ue=ae?ml(ae):window,s){case"focusin":(A1(Ue)||Ue.contentEditable==="true")&&(Ma=Ue,$g=ae,Al=null);break;case"focusout":Al=$g=Ma=null;break;case"mousedown":Bg=!0;break;case"contextmenu":case"mouseup":case"dragend":Bg=!1,U1(me,l,de);break;case"selectionchange":if(a6)break;case"keydown":case"keyup":U1(me,l,de)}var Ae;if(Dg)e:{switch(s){case"compositionstart":var De="onCompositionStart";break e;case"compositionend":De="onCompositionEnd";break e;case"compositionupdate":De="onCompositionUpdate";break e}De=void 0}else ka?_1(s,l)&&(De="onCompositionEnd"):s==="keydown"&&l.keyCode===229&&(De="onCompositionStart");De&&(w1&&l.locale!=="ko"&&(ka||De!=="onCompositionStart"?De==="onCompositionEnd"&&ka&&(Ae=g1()):(Ss=de,xg="value"in Ss?Ss.value:Ss.textContent,ka=!0)),Ue=Md(ae,De),0<Ue.length&&(De=new b1(De,s,null,l,de),me.push({event:De,listeners:Ue}),Ae?De.data=Ae:(Ae=x1(l),Ae!==null&&(De.data=Ae)))),(Ae=Z8?Q8(s,l):J8(s,l))&&(De=Md(ae,"onBeforeInput"),0<De.length&&(Ue=new b1("onBeforeInput","beforeinput",null,l,de),me.push({event:Ue,listeners:De}),Ue.data=Ae)),H6(me,s,ae,l,de)}oS(me,o)})}function Jl(s,o,l){return{instance:s,listener:o,currentTarget:l}}function Md(s,o){for(var l=o+"Capture",h=[];s!==null;){var m=s,w=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||w===null||(m=yl(s,l),m!=null&&h.unshift(Jl(s,m,w)),m=yl(s,o),m!=null&&h.push(Jl(s,m,w))),s.tag===3)return h;s=s.return}return[]}function cc(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function cS(s,o,l,h,m){for(var w=o._reactName,C=[];l!==null&&l!==h;){var M=l,Y=M.alternate,ae=M.stateNode;if(M=M.tag,Y!==null&&Y===h)break;M!==5&&M!==26&&M!==27||ae===null||(Y=ae,m?(ae=yl(l,w),ae!=null&&C.unshift(Jl(l,ae,Y))):m||(ae=yl(l,w),ae!=null&&C.push(Jl(l,ae,Y)))),l=l.return}C.length!==0&&s.push({event:o,listeners:C})}var K6=/\r\n?/g,W6=/\u0000|\uFFFD/g;function lS(s){return(typeof s=="string"?s:""+s).replace(K6,`
`).replace(W6,"")}function uS(s,o){return o=lS(o),lS(s)===o}function jd(){}function at(s,o,l,h,m,w){switch(l){case"children":typeof h=="string"?o==="body"||o==="textarea"&&h===""||Ba(s,h):(typeof h=="number"||typeof h=="bigint")&&o!=="body"&&Ba(s,""+h);break;case"className":Ff(s,"class",h);break;case"tabIndex":Ff(s,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":Ff(s,l,h);break;case"style":d1(s,h,w);break;case"data":if(o!=="object"){Ff(s,"data",h);break}case"src":case"href":if(h===""&&(o!=="a"||l!=="href")){s.removeAttribute(l);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){s.removeAttribute(l);break}h=Kf(""+h),s.setAttribute(l,h);break;case"action":case"formAction":if(typeof h=="function"){s.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof w=="function"&&(l==="formAction"?(o!=="input"&&at(s,o,"name",m.name,m,null),at(s,o,"formEncType",m.formEncType,m,null),at(s,o,"formMethod",m.formMethod,m,null),at(s,o,"formTarget",m.formTarget,m,null)):(at(s,o,"encType",m.encType,m,null),at(s,o,"method",m.method,m,null),at(s,o,"target",m.target,m,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){s.removeAttribute(l);break}h=Kf(""+h),s.setAttribute(l,h);break;case"onClick":h!=null&&(s.onclick=jd);break;case"onScroll":h!=null&&je("scroll",s);break;case"onScrollEnd":h!=null&&je("scrollend",s);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(r(61));if(l=h.__html,l!=null){if(m.children!=null)throw Error(r(60));s.innerHTML=l}}break;case"multiple":s.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":s.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){s.removeAttribute("xlink:href");break}l=Kf(""+h),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(l,""+h):s.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(l,""):s.removeAttribute(l);break;case"capture":case"download":h===!0?s.setAttribute(l,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(l,h):s.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?s.setAttribute(l,h):s.removeAttribute(l);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?s.removeAttribute(l):s.setAttribute(l,h);break;case"popover":je("beforetoggle",s),je("toggle",s),Hf(s,"popover",h);break;case"xlinkActuate":Ui(s,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":Ui(s,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":Ui(s,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":Ui(s,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":Ui(s,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":Ui(s,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":Ui(s,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":Ui(s,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":Ui(s,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":Hf(s,"is",h);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=x8.get(l)||l,Hf(s,l,h))}}function ry(s,o,l,h,m,w){switch(l){case"style":d1(s,h,w);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(r(61));if(l=h.__html,l!=null){if(m.children!=null)throw Error(r(60));s.innerHTML=l}}break;case"children":typeof h=="string"?Ba(s,h):(typeof h=="number"||typeof h=="bigint")&&Ba(s,""+h);break;case"onScroll":h!=null&&je("scroll",s);break;case"onScrollEnd":h!=null&&je("scrollend",s);break;case"onClick":h!=null&&(s.onclick=jd);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!t1.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(m=l.endsWith("Capture"),o=l.slice(2,m?l.length-7:void 0),w=s[Mn]||null,w=w!=null?w[l]:null,typeof w=="function"&&s.removeEventListener(o,w,m),typeof h=="function")){typeof w!="function"&&w!==null&&(l in s?s[l]=null:s.hasAttribute(l)&&s.removeAttribute(l)),s.addEventListener(o,h,m);break e}l in s?s[l]=h:h===!0?s.setAttribute(l,""):Hf(s,l,h)}}}function dn(s,o,l){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":je("error",s),je("load",s);var h=!1,m=!1,w;for(w in l)if(l.hasOwnProperty(w)){var C=l[w];if(C!=null)switch(w){case"src":h=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,o));default:at(s,o,w,C,l,null)}}m&&at(s,o,"srcSet",l.srcSet,l,null),h&&at(s,o,"src",l.src,l,null);return;case"input":je("invalid",s);var M=w=C=m=null,Y=null,ae=null;for(h in l)if(l.hasOwnProperty(h)){var de=l[h];if(de!=null)switch(h){case"name":m=de;break;case"type":C=de;break;case"checked":Y=de;break;case"defaultChecked":ae=de;break;case"value":w=de;break;case"defaultValue":M=de;break;case"children":case"dangerouslySetInnerHTML":if(de!=null)throw Error(r(137,o));break;default:at(s,o,h,de,l,null)}}c1(s,w,M,Y,ae,C,m,!1),Vf(s);return;case"select":je("invalid",s),h=C=w=null;for(m in l)if(l.hasOwnProperty(m)&&(M=l[m],M!=null))switch(m){case"value":w=M;break;case"defaultValue":C=M;break;case"multiple":h=M;default:at(s,o,m,M,l,null)}o=w,l=C,s.multiple=!!h,o!=null?$a(s,!!h,o,!1):l!=null&&$a(s,!!h,l,!0);return;case"textarea":je("invalid",s),w=m=h=null;for(C in l)if(l.hasOwnProperty(C)&&(M=l[C],M!=null))switch(C){case"value":h=M;break;case"defaultValue":m=M;break;case"children":w=M;break;case"dangerouslySetInnerHTML":if(M!=null)throw Error(r(91));break;default:at(s,o,C,M,l,null)}u1(s,h,m,w),Vf(s);return;case"option":for(Y in l)if(l.hasOwnProperty(Y)&&(h=l[Y],h!=null))switch(Y){case"selected":s.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:at(s,o,Y,h,l,null)}return;case"dialog":je("beforetoggle",s),je("toggle",s),je("cancel",s),je("close",s);break;case"iframe":case"object":je("load",s);break;case"video":case"audio":for(h=0;h<Ql.length;h++)je(Ql[h],s);break;case"image":je("error",s),je("load",s);break;case"details":je("toggle",s);break;case"embed":case"source":case"link":je("error",s),je("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ae in l)if(l.hasOwnProperty(ae)&&(h=l[ae],h!=null))switch(ae){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,o));default:at(s,o,ae,h,l,null)}return;default:if(vg(o)){for(de in l)l.hasOwnProperty(de)&&(h=l[de],h!==void 0&&ry(s,o,de,h,l,void 0));return}}for(M in l)l.hasOwnProperty(M)&&(h=l[M],h!=null&&at(s,o,M,h,l,null))}function Y6(s,o,l,h){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,w=null,C=null,M=null,Y=null,ae=null,de=null;for(le in l){var me=l[le];if(l.hasOwnProperty(le)&&me!=null)switch(le){case"checked":break;case"value":break;case"defaultValue":Y=me;default:h.hasOwnProperty(le)||at(s,o,le,null,h,me)}}for(var ce in h){var le=h[ce];if(me=l[ce],h.hasOwnProperty(ce)&&(le!=null||me!=null))switch(ce){case"type":w=le;break;case"name":m=le;break;case"checked":ae=le;break;case"defaultChecked":de=le;break;case"value":C=le;break;case"defaultValue":M=le;break;case"children":case"dangerouslySetInnerHTML":if(le!=null)throw Error(r(137,o));break;default:le!==me&&at(s,o,ce,le,h,me)}}yg(s,C,M,Y,ae,de,w,m);return;case"select":le=C=M=ce=null;for(w in l)if(Y=l[w],l.hasOwnProperty(w)&&Y!=null)switch(w){case"value":break;case"multiple":le=Y;default:h.hasOwnProperty(w)||at(s,o,w,null,h,Y)}for(m in h)if(w=h[m],Y=l[m],h.hasOwnProperty(m)&&(w!=null||Y!=null))switch(m){case"value":ce=w;break;case"defaultValue":M=w;break;case"multiple":C=w;default:w!==Y&&at(s,o,m,w,h,Y)}o=M,l=C,h=le,ce!=null?$a(s,!!l,ce,!1):!!h!=!!l&&(o!=null?$a(s,!!l,o,!0):$a(s,!!l,l?[]:"",!1));return;case"textarea":le=ce=null;for(M in l)if(m=l[M],l.hasOwnProperty(M)&&m!=null&&!h.hasOwnProperty(M))switch(M){case"value":break;case"children":break;default:at(s,o,M,null,h,m)}for(C in h)if(m=h[C],w=l[C],h.hasOwnProperty(C)&&(m!=null||w!=null))switch(C){case"value":ce=m;break;case"defaultValue":le=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(r(91));break;default:m!==w&&at(s,o,C,m,h,w)}l1(s,ce,le);return;case"option":for(var Ce in l)if(ce=l[Ce],l.hasOwnProperty(Ce)&&ce!=null&&!h.hasOwnProperty(Ce))switch(Ce){case"selected":s.selected=!1;break;default:at(s,o,Ce,null,h,ce)}for(Y in h)if(ce=h[Y],le=l[Y],h.hasOwnProperty(Y)&&ce!==le&&(ce!=null||le!=null))switch(Y){case"selected":s.selected=ce&&typeof ce!="function"&&typeof ce!="symbol";break;default:at(s,o,Y,ce,h,le)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Te in l)ce=l[Te],l.hasOwnProperty(Te)&&ce!=null&&!h.hasOwnProperty(Te)&&at(s,o,Te,null,h,ce);for(ae in h)if(ce=h[ae],le=l[ae],h.hasOwnProperty(ae)&&ce!==le&&(ce!=null||le!=null))switch(ae){case"children":case"dangerouslySetInnerHTML":if(ce!=null)throw Error(r(137,o));break;default:at(s,o,ae,ce,h,le)}return;default:if(vg(o)){for(var ct in l)ce=l[ct],l.hasOwnProperty(ct)&&ce!==void 0&&!h.hasOwnProperty(ct)&&ry(s,o,ct,void 0,h,ce);for(de in h)ce=h[de],le=l[de],!h.hasOwnProperty(de)||ce===le||ce===void 0&&le===void 0||ry(s,o,de,ce,h,le);return}}for(var re in l)ce=l[re],l.hasOwnProperty(re)&&ce!=null&&!h.hasOwnProperty(re)&&at(s,o,re,null,h,ce);for(me in h)ce=h[me],le=l[me],!h.hasOwnProperty(me)||ce===le||ce==null&&le==null||at(s,o,me,ce,h,le)}var iy=null,sy=null;function Ld(s){return s.nodeType===9?s:s.ownerDocument}function fS(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function dS(s,o){if(s===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&o==="foreignObject"?0:s}function oy(s,o){return s==="textarea"||s==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var ay=null;function X6(){var s=window.event;return s&&s.type==="popstate"?s===ay?!1:(ay=s,!0):(ay=null,!1)}var hS=typeof setTimeout=="function"?setTimeout:void 0,Z6=typeof clearTimeout=="function"?clearTimeout:void 0,pS=typeof Promise=="function"?Promise:void 0,Q6=typeof queueMicrotask=="function"?queueMicrotask:typeof pS<"u"?function(s){return pS.resolve(null).then(s).catch(J6)}:hS;function J6(s){setTimeout(function(){throw s})}function Ms(s){return s==="head"}function gS(s,o){var l=o,h=0,m=0;do{var w=l.nextSibling;if(s.removeChild(l),w&&w.nodeType===8)if(l=w.data,l==="/$"){if(0<h&&8>h){l=h;var C=s.ownerDocument;if(l&1&&eu(C.documentElement),l&2&&eu(C.body),l&4)for(l=C.head,eu(l),C=l.firstChild;C;){var M=C.nextSibling,Y=C.nodeName;C[gl]||Y==="SCRIPT"||Y==="STYLE"||Y==="LINK"&&C.rel.toLowerCase()==="stylesheet"||l.removeChild(C),C=M}}if(m===0){s.removeChild(w),cu(o);return}m--}else l==="$"||l==="$?"||l==="$!"?m++:h=l.charCodeAt(0)-48;else h=0;l=w}while(l);cu(o)}function cy(s){var o=s.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var l=o;switch(o=o.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":cy(l),hg(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}s.removeChild(l)}}function e4(s,o,l,h){for(;s.nodeType===1;){var m=l;if(s.nodeName.toLowerCase()!==o.toLowerCase()){if(!h&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(h){if(!s[gl])switch(o){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(w=s.getAttribute("rel"),w==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(w!==m.rel||s.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||s.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||s.getAttribute("title")!==(m.title==null?null:m.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(w=s.getAttribute("src"),(w!==(m.src==null?null:m.src)||s.getAttribute("type")!==(m.type==null?null:m.type)||s.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&w&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(o==="input"&&s.type==="hidden"){var w=m.name==null?null:""+m.name;if(m.type==="hidden"&&s.getAttribute("name")===w)return s}else return s;if(s=Wr(s.nextSibling),s===null)break}return null}function t4(s,o,l){if(o==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!l||(s=Wr(s.nextSibling),s===null))return null;return s}function ly(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState==="complete"}function n4(s,o){var l=s.ownerDocument;if(s.data!=="$?"||l.readyState==="complete")o();else{var h=function(){o(),l.removeEventListener("DOMContentLoaded",h)};l.addEventListener("DOMContentLoaded",h),s._reactRetry=h}}function Wr(s){for(;s!=null;s=s.nextSibling){var o=s.nodeType;if(o===1||o===3)break;if(o===8){if(o=s.data,o==="$"||o==="$!"||o==="$?"||o==="F!"||o==="F")break;if(o==="/$")return null}}return s}var uy=null;function mS(s){s=s.previousSibling;for(var o=0;s;){if(s.nodeType===8){var l=s.data;if(l==="$"||l==="$!"||l==="$?"){if(o===0)return s;o--}else l==="/$"&&o++}s=s.previousSibling}return null}function yS(s,o,l){switch(o=Ld(l),s){case"html":if(s=o.documentElement,!s)throw Error(r(452));return s;case"head":if(s=o.head,!s)throw Error(r(453));return s;case"body":if(s=o.body,!s)throw Error(r(454));return s;default:throw Error(r(451))}}function eu(s){for(var o=s.attributes;o.length;)s.removeAttributeNode(o[0]);hg(s)}var Ir=new Map,bS=new Set;function zd(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var Xi=L.d;L.d={f:r4,r:i4,D:s4,C:o4,L:a4,m:c4,X:u4,S:l4,M:f4};function r4(){var s=Xi.f(),o=Nd();return s||o}function i4(s){var o=Da(s);o!==null&&o.tag===5&&o.type==="form"?ME(o):Xi.r(s)}var lc=typeof document>"u"?null:document;function vS(s,o,l){var h=lc;if(h&&typeof o=="string"&&o){var m=xr(o);m='link[rel="'+s+'"][href="'+m+'"]',typeof l=="string"&&(m+='[crossorigin="'+l+'"]'),bS.has(m)||(bS.add(m),s={rel:s,crossOrigin:l,href:o},h.querySelector(m)===null&&(o=h.createElement("link"),dn(o,"link",s),en(o),h.head.appendChild(o)))}}function s4(s){Xi.D(s),vS("dns-prefetch",s,null)}function o4(s,o){Xi.C(s,o),vS("preconnect",s,o)}function a4(s,o,l){Xi.L(s,o,l);var h=lc;if(h&&s&&o){var m='link[rel="preload"][as="'+xr(o)+'"]';o==="image"&&l&&l.imageSrcSet?(m+='[imagesrcset="'+xr(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(m+='[imagesizes="'+xr(l.imageSizes)+'"]')):m+='[href="'+xr(s)+'"]';var w=m;switch(o){case"style":w=uc(s);break;case"script":w=fc(s)}Ir.has(w)||(s=p({rel:"preload",href:o==="image"&&l&&l.imageSrcSet?void 0:s,as:o},l),Ir.set(w,s),h.querySelector(m)!==null||o==="style"&&h.querySelector(tu(w))||o==="script"&&h.querySelector(nu(w))||(o=h.createElement("link"),dn(o,"link",s),en(o),h.head.appendChild(o)))}}function c4(s,o){Xi.m(s,o);var l=lc;if(l&&s){var h=o&&typeof o.as=="string"?o.as:"script",m='link[rel="modulepreload"][as="'+xr(h)+'"][href="'+xr(s)+'"]',w=m;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":w=fc(s)}if(!Ir.has(w)&&(s=p({rel:"modulepreload",href:s},o),Ir.set(w,s),l.querySelector(m)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(nu(w)))return}h=l.createElement("link"),dn(h,"link",s),en(h),l.head.appendChild(h)}}}function l4(s,o,l){Xi.S(s,o,l);var h=lc;if(h&&s){var m=Ca(h).hoistableStyles,w=uc(s);o=o||"default";var C=m.get(w);if(!C){var M={loading:0,preload:null};if(C=h.querySelector(tu(w)))M.loading=5;else{s=p({rel:"stylesheet",href:s,"data-precedence":o},l),(l=Ir.get(w))&&fy(s,l);var Y=C=h.createElement("link");en(Y),dn(Y,"link",s),Y._p=new Promise(function(ae,de){Y.onload=ae,Y.onerror=de}),Y.addEventListener("load",function(){M.loading|=1}),Y.addEventListener("error",function(){M.loading|=2}),M.loading|=4,qd(C,o,h)}C={type:"stylesheet",instance:C,count:1,state:M},m.set(w,C)}}}function u4(s,o){Xi.X(s,o);var l=lc;if(l&&s){var h=Ca(l).hoistableScripts,m=fc(s),w=h.get(m);w||(w=l.querySelector(nu(m)),w||(s=p({src:s,async:!0},o),(o=Ir.get(m))&&dy(s,o),w=l.createElement("script"),en(w),dn(w,"link",s),l.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},h.set(m,w))}}function f4(s,o){Xi.M(s,o);var l=lc;if(l&&s){var h=Ca(l).hoistableScripts,m=fc(s),w=h.get(m);w||(w=l.querySelector(nu(m)),w||(s=p({src:s,async:!0,type:"module"},o),(o=Ir.get(m))&&dy(s,o),w=l.createElement("script"),en(w),dn(w,"link",s),l.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},h.set(m,w))}}function wS(s,o,l,h){var m=(m=Q.current)?zd(m):null;if(!m)throw Error(r(446));switch(s){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(o=uc(l.href),l=Ca(m).hoistableStyles,h=l.get(o),h||(h={type:"style",instance:null,count:0,state:null},l.set(o,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){s=uc(l.href);var w=Ca(m).hoistableStyles,C=w.get(s);if(C||(m=m.ownerDocument||m,C={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},w.set(s,C),(w=m.querySelector(tu(s)))&&!w._p&&(C.instance=w,C.state.loading=5),Ir.has(s)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Ir.set(s,l),w||d4(m,s,l,C.state))),o&&h===null)throw Error(r(528,""));return C}if(o&&h!==null)throw Error(r(529,""));return null;case"script":return o=l.async,l=l.src,typeof l=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=fc(l),l=Ca(m).hoistableScripts,h=l.get(o),h||(h={type:"script",instance:null,count:0,state:null},l.set(o,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,s))}}function uc(s){return'href="'+xr(s)+'"'}function tu(s){return'link[rel="stylesheet"]['+s+"]"}function ES(s){return p({},s,{"data-precedence":s.precedence,precedence:null})}function d4(s,o,l,h){s.querySelector('link[rel="preload"][as="style"]['+o+"]")?h.loading=1:(o=s.createElement("link"),h.preload=o,o.addEventListener("load",function(){return h.loading|=1}),o.addEventListener("error",function(){return h.loading|=2}),dn(o,"link",l),en(o),s.head.appendChild(o))}function fc(s){return'[src="'+xr(s)+'"]'}function nu(s){return"script[async]"+s}function SS(s,o,l){if(o.count++,o.instance===null)switch(o.type){case"style":var h=s.querySelector('style[data-href~="'+xr(l.href)+'"]');if(h)return o.instance=h,en(h),h;var m=p({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return h=(s.ownerDocument||s).createElement("style"),en(h),dn(h,"style",m),qd(h,l.precedence,s),o.instance=h;case"stylesheet":m=uc(l.href);var w=s.querySelector(tu(m));if(w)return o.state.loading|=4,o.instance=w,en(w),w;h=ES(l),(m=Ir.get(m))&&fy(h,m),w=(s.ownerDocument||s).createElement("link"),en(w);var C=w;return C._p=new Promise(function(M,Y){C.onload=M,C.onerror=Y}),dn(w,"link",h),o.state.loading|=4,qd(w,l.precedence,s),o.instance=w;case"script":return w=fc(l.src),(m=s.querySelector(nu(w)))?(o.instance=m,en(m),m):(h=l,(m=Ir.get(w))&&(h=p({},l),dy(h,m)),s=s.ownerDocument||s,m=s.createElement("script"),en(m),dn(m,"link",h),s.head.appendChild(m),o.instance=m);case"void":return null;default:throw Error(r(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(h=o.instance,o.state.loading|=4,qd(h,l.precedence,s));return o.instance}function qd(s,o,l){for(var h=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=h.length?h[h.length-1]:null,w=m,C=0;C<h.length;C++){var M=h[C];if(M.dataset.precedence===o)w=M;else if(w!==m)break}w?w.parentNode.insertBefore(s,w.nextSibling):(o=l.nodeType===9?l.head:l,o.insertBefore(s,o.firstChild))}function fy(s,o){s.crossOrigin==null&&(s.crossOrigin=o.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=o.referrerPolicy),s.title==null&&(s.title=o.title)}function dy(s,o){s.crossOrigin==null&&(s.crossOrigin=o.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=o.referrerPolicy),s.integrity==null&&(s.integrity=o.integrity)}var Hd=null;function _S(s,o,l){if(Hd===null){var h=new Map,m=Hd=new Map;m.set(l,h)}else m=Hd,h=m.get(l),h||(h=new Map,m.set(l,h));if(h.has(s))return h;for(h.set(s,null),l=l.getElementsByTagName(s),m=0;m<l.length;m++){var w=l[m];if(!(w[gl]||w[xn]||s==="link"&&w.getAttribute("rel")==="stylesheet")&&w.namespaceURI!=="http://www.w3.org/2000/svg"){var C=w.getAttribute(o)||"";C=s+C;var M=h.get(C);M?M.push(w):h.set(C,[w])}}return h}function xS(s,o,l){s=s.ownerDocument||s,s.head.insertBefore(l,o==="title"?s.querySelector("head > title"):null)}function h4(s,o,l){if(l===1||o.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return s=o.disabled,typeof o.precedence=="string"&&s==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function AS(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}var ru=null;function p4(){}function g4(s,o,l){if(ru===null)throw Error(r(475));var h=ru;if(o.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var m=uc(l.href),w=s.querySelector(tu(m));if(w){s=w._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(h.count++,h=Fd.bind(h),s.then(h,h)),o.state.loading|=4,o.instance=w,en(w);return}w=s.ownerDocument||s,l=ES(l),(m=Ir.get(m))&&fy(l,m),w=w.createElement("link"),en(w);var C=w;C._p=new Promise(function(M,Y){C.onload=M,C.onerror=Y}),dn(w,"link",l),o.instance=w}h.stylesheets===null&&(h.stylesheets=new Map),h.stylesheets.set(o,s),(s=o.state.preload)&&(o.state.loading&3)===0&&(h.count++,o=Fd.bind(h),s.addEventListener("load",o),s.addEventListener("error",o))}}function m4(){if(ru===null)throw Error(r(475));var s=ru;return s.stylesheets&&s.count===0&&hy(s,s.stylesheets),0<s.count?function(o){var l=setTimeout(function(){if(s.stylesheets&&hy(s,s.stylesheets),s.unsuspend){var h=s.unsuspend;s.unsuspend=null,h()}},6e4);return s.unsuspend=o,function(){s.unsuspend=null,clearTimeout(l)}}:null}function Fd(){if(this.count--,this.count===0){if(this.stylesheets)hy(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var Vd=null;function hy(s,o){s.stylesheets=null,s.unsuspend!==null&&(s.count++,Vd=new Map,o.forEach(y4,s),Vd=null,Fd.call(s))}function y4(s,o){if(!(o.state.loading&4)){var l=Vd.get(s);if(l)var h=l.get(null);else{l=new Map,Vd.set(s,l);for(var m=s.querySelectorAll("link[data-precedence],style[data-precedence]"),w=0;w<m.length;w++){var C=m[w];(C.nodeName==="LINK"||C.getAttribute("media")!=="not all")&&(l.set(C.dataset.precedence,C),h=C)}h&&l.set(null,h)}m=o.instance,C=m.getAttribute("data-precedence"),w=l.get(C)||h,w===h&&l.set(null,m),l.set(C,m),this.count++,h=Fd.bind(this),m.addEventListener("load",h),m.addEventListener("error",h),w?w.parentNode.insertBefore(m,w.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(m,s.firstChild)),o.state.loading|=4}}var iu={$$typeof:O,Provider:null,Consumer:null,_currentValue:V,_currentValue2:V,_threadCount:0};function b4(s,o,l,h,m,w,C,M){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=lg(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=lg(0),this.hiddenUpdates=lg(null),this.identifierPrefix=h,this.onUncaughtError=m,this.onCaughtError=w,this.onRecoverableError=C,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=M,this.incompleteTransitions=new Map}function RS(s,o,l,h,m,w,C,M,Y,ae,de,me){return s=new b4(s,o,l,C,M,Y,ae,me),o=1,w===!0&&(o|=24),w=ar(3,null,null,o),s.current=w,w.stateNode=s,o=Wg(),o.refCount++,s.pooledCache=o,o.refCount++,w.memoizedState={element:h,isDehydrated:l,cache:o},Qg(w),s}function OS(s){return s?(s=qa,s):qa}function TS(s,o,l,h,m,w){m=OS(m),h.context===null?h.context=m:h.pendingContext=m,h=As(o),h.payload={element:l},w=w===void 0?null:w,w!==null&&(h.callback=w),l=Rs(s,h,o),l!==null&&(dr(l,s,o),Bl(l,s,o))}function DS(s,o){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var l=s.retryLane;s.retryLane=l!==0&&l<o?l:o}}function py(s,o){DS(s,o),(s=s.alternate)&&DS(s,o)}function CS(s){if(s.tag===13){var o=za(s,67108864);o!==null&&dr(o,s,67108864),py(s,67108864)}}var Gd=!0;function v4(s,o,l,h){var m=R.T;R.T=null;var w=L.p;try{L.p=2,gy(s,o,l,h)}finally{L.p=w,R.T=m}}function w4(s,o,l,h){var m=R.T;R.T=null;var w=L.p;try{L.p=8,gy(s,o,l,h)}finally{L.p=w,R.T=m}}function gy(s,o,l,h){if(Gd){var m=my(h);if(m===null)ny(s,o,h,Kd,l),NS(s,h);else if(S4(m,s,o,l,h))h.stopPropagation();else if(NS(s,h),o&4&&-1<E4.indexOf(s)){for(;m!==null;){var w=Da(m);if(w!==null)switch(w.tag){case 3:if(w=w.stateNode,w.current.memoizedState.isDehydrated){var C=Ze(w.pendingLanes);if(C!==0){var M=w;for(M.pendingLanes|=2,M.entangledLanes|=2;C;){var Y=1<<31-A(C);M.entanglements[1]|=Y,C&=~Y}di(w),(tt&6)===0&&(Cd=At()+500,Zl(0))}}break;case 13:M=za(w,2),M!==null&&dr(M,w,2),Nd(),py(w,2)}if(w=my(h),w===null&&ny(s,o,h,Kd,l),w===m)break;m=w}m!==null&&h.stopPropagation()}else ny(s,o,h,null,l)}}function my(s){return s=Eg(s),yy(s)}var Kd=null;function yy(s){if(Kd=null,s=Ta(s),s!==null){var o=a(s);if(o===null)s=null;else{var l=o.tag;if(l===13){if(s=c(o),s!==null)return s;s=null}else if(l===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;s=null}else o!==s&&(s=null)}}return Kd=s,null}function IS(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(vo()){case Pi:return 2;case Sn:return 8;case Qt:case Jt:return 32;case Sr:return 268435456;default:return 32}default:return 32}}var by=!1,js=null,Ls=null,zs=null,su=new Map,ou=new Map,qs=[],E4="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function NS(s,o){switch(s){case"focusin":case"focusout":js=null;break;case"dragenter":case"dragleave":Ls=null;break;case"mouseover":case"mouseout":zs=null;break;case"pointerover":case"pointerout":su.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":ou.delete(o.pointerId)}}function au(s,o,l,h,m,w){return s===null||s.nativeEvent!==w?(s={blockedOn:o,domEventName:l,eventSystemFlags:h,nativeEvent:w,targetContainers:[m]},o!==null&&(o=Da(o),o!==null&&CS(o)),s):(s.eventSystemFlags|=h,o=s.targetContainers,m!==null&&o.indexOf(m)===-1&&o.push(m),s)}function S4(s,o,l,h,m){switch(o){case"focusin":return js=au(js,s,o,l,h,m),!0;case"dragenter":return Ls=au(Ls,s,o,l,h,m),!0;case"mouseover":return zs=au(zs,s,o,l,h,m),!0;case"pointerover":var w=m.pointerId;return su.set(w,au(su.get(w)||null,s,o,l,h,m)),!0;case"gotpointercapture":return w=m.pointerId,ou.set(w,au(ou.get(w)||null,s,o,l,h,m)),!0}return!1}function $S(s){var o=Ta(s.target);if(o!==null){var l=a(o);if(l!==null){if(o=l.tag,o===13){if(o=c(l),o!==null){s.blockedOn=o,g8(s.priority,function(){if(l.tag===13){var h=fr();h=ug(h);var m=za(l,h);m!==null&&dr(m,l,h),py(l,h)}});return}}else if(o===3&&l.stateNode.current.memoizedState.isDehydrated){s.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Wd(s){if(s.blockedOn!==null)return!1;for(var o=s.targetContainers;0<o.length;){var l=my(s.nativeEvent);if(l===null){l=s.nativeEvent;var h=new l.constructor(l.type,l);wg=h,l.target.dispatchEvent(h),wg=null}else return o=Da(l),o!==null&&CS(o),s.blockedOn=l,!1;o.shift()}return!0}function BS(s,o,l){Wd(s)&&l.delete(o)}function _4(){by=!1,js!==null&&Wd(js)&&(js=null),Ls!==null&&Wd(Ls)&&(Ls=null),zs!==null&&Wd(zs)&&(zs=null),su.forEach(BS),ou.forEach(BS)}function Yd(s,o){s.blockedOn===o&&(s.blockedOn=null,by||(by=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,_4)))}var Xd=null;function PS(s){Xd!==s&&(Xd=s,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Xd===s&&(Xd=null);for(var o=0;o<s.length;o+=3){var l=s[o],h=s[o+1],m=s[o+2];if(typeof h!="function"){if(yy(h||l)===null)continue;break}var w=Da(l);w!==null&&(s.splice(o,3),o-=3,ym(w,{pending:!0,data:m,method:l.method,action:h},h,m))}}))}function cu(s){function o(Y){return Yd(Y,s)}js!==null&&Yd(js,s),Ls!==null&&Yd(Ls,s),zs!==null&&Yd(zs,s),su.forEach(o),ou.forEach(o);for(var l=0;l<qs.length;l++){var h=qs[l];h.blockedOn===s&&(h.blockedOn=null)}for(;0<qs.length&&(l=qs[0],l.blockedOn===null);)$S(l),l.blockedOn===null&&qs.shift();if(l=(s.ownerDocument||s).$$reactFormReplay,l!=null)for(h=0;h<l.length;h+=3){var m=l[h],w=l[h+1],C=m[Mn]||null;if(typeof w=="function")C||PS(l);else if(C){var M=null;if(w&&w.hasAttribute("formAction")){if(m=w,C=w[Mn]||null)M=C.formAction;else if(yy(m)!==null)continue}else M=C.action;typeof M=="function"?l[h+1]=M:(l.splice(h,3),h-=3),PS(l)}}}function vy(s){this._internalRoot=s}Zd.prototype.render=vy.prototype.render=function(s){var o=this._internalRoot;if(o===null)throw Error(r(409));var l=o.current,h=fr();TS(l,h,s,o,null,null)},Zd.prototype.unmount=vy.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var o=s.containerInfo;TS(s.current,2,null,s,null,null),Nd(),o[Oa]=null}};function Zd(s){this._internalRoot=s}Zd.prototype.unstable_scheduleHydration=function(s){if(s){var o=Qw();s={blockedOn:null,target:s,priority:o};for(var l=0;l<qs.length&&o!==0&&o<qs[l].priority;l++);qs.splice(l,0,s),l===0&&$S(s)}};var US=t.version;if(US!=="19.1.0")throw Error(r(527,US,"19.1.0"));L.findDOMNode=function(s){var o=s._reactInternals;if(o===void 0)throw typeof s.render=="function"?Error(r(188)):(s=Object.keys(s).join(","),Error(r(268,s)));return s=f(o),s=s!==null?d(s):null,s=s===null?null:s.stateNode,s};var x4={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:R,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Qd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Qd.isDisabled&&Qd.supportsFiber)try{sr=Qd.inject(x4),U=Qd}catch{}}return uu.createRoot=function(s,o){if(!i(s))throw Error(r(299));var l=!1,h="",m=QE,w=JE,C=e2,M=null;return o!=null&&(o.unstable_strictMode===!0&&(l=!0),o.identifierPrefix!==void 0&&(h=o.identifierPrefix),o.onUncaughtError!==void 0&&(m=o.onUncaughtError),o.onCaughtError!==void 0&&(w=o.onCaughtError),o.onRecoverableError!==void 0&&(C=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(M=o.unstable_transitionCallbacks)),o=RS(s,1,!1,null,null,l,h,m,w,C,M,null),s[Oa]=o.current,ty(s),new vy(o)},uu.hydrateRoot=function(s,o,l){if(!i(s))throw Error(r(299));var h=!1,m="",w=QE,C=JE,M=e2,Y=null,ae=null;return l!=null&&(l.unstable_strictMode===!0&&(h=!0),l.identifierPrefix!==void 0&&(m=l.identifierPrefix),l.onUncaughtError!==void 0&&(w=l.onUncaughtError),l.onCaughtError!==void 0&&(C=l.onCaughtError),l.onRecoverableError!==void 0&&(M=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(Y=l.unstable_transitionCallbacks),l.formState!==void 0&&(ae=l.formState)),o=RS(s,1,!0,o,l??null,h,m,w,C,M,Y,ae),o.context=OS(null),l=o.current,h=fr(),h=ug(h),m=As(h),m.callback=null,Rs(l,m,h),l=h,o.current.lanes=l,pl(o,l),di(o),s[Oa]=o.current,ty(s),new Zd(o)},uu.version="19.1.0",uu}var GS;function B4(){if(GS)return Sy.exports;GS=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Sy.exports=$4(),Sy.exports}var P4=B4(),fu={},KS;function U4(){if(KS)return fu;KS=1,Object.defineProperty(fu,"__esModule",{value:!0}),fu.parse=c,fu.serialize=d;const e=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,t=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,i=Object.prototype.toString,a=(()=>{const y=function(){};return y.prototype=Object.create(null),y})();function c(y,b){const v=new a,E=y.length;if(E<2)return v;const S=b?.decode||p;let _=0;do{const T=y.indexOf("=",_);if(T===-1)break;const O=y.indexOf(";",_),$=O===-1?E:O;if(T>$){_=y.lastIndexOf(";",T-1)+1;continue}const I=u(y,_,T),B=f(y,T,I),z=y.slice(I,B);if(v[z]===void 0){let q=u(y,T+1,$),k=f(y,$,q);const W=S(y.slice(q,k));v[z]=W}_=$+1}while(_<E);return v}function u(y,b,v){do{const E=y.charCodeAt(b);if(E!==32&&E!==9)return b}while(++b<v);return v}function f(y,b,v){for(;b>v;){const E=y.charCodeAt(--b);if(E!==32&&E!==9)return b+1}return v}function d(y,b,v){const E=v?.encode||encodeURIComponent;if(!e.test(y))throw new TypeError(`argument name is invalid: ${y}`);const S=E(b);if(!t.test(S))throw new TypeError(`argument val is invalid: ${b}`);let _=y+"="+S;if(!v)return _;if(v.maxAge!==void 0){if(!Number.isInteger(v.maxAge))throw new TypeError(`option maxAge is invalid: ${v.maxAge}`);_+="; Max-Age="+v.maxAge}if(v.domain){if(!n.test(v.domain))throw new TypeError(`option domain is invalid: ${v.domain}`);_+="; Domain="+v.domain}if(v.path){if(!r.test(v.path))throw new TypeError(`option path is invalid: ${v.path}`);_+="; Path="+v.path}if(v.expires){if(!g(v.expires)||!Number.isFinite(v.expires.valueOf()))throw new TypeError(`option expires is invalid: ${v.expires}`);_+="; Expires="+v.expires.toUTCString()}if(v.httpOnly&&(_+="; HttpOnly"),v.secure&&(_+="; Secure"),v.partitioned&&(_+="; Partitioned"),v.priority)switch(typeof v.priority=="string"?v.priority.toLowerCase():void 0){case"low":_+="; Priority=Low";break;case"medium":_+="; Priority=Medium";break;case"high":_+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${v.priority}`)}if(v.sameSite)switch(typeof v.sameSite=="string"?v.sameSite.toLowerCase():v.sameSite){case!0:case"strict":_+="; SameSite=Strict";break;case"lax":_+="; SameSite=Lax";break;case"none":_+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${v.sameSite}`)}return _}function p(y){if(y.indexOf("%")===-1)return y;try{return decodeURIComponent(y)}catch{return y}}function g(y){return i.call(y)==="[object Date]"}return fu}U4();var WS="popstate";function k4(e={}){function t(r,i){let{pathname:a,search:c,hash:u}=r.location;return ib("",{pathname:a,search:c,hash:u},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:ef(i)}return j4(t,n,null,e)}function Ot(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Di(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function M4(){return Math.random().toString(36).substring(2,10)}function YS(e,t){return{usr:e.state,key:e.key,idx:t}}function ib(e,t,n=null,r){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?el(t):t,state:n,key:t&&t.key||r||M4()}}function ef({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function el(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function j4(e,t,n,r={}){let{window:i=document.defaultView,v5Compat:a=!1}=r,c=i.history,u="POP",f=null,d=p();d==null&&(d=0,c.replaceState({...c.state,idx:d},""));function p(){return(c.state||{idx:null}).idx}function g(){u="POP";let S=p(),_=S==null?null:S-d;d=S,f&&f({action:u,location:E.location,delta:_})}function y(S,_){u="PUSH";let T=ib(E.location,S,_);d=p()+1;let O=YS(T,d),$=E.createHref(T);try{c.pushState(O,"",$)}catch(I){if(I instanceof DOMException&&I.name==="DataCloneError")throw I;i.location.assign($)}a&&f&&f({action:u,location:E.location,delta:1})}function b(S,_){u="REPLACE";let T=ib(E.location,S,_);d=p();let O=YS(T,d),$=E.createHref(T);c.replaceState(O,"",$),a&&f&&f({action:u,location:E.location,delta:0})}function v(S){return L4(S)}let E={get action(){return u},get location(){return e(i,c)},listen(S){if(f)throw new Error("A history only accepts one active listener");return i.addEventListener(WS,g),f=S,()=>{i.removeEventListener(WS,g),f=null}},createHref(S){return t(i,S)},createURL:v,encodeLocation(S){let _=v(S);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:y,replace:b,go(S){return c.go(S)}};return E}function L4(e,t=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Ot(n,"No window.location.(origin|href) available to create URL");let r=typeof e=="string"?e:ef(e);return r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function QO(e,t,n="/"){return z4(e,t,n,!1)}function z4(e,t,n,r){let i=typeof t=="string"?el(t):t,a=ps(i.pathname||"/",n);if(a==null)return null;let c=JO(e);q4(c);let u=null;for(let f=0;u==null&&f<c.length;++f){let d=J4(a);u=Z4(c[f],d,r)}return u}function JO(e,t=[],n=[],r=""){let i=(a,c,u)=>{let f={relativePath:u===void 0?a.path||"":u,caseSensitive:a.caseSensitive===!0,childrenIndex:c,route:a};f.relativePath.startsWith("/")&&(Ot(f.relativePath.startsWith(r),`Absolute route path "${f.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(r.length));let d=us([r,f.relativePath]),p=n.concat(f);a.children&&a.children.length>0&&(Ot(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${d}".`),JO(a.children,t,p,d)),!(a.path==null&&!a.index)&&t.push({path:d,score:Y4(d,a.index),routesMeta:p})};return e.forEach((a,c)=>{if(a.path===""||!a.path?.includes("?"))i(a,c);else for(let u of eT(a.path))i(a,c,u)}),t}function eT(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let c=eT(r.join("/")),u=[];return u.push(...c.map(f=>f===""?a:[a,f].join("/"))),i&&u.push(...c),u.map(f=>e.startsWith("/")&&f===""?"/":f)}function q4(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:X4(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var H4=/^:[\w-]+$/,F4=3,V4=2,G4=1,K4=10,W4=-2,XS=e=>e==="*";function Y4(e,t){let n=e.split("/"),r=n.length;return n.some(XS)&&(r+=W4),t&&(r+=V4),n.filter(i=>!XS(i)).reduce((i,a)=>i+(H4.test(a)?F4:a===""?G4:K4),r)}function X4(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function Z4(e,t,n=!1){let{routesMeta:r}=e,i={},a="/",c=[];for(let u=0;u<r.length;++u){let f=r[u],d=u===r.length-1,p=a==="/"?t:t.slice(a.length)||"/",g=Yh({path:f.relativePath,caseSensitive:f.caseSensitive,end:d},p),y=f.route;if(!g&&d&&n&&!r[r.length-1].route.index&&(g=Yh({path:f.relativePath,caseSensitive:f.caseSensitive,end:!1},p)),!g)return null;Object.assign(i,g.params),c.push({params:i,pathname:us([a,g.pathname]),pathnameBase:r$(us([a,g.pathnameBase])),route:y}),g.pathnameBase!=="/"&&(a=us([a,g.pathnameBase]))}return c}function Yh(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=Q4(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let a=i[0],c=a.replace(/(.)\/+$/,"$1"),u=i.slice(1);return{params:r.reduce((d,{paramName:p,isOptional:g},y)=>{if(p==="*"){let v=u[y]||"";c=a.slice(0,a.length-v.length).replace(/(.)\/+$/,"$1")}const b=u[y];return g&&!b?d[p]=void 0:d[p]=(b||"").replace(/%2F/g,"/"),d},{}),pathname:a,pathnameBase:c,pattern:e}}function Q4(e,t=!1,n=!0){Di(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,u,f)=>(r.push({paramName:u,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function J4(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Di(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function ps(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function e$(e,t="/"){let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?el(e):e;return{pathname:n?n.startsWith("/")?n:t$(n,t):t,search:i$(r),hash:s$(i)}}function t$(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Ry(e,t,n,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function n$(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function tT(e){let t=n$(e);return t.map((n,r)=>r===t.length-1?n.pathname:n.pathnameBase)}function nT(e,t,n,r=!1){let i;typeof e=="string"?i=el(e):(i={...e},Ot(!i.pathname||!i.pathname.includes("?"),Ry("?","pathname","search",i)),Ot(!i.pathname||!i.pathname.includes("#"),Ry("#","pathname","hash",i)),Ot(!i.search||!i.search.includes("#"),Ry("#","search","hash",i)));let a=e===""||i.pathname==="",c=a?"/":i.pathname,u;if(c==null)u=n;else{let g=t.length-1;if(!r&&c.startsWith("..")){let y=c.split("/");for(;y[0]==="..";)y.shift(),g-=1;i.pathname=y.join("/")}u=g>=0?t[g]:"/"}let f=e$(i,u),d=c&&c!=="/"&&c.endsWith("/"),p=(a||c===".")&&n.endsWith("/");return!f.pathname.endsWith("/")&&(d||p)&&(f.pathname+="/"),f}var us=e=>e.join("/").replace(/\/\/+/g,"/"),r$=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),i$=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,s$=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function o$(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var rT=["POST","PUT","PATCH","DELETE"];new Set(rT);var a$=["GET",...rT];new Set(a$);var tl=j.createContext(null);tl.displayName="DataRouter";var bp=j.createContext(null);bp.displayName="DataRouterState";var iT=j.createContext({isTransitioning:!1});iT.displayName="ViewTransition";var c$=j.createContext(new Map);c$.displayName="Fetchers";var l$=j.createContext(null);l$.displayName="Await";var $i=j.createContext(null);$i.displayName="Navigation";var wf=j.createContext(null);wf.displayName="Location";var Bi=j.createContext({outlet:null,matches:[],isDataRoute:!1});Bi.displayName="Route";var Ev=j.createContext(null);Ev.displayName="RouteError";function u$(e,{relative:t}={}){Ot(Ef(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=j.useContext($i),{hash:i,pathname:a,search:c}=Sf(e,{relative:t}),u=a;return n!=="/"&&(u=a==="/"?n:us([n,a])),r.createHref({pathname:u,search:c,hash:i})}function Ef(){return j.useContext(wf)!=null}function pa(){return Ot(Ef(),"useLocation() may be used only in the context of a <Router> component."),j.useContext(wf).location}var sT="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function oT(e){j.useContext($i).static||j.useLayoutEffect(e)}function f$(){let{isDataRoute:e}=j.useContext(Bi);return e?R$():d$()}function d$(){Ot(Ef(),"useNavigate() may be used only in the context of a <Router> component.");let e=j.useContext(tl),{basename:t,navigator:n}=j.useContext($i),{matches:r}=j.useContext(Bi),{pathname:i}=pa(),a=JSON.stringify(tT(r)),c=j.useRef(!1);return oT(()=>{c.current=!0}),j.useCallback((f,d={})=>{if(Di(c.current,sT),!c.current)return;if(typeof f=="number"){n.go(f);return}let p=nT(f,JSON.parse(a),i,d.relative==="path");e==null&&t!=="/"&&(p.pathname=p.pathname==="/"?t:us([t,p.pathname])),(d.replace?n.replace:n.push)(p,d.state,d)},[t,n,a,i,e])}var h$=j.createContext(null);function p$(e){let t=j.useContext(Bi).outlet;return t&&j.createElement(h$.Provider,{value:e},t)}function Sf(e,{relative:t}={}){let{matches:n}=j.useContext(Bi),{pathname:r}=pa(),i=JSON.stringify(tT(n));return j.useMemo(()=>nT(e,JSON.parse(i),r,t==="path"),[e,i,r,t])}function g$(e,t){return aT(e,t)}function aT(e,t,n,r){Ot(Ef(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=j.useContext($i),{matches:a}=j.useContext(Bi),c=a[a.length-1],u=c?c.params:{},f=c?c.pathname:"/",d=c?c.pathnameBase:"/",p=c&&c.route;{let _=p&&p.path||"";cT(f,!p||_.endsWith("*")||_.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${_}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${_}"> to <Route path="${_==="/"?"*":`${_}/*`}">.`)}let g=pa(),y;if(t){let _=typeof t=="string"?el(t):t;Ot(d==="/"||_.pathname?.startsWith(d),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${d}" but pathname "${_.pathname}" was given in the \`location\` prop.`),y=_}else y=g;let b=y.pathname||"/",v=b;if(d!=="/"){let _=d.replace(/^\//,"").split("/");v="/"+b.replace(/^\//,"").split("/").slice(_.length).join("/")}let E=QO(e,{pathname:v});Di(p||E!=null,`No routes matched location "${y.pathname}${y.search}${y.hash}" `),Di(E==null||E[E.length-1].route.element!==void 0||E[E.length-1].route.Component!==void 0||E[E.length-1].route.lazy!==void 0,`Matched leaf route at location "${y.pathname}${y.search}${y.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let S=w$(E&&E.map(_=>Object.assign({},_,{params:Object.assign({},u,_.params),pathname:us([d,i.encodeLocation?i.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?d:us([d,i.encodeLocation?i.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),a,n,r);return t&&S?j.createElement(wf.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...y},navigationType:"POP"}},S):S}function m$(){let e=A$(),t=o$(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},c=null;return console.error("Error handled by React Router default ErrorBoundary:",e),c=j.createElement(j.Fragment,null,j.createElement("p",null," Hey developer "),j.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",j.createElement("code",{style:a},"ErrorBoundary")," or"," ",j.createElement("code",{style:a},"errorElement")," prop on your route.")),j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},t),n?j.createElement("pre",{style:i},n):null,c)}var y$=j.createElement(m$,null),b$=class extends j.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?j.createElement(Bi.Provider,{value:this.props.routeContext},j.createElement(Ev.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function v$({routeContext:e,match:t,children:n}){let r=j.useContext(tl);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),j.createElement(Bi.Provider,{value:e},n)}function w$(e,t=[],n=null,r=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let i=e,a=n?.errors;if(a!=null){let f=i.findIndex(d=>d.route.id&&a?.[d.route.id]!==void 0);Ot(f>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),i=i.slice(0,Math.min(i.length,f+1))}let c=!1,u=-1;if(n)for(let f=0;f<i.length;f++){let d=i[f];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(u=f),d.route.id){let{loaderData:p,errors:g}=n,y=d.route.loader&&!p.hasOwnProperty(d.route.id)&&(!g||g[d.route.id]===void 0);if(d.route.lazy||y){c=!0,u>=0?i=i.slice(0,u+1):i=[i[0]];break}}}return i.reduceRight((f,d,p)=>{let g,y=!1,b=null,v=null;n&&(g=a&&d.route.id?a[d.route.id]:void 0,b=d.route.errorElement||y$,c&&(u<0&&p===0?(cT("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),y=!0,v=null):u===p&&(y=!0,v=d.route.hydrateFallbackElement||null)));let E=t.concat(i.slice(0,p+1)),S=()=>{let _;return g?_=b:y?_=v:d.route.Component?_=j.createElement(d.route.Component,null):d.route.element?_=d.route.element:_=f,j.createElement(v$,{match:d,routeContext:{outlet:f,matches:E,isDataRoute:n!=null},children:_})};return n&&(d.route.ErrorBoundary||d.route.errorElement||p===0)?j.createElement(b$,{location:n.location,revalidation:n.revalidation,component:b,error:g,children:S(),routeContext:{outlet:null,matches:E,isDataRoute:!0}}):S()},null)}function Sv(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function E$(e){let t=j.useContext(tl);return Ot(t,Sv(e)),t}function S$(e){let t=j.useContext(bp);return Ot(t,Sv(e)),t}function _$(e){let t=j.useContext(Bi);return Ot(t,Sv(e)),t}function _v(e){let t=_$(e),n=t.matches[t.matches.length-1];return Ot(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function x$(){return _v("useRouteId")}function A$(){let e=j.useContext(Ev),t=S$("useRouteError"),n=_v("useRouteError");return e!==void 0?e:t.errors?.[n]}function R$(){let{router:e}=E$("useNavigate"),t=_v("useNavigate"),n=j.useRef(!1);return oT(()=>{n.current=!0}),j.useCallback(async(i,a={})=>{Di(n.current,sT),n.current&&(typeof i=="number"?e.navigate(i):await e.navigate(i,{fromRouteId:t,...a}))},[e,t])}var ZS={};function cT(e,t,n){!t&&!ZS[e]&&(ZS[e]=!0,Di(!1,n))}j.memo(O$);function O$({routes:e,future:t,state:n}){return aT(e,void 0,n,t)}function T$(e){return p$(e.context)}function Js(e){Ot(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function D$({basename:e="/",children:t=null,location:n,navigationType:r="POP",navigator:i,static:a=!1}){Ot(!Ef(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=e.replace(/^\/*/,"/"),u=j.useMemo(()=>({basename:c,navigator:i,static:a,future:{}}),[c,i,a]);typeof n=="string"&&(n=el(n));let{pathname:f="/",search:d="",hash:p="",state:g=null,key:y="default"}=n,b=j.useMemo(()=>{let v=ps(f,c);return v==null?null:{location:{pathname:v,search:d,hash:p,state:g,key:y},navigationType:r}},[c,f,d,p,g,y,r]);return Di(b!=null,`<Router basename="${c}"> is not able to match the URL "${f}${d}${p}" because it does not start with the basename, so the <Router> won't render anything.`),b==null?null:j.createElement($i.Provider,{value:u},j.createElement(wf.Provider,{children:t,value:b}))}function C$({children:e,location:t}){return g$(sb(e),t)}function sb(e,t=[]){let n=[];return j.Children.forEach(e,(r,i)=>{if(!j.isValidElement(r))return;let a=[...t,i];if(r.type===j.Fragment){n.push.apply(n,sb(r.props.children,a));return}Ot(r.type===Js,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ot(!r.props.index||!r.props.children,"An index route cannot have child routes.");let c={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(c.children=sb(r.props.children,a)),n.push(c)}),n}var Nh="get",$h="application/x-www-form-urlencoded";function vp(e){return e!=null&&typeof e.tagName=="string"}function I$(e){return vp(e)&&e.tagName.toLowerCase()==="button"}function N$(e){return vp(e)&&e.tagName.toLowerCase()==="form"}function $$(e){return vp(e)&&e.tagName.toLowerCase()==="input"}function B$(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function P$(e,t){return e.button===0&&(!t||t==="_self")&&!B$(e)}var Jd=null;function U$(){if(Jd===null)try{new FormData(document.createElement("form"),0),Jd=!1}catch{Jd=!0}return Jd}var k$=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Oy(e){return e!=null&&!k$.has(e)?(Di(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${$h}"`),null):e}function M$(e,t){let n,r,i,a,c;if(N$(e)){let u=e.getAttribute("action");r=u?ps(u,t):null,n=e.getAttribute("method")||Nh,i=Oy(e.getAttribute("enctype"))||$h,a=new FormData(e)}else if(I$(e)||$$(e)&&(e.type==="submit"||e.type==="image")){let u=e.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let f=e.getAttribute("formaction")||u.getAttribute("action");if(r=f?ps(f,t):null,n=e.getAttribute("formmethod")||u.getAttribute("method")||Nh,i=Oy(e.getAttribute("formenctype"))||Oy(u.getAttribute("enctype"))||$h,a=new FormData(u,e),!U$()){let{name:d,type:p,value:g}=e;if(p==="image"){let y=d?`${d}.`:"";a.append(`${y}x`,"0"),a.append(`${y}y`,"0")}else d&&a.append(d,g)}}else{if(vp(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Nh,r=null,i=$h,c=e}return a&&i==="text/plain"&&(c=a,a=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:a,body:c}}function xv(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}async function j$(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function L$(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function z$(e,t,n){let r=await Promise.all(e.map(async i=>{let a=t.routes[i.route.id];if(a){let c=await j$(a,n);return c.links?c.links():[]}return[]}));return V$(r.flat(1).filter(L$).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function QS(e,t,n,r,i,a){let c=(f,d)=>n[d]?f.route.id!==n[d].route.id:!0,u=(f,d)=>n[d].pathname!==f.pathname||n[d].route.path?.endsWith("*")&&n[d].params["*"]!==f.params["*"];return a==="assets"?t.filter((f,d)=>c(f,d)||u(f,d)):a==="data"?t.filter((f,d)=>{let p=r.routes[f.route.id];if(!p||!p.hasLoader)return!1;if(c(f,d)||u(f,d))return!0;if(f.route.shouldRevalidate){let g=f.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:f.params,defaultShouldRevalidate:!0});if(typeof g=="boolean")return g}return!0}):[]}function q$(e,t,{includeHydrateFallback:n}={}){return H$(e.map(r=>{let i=t.routes[r.route.id];if(!i)return[];let a=[i.module];return i.clientActionModule&&(a=a.concat(i.clientActionModule)),i.clientLoaderModule&&(a=a.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(a=a.concat(i.hydrateFallbackModule)),i.imports&&(a=a.concat(i.imports)),a}).flat(1))}function H$(e){return[...new Set(e)]}function F$(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}function V$(e,t){let n=new Set;return new Set(t),e.reduce((r,i)=>{let a=JSON.stringify(F$(i));return n.has(a)||(n.add(a),r.push({key:a,link:i})),r},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var G$=new Set([100,101,204,205]);function K$(e,t){let n=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return n.pathname==="/"?n.pathname="_root.data":t&&ps(n.pathname,t)==="/"?n.pathname=`${t.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function lT(){let e=j.useContext(tl);return xv(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function W$(){let e=j.useContext(bp);return xv(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var Av=j.createContext(void 0);Av.displayName="FrameworkContext";function uT(){let e=j.useContext(Av);return xv(e,"You must render this element inside a <HydratedRouter> element"),e}function Y$(e,t){let n=j.useContext(Av),[r,i]=j.useState(!1),[a,c]=j.useState(!1),{onFocus:u,onBlur:f,onMouseEnter:d,onMouseLeave:p,onTouchStart:g}=t,y=j.useRef(null);j.useEffect(()=>{if(e==="render"&&c(!0),e==="viewport"){let E=_=>{_.forEach(T=>{c(T.isIntersecting)})},S=new IntersectionObserver(E,{threshold:.5});return y.current&&S.observe(y.current),()=>{S.disconnect()}}},[e]),j.useEffect(()=>{if(r){let E=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(E)}}},[r]);let b=()=>{i(!0)},v=()=>{i(!1),c(!1)};return n?e!=="intent"?[a,y,{}]:[a,y,{onFocus:du(u,b),onBlur:du(f,v),onMouseEnter:du(d,b),onMouseLeave:du(p,v),onTouchStart:du(g,b)}]:[!1,y,{}]}function du(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function X$({page:e,...t}){let{router:n}=lT(),r=j.useMemo(()=>QO(n.routes,e,n.basename),[n.routes,e,n.basename]);return r?j.createElement(Q$,{page:e,matches:r,...t}):null}function Z$(e){let{manifest:t,routeModules:n}=uT(),[r,i]=j.useState([]);return j.useEffect(()=>{let a=!1;return z$(e,t,n).then(c=>{a||i(c)}),()=>{a=!0}},[e,t,n]),r}function Q$({page:e,matches:t,...n}){let r=pa(),{manifest:i,routeModules:a}=uT(),{basename:c}=lT(),{loaderData:u,matches:f}=W$(),d=j.useMemo(()=>QS(e,t,f,i,r,"data"),[e,t,f,i,r]),p=j.useMemo(()=>QS(e,t,f,i,r,"assets"),[e,t,f,i,r]),g=j.useMemo(()=>{if(e===r.pathname+r.search+r.hash)return[];let v=new Set,E=!1;if(t.forEach(_=>{let T=i.routes[_.route.id];!T||!T.hasLoader||(!d.some(O=>O.route.id===_.route.id)&&_.route.id in u&&a[_.route.id]?.shouldRevalidate||T.hasClientLoader?E=!0:v.add(_.route.id))}),v.size===0)return[];let S=K$(e,c);return E&&v.size>0&&S.searchParams.set("_routes",t.filter(_=>v.has(_.route.id)).map(_=>_.route.id).join(",")),[S.pathname+S.search]},[c,u,r,i,d,t,e,a]),y=j.useMemo(()=>q$(p,i),[p,i]),b=Z$(p);return j.createElement(j.Fragment,null,g.map(v=>j.createElement("link",{key:v,rel:"prefetch",as:"fetch",href:v,...n})),y.map(v=>j.createElement("link",{key:v,rel:"modulepreload",href:v,...n})),b.map(({key:v,link:E})=>j.createElement("link",{key:v,...E})))}function J$(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var fT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{fT&&(window.__reactRouterVersion="7.6.3")}catch{}function eB({basename:e,children:t,window:n}){let r=j.useRef();r.current==null&&(r.current=k4({window:n,v5Compat:!0}));let i=r.current,[a,c]=j.useState({action:i.action,location:i.location}),u=j.useCallback(f=>{j.startTransition(()=>c(f))},[c]);return j.useLayoutEffect(()=>i.listen(u),[i,u]),j.createElement(D$,{basename:e,children:t,location:a.location,navigationType:a.action,navigator:i})}var dT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,hT=j.forwardRef(function({onClick:t,discover:n="render",prefetch:r="none",relative:i,reloadDocument:a,replace:c,state:u,target:f,to:d,preventScrollReset:p,viewTransition:g,...y},b){let{basename:v}=j.useContext($i),E=typeof d=="string"&&dT.test(d),S,_=!1;if(typeof d=="string"&&E&&(S=d,fT))try{let k=new URL(window.location.href),W=d.startsWith("//")?new URL(k.protocol+d):new URL(d),F=ps(W.pathname,v);W.origin===k.origin&&F!=null?d=F+W.search+W.hash:_=!0}catch{Di(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let T=u$(d,{relative:i}),[O,$,I]=Y$(r,y),B=rB(d,{replace:c,state:u,target:f,preventScrollReset:p,relative:i,viewTransition:g});function z(k){t&&t(k),k.defaultPrevented||B(k)}let q=j.createElement("a",{...y,...I,href:S||T,onClick:_||a?t:z,ref:J$(b,$),target:f,"data-discover":!E&&n==="render"?"true":void 0});return O&&!E?j.createElement(j.Fragment,null,q,j.createElement(X$,{page:T})):q});hT.displayName="Link";var eo=j.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:r="",end:i=!1,style:a,to:c,viewTransition:u,children:f,...d},p){let g=Sf(c,{relative:d.relative}),y=pa(),b=j.useContext(bp),{navigator:v,basename:E}=j.useContext($i),S=b!=null&&cB(g)&&u===!0,_=v.encodeLocation?v.encodeLocation(g).pathname:g.pathname,T=y.pathname,O=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;n||(T=T.toLowerCase(),O=O?O.toLowerCase():null,_=_.toLowerCase()),O&&E&&(O=ps(O,E)||O);const $=_!=="/"&&_.endsWith("/")?_.length-1:_.length;let I=T===_||!i&&T.startsWith(_)&&T.charAt($)==="/",B=O!=null&&(O===_||!i&&O.startsWith(_)&&O.charAt(_.length)==="/"),z={isActive:I,isPending:B,isTransitioning:S},q=I?t:void 0,k;typeof r=="function"?k=r(z):k=[r,I?"active":null,B?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let W=typeof a=="function"?a(z):a;return j.createElement(hT,{...d,"aria-current":q,className:k,ref:p,style:W,to:c,viewTransition:u},typeof f=="function"?f(z):f)});eo.displayName="NavLink";var tB=j.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:r,replace:i,state:a,method:c=Nh,action:u,onSubmit:f,relative:d,preventScrollReset:p,viewTransition:g,...y},b)=>{let v=oB(),E=aB(u,{relative:d}),S=c.toLowerCase()==="get"?"get":"post",_=typeof u=="string"&&dT.test(u),T=O=>{if(f&&f(O),O.defaultPrevented)return;O.preventDefault();let $=O.nativeEvent.submitter,I=$?.getAttribute("formmethod")||c;v($||O.currentTarget,{fetcherKey:t,method:I,navigate:n,replace:i,state:a,relative:d,preventScrollReset:p,viewTransition:g})};return j.createElement("form",{ref:b,method:S,action:E,onSubmit:r?f:T,...y,"data-discover":!_&&e==="render"?"true":void 0})});tB.displayName="Form";function nB(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function pT(e){let t=j.useContext(tl);return Ot(t,nB(e)),t}function rB(e,{target:t,replace:n,state:r,preventScrollReset:i,relative:a,viewTransition:c}={}){let u=f$(),f=pa(),d=Sf(e,{relative:a});return j.useCallback(p=>{if(P$(p,t)){p.preventDefault();let g=n!==void 0?n:ef(f)===ef(d);u(e,{replace:g,state:r,preventScrollReset:i,relative:a,viewTransition:c})}},[f,u,d,n,r,t,e,i,a,c])}var iB=0,sB=()=>`__${String(++iB)}__`;function oB(){let{router:e}=pT("useSubmit"),{basename:t}=j.useContext($i),n=x$();return j.useCallback(async(r,i={})=>{let{action:a,method:c,encType:u,formData:f,body:d}=M$(r,t);if(i.navigate===!1){let p=i.fetcherKey||sB();await e.fetch(p,n,i.action||a,{preventScrollReset:i.preventScrollReset,formData:f,body:d,formMethod:i.method||c,formEncType:i.encType||u,flushSync:i.flushSync})}else await e.navigate(i.action||a,{preventScrollReset:i.preventScrollReset,formData:f,body:d,formMethod:i.method||c,formEncType:i.encType||u,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[e,t,n])}function aB(e,{relative:t}={}){let{basename:n}=j.useContext($i),r=j.useContext(Bi);Ot(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),a={...Sf(e||".",{relative:t})},c=pa();if(e==null){a.search=c.search;let u=new URLSearchParams(a.search),f=u.getAll("index");if(f.some(p=>p==="")){u.delete("index"),f.filter(g=>g).forEach(g=>u.append("index",g));let p=u.toString();a.search=p?`?${p}`:""}}return(!e||e===".")&&i.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(a.pathname=a.pathname==="/"?n:us([n,a.pathname])),ef(a)}function cB(e,t={}){let n=j.useContext(iT);Ot(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=pT("useViewTransitionState"),i=Sf(e,{relative:t.relative});if(!n.isTransitioning)return!1;let a=ps(n.currentLocation.pathname,r)||n.currentLocation.pathname,c=ps(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Yh(i.pathname,c)!=null||Yh(i.pathname,a)!=null}[...G$];var lB=ZO();const jc=vs(lB);let gT=null;const uB=e=>{gT=e};let ht=function(e){return e[e.debug=5]="debug",e[e.info=4]="info",e[e.log=3]="log",e[e.warn=2]="warn",e[e.error=1]="error",e}({});const fB=e=>{const{title:t,message:n}=e;return[`
    %c${t}
    ============================

    ${n}

    ============================
    `.replace(/\n[^\S\r\n]+/g,`
`).trim(),"font-weight:bold;font-family:monospace;"]},Fe=async e=>{const{title:t,message:n,level:r,always:i}=e,a=await gT?.()?.get("logger.level")??ht.warn;if(!i&&a<r)return;const c=fB({title:t,message:n});switch(r){case ht.debug:console.debug(...c);break;case ht.info:console.info(...c);break;case ht.warn:console.warn(...c);break;case ht.error:console.error(...c);break;default:console.log(...c)}};Fe.deprecate=e=>{const{pkg:t,subject:n,transition:r,level:i=ht.warn,message:a="",callback:c=null}=e,u=d=>d.charAt(0).toUpperCase()+d.slice(1),f=()=>Fe({title:`${t?t+" ":""}Deprecation Notice`,message:`
      ${n?`${u(n)} is deprecated and will cease to work in future releases${t?" of "+t:""}.`:""}${a?`
`+a:""}${r?`
You can learn more (including a guide on common transition paths) here: ${r}`:""}
    `.trim(),level:i});return typeof c=="function"?async function(){return await f(),await c(...arguments)}:f()};function he(e,t){if(!e){const a=new Error(`INVARIANT ${t}`);a.stack=a.stack?.split(`
`)?.filter(c=>!/at invariant/.test(c))?.join(`
`);for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw console.error(`

---

`,a,`

`,...r,`

---

`),a}}let eh;const dB=new Uint8Array(16);function hB(){if(!eh&&(eh=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!eh))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return eh(dB)}const mn=[];for(let e=0;e<256;++e)mn.push((e+256).toString(16).slice(1));function pB(e,t=0){return mn[e[t+0]]+mn[e[t+1]]+mn[e[t+2]]+mn[e[t+3]]+"-"+mn[e[t+4]]+mn[e[t+5]]+"-"+mn[e[t+6]]+mn[e[t+7]]+"-"+mn[e[t+8]]+mn[e[t+9]]+"-"+mn[e[t+10]]+mn[e[t+11]]+mn[e[t+12]]+mn[e[t+13]]+mn[e[t+14]]+mn[e[t+15]]}const gB=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),JS={randomUUID:gB};function Rv(e,t,n){if(JS.randomUUID&&!e)return JS.randomUUID();e=e||{};const r=e.random||(e.rng||hB)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,pB(r)}var it=function(e){return e.UNKNOWN="UNKNOWN",e.SCRIPT="SCRIPT",e.TRANSACTION="TRANSACTION",e.GET_TRANSACTION_STATUS="GET_TRANSACTION_STATUS",e.GET_ACCOUNT="GET_ACCOUNT",e.GET_EVENTS="GET_EVENTS",e.PING="PING",e.GET_TRANSACTION="GET_TRANSACTION",e.GET_BLOCK="GET_BLOCK",e.GET_BLOCK_HEADER="GET_BLOCK_HEADER",e.GET_COLLECTION="GET_COLLECTION",e.GET_NETWORK_PARAMETERS="GET_NETWORK_PARAMETERS",e.SUBSCRIBE_EVENTS="SUBSCRIBE_EVENTS",e.GET_NODE_VERSION_INFO="GET_NODE_VERSION_INFO",e}({}),_f=function(e){return e.BAD="BAD",e.OK="OK",e}({}),tf=function(e){return e.AUTHORIZER="authorizer",e.PAYER="payer",e.PROPOSER="proposer",e}({}),wp=function(e){return e.ARGUMENT="ARGUMENT",e.ACCOUNT="ACCOUNT",e}({}),e_=function(e){return e[e.UNKNOWN_ERROR=-1]="UNKNOWN_ERROR",e[e.TX_VALIDATION_ERROR=1e3]="TX_VALIDATION_ERROR",e[e.INVALID_TX_BYTE_SIZE_ERROR=1001]="INVALID_TX_BYTE_SIZE_ERROR",e[e.INVALID_REFERENCE_BLOCK_ERROR=1002]="INVALID_REFERENCE_BLOCK_ERROR",e[e.EXPIRED_TRANSACTION_ERROR=1003]="EXPIRED_TRANSACTION_ERROR",e[e.INVALID_SCRIPT_ERROR=1004]="INVALID_SCRIPT_ERROR",e[e.INVALID_GAS_LIMIT_ERROR=1005]="INVALID_GAS_LIMIT_ERROR",e[e.INVALID_PROPOSAL_SIGNATURE_ERROR=1006]="INVALID_PROPOSAL_SIGNATURE_ERROR",e[e.INVALID_PROPOSAL_SEQ_NUMBER_ERROR=1007]="INVALID_PROPOSAL_SEQ_NUMBER_ERROR",e[e.INVALID_PAYLOAD_SIGNATURE_ERROR=1008]="INVALID_PAYLOAD_SIGNATURE_ERROR",e[e.INVALID_ENVELOPE_SIGNATURE_ERROR=1009]="INVALID_ENVELOPE_SIGNATURE_ERROR",e[e.FVM_INTERNAL_ERROR=1050]="FVM_INTERNAL_ERROR",e[e.VALUE_ERROR=1051]="VALUE_ERROR",e[e.INVALID_ARGUMENT_ERROR=1052]="INVALID_ARGUMENT_ERROR",e[e.INVALID_ADDRESS_ERROR=1053]="INVALID_ADDRESS_ERROR",e[e.INVALID_LOCATION_ERROR=1054]="INVALID_LOCATION_ERROR",e[e.ACCOUNT_AUTHORIZATION_ERROR=1055]="ACCOUNT_AUTHORIZATION_ERROR",e[e.OPERATION_AUTHORIZATION_ERROR=1056]="OPERATION_AUTHORIZATION_ERROR",e[e.OPERATION_NOT_SUPPORTED_ERROR=1057]="OPERATION_NOT_SUPPORTED_ERROR",e[e.BLOCK_HEIGHT_OUT_OF_RANGE_ERROR=1058]="BLOCK_HEIGHT_OUT_OF_RANGE_ERROR",e[e.EXECUTION_ERROR=1100]="EXECUTION_ERROR",e[e.CADENCE_RUNTIME_ERROR=1101]="CADENCE_RUNTIME_ERROR",e[e.ENCODING_UNSUPPORTED_VALUE=1102]="ENCODING_UNSUPPORTED_VALUE",e[e.STORAGE_CAPACITY_EXCEEDED=1103]="STORAGE_CAPACITY_EXCEEDED",e[e.GAS_LIMIT_EXCEEDED_ERROR=1104]="GAS_LIMIT_EXCEEDED_ERROR",e[e.EVENT_LIMIT_EXCEEDED_ERROR=1105]="EVENT_LIMIT_EXCEEDED_ERROR",e[e.LEDGER_INTERACTION_LIMIT_EXCEEDED_ERROR=1106]="LEDGER_INTERACTION_LIMIT_EXCEEDED_ERROR",e[e.STATE_KEY_SIZE_LIMIT_ERROR=1107]="STATE_KEY_SIZE_LIMIT_ERROR",e[e.STATE_VALUE_SIZE_LIMIT_ERROR=1108]="STATE_VALUE_SIZE_LIMIT_ERROR",e[e.TRANSACTION_FEE_DEDUCTION_FAILED_ERROR=1109]="TRANSACTION_FEE_DEDUCTION_FAILED_ERROR",e[e.COMPUTATION_LIMIT_EXCEEDED_ERROR=1110]="COMPUTATION_LIMIT_EXCEEDED_ERROR",e[e.MEMORY_LIMIT_EXCEEDED_ERROR=1111]="MEMORY_LIMIT_EXCEEDED_ERROR",e[e.COULD_NOT_DECODE_EXECUTION_PARAMETER_FROM_STATE=1112]="COULD_NOT_DECODE_EXECUTION_PARAMETER_FROM_STATE",e[e.SCRIPT_EXECUTION_TIMED_OUT_ERROR=1113]="SCRIPT_EXECUTION_TIMED_OUT_ERROR",e[e.SCRIPT_EXECUTION_CANCELLED_ERROR=1114]="SCRIPT_EXECUTION_CANCELLED_ERROR",e[e.EVENT_ENCODING_ERROR=1115]="EVENT_ENCODING_ERROR",e[e.INVALID_INTERNAL_STATE_ACCESS_ERROR=1116]="INVALID_INTERNAL_STATE_ACCESS_ERROR",e[e.INSUFFICIENT_PAYER_BALANCE=1118]="INSUFFICIENT_PAYER_BALANCE",e[e.ACCOUNT_ERROR=1200]="ACCOUNT_ERROR",e[e.ACCOUNT_NOT_FOUND_ERROR=1201]="ACCOUNT_NOT_FOUND_ERROR",e[e.ACCOUNT_PUBLIC_KEY_NOT_FOUND_ERROR=1202]="ACCOUNT_PUBLIC_KEY_NOT_FOUND_ERROR",e[e.ACCOUNT_ALREADY_EXISTS_ERROR=1203]="ACCOUNT_ALREADY_EXISTS_ERROR",e[e.FROZEN_ACCOUNT_ERROR=1204]="FROZEN_ACCOUNT_ERROR",e[e.ACCOUNT_STORAGE_NOT_INITIALIZED_ERROR=1205]="ACCOUNT_STORAGE_NOT_INITIALIZED_ERROR",e[e.ACCOUNT_PUBLIC_KEY_LIMIT_ERROR=1206]="ACCOUNT_PUBLIC_KEY_LIMIT_ERROR",e[e.CONTRACT_ERROR=1250]="CONTRACT_ERROR",e[e.CONTRACT_NOT_FOUND_ERROR=1251]="CONTRACT_NOT_FOUND_ERROR",e[e.CONTRACT_NAMES_NOT_FOUND_ERROR=1252]="CONTRACT_NAMES_NOT_FOUND_ERROR",e[e.EVM_EXECUTION_ERROR=1300]="EVM_EXECUTION_ERROR",e}({}),ga=function(e){return e.BLOCKS="blocks",e.BLOCK_HEADERS="block_headers",e.BLOCK_DIGESTS="block_digests",e.ACCOUNT_STATUSES="account_statuses",e.TRANSACTION_STATUSES="transaction_statuses",e.EVENTS="events",e}({}),mB=function(e){return e[e.UNKNOWN=0]="UNKNOWN",e[e.PENDING=1]="PENDING",e[e.FINALIZED=2]="FINALIZED",e[e.EXECUTED=3]="EXECUTED",e[e.SEALED=4]="SEALED",e[e.EXPIRED=5]="EXPIRED",e}({});const yB=()=>{const e=[];let t;return{async deliver(n){e.push(n),t&&(t(e.shift()),t=void 0)},receive(){return new Promise(function(r){const i=e.shift();if(i)return r(i);t=r})}}};let t_;const bB=e=>(t_||(t_=Promise.resolve())).then(e).catch(t=>setTimeout(()=>{throw t},0)),nf="INIT",nl="SUBSCRIBE",ra="UNSUBSCRIBE",ob="UPDATED",mT="SNAPSHOT",ab="EXIT",n_="TERMINATE",Bh=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||typeof window=="object"&&window.window===window&&window||{FCL_REGISTRY:null};Bh.FCL_REGISTRY=Bh.FCL_REGISTRY==null?{}:Bh.FCL_REGISTRY;const dt=Bh.FCL_REGISTRY;let Ty=0;const vB=5e3;function Zt(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{expectReply:!1};return new Promise((i,a)=>{const c=r.expectReply||!1,u=r.timeout!=null?r.timeout:vB;c&&u&&setTimeout(()=>a(new Error(`Timeout: ${u}ms passed without a response.`)),u);const f={to:e,from:r.from,tag:t,data:n,timeout:u,reply:i,reject:a};try{dt[e]&&dt[e].mailbox.deliver(f),c||i(!0)}catch(d){console.error("FCL.Actor -- Could Not Deliver Message",f,dt[e],d),a(d)}})}const wB=e=>{delete dt[e]},EB=e=>async t=>{typeof e[nf]=="function"&&await e[nf](t);e:for(;;){const n=await t.receive();try{if(n.tag===ab){typeof e[n_]=="function"&&await e[n_](t,n,n.data||{});break e}await e[n.tag]?.(t,n,n.data||{})}catch(r){console.error(`${t.self()} Error`,n,r)}finally{continue e}}},SB=e=>{if(e==null){for(;dt[String(Ty)];)Ty++;return String(Ty)}return String(e)},ma=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;const n=SB(t);if(dt[n]!=null)return n;dt[n]={addr:n,mailbox:yB(),subs:new Set,kvs:{},error:null};const r=_B(n);let i;return typeof e=="object"?i=EB(e):i=e,bB(async()=>{await i(r),wB(n)}),n},_B=e=>({self:()=>e,receive:()=>dt[e].mailbox.receive(),send:function(t,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};if(t!=null)return i.from=e,Zt(t,n,r,i)},sendSelf:function(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};dt[e]&&Zt(e,t,n,r)},broadcast:function(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};r.from=e;for(const i of dt[e].subs)Zt(i,t,n,r)},subscribe:t=>t!=null&&dt[e].subs.add(t),unsubscribe:t=>t!=null&&dt[e].subs.delete(t),subscriberCount:()=>dt[e].subs.size,hasSubs:()=>!!dt[e].subs.size,put:(t,n)=>{t!=null&&(dt[e].kvs[t]=n)},get:function(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;const r=dt[e].kvs[t];return r??n},delete:t=>{delete dt[e].kvs[t]},update:(t,n)=>{t!=null&&(dt[e].kvs[t]=n(dt[e].kvs[t]))},keys:()=>Object.keys(dt[e].kvs),all:()=>dt[e].kvs,where:t=>Object.keys(dt[e].kvs).reduce((n,r)=>t.test(r)?{...n,[r]:dt[e].kvs[r]}:n,{}),merge:function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.keys(t).forEach(n=>dt[e].kvs[n]=t[n])},fatalError:t=>{dt[e].error=t;for(const n of dt[e].subs)Zt(n,ob)}});function Ov(e,t,n){t(e);const r=ma(async i=>{for(i.send(e,nl);;){const a=await i.receive(),c=dt[e].error;if(a.tag===ab){i.send(e,ra);return}if(c){n(null,c),i.send(e,ra);return}n(a.data,null)}});return()=>Zt(r,ab)}function yT(e,t){return t(e),Zt(e,mT,null,{expectReply:!0,timeout:0})}const Dy=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r=>t.reduce((i,a)=>a(i),r)},xB=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r=>t.reduce((i,a)=>({...i,...a(r)}),{})},Cy=e=>e&&typeof e=="object"&&!Array.isArray(e),cb=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(!n.length)return e;const i=n.shift();if(Cy(e)&&Cy(i))for(const a in i)Cy(i[a])?(e[a]||Object.assign(e,{[a]:{}}),cb(e[a],i[a])):Object.assign(e,{[a]:i[a]});return cb(e,...n)},AB=e=>Array.isArray(e)?cb({},...e):e,RB=e=>e.contracts?e.contracts:{},OB=e=>e.dependencies?e.dependencies:{},TB=e=>t=>Object.entries(t).reduce((n,r)=>{let[i,a]=r;const c=a?.aliases?.[e];return c&&(n[i]=c),n},{}),DB=e=>t=>Object.entries(t).reduce((n,r)=>{let[i,a]=r;const c=a?.aliases?.[e];return c&&(n[i]=c),n},{}),CB=e=>t=>{let{deployments:n={},accounts:r={}}=t;const i=n?.[e];return i?Object.entries(i).reduce((a,c)=>{let[u,f]=c;const d=r[u]?.address;return d?f.reduce((p,g)=>({...p,[g]:d}),{}):a},{}):{}},IB=(e,t)=>Dy(AB,xB(CB(t),Dy(RB,TB(t)),Dy(OB,DB(t))))(e),NB=e=>typeof e!="string"?!1:/^[0-9A-Fa-f]+$/.test(e),r_=e=>Object.entries(e?.accounts??[]).reduce((t,n)=>{let[,r]=n;return t?!0:r&&Object.prototype.hasOwnProperty.call(r,"key")&&NB(r?.key)},!1),$B=e=>Array.isArray(e)?e.some(r_):r_(e),BB=e=>{const t=e?.toLowerCase()==="local"?"emulator":e?.toLowerCase();if(t==="emulator"||t==="testnet"||t==="mainnet"||t==="previewnet")return t;throw new Error(`Invalid network "${e}". Must be one of "emulator", "local", "testnet", or "mainnet"`)};uB(Re);const Ci="config",bT="PUT_CONFIG",vT="GET_CONFIG",wT="GET_ALL_CONFIG",ET="UPDATE_CONFIG",ST="DELETE_CONFIG",_T="CLEAR_CONFIG",xT="WHERE_CONFIG",hu="CONFIG/UPDATED",AT=e=>e,RT={[bT]:(e,t,n)=>{let{key:r,value:i}=n;if(r==null)throw new Error("Missing 'key' for config/put.");e.put(r,i),e.broadcast(hu,{...e.all()})},[vT]:(e,t,n)=>{let{key:r,fallback:i}=n;if(r==null)throw new Error("Missing 'key' for config/get");t.reply(e.get(r,i))},[wT]:(e,t)=>{t.reply({...e.all()})},[ET]:(e,t,n)=>{let{key:r,fn:i}=n;if(r==null)throw new Error("Missing 'key' for config/update");e.update(r,i||AT),e.broadcast(hu,{...e.all()})},[ST]:(e,t,n)=>{let{key:r}=n;if(r==null)throw new Error("Missing 'key' for config/delete");e.delete(r),e.broadcast(hu,{...e.all()})},[_T]:e=>{const t=Object.keys(e.all());for(const n of t)e.delete(n);e.broadcast(hu,{...e.all()})},[xT]:(e,t,n)=>{let{pattern:r}=n;if(r==null)throw new Error("Missing 'pattern' for config/where");t.reply(e.where(r))},[nl]:(e,t)=>{e.subscribe(t.from),e.send(t.from,hu,{...e.all()})},[ra]:(e,t)=>{e.unsubscribe(t.from)}};ma(RT,Ci);function rf(e,t){return Zt(Ci,bT,{key:e,value:t}),Re()}function qc(e,t){return Zt(Ci,vT,{key:e,fallback:t},{expectReply:!0,timeout:10})}async function Tv(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;if(!e.length)return t;const[n,...r]=e,i=await qc(n);return i??Tv(r,t)}function Xh(){return Zt(Ci,wT,null,{expectReply:!0,timeout:10})}function OT(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:AT;return Zt(Ci,ET,{key:e,fn:t}),Re()}function TT(e){return Zt(Ci,ST,{key:e}),Re()}function DT(e){return Zt(Ci,xT,{pattern:e},{expectReply:!0,timeout:10})}function CT(e){return Ov(Ci,()=>ma(RT,Ci),e)}async function PB(){await Zt(Ci,_T)}async function UB(e){return PB().then(()=>Re(e))}async function IT(e){let{ignoreConflicts:t=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=await qc("flow.network"),r=BB(n),{flowJSON:i}=e;if(he(!!i,"config.load -- 'flowJSON' must be defined"),he(!!r,'Flow Network Required -- In order for FCL to load your contracts please define "flow.network" to "emulator", "local", "testnet", or "mainnet" in your config. See more here: https://developers.flow.com/tools/fcl-js/reference/configure-fcl'),$B(i)){const a=r==="emulator";Fe({title:"Private Keys Detected",message:"Private keys should be stored in a separate flow.json file for security. See more here: https://developers.flow.com/tools/flow-cli/security",level:a?ht.warn:ht.error}),he(a,"Private keys should be stored in a separate flow.json file for security. See more here: https://developers.flow.com/tools/flow-cli/security")}for(const[a,c]of Object.entries(IB(i,r))){const u=`0x${a}`,f=await qc(u);f&&f!==c&&!t?Fe({title:"Contract Placeholder Conflict Detected",message:"A generated contract placeholder from config.load conflicts with a placeholder you've set manually in config have the same name.",level:ht.warn}):rf(u,c);const d=`system.contracts.${a}`,p=await qc(d);p&&p!==c&&!t?Fe({title:"Contract Placeholder Conflict Detected",message:"A generated contract placeholder from config.load conflicts with a placeholder you've set manually in config have the same name.",level:ht.warn}):rf(d,c)}}function Re(e){return e!=null&&typeof e=="object"&&Object.keys(e).map(t=>rf(t,e[t])),{put:rf,get:qc,all:Xh,first:Tv,update:OT,delete:TT,where:DT,subscribe:CT,overload:NT,load:IT}}Re.put=rf;Re.get=qc;Re.all=Xh;Re.first=Tv;Re.update=OT;Re.delete=TT;Re.where=DT;Re.subscribe=CT;Re.overload=NT;Re.load=IT;async function NT(e,t){const n=await Xh();try{return Re(e),await t(await Xh())}finally{await UB(n)}}var Iy={},pu={},i_;function kB(){if(i_)return pu;i_=1,pu.byteLength=u,pu.toByteArray=d,pu.fromByteArray=y;for(var e=[],t=[],n=typeof Uint8Array<"u"?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,a=r.length;i<a;++i)e[i]=r[i],t[r.charCodeAt(i)]=i;t[45]=62,t[95]=63;function c(b){var v=b.length;if(v%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var E=b.indexOf("=");E===-1&&(E=v);var S=E===v?0:4-E%4;return[E,S]}function u(b){var v=c(b),E=v[0],S=v[1];return(E+S)*3/4-S}function f(b,v,E){return(v+E)*3/4-E}function d(b){var v,E=c(b),S=E[0],_=E[1],T=new n(f(b,S,_)),O=0,$=_>0?S-4:S,I;for(I=0;I<$;I+=4)v=t[b.charCodeAt(I)]<<18|t[b.charCodeAt(I+1)]<<12|t[b.charCodeAt(I+2)]<<6|t[b.charCodeAt(I+3)],T[O++]=v>>16&255,T[O++]=v>>8&255,T[O++]=v&255;return _===2&&(v=t[b.charCodeAt(I)]<<2|t[b.charCodeAt(I+1)]>>4,T[O++]=v&255),_===1&&(v=t[b.charCodeAt(I)]<<10|t[b.charCodeAt(I+1)]<<4|t[b.charCodeAt(I+2)]>>2,T[O++]=v>>8&255,T[O++]=v&255),T}function p(b){return e[b>>18&63]+e[b>>12&63]+e[b>>6&63]+e[b&63]}function g(b,v,E){for(var S,_=[],T=v;T<E;T+=3)S=(b[T]<<16&16711680)+(b[T+1]<<8&65280)+(b[T+2]&255),_.push(p(S));return _.join("")}function y(b){for(var v,E=b.length,S=E%3,_=[],T=16383,O=0,$=E-S;O<$;O+=T)_.push(g(b,O,O+T>$?$:O+T));return S===1?(v=b[E-1],_.push(e[v>>2]+e[v<<4&63]+"==")):S===2&&(v=(b[E-2]<<8)+b[E-1],_.push(e[v>>10]+e[v>>4&63]+e[v<<2&63]+"=")),_.join("")}return pu}var th={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var s_;function MB(){return s_||(s_=1,th.read=function(e,t,n,r,i){var a,c,u=i*8-r-1,f=(1<<u)-1,d=f>>1,p=-7,g=n?i-1:0,y=n?-1:1,b=e[t+g];for(g+=y,a=b&(1<<-p)-1,b>>=-p,p+=u;p>0;a=a*256+e[t+g],g+=y,p-=8);for(c=a&(1<<-p)-1,a>>=-p,p+=r;p>0;c=c*256+e[t+g],g+=y,p-=8);if(a===0)a=1-d;else{if(a===f)return c?NaN:(b?-1:1)*(1/0);c=c+Math.pow(2,r),a=a-d}return(b?-1:1)*c*Math.pow(2,a-r)},th.write=function(e,t,n,r,i,a){var c,u,f,d=a*8-i-1,p=(1<<d)-1,g=p>>1,y=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,b=r?0:a-1,v=r?1:-1,E=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(u=isNaN(t)?1:0,c=p):(c=Math.floor(Math.log(t)/Math.LN2),t*(f=Math.pow(2,-c))<1&&(c--,f*=2),c+g>=1?t+=y/f:t+=y*Math.pow(2,1-g),t*f>=2&&(c++,f/=2),c+g>=p?(u=0,c=p):c+g>=1?(u=(t*f-1)*Math.pow(2,i),c=c+g):(u=t*Math.pow(2,g-1)*Math.pow(2,i),c=0));i>=8;e[n+b]=u&255,b+=v,u/=256,i-=8);for(c=c<<i|u,d+=i;d>0;e[n+b]=c&255,b+=v,c/=256,d-=8);e[n+b-v]|=E*128}),th}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var o_;function Dv(){return o_||(o_=1,function(e){const t=kB(),n=MB(),r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=u,e.SlowBuffer=T,e.INSPECT_MAX_BYTES=50;const i=2147483647;e.kMaxLength=i,u.TYPED_ARRAY_SUPPORT=a(),!u.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function a(){try{const U=new Uint8Array(1),x={foo:function(){return 42}};return Object.setPrototypeOf(x,Uint8Array.prototype),Object.setPrototypeOf(U,x),U.foo()===42}catch{return!1}}Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}});function c(U){if(U>i)throw new RangeError('The value "'+U+'" is invalid for option "size"');const x=new Uint8Array(U);return Object.setPrototypeOf(x,u.prototype),x}function u(U,x,A){if(typeof U=="number"){if(typeof x=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return g(U)}return f(U,x,A)}u.poolSize=8192;function f(U,x,A){if(typeof U=="string")return y(U,x);if(ArrayBuffer.isView(U))return v(U);if(U==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof U);if(Jt(U,ArrayBuffer)||U&&Jt(U.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Jt(U,SharedArrayBuffer)||U&&Jt(U.buffer,SharedArrayBuffer)))return E(U,x,A);if(typeof U=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const H=U.valueOf&&U.valueOf();if(H!=null&&H!==U)return u.from(H,x,A);const J=S(U);if(J)return J;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof U[Symbol.toPrimitive]=="function")return u.from(U[Symbol.toPrimitive]("string"),x,A);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof U)}u.from=function(U,x,A){return f(U,x,A)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array);function d(U){if(typeof U!="number")throw new TypeError('"size" argument must be of type number');if(U<0)throw new RangeError('The value "'+U+'" is invalid for option "size"')}function p(U,x,A){return d(U),U<=0?c(U):x!==void 0?typeof A=="string"?c(U).fill(x,A):c(U).fill(x):c(U)}u.alloc=function(U,x,A){return p(U,x,A)};function g(U){return d(U),c(U<0?0:_(U)|0)}u.allocUnsafe=function(U){return g(U)},u.allocUnsafeSlow=function(U){return g(U)};function y(U,x){if((typeof x!="string"||x==="")&&(x="utf8"),!u.isEncoding(x))throw new TypeError("Unknown encoding: "+x);const A=O(U,x)|0;let H=c(A);const J=H.write(U,x);return J!==A&&(H=H.slice(0,J)),H}function b(U){const x=U.length<0?0:_(U.length)|0,A=c(x);for(let H=0;H<x;H+=1)A[H]=U[H]&255;return A}function v(U){if(Jt(U,Uint8Array)){const x=new Uint8Array(U);return E(x.buffer,x.byteOffset,x.byteLength)}return b(U)}function E(U,x,A){if(x<0||U.byteLength<x)throw new RangeError('"offset" is outside of buffer bounds');if(U.byteLength<x+(A||0))throw new RangeError('"length" is outside of buffer bounds');let H;return x===void 0&&A===void 0?H=new Uint8Array(U):A===void 0?H=new Uint8Array(U,x):H=new Uint8Array(U,x,A),Object.setPrototypeOf(H,u.prototype),H}function S(U){if(u.isBuffer(U)){const x=_(U.length)|0,A=c(x);return A.length===0||U.copy(A,0,0,x),A}if(U.length!==void 0)return typeof U.length!="number"||Sr(U.length)?c(0):b(U);if(U.type==="Buffer"&&Array.isArray(U.data))return b(U.data)}function _(U){if(U>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return U|0}function T(U){return+U!=U&&(U=0),u.alloc(+U)}u.isBuffer=function(x){return x!=null&&x._isBuffer===!0&&x!==u.prototype},u.compare=function(x,A){if(Jt(x,Uint8Array)&&(x=u.from(x,x.offset,x.byteLength)),Jt(A,Uint8Array)&&(A=u.from(A,A.offset,A.byteLength)),!u.isBuffer(x)||!u.isBuffer(A))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(x===A)return 0;let H=x.length,J=A.length;for(let ue=0,pe=Math.min(H,J);ue<pe;++ue)if(x[ue]!==A[ue]){H=x[ue],J=A[ue];break}return H<J?-1:J<H?1:0},u.isEncoding=function(x){switch(String(x).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(x,A){if(!Array.isArray(x))throw new TypeError('"list" argument must be an Array of Buffers');if(x.length===0)return u.alloc(0);let H;if(A===void 0)for(A=0,H=0;H<x.length;++H)A+=x[H].length;const J=u.allocUnsafe(A);let ue=0;for(H=0;H<x.length;++H){let pe=x[H];if(Jt(pe,Uint8Array))ue+pe.length>J.length?(u.isBuffer(pe)||(pe=u.from(pe)),pe.copy(J,ue)):Uint8Array.prototype.set.call(J,pe,ue);else if(u.isBuffer(pe))pe.copy(J,ue);else throw new TypeError('"list" argument must be an Array of Buffers');ue+=pe.length}return J};function O(U,x){if(u.isBuffer(U))return U.length;if(ArrayBuffer.isView(U)||Jt(U,ArrayBuffer))return U.byteLength;if(typeof U!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof U);const A=U.length,H=arguments.length>2&&arguments[2]===!0;if(!H&&A===0)return 0;let J=!1;for(;;)switch(x){case"ascii":case"latin1":case"binary":return A;case"utf8":case"utf-8":return At(U).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A*2;case"hex":return A>>>1;case"base64":return Sn(U).length;default:if(J)return H?-1:At(U).length;x=(""+x).toLowerCase(),J=!0}}u.byteLength=O;function $(U,x,A){let H=!1;if((x===void 0||x<0)&&(x=0),x>this.length||((A===void 0||A>this.length)&&(A=this.length),A<=0)||(A>>>=0,x>>>=0,A<=x))return"";for(U||(U="utf8");;)switch(U){case"hex":return X(this,x,A);case"utf8":case"utf-8":return ee(this,x,A);case"ascii":return L(this,x,A);case"latin1":case"binary":return V(this,x,A);case"base64":return ne(this,x,A);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N(this,x,A);default:if(H)throw new TypeError("Unknown encoding: "+U);U=(U+"").toLowerCase(),H=!0}}u.prototype._isBuffer=!0;function I(U,x,A){const H=U[x];U[x]=U[A],U[A]=H}u.prototype.swap16=function(){const x=this.length;if(x%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let A=0;A<x;A+=2)I(this,A,A+1);return this},u.prototype.swap32=function(){const x=this.length;if(x%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let A=0;A<x;A+=4)I(this,A,A+3),I(this,A+1,A+2);return this},u.prototype.swap64=function(){const x=this.length;if(x%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let A=0;A<x;A+=8)I(this,A,A+7),I(this,A+1,A+6),I(this,A+2,A+5),I(this,A+3,A+4);return this},u.prototype.toString=function(){const x=this.length;return x===0?"":arguments.length===0?ee(this,0,x):$.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(x){if(!u.isBuffer(x))throw new TypeError("Argument must be a Buffer");return this===x?!0:u.compare(this,x)===0},u.prototype.inspect=function(){let x="";const A=e.INSPECT_MAX_BYTES;return x=this.toString("hex",0,A).replace(/(.{2})/g,"$1 ").trim(),this.length>A&&(x+=" ... "),"<Buffer "+x+">"},r&&(u.prototype[r]=u.prototype.inspect),u.prototype.compare=function(x,A,H,J,ue){if(Jt(x,Uint8Array)&&(x=u.from(x,x.offset,x.byteLength)),!u.isBuffer(x))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof x);if(A===void 0&&(A=0),H===void 0&&(H=x?x.length:0),J===void 0&&(J=0),ue===void 0&&(ue=this.length),A<0||H>x.length||J<0||ue>this.length)throw new RangeError("out of range index");if(J>=ue&&A>=H)return 0;if(J>=ue)return-1;if(A>=H)return 1;if(A>>>=0,H>>>=0,J>>>=0,ue>>>=0,this===x)return 0;let pe=ue-J,Ne=H-A;const Ze=Math.min(pe,Ne),Je=this.slice(J,ue),st=x.slice(A,H);for(let et=0;et<Ze;++et)if(Je[et]!==st[et]){pe=Je[et],Ne=st[et];break}return pe<Ne?-1:Ne<pe?1:0};function B(U,x,A,H,J){if(U.length===0)return-1;if(typeof A=="string"?(H=A,A=0):A>2147483647?A=2147483647:A<-2147483648&&(A=-2147483648),A=+A,Sr(A)&&(A=J?0:U.length-1),A<0&&(A=U.length+A),A>=U.length){if(J)return-1;A=U.length-1}else if(A<0)if(J)A=0;else return-1;if(typeof x=="string"&&(x=u.from(x,H)),u.isBuffer(x))return x.length===0?-1:z(U,x,A,H,J);if(typeof x=="number")return x=x&255,typeof Uint8Array.prototype.indexOf=="function"?J?Uint8Array.prototype.indexOf.call(U,x,A):Uint8Array.prototype.lastIndexOf.call(U,x,A):z(U,[x],A,H,J);throw new TypeError("val must be string, number or Buffer")}function z(U,x,A,H,J){let ue=1,pe=U.length,Ne=x.length;if(H!==void 0&&(H=String(H).toLowerCase(),H==="ucs2"||H==="ucs-2"||H==="utf16le"||H==="utf-16le")){if(U.length<2||x.length<2)return-1;ue=2,pe/=2,Ne/=2,A/=2}function Ze(st,et){return ue===1?st[et]:st.readUInt16BE(et*ue)}let Je;if(J){let st=-1;for(Je=A;Je<pe;Je++)if(Ze(U,Je)===Ze(x,st===-1?0:Je-st)){if(st===-1&&(st=Je),Je-st+1===Ne)return st*ue}else st!==-1&&(Je-=Je-st),st=-1}else for(A+Ne>pe&&(A=pe-Ne),Je=A;Je>=0;Je--){let st=!0;for(let et=0;et<Ne;et++)if(Ze(U,Je+et)!==Ze(x,et)){st=!1;break}if(st)return Je}return-1}u.prototype.includes=function(x,A,H){return this.indexOf(x,A,H)!==-1},u.prototype.indexOf=function(x,A,H){return B(this,x,A,H,!0)},u.prototype.lastIndexOf=function(x,A,H){return B(this,x,A,H,!1)};function q(U,x,A,H){A=Number(A)||0;const J=U.length-A;H?(H=Number(H),H>J&&(H=J)):H=J;const ue=x.length;H>ue/2&&(H=ue/2);let pe;for(pe=0;pe<H;++pe){const Ne=parseInt(x.substr(pe*2,2),16);if(Sr(Ne))return pe;U[A+pe]=Ne}return pe}function k(U,x,A,H){return Qt(At(x,U.length-A),U,A,H)}function W(U,x,A,H){return Qt(vo(x),U,A,H)}function F(U,x,A,H){return Qt(Sn(x),U,A,H)}function G(U,x,A,H){return Qt(Pi(x,U.length-A),U,A,H)}u.prototype.write=function(x,A,H,J){if(A===void 0)J="utf8",H=this.length,A=0;else if(H===void 0&&typeof A=="string")J=A,H=this.length,A=0;else if(isFinite(A))A=A>>>0,isFinite(H)?(H=H>>>0,J===void 0&&(J="utf8")):(J=H,H=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const ue=this.length-A;if((H===void 0||H>ue)&&(H=ue),x.length>0&&(H<0||A<0)||A>this.length)throw new RangeError("Attempt to write outside buffer bounds");J||(J="utf8");let pe=!1;for(;;)switch(J){case"hex":return q(this,x,A,H);case"utf8":case"utf-8":return k(this,x,A,H);case"ascii":case"latin1":case"binary":return W(this,x,A,H);case"base64":return F(this,x,A,H);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return G(this,x,A,H);default:if(pe)throw new TypeError("Unknown encoding: "+J);J=(""+J).toLowerCase(),pe=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ne(U,x,A){return x===0&&A===U.length?t.fromByteArray(U):t.fromByteArray(U.slice(x,A))}function ee(U,x,A){A=Math.min(U.length,A);const H=[];let J=x;for(;J<A;){const ue=U[J];let pe=null,Ne=ue>239?4:ue>223?3:ue>191?2:1;if(J+Ne<=A){let Ze,Je,st,et;switch(Ne){case 1:ue<128&&(pe=ue);break;case 2:Ze=U[J+1],(Ze&192)===128&&(et=(ue&31)<<6|Ze&63,et>127&&(pe=et));break;case 3:Ze=U[J+1],Je=U[J+2],(Ze&192)===128&&(Je&192)===128&&(et=(ue&15)<<12|(Ze&63)<<6|Je&63,et>2047&&(et<55296||et>57343)&&(pe=et));break;case 4:Ze=U[J+1],Je=U[J+2],st=U[J+3],(Ze&192)===128&&(Je&192)===128&&(st&192)===128&&(et=(ue&15)<<18|(Ze&63)<<12|(Je&63)<<6|st&63,et>65535&&et<1114112&&(pe=et))}}pe===null?(pe=65533,Ne=1):pe>65535&&(pe-=65536,H.push(pe>>>10&1023|55296),pe=56320|pe&1023),H.push(pe),J+=Ne}return R(H)}const D=4096;function R(U){const x=U.length;if(x<=D)return String.fromCharCode.apply(String,U);let A="",H=0;for(;H<x;)A+=String.fromCharCode.apply(String,U.slice(H,H+=D));return A}function L(U,x,A){let H="";A=Math.min(U.length,A);for(let J=x;J<A;++J)H+=String.fromCharCode(U[J]&127);return H}function V(U,x,A){let H="";A=Math.min(U.length,A);for(let J=x;J<A;++J)H+=String.fromCharCode(U[J]);return H}function X(U,x,A){const H=U.length;(!x||x<0)&&(x=0),(!A||A<0||A>H)&&(A=H);let J="";for(let ue=x;ue<A;++ue)J+=ai[U[ue]];return J}function N(U,x,A){const H=U.slice(x,A);let J="";for(let ue=0;ue<H.length-1;ue+=2)J+=String.fromCharCode(H[ue]+H[ue+1]*256);return J}u.prototype.slice=function(x,A){const H=this.length;x=~~x,A=A===void 0?H:~~A,x<0?(x+=H,x<0&&(x=0)):x>H&&(x=H),A<0?(A+=H,A<0&&(A=0)):A>H&&(A=H),A<x&&(A=x);const J=this.subarray(x,A);return Object.setPrototypeOf(J,u.prototype),J};function K(U,x,A){if(U%1!==0||U<0)throw new RangeError("offset is not uint");if(U+x>A)throw new RangeError("Trying to access beyond buffer length")}u.prototype.readUintLE=u.prototype.readUIntLE=function(x,A,H){x=x>>>0,A=A>>>0,H||K(x,A,this.length);let J=this[x],ue=1,pe=0;for(;++pe<A&&(ue*=256);)J+=this[x+pe]*ue;return J},u.prototype.readUintBE=u.prototype.readUIntBE=function(x,A,H){x=x>>>0,A=A>>>0,H||K(x,A,this.length);let J=this[x+--A],ue=1;for(;A>0&&(ue*=256);)J+=this[x+--A]*ue;return J},u.prototype.readUint8=u.prototype.readUInt8=function(x,A){return x=x>>>0,A||K(x,1,this.length),this[x]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(x,A){return x=x>>>0,A||K(x,2,this.length),this[x]|this[x+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(x,A){return x=x>>>0,A||K(x,2,this.length),this[x]<<8|this[x+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(x,A){return x=x>>>0,A||K(x,4,this.length),(this[x]|this[x+1]<<8|this[x+2]<<16)+this[x+3]*16777216},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(x,A){return x=x>>>0,A||K(x,4,this.length),this[x]*16777216+(this[x+1]<<16|this[x+2]<<8|this[x+3])},u.prototype.readBigUInt64LE=_n(function(x){x=x>>>0,Tt(x,"offset");const A=this[x],H=this[x+7];(A===void 0||H===void 0)&&xt(x,this.length-8);const J=A+this[++x]*2**8+this[++x]*2**16+this[++x]*2**24,ue=this[++x]+this[++x]*2**8+this[++x]*2**16+H*2**24;return BigInt(J)+(BigInt(ue)<<BigInt(32))}),u.prototype.readBigUInt64BE=_n(function(x){x=x>>>0,Tt(x,"offset");const A=this[x],H=this[x+7];(A===void 0||H===void 0)&&xt(x,this.length-8);const J=A*2**24+this[++x]*2**16+this[++x]*2**8+this[++x],ue=this[++x]*2**24+this[++x]*2**16+this[++x]*2**8+H;return(BigInt(J)<<BigInt(32))+BigInt(ue)}),u.prototype.readIntLE=function(x,A,H){x=x>>>0,A=A>>>0,H||K(x,A,this.length);let J=this[x],ue=1,pe=0;for(;++pe<A&&(ue*=256);)J+=this[x+pe]*ue;return ue*=128,J>=ue&&(J-=Math.pow(2,8*A)),J},u.prototype.readIntBE=function(x,A,H){x=x>>>0,A=A>>>0,H||K(x,A,this.length);let J=A,ue=1,pe=this[x+--J];for(;J>0&&(ue*=256);)pe+=this[x+--J]*ue;return ue*=128,pe>=ue&&(pe-=Math.pow(2,8*A)),pe},u.prototype.readInt8=function(x,A){return x=x>>>0,A||K(x,1,this.length),this[x]&128?(255-this[x]+1)*-1:this[x]},u.prototype.readInt16LE=function(x,A){x=x>>>0,A||K(x,2,this.length);const H=this[x]|this[x+1]<<8;return H&32768?H|4294901760:H},u.prototype.readInt16BE=function(x,A){x=x>>>0,A||K(x,2,this.length);const H=this[x+1]|this[x]<<8;return H&32768?H|4294901760:H},u.prototype.readInt32LE=function(x,A){return x=x>>>0,A||K(x,4,this.length),this[x]|this[x+1]<<8|this[x+2]<<16|this[x+3]<<24},u.prototype.readInt32BE=function(x,A){return x=x>>>0,A||K(x,4,this.length),this[x]<<24|this[x+1]<<16|this[x+2]<<8|this[x+3]},u.prototype.readBigInt64LE=_n(function(x){x=x>>>0,Tt(x,"offset");const A=this[x],H=this[x+7];(A===void 0||H===void 0)&&xt(x,this.length-8);const J=this[x+4]+this[x+5]*2**8+this[x+6]*2**16+(H<<24);return(BigInt(J)<<BigInt(32))+BigInt(A+this[++x]*2**8+this[++x]*2**16+this[++x]*2**24)}),u.prototype.readBigInt64BE=_n(function(x){x=x>>>0,Tt(x,"offset");const A=this[x],H=this[x+7];(A===void 0||H===void 0)&&xt(x,this.length-8);const J=(A<<24)+this[++x]*2**16+this[++x]*2**8+this[++x];return(BigInt(J)<<BigInt(32))+BigInt(this[++x]*2**24+this[++x]*2**16+this[++x]*2**8+H)}),u.prototype.readFloatLE=function(x,A){return x=x>>>0,A||K(x,4,this.length),n.read(this,x,!0,23,4)},u.prototype.readFloatBE=function(x,A){return x=x>>>0,A||K(x,4,this.length),n.read(this,x,!1,23,4)},u.prototype.readDoubleLE=function(x,A){return x=x>>>0,A||K(x,8,this.length),n.read(this,x,!0,52,8)},u.prototype.readDoubleBE=function(x,A){return x=x>>>0,A||K(x,8,this.length),n.read(this,x,!1,52,8)};function te(U,x,A,H,J,ue){if(!u.isBuffer(U))throw new TypeError('"buffer" argument must be a Buffer instance');if(x>J||x<ue)throw new RangeError('"value" argument is out of bounds');if(A+H>U.length)throw new RangeError("Index out of range")}u.prototype.writeUintLE=u.prototype.writeUIntLE=function(x,A,H,J){if(x=+x,A=A>>>0,H=H>>>0,!J){const Ne=Math.pow(2,8*H)-1;te(this,x,A,H,Ne,0)}let ue=1,pe=0;for(this[A]=x&255;++pe<H&&(ue*=256);)this[A+pe]=x/ue&255;return A+H},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(x,A,H,J){if(x=+x,A=A>>>0,H=H>>>0,!J){const Ne=Math.pow(2,8*H)-1;te(this,x,A,H,Ne,0)}let ue=H-1,pe=1;for(this[A+ue]=x&255;--ue>=0&&(pe*=256);)this[A+ue]=x/pe&255;return A+H},u.prototype.writeUint8=u.prototype.writeUInt8=function(x,A,H){return x=+x,A=A>>>0,H||te(this,x,A,1,255,0),this[A]=x&255,A+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(x,A,H){return x=+x,A=A>>>0,H||te(this,x,A,2,65535,0),this[A]=x&255,this[A+1]=x>>>8,A+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(x,A,H){return x=+x,A=A>>>0,H||te(this,x,A,2,65535,0),this[A]=x>>>8,this[A+1]=x&255,A+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(x,A,H){return x=+x,A=A>>>0,H||te(this,x,A,4,4294967295,0),this[A+3]=x>>>24,this[A+2]=x>>>16,this[A+1]=x>>>8,this[A]=x&255,A+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(x,A,H){return x=+x,A=A>>>0,H||te(this,x,A,4,4294967295,0),this[A]=x>>>24,this[A+1]=x>>>16,this[A+2]=x>>>8,this[A+3]=x&255,A+4};function se(U,x,A,H,J){Et(x,H,J,U,A,7);let ue=Number(x&BigInt(4294967295));U[A++]=ue,ue=ue>>8,U[A++]=ue,ue=ue>>8,U[A++]=ue,ue=ue>>8,U[A++]=ue;let pe=Number(x>>BigInt(32)&BigInt(4294967295));return U[A++]=pe,pe=pe>>8,U[A++]=pe,pe=pe>>8,U[A++]=pe,pe=pe>>8,U[A++]=pe,A}function ie(U,x,A,H,J){Et(x,H,J,U,A,7);let ue=Number(x&BigInt(4294967295));U[A+7]=ue,ue=ue>>8,U[A+6]=ue,ue=ue>>8,U[A+5]=ue,ue=ue>>8,U[A+4]=ue;let pe=Number(x>>BigInt(32)&BigInt(4294967295));return U[A+3]=pe,pe=pe>>8,U[A+2]=pe,pe=pe>>8,U[A+1]=pe,pe=pe>>8,U[A]=pe,A+8}u.prototype.writeBigUInt64LE=_n(function(x,A=0){return se(this,x,A,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeBigUInt64BE=_n(function(x,A=0){return ie(this,x,A,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeIntLE=function(x,A,H,J){if(x=+x,A=A>>>0,!J){const Ze=Math.pow(2,8*H-1);te(this,x,A,H,Ze-1,-Ze)}let ue=0,pe=1,Ne=0;for(this[A]=x&255;++ue<H&&(pe*=256);)x<0&&Ne===0&&this[A+ue-1]!==0&&(Ne=1),this[A+ue]=(x/pe>>0)-Ne&255;return A+H},u.prototype.writeIntBE=function(x,A,H,J){if(x=+x,A=A>>>0,!J){const Ze=Math.pow(2,8*H-1);te(this,x,A,H,Ze-1,-Ze)}let ue=H-1,pe=1,Ne=0;for(this[A+ue]=x&255;--ue>=0&&(pe*=256);)x<0&&Ne===0&&this[A+ue+1]!==0&&(Ne=1),this[A+ue]=(x/pe>>0)-Ne&255;return A+H},u.prototype.writeInt8=function(x,A,H){return x=+x,A=A>>>0,H||te(this,x,A,1,127,-128),x<0&&(x=255+x+1),this[A]=x&255,A+1},u.prototype.writeInt16LE=function(x,A,H){return x=+x,A=A>>>0,H||te(this,x,A,2,32767,-32768),this[A]=x&255,this[A+1]=x>>>8,A+2},u.prototype.writeInt16BE=function(x,A,H){return x=+x,A=A>>>0,H||te(this,x,A,2,32767,-32768),this[A]=x>>>8,this[A+1]=x&255,A+2},u.prototype.writeInt32LE=function(x,A,H){return x=+x,A=A>>>0,H||te(this,x,A,4,2147483647,-2147483648),this[A]=x&255,this[A+1]=x>>>8,this[A+2]=x>>>16,this[A+3]=x>>>24,A+4},u.prototype.writeInt32BE=function(x,A,H){return x=+x,A=A>>>0,H||te(this,x,A,4,2147483647,-2147483648),x<0&&(x=4294967295+x+1),this[A]=x>>>24,this[A+1]=x>>>16,this[A+2]=x>>>8,this[A+3]=x&255,A+4},u.prototype.writeBigInt64LE=_n(function(x,A=0){return se(this,x,A,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),u.prototype.writeBigInt64BE=_n(function(x,A=0){return ie(this,x,A,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function fe(U,x,A,H,J,ue){if(A+H>U.length)throw new RangeError("Index out of range");if(A<0)throw new RangeError("Index out of range")}function Q(U,x,A,H,J){return x=+x,A=A>>>0,J||fe(U,x,A,4),n.write(U,x,A,H,23,4),A+4}u.prototype.writeFloatLE=function(x,A,H){return Q(this,x,A,!0,H)},u.prototype.writeFloatBE=function(x,A,H){return Q(this,x,A,!1,H)};function ve(U,x,A,H,J){return x=+x,A=A>>>0,J||fe(U,x,A,8),n.write(U,x,A,H,52,8),A+8}u.prototype.writeDoubleLE=function(x,A,H){return ve(this,x,A,!0,H)},u.prototype.writeDoubleBE=function(x,A,H){return ve(this,x,A,!1,H)},u.prototype.copy=function(x,A,H,J){if(!u.isBuffer(x))throw new TypeError("argument should be a Buffer");if(H||(H=0),!J&&J!==0&&(J=this.length),A>=x.length&&(A=x.length),A||(A=0),J>0&&J<H&&(J=H),J===H||x.length===0||this.length===0)return 0;if(A<0)throw new RangeError("targetStart out of bounds");if(H<0||H>=this.length)throw new RangeError("Index out of range");if(J<0)throw new RangeError("sourceEnd out of bounds");J>this.length&&(J=this.length),x.length-A<J-H&&(J=x.length-A+H);const ue=J-H;return this===x&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(A,H,J):Uint8Array.prototype.set.call(x,this.subarray(H,J),A),ue},u.prototype.fill=function(x,A,H,J){if(typeof x=="string"){if(typeof A=="string"?(J=A,A=0,H=this.length):typeof H=="string"&&(J=H,H=this.length),J!==void 0&&typeof J!="string")throw new TypeError("encoding must be a string");if(typeof J=="string"&&!u.isEncoding(J))throw new TypeError("Unknown encoding: "+J);if(x.length===1){const pe=x.charCodeAt(0);(J==="utf8"&&pe<128||J==="latin1")&&(x=pe)}}else typeof x=="number"?x=x&255:typeof x=="boolean"&&(x=Number(x));if(A<0||this.length<A||this.length<H)throw new RangeError("Out of range index");if(H<=A)return this;A=A>>>0,H=H===void 0?this.length:H>>>0,x||(x=0);let ue;if(typeof x=="number")for(ue=A;ue<H;++ue)this[ue]=x;else{const pe=u.isBuffer(x)?x:u.from(x,J),Ne=pe.length;if(Ne===0)throw new TypeError('The value "'+x+'" is invalid for argument "value"');for(ue=0;ue<H-A;++ue)this[ue+A]=pe[ue%Ne]}return this};const ye={};function _e(U,x,A){ye[U]=class extends A{constructor(){super(),Object.defineProperty(this,"message",{value:x.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${U}]`,this.stack,delete this.name}get code(){return U}set code(J){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:J,writable:!0})}toString(){return`${this.name} [${U}]: ${this.message}`}}}_e("ERR_BUFFER_OUT_OF_BOUNDS",function(U){return U?`${U} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),_e("ERR_INVALID_ARG_TYPE",function(U,x){return`The "${U}" argument must be of type number. Received type ${typeof x}`},TypeError),_e("ERR_OUT_OF_RANGE",function(U,x,A){let H=`The value of "${U}" is out of range.`,J=A;return Number.isInteger(A)&&Math.abs(A)>2**32?J=Oe(String(A)):typeof A=="bigint"&&(J=String(A),(A>BigInt(2)**BigInt(32)||A<-(BigInt(2)**BigInt(32)))&&(J=Oe(J)),J+="n"),H+=` It must be ${x}. Received ${J}`,H},RangeError);function Oe(U){let x="",A=U.length;const H=U[0]==="-"?1:0;for(;A>=H+4;A-=3)x=`_${U.slice(A-3,A)}${x}`;return`${U.slice(0,A)}${x}`}function ke(U,x,A){Tt(x,"offset"),(U[x]===void 0||U[x+A]===void 0)&&xt(x,U.length-(A+1))}function Et(U,x,A,H,J,ue){if(U>A||U<x){const pe=typeof x=="bigint"?"n":"";let Ne;throw x===0||x===BigInt(0)?Ne=`>= 0${pe} and < 2${pe} ** ${(ue+1)*8}${pe}`:Ne=`>= -(2${pe} ** ${(ue+1)*8-1}${pe}) and < 2 ** ${(ue+1)*8-1}${pe}`,new ye.ERR_OUT_OF_RANGE("value",Ne,U)}ke(H,J,ue)}function Tt(U,x){if(typeof U!="number")throw new ye.ERR_INVALID_ARG_TYPE(x,"number",U)}function xt(U,x,A){throw Math.floor(U)!==U?(Tt(U,A),new ye.ERR_OUT_OF_RANGE("offset","an integer",U)):x<0?new ye.ERR_BUFFER_OUT_OF_BOUNDS:new ye.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${x}`,U)}const Ye=/[^+/0-9A-Za-z-_]/g;function Vr(U){if(U=U.split("=")[0],U=U.trim().replace(Ye,""),U.length<2)return"";for(;U.length%4!==0;)U=U+"=";return U}function At(U,x){x=x||1/0;let A;const H=U.length;let J=null;const ue=[];for(let pe=0;pe<H;++pe){if(A=U.charCodeAt(pe),A>55295&&A<57344){if(!J){if(A>56319){(x-=3)>-1&&ue.push(239,191,189);continue}else if(pe+1===H){(x-=3)>-1&&ue.push(239,191,189);continue}J=A;continue}if(A<56320){(x-=3)>-1&&ue.push(239,191,189),J=A;continue}A=(J-55296<<10|A-56320)+65536}else J&&(x-=3)>-1&&ue.push(239,191,189);if(J=null,A<128){if((x-=1)<0)break;ue.push(A)}else if(A<2048){if((x-=2)<0)break;ue.push(A>>6|192,A&63|128)}else if(A<65536){if((x-=3)<0)break;ue.push(A>>12|224,A>>6&63|128,A&63|128)}else if(A<1114112){if((x-=4)<0)break;ue.push(A>>18|240,A>>12&63|128,A>>6&63|128,A&63|128)}else throw new Error("Invalid code point")}return ue}function vo(U){const x=[];for(let A=0;A<U.length;++A)x.push(U.charCodeAt(A)&255);return x}function Pi(U,x){let A,H,J;const ue=[];for(let pe=0;pe<U.length&&!((x-=2)<0);++pe)A=U.charCodeAt(pe),H=A>>8,J=A%256,ue.push(J),ue.push(H);return ue}function Sn(U){return t.toByteArray(Vr(U))}function Qt(U,x,A,H){let J;for(J=0;J<H&&!(J+A>=x.length||J>=U.length);++J)x[J+A]=U[J];return J}function Jt(U,x){return U instanceof x||U!=null&&U.constructor!=null&&U.constructor.name!=null&&U.constructor.name===x.name}function Sr(U){return U!==U}const ai=function(){const U="0123456789abcdef",x=new Array(256);for(let A=0;A<16;++A){const H=A*16;for(let J=0;J<16;++J)x[H+J]=U[A]+U[J]}return x}();function _n(U){return typeof BigInt>"u"?sr:U}function sr(){throw new Error("BigInt not supported")}}(Iy)),Iy}var Nt=Dv();function Cv(e){if(Array.isArray(e)){const t=[];for(let r=0;r<e.length;r++)t.push(Cv(e[r]));const n=Nt.Buffer.concat(t);return Nt.Buffer.concat([a_(n.length,192),n])}else{const t=qB(e);return t.length===1&&t[0]<128?t:Nt.Buffer.concat([a_(t.length,128),t])}}function a_(e,t){if(e<56)return Nt.Buffer.from([e+t]);{const n=lb(e),r=n.length/2,i=lb(t+55+r);return Nt.Buffer.from(i+n,"hex")}}function $T(e){return e.slice(0,2)==="0x"}function jB(e){return typeof e!="string"?e:$T(e)?e.slice(2):e}function lb(e){if(e<0)throw new Error("Invalid integer as argument, must be unsigned!");const t=e.toString(16);return t.length%2?"0"+t:t}function LB(e){return e.length%2?"0"+e:e}function zB(e){const t=lb(e);return Nt.Buffer.from(t,"hex")}function qB(e){if(!Nt.Buffer.isBuffer(e)){if(typeof e=="string")return $T(e)?Nt.Buffer.from(LB(jB(e)),"hex"):Nt.Buffer.from(e);if(typeof e=="number")return e?zB(e):Nt.Buffer.from([]);if(e==null)return Nt.Buffer.from([]);if(e instanceof Uint8Array)return Nt.Buffer.from(e);throw new Error("invalid type")}return e}var nh={exports:{}},c_;function HB(){return c_||(c_=1,function(e,t){var n=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof Xn<"u"&&Xn,r=function(){function a(){this.fetch=!1,this.DOMException=n.DOMException}return a.prototype=n,new a}();(function(a){(function(c){var u=typeof a<"u"&&a||typeof self<"u"&&self||typeof Xn<"u"&&Xn||{},f={searchParams:"URLSearchParams"in u,iterable:"Symbol"in u&&"iterator"in Symbol,blob:"FileReader"in u&&"Blob"in u&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in u,arrayBuffer:"ArrayBuffer"in u};function d(D){return D&&DataView.prototype.isPrototypeOf(D)}if(f.arrayBuffer)var p=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],g=ArrayBuffer.isView||function(D){return D&&p.indexOf(Object.prototype.toString.call(D))>-1};function y(D){if(typeof D!="string"&&(D=String(D)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(D)||D==="")throw new TypeError('Invalid character in header field name: "'+D+'"');return D.toLowerCase()}function b(D){return typeof D!="string"&&(D=String(D)),D}function v(D){var R={next:function(){var L=D.shift();return{done:L===void 0,value:L}}};return f.iterable&&(R[Symbol.iterator]=function(){return R}),R}function E(D){this.map={},D instanceof E?D.forEach(function(R,L){this.append(L,R)},this):Array.isArray(D)?D.forEach(function(R){if(R.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+R.length);this.append(R[0],R[1])},this):D&&Object.getOwnPropertyNames(D).forEach(function(R){this.append(R,D[R])},this)}E.prototype.append=function(D,R){D=y(D),R=b(R);var L=this.map[D];this.map[D]=L?L+", "+R:R},E.prototype.delete=function(D){delete this.map[y(D)]},E.prototype.get=function(D){return D=y(D),this.has(D)?this.map[D]:null},E.prototype.has=function(D){return this.map.hasOwnProperty(y(D))},E.prototype.set=function(D,R){this.map[y(D)]=b(R)},E.prototype.forEach=function(D,R){for(var L in this.map)this.map.hasOwnProperty(L)&&D.call(R,this.map[L],L,this)},E.prototype.keys=function(){var D=[];return this.forEach(function(R,L){D.push(L)}),v(D)},E.prototype.values=function(){var D=[];return this.forEach(function(R){D.push(R)}),v(D)},E.prototype.entries=function(){var D=[];return this.forEach(function(R,L){D.push([L,R])}),v(D)},f.iterable&&(E.prototype[Symbol.iterator]=E.prototype.entries);function S(D){if(!D._noBody){if(D.bodyUsed)return Promise.reject(new TypeError("Already read"));D.bodyUsed=!0}}function _(D){return new Promise(function(R,L){D.onload=function(){R(D.result)},D.onerror=function(){L(D.error)}})}function T(D){var R=new FileReader,L=_(R);return R.readAsArrayBuffer(D),L}function O(D){var R=new FileReader,L=_(R),V=/charset=([A-Za-z0-9_-]+)/.exec(D.type),X=V?V[1]:"utf-8";return R.readAsText(D,X),L}function $(D){for(var R=new Uint8Array(D),L=new Array(R.length),V=0;V<R.length;V++)L[V]=String.fromCharCode(R[V]);return L.join("")}function I(D){if(D.slice)return D.slice(0);var R=new Uint8Array(D.byteLength);return R.set(new Uint8Array(D)),R.buffer}function B(){return this.bodyUsed=!1,this._initBody=function(D){this.bodyUsed=this.bodyUsed,this._bodyInit=D,D?typeof D=="string"?this._bodyText=D:f.blob&&Blob.prototype.isPrototypeOf(D)?this._bodyBlob=D:f.formData&&FormData.prototype.isPrototypeOf(D)?this._bodyFormData=D:f.searchParams&&URLSearchParams.prototype.isPrototypeOf(D)?this._bodyText=D.toString():f.arrayBuffer&&f.blob&&d(D)?(this._bodyArrayBuffer=I(D.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):f.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(D)||g(D))?this._bodyArrayBuffer=I(D):this._bodyText=D=Object.prototype.toString.call(D):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof D=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):f.searchParams&&URLSearchParams.prototype.isPrototypeOf(D)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},f.blob&&(this.blob=function(){var D=S(this);if(D)return D;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var D=S(this);return D||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(f.blob)return this.blob().then(T);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var D=S(this);if(D)return D;if(this._bodyBlob)return O(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve($(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},f.formData&&(this.formData=function(){return this.text().then(W)}),this.json=function(){return this.text().then(JSON.parse)},this}var z=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function q(D){var R=D.toUpperCase();return z.indexOf(R)>-1?R:D}function k(D,R){if(!(this instanceof k))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');R=R||{};var L=R.body;if(D instanceof k){if(D.bodyUsed)throw new TypeError("Already read");this.url=D.url,this.credentials=D.credentials,R.headers||(this.headers=new E(D.headers)),this.method=D.method,this.mode=D.mode,this.signal=D.signal,!L&&D._bodyInit!=null&&(L=D._bodyInit,D.bodyUsed=!0)}else this.url=String(D);if(this.credentials=R.credentials||this.credentials||"same-origin",(R.headers||!this.headers)&&(this.headers=new E(R.headers)),this.method=q(R.method||this.method||"GET"),this.mode=R.mode||this.mode||null,this.signal=R.signal||this.signal||function(){if("AbortController"in u){var N=new AbortController;return N.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&L)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(L),(this.method==="GET"||this.method==="HEAD")&&(R.cache==="no-store"||R.cache==="no-cache")){var V=/([?&])_=[^&]*/;if(V.test(this.url))this.url=this.url.replace(V,"$1_="+new Date().getTime());else{var X=/\?/;this.url+=(X.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}k.prototype.clone=function(){return new k(this,{body:this._bodyInit})};function W(D){var R=new FormData;return D.trim().split("&").forEach(function(L){if(L){var V=L.split("="),X=V.shift().replace(/\+/g," "),N=V.join("=").replace(/\+/g," ");R.append(decodeURIComponent(X),decodeURIComponent(N))}}),R}function F(D){var R=new E,L=D.replace(/\r?\n[\t ]+/g," ");return L.split("\r").map(function(V){return V.indexOf(`
`)===0?V.substr(1,V.length):V}).forEach(function(V){var X=V.split(":"),N=X.shift().trim();if(N){var K=X.join(":").trim();try{R.append(N,K)}catch(te){console.warn("Response "+te.message)}}}),R}B.call(k.prototype);function G(D,R){if(!(this instanceof G))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(R||(R={}),this.type="default",this.status=R.status===void 0?200:R.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=R.statusText===void 0?"":""+R.statusText,this.headers=new E(R.headers),this.url=R.url||"",this._initBody(D)}B.call(G.prototype),G.prototype.clone=function(){return new G(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new E(this.headers),url:this.url})},G.error=function(){var D=new G(null,{status:200,statusText:""});return D.ok=!1,D.status=0,D.type="error",D};var ne=[301,302,303,307,308];G.redirect=function(D,R){if(ne.indexOf(R)===-1)throw new RangeError("Invalid status code");return new G(null,{status:R,headers:{location:D}})},c.DOMException=u.DOMException;try{new c.DOMException}catch{c.DOMException=function(R,L){this.message=R,this.name=L;var V=Error(R);this.stack=V.stack},c.DOMException.prototype=Object.create(Error.prototype),c.DOMException.prototype.constructor=c.DOMException}function ee(D,R){return new Promise(function(L,V){var X=new k(D,R);if(X.signal&&X.signal.aborted)return V(new c.DOMException("Aborted","AbortError"));var N=new XMLHttpRequest;function K(){N.abort()}N.onload=function(){var ie={statusText:N.statusText,headers:F(N.getAllResponseHeaders()||"")};X.url.indexOf("file://")===0&&(N.status<200||N.status>599)?ie.status=200:ie.status=N.status,ie.url="responseURL"in N?N.responseURL:ie.headers.get("X-Request-URL");var fe="response"in N?N.response:N.responseText;setTimeout(function(){L(new G(fe,ie))},0)},N.onerror=function(){setTimeout(function(){V(new TypeError("Network request failed"))},0)},N.ontimeout=function(){setTimeout(function(){V(new TypeError("Network request timed out"))},0)},N.onabort=function(){setTimeout(function(){V(new c.DOMException("Aborted","AbortError"))},0)};function te(ie){try{return ie===""&&u.location.href?u.location.href:ie}catch{return ie}}if(N.open(X.method,te(X.url),!0),X.credentials==="include"?N.withCredentials=!0:X.credentials==="omit"&&(N.withCredentials=!1),"responseType"in N&&(f.blob?N.responseType="blob":f.arrayBuffer&&(N.responseType="arraybuffer")),R&&typeof R.headers=="object"&&!(R.headers instanceof E||u.Headers&&R.headers instanceof u.Headers)){var se=[];Object.getOwnPropertyNames(R.headers).forEach(function(ie){se.push(y(ie)),N.setRequestHeader(ie,b(R.headers[ie]))}),X.headers.forEach(function(ie,fe){se.indexOf(fe)===-1&&N.setRequestHeader(fe,ie)})}else X.headers.forEach(function(ie,fe){N.setRequestHeader(fe,ie)});X.signal&&(X.signal.addEventListener("abort",K),N.onreadystatechange=function(){N.readyState===4&&X.signal.removeEventListener("abort",K)}),N.send(typeof X._bodyInit>"u"?null:X._bodyInit)})}return ee.polyfill=!0,u.fetch||(u.fetch=ee,u.Headers=E,u.Request=k,u.Response=G),c.Headers=E,c.Request=k,c.Response=G,c.fetch=ee,c})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var i=n.fetch?n:r;t=i.fetch,t.default=i.fetch,t.fetch=i.fetch,t.Headers=i.Headers,t.Request=i.Request,t.Response=i.Response,e.exports=t}(nh,nh.exports)),nh.exports}var FB=HB();const BT=vs(FB);function qt(e){return e==null?null:e.replace(/^0x/,"").replace(/^Fx/,"")}function Bn(e){return e==null?null:"0x"+qt(e)}var rh={exports:{}},l_;function VB(){if(l_)return rh.exports;l_=1;var e=typeof Reflect=="object"?Reflect:null,t=e&&typeof e.apply=="function"?e.apply:function(I,B,z){return Function.prototype.apply.call(I,B,z)},n;e&&typeof e.ownKeys=="function"?n=e.ownKeys:Object.getOwnPropertySymbols?n=function(I){return Object.getOwnPropertyNames(I).concat(Object.getOwnPropertySymbols(I))}:n=function(I){return Object.getOwnPropertyNames(I)};function r($){console&&console.warn&&console.warn($)}var i=Number.isNaN||function(I){return I!==I};function a(){a.init.call(this)}rh.exports=a,rh.exports.once=_,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var c=10;function u($){if(typeof $!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof $)}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return c},set:function($){if(typeof $!="number"||$<0||i($))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+$+".");c=$}}),a.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(I){if(typeof I!="number"||I<0||i(I))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+I+".");return this._maxListeners=I,this};function f($){return $._maxListeners===void 0?a.defaultMaxListeners:$._maxListeners}a.prototype.getMaxListeners=function(){return f(this)},a.prototype.emit=function(I){for(var B=[],z=1;z<arguments.length;z++)B.push(arguments[z]);var q=I==="error",k=this._events;if(k!==void 0)q=q&&k.error===void 0;else if(!q)return!1;if(q){var W;if(B.length>0&&(W=B[0]),W instanceof Error)throw W;var F=new Error("Unhandled error."+(W?" ("+W.message+")":""));throw F.context=W,F}var G=k[I];if(G===void 0)return!1;if(typeof G=="function")t(G,this,B);else for(var ne=G.length,ee=v(G,ne),z=0;z<ne;++z)t(ee[z],this,B);return!0};function d($,I,B,z){var q,k,W;if(u(B),k=$._events,k===void 0?(k=$._events=Object.create(null),$._eventsCount=0):(k.newListener!==void 0&&($.emit("newListener",I,B.listener?B.listener:B),k=$._events),W=k[I]),W===void 0)W=k[I]=B,++$._eventsCount;else if(typeof W=="function"?W=k[I]=z?[B,W]:[W,B]:z?W.unshift(B):W.push(B),q=f($),q>0&&W.length>q&&!W.warned){W.warned=!0;var F=new Error("Possible EventEmitter memory leak detected. "+W.length+" "+String(I)+" listeners added. Use emitter.setMaxListeners() to increase limit");F.name="MaxListenersExceededWarning",F.emitter=$,F.type=I,F.count=W.length,r(F)}return $}a.prototype.addListener=function(I,B){return d(this,I,B,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(I,B){return d(this,I,B,!0)};function p(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function g($,I,B){var z={fired:!1,wrapFn:void 0,target:$,type:I,listener:B},q=p.bind(z);return q.listener=B,z.wrapFn=q,q}a.prototype.once=function(I,B){return u(B),this.on(I,g(this,I,B)),this},a.prototype.prependOnceListener=function(I,B){return u(B),this.prependListener(I,g(this,I,B)),this},a.prototype.removeListener=function(I,B){var z,q,k,W,F;if(u(B),q=this._events,q===void 0)return this;if(z=q[I],z===void 0)return this;if(z===B||z.listener===B)--this._eventsCount===0?this._events=Object.create(null):(delete q[I],q.removeListener&&this.emit("removeListener",I,z.listener||B));else if(typeof z!="function"){for(k=-1,W=z.length-1;W>=0;W--)if(z[W]===B||z[W].listener===B){F=z[W].listener,k=W;break}if(k<0)return this;k===0?z.shift():E(z,k),z.length===1&&(q[I]=z[0]),q.removeListener!==void 0&&this.emit("removeListener",I,F||B)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(I){var B,z,q;if(z=this._events,z===void 0)return this;if(z.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):z[I]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete z[I]),this;if(arguments.length===0){var k=Object.keys(z),W;for(q=0;q<k.length;++q)W=k[q],W!=="removeListener"&&this.removeAllListeners(W);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(B=z[I],typeof B=="function")this.removeListener(I,B);else if(B!==void 0)for(q=B.length-1;q>=0;q--)this.removeListener(I,B[q]);return this};function y($,I,B){var z=$._events;if(z===void 0)return[];var q=z[I];return q===void 0?[]:typeof q=="function"?B?[q.listener||q]:[q]:B?S(q):v(q,q.length)}a.prototype.listeners=function(I){return y(this,I,!0)},a.prototype.rawListeners=function(I){return y(this,I,!1)},a.listenerCount=function($,I){return typeof $.listenerCount=="function"?$.listenerCount(I):b.call($,I)},a.prototype.listenerCount=b;function b($){var I=this._events;if(I!==void 0){var B=I[$];if(typeof B=="function")return 1;if(B!==void 0)return B.length}return 0}a.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]};function v($,I){for(var B=new Array(I),z=0;z<I;++z)B[z]=$[z];return B}function E($,I){for(;I+1<$.length;I++)$[I]=$[I+1];$.pop()}function S($){for(var I=new Array($.length),B=0;B<I.length;++B)I[B]=$[B].listener||$[B];return I}function _($,I){return new Promise(function(B,z){function q(W){$.removeListener(I,k),z(W)}function k(){typeof $.removeListener=="function"&&$.removeListener("error",q),B([].slice.call(arguments))}O($,I,k,{once:!0}),I!=="error"&&T($,q,{once:!0})})}function T($,I,B){typeof $.on=="function"&&O($,"error",I,B)}function O($,I,B,z){if(typeof $.on=="function")z.once?$.once(I,B):$.on(I,B);else if(typeof $.addEventListener=="function")$.addEventListener(I,function q(k){z.once&&$.removeEventListener(I,q),B(k)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof $)}return rh.exports}var tr=VB();const Ep=vs(tr);var Uc=null;typeof WebSocket<"u"?Uc=WebSocket:typeof MozWebSocket<"u"?Uc=MozWebSocket:typeof global<"u"?Uc=global.WebSocket||global.MozWebSocket:typeof window<"u"?Uc=window.WebSocket||window.MozWebSocket:typeof self<"u"&&(Uc=self.WebSocket||self.MozWebSocket);const GB=Uc;function PT(e){try{return JSON.parse(e)}catch{return null}}function UT(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}const KB=globalThis.AbortController||require("abort-controller");class Ph extends Error{constructor(t){let{error:n,hostname:r,path:i,method:a,requestBody:c,responseBody:u,responseStatusText:f,statusCode:d}=t;const p=`
      HTTP Request Error: An error occurred when interacting with the Access API.
      ${n?`error=${n}`:""}
      ${r?`hostname=${r}`:""}
      ${i?`path=${i}`:""}
      ${a?`method=${a}`:""}
      ${c?`requestBody=${c}`:""}
      ${u?`responseBody=${u}`:""}
      ${f?`responseStatusText=${f}`:""}
      ${d?`statusCode=${d}`:""}
    `;super(p),this.name="HTTP Request Error",this.statusCode=d,this.errorMessage=n}}async function Ht(e){let{hostname:t,path:n,method:r,body:i,headers:a,retryLimit:c=5,retryIntervalMs:u=1e3,timeoutLimit:f=3e4,enableRequestLogging:d=!0}=e;const p=i?JSON.stringify(i):null;function g(){const b=new KB,v=setTimeout(()=>{b.abort()},f);return BT(UT(t,n).toString(),{method:r,body:p,headers:a,signal:b.signal}).then(async E=>{if(E.ok)return E.json();const S=await E.text().catch(()=>null),_=PT(S);throw new Ph({error:_?.message,hostname:t,path:n,method:r,requestBody:p,responseBody:S,responseStatusText:E.statusText,statusCode:E.status})}).catch(async E=>{throw E instanceof Ph||E.name==="AbortError"?E:(d&&await Fe({title:"Access Node Error",message:`The provided access node ${t} does not appear to be a valid REST/HTTP access node.
  Please verify that you are not unintentionally using a GRPC access node.
  See more here: https://docs.onflow.org/fcl/reference/sdk-guidelines/#connect`,level:ht.error}),new Ph({error:E?.message,hostname:t,path:n,method:r,requestBody:p}))}).finally(()=>{clearTimeout(v)})}async function y(){let b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;try{return await g()}catch(v){const E=[408,429,500,502,503,504];if(v.name==="AbortError"||E.includes(v.statusCode))return await new Promise((S,_)=>{b<c?(d&&console.warn(`Access node unavailable, retrying in ${u} ms...`),setTimeout(()=>{S(y(b+1))},u)):_(v)});throw v}}return await y()}async function WB(e,t,n){const i=await(n.httpRequest||Ht)({hostname:n.node,path:`/v1/scripts?block_id=${e.block.id}`,method:"POST",body:{script:t.Buffer.from(e.message.cadence).toString("base64"),arguments:e.message.arguments.map(a=>t.Buffer.from(JSON.stringify(e.arguments[a].asArgument)).toString("base64"))}});return Iv(e,t,i)}async function YB(e,t,n){const i=await(n.httpRequest||Ht)({hostname:n.node,path:`/v1/scripts?block_height=${e.block.height}`,method:"POST",body:{script:t.Buffer.from(e.message.cadence).toString("base64"),arguments:e.message.arguments.map(a=>t.Buffer.from(JSON.stringify(e.arguments[a].asArgument)).toString("base64"))}});return Iv(e,t,i)}async function XB(e,t,n){const i=await(n.httpRequest||Ht)({hostname:n.node,path:`/v1/scripts?block_height=${e.block.isSealed?"sealed":"final"}`,method:"POST",body:{script:t.Buffer.from(e.message.cadence).toString("base64"),arguments:e.message.arguments.map(a=>t.Buffer.from(JSON.stringify(e.arguments[a].asArgument)).toString("base64"))}});return Iv(e,t,i)}function Iv(e,t,n){let r=t.response();return r.tag=e.tag,r.encodedData=JSON.parse(t.Buffer.from(n,"base64").toString()),r}async function ZB(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return he(n.node,"SDK Send Execute Script Error: opts.node must be defined."),he(t.response,"SDK Send Execute Script Error: context.response must be defined."),he(t.Buffer,"SDK Send Execute Script Error: context.Buffer must be defined."),e=await e,e.block.id?await WB(e,t,n):e.block.height?await YB(e,t,n):await XB(e,t,n)}const QB={SHA2_256:1,SHA2_384:2,SHA3_256:3,SHA3_384:4,KMAC128_BLS_BLS12_381:5},JB={ECDSA_P256:1,ECDSA_secp256k1:2,BLS_BLS12_381:3};async function eP(e,t,n){const i=await(n.httpRequest||Ht)({hostname:n.node,path:`/v1/accounts/${e.account.addr}?block_height=${e.block.height}&expand=contracts,keys`,method:"GET",body:null});return kT(e,t,i)}async function tP(e,t,n){const i=await(n.httpRequest||Ht)({hostname:n.node,path:`/v1/accounts/${e.account.addr}?block_height=${e.block.isSealed?"sealed":"final"}&expand=contracts,keys`,method:"GET",body:null});return kT(e,t,i)}function kT(e,t,n){let r=t.response();r.tag=e.tag;const i=a=>{const c={};if(!a)return c;for(let u of Object.keys(a))c[u]=t.Buffer.from(a[u],"base64").toString();return c};return r.account={address:n.address,balance:Number(n.balance),code:"",contracts:i(n.contracts),keys:n.keys?.map(a=>({index:Number(a.index),publicKey:a.public_key.replace(/^0x/,""),signAlgo:JB[a.signing_algorithm],signAlgoString:a.signing_algorithm,hashAlgo:QB[a.hashing_algorithm],hashAlgoString:a.hashing_algorithm,sequenceNumber:Number(a.sequence_number),weight:Number(a.weight),revoked:a.revoked}))??[]},r}async function nP(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return he(n.node,"SDK Send Get Account Error: opts.node must be defined."),he(t.response,"SDK Send Get Account Error: context.response must be defined."),he(t.Buffer,"SDK Send Get Account Error: context.Buffer must be defined."),e=await e,e.block.height!==null?await eP(e,t,n):await tP(e,t,n)}async function rP(e,t,n){const i=await(n.httpRequest||Ht)({hostname:n.node,path:`/v1/blocks/${e.block.id}`,method:"GET",body:null});return Nv(e,t,i)}async function iP(e,t,n){const i=await(n.httpRequest||Ht)({hostname:n.node,path:`/v1/blocks?height=${e.block.height}`,method:"GET",body:null});return Nv(e,t,i)}async function sP(e,t,n){const r=n.httpRequest||Ht,i=e.block?.isSealed?"sealed":"final",a=await r({hostname:n.node,path:`/v1/blocks?height=${i}`,method:"GET",body:null});return Nv(e,t,a)}function Nv(e,t,n){const r=n.length?n[0]:null,i=t.response();return i.tag=e.tag,i.blockHeader={id:r.header.id,parentId:r.header.parent_id,height:Number(r.header.height),timestamp:r.header.timestamp},i}async function oP(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};he(n.node,"SDK Send Get Block Header Error: opts.node must be defined."),he(t.response,"SDK Send Get Block Header Error: context.response must be defined."),e=await e;const r=e.block.id!==null,i=e.block.height!==null;return r?await rP(e,t,n):i?await iP(e,t,n):await sP(e,t,n)}async function aP(e,t,n){const i=await(n.httpRequest||Ht)({hostname:n.node,path:`/v1/blocks/${e.block.id}?expand=payload`,method:"GET",body:null});return $v(e,t,i)}async function cP(e,t,n){const i=await(n.httpRequest||Ht)({hostname:n.node,path:`/v1/blocks?height=${e.block.height}&expand=payload`,method:"GET",body:null});return $v(e,t,i)}async function lP(e,t,n){const r=n.httpRequest||Ht,i=e.block?.isSealed?"sealed":"final",a=await r({hostname:n.node,path:`/v1/blocks?height=${i}&expand=payload`,method:"GET",body:null});return $v(e,t,a)}function $v(e,t,n){const r=n.length?n[0]:null,i=t.response();return i.tag=e.tag,i.block={id:r.header.id,parentId:r.header.parent_id,height:Number(r.header.height),timestamp:r.header.timestamp,parentVoterSignature:r.header.parent_voter_signature,collectionGuarantees:r.payload.collection_guarantees.map(a=>({collectionId:a.collection_id,signerIds:a.signer_ids})),blockSeals:r.payload.block_seals.map(a=>({blockId:a.block_id,executionReceiptId:a.result_id}))},i}async function uP(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};he(n.node,"SDK Send Get Block Error: opts.node must be defined."),he(t.response,"SDK Send Get Block Error: context.response must be defined."),e=await e;const r=e.block.id!==null,i=e.block.height!==null;return r?await aP(e,t,n):i?await cP(e,t,n):await lP(e,t,n)}async function fP(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};he(n.node,"SDK Send Get Collection Error: opts.node must be defined."),he(t.response,"SDK Send Get Collection Error: context.response must be defined.");const i=await(n.httpRequest||Ht)({hostname:n.node,path:`/v1/collections/${e.collection.id}?expand=transactions`,method:"GET",body:null}),a=t.response();return a.tag=e.tag,a.collection={id:i.id,transactionIds:i.transactions.map(c=>c.id)},a}async function dP(e,t,n){const i=await(n.httpRequest||Ht)({hostname:n.node,path:`/v1/events?type=${e.events.eventType}&start_height=${e.events.start}&end_height=${e.events.end}`,method:"GET",body:null});return MT(e,t,i)}async function hP(e,t,n){const i=await(n.httpRequest||Ht)({hostname:n.node,path:`/v1/events?type=${e.events.eventType}&block_ids=${e.events.blockIds.join(",")}`,method:"GET",body:null});return MT(e,t,i)}function MT(e,t,n){let r=t.response();return r.tag=e.tag,r.events=[],n.forEach(i=>i.events?i.events.forEach(a=>r.events.push({blockId:i.block_id,blockHeight:Number(i.block_height),blockTimestamp:i.block_timestamp,type:a.type,transactionId:a.transaction_id,transactionIndex:Number(a.transaction_index),eventIndex:Number(a.event_index),payload:JSON.parse(t.Buffer.from(a.payload,"base64").toString())})):null),r}async function pP(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};he(n.node,"SDK Send Get Events Error: opts.node must be defined."),he(t.response,"SDK Send Get Events Error: context.response must be defined."),he(t.Buffer,"SDK Send Get Events Error: context.Buffer must be defined."),e=await e;const r=e.events.start!==null,i=Array.isArray(e.events.blockIds)&&e.events.blockIds.length>0;return he(r||i,"SendGetEventsError: Unable to determine which get events request to send. Either a block height range, or block IDs must be specified."),r?await dP(e,t,n):await hP(e,t,n)}async function gP(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};he(n.node,"SDK Send Get Transaction Error: opts.node must be defined."),he(t.response,"SDK Send Get Transaction Error: context.response must be defined."),he(t.Buffer,"SDK Send Get Transaction Error: context.Buffer must be defined.");const r=n.httpRequest||Ht;e=await e;const i=await r({hostname:n.node,path:`/v1/transactions/${e.transaction.id}`,method:"GET",body:null}),a=d=>({address:d.address,keyId:Number(d.key_index),sequenceNumber:Number(d.sequence_number)}),c=d=>({address:d.address,keyId:Number(d.key_index),signature:d.signature}),u=d=>JSON.parse(t.Buffer.from(d,"base64").toString());let f=t.response();return f.tag=e.tag,f.transaction={script:t.Buffer.from(i.script,"base64").toString(),args:[...i.arguments.map(u)],referenceBlockId:i.reference_block_id,gasLimit:Number(i.gas_limit),payer:i.payer,proposalKey:i.proposal_key?a(i.proposal_key):i.proposal_key,authorizers:i.authorizers,payloadSignatures:[...i.payload_signatures.map(c)],envelopeSignatures:[...i.envelope_signatures.map(c)]},f}const mP={UNKNOWN:0,PENDING:1,FINALIZED:2,EXECUTED:3,SEALED:4,EXPIRED:5};async function yP(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};he(n.node,"SDK Send Get Transaction Status Error: opts.node must be defined."),he(t.response,"SDK Send Get Transaction Status Error: context.response must be defined."),he(t.Buffer,"SDK Send Get Transaction Status Error: context.Buffer must be defined.");const r=n.httpRequest||Ht;e=await e;const i=await r({hostname:n.node,path:`/v1/transaction_results/${e.transaction.id}`,method:"GET",body:null});let a=t.response();return a.tag=e.tag,a.transactionStatus={blockId:i.block_id,status:mP[i.status.toUpperCase()]||"",statusString:i.status.toUpperCase(),statusCode:i.status_code,errorMessage:i.error_message,events:i.events.map(c=>({type:c.type,transactionId:c.transaction_id,transactionIndex:Number(c.transaction_index),eventIndex:Number(c.event_index),payload:JSON.parse(t.Buffer.from(c.payload,"base64").toString())}))},a}async function bP(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};he(!!n.node,"SDK Send Ping Error: opts.node must be defined."),he(!!t.response,"SDK Send Ping Error: context.response must be defined."),await(n.httpRequest||Ht)({hostname:n.node,path:"/v1/blocks?height=sealed",method:"GET",body:null});let i=typeof t?.response=="function"?t.response():{};return i.tag=e.tag,i}const vP=e=>`${withPrefix(e.addr)}-${e.keyId}`;async function wP(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};he(n.node,"SDK Send Transaction Error: opts.node must be defined."),he(t.response,"SDK Send Transaction Error: context.response must be defined."),he(t.Buffer,"SDK Send Transaction Error: context.Buffer must be defined.");const r=n.httpRequest||Ht;e=await e;let i=[];for(let p of Object.values(e.accounts))try{if(!p.role.payer&&p.signature!=null){const g={address:qt(p.addr),key_index:String(p.keyId),signature:t.Buffer.from(p.signature,"hex").toString("base64")};i.find(y=>y.address===g.address&&y.key_index===g.key_index&&y.signature===g.signature)||i.push(g)}}catch(g){throw console.error("SDK HTTP Send Error: Trouble applying payload signature",{acct:p,ix:e}),g}let a={};for(let p of Object.values(e.accounts))try{if(p.role.payer&&p.signature!=null){let g=p.tempId||vP(p);a[g]=a[g]||{address:qt(p.addr),key_index:String(p.keyId),signature:t.Buffer.from(p.signature,"hex").toString("base64")}}}catch(g){throw console.error("SDK HTTP Send Error: Trouble applying envelope signature",{acct:p,ix:e}),g}a=Object.values(a);var c=Date.now();const u=await r({hostname:n.node,path:"/v1/transactions",method:"POST",body:{script:t.Buffer.from(e.message.cadence).toString("base64"),arguments:[...e.message.arguments.map(p=>t.Buffer.from(JSON.stringify(e.arguments[p].asArgument)).toString("base64"))],reference_block_id:e.message.refBlock?e.message.refBlock:null,gas_limit:String(e.message.computeLimit),payer:qt(e.accounts[Array.isArray(e.payer)?e.payer[0]:e.payer].addr),proposal_key:{address:qt(e.accounts[e.proposer].addr),key_index:String(e.accounts[e.proposer].keyId),sequence_number:String(e.accounts[e.proposer].sequenceNum)},authorizers:e.authorizations.map(p=>e.accounts[p].addr).reduce((p,g)=>p.find(y=>y===g)?p:[...p,g],[]).map(qt),payload_signatures:i,envelope_signatures:a}});var f=Date.now();let d=t.response();return d.tag=e.tag,d.transactionId=u.id,typeof window<"u"&&typeof CustomEvent<"u"&&window.dispatchEvent(new CustomEvent("FLOW::TX",{detail:{txId:d.transactionId,delta:f-c}})),d}async function EP(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};he(n.node,"SDK Send Get Network Parameters Error: opts.node must be defined."),he(t.response,"SDK Send Get Network Parameters Error: context.response must be defined.");const r=n.httpRequest||Ht;e=await e;const i=await r({hostname:n.node,path:"/v1/network/parameters",method:"GET",body:null,enableRequestLogging:n.enableRequestLogging??!0});let a=t.response();return a.tag=e.tag,a.networkParameters={chainId:i.chain_id},a}async function SP(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};he(n.node,"SDK Send Get Node Version Info Error: opts.node must be defined."),he(t.response,"SDK Send Get Node Verison Info Error: context.response must be defined.");const r=n.httpRequest||Ht;e=await e;const i=await r({hostname:n.node,path:"/v1/node_version_info",method:"GET"});let a=t.response();return a.tag=e.tag,a.nodeVersionInfo={semver:i.semver,commit:i.commit,sporkId:i.spork_id,protocolVersion:parseInt(i.protocol_version),sporkRootBlockHeight:parseInt(i.spork_root_block_height),nodeRootBlockHeight:parseInt(i.node_root_block_height)},a}const jT=GB;class u_ extends Error{constructor(t){let{code:n,reason:r,message:i,wasClean:a}=t;const c=`
      connectWs: connection closed with error${i?`: ${i}`:""}
      ${n?`code: ${n}`:""}
      ${r?`reason: ${r}`:""}
      ${a?`wasClean: ${a}`:""}
    `;super(c),this.name="WebsocketError",this.code=n,this.reason=r,this.wasClean=!1}}function _P(e){let{hostname:t,path:n,params:r,getParams:i,retryLimit:a=5,retryIntervalMs:c=1e3}=e;if(i&&r)throw new Error("connectWs: cannot specify both params and getParams");let u=new tr.EventEmitter,f=0;const d=i||(()=>r);let p=()=>{};return function g(){let y=!1,b=!1;const v=xP(t,n,d()),E=new jT(v);E.onmessage=function(S){const _=PT(S.data);_?u.emit("data",_):(u.emit("error",new u_({message:"invalid JSON data"})),this.close())},E.onclose=function(S){if(y){u.emit("close"),u.removeAllListeners();return}b?setTimeout(g,c):f<a?(f++,setTimeout(g,c)):(u.emit("error",new u_({wasClean:S.wasClean,code:S.code,reason:S.reason,message:"failed to connect"})),setTimeout(()=>{u.emit("close"),u.removeAllListeners()}))},E.onopen=function(){b=!0,f=0},p=()=>{y=!0,E.close()}}(),{on(g,y){return u.on(g,y),this},off(g,y){return u.off(g,y),this},close(){p()}}}function xP(e,t,n){const r=new URL(t||"",e);return r.protocol==="https:"?r.protocol="wss:":r.protocol==="http:"&&(r.protocol="ws:"),Object.entries(n||{}).forEach(i=>{let[a,c]=i;if(c){let u;Array.isArray(c)?u=c.join(","):u=c.toString(),r.searchParams.append(a,u)}}),r.toString()}function AP(e,t,n){const r=t.response();return r.tag=e.tag,r.events=n.Events?.length>0?n.Events.map(i=>({blockId:n.BlockID,blockHeight:Number(n.Height),blockTimestamp:n.BlockTimestamp,type:i.Type,transactionId:i.TransactionID,transactionIndex:Number(i.TransactionIndex),eventIndex:Number(i.EventIndex),payload:JSON.parse(t.Buffer.from(i.Payload,"base64").toString())})):null,r.heartbeat={blockId:n.BlockID,blockHeight:Number(n.Height),blockTimestamp:n.BlockTimestamp},r}function RP(e,t,n){const r=t.response();return r.tag=e.tag,r.streamConnection=n,r}async function OP(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};he(n.node,"SDK Send Get Events Error: opts.node must be defined."),he(t.response,"SDK Send Get Events Error: context.response must be defined."),he(t.Buffer,"SDK Send Get Events Error: context.Buffer must be defined.");const r=await e,i=n.connectWs||_P,a=new tr.EventEmitter;let c=null;const u=i({hostname:n.node,path:"/v1/subscribe_events",getParams:()=>{const d={event_types:r.subscribeEvents?.eventTypes,addresses:r.subscribeEvents?.addresses,contracts:r.subscribeEvents?.contracts,heartbeat_interval:r.subscribeEvents?.heartbeatInterval};return c?d.start_height=c+1:(d.start_block_id=r.subscribeEvents?.startBlockId,d.start_height=r.subscribeEvents?.startHeight),d}});return u.on("data",d=>{const p=AP(r,t,d);c=p.heartbeat.blockHeight,a.emit("data",p)}),u.on("error",d=>{a.emit("error",d)}),u.on("close",()=>{a.emit("close")}),RP(r,t,{on(d,p){return a.on(d,p),this},off(d,p){return a.off(d,p),this},close(){u.close()}})}const Bv=async function(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};switch(he(!!n?.node,'SDK Send Error: Either opts.node or "accessNode.api" in config must be defined.'),he(!!t.ix,"SDK Send Error: context.ix must be defined."),e=await e,!0){case t.ix.isTransaction(e):return n.sendTransaction?n.sendTransaction(e,t,n):wP(e,t,n);case t.ix.isGetTransactionStatus(e):return n.sendGetTransactionStatus?n.sendGetTransactionStatus(e,t,n):yP(e,t,n);case t.ix.isGetTransaction(e):return n.sendGetTransaction?n.sendGetTransaction(e,t,n):gP(e,t,n);case t.ix.isScript(e):return n.sendExecuteScript?n.sendExecuteScript(e,t,n):ZB(e,t,n);case t.ix.isGetAccount(e):return n.sendGetAccount?n.sendGetAccount(e,t,n):nP(e,t,n);case t.ix.isGetEvents(e):return n.sendGetEvents?n.sendGetEvents(e,t,n):pP(e,t,n);case t.ix.isSubscribeEvents?.(e):return n.connectSubscribeEvents?n.connectSubscribeEvents(e,t,n):OP(e,t,n);case t.ix.isGetBlock(e):return n.sendGetBlock?n.sendGetBlock(e,t,n):uP(e,t,n);case t.ix.isGetBlockHeader(e):return n.sendGetBlockHeader?n.sendGetBlockHeader(e,t,n):oP(e,t,n);case t.ix.isGetCollection(e):return n.sendGetCollection?n.sendGetCollection(e,t,n):fP(e,t,n);case t.ix.isPing(e):return n.sendPing?n.sendPing(e,t,n):bP(e,t,n);case t.ix.isGetNetworkParameters(e):return n.sendGetNetworkParameters?n.sendGetNetworkParameters(e,t,n):EP(e,t,n);case t.ix.isGetNodeVersionInfo?.(e):return n.sendGetNodeVersionInfo?n.sendGetNodeVersionInfo(e,t,n):SP(e,t,n);default:return e}};let f_=function(e){return e.LIST_SUBSCRIPTIONS="list_subscriptions",e.SUBSCRIBE="subscribe",e.UNSUBSCRIBE="unsubscribe",e}({});class zu extends Error{constructor(t,n){super(n),this.name="SocketError",this.code=t}static fromMessage(t){return new zu(t.code,t.message)}}const TP=1;class DP{counter=0;socket=null;subscriptions=[];reconnectAttempts=0;connectPromise=null;closeConnection=null;constructor(t,n){this.config={...n,reconnectOptions:{initialReconnectDelay:500,reconnectAttempts:5,maxReconnectDelay:5e3,...n.reconnectOptions}},this.handlers=t}subscribe(t){const n=this._subscribe(t);return{unsubscribe:()=>{n.then(r=>r&&this.unsubscribe(r))}}}async _subscribe(t){const r=this.getHandler(t.topic).createSubscriber(t.args,t.onData,t.onError);let i=null;try{await this.connect(),i={id:String(this.counter++),topic:t.topic,subscriber:r},this.subscriptions.push(i);const a=await this.sendSubscribe(i);if(a.error)throw new Error(`Failed to subscribe to topic ${i.topic}`,{cause:zu.fromMessage(a.error)})}catch(a){return r.onError(a instanceof Error?a:new Error(String(a))),i&&this.unsubscribe(i.id),null}return i.id}unsubscribe(t){const n=this.subscriptions.find(r=>r.id===t);if(n){if(this.subscriptions=this.subscriptions.filter(r=>r.id!==t),this.subscriptions.length===0){this.closeConnection?.();return}this.sendUnsubscribe(n).catch(r=>{console.error(`Error while unsubscribing from topic: ${r}`)})}}async connect(){return this.connectPromise?this.connectPromise:(this.connectPromise=new Promise((t,n)=>{if(this.socket?.readyState===TP){t();return}this.socket=new jT(this.config.node);const r=c=>{const u=JSON.parse(c.data);if("action"in u&&u.error){const d=this.subscriptions.find(p=>p.id===u.subscription_id);d&&(d.subscriber.onError(new Error(`Failed to subscribe to topic ${d.topic}: ${u.error.message}`)),this.subscriptions=this.subscriptions.filter(p=>p.id!==u.subscription_id));return}const f=this.subscriptions.find(d=>d.id===u.subscription_id);f&&!("action"in u)&&u.subscription_id===f.id&&f.subscriber.onData(u.payload)},i=()=>{this.handleSocketError(new Error("WebSocket closed")).then(()=>{t()}).catch(c=>{n(c)})},a=()=>{t()};this.socket.addEventListener("message",r),this.socket.addEventListener("close",i),this.socket.addEventListener("open",a),this.closeConnection=()=>{this.socket?.removeEventListener("message",r),this.socket?.removeEventListener("close",i),this.socket?.removeEventListener("open",a),this.socket?.close(),this.socket=null,this.closeConnection=null,this.connectPromise=null}}),this.connectPromise)}async handleSocketError(t){if(this.closeConnection?.(),++this.reconnectAttempts>=this.config.reconnectOptions.reconnectAttempts)throw Fe({level:ht.error,title:"WebSocket Error",message:`Failed to reconnect to the server after ${this.reconnectAttempts+1} attempts: ${t}`}),this.subscriptions.forEach(n=>{n.subscriber.onError(new Error(`Failed to reconnect to the server after ${this.reconnectAttempts+1} attempts: ${t}`))}),this.subscriptions=[],this.reconnectAttempts=0,t;Fe({level:ht.warn,title:"WebSocket Error",message:`WebSocket error, reconnecting in ${this.backoffInterval}ms: ${t}`}),await new Promise(n=>setTimeout(n,this.backoffInterval)),await this.connect(),await Promise.all(this.subscriptions.map(async n=>{await this.sendSubscribe(n).catch(r=>{n.subscriber.onError(new Error(`Failed to restore subscription: ${r}`)),this.subscriptions=this.subscriptions.filter(i=>i.id!==n.id)})})),this.reconnectAttempts=0}async sendSubscribe(t){const n={action:f_.SUBSCRIBE,topic:t.topic,arguments:t.subscriber.getConnectionArgs(),subscription_id:String(t.id)},r=await this.request(n);if(r.error)throw new Error(`Failed to subscribe to topic ${t.topic}`,{cause:zu.fromMessage(r.error)});return r}async sendUnsubscribe(t){const n={action:f_.UNSUBSCRIBE,subscription_id:t.id};this.socket?.send(JSON.stringify(n));const r=await this.request(n);if(r.error)throw new Error(`Failed to unsubscribe from topic ${t.topic}`,{cause:zu.fromMessage(r.error)});return r}async request(t){let n=()=>{};return await new Promise((r,i)=>{if(!this.socket){i(new Error("WebSocket is not connected"));return}n=()=>{this.socket?.removeEventListener("error",a),this.socket?.removeEventListener("message",u),this.socket?.removeEventListener("close",c)},this.socket.addEventListener("error",a),this.socket.addEventListener("message",u),this.socket.addEventListener("close",c),this.socket.send(JSON.stringify(t));function a(f){i(new Error(`WebSocket error: ${f}`))}function c(){i(new Error("WebSocket closed"))}function u(f){const d=JSON.parse(f.data);d.subscription_id===t.subscription_id&&r(d)}}).finally(()=>{n()})}getHandler(t){const n=this.handlers.find(r=>r.topic===t);if(!n)throw new Error(`No handler found for topic ${t}`);return n}get backoffInterval(){return Math.min(this.config.reconnectOptions.maxReconnectDelay,this.config.reconnectOptions.initialReconnectDelay*2**this.reconnectAttempts)}}const CP={topic:ga.BLOCKS,createSubscriber:(e,t,n)=>{let r={...e};return{onData(i){const a={block:{id:i.header.id,parentId:i.header.parent_id,height:Number(i.header.height),timestamp:i.header.timestamp,parentVoterSignature:i.header.parent_voter_signature,collectionGuarantees:i.payload.collection_guarantees.map(c=>({collectionId:c.collection_id,signerIds:c.signer_indices})),blockSeals:i.payload.block_seals.map(c=>({blockId:c.block_id,executionReceiptId:c.result_id}))}};r={blockStatus:r.blockStatus,startBlockHeight:Number(BigInt(i.header.height)+BigInt(1))},t(a)},onError(i){n(i)},getConnectionArgs(){let i={block_status:r.blockStatus};return"startBlockHeight"in r&&r.startBlockHeight?{...i,start_block_height:String(r.startBlockHeight)}:"startBlockId"in r&&r.startBlockId?{...i,start_block_id:r.startBlockId}:i}}}},IP={topic:ga.BLOCK_HEADERS,createSubscriber:(e,t,n)=>{let r={...e};return{onData(i){const a={blockHeader:{id:i.id,parentId:i.parent_id,height:Number(i.height),timestamp:i.timestamp,parentVoterSignature:i.parent_voter_signature}};r={blockStatus:r.blockStatus,startBlockHeight:Number(BigInt(i.height)+BigInt(1))},t(a)},onError(i){n(i)},getConnectionArgs(){let i={block_status:r.blockStatus};return"startBlockHeight"in r&&r.startBlockHeight?{...i,start_block_height:r.startBlockHeight}:"startBlockId"in r&&r.startBlockId?{...i,start_block_id:r.startBlockId}:i}}}},NP={topic:ga.BLOCK_DIGESTS,createSubscriber:(e,t,n)=>{let r={...e};return{onData(i){const a={blockDigest:{id:i.block_id,height:Number(i.height),timestamp:i.timestamp}};r={blockStatus:r.blockStatus,startBlockId:String(BigInt(i.height)+BigInt(1))},t(a)},onError(i){n(i)},getConnectionArgs(){let i={block_status:r.blockStatus};return"startBlockHeight"in r&&r.startBlockHeight?{...i,start_block_height:r.startBlockHeight}:"startBlockId"in r&&r.startBlockId?{...i,start_block_id:r.startBlockId}:i}}}},$P={topic:ga.ACCOUNT_STATUSES,createSubscriber:(e,t,n)=>{let r={...e};return{onData(i){const a=[];for(const[c,u]of Object.entries(i.account_events)){for(const f of u){const d={accountStatusEvent:{accountAddress:c,blockId:i.block_id,blockHeight:Number(i.height),type:f.type,transactionId:f.transaction_id,transactionIndex:Number(f.transaction_index),eventIndex:Number(f.event_index),payload:JSON.parse(Buffer.from(f.payload,"base64").toString())}};a.push(d)}a.sort((f,d)=>{const p=f.accountStatusEvent.transactionIndex-d.accountStatusEvent.transactionIndex;return p!==0?p:f.accountStatusEvent.eventIndex-d.accountStatusEvent.eventIndex});for(const f of a)t(f);r={...r,startBlockHeight:Number(BigInt(i.height)+BigInt(1)),startBlockId:void 0}}},onError(i){n(i)},getConnectionArgs(){let i={event_types:r.eventTypes,addresses:r.addresses,account_addresses:r.accountAddresses};return"startBlockHeight"in r&&r.startBlockHeight?{...i,start_block_height:r.startBlockHeight}:"startBlockId"in r&&r.startBlockId?{...i,start_block_id:r.startBlockId}:i}}}},BP={UNKNOWN:0,PENDING:1,FINALIZED:2,EXECUTED:3,SEALED:4,EXPIRED:5},PP={topic:ga.TRANSACTION_STATUSES,createSubscriber:(e,t,n)=>{let r={...e};return{onData(i){const a={transactionStatus:{blockId:i.transaction_result.block_id,status:BP[i.transaction_result.status.toUpperCase()],statusString:i.transaction_result.status.toUpperCase(),statusCode:i.transaction_result.status_code,errorMessage:i.transaction_result.error_message,events:i.transaction_result.events.map(c=>({type:c.type,transactionId:c.transaction_id,transactionIndex:Number(c.transaction_index),eventIndex:Number(c.event_index),payload:JSON.parse(Nt.Buffer.from(c.payload,"base64").toString())}))}};t(a)},onError(i){n(i)},getConnectionArgs(){return{tx_id:r.transactionId}}}}},UP={topic:ga.EVENTS,createSubscriber:(e,t,n)=>{let r={...e};return{onData(i){for(const a of i.events){const c={event:{blockId:i.block_id,blockHeight:Number(i.block_height),blockTimestamp:i.block_timestamp,type:a.type,transactionId:a.transaction_id,transactionIndex:Number(a.transaction_index),eventIndex:Number(a.event_index),payload:JSON.parse(Buffer.from(a.payload,"base64").toString())}};t(c)}r={...r,startHeight:Number(BigInt(i.block_height)+BigInt(1)),startBlockId:void 0}},onError(i){n(i)},getConnectionArgs(){let i={event_types:r.eventTypes,addresses:r.addresses,contracts:r.contracts};return"startBlockHeight"in r&&r.startBlockHeight?{...i,start_block_height:r.startBlockHeight}:"startBlockId"in r&&r.startBlockId?{...i,start_block_id:r.startBlockId}:i}}}},kP=[CP,IP,NP,$P,PP,UP];let d_=new Map;function MP(e,t){let{topic:n,args:r,onData:i,onError:a}=e;const c=jP(t.node),u=d_.get(c)||new DP(kP,{node:c});return d_.set(c,u),u.subscribe({topic:n,args:r,onData:i,onError:a})}function jP(e){const t=new URL(UT(e,"/v1/ws"));return t.protocol==="https:"?t.protocol="wss:":t.protocol==="http:"&&(t.protocol="ws:"),t.toString()}const LP={send:Bv,subscribe:MP};var Ny={},$y={},By={},Py={},Uy,h_;function Pv(){if(h_)return Uy;h_=1;var e=function(n,r){return function(i,a){var c=a*2,u=r*2;i[c]=n[u],i[c+1]=n[u+1]}};return Uy=e,Uy}var p_;function zP(){return p_||(p_=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=n(Pv());function n(a){return a&&a.__esModule?a:{default:a}}var r=function(c){for(var u=c.A,f=c.C,d=0;d<25;d+=5){for(var p=0;p<5;p++)(0,t.default)(u,d+p)(f,p);for(var g=0;g<5;g++){var y=(d+g)*2,b=(g+1)%5*2,v=(g+2)%5*2;u[y]^=~f[b]&f[v],u[y+1]^=~f[b+1]&f[v+1]}}},i=r;e.default=i}(Py)),Py}var ky={},My={},g_;function qP(){return g_||(g_=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=new Uint32Array([0,1,0,32898,2147483648,32906,2147483648,2147516416,0,32907,0,2147483649,2147483648,2147516545,2147483648,32777,0,138,0,136,0,2147516425,0,2147483658,0,2147516555,2147483648,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,0,32778,2147483648,2147483658,2147483648,2147516545,2147483648,32896,0,2147483649,2147483648,2147516424]),n=t;e.default=n}(My)),My}var m_;function HP(){return m_||(m_=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=n(qP());function n(a){return a&&a.__esModule?a:{default:a}}var r=function(c){var u=c.A,f=c.roundIndex,d=f*2;u[0]^=t.default[d],u[1]^=t.default[d+1]},i=r;e.default=i}(ky)),ky}var jy={},Ly={},y_;function FP(){return y_||(y_=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=[10,7,11,17,18,3,5,16,8,21,24,4,15,23,19,13,12,2,20,14,22,9,6,1],n=t;e.default=n}(Ly)),Ly}var zy={},b_;function VP(){return b_||(b_=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=[1,3,6,10,15,21,28,36,45,55,2,14,27,41,56,8,25,43,62,18,39,61,20,44],n=t;e.default=n}(zy)),zy}var v_;function GP(){return v_||(v_=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=i(FP()),n=i(VP()),r=i(Pv());function i(u){return u&&u.__esModule?u:{default:u}}var a=function(f){var d=f.A,p=f.C,g=f.W;(0,r.default)(d,1)(g,0);for(var y=0,b=0,v=0,E=32,S=0;S<24;S++){var _=t.default[S],T=n.default[S];(0,r.default)(d,_)(p,0),y=g[0],b=g[1],E=32-T,v=T<32?0:1,g[v]=y<<T|b>>>E,g[(v+1)%2]=b<<T|y>>>E,(0,r.default)(g,0)(d,_),(0,r.default)(p,0)(g,0)}},c=a;e.default=c}(jy)),jy}var qy={},w_;function KP(){return w_||(w_=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=n(Pv());function n(a){return a&&a.__esModule?a:{default:a}}var r=function(c){for(var u=c.A,f=c.C,d=c.D,p=c.W,g=0,y=0,b=0;b<5;b++){var v=b*2,E=(b+5)*2,S=(b+10)*2,_=(b+15)*2,T=(b+20)*2;f[v]=u[v]^u[E]^u[S]^u[_]^u[T],f[v+1]=u[v+1]^u[E+1]^u[S+1]^u[_+1]^u[T+1]}for(var O=0;O<5;O++){(0,t.default)(f,(O+1)%5)(p,0),g=p[0],y=p[1],p[0]=g<<1|y>>>31,p[1]=y<<1|g>>>31,d[O*2]=f[(O+4)%5*2]^p[0],d[O*2+1]=f[(O+4)%5*2+1]^p[1];for(var $=0;$<25;$+=5)u[($+O)*2]^=d[O*2],u[($+O)*2+1]^=d[O*2+1]}},i=r;e.default=i}(qy)),qy}var E_;function WP(){return E_||(E_=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=a(zP()),n=a(HP()),r=a(GP()),i=a(KP());function a(f){return f&&f.__esModule?f:{default:f}}var c=function(){var d=new Uint32Array(10),p=new Uint32Array(10),g=new Uint32Array(2);return function(y){for(var b=0;b<24;b++)(0,i.default)({A:y,C:d,D:p,W:g}),(0,r.default)({A:y,C:d,W:g}),(0,t.default)({A:y,C:d}),(0,n.default)({A:y,roundIndex:b});d.fill(0),p.fill(0),g.fill(0)}},u=c;e.default=u}(By)),By}var S_;function YP(){return S_||(S_=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Dv(),n=r(WP());function r(f){return f&&f.__esModule?f:{default:f}}var i=function(d,p){for(var g=0;g<d.length;g+=8){var y=g/4;p[y]^=d[g+7]<<24|d[g+6]<<16|d[g+5]<<8|d[g+4],p[y+1]^=d[g+3]<<24|d[g+2]<<16|d[g+1]<<8|d[g]}return p},a=function(d,p){for(var g=0;g<p.length;g+=8){var y=g/4;p[g]=d[y+1],p[g+1]=d[y+1]>>>8,p[g+2]=d[y+1]>>>16,p[g+3]=d[y+1]>>>24,p[g+4]=d[y],p[g+5]=d[y]>>>8,p[g+6]=d[y]>>>16,p[g+7]=d[y]>>>24}return p},c=function(d){var p=this,g=d.capacity,y=d.padding,b=(0,n.default)(),v=200,E=g/8,S=v-g/4,_=0,T=new Uint32Array(v/4),O=t.Buffer.allocUnsafe(S);return this.absorb=function($){for(var I=0;I<$.length;I++)O[_]=$[I],_+=1,_>=S&&(i(O,T),b(T),_=0);return p},this.squeeze=function(){var $=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},I={buffer:$.buffer||t.Buffer.allocUnsafe(E),padding:$.padding||y,queue:t.Buffer.allocUnsafe(O.length),state:new Uint32Array(T.length)};O.copy(I.queue);for(var B=0;B<T.length;B++)I.state[B]=T[B];I.queue.fill(0,_),I.queue[_]|=I.padding,I.queue[S-1]|=128,i(I.queue,I.state);for(var z=0;z<I.buffer.length;z+=S)b(I.state),a(I.state,I.buffer.slice(z,z+S));return I.buffer},this.reset=function(){return O.fill(0),T.fill(0),_=0,p},this},u=c;e.default=u}($y)),$y}var __;function XP(){return __||(__=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.SHAKE=e.SHA3Hash=e.SHA3=e.Keccak=void 0;var t=Dv(),n=r(YP());function r(p){return p&&p.__esModule?p:{default:p}}var i=function(g){var y=g.allowedSizes,b=g.defaultSize,v=g.padding;return function E(){var S=this,_=arguments.length>0&&arguments[0]!==void 0?arguments[0]:b;if(!this||this.constructor!==E)return new E(_);if(y&&!y.includes(_))throw new Error("Unsupported hash length");var T=new n.default({capacity:_});return this.update=function(O){var $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"utf8";if(t.Buffer.isBuffer(O))return T.absorb(O),S;if(typeof O=="string")return S.update(t.Buffer.from(O,$));throw new TypeError("Not a string or buffer")},this.digest=function(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"binary",$=typeof O=="string"?{format:O}:O,I=T.squeeze({buffer:$.buffer,padding:$.padding||v});return $.format&&$.format!=="binary"?I.toString($.format):I},this.reset=function(){return T.reset(),S},this}},a=i({allowedSizes:[224,256,384,512],defaultSize:512,padding:1});e.Keccak=a;var c=i({allowedSizes:[224,256,384,512],defaultSize:512,padding:6});e.SHA3=c;var u=i({allowedSizes:[128,256],defaultSize:256,padding:31});e.SHAKE=u;var f=a;e.SHA3Hash=f,c.SHA3Hash=f;var d=c;e.default=d}(Ny)),Ny}XP();function LT(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];if(!e.length&&!t.length||!e.length)return n;if(!t.length)return n.push(...e),n;const[r,...i]=e,[a,...c]=t;return r!==void 0&&n.push(r),a!==void 0&&n.push(a),LT(i,c,n)}function zT(e){return function(t){return typeof t=="function"?(Fe.deprecate({pkg:"FCL/SDK",subject:"Interopolation of functions into template literals",transition:"https://github.com/onflow/flow-js-sdk/blob/master/packages/sdk/TRANSITIONS.md#0001-deprecate-params"}),zT(e)(t(e))):String(t)}}function qT(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return typeof e=="string"?()=>e:typeof e=="function"?e:i=>LT([...e],n.map(zT(i))).join("").trim()}const Le=(e,t,n)=>({label:e,asArgument:t,asInjection:r=>(Fe.deprecate({pkg:"@onflow/types",subject:`Passing in ${e} as value for ${e}`,message:`Going forward, use ${e} as value for ${e}.`}),n(r))}),ia=e=>Array.isArray(e),go=e=>typeof e=="object",HT=e=>e==null,ZP=e=>typeof e=="boolean",$t=e=>typeof e=="number",Ft=e=>Number.isInteger(e),pt=e=>typeof e=="string",Ie=e=>{throw new Error("Type Error: "+e)},Vt=e=>{Fe.deprecate({pkg:"@onflow/types",subject:`Passing in Number as value for ${e}`,message:`Going forward, use String as value for ${e}.`,transition:"https://github.com/onflow/flow-js-sdk/blob/master/packages/types/WARNINGS.md#0002-[U]Int*-and-Word*-as-Number"})};let x_=!1;const QP={label:"Identity",asArgument:e=>(x_||(Fe.deprecate({pkg:"@onflow/types",subject:"Identity",message:"Identity type is deprecated and will be removed in v2.0.0.  Please remove it from your code."}),x_=!0),e),asInjection:e=>e},JP=Le("UInt",e=>$t(e)&&Ft(e)?(Vt("UInt"),{type:"UInt",value:e.toString()}):pt(e)?{type:"UInt",value:e}:Ie("Expected Positive Integer for type Unsigned Int"),e=>e),eU=Le("Int",e=>$t(e)&&Ft(e)?(Vt("Int"),{type:"Int",value:e.toString()}):pt(e)?{type:"Int",value:e}:Ie("Expected Integer for type Int"),e=>e),tU=Le("UInt8",e=>$t(e)&&Ft(e)?(Vt("UInt8"),{type:"UInt8",value:e.toString()}):pt(e)?{type:"UInt8",value:e}:Ie("Expected integer for UInt8"),e=>e),nU=Le("Int8",e=>$t(e)&&Ft(e)?(Vt("Int8"),{type:"Int8",value:e.toString()}):pt(e)?{type:"Int8",value:e}:Ie("Expected positive integer for Int8"),e=>e),rU=Le("UInt16",e=>$t(e)&&Ft(e)?(Vt("UInt16"),{type:"UInt16",value:e.toString()}):pt(e)?{type:"UInt16",value:e}:Ie("Expected integer for UInt16"),e=>e),iU=Le("Int16",e=>$t(e)&&Ft(e)?(Vt("Int16"),{type:"Int16",value:e.toString()}):pt(e)?{type:"Int16",value:e}:Ie("Expected positive integer for Int16"),e=>e),sU=Le("UInt32",e=>$t(e)&&Ft(e)?(Vt("UInt32"),{type:"UInt32",value:e.toString()}):pt(e)?{type:"UInt32",value:e}:Ie("Expected integer for UInt32"),e=>e),oU=Le("Int32",e=>$t(e)&&Ft(e)?(Vt("Int32"),{type:"Int32",value:e.toString()}):pt(e)?{type:"Int32",value:e}:Ie("Expected positive integer for Int32"),e=>e),aU=Le("UInt64",e=>$t(e)&&Ft(e)?(Vt("UInt64"),{type:"UInt64",value:e.toString()}):pt(e)?{type:"UInt64",value:e}:Ie("Expected integer for UInt64"),e=>e),cU=Le("Int64",e=>$t(e)&&Ft(e)?(Vt("Int64"),{type:"Int64",value:e.toString()}):pt(e)?{type:"Int64",value:e}:Ie("Expected positive integer for Int64"),e=>e),lU=Le("UInt128",e=>$t(e)&&Ft(e)?(Vt("UInt128"),{type:"UInt128",value:e.toString()}):pt(e)?{type:"UInt128",value:e}:Ie("Expected integer for UInt128"),e=>e),uU=Le("Int128",e=>$t(e)&&Ft(e)?(Vt("Int128"),{type:"Int128",value:e.toString()}):pt(e)?{type:"Int128",value:e}:Ie("Expected positive integer for Int128"),e=>e),fU=Le("UInt256",e=>$t(e)&&Ft(e)?(Vt("UInt256"),{type:"UInt256",value:e.toString()}):pt(e)?{type:"UInt256",value:e}:Ie("Expected integer for UInt256"),e=>e),dU=Le("Int256",e=>$t(e)&&Ft(e)?(Vt("Int256"),{type:"Int256",value:e.toString()}):pt(e)?{type:"Int256",value:e}:Ie("Expected integer for Int256"),e=>e),hU=Le("Word8",e=>$t(e)&&Ft(e)?(Vt("Word8"),{type:"Word8",value:e.toString()}):pt(e)?{type:"Word8",value:e}:Ie("Expected positive number for Word8"),e=>e),pU=Le("Word16",e=>$t(e)&&Ft(e)?(Vt("Word16"),{type:"Word16",value:e.toString()}):pt(e)?{type:"Word16",value:e}:Ie("Expected positive number for Word16"),e=>e),gU=Le("Word32",e=>$t(e)&&Ft(e)?(Vt("Word32"),{type:"Word32",value:e.toString()}):pt(e)?{type:"Word32",value:e}:Ie("Expected positive number for Word32"),e=>e),mU=Le("Word64",e=>$t(e)&&Ft(e)?(Vt("Word64"),{type:"Word64",value:e.toString()}):pt(e)?{type:"Word64",value:e}:Ie("Expected positive number for Word64"),e=>e),yU=Le("Word128",e=>$t(e)&&Ft(e)?(Vt("Word128"),{type:"Word128",value:e.toString()}):pt(e)?{type:"Word128",value:e}:Ie("Expected positive number for Word128"),e=>e),bU=Le("Word256",e=>$t(e)&&Ft(e)?(Vt("Word256"),{type:"Word256",value:e.toString()}):pt(e)?{type:"Word256",value:e}:Ie("Expected positive number for Word256"),e=>e),FT=()=>{Fe.deprecate({subject:"Passing in Numbers as values for Fix64 and UFix64 types",pkg:"@onflow/types",transition:"https://github.com/onflow/flow-js-sdk/blob/master/packages/types/WARNINGS.md#0001-[U]Fix64-as-Number"})},vU=Le("UFix64",e=>{if(pt(e)){const t=e.split(".");return t.length!==2?Ie(`Expected one decimal but found ${t.length} in the [U]Fix64 value. Find out more about [U]Fix64 types here: https://docs.onflow.org/cadence/json-cadence-spec/#fixed-point-numbers`):t[1].length==0||t[1].length>8?Ie(`Expected at least one digit, and at most 8 digits following the decimal of the [U]Fix64 value but found ${t[1].length} digits. Find out more about [U]Fix64 types here: https://docs.onflow.org/cadence/json-cadence-spec/#fixed-point-numbers`):(t[1]=t[1].padEnd(8,"0"),e=t.join("."),{type:"UFix64",value:e})}else if($t(e))return FT(),{type:"UFix64",value:e.toString()};return Ie("Expected String for UFix64")},e=>e),wU=Le("Fix64",e=>{if(pt(e)){const t=e.split(".");return t.length!==2?Ie(`Expected one decimal but found ${t.length} in the [U]Fix64 value. Find out more about [U]Fix64 types here: https://docs.onflow.org/cadence/json-cadence-spec/#fixed-point-numbers`):t[1].length==0||t[1].length>8?Ie(`Expected at least one digit, and at most 8 digits following the decimal of the [U]Fix64 value but found ${t[1].length} digits. Find out more about [U]Fix64 types here: https://docs.onflow.org/cadence/json-cadence-spec/#fixed-point-numbers`):(t[1]=t[1].padEnd(8,"0"),e=t.join("."),{type:"Fix64",value:e})}else if($t(e))return FT(),{type:"Fix64",value:e.toString()};return Ie("Expected String for Fix64")},e=>e),EU=Le("String",e=>pt(e)?{type:"String",value:e}:Ie("Expected String for type String"),e=>e),SU=Le("Character",e=>pt(e)?{type:"Character",value:e}:Ie("Expected Character for type Character"),e=>e),_U=Le("Bool",e=>ZP(e)?{type:"Bool",value:e}:Ie("Expected Boolean for type Bool"),e=>e),VT=Le("Address",e=>pt(e)?{type:"Address",value:e}:Ie("Expected Address for type Address"),e=>e),xU=Le("Void",e=>!e||HT(e)?{type:"Void",value:null}:Ie("Expected Void for type Void"),e=>e),AU=e=>Le("Optional",t=>({type:"Optional",value:HT(t)?null:e.asArgument(t)}),t=>t),RU=Le("Reference",e=>go(e)?{type:"Reference",value:e}:Ie("Expected Object for type Reference"),e=>e),A_=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Le("Array",t=>({type:"Array",value:ia(e)?e.map((n,r)=>n.asArgument(t[r])):t.map(n=>e.asArgument(n))}),t=>t)},OU=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Le("Dictionary",t=>{const n=ia(t),r=ia(e);return go(t)?{type:"Dictionary",value:r&&n?e.map((i,a)=>({key:i.key.asArgument(t[a].key),value:i.value.asArgument(t[a].value)})):n&&!r?t.map(i=>({key:e.key.asArgument(i.key),value:e.value.asArgument(i.value)})):!n&&!r?[{key:e.key.asArgument(t.key),value:e.value.asArgument(t.value)}]:Ie("Invalid arguments for Dictionary.")}:Ie("Expected Object for type Dictionary")},t=>t)},TU=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return Le("Event",n=>go(n)?{type:"Event",value:{id:e,fields:ia(t)?t.map((r,i)=>({name:n.fields[i].name,value:r.value.asArgument(n.fields[i].value)})):n.fields.map(r=>({name:r.name,value:t.value.asArgument(r.value)}))}}:Ie("Expected Object for type Event"),n=>n)},DU=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return Le("Resource",n=>go(n)?{type:"Resource",value:{id:e,fields:ia(t)?t.map((r,i)=>({name:n.fields[i].name,value:r.value.asArgument(n.fields[i].value)})):n.fields.map(r=>({name:r.name,value:t.value.asArgument(r.value)}))}}:Ie("Expected Object for type Resource"),n=>n)},CU=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return Le("Struct",n=>go(n)?{type:"Struct",value:{id:e,fields:ia(t)?t.map((r,i)=>({name:n.fields[i].name,value:r.value.asArgument(n.fields[i].value)})):n.fields.map(r=>({name:r.name,value:t.value.asArgument(r.value)}))}}:Ie("Expected Object for type Struct"),n=>n)},IU=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return Le("Enum",n=>go(n)?{type:"Enum",value:{id:e,fields:ia(t)?t.map((r,i)=>({name:n.fields[i].name,value:r.value.asArgument(n.fields[i].value)})):n.fields.map(r=>({name:r.name,value:t.value.asArgument(r.value)}))}}:Ie("Expected Object for type Enum"),n=>n)},NU=Le("Path",e=>go(e)?pt(e.domain)?e.domain==="storage"||e.domain==="private"||e.domain==="public"?pt(e.identifier)?{type:"Path",value:{domain:e.domain,identifier:e.identifier}}:Ie(`Expected a string for the Path identifier but found ${e.identifier}. Find out more about the Path type here: https://docs.onflow.org/cadence/json-cadence-spec/#path`):Ie(`Expected either "storage", "private" or "public" as the Path domain but found ${e.domain}. Find out more about the Path type here: https://docs.onflow.org/cadence/json-cadence-spec/#path`):Ie(`Expected a string for the Path domain but found ${e.domain}. Find out more about the Path type here: https://docs.onflow.org/cadence/json-cadence-spec/#path`):Ie("Expected Object for type Path"),e=>e),$U=e=>Le("InclusiveRange",t=>{if(go(t)){const{start:n,end:r,step:i}=t;return{type:"InclusiveRange",value:{start:e.asArgument(n),end:e.asArgument(r),step:e.asArgument(i)}}}return Ie("Expected Object for type InclusiveRange")},t=>t),BU=Object.freeze(Object.defineProperty({__proto__:null,Address:VT,Array:A_,Bool:_U,Character:SU,Dictionary:OU,Enum:IU,Event:TU,Fix64:wU,Identity:QP,InclusiveRange:$U,Int:eU,Int128:uU,Int16:iU,Int256:dU,Int32:oU,Int64:cU,Int8:nU,Optional:AU,Path:NU,Reference:RU,Resource:DU,String:EU,Struct:CU,UFix64:vU,UInt:JP,UInt128:lU,UInt16:rU,UInt256:fU,UInt32:sU,UInt64:aU,UInt8:tU,Void:xU,Word128:yU,Word16:pU,Word256:bU,Word32:gU,Word64:mU,Word8:hU,_Array:A_},Symbol.toStringTag,{value:"Module"})),PU=`{
  "kind":"${wp.ACCOUNT}",
  "tempId":null,
  "addr":null,
  "keyId":null,
  "sequenceNum":null,
  "signature":null,
  "signingFunction":null,
  "resolve":null,
  "role": {
    "proposer":false,
    "authorizer":false,
    "payer":false,
    "param":false
  }
}`,UU=`{
  "kind":"${wp.ARGUMENT}",
  "tempId":null,
  "value":null,
  "asArgument":null,
  "xform":null,
  "resolve": null,
  "resolveArgument": null
}`,GT=`{
  "tag":"${it.UNKNOWN}",
  "assigns":{},
  "status":"${_f.OK}",
  "reason":null,
  "accounts":{},
  "params":{},
  "arguments":{},
  "message": {
    "cadence":null,
    "refBlock":null,
    "computeLimit":null,
    "proposer":null,
    "payer":null,
    "authorizations":[],
    "params":[],
    "arguments":[]
  },
  "proposer":null,
  "authorizations":[],
  "payer":[],
  "events": {
    "eventType":null,
    "start":null,
    "end":null,
    "blockIds":[]
  },
  "subscribeEvents": {
    "startBlockId":null,
    "startHeight":null,
    "eventTypes":null,
    "addresses":null,
    "contracts":null,
    "heartbeatInterval":null
  },
  "transaction": {
    "id":null
  },
  "block": {
    "id":null,
    "height":null,
    "isSealed":null
  },
  "account": {
    "addr":null
  },
  "collection": {
    "id":null
  }
}`,KT=new Set(Object.keys(JSON.parse(GT))),Sp=()=>JSON.parse(GT),kU=()=>(Fe.deprecate({pkg:"FCL/SDK",message:"The interaction been deprecated from the Flow JS-SDK/FCL. use initInteraction instead",transition:"https://github.com/onflow/flow-js-sdk/blob/master/packages/sdk/TRANSITIONS.md#0010-deprecate-interaction",level:ht.warn}),Sp()),WT=e=>typeof e=="number",YT=e=>Array.isArray(e),XT=e=>e!==null&&typeof e=="object",Uv=e=>e==null,Gc=e=>typeof e=="function",ZT=e=>{if(!XT(e)||Uv(e)||WT(e))return!1;for(let t of KT)if(!e.hasOwnProperty(t))return!1;return!0},Er=e=>(e.status=_f.OK,e),kv=(e,t)=>(e.status=_f.BAD,e.reason=t,e),nr=e=>t=>(t.tag=e,Er(t)),R_=e=>e.keyId==null?e:(he(!isNaN(parseInt(e.keyId.toString())),"account.keyId must be an integer"),{...e,keyId:parseInt(e.keyId.toString())}),QT=()=>JSON.parse(PU),_p=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return n=>{he(typeof e=="function"||typeof e=="object","prepAccount must be passed an authorization function or an account object"),he(t.role!=null,"Account must have a role");const r=QT(),i=t.role,a=Rv();let c={...e};e.authorization&&Gc(e.authorization)&&(c={resolve:e.authorization}),!e.authorization&&Gc(e)&&(c={resolve:e});const u=c.resolve;return u&&(c.resolve=function(f){for(var d=arguments.length,p=new Array(d>1?d-1:0),g=1;g<d;g++)p[g-1]=arguments[g];return[u,R_].reduce(async(y,b)=>b(await y,...p),f)}),c=R_(c),n.accounts[a]={...r,tempId:a,...c,role:{...r.role,...typeof e.role=="object"?e.role:{},...i?{[i]:!0}:{}}},i===tf.AUTHORIZER?n.authorizations.push(a):i===tf.PAYER?n.payer.push(a):i&&(n[i]=a),n}},JT=e=>t=>{let n=Rv();return t.message.arguments.push(n),t.arguments[n]=JSON.parse(UU),t.arguments[n].tempId=n,t.arguments[n].value=e.value,t.arguments[n].asArgument=e.asArgument,t.arguments[n].xform=e.xform,t.arguments[n].resolve=e.resolve,t.arguments[n].resolveArgument=Gc(e.resolveArgument)?e.resolveArgument.bind(e):e.resolveArgument,Er(t)},MU=nr(it.UNKNOWN),e3=nr(it.SCRIPT),t3=nr(it.TRANSACTION),n3=nr(it.GET_TRANSACTION_STATUS),jU=nr(it.GET_TRANSACTION),r3=nr(it.GET_ACCOUNT),LU=nr(it.GET_EVENTS),zU=nr(it.PING),i3=nr(it.GET_BLOCK),qU=nr(it.GET_BLOCK_HEADER),HU=nr(it.GET_COLLECTION),s3=nr(it.GET_NETWORK_PARAMETERS),FU=nr(it.SUBSCRIBE_EVENTS),VU=nr(it.GET_NODE_VERSION_INFO),rr=e=>t=>t.tag===e,o3=rr(it.UNKNOWN),Mv=rr(it.SCRIPT),mo=rr(it.TRANSACTION),GU=rr(it.GET_TRANSACTION_STATUS),KU=rr(it.GET_TRANSACTION),WU=rr(it.GET_ACCOUNT),YU=rr(it.GET_EVENTS),XU=rr(it.PING),ZU=rr(it.GET_BLOCK),QU=rr(it.GET_BLOCK_HEADER),JU=rr(it.GET_COLLECTION),ek=rr(it.GET_NETWORK_PARAMETERS),tk=rr(it.GET_NODE_VERSION_INFO),nk=rr(it.SUBSCRIBE_EVENTS),rk=e=>e.status===_f.OK,a3=e=>e.status===_f.BAD,ik=e=>e.reason,sk=e=>e.kind===wp.ACCOUNT,ok=e=>e.kind===wp.ARGUMENT,ak=e=>{for(let t of Object.keys(e))if(!KT.has(t))throw new Error(`"${t}" is an invalid root level Interaction property.`);return e},Uh=async function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];try{if(e=ak(await e),a3(e))throw new Error(`Interaction Error: ${e.reason}`);if(!t.length)return e;const[n,...r]=t,i=await n;if(Gc(i))return Uh(i(e),r);if(Uv(i)||!i)return Uh(e,r);if(ZT(i))return Uh(i,r);throw new Error("Invalid Interaction Composition")}catch(n){throw n}};function Nn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const[r,i]=t;return YT(r)?u=>Nn(u,r):Uh(r,i)}const ck=function(e){return e},xp=function(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;return e.assigns[t]==null?n:e.assigns[t]},jv=(e,t)=>n=>(n.assigns[e]=t,Er(n)),c3=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ck;return n=>(n.assigns[e]=t(n.assigns[e],n),Er(n))},lk=e=>t=>(delete t.assigns[e],Er(t));var Lv=Object.freeze({__proto__:null,Bad:kv,Ok:Er,destroy:lk,get:xp,initAccount:QT,initInteraction:Sp,interaction:kU,isAccount:sk,isArgument:ok,isArray:YT,isBad:a3,isFn:Gc,isGetAccount:WU,isGetBlock:ZU,isGetBlockHeader:QU,isGetCollection:JU,isGetEvents:YU,isGetNetworkParameters:ek,isGetNodeVersionInfo:tk,isGetTransaction:KU,isGetTransactionStatus:GU,isInteraction:ZT,isNull:Uv,isNumber:WT,isObj:XT,isOk:rk,isPing:XU,isScript:Mv,isSubscribeEvents:nk,isTransaction:mo,isUnknown:o3,makeArgument:JT,makeGetAccount:r3,makeGetBlock:i3,makeGetBlockHeader:qU,makeGetCollection:HU,makeGetEvents:LU,makeGetNetworkParameters:s3,makeGetNodeVerionInfo:VU,makeGetTransaction:jU,makeGetTransactionStatus:n3,makePing:zU,makeScript:e3,makeSubscribeEvents:FU,makeTransaction:t3,makeUnknown:MU,pipe:Nn,prepAccount:_p,put:jv,update:c3,why:ik});function l3(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Nn(Sp(),e)}const uk={tag:null,transaction:null,transactionStatus:null,transactionId:null,encodedData:null,events:null,event:null,accountStatusEvent:null,account:null,block:null,blockHeader:null,blockDigest:null,latestBlock:null,collection:null,networkParameters:null,streamConnection:null,heartbeat:null,nodeVersionInfo:null},zv=()=>({...uk});function fk(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return Nn([i3,t=>(t.block.isSealed=e,Er(t))])}function dk(e){return Nn([r3,t=>(t.account.addr=qt(e),Er(t))])}const hk=(e,t,n)=>{const r=new Ep;let i=pk();e.on("data",async c=>{const u=Object.keys(c).filter(d=>c[d]!=null&&d!=="tag");let f=Promise.all(u.map(async d=>{const p={[d]:c[d]},g=await t(p,n);return{channel:d,message:g}}));i.push(async()=>{(await f).forEach(p=>{let{channel:g,message:y}=p;r.emit(g,y)})})});function a(c){e.on(c,u=>{i.push(async()=>{r.emit(c,u)})})}return a("close"),a("error"),{on(c,u){return r.on(c,u),this},off(c,u){return r.off(c,u),this},close:()=>{e.close()}}};function pk(){let e=[],t=!1;async function n(){if(!t){for(t=!0;e.length>0;)await e.shift()?.();t=!1}}return{push:r=>{e.push(r),n()}}}const gk=()=>{Fe.deprecate({pkg:"@onflow/decode",subject:"Operating upon data of the latestBlock field of the response object",transition:"https://github.com/onflow/flow-js-sdk/blob/master/packages/decode/WARNINGS.md#0001-Deprecating-latestBlock-field"})},rt=async e=>e,mk=async()=>null,yk=async e=>e.staticType,bk=async(e,t,n)=>e?await sa(e,t,n):null,vk=async(e,t,n)=>await Promise.all(e.map(r=>new Promise(async i=>i(await sa(r,t,[...n,r.type]))))),wk=async(e,t,n)=>await e.reduce(async(r,i)=>(r=await r,r[await sa(i.key,t,[...n,i.key])]=await sa(i.value,t,[...n,i.key]),r),Promise.resolve({})),ih=async(e,t,n)=>{const r=await e.fields.reduce(async(a,c)=>(a=await a,a[c.name]=await sa(c.value,t,[...n,c.name]),a),Promise.resolve({})),i=e.id&&u3(t,e.id);return i?await i(r):r},Ek=async(e,t,n)=>{const r=["start","end","step"];return await Object.keys(e).reduce(async(a,c)=>(a=await a,r.includes(c)&&(a[c]=await sa(e[c],t,[...n,c])),a),Promise.resolve({}))},O_={UInt:rt,Int:rt,UInt8:rt,Int8:rt,UInt16:rt,Int16:rt,UInt32:rt,Int32:rt,UInt64:rt,Int64:rt,UInt128:rt,Int128:rt,UInt256:rt,Int256:rt,Word8:rt,Word16:rt,Word32:rt,Word64:rt,Word128:rt,Word256:rt,UFix64:rt,Fix64:rt,String:rt,Character:rt,Bool:rt,Address:rt,Void:mk,Optional:bk,Reference:rt,Array:vk,Dictionary:wk,Event:ih,Resource:ih,Struct:ih,Enum:ih,Type:yk,Path:rt,Capability:rt,InclusiveRange:Ek},u3=(e,t)=>{const n=Object.keys(e).find(r=>/^\/.*\/$/.test(r)?new RegExp(r.substring(1,r.length-1)).test(t):r===t);return t&&n&&e[n]},sa=async(e,t,n)=>{let r=u3(t,e.type);if(!r)throw new Error(`Undefined Decoder Error: ${e.type}@${n.join(".")}`);return await r(e.value,t,n)},gu=async function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];const i={...Object.keys(O_).filter(a=>!Object.keys(t).find(c=>new RegExp(c).test(a))).reduce((a,c)=>(a[c]=O_[c],a),t),...t};return sa(e,i,n)},xf=async function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e.encodedData)return gu(e.encodedData,t);if(e.transactionStatus)return{...e.transactionStatus,events:await Promise.all(e.transactionStatus.events.map(async function(r){return{type:r.type,transactionId:r.transactionId,transactionIndex:r.transactionIndex,eventIndex:r.eventIndex,data:await gu(r.payload,t)}}))};if(e.transaction)return e.transaction;if(e.events)return await Promise.all(e.events.map(async function(r){return{blockId:r.blockId,blockHeight:r.blockHeight,blockTimestamp:r.blockTimestamp,type:r.type,transactionId:r.transactionId,transactionIndex:r.transactionIndex,eventIndex:r.eventIndex,data:await gu(r.payload,t)}}));if(e.event){const{payload:n,...r}=e.event;return{...r,data:await gu(n,t)}}else if(e.accountStatusEvent){const{payload:n,...r}=e.accountStatusEvent;return{...r,data:await gu(n,t)}}else{if(e.account)return e.account;if(e.block)return e.block;if(e.blockHeader)return e.blockHeader;if(e.blockDigest)return e.blockDigest;if(e.latestBlock)return gk(),e.latestBlock;if(e.transactionId)return e.transactionId;if(e.collection)return e.collection;if(e.networkParameters){const n=/^flow-/,r=e.networkParameters.chainId;let i;return r==="flow-emulator"?i="local":n.test(r)?i=r.replace(n,""):i=r,{chainId:i}}else{if(e.streamConnection)return hk(e.streamConnection,xf,t);if(e.heartbeat)return e.heartbeat;if(e.nodeVersionInfo)return e.nodeVersionInfo}}return null},T_=e=>typeof e=="function",D_=e=>typeof e=="string",Sk=()=>/\b(0x\w+)\b/g;function C_(e){return Sk().test(e)}const f3=()=>/import\s+"(\w+)"/g;function I_(e){return f3().test(e)}function _k(e){return e.matchAll(f3())}async function xk(e){if(!mo(e)&&!Mv(e))return e;var t=xp(e,"ix.cadence");if(he(T_(t)||D_(t),"Cadence needs to be a function or a string."),T_(t)&&(t=await t({})),he(D_(t),"Cadence needs to be a string at this point."),he(!C_(t)||!I_(t),"Both account identifier and contract identifier syntax not simultaneously supported."),C_(t)&&(t=await Re().where(/^0x/).then(n=>Object.entries(n).reduce((r,i)=>{let[a,c]=i;const u=new RegExp("(\\b"+a+"\\b)","g");return r.replace(u,c)},t))),I_(t))for(const[n,r]of _k(t)){const i=await Re().get(`system.contracts.${r}`);i?t=t.replace(n,`import ${r} from ${Bn(i)}`):Fe({title:"Contract Placeholder not found",message:`Cannot find a value for contract placeholder ${r}. Please add to your flow.json or explicitly add it to the config 'contracts.*' namespace.`,level:ht.warn})}return e.message.cadence=t,e}const ub=e=>typeof e=="function";function Ak(e){if(he(typeof e.xform!=null,`No type specified for argument: ${e.value}`),ub(e.xform))return e.xform(e.value);if(ub(e.xform.asArgument))return e.xform.asArgument(e.value);he(!1,"Invalid Argument",e)}async function d3(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:3;if(he(t>0,`Argument Resolve Recursion Limit Exceeded for Arg: ${e.tempId}`),ub(e.resolveArgument)){const n=await e.resolveArgument();return d3(n,t-1)}else return e}async function Rk(e){if(mo(e)||Mv(e))for(let[t,n]of Object.entries(e.arguments)){const r=await d3(n);e.arguments[t].asArgument=Ak(r)}return e}const Ok=e=>p3(g3(m3(e))),Tk=e=>p3(g3(Pk(e))),Dk=(e,t)=>Nt.Buffer.from(e.padEnd(t*2,"0"),"hex"),h3=(e,t)=>Nt.Buffer.from(e.padStart(t*2,"0"),"hex"),Ck=Dk(Nt.Buffer.from("FLOW-V0.0-transaction").toString("hex"),32).toString("hex"),p3=e=>Ck+e,Hy=e=>h3(e,8),Ik=e=>h3(e,32),Nk=e=>Nt.Buffer.from(JSON.stringify(e),"utf8"),$k=e=>Nt.Buffer.from(e,"utf8"),Bk=e=>Nt.Buffer.from(e,"hex"),g3=e=>Cv(e).toString("hex"),m3=e=>(Mk(e),[$k(e.cadence||""),e.arguments.map(Nk),Ik(e.refBlock||""),e.computeLimit,Hy(qt(e.proposalKey.address||"")),e.proposalKey.keyId,e.proposalKey.sequenceNum,Hy(qt(e.payer)),e.authorizers.map(t=>Hy(qt(t)))]),Pk=e=>(jk(e),[m3(e),Uk(e)]),Uk=e=>{const t=kk(e);return e.payloadSigs?.map(n=>({signerIndex:t.get(qt(n.address))||"",keyId:n.keyId,sig:n.sig})).sort((n,r)=>n.signerIndex>r.signerIndex?1:n.signerIndex<r.signerIndex?-1:n.keyId>r.keyId?1:n.keyId<r.keyId?-1:0).map(n=>[n.signerIndex,n.keyId,Bk(n.sig)])},kk=e=>{const t=new Map;let n=0;const r=i=>{t.has(i)||(t.set(i,n),n++)};return e.proposalKey.address&&r(e.proposalKey.address),r(e.payer),e.authorizers.forEach(r),t},Mk=e=>{Lk.forEach(t=>Qh(e,t)),zk.forEach(t=>Qh(e.proposalKey,t,"proposalKey"))},jk=e=>{qk.forEach(t=>Qh(e,t)),e.payloadSigs?.forEach((t,n)=>{Hk.forEach(r=>Qh(t,r,"payloadSigs",n))})},Zh=e=>typeof e=="number",Hc=e=>typeof e=="string",y3=e=>e!==null&&typeof e=="object",fb=e=>y3(e)&&e instanceof Array,Lk=[{name:"cadence",check:Hc},{name:"arguments",check:fb},{name:"refBlock",check:Hc,defaultVal:"0"},{name:"computeLimit",check:Zh},{name:"proposalKey",check:y3},{name:"payer",check:Hc},{name:"authorizers",check:fb}],zk=[{name:"address",check:Hc},{name:"keyId",check:Zh},{name:"sequenceNum",check:Zh}],qk=[{name:"payloadSigs",check:fb}],Hk=[{name:"address",check:Hc},{name:"keyId",check:Zh},{name:"sig",check:Hc}],Qh=(e,t,n,r)=>{const{name:i,check:a,defaultVal:c}=t;if(e[i]==null&&c!=null&&(e[i]=c),e[i]==null)throw Fk(i,n,r);if(!a(e[i]))throw Vk(i,n,r)},b3=(e,t,n)=>t?n==null?`${t}.${e}`:`${t}.${n}.${e}`:e,Fk=(e,t,n)=>new Error(`Missing field ${b3(e,t,n)}`),Vk=(e,t,n)=>new Error(`Invalid field ${b3(e,t,n)}`);function v3(e){let t=new Set(e.authorizations);return e.proposer&&t.add(e.proposer),Array.isArray(e.payer)?e.payer.forEach(n=>t.delete(n)):t.delete(e.payer),Array.from(t)}function w3(e){let t=new Set(Array.isArray(e.payer)?e.payer:[e.payer]);return Array.from(t)}const qv=e=>{const t=()=>e.authorizations.map(c=>Bn(e.accounts[c].addr)).reduce((c,u)=>c.find(f=>f===u)?c:[...c,u],[]),n=()=>v3(e).map(a=>({address:Bn(e.accounts[a].addr),keyId:e.accounts[a].keyId,sig:e.accounts[a].signature})),r=()=>w3(e).map(a=>({address:Bn(e.accounts[a].addr),keyId:e.accounts[a].keyId,sig:e.accounts[a].signature})),i=e.proposer?{address:Bn(e.accounts[e.proposer].addr),keyId:e.accounts[e.proposer].keyId,sequenceNum:e.accounts[e.proposer].sequenceNum}:{};return{cadence:e.message.cadence,refBlock:e.message.refBlock||null,computeLimit:e.message.computeLimit,arguments:e.message.arguments.map(a=>e.arguments[a].asArgument),proposalKey:i,payer:Bn(e.accounts[Array.isArray(e.payer)?e.payer[0]:e.payer].addr),authorizers:t(),payloadSigs:n(),envelopeSigs:r()}},Ei=5,Gk=e=>`${Bn(e.addr)}-${e.keyId}`,Kk=e=>e&&(Object.prototype.toString.call(e)==="[object Function]"||typeof e=="function"||e instanceof Function),Wk=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.join("-")};var mr=function(e){return e.PAYER="payer",e.PROPOSER="proposer",e.AUTHORIZATIONS="authorizations",e}(mr||{});function Yk(){const e=" ",n=[];return[function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;n.push(Array(i*4).fill(e).join("-")+r)},function(){return n.reduce((r,i)=>r+`
`+i)}]}function Hv(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:3;return t<=0||!Array.isArray(e)?e:Hv(e.flatMap(n=>n),t-1)}function Xk(e,t){try{return{f_type:"PreSignable",f_vsn:"1.0.1",roles:e.role,cadence:t.message.cadence,args:t.message.arguments.map(n=>t.arguments[n].asArgument),data:{},interaction:t,voucher:qv(t)}}catch(n){throw console.error("buildPreSignable",n),n}}async function Zk(e,t){const n=Array.isArray(e.payer)?e.payer:[e.payer],r=Array.isArray(e.authorizations)?e.authorizations:[e.authorizations],i=e.proposer===null?[]:Array.isArray(e.proposer)?e.proposer:[e.proposer],a=Object.keys(e.accounts),c=[...new Set(n.concat(r,i))];for(const u of a)c.find(f=>f===u)||delete e.accounts[u]}function N_(e,t){typeof t.addr=="string"&&(typeof t.keyId=="number"||typeof t.keyId=="string")?t.tempId=Gk(t):t.tempId=t.tempId||Rv();const n=e.accounts[t.tempId]||t;return e.accounts[t.tempId]||(e.accounts[t.tempId]=t),e.accounts[t.tempId].role.proposer=n.role.proposer||t.role.proposer,e.accounts[t.tempId].role.payer=n.role.payer||t.role.payer,e.accounts[t.tempId].role.authorizer=n.role.authorizer||t.role.authorizer,e.accounts[t.tempId]}function Qk(e){const t=Hv(e),n=new Set;return t.map(i=>{const a=Wk(i.tempId,i.role.payer,i.role.proposer,i.role.authorizer,i.role.param);return n.has(a)?null:(n.add(a),i)}).filter(i=>i!==null)}async function Jk(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ei,{debugLogger:r}=arguments.length>3?arguments[3]:void 0;if(n<=0)throw new Error(`recurseResolveAccount Error: Depth limit (${Ei}) reached. Ensure your authorization functions resolve to an account after ${Ei} resolves.`);let i=e.accounts[t];if(!i)return[[],!1];if(r(`account: ${i.tempId}`,Math.max(Ei-n,0)),i?.resolve)if(Kk(i?.resolve)){r(`account: ${i.tempId} -- cache MISS`,Math.max(Ei-n,0));const{resolve:a,...c}=i;let u=await a(c,Xk(c,e));u=Array.isArray(u)?u:[u];let f=Hv(u);return f=f.map(d=>N_(e,d)),i.resolve=f.map(d=>d.tempId),i=N_(e,i),[f.map(d=>d.tempId),!0]}else return r(`account: ${i.tempId} -- cache HIT`,Math.max(Ei-n,0)),[i.resolve,!1];return[i.tempId?[i.tempId]:[],!1]}const Bu=e=>e===null?[]:Array.isArray(e)?e:[e];async function e5(e,t,n){for(let r of Object.values(mr))if(r===mr.AUTHORIZATIONS||r===mr.PAYER)e[r]=Bu(e[r]).reduce((i,a)=>a===t?i.concat(...n.filter(c=>r===mr.PAYER&&c.role.payer||r===mr.AUTHORIZATIONS&&c.role.authorizer).map(c=>c.tempId)):i.concat(a),[]);else if(r===mr.PROPOSER){const i=n.filter(a=>a.role.proposer);if(i.length>1)throw new Error("replaceRoles Error: Multiple proposer keys were resolved, but only one is allowed");e[r]=i[0]?.tempId??e[r]}}async function t5(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ei,{debugLogger:r}=arguments.length>3?arguments[3]:void 0;he(e&&typeof e=="object","resolveAccountType Error: ix not defined");let i=new Set;for(let c of t){let u=e.accounts[c];he(!!u,"resolveAccountType Error: account not found");const[f,d]=await Jk(e,c,n,{debugLogger:r});if(d){const p=f.map(y=>e.accounts[y]),g=Qk(p);g.forEach(y=>i.add(y.tempId)),e5(e,c,g)}}let a;for(const c of e[mr.PAYER]){let u=e.accounts[c];if(!a)a=u.addr;else if(a!==u.addr)throw new Error("resolveAccountType Error: payers from different accounts detected")}return i}async function n5(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(mo(e)){Array.isArray(e.payer)||Fe.deprecate({pkg:"FCL",subject:'"ix.payer" must be an array. Support for ix.payer as a singular',message:"See changelog for more info."});let[n,r]=Yk();try{let i=Ei,a=new Set([...Bu(e[mr.PAYER]),...Bu(e[mr.PROPOSER]),...Bu(e[mr.AUTHORIZATIONS])]);for(;a.size>0;){if(i<=0)throw new Error(`resolveAccounts Error: Depth limit (${Ei}) reached. Ensure your authorization functions resolve to an account after ${Ei} resolves.`);a=await t5(e,a,i,{debugLogger:n}),i--}await Zk(e,{debugLogger:n});for(const c of Object.values(mr))he(Bu(e[c]).length>0||c===mr.AUTHORIZATIONS,`resolveAccountType Error: no accounts for role "${c}" found`);t.enableDebug&&console.debug(r())}catch(i){throw console.error(`=== SAD PANDA ===

`,i,`

=== SAD PANDA ===`),i}}return e}async function r5(e){if(mo(e))try{let t=v3(e);const n=Ok(B_(e));await Promise.all(t.map($_(e,n)));let r=w3(e);const i=Tk({...B_(e),payloadSigs:t.map(a=>({address:e.accounts[a].addr||"",keyId:e.accounts[a].keyId||0,sig:e.accounts[a].signature||""}))});await Promise.all(r.map($_(e,i)))}catch(t){throw console.error("Signatures",t,{ix:e}),t}return e}function $_(e,t){return async function(r){const i=e.accounts[r];if(i.signature!=null&&i.signature!==void 0)return;const{signature:a}=await i.signingFunction(i5(i,t,e));e.accounts[r].signature=a}}function i5(e,t,n){try{return{f_type:"Signable",f_vsn:"1.0.1",message:t,addr:qt(e.addr),keyId:e.keyId,roles:e.role,cadence:n.message.cadence,args:n.message.arguments.map(r=>n.arguments[r].asArgument),data:{},interaction:n,voucher:qv(n)}}catch(r){throw console.error("buildSignable",r),r}}function B_(e){const t=qt((Array.isArray(e.payer)?e.accounts[e.payer[0]]:e.accounts[e.payer]).addr||""),n=e.proposer?{address:qt(e.accounts[e.proposer].addr)||"",keyId:e.accounts[e.proposer].keyId||0,sequenceNum:e.accounts[e.proposer].sequenceNum||0}:{};return{cadence:e.message.cadence,refBlock:e.message.refBlock,computeLimit:e.message.computeLimit,arguments:e.message.arguments.map(r=>e.arguments[r].asArgument),proposalKey:n,payer:t,authorizers:e.authorizations.map(r=>qt(e.accounts[r].addr)||"").reduce((r,i)=>r.find(a=>a===i)?r:[...r,i],[])}}async function s5(e){const t=xp(e,"ix.validators",[]);return Nn(e,t.map(n=>r=>n(r,{Ok:Er,Bad:kv})))}async function o5(e){for(let t of Object.keys(e.accounts))e.accounts[t].addr=qt(e.accounts[t].addr);return e}async function a5(e){const t=xp(e,"ix.voucher-intercept");return Gc(t)&&await t(qv(e)),e}const c5=100;async function l5(e){return mo(e)&&(e.message.computeLimit=e.message.computeLimit||await Re.get("fcl.limit"),e.message.computeLimit||(Fe.deprecate({pkg:"FCL/SDK",subject:"The built-in default compute limit (DEFAULT_COMPUTE_LIMIT=10)",transition:"https://github.com/onflow/flow-js-sdk/blob/master/packages/sdk/TRANSITIONS.md#0009-deprecate-default-compute-limit"}),e.message.computeLimit=c5)),e}const u5=e=>e,dc=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:u5;return async n=>{const r=a=>[`
Accounts:`,{proposer:a.proposer,authorizations:a.authorizations,payer:a.payer},`

Details:`,a.accounts].filter(Boolean),i=function(){for(var a=arguments.length,c=new Array(a),u=0;u<a;u++)c[u]=arguments[u];console.log(`debug[${e}] ---
`,...c,`


---`)};return await Re.get(`debug.${e}`)&&await t(n,i,r),n}},f5=Nn([xk,dc("cadence",(e,t)=>t(e.message.cadence)),l5,dc("compute limit",(e,t)=>t(e.message.computeLimit)),Rk,dc("arguments",(e,t)=>t(e.message.arguments,e.message)),n5,dc("accounts",(e,t,n)=>t(...n(e))),d5,h5,r5,dc("signatures",(e,t,n)=>t(...n(e))),o5,s5,a5,dc("resolved",(e,t)=>t(e))]);async function d5(e){if(mo(e)&&e.message.refBlock==null){const t=await Re().get("accessNode.api"),n=await Re.first(["sdk.transport","sdk.send"],Bv);he(n,"Required value for sdk.transport is not defined in config. See: https://github.com/onflow/fcl-js/blob/master/packages/sdk/CHANGELOG.md#0057-alpha1----2022-01-21"),e.message.refBlock=(await n(l3([fk()]),{config:Re,response:zv,Buffer:Nt.Buffer,ix:Lv},{node:t}).then(xf)).id}return e}async function h5(e){if(mo(e)){var t=Object.values(e.accounts).find(n=>n.role.proposer);if(he(t!==void 0,"Transactions require a proposer"),t&&t.sequenceNum==null){const n=await Re().get("accessNode.api"),r=await Re.first(["sdk.transport","sdk.send"],Bv);he(r,"Required value for sdk.transport is not defined in config. See: https://github.com/onflow/fcl-js/blob/master/packages/sdk/CHANGELOG.md#0057-alpha1----2022-01-21"),e.accounts[t.tempId].sequenceNum=await r(await l3([dk(t.addr)]),{config:Re,response:zv,Buffer:Nt.Buffer,ix:Lv},{node:n}).then(xf).then(i=>i.keys).then(i=>i.find(a=>a.index===t.keyId)).then(i=>i.sequenceNumber)}}return e}function E3(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(t.length>1){const[i,a]=t;return E3((c,u)=>{let{Ok:f,Bad:d}=u;return i?f(c):d(c,a)})}const[r]=t;return i=>r(i,{Ok:Er,Bad:kv})}class S3 extends Error{constructor(){super("The current transport does not support subscriptions.  If you have provided a custom transport (e.g. via `sdk.transport` configuration), ensure that it implements the subscribe method."),this.name="SubscriptionsNotSupportedError"}}async function _3(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};he(e.send==null||e.transport==null,'SDK Transport Error: Cannot provide both "transport" and legacy "send" options.');const t=e.transport||e.send||await Re().first(["sdk.transport","sdk.send"],LP);return p5(t)?t:{send:t,subscribe:()=>{throw new S3}}}function p5(e){return e.send!==void 0&&e.subscribe!==void 0&&typeof e.send=="function"&&typeof e.subscribe=="function"}const Ap=async function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=await _3(t),r=n.send.bind(n);E3(r,"Required value for sdk.transport is not defined in config. See: https://github.com/onflow/fcl-js/blob/master/packages/sdk/CHANGELOG.md#0057-alpha1----2022-01-21");const i=await Re.first(["sdk.resolve"],t.resolve||f5);return t.node=t.node||await Re().get("accessNode.api"),Array.isArray(e)&&(e=Nn(Sp(),e)),r(await i(e),{config:Re,response:zv,ix:Lv,Buffer:Nt.Buffer},t)};function g5(e){let{topic:t,args:n,onData:r,onError:i}=e,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};async function c(){let f,d;try{f=await _3(a),d=a?.node||await Re().get("accessNode.api"),he(!!d,'SDK Send Error: Either opts.node or "accessNode.api" in config must be defined.')}catch(p){i(p instanceof Error?p:new Error(String(p)));return}return f.subscribe({topic:t,args:n,onData:r,onError:i},{node:d,...a})}let u=c();return{unsubscribe:()=>{u.then(f=>f?.unsubscribe?.())}}}function m5(e){let{topic:t,args:n,onData:r,onError:i}=e,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const c=g5({topic:t,args:n,onData:u=>{xf(u).then(r).catch(f=>{i(new Error(`Failed to decode response: ${f.message}`)),c?.unsubscribe?.()})},onError:i},a);return c}async function Rp(e){const t=await Re().where(/^decoder\./),n=Object.entries(t).map(r=>{let[i,a]=r;return i=`/${i.replace(/^decoder\./,"")}$/`,[i,a]});return xf(e,Object.fromEntries(n))}function y5(e){return c3("ix.validators",t=>Array.isArray(t)?[...t,e]:[e])}function b5(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return Nn([t=>(t.block.isSealed=e,t),y5(t=>{if(t.block.id)throw new Error("Unable to specify both block finality and block id.");if(t.block.height)throw new Error("Unable to specify both block finality and block height.");return t})])}function v5(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Nn(e.map(t=>_p(t,{role:tf.AUTHORIZER})))}function w5(e){return Nn([n3,t=>(t.transaction.id=e,Er(t))])}function E5(){return Nn([s3,e=>Er(e)])}function x3(e){return t=>(t.message.computeLimit=e,t)}function A3(e){return Nn(e.map(JT))}function R3(e,t){return{value:e,xform:t}}function S5(e){return _p(e,{role:tf.PROPOSER})}function _5(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Array.isArray(e)||(e=[e]),Nn(e.map(t=>_p(t,{role:tf.PAYER})))}function x5(){return Nn([e3,jv("ix.cadence",qT(...arguments))])}const A5=[],R5=null;function O5(){return Nn([t3,jv("ix.cadence",qT(...arguments)),e=>(e.message.refBlock=e.message.refBlock||R5,e.authorizations=e.authorizations||A5,Er(e))])}var kh={exports:{}},T5=kh.exports,P_;function D5(){return P_||(P_=1,function(e,t){(function(n,r){e.exports=r()})(T5,function(){return n={418:function(i,a){(function(c,u){for(var f in u)c[f]=u[f]})(a,function(c){var u={};function f(d){if(u[d])return u[d].exports;var p=u[d]={i:d,l:!1,exports:{}};return c[d].call(p.exports,p,p.exports,f),p.l=!0,p.exports}return f.m=c,f.c=u,f.i=function(d){return d},f.d=function(d,p,g){f.o(d,p)||Object.defineProperty(d,p,{configurable:!1,enumerable:!0,get:g})},f.n=function(d){var p=d&&d.__esModule?function(){return d.default}:function(){return d};return f.d(p,"a",p),p},f.o=function(d,p){return Object.prototype.hasOwnProperty.call(d,p)},f.p="",f(f.s=1)}([function(c,u,f){Object.defineProperty(u,"__esModule",{value:!0});var d=f(3),p=function(){function g(y,b){y===void 0&&(y={}),b===void 0&&(b={splitValues:!1});var v,E=this;this.headersMap={},y&&(typeof Headers<"u"&&y instanceof Headers?d.getHeaderKeys(y).forEach(function(S){d.getHeaderValues(y,S).forEach(function(_){b.splitValues?E.append(S,d.splitHeaderValue(_)):E.append(S,_)})}):typeof(v=y)=="object"&&typeof v.headersMap=="object"&&typeof v.forEach=="function"?y.forEach(function(S,_){E.append(S,_)}):typeof Map<"u"&&y instanceof Map?y.forEach(function(S,_){E.append(_,S)}):typeof y=="string"?this.appendFromString(y):typeof y=="object"&&Object.getOwnPropertyNames(y).forEach(function(S){var _=y[S];Array.isArray(_)?_.forEach(function(T){E.append(S,T)}):E.append(S,_)}))}return g.prototype.appendFromString=function(y){for(var b=y.split(`\r
`),v=0;v<b.length;v++){var E=b[v],S=E.indexOf(":");if(S>0){var _=E.substring(0,S).trim(),T=E.substring(S+1).trim();this.append(_,T)}}},g.prototype.delete=function(y,b){var v=d.normalizeName(y);if(b===void 0)delete this.headersMap[v];else{var E=this.headersMap[v];if(E){var S=E.indexOf(b);S>=0&&E.splice(S,1),E.length===0&&delete this.headersMap[v]}}},g.prototype.append=function(y,b){var v=this,E=d.normalizeName(y);Array.isArray(this.headersMap[E])||(this.headersMap[E]=[]),Array.isArray(b)?b.forEach(function(S){v.headersMap[E].push(d.normalizeValue(S))}):this.headersMap[E].push(d.normalizeValue(b))},g.prototype.set=function(y,b){var v=d.normalizeName(y);if(Array.isArray(b)){var E=[];b.forEach(function(S){E.push(d.normalizeValue(S))}),this.headersMap[v]=E}else this.headersMap[v]=[d.normalizeValue(b)]},g.prototype.has=function(y,b){var v=this.headersMap[d.normalizeName(y)];if(!Array.isArray(v))return!1;if(b!==void 0){var E=d.normalizeValue(b);return v.indexOf(E)>=0}return!0},g.prototype.get=function(y){var b=this.headersMap[d.normalizeName(y)];return b!==void 0?b.concat():[]},g.prototype.forEach=function(y){var b=this;Object.getOwnPropertyNames(this.headersMap).forEach(function(v){y(v,b.headersMap[v])},this)},g.prototype.toHeaders=function(){if(typeof Headers<"u"){var y=new Headers;return this.forEach(function(b,v){v.forEach(function(E){y.append(b,E)})}),y}throw new Error("Headers class is not defined")},g}();u.BrowserHeaders=p},function(c,u,f){Object.defineProperty(u,"__esModule",{value:!0});var d=f(0);u.BrowserHeaders=d.BrowserHeaders},function(c,u,f){Object.defineProperty(u,"__esModule",{value:!0}),u.iterateHeaders=function(d,p){for(var g=d[Symbol.iterator](),y=g.next();!y.done;)p(y.value[0]),y=g.next()},u.iterateHeadersKeys=function(d,p){for(var g=d.keys(),y=g.next();!y.done;)p(y.value),y=g.next()}},function(c,u,f){Object.defineProperty(u,"__esModule",{value:!0});var d=f(2);u.normalizeName=function(p){if(typeof p!="string"&&(p=String(p)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(p))throw new TypeError("Invalid character in header field name");return p.toLowerCase()},u.normalizeValue=function(p){return typeof p!="string"&&(p=String(p)),p},u.getHeaderValues=function(p,g){var y=p;if(y instanceof Headers&&y.getAll)return y.getAll(g);var b=y.get(g);return b&&typeof b=="string"?[b]:b},u.getHeaderKeys=function(p){var g=p,y={},b=[];return g.keys?d.iterateHeadersKeys(g,function(v){y[v]||(y[v]=!0,b.push(v))}):g.forEach?g.forEach(function(v,E){y[E]||(y[E]=!0,b.push(E))}):d.iterateHeaders(g,function(v){var E=v[0];y[E]||(y[E]=!0,b.push(E))}),b},u.splitHeaderValue=function(p){var g=[];return p.split(", ").forEach(function(y){y.split(",").forEach(function(b){g.push(b)})}),g}}]))},617:function(i,a,c){Object.defineProperty(a,"__esModule",{value:!0}),a.ChunkParser=a.ChunkType=a.encodeASCII=a.decodeASCII=void 0;var u,f=c(65);function d(S){return(_=S)===9||_===10||_===13||S>=32&&S<=126;var _}function p(S){for(var _=0;_!==S.length;++_)if(!d(S[_]))throw new Error("Metadata is not valid (printable) ASCII");return String.fromCharCode.apply(String,Array.prototype.slice.call(S))}function g(S){return(128&S.getUint8(0))==128}function y(S){return S.getUint32(1,!1)}function b(S,_,T){return S.byteLength-_>=T}function v(S,_,T){if(S.slice)return S.slice(_,T);var O=S.length;T!==void 0&&(O=T);for(var $=new Uint8Array(O-_),I=0,B=_;B<O;B++)$[I++]=S[B];return $}a.decodeASCII=p,a.encodeASCII=function(S){for(var _=new Uint8Array(S.length),T=0;T!==S.length;++T){var O=S.charCodeAt(T);if(!d(O))throw new Error("Metadata contains invalid ASCII");_[T]=O}return _},function(S){S[S.MESSAGE=1]="MESSAGE",S[S.TRAILERS=2]="TRAILERS"}(u=a.ChunkType||(a.ChunkType={}));var E=function(){function S(){this.buffer=null,this.position=0}return S.prototype.parse=function(_,T){if(_.length===0&&T)return[];var O,$=[];if(this.buffer==null)this.buffer=_,this.position=0;else if(this.position===this.buffer.byteLength)this.buffer=_,this.position=0;else{var I=this.buffer.byteLength-this.position,B=new Uint8Array(I+_.byteLength),z=v(this.buffer,this.position);B.set(z,0);var q=new Uint8Array(_);B.set(q,I),this.buffer=B,this.position=0}for(;;){if(!b(this.buffer,this.position,5))return $;var k=v(this.buffer,this.position,this.position+5),W=new DataView(k.buffer,k.byteOffset,k.byteLength),F=y(W);if(!b(this.buffer,this.position,5+F))return $;var G=v(this.buffer,this.position+5,this.position+5+F);if(this.position+=5+F,g(W))return $.push({chunkType:u.TRAILERS,trailers:(O=G,new f.Metadata(p(O)))}),$;$.push({chunkType:u.MESSAGE,data:G})}},S}();a.ChunkParser=E},8:function(i,a){var c;Object.defineProperty(a,"__esModule",{value:!0}),a.httpStatusToCode=a.Code=void 0,function(u){u[u.OK=0]="OK",u[u.Canceled=1]="Canceled",u[u.Unknown=2]="Unknown",u[u.InvalidArgument=3]="InvalidArgument",u[u.DeadlineExceeded=4]="DeadlineExceeded",u[u.NotFound=5]="NotFound",u[u.AlreadyExists=6]="AlreadyExists",u[u.PermissionDenied=7]="PermissionDenied",u[u.ResourceExhausted=8]="ResourceExhausted",u[u.FailedPrecondition=9]="FailedPrecondition",u[u.Aborted=10]="Aborted",u[u.OutOfRange=11]="OutOfRange",u[u.Unimplemented=12]="Unimplemented",u[u.Internal=13]="Internal",u[u.Unavailable=14]="Unavailable",u[u.DataLoss=15]="DataLoss",u[u.Unauthenticated=16]="Unauthenticated"}(c=a.Code||(a.Code={})),a.httpStatusToCode=function(u){switch(u){case 0:return c.Internal;case 200:return c.OK;case 400:return c.InvalidArgument;case 401:return c.Unauthenticated;case 403:return c.PermissionDenied;case 404:return c.NotFound;case 409:return c.Aborted;case 412:return c.FailedPrecondition;case 429:return c.ResourceExhausted;case 499:return c.Canceled;case 500:return c.Unknown;case 501:return c.Unimplemented;case 503:return c.Unavailable;case 504:return c.DeadlineExceeded;default:return c.Unknown}}},934:function(i,a,c){Object.defineProperty(a,"__esModule",{value:!0}),a.client=void 0;var u=c(65),f=c(617),d=c(8),p=c(346),g=c(57),y=c(882);a.client=function(E,S){return new b(E,S)};var b=function(){function E(S,_){this.started=!1,this.sentFirstMessage=!1,this.completed=!1,this.closed=!1,this.finishedSending=!1,this.onHeadersCallbacks=[],this.onMessageCallbacks=[],this.onEndCallbacks=[],this.parser=new f.ChunkParser,this.methodDefinition=S,this.props=_,this.createTransport()}return E.prototype.createTransport=function(){var S=this.props.host+"/"+this.methodDefinition.service.serviceName+"/"+this.methodDefinition.methodName,_={methodDefinition:this.methodDefinition,debug:this.props.debug||!1,url:S,onHeaders:this.onTransportHeaders.bind(this),onChunk:this.onTransportChunk.bind(this),onEnd:this.onTransportEnd.bind(this)};this.props.transport?this.transport=this.props.transport(_):this.transport=g.makeDefaultTransport(_)},E.prototype.onTransportHeaders=function(S,_){if(this.props.debug&&p.debug("onHeaders",S,_),this.closed)this.props.debug&&p.debug("grpc.onHeaders received after request was closed - ignoring");else if(_!==0){this.responseHeaders=S,this.props.debug&&p.debug("onHeaders.responseHeaders",JSON.stringify(this.responseHeaders,null,2));var T=v(S);this.props.debug&&p.debug("onHeaders.gRPCStatus",T);var O=T&&T>=0?T:d.httpStatusToCode(_);this.props.debug&&p.debug("onHeaders.code",O);var $=S.get("grpc-message")||[];if(this.props.debug&&p.debug("onHeaders.gRPCMessage",$),this.rawOnHeaders(S),O!==d.Code.OK){var I=this.decodeGRPCStatus($[0]);this.rawOnError(O,I,S)}}},E.prototype.onTransportChunk=function(S){var _=this;if(this.closed)this.props.debug&&p.debug("grpc.onChunk received after request was closed - ignoring");else{var T=[];try{T=this.parser.parse(S)}catch(O){return this.props.debug&&p.debug("onChunk.parsing error",O,O.message),void this.rawOnError(d.Code.Internal,"parsing error: "+O.message)}T.forEach(function(O){if(O.chunkType===f.ChunkType.MESSAGE){var $=_.methodDefinition.responseType.deserializeBinary(O.data);_.rawOnMessage($)}else O.chunkType===f.ChunkType.TRAILERS&&(_.responseHeaders?(_.responseTrailers=new u.Metadata(O.trailers),_.props.debug&&p.debug("onChunk.trailers",_.responseTrailers)):(_.responseHeaders=new u.Metadata(O.trailers),_.rawOnHeaders(_.responseHeaders)))})}},E.prototype.onTransportEnd=function(){if(this.props.debug&&p.debug("grpc.onEnd"),this.closed)this.props.debug&&p.debug("grpc.onEnd received after request was closed - ignoring");else if(this.responseTrailers!==void 0){var S=v(this.responseTrailers);if(S!==null){var _=this.responseTrailers.get("grpc-message"),T=this.decodeGRPCStatus(_[0]);this.rawOnEnd(S,T,this.responseTrailers)}else this.rawOnError(d.Code.Internal,"Response closed without grpc-status (Trailers provided)")}else{if(this.responseHeaders===void 0)return void this.rawOnError(d.Code.Unknown,"Response closed without headers");var O=v(this.responseHeaders),$=this.responseHeaders.get("grpc-message");if(this.props.debug&&p.debug("grpc.headers only response ",O,$),O===null)return void this.rawOnEnd(d.Code.Unknown,"Response closed without grpc-status (Headers only)",this.responseHeaders);var I=this.decodeGRPCStatus($[0]);this.rawOnEnd(O,I,this.responseHeaders)}},E.prototype.decodeGRPCStatus=function(S){if(!S)return"";try{return decodeURIComponent(S)}catch{return S}},E.prototype.rawOnEnd=function(S,_,T){var O=this;this.props.debug&&p.debug("rawOnEnd",S,_,T),this.completed||(this.completed=!0,this.onEndCallbacks.forEach(function($){if(!O.closed)try{$(S,_,T)}catch(I){setTimeout(function(){throw I},0)}}))},E.prototype.rawOnHeaders=function(S){this.props.debug&&p.debug("rawOnHeaders",S),this.completed||this.onHeadersCallbacks.forEach(function(_){try{_(S)}catch(T){setTimeout(function(){throw T},0)}})},E.prototype.rawOnError=function(S,_,T){var O=this;T===void 0&&(T=new u.Metadata),this.props.debug&&p.debug("rawOnError",S,_),this.completed||(this.completed=!0,this.onEndCallbacks.forEach(function($){if(!O.closed)try{$(S,_,T)}catch(I){setTimeout(function(){throw I},0)}}))},E.prototype.rawOnMessage=function(S){var _=this;this.props.debug&&p.debug("rawOnMessage",S.toObject()),this.completed||this.closed||this.onMessageCallbacks.forEach(function(T){if(!_.closed)try{T(S)}catch(O){setTimeout(function(){throw O},0)}})},E.prototype.onHeaders=function(S){this.onHeadersCallbacks.push(S)},E.prototype.onMessage=function(S){this.onMessageCallbacks.push(S)},E.prototype.onEnd=function(S){this.onEndCallbacks.push(S)},E.prototype.start=function(S){if(this.started)throw new Error("Client already started - cannot .start()");this.started=!0;var _=new u.Metadata(S||{});_.set("content-type","application/grpc-web+proto"),_.set("x-grpc-web","1"),this.transport.start(_)},E.prototype.send=function(S){if(!this.started)throw new Error("Client not started - .start() must be called before .send()");if(this.closed)throw new Error("Client already closed - cannot .send()");if(this.finishedSending)throw new Error("Client already finished sending - cannot .send()");if(!this.methodDefinition.requestStream&&this.sentFirstMessage)throw new Error("Message already sent for non-client-streaming method - cannot .send()");this.sentFirstMessage=!0;var _=y.frameRequest(S);this.transport.sendMessage(_)},E.prototype.finishSend=function(){if(!this.started)throw new Error("Client not started - .finishSend() must be called before .close()");if(this.closed)throw new Error("Client already closed - cannot .send()");if(this.finishedSending)throw new Error("Client already finished sending - cannot .finishSend()");this.finishedSending=!0,this.transport.finishSend()},E.prototype.close=function(){if(!this.started)throw new Error("Client not started - .start() must be called before .close()");if(this.closed)throw new Error("Client already closed - cannot .close()");this.closed=!0,this.props.debug&&p.debug("request.abort aborting request"),this.transport.cancel()},E}();function v(E){var S=E.get("grpc-status")||[];if(S.length>0)try{var _=S[0];return parseInt(_,10)}catch{return null}return null}},346:function(i,a){Object.defineProperty(a,"__esModule",{value:!0}),a.debug=void 0,a.debug=function(){for(var c=[],u=0;u<arguments.length;u++)c[u]=arguments[u];console.debug?console.debug.apply(null,c):console.log.apply(null,c)}},607:function(i,a,c){Object.defineProperty(a,"__esModule",{value:!0}),a.grpc=void 0;var u,f=c(418),d=c(57),p=c(229),g=c(540),y=c(210),b=c(859),v=c(8),E=c(938),S=c(35),_=c(934);(u=a.grpc||(a.grpc={})).setDefaultTransport=d.setDefaultTransportFactory,u.CrossBrowserHttpTransport=b.CrossBrowserHttpTransport,u.FetchReadableStreamTransport=p.FetchReadableStreamTransport,u.XhrTransport=y.XhrTransport,u.WebsocketTransport=g.WebsocketTransport,u.Code=v.Code,u.Metadata=f.BrowserHeaders,u.client=function(T,O){return _.client(T,O)},u.invoke=E.invoke,u.unary=S.unary},938:function(i,a,c){Object.defineProperty(a,"__esModule",{value:!0}),a.invoke=void 0;var u=c(934);a.invoke=function(f,d){if(f.requestStream)throw new Error(".invoke cannot be used with client-streaming methods. Use .client instead.");var p=u.client(f,{host:d.host,transport:d.transport,debug:d.debug});return d.onHeaders&&p.onHeaders(d.onHeaders),d.onMessage&&p.onMessage(d.onMessage),d.onEnd&&p.onEnd(d.onEnd),p.start(d.metadata),p.send(d.request),p.finishSend(),{close:function(){p.close()}}}},65:function(i,a,c){Object.defineProperty(a,"__esModule",{value:!0}),a.Metadata=void 0;var u=c(418);Object.defineProperty(a,"Metadata",{enumerable:!0,get:function(){return u.BrowserHeaders}})},57:function(i,a,c){Object.defineProperty(a,"__esModule",{value:!0}),a.makeDefaultTransport=a.setDefaultTransportFactory=void 0;var u=c(859),f=function(d){return u.CrossBrowserHttpTransport({withCredentials:!1})(d)};a.setDefaultTransportFactory=function(d){f=d},a.makeDefaultTransport=function(d){return f(d)}},229:function(i,a,c){var u=this&&this.__assign||function(){return(u=Object.assign||function(g){for(var y,b=1,v=arguments.length;b<v;b++)for(var E in y=arguments[b])Object.prototype.hasOwnProperty.call(y,E)&&(g[E]=y[E]);return g}).apply(this,arguments)};Object.defineProperty(a,"__esModule",{value:!0}),a.detectFetchSupport=a.FetchReadableStreamTransport=void 0;var f=c(65),d=c(346);a.FetchReadableStreamTransport=function(g){return function(y){return function(b,v){return b.debug&&d.debug("fetchRequest",b),new p(b,v)}(y,g)}};var p=function(){function g(y,b){this.cancelled=!1,this.controller=self.AbortController&&new AbortController,this.options=y,this.init=b}return g.prototype.pump=function(y,b){var v=this;if(this.reader=y,this.cancelled)return this.options.debug&&d.debug("Fetch.pump.cancel at first pump"),void this.reader.cancel().catch(function(E){v.options.debug&&d.debug("Fetch.pump.reader.cancel exception",E)});this.reader.read().then(function(E){if(E.done)return v.options.onEnd(),b;v.options.onChunk(E.value),v.pump(v.reader,b)}).catch(function(E){v.cancelled?v.options.debug&&d.debug("Fetch.catch - request cancelled"):(v.cancelled=!0,v.options.debug&&d.debug("Fetch.catch",E.message),v.options.onEnd(E))})},g.prototype.send=function(y){var b=this;fetch(this.options.url,u(u({},this.init),{headers:this.metadata.toHeaders(),method:"POST",body:y,signal:this.controller&&this.controller.signal})).then(function(v){if(b.options.debug&&d.debug("Fetch.response",v),b.options.onHeaders(new f.Metadata(v.headers),v.status),!v.body)return v;b.pump(v.body.getReader(),v)}).catch(function(v){b.cancelled?b.options.debug&&d.debug("Fetch.catch - request cancelled"):(b.cancelled=!0,b.options.debug&&d.debug("Fetch.catch",v.message),b.options.onEnd(v))})},g.prototype.sendMessage=function(y){this.send(y)},g.prototype.finishSend=function(){},g.prototype.start=function(y){this.metadata=y},g.prototype.cancel=function(){var y=this;this.cancelled?this.options.debug&&d.debug("Fetch.cancel already cancelled"):(this.cancelled=!0,this.controller?(this.options.debug&&d.debug("Fetch.cancel.controller.abort"),this.controller.abort()):this.options.debug&&d.debug("Fetch.cancel.missing abort controller"),this.reader?(this.options.debug&&d.debug("Fetch.cancel.reader.cancel"),this.reader.cancel().catch(function(b){y.options.debug&&d.debug("Fetch.cancel.reader.cancel exception",b)})):this.options.debug&&d.debug("Fetch.cancel before reader"))},g}();a.detectFetchSupport=function(){return typeof Response<"u"&&Response.prototype.hasOwnProperty("body")&&typeof Headers=="function"}},859:function(i,a,c){Object.defineProperty(a,"__esModule",{value:!0}),a.CrossBrowserHttpTransport=void 0;var u=c(229),f=c(210);a.CrossBrowserHttpTransport=function(d){if(u.detectFetchSupport()){var p={credentials:d.withCredentials?"include":"same-origin"};return u.FetchReadableStreamTransport(p)}return f.XhrTransport({withCredentials:d.withCredentials})}},210:function(i,a,c){var u,f=this&&this.__extends||(u=function(S,_){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(T,O){T.__proto__=O}||function(T,O){for(var $ in O)Object.prototype.hasOwnProperty.call(O,$)&&(T[$]=O[$])})(S,_)},function(S,_){function T(){this.constructor=S}u(S,_),S.prototype=_===null?Object.create(_):(T.prototype=_.prototype,new T)});Object.defineProperty(a,"__esModule",{value:!0}),a.stringToArrayBuffer=a.MozChunkedArrayBufferXHR=a.XHR=a.XhrTransport=void 0;var d=c(65),p=c(346),g=c(849);a.XhrTransport=function(S){return function(_){if(g.detectMozXHRSupport())return new b(_,S);if(g.detectXHROverrideMimeTypeSupport())return new y(_,S);throw new Error("This environment's XHR implementation cannot support binary transfer.")}};var y=function(){function S(_,T){this.options=_,this.init=T}return S.prototype.onProgressEvent=function(){this.options.debug&&p.debug("XHR.onProgressEvent.length: ",this.xhr.response.length);var _=this.xhr.response.substr(this.index);this.index=this.xhr.response.length;var T=E(_);this.options.onChunk(T)},S.prototype.onLoadEvent=function(){this.options.debug&&p.debug("XHR.onLoadEvent"),this.options.onEnd()},S.prototype.onStateChange=function(){this.options.debug&&p.debug("XHR.onStateChange",this.xhr.readyState),this.xhr.readyState===XMLHttpRequest.HEADERS_RECEIVED&&this.options.onHeaders(new d.Metadata(this.xhr.getAllResponseHeaders()),this.xhr.status)},S.prototype.sendMessage=function(_){this.xhr.send(_)},S.prototype.finishSend=function(){},S.prototype.start=function(_){var T=this;this.metadata=_;var O=new XMLHttpRequest;this.xhr=O,O.open("POST",this.options.url),this.configureXhr(),this.metadata.forEach(function($,I){O.setRequestHeader($,I.join(", "))}),O.withCredentials=!!this.init.withCredentials,O.addEventListener("readystatechange",this.onStateChange.bind(this)),O.addEventListener("progress",this.onProgressEvent.bind(this)),O.addEventListener("loadend",this.onLoadEvent.bind(this)),O.addEventListener("error",function($){T.options.debug&&p.debug("XHR.error",$),T.options.onEnd($.error)})},S.prototype.configureXhr=function(){this.xhr.responseType="text",this.xhr.overrideMimeType("text/plain; charset=x-user-defined")},S.prototype.cancel=function(){this.options.debug&&p.debug("XHR.abort"),this.xhr.abort()},S}();a.XHR=y;var b=function(S){function _(){return S!==null&&S.apply(this,arguments)||this}return f(_,S),_.prototype.configureXhr=function(){this.options.debug&&p.debug("MozXHR.configureXhr: setting responseType to 'moz-chunked-arraybuffer'"),this.xhr.responseType="moz-chunked-arraybuffer"},_.prototype.onProgressEvent=function(){var T=this.xhr.response;this.options.debug&&p.debug("MozXHR.onProgressEvent: ",new Uint8Array(T)),this.options.onChunk(new Uint8Array(T))},_}(y);function v(S,_){var T=S.charCodeAt(_);if(T>=55296&&T<=56319){var O=S.charCodeAt(_+1);O>=56320&&O<=57343&&(T=65536+(T-55296<<10)+(O-56320))}return T}function E(S){for(var _=new Uint8Array(S.length),T=0,O=0;O<S.length;O++){var $=String.prototype.codePointAt?S.codePointAt(O):v(S,O);_[T++]=255&$}return _}a.MozChunkedArrayBufferXHR=b,a.stringToArrayBuffer=E},849:function(i,a){var c;function u(){if(c!==void 0)return c;if(XMLHttpRequest){c=new XMLHttpRequest;try{c.open("GET","https://localhost")}catch{}}return c}function f(d){var p=u();if(!p)return!1;try{return p.responseType=d,p.responseType===d}catch{}return!1}Object.defineProperty(a,"__esModule",{value:!0}),a.detectXHROverrideMimeTypeSupport=a.detectMozXHRSupport=a.xhrSupportsResponseType=void 0,a.xhrSupportsResponseType=f,a.detectMozXHRSupport=function(){return typeof XMLHttpRequest<"u"&&f("moz-chunked-arraybuffer")},a.detectXHROverrideMimeTypeSupport=function(){return typeof XMLHttpRequest<"u"&&XMLHttpRequest.prototype.hasOwnProperty("overrideMimeType")}},540:function(i,a,c){Object.defineProperty(a,"__esModule",{value:!0}),a.WebsocketTransport=void 0;var u,f=c(346),d=c(617);(function(g){g[g.FINISH_SEND=1]="FINISH_SEND"})(u||(u={}));var p=new Uint8Array([1]);a.WebsocketTransport=function(){return function(g){return function(y){y.debug&&f.debug("websocketRequest",y);var b,v=function(_){if(_.substr(0,8)==="https://")return"wss://"+_.substr(8);if(_.substr(0,7)==="http://")return"ws://"+_.substr(7);throw new Error("Websocket transport constructed with non-https:// or http:// host.")}(y.url),E=[];function S(_){if(_===u.FINISH_SEND)b.send(p);else{var T=_,O=new Int8Array(T.byteLength+1);O.set(new Uint8Array([0])),O.set(T,1),b.send(O)}}return{sendMessage:function(_){b&&b.readyState!==b.CONNECTING?S(_):E.push(_)},finishSend:function(){b&&b.readyState!==b.CONNECTING?S(u.FINISH_SEND):E.push(u.FINISH_SEND)},start:function(_){(b=new WebSocket(v,["grpc-websockets"])).binaryType="arraybuffer",b.onopen=function(){var T;y.debug&&f.debug("websocketRequest.onopen"),b.send((T="",_.forEach(function(O,$){T+=O+": "+$.join(", ")+`\r
`}),d.encodeASCII(T))),E.forEach(function(O){S(O)})},b.onclose=function(T){y.debug&&f.debug("websocketRequest.onclose",T),y.onEnd()},b.onerror=function(T){y.debug&&f.debug("websocketRequest.onerror",T)},b.onmessage=function(T){y.onChunk(new Uint8Array(T.data))}},cancel:function(){y.debug&&f.debug("websocket.abort"),b.close()}}}(g)}}},35:function(i,a,c){Object.defineProperty(a,"__esModule",{value:!0}),a.unary=void 0;var u=c(65),f=c(934);a.unary=function(d,p){if(d.responseStream)throw new Error(".unary cannot be used with server-streaming methods. Use .invoke or .client instead.");if(d.requestStream)throw new Error(".unary cannot be used with client-streaming methods. Use .client instead.");var g=null,y=null,b=f.client(d,{host:p.host,transport:p.transport,debug:p.debug});return b.onHeaders(function(v){g=v}),b.onMessage(function(v){y=v}),b.onEnd(function(v,E,S){p.onEnd({status:v,statusMessage:E,headers:g||new u.Metadata,message:y,trailers:S})}),b.start(p.metadata),b.send(p.request),b.finishSend(),{close:function(){b.close()}}}},882:function(i,a){Object.defineProperty(a,"__esModule",{value:!0}),a.frameRequest=void 0,a.frameRequest=function(c){var u=c.serializeBinary(),f=new ArrayBuffer(u.byteLength+5);return new DataView(f,1,4).setUint32(0,u.length,!1),new Uint8Array(f,5).set(u),new Uint8Array(f)}}},r={},function i(a){if(r[a])return r[a].exports;var c=r[a]={exports:{}};return n[a].call(c.exports,c,c.exports,i),c.exports}(607);var n,r})}(kh)),kh.exports}var C5=D5(),U_=/^[0-9]+$/,I5=function(t,n){var r=U_.test(t),i=U_.test(n);return r&&i&&(t=+t,n=+n),t===n?0:r&&!i?-1:i&&!r?1:t<n?-1:1},k_=/^(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)(?:-((?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$/,N5=function(t,n){if(typeof t!="string"||typeof n!="string")throw new Error("Invalid input");var r=t.match(k_),i=n.match(k_);if(!r||!i)throw new Error("Invalid input");for(var a=1;a<=3;a++){if(parseInt(r[a])>parseInt(i[a]))return 1;if(parseInt(r[a])<parseInt(i[a]))return-1}if(r[4]&&i[4])for(var c=(r[4]||"").split("."),u=(i[4]||"").split("."),f=0;f<Math.max(c.length,u.length);f++){if(c[f]===void 0)return-1;if(u[f]===void 0)return 1;var d=I5(c[f],u[f]);if(d!==0)return d}return 0};const Fv="1.20.0",Op=e=>t=>typeof t===e,as=e=>e!=null,$5=Op("object"),Fc=Op("string"),O3=Op("function"),B5=Op("number");function T3(e){return O3(e)?e(R3,BU):[]}async function D3(e,t){he(as(t),`${e}(opts) -- opts is required`),he($5(t),`${e}(opts) -- opts must be an object`),he(!(t.cadence&&t.template),`${e}({ template, cadence }) -- cannot pass both cadence and template`),he(as(t.cadence||t?.template),`${e}({ cadence }) -- cadence is required`),he(Fc(t.cadence)||t?.template,`${e}({ cadence }) -- cadence must be a string`),he(await Re().get("accessNode.api"),`${e}(opts) -- Required value for "accessNode.api" not defined in config. See: https://github.com/onflow/flow-js-sdk/blob/master/packages/fcl/src/exec/query.md#configuration`)}async function P5(e){return D3("mutate",e)}async function U5(e){return D3("query",e)}async function M_(e){let{url:t}=e;he(typeof t<"u","retrieve({ url }) -- url must be defined");let n;try{n=await BT(t)}catch{throw new Error("httpDocumentResolver Error: Failed to retrieve document.")}return n.ok?await n.json():null}const j_=new Map([["http",M_],["https",M_]]);async function k5(e){let{url:t}=e;he(typeof t<"u","retrieve({ url }) -- url must be defined"),he(typeof t=="string","retrieve({ url }) -- url must be a string");const n=await Re().where(/^document\.resolver\./);Object.keys(n).map(u=>{const f=n[u],d=u.replace(/^document\.resolver\./,"");j_.set(d,f)});const r=/^(.*):\/\/([A-Za-z0-9\-\.]+)(:[0-9]+)?(.*)$/.exec(t);he(r,"Failed to parse URL");const i=r[1];he(r,"Failed to parse URL protocol");const a=j_.get(i);return he(a,`No resolver found for protcol=${i}`),await a({url:t})}async function M5(e){let{network:t,template:n}=e;return he(n.f_version==="1.0.0","deriveCadenceByNetwork100({ template }) -- template must be version 1.0.0"),Object.keys(n?.data?.dependencies).map(i=>{const a=Object.values(n?.data?.dependencies?.[i]);he(a!==void 0,`deriveCadenceByNetwork100 -- Could not find contracts for dependency placeholder: ${i}`),he(a.length>0,`deriveCadenceByNetwork100 -- Could not find contracts for dependency placeholder: ${i}`);const u=a[0]?.[t];return he(u,`deriveCadenceByNetwork100 -- Could not find ${t} network information for dependency: ${i}`),[i,u?.address]}).reduce((i,a)=>{let[c,u]=a;const f=new RegExp("(\\b"+c+"\\b)","g");return i.replace(f,u)},n.data.cadence)}function j5(e){let{cadence:t,networkDependencies:n}=e;return Object.keys(n).reduce((r,i)=>{const a=n[i],c=new RegExp(`import "\\b${i}\\b"`,"g");return r.replace(c,`import ${i} from ${a}`)},t)}async function L5(e){let{network:t,template:n}=e;he(n.f_version==="1.1.0","deriveCadenceByNetwork110({ template }) -- template must be version 1.0.0");const r={};return n?.data?.dependencies.forEach(i=>{i.contracts.forEach(a=>{const c=a.contract;a.networks.forEach(u=>{u.network===t&&(r[c]=u.address)}),he(r[c]!==void 0,`deriveCadenceByNetwork110 -- Could not find contracts Network Address: ${t} ${c}`)})}),he(Object.keys(r).length===n?.data?.dependencies.length,`deriveCadenceByNetwork110 -- Could not find contracts for import dependencies: ${r}`),he(Object.keys(r).length===Object.values(r).length,`deriveCadenceByNetwork110 -- Could not find all addresses for network ${t} dependencies:  ${r}`),he(n?.data?.cadence?.body,`no cadence found -- Could not replace import dependencies: ${r}`),j5({cadence:n?.data?.cadence?.body,networkDependencies:r})}async function z5(e){let{network:t,template:n}=e;switch(he(t!=null,"deriveCadenceByNetwork({ network }) -- network must be defined"),he(typeof t=="string","deriveCadenceByNetwork({ network }) -- network must be a string"),he(n!=null,"deriveCadenceByNetwork({ template }) -- template must be defined"),he(typeof n=="object","deriveCadenceByNetwork({ template }) -- template must be an object"),he(n.f_type==="InteractionTemplate","deriveCadenceByNetwork({ template }) -- template must be an InteractionTemplate"),n.f_version){case"1.1.0":return await L5({network:t,template:n});case"1.0.0":return await M5({network:t,template:n});default:throw new Error("deriveCadenceByNetwork Error: Unsupported template version")}}async function q5(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(await Ap([E5()],e).then(Rp)).chainId}let hc={},L_=!1;async function ya(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=await Re.get("flow.network"),n=await Re.get("env");n&&!L_&&(Fe.deprecate({pkg:"FCL",subject:'Using the "env" configuration key for specifying the flow network',message:"Configuring to specify flow network is no longer required",transition:"https://github.com/onflow/flow-js-sdk/blob/master/packages/fcl/TRANSITIONS.md#0001-deprecate-env-config-key"}),L_=!0);const r=e.node||await Re.get("accessNode.api");if(!r){if(t)return t;if(n)return n;throw new Error('Either the "accessNode.api" config key or opts.node must be set')}if(hc[r])try{return await hc[r]}catch{}hc[r]||(hc[r]=q5(e).catch(i=>{throw hc[r]=null,i}));try{return await hc[r]}catch(i){if(t)return t;if(n)return n;throw new Error(`Error getting chainId from access node - are you using the correct access node endpoint.  If running locally, is your emulator up-to-date? ${i.message}`)}}function H5(){return Re.subscribe(()=>{ya({enableRequestLogging:!1}).catch(()=>{})})}async function C3(e){Fc(e?.template)&&(e.template=await k5({url:e?.template}));const t=e.cadence||await z5({template:e.template,network:await ya(e)});return e.cadence=t,e}async function F5(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return await U5(e),e=await C3(e),Ap([x5(e.cadence),A3(T3(e.args||[])),b5(e.isSealed??!1),e.limit&&typeof e.limit=="number"&&x3(e.limit)])}async function V5(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return F5(e).then(Rp)}const yr={"HTTP/RPC":"HTTP/RPC","HTTP/POST":"HTTP/POST","IFRAME/RPC":"IFRAME/RPC","POP/RPC":"POP/RPC","TAB/RPC":"TAB/RPC","EXT/RPC":"EXT/RPC","DEEPLINK/RPC":"DEEPLINK/RPC"},G5=globalThis.URL;let Vv=class extends G5{constructor(t,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];super(t,n,...i)}};const rl={f_type:"Service",f_vsn:"1.0.0"},I3={f_type:"Identity",f_vsn:"1.0.0"},K5={f_type:"USER",f_vsn:"1.0.0"},W5={f_type:"PollingResponse",f_vsn:"1.0.0"},Y5={f_type:"CompositeSignature",f_vsn:"1.0.0"},X5="USER_SIGNATURE",Z5=e=>{if(e.appIdentifier){const{appIdentifier:t,address:n,nonce:r,signatures:i}=e;return he(Fc(t),"verifyAccountProof({ appIdentifier }) -- appIdentifier must be a string"),he(Fc(n)&&qt(n).length===16,"verifyAccountProof({ address }) -- address must be a valid address"),he(/^[0-9a-f]+$/i.test(r),"nonce must be a hex string"),he(Array.isArray(i)&&i.every((a,c,u)=>a.f_type==="CompositeSignature"),"Must include an Array of CompositeSignatures to verify"),he(i.map(a=>a.addr).every((a,c,u)=>a===u[0]),"User signatures to be verified must be from a single account address"),!0}else{const{message:t,address:n,compSigs:r}=e;return he(/^[0-9a-f]+$/i.test(t),"Signed message must be a hex string"),he(Fc(n)&&qt(n).length===16,"verifyUserSignatures({ address }) -- address must be a valid address"),he(Array.isArray(r)&&r.every((i,a,c)=>i.f_type==="CompositeSignature"),"Must include an Array of CompositeSignatures to verify"),he(r.map(i=>i.addr).every((i,a,c)=>i===c[0]),"User signatures to be verified must be from a single account address"),!0}},Q5=async(e,t)=>{const n="verifyUserSignatures";let r=await ya(t);const i={testnet:"0x74daa6f9c7ef24b1",mainnet:"0xb4b82a1c9d21d284",previewnet:"0x40b5b8b2ce81ea4a"},a=t.fclCryptoContract||i[r];return he(a,`${n}({ fclCryptoContract }) -- FCLCrypto contract address is unknown for network: ${r}. Please manually specify the FCLCrypto contract address.`),`
      import FCLCrypto from ${a}

      access(all) fun main(
          address: Address, 
          message: String, 
          keyIndices: [Int], 
          signatures: [String]
      ): Bool {
        return FCLCrypto.${n}(address: address, message: message, keyIndices: keyIndices, signatures: signatures)
      }
    `};async function J5(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const r=Bn(t[0].addr);Z5({message:e,address:r,compSigs:t});let i=[],a=[];for(const c of t)i.push(c.signature),a.push(c.keyId.toString());return V5({cadence:await Q5(X5,n),args:(c,u)=>[c(r,u.Address),c(e,u.String),c(a,u.Array(u.Int)),c(i,u.Array(u.String))]})}Fe.deprecate({pkg:"FCL",subject:"fcl.verifyUserSignatures()",message:"Please use fcl.AppUtils.verifyUserSignatures()",callback:function(t,n){return J5(t,n)}});const eM=/\[Error Code: (\d+)\]/;class Tp extends Error{constructor(t,n){super(t),this.code=n,this.type=e_[n]}static fromErrorMessage(t){const n=t.match(eM),r=n?parseInt(n[1],10):void 0;return new Tp(t,r||e_.UNKNOWN_ERROR)}}async function z_(e){return Object.fromEntries(Object.entries(await Re().where(e)).map(t=>{let[n,r]=t;return[n.replace(e,""),r]}))}const N3=e=>e.status===5,uo=e=>e.status>=4,Dp=e=>e.status>=3,Cp=e=>e.status>=2,$3=e=>e.status>=1,tM=e=>e.status>=0,B3=(e,t)=>{if(e===t)return!0;if(typeof e!="object"||typeof t!="object"||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!B3(e[n],t[n]))return!1;return!0},db=(e,t)=>!B3(e,t),Jh=e=>{if(typeof e=="object"&&(e=e.transactionId),e==null)throw new Error("transactionId required");return e},P3=/^[0-9a-fA-F]{64}$/,Fy="POLL",q_="TIMEOUT",nM=async e=>Ap([w5(e)]).then(Rp),rM=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return{[nf]:async t=>{setTimeout(()=>t.sendSelf(q_),e.txNotFoundTimeout),t.sendSelf(Fy)},[nl]:(t,n)=>{t.subscribe(n.from),t.send(n.from,ob,t.all())},[ra]:(t,n)=>{t.unsubscribe(n.from)},[mT]:async(t,n)=>{n.reply(t.all())},[q_]:async t=>{Object.keys(t.all()).length===0&&t.fatalError(new Error(`TX status polling failed: no transaction was found within timeout interval (${e.txNotFoundTimeout}ms)`))},[Fy]:async t=>{const n=()=>setTimeout(()=>t.sendSelf(Fy),e.pollRate);let r;const i=t.all();try{r=await nM(t.self())}catch(a){const c=a instanceof Ph&&a.statusCode===404,u=a.code===C5.grpc.Code.NotFound;return c||u?n():t.fatalError(a)}uo(r)||n(),db(i,r)&&t.broadcast(ob,r),t.merge(r)}}},H_=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return t=>ma(rM(e),Jh(t))};function ba(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{txNotFoundTimeout:12500,pollRate:1e3};if(!P3.test(Jh(e)))throw new Error("Invalid transactionId");function n(){return yT(e,H_(t))}function r(a){return Ov(Jh(e),H_(t),a)}function i(a){return function(){const f=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}).suppress||!1;return new Promise((d,p)=>{const g=r((y,b)=>{if((b||y.statusCode)&&!f){if(b!=null)p(b),g();else if(y.statusCode===1){const v=Tp.fromErrorMessage(y.errorMessage);p(v),g()}return}a(y)&&(d(y),g())})})}}return{snapshot:n,subscribe:r,onceFinalized:i(Cp),onceExecuted:i(Dp),onceSealed:i(uo)}}ba.isUnknown=tM;ba.isPending=$3;ba.isFinalized=Cp;ba.isExecuted=Dp;ba.isSealed=uo;ba.isExpired=N3;const iM="local",F_=new Map;function va(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{txNotFoundTimeout:12500,pollRate:1e3};if(!P3.test(Jh(e)))throw new Error("Invalid transactionId");function n(){let c=F_.get(e);return c||(c=sM(e,t),F_.set(e,c)),c}function r(){return Promise.resolve(n().value)}function i(c,u){const f=n(),{unsubscribe:d}=f.subscribe(c,u);return()=>d()}function a(c){return function(){const d=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{suppress:!1}).suppress||!1;return new Promise((p,g)=>{const y=i(b=>{if(b.statusCode===1){const v=Tp.fromErrorMessage(b.errorMessage);g(v),y()}else c(b)&&(p(b),y())},b=>{d||(g(b),y())})})}}return{snapshot:r,subscribe:i,onceFinalized:a(Cp),onceExecuted:a(Dp),onceSealed:a(uo)}}va.isUnknown=o3;va.isPending=$3;va.isFinalized=Cp;va.isExecuted=Dp;va.isSealed=uo;va.isExpired=N3;function sM(e,t){const n=new Set;let r={blockId:"",status:mB.UNKNOWN,statusCode:0,errorMessage:"",events:[],statusString:""};i().catch(f);async function i(){await ya()===iM?(console.warn("Events are not supported on the Flow emulator, falling back to legacy polling."),c()):a()}function a(){const d=m5({topic:ga.TRANSACTION_STATUSES,args:{transactionId:e},onData:p=>{db(r,p)&&(r=p,u(p)),uo(p)&&new Promise(g=>setTimeout(g,0)).then(()=>{uo(p)&&d.unsubscribe()})},onError:p=>{p instanceof S3?(console.warn("Failed to subscribe to transaction status updates using real-time streaming (are you using the deprecated GRPC transport?), falling back to polling."),c()):f(p)}})}function c(){const d=ba(e,t).subscribe((p,g)=>{g?f(g):p&&db(r,p)&&(r=p,u(p),uo(p)&&new Promise(y=>setTimeout(y,0)).then(()=>{d()}))})}function u(d){for(const p of n)try{p.onData(d)}catch(g){console.error("Error in transaction observer",g)}}function f(d){for(const p of n)try{p.onError(d)}catch(g){console.error("Error in transaction observer",g)}}return{subscribe(d,p){const g={onData:d,onError:p||(()=>{})};return n.add(g),d(r),{unsubscribe:()=>n.delete(g)}},get value(){return r}}}const pc=()=>{throw new Error("Platform specific Core Strategies are not initialized")},oM={[yr["EXT/RPC"]]:pc,[yr["HTTP/POST"]]:pc,[yr["IFRAME/RPC"]]:pc,[yr["POP/RPC"]]:pc,[yr["TAB/RPC"]]:pc,[yr["EXT/RPC"]]:pc},aM=["ServicePlugin"],cM=["discovery-service"],lM=e=>{const{services:t=[],serviceStrategy:n}=e;he(Array.isArray(t),"Services must be an array");for(const r of t)he(as(r.f_type)&&r.f_type==="Service","Service is required"),he(as(r.type)&&r.type==="authn",`Service must be type authn. Received ${r.type}`),he(r.method in yr||n.method===r.method,`Service method ${r.method} is not supported`);return he(as(n),"Service strategy is required"),he(as(n.method)&&Fc(n.method),"Service strategy method is required"),he(as(n.exec)&&O3(n.exec),"Service strategy exec function is required"),{discoveryServices:t,serviceStrategy:n}},uM=e=>{let{coreStrategies:t}=e,n=new Set,r=new Map(Object.entries(t));const i=d=>{if(he(cM.includes(d.type),`Service Plugin type ${d.type} is not supported`),d.type==="discovery-service"){const{discoveryServices:p,serviceStrategy:g}=lM(d);a(p),r.has(g.method)?Fe({title:"Add Service Plugin",message:`Service strategy for ${g.method} already exists`,level:ht.warn}):r.set(g.method,g.exec)}},a=d=>n=new Set([...d]);return Object.freeze({add:i,getServices:()=>[...n],getStrategy:d=>r.get(d),getStrategies:()=>[...r.keys()]})},fM=e=>{let t;he(!!e,"No plugins supplied"),Array.isArray(e)?t=[...e]:t=[e];for(const n of t)he(as(n.name),"Plugin name is required"),he(as(n.f_type),"Plugin f_type is required"),he(aM.includes(n.f_type),`Plugin type ${n.f_type} is not supported`);return t},dM=()=>{const e=new Map;return Object.freeze({add:r=>{const i=fM(r);for(const a of i)e.set(a.name,a),a.f_type==="ServicePlugin"&&sf.add(a)},getPlugins:()=>e})};let sf;const U3=()=>typeof sf<"u",k3=e=>{let{coreStrategies:t}=e;if(U3())return sf;const n=uM({coreStrategies:t});return sf=n,n},Af=()=>U3()?sf:(console.warn("Registry is not initalized, it will be initialized with stub core strategies"),k3({coreStrategies:oM})),hb=dM(),M3=async()=>[...window?.fcl_extensions||[],...Af().getServices()];async function hM(e){const t=await Re.get("discovery.authn.include",[]),n=await Re.get("discovery.authn.exclude",[]),r=await Re.get("discovery.features.suggested",[]),i=await Re.first(["discovery.wallet.method","discovery.wallet.method.default"]),a=e?.method?e.method:i,c=e?.endpoint??await Re.first(["discovery.wallet","challenge.handshake"]);return he(c,`
    If no service is passed to "authenticate," then "discovery.wallet" must be defined in fcl config.
    See: "https://docs.onflow.org/fcl/reference/api/#setting-configuration-values"
    `),{...e,type:"authn",endpoint:c,method:a,discoveryAuthnInclude:t,discoveryAuthnExclude:n,discoveryFeaturesSuggested:r}}async function pM(e){let{types:t}=e;const n=await Re.get("discovery.authn.endpoint");he(!!n,'"discovery.authn.endpoint" in config must be defined.');const r=await Re.get("discovery.authn.include",[]),i=await Re.get("discovery.authn.exclude",[]),a=new Vv(n);return fetch(a,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:t,fclVersion:Fv,include:r,exclude:i,features:{suggested:await Re.get("discovery.features.suggested",[])},clientServices:await M3(),supportedStrategies:Af().getStrategies(),userAgent:window?.navigator?.userAgent,network:await ya()})}).then(c=>c.json())}const _i={AUTHN:"authn",RESULTS:"results",SNAPSHOT:"SNAPSHOT",UPDATED:"UPDATED",UPDATE_RESULTS:"UPDATE_RESULTS"},gM=(e,t)=>{e&&console.warn(`
      %cFCL Warning
      ============================
      ${t}
      For more info, please see the docs: https://docs.onflow.org/fcl/
      ============================
      `,"font-weight:bold;font-family:monospace;")},pb=async()=>{try{const e=await pM({types:[_i.AUTHN]});Zt(_i.AUTHN,_i.UPDATE_RESULTS,{results:e})}catch(e){Fe({title:`${e.name} Error fetching Discovery API services.`,message:e.message,level:ht.error})}},mM={[nf]:async e=>{gM(typeof window>"u",'"fcl.discovery" is only available in the browser.'),document.readyState==="complete"?pb():window.addEventListener("load",()=>{pb()})},[_i.UPDATE_RESULTS]:(e,t,n)=>{e.merge(n),e.broadcast(_i.UPDATED,{...e.all()})},[nl]:(e,t)=>{e.subscribe(t.from),e.send(t.from,_i.UPDATED,{...e.all()})},[ra]:(e,t)=>e.unsubscribe(t.from),[_i.SNAPSHOT]:async(e,t)=>t.reply({...e.all()})},V_=()=>ma(mM,_i.AUTHN),yM={subscribe:e=>Ov(_i.AUTHN,V_,e),snapshot:()=>yT(_i.AUTHN,V_),update:()=>{document.readyState==="complete"&&pb()}},j3={authn:yM};async function bM(e,t){if(e==null||t==null)return[];const n=new Vv(e);n.searchParams.append("code",t);const r=await fetch(n,{method:"GET",headers:{"Content-Type":"application/json"}}).then(a=>a.json());if(Array.isArray(r))return r;const i=[];if(Array.isArray(r.authorizations))for(let a of r.authorizations)i.push({type:"authz",keyId:r.keyId,...a});return r.provider!=null&&i.push({type:"authn",id:"wallet-provider#authn",...r.provider}),i}function vM(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return[...e,...t]}function wM(e){if(e==null)return null;if(!e.f_vsn)return{...rl,type:e.type,uid:e.id,endpoint:e.authn,id:e.pid,provider:{address:Bn(e.addr),name:e.name,icon:e.icon}};switch(e.f_vsn){case"1.0.0":return e;default:return null}}function EM(e){if(e==null)return null;if(!e.f_vsn)return{...rl,type:e.type,uid:e.id,endpoint:e.endpoint,method:e.method,identity:{...I3,address:Bn(e.addr),keyId:e.keyId},params:e.params,data:e.data};switch(e.f_vsn){case"1.0.0":return e;default:return null}}function SM(e){if(e==null)return null;if(!e.f_vsn)return{...rl,type:e.type,uid:e.id,endpoint:e.endpoint,method:e.method,identity:{...I3,address:Bn(e.addr),keyId:e.keyId},params:e.params,data:e.data};switch(e.f_vsn){case"1.0.0":return e;default:return null}}function L3(e){if(e==null)return null;if(!e.f_vsn)return{old:e,...rl,type:"frame",endpoint:e.endpoint,params:e.params||{},data:e.data||{}};switch(e.f_vsn){case"1.0.0":return e;default:return null}}function z3(e){if(e==null)return null;if(!e.f_vsn)return{...rl,type:"back-channel-rpc",endpoint:e.endpoint,method:e.method,params:e.params||{},data:e.data||{}};switch(e.f_vsn){case"1.0.0":return e;default:return null}}function _M(e){if(e==null)return null;switch(e.f_vsn){case"1.0.0":return e;default:return null}}function xM(e){if(e==null)return null;if(!e.f_vsn)throw new Error("Invalid user-signature service");switch(e.f_vsn){case"1.0.0":return e;default:return null}}function q3(e){if(e==null)return null;if(e.method==null&&(e={...e,type:"local-view",method:"VIEW/IFRAME"}),!e.f_vsn)return{...rl,type:e.type||"local-view",method:e.method,endpoint:e.endpoint,data:e.data||{},params:e.params||{}};switch(e.f_vsn){case"1.0.0":return e;default:return null}}function AM(e){if(e==null)return null;if(!e.f_vsn)throw new Error("FCL Normalizer Error: Invalid account-proof service");switch(e.f_vsn){case"1.0.0":return e;default:return null}}function RM(e){if(e==null)return null;if(!e.f_vsn)throw new Error("Invalid authn-refresh service");switch(e.f_vsn){case"1.0.0":return e;default:return null}}function OM(e,t){return e.map(n=>DM(n,t)).filter(Boolean)}const TM={"back-channel-rpc":z3,"pre-authz":SM,authz:EM,authn:wM,frame:L3,"open-id":_M,"user-signature":xM,"local-view":q3,"account-proof":AM,"authn-refresh":RM};function DM(e,t){try{var n=TM[e.type](e,t);return n}catch(r){return console.error(`Unrecognized FCL Service Type [${e.type}]`,e,r),e}}function of(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return e.reduce((n,r)=>r.type===t&&(!n||N5(r.f_vsn,n.f_vsn)>0)?r:n,null)}function CM(e){return Cv([e.provider?.address||e.provider?.name||"UNSPECIFIED",e.id]).toString("hex")}function IM(e){return e.addr=e.addr?Bn(e.addr):null,e.paddr=e.paddr?Bn(e.paddr):null,e}async function G_(e){e=IM(e);var t=OM(vM(e.services||[],await bM(e.hks,e.code)));const n=of(t,"authn");return{...K5,addr:Bn(e.addr),cid:CM(n),loggedIn:!0,services:t,expiresAt:e.expires}}const NM="WC/RPC",$M=typeof window>"u";function BM(){if($M)return;Af().getStrategies().includes(NM)||Fe({title:"FCL WalletConnect Service Plugin",level:ht.error,message:"All dApps are expected to register for a WalletConnect projectId & add this to their FCL configuration.  If you do not do so, users will be unable to use certain wallets to interact with your dApp.  See https://developers.flow.com/tools/clients/fcl-js/configure-fcl for more information."})}const PM=globalThis.AbortController||require("abort-controller"),Ip=async e=>{let{service:t,body:n,config:r,abortSignal:i,customRpc:a,user:c,opts:u}=e;return Af().getStrategy(t.method)({service:t,body:n,config:r,abortSignal:i,customRpc:a,opts:u,user:c})};async function oa(e){let{service:t,msg:n={},config:r={},opts:i={},platform:a,abortSignal:c=new PM().signal,execStrategy:u,user:f}=e;BM(),n.data=t.data;const d={services:await z_(/^service\./),app:await z_(/^app\.detail\./),client:{...r.client,platform:a,fclVersion:Fv,fclLibrary:"https://github.com/onflow/fcl-js",hostname:window?.location?.hostname??null,network:await ya(i)}};try{const p=await(u||Ip)({service:t,body:n,config:d,opts:i,user:f,abortSignal:c});return p.status==="REDIRECT"?(he(t.type===p.data.type,"Cannot shift recursive service type in execService"),await oa({service:p.data,msg:n,config:d,opts:i,abortSignal:c,platform:a,user:f})):p}catch(p){throw Fe({title:`Error on execService ${t?.type}`,message:p,level:ht.error}),p}}function gb(e){if(e==null)return null;if(!e.f_vsn)return{...Y5,addr:qt(e.addr||e.address),signature:e.signature||e.sig,keyId:e.keyId};switch(e.f_vsn){case"1.0.0":return e;default:return null}}const UM=e=>typeof e=="function",si="CURRENT_USER",Vy="CURRENT_USER/UPDATED",H3="SNAPSHOT",mb="SET_CURRENT_USER",F3="DEL_CURRENT_USER",yb=`{
  "f_type": "User",
  "f_vsn": "1.0.0",
  "addr":null,
  "cid":null,
  "loggedIn":null,
  "expiresAt":null,
  "services":[]
}`,kM=async e=>{const t=JSON.parse(yb),n=await e.get(si);return n!=null&&t.f_vsn!==n.f_vsn?(e.removeItem(si),t):n||t},MM=e=>{const t=async()=>e.getStorageProvider?await e.getStorageProvider():await Re.first(["fcl.storage","fcl.storage.default"]);return{[nf]:async n=>{typeof window>"u"&&console.warn(`
        %cFCL Warning
        ============================
        "currentUser" is only available in the browser.
        For more info, please see the docs: https://docs.onflow.org/fcl/
        ============================
        `,"font-weight:bold;font-family:monospace;"),n.merge(JSON.parse(yb));const r=await t();if(r.can){const i=await kM(r);jM(i)&&n.merge(i)}},[nl]:(n,r)=>{n.subscribe(r.from),n.send(r.from,Vy,{...n.all()})},[ra]:(n,r)=>{n.unsubscribe(r.from)},[H3]:async(n,r)=>{r.reply({...n.all()})},[mb]:async(n,r,i)=>{n.merge(i);const a=await t();a.can&&a.put(si,n.all()),n.broadcast(Vy,{...n.all()})},[F3]:async(n,r)=>{n.merge(JSON.parse(yb));const i=await t();i.can&&i.put(si,n.all()),n.broadcast(Vy,{...n.all()})}}},il=e=>ma(MM(e),si);function jM(e){return e.expiresAt==null||e.expiresAt===0||e.expiresAt>Date.now()}async function LM(){let e=await Re.get("fcl.accountProof.resolver");if(e==null)return;if(!UM(e)){Fe({title:"Account Proof Data Resolver must be a function",message:`Check fcl.accountProof.resolver configuration.
                Expected: fcl.accountProof.resolver: async () => { ... }
                Received: fcl.accountProof.resolver: ${typeof e}
                `,level:ht.warn});return}const t={...await e()},n=window?.location?.origin;return t.appIdentifier?n&&(Fe.deprecate({pkg:"FCL",subject:"appIdentifier in fcl.accountProof.resolver",message:"Manually set app identifiers in the account proof resolver function are now deprecated.  These are now automatically set to the application origin URL by FCL",transition:"https://github.com/onflow/flow-js-sdk/blob/master/packages/fcl/TRANSITIONS.md#0002-deprecate-appIdentifier-field-in-account-proof-resolver"}),he(typeof t.appIdentifier=="string","appIdentifier must be a string")):(he(n,"The appIdentifier (origin) could not be inferred from the window.location.origin.  Please set the appIdentifier manually in the fcl.accountProof.resolver function."),t.appIdentifier=n),he(/^[0-9a-f]+$/i.test(t.nonce),"Nonce must be a hex string"),t}const zM=async e=>{let{discoveryAuthnInclude:t,discoveryAuthnExclude:n,discoveryFeaturesSuggested:r}=e;return{client:{discoveryAuthnInclude:t,discoveryAuthnExclude:n,discoveryFeaturesSuggested:r,clientServices:await M3(),supportedStrategies:Af().getStrategies()}}},Np=e=>async function(){let{service:t,redir:n=!1,forceReauth:r=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(t&&!t?.provider?.is_installed&&t?.provider?.requires_install){window.location.href=t?.provider?.install_link;return}return new Promise(async(i,a)=>{il(e);const c={redir:n},u=await Mh(e)(),f=of(u.services,"authn-refresh");let d;if(u.loggedIn&&!r)if(f)try{const p=await oa({service:f,msg:d,opts:c,platform:e.platform,user:u});Zt(si,mb,await G_(p))}catch(p){Fe({title:`${p.name} Could not refresh wallet authentication.`,message:p.message,level:ht.error})}finally{return i(await Mh(e)())}else return i(u);try{d=await LM()}catch(p){return Fe({title:`${p.name} On Authentication: Could not resolve account proof data.`,message:p.message,level:ht.error}),a(p)}try{const p=await hM(t),g=await oa({service:p,msg:d,config:await zM(p),opts:c,platform:e.platform,execStrategy:e.discovery?.execStrategy,user:u});Zt(si,mb,await G_(g))}catch(p){Fe({title:`${p} On Authentication`,message:p,level:ht.error})}finally{i(await Mh(e)())}})};function qM(e){return function(){il(e),Zt(si,F3)}}const HM=e=>({f_type:"PreAuthzResponse",f_vsn:"1.0.0",proposer:(e||{}).proposer,payer:(e||{}).payer||[],authorization:(e||{}).authorization||[]}),FM=e=>(t,n)=>{let{user:r}=n;const i=HM(t),a=[];i.proposer!=null&&a.push(["PROPOSER",i.proposer]);for(let u of i.payer||[])a.push(["PAYER",u]);for(let u of i.authorization||[])a.push(["AUTHORIZER",u]);var c=a.map(u=>{let[f,d]=u;return{tempId:[d.identity.address,d.identity.keyId].join("|"),addr:d.identity.address,keyId:d.identity.keyId,signingFunction(p){return oa({service:d,msg:p,platform:e.platform,user:r})},role:{proposer:f==="PROPOSER",payer:f==="PAYER",authorizer:f==="AUTHORIZER"}}});return c},VM=e=>async t=>(il(e),{...t,tempId:"CURRENT_USER",async resolve(n,r){const i=await Np(e)({redir:!0}),a=of(i.services,"authz"),c=of(i.services,"pre-authz");if(c)return FM(e)(await oa({service:c,msg:r,platform:e.platform,user:i}),{user:i});if(a)return{...n,tempId:"CURRENT_USER",resolve:null,addr:qt(a.identity.address),keyId:a.identity.keyId,sequenceNum:null,signature:null,async signingFunction(u){return gb(await oa({service:a,msg:u,opts:{includeOlderJsonRpcCall:!0},platform:e.platform,user:i}))}};throw new Error("No Authz or PreAuthz Service configured for CURRENT_USER")}});function GM(e){return function(n){il(e);const r="@EXIT",i=ma(async a=>{for(a.send(si,nl);;){const c=await a.receive();if(c.tag===r){a.send(si,ra);return}n(c.data)}});return()=>Zt(i,r)}}function Mh(e){return function(){return il(e),Zt(si,H3,null,{expectReply:!0,timeout:0})}}const KM=e=>async()=>{const{addr:t}=await Np(e)();return R3(Bn(t),VT)},WM=e=>(he(/^[0-9a-f]+$/i.test(e),"Message must be a hex string"),{message:e}),YM=e=>async t=>{il(e);const n=await Np(e)({redir:!0}),r=of(n.services,"user-signature");he(r,"Current user must have authorized a signing service.");try{const i=await oa({service:r,msg:WM(t),platform:e.platform,user:n});return Array.isArray(i)?i.map(a=>gb(a)):[gb(i)]}catch(i){return i}},V3=e=>{const t={authenticate:Np(e),unauthenticate:qM(e),authorization:VM(e),signUserMessage:YM(e),subscribe:GM(e),snapshot:Mh(e),resolveArgument:KM(e)};return Object.assign(()=>({...t}),{...t})},XM=e=>async function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};var r;try{await P5(n),n=await C3(n);const i=typeof e=="function"?e:V3(e),a=await Re().get("fcl.authz",i().authorization);return r=Ap([O5(n.cadence),A3(T3(n.args||[])),n.limit&&B5(n.limit)&&x3(n.limit),S5(n.proposer||n.authz||a),_5(n.payer||n.authz||a),v5(n.authorizations||[n.authz||a])]).then(Rp),r}catch(i){throw i}};function Rf(e){const t=new Vv(e.endpoint);if(window?.location?.origin&&t.searchParams.append("l6n",window.location.origin),e.params!=null)for(let[n,r]of Object.entries(e.params||{}))t.searchParams.append(n,r);return t}function G3(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=t.method||"POST",r=n==="GET"?void 0:JSON.stringify(t.data||e.data||{});return fetch(Rf(e),{method:n,headers:{...e.headers||{},...t.headers||{},"Content-Type":"application/json"},body:r}).then(i=>i.json())}function Ii(e){if(e==null)return null;if(!e.f_vsn)return{...W5,status:e.status??"APPROVED",reason:e.reason??null,data:e.compositeSignature||e.data||{...e},updates:z3(e.authorizationUpdates),local:L3((e.local||[])[0])};switch(e.f_vsn){case"1.0.0":return e;default:return null}}const K_={"HTTP/GET":"GET","HTTP/POST":"POST"},ZM=e=>(he(K_[e.method],"Invalid Service Method for type back-channel-rpc",{service:e}),K_[e.method]);async function bb(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:()=>!0;if(he(e,"Missing Polling Service",{service:e}),!t())throw new Error("Externally Halted");let r;try{if(typeof document<"u"&&document.visibilityState==="hidden")return await new Promise(i=>setTimeout(i,500)),bb(e,t);r=await G3(e,{method:ZM(e)}).then(Ii)}catch(i){throw i}switch(r.status){case"APPROVED":return r.data;case"DECLINED":throw new Error(`Declined: ${r.reason||"No reason supplied."}`);default:return await new Promise(i=>setTimeout(i,500)),bb(r.updates,t)}}const W_=e=>async t=>{let{service:n,body:r,config:i,opts:a}=t;const c=await G3(n,{data:{fclVersion:Fv,service:{params:n.params,data:n.data,type:n.type},config:i,...r}}).then(Ii);if(c.status==="APPROVED")return c.data;if(c.status==="DECLINED")throw new Error(`Declined: ${c.reason||"No reason supplied."}`);if(c.status==="REDIRECT")return c;if(c.status==="PENDING"){var u=!0,f=!0;const[d,p]=await e(q3(c.local),{serviceEndpoint:Rf,onClose:()=>f=!1}),g=()=>{try{p(),f=!1}catch(b){console.error("Frame Close Error",b)}},y=()=>{const b=u;return u=f,b};return bb(c.updates,y).then(b=>(g(),b)).catch(b=>{throw console.error(b),g(),b})}else throw console.error("Auto Decline: Invalid Response",{service:n,resp:c}),new Error("Auto Decline: Invalid Response")},sh="FCL:VIEW:CLOSE",Gy="FCL:VIEW:READY",Ky="FCL:VIEW:RESPONSE",QM="FCL:VIEW:CUSTOM_RPC",It=e=>typeof e=="string"&&e.toLowerCase(),JM=new Set(["monetizationstart","monetizationpending","monetizationprogress","monetizationstop"]),ko=(e,t)=>console.warn("DEPRECATION NOTICE",`Received ${e}, please use ${t} for this and future versions of FCL`),$p=e=>{let{close:t,send:n,onReady:r,onResponse:i,onMessage:a,onCustomRpc:c,getSource:u}=e,f;return d=>{try{f=u?.()||f}catch{f=null}try{if(typeof d.data!="object"||JM.has(d.data.type)||f!=null&&d.source!==f)return;It(d.data.type)===It(sh)&&t(),It(d.data.type)===It(Gy)&&(r(d,{send:n,close:t}),f||=d.source),It(d.data.type)===It(Ky)&&i(d,{send:n,close:t}),It(d.data.type)===It(QM)&&c(d.data.payload,{send:n,close:t}),a(d,{send:n,close:t}),It(d.data.type)===It("FCL:FRAME:READY")&&(ko(d.data.type,Gy),r(d,{send:n,close:t}),f||=d.source),It(d.data.type)===It("FCL:FRAME:RESPONSE")&&(ko(d.data.type,Ky),i(d,{send:n,close:t})),It(d.data.type)===It("FCL:FRAME:CLOSE")&&(ko(d.data.type,sh),t()),It(d.data.type)===It("FCL::CHALLENGE::RESPONSE")&&(ko(d.data.type,Ky),i(d,{send:n,close:t})),It(d.data.type)===It("FCL::AUTHZ_READY")&&(ko(d.data.type,Gy),r(d,{send:n,close:t}),f||=d.source),It(d.data.type)===It("FCL::CHALLENGE::CANCEL")&&(ko(d.data.type,sh),t()),It(d.data.type)===It("FCL::CANCEL")&&(ko(d.data.type,sh),t())}catch(p){console.error("Frame Callback Error",p),t()}}};H5();let Y_=function(e){return e[e.INVALID_REQUEST=-32600]="INVALID_REQUEST",e[e.METHOD_NOT_FOUND=-32601]="METHOD_NOT_FOUND",e[e.INVALID_PARAMS=-32602]="INVALID_PARAMS",e[e.INTERNAL_ERROR=-32603]="INTERNAL_ERROR",e[e.PARSE_ERROR=-32700]="PARSE_ERROR",e}({});class X_ extends Error{constructor(t,n,r){super(n),this.code=t,this.message=n,this.data=r}}var vb=function(e){return e.HELLO="rpc_hello",e}(vb||{});class ej{id=0;setSend=()=>{};_send=new Promise(t=>{this.setSend=t});peerInfo=new Promise((t,n)=>{this.resolvePeerInfo=t,this.rejectPeerInfo=n});enabledNotifications=[];requestHandlers={};subscriptions={};messageListeners=[];constructor(t){let{notifications:n}=t;this.enabledNotifications=n||[],this.on(vb.HELLO,r=>(this.resolvePeerInfo(r),this.ownInfo()))}connect(t){let{send:n}=t;this.setSend(n),this.requestWithoutConnection(vb.HELLO,this.ownInfo()).then(r=>{this.resolvePeerInfo(r)}).catch(this.rejectPeerInfo)}ownInfo(){return{requests:Object.keys(this.requestHandlers),notifications:this.enabledNotifications}}async send(t){return(await this._send)(t)}receive(t){t?.jsonrpc==="2.0"&&("method"in t&&("id"in t?this.handleRequest(t):this.handleNotification(t)),this.messageListeners.forEach(n=>n(t)))}async handleRequest(t){const n=this.requestHandlers[t.method];if(n)try{const r=await n(t.params);this.send({jsonrpc:"2.0",id:t.id,result:r})}catch(r){r instanceof X_?this.send({jsonrpc:"2.0",id:t.id,error:{code:r.code,message:r.message,data:r.data}}):this.send({jsonrpc:"2.0",id:t.id,error:{code:Y_.INTERNAL_ERROR,message:r?.message}})}else this.send({jsonrpc:"2.0",id:t.id,error:{code:Y_.METHOD_NOT_FOUND,message:`Method not found: ${t.method}`}})}handleNotification(t){this.subscriptions[t.method]&&this.subscriptions[t.method].forEach(n=>n(t.params))}onMessage(t){return this.messageListeners.push(t),()=>{this.messageListeners=this.messageListeners.filter(n=>n!==t)}}async notify(t,n){await this.onceConnected(),this.send({jsonrpc:"2.0",method:t,params:n})}async request(t,n){return await this.onceConnected(),this.requestWithoutConnection(t,n)}async requestWithoutConnection(t,n){const r=this.id++;let i=()=>{};const a=new Promise((c,u)=>{i=this.onMessage(f=>{if(f.id===r&&("result"in f||"error"in f)){if(f.error){const d=new X_(f.error.code,f.error.message,f.error.data);u(d)}c(f.result)}})}).finally(i);return this.send({jsonrpc:"2.0",method:t,params:n,id:r}),a}on(t,n){this.requestHandlers[t]=n}subscribe(t,n){this.subscriptions[t]=this.subscriptions[t]||new Set,this.subscriptions[t].add(n)}unsubscribe(t,n){this.subscriptions[t]?.delete(n)}async onceConnected(){return this.peerInfo.then(()=>{})}async getAvailableRequests(){return this.peerInfo.then(t=>t.requests)}async getAvailableNotifications(){return this.peerInfo.then(t=>t.notifications)}}const tj="modulepreload",nj=function(e){return"/"+e},Z_={},K3=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){let f=function(d){return Promise.all(d.map(p=>Promise.resolve(p).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),u=c?.nonce||c?.getAttribute("nonce");i=f(n.map(d=>{if(d=nj(d),d in Z_)return;Z_[d]=!0;const p=d.endsWith(".css"),g=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${g}`))return;const y=document.createElement("link");if(y.rel=p?"stylesheet":tj,p||(y.as="script"),y.crossOrigin="",y.href=d,u&&y.setAttribute("nonce",u),document.head.appendChild(y),p)return new Promise((b,v)=>{y.addEventListener("load",b),y.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${d}`)))})}))}function a(c){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=c,window.dispatchEvent(u),!u.defaultPrevented)throw c}return i.then(c=>{for(const u of c||[])u.status==="rejected"&&a(u.reason);return t().catch(a)})};var Q_=function(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,a;r<i;r++)(a||!(r in t))&&(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))},rj=function(){function e(t,n,r){this.name=t,this.version=n,this.os=r,this.type="browser"}return e}(),ij=function(){function e(t){this.version=t,this.type="node",this.name="node",this.os=process.platform}return e}(),sj=function(){function e(t,n,r,i){this.name=t,this.version=n,this.os=r,this.bot=i,this.type="bot-device"}return e}(),oj=function(){function e(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return e}(),aj=function(){function e(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return e}(),cj=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,lj=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,J_=3,uj=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",cj]],ex=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function fj(e){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new aj:typeof navigator<"u"?hj(navigator.userAgent):gj()}function dj(e){return e!==""&&uj.reduce(function(t,n){var r=n[0],i=n[1];if(t)return t;var a=i.exec(e);return!!a&&[r,a]},!1)}function hj(e){var t=dj(e);if(!t)return null;var n=t[0],r=t[1];if(n==="searchbot")return new oj;var i=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);i?i.length<J_&&(i=Q_(Q_([],i,!0),mj(J_-i.length),!0)):i=[];var a=i.join("."),c=pj(e),u=lj.exec(e);return u&&u[1]?new sj(n,a,c,u[1]):new rj(n,a,c)}function pj(e){for(var t=0,n=ex.length;t<n;t++){var r=ex[t],i=r[0],a=r[1],c=a.exec(e);if(c)return i}return null}function gj(){var e=typeof process<"u"&&process.version;return e?new ij(process.version.slice(1)):null}function mj(e){for(var t=[],n=0;n<e;n++)t.push("0");return t}var Wy={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var wb=function(e,t){return wb=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},wb(e,t)};function yj(e,t){wb(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var Eb=function(){return Eb=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},Eb.apply(this,arguments)};function bj(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function vj(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(e,t,n,r);else for(var u=e.length-1;u>=0;u--)(c=e[u])&&(a=(i<3?c(a):i>3?c(t,n,a):c(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a}function wj(e,t){return function(n,r){t(n,r,e)}}function Ej(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function Sj(e,t,n,r){function i(a){return a instanceof n?a:new n(function(c){c(a)})}return new(n||(n=Promise))(function(a,c){function u(p){try{d(r.next(p))}catch(g){c(g)}}function f(p){try{d(r.throw(p))}catch(g){c(g)}}function d(p){p.done?a(p.value):i(p.value).then(u,f)}d((r=r.apply(e,t||[])).next())})}function _j(e,t){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,c;return c={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function u(d){return function(p){return f([d,p])}}function f(d){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(a=d[0]&2?i.return:d[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,d[1])).done)return a;switch(i=0,a&&(d=[d[0]&2,a.value]),d[0]){case 0:case 1:a=d;break;case 4:return n.label++,{value:d[1],done:!1};case 5:n.label++,i=d[1],d=[0];continue;case 7:d=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(d[0]===6||d[0]===2)){n=0;continue}if(d[0]===3&&(!a||d[1]>a[0]&&d[1]<a[3])){n.label=d[1];break}if(d[0]===6&&n.label<a[1]){n.label=a[1],a=d;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(d);break}a[2]&&n.ops.pop(),n.trys.pop();continue}d=t.call(e,n)}catch(p){d=[6,p],i=0}finally{r=a=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}function xj(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}function Aj(e,t){for(var n in e)n!=="default"&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function Sb(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function W3(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,a=[],c;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(u){c={error:u}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(c)throw c.error}}return a}function Rj(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(W3(arguments[t]));return e}function Oj(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),i=0,t=0;t<n;t++)for(var a=arguments[t],c=0,u=a.length;c<u;c++,i++)r[i]=a[c];return r}function af(e){return this instanceof af?(this.v=e,this):new af(e)}function Tj(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,a=[];return i={},c("next"),c("throw"),c("return"),i[Symbol.asyncIterator]=function(){return this},i;function c(y){r[y]&&(i[y]=function(b){return new Promise(function(v,E){a.push([y,b,v,E])>1||u(y,b)})})}function u(y,b){try{f(r[y](b))}catch(v){g(a[0][3],v)}}function f(y){y.value instanceof af?Promise.resolve(y.value.v).then(d,p):g(a[0][2],y)}function d(y){u("next",y)}function p(y){u("throw",y)}function g(y,b){y(b),a.shift(),a.length&&u(a[0][0],a[0][1])}}function Dj(e){var t,n;return t={},r("next"),r("throw",function(i){throw i}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(i,a){t[i]=e[i]?function(c){return(n=!n)?{value:af(e[i](c)),done:i==="return"}:a?a(c):c}:a}}function Cj(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof Sb=="function"?Sb(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(a){n[a]=e[a]&&function(c){return new Promise(function(u,f){c=e[a](c),i(u,f,c.done,c.value)})}}function i(a,c,u,f){Promise.resolve(f).then(function(d){a({value:d,done:u})},c)}}function Ij(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function Nj(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function $j(e){return e&&e.__esModule?e:{default:e}}function Bj(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function Pj(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n}const Uj=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return Eb},__asyncDelegator:Dj,__asyncGenerator:Tj,__asyncValues:Cj,__await:af,__awaiter:Sj,__classPrivateFieldGet:Bj,__classPrivateFieldSet:Pj,__createBinding:xj,__decorate:vj,__exportStar:Aj,__extends:yj,__generator:_j,__importDefault:$j,__importStar:Nj,__makeTemplateObject:Ij,__metadata:Ej,__param:wj,__read:W3,__rest:bj,__spread:Rj,__spreadArrays:Oj,__values:Sb},Symbol.toStringTag,{value:"Module"})),Of=R4(Uj);var Yy={},mu={},tx;function kj(){if(tx)return mu;tx=1,Object.defineProperty(mu,"__esModule",{value:!0}),mu.delay=void 0;function e(t){return new Promise(n=>{setTimeout(()=>{n(!0)},t)})}return mu.delay=e,mu}var Mo={},Xy={},jo={},nx;function Mj(){return nx||(nx=1,Object.defineProperty(jo,"__esModule",{value:!0}),jo.ONE_THOUSAND=jo.ONE_HUNDRED=void 0,jo.ONE_HUNDRED=100,jo.ONE_THOUSAND=1e3),jo}var Zy={},rx;function jj(){return rx||(rx=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ONE_YEAR=e.FOUR_WEEKS=e.THREE_WEEKS=e.TWO_WEEKS=e.ONE_WEEK=e.THIRTY_DAYS=e.SEVEN_DAYS=e.FIVE_DAYS=e.THREE_DAYS=e.ONE_DAY=e.TWENTY_FOUR_HOURS=e.TWELVE_HOURS=e.SIX_HOURS=e.THREE_HOURS=e.ONE_HOUR=e.SIXTY_MINUTES=e.THIRTY_MINUTES=e.TEN_MINUTES=e.FIVE_MINUTES=e.ONE_MINUTE=e.SIXTY_SECONDS=e.THIRTY_SECONDS=e.TEN_SECONDS=e.FIVE_SECONDS=e.ONE_SECOND=void 0,e.ONE_SECOND=1,e.FIVE_SECONDS=5,e.TEN_SECONDS=10,e.THIRTY_SECONDS=30,e.SIXTY_SECONDS=60,e.ONE_MINUTE=e.SIXTY_SECONDS,e.FIVE_MINUTES=e.ONE_MINUTE*5,e.TEN_MINUTES=e.ONE_MINUTE*10,e.THIRTY_MINUTES=e.ONE_MINUTE*30,e.SIXTY_MINUTES=e.ONE_MINUTE*60,e.ONE_HOUR=e.SIXTY_MINUTES,e.THREE_HOURS=e.ONE_HOUR*3,e.SIX_HOURS=e.ONE_HOUR*6,e.TWELVE_HOURS=e.ONE_HOUR*12,e.TWENTY_FOUR_HOURS=e.ONE_HOUR*24,e.ONE_DAY=e.TWENTY_FOUR_HOURS,e.THREE_DAYS=e.ONE_DAY*3,e.FIVE_DAYS=e.ONE_DAY*5,e.SEVEN_DAYS=e.ONE_DAY*7,e.THIRTY_DAYS=e.ONE_DAY*30,e.ONE_WEEK=e.SEVEN_DAYS,e.TWO_WEEKS=e.ONE_WEEK*2,e.THREE_WEEKS=e.ONE_WEEK*3,e.FOUR_WEEKS=e.ONE_WEEK*4,e.ONE_YEAR=e.ONE_DAY*365}(Zy)),Zy}var ix;function Y3(){return ix||(ix=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});const t=Of;t.__exportStar(Mj(),e),t.__exportStar(jj(),e)}(Xy)),Xy}var sx;function Lj(){if(sx)return Mo;sx=1,Object.defineProperty(Mo,"__esModule",{value:!0}),Mo.fromMiliseconds=Mo.toMiliseconds=void 0;const e=Y3();function t(r){return r*e.ONE_THOUSAND}Mo.toMiliseconds=t;function n(r){return Math.floor(r/e.ONE_THOUSAND)}return Mo.fromMiliseconds=n,Mo}var ox;function zj(){return ox||(ox=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});const t=Of;t.__exportStar(kj(),e),t.__exportStar(Lj(),e)}(Yy)),Yy}var gc={},ax;function qj(){if(ax)return gc;ax=1,Object.defineProperty(gc,"__esModule",{value:!0}),gc.Watch=void 0;class e{constructor(){this.timestamps=new Map}start(n){if(this.timestamps.has(n))throw new Error(`Watch already started for label: ${n}`);this.timestamps.set(n,{started:Date.now()})}stop(n){const r=this.get(n);if(typeof r.elapsed<"u")throw new Error(`Watch already stopped for label: ${n}`);const i=Date.now()-r.started;this.timestamps.set(n,{started:r.started,elapsed:i})}get(n){const r=this.timestamps.get(n);if(typeof r>"u")throw new Error(`No timestamp found for label: ${n}`);return r}elapsed(n){const r=this.get(n);return r.elapsed||Date.now()-r.started}}return gc.Watch=e,gc.default=e,gc}var Qy={},yu={},cx;function Hj(){if(cx)return yu;cx=1,Object.defineProperty(yu,"__esModule",{value:!0}),yu.IWatch=void 0;class e{}return yu.IWatch=e,yu}var lx;function Fj(){return lx||(lx=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Of.__exportStar(Hj(),e)}(Qy)),Qy}var ux;function Vj(){return ux||(ux=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});const t=Of;t.__exportStar(zj(),e),t.__exportStar(qj(),e),t.__exportStar(Fj(),e),t.__exportStar(Y3(),e)}(Wy)),Wy}var Ee=Vj(),ut={},fx;function X3(){if(fx)return ut;fx=1,Object.defineProperty(ut,"__esModule",{value:!0}),ut.getLocalStorage=ut.getLocalStorageOrThrow=ut.getCrypto=ut.getCryptoOrThrow=ut.getLocation=ut.getLocationOrThrow=ut.getNavigator=ut.getNavigatorOrThrow=ut.getDocument=ut.getDocumentOrThrow=ut.getFromWindowOrThrow=ut.getFromWindow=void 0;function e(y){let b;return typeof window<"u"&&typeof window[y]<"u"&&(b=window[y]),b}ut.getFromWindow=e;function t(y){const b=e(y);if(!b)throw new Error(`${y} is not defined in Window`);return b}ut.getFromWindowOrThrow=t;function n(){return t("document")}ut.getDocumentOrThrow=n;function r(){return e("document")}ut.getDocument=r;function i(){return t("navigator")}ut.getNavigatorOrThrow=i;function a(){return e("navigator")}ut.getNavigator=a;function c(){return t("location")}ut.getLocationOrThrow=c;function u(){return e("location")}ut.getLocation=u;function f(){return t("crypto")}ut.getCryptoOrThrow=f;function d(){return e("crypto")}ut.getCrypto=d;function p(){return t("localStorage")}ut.getLocalStorageOrThrow=p;function g(){return e("localStorage")}return ut.getLocalStorage=g,ut}var gs=X3(),bu={},dx;function Gj(){if(dx)return bu;dx=1,Object.defineProperty(bu,"__esModule",{value:!0}),bu.getWindowMetadata=void 0;const e=X3();function t(){let n,r;try{n=e.getDocumentOrThrow(),r=e.getLocationOrThrow()}catch{return null}function i(){const b=n.getElementsByTagName("link"),v=[];for(let E=0;E<b.length;E++){const S=b[E],_=S.getAttribute("rel");if(_&&_.toLowerCase().indexOf("icon")>-1){const T=S.getAttribute("href");if(T)if(T.toLowerCase().indexOf("https:")===-1&&T.toLowerCase().indexOf("http:")===-1&&T.indexOf("//")!==0){let O=r.protocol+"//"+r.host;if(T.indexOf("/")===0)O+=T;else{const $=r.pathname.split("/");$.pop();const I=$.join("/");O+=I+"/"+T}v.push(O)}else if(T.indexOf("//")===0){const O=r.protocol+T;v.push(O)}else v.push(T)}}return v}function a(...b){const v=n.getElementsByTagName("meta");for(let E=0;E<v.length;E++){const S=v[E],_=["itemprop","property","name"].map(T=>S.getAttribute(T)).filter(T=>T?b.includes(T):!1);if(_.length&&_){const T=S.getAttribute("content");if(T)return T}}return""}function c(){let b=a("name","og:site_name","og:title","twitter:title");return b||(b=n.title),b}function u(){return a("description","og:description","twitter:description","keywords")}const f=c(),d=u(),p=r.origin,g=i();return{description:d,url:p,icons:g,name:f}}return bu.getWindowMetadata=t,bu}var Kj=Gj();function cf(e,{strict:t=!0}={}){return!e||typeof e!="string"?!1:t?/^0x[0-9a-fA-F]*$/.test(e):e.startsWith("0x")}function _b(e){return cf(e,{strict:!1})?Math.ceil((e.length-2)/2):e.length}const Z3="2.31.0";let Jy={getDocsUrl:({docsBaseUrl:e,docsPath:t="",docsSlug:n})=>t?`${e??"https://viem.sh"}${t}${n?`#${n}`:""}`:void 0,version:`viem@${Z3}`};class aa extends Error{constructor(t,n={}){const r=n.cause instanceof aa?n.cause.details:n.cause?.message?n.cause.message:n.details,i=n.cause instanceof aa&&n.cause.docsPath||n.docsPath,a=Jy.getDocsUrl?.({...n,docsPath:i}),c=[t||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...a?[`Docs: ${a}`]:[],...r?[`Details: ${r}`]:[],...Jy.version?[`Version: ${Jy.version}`]:[]].join(`
`);super(c,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=i,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=t,this.version=Z3}walk(t){return Q3(this,t)}}function Q3(e,t){return t?.(e)?e:e&&typeof e=="object"&&"cause"in e&&e.cause!==void 0?Q3(e.cause,t):t?null:e}class J3 extends aa{constructor({size:t,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${t}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}}function sl(e,{dir:t,size:n=32}={}){return typeof e=="string"?Wj(e,{dir:t,size:n}):Yj(e,{dir:t,size:n})}function Wj(e,{dir:t,size:n=32}={}){if(n===null)return e;const r=e.replace("0x","");if(r.length>n*2)throw new J3({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[t==="right"?"padEnd":"padStart"](n*2,"0")}`}function Yj(e,{dir:t,size:n=32}={}){if(n===null)return e;if(e.length>n)throw new J3({size:e.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let i=0;i<n;i++){const a=t==="right";r[a?i:n-i-1]=e[a?i:e.length-i-1]}return r}class Xj extends aa{constructor({max:t,min:n,signed:r,size:i,value:a}){super(`Number "${a}" is not in safe ${i?`${i*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${t?`(${n} to ${t})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}}class Zj extends aa{constructor({givenSize:t,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${t} bytes.`,{name:"SizeOverflowError"})}}function ol(e,{size:t}){if(_b(e)>t)throw new Zj({givenSize:_b(e),maxSize:t})}function xb(e,t={}){const{signed:n}=t;t.size&&ol(e,{size:t.size});const r=BigInt(e);if(!n)return r;const i=(e.length-2)/2,a=(1n<<BigInt(i)*8n-1n)-1n;return r<=a?r:r-BigInt(`0x${"f".padStart(i*2,"f")}`)-1n}function Qj(e,t={}){return Number(xb(e,t))}const Jj=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Ab(e,t={}){return typeof e=="number"||typeof e=="bigint"?tD(e,t):typeof e=="string"?nL(e,t):typeof e=="boolean"?eL(e,t):eD(e,t)}function eL(e,t={}){const n=`0x${Number(e)}`;return typeof t.size=="number"?(ol(n,{size:t.size}),sl(n,{size:t.size})):n}function eD(e,t={}){let n="";for(let i=0;i<e.length;i++)n+=Jj[e[i]];const r=`0x${n}`;return typeof t.size=="number"?(ol(r,{size:t.size}),sl(r,{dir:"right",size:t.size})):r}function tD(e,t={}){const{signed:n,size:r}=t,i=BigInt(e);let a;r?n?a=(1n<<BigInt(r)*8n-1n)-1n:a=2n**(BigInt(r)*8n)-1n:typeof e=="number"&&(a=BigInt(Number.MAX_SAFE_INTEGER));const c=typeof a=="bigint"&&n?-a-1n:0;if(a&&i>a||i<c){const f=typeof e=="bigint"?"n":"";throw new Xj({max:a?`${a}${f}`:void 0,min:`${c}${f}`,signed:n,size:r,value:`${e}${f}`})}const u=`0x${(n&&i<0?(1n<<BigInt(r*8))+BigInt(i):i).toString(16)}`;return r?sl(u,{size:r}):u}const tL=new TextEncoder;function nL(e,t={}){const n=tL.encode(e);return eD(n,t)}const rL=new TextEncoder;function iL(e,t={}){return typeof e=="number"||typeof e=="bigint"?oL(e,t):typeof e=="boolean"?sL(e,t):cf(e)?nD(e,t):rD(e,t)}function sL(e,t={}){const n=new Uint8Array(1);return n[0]=Number(e),typeof t.size=="number"?(ol(n,{size:t.size}),sl(n,{size:t.size})):n}const Zi={zero:48,nine:57,A:65,F:70,a:97,f:102};function hx(e){if(e>=Zi.zero&&e<=Zi.nine)return e-Zi.zero;if(e>=Zi.A&&e<=Zi.F)return e-(Zi.A-10);if(e>=Zi.a&&e<=Zi.f)return e-(Zi.a-10)}function nD(e,t={}){let n=e;t.size&&(ol(n,{size:t.size}),n=sl(n,{dir:"right",size:t.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const i=r.length/2,a=new Uint8Array(i);for(let c=0,u=0;c<i;c++){const f=hx(r.charCodeAt(u++)),d=hx(r.charCodeAt(u++));if(f===void 0||d===void 0)throw new aa(`Invalid byte sequence ("${r[u-2]}${r[u-1]}" in "${r}").`);a[c]=f*16+d}return a}function oL(e,t){const n=tD(e,t);return nD(n)}function rD(e,t={}){const n=rL.encode(e);return typeof t.size=="number"?(ol(n,{size:t.size}),sl(n,{dir:"right",size:t.size})):n}const oh=BigInt(2**32-1),px=BigInt(32);function aL(e,t=!1){return t?{h:Number(e&oh),l:Number(e>>px&oh)}:{h:Number(e>>px&oh)|0,l:Number(e&oh)|0}}function cL(e,t=!1){const n=e.length;let r=new Uint32Array(n),i=new Uint32Array(n);for(let a=0;a<n;a++){const{h:c,l:u}=aL(e[a],t);[r[a],i[a]]=[c,u]}return[r,i]}const lL=(e,t,n)=>e<<n|t>>>32-n,uL=(e,t,n)=>t<<n|e>>>32-n,fL=(e,t,n)=>t<<n-32|e>>>64-n,dL=(e,t,n)=>e<<n-32|t>>>64-n,mc=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function hL(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function ep(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function lf(e,...t){if(!hL(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function Eoe(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");ep(e.outputLen),ep(e.blockLen)}function gx(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function pL(e,t){lf(e);const n=t.outputLen;if(e.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function gL(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))}function iD(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}function Soe(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function _oe(e,t){return e<<32-t|e>>>t}const mL=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function yL(e){return e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255}function bL(e){for(let t=0;t<e.length;t++)e[t]=yL(e[t]);return e}const mx=mL?e=>e:bL;function vL(e){if(typeof e!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(e))}function sD(e){return typeof e=="string"&&(e=vL(e)),lf(e),e}function xoe(...e){let t=0;for(let r=0;r<e.length;r++){const i=e[r];lf(i),t+=i.length}const n=new Uint8Array(t);for(let r=0,i=0;r<e.length;r++){const a=e[r];n.set(a,i),i+=a.length}return n}class wL{}function EL(e){const t=r=>e().update(sD(r)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function Aoe(e=32){if(mc&&typeof mc.getRandomValues=="function")return mc.getRandomValues(new Uint8Array(e));if(mc&&typeof mc.randomBytes=="function")return Uint8Array.from(mc.randomBytes(e));throw new Error("crypto.getRandomValues must be defined")}const SL=BigInt(0),vu=BigInt(1),_L=BigInt(2),xL=BigInt(7),AL=BigInt(256),RL=BigInt(113),oD=[],aD=[],cD=[];for(let e=0,t=vu,n=1,r=0;e<24;e++){[n,r]=[r,(2*n+3*r)%5],oD.push(2*(5*r+n)),aD.push((e+1)*(e+2)/2%64);let i=SL;for(let a=0;a<7;a++)t=(t<<vu^(t>>xL)*RL)%AL,t&_L&&(i^=vu<<(vu<<BigInt(a))-vu);cD.push(i)}const lD=cL(cD,!0),OL=lD[0],TL=lD[1],yx=(e,t,n)=>n>32?fL(e,t,n):lL(e,t,n),bx=(e,t,n)=>n>32?dL(e,t,n):uL(e,t,n);function DL(e,t=24){const n=new Uint32Array(10);for(let r=24-t;r<24;r++){for(let c=0;c<10;c++)n[c]=e[c]^e[c+10]^e[c+20]^e[c+30]^e[c+40];for(let c=0;c<10;c+=2){const u=(c+8)%10,f=(c+2)%10,d=n[f],p=n[f+1],g=yx(d,p,1)^n[u],y=bx(d,p,1)^n[u+1];for(let b=0;b<50;b+=10)e[c+b]^=g,e[c+b+1]^=y}let i=e[2],a=e[3];for(let c=0;c<24;c++){const u=aD[c],f=yx(i,a,u),d=bx(i,a,u),p=oD[c];i=e[p],a=e[p+1],e[p]=f,e[p+1]=d}for(let c=0;c<50;c+=10){for(let u=0;u<10;u++)n[u]=e[c+u];for(let u=0;u<10;u++)e[c+u]^=~n[(u+2)%10]&n[(u+4)%10]}e[0]^=OL[r],e[1]^=TL[r]}iD(n)}class Gv extends wL{constructor(t,n,r,i=!1,a=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=t,this.suffix=n,this.outputLen=r,this.enableXOF=i,this.rounds=a,ep(r),!(0<t&&t<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=gL(this.state)}clone(){return this._cloneInto()}keccak(){mx(this.state32),DL(this.state32,this.rounds),mx(this.state32),this.posOut=0,this.pos=0}update(t){gx(this),t=sD(t),lf(t);const{blockLen:n,state:r}=this,i=t.length;for(let a=0;a<i;){const c=Math.min(n-this.pos,i-a);for(let u=0;u<c;u++)r[this.pos++]^=t[a++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:n,pos:r,blockLen:i}=this;t[r]^=n,(n&128)!==0&&r===i-1&&this.keccak(),t[i-1]^=128,this.keccak()}writeInto(t){gx(this,!1),lf(t),this.finish();const n=this.state,{blockLen:r}=this;for(let i=0,a=t.length;i<a;){this.posOut>=r&&this.keccak();const c=Math.min(r-this.posOut,a-i);t.set(n.subarray(this.posOut,this.posOut+c),i),this.posOut+=c,i+=c}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return ep(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(pL(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,iD(this.state)}_cloneInto(t){const{blockLen:n,suffix:r,outputLen:i,rounds:a,enableXOF:c}=this;return t||(t=new Gv(n,r,i,c,a)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=a,t.suffix=r,t.outputLen=i,t.enableXOF=c,t.destroyed=this.destroyed,t}}const CL=(e,t,n)=>EL(()=>new Gv(t,e,n)),IL=CL(1,136,256/8);function uD(e,t){const n=t||"hex",r=IL(cf(e,{strict:!1})?iL(e):e);return n==="bytes"?r:Ab(r)}class NL extends Map{constructor(t){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=t}get(t){const n=super.get(t);return super.has(t)&&n!==void 0&&(this.delete(t),super.set(t,n)),n}set(t,n){if(super.set(t,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}}const e0=new NL(8192);function $L(e,t){if(e0.has(`${e}.${t}`))return e0.get(`${e}.${t}`);const n=e.substring(2).toLowerCase(),r=uD(rD(n),"bytes"),i=n.split("");for(let c=0;c<40;c+=2)r[c>>1]>>4>=8&&i[c]&&(i[c]=i[c].toUpperCase()),(r[c>>1]&15)>=8&&i[c+1]&&(i[c+1]=i[c+1].toUpperCase());const a=`0x${i.join("")}`;return e0.set(`${e}.${t}`,a),a}function BL(e){const t=uD(`0x${e.substring(4)}`).substring(26);return $L(`0x${t}`)}async function PL({hash:e,signature:t}){const n=cf(e)?e:Ab(e),{secp256k1:r}=await K3(async()=>{const{secp256k1:c}=await import("./secp256k1-Z1M9yqSu.js");return{secp256k1:c}},[]);return`0x${(()=>{if(typeof t=="object"&&"r"in t&&"s"in t){const{r:d,s:p,v:g,yParity:y}=t,b=Number(y??g),v=vx(b);return new r.Signature(xb(d),xb(p)).addRecoveryBit(v)}const c=cf(t)?t:Ab(t);if(_b(c)!==65)throw new Error("invalid signature length");const u=Qj(`0x${c.slice(130)}`),f=vx(u);return r.Signature.fromCompact(c.substring(2,130)).addRecoveryBit(f)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function vx(e){if(e===0||e===1)return e;if(e===27)return 0;if(e===28)return 1;throw new Error("Invalid yParityOrV value")}async function UL({hash:e,signature:t}){return BL(await PL({hash:e,signature:t}))}function kL(e){if(e.length>=255)throw new TypeError("Alphabet too long");const t=new Uint8Array(256);for(let d=0;d<t.length;d++)t[d]=255;for(let d=0;d<e.length;d++){const p=e.charAt(d),g=p.charCodeAt(0);if(t[g]!==255)throw new TypeError(p+" is ambiguous");t[g]=d}const n=e.length,r=e.charAt(0),i=Math.log(n)/Math.log(256),a=Math.log(256)/Math.log(n);function c(d){if(d instanceof Uint8Array||(ArrayBuffer.isView(d)?d=new Uint8Array(d.buffer,d.byteOffset,d.byteLength):Array.isArray(d)&&(d=Uint8Array.from(d))),!(d instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(d.length===0)return"";let p=0,g=0,y=0;const b=d.length;for(;y!==b&&d[y]===0;)y++,p++;const v=(b-y)*a+1>>>0,E=new Uint8Array(v);for(;y!==b;){let T=d[y],O=0;for(let $=v-1;(T!==0||O<g)&&$!==-1;$--,O++)T+=256*E[$]>>>0,E[$]=T%n>>>0,T=T/n>>>0;if(T!==0)throw new Error("Non-zero carry");g=O,y++}let S=v-g;for(;S!==v&&E[S]===0;)S++;let _=r.repeat(p);for(;S<v;++S)_+=e.charAt(E[S]);return _}function u(d){if(typeof d!="string")throw new TypeError("Expected String");if(d.length===0)return new Uint8Array;let p=0,g=0,y=0;for(;d[p]===r;)g++,p++;const b=(d.length-p)*i+1>>>0,v=new Uint8Array(b);for(;p<d.length;){const T=d.charCodeAt(p);if(T>255)return;let O=t[T];if(O===255)return;let $=0;for(let I=b-1;(O!==0||$<y)&&I!==-1;I--,$++)O+=n*v[I]>>>0,v[I]=O%256>>>0,O=O/256>>>0;if(O!==0)throw new Error("Non-zero carry");y=$,p++}let E=b-y;for(;E!==b&&v[E]===0;)E++;const S=new Uint8Array(g+(b-E));let _=g;for(;E!==b;)S[_++]=v[E++];return S}function f(d){const p=u(d);if(p)return p;throw new Error("Non-base"+n+" character")}return{encode:c,decodeUnsafe:u,decode:f}}var ML="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const Tf=kL(ML);function jL(e){const t=e.length;let n=0,r=0;for(;r<t;){let i=e.charCodeAt(r++);if((i&4294967168)===0){n++;continue}else if((i&4294965248)===0)n+=2;else{if(i>=55296&&i<=56319&&r<t){const a=e.charCodeAt(r);(a&64512)===56320&&(++r,i=((i&1023)<<10)+(a&1023)+65536)}(i&4294901760)===0?n+=3:n+=4}}return n}function LL(e,t,n){const r=e.length;let i=n,a=0;for(;a<r;){let c=e.charCodeAt(a++);if((c&4294967168)===0){t[i++]=c;continue}else if((c&4294965248)===0)t[i++]=c>>6&31|192;else{if(c>=55296&&c<=56319&&a<r){const u=e.charCodeAt(a);(u&64512)===56320&&(++a,c=((c&1023)<<10)+(u&1023)+65536)}(c&4294901760)===0?(t[i++]=c>>12&15|224,t[i++]=c>>6&63|128):(t[i++]=c>>18&7|240,t[i++]=c>>12&63|128,t[i++]=c>>6&63|128)}t[i++]=c&63|128}}const zL=new TextEncoder,qL=50;function HL(e,t,n){zL.encodeInto(e,t.subarray(n))}function FL(e,t,n){e.length>qL?HL(e,t,n):LL(e,t,n)}const VL=4096;function fD(e,t,n){let r=t;const i=r+n,a=[];let c="";for(;r<i;){const u=e[r++];if((u&128)===0)a.push(u);else if((u&224)===192){const f=e[r++]&63;a.push((u&31)<<6|f)}else if((u&240)===224){const f=e[r++]&63,d=e[r++]&63;a.push((u&31)<<12|f<<6|d)}else if((u&248)===240){const f=e[r++]&63,d=e[r++]&63,p=e[r++]&63;let g=(u&7)<<18|f<<12|d<<6|p;g>65535&&(g-=65536,a.push(g>>>10&1023|55296),g=56320|g&1023),a.push(g)}else a.push(u);a.length>=VL&&(c+=String.fromCharCode(...a),a.length=0)}return a.length>0&&(c+=String.fromCharCode(...a)),c}const GL=new TextDecoder,KL=200;function WL(e,t,n){const r=e.subarray(t,t+n);return GL.decode(r)}function YL(e,t,n){return n>KL?WL(e,t,n):fD(e,t,n)}class ah{constructor(t,n){this.type=t,this.data=n}}class gr extends Error{constructor(t){super(t);const n=Object.create(gr.prototype);Object.setPrototypeOf(this,n),Object.defineProperty(this,"name",{configurable:!0,enumerable:!1,value:gr.name})}}const wu=4294967295;function XL(e,t,n){const r=n/4294967296,i=n;e.setUint32(t,r),e.setUint32(t+4,i)}function dD(e,t,n){const r=Math.floor(n/4294967296),i=n;e.setUint32(t,r),e.setUint32(t+4,i)}function hD(e,t){const n=e.getInt32(t),r=e.getUint32(t+4);return n*4294967296+r}function ZL(e,t){const n=e.getUint32(t),r=e.getUint32(t+4);return n*4294967296+r}const QL=-1,JL=4294967296-1,e9=17179869184-1;function t9({sec:e,nsec:t}){if(e>=0&&t>=0&&e<=e9)if(t===0&&e<=JL){const n=new Uint8Array(4);return new DataView(n.buffer).setUint32(0,e),n}else{const n=e/4294967296,r=e&4294967295,i=new Uint8Array(8),a=new DataView(i.buffer);return a.setUint32(0,t<<2|n&3),a.setUint32(4,r),i}else{const n=new Uint8Array(12),r=new DataView(n.buffer);return r.setUint32(0,t),dD(r,4,e),n}}function n9(e){const t=e.getTime(),n=Math.floor(t/1e3),r=(t-n*1e3)*1e6,i=Math.floor(r/1e9);return{sec:n+i,nsec:r-i*1e9}}function r9(e){if(e instanceof Date){const t=n9(e);return t9(t)}else return null}function i9(e){const t=new DataView(e.buffer,e.byteOffset,e.byteLength);switch(e.byteLength){case 4:return{sec:t.getUint32(0),nsec:0};case 8:{const n=t.getUint32(0),r=t.getUint32(4),i=(n&3)*4294967296+r,a=n>>>2;return{sec:i,nsec:a}}case 12:{const n=hD(t,4),r=t.getUint32(0);return{sec:n,nsec:r}}default:throw new gr(`Unrecognized data size for timestamp (expected 4, 8, or 12): ${e.length}`)}}function s9(e){const t=i9(e);return new Date(t.sec*1e3+t.nsec/1e6)}const o9={type:QL,encode:r9,decode:s9};class tp{constructor(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(o9)}register({type:t,encode:n,decode:r}){if(t>=0)this.encoders[t]=n,this.decoders[t]=r;else{const i=-1-t;this.builtInEncoders[i]=n,this.builtInDecoders[i]=r}}tryToEncode(t,n){for(let r=0;r<this.builtInEncoders.length;r++){const i=this.builtInEncoders[r];if(i!=null){const a=i(t,n);if(a!=null){const c=-1-r;return new ah(c,a)}}}for(let r=0;r<this.encoders.length;r++){const i=this.encoders[r];if(i!=null){const a=i(t,n);if(a!=null){const c=r;return new ah(c,a)}}}return t instanceof ah?t:null}decode(t,n,r){const i=n<0?this.builtInDecoders[-1-n]:this.decoders[n];return i?i(t,n,r):new ah(n,t)}}tp.defaultCodec=new tp;function a9(e){return e instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&e instanceof SharedArrayBuffer}function Rb(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):a9(e)?new Uint8Array(e):Uint8Array.from(e)}const c9=100,l9=2048;let u9=class pD{constructor(t){this.entered=!1,this.extensionCodec=t?.extensionCodec??tp.defaultCodec,this.context=t?.context,this.useBigInt64=t?.useBigInt64??!1,this.maxDepth=t?.maxDepth??c9,this.initialBufferSize=t?.initialBufferSize??l9,this.sortKeys=t?.sortKeys??!1,this.forceFloat32=t?.forceFloat32??!1,this.ignoreUndefined=t?.ignoreUndefined??!1,this.forceIntegerToFloat=t?.forceIntegerToFloat??!1,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}clone(){return new pD({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,maxDepth:this.maxDepth,initialBufferSize:this.initialBufferSize,sortKeys:this.sortKeys,forceFloat32:this.forceFloat32,ignoreUndefined:this.ignoreUndefined,forceIntegerToFloat:this.forceIntegerToFloat})}reinitializeState(){this.pos=0}encodeSharedRef(t){if(this.entered)return this.clone().encodeSharedRef(t);try{return this.entered=!0,this.reinitializeState(),this.doEncode(t,1),this.bytes.subarray(0,this.pos)}finally{this.entered=!1}}encode(t){if(this.entered)return this.clone().encode(t);try{return this.entered=!0,this.reinitializeState(),this.doEncode(t,1),this.bytes.slice(0,this.pos)}finally{this.entered=!1}}doEncode(t,n){if(n>this.maxDepth)throw new Error(`Too deep objects in depth ${n}`);t==null?this.encodeNil():typeof t=="boolean"?this.encodeBoolean(t):typeof t=="number"?this.forceIntegerToFloat?this.encodeNumberAsFloat(t):this.encodeNumber(t):typeof t=="string"?this.encodeString(t):this.useBigInt64&&typeof t=="bigint"?this.encodeBigInt64(t):this.encodeObject(t,n)}ensureBufferSizeToWrite(t){const n=this.pos+t;this.view.byteLength<n&&this.resizeBuffer(n*2)}resizeBuffer(t){const n=new ArrayBuffer(t),r=new Uint8Array(n),i=new DataView(n);r.set(this.bytes),this.view=i,this.bytes=r}encodeNil(){this.writeU8(192)}encodeBoolean(t){t===!1?this.writeU8(194):this.writeU8(195)}encodeNumber(t){!this.forceIntegerToFloat&&Number.isSafeInteger(t)?t>=0?t<128?this.writeU8(t):t<256?(this.writeU8(204),this.writeU8(t)):t<65536?(this.writeU8(205),this.writeU16(t)):t<4294967296?(this.writeU8(206),this.writeU32(t)):this.useBigInt64?this.encodeNumberAsFloat(t):(this.writeU8(207),this.writeU64(t)):t>=-32?this.writeU8(224|t+32):t>=-128?(this.writeU8(208),this.writeI8(t)):t>=-32768?(this.writeU8(209),this.writeI16(t)):t>=-2147483648?(this.writeU8(210),this.writeI32(t)):this.useBigInt64?this.encodeNumberAsFloat(t):(this.writeU8(211),this.writeI64(t)):this.encodeNumberAsFloat(t)}encodeNumberAsFloat(t){this.forceFloat32?(this.writeU8(202),this.writeF32(t)):(this.writeU8(203),this.writeF64(t))}encodeBigInt64(t){t>=BigInt(0)?(this.writeU8(207),this.writeBigUint64(t)):(this.writeU8(211),this.writeBigInt64(t))}writeStringHeader(t){if(t<32)this.writeU8(160+t);else if(t<256)this.writeU8(217),this.writeU8(t);else if(t<65536)this.writeU8(218),this.writeU16(t);else if(t<4294967296)this.writeU8(219),this.writeU32(t);else throw new Error(`Too long string: ${t} bytes in UTF-8`)}encodeString(t){const r=jL(t);this.ensureBufferSizeToWrite(5+r),this.writeStringHeader(r),FL(t,this.bytes,this.pos),this.pos+=r}encodeObject(t,n){const r=this.extensionCodec.tryToEncode(t,this.context);if(r!=null)this.encodeExtension(r);else if(Array.isArray(t))this.encodeArray(t,n);else if(ArrayBuffer.isView(t))this.encodeBinary(t);else if(typeof t=="object")this.encodeMap(t,n);else throw new Error(`Unrecognized object: ${Object.prototype.toString.apply(t)}`)}encodeBinary(t){const n=t.byteLength;if(n<256)this.writeU8(196),this.writeU8(n);else if(n<65536)this.writeU8(197),this.writeU16(n);else if(n<4294967296)this.writeU8(198),this.writeU32(n);else throw new Error(`Too large binary: ${n}`);const r=Rb(t);this.writeU8a(r)}encodeArray(t,n){const r=t.length;if(r<16)this.writeU8(144+r);else if(r<65536)this.writeU8(220),this.writeU16(r);else if(r<4294967296)this.writeU8(221),this.writeU32(r);else throw new Error(`Too large array: ${r}`);for(const i of t)this.doEncode(i,n+1)}countWithoutUndefined(t,n){let r=0;for(const i of n)t[i]!==void 0&&r++;return r}encodeMap(t,n){const r=Object.keys(t);this.sortKeys&&r.sort();const i=this.ignoreUndefined?this.countWithoutUndefined(t,r):r.length;if(i<16)this.writeU8(128+i);else if(i<65536)this.writeU8(222),this.writeU16(i);else if(i<4294967296)this.writeU8(223),this.writeU32(i);else throw new Error(`Too large map object: ${i}`);for(const a of r){const c=t[a];this.ignoreUndefined&&c===void 0||(this.encodeString(a),this.doEncode(c,n+1))}}encodeExtension(t){if(typeof t.data=="function"){const r=t.data(this.pos+6),i=r.length;if(i>=4294967296)throw new Error(`Too large extension object: ${i}`);this.writeU8(201),this.writeU32(i),this.writeI8(t.type),this.writeU8a(r);return}const n=t.data.length;if(n===1)this.writeU8(212);else if(n===2)this.writeU8(213);else if(n===4)this.writeU8(214);else if(n===8)this.writeU8(215);else if(n===16)this.writeU8(216);else if(n<256)this.writeU8(199),this.writeU8(n);else if(n<65536)this.writeU8(200),this.writeU16(n);else if(n<4294967296)this.writeU8(201),this.writeU32(n);else throw new Error(`Too large extension object: ${n}`);this.writeI8(t.type),this.writeU8a(t.data)}writeU8(t){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,t),this.pos++}writeU8a(t){const n=t.length;this.ensureBufferSizeToWrite(n),this.bytes.set(t,this.pos),this.pos+=n}writeI8(t){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,t),this.pos++}writeU16(t){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,t),this.pos+=2}writeI16(t){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,t),this.pos+=2}writeU32(t){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,t),this.pos+=4}writeI32(t){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,t),this.pos+=4}writeF32(t){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,t),this.pos+=4}writeF64(t){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,t),this.pos+=8}writeU64(t){this.ensureBufferSizeToWrite(8),XL(this.view,this.pos,t),this.pos+=8}writeI64(t){this.ensureBufferSizeToWrite(8),dD(this.view,this.pos,t),this.pos+=8}writeBigUint64(t){this.ensureBufferSizeToWrite(8),this.view.setBigUint64(this.pos,t),this.pos+=8}writeBigInt64(t){this.ensureBufferSizeToWrite(8),this.view.setBigInt64(this.pos,t),this.pos+=8}};function f9(e,t){return new u9(t).encodeSharedRef(e)}function t0(e){return`${e<0?"-":""}0x${Math.abs(e).toString(16).padStart(2,"0")}`}const d9=16,h9=16;class p9{constructor(t=d9,n=h9){this.hit=0,this.miss=0,this.maxKeyLength=t,this.maxLengthPerKey=n,this.caches=[];for(let r=0;r<this.maxKeyLength;r++)this.caches.push([])}canBeCached(t){return t>0&&t<=this.maxKeyLength}find(t,n,r){const i=this.caches[r-1];e:for(const a of i){const c=a.bytes;for(let u=0;u<r;u++)if(c[u]!==t[n+u])continue e;return a.str}return null}store(t,n){const r=this.caches[t.length-1],i={bytes:t,str:n};r.length>=this.maxLengthPerKey?r[Math.random()*r.length|0]=i:r.push(i)}decode(t,n,r){const i=this.find(t,n,r);if(i!=null)return this.hit++,i;this.miss++;const a=fD(t,n,r),c=Uint8Array.prototype.slice.call(t,n,n+r);return this.store(c,a),a}}const Ob="array",qu="map_key",gD="map_value",g9=e=>{if(typeof e=="string"||typeof e=="number")return e;throw new gr("The type of key must be string or number but "+typeof e)};class m9{constructor(){this.stack=[],this.stackHeadPosition=-1}get length(){return this.stackHeadPosition+1}top(){return this.stack[this.stackHeadPosition]}pushArrayState(t){const n=this.getUninitializedStateFromPool();n.type=Ob,n.position=0,n.size=t,n.array=new Array(t)}pushMapState(t){const n=this.getUninitializedStateFromPool();n.type=qu,n.readCount=0,n.size=t,n.map={}}getUninitializedStateFromPool(){if(this.stackHeadPosition++,this.stackHeadPosition===this.stack.length){const t={type:void 0,size:0,array:void 0,position:0,readCount:0,map:void 0,key:null};this.stack.push(t)}return this.stack[this.stackHeadPosition]}release(t){if(this.stack[this.stackHeadPosition]!==t)throw new Error("Invalid stack state. Released state is not on top of the stack.");if(t.type===Ob){const r=t;r.size=0,r.array=void 0,r.position=0,r.type=void 0}if(t.type===qu||t.type===gD){const r=t;r.size=0,r.map=void 0,r.readCount=0,r.type=void 0}this.stackHeadPosition--}reset(){this.stack.length=0,this.stackHeadPosition=-1}}const Eu=-1,Kv=new DataView(new ArrayBuffer(0)),y9=new Uint8Array(Kv.buffer);try{Kv.getInt8(0)}catch(e){if(!(e instanceof RangeError))throw new Error("This module is not supported in the current JavaScript engine because DataView does not throw RangeError on out-of-bounds access")}const wx=new RangeError("Insufficient data"),b9=new p9;let v9=class mD{constructor(t){this.totalPos=0,this.pos=0,this.view=Kv,this.bytes=y9,this.headByte=Eu,this.stack=new m9,this.entered=!1,this.extensionCodec=t?.extensionCodec??tp.defaultCodec,this.context=t?.context,this.useBigInt64=t?.useBigInt64??!1,this.rawStrings=t?.rawStrings??!1,this.maxStrLength=t?.maxStrLength??wu,this.maxBinLength=t?.maxBinLength??wu,this.maxArrayLength=t?.maxArrayLength??wu,this.maxMapLength=t?.maxMapLength??wu,this.maxExtLength=t?.maxExtLength??wu,this.keyDecoder=t?.keyDecoder!==void 0?t.keyDecoder:b9,this.mapKeyConverter=t?.mapKeyConverter??g9}clone(){return new mD({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,rawStrings:this.rawStrings,maxStrLength:this.maxStrLength,maxBinLength:this.maxBinLength,maxArrayLength:this.maxArrayLength,maxMapLength:this.maxMapLength,maxExtLength:this.maxExtLength,keyDecoder:this.keyDecoder})}reinitializeState(){this.totalPos=0,this.headByte=Eu,this.stack.reset()}setBuffer(t){const n=Rb(t);this.bytes=n,this.view=new DataView(n.buffer,n.byteOffset,n.byteLength),this.pos=0}appendBuffer(t){if(this.headByte===Eu&&!this.hasRemaining(1))this.setBuffer(t);else{const n=this.bytes.subarray(this.pos),r=Rb(t),i=new Uint8Array(n.length+r.length);i.set(n),i.set(r,n.length),this.setBuffer(i)}}hasRemaining(t){return this.view.byteLength-this.pos>=t}createExtraByteError(t){const{view:n,pos:r}=this;return new RangeError(`Extra ${n.byteLength-r} of ${n.byteLength} byte(s) found at buffer[${t}]`)}decode(t){if(this.entered)return this.clone().decode(t);try{this.entered=!0,this.reinitializeState(),this.setBuffer(t);const n=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return n}finally{this.entered=!1}}*decodeMulti(t){if(this.entered){yield*this.clone().decodeMulti(t);return}try{for(this.entered=!0,this.reinitializeState(),this.setBuffer(t);this.hasRemaining(1);)yield this.doDecodeSync()}finally{this.entered=!1}}async decodeAsync(t){if(this.entered)return this.clone().decodeAsync(t);try{this.entered=!0;let n=!1,r;for await(const u of t){if(n)throw this.entered=!1,this.createExtraByteError(this.totalPos);this.appendBuffer(u);try{r=this.doDecodeSync(),n=!0}catch(f){if(!(f instanceof RangeError))throw f}this.totalPos+=this.pos}if(n){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return r}const{headByte:i,pos:a,totalPos:c}=this;throw new RangeError(`Insufficient data in parsing ${t0(i)} at ${c} (${a} in the current buffer)`)}finally{this.entered=!1}}decodeArrayStream(t){return this.decodeMultiAsync(t,!0)}decodeStream(t){return this.decodeMultiAsync(t,!1)}async*decodeMultiAsync(t,n){if(this.entered){yield*this.clone().decodeMultiAsync(t,n);return}try{this.entered=!0;let r=n,i=-1;for await(const a of t){if(n&&i===0)throw this.createExtraByteError(this.totalPos);this.appendBuffer(a),r&&(i=this.readArraySize(),r=!1,this.complete());try{for(;yield this.doDecodeSync(),--i!==0;);}catch(c){if(!(c instanceof RangeError))throw c}this.totalPos+=this.pos}}finally{this.entered=!1}}doDecodeSync(){e:for(;;){const t=this.readHeadByte();let n;if(t>=224)n=t-256;else if(t<192)if(t<128)n=t;else if(t<144){const i=t-128;if(i!==0){this.pushMapState(i),this.complete();continue e}else n={}}else if(t<160){const i=t-144;if(i!==0){this.pushArrayState(i),this.complete();continue e}else n=[]}else{const i=t-160;n=this.decodeString(i,0)}else if(t===192)n=null;else if(t===194)n=!1;else if(t===195)n=!0;else if(t===202)n=this.readF32();else if(t===203)n=this.readF64();else if(t===204)n=this.readU8();else if(t===205)n=this.readU16();else if(t===206)n=this.readU32();else if(t===207)this.useBigInt64?n=this.readU64AsBigInt():n=this.readU64();else if(t===208)n=this.readI8();else if(t===209)n=this.readI16();else if(t===210)n=this.readI32();else if(t===211)this.useBigInt64?n=this.readI64AsBigInt():n=this.readI64();else if(t===217){const i=this.lookU8();n=this.decodeString(i,1)}else if(t===218){const i=this.lookU16();n=this.decodeString(i,2)}else if(t===219){const i=this.lookU32();n=this.decodeString(i,4)}else if(t===220){const i=this.readU16();if(i!==0){this.pushArrayState(i),this.complete();continue e}else n=[]}else if(t===221){const i=this.readU32();if(i!==0){this.pushArrayState(i),this.complete();continue e}else n=[]}else if(t===222){const i=this.readU16();if(i!==0){this.pushMapState(i),this.complete();continue e}else n={}}else if(t===223){const i=this.readU32();if(i!==0){this.pushMapState(i),this.complete();continue e}else n={}}else if(t===196){const i=this.lookU8();n=this.decodeBinary(i,1)}else if(t===197){const i=this.lookU16();n=this.decodeBinary(i,2)}else if(t===198){const i=this.lookU32();n=this.decodeBinary(i,4)}else if(t===212)n=this.decodeExtension(1,0);else if(t===213)n=this.decodeExtension(2,0);else if(t===214)n=this.decodeExtension(4,0);else if(t===215)n=this.decodeExtension(8,0);else if(t===216)n=this.decodeExtension(16,0);else if(t===199){const i=this.lookU8();n=this.decodeExtension(i,1)}else if(t===200){const i=this.lookU16();n=this.decodeExtension(i,2)}else if(t===201){const i=this.lookU32();n=this.decodeExtension(i,4)}else throw new gr(`Unrecognized type byte: ${t0(t)}`);this.complete();const r=this.stack;for(;r.length>0;){const i=r.top();if(i.type===Ob)if(i.array[i.position]=n,i.position++,i.position===i.size)n=i.array,r.release(i);else continue e;else if(i.type===qu){if(n==="__proto__")throw new gr("The key __proto__ is not allowed");i.key=this.mapKeyConverter(n),i.type=gD;continue e}else if(i.map[i.key]=n,i.readCount++,i.readCount===i.size)n=i.map,r.release(i);else{i.key=null,i.type=qu;continue e}}return n}}readHeadByte(){return this.headByte===Eu&&(this.headByte=this.readU8()),this.headByte}complete(){this.headByte=Eu}readArraySize(){const t=this.readHeadByte();switch(t){case 220:return this.readU16();case 221:return this.readU32();default:{if(t<160)return t-144;throw new gr(`Unrecognized array type byte: ${t0(t)}`)}}}pushMapState(t){if(t>this.maxMapLength)throw new gr(`Max length exceeded: map length (${t}) > maxMapLengthLength (${this.maxMapLength})`);this.stack.pushMapState(t)}pushArrayState(t){if(t>this.maxArrayLength)throw new gr(`Max length exceeded: array length (${t}) > maxArrayLength (${this.maxArrayLength})`);this.stack.pushArrayState(t)}decodeString(t,n){return!this.rawStrings||this.stateIsMapKey()?this.decodeUtf8String(t,n):this.decodeBinary(t,n)}decodeUtf8String(t,n){if(t>this.maxStrLength)throw new gr(`Max length exceeded: UTF-8 byte length (${t}) > maxStrLength (${this.maxStrLength})`);if(this.bytes.byteLength<this.pos+n+t)throw wx;const r=this.pos+n;let i;return this.stateIsMapKey()&&this.keyDecoder?.canBeCached(t)?i=this.keyDecoder.decode(this.bytes,r,t):i=YL(this.bytes,r,t),this.pos+=n+t,i}stateIsMapKey(){return this.stack.length>0?this.stack.top().type===qu:!1}decodeBinary(t,n){if(t>this.maxBinLength)throw new gr(`Max length exceeded: bin length (${t}) > maxBinLength (${this.maxBinLength})`);if(!this.hasRemaining(t+n))throw wx;const r=this.pos+n,i=this.bytes.subarray(r,r+t);return this.pos+=n+t,i}decodeExtension(t,n){if(t>this.maxExtLength)throw new gr(`Max length exceeded: ext length (${t}) > maxExtLength (${this.maxExtLength})`);const r=this.view.getInt8(this.pos+n),i=this.decodeBinary(t,n+1);return this.extensionCodec.decode(i,r,this.context)}lookU8(){return this.view.getUint8(this.pos)}lookU16(){return this.view.getUint16(this.pos)}lookU32(){return this.view.getUint32(this.pos)}readU8(){const t=this.view.getUint8(this.pos);return this.pos++,t}readI8(){const t=this.view.getInt8(this.pos);return this.pos++,t}readU16(){const t=this.view.getUint16(this.pos);return this.pos+=2,t}readI16(){const t=this.view.getInt16(this.pos);return this.pos+=2,t}readU32(){const t=this.view.getUint32(this.pos);return this.pos+=4,t}readI32(){const t=this.view.getInt32(this.pos);return this.pos+=4,t}readU64(){const t=ZL(this.view,this.pos);return this.pos+=8,t}readI64(){const t=hD(this.view,this.pos);return this.pos+=8,t}readU64AsBigInt(){const t=this.view.getBigUint64(this.pos);return this.pos+=8,t}readI64AsBigInt(){const t=this.view.getBigInt64(this.pos);return this.pos+=8,t}readF32(){const t=this.view.getFloat32(this.pos);return this.pos+=4,t}readF64(){const t=this.view.getFloat64(this.pos);return this.pos+=8,t}};function w9(e,t){return new v9(t).decode(e)}/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */function E9(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function yD(e,t){return Array.isArray(t)?t.length===0?!0:e?t.every(n=>typeof n=="string"):t.every(n=>Number.isSafeInteger(n)):!1}function np(e,t){if(typeof t!="string")throw new Error(`${e}: string expected`);return!0}function Wv(e){if(!Number.isSafeInteger(e))throw new Error(`invalid integer: ${e}`)}function Tb(e){if(!Array.isArray(e))throw new Error("array expected")}function rp(e,t){if(!yD(!0,t))throw new Error(`${e}: array of strings expected`)}function S9(e,t){if(!yD(!1,t))throw new Error(`${e}: array of numbers expected`)}function _9(...e){const t=a=>a,n=(a,c)=>u=>a(c(u)),r=e.map(a=>a.encode).reduceRight(n,t),i=e.map(a=>a.decode).reduce(n,t);return{encode:r,decode:i}}function x9(e){const t=typeof e=="string"?e.split(""):e,n=t.length;rp("alphabet",t);const r=new Map(t.map((i,a)=>[i,a]));return{encode:i=>(Tb(i),i.map(a=>{if(!Number.isSafeInteger(a)||a<0||a>=n)throw new Error(`alphabet.encode: digit index outside alphabet "${a}". Allowed: ${e}`);return t[a]})),decode:i=>(Tb(i),i.map(a=>{np("alphabet.decode",a);const c=r.get(a);if(c===void 0)throw new Error(`Unknown letter: "${a}". Allowed: ${e}`);return c}))}}function A9(e=""){return np("join",e),{encode:t=>(rp("join.decode",t),t.join(e)),decode:t=>(np("join.decode",t),t.split(e))}}function R9(e,t="="){return Wv(e),np("padding",t),{encode(n){for(rp("padding.encode",n);n.length*e%8;)n.push(t);return n},decode(n){rp("padding.decode",n);let r=n.length;if(r*e%8)throw new Error("padding: invalid, string should have whole number of bytes");for(;r>0&&n[r-1]===t;r--)if((r-1)*e%8===0)throw new Error("padding: invalid, string has too much padding");return n.slice(0,r)}}}const bD=(e,t)=>t===0?e:bD(t,e%t),ip=(e,t)=>e+(t-bD(e,t)),n0=(()=>{let e=[];for(let t=0;t<40;t++)e.push(2**t);return e})();function Ex(e,t,n,r){if(Tb(e),t<=0||t>32)throw new Error(`convertRadix2: wrong from=${t}`);if(n<=0||n>32)throw new Error(`convertRadix2: wrong to=${n}`);if(ip(t,n)>32)throw new Error(`convertRadix2: carry overflow from=${t} to=${n} carryBits=${ip(t,n)}`);let i=0,a=0;const c=n0[t],u=n0[n]-1,f=[];for(const d of e){if(Wv(d),d>=c)throw new Error(`convertRadix2: invalid data word=${d} from=${t}`);if(i=i<<t|d,a+t>32)throw new Error(`convertRadix2: carry overflow pos=${a} from=${t}`);for(a+=t;a>=n;a-=n)f.push((i>>a-n&u)>>>0);const p=n0[a];if(p===void 0)throw new Error("invalid carry");i&=p-1}if(i=i<<n-a&u,!r&&a>=t)throw new Error("Excess padding");if(!r&&i>0)throw new Error(`Non-zero padding: ${i}`);return r&&a>0&&f.push(i>>>0),f}function O9(e,t=!1){if(Wv(e),e<=0||e>32)throw new Error("radix2: bits should be in (0..32]");if(ip(8,e)>32||ip(e,8)>32)throw new Error("radix2: carry overflow");return{encode:n=>{if(!E9(n))throw new Error("radix2.encode input should be Uint8Array");return Ex(Array.from(n),8,e,!t)},decode:n=>(S9("radix2.decode",n),Uint8Array.from(Ex(n,e,8,t)))}}const T9=_9(O9(5),x9("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),R9(5),A9("")),D9=e=>JSON.stringify(e,(t,n)=>typeof n=="bigint"?n.toString()+"n":n),C9=e=>{const t=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,n=e.replace(t,'$1"$2n"$3');return JSON.parse(n,(r,i)=>typeof i=="string"&&i.match(/^\d+n$/)?BigInt(i.substring(0,i.length-1)):i)};function ca(e){if(typeof e!="string")throw new Error(`Cannot safe json parse value of type ${typeof e}`);try{return C9(e)}catch{return e}}function ms(e){return typeof e=="string"?e:D9(e)||""}function I9(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function vD(e,...t){if(!I9(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function Sx(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function N9(e,t){vD(e);const n=t.outputLen;if(e.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const yc=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const r0=e=>new DataView(e.buffer,e.byteOffset,e.byteLength);function $9(e){if(typeof e!="string")throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array(new TextEncoder().encode(e))}function wD(e){return typeof e=="string"&&(e=$9(e)),vD(e),e}let B9=class{clone(){return this._cloneInto()}};function P9(e){const t=r=>e().update(wD(r)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function ED(e=32){if(yc&&typeof yc.getRandomValues=="function")return yc.getRandomValues(new Uint8Array(e));if(yc&&typeof yc.randomBytes=="function")return yc.randomBytes(e);throw new Error("crypto.getRandomValues must be defined")}function U9(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const i=BigInt(32),a=BigInt(4294967295),c=Number(n>>i&a),u=Number(n&a),f=r?4:0,d=r?0:4;e.setUint32(t+f,c,r),e.setUint32(t+d,u,r)}let k9=class extends B9{constructor(t,n,r,i){super(),this.blockLen=t,this.outputLen=n,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=r0(this.buffer)}update(t){Sx(this);const{view:n,buffer:r,blockLen:i}=this;t=wD(t);const a=t.length;for(let c=0;c<a;){const u=Math.min(i-this.pos,a-c);if(u===i){const f=r0(t);for(;i<=a-c;c+=i)this.process(f,c);continue}r.set(t.subarray(c,c+u),this.pos),this.pos+=u,c+=u,this.pos===i&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Sx(this),N9(t,this),this.finished=!0;const{buffer:n,view:r,blockLen:i,isLE:a}=this;let{pos:c}=this;n[c++]=128,this.buffer.subarray(c).fill(0),this.padOffset>i-c&&(this.process(r,0),c=0);for(let g=c;g<i;g++)n[g]=0;U9(r,i-8,BigInt(this.length*8),a),this.process(r,0);const u=r0(t),f=this.outputLen;if(f%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const d=f/4,p=this.get();if(d>p.length)throw new Error("_sha2: outputLen bigger than state");for(let g=0;g<d;g++)u.setUint32(4*g,p[g],a)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:r,length:i,finished:a,destroyed:c,pos:u}=this;return t.length=i,t.pos=u,t.finished=a,t.destroyed=c,i%n&&t.buffer.set(r),t}};const ch=BigInt(2**32-1),Db=BigInt(32);function SD(e,t=!1){return t?{h:Number(e&ch),l:Number(e>>Db&ch)}:{h:Number(e>>Db&ch)|0,l:Number(e&ch)|0}}function M9(e,t=!1){let n=new Uint32Array(e.length),r=new Uint32Array(e.length);for(let i=0;i<e.length;i++){const{h:a,l:c}=SD(e[i],t);[n[i],r[i]]=[a,c]}return[n,r]}const j9=(e,t)=>BigInt(e>>>0)<<Db|BigInt(t>>>0),L9=(e,t,n)=>e>>>n,z9=(e,t,n)=>e<<32-n|t>>>n,q9=(e,t,n)=>e>>>n|t<<32-n,H9=(e,t,n)=>e<<32-n|t>>>n,F9=(e,t,n)=>e<<64-n|t>>>n-32,V9=(e,t,n)=>e>>>n-32|t<<64-n,G9=(e,t)=>t,K9=(e,t)=>e,W9=(e,t,n)=>e<<n|t>>>32-n,Y9=(e,t,n)=>t<<n|e>>>32-n,X9=(e,t,n)=>t<<n-32|e>>>64-n,Z9=(e,t,n)=>e<<n-32|t>>>64-n;function Q9(e,t,n,r){const i=(t>>>0)+(r>>>0);return{h:e+n+(i/2**32|0)|0,l:i|0}}const J9=(e,t,n)=>(e>>>0)+(t>>>0)+(n>>>0),e7=(e,t,n,r)=>t+n+r+(e/2**32|0)|0,t7=(e,t,n,r)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0),n7=(e,t,n,r,i)=>t+n+r+i+(e/2**32|0)|0,r7=(e,t,n,r,i)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0)+(i>>>0),i7=(e,t,n,r,i,a)=>t+n+r+i+a+(e/2**32|0)|0,Be={fromBig:SD,split:M9,toBig:j9,shrSH:L9,shrSL:z9,rotrSH:q9,rotrSL:H9,rotrBH:F9,rotrBL:V9,rotr32H:G9,rotr32L:K9,rotlSH:W9,rotlSL:Y9,rotlBH:X9,rotlBL:Z9,add:Q9,add3L:J9,add3H:e7,add4L:t7,add4H:n7,add5H:i7,add5L:r7},[s7,o7]=Be.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),Fs=new Uint32Array(80),Vs=new Uint32Array(80);let a7=class extends k9{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:t,Al:n,Bh:r,Bl:i,Ch:a,Cl:c,Dh:u,Dl:f,Eh:d,El:p,Fh:g,Fl:y,Gh:b,Gl:v,Hh:E,Hl:S}=this;return[t,n,r,i,a,c,u,f,d,p,g,y,b,v,E,S]}set(t,n,r,i,a,c,u,f,d,p,g,y,b,v,E,S){this.Ah=t|0,this.Al=n|0,this.Bh=r|0,this.Bl=i|0,this.Ch=a|0,this.Cl=c|0,this.Dh=u|0,this.Dl=f|0,this.Eh=d|0,this.El=p|0,this.Fh=g|0,this.Fl=y|0,this.Gh=b|0,this.Gl=v|0,this.Hh=E|0,this.Hl=S|0}process(t,n){for(let O=0;O<16;O++,n+=4)Fs[O]=t.getUint32(n),Vs[O]=t.getUint32(n+=4);for(let O=16;O<80;O++){const $=Fs[O-15]|0,I=Vs[O-15]|0,B=Be.rotrSH($,I,1)^Be.rotrSH($,I,8)^Be.shrSH($,I,7),z=Be.rotrSL($,I,1)^Be.rotrSL($,I,8)^Be.shrSL($,I,7),q=Fs[O-2]|0,k=Vs[O-2]|0,W=Be.rotrSH(q,k,19)^Be.rotrBH(q,k,61)^Be.shrSH(q,k,6),F=Be.rotrSL(q,k,19)^Be.rotrBL(q,k,61)^Be.shrSL(q,k,6),G=Be.add4L(z,F,Vs[O-7],Vs[O-16]),ne=Be.add4H(G,B,W,Fs[O-7],Fs[O-16]);Fs[O]=ne|0,Vs[O]=G|0}let{Ah:r,Al:i,Bh:a,Bl:c,Ch:u,Cl:f,Dh:d,Dl:p,Eh:g,El:y,Fh:b,Fl:v,Gh:E,Gl:S,Hh:_,Hl:T}=this;for(let O=0;O<80;O++){const $=Be.rotrSH(g,y,14)^Be.rotrSH(g,y,18)^Be.rotrBH(g,y,41),I=Be.rotrSL(g,y,14)^Be.rotrSL(g,y,18)^Be.rotrBL(g,y,41),B=g&b^~g&E,z=y&v^~y&S,q=Be.add5L(T,I,z,o7[O],Vs[O]),k=Be.add5H(q,_,$,B,s7[O],Fs[O]),W=q|0,F=Be.rotrSH(r,i,28)^Be.rotrBH(r,i,34)^Be.rotrBH(r,i,39),G=Be.rotrSL(r,i,28)^Be.rotrBL(r,i,34)^Be.rotrBL(r,i,39),ne=r&a^r&u^a&u,ee=i&c^i&f^c&f;_=E|0,T=S|0,E=b|0,S=v|0,b=g|0,v=y|0,{h:g,l:y}=Be.add(d|0,p|0,k|0,W|0),d=u|0,p=f|0,u=a|0,f=c|0,a=r|0,c=i|0;const D=Be.add3L(W,G,ee);r=Be.add3H(D,k,F,ne),i=D|0}({h:r,l:i}=Be.add(this.Ah|0,this.Al|0,r|0,i|0)),{h:a,l:c}=Be.add(this.Bh|0,this.Bl|0,a|0,c|0),{h:u,l:f}=Be.add(this.Ch|0,this.Cl|0,u|0,f|0),{h:d,l:p}=Be.add(this.Dh|0,this.Dl|0,d|0,p|0),{h:g,l:y}=Be.add(this.Eh|0,this.El|0,g|0,y|0),{h:b,l:v}=Be.add(this.Fh|0,this.Fl|0,b|0,v|0),{h:E,l:S}=Be.add(this.Gh|0,this.Gl|0,E|0,S|0),{h:_,l:T}=Be.add(this.Hh|0,this.Hl|0,_|0,T|0),this.set(r,i,a,c,u,f,d,p,g,y,b,v,E,S,_,T)}roundClean(){Fs.fill(0),Vs.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};const c7=P9(()=>new a7);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Yv=BigInt(0),_D=BigInt(1),l7=BigInt(2);function Xv(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function Zv(e){if(!Xv(e))throw new Error("Uint8Array expected")}function i0(e,t){if(typeof t!="boolean")throw new Error(e+" boolean expected, got "+t)}const u7=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Qv(e){Zv(e);let t="";for(let n=0;n<e.length;n++)t+=u7[e[n]];return t}function xD(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return e===""?Yv:BigInt("0x"+e)}const Qi={_0:48,_9:57,A:65,F:70,a:97,f:102};function _x(e){if(e>=Qi._0&&e<=Qi._9)return e-Qi._0;if(e>=Qi.A&&e<=Qi.F)return e-(Qi.A-10);if(e>=Qi.a&&e<=Qi.f)return e-(Qi.a-10)}function AD(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);const t=e.length,n=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(n);for(let i=0,a=0;i<n;i++,a+=2){const c=_x(e.charCodeAt(a)),u=_x(e.charCodeAt(a+1));if(c===void 0||u===void 0){const f=e[a]+e[a+1];throw new Error('hex string expected, got non-hex character "'+f+'" at index '+a)}r[i]=c*16+u}return r}function f7(e){return xD(Qv(e))}function jh(e){return Zv(e),xD(Qv(Uint8Array.from(e).reverse()))}function RD(e,t){return AD(e.toString(16).padStart(t*2,"0"))}function Cb(e,t){return RD(e,t).reverse()}function Ji(e,t,n){let r;if(typeof t=="string")try{r=AD(t)}catch(a){throw new Error(e+" must be hex string or Uint8Array, cause: "+a)}else if(Xv(t))r=Uint8Array.from(t);else throw new Error(e+" must be hex string or Uint8Array");const i=r.length;if(typeof n=="number"&&i!==n)throw new Error(e+" of length "+n+" expected, got "+i);return r}function xx(...e){let t=0;for(let r=0;r<e.length;r++){const i=e[r];Zv(i),t+=i.length}const n=new Uint8Array(t);for(let r=0,i=0;r<e.length;r++){const a=e[r];n.set(a,i),i+=a.length}return n}const s0=e=>typeof e=="bigint"&&Yv<=e;function d7(e,t,n){return s0(e)&&s0(t)&&s0(n)&&t<=e&&e<n}function Su(e,t,n,r){if(!d7(t,n,r))throw new Error("expected valid "+e+": "+n+" <= n < "+r+", got "+t)}function h7(e){let t;for(t=0;e>Yv;e>>=_D,t+=1);return t}const p7=e=>(l7<<BigInt(e-1))-_D,g7={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",stringOrUint8Array:e=>typeof e=="string"||Xv(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function Jv(e,t,n={}){const r=(i,a,c)=>{const u=g7[a];if(typeof u!="function")throw new Error("invalid validator function");const f=e[i];if(!(c&&f===void 0)&&!u(f,e))throw new Error("param "+String(i)+" is invalid. Expected "+a+", got "+f)};for(const[i,a]of Object.entries(t))r(i,a,!1);for(const[i,a]of Object.entries(n))r(i,a,!0);return e}function Ax(e){const t=new WeakMap;return(n,...r)=>{const i=t.get(n);if(i!==void 0)return i;const a=e(n,...r);return t.set(n,a),a}}const ln=BigInt(0),kt=BigInt(1),Ko=BigInt(2),m7=BigInt(3),Ib=BigInt(4),Rx=BigInt(5),Ox=BigInt(8);function Xt(e,t){const n=e%t;return n>=ln?n:t+n}function y7(e,t,n){if(t<ln)throw new Error("invalid exponent, negatives unsupported");if(n<=ln)throw new Error("invalid modulus");if(n===kt)return ln;let r=kt;for(;t>ln;)t&kt&&(r=r*e%n),e=e*e%n,t>>=kt;return r}function hi(e,t,n){let r=e;for(;t-- >ln;)r*=r,r%=n;return r}function Tx(e,t){if(e===ln)throw new Error("invert: expected non-zero number");if(t<=ln)throw new Error("invert: expected positive modulus, got "+t);let n=Xt(e,t),r=t,i=ln,a=kt;for(;n!==ln;){const c=r/n,u=r%n,f=i-a*c;r=n,n=u,i=a,a=f}if(r!==kt)throw new Error("invert: does not exist");return Xt(i,t)}function b7(e){const t=(e-kt)/Ko;let n,r,i;for(n=e-kt,r=0;n%Ko===ln;n/=Ko,r++);for(i=Ko;i<e&&y7(i,t,e)!==e-kt;i++)if(i>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const c=(e+kt)/Ib;return function(u,f){const d=u.pow(f,c);if(!u.eql(u.sqr(d),f))throw new Error("Cannot find square root");return d}}const a=(n+kt)/Ko;return function(c,u){if(c.pow(u,t)===c.neg(c.ONE))throw new Error("Cannot find square root");let f=r,d=c.pow(c.mul(c.ONE,i),n),p=c.pow(u,a),g=c.pow(u,n);for(;!c.eql(g,c.ONE);){if(c.eql(g,c.ZERO))return c.ZERO;let y=1;for(let v=c.sqr(g);y<f&&!c.eql(v,c.ONE);y++)v=c.sqr(v);const b=c.pow(d,kt<<BigInt(f-y-1));d=c.sqr(b),p=c.mul(p,b),g=c.mul(g,d),f=y}return p}}function v7(e){if(e%Ib===m7){const t=(e+kt)/Ib;return function(n,r){const i=n.pow(r,t);if(!n.eql(n.sqr(i),r))throw new Error("Cannot find square root");return i}}if(e%Ox===Rx){const t=(e-Rx)/Ox;return function(n,r){const i=n.mul(r,Ko),a=n.pow(i,t),c=n.mul(r,a),u=n.mul(n.mul(c,Ko),a),f=n.mul(c,n.sub(u,n.ONE));if(!n.eql(n.sqr(f),r))throw new Error("Cannot find square root");return f}}return b7(e)}const w7=(e,t)=>(Xt(e,t)&kt)===kt,E7=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function S7(e){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=E7.reduce((r,i)=>(r[i]="function",r),t);return Jv(e,n)}function _7(e,t,n){if(n<ln)throw new Error("invalid exponent, negatives unsupported");if(n===ln)return e.ONE;if(n===kt)return t;let r=e.ONE,i=t;for(;n>ln;)n&kt&&(r=e.mul(r,i)),i=e.sqr(i),n>>=kt;return r}function x7(e,t){const n=new Array(t.length),r=t.reduce((a,c,u)=>e.is0(c)?a:(n[u]=a,e.mul(a,c)),e.ONE),i=e.inv(r);return t.reduceRight((a,c,u)=>e.is0(c)?a:(n[u]=e.mul(a,n[u]),e.mul(a,c)),i),n}function OD(e,t){const n=t!==void 0?t:e.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function TD(e,t,n=!1,r={}){if(e<=ln)throw new Error("invalid field: expected ORDER > 0, got "+e);const{nBitLength:i,nByteLength:a}=OD(e,t);if(a>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let c;const u=Object.freeze({ORDER:e,isLE:n,BITS:i,BYTES:a,MASK:p7(i),ZERO:ln,ONE:kt,create:f=>Xt(f,e),isValid:f=>{if(typeof f!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof f);return ln<=f&&f<e},is0:f=>f===ln,isOdd:f=>(f&kt)===kt,neg:f=>Xt(-f,e),eql:(f,d)=>f===d,sqr:f=>Xt(f*f,e),add:(f,d)=>Xt(f+d,e),sub:(f,d)=>Xt(f-d,e),mul:(f,d)=>Xt(f*d,e),pow:(f,d)=>_7(u,f,d),div:(f,d)=>Xt(f*Tx(d,e),e),sqrN:f=>f*f,addN:(f,d)=>f+d,subN:(f,d)=>f-d,mulN:(f,d)=>f*d,inv:f=>Tx(f,e),sqrt:r.sqrt||(f=>(c||(c=v7(e)),c(u,f))),invertBatch:f=>x7(u,f),cmov:(f,d,p)=>p?d:f,toBytes:f=>n?Cb(f,a):RD(f,a),fromBytes:f=>{if(f.length!==a)throw new Error("Field.fromBytes: expected "+a+" bytes, got "+f.length);return n?jh(f):f7(f)}});return Object.freeze(u)}const Dx=BigInt(0),lh=BigInt(1);function o0(e,t){const n=t.negate();return e?n:t}function DD(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+e)}function a0(e,t){DD(e,t);const n=Math.ceil(t/e)+1,r=2**(e-1);return{windows:n,windowSize:r}}function A7(e,t){if(!Array.isArray(e))throw new Error("array expected");e.forEach((n,r)=>{if(!(n instanceof t))throw new Error("invalid point at index "+r)})}function R7(e,t){if(!Array.isArray(e))throw new Error("array of scalars expected");e.forEach((n,r)=>{if(!t.isValid(n))throw new Error("invalid scalar at index "+r)})}const c0=new WeakMap,CD=new WeakMap;function l0(e){return CD.get(e)||1}function O7(e,t){return{constTimeNegate:o0,hasPrecomputes(n){return l0(n)!==1},unsafeLadder(n,r,i=e.ZERO){let a=n;for(;r>Dx;)r&lh&&(i=i.add(a)),a=a.double(),r>>=lh;return i},precomputeWindow(n,r){const{windows:i,windowSize:a}=a0(r,t),c=[];let u=n,f=u;for(let d=0;d<i;d++){f=u,c.push(f);for(let p=1;p<a;p++)f=f.add(u),c.push(f);u=f.double()}return c},wNAF(n,r,i){const{windows:a,windowSize:c}=a0(n,t);let u=e.ZERO,f=e.BASE;const d=BigInt(2**n-1),p=2**n,g=BigInt(n);for(let y=0;y<a;y++){const b=y*c;let v=Number(i&d);i>>=g,v>c&&(v-=p,i+=lh);const E=b,S=b+Math.abs(v)-1,_=y%2!==0,T=v<0;v===0?f=f.add(o0(_,r[E])):u=u.add(o0(T,r[S]))}return{p:u,f}},wNAFUnsafe(n,r,i,a=e.ZERO){const{windows:c,windowSize:u}=a0(n,t),f=BigInt(2**n-1),d=2**n,p=BigInt(n);for(let g=0;g<c;g++){const y=g*u;if(i===Dx)break;let b=Number(i&f);if(i>>=p,b>u&&(b-=d,i+=lh),b===0)continue;let v=r[y+Math.abs(b)-1];b<0&&(v=v.negate()),a=a.add(v)}return a},getPrecomputes(n,r,i){let a=c0.get(r);return a||(a=this.precomputeWindow(r,n),n!==1&&c0.set(r,i(a))),a},wNAFCached(n,r,i){const a=l0(n);return this.wNAF(a,this.getPrecomputes(a,n,i),r)},wNAFCachedUnsafe(n,r,i,a){const c=l0(n);return c===1?this.unsafeLadder(n,r,a):this.wNAFUnsafe(c,this.getPrecomputes(c,n,i),r,a)},setWindowSize(n,r){DD(r,t),CD.set(n,r),c0.delete(n)}}}function T7(e,t,n,r){if(A7(n,e),R7(r,t),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const i=e.ZERO,a=h7(BigInt(n.length)),c=a>12?a-3:a>4?a-2:a?2:1,u=(1<<c)-1,f=new Array(u+1).fill(i),d=Math.floor((t.BITS-1)/c)*c;let p=i;for(let g=d;g>=0;g-=c){f.fill(i);for(let b=0;b<r.length;b++){const v=r[b],E=Number(v>>BigInt(g)&BigInt(u));f[E]=f[E].add(n[b])}let y=i;for(let b=f.length-1,v=i;b>0;b--)v=v.add(f[b]),y=y.add(v);if(p=p.add(y),g!==0)for(let b=0;b<c;b++)p=p.double()}return p}function D7(e){return S7(e.Fp),Jv(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...OD(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}const Yr=BigInt(0),Hn=BigInt(1),uh=BigInt(2),C7=BigInt(8),I7={zip215:!0};function N7(e){const t=D7(e);return Jv(e,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...t})}function $7(e){const t=N7(e),{Fp:n,n:r,prehash:i,hash:a,randomBytes:c,nByteLength:u,h:f}=t,d=uh<<BigInt(u*8)-Hn,p=n.create,g=TD(t.n,t.nBitLength),y=t.uvRatio||((D,R)=>{try{return{isValid:!0,value:n.sqrt(D*n.inv(R))}}catch{return{isValid:!1,value:Yr}}}),b=t.adjustScalarBytes||(D=>D),v=t.domain||((D,R,L)=>{if(i0("phflag",L),R.length||L)throw new Error("Contexts/pre-hash are not supported");return D});function E(D,R){Su("coordinate "+D,R,Yr,d)}function S(D){if(!(D instanceof O))throw new Error("ExtendedPoint expected")}const _=Ax((D,R)=>{const{ex:L,ey:V,ez:X}=D,N=D.is0();R==null&&(R=N?C7:n.inv(X));const K=p(L*R),te=p(V*R),se=p(X*R);if(N)return{x:Yr,y:Hn};if(se!==Hn)throw new Error("invZ was invalid");return{x:K,y:te}}),T=Ax(D=>{const{a:R,d:L}=t;if(D.is0())throw new Error("bad point: ZERO");const{ex:V,ey:X,ez:N,et:K}=D,te=p(V*V),se=p(X*X),ie=p(N*N),fe=p(ie*ie),Q=p(te*R),ve=p(ie*p(Q+se)),ye=p(fe+p(L*p(te*se)));if(ve!==ye)throw new Error("bad point: equation left != right (1)");const _e=p(V*X),Oe=p(N*K);if(_e!==Oe)throw new Error("bad point: equation left != right (2)");return!0});class O{constructor(R,L,V,X){this.ex=R,this.ey=L,this.ez=V,this.et=X,E("x",R),E("y",L),E("z",V),E("t",X),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(R){if(R instanceof O)throw new Error("extended point not allowed");const{x:L,y:V}=R||{};return E("x",L),E("y",V),new O(L,V,Hn,p(L*V))}static normalizeZ(R){const L=n.invertBatch(R.map(V=>V.ez));return R.map((V,X)=>V.toAffine(L[X])).map(O.fromAffine)}static msm(R,L){return T7(O,g,R,L)}_setWindowSize(R){B.setWindowSize(this,R)}assertValidity(){T(this)}equals(R){S(R);const{ex:L,ey:V,ez:X}=this,{ex:N,ey:K,ez:te}=R,se=p(L*te),ie=p(N*X),fe=p(V*te),Q=p(K*X);return se===ie&&fe===Q}is0(){return this.equals(O.ZERO)}negate(){return new O(p(-this.ex),this.ey,this.ez,p(-this.et))}double(){const{a:R}=t,{ex:L,ey:V,ez:X}=this,N=p(L*L),K=p(V*V),te=p(uh*p(X*X)),se=p(R*N),ie=L+V,fe=p(p(ie*ie)-N-K),Q=se+K,ve=Q-te,ye=se-K,_e=p(fe*ve),Oe=p(Q*ye),ke=p(fe*ye),Et=p(ve*Q);return new O(_e,Oe,Et,ke)}add(R){S(R);const{a:L,d:V}=t,{ex:X,ey:N,ez:K,et:te}=this,{ex:se,ey:ie,ez:fe,et:Q}=R;if(L===BigInt(-1)){const Pi=p((N-X)*(ie+se)),Sn=p((N+X)*(ie-se)),Qt=p(Sn-Pi);if(Qt===Yr)return this.double();const Jt=p(K*uh*Q),Sr=p(te*uh*fe),ai=Sr+Jt,_n=Sn+Pi,sr=Sr-Jt,U=p(ai*Qt),x=p(_n*sr),A=p(ai*sr),H=p(Qt*_n);return new O(U,x,H,A)}const ve=p(X*se),ye=p(N*ie),_e=p(te*V*Q),Oe=p(K*fe),ke=p((X+N)*(se+ie)-ve-ye),Et=Oe-_e,Tt=Oe+_e,xt=p(ye-L*ve),Ye=p(ke*Et),Vr=p(Tt*xt),At=p(ke*xt),vo=p(Et*Tt);return new O(Ye,Vr,vo,At)}subtract(R){return this.add(R.negate())}wNAF(R){return B.wNAFCached(this,R,O.normalizeZ)}multiply(R){const L=R;Su("scalar",L,Hn,r);const{p:V,f:X}=this.wNAF(L);return O.normalizeZ([V,X])[0]}multiplyUnsafe(R,L=O.ZERO){const V=R;return Su("scalar",V,Yr,r),V===Yr?I:this.is0()||V===Hn?this:B.wNAFCachedUnsafe(this,V,O.normalizeZ,L)}isSmallOrder(){return this.multiplyUnsafe(f).is0()}isTorsionFree(){return B.unsafeLadder(this,r).is0()}toAffine(R){return _(this,R)}clearCofactor(){const{h:R}=t;return R===Hn?this:this.multiplyUnsafe(R)}static fromHex(R,L=!1){const{d:V,a:X}=t,N=n.BYTES;R=Ji("pointHex",R,N),i0("zip215",L);const K=R.slice(),te=R[N-1];K[N-1]=te&-129;const se=jh(K),ie=L?d:n.ORDER;Su("pointHex.y",se,Yr,ie);const fe=p(se*se),Q=p(fe-Hn),ve=p(V*fe-X);let{isValid:ye,value:_e}=y(Q,ve);if(!ye)throw new Error("Point.fromHex: invalid y coordinate");const Oe=(_e&Hn)===Hn,ke=(te&128)!==0;if(!L&&_e===Yr&&ke)throw new Error("Point.fromHex: x=0 and x_0=1");return ke!==Oe&&(_e=p(-_e)),O.fromAffine({x:_e,y:se})}static fromPrivateKey(R){return k(R).point}toRawBytes(){const{x:R,y:L}=this.toAffine(),V=Cb(L,n.BYTES);return V[V.length-1]|=R&Hn?128:0,V}toHex(){return Qv(this.toRawBytes())}}O.BASE=new O(t.Gx,t.Gy,Hn,p(t.Gx*t.Gy)),O.ZERO=new O(Yr,Hn,Hn,Yr);const{BASE:$,ZERO:I}=O,B=O7(O,u*8);function z(D){return Xt(D,r)}function q(D){return z(jh(D))}function k(D){const R=n.BYTES;D=Ji("private key",D,R);const L=Ji("hashed private key",a(D),2*R),V=b(L.slice(0,R)),X=L.slice(R,2*R),N=q(V),K=$.multiply(N),te=K.toRawBytes();return{head:V,prefix:X,scalar:N,point:K,pointBytes:te}}function W(D){return k(D).pointBytes}function F(D=new Uint8Array,...R){const L=xx(...R);return q(a(v(L,Ji("context",D),!!i)))}function G(D,R,L={}){D=Ji("message",D),i&&(D=i(D));const{prefix:V,scalar:X,pointBytes:N}=k(R),K=F(L.context,V,D),te=$.multiply(K).toRawBytes(),se=F(L.context,te,N,D),ie=z(K+se*X);Su("signature.s",ie,Yr,r);const fe=xx(te,Cb(ie,n.BYTES));return Ji("result",fe,n.BYTES*2)}const ne=I7;function ee(D,R,L,V=ne){const{context:X,zip215:N}=V,K=n.BYTES;D=Ji("signature",D,2*K),R=Ji("message",R),L=Ji("publicKey",L,K),N!==void 0&&i0("zip215",N),i&&(R=i(R));const te=jh(D.slice(K,2*K));let se,ie,fe;try{se=O.fromHex(L,N),ie=O.fromHex(D.slice(0,K),N),fe=$.multiplyUnsafe(te)}catch{return!1}if(!N&&se.isSmallOrder())return!1;const Q=F(X,ie.toRawBytes(),se.toRawBytes(),R);return ie.add(se.multiplyUnsafe(Q)).subtract(fe).clearCofactor().equals(O.ZERO)}return $._setWindowSize(8),{CURVE:t,getPublicKey:W,sign:G,verify:ee,ExtendedPoint:O,utils:{getExtendedPublicKey:k,randomPrivateKey:()=>c(n.BYTES),precompute(D=8,R=O.BASE){return R._setWindowSize(D),R.multiply(BigInt(3)),R}}}}BigInt(0),BigInt(1);const ew=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),Cx=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const B7=BigInt(1),Ix=BigInt(2);BigInt(3);const P7=BigInt(5),U7=BigInt(8);function k7(e){const t=BigInt(10),n=BigInt(20),r=BigInt(40),i=BigInt(80),a=ew,c=e*e%a*e%a,u=hi(c,Ix,a)*c%a,f=hi(u,B7,a)*e%a,d=hi(f,P7,a)*f%a,p=hi(d,t,a)*d%a,g=hi(p,n,a)*p%a,y=hi(g,r,a)*g%a,b=hi(y,i,a)*y%a,v=hi(b,i,a)*y%a,E=hi(v,t,a)*d%a;return{pow_p_5_8:hi(E,Ix,a)*e%a,b2:c}}function M7(e){return e[0]&=248,e[31]&=127,e[31]|=64,e}function j7(e,t){const n=ew,r=Xt(t*t*t,n),i=Xt(r*r*t,n),a=k7(e*i).pow_p_5_8;let c=Xt(e*r*a,n);const u=Xt(t*c*c,n),f=c,d=Xt(c*Cx,n),p=u===e,g=u===Xt(-e,n),y=u===Xt(-e*Cx,n);return p&&(c=f),(g||y)&&(c=d),w7(c,n)&&(c=Xt(-c,n)),{isValid:p||g,value:c}}const L7=TD(ew,void 0,!0),z7={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:L7,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:U7,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:c7,randomBytes:ED,adjustScalarBytes:M7,uvRatio:j7},ID=$7(z7),q7="EdDSA",H7="JWT",sp=".",Bp="base64url",ND="utf8",$D="utf8",F7=":",V7="did",G7="key",Nx="base58btc",K7="z",W7="K36",Y7=32;function tw(e){return globalThis.Buffer!=null?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}function BD(e=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?tw(globalThis.Buffer.allocUnsafe(e)):new Uint8Array(e)}function PD(e,t){t||(t=e.reduce((i,a)=>i+a.length,0));const n=BD(t);let r=0;for(const i of e)n.set(i,r),r+=i.length;return tw(n)}function X7(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var i=0;i<e.length;i++){var a=e.charAt(i),c=a.charCodeAt(0);if(n[c]!==255)throw new TypeError(a+" is ambiguous");n[c]=i}var u=e.length,f=e.charAt(0),d=Math.log(u)/Math.log(256),p=Math.log(256)/Math.log(u);function g(v){if(v instanceof Uint8Array||(ArrayBuffer.isView(v)?v=new Uint8Array(v.buffer,v.byteOffset,v.byteLength):Array.isArray(v)&&(v=Uint8Array.from(v))),!(v instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(v.length===0)return"";for(var E=0,S=0,_=0,T=v.length;_!==T&&v[_]===0;)_++,E++;for(var O=(T-_)*p+1>>>0,$=new Uint8Array(O);_!==T;){for(var I=v[_],B=0,z=O-1;(I!==0||B<S)&&z!==-1;z--,B++)I+=256*$[z]>>>0,$[z]=I%u>>>0,I=I/u>>>0;if(I!==0)throw new Error("Non-zero carry");S=B,_++}for(var q=O-S;q!==O&&$[q]===0;)q++;for(var k=f.repeat(E);q<O;++q)k+=e.charAt($[q]);return k}function y(v){if(typeof v!="string")throw new TypeError("Expected String");if(v.length===0)return new Uint8Array;var E=0;if(v[E]!==" "){for(var S=0,_=0;v[E]===f;)S++,E++;for(var T=(v.length-E)*d+1>>>0,O=new Uint8Array(T);v[E];){var $=n[v.charCodeAt(E)];if($===255)return;for(var I=0,B=T-1;($!==0||I<_)&&B!==-1;B--,I++)$+=u*O[B]>>>0,O[B]=$%256>>>0,$=$/256>>>0;if($!==0)throw new Error("Non-zero carry");_=I,E++}if(v[E]!==" "){for(var z=T-_;z!==T&&O[z]===0;)z++;for(var q=new Uint8Array(S+(T-z)),k=S;z!==T;)q[k++]=O[z++];return q}}}function b(v){var E=y(v);if(E)return E;throw new Error(`Non-${t} character`)}return{encode:g,decodeUnsafe:y,decode:b}}var Z7=X7,Q7=Z7;const UD=e=>{if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")},J7=e=>new TextEncoder().encode(e),ez=e=>new TextDecoder().decode(e);let tz=class{constructor(t,n,r){this.name=t,this.prefix=n,this.baseEncode=r}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}},nz=class{constructor(t,n,r){if(this.name=t,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return kD(this,t)}},rz=class{constructor(t){this.decoders=t}or(t){return kD(this,t)}decode(t){const n=t[0],r=this.decoders[n];if(r)return r.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const kD=(e,t)=>new rz({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});let iz=class{constructor(t,n,r,i){this.name=t,this.prefix=n,this.baseEncode=r,this.baseDecode=i,this.encoder=new tz(t,n,r),this.decoder=new nz(t,n,i)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}};const Pp=({name:e,prefix:t,encode:n,decode:r})=>new iz(e,t,n,r),Df=({prefix:e,name:t,alphabet:n})=>{const{encode:r,decode:i}=Q7(n,t);return Pp({prefix:e,name:t,encode:r,decode:a=>UD(i(a))})},sz=(e,t,n,r)=>{const i={};for(let p=0;p<t.length;++p)i[t[p]]=p;let a=e.length;for(;e[a-1]==="=";)--a;const c=new Uint8Array(a*n/8|0);let u=0,f=0,d=0;for(let p=0;p<a;++p){const g=i[e[p]];if(g===void 0)throw new SyntaxError(`Non-${r} character`);f=f<<n|g,u+=n,u>=8&&(u-=8,c[d++]=255&f>>u)}if(u>=n||255&f<<8-u)throw new SyntaxError("Unexpected end of data");return c},oz=(e,t,n)=>{const r=t[t.length-1]==="=",i=(1<<n)-1;let a="",c=0,u=0;for(let f=0;f<e.length;++f)for(u=u<<8|e[f],c+=8;c>n;)c-=n,a+=t[i&u>>c];if(c&&(a+=t[i&u<<n-c]),r)for(;a.length*n&7;)a+="=";return a},vn=({name:e,prefix:t,bitsPerChar:n,alphabet:r})=>Pp({prefix:t,name:e,encode(i){return oz(i,r,n)},decode(i){return sz(i,r,n,e)}}),az=Pp({prefix:"\0",name:"identity",encode:e=>ez(e),decode:e=>J7(e)});var cz=Object.freeze({__proto__:null,identity:az});const lz=vn({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var uz=Object.freeze({__proto__:null,base2:lz});const fz=vn({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var dz=Object.freeze({__proto__:null,base8:fz});const hz=Df({prefix:"9",name:"base10",alphabet:"0123456789"});var pz=Object.freeze({__proto__:null,base10:hz});const gz=vn({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),mz=vn({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var yz=Object.freeze({__proto__:null,base16:gz,base16upper:mz});const bz=vn({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),vz=vn({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),wz=vn({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Ez=vn({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Sz=vn({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),_z=vn({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),xz=vn({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Az=vn({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Rz=vn({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Oz=Object.freeze({__proto__:null,base32:bz,base32upper:vz,base32pad:wz,base32padupper:Ez,base32hex:Sz,base32hexupper:_z,base32hexpad:xz,base32hexpadupper:Az,base32z:Rz});const Tz=Df({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Dz=Df({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var Cz=Object.freeze({__proto__:null,base36:Tz,base36upper:Dz});const Iz=Df({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Nz=Df({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var $z=Object.freeze({__proto__:null,base58btc:Iz,base58flickr:Nz});const Bz=vn({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Pz=vn({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Uz=vn({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),kz=vn({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Mz=Object.freeze({__proto__:null,base64:Bz,base64pad:Pz,base64url:Uz,base64urlpad:kz});const MD=Array.from(""),jz=MD.reduce((e,t,n)=>(e[n]=t,e),[]),Lz=MD.reduce((e,t,n)=>(e[t.codePointAt(0)]=n,e),[]);function zz(e){return e.reduce((t,n)=>(t+=jz[n],t),"")}function qz(e){const t=[];for(const n of e){const r=Lz[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);t.push(r)}return new Uint8Array(t)}const Hz=Pp({prefix:"",name:"base256emoji",encode:zz,decode:qz});var Fz=Object.freeze({__proto__:null,base256emoji:Hz}),Vz=jD,$x=128,Gz=-128,Kz=Math.pow(2,31);function jD(e,t,n){t=t||[],n=n||0;for(var r=n;e>=Kz;)t[n++]=e&255|$x,e/=128;for(;e&Gz;)t[n++]=e&255|$x,e>>>=7;return t[n]=e|0,jD.bytes=n-r+1,t}var Wz=Nb,Yz=128,Bx=127;function Nb(e,r){var n=0,r=r||0,i=0,a=r,c,u=e.length;do{if(a>=u)throw Nb.bytes=0,new RangeError("Could not decode varint");c=e[a++],n+=i<28?(c&Bx)<<i:(c&Bx)*Math.pow(2,i),i+=7}while(c>=Yz);return Nb.bytes=a-r,n}var Xz=Math.pow(2,7),Zz=Math.pow(2,14),Qz=Math.pow(2,21),Jz=Math.pow(2,28),eq=Math.pow(2,35),tq=Math.pow(2,42),nq=Math.pow(2,49),rq=Math.pow(2,56),iq=Math.pow(2,63),sq=function(e){return e<Xz?1:e<Zz?2:e<Qz?3:e<Jz?4:e<eq?5:e<tq?6:e<nq?7:e<rq?8:e<iq?9:10},oq={encode:Vz,decode:Wz,encodingLength:sq},LD=oq;const Px=(e,t,n=0)=>(LD.encode(e,t,n),t),Ux=e=>LD.encodingLength(e),$b=(e,t)=>{const n=t.byteLength,r=Ux(e),i=r+Ux(n),a=new Uint8Array(i+n);return Px(e,a,0),Px(n,a,r),a.set(t,i),new aq(e,n,t,a)};let aq=class{constructor(t,n,r,i){this.code=t,this.size=n,this.digest=r,this.bytes=i}};const zD=({name:e,code:t,encode:n})=>new cq(e,t,n);let cq=class{constructor(t,n,r){this.name=t,this.code=n,this.encode=r}digest(t){if(t instanceof Uint8Array){const n=this.encode(t);return n instanceof Uint8Array?$b(this.code,n):n.then(r=>$b(this.code,r))}else throw Error("Unknown type, must be binary type")}};const qD=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),lq=zD({name:"sha2-256",code:18,encode:qD("SHA-256")}),uq=zD({name:"sha2-512",code:19,encode:qD("SHA-512")});var fq=Object.freeze({__proto__:null,sha256:lq,sha512:uq});const HD=0,dq="identity",FD=UD,hq=e=>$b(HD,FD(e)),pq={code:HD,name:dq,encode:FD,digest:hq};var gq=Object.freeze({__proto__:null,identity:pq});new TextEncoder,new TextDecoder;const kx={...cz,...uz,...dz,...pz,...yz,...Oz,...Cz,...$z,...Mz,...Fz};({...fq,...gq});function VD(e,t,n,r){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:n},decoder:{decode:r}}}const Mx=VD("utf8","u",e=>"u"+new TextDecoder("utf8").decode(e),e=>new TextEncoder().encode(e.substring(1))),u0=VD("ascii","a",e=>{let t="a";for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t},e=>{e=e.substring(1);const t=BD(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}),GD={utf8:Mx,"utf-8":Mx,hex:kx.base16,latin1:u0,ascii:u0,binary:u0,...kx};function Up(e,t="utf8"){const n=GD[t];if(!n)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8"):n.encoder.encode(e).substring(1)}function al(e,t="utf8"){const n=GD[t];if(!n)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?tw(globalThis.Buffer.from(e,"utf-8")):n.decoder.decode(`${n.prefix}${e}`)}function jx(e){return ca(Up(al(e,Bp),ND))}function op(e){return Up(al(ms(e),ND),Bp)}function KD(e){const t=al(W7,Nx),n=K7+Up(PD([t,e]),Nx);return[V7,G7,n].join(F7)}function mq(e){return Up(e,Bp)}function yq(e){return al(e,Bp)}function bq(e){return al([op(e.header),op(e.payload)].join(sp),$D)}function vq(e){return[op(e.header),op(e.payload),mq(e.signature)].join(sp)}function Bb(e){const t=e.split(sp),n=jx(t[0]),r=jx(t[1]),i=yq(t[2]),a=al(t.slice(0,2).join(sp),$D);return{header:n,payload:r,signature:i,data:a}}function Lx(e=ED(Y7)){const t=ID.getPublicKey(e);return{secretKey:PD([e,t]),publicKey:t}}async function wq(e,t,n,r,i=Ee.fromMiliseconds(Date.now())){const a={alg:q7,typ:H7},c=KD(r.publicKey),u=i+n,f={iss:c,sub:e,aud:t,iat:i,exp:u},d=bq({header:a,payload:f}),p=ID.sign(d,r.secretKey.slice(0,32));return vq({header:a,payload:f,signature:p})}function nw(e){return globalThis.Buffer!=null?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}function WD(e=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?nw(globalThis.Buffer.allocUnsafe(e)):new Uint8Array(e)}function Hu(e,t){t||(t=e.reduce((i,a)=>i+a.length,0));const n=WD(t);let r=0;for(const i of e)n.set(i,r),r+=i.length;return nw(n)}function Eq(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var i=0;i<e.length;i++){var a=e.charAt(i),c=a.charCodeAt(0);if(n[c]!==255)throw new TypeError(a+" is ambiguous");n[c]=i}var u=e.length,f=e.charAt(0),d=Math.log(u)/Math.log(256),p=Math.log(256)/Math.log(u);function g(v){if(v instanceof Uint8Array||(ArrayBuffer.isView(v)?v=new Uint8Array(v.buffer,v.byteOffset,v.byteLength):Array.isArray(v)&&(v=Uint8Array.from(v))),!(v instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(v.length===0)return"";for(var E=0,S=0,_=0,T=v.length;_!==T&&v[_]===0;)_++,E++;for(var O=(T-_)*p+1>>>0,$=new Uint8Array(O);_!==T;){for(var I=v[_],B=0,z=O-1;(I!==0||B<S)&&z!==-1;z--,B++)I+=256*$[z]>>>0,$[z]=I%u>>>0,I=I/u>>>0;if(I!==0)throw new Error("Non-zero carry");S=B,_++}for(var q=O-S;q!==O&&$[q]===0;)q++;for(var k=f.repeat(E);q<O;++q)k+=e.charAt($[q]);return k}function y(v){if(typeof v!="string")throw new TypeError("Expected String");if(v.length===0)return new Uint8Array;var E=0;if(v[E]!==" "){for(var S=0,_=0;v[E]===f;)S++,E++;for(var T=(v.length-E)*d+1>>>0,O=new Uint8Array(T);v[E];){var $=n[v.charCodeAt(E)];if($===255)return;for(var I=0,B=T-1;($!==0||I<_)&&B!==-1;B--,I++)$+=u*O[B]>>>0,O[B]=$%256>>>0,$=$/256>>>0;if($!==0)throw new Error("Non-zero carry");_=I,E++}if(v[E]!==" "){for(var z=T-_;z!==T&&O[z]===0;)z++;for(var q=new Uint8Array(S+(T-z)),k=S;z!==T;)q[k++]=O[z++];return q}}}function b(v){var E=y(v);if(E)return E;throw new Error(`Non-${t} character`)}return{encode:g,decodeUnsafe:y,decode:b}}var Sq=Eq,_q=Sq;const xq=e=>{if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")},Aq=e=>new TextEncoder().encode(e),Rq=e=>new TextDecoder().decode(e);class Oq{constructor(t,n,r){this.name=t,this.prefix=n,this.baseEncode=r}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}}class Tq{constructor(t,n,r){if(this.name=t,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return YD(this,t)}}class Dq{constructor(t){this.decoders=t}or(t){return YD(this,t)}decode(t){const n=t[0],r=this.decoders[n];if(r)return r.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const YD=(e,t)=>new Dq({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class Cq{constructor(t,n,r,i){this.name=t,this.prefix=n,this.baseEncode=r,this.baseDecode=i,this.encoder=new Oq(t,n,r),this.decoder=new Tq(t,n,i)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}}const kp=({name:e,prefix:t,encode:n,decode:r})=>new Cq(e,t,n,r),Cf=({prefix:e,name:t,alphabet:n})=>{const{encode:r,decode:i}=_q(n,t);return kp({prefix:e,name:t,encode:r,decode:a=>xq(i(a))})},Iq=(e,t,n,r)=>{const i={};for(let p=0;p<t.length;++p)i[t[p]]=p;let a=e.length;for(;e[a-1]==="=";)--a;const c=new Uint8Array(a*n/8|0);let u=0,f=0,d=0;for(let p=0;p<a;++p){const g=i[e[p]];if(g===void 0)throw new SyntaxError(`Non-${r} character`);f=f<<n|g,u+=n,u>=8&&(u-=8,c[d++]=255&f>>u)}if(u>=n||255&f<<8-u)throw new SyntaxError("Unexpected end of data");return c},Nq=(e,t,n)=>{const r=t[t.length-1]==="=",i=(1<<n)-1;let a="",c=0,u=0;for(let f=0;f<e.length;++f)for(u=u<<8|e[f],c+=8;c>n;)c-=n,a+=t[i&u>>c];if(c&&(a+=t[i&u<<n-c]),r)for(;a.length*n&7;)a+="=";return a},wn=({name:e,prefix:t,bitsPerChar:n,alphabet:r})=>kp({prefix:t,name:e,encode(i){return Nq(i,r,n)},decode(i){return Iq(i,r,n,e)}}),$q=kp({prefix:"\0",name:"identity",encode:e=>Rq(e),decode:e=>Aq(e)}),Bq=Object.freeze(Object.defineProperty({__proto__:null,identity:$q},Symbol.toStringTag,{value:"Module"})),Pq=wn({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),Uq=Object.freeze(Object.defineProperty({__proto__:null,base2:Pq},Symbol.toStringTag,{value:"Module"})),kq=wn({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),Mq=Object.freeze(Object.defineProperty({__proto__:null,base8:kq},Symbol.toStringTag,{value:"Module"})),jq=Cf({prefix:"9",name:"base10",alphabet:"0123456789"}),Lq=Object.freeze(Object.defineProperty({__proto__:null,base10:jq},Symbol.toStringTag,{value:"Module"})),zq=wn({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),qq=wn({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),Hq=Object.freeze(Object.defineProperty({__proto__:null,base16:zq,base16upper:qq},Symbol.toStringTag,{value:"Module"})),Fq=wn({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Vq=wn({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Gq=wn({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Kq=wn({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Wq=wn({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Yq=wn({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Xq=wn({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Zq=wn({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Qq=wn({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),Jq=Object.freeze(Object.defineProperty({__proto__:null,base32:Fq,base32hex:Wq,base32hexpad:Xq,base32hexpadupper:Zq,base32hexupper:Yq,base32pad:Gq,base32padupper:Kq,base32upper:Vq,base32z:Qq},Symbol.toStringTag,{value:"Module"})),eH=Cf({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),tH=Cf({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),nH=Object.freeze(Object.defineProperty({__proto__:null,base36:eH,base36upper:tH},Symbol.toStringTag,{value:"Module"})),rH=Cf({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),iH=Cf({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),sH=Object.freeze(Object.defineProperty({__proto__:null,base58btc:rH,base58flickr:iH},Symbol.toStringTag,{value:"Module"})),oH=wn({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),aH=wn({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),cH=wn({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),lH=wn({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),uH=Object.freeze(Object.defineProperty({__proto__:null,base64:oH,base64pad:aH,base64url:cH,base64urlpad:lH},Symbol.toStringTag,{value:"Module"})),XD=Array.from(""),fH=XD.reduce((e,t,n)=>(e[n]=t,e),[]),dH=XD.reduce((e,t,n)=>(e[t.codePointAt(0)]=n,e),[]);function hH(e){return e.reduce((t,n)=>(t+=fH[n],t),"")}function pH(e){const t=[];for(const n of e){const r=dH[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);t.push(r)}return new Uint8Array(t)}const gH=kp({prefix:"",name:"base256emoji",encode:hH,decode:pH}),mH=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:gH},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const zx={...Bq,...Uq,...Mq,...Lq,...Hq,...Jq,...nH,...sH,...uH,...mH};function ZD(e,t,n,r){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:n},decoder:{decode:r}}}const qx=ZD("utf8","u",e=>"u"+new TextDecoder("utf8").decode(e),e=>new TextEncoder().encode(e.substring(1))),f0=ZD("ascii","a",e=>{let t="a";for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t},e=>{e=e.substring(1);const t=WD(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}),QD={utf8:qx,"utf-8":qx,hex:zx.base16,latin1:f0,ascii:f0,binary:f0,...zx};function Mr(e,t="utf8"){const n=QD[t];if(!n)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?nw(globalThis.Buffer.from(e,"utf-8")):n.decoder.decode(`${n.prefix}${e}`)}function Qn(e,t="utf8"){const n=QD[t];if(!n)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8"):n.encoder.encode(e).substring(1)}const yH={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}};var d0,Hx;function JD(){if(Hx)return d0;Hx=1;const e="Input must be an string, Buffer or Uint8Array";function t(c){let u;if(c instanceof Uint8Array)u=c;else if(typeof c=="string")u=new TextEncoder().encode(c);else throw new Error(e);return u}function n(c){return Array.prototype.map.call(c,function(u){return(u<16?"0":"")+u.toString(16)}).join("")}function r(c){return(4294967296+c).toString(16).substring(1)}function i(c,u,f){let d=`
`+c+" = ";for(let p=0;p<u.length;p+=2){if(f===32)d+=r(u[p]).toUpperCase(),d+=" ",d+=r(u[p+1]).toUpperCase();else if(f===64)d+=r(u[p+1]).toUpperCase(),d+=r(u[p]).toUpperCase();else throw new Error("Invalid size "+f);p%6===4?d+=`
`+new Array(c.length+4).join(" "):p<u.length-2&&(d+=" ")}console.log(d)}function a(c,u,f){let d=new Date().getTime();const p=new Uint8Array(u);for(let y=0;y<u;y++)p[y]=y%256;const g=new Date().getTime();console.log("Generated random input in "+(g-d)+"ms"),d=g;for(let y=0;y<f;y++){const b=c(p),v=new Date().getTime(),E=v-d;d=v,console.log("Hashed in "+E+"ms: "+b.substring(0,20)+"..."),console.log(Math.round(u/(1<<20)/(E/1e3)*100)/100+" MB PER SECOND")}}return d0={normalizeInput:t,toHex:n,debugPrint:i,testSpeed:a},d0}var h0,Fx;function bH(){if(Fx)return h0;Fx=1;const e=JD();function t(_,T,O){const $=_[T]+_[O];let I=_[T+1]+_[O+1];$>=4294967296&&I++,_[T]=$,_[T+1]=I}function n(_,T,O,$){let I=_[T]+O;O<0&&(I+=4294967296);let B=_[T+1]+$;I>=4294967296&&B++,_[T]=I,_[T+1]=B}function r(_,T){return _[T]^_[T+1]<<8^_[T+2]<<16^_[T+3]<<24}function i(_,T,O,$,I,B){const z=d[I],q=d[I+1],k=d[B],W=d[B+1];t(f,_,T),n(f,_,z,q);let F=f[$]^f[_],G=f[$+1]^f[_+1];f[$]=G,f[$+1]=F,t(f,O,$),F=f[T]^f[O],G=f[T+1]^f[O+1],f[T]=F>>>24^G<<8,f[T+1]=G>>>24^F<<8,t(f,_,T),n(f,_,k,W),F=f[$]^f[_],G=f[$+1]^f[_+1],f[$]=F>>>16^G<<16,f[$+1]=G>>>16^F<<16,t(f,O,$),F=f[T]^f[O],G=f[T+1]^f[O+1],f[T]=G>>>31^F<<1,f[T+1]=F>>>31^G<<1}const a=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),c=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3],u=new Uint8Array(c.map(function(_){return _*2})),f=new Uint32Array(32),d=new Uint32Array(32);function p(_,T){let O=0;for(O=0;O<16;O++)f[O]=_.h[O],f[O+16]=a[O];for(f[24]=f[24]^_.t,f[25]=f[25]^_.t/4294967296,T&&(f[28]=~f[28],f[29]=~f[29]),O=0;O<32;O++)d[O]=r(_.b,4*O);for(O=0;O<12;O++)i(0,8,16,24,u[O*16+0],u[O*16+1]),i(2,10,18,26,u[O*16+2],u[O*16+3]),i(4,12,20,28,u[O*16+4],u[O*16+5]),i(6,14,22,30,u[O*16+6],u[O*16+7]),i(0,10,20,30,u[O*16+8],u[O*16+9]),i(2,12,22,24,u[O*16+10],u[O*16+11]),i(4,14,16,26,u[O*16+12],u[O*16+13]),i(6,8,18,28,u[O*16+14],u[O*16+15]);for(O=0;O<16;O++)_.h[O]=_.h[O]^f[O]^f[O+16]}const g=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);function y(_,T,O,$){if(_===0||_>64)throw new Error("Illegal output length, expected 0 < length <= 64");if(T&&T.length>64)throw new Error("Illegal key, expected Uint8Array with 0 < length <= 64");if(O&&O.length!==16)throw new Error("Illegal salt, expected Uint8Array with length is 16");if($&&$.length!==16)throw new Error("Illegal personal, expected Uint8Array with length is 16");const I={b:new Uint8Array(128),h:new Uint32Array(16),t:0,c:0,outlen:_};g.fill(0),g[0]=_,T&&(g[1]=T.length),g[2]=1,g[3]=1,O&&g.set(O,32),$&&g.set($,48);for(let B=0;B<16;B++)I.h[B]=a[B]^r(g,B*4);return T&&(b(I,T),I.c=128),I}function b(_,T){for(let O=0;O<T.length;O++)_.c===128&&(_.t+=_.c,p(_,!1),_.c=0),_.b[_.c++]=T[O]}function v(_){for(_.t+=_.c;_.c<128;)_.b[_.c++]=0;p(_,!0);const T=new Uint8Array(_.outlen);for(let O=0;O<_.outlen;O++)T[O]=_.h[O>>2]>>8*(O&3);return T}function E(_,T,O,$,I){O=O||64,_=e.normalizeInput(_),$&&($=e.normalizeInput($)),I&&(I=e.normalizeInput(I));const B=y(O,T,$,I);return b(B,_),v(B)}function S(_,T,O,$,I){const B=E(_,T,O,$,I);return e.toHex(B)}return h0={blake2b:E,blake2bHex:S,blake2bInit:y,blake2bUpdate:b,blake2bFinal:v},h0}var p0,Vx;function vH(){if(Vx)return p0;Vx=1;const e=JD();function t(v,E){return v[E]^v[E+1]<<8^v[E+2]<<16^v[E+3]<<24}function n(v,E,S,_,T,O){c[v]=c[v]+c[E]+T,c[_]=r(c[_]^c[v],16),c[S]=c[S]+c[_],c[E]=r(c[E]^c[S],12),c[v]=c[v]+c[E]+O,c[_]=r(c[_]^c[v],8),c[S]=c[S]+c[_],c[E]=r(c[E]^c[S],7)}function r(v,E){return v>>>E^v<<32-E}const i=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),a=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0]),c=new Uint32Array(16),u=new Uint32Array(16);function f(v,E){let S=0;for(S=0;S<8;S++)c[S]=v.h[S],c[S+8]=i[S];for(c[12]^=v.t,c[13]^=v.t/4294967296,E&&(c[14]=~c[14]),S=0;S<16;S++)u[S]=t(v.b,4*S);for(S=0;S<10;S++)n(0,4,8,12,u[a[S*16+0]],u[a[S*16+1]]),n(1,5,9,13,u[a[S*16+2]],u[a[S*16+3]]),n(2,6,10,14,u[a[S*16+4]],u[a[S*16+5]]),n(3,7,11,15,u[a[S*16+6]],u[a[S*16+7]]),n(0,5,10,15,u[a[S*16+8]],u[a[S*16+9]]),n(1,6,11,12,u[a[S*16+10]],u[a[S*16+11]]),n(2,7,8,13,u[a[S*16+12]],u[a[S*16+13]]),n(3,4,9,14,u[a[S*16+14]],u[a[S*16+15]]);for(S=0;S<8;S++)v.h[S]^=c[S]^c[S+8]}function d(v,E){if(!(v>0&&v<=32))throw new Error("Incorrect output length, should be in [1, 32]");const S=E?E.length:0;if(E&&!(S>0&&S<=32))throw new Error("Incorrect key length, should be in [1, 32]");const _={h:new Uint32Array(i),b:new Uint8Array(64),c:0,t:0,outlen:v};return _.h[0]^=16842752^S<<8^v,S>0&&(p(_,E),_.c=64),_}function p(v,E){for(let S=0;S<E.length;S++)v.c===64&&(v.t+=v.c,f(v,!1),v.c=0),v.b[v.c++]=E[S]}function g(v){for(v.t+=v.c;v.c<64;)v.b[v.c++]=0;f(v,!0);const E=new Uint8Array(v.outlen);for(let S=0;S<v.outlen;S++)E[S]=v.h[S>>2]>>8*(S&3)&255;return E}function y(v,E,S){S=S||32,v=e.normalizeInput(v);const _=d(S,E);return p(_,v),g(_)}function b(v,E,S){const _=y(v,E,S);return e.toHex(_)}return p0={blake2s:y,blake2sHex:b,blake2sInit:d,blake2sUpdate:p,blake2sFinal:g},p0}var g0,Gx;function wH(){if(Gx)return g0;Gx=1;const e=bH(),t=vH();return g0={blake2b:e.blake2b,blake2bHex:e.blake2bHex,blake2bInit:e.blake2bInit,blake2bUpdate:e.blake2bUpdate,blake2bFinal:e.blake2bFinal,blake2s:t.blake2s,blake2sHex:t.blake2sHex,blake2sInit:t.blake2sInit,blake2sUpdate:t.blake2sUpdate,blake2sFinal:t.blake2sFinal},g0}var EH=wH(),SH={};const _H=":";function Vc(e){const[t,n]=e.split(_H);return{namespace:t,reference:n}}function eC(e,t){return e.includes(":")?[e]:t.chains||[]}var xH=Object.defineProperty,AH=Object.defineProperties,RH=Object.getOwnPropertyDescriptors,Kx=Object.getOwnPropertySymbols,OH=Object.prototype.hasOwnProperty,TH=Object.prototype.propertyIsEnumerable,Pb=(e,t,n)=>t in e?xH(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Wx=(e,t)=>{for(var n in t||(t={}))OH.call(t,n)&&Pb(e,n,t[n]);if(Kx)for(var n of Kx(t))TH.call(t,n)&&Pb(e,n,t[n]);return e},DH=(e,t)=>AH(e,RH(t)),Yx=(e,t,n)=>Pb(e,typeof t!="symbol"?t+"":t,n);const CH="ReactNative",br={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},IH="js";function ap(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function yo(){return!gs.getDocument()&&!!gs.getNavigator()&&navigator.product===CH}function NH(){return yo()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="android"}function $H(){return yo()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="ios"}function cl(){return!ap()&&!!gs.getNavigator()&&!!gs.getDocument()}function If(){return yo()?br.reactNative:ap()?br.node:cl()?br.browser:br.unknown}function Xx(){var e;try{return yo()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(e=global.Application)==null?void 0:e.applicationId:void 0}catch{return}}function BH(e,t){const n=new URLSearchParams(e);for(const r of Object.keys(t).sort())if(t.hasOwnProperty(r)){const i=t[r];i!==void 0&&n.set(r,i)}return n.toString()}function PH(e){var t,n;const r=tC();try{return e!=null&&e.url&&r.url&&new URL(e.url).host!==new URL(r.url).host&&(console.warn(`The configured WalletConnect 'metadata.url':${e.url} differs from the actual page url:${r.url}. This is probably unintended and can lead to issues.`),e.url=r.url),(t=e?.icons)!=null&&t.length&&e.icons.length>0&&(e.icons=e.icons.filter(i=>i!=="")),DH(Wx(Wx({},r),e),{url:e?.url||r.url,name:e?.name||r.name,description:e?.description||r.description,icons:(n=e?.icons)!=null&&n.length&&e.icons.length>0?e.icons:r.icons})}catch(i){return console.warn("Error populating app metadata",i),e||r}}function tC(){return Kj.getWindowMetadata()||{name:"",description:"",url:"",icons:[""]}}function UH(){if(If()===br.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:n,Version:r}=global.Platform;return[n,r].join("-")}const e=fj();if(e===null)return"unknown";const t=e.os?e.os.replace(" ","").toLowerCase():"unknown";return e.type==="browser"?[t,e.name,e.version].join("-"):[t,e.version].join("-")}function kH(){var e;const t=If();return t===br.browser?[t,((e=gs.getLocation())==null?void 0:e.host)||"unknown"].join(":"):t}function nC(e,t,n){const r=UH(),i=kH();return[[e,t].join("-"),[IH,n].join("-"),r,i].join("/")}function MH({protocol:e,version:t,relayUrl:n,sdkVersion:r,auth:i,projectId:a,useOnCloseEvent:c,bundleId:u,packageName:f}){const d=n.split("?"),p=nC(e,t,r),g={auth:i,ua:p,projectId:a,useOnCloseEvent:c,packageName:f||void 0,bundleId:u||void 0},y=BH(d[1]||"",g);return d[0]+"?"+y}function Zo(e,t){return e.filter(n=>t.includes(n)).length===e.length}function Ub(e){return Object.fromEntries(e.entries())}function kb(e){return new Map(Object.entries(e))}function Go(e=Ee.FIVE_MINUTES,t){const n=Ee.toMiliseconds(e||Ee.FIVE_MINUTES);let r,i,a,c;return{resolve:u=>{a&&r&&(clearTimeout(a),r(u),c=Promise.resolve(u))},reject:u=>{a&&i&&(clearTimeout(a),i(u))},done:()=>new Promise((u,f)=>{if(c)return u(c);a=setTimeout(()=>{const d=new Error(t);c=Promise.reject(d),f(d)},n),r=u,i=f})}}function ao(e,t,n){return new Promise(async(r,i)=>{const a=setTimeout(()=>i(new Error(n)),t);try{const c=await e;r(c)}catch(c){i(c)}clearTimeout(a)})}function rC(e,t){if(typeof t=="string"&&t.startsWith(`${e}:`))return t;if(e.toLowerCase()==="topic"){if(typeof t!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${t}`}else if(e.toLowerCase()==="id"){if(typeof t!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${t}`}throw new Error(`Unknown expirer target type: ${e}`)}function jH(e){return rC("topic",e)}function LH(e){return rC("id",e)}function iC(e){const[t,n]=e.split(":"),r={id:void 0,topic:void 0};if(t==="topic"&&typeof n=="string")r.topic=n;else if(t==="id"&&Number.isInteger(Number(n)))r.id=Number(n);else throw new Error(`Invalid target, expected id:number or topic:string, got ${t}:${n}`);return r}function Yt(e,t){return Ee.fromMiliseconds(Date.now()+Ee.toMiliseconds(e))}function to(e){return Date.now()>=Ee.toMiliseconds(e)}function Qe(e,t){return`${e}${t?`:${t}`:""}`}function Ai(e=[],t=[]){return[...new Set([...e,...t])]}async function zH({id:e,topic:t,wcDeepLink:n}){var r;try{if(!n)return;const i=typeof n=="string"?JSON.parse(n):n,a=i?.href;if(typeof a!="string")return;const c=qH(a,e,t),u=If();if(u===br.browser){if(!((r=gs.getDocument())!=null&&r.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}HH(c)}else u===br.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(c)}catch(i){console.error(i)}}function qH(e,t,n){const r=`requestId=${t}&sessionTopic=${n}`;e.endsWith("/")&&(e=e.slice(0,-1));let i=`${e}`;if(e.startsWith("https://t.me")){const a=e.includes("?")?"&startapp=":"?startapp=";i=`${i}${a}${KH(r,!0)}`}else i=`${i}/wc?${r}`;return i}function HH(e){let t="_self";GH()?t="_top":(VH()||e.startsWith("https://")||e.startsWith("http://"))&&(t="_blank"),window.open(e,t,"noreferrer noopener")}async function FH(e,t){let n="";try{if(cl()&&(n=localStorage.getItem(t),n))return n;n=await e.getItem(t)}catch(r){console.error(r)}return n}function Zx(e,t){if(!e.includes(t))return null;const n=e.split(/([&,?,=])/),r=n.indexOf(t);return n[r+2]}function Qx(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})}function rw(){return typeof process<"u"&&SH.IS_VITEST==="true"}function VH(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function GH(){try{return window.self!==window.top}catch{return!1}}function KH(e,t=!1){const n=Buffer.from(e).toString("base64");return t?n.replace(/[=]/g,""):n}function sC(e){return Buffer.from(e,"base64").toString("utf-8")}function WH(e){return new Promise(t=>setTimeout(t,e))}let YH=class{constructor({limit:t}){Yx(this,"limit"),Yx(this,"set"),this.limit=t,this.set=new Set}add(t){if(!this.set.has(t)){if(this.set.size>=this.limit){const n=this.set.values().next().value;n&&this.set.delete(n)}this.set.add(t)}}has(t){return this.set.has(t)}};const fh=BigInt(2**32-1),Jx=BigInt(32);function oC(e,t=!1){return t?{h:Number(e&fh),l:Number(e>>Jx&fh)}:{h:Number(e>>Jx&fh)|0,l:Number(e&fh)|0}}function aC(e,t=!1){const n=e.length;let r=new Uint32Array(n),i=new Uint32Array(n);for(let a=0;a<n;a++){const{h:c,l:u}=oC(e[a],t);[r[a],i[a]]=[c,u]}return[r,i]}const eA=(e,t,n)=>e>>>n,tA=(e,t,n)=>e<<32-n|t>>>n,no=(e,t,n)=>e>>>n|t<<32-n,ro=(e,t,n)=>e<<32-n|t>>>n,Pu=(e,t,n)=>e<<64-n|t>>>n-32,Uu=(e,t,n)=>e>>>n-32|t<<64-n,XH=(e,t)=>t,ZH=(e,t)=>e,QH=(e,t,n)=>e<<n|t>>>32-n,JH=(e,t,n)=>t<<n|e>>>32-n,eF=(e,t,n)=>t<<n-32|e>>>64-n,tF=(e,t,n)=>e<<n-32|t>>>64-n;function ti(e,t,n,r){const i=(t>>>0)+(r>>>0);return{h:e+n+(i/2**32|0)|0,l:i|0}}const iw=(e,t,n)=>(e>>>0)+(t>>>0)+(n>>>0),sw=(e,t,n,r)=>t+n+r+(e/2**32|0)|0,nF=(e,t,n,r)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0),rF=(e,t,n,r,i)=>t+n+r+i+(e/2**32|0)|0,iF=(e,t,n,r,i)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0)+(i>>>0),sF=(e,t,n,r,i,a)=>t+n+r+i+a+(e/2**32|0)|0,bc=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function ow(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function ys(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function jr(e,...t){if(!ow(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function aw(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");ys(e.outputLen),ys(e.blockLen)}function ho(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function cw(e,t){jr(e);const n=t.outputLen;if(e.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function uf(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))}function Lr(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}function m0(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function pi(e,t){return e<<32-t|e>>>t}const cC=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function lC(e){return e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255}const rs=cC?e=>e:e=>lC(e);function oF(e){for(let t=0;t<e.length;t++)e[t]=lC(e[t]);return e}const io=cC?e=>e:oF,uC=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",aF=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function ff(e){if(jr(e),uC)return e.toHex();let t="";for(let n=0;n<e.length;n++)t+=aF[e[n]];return t}const es={_0:48,_9:57,A:65,F:70,a:97,f:102};function nA(e){if(e>=es._0&&e<=es._9)return e-es._0;if(e>=es.A&&e<=es.F)return e-(es.A-10);if(e>=es.a&&e<=es.f)return e-(es.a-10)}function lw(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);if(uC)return Uint8Array.fromHex(e);const t=e.length,n=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(n);for(let i=0,a=0;i<n;i++,a+=2){const c=nA(e.charCodeAt(a)),u=nA(e.charCodeAt(a+1));if(c===void 0||u===void 0){const f=e[a]+e[a+1];throw new Error('hex string expected, got non-hex character "'+f+'" at index '+a)}r[i]=c*16+u}return r}function cF(e){if(typeof e!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(e))}function ii(e){return typeof e=="string"&&(e=cF(e)),jr(e),e}function Qo(...e){let t=0;for(let r=0;r<e.length;r++){const i=e[r];jr(i),t+=i.length}const n=new Uint8Array(t);for(let r=0,i=0;r<e.length;r++){const a=e[r];n.set(a,i),i+=a.length}return n}let Mp=class{};function Nf(e){const t=r=>e().update(ii(r)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function lF(e){const t=(r,i)=>e(i).update(ii(r)).digest(),n=e({});return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=r=>e(r),t}function ll(e=32){if(bc&&typeof bc.getRandomValues=="function")return bc.getRandomValues(new Uint8Array(e));if(bc&&typeof bc.randomBytes=="function")return Uint8Array.from(bc.randomBytes(e));throw new Error("crypto.getRandomValues must be defined")}const uF=BigInt(0),_u=BigInt(1),fF=BigInt(2),dF=BigInt(7),hF=BigInt(256),pF=BigInt(113),fC=[],dC=[],hC=[];for(let e=0,t=_u,n=1,r=0;e<24;e++){[n,r]=[r,(2*n+3*r)%5],fC.push(2*(5*r+n)),dC.push((e+1)*(e+2)/2%64);let i=uF;for(let a=0;a<7;a++)t=(t<<_u^(t>>dF)*pF)%hF,t&fF&&(i^=_u<<(_u<<BigInt(a))-_u);hC.push(i)}const pC=aC(hC,!0),gF=pC[0],mF=pC[1],rA=(e,t,n)=>n>32?eF(e,t,n):QH(e,t,n),iA=(e,t,n)=>n>32?tF(e,t,n):JH(e,t,n);function yF(e,t=24){const n=new Uint32Array(10);for(let r=24-t;r<24;r++){for(let c=0;c<10;c++)n[c]=e[c]^e[c+10]^e[c+20]^e[c+30]^e[c+40];for(let c=0;c<10;c+=2){const u=(c+8)%10,f=(c+2)%10,d=n[f],p=n[f+1],g=rA(d,p,1)^n[u],y=iA(d,p,1)^n[u+1];for(let b=0;b<50;b+=10)e[c+b]^=g,e[c+b+1]^=y}let i=e[2],a=e[3];for(let c=0;c<24;c++){const u=dC[c],f=rA(i,a,u),d=iA(i,a,u),p=fC[c];i=e[p],a=e[p+1],e[p]=f,e[p+1]=d}for(let c=0;c<50;c+=10){for(let u=0;u<10;u++)n[u]=e[c+u];for(let u=0;u<10;u++)e[c+u]^=~n[(u+2)%10]&n[(u+4)%10]}e[0]^=gF[r],e[1]^=mF[r]}Lr(n)}let bF=class gC extends Mp{constructor(t,n,r,i=!1,a=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=t,this.suffix=n,this.outputLen=r,this.enableXOF=i,this.rounds=a,ys(r),!(0<t&&t<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=uf(this.state)}clone(){return this._cloneInto()}keccak(){io(this.state32),yF(this.state32,this.rounds),io(this.state32),this.posOut=0,this.pos=0}update(t){ho(this),t=ii(t),jr(t);const{blockLen:n,state:r}=this,i=t.length;for(let a=0;a<i;){const c=Math.min(n-this.pos,i-a);for(let u=0;u<c;u++)r[this.pos++]^=t[a++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:n,pos:r,blockLen:i}=this;t[r]^=n,(n&128)!==0&&r===i-1&&this.keccak(),t[i-1]^=128,this.keccak()}writeInto(t){ho(this,!1),jr(t),this.finish();const n=this.state,{blockLen:r}=this;for(let i=0,a=t.length;i<a;){this.posOut>=r&&this.keccak();const c=Math.min(r-this.posOut,a-i);t.set(n.subarray(this.posOut,this.posOut+c),i),this.posOut+=c,i+=c}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return ys(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(cw(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,Lr(this.state)}_cloneInto(t){const{blockLen:n,suffix:r,outputLen:i,rounds:a,enableXOF:c}=this;return t||(t=new gC(n,r,i,c,a)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=a,t.suffix=r,t.outputLen=i,t.enableXOF=c,t.destroyed=this.destroyed,t}};const vF=(e,t,n)=>Nf(()=>new bF(t,e,n)),wF=vF(1,136,256/8);function EF(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const i=BigInt(32),a=BigInt(4294967295),c=Number(n>>i&a),u=Number(n&a),f=r?4:0,d=r?0:4;e.setUint32(t+f,c,r),e.setUint32(t+d,u,r)}function SF(e,t,n){return e&t^~e&n}function _F(e,t,n){return e&t^e&n^t&n}let mC=class extends Mp{constructor(t,n,r,i){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=t,this.outputLen=n,this.padOffset=r,this.isLE=i,this.buffer=new Uint8Array(t),this.view=m0(this.buffer)}update(t){ho(this),t=ii(t),jr(t);const{view:n,buffer:r,blockLen:i}=this,a=t.length;for(let c=0;c<a;){const u=Math.min(i-this.pos,a-c);if(u===i){const f=m0(t);for(;i<=a-c;c+=i)this.process(f,c);continue}r.set(t.subarray(c,c+u),this.pos),this.pos+=u,c+=u,this.pos===i&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){ho(this),cw(t,this),this.finished=!0;const{buffer:n,view:r,blockLen:i,isLE:a}=this;let{pos:c}=this;n[c++]=128,Lr(this.buffer.subarray(c)),this.padOffset>i-c&&(this.process(r,0),c=0);for(let g=c;g<i;g++)n[g]=0;EF(r,i-8,BigInt(this.length*8),a),this.process(r,0);const u=m0(t),f=this.outputLen;if(f%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const d=f/4,p=this.get();if(d>p.length)throw new Error("_sha2: outputLen bigger than state");for(let g=0;g<d;g++)u.setUint32(4*g,p[g],a)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:r,length:i,finished:a,destroyed:c,pos:u}=this;return t.destroyed=c,t.finished=a,t.length=i,t.pos=u,i%n&&t.buffer.set(r),t}clone(){return this._cloneInto()}};const Gs=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),On=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),Tn=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),xF=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Ks=new Uint32Array(64);let AF=class extends mC{constructor(t=32){super(64,t,8,!1),this.A=Gs[0]|0,this.B=Gs[1]|0,this.C=Gs[2]|0,this.D=Gs[3]|0,this.E=Gs[4]|0,this.F=Gs[5]|0,this.G=Gs[6]|0,this.H=Gs[7]|0}get(){const{A:t,B:n,C:r,D:i,E:a,F:c,G:u,H:f}=this;return[t,n,r,i,a,c,u,f]}set(t,n,r,i,a,c,u,f){this.A=t|0,this.B=n|0,this.C=r|0,this.D=i|0,this.E=a|0,this.F=c|0,this.G=u|0,this.H=f|0}process(t,n){for(let g=0;g<16;g++,n+=4)Ks[g]=t.getUint32(n,!1);for(let g=16;g<64;g++){const y=Ks[g-15],b=Ks[g-2],v=pi(y,7)^pi(y,18)^y>>>3,E=pi(b,17)^pi(b,19)^b>>>10;Ks[g]=E+Ks[g-7]+v+Ks[g-16]|0}let{A:r,B:i,C:a,D:c,E:u,F:f,G:d,H:p}=this;for(let g=0;g<64;g++){const y=pi(u,6)^pi(u,11)^pi(u,25),b=p+y+SF(u,f,d)+xF[g]+Ks[g]|0,v=(pi(r,2)^pi(r,13)^pi(r,22))+_F(r,i,a)|0;p=d,d=f,f=u,u=c+b|0,c=a,a=i,i=r,r=b+v|0}r=r+this.A|0,i=i+this.B|0,a=a+this.C|0,c=c+this.D|0,u=u+this.E|0,f=f+this.F|0,d=d+this.G|0,p=p+this.H|0,this.set(r,i,a,c,u,f,d,p)}roundClean(){Lr(Ks)}destroy(){this.set(0,0,0,0,0,0,0,0),Lr(this.buffer)}};const yC=aC(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),RF=yC[0],OF=yC[1],Ws=new Uint32Array(80),Ys=new Uint32Array(80);let uw=class extends mC{constructor(t=64){super(128,t,16,!1),this.Ah=Tn[0]|0,this.Al=Tn[1]|0,this.Bh=Tn[2]|0,this.Bl=Tn[3]|0,this.Ch=Tn[4]|0,this.Cl=Tn[5]|0,this.Dh=Tn[6]|0,this.Dl=Tn[7]|0,this.Eh=Tn[8]|0,this.El=Tn[9]|0,this.Fh=Tn[10]|0,this.Fl=Tn[11]|0,this.Gh=Tn[12]|0,this.Gl=Tn[13]|0,this.Hh=Tn[14]|0,this.Hl=Tn[15]|0}get(){const{Ah:t,Al:n,Bh:r,Bl:i,Ch:a,Cl:c,Dh:u,Dl:f,Eh:d,El:p,Fh:g,Fl:y,Gh:b,Gl:v,Hh:E,Hl:S}=this;return[t,n,r,i,a,c,u,f,d,p,g,y,b,v,E,S]}set(t,n,r,i,a,c,u,f,d,p,g,y,b,v,E,S){this.Ah=t|0,this.Al=n|0,this.Bh=r|0,this.Bl=i|0,this.Ch=a|0,this.Cl=c|0,this.Dh=u|0,this.Dl=f|0,this.Eh=d|0,this.El=p|0,this.Fh=g|0,this.Fl=y|0,this.Gh=b|0,this.Gl=v|0,this.Hh=E|0,this.Hl=S|0}process(t,n){for(let O=0;O<16;O++,n+=4)Ws[O]=t.getUint32(n),Ys[O]=t.getUint32(n+=4);for(let O=16;O<80;O++){const $=Ws[O-15]|0,I=Ys[O-15]|0,B=no($,I,1)^no($,I,8)^eA($,I,7),z=ro($,I,1)^ro($,I,8)^tA($,I,7),q=Ws[O-2]|0,k=Ys[O-2]|0,W=no(q,k,19)^Pu(q,k,61)^eA(q,k,6),F=ro(q,k,19)^Uu(q,k,61)^tA(q,k,6),G=nF(z,F,Ys[O-7],Ys[O-16]),ne=rF(G,B,W,Ws[O-7],Ws[O-16]);Ws[O]=ne|0,Ys[O]=G|0}let{Ah:r,Al:i,Bh:a,Bl:c,Ch:u,Cl:f,Dh:d,Dl:p,Eh:g,El:y,Fh:b,Fl:v,Gh:E,Gl:S,Hh:_,Hl:T}=this;for(let O=0;O<80;O++){const $=no(g,y,14)^no(g,y,18)^Pu(g,y,41),I=ro(g,y,14)^ro(g,y,18)^Uu(g,y,41),B=g&b^~g&E,z=y&v^~y&S,q=iF(T,I,z,OF[O],Ys[O]),k=sF(q,_,$,B,RF[O],Ws[O]),W=q|0,F=no(r,i,28)^Pu(r,i,34)^Pu(r,i,39),G=ro(r,i,28)^Uu(r,i,34)^Uu(r,i,39),ne=r&a^r&u^a&u,ee=i&c^i&f^c&f;_=E|0,T=S|0,E=b|0,S=v|0,b=g|0,v=y|0,{h:g,l:y}=ti(d|0,p|0,k|0,W|0),d=u|0,p=f|0,u=a|0,f=c|0,a=r|0,c=i|0;const D=iw(W,G,ee);r=sw(D,k,F,ne),i=D|0}({h:r,l:i}=ti(this.Ah|0,this.Al|0,r|0,i|0)),{h:a,l:c}=ti(this.Bh|0,this.Bl|0,a|0,c|0),{h:u,l:f}=ti(this.Ch|0,this.Cl|0,u|0,f|0),{h:d,l:p}=ti(this.Dh|0,this.Dl|0,d|0,p|0),{h:g,l:y}=ti(this.Eh|0,this.El|0,g|0,y|0),{h:b,l:v}=ti(this.Fh|0,this.Fl|0,b|0,v|0),{h:E,l:S}=ti(this.Gh|0,this.Gl|0,E|0,S|0),{h:_,l:T}=ti(this.Hh|0,this.Hl|0,_|0,T|0),this.set(r,i,a,c,u,f,d,p,g,y,b,v,E,S,_,T)}roundClean(){Lr(Ws,Ys)}destroy(){Lr(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}},TF=class extends uw{constructor(){super(48),this.Ah=On[0]|0,this.Al=On[1]|0,this.Bh=On[2]|0,this.Bl=On[3]|0,this.Ch=On[4]|0,this.Cl=On[5]|0,this.Dh=On[6]|0,this.Dl=On[7]|0,this.Eh=On[8]|0,this.El=On[9]|0,this.Fh=On[10]|0,this.Fl=On[11]|0,this.Gh=On[12]|0,this.Gl=On[13]|0,this.Hh=On[14]|0,this.Hl=On[15]|0}};const Dn=Uint32Array.from([573645204,4230739756,2673172387,3360449730,596883563,1867755857,2520282905,1497426621,2519219938,2827943907,3193839141,1401305490,721525244,746961066,246885852,2177182882]);class DF extends uw{constructor(){super(32),this.Ah=Dn[0]|0,this.Al=Dn[1]|0,this.Bh=Dn[2]|0,this.Bl=Dn[3]|0,this.Ch=Dn[4]|0,this.Cl=Dn[5]|0,this.Dh=Dn[6]|0,this.Dl=Dn[7]|0,this.Eh=Dn[8]|0,this.El=Dn[9]|0,this.Fh=Dn[10]|0,this.Fl=Dn[11]|0,this.Gh=Dn[12]|0,this.Gl=Dn[13]|0,this.Hh=Dn[14]|0,this.Hl=Dn[15]|0}}const jp=Nf(()=>new AF),CF=Nf(()=>new uw),IF=Nf(()=>new TF),NF=Nf(()=>new DF),$F=Uint8Array.from([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9]),Wt=Uint32Array.from([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),Se=new Uint32Array(32);function Xs(e,t,n,r,i,a){const c=i[a],u=i[a+1];let f=Se[2*e],d=Se[2*e+1],p=Se[2*t],g=Se[2*t+1],y=Se[2*n],b=Se[2*n+1],v=Se[2*r],E=Se[2*r+1],S=iw(f,p,c);d=sw(S,d,g,u),f=S|0,{Dh:E,Dl:v}={Dh:E^d,Dl:v^f},{Dh:E,Dl:v}={Dh:XH(E,v),Dl:ZH(E)},{h:b,l:y}=ti(b,y,E,v),{Bh:g,Bl:p}={Bh:g^b,Bl:p^y},{Bh:g,Bl:p}={Bh:no(g,p,24),Bl:ro(g,p,24)},Se[2*e]=f,Se[2*e+1]=d,Se[2*t]=p,Se[2*t+1]=g,Se[2*n]=y,Se[2*n+1]=b,Se[2*r]=v,Se[2*r+1]=E}function Zs(e,t,n,r,i,a){const c=i[a],u=i[a+1];let f=Se[2*e],d=Se[2*e+1],p=Se[2*t],g=Se[2*t+1],y=Se[2*n],b=Se[2*n+1],v=Se[2*r],E=Se[2*r+1],S=iw(f,p,c);d=sw(S,d,g,u),f=S|0,{Dh:E,Dl:v}={Dh:E^d,Dl:v^f},{Dh:E,Dl:v}={Dh:no(E,v,16),Dl:ro(E,v,16)},{h:b,l:y}=ti(b,y,E,v),{Bh:g,Bl:p}={Bh:g^b,Bl:p^y},{Bh:g,Bl:p}={Bh:Pu(g,p,63),Bl:Uu(g,p,63)},Se[2*e]=f,Se[2*e+1]=d,Se[2*t]=p,Se[2*t+1]=g,Se[2*n]=y,Se[2*n+1]=b,Se[2*r]=v,Se[2*r+1]=E}function BF(e,t={},n,r,i){if(ys(n),e<0||e>n)throw new Error("outputLen bigger than keyLen");const{key:a,salt:c,personalization:u}=t;if(a!==void 0&&(a.length<1||a.length>n))throw new Error("key length must be undefined or 1.."+n);if(c!==void 0&&c.length!==r)throw new Error("salt must be undefined or "+r);if(u!==void 0&&u.length!==i)throw new Error("personalization must be undefined or "+i)}class PF extends Mp{constructor(t,n){super(),this.finished=!1,this.destroyed=!1,this.length=0,this.pos=0,ys(t),ys(n),this.blockLen=t,this.outputLen=n,this.buffer=new Uint8Array(t),this.buffer32=uf(this.buffer)}update(t){ho(this),t=ii(t),jr(t);const{blockLen:n,buffer:r,buffer32:i}=this,a=t.length,c=t.byteOffset,u=t.buffer;for(let f=0;f<a;){this.pos===n&&(io(i),this.compress(i,0,!1),io(i),this.pos=0);const d=Math.min(n-this.pos,a-f),p=c+f;if(d===n&&!(p%4)&&f+d<a){const g=new Uint32Array(u,p,Math.floor((a-f)/4));io(g);for(let y=0;f+n<a;y+=i.length,f+=n)this.length+=n,this.compress(g,y,!1);io(g);continue}r.set(t.subarray(f,f+d),this.pos),this.pos+=d,this.length+=d,f+=d}return this}digestInto(t){ho(this),cw(t,this);const{pos:n,buffer32:r}=this;this.finished=!0,Lr(this.buffer.subarray(n)),io(r),this.compress(r,0,!0),io(r);const i=uf(t);this.get().forEach((a,c)=>i[c]=rs(a))}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){const{buffer:n,length:r,finished:i,destroyed:a,outputLen:c,pos:u}=this;return t||(t=new this.constructor({dkLen:c})),t.set(...this.get()),t.buffer.set(n),t.destroyed=a,t.finished=i,t.length=r,t.pos=u,t.outputLen=c,t}clone(){return this._cloneInto()}}class UF extends PF{constructor(t={}){const n=t.dkLen===void 0?64:t.dkLen;super(128,n),this.v0l=Wt[0]|0,this.v0h=Wt[1]|0,this.v1l=Wt[2]|0,this.v1h=Wt[3]|0,this.v2l=Wt[4]|0,this.v2h=Wt[5]|0,this.v3l=Wt[6]|0,this.v3h=Wt[7]|0,this.v4l=Wt[8]|0,this.v4h=Wt[9]|0,this.v5l=Wt[10]|0,this.v5h=Wt[11]|0,this.v6l=Wt[12]|0,this.v6h=Wt[13]|0,this.v7l=Wt[14]|0,this.v7h=Wt[15]|0,BF(n,t,64,16,16);let{key:r,personalization:i,salt:a}=t,c=0;if(r!==void 0&&(r=ii(r),c=r.length),this.v0l^=this.outputLen|c<<8|65536|1<<24,a!==void 0){a=ii(a);const u=uf(a);this.v4l^=rs(u[0]),this.v4h^=rs(u[1]),this.v5l^=rs(u[2]),this.v5h^=rs(u[3])}if(i!==void 0){i=ii(i);const u=uf(i);this.v6l^=rs(u[0]),this.v6h^=rs(u[1]),this.v7l^=rs(u[2]),this.v7h^=rs(u[3])}if(r!==void 0){const u=new Uint8Array(this.blockLen);u.set(r),this.update(u)}}get(){let{v0l:t,v0h:n,v1l:r,v1h:i,v2l:a,v2h:c,v3l:u,v3h:f,v4l:d,v4h:p,v5l:g,v5h:y,v6l:b,v6h:v,v7l:E,v7h:S}=this;return[t,n,r,i,a,c,u,f,d,p,g,y,b,v,E,S]}set(t,n,r,i,a,c,u,f,d,p,g,y,b,v,E,S){this.v0l=t|0,this.v0h=n|0,this.v1l=r|0,this.v1h=i|0,this.v2l=a|0,this.v2h=c|0,this.v3l=u|0,this.v3h=f|0,this.v4l=d|0,this.v4h=p|0,this.v5l=g|0,this.v5h=y|0,this.v6l=b|0,this.v6h=v|0,this.v7l=E|0,this.v7h=S|0}compress(t,n,r){this.get().forEach((f,d)=>Se[d]=f),Se.set(Wt,16);let{h:i,l:a}=oC(BigInt(this.length));Se[24]=Wt[8]^a,Se[25]=Wt[9]^i,r&&(Se[28]=~Se[28],Se[29]=~Se[29]);let c=0;const u=$F;for(let f=0;f<12;f++)Xs(0,4,8,12,t,n+2*u[c++]),Zs(0,4,8,12,t,n+2*u[c++]),Xs(1,5,9,13,t,n+2*u[c++]),Zs(1,5,9,13,t,n+2*u[c++]),Xs(2,6,10,14,t,n+2*u[c++]),Zs(2,6,10,14,t,n+2*u[c++]),Xs(3,7,11,15,t,n+2*u[c++]),Zs(3,7,11,15,t,n+2*u[c++]),Xs(0,5,10,15,t,n+2*u[c++]),Zs(0,5,10,15,t,n+2*u[c++]),Xs(1,6,11,12,t,n+2*u[c++]),Zs(1,6,11,12,t,n+2*u[c++]),Xs(2,7,8,13,t,n+2*u[c++]),Zs(2,7,8,13,t,n+2*u[c++]),Xs(3,4,9,14,t,n+2*u[c++]),Zs(3,4,9,14,t,n+2*u[c++]);this.v0l^=Se[0]^Se[16],this.v0h^=Se[1]^Se[17],this.v1l^=Se[2]^Se[18],this.v1h^=Se[3]^Se[19],this.v2l^=Se[4]^Se[20],this.v2h^=Se[5]^Se[21],this.v3l^=Se[6]^Se[22],this.v3h^=Se[7]^Se[23],this.v4l^=Se[8]^Se[24],this.v4h^=Se[9]^Se[25],this.v5l^=Se[10]^Se[26],this.v5h^=Se[11]^Se[27],this.v6l^=Se[12]^Se[28],this.v6h^=Se[13]^Se[29],this.v7l^=Se[14]^Se[30],this.v7h^=Se[15]^Se[31],Lr(Se)}destroy(){this.destroyed=!0,Lr(this.buffer32),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const kF=lF(e=>new UF(e)),MF="https://rpc.walletconnect.org/v1";function bC(e){const t=`Ethereum Signed Message:
${e.length}`,n=new TextEncoder().encode(t+e);return"0x"+Buffer.from(wF(n)).toString("hex")}async function jF(e,t,n,r,i,a){switch(n.t){case"eip191":return await LF(e,t,n.s);case"eip1271":return await zF(e,t,n.s,r,i,a);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${n.t}`)}}async function LF(e,t,n){return(await UL({hash:bC(t),signature:n})).toLowerCase()===e.toLowerCase()}async function zF(e,t,n,r,i,a){const c=Vc(r);if(!c.namespace||!c.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${r}`);try{const u="0x1626ba7e",f="0000000000000000000000000000000000000000000000000000000000000040",d=n.substring(2),p=(d.length/2).toString(16).padStart(64,"0"),g=(t.startsWith("0x")?t:bC(t)).substring(2),y=u+g+f+p+d,b=await fetch(`${a||MF}/?chainId=${r}&projectId=${i}`,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({id:qF(),jsonrpc:"2.0",method:"eth_call",params:[{to:e,data:y},"latest"]})}),{result:v}=await b.json();return v?v.slice(0,u.length).toLowerCase()===u.toLowerCase():!1}catch(u){return console.error("isValidEip1271Signature: ",u),!1}}function qF(){return Date.now()+Math.floor(Math.random()*1e3)}function HF(e){const t=atob(e),n=new Uint8Array(t.length);for(let c=0;c<t.length;c++)n[c]=t.charCodeAt(c);const r=n[0];if(r===0)throw new Error("No signatures found");const i=1+r*64;if(n.length<i)throw new Error("Transaction data too short for claimed signature count");if(n.length<100)throw new Error("Transaction too short");const a=Buffer.from(e,"base64").slice(1,65);return Tf.encode(a)}function FF(e){const t=new Uint8Array(Buffer.from(e,"base64")),n=Array.from("TransactionData::").map(a=>a.charCodeAt(0)),r=new Uint8Array(n.length+t.length);r.set(n),r.set(t,n.length);const i=kF(r,{dkLen:32});return Tf.encode(i)}function sA(e){const t=new Uint8Array(jp(VF(e)));return Tf.encode(t)}function VF(e){if(e instanceof Uint8Array)return e;if(Array.isArray(e))return new Uint8Array(e);if(typeof e=="object"&&e!=null&&e.data)return new Uint8Array(Object.values(e.data));if(typeof e=="object"&&e)return new Uint8Array(Object.values(e));throw new Error("getNearUint8ArrayFromBytes: Unexpected result type from bytes array")}function oA(e){const t=Buffer.from(e,"base64"),n=w9(t).txn;if(!n)throw new Error("Invalid signed transaction: missing 'txn' field");const r=f9(n),i=Buffer.from("TX"),a=Buffer.concat([i,Buffer.from(r)]),c=NF(a);return T9.encode(c).replace(/=+$/,"")}function y0(e){const t=[];let n=BigInt(e);for(;n>=BigInt(128);)t.push(Number(n&BigInt(127)|BigInt(128))),n>>=BigInt(7);return t.push(Number(n)),Buffer.from(t)}function GF(e){const t=Buffer.from(e.signed.bodyBytes,"base64"),n=Buffer.from(e.signed.authInfoBytes,"base64"),r=Buffer.from(e.signature.signature,"base64"),i=[];i.push(Buffer.from([10])),i.push(y0(t.length)),i.push(t),i.push(Buffer.from([18])),i.push(y0(n.length)),i.push(n),i.push(Buffer.from([26])),i.push(y0(r.length)),i.push(r);const a=Buffer.concat(i),c=jp(a);return Buffer.from(c).toString("hex").toUpperCase()}var KF=Object.defineProperty,WF=Object.defineProperties,YF=Object.getOwnPropertyDescriptors,aA=Object.getOwnPropertySymbols,XF=Object.prototype.hasOwnProperty,ZF=Object.prototype.propertyIsEnumerable,cA=(e,t,n)=>t in e?KF(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,QF=(e,t)=>{for(var n in t||(t={}))XF.call(t,n)&&cA(e,n,t[n]);if(aA)for(var n of aA(t))ZF.call(t,n)&&cA(e,n,t[n]);return e},JF=(e,t)=>WF(e,YF(t));const eV="did:pkh:",fw=e=>e?.split(":"),tV=e=>{const t=e&&fw(e);if(t)return e.includes(eV)?t[3]:t[1]},Mb=e=>{const t=e&&fw(e);if(t)return t[2]+":"+t[3]},cp=e=>{const t=e&&fw(e);if(t)return t.pop()};async function lA(e){const{cacao:t,projectId:n}=e,{s:r,p:i}=t,a=vC(i,i.iss),c=cp(i.iss);return await jF(c,a,r,Mb(i.iss),n)}const vC=(e,t)=>{const n=`${e.domain} wants you to sign in with your Ethereum account:`,r=cp(t);if(!e.aud&&!e.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let i=e.statement||void 0;const a=`URI: ${e.aud||e.uri}`,c=`Version: ${e.version}`,u=`Chain ID: ${tV(t)}`,f=`Nonce: ${e.nonce}`,d=`Issued At: ${e.iat}`,p=e.exp?`Expiration Time: ${e.exp}`:void 0,g=e.nbf?`Not Before: ${e.nbf}`:void 0,y=e.requestId?`Request ID: ${e.requestId}`:void 0,b=e.resources?`Resources:${e.resources.map(E=>`
- ${E}`).join("")}`:void 0,v=Lh(e.resources);if(v){const E=df(v);i=uV(i,E)}return[n,r,"",i,"",a,c,u,f,d,p,g,y,b].filter(E=>E!=null).join(`
`)};function nV(e){return Buffer.from(JSON.stringify(e)).toString("base64")}function rV(e){return JSON.parse(Buffer.from(e,"base64").toString("utf-8"))}function la(e){if(!e)throw new Error("No recap provided, value is undefined");if(!e.att)throw new Error("No `att` property found");const t=Object.keys(e.att);if(!(t!=null&&t.length))throw new Error("No resources found in `att` property");t.forEach(n=>{const r=e.att[n];if(Array.isArray(r))throw new Error(`Resource must be an object: ${n}`);if(typeof r!="object")throw new Error(`Resource must be an object: ${n}`);if(!Object.keys(r).length)throw new Error(`Resource object is empty: ${n}`);Object.keys(r).forEach(i=>{const a=r[i];if(!Array.isArray(a))throw new Error(`Ability limits ${i} must be an array of objects, found: ${a}`);if(!a.length)throw new Error(`Value of ${i} is empty array, must be an array with objects`);a.forEach(c=>{if(typeof c!="object")throw new Error(`Ability limits (${i}) must be an array of objects, found: ${c}`)})})})}function iV(e,t,n,r={}){return n?.sort((i,a)=>i.localeCompare(a)),{att:{[e]:sV(t,n,r)}}}function sV(e,t,n={}){t=t?.sort((i,a)=>i.localeCompare(a));const r=t.map(i=>({[`${e}/${i}`]:[n]}));return Object.assign({},...r)}function wC(e){return la(e),`urn:recap:${nV(e).replace(/=/g,"")}`}function df(e){const t=rV(e.replace("urn:recap:",""));return la(t),t}function oV(e,t,n){const r=iV(e,t,n);return wC(r)}function aV(e){return e&&e.includes("urn:recap:")}function cV(e,t){const n=df(e),r=df(t),i=lV(n,r);return wC(i)}function lV(e,t){la(e),la(t);const n=Object.keys(e.att).concat(Object.keys(t.att)).sort((i,a)=>i.localeCompare(a)),r={att:{}};return n.forEach(i=>{var a,c;Object.keys(((a=e.att)==null?void 0:a[i])||{}).concat(Object.keys(((c=t.att)==null?void 0:c[i])||{})).sort((u,f)=>u.localeCompare(f)).forEach(u=>{var f,d;r.att[i]=JF(QF({},r.att[i]),{[u]:((f=e.att[i])==null?void 0:f[u])||((d=t.att[i])==null?void 0:d[u])})})}),r}function uV(e="",t){la(t);const n="I further authorize the stated URI to perform the following actions on my behalf: ";if(e.includes(n))return e;const r=[];let i=0;Object.keys(t.att).forEach(u=>{const f=Object.keys(t.att[u]).map(g=>({ability:g.split("/")[0],action:g.split("/")[1]}));f.sort((g,y)=>g.action.localeCompare(y.action));const d={};f.forEach(g=>{d[g.ability]||(d[g.ability]=[]),d[g.ability].push(g.action)});const p=Object.keys(d).map(g=>(i++,`(${i}) '${g}': '${d[g].join("', '")}' for '${u}'.`));r.push(p.join(", ").replace(".,","."))});const a=r.join(" "),c=`${n}${a}`;return`${e?e+" ":""}${c}`}function uA(e){var t;const n=df(e);la(n);const r=(t=n.att)==null?void 0:t.eip155;return r?Object.keys(r).map(i=>i.split("/")[1]):[]}function fA(e){const t=df(e);la(t);const n=[];return Object.values(t.att).forEach(r=>{Object.values(r).forEach(i=>{var a;(a=i?.[0])!=null&&a.chains&&n.push(i[0].chains)})}),[...new Set(n.flat())]}function Lh(e){if(!e)return;const t=e?.[e.length-1];return aV(t)?t:void 0}/*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) */function EC(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function jb(e){if(typeof e!="boolean")throw new Error(`boolean expected, not ${e}`)}function b0(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function Yn(e,...t){if(!EC(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function dA(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function fV(e,t){Yn(e);const n=t.outputLen;if(e.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function fo(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))}function Kc(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}function dV(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}const hV=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function pV(e){if(typeof e!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(e))}function Lb(e){if(typeof e=="string")e=pV(e);else if(EC(e))e=zb(e);else throw new Error("Uint8Array expected, got "+typeof e);return e}function gV(e,t){if(t==null||typeof t!="object")throw new Error("options must be defined");return Object.assign(e,t)}function mV(e,t){if(e.length!==t.length)return!1;let n=0;for(let r=0;r<e.length;r++)n|=e[r]^t[r];return n===0}const yV=(e,t)=>{function n(r,...i){if(Yn(r),!hV)throw new Error("Non little-endian hardware is not yet supported");if(e.nonceLength!==void 0){const d=i[0];if(!d)throw new Error("nonce / iv required");e.varSizeNonce?Yn(d):Yn(d,e.nonceLength)}const a=e.tagLength;a&&i[1]!==void 0&&Yn(i[1]);const c=t(r,...i),u=(d,p)=>{if(p!==void 0){if(d!==2)throw new Error("cipher output not supported");Yn(p)}};let f=!1;return{encrypt(d,p){if(f)throw new Error("cannot encrypt() twice with same key + nonce");return f=!0,Yn(d),u(c.encrypt.length,p),c.encrypt(d,p)},decrypt(d,p){if(Yn(d),a&&d.length<a)throw new Error("invalid ciphertext length: smaller than tagLength="+a);return u(c.decrypt.length,p),c.decrypt(d,p)}}}return Object.assign(n,e),n};function hA(e,t,n=!0){if(t===void 0)return new Uint8Array(e);if(t.length!==e)throw new Error("invalid output length, expected "+e+", got: "+t.length);if(n&&!vV(t))throw new Error("invalid output, must be aligned");return t}function pA(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const i=BigInt(32),a=BigInt(4294967295),c=Number(n>>i&a),u=Number(n&a);e.setUint32(t+4,c,r),e.setUint32(t+0,u,r)}function bV(e,t,n){jb(n);const r=new Uint8Array(16),i=dV(r);return pA(i,0,BigInt(t),n),pA(i,8,BigInt(e),n),r}function vV(e){return e.byteOffset%4===0}function zb(e){return Uint8Array.from(e)}const SC=e=>Uint8Array.from(e.split("").map(t=>t.charCodeAt(0))),wV=SC("expand 16-byte k"),EV=SC("expand 32-byte k"),SV=fo(wV),_V=fo(EV);function Ge(e,t){return e<<t|e>>>32-t}function qb(e){return e.byteOffset%4===0}const dh=64,xV=16,_C=2**32-1,gA=new Uint32Array;function AV(e,t,n,r,i,a,c,u){const f=i.length,d=new Uint8Array(dh),p=fo(d),g=qb(i)&&qb(a),y=g?fo(i):gA,b=g?fo(a):gA;for(let v=0;v<f;c++){if(e(t,n,r,p,c,u),c>=_C)throw new Error("arx: counter overflow");const E=Math.min(dh,f-v);if(g&&E===dh){const S=v/4;if(v%4!==0)throw new Error("arx: invalid block position");for(let _=0,T;_<xV;_++)T=S+_,b[T]=y[T]^p[_];v+=dh;continue}for(let S=0,_;S<E;S++)_=v+S,a[_]=i[_]^d[S];v+=E}}function RV(e,t){const{allowShortKeys:n,extendNonceFn:r,counterLength:i,counterRight:a,rounds:c}=gV({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},t);if(typeof e!="function")throw new Error("core must be a function");return b0(i),b0(c),jb(a),jb(n),(u,f,d,p,g=0)=>{Yn(u),Yn(f),Yn(d);const y=d.length;if(p===void 0&&(p=new Uint8Array(y)),Yn(p),b0(g),g<0||g>=_C)throw new Error("arx: counter overflow");if(p.length<y)throw new Error(`arx: output (${p.length}) is shorter than data (${y})`);const b=[];let v=u.length,E,S;if(v===32)b.push(E=zb(u)),S=_V;else if(v===16&&n)E=new Uint8Array(32),E.set(u),E.set(u,16),S=SV,b.push(E);else throw new Error(`arx: invalid 32-byte key, got length=${v}`);qb(f)||b.push(f=zb(f));const _=fo(E);if(r){if(f.length!==24)throw new Error("arx: extended nonce must be 24 bytes");r(S,_,fo(f.subarray(0,16)),_),f=f.subarray(16)}const T=16-i;if(T!==f.length)throw new Error(`arx: nonce must be ${T} or 16 bytes`);if(T!==12){const $=new Uint8Array(12);$.set(f,a?0:12-f.length),f=$,b.push(f)}const O=fo(f);return AV(e,S,_,O,d,p,g,c),Kc(...b),p}}const hn=(e,t)=>e[t++]&255|(e[t++]&255)<<8;class OV{constructor(t){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,t=Lb(t),Yn(t,32);const n=hn(t,0),r=hn(t,2),i=hn(t,4),a=hn(t,6),c=hn(t,8),u=hn(t,10),f=hn(t,12),d=hn(t,14);this.r[0]=n&8191,this.r[1]=(n>>>13|r<<3)&8191,this.r[2]=(r>>>10|i<<6)&7939,this.r[3]=(i>>>7|a<<9)&8191,this.r[4]=(a>>>4|c<<12)&255,this.r[5]=c>>>1&8190,this.r[6]=(c>>>14|u<<2)&8191,this.r[7]=(u>>>11|f<<5)&8065,this.r[8]=(f>>>8|d<<8)&8191,this.r[9]=d>>>5&127;for(let p=0;p<8;p++)this.pad[p]=hn(t,16+2*p)}process(t,n,r=!1){const i=r?0:2048,{h:a,r:c}=this,u=c[0],f=c[1],d=c[2],p=c[3],g=c[4],y=c[5],b=c[6],v=c[7],E=c[8],S=c[9],_=hn(t,n+0),T=hn(t,n+2),O=hn(t,n+4),$=hn(t,n+6),I=hn(t,n+8),B=hn(t,n+10),z=hn(t,n+12),q=hn(t,n+14);let k=a[0]+(_&8191),W=a[1]+((_>>>13|T<<3)&8191),F=a[2]+((T>>>10|O<<6)&8191),G=a[3]+((O>>>7|$<<9)&8191),ne=a[4]+(($>>>4|I<<12)&8191),ee=a[5]+(I>>>1&8191),D=a[6]+((I>>>14|B<<2)&8191),R=a[7]+((B>>>11|z<<5)&8191),L=a[8]+((z>>>8|q<<8)&8191),V=a[9]+(q>>>5|i),X=0,N=X+k*u+W*(5*S)+F*(5*E)+G*(5*v)+ne*(5*b);X=N>>>13,N&=8191,N+=ee*(5*y)+D*(5*g)+R*(5*p)+L*(5*d)+V*(5*f),X+=N>>>13,N&=8191;let K=X+k*f+W*u+F*(5*S)+G*(5*E)+ne*(5*v);X=K>>>13,K&=8191,K+=ee*(5*b)+D*(5*y)+R*(5*g)+L*(5*p)+V*(5*d),X+=K>>>13,K&=8191;let te=X+k*d+W*f+F*u+G*(5*S)+ne*(5*E);X=te>>>13,te&=8191,te+=ee*(5*v)+D*(5*b)+R*(5*y)+L*(5*g)+V*(5*p),X+=te>>>13,te&=8191;let se=X+k*p+W*d+F*f+G*u+ne*(5*S);X=se>>>13,se&=8191,se+=ee*(5*E)+D*(5*v)+R*(5*b)+L*(5*y)+V*(5*g),X+=se>>>13,se&=8191;let ie=X+k*g+W*p+F*d+G*f+ne*u;X=ie>>>13,ie&=8191,ie+=ee*(5*S)+D*(5*E)+R*(5*v)+L*(5*b)+V*(5*y),X+=ie>>>13,ie&=8191;let fe=X+k*y+W*g+F*p+G*d+ne*f;X=fe>>>13,fe&=8191,fe+=ee*u+D*(5*S)+R*(5*E)+L*(5*v)+V*(5*b),X+=fe>>>13,fe&=8191;let Q=X+k*b+W*y+F*g+G*p+ne*d;X=Q>>>13,Q&=8191,Q+=ee*f+D*u+R*(5*S)+L*(5*E)+V*(5*v),X+=Q>>>13,Q&=8191;let ve=X+k*v+W*b+F*y+G*g+ne*p;X=ve>>>13,ve&=8191,ve+=ee*d+D*f+R*u+L*(5*S)+V*(5*E),X+=ve>>>13,ve&=8191;let ye=X+k*E+W*v+F*b+G*y+ne*g;X=ye>>>13,ye&=8191,ye+=ee*p+D*d+R*f+L*u+V*(5*S),X+=ye>>>13,ye&=8191;let _e=X+k*S+W*E+F*v+G*b+ne*y;X=_e>>>13,_e&=8191,_e+=ee*g+D*p+R*d+L*f+V*u,X+=_e>>>13,_e&=8191,X=(X<<2)+X|0,X=X+N|0,N=X&8191,X=X>>>13,K+=X,a[0]=N,a[1]=K,a[2]=te,a[3]=se,a[4]=ie,a[5]=fe,a[6]=Q,a[7]=ve,a[8]=ye,a[9]=_e}finalize(){const{h:t,pad:n}=this,r=new Uint16Array(10);let i=t[1]>>>13;t[1]&=8191;for(let u=2;u<10;u++)t[u]+=i,i=t[u]>>>13,t[u]&=8191;t[0]+=i*5,i=t[0]>>>13,t[0]&=8191,t[1]+=i,i=t[1]>>>13,t[1]&=8191,t[2]+=i,r[0]=t[0]+5,i=r[0]>>>13,r[0]&=8191;for(let u=1;u<10;u++)r[u]=t[u]+i,i=r[u]>>>13,r[u]&=8191;r[9]-=8192;let a=(i^1)-1;for(let u=0;u<10;u++)r[u]&=a;a=~a;for(let u=0;u<10;u++)t[u]=t[u]&a|r[u];t[0]=(t[0]|t[1]<<13)&65535,t[1]=(t[1]>>>3|t[2]<<10)&65535,t[2]=(t[2]>>>6|t[3]<<7)&65535,t[3]=(t[3]>>>9|t[4]<<4)&65535,t[4]=(t[4]>>>12|t[5]<<1|t[6]<<14)&65535,t[5]=(t[6]>>>2|t[7]<<11)&65535,t[6]=(t[7]>>>5|t[8]<<8)&65535,t[7]=(t[8]>>>8|t[9]<<5)&65535;let c=t[0]+n[0];t[0]=c&65535;for(let u=1;u<8;u++)c=(t[u]+n[u]|0)+(c>>>16)|0,t[u]=c&65535;Kc(r)}update(t){dA(this),t=Lb(t),Yn(t);const{buffer:n,blockLen:r}=this,i=t.length;for(let a=0;a<i;){const c=Math.min(r-this.pos,i-a);if(c===r){for(;r<=i-a;a+=r)this.process(t,a);continue}n.set(t.subarray(a,a+c),this.pos),this.pos+=c,a+=c,this.pos===r&&(this.process(n,0,!1),this.pos=0)}return this}destroy(){Kc(this.h,this.r,this.buffer,this.pad)}digestInto(t){dA(this),fV(t,this),this.finished=!0;const{buffer:n,h:r}=this;let{pos:i}=this;if(i){for(n[i++]=1;i<16;i++)n[i]=0;this.process(n,0,!0)}this.finalize();let a=0;for(let c=0;c<8;c++)t[a++]=r[c]>>>0,t[a++]=r[c]>>>8;return t}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}}function TV(e){const t=(r,i)=>e(i).update(Lb(r)).digest(),n=e(new Uint8Array(32));return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=r=>e(r),t}const DV=TV(e=>new OV(e));function CV(e,t,n,r,i,a=20){let c=e[0],u=e[1],f=e[2],d=e[3],p=t[0],g=t[1],y=t[2],b=t[3],v=t[4],E=t[5],S=t[6],_=t[7],T=i,O=n[0],$=n[1],I=n[2],B=c,z=u,q=f,k=d,W=p,F=g,G=y,ne=b,ee=v,D=E,R=S,L=_,V=T,X=O,N=$,K=I;for(let se=0;se<a;se+=2)B=B+W|0,V=Ge(V^B,16),ee=ee+V|0,W=Ge(W^ee,12),B=B+W|0,V=Ge(V^B,8),ee=ee+V|0,W=Ge(W^ee,7),z=z+F|0,X=Ge(X^z,16),D=D+X|0,F=Ge(F^D,12),z=z+F|0,X=Ge(X^z,8),D=D+X|0,F=Ge(F^D,7),q=q+G|0,N=Ge(N^q,16),R=R+N|0,G=Ge(G^R,12),q=q+G|0,N=Ge(N^q,8),R=R+N|0,G=Ge(G^R,7),k=k+ne|0,K=Ge(K^k,16),L=L+K|0,ne=Ge(ne^L,12),k=k+ne|0,K=Ge(K^k,8),L=L+K|0,ne=Ge(ne^L,7),B=B+F|0,K=Ge(K^B,16),R=R+K|0,F=Ge(F^R,12),B=B+F|0,K=Ge(K^B,8),R=R+K|0,F=Ge(F^R,7),z=z+G|0,V=Ge(V^z,16),L=L+V|0,G=Ge(G^L,12),z=z+G|0,V=Ge(V^z,8),L=L+V|0,G=Ge(G^L,7),q=q+ne|0,X=Ge(X^q,16),ee=ee+X|0,ne=Ge(ne^ee,12),q=q+ne|0,X=Ge(X^q,8),ee=ee+X|0,ne=Ge(ne^ee,7),k=k+W|0,N=Ge(N^k,16),D=D+N|0,W=Ge(W^D,12),k=k+W|0,N=Ge(N^k,8),D=D+N|0,W=Ge(W^D,7);let te=0;r[te++]=c+B|0,r[te++]=u+z|0,r[te++]=f+q|0,r[te++]=d+k|0,r[te++]=p+W|0,r[te++]=g+F|0,r[te++]=y+G|0,r[te++]=b+ne|0,r[te++]=v+ee|0,r[te++]=E+D|0,r[te++]=S+R|0,r[te++]=_+L|0,r[te++]=T+V|0,r[te++]=O+X|0,r[te++]=$+N|0,r[te++]=I+K|0}const IV=RV(CV,{counterRight:!1,counterLength:4,allowShortKeys:!1}),NV=new Uint8Array(16),mA=(e,t)=>{e.update(t);const n=t.length%16;n&&e.update(NV.subarray(n))},$V=new Uint8Array(32);function yA(e,t,n,r,i){const a=e(t,n,$V),c=DV.create(a);i&&mA(c,i),mA(c,r);const u=bV(r.length,i?i.length:0,!0);c.update(u);const f=c.digest();return Kc(a,u),f}const BV=e=>(t,n,r)=>({encrypt(i,a){const c=i.length;a=hA(c+16,a,!1),a.set(i);const u=a.subarray(0,-16);e(t,n,u,u,1);const f=yA(e,t,n,u,r);return a.set(f,c),Kc(f),a},decrypt(i,a){a=hA(i.length-16,a,!1);const c=i.subarray(0,-16),u=i.subarray(-16),f=yA(e,t,n,c,r);if(!mV(u,f))throw new Error("invalid tag");return a.set(i.subarray(0,-16)),e(t,n,a,a,1),Kc(f),a}}),xC=yV({blockSize:64,nonceLength:12,tagLength:16},BV(IV));let AC=class extends Mp{constructor(t,n){super(),this.finished=!1,this.destroyed=!1,aw(t);const r=ii(n);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,a=new Uint8Array(i);a.set(r.length>i?t.create().update(r).digest():r);for(let c=0;c<a.length;c++)a[c]^=54;this.iHash.update(a),this.oHash=t.create();for(let c=0;c<a.length;c++)a[c]^=106;this.oHash.update(a),Lr(a)}update(t){return ho(this),this.iHash.update(t),this}digestInto(t){ho(this),jr(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:i,destroyed:a,blockLen:c,outputLen:u}=this;return t=t,t.finished=i,t.destroyed=a,t.blockLen=c,t.outputLen=u,t.oHash=n._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const Lp=(e,t,n)=>new AC(e,t).update(n).digest();Lp.create=(e,t)=>new AC(e,t);function PV(e,t,n){return aw(e),n===void 0&&(n=new Uint8Array(e.outputLen)),Lp(e,ii(n),ii(t))}const v0=Uint8Array.from([0]),bA=Uint8Array.of();function UV(e,t,n,r=32){aw(e),ys(r);const i=e.outputLen;if(r>255*i)throw new Error("Length should be <= 255*HashLen");const a=Math.ceil(r/i);n===void 0&&(n=bA);const c=new Uint8Array(a*i),u=Lp.create(e,t),f=u._cloneInto(),d=new Uint8Array(u.outputLen);for(let p=0;p<a;p++)v0[0]=p+1,f.update(p===0?bA:d).update(n).update(v0).digestInto(d),c.set(d,i*p),u._cloneInto(f);return u.destroy(),f.destroy(),Lr(d,v0),c.slice(0,r)}const kV=(e,t,n,r,i)=>UV(e,PV(e,t,n),r,i),zp=jp,dw=BigInt(0),Hb=BigInt(1);function lp(e,t){if(typeof t!="boolean")throw new Error(e+" boolean expected, got "+t)}function hh(e){const t=e.toString(16);return t.length&1?"0"+t:t}function RC(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return e===""?dw:BigInt("0x"+e)}function qp(e){return RC(ff(e))}function up(e){return jr(e),RC(ff(Uint8Array.from(e).reverse()))}function hw(e,t){return lw(e.toString(16).padStart(t*2,"0"))}function pw(e,t){return hw(e,t).reverse()}function Wn(e,t,n){let r;if(typeof t=="string")try{r=lw(t)}catch(a){throw new Error(e+" must be hex string or Uint8Array, cause: "+a)}else if(ow(t))r=Uint8Array.from(t);else throw new Error(e+" must be hex string or Uint8Array");const i=r.length;if(typeof n=="number"&&i!==n)throw new Error(e+" of length "+n+" expected, got "+i);return r}const w0=e=>typeof e=="bigint"&&dw<=e;function MV(e,t,n){return w0(e)&&w0(t)&&w0(n)&&t<=e&&e<n}function Fb(e,t,n,r){if(!MV(t,n,r))throw new Error("expected valid "+e+": "+n+" <= n < "+r+", got "+t)}function jV(e){let t;for(t=0;e>dw;e>>=Hb,t+=1);return t}const Hp=e=>(Hb<<BigInt(e))-Hb;function LV(e,t,n){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");const r=y=>new Uint8Array(y),i=y=>Uint8Array.of(y);let a=r(e),c=r(e),u=0;const f=()=>{a.fill(1),c.fill(0),u=0},d=(...y)=>n(c,a,...y),p=(y=r(0))=>{c=d(i(0),y),a=d(),y.length!==0&&(c=d(i(1),y),a=d())},g=()=>{if(u++>=1e3)throw new Error("drbg: tried 1000 values");let y=0;const b=[];for(;y<t;){a=d();const v=a.slice();b.push(v),y+=a.length}return Qo(...b)};return(y,b)=>{f(),p(y);let v;for(;!(v=b(g()));)p();return f(),v}}function Fp(e,t,n={}){if(!e||typeof e!="object")throw new Error("expected valid options object");function r(i,a,c){const u=e[i];if(c&&u===void 0)return;const f=typeof u;if(f!==a||u===null)throw new Error(`param "${i}" is invalid: expected ${a}, got ${f}`)}Object.entries(t).forEach(([i,a])=>r(i,a,!1)),Object.entries(n).forEach(([i,a])=>r(i,a,!0))}function vA(e){const t=new WeakMap;return(n,...r)=>{const i=t.get(n);if(i!==void 0)return i;const a=e(n,...r);return t.set(n,a),a}}const Zn=BigInt(0),Pn=BigInt(1),Jo=BigInt(2),zV=BigInt(3),OC=BigInt(4),TC=BigInt(5),DC=BigInt(8);function kr(e,t){const n=e%t;return n>=Zn?n:t+n}function ei(e,t,n){let r=e;for(;t-- >Zn;)r*=r,r%=n;return r}function wA(e,t){if(e===Zn)throw new Error("invert: expected non-zero number");if(t<=Zn)throw new Error("invert: expected positive modulus, got "+t);let n=kr(e,t),r=t,i=Zn,a=Pn;for(;n!==Zn;){const c=r/n,u=r%n,f=i-a*c;r=n,n=u,i=a,a=f}if(r!==Pn)throw new Error("invert: does not exist");return kr(i,t)}function CC(e,t){const n=(e.ORDER+Pn)/OC,r=e.pow(t,n);if(!e.eql(e.sqr(r),t))throw new Error("Cannot find square root");return r}function qV(e,t){const n=(e.ORDER-TC)/DC,r=e.mul(t,Jo),i=e.pow(r,n),a=e.mul(t,i),c=e.mul(e.mul(a,Jo),i),u=e.mul(a,e.sub(c,e.ONE));if(!e.eql(e.sqr(u),t))throw new Error("Cannot find square root");return u}function HV(e){if(e<BigInt(3))throw new Error("sqrt is not defined for small field");let t=e-Pn,n=0;for(;t%Jo===Zn;)t/=Jo,n++;let r=Jo;const i=ul(e);for(;EA(i,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return CC;let a=i.pow(r,t);const c=(t+Pn)/Jo;return function(u,f){if(u.is0(f))return f;if(EA(u,f)!==1)throw new Error("Cannot find square root");let d=n,p=u.mul(u.ONE,a),g=u.pow(f,t),y=u.pow(f,c);for(;!u.eql(g,u.ONE);){if(u.is0(g))return u.ZERO;let b=1,v=u.sqr(g);for(;!u.eql(v,u.ONE);)if(b++,v=u.sqr(v),b===d)throw new Error("Cannot find square root");const E=Pn<<BigInt(d-b-1),S=u.pow(p,E);d=b,p=u.sqr(S),g=u.mul(g,p),y=u.mul(y,S)}return y}}function FV(e){return e%OC===zV?CC:e%DC===TC?qV:HV(e)}const VV=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function GV(e){const t={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},n=VV.reduce((r,i)=>(r[i]="function",r),t);return Fp(e,n),e}function KV(e,t,n){if(n<Zn)throw new Error("invalid exponent, negatives unsupported");if(n===Zn)return e.ONE;if(n===Pn)return t;let r=e.ONE,i=t;for(;n>Zn;)n&Pn&&(r=e.mul(r,i)),i=e.sqr(i),n>>=Pn;return r}function IC(e,t,n=!1){const r=new Array(t.length).fill(n?e.ZERO:void 0),i=t.reduce((c,u,f)=>e.is0(u)?c:(r[f]=c,e.mul(c,u)),e.ONE),a=e.inv(i);return t.reduceRight((c,u,f)=>e.is0(u)?c:(r[f]=e.mul(c,r[f]),e.mul(c,u)),a),r}function EA(e,t){const n=(e.ORDER-Pn)/Jo,r=e.pow(t,n),i=e.eql(r,e.ONE),a=e.eql(r,e.ZERO),c=e.eql(r,e.neg(e.ONE));if(!i&&!a&&!c)throw new Error("invalid Legendre symbol result");return i?1:a?0:-1}function WV(e,t){t!==void 0&&ys(t);const n=t!==void 0?t:e.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function ul(e,t,n=!1,r={}){if(e<=Zn)throw new Error("invalid field: expected ORDER > 0, got "+e);let i,a;if(typeof t=="object"&&t!=null){if(r.sqrt||n)throw new Error("cannot specify opts in two arguments");const p=t;p.BITS&&(i=p.BITS),p.sqrt&&(a=p.sqrt),typeof p.isLE=="boolean"&&(n=p.isLE)}else typeof t=="number"&&(i=t),r.sqrt&&(a=r.sqrt);const{nBitLength:c,nByteLength:u}=WV(e,i);if(u>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let f;const d=Object.freeze({ORDER:e,isLE:n,BITS:c,BYTES:u,MASK:Hp(c),ZERO:Zn,ONE:Pn,create:p=>kr(p,e),isValid:p=>{if(typeof p!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof p);return Zn<=p&&p<e},is0:p=>p===Zn,isValidNot0:p=>!d.is0(p)&&d.isValid(p),isOdd:p=>(p&Pn)===Pn,neg:p=>kr(-p,e),eql:(p,g)=>p===g,sqr:p=>kr(p*p,e),add:(p,g)=>kr(p+g,e),sub:(p,g)=>kr(p-g,e),mul:(p,g)=>kr(p*g,e),pow:(p,g)=>KV(d,p,g),div:(p,g)=>kr(p*wA(g,e),e),sqrN:p=>p*p,addN:(p,g)=>p+g,subN:(p,g)=>p-g,mulN:(p,g)=>p*g,inv:p=>wA(p,e),sqrt:a||(p=>(f||(f=FV(e)),f(d,p))),toBytes:p=>n?pw(p,u):hw(p,u),fromBytes:p=>{if(p.length!==u)throw new Error("Field.fromBytes: expected "+u+" bytes, got "+p.length);return n?up(p):qp(p)},invertBatch:p=>IC(d,p),cmov:(p,g,y)=>y?g:p});return Object.freeze(d)}function NC(e){if(typeof e!="bigint")throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function $C(e){const t=NC(e);return t+Math.ceil(t/2)}function YV(e,t,n=!1){const r=e.length,i=NC(t),a=$C(t);if(r<16||r<a||r>1024)throw new Error("expected "+a+"-1024 bytes of input, got "+r);const c=n?up(e):qp(e),u=kr(c,t-Pn)+Pn;return n?pw(u,i):hw(u,i)}const Wc=BigInt(0),ea=BigInt(1);function Fu(e,t){const n=t.negate();return e?n:t}function XV(e,t,n){const r=a=>a.pz,i=IC(e.Fp,n.map(r));return n.map((a,c)=>a.toAffine(i[c])).map(e.fromAffine)}function BC(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+e)}function E0(e,t){BC(e,t);const n=Math.ceil(t/e)+1,r=2**(e-1),i=2**e,a=Hp(e),c=BigInt(e);return{windows:n,windowSize:r,mask:a,maxNumber:i,shiftBy:c}}function SA(e,t,n){const{windowSize:r,mask:i,maxNumber:a,shiftBy:c}=n;let u=Number(e&i),f=e>>c;u>r&&(u-=a,f+=ea);const d=t*r,p=d+Math.abs(u)-1,g=u===0,y=u<0,b=t%2!==0;return{nextN:f,offset:p,isZero:g,isNeg:y,isNegF:b,offsetF:d}}function ZV(e,t){if(!Array.isArray(e))throw new Error("array expected");e.forEach((n,r)=>{if(!(n instanceof t))throw new Error("invalid point at index "+r)})}function QV(e,t){if(!Array.isArray(e))throw new Error("array of scalars expected");e.forEach((n,r)=>{if(!t.isValid(n))throw new Error("invalid scalar at index "+r)})}const S0=new WeakMap,PC=new WeakMap;function _0(e){return PC.get(e)||1}function _A(e){if(e!==Wc)throw new Error("invalid wNAF")}function JV(e,t){return{constTimeNegate:Fu,hasPrecomputes(n){return _0(n)!==1},unsafeLadder(n,r,i=e.ZERO){let a=n;for(;r>Wc;)r&ea&&(i=i.add(a)),a=a.double(),r>>=ea;return i},precomputeWindow(n,r){const{windows:i,windowSize:a}=E0(r,t),c=[];let u=n,f=u;for(let d=0;d<i;d++){f=u,c.push(f);for(let p=1;p<a;p++)f=f.add(u),c.push(f);u=f.double()}return c},wNAF(n,r,i){let a=e.ZERO,c=e.BASE;const u=E0(n,t);for(let f=0;f<u.windows;f++){const{nextN:d,offset:p,isZero:g,isNeg:y,isNegF:b,offsetF:v}=SA(i,f,u);i=d,g?c=c.add(Fu(b,r[v])):a=a.add(Fu(y,r[p]))}return _A(i),{p:a,f:c}},wNAFUnsafe(n,r,i,a=e.ZERO){const c=E0(n,t);for(let u=0;u<c.windows&&i!==Wc;u++){const{nextN:f,offset:d,isZero:p,isNeg:g}=SA(i,u,c);if(i=f,!p){const y=r[d];a=a.add(g?y.negate():y)}}return _A(i),a},getPrecomputes(n,r,i){let a=S0.get(r);return a||(a=this.precomputeWindow(r,n),n!==1&&(typeof i=="function"&&(a=i(a)),S0.set(r,a))),a},wNAFCached(n,r,i){const a=_0(n);return this.wNAF(a,this.getPrecomputes(a,n,i),r)},wNAFCachedUnsafe(n,r,i,a){const c=_0(n);return c===1?this.unsafeLadder(n,r,a):this.wNAFUnsafe(c,this.getPrecomputes(c,n,i),r,a)},setWindowSize(n,r){BC(r,t),PC.set(n,r),S0.delete(n)}}}function eG(e,t,n,r){let i=t,a=e.ZERO,c=e.ZERO;for(;n>Wc||r>Wc;)n&ea&&(a=a.add(i)),r&ea&&(c=c.add(i)),i=i.double(),n>>=ea,r>>=ea;return{p1:a,p2:c}}function tG(e,t,n,r){ZV(n,e),QV(r,t);const i=n.length,a=r.length;if(i!==a)throw new Error("arrays of points and scalars must have equal length");const c=e.ZERO,u=jV(BigInt(i));let f=1;u>12?f=u-3:u>4?f=u-2:u>0&&(f=2);const d=Hp(f),p=new Array(Number(d)+1).fill(c),g=Math.floor((t.BITS-1)/f)*f;let y=c;for(let b=g;b>=0;b-=f){p.fill(c);for(let E=0;E<a;E++){const S=r[E],_=Number(S>>BigInt(b)&d);p[_]=p[_].add(n[E])}let v=c;for(let E=p.length-1,S=c;E>0;E--)S=S.add(p[E]),v=v.add(S);if(y=y.add(v),b!==0)for(let E=0;E<f;E++)y=y.double()}return y}function xA(e,t){if(t){if(t.ORDER!==e)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return GV(t),t}else return ul(e)}function nG(e,t,n={}){if(!t||typeof t!="object")throw new Error(`expected valid ${e} CURVE object`);for(const c of["p","n","h"]){const u=t[c];if(!(typeof u=="bigint"&&u>Wc))throw new Error(`CURVE.${c} must be positive bigint`)}const r=xA(t.p,n.Fp),i=xA(t.n,n.Fn),a=["Gx","Gy","a","b"];for(const c of a)if(!r.isValid(t[c]))throw new Error(`CURVE.${c} must be valid field element of CURVE.Fp`);return{Fp:r,Fn:i}}BigInt(0),BigInt(1),BigInt(2),BigInt(8);const xu=BigInt(0),vc=BigInt(1),ph=BigInt(2);function rG(e){return Fp(e,{adjustScalarBytes:"function",powPminus2:"function"}),Object.freeze({...e})}function iG(e){const t=rG(e),{P:n,type:r,adjustScalarBytes:i,powPminus2:a,randomBytes:c}=t,u=r==="x25519";if(!u&&r!=="x448")throw new Error("invalid type");const f=c||ll,d=u?255:448,p=u?32:56,g=BigInt(u?9:5),y=BigInt(u?121665:39081),b=u?ph**BigInt(254):ph**BigInt(447),v=u?BigInt(8)*ph**BigInt(251)-vc:BigInt(4)*ph**BigInt(445)-vc,E=b+v+vc,S=k=>kr(k,n),_=T(g);function T(k){return pw(S(k),p)}function O(k){const W=Wn("u coordinate",k,p);return u&&(W[31]&=127),S(up(W))}function $(k){return up(i(Wn("scalar",k,p)))}function I(k,W){const F=q(O(W),$(k));if(F===xu)throw new Error("invalid private or public key received");return T(F)}function B(k){return I(k,_)}function z(k,W,F){const G=S(k*(W-F));return W=S(W-G),F=S(F+G),{x_2:W,x_3:F}}function q(k,W){Fb("u",k,xu,n),Fb("scalar",W,b,E);const F=W,G=k;let ne=vc,ee=xu,D=k,R=vc,L=xu;for(let X=BigInt(d-1);X>=xu;X--){const N=F>>X&vc;L^=N,{x_2:ne,x_3:D}=z(L,ne,D),{x_2:ee,x_3:R}=z(L,ee,R),L=N;const K=ne+ee,te=S(K*K),se=ne-ee,ie=S(se*se),fe=te-ie,Q=D+R,ve=D-R,ye=S(ve*K),_e=S(Q*se),Oe=ye+_e,ke=ye-_e;D=S(Oe*Oe),R=S(G*S(ke*ke)),ne=S(te*ie),ee=S(fe*(te+S(y*fe)))}({x_2:ne,x_3:D}=z(L,ne,D)),{x_2:ee,x_3:R}=z(L,ee,R);const V=a(ee);return S(ne*V)}return{scalarMult:I,scalarMultBase:B,getSharedSecret:(k,W)=>I(k,W),getPublicKey:k=>B(k),utils:{randomPrivateKey:()=>f(p)},GuBytes:_.slice()}}BigInt(0);const sG=BigInt(1),AA=BigInt(2),oG=BigInt(3),aG=BigInt(5);BigInt(8);const UC={p:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function cG(e){const t=BigInt(10),n=BigInt(20),r=BigInt(40),i=BigInt(80),a=UC.p,c=e*e%a*e%a,u=ei(c,AA,a)*c%a,f=ei(u,sG,a)*e%a,d=ei(f,aG,a)*f%a,p=ei(d,t,a)*d%a,g=ei(p,n,a)*p%a,y=ei(g,r,a)*g%a,b=ei(y,i,a)*y%a,v=ei(b,i,a)*y%a,E=ei(v,t,a)*d%a;return{pow_p_5_8:ei(E,AA,a)*e%a,b2:c}}function lG(e){return e[0]&=248,e[31]&=127,e[31]|=64,e}const Vb=(()=>{const e=UC.p;return iG({P:e,type:"x25519",powPminus2:t=>{const{pow_p_5_8:n,b2:r}=cG(t);return kr(ei(n,oG,e)*r,e)},adjustScalarBytes:lG})})();function RA(e){e.lowS!==void 0&&lp("lowS",e.lowS),e.prehash!==void 0&&lp("prehash",e.prehash)}class uG extends Error{constructor(t=""){super(t)}}const ss={Err:uG,_tlv:{encode:(e,t)=>{const{Err:n}=ss;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(t.length&1)throw new n("tlv.encode: unpadded data");const r=t.length/2,i=hh(r);if(i.length/2&128)throw new n("tlv.encode: long form length too big");const a=r>127?hh(i.length/2|128):"";return hh(e)+a+i+t},decode(e,t){const{Err:n}=ss;let r=0;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(t.length<2||t[r++]!==e)throw new n("tlv.decode: wrong tlv");const i=t[r++],a=!!(i&128);let c=0;if(!a)c=i;else{const f=i&127;if(!f)throw new n("tlv.decode(long): indefinite length not supported");if(f>4)throw new n("tlv.decode(long): byte length is too big");const d=t.subarray(r,r+f);if(d.length!==f)throw new n("tlv.decode: length bytes not complete");if(d[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const p of d)c=c<<8|p;if(r+=f,c<128)throw new n("tlv.decode(long): not minimal encoding")}const u=t.subarray(r,r+c);if(u.length!==c)throw new n("tlv.decode: wrong value length");return{v:u,l:t.subarray(r+c)}}},_int:{encode(e){const{Err:t}=ss;if(e<Vu)throw new t("integer: negative integers are not allowed");let n=hh(e);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new t("unexpected DER parsing assertion: unpadded hex");return n},decode(e){const{Err:t}=ss;if(e[0]&128)throw new t("invalid signature integer: negative");if(e[0]===0&&!(e[1]&128))throw new t("invalid signature integer: unnecessary leading zero");return qp(e)}},toSig(e){const{Err:t,_int:n,_tlv:r}=ss,i=Wn("signature",e),{v:a,l:c}=r.decode(48,i);if(c.length)throw new t("invalid signature: left bytes after parsing");const{v:u,l:f}=r.decode(2,a),{v:d,l:p}=r.decode(2,f);if(p.length)throw new t("invalid signature: left bytes after parsing");return{r:n.decode(u),s:n.decode(d)}},hexFromSig(e){const{_tlv:t,_int:n}=ss,r=t.encode(2,n.encode(e.r)),i=t.encode(2,n.encode(e.s)),a=r+i;return t.encode(48,a)}},Vu=BigInt(0),Gu=BigInt(1),fG=BigInt(2),gh=BigInt(3),dG=BigInt(4);function hG(e,t,n){function r(i){const a=e.sqr(i),c=e.mul(a,i);return e.add(e.add(c,e.mul(i,t)),n)}return r}function kC(e,t,n){const{BYTES:r}=e;function i(a){let c;if(typeof a=="bigint")c=a;else{let u=Wn("private key",a);if(t){if(!t.includes(u.length*2))throw new Error("invalid private key");const f=new Uint8Array(r);f.set(u,f.length-u.length),u=f}try{c=e.fromBytes(u)}catch{throw new Error(`invalid private key: expected ui8a of size ${r}, got ${typeof a}`)}}if(n&&(c=e.create(c)),!e.isValidNot0(c))throw new Error("invalid private key: out of range [1..N-1]");return c}return i}function pG(e,t={}){const{Fp:n,Fn:r}=nG("weierstrass",e,t),{h:i,n:a}=e;Fp(t,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:c}=t;if(c&&(!n.is0(e.a)||typeof c.beta!="bigint"||typeof c.splitScalar!="function"))throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function');function u(){if(!n.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function f(q,k,W){const{x:F,y:G}=k.toAffine(),ne=n.toBytes(F);if(lp("isCompressed",W),W){u();const ee=!n.isOdd(G);return Qo(MC(ee),ne)}else return Qo(Uint8Array.of(4),ne,n.toBytes(G))}function d(q){jr(q);const k=n.BYTES,W=k+1,F=2*k+1,G=q.length,ne=q[0],ee=q.subarray(1);if(G===W&&(ne===2||ne===3)){const D=n.fromBytes(ee);if(!n.isValid(D))throw new Error("bad point: is not on curve, wrong x");const R=y(D);let L;try{L=n.sqrt(R)}catch(X){const N=X instanceof Error?": "+X.message:"";throw new Error("bad point: is not on curve, sqrt error"+N)}u();const V=n.isOdd(L);return(ne&1)===1!==V&&(L=n.neg(L)),{x:D,y:L}}else if(G===F&&ne===4){const D=n.fromBytes(ee.subarray(k*0,k*1)),R=n.fromBytes(ee.subarray(k*1,k*2));if(!b(D,R))throw new Error("bad point: is not on curve");return{x:D,y:R}}else throw new Error(`bad point: got length ${G}, expected compressed=${W} or uncompressed=${F}`)}const p=t.toBytes||f,g=t.fromBytes||d,y=hG(n,e.a,e.b);function b(q,k){const W=n.sqr(k),F=y(q);return n.eql(W,F)}if(!b(e.Gx,e.Gy))throw new Error("bad curve params: generator point");const v=n.mul(n.pow(e.a,gh),dG),E=n.mul(n.sqr(e.b),BigInt(27));if(n.is0(n.add(v,E)))throw new Error("bad curve params: a or b");function S(q,k,W=!1){if(!n.isValid(k)||W&&n.is0(k))throw new Error(`bad point coordinate ${q}`);return k}function _(q){if(!(q instanceof I))throw new Error("ProjectivePoint expected")}const T=vA((q,k)=>{const{px:W,py:F,pz:G}=q;if(n.eql(G,n.ONE))return{x:W,y:F};const ne=q.is0();k==null&&(k=ne?n.ONE:n.inv(G));const ee=n.mul(W,k),D=n.mul(F,k),R=n.mul(G,k);if(ne)return{x:n.ZERO,y:n.ZERO};if(!n.eql(R,n.ONE))throw new Error("invZ was invalid");return{x:ee,y:D}}),O=vA(q=>{if(q.is0()){if(t.allowInfinityPoint&&!n.is0(q.py))return;throw new Error("bad point: ZERO")}const{x:k,y:W}=q.toAffine();if(!n.isValid(k)||!n.isValid(W))throw new Error("bad point: x or y not field elements");if(!b(k,W))throw new Error("bad point: equation left != right");if(!q.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function $(q,k,W,F,G){return W=new I(n.mul(W.px,q),W.py,W.pz),k=Fu(F,k),W=Fu(G,W),k.add(W)}class I{constructor(k,W,F){this.px=S("x",k),this.py=S("y",W,!0),this.pz=S("z",F),Object.freeze(this)}static fromAffine(k){const{x:W,y:F}=k||{};if(!k||!n.isValid(W)||!n.isValid(F))throw new Error("invalid affine point");if(k instanceof I)throw new Error("projective point not allowed");return n.is0(W)&&n.is0(F)?I.ZERO:new I(W,F,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(k){return XV(I,"pz",k)}static fromBytes(k){return jr(k),I.fromHex(k)}static fromHex(k){const W=I.fromAffine(g(Wn("pointHex",k)));return W.assertValidity(),W}static fromPrivateKey(k){const W=kC(r,t.allowedPrivateKeyLengths,t.wrapPrivateKey);return I.BASE.multiply(W(k))}static msm(k,W){return tG(I,r,k,W)}precompute(k=8,W=!0){return z.setWindowSize(this,k),W||this.multiply(gh),this}_setWindowSize(k){this.precompute(k)}assertValidity(){O(this)}hasEvenY(){const{y:k}=this.toAffine();if(!n.isOdd)throw new Error("Field doesn't support isOdd");return!n.isOdd(k)}equals(k){_(k);const{px:W,py:F,pz:G}=this,{px:ne,py:ee,pz:D}=k,R=n.eql(n.mul(W,D),n.mul(ne,G)),L=n.eql(n.mul(F,D),n.mul(ee,G));return R&&L}negate(){return new I(this.px,n.neg(this.py),this.pz)}double(){const{a:k,b:W}=e,F=n.mul(W,gh),{px:G,py:ne,pz:ee}=this;let D=n.ZERO,R=n.ZERO,L=n.ZERO,V=n.mul(G,G),X=n.mul(ne,ne),N=n.mul(ee,ee),K=n.mul(G,ne);return K=n.add(K,K),L=n.mul(G,ee),L=n.add(L,L),D=n.mul(k,L),R=n.mul(F,N),R=n.add(D,R),D=n.sub(X,R),R=n.add(X,R),R=n.mul(D,R),D=n.mul(K,D),L=n.mul(F,L),N=n.mul(k,N),K=n.sub(V,N),K=n.mul(k,K),K=n.add(K,L),L=n.add(V,V),V=n.add(L,V),V=n.add(V,N),V=n.mul(V,K),R=n.add(R,V),N=n.mul(ne,ee),N=n.add(N,N),V=n.mul(N,K),D=n.sub(D,V),L=n.mul(N,X),L=n.add(L,L),L=n.add(L,L),new I(D,R,L)}add(k){_(k);const{px:W,py:F,pz:G}=this,{px:ne,py:ee,pz:D}=k;let R=n.ZERO,L=n.ZERO,V=n.ZERO;const X=e.a,N=n.mul(e.b,gh);let K=n.mul(W,ne),te=n.mul(F,ee),se=n.mul(G,D),ie=n.add(W,F),fe=n.add(ne,ee);ie=n.mul(ie,fe),fe=n.add(K,te),ie=n.sub(ie,fe),fe=n.add(W,G);let Q=n.add(ne,D);return fe=n.mul(fe,Q),Q=n.add(K,se),fe=n.sub(fe,Q),Q=n.add(F,G),R=n.add(ee,D),Q=n.mul(Q,R),R=n.add(te,se),Q=n.sub(Q,R),V=n.mul(X,fe),R=n.mul(N,se),V=n.add(R,V),R=n.sub(te,V),V=n.add(te,V),L=n.mul(R,V),te=n.add(K,K),te=n.add(te,K),se=n.mul(X,se),fe=n.mul(N,fe),te=n.add(te,se),se=n.sub(K,se),se=n.mul(X,se),fe=n.add(fe,se),K=n.mul(te,fe),L=n.add(L,K),K=n.mul(Q,fe),R=n.mul(ie,R),R=n.sub(R,K),K=n.mul(ie,te),V=n.mul(Q,V),V=n.add(V,K),new I(R,L,V)}subtract(k){return this.add(k.negate())}is0(){return this.equals(I.ZERO)}multiply(k){const{endo:W}=t;if(!r.isValidNot0(k))throw new Error("invalid scalar: out of range");let F,G;const ne=ee=>z.wNAFCached(this,ee,I.normalizeZ);if(W){const{k1neg:ee,k1:D,k2neg:R,k2:L}=W.splitScalar(k),{p:V,f:X}=ne(D),{p:N,f:K}=ne(L);G=X.add(K),F=$(W.beta,V,N,ee,R)}else{const{p:ee,f:D}=ne(k);F=ee,G=D}return I.normalizeZ([F,G])[0]}multiplyUnsafe(k){const{endo:W}=t,F=this;if(!r.isValid(k))throw new Error("invalid scalar: out of range");if(k===Vu||F.is0())return I.ZERO;if(k===Gu)return F;if(z.hasPrecomputes(this))return this.multiply(k);if(W){const{k1neg:G,k1:ne,k2neg:ee,k2:D}=W.splitScalar(k),{p1:R,p2:L}=eG(I,F,ne,D);return $(W.beta,R,L,G,ee)}else return z.wNAFCachedUnsafe(F,k)}multiplyAndAddUnsafe(k,W,F){const G=this.multiplyUnsafe(W).add(k.multiplyUnsafe(F));return G.is0()?void 0:G}toAffine(k){return T(this,k)}isTorsionFree(){const{isTorsionFree:k}=t;return i===Gu?!0:k?k(I,this):z.wNAFCachedUnsafe(this,a).is0()}clearCofactor(){const{clearCofactor:k}=t;return i===Gu?this:k?k(I,this):this.multiplyUnsafe(i)}toBytes(k=!0){return lp("isCompressed",k),this.assertValidity(),p(I,this,k)}toRawBytes(k=!0){return this.toBytes(k)}toHex(k=!0){return ff(this.toBytes(k))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}I.BASE=new I(e.Gx,e.Gy,n.ONE),I.ZERO=new I(n.ZERO,n.ONE,n.ZERO),I.Fp=n,I.Fn=r;const B=r.BITS,z=JV(I,t.endo?Math.ceil(B/2):B);return I}function MC(e){return Uint8Array.of(e?2:3)}function gG(e,t,n={}){Fp(t,{hash:"function"},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const r=t.randomBytes||ll,i=t.hmac||((F,...G)=>Lp(t.hash,F,Qo(...G))),{Fp:a,Fn:c}=e,{ORDER:u,BITS:f}=c;function d(F){const G=u>>Gu;return F>G}function p(F){return d(F)?c.neg(F):F}function g(F,G){if(!c.isValidNot0(G))throw new Error(`invalid signature ${F}: out of range 1..CURVE.n`)}class y{constructor(G,ne,ee){g("r",G),g("s",ne),this.r=G,this.s=ne,ee!=null&&(this.recovery=ee),Object.freeze(this)}static fromCompact(G){const ne=c.BYTES,ee=Wn("compactSignature",G,ne*2);return new y(c.fromBytes(ee.subarray(0,ne)),c.fromBytes(ee.subarray(ne,ne*2)))}static fromDER(G){const{r:ne,s:ee}=ss.toSig(Wn("DER",G));return new y(ne,ee)}assertValidity(){}addRecoveryBit(G){return new y(this.r,this.s,G)}recoverPublicKey(G){const ne=a.ORDER,{r:ee,s:D,recovery:R}=this;if(R==null||![0,1,2,3].includes(R))throw new Error("recovery id invalid");if(u*fG<ne&&R>1)throw new Error("recovery id is ambiguous for h>1 curve");const L=R===2||R===3?ee+u:ee;if(!a.isValid(L))throw new Error("recovery id 2 or 3 invalid");const V=a.toBytes(L),X=e.fromHex(Qo(MC((R&1)===0),V)),N=c.inv(L),K=O(Wn("msgHash",G)),te=c.create(-K*N),se=c.create(D*N),ie=e.BASE.multiplyUnsafe(te).add(X.multiplyUnsafe(se));if(ie.is0())throw new Error("point at infinify");return ie.assertValidity(),ie}hasHighS(){return d(this.s)}normalizeS(){return this.hasHighS()?new y(this.r,c.neg(this.s),this.recovery):this}toBytes(G){if(G==="compact")return Qo(c.toBytes(this.r),c.toBytes(this.s));if(G==="der")return lw(ss.hexFromSig(this));throw new Error("invalid format")}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return ff(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return ff(this.toBytes("compact"))}}const b=kC(c,n.allowedPrivateKeyLengths,n.wrapPrivateKey),v={isValidPrivateKey(F){try{return b(F),!0}catch{return!1}},normPrivateKeyToScalar:b,randomPrivateKey:()=>{const F=u;return YV(r($C(F)),F)},precompute(F=8,G=e.BASE){return G.precompute(F,!1)}};function E(F,G=!0){return e.fromPrivateKey(F).toBytes(G)}function S(F){if(typeof F=="bigint")return!1;if(F instanceof e)return!0;const G=Wn("key",F).length,ne=a.BYTES,ee=ne+1,D=2*ne+1;if(!(n.allowedPrivateKeyLengths||c.BYTES===ee))return G===ee||G===D}function _(F,G,ne=!0){if(S(F)===!0)throw new Error("first arg must be private key");if(S(G)===!1)throw new Error("second arg must be public key");return e.fromHex(G).multiply(b(F)).toBytes(ne)}const T=t.bits2int||function(F){if(F.length>8192)throw new Error("input is too large");const G=qp(F),ne=F.length*8-f;return ne>0?G>>BigInt(ne):G},O=t.bits2int_modN||function(F){return c.create(T(F))},$=Hp(f);function I(F){return Fb("num < 2^"+f,F,Vu,$),c.toBytes(F)}function B(F,G,ne=z){if(["recovered","canonical"].some(ie=>ie in ne))throw new Error("sign() legacy options not supported");const{hash:ee}=t;let{lowS:D,prehash:R,extraEntropy:L}=ne;D==null&&(D=!0),F=Wn("msgHash",F),RA(ne),R&&(F=Wn("prehashed msgHash",ee(F)));const V=O(F),X=b(G),N=[I(X),I(V)];if(L!=null&&L!==!1){const ie=L===!0?r(a.BYTES):L;N.push(Wn("extraEntropy",ie))}const K=Qo(...N),te=V;function se(ie){const fe=T(ie);if(!c.isValidNot0(fe))return;const Q=c.inv(fe),ve=e.BASE.multiply(fe).toAffine(),ye=c.create(ve.x);if(ye===Vu)return;const _e=c.create(Q*c.create(te+ye*X));if(_e===Vu)return;let Oe=(ve.x===ye?0:2)|Number(ve.y&Gu),ke=_e;return D&&d(_e)&&(ke=p(_e),Oe^=1),new y(ye,ke,Oe)}return{seed:K,k2sig:se}}const z={lowS:t.lowS,prehash:!1},q={lowS:t.lowS,prehash:!1};function k(F,G,ne=z){const{seed:ee,k2sig:D}=B(F,G,ne);return LV(t.hash.outputLen,c.BYTES,i)(ee,D)}e.BASE.precompute(8);function W(F,G,ne,ee=q){const D=F;G=Wn("msgHash",G),ne=Wn("publicKey",ne),RA(ee);const{lowS:R,prehash:L,format:V}=ee;if("strict"in ee)throw new Error("options.strict was renamed to lowS");if(V!==void 0&&!["compact","der","js"].includes(V))throw new Error('format must be "compact", "der" or "js"');const X=typeof D=="string"||ow(D),N=!X&&!V&&typeof D=="object"&&D!==null&&typeof D.r=="bigint"&&typeof D.s=="bigint";if(!X&&!N)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let K,te;try{if(N)if(V===void 0||V==="js")K=new y(D.r,D.s);else throw new Error("invalid format");if(X){try{V!=="compact"&&(K=y.fromDER(D))}catch(Oe){if(!(Oe instanceof ss.Err))throw Oe}!K&&V!=="der"&&(K=y.fromCompact(D))}te=e.fromHex(ne)}catch{return!1}if(!K||R&&K.hasHighS())return!1;L&&(G=t.hash(G));const{r:se,s:ie}=K,fe=O(G),Q=c.inv(ie),ve=c.create(fe*Q),ye=c.create(se*Q),_e=e.BASE.multiplyUnsafe(ve).add(te.multiplyUnsafe(ye));return _e.is0()?!1:c.create(_e.x)===se}return Object.freeze({getPublicKey:E,getSharedSecret:_,sign:k,verify:W,utils:v,Point:e,Signature:y})}function mG(e){const t={a:e.a,b:e.b,p:e.Fp.ORDER,n:e.n,h:e.h,Gx:e.Gx,Gy:e.Gy},n=e.Fp,r=ul(t.n,e.nBitLength),i={Fp:n,Fn:r,allowedPrivateKeyLengths:e.allowedPrivateKeyLengths,allowInfinityPoint:e.allowInfinityPoint,endo:e.endo,wrapPrivateKey:e.wrapPrivateKey,isTorsionFree:e.isTorsionFree,clearCofactor:e.clearCofactor,fromBytes:e.fromBytes,toBytes:e.toBytes};return{CURVE:t,curveOpts:i}}function yG(e){const{CURVE:t,curveOpts:n}=mG(e),r={hash:e.hash,hmac:e.hmac,randomBytes:e.randomBytes,lowS:e.lowS,bits2int:e.bits2int,bits2int_modN:e.bits2int_modN};return{CURVE:t,curveOpts:n,ecdsaOpts:r}}function bG(e,t){return Object.assign({},t,{ProjectivePoint:t.Point,CURVE:e})}function vG(e){const{CURVE:t,curveOpts:n,ecdsaOpts:r}=yG(e),i=pG(t,n),a=gG(i,r,n);return bG(e,a)}function Gb(e,t){const n=r=>vG({...e,hash:r});return{...n(t),create:n}}const jC={p:BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff"),n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),h:BigInt(1),a:BigInt("0xffffffff00000001000000000000000000000000fffffffffffffffffffffffc"),b:BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5")},LC={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000ffffffff"),n:BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffc7634d81f4372ddf581a0db248b0a77aecec196accc52973"),h:BigInt(1),a:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000fffffffc"),b:BigInt("0xb3312fa7e23ee7e4988e056be3f82d19181d9c6efe8141120314088f5013875ac656398d8a2ed19d2a85c8edd3ec2aef"),Gx:BigInt("0xaa87ca22be8b05378eb1c71ef320ad746e1d3b628ba79b9859f741e082542a385502f25dbf55296c3a545e3872760ab7"),Gy:BigInt("0x3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f")},zC={p:BigInt("0x1ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),n:BigInt("0x01fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffa51868783bf2f966b7fcc0148f709a5d03bb5c9b8899c47aebb6fb71e91386409"),h:BigInt(1),a:BigInt("0x1fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc"),b:BigInt("0x0051953eb9618e1c9a1f929a21a0b68540eea2da725b99b315f3b8b489918ef109e156193951ec7e937b1652c0bd3bb1bf073573df883d2c34f1ef451fd46b503f00"),Gx:BigInt("0x00c6858e06b70404e9cd9e3ecb662395b4429c648139053fb521f828af606b4d3dbaa14b5e77efe75928fe1dc127a2ffa8de3348b3c1856a429bf97e7e31c2e5bd66"),Gy:BigInt("0x011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650")},wG=ul(jC.p),EG=ul(LC.p),SG=ul(zC.p),_G=Gb({...jC,Fp:wG,lowS:!1},jp);Gb({...LC,Fp:EG,lowS:!1},IF),Gb({...zC,Fp:SG,lowS:!1,allowedPrivateKeyLengths:[130,131,132]},CF);const xG=_G,qC="base10",Un="base16",ri="base64pad",oo="base64url",$f="utf8",HC=0,fs=1,Bf=2,AG=0,OA=1,Ku=12,gw=32;function RG(){const e=Vb.utils.randomPrivateKey(),t=Vb.getPublicKey(e);return{privateKey:Qn(e,Un),publicKey:Qn(t,Un)}}function Kb(){const e=ll(gw);return Qn(e,Un)}function OG(e,t){const n=Vb.getSharedSecret(Mr(e,Un),Mr(t,Un)),r=kV(zp,n,void 0,void 0,gw);return Qn(r,Un)}function zh(e){const t=zp(Mr(e,Un));return Qn(t,Un)}function Si(e){const t=zp(Mr(e,$f));return Qn(t,Un)}function FC(e){return Mr(`${e}`,qC)}function ua(e){return Number(Qn(e,qC))}function VC(e){return e.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function GC(e){const t=e.replace(/-/g,"+").replace(/_/g,"/"),n=(4-t.length%4)%4;return t+"=".repeat(n)}function TG(e){const t=FC(typeof e.type<"u"?e.type:HC);if(ua(t)===fs&&typeof e.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const n=typeof e.senderPublicKey<"u"?Mr(e.senderPublicKey,Un):void 0,r=typeof e.iv<"u"?Mr(e.iv,Un):ll(Ku),i=Mr(e.symKey,Un),a=xC(i,r).encrypt(Mr(e.message,$f)),c=KC({type:t,sealed:a,iv:r,senderPublicKey:n});return e.encoding===oo?VC(c):c}function DG(e){const t=Mr(e.symKey,Un),{sealed:n,iv:r}=hf({encoded:e.encoded,encoding:e.encoding}),i=xC(t,r).decrypt(n);if(i===null)throw new Error("Failed to decrypt");return Qn(i,$f)}function CG(e,t){const n=FC(Bf),r=ll(Ku),i=Mr(e,$f),a=KC({type:n,sealed:i,iv:r});return t===oo?VC(a):a}function IG(e,t){const{sealed:n}=hf({encoded:e,encoding:t});return Qn(n,$f)}function KC(e){if(ua(e.type)===Bf)return Qn(Hu([e.type,e.sealed]),ri);if(ua(e.type)===fs){if(typeof e.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return Qn(Hu([e.type,e.senderPublicKey,e.iv,e.sealed]),ri)}return Qn(Hu([e.type,e.iv,e.sealed]),ri)}function hf(e){const t=(e.encoding||ri)===oo?GC(e.encoded):e.encoded,n=Mr(t,ri),r=n.slice(AG,OA),i=OA;if(ua(r)===fs){const f=i+gw,d=f+Ku,p=n.slice(i,f),g=n.slice(f,d),y=n.slice(d);return{type:r,sealed:y,iv:g,senderPublicKey:p}}if(ua(r)===Bf){const f=n.slice(i),d=ll(Ku);return{type:r,sealed:f,iv:d}}const a=i+Ku,c=n.slice(i,a),u=n.slice(a);return{type:r,sealed:u,iv:c}}function NG(e,t){const n=hf({encoded:e,encoding:t?.encoding});return WC({type:ua(n.type),senderPublicKey:typeof n.senderPublicKey<"u"?Qn(n.senderPublicKey,Un):void 0,receiverPublicKey:t?.receiverPublicKey})}function WC(e){const t=e?.type||HC;if(t===fs){if(typeof e?.senderPublicKey>"u")throw new Error("missing sender public key");if(typeof e?.receiverPublicKey>"u")throw new Error("missing receiver public key")}return{type:t,senderPublicKey:e?.senderPublicKey,receiverPublicKey:e?.receiverPublicKey}}function TA(e){return e.type===fs&&typeof e.senderPublicKey=="string"&&typeof e.receiverPublicKey=="string"}function DA(e){return e.type===Bf}function $G(e){const t=Buffer.from(e.x,"base64"),n=Buffer.from(e.y,"base64");return Hu([new Uint8Array([4]),t,n])}function BG(e,t){const[n,r,i]=e.split("."),a=Buffer.from(GC(i),"base64");if(a.length!==64)throw new Error("Invalid signature length");const c=a.slice(0,32),u=a.slice(32,64),f=`${n}.${r}`,d=zp(f),p=$G(t);if(!xG.verify(Hu([c,u]),d,p))throw new Error("Invalid signature");return Bb(e).payload}const PG="irn";function fp(e){return e?.relay||{protocol:PG}}function ku(e){const t=yH[e];if(typeof t>"u")throw new Error(`Relay Protocol not supported: ${e}`);return t}function UG(e,t="-"){const n={},r="relay"+t;return Object.keys(e).forEach(i=>{if(i.startsWith(r)){const a=i.replace(r,""),c=e[i];n[a]=c}}),n}function CA(e){if(!e.includes("wc:")){const d=sC(e);d!=null&&d.includes("wc:")&&(e=d)}e=e.includes("wc://")?e.replace("wc://",""):e,e=e.includes("wc:")?e.replace("wc:",""):e;const t=e.indexOf(":"),n=e.indexOf("?")!==-1?e.indexOf("?"):void 0,r=e.substring(0,t),i=e.substring(t+1,n).split("@"),a=typeof n<"u"?e.substring(n):"",c=new URLSearchParams(a),u={};c.forEach((d,p)=>{u[p]=d});const f=typeof u.methods=="string"?u.methods.split(","):void 0;return{protocol:r,topic:kG(i[0]),version:parseInt(i[1],10),symKey:u.symKey,relay:UG(u),methods:f,expiryTimestamp:u.expiryTimestamp?parseInt(u.expiryTimestamp,10):void 0}}function kG(e){return e.startsWith("//")?e.substring(2):e}function MG(e,t="-"){const n="relay",r={};return Object.keys(e).forEach(i=>{const a=i,c=n+t+a;e[a]&&(r[c]=e[a])}),r}function IA(e){const t=new URLSearchParams,n=MG(e.relay);Object.keys(n).sort().forEach(i=>{t.set(i,n[i])}),t.set("symKey",e.symKey),e.expiryTimestamp&&t.set("expiryTimestamp",e.expiryTimestamp.toString()),e.methods&&t.set("methods",e.methods.join(","));const r=t.toString();return`${e.protocol}:${e.topic}@${e.version}?${r}`}function mh(e,t,n){return`${e}?wc_ev=${n}&topic=${t}`}var jG=Object.defineProperty,LG=Object.defineProperties,zG=Object.getOwnPropertyDescriptors,NA=Object.getOwnPropertySymbols,qG=Object.prototype.hasOwnProperty,HG=Object.prototype.propertyIsEnumerable,$A=(e,t,n)=>t in e?jG(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,FG=(e,t)=>{for(var n in t||(t={}))qG.call(t,n)&&$A(e,n,t[n]);if(NA)for(var n of NA(t))HG.call(t,n)&&$A(e,n,t[n]);return e},VG=(e,t)=>LG(e,zG(t));function fl(e){const t=[];return e.forEach(n=>{const[r,i]=n.split(":");t.push(`${r}:${i}`)}),t}function GG(e){const t=[];return Object.values(e).forEach(n=>{t.push(...fl(n.accounts))}),t}function KG(e,t){const n=[];return Object.values(e).forEach(r=>{fl(r.accounts).includes(t)&&n.push(...r.methods)}),n}function WG(e,t){const n=[];return Object.values(e).forEach(r=>{fl(r.accounts).includes(t)&&n.push(...r.events)}),n}function Vp(e){return e.includes(":")}function Lc(e){return Vp(e)?e.split(":")[0]:e}function BA(e){var t,n,r;const i={};if(!Ri(e))return i;for(const[a,c]of Object.entries(e)){const u=Vp(a)?[a]:c.chains,f=c.methods||[],d=c.events||[],p=Lc(a);i[p]=VG(FG({},i[p]),{chains:Ai(u,(t=i[p])==null?void 0:t.chains),methods:Ai(f,(n=i[p])==null?void 0:n.methods),events:Ai(d,(r=i[p])==null?void 0:r.events)})}return i}function YG(e){const t={};return e?.forEach(n=>{var r;const[i,a]=n.split(":");t[i]||(t[i]={accounts:[],chains:[],events:[],methods:[]}),t[i].accounts.push(n),(r=t[i].chains)==null||r.push(`${i}:${a}`)}),t}function PA(e,t){t=t.map(r=>r.replace("did:pkh:",""));const n=YG(t);for(const[r,i]of Object.entries(n))i.methods?i.methods=Ai(i.methods,e):i.methods=e,i.events=["chainChanged","accountsChanged"];return n}function XG(e,t){var n,r,i,a,c,u;const f=BA(e),d=BA(t),p={},g=Object.keys(f).concat(Object.keys(d));for(const y of g)p[y]={chains:Ai((n=f[y])==null?void 0:n.chains,(r=d[y])==null?void 0:r.chains),methods:Ai((i=f[y])==null?void 0:i.methods,(a=d[y])==null?void 0:a.methods),events:Ai((c=f[y])==null?void 0:c.events,(u=d[y])==null?void 0:u.events)};return p}const ZG={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},QG={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function we(e,t){const{message:n,code:r}=QG[e];return{message:t?`${n} ${t}`:n,code:r}}function _t(e,t){const{message:n,code:r}=ZG[e];return{message:t?`${n} ${t}`:n,code:r}}function ds(e,t){return!!Array.isArray(e)}function Ri(e){return Object.getPrototypeOf(e)===Object.prototype&&Object.keys(e).length}function yn(e){return typeof e>"u"}function zt(e,t){return t&&yn(e)?!0:typeof e=="string"&&!!e.trim().length}function mw(e,t){return t&&yn(e)?!0:typeof e=="number"&&!isNaN(e)}function JG(e,t){const{requiredNamespaces:n}=t,r=Object.keys(e.namespaces),i=Object.keys(n);let a=!0;return Zo(i,r)?(r.forEach(c=>{const{accounts:u,methods:f,events:d}=e.namespaces[c],p=fl(u),g=n[c];(!Zo(eC(c,g),p)||!Zo(g.methods,f)||!Zo(g.events,d))&&(a=!1)}),a):!1}function dp(e){return zt(e,!1)&&e.includes(":")?e.split(":").length===2:!1}function eK(e){if(zt(e,!1)&&e.includes(":")){const t=e.split(":");if(t.length===3){const n=t[0]+":"+t[1];return!!t[2]&&dp(n)}}return!1}function tK(e){function t(n){try{return typeof new URL(n)<"u"}catch{return!1}}try{if(zt(e,!1)){if(t(e))return!0;const n=sC(e);return t(n)}}catch{}return!1}function nK(e){var t;return(t=e?.proposer)==null?void 0:t.publicKey}function rK(e){return e?.topic}function iK(e,t){let n=null;return zt(e?.publicKey,!1)||(n=we("MISSING_OR_INVALID",`${t} controller public key should be a string`)),n}function UA(e){let t=!0;return ds(e)?e.length&&(t=e.every(n=>zt(n,!1))):t=!1,t}function sK(e,t,n){let r=null;return ds(t)&&t.length?t.forEach(i=>{r||dp(i)||(r=_t("UNSUPPORTED_CHAINS",`${n}, chain ${i} should be a string and conform to "namespace:chainId" format`))}):dp(e)||(r=_t("UNSUPPORTED_CHAINS",`${n}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),r}function oK(e,t,n){let r=null;return Object.entries(e).forEach(([i,a])=>{if(r)return;const c=sK(i,eC(i,a),`${t} ${n}`);c&&(r=c)}),r}function aK(e,t){let n=null;return ds(e)?e.forEach(r=>{n||eK(r)||(n=_t("UNSUPPORTED_ACCOUNTS",`${t}, account ${r} should be a string and conform to "namespace:chainId:address" format`))}):n=_t("UNSUPPORTED_ACCOUNTS",`${t}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),n}function cK(e,t){let n=null;return Object.values(e).forEach(r=>{if(n)return;const i=aK(r?.accounts,`${t} namespace`);i&&(n=i)}),n}function lK(e,t){let n=null;return UA(e?.methods)?UA(e?.events)||(n=_t("UNSUPPORTED_EVENTS",`${t}, events should be an array of strings or empty array for no events`)):n=_t("UNSUPPORTED_METHODS",`${t}, methods should be an array of strings or empty array for no methods`),n}function YC(e,t){let n=null;return Object.values(e).forEach(r=>{if(n)return;const i=lK(r,`${t}, namespace`);i&&(n=i)}),n}function uK(e,t,n){let r=null;if(e&&Ri(e)){const i=YC(e,t);i&&(r=i);const a=oK(e,t,n);a&&(r=a)}else r=we("MISSING_OR_INVALID",`${t}, ${n} should be an object with data`);return r}function x0(e,t){let n=null;if(e&&Ri(e)){const r=YC(e,t);r&&(n=r);const i=cK(e,t);i&&(n=i)}else n=we("MISSING_OR_INVALID",`${t}, namespaces should be an object with data`);return n}function XC(e){return zt(e.protocol,!0)}function fK(e,t){let n=!1;return e?e&&ds(e)&&e.length&&e.forEach(r=>{n=XC(r)}):n=!0,n}function dK(e){return typeof e=="number"}function Kn(e){return typeof e<"u"&&typeof e!==null}function hK(e){return!(!e||typeof e!="object"||!e.code||!mw(e.code,!1)||!e.message||!zt(e.message,!1))}function pK(e){return!(yn(e)||!zt(e.method,!1))}function gK(e){return!(yn(e)||yn(e.result)&&yn(e.error)||!mw(e.id,!1)||!zt(e.jsonrpc,!1))}function mK(e){return!(yn(e)||!zt(e.name,!1))}function kA(e,t){return!(!dp(t)||!GG(e).includes(t))}function yK(e,t,n){return zt(n,!1)?KG(e,t).includes(n):!1}function bK(e,t,n){return zt(n,!1)?WG(e,t).includes(n):!1}function MA(e,t,n){let r=null;const i=vK(e),a=wK(t),c=Object.keys(i),u=Object.keys(a),f=jA(Object.keys(e)),d=jA(Object.keys(t)),p=f.filter(g=>!d.includes(g));return p.length&&(r=we("NON_CONFORMING_NAMESPACES",`${n} namespaces keys don't satisfy requiredNamespaces.
      Required: ${p.toString()}
      Received: ${Object.keys(t).toString()}`)),Zo(c,u)||(r=we("NON_CONFORMING_NAMESPACES",`${n} namespaces chains don't satisfy required namespaces.
      Required: ${c.toString()}
      Approved: ${u.toString()}`)),Object.keys(t).forEach(g=>{if(!g.includes(":")||r)return;const y=fl(t[g].accounts);y.includes(g)||(r=we("NON_CONFORMING_NAMESPACES",`${n} namespaces accounts don't satisfy namespace accounts for ${g}
        Required: ${g}
        Approved: ${y.toString()}`))}),c.forEach(g=>{r||(Zo(i[g].methods,a[g].methods)?Zo(i[g].events,a[g].events)||(r=we("NON_CONFORMING_NAMESPACES",`${n} namespaces events don't satisfy namespace events for ${g}`)):r=we("NON_CONFORMING_NAMESPACES",`${n} namespaces methods don't satisfy namespace methods for ${g}`))}),r}function vK(e){const t={};return Object.keys(e).forEach(n=>{var r;n.includes(":")?t[n]=e[n]:(r=e[n].chains)==null||r.forEach(i=>{t[i]={methods:e[n].methods,events:e[n].events}})}),t}function jA(e){return[...new Set(e.map(t=>t.includes(":")?t.split(":")[0]:t))]}function wK(e){const t={};return Object.keys(e).forEach(n=>{n.includes(":")?t[n]=e[n]:fl(e[n].accounts)?.forEach(i=>{t[i]={accounts:e[n].accounts.filter(a=>a.includes(`${i}:`)),methods:e[n].methods,events:e[n].events}})}),t}function EK(e,t){return mw(e,!1)&&e<=t.max&&e>=t.min}function LA(){const e=If();return new Promise(t=>{switch(e){case br.browser:t(SK());break;case br.reactNative:t(_K());break;case br.node:t(xK());break;default:t(!0)}})}function SK(){return cl()&&navigator?.onLine}async function _K(){return yo()&&typeof global<"u"&&global!=null&&global.NetInfo?(await(global==null?void 0:global.NetInfo.fetch()))?.isConnected:!0}function xK(){return!0}function AK(e){switch(If()){case br.browser:RK(e);break;case br.reactNative:OK(e);break}}function RK(e){!yo()&&cl()&&(window.addEventListener("online",()=>e(!0)),window.addEventListener("offline",()=>e(!1)))}function OK(e){yo()&&typeof global<"u"&&global!=null&&global.NetInfo&&global?.NetInfo.addEventListener(t=>e(t?.isConnected))}function TK(){var e;return cl()&&gs.getDocument()?((e=gs.getDocument())==null?void 0:e.visibilityState)==="visible":!0}const A0={};class Au{static get(t){return A0[t]}static set(t,n){A0[t]=n}static delete(t){delete A0[t]}}function DK(e){const t=Tf.decode(e);if(t.length<33)throw new Error("Too short to contain a public key");return t.slice(1,33)}function CK({publicKey:e,signature:t,payload:n}){var r;const i=Wb(n.method),a=128|parseInt(((r=n.version)==null?void 0:r.toString())||"4"),c=$K(n.address),u=n.era==="00"?new Uint8Array([0]):Wb(n.era);if(u.length!==1&&u.length!==2)throw new Error("Invalid era length");const f=parseInt(n.nonce,16),d=new Uint8Array([f&255,f>>8&255]),p=BigInt(`0x${NK(n.tip)}`),g=PK(p),y=new Uint8Array([0,...e,c,...t,...u,...d,...g,...i]),b=BK(y.length+1);return new Uint8Array([...b,a,...y])}function IK(e){const t=Wb(e),n=EH.blake2b(t,void 0,32);return"0x"+Buffer.from(n).toString("hex")}function Wb(e){return new Uint8Array(e.replace(/^0x/,"").match(/.{1,2}/g).map(t=>parseInt(t,16)))}function NK(e){return e.startsWith("0x")?e.slice(2):e}function $K(e){const t=Tf.decode(e)[0];return t===42?0:t===60?2:1}function BK(e){if(e<64)return new Uint8Array([e<<2]);if(e<16384){const t=e<<2|1;return new Uint8Array([t&255,t>>8&255])}else if(e<1<<30){const t=e<<2|2;return new Uint8Array([t&255,t>>8&255,t>>16&255,t>>24&255])}else throw new Error("Compact encoding > 2^30 not supported")}function PK(e){if(e<BigInt(1)<<BigInt(6))return new Uint8Array([Number(e<<BigInt(2))]);if(e<BigInt(1)<<BigInt(14)){const t=e<<BigInt(2)|BigInt(1);return new Uint8Array([Number(t&BigInt(255)),Number(t>>BigInt(8)&BigInt(255))])}else if(e<BigInt(1)<<BigInt(30)){const t=e<<BigInt(2)|BigInt(2);return new Uint8Array([Number(t&BigInt(255)),Number(t>>BigInt(8)&BigInt(255)),Number(t>>BigInt(16)&BigInt(255)),Number(t>>BigInt(24)&BigInt(255))])}else throw new Error("BigInt compact encoding not supported > 2^30")}function UK(e){const t=Uint8Array.from(Buffer.from(e.signature,"hex")),n=DK(e.transaction.address),r=CK({publicKey:n,signature:t,payload:e.transaction}),i=Buffer.from(r).toString("hex");return IK(i)}var Gp,yt,ZC,Wo,zA,QC,JC,eI,yw,Yb,Xb,pf={},tI=[],kK=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Kp=Array.isArray;function ls(e,t){for(var n in t)e[n]=t[n];return e}function bw(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function MK(e,t,n){var r,i,a,c={};for(a in t)a=="key"?r=t[a]:a=="ref"?i=t[a]:c[a]=t[a];if(arguments.length>2&&(c.children=arguments.length>3?Gp.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(a in e.defaultProps)c[a]===void 0&&(c[a]=e.defaultProps[a]);return qh(e,c,r,i,null)}function qh(e,t,n,r,i){var a={type:e,props:t,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:i??++ZC,__i:-1,__u:0};return i==null&&yt.vnode!=null&&yt.vnode(a),a}function Wp(e){return e.children}function Hh(e,t){this.props=e,this.context=t}function Yc(e,t){if(t==null)return e.__?Yc(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?Yc(e):null}function nI(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return nI(e)}}function qA(e){(!e.__d&&(e.__d=!0)&&Wo.push(e)&&!hp.__r++||zA!=yt.debounceRendering)&&((zA=yt.debounceRendering)||QC)(hp)}function hp(){for(var e,t,n,r,i,a,c,u=1;Wo.length;)Wo.length>u&&Wo.sort(JC),e=Wo.shift(),u=Wo.length,e.__d&&(n=void 0,i=(r=(t=e).__v).__e,a=[],c=[],t.__P&&((n=ls({},r)).__v=r.__v+1,yt.vnode&&yt.vnode(n),vw(t.__P,n,r,t.__n,t.__P.namespaceURI,32&r.__u?[i]:null,a,i??Yc(r),!!(32&r.__u),c),n.__v=r.__v,n.__.__k[n.__i]=n,sI(a,n,c),n.__e!=i&&nI(n)));hp.__r=0}function rI(e,t,n,r,i,a,c,u,f,d,p){var g,y,b,v,E,S,_=r&&r.__k||tI,T=t.length;for(f=jK(n,t,_,f,T),g=0;g<T;g++)(b=n.__k[g])!=null&&(y=b.__i==-1?pf:_[b.__i]||pf,b.__i=g,S=vw(e,b,y,i,a,c,u,f,d,p),v=b.__e,b.ref&&y.ref!=b.ref&&(y.ref&&ww(y.ref,null,b),p.push(b.ref,b.__c||v,b)),E==null&&v!=null&&(E=v),4&b.__u||y.__k===b.__k?f=iI(b,f,e):typeof b.type=="function"&&S!==void 0?f=S:v&&(f=v.nextSibling),b.__u&=-7);return n.__e=E,f}function jK(e,t,n,r,i){var a,c,u,f,d,p=n.length,g=p,y=0;for(e.__k=new Array(i),a=0;a<i;a++)(c=t[a])!=null&&typeof c!="boolean"&&typeof c!="function"?(f=a+y,(c=e.__k[a]=typeof c=="string"||typeof c=="number"||typeof c=="bigint"||c.constructor==String?qh(null,c,null,null,null):Kp(c)?qh(Wp,{children:c},null,null,null):c.constructor==null&&c.__b>0?qh(c.type,c.props,c.key,c.ref?c.ref:null,c.__v):c).__=e,c.__b=e.__b+1,u=null,(d=c.__i=LK(c,n,f,g))!=-1&&(g--,(u=n[d])&&(u.__u|=2)),u==null||u.__v==null?(d==-1&&(i>p?y--:i<p&&y++),typeof c.type!="function"&&(c.__u|=4)):d!=f&&(d==f-1?y--:d==f+1?y++:(d>f?y--:y++,c.__u|=4))):e.__k[a]=null;if(g)for(a=0;a<p;a++)(u=n[a])!=null&&(2&u.__u)==0&&(u.__e==r&&(r=Yc(u)),aI(u,u));return r}function iI(e,t,n){var r,i;if(typeof e.type=="function"){for(r=e.__k,i=0;r&&i<r.length;i++)r[i]&&(r[i].__=e,t=iI(r[i],t,n));return t}e.__e!=t&&(t&&e.type&&!n.contains(t)&&(t=Yc(e)),n.insertBefore(e.__e,t||null),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType==8);return t}function LK(e,t,n,r){var i,a,c=e.key,u=e.type,f=t[n];if(f===null&&e.key==null||f&&c==f.key&&u==f.type&&(2&f.__u)==0)return n;if(r>(f!=null&&(2&f.__u)==0?1:0))for(i=n-1,a=n+1;i>=0||a<t.length;){if(i>=0){if((f=t[i])&&(2&f.__u)==0&&c==f.key&&u==f.type)return i;i--}if(a<t.length){if((f=t[a])&&(2&f.__u)==0&&c==f.key&&u==f.type)return a;a++}}return-1}function HA(e,t,n){t[0]=="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||kK.test(t)?n:n+"px"}function yh(e,t,n,r,i){var a,c;e:if(t=="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof r=="string"&&(e.style.cssText=r=""),r)for(t in r)n&&t in n||HA(e.style,t,"");if(n)for(t in n)r&&n[t]==r[t]||HA(e.style,t,n[t])}else if(t[0]=="o"&&t[1]=="n")a=t!=(t=t.replace(eI,"$1")),c=t.toLowerCase(),t=c in e||t=="onFocusOut"||t=="onFocusIn"?c.slice(2):t.slice(2),e.l||(e.l={}),e.l[t+a]=n,n?r?n.u=r.u:(n.u=yw,e.addEventListener(t,a?Xb:Yb,a)):e.removeEventListener(t,a?Xb:Yb,a);else{if(i=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&n==1?"":n))}}function FA(e){return function(t){if(this.l){var n=this.l[t.type+e];if(t.t==null)t.t=yw++;else if(t.t<n.u)return;return n(yt.event?yt.event(t):t)}}}function vw(e,t,n,r,i,a,c,u,f,d){var p,g,y,b,v,E,S,_,T,O,$,I,B,z,q,k,W,F=t.type;if(t.constructor!=null)return null;128&n.__u&&(f=!!(32&n.__u),a=[u=t.__e=n.__e]),(p=yt.__b)&&p(t);e:if(typeof F=="function")try{if(_=t.props,T="prototype"in F&&F.prototype.render,O=(p=F.contextType)&&r[p.__c],$=p?O?O.props.value:p.__:r,n.__c?S=(g=t.__c=n.__c).__=g.__E:(T?t.__c=g=new F(_,$):(t.__c=g=new Hh(_,$),g.constructor=F,g.render=qK),O&&O.sub(g),g.props=_,g.state||(g.state={}),g.context=$,g.__n=r,y=g.__d=!0,g.__h=[],g._sb=[]),T&&g.__s==null&&(g.__s=g.state),T&&F.getDerivedStateFromProps!=null&&(g.__s==g.state&&(g.__s=ls({},g.__s)),ls(g.__s,F.getDerivedStateFromProps(_,g.__s))),b=g.props,v=g.state,g.__v=t,y)T&&F.getDerivedStateFromProps==null&&g.componentWillMount!=null&&g.componentWillMount(),T&&g.componentDidMount!=null&&g.__h.push(g.componentDidMount);else{if(T&&F.getDerivedStateFromProps==null&&_!==b&&g.componentWillReceiveProps!=null&&g.componentWillReceiveProps(_,$),!g.__e&&g.shouldComponentUpdate!=null&&g.shouldComponentUpdate(_,g.__s,$)===!1||t.__v==n.__v){for(t.__v!=n.__v&&(g.props=_,g.state=g.__s,g.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.some(function(G){G&&(G.__=t)}),I=0;I<g._sb.length;I++)g.__h.push(g._sb[I]);g._sb=[],g.__h.length&&c.push(g);break e}g.componentWillUpdate!=null&&g.componentWillUpdate(_,g.__s,$),T&&g.componentDidUpdate!=null&&g.__h.push(function(){g.componentDidUpdate(b,v,E)})}if(g.context=$,g.props=_,g.__P=e,g.__e=!1,B=yt.__r,z=0,T){for(g.state=g.__s,g.__d=!1,B&&B(t),p=g.render(g.props,g.state,g.context),q=0;q<g._sb.length;q++)g.__h.push(g._sb[q]);g._sb=[]}else do g.__d=!1,B&&B(t),p=g.render(g.props,g.state,g.context),g.state=g.__s;while(g.__d&&++z<25);g.state=g.__s,g.getChildContext!=null&&(r=ls(ls({},r),g.getChildContext())),T&&!y&&g.getSnapshotBeforeUpdate!=null&&(E=g.getSnapshotBeforeUpdate(b,v)),k=p,p!=null&&p.type===Wp&&p.key==null&&(k=oI(p.props.children)),u=rI(e,Kp(k)?k:[k],t,n,r,i,a,c,u,f,d),g.base=t.__e,t.__u&=-161,g.__h.length&&c.push(g),S&&(g.__E=g.__=null)}catch(G){if(t.__v=null,f||a!=null)if(G.then){for(t.__u|=f?160:128;u&&u.nodeType==8&&u.nextSibling;)u=u.nextSibling;a[a.indexOf(u)]=null,t.__e=u}else for(W=a.length;W--;)bw(a[W]);else t.__e=n.__e,t.__k=n.__k;yt.__e(G,t,n)}else a==null&&t.__v==n.__v?(t.__k=n.__k,t.__e=n.__e):u=t.__e=zK(n.__e,t,n,r,i,a,c,f,d);return(p=yt.diffed)&&p(t),128&t.__u?void 0:u}function sI(e,t,n){for(var r=0;r<n.length;r++)ww(n[r],n[++r],n[++r]);yt.__c&&yt.__c(t,e),e.some(function(i){try{e=i.__h,i.__h=[],e.some(function(a){a.call(i)})}catch(a){yt.__e(a,i.__v)}})}function oI(e){return typeof e!="object"||e==null||e.__b&&e.__b>0?e:Kp(e)?e.map(oI):ls({},e)}function zK(e,t,n,r,i,a,c,u,f){var d,p,g,y,b,v,E,S=n.props,_=t.props,T=t.type;if(T=="svg"?i="http://www.w3.org/2000/svg":T=="math"?i="http://www.w3.org/1998/Math/MathML":i||(i="http://www.w3.org/1999/xhtml"),a!=null){for(d=0;d<a.length;d++)if((b=a[d])&&"setAttribute"in b==!!T&&(T?b.localName==T:b.nodeType==3)){e=b,a[d]=null;break}}if(e==null){if(T==null)return document.createTextNode(_);e=document.createElementNS(i,T,_.is&&_),u&&(yt.__m&&yt.__m(t,a),u=!1),a=null}if(T==null)S===_||u&&e.data==_||(e.data=_);else{if(a=a&&Gp.call(e.childNodes),S=n.props||pf,!u&&a!=null)for(S={},d=0;d<e.attributes.length;d++)S[(b=e.attributes[d]).name]=b.value;for(d in S)if(b=S[d],d!="children"){if(d=="dangerouslySetInnerHTML")g=b;else if(!(d in _)){if(d=="value"&&"defaultValue"in _||d=="checked"&&"defaultChecked"in _)continue;yh(e,d,null,b,i)}}for(d in _)b=_[d],d=="children"?y=b:d=="dangerouslySetInnerHTML"?p=b:d=="value"?v=b:d=="checked"?E=b:u&&typeof b!="function"||S[d]===b||yh(e,d,b,S[d],i);if(p)u||g&&(p.__html==g.__html||p.__html==e.innerHTML)||(e.innerHTML=p.__html),t.__k=[];else if(g&&(e.innerHTML=""),rI(t.type=="template"?e.content:e,Kp(y)?y:[y],t,n,r,T=="foreignObject"?"http://www.w3.org/1999/xhtml":i,a,c,a?a[0]:n.__k&&Yc(n,0),u,f),a!=null)for(d=a.length;d--;)bw(a[d]);u||(d="value",T=="progress"&&v==null?e.removeAttribute("value"):v!=null&&(v!==e[d]||T=="progress"&&!v||T=="option"&&v!=S[d])&&yh(e,d,v,S[d],i),d="checked",E!=null&&E!=e[d]&&yh(e,d,E,S[d],i))}return e}function ww(e,t,n){try{if(typeof e=="function"){var r=typeof e.__u=="function";r&&e.__u(),r&&t==null||(e.__u=e(t))}else e.current=t}catch(i){yt.__e(i,n)}}function aI(e,t,n){var r,i;if(yt.unmount&&yt.unmount(e),(r=e.ref)&&(r.current&&r.current!=e.__e||ww(r,null,t)),(r=e.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(a){yt.__e(a,t)}r.base=r.__P=null}if(r=e.__k)for(i=0;i<r.length;i++)r[i]&&aI(r[i],t,n||typeof e.type!="function");n||bw(e.__e),e.__c=e.__=e.__e=void 0}function qK(e,t,n){return this.constructor(e,n)}function VA(e,t,n){var r,i,a,c;t==document&&(t=document.documentElement),yt.__&&yt.__(e,t),i=(r=!1)?null:t.__k,a=[],c=[],vw(t,e=t.__k=MK(Wp,null,[e]),i||pf,pf,t.namespaceURI,i?null:t.firstChild?Gp.call(t.childNodes):null,a,i?i.__e:t.firstChild,r,c),sI(a,e,c)}Gp=tI.slice,yt={__e:function(e,t,n,r){for(var i,a,c;t=t.__;)if((i=t.__c)&&!i.__)try{if((a=i.constructor)&&a.getDerivedStateFromError!=null&&(i.setState(a.getDerivedStateFromError(e)),c=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(e,r||{}),c=i.__d),c)return i.__E=i}catch(u){e=u}throw e}},ZC=0,Hh.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=ls({},this.state),typeof e=="function"&&(e=e(ls({},n),this.props)),e&&ls(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),qA(this))},Hh.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),qA(this))},Hh.prototype.render=Wp,Wo=[],QC=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,JC=function(e,t){return e.__v.__b-t.__v.__b},hp.__r=0,eI=/(PointerCapture)$|Capture$/i,yw=0,Yb=FA(!1),Xb=FA(!0);var HK=0;function yi(e,t,n,r,i,a){t||(t={});var c,u,f=t;if("ref"in f)for(u in f={},t)u=="ref"?c=t[u]:f[u]=t[u];var d={type:e,props:f,key:n,ref:c,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--HK,__i:-1,__u:0,__source:i,__self:a};if(typeof e=="function"&&(c=e.defaultProps))for(u in c)f[u]===void 0&&(f[u]=c[u]);return yt.vnode&&yt.vnode(d),d}class wa{}let FK=class extends wa{constructor(t){super()}};const GA=Ee.FIVE_SECONDS,Ea={pulse:"heartbeat_pulse"};let VK=class cI extends FK{constructor(t){super(t),this.events=new tr.EventEmitter,this.interval=GA,this.interval=t?.interval||GA}static async init(t){const n=new cI(t);return await n.init(),n}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(t,n){this.events.on(t,n)}once(t,n){this.events.once(t,n)}off(t,n){this.events.off(t,n)}removeListener(t,n){this.events.removeListener(t,n)}async initialize(){this.intervalRef=setInterval(()=>this.pulse(),Ee.toMiliseconds(this.interval))}pulse(){this.events.emit(Ea.pulse)}};const GK=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,KK=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,WK=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function YK(e,t){if(e==="__proto__"||e==="constructor"&&t&&typeof t=="object"&&"prototype"in t){XK(e);return}return t}function XK(e){console.warn(`[destr] Dropping "${e}" key to prevent prototype pollution.`)}function bh(e,t={}){if(typeof e!="string")return e;if(e[0]==='"'&&e[e.length-1]==='"'&&e.indexOf("\\")===-1)return e.slice(1,-1);const n=e.trim();if(n.length<=9)switch(n.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!WK.test(e)){if(t.strict)throw new SyntaxError("[destr] Invalid JSON");return e}try{if(GK.test(e)||KK.test(e)){if(t.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(e,YK)}return JSON.parse(e)}catch(r){if(t.strict)throw r;return e}}function ZK(e){return!e||typeof e.then!="function"?Promise.resolve(e):e}function an(e,...t){try{return ZK(e(...t))}catch(n){return Promise.reject(n)}}function QK(e){const t=typeof e;return e===null||t!=="object"&&t!=="function"}function JK(e){const t=Object.getPrototypeOf(e);return!t||t.isPrototypeOf(Object)}function Fh(e){if(QK(e))return String(e);if(JK(e)||Array.isArray(e))return JSON.stringify(e);if(typeof e.toJSON=="function")return Fh(e.toJSON());throw new Error("[unstorage] Cannot stringify value!")}const Zb="base64:";function eW(e){return typeof e=="string"?e:Zb+rW(e)}function tW(e){return typeof e!="string"||!e.startsWith(Zb)?e:nW(e.slice(Zb.length))}function nW(e){return globalThis.Buffer?Buffer.from(e,"base64"):Uint8Array.from(globalThis.atob(e),t=>t.codePointAt(0))}function rW(e){return globalThis.Buffer?Buffer.from(e).toString("base64"):globalThis.btoa(String.fromCodePoint(...e))}function Gn(e){return e&&e.split("?")[0]?.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,"")||""}function iW(...e){return Gn(e.join(":"))}function vh(e){return e=Gn(e),e?e+":":""}function sW(e,t){if(t===void 0)return!0;let n=0,r=e.indexOf(":");for(;r>-1;)n++,r=e.indexOf(":",r+1);return n<=t}function oW(e,t){return t?e.startsWith(t)&&e[e.length-1]!=="$":e[e.length-1]!=="$"}const aW="memory",cW=()=>{const e=new Map;return{name:aW,getInstance:()=>e,hasItem(t){return e.has(t)},getItem(t){return e.get(t)??null},getItemRaw(t){return e.get(t)??null},setItem(t,n){e.set(t,n)},setItemRaw(t,n){e.set(t,n)},removeItem(t){e.delete(t)},getKeys(){return[...e.keys()]},clear(){e.clear()},dispose(){e.clear()}}};function lW(e={}){const t={mounts:{"":e.driver||cW()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},n=d=>{for(const p of t.mountpoints)if(d.startsWith(p))return{base:p,relativeKey:d.slice(p.length),driver:t.mounts[p]};return{base:"",relativeKey:d,driver:t.mounts[""]}},r=(d,p)=>t.mountpoints.filter(g=>g.startsWith(d)||p&&d.startsWith(g)).map(g=>({relativeBase:d.length>g.length?d.slice(g.length):void 0,mountpoint:g,driver:t.mounts[g]})),i=(d,p)=>{if(t.watching){p=Gn(p);for(const g of t.watchListeners)g(d,p)}},a=async()=>{if(!t.watching){t.watching=!0;for(const d in t.mounts)t.unwatch[d]=await KA(t.mounts[d],i,d)}},c=async()=>{if(t.watching){for(const d in t.unwatch)await t.unwatch[d]();t.unwatch={},t.watching=!1}},u=(d,p,g)=>{const y=new Map,b=v=>{let E=y.get(v.base);return E||(E={driver:v.driver,base:v.base,items:[]},y.set(v.base,E)),E};for(const v of d){const E=typeof v=="string",S=Gn(E?v:v.key),_=E?void 0:v.value,T=E||!v.options?p:{...p,...v.options},O=n(S);b(O).items.push({key:S,value:_,relativeKey:O.relativeKey,options:T})}return Promise.all([...y.values()].map(v=>g(v))).then(v=>v.flat())},f={hasItem(d,p={}){d=Gn(d);const{relativeKey:g,driver:y}=n(d);return an(y.hasItem,g,p)},getItem(d,p={}){d=Gn(d);const{relativeKey:g,driver:y}=n(d);return an(y.getItem,g,p).then(b=>bh(b))},getItems(d,p={}){return u(d,p,g=>g.driver.getItems?an(g.driver.getItems,g.items.map(y=>({key:y.relativeKey,options:y.options})),p).then(y=>y.map(b=>({key:iW(g.base,b.key),value:bh(b.value)}))):Promise.all(g.items.map(y=>an(g.driver.getItem,y.relativeKey,y.options).then(b=>({key:y.key,value:bh(b)})))))},getItemRaw(d,p={}){d=Gn(d);const{relativeKey:g,driver:y}=n(d);return y.getItemRaw?an(y.getItemRaw,g,p):an(y.getItem,g,p).then(b=>tW(b))},async setItem(d,p,g={}){if(p===void 0)return f.removeItem(d);d=Gn(d);const{relativeKey:y,driver:b}=n(d);b.setItem&&(await an(b.setItem,y,Fh(p),g),b.watch||i("update",d))},async setItems(d,p){await u(d,p,async g=>{if(g.driver.setItems)return an(g.driver.setItems,g.items.map(y=>({key:y.relativeKey,value:Fh(y.value),options:y.options})),p);g.driver.setItem&&await Promise.all(g.items.map(y=>an(g.driver.setItem,y.relativeKey,Fh(y.value),y.options)))})},async setItemRaw(d,p,g={}){if(p===void 0)return f.removeItem(d,g);d=Gn(d);const{relativeKey:y,driver:b}=n(d);if(b.setItemRaw)await an(b.setItemRaw,y,p,g);else if(b.setItem)await an(b.setItem,y,eW(p),g);else return;b.watch||i("update",d)},async removeItem(d,p={}){typeof p=="boolean"&&(p={removeMeta:p}),d=Gn(d);const{relativeKey:g,driver:y}=n(d);y.removeItem&&(await an(y.removeItem,g,p),(p.removeMeta||p.removeMata)&&await an(y.removeItem,g+"$",p),y.watch||i("remove",d))},async getMeta(d,p={}){typeof p=="boolean"&&(p={nativeOnly:p}),d=Gn(d);const{relativeKey:g,driver:y}=n(d),b=Object.create(null);if(y.getMeta&&Object.assign(b,await an(y.getMeta,g,p)),!p.nativeOnly){const v=await an(y.getItem,g+"$",p).then(E=>bh(E));v&&typeof v=="object"&&(typeof v.atime=="string"&&(v.atime=new Date(v.atime)),typeof v.mtime=="string"&&(v.mtime=new Date(v.mtime)),Object.assign(b,v))}return b},setMeta(d,p,g={}){return this.setItem(d+"$",p,g)},removeMeta(d,p={}){return this.removeItem(d+"$",p)},async getKeys(d,p={}){d=vh(d);const g=r(d,!0);let y=[];const b=[];let v=!0;for(const S of g){S.driver.flags?.maxDepth||(v=!1);const _=await an(S.driver.getKeys,S.relativeBase,p);for(const T of _){const O=S.mountpoint+Gn(T);y.some($=>O.startsWith($))||b.push(O)}y=[S.mountpoint,...y.filter(T=>!T.startsWith(S.mountpoint))]}const E=p.maxDepth!==void 0&&!v;return b.filter(S=>(!E||sW(S,p.maxDepth))&&oW(S,d))},async clear(d,p={}){d=vh(d),await Promise.all(r(d,!1).map(async g=>{if(g.driver.clear)return an(g.driver.clear,g.relativeBase,p);if(g.driver.removeItem){const y=await g.driver.getKeys(g.relativeBase||"",p);return Promise.all(y.map(b=>g.driver.removeItem(b,p)))}}))},async dispose(){await Promise.all(Object.values(t.mounts).map(d=>WA(d)))},async watch(d){return await a(),t.watchListeners.push(d),async()=>{t.watchListeners=t.watchListeners.filter(p=>p!==d),t.watchListeners.length===0&&await c()}},async unwatch(){t.watchListeners=[],await c()},mount(d,p){if(d=vh(d),d&&t.mounts[d])throw new Error(`already mounted at ${d}`);return d&&(t.mountpoints.push(d),t.mountpoints.sort((g,y)=>y.length-g.length)),t.mounts[d]=p,t.watching&&Promise.resolve(KA(p,i,d)).then(g=>{t.unwatch[d]=g}).catch(console.error),f},async unmount(d,p=!0){d=vh(d),!(!d||!t.mounts[d])&&(t.watching&&d in t.unwatch&&(t.unwatch[d]?.(),delete t.unwatch[d]),p&&await WA(t.mounts[d]),t.mountpoints=t.mountpoints.filter(g=>g!==d),delete t.mounts[d])},getMount(d=""){d=Gn(d)+":";const p=n(d);return{driver:p.driver,base:p.base}},getMounts(d="",p={}){return d=Gn(d),r(d,p.parents).map(y=>({driver:y.driver,base:y.mountpoint}))},keys:(d,p={})=>f.getKeys(d,p),get:(d,p={})=>f.getItem(d,p),set:(d,p,g={})=>f.setItem(d,p,g),has:(d,p={})=>f.hasItem(d,p),del:(d,p={})=>f.removeItem(d,p),remove:(d,p={})=>f.removeItem(d,p)};return f}function KA(e,t,n){return e.watch?e.watch((r,i)=>t(r,n+i)):()=>{}}async function WA(e){typeof e.dispose=="function"&&await an(e.dispose)}function Sa(e){return new Promise((t,n)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>n(e.error)})}function lI(e,t){let n;const r=()=>{if(n)return n;const i=indexedDB.open(e);return i.onupgradeneeded=()=>i.result.createObjectStore(t),n=Sa(i),n.then(a=>{a.onclose=()=>n=void 0},()=>{}),n};return(i,a)=>r().then(c=>a(c.transaction(t,i).objectStore(t)))}let R0;function Pf(){return R0||(R0=lI("keyval-store","keyval")),R0}function YA(e,t=Pf()){return t("readonly",n=>Sa(n.get(e)))}function uW(e,t,n=Pf()){return n("readwrite",r=>(r.put(t,e),Sa(r.transaction)))}function fW(e,t=Pf()){return t("readwrite",n=>(n.delete(e),Sa(n.transaction)))}function dW(e=Pf()){return e("readwrite",t=>(t.clear(),Sa(t.transaction)))}function hW(e,t){return e.openCursor().onsuccess=function(){this.result&&(t(this.result),this.result.continue())},Sa(e.transaction)}function pW(e=Pf()){return e("readonly",t=>{if(t.getAllKeys)return Sa(t.getAllKeys());const n=[];return hW(t,r=>n.push(r.key)).then(()=>n)})}const gW="idb-keyval";var mW=(e={})=>{const t=e.base&&e.base.length>0?`${e.base}:`:"",n=i=>t+i;let r;return e.dbName&&e.storeName&&(r=lI(e.dbName,e.storeName)),{name:gW,options:e,async hasItem(i){return!(typeof await YA(n(i),r)>"u")},async getItem(i){return await YA(n(i),r)??null},setItem(i,a){return uW(n(i),a,r)},removeItem(i){return fW(n(i),r)},getKeys(){return pW(r)},clear(){return dW(r)}}};const yW="WALLET_CONNECT_V2_INDEXED_DB",bW="keyvaluestorage";let vW=class{constructor(){this.indexedDb=lW({driver:mW({dbName:yW,storeName:bW})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(t=>[t.key,t.value])}async getItem(t){const n=await this.indexedDb.getItem(t);if(n!==null)return n}async setItem(t,n){await this.indexedDb.setItem(t,ms(n))}async removeItem(t){await this.indexedDb.removeItem(t)}};var O0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Vh={exports:{}};(function(){let e;function t(){}e=t,e.prototype.getItem=function(n){return this.hasOwnProperty(n)?String(this[n]):null},e.prototype.setItem=function(n,r){this[n]=String(r)},e.prototype.removeItem=function(n){delete this[n]},e.prototype.clear=function(){const n=this;Object.keys(n).forEach(function(r){n[r]=void 0,delete n[r]})},e.prototype.key=function(n){return n=n||0,Object.keys(this)[n]},e.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof O0<"u"&&O0.localStorage?Vh.exports=O0.localStorage:typeof window<"u"&&window.localStorage?Vh.exports=window.localStorage:Vh.exports=new t})();function wW(e){var t;return[e[0],ca((t=e[1])!=null?t:"")]}let EW=class{constructor(){this.localStorage=Vh.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(wW)}async getItem(t){const n=this.localStorage.getItem(t);if(n!==null)return ca(n)}async setItem(t,n){this.localStorage.setItem(t,ms(n))}async removeItem(t){this.localStorage.removeItem(t)}};const SW="wc_storage_version",XA=1,_W=async(e,t,n)=>{const r=SW,i=await t.getItem(r);if(i&&i>=XA){n(t);return}const a=await e.getKeys();if(!a.length){n(t);return}const c=[];for(;a.length;){const u=a.shift();if(!u)continue;const f=u.toLowerCase();if(f.includes("wc@")||f.includes("walletconnect")||f.includes("wc_")||f.includes("wallet_connect")){const d=await e.getItem(u);await t.setItem(u,d),c.push(u)}}await t.setItem(r,XA),n(t),xW(e,c)},xW=async(e,t)=>{t.length&&t.forEach(async n=>{await e.removeItem(n)})};let AW=class{constructor(){this.initialized=!1,this.setInitialized=n=>{this.storage=n,this.initialized=!0};const t=new EW;this.storage=t;try{const n=new vW;_W(t,n,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(t){return await this.initialize(),this.storage.getItem(t)}async setItem(t,n){return await this.initialize(),this.storage.setItem(t,n)}async removeItem(t){return await this.initialize(),this.storage.removeItem(t)}async initialize(){this.initialized||await new Promise(t=>{const n=setInterval(()=>{this.initialized&&(clearInterval(n),t())},20)})}};var T0,ZA;function RW(){if(ZA)return T0;ZA=1;function e(n){try{return JSON.stringify(n)}catch{return'"[Circular]"'}}T0=t;function t(n,r,i){var a=i&&i.stringify||e,c=1;if(typeof n=="object"&&n!==null){var u=r.length+c;if(u===1)return n;var f=new Array(u);f[0]=a(n);for(var d=1;d<u;d++)f[d]=a(r[d]);return f.join(" ")}if(typeof n!="string")return n;var p=r.length;if(p===0)return n;for(var g="",y=1-c,b=-1,v=n&&n.length||0,E=0;E<v;){if(n.charCodeAt(E)===37&&E+1<v){switch(b=b>-1?b:0,n.charCodeAt(E+1)){case 100:case 102:if(y>=p||r[y]==null)break;b<E&&(g+=n.slice(b,E)),g+=Number(r[y]),b=E+2,E++;break;case 105:if(y>=p||r[y]==null)break;b<E&&(g+=n.slice(b,E)),g+=Math.floor(Number(r[y])),b=E+2,E++;break;case 79:case 111:case 106:if(y>=p||r[y]===void 0)break;b<E&&(g+=n.slice(b,E));var S=typeof r[y];if(S==="string"){g+="'"+r[y]+"'",b=E+2,E++;break}if(S==="function"){g+=r[y].name||"<anonymous>",b=E+2,E++;break}g+=a(r[y]),b=E+2,E++;break;case 115:if(y>=p)break;b<E&&(g+=n.slice(b,E)),g+=String(r[y]),b=E+2,E++;break;case 37:b<E&&(g+=n.slice(b,E)),g+="%",b=E+2,E++,y--;break}++y}++E}return b===-1?n:(b<v&&(g+=n.slice(b)),g)}return T0}var D0,QA;function OW(){if(QA)return D0;QA=1;const e=RW();D0=i;const t=I().console||{},n={mapHttpRequest:v,mapHttpResponse:v,wrapRequestSerializer:E,wrapResponseSerializer:E,wrapErrorSerializer:E,req:v,res:v,err:y};function r(B,z){return Array.isArray(B)?B.filter(function(k){return k!=="!stdSerializers.err"}):B===!0?Object.keys(z):!1}function i(B){B=B||{},B.browser=B.browser||{};const z=B.browser.transmit;if(z&&typeof z.send!="function")throw Error("pino: transmit option must have a send function");const q=B.browser.write||t;B.browser.write&&(B.browser.asObject=!0);const k=B.serializers||{},W=r(B.browser.serialize,k);let F=B.browser.serialize;Array.isArray(B.browser.serialize)&&B.browser.serialize.indexOf("!stdSerializers.err")>-1&&(F=!1);const G=["error","fatal","warn","info","debug","trace"];typeof q=="function"&&(q.error=q.fatal=q.warn=q.info=q.debug=q.trace=q),B.enabled===!1&&(B.level="silent");const ne=B.level||"info",ee=Object.create(q);ee.log||(ee.log=S),Object.defineProperty(ee,"levelVal",{get:R}),Object.defineProperty(ee,"level",{get:L,set:V});const D={transmit:z,serialize:W,asObject:B.browser.asObject,levels:G,timestamp:b(B)};ee.levels=i.levels,ee.level=ne,ee.setMaxListeners=ee.getMaxListeners=ee.emit=ee.addListener=ee.on=ee.prependListener=ee.once=ee.prependOnceListener=ee.removeListener=ee.removeAllListeners=ee.listeners=ee.listenerCount=ee.eventNames=ee.write=ee.flush=S,ee.serializers=k,ee._serialize=W,ee._stdErrSerialize=F,ee.child=X,z&&(ee._logEvent=g());function R(){return this.level==="silent"?1/0:this.levels.values[this.level]}function L(){return this._level}function V(N){if(N!=="silent"&&!this.levels.values[N])throw Error("unknown level "+N);this._level=N,a(D,ee,"error","log"),a(D,ee,"fatal","error"),a(D,ee,"warn","error"),a(D,ee,"info","log"),a(D,ee,"debug","log"),a(D,ee,"trace","log")}function X(N,K){if(!N)throw new Error("missing bindings for child Pino");K=K||{},W&&N.serializers&&(K.serializers=N.serializers);const te=K.serializers;if(W&&te){var se=Object.assign({},k,te),ie=B.browser.serialize===!0?Object.keys(se):W;delete N.serializers,f([N],ie,se,this._stdErrSerialize)}function fe(Q){this._childLevel=(Q._childLevel|0)+1,this.error=d(Q,N,"error"),this.fatal=d(Q,N,"fatal"),this.warn=d(Q,N,"warn"),this.info=d(Q,N,"info"),this.debug=d(Q,N,"debug"),this.trace=d(Q,N,"trace"),se&&(this.serializers=se,this._serialize=ie),z&&(this._logEvent=g([].concat(Q._logEvent.bindings,N)))}return fe.prototype=this,new fe(this)}return ee}i.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},i.stdSerializers=n,i.stdTimeFunctions=Object.assign({},{nullTime:_,epochTime:T,unixTime:O,isoTime:$});function a(B,z,q,k){const W=Object.getPrototypeOf(z);z[q]=z.levelVal>z.levels.values[q]?S:W[q]?W[q]:t[q]||t[k]||S,c(B,z,q)}function c(B,z,q){!B.transmit&&z[q]===S||(z[q]=function(k){return function(){const F=B.timestamp(),G=new Array(arguments.length),ne=Object.getPrototypeOf&&Object.getPrototypeOf(this)===t?t:this;for(var ee=0;ee<G.length;ee++)G[ee]=arguments[ee];if(B.serialize&&!B.asObject&&f(G,this._serialize,this.serializers,this._stdErrSerialize),B.asObject?k.call(ne,u(this,q,G,F)):k.apply(ne,G),B.transmit){const D=B.transmit.level||z.level,R=i.levels.values[D],L=i.levels.values[q];if(L<R)return;p(this,{ts:F,methodLevel:q,methodValue:L,transmitValue:i.levels.values[B.transmit.level||z.level],send:B.transmit.send,val:z.levelVal},G)}}}(z[q]))}function u(B,z,q,k){B._serialize&&f(q,B._serialize,B.serializers,B._stdErrSerialize);const W=q.slice();let F=W[0];const G={};k&&(G.time=k),G.level=i.levels.values[z];let ne=(B._childLevel|0)+1;if(ne<1&&(ne=1),F!==null&&typeof F=="object"){for(;ne--&&typeof W[0]=="object";)Object.assign(G,W.shift());F=W.length?e(W.shift(),W):void 0}else typeof F=="string"&&(F=e(W.shift(),W));return F!==void 0&&(G.msg=F),G}function f(B,z,q,k){for(const W in B)if(k&&B[W]instanceof Error)B[W]=i.stdSerializers.err(B[W]);else if(typeof B[W]=="object"&&!Array.isArray(B[W]))for(const F in B[W])z&&z.indexOf(F)>-1&&F in q&&(B[W][F]=q[F](B[W][F]))}function d(B,z,q){return function(){const k=new Array(1+arguments.length);k[0]=z;for(var W=1;W<k.length;W++)k[W]=arguments[W-1];return B[q].apply(this,k)}}function p(B,z,q){const k=z.send,W=z.ts,F=z.methodLevel,G=z.methodValue,ne=z.val,ee=B._logEvent.bindings;f(q,B._serialize||Object.keys(B.serializers),B.serializers,B._stdErrSerialize===void 0?!0:B._stdErrSerialize),B._logEvent.ts=W,B._logEvent.messages=q.filter(function(D){return ee.indexOf(D)===-1}),B._logEvent.level.label=F,B._logEvent.level.value=G,k(F,B._logEvent,ne),B._logEvent=g(ee)}function g(B){return{ts:0,messages:[],bindings:B||[],level:{label:"",value:0}}}function y(B){const z={type:B.constructor.name,msg:B.message,stack:B.stack};for(const q in B)z[q]===void 0&&(z[q]=B[q]);return z}function b(B){return typeof B.timestamp=="function"?B.timestamp:B.timestamp===!1?_:T}function v(){return{}}function E(B){return B}function S(){}function _(){return!1}function T(){return Date.now()}function O(){return Math.round(Date.now()/1e3)}function $(){return new Date(Date.now()).toISOString()}function I(){function B(z){return typeof z<"u"&&z}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return B(self)||B(window)||B(this)||{}}}return D0}var kc=OW();const Uf=vs(kc),TW={level:"info"},kf="custom_context",Ew=1e3*1024;let DW=class{constructor(t){this.nodeValue=t,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}},JA=class{constructor(t){this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=t,this.sizeInBytes=0}append(t){const n=new DW(t);if(n.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${t} with size ${n.size}`);for(;this.size+n.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=n),this.tail=n):(this.head=n,this.tail=n),this.lengthInNodes++,this.sizeInBytes+=n.size}shift(){if(!this.head)return;const t=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=t.size}toArray(){const t=[];let n=this.head;for(;n!==null;)t.push(n.value),n=n.next;return t}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let t=this.head;return{next:()=>{if(!t)return{done:!0,value:null};const n=t.value;return t=t.next,{done:!1,value:n}}}}},uI=class{constructor(t,n=Ew){this.level=t??"error",this.levelValue=kc.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=n,this.logs=new JA(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(t,n){n===kc.levels.values.error?console.error(t):n===kc.levels.values.warn?console.warn(t):n===kc.levels.values.debug?console.debug(t):n===kc.levels.values.trace?console.trace(t):console.log(t)}appendToLogs(t){this.logs.append(ms({timestamp:new Date().toISOString(),log:t}));const n=typeof t=="string"?JSON.parse(t).level:t.level;n>=this.levelValue&&this.forwardToConsole(t,n)}getLogs(){return this.logs}clearLogs(){this.logs=new JA(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(t){const n=this.getLogArray();return n.push(ms({extraMetadata:t})),new Blob(n,{type:"application/json"})}},CW=class{constructor(t,n=Ew){this.baseChunkLogger=new uI(t,n)}write(t){this.baseChunkLogger.appendToLogs(t)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(t){return this.baseChunkLogger.logsToBlob(t)}downloadLogsBlobInBrowser(t){const n=URL.createObjectURL(this.logsToBlob(t)),r=document.createElement("a");r.href=n,r.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)}},IW=class{constructor(t,n=Ew){this.baseChunkLogger=new uI(t,n)}write(t){this.baseChunkLogger.appendToLogs(t)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(t){return this.baseChunkLogger.logsToBlob(t)}};var NW=Object.defineProperty,$W=Object.defineProperties,BW=Object.getOwnPropertyDescriptors,eR=Object.getOwnPropertySymbols,PW=Object.prototype.hasOwnProperty,UW=Object.prototype.propertyIsEnumerable,tR=(e,t,n)=>t in e?NW(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,pp=(e,t)=>{for(var n in t||(t={}))PW.call(t,n)&&tR(e,n,t[n]);if(eR)for(var n of eR(t))UW.call(t,n)&&tR(e,n,t[n]);return e},gp=(e,t)=>$W(e,BW(t));function Yp(e){return gp(pp({},e),{level:e?.level||TW.level})}function kW(e,t=kf){return e[t]||""}function MW(e,t,n=kf){return e[n]=t,e}function ir(e,t=kf){let n="";return typeof e.bindings>"u"?n=kW(e,t):n=e.bindings().context||"",n}function jW(e,t,n=kf){const r=ir(e,n);return r.trim()?`${r}/${t}`:t}function kn(e,t,n=kf){const r=jW(e,t,n),i=e.child({context:r});return MW(i,r,n)}function LW(e){var t,n;const r=new CW((t=e.opts)==null?void 0:t.level,e.maxSizeInBytes);return{logger:Uf(gp(pp({},e.opts),{level:"trace",browser:gp(pp({},(n=e.opts)==null?void 0:n.browser),{write:i=>r.write(i)})})),chunkLoggerController:r}}function zW(e){var t;const n=new IW((t=e.opts)==null?void 0:t.level,e.maxSizeInBytes);return{logger:Uf(gp(pp({},e.opts),{level:"trace"}),n),chunkLoggerController:n}}function qW(e){return typeof e.loggerOverride<"u"&&typeof e.loggerOverride!="string"?{logger:e.loggerOverride,chunkLoggerController:null}:typeof window<"u"?LW(e):zW(e)}var HW=Object.defineProperty,FW=(e,t,n)=>t in e?HW(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,nR=(e,t,n)=>FW(e,typeof t!="symbol"?t+"":t,n);let VW=class extends wa{constructor(t){super(),this.opts=t,nR(this,"protocol","wc"),nR(this,"version",2)}};var GW=Object.defineProperty,KW=(e,t,n)=>t in e?GW(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,WW=(e,t,n)=>KW(e,t+"",n);let YW=class extends wa{constructor(t,n){super(),this.core=t,this.logger=n,WW(this,"records",new Map)}},XW=class{constructor(t,n){this.logger=t,this.core=n}};class ZW extends wa{constructor(t,n){super(),this.relayer=t,this.logger=n}}let QW=class extends wa{constructor(t){super()}},JW=class{constructor(t,n,r,i){this.core=t,this.logger=n,this.name=r}},eY=class extends wa{constructor(t,n){super(),this.relayer=t,this.logger=n}},tY=class extends wa{constructor(t,n){super(),this.core=t,this.logger=n}},nY=class{constructor(t,n,r){this.core=t,this.logger=n,this.store=r}},rY=class{constructor(t,n){this.projectId=t,this.logger=n}},iY=class{constructor(t,n,r){this.core=t,this.logger=n,this.telemetryEnabled=r}};var sY=Object.defineProperty,oY=(e,t,n)=>t in e?sY(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,rR=(e,t,n)=>oY(e,typeof t!="symbol"?t+"":t,n);class aY{constructor(t){this.opts=t,rR(this,"protocol","wc"),rR(this,"version",2)}}let cY=class{constructor(t){this.client=t}};const lY="PARSE_ERROR",uY="INVALID_REQUEST",fY="METHOD_NOT_FOUND",dY="INVALID_PARAMS",fI="INTERNAL_ERROR",Sw="SERVER_ERROR",hY=[-32700,-32600,-32601,-32602,-32603],Wu={[lY]:{code:-32700,message:"Parse error"},[uY]:{code:-32600,message:"Invalid Request"},[fY]:{code:-32601,message:"Method not found"},[dY]:{code:-32602,message:"Invalid params"},[fI]:{code:-32603,message:"Internal error"},[Sw]:{code:-32e3,message:"Server error"}},dI=Sw;function pY(e){return hY.includes(e)}function iR(e){return Object.keys(Wu).includes(e)?Wu[e]:Wu[dI]}function gY(e){const t=Object.values(Wu).find(n=>n.code===e);return t||Wu[dI]}function hI(e,t,n){return e.message.includes("getaddrinfo ENOTFOUND")||e.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${n} RPC url at ${t}`):e}var C0={},ts={},sR;function mY(){if(sR)return ts;sR=1,Object.defineProperty(ts,"__esModule",{value:!0}),ts.isBrowserCryptoAvailable=ts.getSubtleCrypto=ts.getBrowerCrypto=void 0;function e(){return Xn?.crypto||Xn?.msCrypto||{}}ts.getBrowerCrypto=e;function t(){const r=e();return r.subtle||r.webkitSubtle}ts.getSubtleCrypto=t;function n(){return!!e()&&!!t()}return ts.isBrowserCryptoAvailable=n,ts}var ns={},oR;function yY(){if(oR)return ns;oR=1,Object.defineProperty(ns,"__esModule",{value:!0}),ns.isBrowser=ns.isNode=ns.isReactNative=void 0;function e(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}ns.isReactNative=e;function t(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}ns.isNode=t;function n(){return!e()&&!t()}return ns.isBrowser=n,ns}var aR;function bY(){return aR||(aR=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});const t=Of;t.__exportStar(mY(),e),t.__exportStar(yY(),e)}(C0)),C0}var vY=bY();function vi(e=3){const t=Date.now()*Math.pow(10,e),n=Math.floor(Math.random()*Math.pow(10,e));return t+n}function ta(e=6){return BigInt(vi(e))}function co(e,t,n){return{id:n||vi(),jsonrpc:"2.0",method:e,params:t}}function Xp(e,t){return{id:e,jsonrpc:"2.0",result:t}}function Zp(e,t,n){return{id:e,jsonrpc:"2.0",error:wY(t)}}function wY(e,t){return typeof e>"u"?iR(fI):(typeof e=="string"&&(e=Object.assign(Object.assign({},iR(Sw)),{message:e})),pY(e.code)&&(e=gY(e.code)),e)}class EY{}class SY extends EY{constructor(){super()}}class _Y extends SY{constructor(t){super()}}const xY="^https?:",AY="^wss?:";function RY(e){const t=e.match(new RegExp(/^\w+:/,"gi"));if(!(!t||!t.length))return t[0]}function pI(e,t){const n=RY(e);return typeof n>"u"?!1:new RegExp(t).test(n)}function cR(e){return pI(e,xY)}function lR(e){return pI(e,AY)}function OY(e){return new RegExp("wss?://localhost(:d{2,5})?").test(e)}function gI(e){return typeof e=="object"&&"id"in e&&"jsonrpc"in e&&e.jsonrpc==="2.0"}function _w(e){return gI(e)&&"method"in e}function Qp(e){return gI(e)&&(wi(e)||Ur(e))}function wi(e){return"result"in e}function Ur(e){return"error"in e}let Hr=class extends _Y{constructor(t){super(t),this.events=new tr.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(t),this.connection.connected&&this.registerEventListeners()}async connect(t=this.connection){await this.open(t)}async disconnect(){await this.close()}on(t,n){this.events.on(t,n)}once(t,n){this.events.once(t,n)}off(t,n){this.events.off(t,n)}removeListener(t,n){this.events.removeListener(t,n)}async request(t,n){return this.requestStrict(co(t.method,t.params||[],t.id||ta().toString()),n)}async requestStrict(t,n){return new Promise(async(r,i)=>{if(!this.connection.connected)try{await this.open()}catch(a){i(a)}this.events.on(`${t.id}`,a=>{Ur(a)?i(a.error):r(a.result)});try{await this.connection.send(t,n)}catch(a){i(a)}})}setConnection(t=this.connection){return t}onPayload(t){this.events.emit("payload",t),Qp(t)?this.events.emit(`${t.id}`,t):this.events.emit("message",{type:t.method,data:t.params})}onClose(t){t&&t.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${t.code} ${t.reason?`(${t.reason})`:""}`)),this.events.emit("disconnect")}async open(t=this.connection){this.connection===t&&this.connection.connected||(this.connection.connected&&this.close(),typeof t=="string"&&(await this.connection.open(t),t=this.connection),this.connection=this.setConnection(t),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",t=>this.onPayload(t)),this.connection.on("close",t=>this.onClose(t)),this.connection.on("error",t=>this.events.emit("error",t)),this.connection.on("register_error",t=>this.onClose()),this.hasRegisteredEventListeners=!0)}};const TY=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),DY=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",uR=e=>e.split("?")[0],fR=10,CY=TY();let IY=class{constructor(t){if(this.url=t,this.events=new tr.EventEmitter,this.registering=!1,!lR(t))throw new Error(`Provided URL is not compatible with WebSocket connection: ${t}`);this.url=t}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(t,n){this.events.on(t,n)}once(t,n){this.events.once(t,n)}off(t,n){this.events.off(t,n)}removeListener(t,n){this.events.removeListener(t,n)}async open(t=this.url){await this.register(t)}async close(){return new Promise((t,n)=>{if(typeof this.socket>"u"){n(new Error("Connection already closed"));return}this.socket.onclose=r=>{this.onClose(r),t()},this.socket.close()})}async send(t){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(ms(t))}catch(n){this.onError(t.id,n)}}register(t=this.url){if(!lR(t))throw new Error(`Provided URL is not compatible with WebSocket connection: ${t}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((r,i)=>{this.events.once("register_error",a=>{this.resetMaxListeners(),i(a)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return i(new Error("WebSocket connection is missing or invalid"));r(this.socket)})})}return this.url=t,this.registering=!0,new Promise((n,r)=>{const i=vY.isReactNative()?void 0:{rejectUnauthorized:!OY(t)},a=new CY(t,[],i);DY()?a.onerror=c=>{const u=c;r(this.emitError(u.error))}:a.on("error",c=>{r(this.emitError(c))}),a.onopen=()=>{this.onOpen(a),n(a)}})}onOpen(t){t.onmessage=n=>this.onPayload(n),t.onclose=n=>this.onClose(n),this.socket=t,this.registering=!1,this.events.emit("open")}onClose(t){this.socket=void 0,this.registering=!1,this.events.emit("close",t)}onPayload(t){if(typeof t.data>"u")return;const n=typeof t.data=="string"?ca(t.data):t.data;this.events.emit("payload",n)}onError(t,n){const r=this.parseError(n),i=r.message||r.toString(),a=Zp(t,i);this.events.emit("payload",a)}parseError(t,n=this.url){return hI(t,uR(n),"WS")}resetMaxListeners(){this.events.getMaxListeners()>fR&&this.events.setMaxListeners(fR)}emitError(t){const n=this.parseError(new Error(t?.message||`WebSocket connection failed for host: ${uR(this.url)}`));return this.events.emit("register_error",n),n}};var NY={};const mI="wc",yI=2,Qb="core",Ni=`${mI}@2:${Qb}:`,$Y={logger:"error"},BY={database:":memory:"},PY="crypto",dR="client_ed25519_seed",UY=Ee.ONE_DAY,kY="keychain",MY="0.3",jY="messages",LY="0.3",hR=Ee.SIX_HOURS,zY="publisher",bI="irn",qY="error",vI="wss://relay.walletconnect.org",HY="relayer",cn={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},FY="_subscription",Nr={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},VY=.1,Jb="2.21.4",wt={link_mode:"link_mode",relay:"relay"},Gh={inbound:"inbound",outbound:"outbound"},GY="0.3",KY="WALLETCONNECT_CLIENT_ID",pR="WALLETCONNECT_LINK_MODE_APPS",pr={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},WY="subscription",YY="0.3",XY="pairing",ZY="0.3",Ru={wc_pairingDelete:{req:{ttl:Ee.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:Ee.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:Ee.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:Ee.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:Ee.ONE_DAY,prompt:!1,tag:0},res:{ttl:Ee.ONE_DAY,prompt:!1,tag:0}}},Yo={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},Xr={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},QY="history",JY="0.3",eX="expirer",Pr={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},tX="0.3",nX="verify-api",rX="https://verify.walletconnect.com",wI="https://verify.walletconnect.org",Yu=wI,iX=`${Yu}/v3`,sX=[rX,wI],oX="echo",aX="https://echo.walletconnect.com",bi={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal",subscribing_to_pairing_topic:"subscribing_to_pairing_topic"},is={no_wss_connection:"no_wss_connection",no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_expired:"proposal_expired",proposal_listener_not_found:"proposal_listener_not_found"},Zr={session_approve_started:"session_approve_started",proposal_not_expired:"proposal_not_expired",session_namespaces_validation_success:"session_namespaces_validation_success",create_session_topic:"create_session_topic",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success"},Lo={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found"},zo={authenticated_session_approve_started:"authenticated_session_approve_started",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve"},Ou={no_internet_connection:"no_internet_connection",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"},cX=.1,lX="event-client",uX=86400,fX="https://pulse.walletconnect.org/batch";function dX(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var i=0;i<e.length;i++){var a=e.charAt(i),c=a.charCodeAt(0);if(n[c]!==255)throw new TypeError(a+" is ambiguous");n[c]=i}var u=e.length,f=e.charAt(0),d=Math.log(u)/Math.log(256),p=Math.log(256)/Math.log(u);function g(v){if(v instanceof Uint8Array||(ArrayBuffer.isView(v)?v=new Uint8Array(v.buffer,v.byteOffset,v.byteLength):Array.isArray(v)&&(v=Uint8Array.from(v))),!(v instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(v.length===0)return"";for(var E=0,S=0,_=0,T=v.length;_!==T&&v[_]===0;)_++,E++;for(var O=(T-_)*p+1>>>0,$=new Uint8Array(O);_!==T;){for(var I=v[_],B=0,z=O-1;(I!==0||B<S)&&z!==-1;z--,B++)I+=256*$[z]>>>0,$[z]=I%u>>>0,I=I/u>>>0;if(I!==0)throw new Error("Non-zero carry");S=B,_++}for(var q=O-S;q!==O&&$[q]===0;)q++;for(var k=f.repeat(E);q<O;++q)k+=e.charAt($[q]);return k}function y(v){if(typeof v!="string")throw new TypeError("Expected String");if(v.length===0)return new Uint8Array;var E=0;if(v[E]!==" "){for(var S=0,_=0;v[E]===f;)S++,E++;for(var T=(v.length-E)*d+1>>>0,O=new Uint8Array(T);v[E];){var $=n[v.charCodeAt(E)];if($===255)return;for(var I=0,B=T-1;($!==0||I<_)&&B!==-1;B--,I++)$+=u*O[B]>>>0,O[B]=$%256>>>0,$=$/256>>>0;if($!==0)throw new Error("Non-zero carry");_=I,E++}if(v[E]!==" "){for(var z=T-_;z!==T&&O[z]===0;)z++;for(var q=new Uint8Array(S+(T-z)),k=S;z!==T;)q[k++]=O[z++];return q}}}function b(v){var E=y(v);if(E)return E;throw new Error(`Non-${t} character`)}return{encode:g,decodeUnsafe:y,decode:b}}var hX=dX,pX=hX;const EI=e=>{if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")},gX=e=>new TextEncoder().encode(e),mX=e=>new TextDecoder().decode(e);class yX{constructor(t,n,r){this.name=t,this.prefix=n,this.baseEncode=r}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}}class bX{constructor(t,n,r){if(this.name=t,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return SI(this,t)}}class vX{constructor(t){this.decoders=t}or(t){return SI(this,t)}decode(t){const n=t[0],r=this.decoders[n];if(r)return r.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const SI=(e,t)=>new vX({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class wX{constructor(t,n,r,i){this.name=t,this.prefix=n,this.baseEncode=r,this.baseDecode=i,this.encoder=new yX(t,n,r),this.decoder=new bX(t,n,i)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}}const Jp=({name:e,prefix:t,encode:n,decode:r})=>new wX(e,t,n,r),Mf=({prefix:e,name:t,alphabet:n})=>{const{encode:r,decode:i}=pX(n,t);return Jp({prefix:e,name:t,encode:r,decode:a=>EI(i(a))})},EX=(e,t,n,r)=>{const i={};for(let p=0;p<t.length;++p)i[t[p]]=p;let a=e.length;for(;e[a-1]==="=";)--a;const c=new Uint8Array(a*n/8|0);let u=0,f=0,d=0;for(let p=0;p<a;++p){const g=i[e[p]];if(g===void 0)throw new SyntaxError(`Non-${r} character`);f=f<<n|g,u+=n,u>=8&&(u-=8,c[d++]=255&f>>u)}if(u>=n||255&f<<8-u)throw new SyntaxError("Unexpected end of data");return c},SX=(e,t,n)=>{const r=t[t.length-1]==="=",i=(1<<n)-1;let a="",c=0,u=0;for(let f=0;f<e.length;++f)for(u=u<<8|e[f],c+=8;c>n;)c-=n,a+=t[i&u>>c];if(c&&(a+=t[i&u<<n-c]),r)for(;a.length*n&7;)a+="=";return a},En=({name:e,prefix:t,bitsPerChar:n,alphabet:r})=>Jp({prefix:t,name:e,encode(i){return SX(i,r,n)},decode(i){return EX(i,r,n,e)}}),_X=Jp({prefix:"\0",name:"identity",encode:e=>mX(e),decode:e=>gX(e)});var xX=Object.freeze({__proto__:null,identity:_X});const AX=En({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var RX=Object.freeze({__proto__:null,base2:AX});const OX=En({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var TX=Object.freeze({__proto__:null,base8:OX});const DX=Mf({prefix:"9",name:"base10",alphabet:"0123456789"});var CX=Object.freeze({__proto__:null,base10:DX});const IX=En({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),NX=En({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var $X=Object.freeze({__proto__:null,base16:IX,base16upper:NX});const BX=En({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),PX=En({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),UX=En({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),kX=En({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),MX=En({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),jX=En({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),LX=En({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),zX=En({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),qX=En({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var HX=Object.freeze({__proto__:null,base32:BX,base32upper:PX,base32pad:UX,base32padupper:kX,base32hex:MX,base32hexupper:jX,base32hexpad:LX,base32hexpadupper:zX,base32z:qX});const FX=Mf({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),VX=Mf({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var GX=Object.freeze({__proto__:null,base36:FX,base36upper:VX});const KX=Mf({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),WX=Mf({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var YX=Object.freeze({__proto__:null,base58btc:KX,base58flickr:WX});const XX=En({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),ZX=En({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),QX=En({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),JX=En({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var eZ=Object.freeze({__proto__:null,base64:XX,base64pad:ZX,base64url:QX,base64urlpad:JX});const _I=Array.from(""),tZ=_I.reduce((e,t,n)=>(e[n]=t,e),[]),nZ=_I.reduce((e,t,n)=>(e[t.codePointAt(0)]=n,e),[]);function rZ(e){return e.reduce((t,n)=>(t+=tZ[n],t),"")}function iZ(e){const t=[];for(const n of e){const r=nZ[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);t.push(r)}return new Uint8Array(t)}const sZ=Jp({prefix:"",name:"base256emoji",encode:rZ,decode:iZ});var oZ=Object.freeze({__proto__:null,base256emoji:sZ}),aZ=xI,gR=128,cZ=-128,lZ=Math.pow(2,31);function xI(e,t,n){t=t||[],n=n||0;for(var r=n;e>=lZ;)t[n++]=e&255|gR,e/=128;for(;e&cZ;)t[n++]=e&255|gR,e>>>=7;return t[n]=e|0,xI.bytes=n-r+1,t}var uZ=ev,fZ=128,mR=127;function ev(e,r){var n=0,r=r||0,i=0,a=r,c,u=e.length;do{if(a>=u)throw ev.bytes=0,new RangeError("Could not decode varint");c=e[a++],n+=i<28?(c&mR)<<i:(c&mR)*Math.pow(2,i),i+=7}while(c>=fZ);return ev.bytes=a-r,n}var dZ=Math.pow(2,7),hZ=Math.pow(2,14),pZ=Math.pow(2,21),gZ=Math.pow(2,28),mZ=Math.pow(2,35),yZ=Math.pow(2,42),bZ=Math.pow(2,49),vZ=Math.pow(2,56),wZ=Math.pow(2,63),EZ=function(e){return e<dZ?1:e<hZ?2:e<pZ?3:e<gZ?4:e<mZ?5:e<yZ?6:e<bZ?7:e<vZ?8:e<wZ?9:10},SZ={encode:aZ,decode:uZ,encodingLength:EZ},AI=SZ;const yR=(e,t,n=0)=>(AI.encode(e,t,n),t),bR=e=>AI.encodingLength(e),tv=(e,t)=>{const n=t.byteLength,r=bR(e),i=r+bR(n),a=new Uint8Array(i+n);return yR(e,a,0),yR(n,a,r),a.set(t,i),new _Z(e,n,t,a)};class _Z{constructor(t,n,r,i){this.code=t,this.size=n,this.digest=r,this.bytes=i}}const RI=({name:e,code:t,encode:n})=>new xZ(e,t,n);class xZ{constructor(t,n,r){this.name=t,this.code=n,this.encode=r}digest(t){if(t instanceof Uint8Array){const n=this.encode(t);return n instanceof Uint8Array?tv(this.code,n):n.then(r=>tv(this.code,r))}else throw Error("Unknown type, must be binary type")}}const OI=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),AZ=RI({name:"sha2-256",code:18,encode:OI("SHA-256")}),RZ=RI({name:"sha2-512",code:19,encode:OI("SHA-512")});var OZ=Object.freeze({__proto__:null,sha256:AZ,sha512:RZ});const TI=0,TZ="identity",DI=EI,DZ=e=>tv(TI,DI(e)),CZ={code:TI,name:TZ,encode:DI,digest:DZ};var IZ=Object.freeze({__proto__:null,identity:CZ});new TextEncoder,new TextDecoder;const vR={...xX,...RX,...TX,...CX,...$X,...HX,...GX,...YX,...eZ,...oZ};({...OZ,...IZ});function CI(e){return globalThis.Buffer!=null?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}function NZ(e=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?CI(globalThis.Buffer.allocUnsafe(e)):new Uint8Array(e)}function II(e,t,n,r){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:n},decoder:{decode:r}}}const wR=II("utf8","u",e=>"u"+new TextDecoder("utf8").decode(e),e=>new TextEncoder().encode(e.substring(1))),I0=II("ascii","a",e=>{let t="a";for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t},e=>{e=e.substring(1);const t=NZ(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}),$Z={utf8:wR,"utf-8":wR,hex:vR.base16,latin1:I0,ascii:I0,binary:I0,...vR};function BZ(e,t="utf8"){const n=$Z[t];if(!n)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?CI(globalThis.Buffer.from(e,"utf-8")):n.decoder.decode(`${n.prefix}${e}`)}var PZ=Object.defineProperty,UZ=(e,t,n)=>t in e?PZ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,gi=(e,t,n)=>UZ(e,typeof t!="symbol"?t+"":t,n);class kZ{constructor(t,n){this.core=t,this.logger=n,gi(this,"keychain",new Map),gi(this,"name",kY),gi(this,"version",MY),gi(this,"initialized",!1),gi(this,"storagePrefix",Ni),gi(this,"init",async()=>{if(!this.initialized){const r=await this.getKeyChain();typeof r<"u"&&(this.keychain=r),this.initialized=!0}}),gi(this,"has",r=>(this.isInitialized(),this.keychain.has(r))),gi(this,"set",async(r,i)=>{this.isInitialized(),this.keychain.set(r,i),await this.persist()}),gi(this,"get",r=>{this.isInitialized();const i=this.keychain.get(r);if(typeof i>"u"){const{message:a}=we("NO_MATCHING_KEY",`${this.name}: ${r}`);throw new Error(a)}return i}),gi(this,"del",async r=>{this.isInitialized(),this.keychain.delete(r),await this.persist()}),this.core=t,this.logger=kn(n,this.name)}get context(){return ir(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(t){await this.core.storage.setItem(this.storageKey,Ub(t))}async getKeyChain(){const t=await this.core.storage.getItem(this.storageKey);return typeof t<"u"?kb(t):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:t}=we("NOT_INITIALIZED",this.name);throw new Error(t)}}}var MZ=Object.defineProperty,jZ=(e,t,n)=>t in e?MZ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,pn=(e,t,n)=>jZ(e,typeof t!="symbol"?t+"":t,n);class LZ{constructor(t,n,r){this.core=t,this.logger=n,pn(this,"name",PY),pn(this,"keychain"),pn(this,"randomSessionIdentifier",Kb()),pn(this,"initialized",!1),pn(this,"init",async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)}),pn(this,"hasKeys",i=>(this.isInitialized(),this.keychain.has(i))),pn(this,"getClientId",async()=>{this.isInitialized();const i=await this.getClientSeed(),a=Lx(i);return KD(a.publicKey)}),pn(this,"generateKeyPair",()=>{this.isInitialized();const i=RG();return this.setPrivateKey(i.publicKey,i.privateKey)}),pn(this,"signJWT",async i=>{this.isInitialized();const a=await this.getClientSeed(),c=Lx(a),u=this.randomSessionIdentifier;return await wq(u,i,UY,c)}),pn(this,"generateSharedKey",(i,a,c)=>{this.isInitialized();const u=this.getPrivateKey(i),f=OG(u,a);return this.setSymKey(f,c)}),pn(this,"setSymKey",async(i,a)=>{this.isInitialized();const c=a||zh(i);return await this.keychain.set(c,i),c}),pn(this,"deleteKeyPair",async i=>{this.isInitialized(),await this.keychain.del(i)}),pn(this,"deleteSymKey",async i=>{this.isInitialized(),await this.keychain.del(i)}),pn(this,"encode",async(i,a,c)=>{this.isInitialized();const u=WC(c),f=ms(a);if(DA(u))return CG(f,c?.encoding);if(TA(u)){const y=u.senderPublicKey,b=u.receiverPublicKey;i=await this.generateSharedKey(y,b)}const d=this.getSymKey(i),{type:p,senderPublicKey:g}=u;return TG({type:p,symKey:d,message:f,senderPublicKey:g,encoding:c?.encoding})}),pn(this,"decode",async(i,a,c)=>{this.isInitialized();const u=NG(a,c);if(DA(u)){const f=IG(a,c?.encoding);return ca(f)}if(TA(u)){const f=u.receiverPublicKey,d=u.senderPublicKey;i=await this.generateSharedKey(f,d)}try{const f=this.getSymKey(i),d=DG({symKey:f,encoded:a,encoding:c?.encoding});return ca(d)}catch(f){this.logger.error(`Failed to decode message from topic: '${i}', clientId: '${await this.getClientId()}'`),this.logger.error(f)}}),pn(this,"getPayloadType",(i,a=ri)=>{const c=hf({encoded:i,encoding:a});return ua(c.type)}),pn(this,"getPayloadSenderPublicKey",(i,a=ri)=>{const c=hf({encoded:i,encoding:a});return c.senderPublicKey?Qn(c.senderPublicKey,Un):void 0}),this.core=t,this.logger=kn(n,this.name),this.keychain=r||new kZ(this.core,this.logger)}get context(){return ir(this.logger)}async setPrivateKey(t,n){return await this.keychain.set(t,n),t}getPrivateKey(t){return this.keychain.get(t)}async getClientSeed(){let t="";try{t=this.keychain.get(dR)}catch{t=Kb(),await this.keychain.set(dR,t)}return BZ(t,"base16")}getSymKey(t){return this.keychain.get(t)}isInitialized(){if(!this.initialized){const{message:t}=we("NOT_INITIALIZED",this.name);throw new Error(t)}}}var zZ=Object.defineProperty,qZ=Object.defineProperties,HZ=Object.getOwnPropertyDescriptors,ER=Object.getOwnPropertySymbols,FZ=Object.prototype.hasOwnProperty,VZ=Object.prototype.propertyIsEnumerable,nv=(e,t,n)=>t in e?zZ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,GZ=(e,t)=>{for(var n in t||(t={}))FZ.call(t,n)&&nv(e,n,t[n]);if(ER)for(var n of ER(t))VZ.call(t,n)&&nv(e,n,t[n]);return e},KZ=(e,t)=>qZ(e,HZ(t)),hr=(e,t,n)=>nv(e,typeof t!="symbol"?t+"":t,n);class WZ extends XW{constructor(t,n){super(t,n),this.logger=t,this.core=n,hr(this,"messages",new Map),hr(this,"messagesWithoutClientAck",new Map),hr(this,"name",jY),hr(this,"version",LY),hr(this,"initialized",!1),hr(this,"storagePrefix",Ni),hr(this,"init",async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const r=await this.getRelayerMessages();typeof r<"u"&&(this.messages=r);const i=await this.getRelayerMessagesWithoutClientAck();typeof i<"u"&&(this.messagesWithoutClientAck=i),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(r){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(r)}finally{this.initialized=!0}}}),hr(this,"set",async(r,i,a)=>{this.isInitialized();const c=Si(i);let u=this.messages.get(r);if(typeof u>"u"&&(u={}),typeof u[c]<"u")return c;if(u[c]=i,this.messages.set(r,u),a===Gh.inbound){const f=this.messagesWithoutClientAck.get(r)||{};this.messagesWithoutClientAck.set(r,KZ(GZ({},f),{[c]:i}))}return await this.persist(),c}),hr(this,"get",r=>{this.isInitialized();let i=this.messages.get(r);return typeof i>"u"&&(i={}),i}),hr(this,"getWithoutAck",r=>{this.isInitialized();const i={};for(const a of r){const c=this.messagesWithoutClientAck.get(a)||{};i[a]=Object.values(c)}return i}),hr(this,"has",(r,i)=>{this.isInitialized();const a=this.get(r),c=Si(i);return typeof a[c]<"u"}),hr(this,"ack",async(r,i)=>{this.isInitialized();const a=this.messagesWithoutClientAck.get(r);if(typeof a>"u")return;const c=Si(i);delete a[c],Object.keys(a).length===0?this.messagesWithoutClientAck.delete(r):this.messagesWithoutClientAck.set(r,a),await this.persist()}),hr(this,"del",async r=>{this.isInitialized(),this.messages.delete(r),this.messagesWithoutClientAck.delete(r),await this.persist()}),this.logger=kn(t,this.name),this.core=n}get context(){return ir(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get storageKeyWithoutClientAck(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name+"_withoutClientAck"}async setRelayerMessages(t){await this.core.storage.setItem(this.storageKey,Ub(t))}async setRelayerMessagesWithoutClientAck(t){await this.core.storage.setItem(this.storageKeyWithoutClientAck,Ub(t))}async getRelayerMessages(){const t=await this.core.storage.getItem(this.storageKey);return typeof t<"u"?kb(t):void 0}async getRelayerMessagesWithoutClientAck(){const t=await this.core.storage.getItem(this.storageKeyWithoutClientAck);return typeof t<"u"?kb(t):void 0}async persist(){await this.setRelayerMessages(this.messages),await this.setRelayerMessagesWithoutClientAck(this.messagesWithoutClientAck)}isInitialized(){if(!this.initialized){const{message:t}=we("NOT_INITIALIZED",this.name);throw new Error(t)}}}var YZ=Object.defineProperty,XZ=Object.defineProperties,ZZ=Object.getOwnPropertyDescriptors,SR=Object.getOwnPropertySymbols,QZ=Object.prototype.hasOwnProperty,JZ=Object.prototype.propertyIsEnumerable,rv=(e,t,n)=>t in e?YZ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,wh=(e,t)=>{for(var n in t||(t={}))QZ.call(t,n)&&rv(e,n,t[n]);if(SR)for(var n of SR(t))JZ.call(t,n)&&rv(e,n,t[n]);return e},N0=(e,t)=>XZ(e,ZZ(t)),Qr=(e,t,n)=>rv(e,typeof t!="symbol"?t+"":t,n);class eQ extends ZW{constructor(t,n){super(t,n),this.relayer=t,this.logger=n,Qr(this,"events",new tr.EventEmitter),Qr(this,"name",zY),Qr(this,"queue",new Map),Qr(this,"publishTimeout",Ee.toMiliseconds(Ee.ONE_MINUTE)),Qr(this,"initialPublishTimeout",Ee.toMiliseconds(Ee.ONE_SECOND*15)),Qr(this,"needsTransportRestart",!1),Qr(this,"publish",async(r,i,a)=>{var c;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:r,message:i,opts:a}});const u=a?.ttl||hR,f=fp(a),d=a?.prompt||!1,p=a?.tag||0,g=a?.id||ta().toString(),y={topic:r,message:i,opts:{ttl:u,relay:f,prompt:d,tag:p,id:g,attestation:a?.attestation,tvf:a?.tvf}},b=`Failed to publish payload, please try again. id:${g} tag:${p}`;try{const v=new Promise(async E=>{const S=({id:T})=>{y.opts.id===T&&(this.removeRequestFromQueue(T),this.relayer.events.removeListener(cn.publish,S),E(y))};this.relayer.events.on(cn.publish,S);const _=ao(new Promise((T,O)=>{this.rpcPublish({topic:r,message:i,ttl:u,prompt:d,tag:p,id:g,attestation:a?.attestation,tvf:a?.tvf}).then(T).catch($=>{this.logger.warn($,$?.message),O($)})}),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${g} tag:${p}`);try{await _,this.events.removeListener(cn.publish,S)}catch(T){this.queue.set(g,N0(wh({},y),{attempt:1})),this.logger.warn(T,T?.message)}});this.logger.trace({type:"method",method:"publish",params:{id:g,topic:r,message:i,opts:a}}),await ao(v,this.publishTimeout,b)}catch(v){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(v),(c=a?.internal)!=null&&c.throwOnFailedPublish)throw v}finally{this.queue.delete(g)}}),Qr(this,"on",(r,i)=>{this.events.on(r,i)}),Qr(this,"once",(r,i)=>{this.events.once(r,i)}),Qr(this,"off",(r,i)=>{this.events.off(r,i)}),Qr(this,"removeListener",(r,i)=>{this.events.removeListener(r,i)}),this.relayer=t,this.logger=kn(n,this.name),this.registerEventListeners()}get context(){return ir(this.logger)}async rpcPublish(t){var n,r,i,a;const{topic:c,message:u,ttl:f=hR,prompt:d,tag:p,id:g,attestation:y,tvf:b}=t,v={method:ku(fp().protocol).publish,params:wh({topic:c,message:u,ttl:f,prompt:d,tag:p,attestation:y},b),id:g};yn((n=v.params)==null?void 0:n.prompt)&&((r=v.params)==null||delete r.prompt),yn((i=v.params)==null?void 0:i.tag)&&((a=v.params)==null||delete a.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:v});const E=await this.relayer.request(v);return this.relayer.events.emit(cn.publish,t),this.logger.debug("Successfully Published Payload"),E}removeRequestFromQueue(t){this.queue.delete(t)}checkQueue(){this.queue.forEach(async(t,n)=>{const r=t.attempt+1;this.queue.set(n,N0(wh({},t),{attempt:r}));const{topic:i,message:a,opts:c,attestation:u}=t;this.logger.warn({},`Publisher: queue->publishing: ${t.opts.id}, tag: ${t.opts.tag}, attempt: ${r}`),await this.rpcPublish(N0(wh({},t),{topic:i,message:a,ttl:c.ttl,prompt:c.prompt,tag:c.tag,id:c.id,attestation:u,tvf:c.tvf})),this.logger.warn({},`Publisher: queue->published: ${t.opts.id}`)})}registerEventListeners(){this.relayer.core.heartbeat.on(Ea.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(cn.connection_stalled);return}this.checkQueue()}),this.relayer.on(cn.message_ack,t=>{this.removeRequestFromQueue(t.id.toString())})}}var tQ=Object.defineProperty,nQ=(e,t,n)=>t in e?tQ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,wc=(e,t,n)=>nQ(e,typeof t!="symbol"?t+"":t,n);class rQ{constructor(){wc(this,"map",new Map),wc(this,"set",(t,n)=>{const r=this.get(t);this.exists(t,n)||this.map.set(t,[...r,n])}),wc(this,"get",t=>this.map.get(t)||[]),wc(this,"exists",(t,n)=>this.get(t).includes(n)),wc(this,"delete",(t,n)=>{if(typeof n>"u"){this.map.delete(t);return}if(!this.map.has(t))return;const r=this.get(t);if(!this.exists(t,n))return;const i=r.filter(a=>a!==n);if(!i.length){this.map.delete(t);return}this.map.set(t,i)}),wc(this,"clear",()=>{this.map.clear()})}get topics(){return Array.from(this.map.keys())}}var iQ=Object.defineProperty,sQ=Object.defineProperties,oQ=Object.getOwnPropertyDescriptors,_R=Object.getOwnPropertySymbols,aQ=Object.prototype.hasOwnProperty,cQ=Object.prototype.propertyIsEnumerable,iv=(e,t,n)=>t in e?iQ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Tu=(e,t)=>{for(var n in t||(t={}))aQ.call(t,n)&&iv(e,n,t[n]);if(_R)for(var n of _R(t))cQ.call(t,n)&&iv(e,n,t[n]);return e},$0=(e,t)=>sQ(e,oQ(t)),ft=(e,t,n)=>iv(e,typeof t!="symbol"?t+"":t,n);class lQ extends eY{constructor(t,n){super(t,n),this.relayer=t,this.logger=n,ft(this,"subscriptions",new Map),ft(this,"topicMap",new rQ),ft(this,"events",new tr.EventEmitter),ft(this,"name",WY),ft(this,"version",YY),ft(this,"pending",new Map),ft(this,"cached",[]),ft(this,"initialized",!1),ft(this,"storagePrefix",Ni),ft(this,"subscribeTimeout",Ee.toMiliseconds(Ee.ONE_MINUTE)),ft(this,"initialSubscribeTimeout",Ee.toMiliseconds(Ee.ONE_SECOND*15)),ft(this,"clientId"),ft(this,"batchSubscribeTopicsLimit",500),ft(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),await this.restore()),this.initialized=!0}),ft(this,"subscribe",async(r,i)=>{this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:i}});try{const a=fp(i),c={topic:r,relay:a,transportType:i?.transportType};this.pending.set(r,c);const u=await this.rpcSubscribe(r,a,i);return typeof u=="string"&&(this.onSubscribe(u,c),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:i}})),u}catch(a){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(a),a}}),ft(this,"unsubscribe",async(r,i)=>{this.isInitialized(),typeof i?.id<"u"?await this.unsubscribeById(r,i.id,i):await this.unsubscribeByTopic(r,i)}),ft(this,"isSubscribed",r=>new Promise(i=>{i(this.topicMap.topics.includes(r))})),ft(this,"isKnownTopic",r=>new Promise(i=>{i(this.topicMap.topics.includes(r)||this.pending.has(r)||this.cached.some(a=>a.topic===r))})),ft(this,"on",(r,i)=>{this.events.on(r,i)}),ft(this,"once",(r,i)=>{this.events.once(r,i)}),ft(this,"off",(r,i)=>{this.events.off(r,i)}),ft(this,"removeListener",(r,i)=>{this.events.removeListener(r,i)}),ft(this,"start",async()=>{await this.onConnect()}),ft(this,"stop",async()=>{await this.onDisconnect()}),ft(this,"restart",async()=>{await this.restore(),await this.onRestart()}),ft(this,"checkPending",async()=>{if(this.pending.size===0&&(!this.initialized||!this.relayer.connected))return;const r=[];this.pending.forEach(i=>{r.push(i)}),await this.batchSubscribe(r)}),ft(this,"registerEventListeners",()=>{this.relayer.core.heartbeat.on(Ea.pulse,async()=>{await this.checkPending()}),this.events.on(pr.created,async r=>{const i=pr.created;this.logger.info(`Emitting ${i}`),this.logger.debug({type:"event",event:i,data:r}),await this.persist()}),this.events.on(pr.deleted,async r=>{const i=pr.deleted;this.logger.info(`Emitting ${i}`),this.logger.debug({type:"event",event:i,data:r}),await this.persist()})}),this.relayer=t,this.logger=kn(n,this.name),this.clientId=""}get context(){return ir(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}get hasAnyTopics(){return this.topicMap.topics.length>0||this.pending.size>0||this.cached.length>0||this.subscriptions.size>0}hasSubscription(t,n){let r=!1;try{r=this.getSubscription(t).topic===n}catch{}return r}reset(){this.cached=[],this.initialized=!0}onDisable(){this.values.length>0&&(this.cached=this.values),this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(t,n){const r=this.topicMap.get(t);await Promise.all(r.map(async i=>await this.unsubscribeById(t,i,n)))}async unsubscribeById(t,n,r){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:t,id:n,opts:r}});try{const i=fp(r);await this.restartToComplete({topic:t,id:n,relay:i}),await this.rpcUnsubscribe(t,n,i);const a=_t("USER_DISCONNECTED",`${this.name}, ${t}`);await this.onUnsubscribe(t,n,a),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:t,id:n,opts:r}})}catch(i){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(i),i}}async rpcSubscribe(t,n,r){var i;(!r||r?.transportType===wt.relay)&&await this.restartToComplete({topic:t,id:t,relay:n});const a={method:ku(n.protocol).subscribe,params:{topic:t}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:a});const c=(i=r?.internal)==null?void 0:i.throwOnFailedPublish;try{const u=await this.getSubscriptionId(t);if(r?.transportType===wt.link_mode)return setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(a).catch(p=>this.logger.warn(p))},Ee.toMiliseconds(Ee.ONE_SECOND)),u;const f=new Promise(async p=>{const g=y=>{y.topic===t&&(this.events.removeListener(pr.created,g),p(y.id))};this.events.on(pr.created,g);try{const y=await ao(new Promise((b,v)=>{this.relayer.request(a).catch(E=>{this.logger.warn(E,E?.message),v(E)}).then(b)}),this.initialSubscribeTimeout,`Subscribing to ${t} failed, please try again`);this.events.removeListener(pr.created,g),p(y)}catch{}}),d=await ao(f,this.subscribeTimeout,`Subscribing to ${t} failed, please try again`);if(!d&&c)throw new Error(`Subscribing to ${t} failed, please try again`);return d?u:null}catch(u){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(cn.connection_stalled),c)throw u}return null}async rpcBatchSubscribe(t){if(!t.length)return;const n=t[0].relay,r={method:ku(n.protocol).batchSubscribe,params:{topics:t.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});try{await await ao(new Promise(i=>{this.relayer.request(r).catch(a=>this.logger.warn(a)).then(i)}),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{this.relayer.events.emit(cn.connection_stalled)}}async rpcBatchFetchMessages(t){if(!t.length)return;const n=t[0].relay,r={method:ku(n.protocol).batchFetchMessages,params:{topics:t.map(a=>a.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});let i;try{i=await await ao(new Promise((a,c)=>{this.relayer.request(r).catch(u=>{this.logger.warn(u),c(u)}).then(a)}),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(cn.connection_stalled)}return i}rpcUnsubscribe(t,n,r){const i={method:ku(r.protocol).unsubscribe,params:{topic:t,id:n}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i}),this.relayer.request(i)}onSubscribe(t,n){this.setSubscription(t,$0(Tu({},n),{id:t})),this.pending.delete(n.topic)}onBatchSubscribe(t){t.length&&t.forEach(n=>{this.setSubscription(n.id,Tu({},n)),this.pending.delete(n.topic)})}async onUnsubscribe(t,n,r){this.events.removeAllListeners(n),this.hasSubscription(n,t)&&this.deleteSubscription(n,r),await this.relayer.messages.del(t)}async setRelayerSubscriptions(t){await this.relayer.core.storage.setItem(this.storageKey,t)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(t,n){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:t,subscription:n}),this.addSubscription(t,n)}addSubscription(t,n){this.subscriptions.set(t,Tu({},n)),this.topicMap.set(n.topic,t),this.events.emit(pr.created,n)}getSubscription(t){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:t});const n=this.subscriptions.get(t);if(!n){const{message:r}=we("NO_MATCHING_KEY",`${this.name}: ${t}`);throw new Error(r)}return n}deleteSubscription(t,n){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:t,reason:n});const r=this.getSubscription(t);this.subscriptions.delete(t),this.topicMap.delete(r.topic,t),this.events.emit(pr.deleted,$0(Tu({},r),{reason:n}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(pr.sync)}async onRestart(){if(this.cached.length){const t=[...this.cached],n=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<n;r++){const i=t.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(i)}}this.events.emit(pr.resubscribed)}async restore(){try{const t=await this.getRelayerSubscriptions();if(typeof t>"u"||!t.length)return;if(this.subscriptions.size){const{message:n}=we("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(n)}this.cached=t,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(t){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(t)}}async batchSubscribe(t){t.length&&(await this.rpcBatchSubscribe(t),this.onBatchSubscribe(await Promise.all(t.map(async n=>$0(Tu({},n),{id:await this.getSubscriptionId(n.topic)})))))}async batchFetchMessages(t){if(!t.length)return;this.logger.trace(`Fetching batch messages for ${t.length} subscriptions`);const n=await this.rpcBatchFetchMessages(t);n&&n.messages&&(await WH(Ee.toMiliseconds(Ee.ONE_SECOND)),await this.relayer.handleBatchMessageEvents(n.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){const{message:t}=we("NOT_INITIALIZED",this.name);throw new Error(t)}}async restartToComplete(t){!this.relayer.connected&&!this.relayer.connecting&&(this.cached.push(t),await this.relayer.transportOpen())}async getClientId(){return this.clientId||(this.clientId=await this.relayer.core.crypto.getClientId()),this.clientId}async getSubscriptionId(t){return Si(t+await this.getClientId())}}var uQ=Object.defineProperty,xR=Object.getOwnPropertySymbols,fQ=Object.prototype.hasOwnProperty,dQ=Object.prototype.propertyIsEnumerable,sv=(e,t,n)=>t in e?uQ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,AR=(e,t)=>{for(var n in t||(t={}))fQ.call(t,n)&&sv(e,n,t[n]);if(xR)for(var n of xR(t))dQ.call(t,n)&&sv(e,n,t[n]);return e},Ke=(e,t,n)=>sv(e,typeof t!="symbol"?t+"":t,n);class hQ extends QW{constructor(t){super(t),Ke(this,"protocol","wc"),Ke(this,"version",2),Ke(this,"core"),Ke(this,"logger"),Ke(this,"events",new tr.EventEmitter),Ke(this,"provider"),Ke(this,"messages"),Ke(this,"subscriber"),Ke(this,"publisher"),Ke(this,"name",HY),Ke(this,"transportExplicitlyClosed",!1),Ke(this,"initialized",!1),Ke(this,"connectionAttemptInProgress",!1),Ke(this,"relayUrl"),Ke(this,"projectId"),Ke(this,"packageName"),Ke(this,"bundleId"),Ke(this,"hasExperiencedNetworkDisruption",!1),Ke(this,"pingTimeout"),Ke(this,"heartBeatTimeout",Ee.toMiliseconds(Ee.THIRTY_SECONDS+Ee.FIVE_SECONDS)),Ke(this,"reconnectTimeout"),Ke(this,"connectPromise"),Ke(this,"reconnectInProgress",!1),Ke(this,"requestsInFlight",[]),Ke(this,"connectTimeout",Ee.toMiliseconds(Ee.ONE_SECOND*15)),Ke(this,"request",async n=>{var r,i;this.logger.debug("Publishing Request Payload");const a=n.id||ta().toString();await this.toEstablishConnection();try{this.logger.trace({id:a,method:n.method,topic:(r=n.params)==null?void 0:r.topic},"relayer.request - publishing...");const c=`${a}:${((i=n.params)==null?void 0:i.tag)||""}`;this.requestsInFlight.push(c);const u=await this.provider.request(n);return this.requestsInFlight=this.requestsInFlight.filter(f=>f!==c),u}catch(c){throw this.logger.debug(`Failed to Publish Request: ${a}`),c}}),Ke(this,"resetPingTimeout",()=>{ap()&&(clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var n,r,i,a;try{this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),(a=(i=(r=(n=this.provider)==null?void 0:n.connection)==null?void 0:r.socket)==null?void 0:i.terminate)==null||a.call(i)}catch(c){this.logger.warn(c,c?.message)}},this.heartBeatTimeout))}),Ke(this,"onPayloadHandler",n=>{this.onProviderPayload(n),this.resetPingTimeout()}),Ke(this,"onConnectHandler",()=>{this.logger.warn({},"Relayer connected "),this.startPingTimeout(),this.events.emit(cn.connect)}),Ke(this,"onDisconnectHandler",()=>{this.logger.warn({},"Relayer disconnected "),this.requestsInFlight=[],this.onProviderDisconnect()}),Ke(this,"onProviderErrorHandler",n=>{this.logger.fatal(`Fatal socket error: ${n.message}`),this.events.emit(cn.error,n),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()}),Ke(this,"registerProviderListeners",()=>{this.provider.on(Nr.payload,this.onPayloadHandler),this.provider.on(Nr.connect,this.onConnectHandler),this.provider.on(Nr.disconnect,this.onDisconnectHandler),this.provider.on(Nr.error,this.onProviderErrorHandler)}),this.core=t.core,this.logger=typeof t.logger<"u"&&typeof t.logger!="string"?kn(t.logger,this.name):Uf(Yp({level:t.logger||qY})),this.messages=new WZ(this.logger,t.core),this.subscriber=new lQ(this,this.logger),this.publisher=new eQ(this,this.logger),this.relayUrl=t?.relayUrl||vI,this.projectId=t.projectId,NH()?this.packageName=Xx():$H()&&(this.bundleId=Xx()),this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.transportOpen().catch(t=>this.logger.warn(t,t?.message))}get context(){return ir(this.logger)}get connected(){var t,n,r;return((r=(n=(t=this.provider)==null?void 0:t.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===1||!1}get connecting(){var t,n,r;return((r=(n=(t=this.provider)==null?void 0:t.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===0||this.connectPromise!==void 0||!1}async publish(t,n,r){this.isInitialized(),await this.publisher.publish(t,n,r),await this.recordMessageEvent({topic:t,message:n,publishedAt:Date.now(),transportType:wt.relay},Gh.outbound)}async subscribe(t,n){var r,i,a;this.isInitialized(),(!(n!=null&&n.transportType)||n?.transportType==="relay")&&await this.toEstablishConnection();const c=typeof((r=n?.internal)==null?void 0:r.throwOnFailedPublish)>"u"?!0:(i=n?.internal)==null?void 0:i.throwOnFailedPublish;let u=((a=this.subscriber.topicMap.get(t))==null?void 0:a[0])||"",f;const d=p=>{p.topic===t&&(this.subscriber.off(pr.created,d),f())};return await Promise.all([new Promise(p=>{f=p,this.subscriber.on(pr.created,d)}),new Promise(async(p,g)=>{u=await this.subscriber.subscribe(t,AR({internal:{throwOnFailedPublish:c}},n)).catch(y=>{c&&g(y)})||u,p()})]),u}async unsubscribe(t,n){this.isInitialized(),await this.subscriber.unsubscribe(t,n)}on(t,n){this.events.on(t,n)}once(t,n){this.events.once(t,n)}off(t,n){this.events.off(t,n)}removeListener(t,n){this.events.removeListener(t,n)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await ao(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(t){if(!this.subscriber.hasAnyTopics){this.logger.warn("Starting WS connection skipped because the client has no topics to work with.");return}if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise(async(n,r)=>{await this.connect(t).then(n).catch(r).finally(()=>{this.connectPromise=void 0})}),await this.connectPromise),!this.connected)throw new Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}async restartTransport(t){this.logger.debug({},"Restarting transport..."),!this.connectionAttemptInProgress&&(this.relayUrl=t||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await LA())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(t){if(t?.length===0){this.logger.trace("Batch message events is empty. Ignoring...");return}const n=t.sort((r,i)=>r.publishedAt-i.publishedAt);this.logger.debug(`Batch of ${n.length} message events sorted`);for(const r of n)try{await this.onMessageEvent(r)}catch(i){this.logger.warn(i,"Error while processing batch message event: "+i?.message)}this.logger.trace(`Batch of ${n.length} message events processed`)}async onLinkMessageEvent(t,n){const{topic:r}=t;if(!n.sessionExists){const i=Yt(Ee.FIVE_MINUTES),a={topic:r,expiry:i,relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(r,a)}this.events.emit(cn.message,t),await this.recordMessageEvent(t,Gh.inbound)}async connect(t){await this.confirmOnlineStateOrThrow(),t&&t!==this.relayUrl&&(this.relayUrl=t,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let n=1;for(;n<6;){try{if(this.transportExplicitlyClosed)break;this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${n}...`),await this.createProvider(),await new Promise(async(r,i)=>{const a=()=>{i(new Error("Connection interrupted while trying to connect"))};this.provider.once(Nr.disconnect,a),await ao(new Promise((c,u)=>{this.provider.connect().then(c).catch(u)}),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(c=>{i(c)}).finally(()=>{this.provider.off(Nr.disconnect,a),clearTimeout(this.reconnectTimeout)}),await new Promise(async(c,u)=>{const f=()=>{i(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(Nr.disconnect,f),await this.subscriber.start().then(c).catch(u).finally(()=>{this.provider.off(Nr.disconnect,f)})}),this.hasExperiencedNetworkDisruption=!1,r()})}catch(r){await this.subscriber.stop();const i=r;this.logger.warn({},i.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${n}`);break}await new Promise(r=>setTimeout(r,Ee.toMiliseconds(n*1))),n++}}startPingTimeout(){var t,n,r,i,a;if(ap())try{(n=(t=this.provider)==null?void 0:t.connection)!=null&&n.socket&&((a=(i=(r=this.provider)==null?void 0:r.connection)==null?void 0:i.socket)==null||a.on("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(c){this.logger.warn(c,c?.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const t=await this.core.crypto.signJWT(this.relayUrl);this.provider=new Hr(new IY(MH({sdkVersion:Jb,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:t,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(t,n){const{topic:r,message:i}=t;await this.messages.set(r,i,n)}async shouldIgnoreMessageEvent(t){const{topic:n,message:r}=t;if(!r||r.length===0)return this.logger.warn(`Ignoring invalid/empty message: ${r}`),!0;if(!await this.subscriber.isKnownTopic(n))return this.logger.warn(`Ignoring message for unknown topic ${n}`),!0;const i=this.messages.has(n,r);return i&&this.logger.warn(`Ignoring duplicate message: ${r}`),i}async onProviderPayload(t){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:t}),_w(t)){if(!t.method.endsWith(FY))return;const n=t.params,{topic:r,message:i,publishedAt:a,attestation:c}=n.data,u={topic:r,message:i,publishedAt:a,transportType:wt.relay,attestation:c};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(AR({type:"event",event:n.id},u)),this.events.emit(n.id,u),await this.acknowledgePayload(t),await this.onMessageEvent(u)}else Qp(t)&&this.events.emit(cn.message_ack,t)}async onMessageEvent(t){await this.shouldIgnoreMessageEvent(t)||(await this.recordMessageEvent(t,Gh.inbound),this.events.emit(cn.message,t))}async acknowledgePayload(t){const n=Xp(t.id,!0);await this.provider.connection.send(n)}unregisterProviderListeners(){this.provider.off(Nr.payload,this.onPayloadHandler),this.provider.off(Nr.connect,this.onConnectHandler),this.provider.off(Nr.disconnect,this.onDisconnectHandler),this.provider.off(Nr.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let t=await LA();AK(async n=>{t!==n&&(t=n,n?await this.transportOpen().catch(r=>this.logger.error(r,r?.message)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))}),this.core.heartbeat.on(Ea.pulse,async()=>{if(!this.transportExplicitlyClosed&&!this.connected&&TK())try{await this.confirmOnlineStateOrThrow(),await this.transportOpen()}catch(n){this.logger.warn(n,n?.message)}})}async onProviderDisconnect(){clearTimeout(this.pingTimeout),this.events.emit(cn.disconnect),this.connectionAttemptInProgress=!1,!this.reconnectInProgress&&(this.reconnectInProgress=!0,await this.subscriber.stop(),this.subscriber.hasAnyTopics&&(this.transportExplicitlyClosed||(this.reconnectTimeout=setTimeout(async()=>{await this.transportOpen().catch(t=>this.logger.error(t,t?.message)),this.reconnectTimeout=void 0,this.reconnectInProgress=!1},Ee.toMiliseconds(VY)))))}isInitialized(){if(!this.initialized){const{message:t}=we("NOT_INITIALIZED",this.name);throw new Error(t)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectPromise){await this.connectPromise;return}await this.connect()}}}function pQ(e,t){return e===t||Number.isNaN(e)&&Number.isNaN(t)}function RR(e){return Object.getOwnPropertySymbols(e).filter(t=>Object.prototype.propertyIsEnumerable.call(e,t))}function OR(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const gQ="[object RegExp]",mQ="[object String]",yQ="[object Number]",bQ="[object Boolean]",TR="[object Arguments]",vQ="[object Symbol]",wQ="[object Date]",EQ="[object Map]",SQ="[object Set]",_Q="[object Array]",xQ="[object Function]",AQ="[object ArrayBuffer]",B0="[object Object]",RQ="[object Error]",OQ="[object DataView]",TQ="[object Uint8Array]",DQ="[object Uint8ClampedArray]",CQ="[object Uint16Array]",IQ="[object Uint32Array]",NQ="[object BigUint64Array]",$Q="[object Int8Array]",BQ="[object Int16Array]",PQ="[object Int32Array]",UQ="[object BigInt64Array]",kQ="[object Float32Array]",MQ="[object Float64Array]";function jQ(){}function DR(e){if(!e||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);return t===null||t===Object.prototype||Object.getPrototypeOf(t)===null?Object.prototype.toString.call(e)==="[object Object]":!1}function LQ(e,t,n){return Mu(e,t,void 0,void 0,void 0,void 0,n)}function Mu(e,t,n,r,i,a,c){const u=c(e,t,n,r,i,a);if(u!==void 0)return u;if(typeof e==typeof t)switch(typeof e){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return e===t;case"number":return e===t||Object.is(e,t);case"function":return e===t;case"object":return Xu(e,t,a,c)}return Xu(e,t,a,c)}function Xu(e,t,n,r){if(Object.is(e,t))return!0;let i=OR(e),a=OR(t);if(i===TR&&(i=B0),a===TR&&(a=B0),i!==a)return!1;switch(i){case mQ:return e.toString()===t.toString();case yQ:{const f=e.valueOf(),d=t.valueOf();return pQ(f,d)}case bQ:case wQ:case vQ:return Object.is(e.valueOf(),t.valueOf());case gQ:return e.source===t.source&&e.flags===t.flags;case xQ:return e===t}n=n??new Map;const c=n.get(e),u=n.get(t);if(c!=null&&u!=null)return c===t;n.set(e,t),n.set(t,e);try{switch(i){case EQ:{if(e.size!==t.size)return!1;for(const[f,d]of e.entries())if(!t.has(f)||!Mu(d,t.get(f),f,e,t,n,r))return!1;return!0}case SQ:{if(e.size!==t.size)return!1;const f=Array.from(e.values()),d=Array.from(t.values());for(let p=0;p<f.length;p++){const g=f[p],y=d.findIndex(b=>Mu(g,b,void 0,e,t,n,r));if(y===-1)return!1;d.splice(y,1)}return!0}case _Q:case TQ:case DQ:case CQ:case IQ:case NQ:case $Q:case BQ:case PQ:case UQ:case kQ:case MQ:{if(typeof Buffer<"u"&&Buffer.isBuffer(e)!==Buffer.isBuffer(t)||e.length!==t.length)return!1;for(let f=0;f<e.length;f++)if(!Mu(e[f],t[f],f,e,t,n,r))return!1;return!0}case AQ:return e.byteLength!==t.byteLength?!1:Xu(new Uint8Array(e),new Uint8Array(t),n,r);case OQ:return e.byteLength!==t.byteLength||e.byteOffset!==t.byteOffset?!1:Xu(new Uint8Array(e),new Uint8Array(t),n,r);case RQ:return e.name===t.name&&e.message===t.message;case B0:{if(!(Xu(e.constructor,t.constructor,n,r)||DR(e)&&DR(t)))return!1;const f=[...Object.keys(e),...RR(e)],d=[...Object.keys(t),...RR(t)];if(f.length!==d.length)return!1;for(let p=0;p<f.length;p++){const g=f[p],y=e[g];if(!Object.hasOwn(t,g))return!1;const b=t[g];if(!Mu(y,b,g,e,t,n,r))return!1}return!0}default:return!1}}finally{n.delete(e),n.delete(t)}}function zQ(e,t){return LQ(e,t,jQ)}var qQ=Object.defineProperty,CR=Object.getOwnPropertySymbols,HQ=Object.prototype.hasOwnProperty,FQ=Object.prototype.propertyIsEnumerable,ov=(e,t,n)=>t in e?qQ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,IR=(e,t)=>{for(var n in t||(t={}))HQ.call(t,n)&&ov(e,n,t[n]);if(CR)for(var n of CR(t))FQ.call(t,n)&&ov(e,n,t[n]);return e},Fn=(e,t,n)=>ov(e,typeof t!="symbol"?t+"":t,n);class _a extends JW{constructor(t,n,r,i=Ni,a=void 0){super(t,n,r,i),this.core=t,this.logger=n,this.name=r,Fn(this,"map",new Map),Fn(this,"version",GY),Fn(this,"cached",[]),Fn(this,"initialized",!1),Fn(this,"getKey"),Fn(this,"storagePrefix",Ni),Fn(this,"recentlyDeleted",[]),Fn(this,"recentlyDeletedLimit",200),Fn(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(c=>{this.getKey&&c!==null&&!yn(c)?this.map.set(this.getKey(c),c):nK(c)?this.map.set(c.id,c):rK(c)&&this.map.set(c.topic,c)}),this.cached=[],this.initialized=!0)}),Fn(this,"set",async(c,u)=>{this.isInitialized(),this.map.has(c)?await this.update(c,u):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:c,value:u}),this.map.set(c,u),await this.persist())}),Fn(this,"get",c=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:c}),this.getData(c))),Fn(this,"getAll",c=>(this.isInitialized(),c?this.values.filter(u=>Object.keys(c).every(f=>zQ(u[f],c[f]))):this.values)),Fn(this,"update",async(c,u)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:c,update:u});const f=IR(IR({},this.getData(c)),u);this.map.set(c,f),await this.persist()}),Fn(this,"delete",async(c,u)=>{this.isInitialized(),this.map.has(c)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:c,reason:u}),this.map.delete(c),this.addToRecentlyDeleted(c),await this.persist())}),this.logger=kn(n,this.name),this.storagePrefix=i,this.getKey=a}get context(){return ir(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(t){this.recentlyDeleted.push(t),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(t){await this.core.storage.setItem(this.storageKey,t)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(t){const n=this.map.get(t);if(!n){if(this.recentlyDeleted.includes(t)){const{message:i}=we("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${t}`);throw this.logger.error(i),new Error(i)}const{message:r}=we("NO_MATCHING_KEY",`${this.name}: ${t}`);throw this.logger.error(r),new Error(r)}return n}async persist(){await this.setDataStore(this.values)}async restore(){try{const t=await this.getDataStore();if(typeof t>"u"||!t.length)return;if(this.map.size){const{message:n}=we("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=t,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(t){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(t)}}isInitialized(){if(!this.initialized){const{message:t}=we("NOT_INITIALIZED",this.name);throw new Error(t)}}}var VQ=Object.defineProperty,GQ=(e,t,n)=>t in e?VQ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ze=(e,t,n)=>GQ(e,typeof t!="symbol"?t+"":t,n);class KQ{constructor(t,n){this.core=t,this.logger=n,ze(this,"name",XY),ze(this,"version",ZY),ze(this,"events",new Ep),ze(this,"pairings"),ze(this,"initialized",!1),ze(this,"storagePrefix",Ni),ze(this,"ignoredPayloadTypes",[fs]),ze(this,"registeredMethods",[]),ze(this,"init",async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))}),ze(this,"register",({methods:r})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...r])]}),ze(this,"create",async r=>{this.isInitialized();const i=Kb(),a=await this.core.crypto.setSymKey(i),c=Yt(Ee.FIVE_MINUTES),u={protocol:bI},f={topic:a,expiry:c,relay:u,active:!1,methods:r?.methods},d=IA({protocol:this.core.protocol,version:this.core.version,topic:a,symKey:i,relay:u,expiryTimestamp:c,methods:r?.methods});return this.events.emit(Yo.create,f),this.core.expirer.set(a,c),await this.pairings.set(a,f),await this.core.relayer.subscribe(a,{transportType:r?.transportType}),{topic:a,uri:d}}),ze(this,"pair",async r=>{this.isInitialized();const i=this.core.eventClient.createEvent({properties:{topic:r?.uri,trace:[bi.pairing_started]}});this.isValidPair(r,i);const{topic:a,symKey:c,relay:u,expiryTimestamp:f,methods:d}=CA(r.uri);i.props.properties.topic=a,i.addTrace(bi.pairing_uri_validation_success),i.addTrace(bi.pairing_uri_not_expired);let p;if(this.pairings.keys.includes(a)){if(p=this.pairings.get(a),i.addTrace(bi.existing_pairing),p.active)throw i.setError(is.active_pairing_already_exists),new Error(`Pairing already exists: ${a}. Please try again with a new connection URI.`);i.addTrace(bi.pairing_not_expired)}const g=f||Yt(Ee.FIVE_MINUTES),y={topic:a,relay:u,expiry:g,active:!1,methods:d};this.core.expirer.set(a,g),await this.pairings.set(a,y),i.addTrace(bi.store_new_pairing),r.activatePairing&&await this.activate({topic:a}),this.events.emit(Yo.create,y),i.addTrace(bi.emit_inactive_pairing),this.core.crypto.keychain.has(a)||await this.core.crypto.setSymKey(c,a),i.addTrace(bi.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{i.setError(is.no_internet_connection)}try{await this.core.relayer.subscribe(a,{relay:u})}catch(b){throw i.setError(is.subscribe_pairing_topic_failure),b}return i.addTrace(bi.subscribe_pairing_topic_success),y}),ze(this,"activate",async({topic:r})=>{this.isInitialized();const i=Yt(Ee.FIVE_MINUTES);this.core.expirer.set(r,i),await this.pairings.update(r,{active:!0,expiry:i})}),ze(this,"ping",async r=>{this.isInitialized(),await this.isValidPing(r),this.logger.warn("ping() is deprecated and will be removed in the next major release.");const{topic:i}=r;if(this.pairings.keys.includes(i)){const a=await this.sendRequest(i,"wc_pairingPing",{}),{done:c,resolve:u,reject:f}=Go();this.events.once(Qe("pairing_ping",a),({error:d})=>{d?f(d):u()}),await c()}}),ze(this,"updateExpiry",async({topic:r,expiry:i})=>{this.isInitialized(),await this.pairings.update(r,{expiry:i})}),ze(this,"updateMetadata",async({topic:r,metadata:i})=>{this.isInitialized(),await this.pairings.update(r,{peerMetadata:i})}),ze(this,"getPairings",()=>(this.isInitialized(),this.pairings.values)),ze(this,"disconnect",async r=>{this.isInitialized(),await this.isValidDisconnect(r);const{topic:i}=r;this.pairings.keys.includes(i)&&(await this.sendRequest(i,"wc_pairingDelete",_t("USER_DISCONNECTED")),await this.deletePairing(i))}),ze(this,"formatUriFromPairing",r=>{this.isInitialized();const{topic:i,relay:a,expiry:c,methods:u}=r,f=this.core.crypto.keychain.get(i);return IA({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:f,relay:a,expiryTimestamp:c,methods:u})}),ze(this,"sendRequest",async(r,i,a)=>{const c=co(i,a),u=await this.core.crypto.encode(r,c),f=Ru[i].req;return this.core.history.set(r,c),this.core.relayer.publish(r,u,f),c.id}),ze(this,"sendResult",async(r,i,a)=>{const c=Xp(r,a),u=await this.core.crypto.encode(i,c),f=(await this.core.history.get(i,r)).request.method,d=Ru[f].res;await this.core.relayer.publish(i,u,d),await this.core.history.resolve(c)}),ze(this,"sendError",async(r,i,a)=>{const c=Zp(r,a),u=await this.core.crypto.encode(i,c),f=(await this.core.history.get(i,r)).request.method,d=Ru[f]?Ru[f].res:Ru.unregistered_method.res;await this.core.relayer.publish(i,u,d),await this.core.history.resolve(c)}),ze(this,"deletePairing",async(r,i)=>{await this.core.relayer.unsubscribe(r),await Promise.all([this.pairings.delete(r,_t("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(r),i?Promise.resolve():this.core.expirer.del(r)])}),ze(this,"cleanup",async()=>{const r=this.pairings.getAll().filter(i=>to(i.expiry));await Promise.all(r.map(i=>this.deletePairing(i.topic)))}),ze(this,"onRelayEventRequest",async r=>{const{topic:i,payload:a}=r;switch(a.method){case"wc_pairingPing":return await this.onPairingPingRequest(i,a);case"wc_pairingDelete":return await this.onPairingDeleteRequest(i,a);default:return await this.onUnknownRpcMethodRequest(i,a)}}),ze(this,"onRelayEventResponse",async r=>{const{topic:i,payload:a}=r,c=(await this.core.history.get(i,a.id)).request.method;switch(c){case"wc_pairingPing":return this.onPairingPingResponse(i,a);default:return this.onUnknownRpcMethodResponse(c)}}),ze(this,"onPairingPingRequest",async(r,i)=>{const{id:a}=i;try{this.isValidPing({topic:r}),await this.sendResult(a,r,!0),this.events.emit(Yo.ping,{id:a,topic:r})}catch(c){await this.sendError(a,r,c),this.logger.error(c)}}),ze(this,"onPairingPingResponse",(r,i)=>{const{id:a}=i;setTimeout(()=>{wi(i)?this.events.emit(Qe("pairing_ping",a),{}):Ur(i)&&this.events.emit(Qe("pairing_ping",a),{error:i.error})},500)}),ze(this,"onPairingDeleteRequest",async(r,i)=>{const{id:a}=i;try{this.isValidDisconnect({topic:r}),await this.deletePairing(r),this.events.emit(Yo.delete,{id:a,topic:r})}catch(c){await this.sendError(a,r,c),this.logger.error(c)}}),ze(this,"onUnknownRpcMethodRequest",async(r,i)=>{const{id:a,method:c}=i;try{if(this.registeredMethods.includes(c))return;const u=_t("WC_METHOD_UNSUPPORTED",c);await this.sendError(a,r,u),this.logger.error(u)}catch(u){await this.sendError(a,r,u),this.logger.error(u)}}),ze(this,"onUnknownRpcMethodResponse",r=>{this.registeredMethods.includes(r)||this.logger.error(_t("WC_METHOD_UNSUPPORTED",r))}),ze(this,"isValidPair",(r,i)=>{var a;if(!Kn(r)){const{message:u}=we("MISSING_OR_INVALID",`pair() params: ${r}`);throw i.setError(is.malformed_pairing_uri),new Error(u)}if(!tK(r.uri)){const{message:u}=we("MISSING_OR_INVALID",`pair() uri: ${r.uri}`);throw i.setError(is.malformed_pairing_uri),new Error(u)}const c=CA(r?.uri);if(!((a=c?.relay)!=null&&a.protocol)){const{message:u}=we("MISSING_OR_INVALID","pair() uri#relay-protocol");throw i.setError(is.malformed_pairing_uri),new Error(u)}if(!(c!=null&&c.symKey)){const{message:u}=we("MISSING_OR_INVALID","pair() uri#symKey");throw i.setError(is.malformed_pairing_uri),new Error(u)}if(c!=null&&c.expiryTimestamp&&Ee.toMiliseconds(c?.expiryTimestamp)<Date.now()){i.setError(is.pairing_expired);const{message:u}=we("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(u)}}),ze(this,"isValidPing",async r=>{if(!Kn(r)){const{message:a}=we("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(a)}const{topic:i}=r;await this.isValidPairingTopic(i)}),ze(this,"isValidDisconnect",async r=>{if(!Kn(r)){const{message:a}=we("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(a)}const{topic:i}=r;await this.isValidPairingTopic(i)}),ze(this,"isValidPairingTopic",async r=>{if(!zt(r,!1)){const{message:i}=we("MISSING_OR_INVALID",`pairing topic should be a string: ${r}`);throw new Error(i)}if(!this.pairings.keys.includes(r)){const{message:i}=we("NO_MATCHING_KEY",`pairing topic doesn't exist: ${r}`);throw new Error(i)}if(to(this.pairings.get(r).expiry)){await this.deletePairing(r);const{message:i}=we("EXPIRED",`pairing topic: ${r}`);throw new Error(i)}}),this.core=t,this.logger=kn(n,this.name),this.pairings=new _a(this.core,this.logger,this.name,this.storagePrefix)}get context(){return ir(this.logger)}isInitialized(){if(!this.initialized){const{message:t}=we("NOT_INITIALIZED",this.name);throw new Error(t)}}registerRelayerEvents(){this.core.relayer.on(cn.message,async t=>{const{topic:n,message:r,transportType:i}=t;if(this.pairings.keys.includes(n)&&i!==wt.link_mode&&!this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(r)))try{const a=await this.core.crypto.decode(n,r);_w(a)?(this.core.history.set(n,a),await this.onRelayEventRequest({topic:n,payload:a})):Qp(a)&&(await this.core.history.resolve(a),await this.onRelayEventResponse({topic:n,payload:a}),this.core.history.delete(n,a.id)),await this.core.relayer.messages.ack(n,r)}catch(a){this.logger.error(a)}})}registerExpirerEvents(){this.core.expirer.on(Pr.expired,async t=>{const{topic:n}=iC(t.target);n&&this.pairings.keys.includes(n)&&(await this.deletePairing(n,!0),this.events.emit(Yo.expire,{topic:n}))})}}var WQ=Object.defineProperty,YQ=(e,t,n)=>t in e?WQ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,gn=(e,t,n)=>YQ(e,typeof t!="symbol"?t+"":t,n);class XQ extends YW{constructor(t,n){super(t,n),this.core=t,this.logger=n,gn(this,"records",new Map),gn(this,"events",new tr.EventEmitter),gn(this,"name",QY),gn(this,"version",JY),gn(this,"cached",[]),gn(this,"initialized",!1),gn(this,"storagePrefix",Ni),gn(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.records.set(r.id,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),gn(this,"set",(r,i,a)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:r,request:i,chainId:a}),this.records.has(i.id))return;const c={id:i.id,topic:r,request:{method:i.method,params:i.params||null},chainId:a,expiry:Yt(Ee.THIRTY_DAYS)};this.records.set(c.id,c),this.persist(),this.events.emit(Xr.created,c)}),gn(this,"resolve",async r=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:r}),!this.records.has(r.id))return;const i=await this.getRecord(r.id);typeof i.response>"u"&&(i.response=Ur(r)?{error:r.error}:{result:r.result},this.records.set(i.id,i),this.persist(),this.events.emit(Xr.updated,i))}),gn(this,"get",async(r,i)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:r,id:i}),await this.getRecord(i))),gn(this,"delete",(r,i)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:i}),this.values.forEach(a=>{if(a.topic===r){if(typeof i<"u"&&a.id!==i)return;this.records.delete(a.id),this.events.emit(Xr.deleted,a)}}),this.persist()}),gn(this,"exists",async(r,i)=>(this.isInitialized(),this.records.has(i)?(await this.getRecord(i)).topic===r:!1)),gn(this,"on",(r,i)=>{this.events.on(r,i)}),gn(this,"once",(r,i)=>{this.events.once(r,i)}),gn(this,"off",(r,i)=>{this.events.off(r,i)}),gn(this,"removeListener",(r,i)=>{this.events.removeListener(r,i)}),this.logger=kn(n,this.name)}get context(){return ir(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const t=[];return this.values.forEach(n=>{if(typeof n.response<"u")return;const r={topic:n.topic,request:co(n.request.method,n.request.params,n.id),chainId:n.chainId};return t.push(r)}),t}async setJsonRpcRecords(t){await this.core.storage.setItem(this.storageKey,t)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(t){this.isInitialized();const n=this.records.get(t);if(!n){const{message:r}=we("NO_MATCHING_KEY",`${this.name}: ${t}`);throw new Error(r)}return n}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(Xr.sync)}async restore(){try{const t=await this.getJsonRpcRecords();if(typeof t>"u"||!t.length)return;if(this.records.size){const{message:n}=we("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=t,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(t){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(t)}}registerEventListeners(){this.events.on(Xr.created,t=>{const n=Xr.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:t})}),this.events.on(Xr.updated,t=>{const n=Xr.updated;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:t})}),this.events.on(Xr.deleted,t=>{const n=Xr.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:t})}),this.core.heartbeat.on(Ea.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let t=!1;this.records.forEach(n=>{Ee.toMiliseconds(n.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${n.id}`),this.records.delete(n.id),this.events.emit(Xr.deleted,n,!1),t=!0)}),t&&this.persist()}catch(t){this.logger.warn(t)}}isInitialized(){if(!this.initialized){const{message:t}=we("NOT_INITIALIZED",this.name);throw new Error(t)}}}var ZQ=Object.defineProperty,QQ=(e,t,n)=>t in e?ZQ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Cn=(e,t,n)=>QQ(e,typeof t!="symbol"?t+"":t,n);class JQ extends tY{constructor(t,n){super(t,n),this.core=t,this.logger=n,Cn(this,"expirations",new Map),Cn(this,"events",new tr.EventEmitter),Cn(this,"name",eX),Cn(this,"version",tX),Cn(this,"cached",[]),Cn(this,"initialized",!1),Cn(this,"storagePrefix",Ni),Cn(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.expirations.set(r.target,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),Cn(this,"has",r=>{try{const i=this.formatTarget(r);return typeof this.getExpiration(i)<"u"}catch{return!1}}),Cn(this,"set",(r,i)=>{this.isInitialized();const a=this.formatTarget(r),c={target:a,expiry:i};this.expirations.set(a,c),this.checkExpiry(a,c),this.events.emit(Pr.created,{target:a,expiration:c})}),Cn(this,"get",r=>{this.isInitialized();const i=this.formatTarget(r);return this.getExpiration(i)}),Cn(this,"del",r=>{if(this.isInitialized(),this.has(r)){const i=this.formatTarget(r),a=this.getExpiration(i);this.expirations.delete(i),this.events.emit(Pr.deleted,{target:i,expiration:a})}}),Cn(this,"on",(r,i)=>{this.events.on(r,i)}),Cn(this,"once",(r,i)=>{this.events.once(r,i)}),Cn(this,"off",(r,i)=>{this.events.off(r,i)}),Cn(this,"removeListener",(r,i)=>{this.events.removeListener(r,i)}),this.logger=kn(n,this.name)}get context(){return ir(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(t){if(typeof t=="string")return jH(t);if(typeof t=="number")return LH(t);const{message:n}=we("UNKNOWN_TYPE",`Target type: ${typeof t}`);throw new Error(n)}async setExpirations(t){await this.core.storage.setItem(this.storageKey,t)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(Pr.sync)}async restore(){try{const t=await this.getExpirations();if(typeof t>"u"||!t.length)return;if(this.expirations.size){const{message:n}=we("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=t,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(t){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(t)}}getExpiration(t){const n=this.expirations.get(t);if(!n){const{message:r}=we("NO_MATCHING_KEY",`${this.name}: ${t}`);throw this.logger.warn(r),new Error(r)}return n}checkExpiry(t,n){const{expiry:r}=n;Ee.toMiliseconds(r)-Date.now()<=0&&this.expire(t,n)}expire(t,n){this.expirations.delete(t),this.events.emit(Pr.expired,{target:t,expiration:n})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((t,n)=>this.checkExpiry(n,t))}registerEventListeners(){this.core.heartbeat.on(Ea.pulse,()=>this.checkExpirations()),this.events.on(Pr.created,t=>{const n=Pr.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:t}),this.persist()}),this.events.on(Pr.expired,t=>{const n=Pr.expired;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:t}),this.persist()}),this.events.on(Pr.deleted,t=>{const n=Pr.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:t}),this.persist()})}isInitialized(){if(!this.initialized){const{message:t}=we("NOT_INITIALIZED",this.name);throw new Error(t)}}}var eJ=Object.defineProperty,tJ=(e,t,n)=>t in e?eJ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Lt=(e,t,n)=>tJ(e,typeof t!="symbol"?t+"":t,n);class nJ extends nY{constructor(t,n,r){super(t,n,r),this.core=t,this.logger=n,this.store=r,Lt(this,"name",nX),Lt(this,"abortController"),Lt(this,"isDevEnv"),Lt(this,"verifyUrlV3",iX),Lt(this,"storagePrefix",Ni),Lt(this,"version",yI),Lt(this,"publicKey"),Lt(this,"fetchPromise"),Lt(this,"init",async()=>{var i;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&Ee.toMiliseconds((i=this.publicKey)==null?void 0:i.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))}),Lt(this,"register",async i=>{if(!cl()||this.isDevEnv)return;const a=window.location.origin,{id:c,decryptedId:u}=i,f=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${a}&id=${c}&decryptedId=${u}`;try{const d=gs.getDocument(),p=this.startAbortTimer(Ee.ONE_SECOND*5),g=await new Promise((y,b)=>{const v=()=>{window.removeEventListener("message",S),d.body.removeChild(E),b("attestation aborted")};this.abortController.signal.addEventListener("abort",v);const E=d.createElement("iframe");E.src=f,E.style.display="none",E.addEventListener("error",v,{signal:this.abortController.signal});const S=_=>{if(_.data&&typeof _.data=="string")try{const T=JSON.parse(_.data);if(T.type==="verify_attestation"){if(Bb(T.attestation).payload.id!==c)return;clearInterval(p),d.body.removeChild(E),this.abortController.signal.removeEventListener("abort",v),window.removeEventListener("message",S),y(T.attestation===null?"":T.attestation)}}catch(T){this.logger.warn(T)}};d.body.appendChild(E),window.addEventListener("message",S,{signal:this.abortController.signal})});return this.logger.debug("jwt attestation",g),g}catch(d){this.logger.warn(d)}return""}),Lt(this,"resolve",async i=>{if(this.isDevEnv)return"";const{attestationId:a,hash:c,encryptedId:u}=i;if(a===""){this.logger.debug("resolve: attestationId is empty, skipping");return}if(a){if(Bb(a).payload.id!==u)return;const d=await this.isValidJwtAttestation(a);if(d){if(!d.isVerified){this.logger.warn("resolve: jwt attestation: origin url not verified");return}return d}}if(!c)return;const f=this.getVerifyUrl(i?.verifyUrl);return this.fetchAttestation(c,f)}),Lt(this,"fetchAttestation",async(i,a)=>{this.logger.debug(`resolving attestation: ${i} from url: ${a}`);const c=this.startAbortTimer(Ee.ONE_SECOND*5),u=await fetch(`${a}/attestation/${i}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(c),u.status===200?await u.json():void 0}),Lt(this,"getVerifyUrl",i=>{let a=i||Yu;return sX.includes(a)||(this.logger.info(`verify url: ${a}, not included in trusted list, assigning default: ${Yu}`),a=Yu),a}),Lt(this,"fetchPublicKey",async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const i=this.startAbortTimer(Ee.FIVE_SECONDS),a=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(i),await a.json()}catch(i){this.logger.warn(i)}}),Lt(this,"persistPublicKey",async i=>{this.logger.debug("persisting public key to local storage",i),await this.store.setItem(this.storeKey,i),this.publicKey=i}),Lt(this,"removePublicKey",async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0}),Lt(this,"isValidJwtAttestation",async i=>{const a=await this.getPublicKey();try{if(a)return this.validateAttestation(i,a)}catch(u){this.logger.error(u),this.logger.warn("error validating attestation")}const c=await this.fetchAndPersistPublicKey();try{if(c)return this.validateAttestation(i,c)}catch(u){this.logger.error(u),this.logger.warn("error validating attestation")}}),Lt(this,"getPublicKey",async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey()),Lt(this,"fetchAndPersistPublicKey",async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async a=>{const c=await this.fetchPublicKey();c&&(await this.persistPublicKey(c),a(c))});const i=await this.fetchPromise;return this.fetchPromise=void 0,i}),Lt(this,"validateAttestation",(i,a)=>{const c=BG(i,a.publicKey),u={hasExpired:Ee.toMiliseconds(c.exp)<Date.now(),payload:c};if(u.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:u.payload.origin,isScam:u.payload.isScam,isVerified:u.payload.isVerified}}),this.logger=kn(n,this.name),this.abortController=new AbortController,this.isDevEnv=rw(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return ir(this.logger)}startAbortTimer(t){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),Ee.toMiliseconds(t))}}var rJ=Object.defineProperty,iJ=(e,t,n)=>t in e?rJ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,NR=(e,t,n)=>iJ(e,typeof t!="symbol"?t+"":t,n);class sJ extends rY{constructor(t,n){super(t,n),this.projectId=t,this.logger=n,NR(this,"context",oX),NR(this,"registerDeviceToken",async r=>{const{clientId:i,token:a,notificationType:c,enableEncrypted:u=!1}=r,f=`${aX}/${this.projectId}/clients`;await fetch(f,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:i,type:c,token:a,always_raw:u})})}),this.logger=kn(n,this.context)}}var oJ=Object.defineProperty,$R=Object.getOwnPropertySymbols,aJ=Object.prototype.hasOwnProperty,cJ=Object.prototype.propertyIsEnumerable,av=(e,t,n)=>t in e?oJ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Du=(e,t)=>{for(var n in t||(t={}))aJ.call(t,n)&&av(e,n,t[n]);if($R)for(var n of $R(t))cJ.call(t,n)&&av(e,n,t[n]);return e},sn=(e,t,n)=>av(e,typeof t!="symbol"?t+"":t,n);class lJ extends iY{constructor(t,n,r=!0){super(t,n,r),this.core=t,this.logger=n,sn(this,"context",lX),sn(this,"storagePrefix",Ni),sn(this,"storageVersion",cX),sn(this,"events",new Map),sn(this,"shouldPersist",!1),sn(this,"init",async()=>{if(!rw())try{const i={eventId:Qx(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:nC(this.core.relayer.protocol,this.core.relayer.version,Jb)}}};await this.sendEvent([i])}catch(i){this.logger.warn(i)}}),sn(this,"createEvent",i=>{const{event:a="ERROR",type:c="",properties:{topic:u,trace:f}}=i,d=Qx(),p=this.core.projectId||"",g=Date.now(),y=Du({eventId:d,timestamp:g,props:{event:a,type:c,properties:{topic:u,trace:f}},bundleId:p,domain:this.getAppDomain()},this.setMethods(d));return this.telemetryEnabled&&(this.events.set(d,y),this.shouldPersist=!0),y}),sn(this,"getEvent",i=>{const{eventId:a,topic:c}=i;if(a)return this.events.get(a);const u=Array.from(this.events.values()).find(f=>f.props.properties.topic===c);if(u)return Du(Du({},u),this.setMethods(u.eventId))}),sn(this,"deleteEvent",i=>{const{eventId:a}=i;this.events.delete(a),this.shouldPersist=!0}),sn(this,"setEventListeners",()=>{this.core.heartbeat.on(Ea.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(i=>{Ee.fromMiliseconds(Date.now())-Ee.fromMiliseconds(i.timestamp)>uX&&(this.events.delete(i.eventId),this.shouldPersist=!0)})})}),sn(this,"setMethods",i=>({addTrace:a=>this.addTrace(i,a),setError:a=>this.setError(i,a)})),sn(this,"addTrace",(i,a)=>{const c=this.events.get(i);c&&(c.props.properties.trace.push(a),this.events.set(i,c),this.shouldPersist=!0)}),sn(this,"setError",(i,a)=>{const c=this.events.get(i);c&&(c.props.type=a,c.timestamp=Date.now(),this.events.set(i,c),this.shouldPersist=!0)}),sn(this,"persist",async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1}),sn(this,"restore",async()=>{try{const i=await this.core.storage.getItem(this.storageKey)||[];if(!i.length)return;i.forEach(a=>{this.events.set(a.eventId,Du(Du({},a),this.setMethods(a.eventId)))})}catch(i){this.logger.warn(i)}}),sn(this,"submit",async()=>{if(!this.telemetryEnabled||this.events.size===0)return;const i=[];for(const[a,c]of this.events)c.props.type&&i.push(c);if(i.length!==0)try{if((await this.sendEvent(i)).ok)for(const a of i)this.events.delete(a.eventId),this.shouldPersist=!0}catch(a){this.logger.warn(a)}}),sn(this,"sendEvent",async i=>{const a=this.getAppDomain()?"":"&sp=desktop";return await fetch(`${fX}?projectId=${this.core.projectId}&st=events_sdk&sv=js-${Jb}${a}`,{method:"POST",body:JSON.stringify(i)})}),sn(this,"getAppDomain",()=>tC().url),this.logger=kn(n,this.context),this.telemetryEnabled=r,r?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}var uJ=Object.defineProperty,BR=Object.getOwnPropertySymbols,fJ=Object.prototype.hasOwnProperty,dJ=Object.prototype.propertyIsEnumerable,cv=(e,t,n)=>t in e?uJ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,PR=(e,t)=>{for(var n in t||(t={}))fJ.call(t,n)&&cv(e,n,t[n]);if(BR)for(var n of BR(t))dJ.call(t,n)&&cv(e,n,t[n]);return e},mt=(e,t,n)=>cv(e,typeof t!="symbol"?t+"":t,n);let hJ=class NI extends VW{constructor(t){var n;super(t),mt(this,"protocol",mI),mt(this,"version",yI),mt(this,"name",Qb),mt(this,"relayUrl"),mt(this,"projectId"),mt(this,"customStoragePrefix"),mt(this,"events",new tr.EventEmitter),mt(this,"logger"),mt(this,"heartbeat"),mt(this,"relayer"),mt(this,"crypto"),mt(this,"storage"),mt(this,"history"),mt(this,"expirer"),mt(this,"pairing"),mt(this,"verify"),mt(this,"echoClient"),mt(this,"linkModeSupportedApps"),mt(this,"eventClient"),mt(this,"initialized",!1),mt(this,"logChunkController"),mt(this,"on",(u,f)=>this.events.on(u,f)),mt(this,"once",(u,f)=>this.events.once(u,f)),mt(this,"off",(u,f)=>this.events.off(u,f)),mt(this,"removeListener",(u,f)=>this.events.removeListener(u,f)),mt(this,"dispatchEnvelope",({topic:u,message:f,sessionExists:d})=>{if(!u||!f)return;const p={topic:u,message:f,publishedAt:Date.now(),transportType:wt.link_mode};this.relayer.onLinkMessageEvent(p,{sessionExists:d})});const r=this.getGlobalCore(t?.customStoragePrefix);if(r)try{return this.customStoragePrefix=r.customStoragePrefix,this.logger=r.logger,this.heartbeat=r.heartbeat,this.crypto=r.crypto,this.history=r.history,this.expirer=r.expirer,this.storage=r.storage,this.relayer=r.relayer,this.pairing=r.pairing,this.verify=r.verify,this.echoClient=r.echoClient,this.linkModeSupportedApps=r.linkModeSupportedApps,this.eventClient=r.eventClient,this.initialized=r.initialized,this.logChunkController=r.logChunkController,r}catch(u){console.warn("Failed to copy global core",u)}this.projectId=t?.projectId,this.relayUrl=t?.relayUrl||vI,this.customStoragePrefix=t!=null&&t.customStoragePrefix?`:${t.customStoragePrefix}`:"";const i=Yp({level:typeof t?.logger=="string"&&t.logger?t.logger:$Y.logger,name:Qb}),{logger:a,chunkLoggerController:c}=qW({opts:i,maxSizeInBytes:t?.maxLogBlobSizeInBytes,loggerOverride:t?.logger});this.logChunkController=c,(n=this.logChunkController)!=null&&n.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var u,f;(u=this.logChunkController)!=null&&u.downloadLogsBlobInBrowser&&((f=this.logChunkController)==null||f.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=kn(a,this.name),this.heartbeat=new VK,this.crypto=new LZ(this,this.logger,t?.keychain),this.history=new XQ(this,this.logger),this.expirer=new JQ(this,this.logger),this.storage=t!=null&&t.storage?t.storage:new AW(PR(PR({},BY),t?.storageOptions)),this.relayer=new hQ({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new KQ(this,this.logger),this.verify=new nJ(this,this.logger,this.storage),this.echoClient=new sJ(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new lJ(this,this.logger,t?.telemetryEnabled),this.setGlobalCore(this)}static async init(t){const n=new NI(t);await n.initialize();const r=await n.crypto.getClientId();return await n.storage.setItem(KY,r),n}get context(){return ir(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var t;return(t=this.logChunkController)==null?void 0:t.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(t){this.linkModeSupportedApps.includes(t)||(this.linkModeSupportedApps.push(t),await this.storage.setItem(pR,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem(pR)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(t){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,t),this.logger.error(t.message),t}}getGlobalCore(t=""){try{if(this.isGlobalCoreDisabled())return;const n=`_walletConnectCore_${t}`,r=`${n}_count`;return globalThis[r]=(globalThis[r]||0)+1,globalThis[r]>1&&console.warn(`WalletConnect Core is already initialized. This is probably a mistake and can lead to unexpected behavior. Init() was called ${globalThis[r]} times.`),globalThis[n]}catch(n){console.warn("Failed to get global WalletConnect core",n);return}}setGlobalCore(t){var n;try{if(this.isGlobalCoreDisabled())return;const r=`_walletConnectCore_${((n=t.opts)==null?void 0:n.customStoragePrefix)||""}`;globalThis[r]=t}catch(r){console.warn("Failed to set global WalletConnect core",r)}}isGlobalCoreDisabled(){try{return typeof process<"u"&&NY.DISABLE_GLOBAL_CORE==="true"}catch{return!0}}};const pJ=hJ,$I="wc",BI=2,PI="client",xw=`${$I}@${BI}:${PI}:`,P0={name:PI,logger:"error"},UR="WALLETCONNECT_DEEPLINK_CHOICE",gJ="proposal",kR="Proposal expired",mJ="session",Ec=Ee.SEVEN_DAYS,yJ="engine",on={wc_sessionPropose:{req:{ttl:Ee.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:Ee.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:Ee.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:Ee.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:Ee.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:Ee.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:Ee.ONE_DAY,prompt:!1,tag:1104},res:{ttl:Ee.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:Ee.ONE_DAY,prompt:!1,tag:1106},res:{ttl:Ee.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:Ee.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:Ee.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:Ee.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:Ee.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:Ee.ONE_DAY,prompt:!1,tag:1112},res:{ttl:Ee.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:Ee.ONE_DAY,prompt:!1,tag:1114},res:{ttl:Ee.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:Ee.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:Ee.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:Ee.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:Ee.FIVE_MINUTES,prompt:!1,tag:1119}}},U0={min:Ee.FIVE_MINUTES,max:Ee.SEVEN_DAYS},mi={idle:"IDLE",active:"ACTIVE"},bJ={eth_sendTransaction:{key:""},eth_sendRawTransaction:{key:""},wallet_sendCalls:{key:""},solana_signTransaction:{key:"signature"},solana_signAllTransactions:{key:"transactions"},solana_signAndSendTransaction:{key:"signature"},sui_signAndExecuteTransaction:{key:"digest"},sui_signTransaction:{key:""},hedera_signAndExecuteTransaction:{key:"transactionId"},hedera_executeTransaction:{key:"transactionId"},near_signTransaction:{key:""},near_signTransactions:{key:""},tron_signTransaction:{key:"txID"},xrpl_signTransaction:{key:""},xrpl_signTransactionFor:{key:""},algo_signTxn:{key:""},sendTransfer:{key:"txid"},stacks_stxTransfer:{key:"txId"},polkadot_signTransaction:{key:""},cosmos_signDirect:{key:""}},vJ="request",wJ=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],EJ="wc",SJ="auth",_J="authKeys",xJ="pairingTopics",AJ="requests",eg=`${EJ}@${1.5}:${SJ}:`,Kh=`${eg}:PUB_KEY`;var RJ=Object.defineProperty,OJ=Object.defineProperties,TJ=Object.getOwnPropertyDescriptors,MR=Object.getOwnPropertySymbols,DJ=Object.prototype.hasOwnProperty,CJ=Object.prototype.propertyIsEnumerable,lv=(e,t,n)=>t in e?RJ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,vt=(e,t)=>{for(var n in t||(t={}))DJ.call(t,n)&&lv(e,n,t[n]);if(MR)for(var n of MR(t))CJ.call(t,n)&&lv(e,n,t[n]);return e},Vn=(e,t)=>OJ(e,TJ(t)),be=(e,t,n)=>lv(e,typeof t!="symbol"?t+"":t,n);class IJ extends cY{constructor(t){super(t),be(this,"name",yJ),be(this,"events",new Ep),be(this,"initialized",!1),be(this,"requestQueue",{state:mi.idle,queue:[]}),be(this,"sessionRequestQueue",{state:mi.idle,queue:[]}),be(this,"emittedSessionRequests",new YH({limit:500})),be(this,"requestQueueDelay",Ee.ONE_SECOND),be(this,"expectedPairingMethodMap",new Map),be(this,"recentlyDeletedMap",new Map),be(this,"recentlyDeletedLimit",200),be(this,"relayMessageCache",[]),be(this,"pendingSessions",new Map),be(this,"init",async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(on)}),this.initialized=!0,setTimeout(async()=>{await this.processPendingMessageEvents(),this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},Ee.toMiliseconds(this.requestQueueDelay)))}),be(this,"connect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();const r=Vn(vt({},n),{requiredNamespaces:n.requiredNamespaces||{},optionalNamespaces:n.optionalNamespaces||{}});await this.isValidConnect(r),r.optionalNamespaces=XG(r.requiredNamespaces,r.optionalNamespaces),r.requiredNamespaces={};const{pairingTopic:i,requiredNamespaces:a,optionalNamespaces:c,sessionProperties:u,scopedProperties:f,relays:d}=r;let p=i,g,y=!1;try{if(p){const B=this.client.core.pairing.pairings.get(p);this.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),y=B.active}}catch(B){throw this.client.logger.error(`connect() -> pairing.get(${p}) failed`),B}if(!p||!y){const{topic:B,uri:z}=await this.client.core.pairing.create();p=B,g=z}if(!p){const{message:B}=we("NO_MATCHING_KEY",`connect() pairing topic: ${p}`);throw new Error(B)}const b=await this.client.core.crypto.generateKeyPair(),v=on.wc_sessionPropose.req.ttl||Ee.FIVE_MINUTES,E=Yt(v),S=Vn(vt(vt({requiredNamespaces:a,optionalNamespaces:c,relays:d??[{protocol:bI}],proposer:{publicKey:b,metadata:this.client.metadata},expiryTimestamp:E,pairingTopic:p},u&&{sessionProperties:u}),f&&{scopedProperties:f}),{id:vi()}),_=Qe("session_connect",S.id),{reject:T,resolve:O,done:$}=Go(v,kR),I=({id:B})=>{B===S.id&&(this.client.events.off("proposal_expire",I),this.pendingSessions.delete(S.id),this.events.emit(_,{error:{message:kR,code:0}}))};return this.client.events.on("proposal_expire",I),this.events.once(_,({error:B,session:z})=>{this.client.events.off("proposal_expire",I),B?T(B):z&&O(z)}),await this.sendRequest({topic:p,method:"wc_sessionPropose",params:S,throwOnFailedPublish:!0,clientRpcId:S.id}),await this.setProposal(S.id,S),{uri:g,approval:$}}),be(this,"pair",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(n)}catch(r){throw this.client.logger.error("pair() failed"),r}}),be(this,"approve",async n=>{var r,i,a;const c=this.client.core.eventClient.createEvent({properties:{topic:(r=n?.id)==null?void 0:r.toString(),trace:[Zr.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(k){throw c.setError(Lo.no_internet_connection),k}try{await this.isValidProposalId(n?.id)}catch(k){throw this.client.logger.error(`approve() -> proposal.get(${n?.id}) failed`),c.setError(Lo.proposal_not_found),k}try{await this.isValidApprove(n)}catch(k){throw this.client.logger.error("approve() -> isValidApprove() failed"),c.setError(Lo.session_approve_namespace_validation_failure),k}const{id:u,relayProtocol:f,namespaces:d,sessionProperties:p,scopedProperties:g,sessionConfig:y}=n,b=this.client.proposal.get(u);this.client.core.eventClient.deleteEvent({eventId:c.eventId});const{pairingTopic:v,proposer:E,requiredNamespaces:S,optionalNamespaces:_}=b;let T=(i=this.client.core.eventClient)==null?void 0:i.getEvent({topic:v});T||(T=(a=this.client.core.eventClient)==null?void 0:a.createEvent({type:Zr.session_approve_started,properties:{topic:v,trace:[Zr.session_approve_started,Zr.session_namespaces_validation_success]}}));const O=await this.client.core.crypto.generateKeyPair(),$=E.publicKey,I=await this.client.core.crypto.generateSharedKey(O,$),B=vt(vt(vt({relay:{protocol:f??"irn"},namespaces:d,controller:{publicKey:O,metadata:this.client.metadata},expiry:Yt(Ec)},p&&{sessionProperties:p}),g&&{scopedProperties:g}),y&&{sessionConfig:y}),z=wt.relay;T.addTrace(Zr.subscribing_session_topic);try{await this.client.core.relayer.subscribe(I,{transportType:z})}catch(k){throw T.setError(Lo.subscribe_session_topic_failure),k}T.addTrace(Zr.subscribe_session_topic_success);const q=Vn(vt({},B),{topic:I,requiredNamespaces:S,optionalNamespaces:_,pairingTopic:v,acknowledged:!1,self:B.controller,peer:{publicKey:E.publicKey,metadata:E.metadata},controller:O,transportType:wt.relay});await this.client.session.set(I,q),T.addTrace(Zr.store_session);try{T.addTrace(Zr.publishing_session_settle),await this.sendRequest({topic:I,method:"wc_sessionSettle",params:B,throwOnFailedPublish:!0}).catch(k=>{throw T?.setError(Lo.session_settle_publish_failure),k}),T.addTrace(Zr.session_settle_publish_success),T.addTrace(Zr.publishing_session_approve),await this.sendResult({id:u,topic:v,result:{relay:{protocol:f??"irn"},responderPublicKey:O},throwOnFailedPublish:!0}).catch(k=>{throw T?.setError(Lo.session_approve_publish_failure),k}),T.addTrace(Zr.session_approve_publish_success)}catch(k){throw this.client.logger.error(k),this.client.session.delete(I,_t("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(I),k}return this.client.core.eventClient.deleteEvent({eventId:T.eventId}),await this.client.core.pairing.updateMetadata({topic:v,metadata:E.metadata}),await this.deleteProposal(u),await this.client.core.pairing.activate({topic:v}),await this.setExpiry(I,Yt(Ec)),{topic:I,acknowledged:()=>Promise.resolve(this.client.session.get(I))}}),be(this,"reject",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(n)}catch(c){throw this.client.logger.error("reject() -> isValidReject() failed"),c}const{id:r,reason:i}=n;let a;try{a=this.client.proposal.get(r).pairingTopic}catch(c){throw this.client.logger.error(`reject() -> proposal.get(${r}) failed`),c}a&&await this.sendError({id:r,topic:a,error:i,rpcOpts:on.wc_sessionPropose.reject}),await this.deleteProposal(r)}),be(this,"update",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(n)}catch(g){throw this.client.logger.error("update() -> isValidUpdate() failed"),g}const{topic:r,namespaces:i}=n,{done:a,resolve:c,reject:u}=Go(),f=vi(),d=ta().toString(),p=this.client.session.get(r).namespaces;return this.events.once(Qe("session_update",f),({error:g})=>{g?u(g):c()}),await this.client.session.update(r,{namespaces:i}),await this.sendRequest({topic:r,method:"wc_sessionUpdate",params:{namespaces:i},throwOnFailedPublish:!0,clientRpcId:f,relayRpcId:d}).catch(g=>{this.client.logger.error(g),this.client.session.update(r,{namespaces:p}),u(g)}),{acknowledged:a}}),be(this,"extend",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(n)}catch(f){throw this.client.logger.error("extend() -> isValidExtend() failed"),f}const{topic:r}=n,i=vi(),{done:a,resolve:c,reject:u}=Go();return this.events.once(Qe("session_extend",i),({error:f})=>{f?u(f):c()}),await this.setExpiry(r,Yt(Ec)),this.sendRequest({topic:r,method:"wc_sessionExtend",params:{},clientRpcId:i,throwOnFailedPublish:!0}).catch(f=>{u(f)}),{acknowledged:a}}),be(this,"request",async n=>{this.isInitialized();try{await this.isValidRequest(n)}catch(S){throw this.client.logger.error("request() -> isValidRequest() failed"),S}const{chainId:r,request:i,topic:a,expiry:c=on.wc_sessionRequest.req.ttl}=n,u=this.client.session.get(a);u?.transportType===wt.relay&&await this.confirmOnlineStateOrThrow();const f=vi(),d=ta().toString(),{done:p,resolve:g,reject:y}=Go(c,"Request expired. Please try again.");this.events.once(Qe("session_request",f),({error:S,result:_})=>{S?y(S):g(_)});const b="wc_sessionRequest",v=this.getAppLinkIfEnabled(u.peer.metadata,u.transportType);if(v)return await this.sendRequest({clientRpcId:f,relayRpcId:d,topic:a,method:b,params:{request:Vn(vt({},i),{expiryTimestamp:Yt(c)}),chainId:r},expiry:c,throwOnFailedPublish:!0,appLink:v}).catch(S=>y(S)),this.client.events.emit("session_request_sent",{topic:a,request:i,chainId:r,id:f}),await p();const E={request:Vn(vt({},i),{expiryTimestamp:Yt(c)}),chainId:r};return await Promise.all([new Promise(async S=>{await this.sendRequest({clientRpcId:f,relayRpcId:d,topic:a,method:b,params:E,expiry:c,throwOnFailedPublish:!0,tvf:this.getTVFParams(f,E)}).catch(_=>y(_)),this.client.events.emit("session_request_sent",{topic:a,request:i,chainId:r,id:f}),S()}),new Promise(async S=>{var _;if(!((_=u.sessionConfig)!=null&&_.disableDeepLink)){const T=await FH(this.client.core.storage,UR);await zH({id:f,topic:a,wcDeepLink:T})}S()}),p()]).then(S=>S[2])}),be(this,"respond",async n=>{this.isInitialized(),await this.isValidRespond(n);const{topic:r,response:i}=n,{id:a}=i,c=this.client.session.get(r);c.transportType===wt.relay&&await this.confirmOnlineStateOrThrow();const u=this.getAppLinkIfEnabled(c.peer.metadata,c.transportType);wi(i)?await this.sendResult({id:a,topic:r,result:i.result,throwOnFailedPublish:!0,appLink:u}):Ur(i)&&await this.sendError({id:a,topic:r,error:i.error,appLink:u}),this.cleanupAfterResponse(n)}),be(this,"ping",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(n)}catch(i){throw this.client.logger.error("ping() -> isValidPing() failed"),i}const{topic:r}=n;if(this.client.session.keys.includes(r)){const i=vi(),a=ta().toString(),{done:c,resolve:u,reject:f}=Go();this.events.once(Qe("session_ping",i),({error:d})=>{d?f(d):u()}),await Promise.all([this.sendRequest({topic:r,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:i,relayRpcId:a}),c()])}else this.client.core.pairing.pairings.keys.includes(r)&&(this.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),await this.client.core.pairing.ping({topic:r}))}),be(this,"emit",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(n);const{topic:r,event:i,chainId:a}=n,c=ta().toString(),u=vi();await this.sendRequest({topic:r,method:"wc_sessionEvent",params:{event:i,chainId:a},throwOnFailedPublish:!0,relayRpcId:c,clientRpcId:u})}),be(this,"disconnect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(n);const{topic:r}=n;if(this.client.session.keys.includes(r))await this.sendRequest({topic:r,method:"wc_sessionDelete",params:_t("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:r,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(r))await this.client.core.pairing.disconnect({topic:r});else{const{message:i}=we("MISMATCHED_TOPIC",`Session or pairing topic not found: ${r}`);throw new Error(i)}}),be(this,"find",n=>(this.isInitialized(),this.client.session.getAll().filter(r=>JG(r,n)))),be(this,"getPendingSessionRequests",()=>this.client.pendingRequest.getAll()),be(this,"authenticate",async(n,r)=>{var i;this.isInitialized(),this.isValidAuthenticate(n);const a=r&&this.client.core.linkModeSupportedApps.includes(r)&&((i=this.client.metadata.redirect)==null?void 0:i.linkMode),c=a?wt.link_mode:wt.relay;c===wt.relay&&await this.confirmOnlineStateOrThrow();const{chains:u,statement:f="",uri:d,domain:p,nonce:g,type:y,exp:b,nbf:v,methods:E=[],expiry:S}=n,_=[...n.resources||[]],{topic:T,uri:O}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:c});this.client.logger.info({message:"Generated new pairing",pairing:{topic:T,uri:O}});const $=await this.client.core.crypto.generateKeyPair(),I=zh($);if(await Promise.all([this.client.auth.authKeys.set(Kh,{responseTopic:I,publicKey:$}),this.client.auth.pairingTopics.set(I,{topic:I,pairingTopic:T})]),await this.client.core.relayer.subscribe(I,{transportType:c}),this.client.logger.info(`sending request to new pairing topic: ${T}`),E.length>0){const{namespace:X}=Vc(u[0]);let N=oV(X,"request",E);Lh(_)&&(N=cV(N,_.pop())),_.push(N)}const B=S&&S>on.wc_sessionAuthenticate.req.ttl?S:on.wc_sessionAuthenticate.req.ttl,z={authPayload:{type:y??"caip122",chains:u,statement:f,aud:d,domain:p,version:"1",nonce:g,iat:new Date().toISOString(),exp:b,nbf:v,resources:_},requester:{publicKey:$,metadata:this.client.metadata},expiryTimestamp:Yt(B)},q={eip155:{chains:u,methods:[...new Set(["personal_sign",...E])],events:["chainChanged","accountsChanged"]}},k={requiredNamespaces:{},optionalNamespaces:q,relays:[{protocol:"irn"}],pairingTopic:T,proposer:{publicKey:$,metadata:this.client.metadata},expiryTimestamp:Yt(on.wc_sessionPropose.req.ttl),id:vi()},{done:W,resolve:F,reject:G}=Go(B,"Request expired"),ne=vi(),ee=Qe("session_connect",k.id),D=Qe("session_request",ne),R=async({error:X,session:N})=>{this.events.off(D,L),X?G(X):N&&F({session:N})},L=async X=>{var N,K,te;if(await this.deletePendingAuthRequest(ne,{message:"fulfilled",code:0}),X.error){const _e=_t("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return X.error.code===_e.code?void 0:(this.events.off(ee,R),G(X.error.message))}await this.deleteProposal(k.id),this.events.off(ee,R);const{cacaos:se,responder:ie}=X.result,fe=[],Q=[];for(const _e of se){await lA({cacao:_e,projectId:this.client.core.projectId})||(this.client.logger.error(_e,"Signature verification failed"),G(_t("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:Oe}=_e,ke=Lh(Oe.resources),Et=[Mb(Oe.iss)],Tt=cp(Oe.iss);if(ke){const xt=uA(ke),Ye=fA(ke);fe.push(...xt),Et.push(...Ye)}for(const xt of Et)Q.push(`${xt}:${Tt}`)}const ve=await this.client.core.crypto.generateSharedKey($,ie.publicKey);let ye;fe.length>0&&(ye={topic:ve,acknowledged:!0,self:{publicKey:$,metadata:this.client.metadata},peer:ie,controller:ie.publicKey,expiry:Yt(Ec),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:T,namespaces:PA([...new Set(fe)],[...new Set(Q)]),transportType:c},await this.client.core.relayer.subscribe(ve,{transportType:c}),await this.client.session.set(ve,ye),T&&await this.client.core.pairing.updateMetadata({topic:T,metadata:ie.metadata}),ye=this.client.session.get(ve)),(N=this.client.metadata.redirect)!=null&&N.linkMode&&(K=ie.metadata.redirect)!=null&&K.linkMode&&(te=ie.metadata.redirect)!=null&&te.universal&&r&&(this.client.core.addLinkModeSupportedApp(ie.metadata.redirect.universal),this.client.session.update(ve,{transportType:wt.link_mode})),F({auths:se,session:ye})};this.events.once(ee,R),this.events.once(D,L);let V;try{if(a){const X=co("wc_sessionAuthenticate",z,ne);this.client.core.history.set(T,X);const N=await this.client.core.crypto.encode("",X,{type:Bf,encoding:oo});V=mh(r,T,N)}else await Promise.all([this.sendRequest({topic:T,method:"wc_sessionAuthenticate",params:z,expiry:n.expiry,throwOnFailedPublish:!0,clientRpcId:ne}),this.sendRequest({topic:T,method:"wc_sessionPropose",params:k,expiry:on.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:k.id})])}catch(X){throw this.events.off(ee,R),this.events.off(D,L),X}return await this.setProposal(k.id,k),await this.setAuthRequest(ne,{request:Vn(vt({},z),{verifyContext:{}}),pairingTopic:T,transportType:c}),{uri:V??O,response:W}}),be(this,"approveSessionAuthenticate",async n=>{const{id:r,auths:i}=n,a=this.client.core.eventClient.createEvent({properties:{topic:r.toString(),trace:[zo.authenticated_session_approve_started]}});try{this.isInitialized()}catch(S){throw a.setError(Ou.no_internet_connection),S}const c=this.getPendingAuthRequest(r);if(!c)throw a.setError(Ou.authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${r}`);const u=c.transportType||wt.relay;u===wt.relay&&await this.confirmOnlineStateOrThrow();const f=c.requester.publicKey,d=await this.client.core.crypto.generateKeyPair(),p=zh(f),g={type:fs,receiverPublicKey:f,senderPublicKey:d},y=[],b=[];for(const S of i){if(!await lA({cacao:S,projectId:this.client.core.projectId})){a.setError(Ou.invalid_cacao);const I=_t("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:r,topic:p,error:I,encodeOpts:g}),new Error(I.message)}a.addTrace(zo.cacaos_verified);const{p:_}=S,T=Lh(_.resources),O=[Mb(_.iss)],$=cp(_.iss);if(T){const I=uA(T),B=fA(T);y.push(...I),O.push(...B)}for(const I of O)b.push(`${I}:${$}`)}const v=await this.client.core.crypto.generateSharedKey(d,f);a.addTrace(zo.create_authenticated_session_topic);let E;if(y?.length>0){E={topic:v,acknowledged:!0,self:{publicKey:d,metadata:this.client.metadata},peer:{publicKey:f,metadata:c.requester.metadata},controller:f,expiry:Yt(Ec),authentication:i,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:c.pairingTopic,namespaces:PA([...new Set(y)],[...new Set(b)]),transportType:u},a.addTrace(zo.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(v,{transportType:u})}catch(S){throw a.setError(Ou.subscribe_authenticated_session_topic_failure),S}a.addTrace(zo.subscribe_authenticated_session_topic_success),await this.client.session.set(v,E),a.addTrace(zo.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:c.pairingTopic,metadata:c.requester.metadata})}a.addTrace(zo.publishing_authenticated_session_approve);try{await this.sendResult({topic:p,id:r,result:{cacaos:i,responder:{publicKey:d,metadata:this.client.metadata}},encodeOpts:g,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(c.requester.metadata,u)})}catch(S){throw a.setError(Ou.authenticated_session_approve_publish_failure),S}return await this.client.auth.requests.delete(r,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:c.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:a.eventId}),{session:E}}),be(this,"rejectSessionAuthenticate",async n=>{this.isInitialized();const{id:r,reason:i}=n,a=this.getPendingAuthRequest(r);if(!a)throw new Error(`Could not find pending auth request with id ${r}`);a.transportType===wt.relay&&await this.confirmOnlineStateOrThrow();const c=a.requester.publicKey,u=await this.client.core.crypto.generateKeyPair(),f=zh(c),d={type:fs,receiverPublicKey:c,senderPublicKey:u};await this.sendError({id:r,topic:f,error:i,encodeOpts:d,rpcOpts:on.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(a.requester.metadata,a.transportType)}),await this.client.auth.requests.delete(r,{message:"rejected",code:0}),await this.deleteProposal(r)}),be(this,"formatAuthMessage",n=>{this.isInitialized();const{request:r,iss:i}=n;return vC(r,i)}),be(this,"processRelayMessageCache",()=>{setTimeout(async()=>{if(this.relayMessageCache.length!==0)for(;this.relayMessageCache.length>0;)try{const n=this.relayMessageCache.shift();n&&await this.onRelayMessage(n)}catch(n){this.client.logger.error(n)}},50)}),be(this,"cleanupDuplicatePairings",async n=>{if(n.pairingTopic)try{const r=this.client.core.pairing.pairings.get(n.pairingTopic),i=this.client.core.pairing.pairings.getAll().filter(a=>{var c,u;return((c=a.peerMetadata)==null?void 0:c.url)&&((u=a.peerMetadata)==null?void 0:u.url)===n.peer.metadata.url&&a.topic&&a.topic!==r.topic});if(i.length===0)return;this.client.logger.info(`Cleaning up ${i.length} duplicate pairing(s)`),await Promise.all(i.map(a=>this.client.core.pairing.disconnect({topic:a.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(r){this.client.logger.error(r)}}),be(this,"deleteSession",async n=>{var r;const{topic:i,expirerHasDeleted:a=!1,emitEvent:c=!0,id:u=0}=n,{self:f}=this.client.session.get(i);await this.client.core.relayer.unsubscribe(i),await this.client.session.delete(i,_t("USER_DISCONNECTED")),this.addToRecentlyDeleted(i,"session"),this.client.core.crypto.keychain.has(f.publicKey)&&await this.client.core.crypto.deleteKeyPair(f.publicKey),this.client.core.crypto.keychain.has(i)&&await this.client.core.crypto.deleteSymKey(i),a||this.client.core.expirer.del(i),this.client.core.storage.removeItem(UR).catch(d=>this.client.logger.warn(d)),this.getPendingSessionRequests().forEach(d=>{d.topic===i&&this.deletePendingSessionRequest(d.id,_t("USER_DISCONNECTED"))}),i===((r=this.sessionRequestQueue.queue[0])==null?void 0:r.topic)&&(this.sessionRequestQueue.state=mi.idle),c&&this.client.events.emit("session_delete",{id:u,topic:i})}),be(this,"deleteProposal",async(n,r)=>{if(r)try{const i=this.client.proposal.get(n);this.client.core.eventClient.getEvent({topic:i.pairingTopic})?.setError(Lo.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(n,_t("USER_DISCONNECTED")),r?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"proposal")}),be(this,"deletePendingSessionRequest",async(n,r,i=!1)=>{await Promise.all([this.client.pendingRequest.delete(n,r),i?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(a=>a.id!==n),i&&(this.sessionRequestQueue.state=mi.idle,this.client.events.emit("session_request_expire",{id:n}))}),be(this,"deletePendingAuthRequest",async(n,r,i=!1)=>{await Promise.all([this.client.auth.requests.delete(n,r),i?Promise.resolve():this.client.core.expirer.del(n)])}),be(this,"setExpiry",async(n,r)=>{this.client.session.keys.includes(n)&&(this.client.core.expirer.set(n,r),await this.client.session.update(n,{expiry:r}))}),be(this,"setProposal",async(n,r)=>{this.client.core.expirer.set(n,Yt(on.wc_sessionPropose.req.ttl)),await this.client.proposal.set(n,r)}),be(this,"setAuthRequest",async(n,r)=>{const{request:i,pairingTopic:a,transportType:c=wt.relay}=r;this.client.core.expirer.set(n,i.expiryTimestamp),await this.client.auth.requests.set(n,{authPayload:i.authPayload,requester:i.requester,expiryTimestamp:i.expiryTimestamp,id:n,pairingTopic:a,verifyContext:i.verifyContext,transportType:c})}),be(this,"setPendingSessionRequest",async n=>{const{id:r,topic:i,params:a,verifyContext:c}=n,u=a.request.expiryTimestamp||Yt(on.wc_sessionRequest.req.ttl);this.client.core.expirer.set(r,u),await this.client.pendingRequest.set(r,{id:r,topic:i,params:a,verifyContext:c})}),be(this,"sendRequest",async n=>{const{topic:r,method:i,params:a,expiry:c,relayRpcId:u,clientRpcId:f,throwOnFailedPublish:d,appLink:p,tvf:g}=n,y=co(i,a,f);let b;const v=!!p;try{const _=v?oo:ri;b=await this.client.core.crypto.encode(r,y,{encoding:_})}catch(_){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${r} failed`),_}let E;if(wJ.includes(i)){const _=Si(JSON.stringify(y)),T=Si(b);E=await this.client.core.verify.register({id:T,decryptedId:_})}const S=on[i].req;if(S.attestation=E,c&&(S.ttl=c),u&&(S.id=u),this.client.core.history.set(r,y),v){const _=mh(p,r,b);await global.Linking.openURL(_,this.client.name)}else{const _=on[i].req;c&&(_.ttl=c),u&&(_.id=u),_.tvf=Vn(vt({},g),{correlationId:y.id}),d?(_.internal=Vn(vt({},_.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(r,b,_)):this.client.core.relayer.publish(r,b,_).catch(T=>this.client.logger.error(T))}return y.id}),be(this,"sendResult",async n=>{const{id:r,topic:i,result:a,throwOnFailedPublish:c,encodeOpts:u,appLink:f}=n,d=Xp(r,a);let p;const g=f&&typeof(global==null?void 0:global.Linking)<"u";try{const v=g?oo:ri;p=await this.client.core.crypto.encode(i,d,Vn(vt({},u||{}),{encoding:v}))}catch(v){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${i} failed`),v}let y,b;try{y=await this.client.core.history.get(i,r);const v=y.request;try{b=this.getTVFParams(r,v.params,a)}catch(E){this.client.logger.warn(`sendResult() -> getTVFParams() failed: ${E?.message}`)}}catch(v){throw this.client.logger.error(`sendResult() -> history.get(${i}, ${r}) failed`),v}if(g){const v=mh(f,i,p);await global.Linking.openURL(v,this.client.name)}else{const v=y.request.method,E=on[v].res;E.tvf=Vn(vt({},b),{correlationId:r}),c?(E.internal=Vn(vt({},E.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(i,p,E)):this.client.core.relayer.publish(i,p,E).catch(S=>this.client.logger.error(S))}await this.client.core.history.resolve(d)}),be(this,"sendError",async n=>{const{id:r,topic:i,error:a,encodeOpts:c,rpcOpts:u,appLink:f}=n,d=Zp(r,a);let p;const g=f&&typeof(global==null?void 0:global.Linking)<"u";try{const b=g?oo:ri;p=await this.client.core.crypto.encode(i,d,Vn(vt({},c||{}),{encoding:b}))}catch(b){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${i} failed`),b}let y;try{y=await this.client.core.history.get(i,r)}catch(b){throw this.client.logger.error(`sendError() -> history.get(${i}, ${r}) failed`),b}if(g){const b=mh(f,i,p);await global.Linking.openURL(b,this.client.name)}else{const b=y.request.method,v=u||on[b].res;this.client.core.relayer.publish(i,p,v)}await this.client.core.history.resolve(d)}),be(this,"cleanup",async()=>{const n=[],r=[];this.client.session.getAll().forEach(i=>{let a=!1;to(i.expiry)&&(a=!0),this.client.core.crypto.keychain.has(i.topic)||(a=!0),a&&n.push(i.topic)}),this.client.proposal.getAll().forEach(i=>{to(i.expiryTimestamp)&&r.push(i.id)}),await Promise.all([...n.map(i=>this.deleteSession({topic:i})),...r.map(i=>this.deleteProposal(i))])}),be(this,"onProviderMessageEvent",async n=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(n):await this.onRelayMessage(n)}),be(this,"onRelayEventRequest",async n=>{this.requestQueue.queue.push(n),await this.processRequestsQueue()}),be(this,"processRequestsQueue",async()=>{if(this.requestQueue.state===mi.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=mi.active;const n=this.requestQueue.queue.shift();if(n)try{await this.processRequest(n)}catch(r){this.client.logger.warn(r)}}this.requestQueue.state=mi.idle}),be(this,"processRequest",async n=>{const{topic:r,payload:i,attestation:a,transportType:c,encryptedId:u}=n,f=i.method;if(!this.shouldIgnorePairingRequest({topic:r,requestMethod:f}))switch(f){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:r,payload:i,attestation:a,encryptedId:u});case"wc_sessionSettle":return await this.onSessionSettleRequest(r,i);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(r,i);case"wc_sessionExtend":return await this.onSessionExtendRequest(r,i);case"wc_sessionPing":return await this.onSessionPingRequest(r,i);case"wc_sessionDelete":return await this.onSessionDeleteRequest(r,i);case"wc_sessionRequest":return await this.onSessionRequest({topic:r,payload:i,attestation:a,encryptedId:u,transportType:c});case"wc_sessionEvent":return await this.onSessionEventRequest(r,i);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:r,payload:i,attestation:a,encryptedId:u,transportType:c});default:return this.client.logger.info(`Unsupported request method ${f}`)}}),be(this,"onRelayEventResponse",async n=>{const{topic:r,payload:i,transportType:a}=n,c=(await this.client.core.history.get(r,i.id)).request.method;switch(c){case"wc_sessionPropose":return this.onSessionProposeResponse(r,i,a);case"wc_sessionSettle":return this.onSessionSettleResponse(r,i);case"wc_sessionUpdate":return this.onSessionUpdateResponse(r,i);case"wc_sessionExtend":return this.onSessionExtendResponse(r,i);case"wc_sessionPing":return this.onSessionPingResponse(r,i);case"wc_sessionRequest":return this.onSessionRequestResponse(r,i);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(r,i);default:return this.client.logger.info(`Unsupported response method ${c}`)}}),be(this,"onRelayEventUnknownPayload",n=>{const{topic:r}=n,{message:i}=we("MISSING_OR_INVALID",`Decoded payload on topic ${r} is not identifiable as a JSON-RPC request or a response.`);throw new Error(i)}),be(this,"shouldIgnorePairingRequest",n=>{const{topic:r,requestMethod:i}=n,a=this.expectedPairingMethodMap.get(r);return!a||a.includes(i)?!1:!!(a.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)}),be(this,"onSessionProposeRequest",async n=>{const{topic:r,payload:i,attestation:a,encryptedId:c}=n,{params:u,id:f}=i;try{const d=this.client.core.eventClient.getEvent({topic:r});this.client.events.listenerCount("session_proposal")===0&&(console.warn("No listener for session_proposal event"),d?.setError(is.proposal_listener_not_found)),this.isValidConnect(vt({},i.params));const p=u.expiryTimestamp||Yt(on.wc_sessionPropose.req.ttl),g=vt({id:f,pairingTopic:r,expiryTimestamp:p,attestation:a,encryptedId:c},u);await this.setProposal(f,g);const y=await this.getVerifyContext({attestationId:a,hash:Si(JSON.stringify(i)),encryptedId:c,metadata:g.proposer.metadata});d?.addTrace(bi.emit_session_proposal),this.client.events.emit("session_proposal",{id:f,params:g,verifyContext:y})}catch(d){await this.sendError({id:f,topic:r,error:d,rpcOpts:on.wc_sessionPropose.autoReject}),this.client.logger.error(d)}}),be(this,"onSessionProposeResponse",async(n,r,i)=>{const{id:a}=r;if(wi(r)){const{result:c}=r;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:c});const u=this.client.proposal.get(a);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:u});const f=u.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:f});const d=c.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:d});const p=await this.client.core.crypto.generateSharedKey(f,d);this.pendingSessions.set(a,{sessionTopic:p,pairingTopic:n,proposalId:a,publicKey:f});const g=await this.client.core.relayer.subscribe(p,{transportType:i});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:g}),await this.client.core.pairing.activate({topic:n})}else if(Ur(r)){await this.deleteProposal(a);const c=Qe("session_connect",a);if(this.events.listenerCount(c)===0)throw new Error(`emitting ${c} without any listeners, 954`);this.events.emit(c,{error:r.error})}}),be(this,"onSessionSettleRequest",async(n,r)=>{const{id:i,params:a}=r;try{this.isValidSessionSettleRequest(a);const{relay:c,controller:u,expiry:f,namespaces:d,sessionProperties:p,scopedProperties:g,sessionConfig:y}=r.params,b=[...this.pendingSessions.values()].find(S=>S.sessionTopic===n);if(!b)return this.client.logger.error(`Pending session not found for topic ${n}`);const v=this.client.proposal.get(b.proposalId),E=Vn(vt(vt(vt({topic:n,relay:c,expiry:f,namespaces:d,acknowledged:!0,pairingTopic:b.pairingTopic,requiredNamespaces:v.requiredNamespaces,optionalNamespaces:v.optionalNamespaces,controller:u.publicKey,self:{publicKey:b.publicKey,metadata:this.client.metadata},peer:{publicKey:u.publicKey,metadata:u.metadata}},p&&{sessionProperties:p}),g&&{scopedProperties:g}),y&&{sessionConfig:y}),{transportType:wt.relay});await this.client.session.set(E.topic,E),await this.setExpiry(E.topic,E.expiry),await this.client.core.pairing.updateMetadata({topic:b.pairingTopic,metadata:E.peer.metadata}),this.client.events.emit("session_connect",{session:E}),this.events.emit(Qe("session_connect",b.proposalId),{session:E}),this.pendingSessions.delete(b.proposalId),this.deleteProposal(b.proposalId,!1),this.cleanupDuplicatePairings(E),await this.sendResult({id:r.id,topic:n,result:!0})}catch(c){await this.sendError({id:i,topic:n,error:c}),this.client.logger.error(c)}}),be(this,"onSessionSettleResponse",async(n,r)=>{const{id:i}=r;wi(r)?(await this.client.session.update(n,{acknowledged:!0}),this.events.emit(Qe("session_approve",i),{})):Ur(r)&&(await this.client.session.delete(n,_t("USER_DISCONNECTED")),this.events.emit(Qe("session_approve",i),{error:r.error}))}),be(this,"onSessionUpdateRequest",async(n,r)=>{const{params:i,id:a}=r;try{const c=`${n}_session_update`,u=Au.get(c);if(u&&this.isRequestOutOfSync(u,a)){this.client.logger.warn(`Discarding out of sync request - ${a}`),this.sendError({id:a,topic:n,error:_t("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(vt({topic:n},i));try{Au.set(c,a),await this.client.session.update(n,{namespaces:i.namespaces}),await this.sendResult({id:a,topic:n,result:!0})}catch(f){throw Au.delete(c),f}this.client.events.emit("session_update",{id:a,topic:n,params:i})}catch(c){await this.sendError({id:a,topic:n,error:c}),this.client.logger.error(c)}}),be(this,"isRequestOutOfSync",(n,r)=>r.toString().slice(0,-3)<n.toString().slice(0,-3)),be(this,"onSessionUpdateResponse",(n,r)=>{const{id:i}=r,a=Qe("session_update",i);if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners`);wi(r)?this.events.emit(Qe("session_update",i),{}):Ur(r)&&this.events.emit(Qe("session_update",i),{error:r.error})}),be(this,"onSessionExtendRequest",async(n,r)=>{const{id:i}=r;try{this.isValidExtend({topic:n}),await this.setExpiry(n,Yt(Ec)),await this.sendResult({id:i,topic:n,result:!0}),this.client.events.emit("session_extend",{id:i,topic:n})}catch(a){await this.sendError({id:i,topic:n,error:a}),this.client.logger.error(a)}}),be(this,"onSessionExtendResponse",(n,r)=>{const{id:i}=r,a=Qe("session_extend",i);if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners`);wi(r)?this.events.emit(Qe("session_extend",i),{}):Ur(r)&&this.events.emit(Qe("session_extend",i),{error:r.error})}),be(this,"onSessionPingRequest",async(n,r)=>{const{id:i}=r;try{this.isValidPing({topic:n}),await this.sendResult({id:i,topic:n,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:i,topic:n})}catch(a){await this.sendError({id:i,topic:n,error:a}),this.client.logger.error(a)}}),be(this,"onSessionPingResponse",(n,r)=>{const{id:i}=r,a=Qe("session_ping",i);setTimeout(()=>{if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners 2176`);wi(r)?this.events.emit(Qe("session_ping",i),{}):Ur(r)&&this.events.emit(Qe("session_ping",i),{error:r.error})},500)}),be(this,"onSessionDeleteRequest",async(n,r)=>{const{id:i}=r;try{this.isValidDisconnect({topic:n,reason:r.params}),Promise.all([new Promise(a=>{this.client.core.relayer.once(cn.publish,async()=>{a(await this.deleteSession({topic:n,id:i}))})}),this.sendResult({id:i,topic:n,result:!0}),this.cleanupPendingSentRequestsForTopic({topic:n,error:_t("USER_DISCONNECTED")})]).catch(a=>this.client.logger.error(a))}catch(a){this.client.logger.error(a)}}),be(this,"onSessionRequest",async n=>{var r,i,a;const{topic:c,payload:u,attestation:f,encryptedId:d,transportType:p}=n,{id:g,params:y}=u;try{await this.isValidRequest(vt({topic:c},y));const b=this.client.session.get(c),v=await this.getVerifyContext({attestationId:f,hash:Si(JSON.stringify(co("wc_sessionRequest",y,g))),encryptedId:d,metadata:b.peer.metadata,transportType:p}),E={id:g,topic:c,params:y,verifyContext:v};await this.setPendingSessionRequest(E),p===wt.link_mode&&(r=b.peer.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp((i=b.peer.metadata.redirect)==null?void 0:i.universal),(a=this.client.signConfig)!=null&&a.disableRequestQueue?this.emitSessionRequest(E):(this.addSessionRequestToSessionRequestQueue(E),this.processSessionRequestQueue())}catch(b){await this.sendError({id:g,topic:c,error:b}),this.client.logger.error(b)}}),be(this,"onSessionRequestResponse",(n,r)=>{const{id:i}=r,a=Qe("session_request",i);if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners`);wi(r)?this.events.emit(Qe("session_request",i),{result:r.result}):Ur(r)&&this.events.emit(Qe("session_request",i),{error:r.error})}),be(this,"onSessionEventRequest",async(n,r)=>{const{id:i,params:a}=r;try{const c=`${n}_session_event_${a.event.name}`,u=Au.get(c);if(u&&this.isRequestOutOfSync(u,i)){this.client.logger.info(`Discarding out of sync request - ${i}`);return}this.isValidEmit(vt({topic:n},a)),this.client.events.emit("session_event",{id:i,topic:n,params:a}),Au.set(c,i)}catch(c){await this.sendError({id:i,topic:n,error:c}),this.client.logger.error(c)}}),be(this,"onSessionAuthenticateResponse",(n,r)=>{const{id:i}=r;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:n,payload:r}),wi(r)?this.events.emit(Qe("session_request",i),{result:r.result}):Ur(r)&&this.events.emit(Qe("session_request",i),{error:r.error})}),be(this,"onSessionAuthenticateRequest",async n=>{var r;const{topic:i,payload:a,attestation:c,encryptedId:u,transportType:f}=n;try{const{requester:d,authPayload:p,expiryTimestamp:g}=a.params,y=await this.getVerifyContext({attestationId:c,hash:Si(JSON.stringify(a)),encryptedId:u,metadata:d.metadata,transportType:f}),b={requester:d,pairingTopic:i,id:a.id,authPayload:p,verifyContext:y,expiryTimestamp:g};await this.setAuthRequest(a.id,{request:b,pairingTopic:i,transportType:f}),f===wt.link_mode&&(r=d.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp(d.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:i,params:a.params,id:a.id,verifyContext:y})}catch(d){this.client.logger.error(d);const p=a.params.requester.publicKey,g=await this.client.core.crypto.generateKeyPair(),y=this.getAppLinkIfEnabled(a.params.requester.metadata,f),b={type:fs,receiverPublicKey:p,senderPublicKey:g};await this.sendError({id:a.id,topic:i,error:d,encodeOpts:b,rpcOpts:on.wc_sessionAuthenticate.autoReject,appLink:y})}}),be(this,"addSessionRequestToSessionRequestQueue",n=>{this.sessionRequestQueue.queue.push(n)}),be(this,"cleanupAfterResponse",n=>{this.deletePendingSessionRequest(n.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=mi.idle,this.processSessionRequestQueue()},Ee.toMiliseconds(this.requestQueueDelay))}),be(this,"cleanupPendingSentRequestsForTopic",({topic:n,error:r})=>{const i=this.client.core.history.pending;i.length>0&&i.filter(a=>a.topic===n&&a.request.method==="wc_sessionRequest").forEach(a=>{const c=a.request.id,u=Qe("session_request",c);if(this.events.listenerCount(u)===0)throw new Error(`emitting ${u} without any listeners`);this.events.emit(Qe("session_request",a.request.id),{error:r})})}),be(this,"processSessionRequestQueue",()=>{if(this.sessionRequestQueue.state===mi.active){this.client.logger.info("session request queue is already active.");return}const n=this.sessionRequestQueue.queue[0];if(!n){this.client.logger.info("session request queue is empty.");return}try{this.emitSessionRequest(n)}catch(r){this.client.logger.error(r)}}),be(this,"emitSessionRequest",n=>{if(this.emittedSessionRequests.has(n.id)){this.client.logger.warn({id:n.id},`Skipping emitting \`session_request\` event for duplicate request. id: ${n.id}`);return}this.sessionRequestQueue.state=mi.active,this.emittedSessionRequests.add(n.id),this.client.events.emit("session_request",n)}),be(this,"onPairingCreated",n=>{if(n.methods&&this.expectedPairingMethodMap.set(n.topic,n.methods),n.active)return;const r=this.client.proposal.getAll().find(i=>i.pairingTopic===n.topic);r&&this.onSessionProposeRequest({topic:n.topic,payload:co("wc_sessionPropose",Vn(vt({},r),{requiredNamespaces:r.requiredNamespaces,optionalNamespaces:r.optionalNamespaces,relays:r.relays,proposer:r.proposer,sessionProperties:r.sessionProperties,scopedProperties:r.scopedProperties}),r.id),attestation:r.attestation,encryptedId:r.encryptedId})}),be(this,"isValidConnect",async n=>{if(!Kn(n)){const{message:d}=we("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(n)}`);throw new Error(d)}const{pairingTopic:r,requiredNamespaces:i,optionalNamespaces:a,sessionProperties:c,scopedProperties:u,relays:f}=n;if(yn(r)||await this.isValidPairingTopic(r),!fK(f)){const{message:d}=we("MISSING_OR_INVALID",`connect() relays: ${f}`);throw new Error(d)}if(!yn(i)&&Ri(i)!==0){const d="requiredNamespaces are deprecated and are automatically assigned to optionalNamespaces";["fatal","error","silent"].includes(this.client.logger.level)?console.warn(d):this.client.logger.warn(d),this.validateNamespaces(i,"requiredNamespaces")}if(!yn(a)&&Ri(a)!==0&&this.validateNamespaces(a,"optionalNamespaces"),yn(c)||this.validateSessionProps(c,"sessionProperties"),!yn(u)){this.validateSessionProps(u,"scopedProperties");const d=Object.keys(i||{}).concat(Object.keys(a||{}));if(!Object.keys(u).every(p=>d.includes(p.split(":")[0])))throw new Error(`Scoped properties must be a subset of required/optional namespaces, received: ${JSON.stringify(u)}, required/optional namespaces: ${JSON.stringify(d)}`)}}),be(this,"validateNamespaces",(n,r)=>{const i=uK(n,"connect()",r);if(i)throw new Error(i.message)}),be(this,"isValidApprove",async n=>{if(!Kn(n))throw new Error(we("MISSING_OR_INVALID",`approve() params: ${n}`).message);const{id:r,namespaces:i,relayProtocol:a,sessionProperties:c,scopedProperties:u}=n;this.checkRecentlyDeleted(r),await this.isValidProposalId(r);const f=this.client.proposal.get(r),d=x0(i,"approve()");if(d)throw new Error(d.message);const p=MA(f.requiredNamespaces,i,"approve()");if(p)throw new Error(p.message);if(!zt(a,!0)){const{message:g}=we("MISSING_OR_INVALID",`approve() relayProtocol: ${a}`);throw new Error(g)}if(yn(c)||this.validateSessionProps(c,"sessionProperties"),!yn(u)){this.validateSessionProps(u,"scopedProperties");const g=new Set(Object.keys(i));if(!Object.keys(u).every(y=>g.has(y.split(":")[0])))throw new Error(`Scoped properties must be a subset of approved namespaces, received: ${JSON.stringify(u)}, approved namespaces: ${Array.from(g).join(", ")}`)}}),be(this,"isValidReject",async n=>{if(!Kn(n)){const{message:a}=we("MISSING_OR_INVALID",`reject() params: ${n}`);throw new Error(a)}const{id:r,reason:i}=n;if(this.checkRecentlyDeleted(r),await this.isValidProposalId(r),!hK(i)){const{message:a}=we("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(i)}`);throw new Error(a)}}),be(this,"isValidSessionSettleRequest",n=>{if(!Kn(n)){const{message:d}=we("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${n}`);throw new Error(d)}const{relay:r,controller:i,namespaces:a,expiry:c}=n;if(!XC(r)){const{message:d}=we("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(d)}const u=iK(i,"onSessionSettleRequest()");if(u)throw new Error(u.message);const f=x0(a,"onSessionSettleRequest()");if(f)throw new Error(f.message);if(to(c)){const{message:d}=we("EXPIRED","onSessionSettleRequest()");throw new Error(d)}}),be(this,"isValidUpdate",async n=>{if(!Kn(n)){const{message:f}=we("MISSING_OR_INVALID",`update() params: ${n}`);throw new Error(f)}const{topic:r,namespaces:i}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const a=this.client.session.get(r),c=x0(i,"update()");if(c)throw new Error(c.message);const u=MA(a.requiredNamespaces,i,"update()");if(u)throw new Error(u.message)}),be(this,"isValidExtend",async n=>{if(!Kn(n)){const{message:i}=we("MISSING_OR_INVALID",`extend() params: ${n}`);throw new Error(i)}const{topic:r}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r)}),be(this,"isValidRequest",async n=>{if(!Kn(n)){const{message:f}=we("MISSING_OR_INVALID",`request() params: ${n}`);throw new Error(f)}const{topic:r,request:i,chainId:a,expiry:c}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const{namespaces:u}=this.client.session.get(r);if(!kA(u,a)){const{message:f}=we("MISSING_OR_INVALID",`request() chainId: ${a}`);throw new Error(f)}if(!pK(i)){const{message:f}=we("MISSING_OR_INVALID",`request() ${JSON.stringify(i)}`);throw new Error(f)}if(!yK(u,a,i.method)){const{message:f}=we("MISSING_OR_INVALID",`request() method: ${i.method}`);throw new Error(f)}if(c&&!EK(c,U0)){const{message:f}=we("MISSING_OR_INVALID",`request() expiry: ${c}. Expiry must be a number (in seconds) between ${U0.min} and ${U0.max}`);throw new Error(f)}}),be(this,"isValidRespond",async n=>{var r;if(!Kn(n)){const{message:c}=we("MISSING_OR_INVALID",`respond() params: ${n}`);throw new Error(c)}const{topic:i,response:a}=n;try{await this.isValidSessionTopic(i)}catch(c){throw(r=n?.response)!=null&&r.id&&this.cleanupAfterResponse(n),c}if(!gK(a)){const{message:c}=we("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(a)}`);throw new Error(c)}}),be(this,"isValidPing",async n=>{if(!Kn(n)){const{message:i}=we("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(i)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),be(this,"isValidEmit",async n=>{if(!Kn(n)){const{message:u}=we("MISSING_OR_INVALID",`emit() params: ${n}`);throw new Error(u)}const{topic:r,event:i,chainId:a}=n;await this.isValidSessionTopic(r);const{namespaces:c}=this.client.session.get(r);if(!kA(c,a)){const{message:u}=we("MISSING_OR_INVALID",`emit() chainId: ${a}`);throw new Error(u)}if(!mK(i)){const{message:u}=we("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw new Error(u)}if(!bK(c,a,i.name)){const{message:u}=we("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw new Error(u)}}),be(this,"isValidDisconnect",async n=>{if(!Kn(n)){const{message:i}=we("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(i)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),be(this,"isValidAuthenticate",n=>{const{chains:r,uri:i,domain:a,nonce:c}=n;if(!Array.isArray(r)||r.length===0)throw new Error("chains is required and must be a non-empty array");if(!zt(i,!1))throw new Error("uri is required parameter");if(!zt(a,!1))throw new Error("domain is required parameter");if(!zt(c,!1))throw new Error("nonce is required parameter");if([...new Set(r.map(f=>Vc(f).namespace))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:u}=Vc(r[0]);if(u!=="eip155")throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")}),be(this,"getVerifyContext",async n=>{const{attestationId:r,hash:i,encryptedId:a,metadata:c,transportType:u}=n,f={verified:{verifyUrl:c.verifyUrl||Yu,validation:"UNKNOWN",origin:c.url||""}};try{if(u===wt.link_mode){const p=this.getAppLinkIfEnabled(c,u);return f.verified.validation=p&&new URL(p).origin===new URL(c.url).origin?"VALID":"INVALID",f}const d=await this.client.core.verify.resolve({attestationId:r,hash:i,encryptedId:a,verifyUrl:c.verifyUrl});d&&(f.verified.origin=d.origin,f.verified.isScam=d.isScam,f.verified.validation=d.origin===new URL(c.url).origin?"VALID":"INVALID")}catch(d){this.client.logger.warn(d)}return this.client.logger.debug(`Verify context: ${JSON.stringify(f)}`),f}),be(this,"validateSessionProps",(n,r)=>{Object.values(n).forEach((i,a)=>{if(i==null){const{message:c}=we("MISSING_OR_INVALID",`${r} must contain an existing value for each key. Received: ${i} for key ${Object.keys(n)[a]}`);throw new Error(c)}})}),be(this,"getPendingAuthRequest",n=>{const r=this.client.auth.requests.get(n);return typeof r=="object"?r:void 0}),be(this,"addToRecentlyDeleted",(n,r)=>{if(this.recentlyDeletedMap.set(n,r),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let i=0;const a=this.recentlyDeletedLimit/2;for(const c of this.recentlyDeletedMap.keys()){if(i++>=a)break;this.recentlyDeletedMap.delete(c)}}}),be(this,"checkRecentlyDeleted",n=>{const r=this.recentlyDeletedMap.get(n);if(r){const{message:i}=we("MISSING_OR_INVALID",`Record was recently deleted - ${r}: ${n}`);throw new Error(i)}}),be(this,"isLinkModeEnabled",(n,r)=>{var i,a,c,u,f,d,p,g,y;return!n||r!==wt.link_mode?!1:((a=(i=this.client.metadata)==null?void 0:i.redirect)==null?void 0:a.linkMode)===!0&&((u=(c=this.client.metadata)==null?void 0:c.redirect)==null?void 0:u.universal)!==void 0&&((d=(f=this.client.metadata)==null?void 0:f.redirect)==null?void 0:d.universal)!==""&&((p=n?.redirect)==null?void 0:p.universal)!==void 0&&((g=n?.redirect)==null?void 0:g.universal)!==""&&((y=n?.redirect)==null?void 0:y.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(n.redirect.universal)&&typeof(global==null?void 0:global.Linking)<"u"}),be(this,"getAppLinkIfEnabled",(n,r)=>{var i;return this.isLinkModeEnabled(n,r)?(i=n?.redirect)==null?void 0:i.universal:void 0}),be(this,"handleLinkModeMessage",({url:n})=>{if(!n||!n.includes("wc_ev")||!n.includes("topic"))return;const r=Zx(n,"topic")||"",i=decodeURIComponent(Zx(n,"wc_ev")||""),a=this.client.session.keys.includes(r);a&&this.client.session.update(r,{transportType:wt.link_mode}),this.client.core.dispatchEnvelope({topic:r,message:i,sessionExists:a})}),be(this,"registerLinkModeListeners",async()=>{var n;if(rw()||yo()&&(n=this.client.metadata.redirect)!=null&&n.linkMode){const r=global==null?void 0:global.Linking;if(typeof r<"u"){r.addEventListener("url",this.handleLinkModeMessage,this.client.name);const i=await r.getInitialURL();i&&setTimeout(()=>{this.handleLinkModeMessage({url:i})},50)}}}),be(this,"getTVFParams",(n,r,i)=>{var a,c,u;if(!((a=r.request)!=null&&a.method))return{};const f={correlationId:n,rpcMethods:[r.request.method],chainId:r.chainId};try{const d=this.extractTxHashesFromResult(r.request,i);f.txHashes=d,f.contractAddresses=this.isValidContractData(r.request.params)?[(u=(c=r.request.params)==null?void 0:c[0])==null?void 0:u.to]:[]}catch(d){this.client.logger.warn("Error getting TVF params",d)}return f}),be(this,"isValidContractData",n=>{var r;if(!n)return!1;try{const i=n?.data||((r=n?.[0])==null?void 0:r.data);if(!i.startsWith("0x"))return!1;const a=i.slice(2);return/^[0-9a-fA-F]*$/.test(a)?a.length%2===0:!1}catch{}return!1}),be(this,"extractTxHashesFromResult",(n,r)=>{var i;try{if(!r)return[];const a=n.method,c=bJ[a];if(a==="sui_signTransaction")return[FF(r.transactionBytes)];if(a==="near_signTransaction")return[sA(r)];if(a==="near_signTransactions")return r.map(f=>sA(f));if(a==="xrpl_signTransactionFor"||a==="xrpl_signTransaction")return[(i=r.tx_json)==null?void 0:i.hash];if(a==="polkadot_signTransaction")return[UK({transaction:n.params.transactionPayload,signature:r.signature})];if(a==="algo_signTxn")return ds(r)?r.map(f=>oA(f)):[oA(r)];if(a==="cosmos_signDirect")return[GF(r)];if(typeof r=="string")return[r];const u=r[c.key];if(ds(u))return a==="solana_signAllTransactions"?u.map(f=>HF(f)):u;if(typeof u=="string")return[u]}catch(a){this.client.logger.warn("Error extracting tx hashes from result",a)}return[]})}async processPendingMessageEvents(){try{const t=this.client.session.keys,n=this.client.core.relayer.messages.getWithoutAck(t);for(const[r,i]of Object.entries(n))for(const a of i)try{await this.onProviderMessageEvent({topic:r,message:a,publishedAt:Date.now()})}catch{this.client.logger.warn(`Error processing pending message event for topic: ${r}, message: ${a}`)}}catch(t){this.client.logger.warn("processPendingMessageEvents failed",t)}}isInitialized(){if(!this.initialized){const{message:t}=we("NOT_INITIALIZED",this.name);throw new Error(t)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(cn.message,t=>{this.onProviderMessageEvent(t)})}async onRelayMessage(t){const{topic:n,message:r,attestation:i,transportType:a}=t,{publicKey:c}=this.client.auth.authKeys.keys.includes(Kh)?this.client.auth.authKeys.get(Kh):{publicKey:void 0};try{const u=await this.client.core.crypto.decode(n,r,{receiverPublicKey:c,encoding:a===wt.link_mode?oo:ri});_w(u)?(this.client.core.history.set(n,u),await this.onRelayEventRequest({topic:n,payload:u,attestation:i,transportType:a,encryptedId:Si(r)})):Qp(u)?(await this.client.core.history.resolve(u),await this.onRelayEventResponse({topic:n,payload:u,transportType:a}),this.client.core.history.delete(n,u.id)):await this.onRelayEventUnknownPayload({topic:n,payload:u,transportType:a}),await this.client.core.relayer.messages.ack(n,r)}catch(u){this.client.logger.error(u)}}registerExpirerEvents(){this.client.core.expirer.on(Pr.expired,async t=>{const{topic:n,id:r}=iC(t.target);if(r&&this.client.pendingRequest.keys.includes(r))return await this.deletePendingSessionRequest(r,we("EXPIRED"),!0);if(r&&this.client.auth.requests.keys.includes(r))return await this.deletePendingAuthRequest(r,we("EXPIRED"),!0);n?this.client.session.keys.includes(n)&&(await this.deleteSession({topic:n,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:n})):r&&(await this.deleteProposal(r,!0),this.client.events.emit("proposal_expire",{id:r}))})}registerPairingEvents(){this.client.core.pairing.events.on(Yo.create,t=>this.onPairingCreated(t)),this.client.core.pairing.events.on(Yo.delete,t=>{this.addToRecentlyDeleted(t.topic,"pairing")})}isValidPairingTopic(t){if(!zt(t,!1)){const{message:n}=we("MISSING_OR_INVALID",`pairing topic should be a string: ${t}`);throw new Error(n)}if(!this.client.core.pairing.pairings.keys.includes(t)){const{message:n}=we("NO_MATCHING_KEY",`pairing topic doesn't exist: ${t}`);throw new Error(n)}if(to(this.client.core.pairing.pairings.get(t).expiry)){const{message:n}=we("EXPIRED",`pairing topic: ${t}`);throw new Error(n)}}async isValidSessionTopic(t){if(!zt(t,!1)){const{message:n}=we("MISSING_OR_INVALID",`session topic should be a string: ${t}`);throw new Error(n)}if(this.checkRecentlyDeleted(t),!this.client.session.keys.includes(t)){const{message:n}=we("NO_MATCHING_KEY",`session topic doesn't exist: ${t}`);throw new Error(n)}if(to(this.client.session.get(t).expiry)){await this.deleteSession({topic:t});const{message:n}=we("EXPIRED",`session topic: ${t}`);throw new Error(n)}if(!this.client.core.crypto.keychain.has(t)){const{message:n}=we("MISSING_OR_INVALID",`session topic does not exist in keychain: ${t}`);throw await this.deleteSession({topic:t}),new Error(n)}}async isValidSessionOrPairingTopic(t){if(this.checkRecentlyDeleted(t),this.client.session.keys.includes(t))await this.isValidSessionTopic(t);else if(this.client.core.pairing.pairings.keys.includes(t))this.isValidPairingTopic(t);else if(zt(t,!1)){const{message:n}=we("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${t}`);throw new Error(n)}else{const{message:n}=we("MISSING_OR_INVALID",`session or pairing topic should be a string: ${t}`);throw new Error(n)}}async isValidProposalId(t){if(!dK(t)){const{message:n}=we("MISSING_OR_INVALID",`proposal id should be a number: ${t}`);throw new Error(n)}if(!this.client.proposal.keys.includes(t)){const{message:n}=we("NO_MATCHING_KEY",`proposal id doesn't exist: ${t}`);throw new Error(n)}if(to(this.client.proposal.get(t).expiryTimestamp)){await this.deleteProposal(t);const{message:n}=we("EXPIRED",`proposal id: ${t}`);throw new Error(n)}}}class NJ extends _a{constructor(t,n){super(t,n,gJ,xw),this.core=t,this.logger=n}}let $J=class extends _a{constructor(t,n){super(t,n,mJ,xw),this.core=t,this.logger=n}};class BJ extends _a{constructor(t,n){super(t,n,vJ,xw,r=>r.id),this.core=t,this.logger=n}}class PJ extends _a{constructor(t,n){super(t,n,_J,eg,()=>Kh),this.core=t,this.logger=n}}class UJ extends _a{constructor(t,n){super(t,n,xJ,eg),this.core=t,this.logger=n}}class kJ extends _a{constructor(t,n){super(t,n,AJ,eg,r=>r.id),this.core=t,this.logger=n}}var MJ=Object.defineProperty,jJ=(e,t,n)=>t in e?MJ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,k0=(e,t,n)=>jJ(e,typeof t!="symbol"?t+"":t,n);class LJ{constructor(t,n){this.core=t,this.logger=n,k0(this,"authKeys"),k0(this,"pairingTopics"),k0(this,"requests"),this.authKeys=new PJ(this.core,this.logger),this.pairingTopics=new UJ(this.core,this.logger),this.requests=new kJ(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}var zJ=Object.defineProperty,qJ=(e,t,n)=>t in e?zJ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,qe=(e,t,n)=>qJ(e,typeof t!="symbol"?t+"":t,n);let HJ=class UI extends aY{constructor(t){super(t),qe(this,"protocol",$I),qe(this,"version",BI),qe(this,"name",P0.name),qe(this,"metadata"),qe(this,"core"),qe(this,"logger"),qe(this,"events",new tr.EventEmitter),qe(this,"engine"),qe(this,"session"),qe(this,"proposal"),qe(this,"pendingRequest"),qe(this,"auth"),qe(this,"signConfig"),qe(this,"on",(r,i)=>this.events.on(r,i)),qe(this,"once",(r,i)=>this.events.once(r,i)),qe(this,"off",(r,i)=>this.events.off(r,i)),qe(this,"removeListener",(r,i)=>this.events.removeListener(r,i)),qe(this,"removeAllListeners",r=>this.events.removeAllListeners(r)),qe(this,"connect",async r=>{try{return await this.engine.connect(r)}catch(i){throw this.logger.error(i.message),i}}),qe(this,"pair",async r=>{try{return await this.engine.pair(r)}catch(i){throw this.logger.error(i.message),i}}),qe(this,"approve",async r=>{try{return await this.engine.approve(r)}catch(i){throw this.logger.error(i.message),i}}),qe(this,"reject",async r=>{try{return await this.engine.reject(r)}catch(i){throw this.logger.error(i.message),i}}),qe(this,"update",async r=>{try{return await this.engine.update(r)}catch(i){throw this.logger.error(i.message),i}}),qe(this,"extend",async r=>{try{return await this.engine.extend(r)}catch(i){throw this.logger.error(i.message),i}}),qe(this,"request",async r=>{try{return await this.engine.request(r)}catch(i){throw this.logger.error(i.message),i}}),qe(this,"respond",async r=>{try{return await this.engine.respond(r)}catch(i){throw this.logger.error(i.message),i}}),qe(this,"ping",async r=>{try{return await this.engine.ping(r)}catch(i){throw this.logger.error(i.message),i}}),qe(this,"emit",async r=>{try{return await this.engine.emit(r)}catch(i){throw this.logger.error(i.message),i}}),qe(this,"disconnect",async r=>{try{return await this.engine.disconnect(r)}catch(i){throw this.logger.error(i.message),i}}),qe(this,"find",r=>{try{return this.engine.find(r)}catch(i){throw this.logger.error(i.message),i}}),qe(this,"getPendingSessionRequests",()=>{try{return this.engine.getPendingSessionRequests()}catch(r){throw this.logger.error(r.message),r}}),qe(this,"authenticate",async(r,i)=>{try{return await this.engine.authenticate(r,i)}catch(a){throw this.logger.error(a.message),a}}),qe(this,"formatAuthMessage",r=>{try{return this.engine.formatAuthMessage(r)}catch(i){throw this.logger.error(i.message),i}}),qe(this,"approveSessionAuthenticate",async r=>{try{return await this.engine.approveSessionAuthenticate(r)}catch(i){throw this.logger.error(i.message),i}}),qe(this,"rejectSessionAuthenticate",async r=>{try{return await this.engine.rejectSessionAuthenticate(r)}catch(i){throw this.logger.error(i.message),i}}),this.name=t?.name||P0.name,this.metadata=PH(t?.metadata),this.signConfig=t?.signConfig;const n=typeof t?.logger<"u"&&typeof t?.logger!="string"?t.logger:Uf(Yp({level:t?.logger||P0.logger}));this.core=t?.core||new pJ(t),this.logger=kn(n,this.name),this.session=new $J(this.core,this.logger),this.proposal=new NJ(this.core,this.logger),this.pendingRequest=new BJ(this.core,this.logger),this.engine=new IJ(this),this.auth=new LJ(this.core,this.logger)}static async init(t){const n=new UI(t);return await n.initialize(),n}get context(){return ir(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success")}catch(t){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(t.message),t}}};var Eh={exports:{}},jR;function FJ(){return jR||(jR=1,function(e,t){var n=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof Xn<"u"&&Xn,r=function(){function a(){this.fetch=!1,this.DOMException=n.DOMException}return a.prototype=n,new a}();(function(a){(function(c){var u=typeof a<"u"&&a||typeof self<"u"&&self||typeof Xn<"u"&&Xn||{},f={searchParams:"URLSearchParams"in u,iterable:"Symbol"in u&&"iterator"in Symbol,blob:"FileReader"in u&&"Blob"in u&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in u,arrayBuffer:"ArrayBuffer"in u};function d(D){return D&&DataView.prototype.isPrototypeOf(D)}if(f.arrayBuffer)var p=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],g=ArrayBuffer.isView||function(D){return D&&p.indexOf(Object.prototype.toString.call(D))>-1};function y(D){if(typeof D!="string"&&(D=String(D)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(D)||D==="")throw new TypeError('Invalid character in header field name: "'+D+'"');return D.toLowerCase()}function b(D){return typeof D!="string"&&(D=String(D)),D}function v(D){var R={next:function(){var L=D.shift();return{done:L===void 0,value:L}}};return f.iterable&&(R[Symbol.iterator]=function(){return R}),R}function E(D){this.map={},D instanceof E?D.forEach(function(R,L){this.append(L,R)},this):Array.isArray(D)?D.forEach(function(R){if(R.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+R.length);this.append(R[0],R[1])},this):D&&Object.getOwnPropertyNames(D).forEach(function(R){this.append(R,D[R])},this)}E.prototype.append=function(D,R){D=y(D),R=b(R);var L=this.map[D];this.map[D]=L?L+", "+R:R},E.prototype.delete=function(D){delete this.map[y(D)]},E.prototype.get=function(D){return D=y(D),this.has(D)?this.map[D]:null},E.prototype.has=function(D){return this.map.hasOwnProperty(y(D))},E.prototype.set=function(D,R){this.map[y(D)]=b(R)},E.prototype.forEach=function(D,R){for(var L in this.map)this.map.hasOwnProperty(L)&&D.call(R,this.map[L],L,this)},E.prototype.keys=function(){var D=[];return this.forEach(function(R,L){D.push(L)}),v(D)},E.prototype.values=function(){var D=[];return this.forEach(function(R){D.push(R)}),v(D)},E.prototype.entries=function(){var D=[];return this.forEach(function(R,L){D.push([L,R])}),v(D)},f.iterable&&(E.prototype[Symbol.iterator]=E.prototype.entries);function S(D){if(!D._noBody){if(D.bodyUsed)return Promise.reject(new TypeError("Already read"));D.bodyUsed=!0}}function _(D){return new Promise(function(R,L){D.onload=function(){R(D.result)},D.onerror=function(){L(D.error)}})}function T(D){var R=new FileReader,L=_(R);return R.readAsArrayBuffer(D),L}function O(D){var R=new FileReader,L=_(R),V=/charset=([A-Za-z0-9_-]+)/.exec(D.type),X=V?V[1]:"utf-8";return R.readAsText(D,X),L}function $(D){for(var R=new Uint8Array(D),L=new Array(R.length),V=0;V<R.length;V++)L[V]=String.fromCharCode(R[V]);return L.join("")}function I(D){if(D.slice)return D.slice(0);var R=new Uint8Array(D.byteLength);return R.set(new Uint8Array(D)),R.buffer}function B(){return this.bodyUsed=!1,this._initBody=function(D){this.bodyUsed=this.bodyUsed,this._bodyInit=D,D?typeof D=="string"?this._bodyText=D:f.blob&&Blob.prototype.isPrototypeOf(D)?this._bodyBlob=D:f.formData&&FormData.prototype.isPrototypeOf(D)?this._bodyFormData=D:f.searchParams&&URLSearchParams.prototype.isPrototypeOf(D)?this._bodyText=D.toString():f.arrayBuffer&&f.blob&&d(D)?(this._bodyArrayBuffer=I(D.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):f.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(D)||g(D))?this._bodyArrayBuffer=I(D):this._bodyText=D=Object.prototype.toString.call(D):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof D=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):f.searchParams&&URLSearchParams.prototype.isPrototypeOf(D)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},f.blob&&(this.blob=function(){var D=S(this);if(D)return D;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var D=S(this);return D||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(f.blob)return this.blob().then(T);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var D=S(this);if(D)return D;if(this._bodyBlob)return O(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve($(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},f.formData&&(this.formData=function(){return this.text().then(W)}),this.json=function(){return this.text().then(JSON.parse)},this}var z=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function q(D){var R=D.toUpperCase();return z.indexOf(R)>-1?R:D}function k(D,R){if(!(this instanceof k))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');R=R||{};var L=R.body;if(D instanceof k){if(D.bodyUsed)throw new TypeError("Already read");this.url=D.url,this.credentials=D.credentials,R.headers||(this.headers=new E(D.headers)),this.method=D.method,this.mode=D.mode,this.signal=D.signal,!L&&D._bodyInit!=null&&(L=D._bodyInit,D.bodyUsed=!0)}else this.url=String(D);if(this.credentials=R.credentials||this.credentials||"same-origin",(R.headers||!this.headers)&&(this.headers=new E(R.headers)),this.method=q(R.method||this.method||"GET"),this.mode=R.mode||this.mode||null,this.signal=R.signal||this.signal||function(){if("AbortController"in u){var N=new AbortController;return N.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&L)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(L),(this.method==="GET"||this.method==="HEAD")&&(R.cache==="no-store"||R.cache==="no-cache")){var V=/([?&])_=[^&]*/;if(V.test(this.url))this.url=this.url.replace(V,"$1_="+new Date().getTime());else{var X=/\?/;this.url+=(X.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}k.prototype.clone=function(){return new k(this,{body:this._bodyInit})};function W(D){var R=new FormData;return D.trim().split("&").forEach(function(L){if(L){var V=L.split("="),X=V.shift().replace(/\+/g," "),N=V.join("=").replace(/\+/g," ");R.append(decodeURIComponent(X),decodeURIComponent(N))}}),R}function F(D){var R=new E,L=D.replace(/\r?\n[\t ]+/g," ");return L.split("\r").map(function(V){return V.indexOf(`
`)===0?V.substr(1,V.length):V}).forEach(function(V){var X=V.split(":"),N=X.shift().trim();if(N){var K=X.join(":").trim();try{R.append(N,K)}catch(te){console.warn("Response "+te.message)}}}),R}B.call(k.prototype);function G(D,R){if(!(this instanceof G))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(R||(R={}),this.type="default",this.status=R.status===void 0?200:R.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=R.statusText===void 0?"":""+R.statusText,this.headers=new E(R.headers),this.url=R.url||"",this._initBody(D)}B.call(G.prototype),G.prototype.clone=function(){return new G(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new E(this.headers),url:this.url})},G.error=function(){var D=new G(null,{status:200,statusText:""});return D.ok=!1,D.status=0,D.type="error",D};var ne=[301,302,303,307,308];G.redirect=function(D,R){if(ne.indexOf(R)===-1)throw new RangeError("Invalid status code");return new G(null,{status:R,headers:{location:D}})},c.DOMException=u.DOMException;try{new c.DOMException}catch{c.DOMException=function(R,L){this.message=R,this.name=L;var V=Error(R);this.stack=V.stack},c.DOMException.prototype=Object.create(Error.prototype),c.DOMException.prototype.constructor=c.DOMException}function ee(D,R){return new Promise(function(L,V){var X=new k(D,R);if(X.signal&&X.signal.aborted)return V(new c.DOMException("Aborted","AbortError"));var N=new XMLHttpRequest;function K(){N.abort()}N.onload=function(){var ie={statusText:N.statusText,headers:F(N.getAllResponseHeaders()||"")};X.url.indexOf("file://")===0&&(N.status<200||N.status>599)?ie.status=200:ie.status=N.status,ie.url="responseURL"in N?N.responseURL:ie.headers.get("X-Request-URL");var fe="response"in N?N.response:N.responseText;setTimeout(function(){L(new G(fe,ie))},0)},N.onerror=function(){setTimeout(function(){V(new TypeError("Network request failed"))},0)},N.ontimeout=function(){setTimeout(function(){V(new TypeError("Network request timed out"))},0)},N.onabort=function(){setTimeout(function(){V(new c.DOMException("Aborted","AbortError"))},0)};function te(ie){try{return ie===""&&u.location.href?u.location.href:ie}catch{return ie}}if(N.open(X.method,te(X.url),!0),X.credentials==="include"?N.withCredentials=!0:X.credentials==="omit"&&(N.withCredentials=!1),"responseType"in N&&(f.blob?N.responseType="blob":f.arrayBuffer&&(N.responseType="arraybuffer")),R&&typeof R.headers=="object"&&!(R.headers instanceof E||u.Headers&&R.headers instanceof u.Headers)){var se=[];Object.getOwnPropertyNames(R.headers).forEach(function(ie){se.push(y(ie)),N.setRequestHeader(ie,b(R.headers[ie]))}),X.headers.forEach(function(ie,fe){se.indexOf(fe)===-1&&N.setRequestHeader(fe,ie)})}else X.headers.forEach(function(ie,fe){N.setRequestHeader(fe,ie)});X.signal&&(X.signal.addEventListener("abort",K),N.onreadystatechange=function(){N.readyState===4&&X.signal.removeEventListener("abort",K)}),N.send(typeof X._bodyInit>"u"?null:X._bodyInit)})}return ee.polyfill=!0,u.fetch||(u.fetch=ee,u.Headers=E,u.Request=k,u.Response=G),c.Headers=E,c.Request=k,c.Response=G,c.fetch=ee,Object.defineProperty(c,"__esModule",{value:!0}),c})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var i=n.fetch?n:r;t=i.fetch,t.default=i.fetch,t.fetch=i.fetch,t.Headers=i.Headers,t.Request=i.Request,t.Response=i.Response,e.exports=t}(Eh,Eh.exports)),Eh.exports}var VJ=FJ();const LR=vs(VJ);var GJ=Object.defineProperty,KJ=Object.defineProperties,WJ=Object.getOwnPropertyDescriptors,zR=Object.getOwnPropertySymbols,YJ=Object.prototype.hasOwnProperty,XJ=Object.prototype.propertyIsEnumerable,qR=(e,t,n)=>t in e?GJ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,HR=(e,t)=>{for(var n in t||(t={}))YJ.call(t,n)&&qR(e,n,t[n]);if(zR)for(var n of zR(t))XJ.call(t,n)&&qR(e,n,t[n]);return e},FR=(e,t)=>KJ(e,WJ(t));const ZJ={Accept:"application/json","Content-Type":"application/json"},QJ="POST",VR={headers:ZJ,method:QJ},GR=10;let oi=class{constructor(t,n=!1){if(this.url=t,this.disableProviderPing=n,this.events=new tr.EventEmitter,this.isAvailable=!1,this.registering=!1,!cR(t))throw new Error(`Provided URL is not compatible with HTTP connection: ${t}`);this.url=t,this.disableProviderPing=n}get connected(){return this.isAvailable}get connecting(){return this.registering}on(t,n){this.events.on(t,n)}once(t,n){this.events.once(t,n)}off(t,n){this.events.off(t,n)}removeListener(t,n){this.events.removeListener(t,n)}async open(t=this.url){await this.register(t)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(t){this.isAvailable||await this.register();try{const n=ms(t),r=await(await LR(this.url,FR(HR({},VR),{body:n}))).json();this.onPayload({data:r})}catch(n){this.onError(t.id,n)}}async register(t=this.url){if(!cR(t))throw new Error(`Provided URL is not compatible with HTTP connection: ${t}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((r,i)=>{this.events.once("register_error",a=>{this.resetMaxListeners(),i(a)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return i(new Error("HTTP connection is missing or invalid"));r()})})}this.url=t,this.registering=!0;try{if(!this.disableProviderPing){const n=ms({id:1,jsonrpc:"2.0",method:"test",params:[]});await LR(t,FR(HR({},VR),{body:n}))}this.onOpen()}catch(n){const r=this.parseError(n);throw this.events.emit("register_error",r),this.onClose(),r}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(t){if(typeof t.data>"u")return;const n=typeof t.data=="string"?ca(t.data):t.data;this.events.emit("payload",n)}onError(t,n){const r=this.parseError(n),i=r.message||r.toString(),a=Zp(t,i);this.events.emit("payload",a)}parseError(t,n=this.url){return hI(t,n,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>GR&&this.events.setMaxListeners(GR)}};const KR="error",JJ="wss://relay.walletconnect.org",eee="wc",tee="universal_provider",Sh=`${eee}@2:${tee}:`,kI="https://rpc.walletconnect.org/v1/",Mc="generic",nee=`${kI}bundler`,Fr={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};function Aw(e){return e==null||typeof e!="object"&&typeof e!="function"}function MI(e){return Object.getOwnPropertySymbols(e).filter(t=>Object.prototype.propertyIsEnumerable.call(e,t))}function jI(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const ree="[object RegExp]",LI="[object String]",zI="[object Number]",qI="[object Boolean]",HI="[object Arguments]",iee="[object Symbol]",see="[object Date]",oee="[object Map]",aee="[object Set]",cee="[object Array]",lee="[object ArrayBuffer]",uee="[object Object]",fee="[object DataView]",dee="[object Uint8Array]",hee="[object Uint8ClampedArray]",pee="[object Uint16Array]",gee="[object Uint32Array]",mee="[object Int8Array]",yee="[object Int16Array]",bee="[object Int32Array]",vee="[object Float32Array]",wee="[object Float64Array]";function Rw(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Eee(e,t){return zc(e,void 0,e,new Map,t)}function zc(e,t,n,r=new Map,i=void 0){const a=i?.(e,t,n,r);if(a!=null)return a;if(Aw(e))return e;if(r.has(e))return r.get(e);if(Array.isArray(e)){const c=new Array(e.length);r.set(e,c);for(let u=0;u<e.length;u++)c[u]=zc(e[u],u,n,r,i);return Object.hasOwn(e,"index")&&(c.index=e.index),Object.hasOwn(e,"input")&&(c.input=e.input),c}if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp){const c=new RegExp(e.source,e.flags);return c.lastIndex=e.lastIndex,c}if(e instanceof Map){const c=new Map;r.set(e,c);for(const[u,f]of e)c.set(u,zc(f,u,n,r,i));return c}if(e instanceof Set){const c=new Set;r.set(e,c);for(const u of e)c.add(zc(u,void 0,n,r,i));return c}if(typeof Buffer<"u"&&Buffer.isBuffer(e))return e.subarray();if(Rw(e)){const c=new(Object.getPrototypeOf(e)).constructor(e.length);r.set(e,c);for(let u=0;u<e.length;u++)c[u]=zc(e[u],u,n,r,i);return c}if(e instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&e instanceof SharedArrayBuffer)return e.slice(0);if(e instanceof DataView){const c=new DataView(e.buffer.slice(0),e.byteOffset,e.byteLength);return r.set(e,c),Xo(c,e,n,r,i),c}if(typeof File<"u"&&e instanceof File){const c=new File([e],e.name,{type:e.type});return r.set(e,c),Xo(c,e,n,r,i),c}if(e instanceof Blob){const c=new Blob([e],{type:e.type});return r.set(e,c),Xo(c,e,n,r,i),c}if(e instanceof Error){const c=new e.constructor;return r.set(e,c),c.message=e.message,c.name=e.name,c.stack=e.stack,c.cause=e.cause,Xo(c,e,n,r,i),c}if(typeof e=="object"&&See(e)){const c=Object.create(Object.getPrototypeOf(e));return r.set(e,c),Xo(c,e,n,r,i),c}return e}function Xo(e,t,n=e,r,i){const a=[...Object.keys(t),...MI(t)];for(let c=0;c<a.length;c++){const u=a[c],f=Object.getOwnPropertyDescriptor(e,u);(f==null||f.writable)&&(e[u]=zc(t[u],u,n,r,i))}}function See(e){switch(jI(e)){case HI:case cee:case lee:case fee:case qI:case see:case vee:case wee:case mee:case yee:case bee:case oee:case zI:case uee:case ree:case aee:case LI:case iee:case dee:case hee:case pee:case gee:return!0;default:return!1}}function _ee(e,t){return Eee(e,(n,r,i,a)=>{if(typeof e=="object")switch(Object.prototype.toString.call(e)){case zI:case LI:case qI:{const c=new e.constructor(e?.valueOf());return Xo(c,e),c}case HI:{const c={};return Xo(c,e),c.length=e.length,c[Symbol.iterator]=e[Symbol.iterator],c}default:return}})}function WR(e){return _ee(e)}function YR(e){return e!==null&&typeof e=="object"&&jI(e)==="[object Arguments]"}function XR(e){return typeof e=="object"&&e!==null}function xee(){}function Aee(e){return Rw(e)}function Ree(e){if(typeof e!="object"||e==null)return!1;if(Object.getPrototypeOf(e)===null)return!0;if(Object.prototype.toString.call(e)!=="[object Object]"){const n=e[Symbol.toStringTag];return n==null||!Object.getOwnPropertyDescriptor(e,Symbol.toStringTag)?.writable?!1:e.toString()===`[object ${n}]`}let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function Oee(e){if(Aw(e))return e;if(Array.isArray(e)||Rw(e)||e instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&e instanceof SharedArrayBuffer)return e.slice(0);const t=Object.getPrototypeOf(e),n=t.constructor;if(e instanceof Date||e instanceof Map||e instanceof Set)return new n(e);if(e instanceof RegExp){const r=new n(e);return r.lastIndex=e.lastIndex,r}if(e instanceof DataView)return new n(e.buffer.slice(0));if(e instanceof Error){const r=new n(e.message);return r.stack=e.stack,r.name=e.name,r.cause=e.cause,r}if(typeof File<"u"&&e instanceof File)return new n([e],e.name,{type:e.type,lastModified:e.lastModified});if(typeof e=="object"){const r=Object.create(t);return Object.assign(r,e)}return e}function Tee(e,...t){const n=t.slice(0,-1),r=t[t.length-1];let i=e;for(let a=0;a<n.length;a++){const c=n[a];i=uv(i,c,r,new Map)}return i}function uv(e,t,n,r){if(Aw(e)&&(e=Object(e)),t==null||typeof t!="object")return e;if(r.has(t))return Oee(r.get(t));if(r.set(t,e),Array.isArray(t)){t=t.slice();for(let a=0;a<t.length;a++)t[a]=t[a]??void 0}const i=[...Object.keys(t),...MI(t)];for(let a=0;a<i.length;a++){const c=i[a];let u=t[c],f=e[c];if(YR(u)&&(u={...u}),YR(f)&&(f={...f}),typeof Buffer<"u"&&Buffer.isBuffer(u)&&(u=WR(u)),Array.isArray(u))if(typeof f=="object"&&f!=null){const p=[],g=Reflect.ownKeys(f);for(let y=0;y<g.length;y++){const b=g[y];p[b]=f[b]}f=p}else f=[];const d=n(f,u,c,e,t,r);d!=null?e[c]=d:Array.isArray(u)||XR(f)&&XR(u)?e[c]=uv(f,u,n,r):f==null&&Ree(u)?e[c]=uv({},u,n,r):f==null&&Aee(u)?e[c]=WR(u):(f===void 0||u!==void 0)&&(e[c]=u)}return e}function Dee(e,...t){return Tee(e,...t,xee)}var Cee=Object.defineProperty,Iee=Object.defineProperties,Nee=Object.getOwnPropertyDescriptors,ZR=Object.getOwnPropertySymbols,$ee=Object.prototype.hasOwnProperty,Bee=Object.prototype.propertyIsEnumerable,QR=(e,t,n)=>t in e?Cee(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,_h=(e,t)=>{for(var n in t||(t={}))$ee.call(t,n)&&QR(e,n,t[n]);if(ZR)for(var n of ZR(t))Bee.call(t,n)&&QR(e,n,t[n]);return e},Pee=(e,t)=>Iee(e,Nee(t));function vr(e,t,n){var r;const i=Vc(e);return((r=t.rpcMap)==null?void 0:r[i.reference])||`${kI}?chainId=${i.namespace}:${i.reference}&projectId=${n}`}function xa(e){return e.includes(":")?e.split(":")[1]:e}function FI(e){return e.map(t=>`${t.split(":")[0]}:${t.split(":")[1]}`)}function Uee(e,t){const n=Object.keys(t.namespaces).filter(i=>i.includes(e));if(!n.length)return[];const r=[];return n.forEach(i=>{const a=t.namespaces[i].accounts;r.push(...a)}),r}function xh(e={},t={}){const n=JR(e),r=JR(t);return Dee(n,r)}function JR(e){var t,n,r,i,a;const c={};if(!Ri(e))return c;for(const[u,f]of Object.entries(e)){const d=Vp(u)?[u]:f.chains,p=f.methods||[],g=f.events||[],y=f.rpcMap||{},b=Lc(u);c[b]=Pee(_h(_h({},c[b]),f),{chains:Ai(d,(t=c[b])==null?void 0:t.chains),methods:Ai(p,(n=c[b])==null?void 0:n.methods),events:Ai(g,(r=c[b])==null?void 0:r.events)}),(Ri(y)||Ri(((i=c[b])==null?void 0:i.rpcMap)||{}))&&(c[b].rpcMap=_h(_h({},y),(a=c[b])==null?void 0:a.rpcMap))}return c}function eO(e){return e.includes(":")?e.split(":")[2]:e}function tO(e){const t={};for(const[n,r]of Object.entries(e)){const i=r.methods||[],a=r.events||[],c=r.accounts||[],u=Vp(n)?[n]:r.chains?r.chains:FI(r.accounts);t[n]={chains:u,methods:i,events:a,accounts:c}}return t}function M0(e){return typeof e=="number"?e:e.includes("0x")?parseInt(e,16):(e=e.includes(":")?e.split(":")[1]:e,isNaN(Number(e))?e:Number(e))}const VI={},We=e=>VI[e],j0=(e,t)=>{VI[e]=t};var kee=Object.defineProperty,nO=Object.getOwnPropertySymbols,Mee=Object.prototype.hasOwnProperty,jee=Object.prototype.propertyIsEnumerable,rO=(e,t,n)=>t in e?kee(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,iO=(e,t)=>{for(var n in t||(t={}))Mee.call(t,n)&&rO(e,n,t[n]);if(nO)for(var n of nO(t))jee.call(t,n)&&rO(e,n,t[n]);return e};const sO="eip155",Lee=["atomic","flow-control","paymasterService","sessionKeys","auxiliaryFunds"],zee=e=>e&&e.startsWith("0x")?BigInt(e).toString(10):e,L0=e=>e&&e.startsWith("0x")?e:`0x${BigInt(e).toString(16)}`,oO=e=>Object.keys(e).filter(t=>Lee.includes(t)).reduce((t,n)=>(t[n]=e[n],t),{}),qee=(e,t,n)=>{const{sessionProperties:r={},scopedProperties:i={}}=e,a={};if(!Ri(i)&&!Ri(r))return;const c=oO(r);for(const u of n){const f=zee(u);if(!f)continue;a[L0(f)]=c;const d=i?.[`${sO}:${f}`];if(d){const p=d?.[`${sO}:${f}:${t}`];a[L0(f)]=iO(iO({},a[L0(f)]),oO(p||d))}}for(const[u,f]of Object.entries(a))Object.keys(f).length===0&&delete a[u];return Object.keys(a).length>0?a:void 0};var Hee=Object.defineProperty,Fee=(e,t,n)=>t in e?Hee(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Sc=(e,t,n)=>Fee(e,typeof t!="symbol"?t+"":t,n);class Vee{constructor(t){Sc(this,"name","polkadot"),Sc(this,"client"),Sc(this,"httpProviders"),Sc(this,"events"),Sc(this,"namespace"),Sc(this,"chainId"),this.namespace=t.namespace,this.events=We("events"),this.client=We("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,n){this.httpProviders[t]||this.setHttpProvider(t,n),this.chainId=t,this.events.emit(Fr.DEFAULT_CHAIN_CHANGED,`${this.name}:${t}`)}getAccounts(){const t=this.namespace.accounts;return t?t.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(n=>{var r;const i=xa(n);t[i]=this.createHttpProvider(i,(r=this.namespace.rpcMap)==null?void 0:r[n])}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,n=this.httpProviders[t];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return n}setHttpProvider(t,n){const r=this.createHttpProvider(t,n);r&&(this.httpProviders[t]=r)}createHttpProvider(t,n){const r=n||vr(t,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${t}`);return new Hr(new oi(r,We("disableProviderPing")))}}var Gee=Object.defineProperty,Kee=Object.defineProperties,Wee=Object.getOwnPropertyDescriptors,aO=Object.getOwnPropertySymbols,Yee=Object.prototype.hasOwnProperty,Xee=Object.prototype.propertyIsEnumerable,fv=(e,t,n)=>t in e?Gee(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,cO=(e,t)=>{for(var n in t||(t={}))Yee.call(t,n)&&fv(e,n,t[n]);if(aO)for(var n of aO(t))Xee.call(t,n)&&fv(e,n,t[n]);return e},lO=(e,t)=>Kee(e,Wee(t)),_c=(e,t,n)=>fv(e,typeof t!="symbol"?t+"":t,n);class Zee{constructor(t){_c(this,"name","eip155"),_c(this,"client"),_c(this,"chainId"),_c(this,"namespace"),_c(this,"httpProviders"),_c(this,"events"),this.namespace=t.namespace,this.events=We("events"),this.client=We("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(t){switch(t.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(t);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(t);case"wallet_getCallsStatus":return await this.getCallStatus(t)}return this.namespace.methods.includes(t.request.method)?await this.client.request(t):this.getHttpProvider().request(t.request)}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}setDefaultChain(t,n){this.httpProviders[t]||this.setHttpProvider(parseInt(t),n),this.chainId=parseInt(t),this.events.emit(Fr.DEFAULT_CHAIN_CHANGED,`${this.name}:${t}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}createHttpProvider(t,n){const r=n||vr(`${this.name}:${t}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${t}`);return new Hr(new oi(r,We("disableProviderPing")))}setHttpProvider(t,n){const r=this.createHttpProvider(t,n);r&&(this.httpProviders[t]=r)}createHttpProviders(){const t={};return this.namespace.chains.forEach(n=>{var r;const i=parseInt(xa(n));t[i]=this.createHttpProvider(i,(r=this.namespace.rpcMap)==null?void 0:r[n])}),t}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}getHttpProvider(){const t=this.chainId,n=this.httpProviders[t];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return n}async handleSwitchChain(t){var n,r;let i=t.request.params?(n=t.request.params[0])==null?void 0:n.chainId:"0x0";i=i.startsWith("0x")?i:`0x${i}`;const a=parseInt(i,16);if(this.isChainApproved(a))this.setDefaultChain(`${a}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:t.topic,request:{method:t.request.method,params:[{chainId:i}]},chainId:(r=this.namespace.chains)==null?void 0:r[0]}),this.setDefaultChain(`${a}`);else throw new Error(`Failed to switch to chain 'eip155:${a}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(t){return this.namespace.chains.includes(`${this.name}:${t}`)}async getCapabilities(t){var n,r,i,a,c;const u=(r=(n=t.request)==null?void 0:n.params)==null?void 0:r[0],f=((a=(i=t.request)==null?void 0:i.params)==null?void 0:a[1])||[];if(!u)throw new Error("Missing address parameter in `wallet_getCapabilities` request");const d=this.client.session.get(t.topic),p=((c=d?.sessionProperties)==null?void 0:c.capabilities)||{},g=`${u}${f.join(",")}`,y=p?.[g];if(y)return y;let b;try{b=qee(d,u,f)}catch(E){console.warn("Failed to extract capabilities from session",E)}if(b)return b;const v=await this.client.request(t);try{await this.client.session.update(t.topic,{sessionProperties:lO(cO({},d.sessionProperties||{}),{capabilities:lO(cO({},p||{}),{[g]:v})})})}catch(E){console.warn("Failed to update session with capabilities",E)}return v}async getCallStatus(t){var n,r;const i=this.client.session.get(t.topic),a=(n=i.sessionProperties)==null?void 0:n.bundler_name;if(a){const u=this.getBundlerUrl(t.chainId,a);try{return await this.getUserOperationReceipt(u,t)}catch(f){console.warn("Failed to fetch call status from bundler",f,u)}}const c=(r=i.sessionProperties)==null?void 0:r.bundler_url;if(c)try{return await this.getUserOperationReceipt(c,t)}catch(u){console.warn("Failed to fetch call status from custom bundler",u,c)}if(this.namespace.methods.includes(t.request.method))return await this.client.request(t);throw new Error("Fetching call status not approved by the wallet.")}async getUserOperationReceipt(t,n){var r;const i=new URL(t),a=await fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(co("eth_getUserOperationReceipt",[(r=n.request.params)==null?void 0:r[0]]))});if(!a.ok)throw new Error(`Failed to fetch user operation receipt - ${a.status}`);return await a.json()}getBundlerUrl(t,n){return`${nee}?projectId=${this.client.core.projectId}&chainId=${t}&bundler=${n}`}}var Qee=Object.defineProperty,Jee=(e,t,n)=>t in e?Qee(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,xc=(e,t,n)=>Jee(e,typeof t!="symbol"?t+"":t,n);class ete{constructor(t){xc(this,"name","solana"),xc(this,"client"),xc(this,"httpProviders"),xc(this,"events"),xc(this,"namespace"),xc(this,"chainId"),this.namespace=t.namespace,this.events=We("events"),this.client=We("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,n){this.httpProviders[t]||this.setHttpProvider(t,n),this.chainId=t,this.events.emit(Fr.DEFAULT_CHAIN_CHANGED,`${this.name}:${t}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(n=>{var r;const i=xa(n);t[i]=this.createHttpProvider(i,(r=this.namespace.rpcMap)==null?void 0:r[n])}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,n=this.httpProviders[t];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return n}setHttpProvider(t,n){const r=this.createHttpProvider(t,n);r&&(this.httpProviders[t]=r)}createHttpProvider(t,n){const r=n||vr(t,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${t}`);return new Hr(new oi(r,We("disableProviderPing")))}}var tte=Object.defineProperty,nte=(e,t,n)=>t in e?tte(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ac=(e,t,n)=>nte(e,typeof t!="symbol"?t+"":t,n);class rte{constructor(t){Ac(this,"name","cosmos"),Ac(this,"client"),Ac(this,"httpProviders"),Ac(this,"events"),Ac(this,"namespace"),Ac(this,"chainId"),this.namespace=t.namespace,this.events=We("events"),this.client=We("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,n){this.httpProviders[t]||this.setHttpProvider(t,n),this.chainId=t,this.events.emit(Fr.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(n=>{var r;const i=xa(n);t[i]=this.createHttpProvider(i,(r=this.namespace.rpcMap)==null?void 0:r[n])}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,n=this.httpProviders[t];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return n}setHttpProvider(t,n){const r=this.createHttpProvider(t,n);r&&(this.httpProviders[t]=r)}createHttpProvider(t,n){const r=n||vr(t,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${t}`);return new Hr(new oi(r,We("disableProviderPing")))}}var ite=Object.defineProperty,ste=(e,t,n)=>t in e?ite(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Rc=(e,t,n)=>ste(e,typeof t!="symbol"?t+"":t,n);class ote{constructor(t){Rc(this,"name","algorand"),Rc(this,"client"),Rc(this,"httpProviders"),Rc(this,"events"),Rc(this,"namespace"),Rc(this,"chainId"),this.namespace=t.namespace,this.events=We("events"),this.client=We("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,n){if(!this.httpProviders[t]){const r=n||vr(`${this.name}:${t}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${t}`);this.setHttpProvider(t,r)}this.chainId=t,this.events.emit(Fr.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(n=>{var r;t[n]=this.createHttpProvider(n,(r=this.namespace.rpcMap)==null?void 0:r[n])}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,n=this.httpProviders[t];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return n}setHttpProvider(t,n){const r=this.createHttpProvider(t,n);r&&(this.httpProviders[t]=r)}createHttpProvider(t,n){const r=n||vr(t,this.namespace,this.client.core.projectId);return typeof r>"u"?void 0:new Hr(new oi(r,We("disableProviderPing")))}}var ate=Object.defineProperty,cte=(e,t,n)=>t in e?ate(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Oc=(e,t,n)=>cte(e,typeof t!="symbol"?t+"":t,n);class lte{constructor(t){Oc(this,"name","cip34"),Oc(this,"client"),Oc(this,"httpProviders"),Oc(this,"events"),Oc(this,"namespace"),Oc(this,"chainId"),this.namespace=t.namespace,this.events=We("events"),this.client=We("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,n){this.httpProviders[t]||this.setHttpProvider(t,n),this.chainId=t,this.events.emit(Fr.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(n=>{const r=this.getCardanoRPCUrl(n),i=xa(n);t[i]=this.createHttpProvider(i,r)}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,n=this.httpProviders[t];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return n}getCardanoRPCUrl(t){const n=this.namespace.rpcMap;if(n)return n[t]}setHttpProvider(t,n){const r=this.createHttpProvider(t,n);r&&(this.httpProviders[t]=r)}createHttpProvider(t,n){const r=n||this.getCardanoRPCUrl(t);if(!r)throw new Error(`No RPC url provided for chainId: ${t}`);return new Hr(new oi(r,We("disableProviderPing")))}}var ute=Object.defineProperty,fte=(e,t,n)=>t in e?ute(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Tc=(e,t,n)=>fte(e,typeof t!="symbol"?t+"":t,n);class dte{constructor(t){Tc(this,"name","elrond"),Tc(this,"client"),Tc(this,"httpProviders"),Tc(this,"events"),Tc(this,"namespace"),Tc(this,"chainId"),this.namespace=t.namespace,this.events=We("events"),this.client=We("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,n){this.httpProviders[t]||this.setHttpProvider(t,n),this.chainId=t,this.events.emit(Fr.DEFAULT_CHAIN_CHANGED,`${this.name}:${t}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(n=>{var r;const i=xa(n);t[i]=this.createHttpProvider(i,(r=this.namespace.rpcMap)==null?void 0:r[n])}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,n=this.httpProviders[t];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return n}setHttpProvider(t,n){const r=this.createHttpProvider(t,n);r&&(this.httpProviders[t]=r)}createHttpProvider(t,n){const r=n||vr(t,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${t}`);return new Hr(new oi(r,We("disableProviderPing")))}}var hte=Object.defineProperty,pte=(e,t,n)=>t in e?hte(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Dc=(e,t,n)=>pte(e,typeof t!="symbol"?t+"":t,n);class gte{constructor(t){Dc(this,"name","multiversx"),Dc(this,"client"),Dc(this,"httpProviders"),Dc(this,"events"),Dc(this,"namespace"),Dc(this,"chainId"),this.namespace=t.namespace,this.events=We("events"),this.client=We("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,n){this.httpProviders[t]||this.setHttpProvider(t,n),this.chainId=t,this.events.emit(Fr.DEFAULT_CHAIN_CHANGED,`${this.name}:${t}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(n=>{var r;const i=xa(n);t[i]=this.createHttpProvider(i,(r=this.namespace.rpcMap)==null?void 0:r[n])}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,n=this.httpProviders[t];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return n}setHttpProvider(t,n){const r=this.createHttpProvider(t,n);r&&(this.httpProviders[t]=r)}createHttpProvider(t,n){const r=n||vr(t,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${t}`);return new Hr(new oi(r,We("disableProviderPing")))}}var mte=Object.defineProperty,yte=(e,t,n)=>t in e?mte(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Cc=(e,t,n)=>yte(e,typeof t!="symbol"?t+"":t,n);class bte{constructor(t){Cc(this,"name","near"),Cc(this,"client"),Cc(this,"httpProviders"),Cc(this,"events"),Cc(this,"namespace"),Cc(this,"chainId"),this.namespace=t.namespace,this.events=We("events"),this.client=We("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,n){if(this.chainId=t,!this.httpProviders[t]){const r=n||vr(`${this.name}:${t}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${t}`);this.setHttpProvider(t,r)}this.events.emit(Fr.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const t=this.namespace.accounts;return t?t.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(n=>{var r;t[n]=this.createHttpProvider(n,(r=this.namespace.rpcMap)==null?void 0:r[n])}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,n=this.httpProviders[t];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return n}setHttpProvider(t,n){const r=this.createHttpProvider(t,n);r&&(this.httpProviders[t]=r)}createHttpProvider(t,n){const r=n||vr(t,this.namespace);return typeof r>"u"?void 0:new Hr(new oi(r,We("disableProviderPing")))}}var vte=Object.defineProperty,wte=(e,t,n)=>t in e?vte(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ic=(e,t,n)=>wte(e,typeof t!="symbol"?t+"":t,n);class Ete{constructor(t){Ic(this,"name","tezos"),Ic(this,"client"),Ic(this,"httpProviders"),Ic(this,"events"),Ic(this,"namespace"),Ic(this,"chainId"),this.namespace=t.namespace,this.events=We("events"),this.client=We("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,n){if(this.chainId=t,!this.httpProviders[t]){const r=n||vr(`${this.name}:${t}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${t}`);this.setHttpProvider(t,r)}this.events.emit(Fr.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const t=this.namespace.accounts;return t?t.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(n=>{t[n]=this.createHttpProvider(n)}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,n=this.httpProviders[t];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return n}setHttpProvider(t,n){const r=this.createHttpProvider(t,n);r&&(this.httpProviders[t]=r)}createHttpProvider(t,n){const r=n||vr(t,this.namespace);return typeof r>"u"?void 0:new Hr(new oi(r))}}var Ste=Object.defineProperty,_te=(e,t,n)=>t in e?Ste(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Nc=(e,t,n)=>_te(e,typeof t!="symbol"?t+"":t,n);class xte{constructor(t){Nc(this,"name",Mc),Nc(this,"client"),Nc(this,"httpProviders"),Nc(this,"events"),Nc(this,"namespace"),Nc(this,"chainId"),this.namespace=t.namespace,this.events=We("events"),this.client=We("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(t.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(t.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(t.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(t.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider(t.chainId).request(t.request)}setDefaultChain(t,n){this.httpProviders[t]||this.setHttpProvider(t,n),this.chainId=t,this.events.emit(Fr.DEFAULT_CHAIN_CHANGED,`${this.name}:${t}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){var t,n;const r={};return(n=(t=this.namespace)==null?void 0:t.accounts)==null||n.forEach(i=>{const a=Vc(i);r[`${a.namespace}:${a.reference}`]=this.createHttpProvider(i)}),r}getHttpProvider(t){const n=this.httpProviders[t];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return n}setHttpProvider(t,n){const r=this.createHttpProvider(t,n);r&&(this.httpProviders[t]=r)}createHttpProvider(t,n){const r=n||vr(t,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${t}`);return new Hr(new oi(r,We("disableProviderPing")))}}var Ate=Object.defineProperty,Rte=Object.defineProperties,Ote=Object.getOwnPropertyDescriptors,uO=Object.getOwnPropertySymbols,Tte=Object.prototype.hasOwnProperty,Dte=Object.prototype.propertyIsEnumerable,dv=(e,t,n)=>t in e?Ate(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ah=(e,t)=>{for(var n in t||(t={}))Tte.call(t,n)&&dv(e,n,t[n]);if(uO)for(var n of uO(t))Dte.call(t,n)&&dv(e,n,t[n]);return e},z0=(e,t)=>Rte(e,Ote(t)),$r=(e,t,n)=>dv(e,typeof t!="symbol"?t+"":t,n);class Ow{constructor(t){$r(this,"client"),$r(this,"namespaces"),$r(this,"optionalNamespaces"),$r(this,"sessionProperties"),$r(this,"scopedProperties"),$r(this,"events",new Ep),$r(this,"rpcProviders",{}),$r(this,"session"),$r(this,"providerOpts"),$r(this,"logger"),$r(this,"uri"),$r(this,"disableProviderPing",!1),this.providerOpts=t,this.logger=typeof t?.logger<"u"&&typeof t?.logger!="string"?t.logger:Uf(Yp({level:t?.logger||KR})),this.disableProviderPing=t?.disableProviderPing||!1}static async init(t){const n=new Ow(t);return await n.initialize(),n}async request(t,n,r){const[i,a]=this.validateChain(n);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(i).request({request:Ah({},t),chainId:`${i}:${a}`,topic:this.session.topic,expiry:r})}sendAsync(t,n,r,i){const a=new Date().getTime();this.request(t,r,i).then(c=>n(null,Xp(a,c))).catch(c=>n(c,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties}),await this.requestAccounts()}async disconnect(){var t;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(t=this.session)==null?void 0:t.topic,reason:_t("USER_DISCONNECTED")}),await this.cleanup()}async connect(t){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(t),await this.cleanupPendingPairings(),!t.skipPairing)return await this.pair(t.pairingTopic)}async authenticate(t,n){if(!this.client)throw new Error("Sign Client not initialized");this.setNamespaces(t),await this.cleanupPendingPairings();const{uri:r,response:i}=await this.client.authenticate(t,n);r&&(this.uri=r,this.events.emit("display_uri",r));const a=await i();if(this.session=a.session,this.session){const c=tO(this.session.namespaces);this.namespaces=xh(this.namespaces,c),await this.persist("namespaces",this.namespaces),this.onConnect()}return a}on(t,n){this.events.on(t,n)}once(t,n){this.events.once(t,n)}removeListener(t,n){this.events.removeListener(t,n)}off(t,n){this.events.off(t,n)}get isWalletConnect(){return!0}async pair(t){const{uri:n,approval:r}=await this.client.connect({pairingTopic:t,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties});n&&(this.uri=n,this.events.emit("display_uri",n));const i=await r();this.session=i;const a=tO(i.namespaces);return this.namespaces=xh(this.namespaces,a),await this.persist("namespaces",this.namespaces),await this.persist("optionalNamespaces",this.optionalNamespaces),this.onConnect(),this.session}setDefaultChain(t,n){try{if(!this.session)return;const[r,i]=this.validateChain(t),a=this.getProvider(r);a.name===Mc?a.setDefaultChain(`${r}:${i}`,n):a.setDefaultChain(i,n)}catch(r){if(!/Please call connect/.test(r.message))throw r}}async cleanupPendingPairings(t={}){this.logger.info("Cleaning up inactive pairings...");const n=this.client.pairing.getAll();if(ds(n)){for(const r of n)t.deletePairings?this.client.core.expirer.set(r.topic,0):await this.client.core.relayer.subscriber.unsubscribe(r.topic);this.logger.info(`Inactive pairings cleared: ${n.length}`)}}abortPairingAttempt(){this.logger.warn("abortPairingAttempt is deprecated. This is now a no-op.")}async checkStorage(){this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.session&&this.createProviders()}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){var t,n;if(this.client=this.providerOpts.client||await HJ.init({core:this.providerOpts.core,logger:this.providerOpts.logger||KR,relayUrl:this.providerOpts.relayUrl||JJ,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.providerOpts.session)try{this.session=this.client.session.get(this.providerOpts.session.topic)}catch(r){throw this.logger.error("Failed to get session",r),new Error(`The provided session: ${(n=(t=this.providerOpts)==null?void 0:t.session)==null?void 0:n.topic} doesn't exist in the Sign client`)}else{const r=this.client.session.getAll();this.session=r[0]}this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const t=[...new Set(Object.keys(this.session.namespaces).map(n=>Lc(n)))];j0("client",this.client),j0("events",this.events),j0("disableProviderPing",this.disableProviderPing),t.forEach(n=>{if(!this.session)return;const r=Uee(n,this.session),i=FI(r),a=xh(this.namespaces,this.optionalNamespaces),c=z0(Ah({},a[n]),{accounts:r,chains:i});switch(n){case"eip155":this.rpcProviders[n]=new Zee({namespace:c});break;case"algorand":this.rpcProviders[n]=new ote({namespace:c});break;case"solana":this.rpcProviders[n]=new ete({namespace:c});break;case"cosmos":this.rpcProviders[n]=new rte({namespace:c});break;case"polkadot":this.rpcProviders[n]=new Vee({namespace:c});break;case"cip34":this.rpcProviders[n]=new lte({namespace:c});break;case"elrond":this.rpcProviders[n]=new dte({namespace:c});break;case"multiversx":this.rpcProviders[n]=new gte({namespace:c});break;case"near":this.rpcProviders[n]=new bte({namespace:c});break;case"tezos":this.rpcProviders[n]=new Ete({namespace:c});break;default:this.rpcProviders[Mc]?this.rpcProviders[Mc].updateNamespace(c):this.rpcProviders[Mc]=new xte({namespace:c})}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",t=>{var n;const{topic:r}=t;r===((n=this.session)==null?void 0:n.topic)&&this.events.emit("session_ping",t)}),this.client.on("session_event",t=>{var n;const{params:r,topic:i}=t;if(i!==((n=this.session)==null?void 0:n.topic))return;const{event:a}=r;if(a.name==="accountsChanged"){const c=a.data;c&&ds(c)&&this.events.emit("accountsChanged",c.map(eO))}else if(a.name==="chainChanged"){const c=r.chainId,u=r.event.data,f=Lc(c),d=M0(c)!==M0(u)?`${f}:${M0(u)}`:c;this.onChainChanged(d)}else this.events.emit(a.name,a.data);this.events.emit("session_event",t)}),this.client.on("session_update",({topic:t,params:n})=>{var r,i;if(t!==((r=this.session)==null?void 0:r.topic))return;const{namespaces:a}=n,c=(i=this.client)==null?void 0:i.session.get(t);this.session=z0(Ah({},c),{namespaces:a}),this.onSessionUpdate(),this.events.emit("session_update",{topic:t,params:n})}),this.client.on("session_delete",async t=>{var n;t.topic===((n=this.session)==null?void 0:n.topic)&&(await this.cleanup(),this.events.emit("session_delete",t),this.events.emit("disconnect",z0(Ah({},_t("USER_DISCONNECTED")),{data:t.topic})))}),this.on(Fr.DEFAULT_CHAIN_CHANGED,t=>{this.onChainChanged(t,!0)})}getProvider(t){return this.rpcProviders[t]||this.rpcProviders[Mc]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(t=>{var n;this.getProvider(t).updateNamespace((n=this.session)==null?void 0:n.namespaces[t])})}setNamespaces(t){const{namespaces:n={},optionalNamespaces:r={},sessionProperties:i,scopedProperties:a}=t;this.optionalNamespaces=xh(n,r),this.sessionProperties=i,this.scopedProperties=a}validateChain(t){const[n,r]=t?.split(":")||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[n,r];if(n&&!Object.keys(this.namespaces||{}).map(c=>Lc(c)).includes(n))throw new Error(`Namespace '${n}' is not configured. Please call connect() first with namespace config.`);if(n&&r)return[n,r];const i=Lc(Object.keys(this.namespaces)[0]),a=this.rpcProviders[i].getDefaultChain();return[i,a]}async requestAccounts(){const[t]=this.validateChain();return await this.getProvider(t).requestAccounts()}async onChainChanged(t,n=!1){if(!this.namespaces)return;const[r,i]=this.validateChain(t);if(!i)return;this.updateNamespaceChain(r,i),this.events.emit("chainChanged",i);const a=this.getProvider(r).getDefaultChain();n||this.getProvider(r).setDefaultChain(i),this.emitAccountsChangedOnChainChange({namespace:r,previousChainId:a,newChainId:t}),await this.persist("namespaces",this.namespaces)}emitAccountsChangedOnChainChange({namespace:t,previousChainId:n,newChainId:r}){var i,a;try{if(n===r)return;const c=(a=(i=this.session)==null?void 0:i.namespaces[t])==null?void 0:a.accounts;if(!c)return;const u=c.filter(f=>f.includes(`${r}:`)).map(eO);if(!ds(u))return;this.events.emit("accountsChanged",u)}catch(c){this.logger.warn("Failed to emit accountsChanged on chain change",c)}}updateNamespaceChain(t,n){if(!this.namespaces)return;const r=this.namespaces[t]?t:`${t}:${n}`,i={chains:[],methods:[],events:[],defaultChain:n};this.namespaces[r]?this.namespaces[r]&&(this.namespaces[r].defaultChain=n):this.namespaces[r]=i}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,await this.deleteFromStore("namespaces"),await this.deleteFromStore("optionalNamespaces"),await this.deleteFromStore("sessionProperties"),this.session=void 0,await this.cleanupPendingPairings({deletePairings:!0}),await this.cleanupStorage()}async persist(t,n){var r;const i=((r=this.session)==null?void 0:r.topic)||"";await this.client.core.storage.setItem(`${Sh}/${t}${i}`,n)}async getFromStore(t){var n;const r=((n=this.session)==null?void 0:n.topic)||"";return await this.client.core.storage.getItem(`${Sh}/${t}${r}`)}async deleteFromStore(t){var n;const r=((n=this.session)==null?void 0:n.topic)||"";await this.client.core.storage.removeItem(`${Sh}/${t}${r}`)}async cleanupStorage(){var t;try{if(((t=this.client)==null?void 0:t.session.length)>0)return;const n=await this.client.core.storage.getKeys();for(const r of n)r.startsWith(Sh)&&await this.client.core.storage.removeItem(r)}catch(n){this.logger.warn("Failed to cleanup storage",n)}}}const Cte=Ow;let xi=function(e){return e.FLOW_AUTHN="flow_authn",e.FLOW_PRE_AUTHZ="flow_pre_authz",e.FLOW_AUTHZ="flow_authz",e.FLOW_USER_SIGN="flow_user_sign",e}({}),GI=function(e){return e.SESSION_REQUEST="session_proposal",e.SIGNING_REQUEST="signing_request",e}({});const KI="fcl-plugin-service-walletconnect",WI="WC/RPC",Ite="pre-authz";function Nte(){return typeof navigator<"u"&&/android/i.test(navigator.userAgent)}function $te(){return typeof navigator<"u"&&/iPhone|iPod/.test(navigator.userAgent)}function Bte(){return typeof navigator<"u"&&/iPad/.test(navigator.userAgent)}function Pte(){return $te()||Bte()}function gf(){return Nte()||Pte()}function Tw(e){if(e.startsWith("http")){const t=document.createElement("a");t.href=e,t.target="_blank",t.rel="noreferrer noopener",t.click()}else window.open(e,"_blank")}function Ute(e){let{service:t,user:n}=e;return!(!gf()||t.endpoint===xi.FLOW_AUTHN||t.endpoint===xi.FLOW_AUTHZ&&n?.services?.find(r=>r.method===WI&&r.type===Ite))}function kte(e){if(!e)return;const t=new Image;t.src=e}async function YI(e){let{provider:t,existingPairing:n}=e;const r=await ya(),i={flow:{methods:[xi.FLOW_AUTHN,xi.FLOW_PRE_AUTHZ,xi.FLOW_AUTHZ,xi.FLOW_USER_SIGN],chains:[`flow:${r}`],events:["chainChanged","accountsChanged"]}};let a;const c=new Promise((f,d)=>{const p=g=>{f(g)};t.on("display_uri",p),a=()=>{t.removeListener("display_uri",p),d(new Error("WalletConnect Session Request aborted"))}}),u=t.connect({pairingTopic:n?.topic,namespaces:i}).finally(()=>{a()});return{uri:await c,approval:()=>u}}const XI=async e=>{let{method:t,body:n,session:r,provider:i,isExternal:a,abortSignal:c,disableNotifications:u}=e;const[f,d,p]=Mte(r),g=JSON.stringify({...n,addr:d,address:p}),y=await Promise.race([i.client.request({request:{method:t,params:[g]},chainId:f,topic:i.session?.topic}),new Promise((b,v)=>{c?.aborted&&v(new Error("WalletConnect Request aborted")),c?.addEventListener("abort",()=>{v(new Error("WalletConnect Request aborted"))})})]);if(!(typeof y!="object"||y==null))switch(y.status){case"APPROVED":let b=function(v){return v.method==="WC/RPC"?{...v,params:{...v.params,...a?{externalProvider:r.topic}:{},...u?{disableNotifications:u}:{}}}:v};if(t===xi.FLOW_AUTHN){const v=(y?.data?.services??[]).map(b);return{...y.data?y.data:{},services:v}}return t===xi.FLOW_PRE_AUTHZ?{...y.data,...y.data?.proposer?{proposer:b(y.data.proposer)}:{},payer:[...y.data?.payer?.map(b)],authorization:[...y.data?.authorization?.map(b)]}:y.data;case"DECLINED":throw new Error(`Declined: ${y.reason||"No reason supplied"}`);case"REDIRECT":return y.data;default:throw new Error("Declined: No reason supplied")}};function Mte(e){const[t,n,r]=Object.values(e.namespaces).map(c=>c.accounts).flat().filter(c=>c.startsWith("flow:"))[0].split(":");return[`${t}:${n}`,r,r]}var jte='*,:after,:before{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgba(59,130,246,.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }::backdrop{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgba(59,130,246,.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }/*! tailwindcss v3.4.14 | MIT License | https://tailwindcss.com*/*,:after,:before{border:0 solid #e5e7eb;box-sizing:border-box}:after,:before{--tw-content:""}:host,html{-webkit-text-size-adjust:100%;font-feature-settings:normal;-webkit-tap-highlight-color:transparent;font-family:ui-sans-serif,system-ui,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;font-variation-settings:normal;line-height:1.5;-moz-tab-size:4;tab-size:4}body{line-height:inherit;margin:0}hr{border-top-width:1px;color:inherit;height:0}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,pre,samp{font-feature-settings:normal;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-size:1em;font-variation-settings:normal}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{border-collapse:collapse;border-color:inherit;text-indent:0}button,input,optgroup,select,textarea{font-feature-settings:inherit;color:inherit;font-family:inherit;font-size:100%;font-variation-settings:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;margin:0;padding:0}button,select{text-transform:none}button,input:where([type=button]),input:where([type=reset]),input:where([type=submit]){-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dd,dl,figure,h1,h2,h3,h4,h5,h6,hr,p,pre{margin:0}fieldset{margin:0}fieldset,legend{padding:0}menu,ol,ul{list-style:none;margin:0;padding:0}dialog{padding:0}textarea{resize:vertical}input::placeholder,textarea::placeholder{color:#9ca3af;opacity:1}[role=button],button{cursor:pointer}:disabled{cursor:default}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{height:auto;max-width:100%}[hidden]:where(:not([hidden=until-found])){display:none}.container{width:100%}@media (min-width:640px){.container{max-width:640px}}@media (min-width:768px){.container{max-width:768px}}@media (min-width:1024px){.container{max-width:1024px}}@media (min-width:1280px){.container{max-width:1280px}}@media (min-width:1536px){.container{max-width:1536px}}.sr-only{clip:rect(0,0,0,0);border-width:0;height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;white-space:nowrap;width:1px}.fixed{position:fixed}.bottom-3{bottom:.75rem}.left-3{left:.75rem}.right-3{right:.75rem}.z-\\[2147483647\\]{z-index:2147483647}.mx-auto{margin-left:auto;margin-right:auto}.ml-2{margin-left:.5rem}.ml-3{margin-left:.75rem}.mt-1{margin-top:.25rem}.flex{display:flex}.inline-flex{display:inline-flex}.h-10{height:2.5rem}.h-5{height:1.25rem}.w-10{width:2.5rem}.w-5{width:1.25rem}.max-w-sm{max-width:24rem}.grow{flex-grow:1}@keyframes slideUp{0%{transform:translateY(100%)}to{transform:translateY(0)}}.animate-slideUp{animation:slideUp .2s ease-out forwards}.self-start{align-self:flex-start}.self-center{align-self:center}.overflow-hidden{overflow:hidden}.rounded-full{border-radius:9999px}.rounded-lg{border-radius:.5rem}.rounded-md{border-radius:.375rem}.border{border-width:1px}.border-gray-200{--tw-border-opacity:1;border-color:rgb(229 231 235/var(--tw-border-opacity))}.border-transparent{border-color:transparent}.bg-transparent{background-color:transparent}.bg-white{--tw-bg-opacity:1;background-color:rgb(255 255 255/var(--tw-bg-opacity))}.p-0{padding:0}.p-2{padding:.5rem}.p-4{padding:1rem}.text-sm{font-size:.875rem;line-height:1.25rem}.font-medium{font-weight:500}.text-gray-400{--tw-text-opacity:1;color:rgb(156 163 175/var(--tw-text-opacity))}.text-gray-500{--tw-text-opacity:1;color:rgb(107 114 128/var(--tw-text-opacity))}.text-gray-900{--tw-text-opacity:1;color:rgb(17 24 39/var(--tw-text-opacity))}.shadow-lg{--tw-shadow:0 10px 15px -3px rgba(0,0,0,.1),0 4px 6px -4px rgba(0,0,0,.1);--tw-shadow-colored:0 10px 15px -3px var(--tw-shadow-color),0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.filter{filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.hover\\:text-gray-500:hover{--tw-text-opacity:1;color:rgb(107 114 128/var(--tw-text-opacity))}.focus\\:border-transparent:focus{border-color:transparent}.focus\\:ring-0:focus{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow,0 0 #0000)}.dark\\:border-gray-600:is(.dark *){--tw-border-opacity:1;border-color:rgb(75 85 99/var(--tw-border-opacity))}.dark\\:bg-gray-700:is(.dark *){--tw-bg-opacity:1;background-color:rgb(55 65 81/var(--tw-bg-opacity))}.dark\\:text-gray-100:is(.dark *){--tw-text-opacity:1;color:rgb(243 244 246/var(--tw-text-opacity))}.dark\\:text-gray-200:is(.dark *){--tw-text-opacity:1;color:rgb(229 231 235/var(--tw-text-opacity))}.dark\\:text-gray-300:is(.dark *){--tw-text-opacity:1;color:rgb(209 213 219/var(--tw-text-opacity))}.dark\\:hover\\:text-gray-300:hover:is(.dark *){--tw-text-opacity:1;color:rgb(209 213 219/var(--tw-text-opacity))}@media (min-width:768px){.md\\:bottom-4{bottom:1rem}.md\\:left-auto{left:auto}.md\\:right-4{right:1rem}.md\\:self-start{align-self:flex-start}}';function Lte(e){let{title:t,message:n,icon:r,onClick:i,onDismiss:a,animate:c}=e;return yi("div",{className:`fixed bottom-3 left-3 right-3 mx-auto z-[2147483647] flex max-w-sm
        overflow-hidden rounded-lg border border-gray-200 bg-white p-4 shadow-lg
        md:bottom-4 md:left-auto md:right-4 dark:bg-gray-700 dark:border-gray-600
        ${c?"animate-slideUp":""}`,role:"alert",onClick:u=>{i&&(u.stopPropagation(),i?.())},children:[r&&yi("img",{className:"h-10 w-10 self-center rounded-md md:self-start",src:r,alt:t}),yi("div",{className:"ml-3 grow",children:[yi("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:t}),yi("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-300",children:n})]}),yi("button",{className:`ml-2 inline-flex rounded-full text-gray-400 hover:text-gray-500 focus:ring-0
          dark:text-gray-200 dark:hover:text-gray-300 ${gf()?"self-center p-2":"self-start p-0 bg-transparent border-transparent focus:border-transparent"}`,onClick:u=>{u.stopPropagation(),a?.()},children:[yi("span",{className:"sr-only",children:"Close"}),yi("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:yi("path",{fillRule:"evenodd",d:"M14.354 5.646a.5.5 0 00-.708 0L10 9.293 5.354 4.646a.5.5 0 00-.708.708L9.293 10l-4.647 4.646a.5.5 0 00.708.708L10 10.707l4.646 4.647a.5.5 0 00.708-.708L10.707 10l4.647-4.646a.5.5 0 000-.708z"})})]})]})}let Cu=null,zte=0,$c=null;function qte(){const e=document.createElement("div"),t=e.attachShadow({mode:"open"}),n=document.createElement("div");t.appendChild(n),document.body.appendChild(e);const r=document.createElement("style");r.textContent=jte,t.appendChild(r);const i=window.matchMedia("(prefers-color-scheme: dark)"),a=()=>{n.classList.toggle("dark",i.matches)};return i.addEventListener("change",a),a(),n}function Hte(e){let{title:t,message:n,icon:r,onClick:i,onDismiss:a,debounceDelay:c=0}=e;Cu||(Cu=qte());const u=!$c;$c&&(clearTimeout($c),$c=null),VA(yi(Lte,{title:t,message:n,icon:r,onClick:i,onDismiss:()=>{a?.(),f()},animate:u},zte++),Cu);function f(){Cu&&VA(null,Cu)}return{dismiss:()=>{$c=setTimeout(()=>{$c=null,f()},c)}}}var Fte="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 384 512'%3e%3c!--!Font Awesome Free 6.7.1 by %40fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons%2c Inc.--%3e%3cpath d='M16 64C16 28.7 44.7 0 80 0L304 0c35.3 0 64 28.7 64 64l0 384c0 35.3-28.7 64-64 64L80 512c-35.3 0-64-28.7-64-64L16 64zM224 448a32 32 0 1 0 -64 0 32 32 0 1 0 64 0zM304 64L80 64l0 320 224 0 0-320z'/%3e%3c/svg%3e";function Vte(e){const t=new Set;let n=e;return{subscribe:c=>(t.add(c),()=>{t.delete(c)}),setState:c=>{n=c,t.forEach(u=>u(n))},getState:()=>n}}let Rh=Vte({});const Gte=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{wcRequestHook:null,pairingModalOverride:null,disableNotifications:!1};return{name:KI,f_type:"ServicePlugin",type:"discovery-service",serviceStrategy:{method:WI,exec:Kte(e,t,K3(()=>import("./index-Cvp7j0_C.js").then(n=>n.i),[]).then(n=>n.WalletConnectModal))},services:[]}},Kte=(e,t,n)=>async r=>{let{service:i,body:a,opts:c,abortSignal:u,user:f}=r;kte(i.provider?.icon);const{wcRequestHook:d,pairingModalOverride:p,disableNotifications:g}=t,y=i.params?.disableNotifications??g,b=await Xte({provider:e,externalProviderOrTopic:i.params?.externalProvider});he(!!b,"WalletConnect is not initialized");const{provider:v,isExternal:E}=b;let S=v.session??null,_;const T=i.endpoint,O=B(i);if(S?.topic&&S?.topic===i.params?.externalProvider&&T===xi.FLOW_AUTHN)return f;S==null&&(S=await new Promise((z,q)=>{function k(){q("Declined: Externally Halted")}Wte(n)({service:i,onClose:k,appLink:O,provider:v,method:T,pairing:_,wcRequestHook:d,pairingModalOverride:p,abortSignal:u}).then(z,q)})),d&&d instanceof Function&&d({type:GI.SIGNING_REQUEST,method:T,service:i,session:S??null,pairing:null,uri:null}),Ute({service:i,user:f})&&Tw(O);const $=S?.sessionProperties?.["fclWc.disableNotificationsOnMobile"]==="true",I=!y&&!$?Yte({user:f,service:i}):null;return await XI({method:T,body:a,session:S,provider:v,abortSignal:u,isExternal:E,disableNotifications:i.params?.disableNotifications}).finally(()=>I?.dismiss());function B(z){let{uid:q}=z;return q&&/^(ftp|http|https):\/\/[^ "]+$/.test(q)||Fe({title:"WalletConnect Service Warning",message:`service.uid should be a valid universal link url. Found: ${q}`,level:ht.warn}),q}};function Wte(e){return async t=>{let{service:n,onClose:r,appLink:i,provider:a,method:c,pairing:u,wcRequestHook:f,pairingModalOverride:d,abortSignal:p}=t;const g=a.providerOpts.projectId;he(!!g,"Cannot establish connection, WalletConnect projectId is undefined");let y=null,b=null;try{const{uri:v,approval:E}=await YI({provider:a,existingPairing:u});if(f&&f instanceof Function&&f({type:GI.SESSION_REQUEST,method:c,service:n,session:null,pairing:u??null,uri:v??null}),gf()){const _=new URLSearchParams({uri:v}).toString();let T=u==null?i+"?"+_:i;Tw(T)}else if(!u)if(d)d(v,r);else{b=new(await e)({projectId:g}),b.openModal({uri:v,onClose:r});const _=b.subscribeModal(T=>{T.open===!1&&(r?.(),_())})}const S=await Promise.race([E(),new Promise((_,T)=>{p?.aborted&&T(new Error("Session request aborted")),p?.addEventListener("abort",()=>{T(new Error("Session request aborted"))})})]);if(S==null)throw new Error("Session request failed");return S}catch(v){throw v instanceof Error&&Fe({title:`${v.name} Error establishing WalletConnect session`,message:`
          ${v.message}
          uri: ${y}
        `,level:ht.error}),r(),v}finally{b?.closeModal()}}}function Yte(e){let{service:t,user:n}=e;const i=n?.services?.find(a=>a.type==="authn")?.provider||t.provider;return Hte({title:i?.name||"Mobile Wallet",message:gf()?"Tap to view request in app":"Pending request on your mobile device",icon:i?.icon||Fte,onClick:gf()&&t.uid?()=>Tw(t.uid):void 0,debounceDelay:t.type==="pre-authz"?500:0})}async function Xte(e){let{provider:t,externalProviderOrTopic:n}=e;if(!n){const a=await t;return a?{provider:a,isExternal:!1}:null}if(typeof n!="string"){const a=n.session?.topic;if(!a)throw new Error("Cannot resolve provider: UniversalProvider is not initialized");return Rh.setState({[a]:n}),{provider:n,isExternal:!0}}const r=n;if(r){let a=Rh.getState()[r];if(!a){let c,u;a=await new Promise((f,d)=>{c=Rh.subscribe(()=>{const p=Rh.getState()[r];p&&f(p)}),u=setTimeout(()=>{d(new Error(`Provider for external topic ${r} not found after 5 seconds`))},5e3)}).finally(()=>{clearTimeout(u),c()})}return{provider:a,isExternal:!0}}const i=await t;return i?{provider:i,isExternal:!1}:null}const Zte="wss://relay.walletconnect.com",Qte="debug";let ju=Promise.resolve(null);const Jte=async e=>{let{projectId:t,metadata:n}=e;he(t!=null,"FCL Wallet Connect Error: WalletConnect projectId is required");try{return Cte.init({logger:Qte,relayUrl:Zte,projectId:t,metadata:n})}catch(r){throw r instanceof Error&&Fe({title:`${r.name} fcl-wc Init Client`,message:r.message,level:ht.error}),r}},ZI=e=>{const{FclWcServicePlugin:t,providerPromise:n}=tne(e);return j3.authn.update(),{FclWcServicePlugin:t,providerPromise:n}},ene=async e=>{const{FclWcServicePlugin:t,providerPromise:n}=ZI(e),r=await n;return j3.authn.update(),{FclWcServicePlugin:t,client:r}},tne=e=>{if(typeof window>"u")throw new Error("FCL Wallet Connect Plugin can only be initialized in the browser");return ju=ju.catch(()=>null).then(n=>n||Jte({projectId:e.projectId,metadata:e.metadata})).catch(n=>{throw Fe({title:"WalletConnect Client Initialization Error",message:n.message?n.message:n,level:ht.error}),n}),{FclWcServicePlugin:Gte(ju,e),providerPromise:ju}};async function QI(){return ju.then(e=>{if(!e)throw new Error("WalletConnect client not initialized");return e})}const JI="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",nne=JI.length;function Dw(){let e="",t=32;for(;t--;)e+=JI[Math.random()*nne|0];return e}const rne=globalThis.AbortController||require("abort-controller");function ine(e){const t=new rne;return e?.aborted&&t.abort(),e?.addEventListener("abort",()=>t.abort()),t}let q0=function(e){return e.NOTIFY_QRCODE_CONNECTING="notifyQrCodeConnecting",e.NOTIFY_QRCODE_CONNECTED="notifyQrCodeConnected",e.NOTIFY_QRCODE_ERROR="notifyQrCodeError",e}({}),fO=function(e){return e.REQUEST_WALLETCONNECT_QRCODE="requestWalletConnectQrCode",e.EXEC_SERVICE="execService",e}({});const dO="APPROVED",sne=e=>{let{onExecResult:t,execStrategyOpts:n,execStrategyArgs:r,abortSignal:i}=e;return async a=>{let{service:c}=a;try{const u=await Ip({...n,service:c,config:n.config,abortSignal:i},...r.slice(1));if((Ii(u)?.status||dO)===dO)return t(u),null;throw new Error(u?.reason||"Service was declined")}catch(u){throw new Error(u?.message||"Service execution failed")}}},one=e=>{let{rpc:t,onExecResult:n,authnBody:r,abortSignal:i}=e;const a=ane({rpc:t,authnBody:r});return async c=>{if(i.aborted)throw new Error("Handler has been terminated");const u=await QI(),{uri:f,approval:d}=await YI({provider:u});return a({uri:f,approval:d,onExecResult:n}),{uri:f}}};function ane(e){let{rpc:t,authnBody:n}=e;return r=>{let{uri:i,approval:a,onExecResult:c}=r;setTimeout(async()=>{try{const u=await QI(),f=await a();t.notify(q0.NOTIFY_QRCODE_CONNECTING,{uri:i});const d=await XI({method:xi.FLOW_AUTHN,body:n,session:f,provider:u});t.notify(q0.NOTIFY_QRCODE_CONNECTED,{uri:i}),c(d)}catch(u){t.notify(q0.NOTIFY_QRCODE_ERROR,{uri:i,error:u?.message})}},0)}}function cne(e){let{onExecResult:t,body:n,opts:r,args:i,abortSignal:a}=e;const c=new ej({notifications:[]});return c.on(fO.REQUEST_WALLETCONNECT_QRCODE,one({rpc:c,onExecResult:t,authnBody:n,abortSignal:a})),c.on(fO.EXEC_SERVICE,sne({onExecResult:t,execStrategyOpts:r,execStrategyArgs:i,abortSignal:a})),{connect:c.connect.bind(c),receive:c.receive.bind(c)}}async function lne(e){let{customRpc:t,opts:n,args:r,abortSignal:i}=e;const a={...n.config,client:{...n.config.client,discoveryRpcEnabled:!0}};return Ip({...n,config:a,customRpc:t,abortSignal:i},...r.slice(1))}const hO="authn";async function une(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const[r]=t,{body:i,abortSignal:a,service:c}=r;if(c?.type!==hO)return console.error(`ERROR: Invalid service type for FCL Discovery execStrategyHook, expected "${hO}" but got "${c?.type}"`),Ip(...t);const u=ine(a);let f;const d=new Promise(async(p,g)=>{const y=cne({onExecResult:p,body:i,opts:r,args:t,abortSignal:u.signal});f=lne({customRpc:y,opts:r,args:t,abortSignal:u.signal}).then(p,g)});return await d.catch(()=>{}),await Promise.race([new Promise(p=>setTimeout(p,1e3)),f]).catch(()=>{}),u.abort(),d}const Oh="FCL_IFRAME",fne=`
  position:fixed;
  top: 0px;
  right: 0px;
  bottom: 0px;
  left: 0px;
  height: 100%;
  width: 100vw;
  display:block;
  background:rgba(0,0,0,0.25);
  z-index: 2147483647;
  box-sizing: border-box;
  color-scheme: light;
`;function eN(e){he(!document.getElementById(Oh),"Attempt at triggering multiple Frames",{src:e});const t=document.createElement("iframe");t.src=e,t.id=Oh,t.allow="usb *; hid *; clipboard-write",t.frameBorder="0",t.style.cssText=fne,document.body.append(t);const n=()=>{document.getElementById(Oh)&&document.getElementById(Oh).remove()};return[t.contentWindow,n]}const dne="FCL_POP";let Jr=null,pO=null;function hne(e,t,n,r,i){const a=n.top.outerHeight/2+n.top.screenY-i/2,c=n.top.outerWidth/2+n.top.screenX-r/2,u=n.open(e,t,`toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width=${r}, height=${i}, top=${a}, left=${c}`);if(!u)throw new Error("Popup failed to open (was it blocked by a popup blocker?)");return u}function tN(e){return Jr==null||Jr?.closed?Jr=hne(e,dne,window,640,770):(pO!==e&&Jr.location.replace(e),Jr.focus()),pO=e,[Jr,()=>{Jr&&!Jr.closed&&Jr.close(),Jr=null}]}let Br=null,gO=null;function nN(e){if(Br==null||Br?.closed){if(Br=window.open(e,"_blank"),!Br)throw new Error("Tab failed to open (was it blocked by the browser?)")}else gO!==e&&Br.location.replace(e),Br.focus();return gO=e,[Br,()=>{Br&&!Br.closed&&Br.close(),Br=null}]}const pne=()=>({"discovery.wallet.method.default":"IFRAME/RPC"}),qo=()=>{};function gne(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null)return{send:qo,close:qo};const n=t.onClose||qo,r=t.onMessage||qo,i=t.onReady||qo,a=t.onResponse||qo,c=t.onCustomRpc||qo;let u,f;const d=$p({close:p,send:g,onReady:i,onResponse:a,onMessage:r,onCustomRpc:c,getSource:()=>u});return window.addEventListener("message",d),[u,f]=eN(Rf(e)),{send:g,close:p};function p(){try{window.removeEventListener("message",d),f(),n()}catch(y){console.error("Frame Close Error",y)}}function g(y){try{u.postMessage(JSON.parse(JSON.stringify(y||{})),"*")}catch(b){console.error("Frame Send Error",y,b)}}}const fa="1.19.0";function mne(e){let{service:t,body:n,config:r,customRpc:i,abortSignal:a,opts:c}=e;return new Promise((u,f)=>{const d=Dw(),p=c.includeOlderJsonRpcCall,{close:g}=gne(t,{async onReady(y,b){let{send:v}=b;try{v({type:"FCL:VIEW:READY:RESPONSE",fclVersion:fa,body:n,service:{params:t.params,data:t.data,type:t.type},config:r}),v({fclVersion:fa,type:"FCL:FRAME:READY:RESPONSE",body:n,service:{params:t.params,data:t.data,type:t.type},config:r,deprecated:{message:"FCL:FRAME:READY:RESPONSE is deprecated and replaced with type: FCL:VIEW:READY:RESPONSE"}}),p&&v({jsonrpc:"2.0",id:d,method:"fcl:sign",params:[n,t.params],deprecated:{message:"jsonrpc is deprecated and replaced with type: FCL:VIEW:READY:RESPONSE"}}),i?.connect({send:E=>{v({type:"FCL:VIEW:CUSTOM_RPC",payload:E})}})}catch(E){throw E}},onResponse(y,b){let{close:v}=b;try{if(typeof y.data!="object")return;const E=Ii(y.data);switch(E.status){case"APPROVED":u(E.data),v();break;case"DECLINED":f(`Declined: ${E.reason||"No reason supplied"}`),v();break;case"REDIRECT":u(E),v();break;default:f("Declined: No reason supplied"),v();break}}catch(E){throw console.error("execIframeRPC onResponse error",E),E}},onMessage(y,b){let{close:v}=b;try{if(typeof y.data!="object"||y.data.jsonrpc!=="2.0"||y.data.id!==d)return;const E=Ii(y.data.result);switch(E.status){case"APPROVED":u(E.data),v();break;case"DECLINED":f(`Declined: ${E.reason||"No reason supplied"}`),v();break;case"REDIRECT":u(E),v();break;default:f("Declined: No reason supplied"),v();break}}catch(E){throw console.error("execIframeRPC onMessage error",E),E}},onClose(){f("Declined: Externally Halted")},onCustomRpc(y){i?.receive(y)}});a&&(a.aborted&&(f("Declined: Aborted"),g()),a.addEventListener("abort",()=>{f("Declined: Aborted"),g()}))})}const Ho=()=>{};function yne(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null)return{send:Ho,close:Ho};const n=t.onClose||Ho,r=t.onMessage||Ho,i=t.onReady||Ho,a=t.onResponse||Ho,c=t.onCustomRpc||Ho;let u,f;const d=$p({close:g,send:y,onReady:i,onResponse:a,onMessage:r,onCustomRpc:c,getSource:()=>u});window.addEventListener("message",d),[u,f]=tN(Rf(e));const p=setInterval(function(){u&&u.closed&&g()},500);return{send:y,close:g};function g(){try{window.removeEventListener("message",d),clearInterval(p),f(),n()}catch(b){console.error("Popup Close Error",b)}}function y(b){try{u.postMessage(JSON.parse(JSON.stringify(b||{})),"*")}catch(v){console.error("Popup Send Error",b,v)}}}function bne(e){let{service:t,body:n,config:r,abortSignal:i,customRpc:a,opts:c}=e;return new Promise((u,f)=>{const d=Dw(),{redir:p,includeOlderJsonRpcCall:g}=c,{close:y}=yne(t,{customRpc:a,async onReady(b,v){let{send:E}=v;try{E({fclVersion:fa,type:"FCL:VIEW:READY:RESPONSE",body:n,service:{params:t.params,data:t.data,type:t.type},config:r}),E({fclVersion:fa,type:"FCL:FRAME:READY:RESPONSE",body:n,service:{params:t.params,data:t.data,type:t.type},config:r,deprecated:{message:"FCL:FRAME:READY:RESPONSE is deprecated and replaced with type: FCL:VIEW:READY:RESPONSE"}}),g&&E({jsonrpc:"2.0",id:d,method:"fcl:sign",params:[n,t.params]}),a?.connect({send:S=>{E({type:"FCL:VIEW:CUSTOM_RPC",payload:S})}})}catch(S){throw S}},onResponse(b,v){let{close:E}=v;try{if(typeof b.data!="object")return;const S=Ii(b.data);switch(S.status){case"APPROVED":u(S.data),!p&&E();break;case"DECLINED":f(`Declined: ${S.reason||"No reason supplied"}`),E();break;case"REDIRECT":u(S),E();break;default:f("Declined: No reason supplied"),E();break}}catch(S){throw console.error("execPopRPC onResponse error",S),S}},onMessage(b,v){let{close:E}=v;try{if(typeof b.data!="object"||b.data.jsonrpc!=="2.0"||b.data.id!==d)return;const S=Ii(b.data.result);switch(S.status){case"APPROVED":u(S.data),!p&&E();break;case"DECLINED":f(`Declined: ${S.reason||"No reason supplied"}`),E();break;case"REDIRECT":u(S),E();break;default:f("Declined: No reason supplied"),E();break}}catch(S){throw console.error("execPopRPC onMessage error",S),S}},onClose(){f("Declined: Externally Halted")},onCustomRpc(b){a?.receive(b)}});i&&(i.aborted&&(f("Declined: Aborted"),y()),i.addEventListener("abort",()=>{f("Declined: Aborted"),y()}))})}const Fo=()=>{};function vne(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null)return{send:Fo,close:Fo};const n=t.onClose||Fo,r=t.onMessage||Fo,i=t.onReady||Fo,a=t.onResponse||Fo,c=t.onCustomRpc||Fo;let u,f;const d=$p({close:g,send:y,onReady:i,onResponse:a,onMessage:r,onCustomRpc:c,getSource:()=>u});window.addEventListener("message",d),[u,f]=nN(Rf(e));const p=setInterval(function(){u&&u.closed&&g()},500);return{send:y,close:g};function g(){try{window.removeEventListener("message",d),clearInterval(p),f(),n()}catch(b){console.error("Tab Close Error",b)}}function y(b){try{u.postMessage(JSON.parse(JSON.stringify(b||{})),"*")}catch(v){console.error("Tab Send Error",b,v)}}}function wne(e){let{service:t,body:n,config:r,abortSignal:i,customRpc:a,opts:c}=e;return new Promise((u,f)=>{const d=Dw(),{redir:p,includeOlderJsonRpcCall:g}=c,{close:y}=vne(t,{customRpc:a,async onReady(b,v){let{send:E}=v;try{E({fclVersion:fa,type:"FCL:VIEW:READY:RESPONSE",body:n,service:{params:t.params,data:t.data,type:t.type},config:r}),E({fclVersion:fa,type:"FCL:FRAME:READY:RESPONSE",body:n,service:{params:t.params,data:t.data,type:t.type},config:r,deprecated:{message:"FCL:FRAME:READY:RESPONSE is deprecated and replaced with type: FCL:VIEW:READY:RESPONSE"}}),g&&E({jsonrpc:"2.0",id:d,method:"fcl:sign",params:[n,t.params]}),a?.connect({send:S=>{E({type:"FCL:VIEW:CUSTOM_RPC",payload:S})}})}catch(S){throw S}},onResponse(b,v){let{close:E}=v;try{if(typeof b.data!="object")return;const S=Ii(b.data);switch(S.status){case"APPROVED":u(S.data),!p&&E();break;case"DECLINED":f(`Declined: ${S.reason||"No reason supplied"}`),E();break;case"REDIRECT":u(S),E();break;default:f("Declined: No reason supplied"),E();break}}catch(S){throw console.error("execPopRPC onResponse error",S),S}},onMessage(b,v){let{close:E}=v;try{if(typeof b.data!="object"||b.data.jsonrpc!=="2.0"||b.data.id!==d)return;const S=Ii(b.data.result);switch(S.status){case"APPROVED":u(S.data),!p&&E();break;case"DECLINED":f(`Declined: ${S.reason||"No reason supplied"}`),E();break;case"REDIRECT":u(S),E();break;default:f("Declined: No reason supplied"),E();break}}catch(S){throw console.error("execPopRPC onMessage error",S),S}},onClose(){f("Declined: Externally Halted")},onCustomRpc(b){a?.receive(b)}});i&&(i.aborted&&(y(),f("Declined: Aborted")),i.addEventListener("abort",()=>{y(),f("Declined: Aborted")}))})}const Vo=()=>{};function Ene(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null)return{send:Vo,close:Vo};const n=t.onClose||Vo,r=t.onMessage||Vo,i=t.onReady||Vo,a=t.onResponse||Vo,c=t.onCustomRpc||Vo,u=$p({close:f,send:d,onReady:i,onResponse:a,onMessage:r,onCustomRpc:c});return window.addEventListener("message",u),d({service:e}),{send:d,close:f};function f(){try{window.removeEventListener("message",u),n()}catch(p){console.error("Ext Close Error",p)}}function d(p){try{window&&window.postMessage(JSON.parse(JSON.stringify(p||{})),"*")}catch(g){console.error("Ext Send Error",p,g)}}}function Sne(e){let{service:t,body:n,config:r,abortSignal:i,customRpc:a,opts:c}=e;return new Promise((u,f)=>{const{close:d}=Ene(t,{async onReady(p,g){let{send:y}=g;try{y({fclVersion:fa,type:"FCL:VIEW:READY:RESPONSE",body:n,service:{params:t.params,data:t.data,type:t.type},config:r}),a?.connect({send:b=>{y({type:"FCL:VIEW:CUSTOM_RPC",body:b})}})}catch(b){throw b}},onResponse(p,g){let{close:y}=g;try{if(typeof p.data!="object")return;const b=Ii(p.data);switch(b.status){case"APPROVED":u(b.data),y();break;case"DECLINED":f(`Declined: ${b.reason||"No reason supplied"}`),y();break;case"REDIRECT":u(b),y();break;default:f("Declined: No reason supplied"),y();break}}catch(b){throw console.error("execExtRPC onResponse error",b),b}},onClose(){f("Declined: Externally Halted")},onCustomRpc(p){a?.receive(p)}});i&&(i.aborted&&(d(),f("Declined: Aborted")),i.addEventListener("abort",()=>{d(),f("Declined: Aborted")}))})}const mO=()=>{throw new Error("Strategy util has not been implemented on this platform")},_ne={"VIEW/IFRAME":eN,"VIEW/POP":tN,"VIEW/TAB":nN,"VIEW/MOBILE_BROWSER":mO,"VIEW/DEEPLINK":mO};async function yO(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{serviceEndpoint:()=>{}};const{serviceEndpoint:n}=t;try{return _ne[e.method](n(e),t)}catch(r){throw console.error("execLocal({service, opts = {}})",r,{service:e,opts:t}),r}}const xne={[yr["HTTP/RPC"]]:W_(yO),[yr["HTTP/POST"]]:W_(yO),[yr["IFRAME/RPC"]]:mne,[yr["POP/RPC"]]:bne,[yr["TAB/RPC"]]:wne,[yr["EXT/RPC"]]:Sne},Ane=()=>typeof window>"u",Rne=e=>{if(e==null)return null;try{return JSON.parse(e)}catch{return null}},One={can:!Ane()&&!!window.localStorage,get:async e=>Rne(localStorage.getItem(e)),put:async(e,t)=>localStorage.setItem(e,JSON.stringify(t))},Tne=typeof window>"u",Dne=e=>{const t=e["app.detail.title"],n=e["app.detail.icon"],r=e["app.detail.description"],i=e["app.detail.url"];return{name:t??document.title,description:r??"",url:i??window.location.origin,icons:n?[n]:[]}};function Cne(){if(Tne)return;let e=null,t=!1;Re.subscribe(async n=>{const r={"walletconnect.projectId":n["walletconnect.projectId"],"walletconnect.disableNotifications":n["walletconnect.disableNotifications"],"app.detail.title":n["app.detail.title"],"app.detail.icon":n["app.detail.icon"],"app.detail.description":n["app.detail.description"],"app.detail.url":n["app.detail.url"]},i=r["walletconnect.projectId"],a=r["walletconnect.disableNotifications"],c=e;if(e=JSON.stringify(r,null,2),t){c!==e&&console.warn(`FCL WalletConnect Plugin has been already loaded with different configuration. It is not possible to change the configuration after the plugin has been loaded.

Previous configuration:
${c}

Current configuration:
${e}`);return}if(!!!i)return;if(he(!!i,"FCL Configuration value for 'walletconnect.projectId' is required"),hb.getPlugins().has(KI)){t||console.warn("It seems like the FCL WalletConnect plugins has been already loaded manually. This is no longer necessary, please see the documentation for more information."),t=!0;return}t=!0;const{FclWcServicePlugin:f}=ZI({projectId:i,metadata:Dne(r),disableNotifications:a});hb.add([f])})}const Ine={execStrategy:une},Aa=V3({platform:"web",discovery:Ine,getStorageProvider:async()=>await Re.get("fcl.storage")||One}),Nne=XM(Aa),$ne=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Aa().authenticate(e)},Bne=()=>Aa().unauthenticate();Aa().authorization;Re(pne());k3({coreStrategies:xne});Cne();const Pne="56fce212e878d76623e53be15ab998c5";Re().put("app.detail.title","MVP on Flow").put("app.detail.icon","https://mvponflow.cc/favicon.png").put("accessNode.api","https://rest-mainnet.onflow.org").put("discovery.wallet","https://fcl-discovery.onflow.org/authn").put("flow.network","mainnet").put("discovery.authn.include",["0x33f75ff0b830dcec"]).put("discovery.authn.exclude",["0x95b85a9ef4daabb1","0x55ad22f01ef568a1"]);ene({projectId:Pne,metadata:{name:"MVP on Flow",description:"Fan-powered Jokic project",url:"https://mvponflow.cc",icons:["https://mvponflow.cc/favicon.png"]}}).then(({FclWcServicePlugin:e})=>{hb.add(e)});var H0={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var bO;function Une(){return bO||(bO=1,function(e){(function(){var t={}.hasOwnProperty;function n(){for(var a="",c=0;c<arguments.length;c++){var u=arguments[c];u&&(a=i(a,r(u)))}return a}function r(a){if(typeof a=="string"||typeof a=="number")return a;if(typeof a!="object")return"";if(Array.isArray(a))return n.apply(null,a);if(a.toString!==Object.prototype.toString&&!a.toString.toString().includes("[native code]"))return a.toString();var c="";for(var u in a)t.call(a,u)&&a[u]&&(c=i(c,u));return c}function i(a,c){return c?a?a+" "+c:a+c:a}e.exports?(n.default=n,e.exports=n):window.classNames=n})()}(H0)),H0.exports}var kne=Une();const bt=vs(kne);function hv(){return hv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},hv.apply(null,arguments)}function rN(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function vO(e){return"default"+e.charAt(0).toUpperCase()+e.substr(1)}function Mne(e){var t=jne(e,"string");return typeof t=="symbol"?t:String(t)}function jne(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Lne(e,t,n){var r=j.useRef(e!==void 0),i=j.useState(t),a=i[0],c=i[1],u=e!==void 0,f=r.current;return r.current=u,!u&&f&&a!==t&&c(t),[u?e:a,j.useCallback(function(d){for(var p=arguments.length,g=new Array(p>1?p-1:0),y=1;y<p;y++)g[y-1]=arguments[y];n&&n.apply(void 0,[d].concat(g)),c(d)},[n])]}function Cw(e,t){return Object.keys(t).reduce(function(n,r){var i,a=n,c=a[vO(r)],u=a[r],f=rN(a,[vO(r),r].map(Mne)),d=t[r],p=Lne(u,c,e[d]),g=p[0],y=p[1];return hv({},f,(i={},i[r]=g,i[d]=y,i))},e)}function pv(e,t){return pv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},pv(e,t)}function zne(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,pv(e,t)}const qne=["xxl","xl","lg","md","sm","xs"],Hne="xs",Iw=j.createContext({prefixes:{},breakpoints:qne,minBreakpoint:Hne}),{Consumer:dae,Provider:hae}=Iw;function Bt(e,t){const{prefixes:n}=j.useContext(Iw);return e||n[t]||t}function Fne(){const{dir:e}=j.useContext(Iw);return e==="rtl"}function tg(e){return e&&e.ownerDocument||document}function Vne(e){var t=tg(e);return t&&t.defaultView||window}function Gne(e,t){return Vne(e).getComputedStyle(e,t)}var Kne=/([A-Z])/g;function Wne(e){return e.replace(Kne,"-$1").toLowerCase()}var Yne=/^ms-/;function Th(e){return Wne(e).replace(Yne,"-ms-")}var Xne=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function Zne(e){return!!(e&&Xne.test(e))}function hs(e,t){var n="",r="";if(typeof t=="string")return e.style.getPropertyValue(Th(t))||Gne(e).getPropertyValue(Th(t));Object.keys(t).forEach(function(i){var a=t[i];!a&&a!==0?e.style.removeProperty(Th(i)):Zne(i)?r+=i+"("+a+") ":n+=Th(i)+": "+a+";"}),r&&(n+="transform: "+r+";"),e.style.cssText+=";"+n}var F0={exports:{}},V0,wO;function Qne(){if(wO)return V0;wO=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return V0=e,V0}var G0,EO;function Jne(){if(EO)return G0;EO=1;var e=Qne();function t(){}function n(){}return n.resetWarningCache=t,G0=function(){function r(c,u,f,d,p,g){if(g!==e){var y=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw y.name="Invariant Violation",y}}r.isRequired=r;function i(){return r}var a={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:n,resetWarningCache:t};return a.PropTypes=a,a},G0}var SO;function ere(){return SO||(SO=1,F0.exports=Jne()()),F0.exports}var tre=ere();const K0=vs(tre),_O={disabled:!1},iN=bn.createContext(null);var nre=function(t){return t.scrollTop},Lu="unmounted",so="exited",ni="entering",cs="entered",mf="exiting",ws=function(e){zne(t,e);function t(r,i){var a;a=e.call(this,r,i)||this;var c=i,u=c&&!c.isMounting?r.enter:r.appear,f;return a.appearStatus=null,r.in?u?(f=so,a.appearStatus=ni):f=cs:r.unmountOnExit||r.mountOnEnter?f=Lu:f=so,a.state={status:f},a.nextCallback=null,a}t.getDerivedStateFromProps=function(i,a){var c=i.in;return c&&a.status===Lu?{status:so}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(i){var a=null;if(i!==this.props){var c=this.state.status;this.props.in?c!==ni&&c!==cs&&(a=ni):(c===ni||c===cs)&&(a=mf)}this.updateStatus(!1,a)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var i=this.props.timeout,a,c,u;return a=c=u=i,i!=null&&typeof i!="number"&&(a=i.exit,c=i.enter,u=i.appear!==void 0?i.appear:c),{exit:a,enter:c,appear:u}},n.updateStatus=function(i,a){if(i===void 0&&(i=!1),a!==null)if(this.cancelNextCallback(),a===ni){if(this.props.unmountOnExit||this.props.mountOnEnter){var c=this.props.nodeRef?this.props.nodeRef.current:jc.findDOMNode(this);c&&nre(c)}this.performEnter(i)}else this.performExit();else this.props.unmountOnExit&&this.state.status===so&&this.setState({status:Lu})},n.performEnter=function(i){var a=this,c=this.props.enter,u=this.context?this.context.isMounting:i,f=this.props.nodeRef?[u]:[jc.findDOMNode(this),u],d=f[0],p=f[1],g=this.getTimeouts(),y=u?g.appear:g.enter;if(!i&&!c||_O.disabled){this.safeSetState({status:cs},function(){a.props.onEntered(d)});return}this.props.onEnter(d,p),this.safeSetState({status:ni},function(){a.props.onEntering(d,p),a.onTransitionEnd(y,function(){a.safeSetState({status:cs},function(){a.props.onEntered(d,p)})})})},n.performExit=function(){var i=this,a=this.props.exit,c=this.getTimeouts(),u=this.props.nodeRef?void 0:jc.findDOMNode(this);if(!a||_O.disabled){this.safeSetState({status:so},function(){i.props.onExited(u)});return}this.props.onExit(u),this.safeSetState({status:mf},function(){i.props.onExiting(u),i.onTransitionEnd(c.exit,function(){i.safeSetState({status:so},function(){i.props.onExited(u)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(i,a){a=this.setNextCallback(a),this.setState(i,a)},n.setNextCallback=function(i){var a=this,c=!0;return this.nextCallback=function(u){c&&(c=!1,a.nextCallback=null,i(u))},this.nextCallback.cancel=function(){c=!1},this.nextCallback},n.onTransitionEnd=function(i,a){this.setNextCallback(a);var c=this.props.nodeRef?this.props.nodeRef.current:jc.findDOMNode(this),u=i==null&&!this.props.addEndListener;if(!c||u){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var f=this.props.nodeRef?[this.nextCallback]:[c,this.nextCallback],d=f[0],p=f[1];this.props.addEndListener(d,p)}i!=null&&setTimeout(this.nextCallback,i)},n.render=function(){var i=this.state.status;if(i===Lu)return null;var a=this.props,c=a.children;a.in,a.mountOnEnter,a.unmountOnExit,a.appear,a.enter,a.exit,a.timeout,a.addEndListener,a.onEnter,a.onEntering,a.onEntered,a.onExit,a.onExiting,a.onExited,a.nodeRef;var u=rN(a,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return bn.createElement(iN.Provider,{value:null},typeof c=="function"?c(i,u):bn.cloneElement(bn.Children.only(c),u))},t}(bn.Component);ws.contextType=iN;ws.propTypes={};function Bc(){}ws.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Bc,onEntering:Bc,onEntered:Bc,onExit:Bc,onExiting:Bc,onExited:Bc};ws.UNMOUNTED=Lu;ws.EXITED=so;ws.ENTERING=ni;ws.ENTERED=cs;ws.EXITING=mf;function rre(e){return e.code==="Escape"||e.keyCode===27}function ire(){const e=j.version.split(".");return{major:+e[0],minor:+e[1],patch:+e[2]}}function dl(e){if(!e||typeof e=="function")return null;const{major:t}=ire();return t>=19?e.props.ref:e.ref}const ng=!!(typeof window<"u"&&window.document&&window.document.createElement);var gv=!1,mv=!1;try{var W0={get passive(){return gv=!0},get once(){return mv=gv=!0}};ng&&(window.addEventListener("test",W0,W0),window.removeEventListener("test",W0,!0))}catch{}function sN(e,t,n,r){if(r&&typeof r!="boolean"&&!mv){var i=r.once,a=r.capture,c=n;!mv&&i&&(c=n.__once||function u(f){this.removeEventListener(t,u,a),n.call(this,f)},n.__once=c),e.addEventListener(t,c,gv?r:a)}e.addEventListener(t,n,r)}function sre(e,t,n,r){var i=r&&typeof r!="boolean"?r.capture:r;e.removeEventListener(t,n,i),n.__once&&e.removeEventListener(t,n.__once,i)}function lo(e,t,n,r){return sN(e,t,n,r),function(){sre(e,t,n,r)}}function ore(e,t,n,r){if(r===void 0&&(r=!0),e){var i=document.createEvent("HTMLEvents");i.initEvent(t,n,r),e.dispatchEvent(i)}}function are(e){var t=hs(e,"transitionDuration")||"",n=t.indexOf("ms")===-1?1e3:1;return parseFloat(t)*n}function cre(e,t,n){n===void 0&&(n=5);var r=!1,i=setTimeout(function(){r||ore(e,"transitionend",!0)},t+n),a=lo(e,"transitionend",function(){r=!0},{once:!0});return function(){clearTimeout(i),a()}}function lre(e,t,n,r){n==null&&(n=are(e)||0);var i=cre(e,n,r),a=lo(e,"transitionend",t);return function(){i(),a()}}function xO(e,t){const n=hs(e,t)||"",r=n.indexOf("ms")===-1?1e3:1;return parseFloat(n)*r}function Nw(e,t){const n=xO(e,"transitionDuration"),r=xO(e,"transitionDelay"),i=lre(e,a=>{a.target===e&&(i(),t(a))},n+r)}function Iu(...e){return e.filter(t=>t!=null).reduce((t,n)=>{if(typeof n!="function")throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return t===null?n:function(...i){t.apply(this,i),n.apply(this,i)}},null)}function oN(e){e.offsetHeight}const AO=e=>!e||typeof e=="function"?e:t=>{e.current=t};function ure(e,t){const n=AO(e),r=AO(t);return i=>{n&&n(i),r&&r(i)}}function $w(e,t){return j.useMemo(()=>ure(e,t),[e,t])}function fre(e){return e&&"setState"in e?jc.findDOMNode(e):e??null}const rg=bn.forwardRef(({onEnter:e,onEntering:t,onEntered:n,onExit:r,onExiting:i,onExited:a,addEndListener:c,children:u,childRef:f,...d},p)=>{const g=j.useRef(null),y=$w(g,f),b=B=>{y(fre(B))},v=B=>z=>{B&&g.current&&B(g.current,z)},E=j.useCallback(v(e),[e]),S=j.useCallback(v(t),[t]),_=j.useCallback(v(n),[n]),T=j.useCallback(v(r),[r]),O=j.useCallback(v(i),[i]),$=j.useCallback(v(a),[a]),I=j.useCallback(v(c),[c]);return P.jsx(ws,{ref:p,...d,onEnter:E,onEntered:_,onEntering:S,onExit:T,onExited:$,onExiting:O,addEndListener:I,nodeRef:g,children:typeof u=="function"?(B,z)=>u(B,{...z,ref:b}):bn.cloneElement(u,{ref:b})})});rg.displayName="TransitionWrapper";const dre={height:["marginTop","marginBottom"],width:["marginLeft","marginRight"]};function hre(e,t){const n=`offset${e[0].toUpperCase()}${e.slice(1)}`,r=t[n],i=dre[e];return r+parseInt(hs(t,i[0]),10)+parseInt(hs(t,i[1]),10)}const pre={[so]:"collapse",[mf]:"collapsing",[ni]:"collapsing",[cs]:"collapse show"},aN=bn.forwardRef(({onEnter:e,onEntering:t,onEntered:n,onExit:r,onExiting:i,className:a,children:c,dimension:u="height",in:f=!1,timeout:d=300,mountOnEnter:p=!1,unmountOnExit:g=!1,appear:y=!1,getDimensionValue:b=hre,...v},E)=>{const S=typeof u=="function"?u():u,_=j.useMemo(()=>Iu(B=>{B.style[S]="0"},e),[S,e]),T=j.useMemo(()=>Iu(B=>{const z=`scroll${S[0].toUpperCase()}${S.slice(1)}`;B.style[S]=`${B[z]}px`},t),[S,t]),O=j.useMemo(()=>Iu(B=>{B.style[S]=null},n),[S,n]),$=j.useMemo(()=>Iu(B=>{B.style[S]=`${b(S,B)}px`,oN(B)},r),[r,b,S]),I=j.useMemo(()=>Iu(B=>{B.style[S]=null},i),[S,i]);return P.jsx(rg,{ref:E,addEndListener:Nw,...v,"aria-expanded":v.role?f:null,onEnter:_,onEntering:T,onEntered:O,onExit:$,onExiting:I,childRef:dl(c),in:f,timeout:d,mountOnEnter:p,unmountOnExit:g,appear:y,children:(B,z)=>bn.cloneElement(c,{...z,className:bt(a,c.props.className,pre[B],S==="width"&&"collapse-horizontal")})})});aN.displayName="Collapse";function gre(e){const t=j.useRef(e);return j.useEffect(()=>{t.current=e},[e]),t}function jf(e){const t=gre(e);return j.useCallback(function(...n){return t.current&&t.current(...n)},[t])}const mre=e=>j.forwardRef((t,n)=>P.jsx("div",{...t,ref:n,className:bt(t.className,e)}));function yre(){return j.useState(null)}function bre(e){const t=j.useRef(e);return j.useEffect(()=>{t.current=e},[e]),t}function In(e){const t=bre(e);return j.useCallback(function(...n){return t.current&&t.current(...n)},[t])}function vre(e,t,n,r=!1){const i=In(n);j.useEffect(()=>{const a=typeof e=="function"?e():e;return a.addEventListener(t,i,r),()=>a.removeEventListener(t,i,r)},[e])}function cN(){const e=j.useRef(!0),t=j.useRef(()=>e.current);return j.useEffect(()=>(e.current=!0,()=>{e.current=!1}),[]),t.current}function lN(e){const t=j.useRef(null);return j.useEffect(()=>{t.current=e}),t.current}const wre=typeof global<"u"&&global.navigator&&global.navigator.product==="ReactNative",Ere=typeof document<"u",RO=Ere||wre?j.useLayoutEffect:j.useEffect,Sre=["as","disabled"];function _re(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function xre(e){return!e||e.trim()==="#"}function Bw({tagName:e,disabled:t,href:n,target:r,rel:i,role:a,onClick:c,tabIndex:u=0,type:f}){e||(n!=null||r!=null||i!=null?e="a":e="button");const d={tagName:e};if(e==="button")return[{type:f||"button",disabled:t},d];const p=y=>{if((t||e==="a"&&xre(n))&&y.preventDefault(),t){y.stopPropagation();return}c?.(y)},g=y=>{y.key===" "&&(y.preventDefault(),p(y))};return e==="a"&&(n||(n="#"),t&&(n=void 0)),[{role:a??"button",disabled:void 0,tabIndex:t?void 0:u,href:n,target:e==="a"?r:void 0,"aria-disabled":t||void 0,rel:e==="a"?i:void 0,onClick:p,onKeyDown:g},d]}const Pw=j.forwardRef((e,t)=>{let{as:n,disabled:r}=e,i=_re(e,Sre);const[a,{tagName:c}]=Bw(Object.assign({tagName:n,disabled:r},i));return P.jsx(c,Object.assign({},i,a,{ref:t}))});Pw.displayName="Button";const Are=["onKeyDown"];function Rre(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Ore(e){return!e||e.trim()==="#"}const Uw=j.forwardRef((e,t)=>{let{onKeyDown:n}=e,r=Rre(e,Are);const[i]=Bw(Object.assign({tagName:"a"},r)),a=In(c=>{i.onKeyDown(c),n?.(c)});return Ore(r.href)||r.role==="button"?P.jsx("a",Object.assign({ref:t},r,i,{onKeyDown:a})):P.jsx("a",Object.assign({ref:t},r,{onKeyDown:n}))});Uw.displayName="Anchor";const Tre={[ni]:"show",[cs]:"show"},uN=j.forwardRef(({className:e,children:t,transitionClasses:n={},onEnter:r,...i},a)=>{const c={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,...i},u=j.useCallback((f,d)=>{oN(f),r?.(f,d)},[r]);return P.jsx(rg,{ref:a,addEndListener:Nw,...c,onEnter:u,childRef:dl(t),children:(f,d)=>j.cloneElement(t,{...d,className:bt("fade",e,t.props.className,Tre[f],n[f])})})});uN.displayName="Fade";const Dre={"aria-label":K0.string,onClick:K0.func,variant:K0.oneOf(["white"])},kw=j.forwardRef(({className:e,variant:t,"aria-label":n="Close",...r},i)=>P.jsx("button",{ref:i,type:"button",className:bt("btn-close",t&&`btn-close-${t}`,e),"aria-label":n,...r}));kw.displayName="CloseButton";kw.propTypes=Dre;const fN=j.forwardRef(({as:e,bsPrefix:t,variant:n="primary",size:r,active:i=!1,disabled:a=!1,className:c,...u},f)=>{const d=Bt(t,"btn"),[p,{tagName:g}]=Bw({tagName:e,disabled:a,...u}),y=g;return P.jsx(y,{...p,...u,ref:f,disabled:a,className:bt(c,d,i&&"active",n&&`${d}-${n}`,r&&`${d}-${r}`,u.href&&a&&"disabled")})});fN.displayName="Button";const dN=j.createContext(null);dN.displayName="CardHeaderContext";const hN=j.forwardRef(({bsPrefix:e,fluid:t=!1,as:n="div",className:r,...i},a)=>{const c=Bt(e,"container"),u=typeof t=="string"?`-${t}`:"-fluid";return P.jsx(n,{ref:a,...i,className:bt(r,t?`${c}${u}`:c)})});hN.displayName="Container";var Cre=Function.prototype.bind.call(Function.prototype.call,[].slice);function os(e,t){return Cre(e.querySelectorAll(t))}function Ire(e,t,n){const r=j.useRef(e!==void 0),[i,a]=j.useState(t),c=e!==void 0,u=r.current;return r.current=c,!c&&u&&i!==t&&a(t),[c?e:i,j.useCallback((...f)=>{const[d,...p]=f;let g=n?.(d,...p);return a(d),g},[n])]}function pN(){const[,e]=j.useReducer(t=>t+1,0);return e}const ig=j.createContext(null);var OO=Object.prototype.hasOwnProperty;function TO(e,t,n){for(n of e.keys())if(Zu(n,t))return n}function Zu(e,t){var n,r,i;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((r=e.length)===t.length)for(;r--&&Zu(e[r],t[r]););return r===-1}if(n===Set){if(e.size!==t.size)return!1;for(r of e)if(i=r,i&&typeof i=="object"&&(i=TO(t,i),!i)||!t.has(i))return!1;return!0}if(n===Map){if(e.size!==t.size)return!1;for(r of e)if(i=r[0],i&&typeof i=="object"&&(i=TO(t,i),!i)||!Zu(r[1],t.get(i)))return!1;return!0}if(n===ArrayBuffer)e=new Uint8Array(e),t=new Uint8Array(t);else if(n===DataView){if((r=e.byteLength)===t.byteLength)for(;r--&&e.getInt8(r)===t.getInt8(r););return r===-1}if(ArrayBuffer.isView(e)){if((r=e.byteLength)===t.byteLength)for(;r--&&e[r]===t[r];);return r===-1}if(!n||typeof e=="object"){r=0;for(n in e)if(OO.call(e,n)&&++r&&!OO.call(t,n)||!(n in t)||!Zu(e[n],t[n]))return!1;return Object.keys(t).length===r}}return e!==e&&t!==t}function Nre(e){const t=cN();return[e[0],j.useCallback(n=>{if(t())return e[1](n)},[t,e[1]])]}var Jn="top",zr="bottom",qr="right",er="left",Mw="auto",Lf=[Jn,zr,qr,er],Xc="start",yf="end",$re="clippingParents",gN="viewport",Nu="popper",Bre="reference",DO=Lf.reduce(function(e,t){return e.concat([t+"-"+Xc,t+"-"+yf])},[]),mN=[].concat(Lf,[Mw]).reduce(function(e,t){return e.concat([t,t+"-"+Xc,t+"-"+yf])},[]),Pre="beforeRead",Ure="read",kre="afterRead",Mre="beforeMain",jre="main",Lre="afterMain",zre="beforeWrite",qre="write",Hre="afterWrite",Fre=[Pre,Ure,kre,Mre,jre,Lre,zre,qre,Hre];function Oi(e){return e.split("-")[0]}function wr(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function da(e){var t=wr(e).Element;return e instanceof t||e instanceof Element}function Ti(e){var t=wr(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function jw(e){if(typeof ShadowRoot>"u")return!1;var t=wr(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}var na=Math.max,mp=Math.min,Zc=Math.round;function yv(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function yN(){return!/^((?!chrome|android).)*safari/i.test(yv())}function Qc(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!1);var r=e.getBoundingClientRect(),i=1,a=1;t&&Ti(e)&&(i=e.offsetWidth>0&&Zc(r.width)/e.offsetWidth||1,a=e.offsetHeight>0&&Zc(r.height)/e.offsetHeight||1);var c=da(e)?wr(e):window,u=c.visualViewport,f=!yN()&&n,d=(r.left+(f&&u?u.offsetLeft:0))/i,p=(r.top+(f&&u?u.offsetTop:0))/a,g=r.width/i,y=r.height/a;return{width:g,height:y,top:p,right:d+g,bottom:p+y,left:d,x:d,y:p}}function Lw(e){var t=Qc(e),n=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:r}}function bN(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&jw(n)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function po(e){return e?(e.nodeName||"").toLowerCase():null}function bs(e){return wr(e).getComputedStyle(e)}function Vre(e){return["table","td","th"].indexOf(po(e))>=0}function bo(e){return((da(e)?e.ownerDocument:e.document)||window.document).documentElement}function sg(e){return po(e)==="html"?e:e.assignedSlot||e.parentNode||(jw(e)?e.host:null)||bo(e)}function CO(e){return!Ti(e)||bs(e).position==="fixed"?null:e.offsetParent}function Gre(e){var t=/firefox/i.test(yv()),n=/Trident/i.test(yv());if(n&&Ti(e)){var r=bs(e);if(r.position==="fixed")return null}var i=sg(e);for(jw(i)&&(i=i.host);Ti(i)&&["html","body"].indexOf(po(i))<0;){var a=bs(i);if(a.transform!=="none"||a.perspective!=="none"||a.contain==="paint"||["transform","perspective"].indexOf(a.willChange)!==-1||t&&a.willChange==="filter"||t&&a.filter&&a.filter!=="none")return i;i=i.parentNode}return null}function zf(e){for(var t=wr(e),n=CO(e);n&&Vre(n)&&bs(n).position==="static";)n=CO(n);return n&&(po(n)==="html"||po(n)==="body"&&bs(n).position==="static")?t:n||Gre(e)||t}function zw(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Qu(e,t,n){return na(e,mp(t,n))}function Kre(e,t,n){var r=Qu(e,t,n);return r>n?n:r}function vN(){return{top:0,right:0,bottom:0,left:0}}function wN(e){return Object.assign({},vN(),e)}function EN(e,t){return t.reduce(function(n,r){return n[r]=e,n},{})}var Wre=function(t,n){return t=typeof t=="function"?t(Object.assign({},n.rects,{placement:n.placement})):t,wN(typeof t!="number"?t:EN(t,Lf))};function Yre(e){var t,n=e.state,r=e.name,i=e.options,a=n.elements.arrow,c=n.modifiersData.popperOffsets,u=Oi(n.placement),f=zw(u),d=[er,qr].indexOf(u)>=0,p=d?"height":"width";if(!(!a||!c)){var g=Wre(i.padding,n),y=Lw(a),b=f==="y"?Jn:er,v=f==="y"?zr:qr,E=n.rects.reference[p]+n.rects.reference[f]-c[f]-n.rects.popper[p],S=c[f]-n.rects.reference[f],_=zf(a),T=_?f==="y"?_.clientHeight||0:_.clientWidth||0:0,O=E/2-S/2,$=g[b],I=T-y[p]-g[v],B=T/2-y[p]/2+O,z=Qu($,B,I),q=f;n.modifiersData[r]=(t={},t[q]=z,t.centerOffset=z-B,t)}}function Xre(e){var t=e.state,n=e.options,r=n.element,i=r===void 0?"[data-popper-arrow]":r;i!=null&&(typeof i=="string"&&(i=t.elements.popper.querySelector(i),!i)||bN(t.elements.popper,i)&&(t.elements.arrow=i))}const Zre={name:"arrow",enabled:!0,phase:"main",fn:Yre,effect:Xre,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Jc(e){return e.split("-")[1]}var Qre={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Jre(e,t){var n=e.x,r=e.y,i=t.devicePixelRatio||1;return{x:Zc(n*i)/i||0,y:Zc(r*i)/i||0}}function IO(e){var t,n=e.popper,r=e.popperRect,i=e.placement,a=e.variation,c=e.offsets,u=e.position,f=e.gpuAcceleration,d=e.adaptive,p=e.roundOffsets,g=e.isFixed,y=c.x,b=y===void 0?0:y,v=c.y,E=v===void 0?0:v,S=typeof p=="function"?p({x:b,y:E}):{x:b,y:E};b=S.x,E=S.y;var _=c.hasOwnProperty("x"),T=c.hasOwnProperty("y"),O=er,$=Jn,I=window;if(d){var B=zf(n),z="clientHeight",q="clientWidth";if(B===wr(n)&&(B=bo(n),bs(B).position!=="static"&&u==="absolute"&&(z="scrollHeight",q="scrollWidth")),B=B,i===Jn||(i===er||i===qr)&&a===yf){$=zr;var k=g&&B===I&&I.visualViewport?I.visualViewport.height:B[z];E-=k-r.height,E*=f?1:-1}if(i===er||(i===Jn||i===zr)&&a===yf){O=qr;var W=g&&B===I&&I.visualViewport?I.visualViewport.width:B[q];b-=W-r.width,b*=f?1:-1}}var F=Object.assign({position:u},d&&Qre),G=p===!0?Jre({x:b,y:E},wr(n)):{x:b,y:E};if(b=G.x,E=G.y,f){var ne;return Object.assign({},F,(ne={},ne[$]=T?"0":"",ne[O]=_?"0":"",ne.transform=(I.devicePixelRatio||1)<=1?"translate("+b+"px, "+E+"px)":"translate3d("+b+"px, "+E+"px, 0)",ne))}return Object.assign({},F,(t={},t[$]=T?E+"px":"",t[O]=_?b+"px":"",t.transform="",t))}function eie(e){var t=e.state,n=e.options,r=n.gpuAcceleration,i=r===void 0?!0:r,a=n.adaptive,c=a===void 0?!0:a,u=n.roundOffsets,f=u===void 0?!0:u,d={placement:Oi(t.placement),variation:Jc(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:i,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,IO(Object.assign({},d,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:c,roundOffsets:f})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,IO(Object.assign({},d,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:f})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const tie={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:eie,data:{}};var Dh={passive:!0};function nie(e){var t=e.state,n=e.instance,r=e.options,i=r.scroll,a=i===void 0?!0:i,c=r.resize,u=c===void 0?!0:c,f=wr(t.elements.popper),d=[].concat(t.scrollParents.reference,t.scrollParents.popper);return a&&d.forEach(function(p){p.addEventListener("scroll",n.update,Dh)}),u&&f.addEventListener("resize",n.update,Dh),function(){a&&d.forEach(function(p){p.removeEventListener("scroll",n.update,Dh)}),u&&f.removeEventListener("resize",n.update,Dh)}}const rie={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:nie,data:{}};var iie={left:"right",right:"left",bottom:"top",top:"bottom"};function Wh(e){return e.replace(/left|right|bottom|top/g,function(t){return iie[t]})}var sie={start:"end",end:"start"};function NO(e){return e.replace(/start|end/g,function(t){return sie[t]})}function qw(e){var t=wr(e),n=t.pageXOffset,r=t.pageYOffset;return{scrollLeft:n,scrollTop:r}}function Hw(e){return Qc(bo(e)).left+qw(e).scrollLeft}function oie(e,t){var n=wr(e),r=bo(e),i=n.visualViewport,a=r.clientWidth,c=r.clientHeight,u=0,f=0;if(i){a=i.width,c=i.height;var d=yN();(d||!d&&t==="fixed")&&(u=i.offsetLeft,f=i.offsetTop)}return{width:a,height:c,x:u+Hw(e),y:f}}function aie(e){var t,n=bo(e),r=qw(e),i=(t=e.ownerDocument)==null?void 0:t.body,a=na(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),c=na(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),u=-r.scrollLeft+Hw(e),f=-r.scrollTop;return bs(i||n).direction==="rtl"&&(u+=na(n.clientWidth,i?i.clientWidth:0)-a),{width:a,height:c,x:u,y:f}}function Fw(e){var t=bs(e),n=t.overflow,r=t.overflowX,i=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function SN(e){return["html","body","#document"].indexOf(po(e))>=0?e.ownerDocument.body:Ti(e)&&Fw(e)?e:SN(sg(e))}function Ju(e,t){var n;t===void 0&&(t=[]);var r=SN(e),i=r===((n=e.ownerDocument)==null?void 0:n.body),a=wr(r),c=i?[a].concat(a.visualViewport||[],Fw(r)?r:[]):r,u=t.concat(c);return i?u:u.concat(Ju(sg(c)))}function bv(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function cie(e,t){var n=Qc(e,!1,t==="fixed");return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}function $O(e,t,n){return t===gN?bv(oie(e,n)):da(t)?cie(t,n):bv(aie(bo(e)))}function lie(e){var t=Ju(sg(e)),n=["absolute","fixed"].indexOf(bs(e).position)>=0,r=n&&Ti(e)?zf(e):e;return da(r)?t.filter(function(i){return da(i)&&bN(i,r)&&po(i)!=="body"}):[]}function uie(e,t,n,r){var i=t==="clippingParents"?lie(e):[].concat(t),a=[].concat(i,[n]),c=a[0],u=a.reduce(function(f,d){var p=$O(e,d,r);return f.top=na(p.top,f.top),f.right=mp(p.right,f.right),f.bottom=mp(p.bottom,f.bottom),f.left=na(p.left,f.left),f},$O(e,c,r));return u.width=u.right-u.left,u.height=u.bottom-u.top,u.x=u.left,u.y=u.top,u}function _N(e){var t=e.reference,n=e.element,r=e.placement,i=r?Oi(r):null,a=r?Jc(r):null,c=t.x+t.width/2-n.width/2,u=t.y+t.height/2-n.height/2,f;switch(i){case Jn:f={x:c,y:t.y-n.height};break;case zr:f={x:c,y:t.y+t.height};break;case qr:f={x:t.x+t.width,y:u};break;case er:f={x:t.x-n.width,y:u};break;default:f={x:t.x,y:t.y}}var d=i?zw(i):null;if(d!=null){var p=d==="y"?"height":"width";switch(a){case Xc:f[d]=f[d]-(t[p]/2-n[p]/2);break;case yf:f[d]=f[d]+(t[p]/2-n[p]/2);break}}return f}function bf(e,t){t===void 0&&(t={});var n=t,r=n.placement,i=r===void 0?e.placement:r,a=n.strategy,c=a===void 0?e.strategy:a,u=n.boundary,f=u===void 0?$re:u,d=n.rootBoundary,p=d===void 0?gN:d,g=n.elementContext,y=g===void 0?Nu:g,b=n.altBoundary,v=b===void 0?!1:b,E=n.padding,S=E===void 0?0:E,_=wN(typeof S!="number"?S:EN(S,Lf)),T=y===Nu?Bre:Nu,O=e.rects.popper,$=e.elements[v?T:y],I=uie(da($)?$:$.contextElement||bo(e.elements.popper),f,p,c),B=Qc(e.elements.reference),z=_N({reference:B,element:O,placement:i}),q=bv(Object.assign({},O,z)),k=y===Nu?q:B,W={top:I.top-k.top+_.top,bottom:k.bottom-I.bottom+_.bottom,left:I.left-k.left+_.left,right:k.right-I.right+_.right},F=e.modifiersData.offset;if(y===Nu&&F){var G=F[i];Object.keys(W).forEach(function(ne){var ee=[qr,zr].indexOf(ne)>=0?1:-1,D=[Jn,zr].indexOf(ne)>=0?"y":"x";W[ne]+=G[D]*ee})}return W}function fie(e,t){t===void 0&&(t={});var n=t,r=n.placement,i=n.boundary,a=n.rootBoundary,c=n.padding,u=n.flipVariations,f=n.allowedAutoPlacements,d=f===void 0?mN:f,p=Jc(r),g=p?u?DO:DO.filter(function(v){return Jc(v)===p}):Lf,y=g.filter(function(v){return d.indexOf(v)>=0});y.length===0&&(y=g);var b=y.reduce(function(v,E){return v[E]=bf(e,{placement:E,boundary:i,rootBoundary:a,padding:c})[Oi(E)],v},{});return Object.keys(b).sort(function(v,E){return b[v]-b[E]})}function die(e){if(Oi(e)===Mw)return[];var t=Wh(e);return[NO(e),t,NO(t)]}function hie(e){var t=e.state,n=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var i=n.mainAxis,a=i===void 0?!0:i,c=n.altAxis,u=c===void 0?!0:c,f=n.fallbackPlacements,d=n.padding,p=n.boundary,g=n.rootBoundary,y=n.altBoundary,b=n.flipVariations,v=b===void 0?!0:b,E=n.allowedAutoPlacements,S=t.options.placement,_=Oi(S),T=_===S,O=f||(T||!v?[Wh(S)]:die(S)),$=[S].concat(O).reduce(function(ie,fe){return ie.concat(Oi(fe)===Mw?fie(t,{placement:fe,boundary:p,rootBoundary:g,padding:d,flipVariations:v,allowedAutoPlacements:E}):fe)},[]),I=t.rects.reference,B=t.rects.popper,z=new Map,q=!0,k=$[0],W=0;W<$.length;W++){var F=$[W],G=Oi(F),ne=Jc(F)===Xc,ee=[Jn,zr].indexOf(G)>=0,D=ee?"width":"height",R=bf(t,{placement:F,boundary:p,rootBoundary:g,altBoundary:y,padding:d}),L=ee?ne?qr:er:ne?zr:Jn;I[D]>B[D]&&(L=Wh(L));var V=Wh(L),X=[];if(a&&X.push(R[G]<=0),u&&X.push(R[L]<=0,R[V]<=0),X.every(function(ie){return ie})){k=F,q=!1;break}z.set(F,X)}if(q)for(var N=v?3:1,K=function(fe){var Q=$.find(function(ve){var ye=z.get(ve);if(ye)return ye.slice(0,fe).every(function(_e){return _e})});if(Q)return k=Q,"break"},te=N;te>0;te--){var se=K(te);if(se==="break")break}t.placement!==k&&(t.modifiersData[r]._skip=!0,t.placement=k,t.reset=!0)}}const pie={name:"flip",enabled:!0,phase:"main",fn:hie,requiresIfExists:["offset"],data:{_skip:!1}};function BO(e,t,n){return n===void 0&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function PO(e){return[Jn,qr,zr,er].some(function(t){return e[t]>=0})}function gie(e){var t=e.state,n=e.name,r=t.rects.reference,i=t.rects.popper,a=t.modifiersData.preventOverflow,c=bf(t,{elementContext:"reference"}),u=bf(t,{altBoundary:!0}),f=BO(c,r),d=BO(u,i,a),p=PO(f),g=PO(d);t.modifiersData[n]={referenceClippingOffsets:f,popperEscapeOffsets:d,isReferenceHidden:p,hasPopperEscaped:g},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":p,"data-popper-escaped":g})}const mie={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:gie};function yie(e,t,n){var r=Oi(e),i=[er,Jn].indexOf(r)>=0?-1:1,a=typeof n=="function"?n(Object.assign({},t,{placement:e})):n,c=a[0],u=a[1];return c=c||0,u=(u||0)*i,[er,qr].indexOf(r)>=0?{x:u,y:c}:{x:c,y:u}}function bie(e){var t=e.state,n=e.options,r=e.name,i=n.offset,a=i===void 0?[0,0]:i,c=mN.reduce(function(p,g){return p[g]=yie(g,t.rects,a),p},{}),u=c[t.placement],f=u.x,d=u.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=f,t.modifiersData.popperOffsets.y+=d),t.modifiersData[r]=c}const vie={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:bie};function wie(e){var t=e.state,n=e.name;t.modifiersData[n]=_N({reference:t.rects.reference,element:t.rects.popper,placement:t.placement})}const Eie={name:"popperOffsets",enabled:!0,phase:"read",fn:wie,data:{}};function Sie(e){return e==="x"?"y":"x"}function _ie(e){var t=e.state,n=e.options,r=e.name,i=n.mainAxis,a=i===void 0?!0:i,c=n.altAxis,u=c===void 0?!1:c,f=n.boundary,d=n.rootBoundary,p=n.altBoundary,g=n.padding,y=n.tether,b=y===void 0?!0:y,v=n.tetherOffset,E=v===void 0?0:v,S=bf(t,{boundary:f,rootBoundary:d,padding:g,altBoundary:p}),_=Oi(t.placement),T=Jc(t.placement),O=!T,$=zw(_),I=Sie($),B=t.modifiersData.popperOffsets,z=t.rects.reference,q=t.rects.popper,k=typeof E=="function"?E(Object.assign({},t.rects,{placement:t.placement})):E,W=typeof k=="number"?{mainAxis:k,altAxis:k}:Object.assign({mainAxis:0,altAxis:0},k),F=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,G={x:0,y:0};if(B){if(a){var ne,ee=$==="y"?Jn:er,D=$==="y"?zr:qr,R=$==="y"?"height":"width",L=B[$],V=L+S[ee],X=L-S[D],N=b?-q[R]/2:0,K=T===Xc?z[R]:q[R],te=T===Xc?-q[R]:-z[R],se=t.elements.arrow,ie=b&&se?Lw(se):{width:0,height:0},fe=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:vN(),Q=fe[ee],ve=fe[D],ye=Qu(0,z[R],ie[R]),_e=O?z[R]/2-N-ye-Q-W.mainAxis:K-ye-Q-W.mainAxis,Oe=O?-z[R]/2+N+ye+ve+W.mainAxis:te+ye+ve+W.mainAxis,ke=t.elements.arrow&&zf(t.elements.arrow),Et=ke?$==="y"?ke.clientTop||0:ke.clientLeft||0:0,Tt=(ne=F?.[$])!=null?ne:0,xt=L+_e-Tt-Et,Ye=L+Oe-Tt,Vr=Qu(b?mp(V,xt):V,L,b?na(X,Ye):X);B[$]=Vr,G[$]=Vr-L}if(u){var At,vo=$==="x"?Jn:er,Pi=$==="x"?zr:qr,Sn=B[I],Qt=I==="y"?"height":"width",Jt=Sn+S[vo],Sr=Sn-S[Pi],ai=[Jn,er].indexOf(_)!==-1,_n=(At=F?.[I])!=null?At:0,sr=ai?Jt:Sn-z[Qt]-q[Qt]-_n+W.altAxis,U=ai?Sn+z[Qt]+q[Qt]-_n-W.altAxis:Sr,x=b&&ai?Kre(sr,Sn,U):Qu(b?sr:Jt,Sn,b?U:Sr);B[I]=x,G[I]=x-Sn}t.modifiersData[r]=G}}const xie={name:"preventOverflow",enabled:!0,phase:"main",fn:_ie,requiresIfExists:["offset"]};function Aie(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function Rie(e){return e===wr(e)||!Ti(e)?qw(e):Aie(e)}function Oie(e){var t=e.getBoundingClientRect(),n=Zc(t.width)/e.offsetWidth||1,r=Zc(t.height)/e.offsetHeight||1;return n!==1||r!==1}function Tie(e,t,n){n===void 0&&(n=!1);var r=Ti(t),i=Ti(t)&&Oie(t),a=bo(t),c=Qc(e,i,n),u={scrollLeft:0,scrollTop:0},f={x:0,y:0};return(r||!r&&!n)&&((po(t)!=="body"||Fw(a))&&(u=Rie(t)),Ti(t)?(f=Qc(t,!0),f.x+=t.clientLeft,f.y+=t.clientTop):a&&(f.x=Hw(a))),{x:c.left+u.scrollLeft-f.x,y:c.top+u.scrollTop-f.y,width:c.width,height:c.height}}function Die(e){var t=new Map,n=new Set,r=[];e.forEach(function(a){t.set(a.name,a)});function i(a){n.add(a.name);var c=[].concat(a.requires||[],a.requiresIfExists||[]);c.forEach(function(u){if(!n.has(u)){var f=t.get(u);f&&i(f)}}),r.push(a)}return e.forEach(function(a){n.has(a.name)||i(a)}),r}function Cie(e){var t=Die(e);return Fre.reduce(function(n,r){return n.concat(t.filter(function(i){return i.phase===r}))},[])}function Iie(e){var t;return function(){return t||(t=new Promise(function(n){Promise.resolve().then(function(){t=void 0,n(e())})})),t}}function Nie(e){var t=e.reduce(function(n,r){var i=n[r.name];return n[r.name]=i?Object.assign({},i,r,{options:Object.assign({},i.options,r.options),data:Object.assign({},i.data,r.data)}):r,n},{});return Object.keys(t).map(function(n){return t[n]})}var UO={placement:"bottom",modifiers:[],strategy:"absolute"};function kO(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function $ie(e){e===void 0&&(e={});var t=e,n=t.defaultModifiers,r=n===void 0?[]:n,i=t.defaultOptions,a=i===void 0?UO:i;return function(u,f,d){d===void 0&&(d=a);var p={placement:"bottom",orderedModifiers:[],options:Object.assign({},UO,a),modifiersData:{},elements:{reference:u,popper:f},attributes:{},styles:{}},g=[],y=!1,b={state:p,setOptions:function(_){var T=typeof _=="function"?_(p.options):_;E(),p.options=Object.assign({},a,p.options,T),p.scrollParents={reference:da(u)?Ju(u):u.contextElement?Ju(u.contextElement):[],popper:Ju(f)};var O=Cie(Nie([].concat(r,p.options.modifiers)));return p.orderedModifiers=O.filter(function($){return $.enabled}),v(),b.update()},forceUpdate:function(){if(!y){var _=p.elements,T=_.reference,O=_.popper;if(kO(T,O)){p.rects={reference:Tie(T,zf(O),p.options.strategy==="fixed"),popper:Lw(O)},p.reset=!1,p.placement=p.options.placement,p.orderedModifiers.forEach(function(W){return p.modifiersData[W.name]=Object.assign({},W.data)});for(var $=0;$<p.orderedModifiers.length;$++){if(p.reset===!0){p.reset=!1,$=-1;continue}var I=p.orderedModifiers[$],B=I.fn,z=I.options,q=z===void 0?{}:z,k=I.name;typeof B=="function"&&(p=B({state:p,options:q,name:k,instance:b})||p)}}}},update:Iie(function(){return new Promise(function(S){b.forceUpdate(),S(p)})}),destroy:function(){E(),y=!0}};if(!kO(u,f))return b;b.setOptions(d).then(function(S){!y&&d.onFirstUpdate&&d.onFirstUpdate(S)});function v(){p.orderedModifiers.forEach(function(S){var _=S.name,T=S.options,O=T===void 0?{}:T,$=S.effect;if(typeof $=="function"){var I=$({state:p,name:_,instance:b,options:O}),B=function(){};g.push(I||B)}})}function E(){g.forEach(function(S){return S()}),g=[]}return b}}const Bie=$ie({defaultModifiers:[mie,Eie,tie,rie,vie,pie,xie,Zre]}),Pie=["enabled","placement","strategy","modifiers"];function Uie(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}const kie={name:"applyStyles",enabled:!1,phase:"afterWrite",fn:()=>{}},Mie={name:"ariaDescribedBy",enabled:!0,phase:"afterWrite",effect:({state:e})=>()=>{const{reference:t,popper:n}=e.elements;if("removeAttribute"in t){const r=(t.getAttribute("aria-describedby")||"").split(",").filter(i=>i.trim()!==n.id);r.length?t.setAttribute("aria-describedby",r.join(",")):t.removeAttribute("aria-describedby")}},fn:({state:e})=>{var t;const{popper:n,reference:r}=e.elements,i=(t=n.getAttribute("role"))==null?void 0:t.toLowerCase();if(n.id&&i==="tooltip"&&"setAttribute"in r){const a=r.getAttribute("aria-describedby");if(a&&a.split(",").indexOf(n.id)!==-1)return;r.setAttribute("aria-describedby",a?`${a},${n.id}`:n.id)}}},jie=[];function Lie(e,t,n={}){let{enabled:r=!0,placement:i="bottom",strategy:a="absolute",modifiers:c=jie}=n,u=Uie(n,Pie);const f=j.useRef(c),d=j.useRef(),p=j.useCallback(()=>{var S;(S=d.current)==null||S.update()},[]),g=j.useCallback(()=>{var S;(S=d.current)==null||S.forceUpdate()},[]),[y,b]=Nre(j.useState({placement:i,update:p,forceUpdate:g,attributes:{},styles:{popper:{},arrow:{}}})),v=j.useMemo(()=>({name:"updateStateModifier",enabled:!0,phase:"write",requires:["computeStyles"],fn:({state:S})=>{const _={},T={};Object.keys(S.elements).forEach(O=>{_[O]=S.styles[O],T[O]=S.attributes[O]}),b({state:S,styles:_,attributes:T,update:p,forceUpdate:g,placement:S.placement})}}),[p,g,b]),E=j.useMemo(()=>(Zu(f.current,c)||(f.current=c),f.current),[c]);return j.useEffect(()=>{!d.current||!r||d.current.setOptions({placement:i,strategy:a,modifiers:[...E,v,kie]})},[a,i,v,r,E]),j.useEffect(()=>{if(!(!r||e==null||t==null))return d.current=Bie(e,t,Object.assign({},u,{placement:i,strategy:a,modifiers:[...E,Mie,v]})),()=>{d.current!=null&&(d.current.destroy(),d.current=void 0,b(S=>Object.assign({},S,{attributes:{},styles:{popper:{}}})))}},[r,e,t]),y}function yp(e,t){if(e.contains)return e.contains(t);if(e.compareDocumentPosition)return e===t||!!(e.compareDocumentPosition(t)&16)}var Y0,MO;function zie(){if(MO)return Y0;MO=1;var e=function(){};return Y0=e,Y0}var qie=zie();const Hie=vs(qie),jO=()=>{};function Fie(e){return e.button===0}function Vie(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}const X0=e=>e&&("current"in e?e.current:e),LO={click:"mousedown",mouseup:"mousedown",pointerup:"pointerdown"};function Gie(e,t=jO,{disabled:n,clickTrigger:r="click"}={}){const i=j.useRef(!1),a=j.useRef(!1),c=j.useCallback(d=>{const p=X0(e);Hie(!!p,"ClickOutside captured a close event but does not have a ref to compare it to. useClickOutside(), should be passed a ref that resolves to a DOM node"),i.current=!p||Vie(d)||!Fie(d)||!!yp(p,d.target)||a.current,a.current=!1},[e]),u=In(d=>{const p=X0(e);p&&yp(p,d.target)?a.current=!0:a.current=!1}),f=In(d=>{i.current||t(d)});j.useEffect(()=>{var d,p;if(n||e==null)return;const g=tg(X0(e)),y=g.defaultView||window;let b=(d=y.event)!=null?d:(p=y.parent)==null?void 0:p.event,v=null;LO[r]&&(v=lo(g,LO[r],u,!0));const E=lo(g,r,c,!0),S=lo(g,r,T=>{if(T===b){b=void 0;return}f(T)});let _=[];return"ontouchstart"in g.documentElement&&(_=[].slice.call(g.body.children).map(T=>lo(T,"mousemove",jO))),()=>{v?.(),E(),S(),_.forEach(T=>T())}},[e,n,r,c,u,f])}function Kie(e){const t={};return Array.isArray(e)?(e?.forEach(n=>{t[n.name]=n}),t):e||t}function Wie(e={}){return Array.isArray(e)?e:Object.keys(e).map(t=>(e[t].name=t,e[t]))}function Yie({enabled:e,enableEvents:t,placement:n,flip:r,offset:i,fixed:a,containerPadding:c,arrowElement:u,popperConfig:f={}}){var d,p,g,y,b;const v=Kie(f.modifiers);return Object.assign({},f,{placement:n,enabled:e,strategy:a?"fixed":f.strategy,modifiers:Wie(Object.assign({},v,{eventListeners:{enabled:t,options:(d=v.eventListeners)==null?void 0:d.options},preventOverflow:Object.assign({},v.preventOverflow,{options:c?Object.assign({padding:c},(p=v.preventOverflow)==null?void 0:p.options):(g=v.preventOverflow)==null?void 0:g.options}),offset:{options:Object.assign({offset:i},(y=v.offset)==null?void 0:y.options)},arrow:Object.assign({},v.arrow,{enabled:!!u,options:Object.assign({},(b=v.arrow)==null?void 0:b.options,{element:u})}),flip:Object.assign({enabled:!!r},v.flip)}))})}const Xie=["children","usePopper"];function Zie(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}const Qie=()=>{};function xN(e={}){const t=j.useContext(ig),[n,r]=yre(),i=j.useRef(!1),{flip:a,offset:c,rootCloseEvent:u,fixed:f=!1,placement:d,popperConfig:p={},enableEventListeners:g=!0,usePopper:y=!!t}=e,b=t?.show==null?!!e.show:t.show;b&&!i.current&&(i.current=!0);const v=B=>{t?.toggle(!1,B)},{placement:E,setMenu:S,menuElement:_,toggleElement:T}=t||{},O=Lie(T,_,Yie({placement:d||E||"bottom-start",enabled:y,enableEvents:g??b,offset:c,flip:a,fixed:f,arrowElement:n,popperConfig:p})),$=Object.assign({ref:S||Qie,"aria-labelledby":T?.id},O.attributes.popper,{style:O.styles.popper}),I={show:b,placement:E,hasShown:i.current,toggle:t?.toggle,popper:y?O:null,arrowProps:y?Object.assign({ref:r},O.attributes.arrow,{style:O.styles.arrow}):{}};return Gie(_,v,{clickTrigger:u,disabled:!b}),[$,I]}function AN(e){let{children:t,usePopper:n=!0}=e,r=Zie(e,Xie);const[i,a]=xN(Object.assign({},r,{usePopper:n}));return P.jsx(P.Fragment,{children:t(i,a)})}AN.displayName="DropdownMenu";const RN={prefix:String(Math.round(Math.random()*1e10)),current:0},ON=bn.createContext(RN),Jie=bn.createContext(!1);let Z0=new WeakMap;function ese(e=!1){let t=j.useContext(ON),n=j.useRef(null);if(n.current===null&&!e){var r,i;let a=(i=bn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED)===null||i===void 0||(r=i.ReactCurrentOwner)===null||r===void 0?void 0:r.current;if(a){let c=Z0.get(a);c==null?Z0.set(a,{id:t.current,state:a.memoizedState}):a.memoizedState!==c.state&&(t.current=c.id,Z0.delete(a))}n.current=++t.current}return n.current}function tse(e){let t=j.useContext(ON),n=ese(!!e),r=`react-aria${t.prefix}`;return e||`${r}-${n}`}function nse(e){let t=bn.useId(),[n]=j.useState(ase()),r=n?"react-aria":`react-aria${RN.prefix}`;return e||`${r}-${t}`}const rse=typeof bn.useId=="function"?nse:tse;function ise(){return!1}function sse(){return!0}function ose(e){return()=>{}}function ase(){return typeof bn.useSyncExternalStore=="function"?bn.useSyncExternalStore(ose,ise,sse):j.useContext(Jie)}const TN=e=>{var t;return((t=e.getAttribute("role"))==null?void 0:t.toLowerCase())==="menu"},zO=()=>{};function DN(){const e=rse(),{show:t=!1,toggle:n=zO,setToggle:r,menuElement:i}=j.useContext(ig)||{},a=j.useCallback(u=>{n(!t,u)},[t,n]),c={id:e,ref:r||zO,onClick:a,"aria-expanded":!!t};return i&&TN(i)&&(c["aria-haspopup"]=!0),[c,{show:t,toggle:n}]}function CN({children:e}){const[t,n]=DN();return P.jsx(P.Fragment,{children:e(t,n)})}CN.displayName="DropdownToggle";const ha=j.createContext(null),vf=(e,t=null)=>e!=null?String(e):t||null,og=j.createContext(null);og.displayName="NavContext";const cse="data-rr-ui-",lse="rrUi";function hl(e){return`${cse}${e}`}function use(e){return`${lse}${e}`}const fse=["eventKey","disabled","onClick","active","as"];function dse(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function IN({key:e,href:t,active:n,disabled:r,onClick:i}){const a=j.useContext(ha),c=j.useContext(og),{activeKey:u}=c||{},f=vf(e,t),d=n==null&&e!=null?vf(u)===f:n;return[{onClick:In(g=>{r||(i?.(g),a&&!g.isPropagationStopped()&&a(f,g))}),"aria-disabled":r||void 0,"aria-selected":d,[hl("dropdown-item")]:""},{isActive:d}]}const NN=j.forwardRef((e,t)=>{let{eventKey:n,disabled:r,onClick:i,active:a,as:c=Pw}=e,u=dse(e,fse);const[f]=IN({key:n,href:u.href,disabled:r,onClick:i,active:a});return P.jsx(c,Object.assign({},u,{ref:t},f))});NN.displayName="DropdownItem";const $N=j.createContext(ng?window:void 0);$N.Provider;function ag(){return j.useContext($N)}function qO(){const e=pN(),t=j.useRef(null),n=j.useCallback(r=>{t.current=r,e()},[e]);return[t,n]}function qf({defaultShow:e,show:t,onSelect:n,onToggle:r,itemSelector:i=`* [${hl("dropdown-item")}]`,focusFirstItemOnShow:a,placement:c="bottom-start",children:u}){const f=ag(),[d,p]=Ire(t,e,r),[g,y]=qO(),b=g.current,[v,E]=qO(),S=v.current,_=lN(d),T=j.useRef(null),O=j.useRef(!1),$=j.useContext(ha),I=j.useCallback((F,G,ne=G?.type)=>{p(F,{originalEvent:G,source:ne})},[p]),B=In((F,G)=>{n?.(F,G),I(!1,G,"select"),G.isPropagationStopped()||$?.(F,G)}),z=j.useMemo(()=>({toggle:I,placement:c,show:d,menuElement:b,toggleElement:S,setMenu:y,setToggle:E}),[I,c,d,b,S,y,E]);b&&_&&!d&&(O.current=b.contains(b.ownerDocument.activeElement));const q=In(()=>{S&&S.focus&&S.focus()}),k=In(()=>{const F=T.current;let G=a;if(G==null&&(G=g.current&&TN(g.current)?"keyboard":!1),G===!1||G==="keyboard"&&!/^key.+$/.test(F))return;const ne=os(g.current,i)[0];ne&&ne.focus&&ne.focus()});j.useEffect(()=>{d?k():O.current&&(O.current=!1,q())},[d,O,q,k]),j.useEffect(()=>{T.current=null});const W=(F,G)=>{if(!g.current)return null;const ne=os(g.current,i);let ee=ne.indexOf(F)+G;return ee=Math.max(0,Math.min(ee,ne.length)),ne[ee]};return vre(j.useCallback(()=>f.document,[f]),"keydown",F=>{var G,ne;const{key:ee}=F,D=F.target,R=(G=g.current)==null?void 0:G.contains(D),L=(ne=v.current)==null?void 0:ne.contains(D);if(/input|textarea/i.test(D.tagName)&&(ee===" "||ee!=="Escape"&&R||ee==="Escape"&&D.type==="search")||!R&&!L||ee==="Tab"&&(!g.current||!d))return;T.current=F.type;const X={originalEvent:F,source:F.type};switch(ee){case"ArrowUp":{const N=W(D,-1);N&&N.focus&&N.focus(),F.preventDefault();return}case"ArrowDown":if(F.preventDefault(),!d)p(!0,X);else{const N=W(D,1);N&&N.focus&&N.focus()}return;case"Tab":sN(D.ownerDocument,"keyup",N=>{var K;(N.key==="Tab"&&!N.target||!((K=g.current)!=null&&K.contains(N.target)))&&p(!1,X)},{once:!0});break;case"Escape":ee==="Escape"&&(F.preventDefault(),F.stopPropagation()),p(!1,X);break}}),P.jsx(ha.Provider,{value:B,children:P.jsx(ig.Provider,{value:z,children:u})})}qf.displayName="Dropdown";qf.Menu=AN;qf.Toggle=CN;qf.Item=NN;const Vw=j.createContext({});Vw.displayName="DropdownContext";const BN=j.forwardRef(({className:e,bsPrefix:t,as:n="hr",role:r="separator",...i},a)=>(t=Bt(t,"dropdown-divider"),P.jsx(n,{ref:a,className:bt(e,t),role:r,...i})));BN.displayName="DropdownDivider";const PN=j.forwardRef(({className:e,bsPrefix:t,as:n="div",role:r="heading",...i},a)=>(t=Bt(t,"dropdown-header"),P.jsx(n,{ref:a,className:bt(e,t),role:r,...i})));PN.displayName="DropdownHeader";const UN=j.forwardRef(({bsPrefix:e,className:t,eventKey:n,disabled:r=!1,onClick:i,active:a,as:c=Uw,...u},f)=>{const d=Bt(e,"dropdown-item"),[p,g]=IN({key:n,href:u.href,disabled:r,onClick:i,active:a});return P.jsx(c,{...u,...p,ref:f,className:bt(t,d,g.isActive&&"active",r&&"disabled")})});UN.displayName="DropdownItem";const kN=j.forwardRef(({className:e,bsPrefix:t,as:n="span",...r},i)=>(t=Bt(t,"dropdown-item-text"),P.jsx(n,{ref:i,className:bt(e,t),...r})));kN.displayName="DropdownItemText";const hse=typeof global<"u"&&global.navigator&&global.navigator.product==="ReactNative",pse=typeof document<"u",MN=pse||hse?j.useLayoutEffect:j.useEffect,Gw=j.createContext(null);Gw.displayName="InputGroupContext";const Ra=j.createContext(null);Ra.displayName="NavbarContext";function jN(e,t){return e}function LN(e,t,n){const r=n?"top-end":"top-start",i=n?"top-start":"top-end",a=n?"bottom-end":"bottom-start",c=n?"bottom-start":"bottom-end",u=n?"right-start":"left-start",f=n?"right-end":"left-end",d=n?"left-start":"right-start",p=n?"left-end":"right-end";let g=e?c:a;return t==="up"?g=e?i:r:t==="end"?g=e?p:d:t==="start"?g=e?f:u:t==="down-centered"?g="bottom":t==="up-centered"&&(g="top"),g}const zN=j.forwardRef(({bsPrefix:e,className:t,align:n,rootCloseEvent:r,flip:i=!0,show:a,renderOnMount:c,as:u="div",popperConfig:f,variant:d,...p},g)=>{let y=!1;const b=j.useContext(Ra),v=Bt(e,"dropdown-menu"),{align:E,drop:S,isRTL:_}=j.useContext(Vw);n=n||E;const T=j.useContext(Gw),O=[];if(n)if(typeof n=="object"){const F=Object.keys(n);if(F.length){const G=F[0],ne=n[G];y=ne==="start",O.push(`${v}-${G}-${ne}`)}}else n==="end"&&(y=!0);const $=LN(y,S,_),[I,{hasShown:B,popper:z,show:q,toggle:k}]=xN({flip:i,rootCloseEvent:r,show:a,usePopper:!b&&O.length===0,offset:[0,2],popperConfig:f,placement:$});if(I.ref=$w(jN(g),I.ref),MN(()=>{q&&z?.update()},[q]),!B&&!c&&!T)return null;typeof u!="string"&&(I.show=q,I.close=()=>k?.(!1),I.align=n);let W=p.style;return z!=null&&z.placement&&(W={...p.style,...I.style},p["x-placement"]=z.placement),P.jsx(u,{...p,...I,style:W,...(O.length||b)&&{"data-bs-popper":"static"},className:bt(t,v,q&&"show",y&&`${v}-end`,d&&`${v}-${d}`,...O)})});zN.displayName="DropdownMenu";const qN=j.forwardRef(({bsPrefix:e,split:t,className:n,childBsPrefix:r,as:i=fN,...a},c)=>{const u=Bt(e,"dropdown-toggle"),f=j.useContext(ig);r!==void 0&&(a.bsPrefix=r);const[d]=DN();return d.ref=$w(d.ref,jN(c)),P.jsx(i,{className:bt(n,u,t&&`${u}-split`,f?.show&&"show"),...d,...a})});qN.displayName="DropdownToggle";const HN=j.forwardRef((e,t)=>{const{bsPrefix:n,drop:r="down",show:i,className:a,align:c="start",onSelect:u,onToggle:f,focusFirstItemOnShow:d,as:p="div",navbar:g,autoClose:y=!0,...b}=Cw(e,{show:"onToggle"}),v=j.useContext(Gw),E=Bt(n,"dropdown"),S=Fne(),_=z=>y===!1?z==="click":y==="inside"?z!=="rootClose":y==="outside"?z!=="select":!0,T=jf((z,q)=>{var k;!((k=q.originalEvent)==null||(k=k.target)==null)&&k.classList.contains("dropdown-toggle")&&q.source==="mousedown"||(q.originalEvent.currentTarget===document&&(q.source!=="keydown"||q.originalEvent.key==="Escape")&&(q.source="rootClose"),_(q.source)&&f?.(z,q))}),$=LN(c==="end",r,S),I=j.useMemo(()=>({align:c,drop:r,isRTL:S}),[c,r,S]),B={down:E,"down-centered":`${E}-center`,up:"dropup","up-centered":"dropup-center dropup",end:"dropend",start:"dropstart"};return P.jsx(Vw.Provider,{value:I,children:P.jsx(qf,{placement:$,show:i,onSelect:u,onToggle:T,focusFirstItemOnShow:d,itemSelector:`.${E}-item:not(.disabled):not(:disabled)`,children:v?b.children:P.jsx(p,{...b,ref:t,className:bt(a,i&&"show",B[r])})})})});HN.displayName="Dropdown";const $u=Object.assign(HN,{Toggle:qN,Menu:zN,Item:UN,ItemText:kN,Divider:BN,Header:PN}),HO=e=>!e||typeof e=="function"?e:t=>{e.current=t};function gse(e,t){const n=HO(e),r=HO(t);return i=>{n&&n(i),r&&r(i)}}function cg(e,t){return j.useMemo(()=>gse(e,t),[e,t])}const FN=j.createContext(null),mse=["as","active","eventKey"];function yse(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function VN({key:e,onClick:t,active:n,id:r,role:i,disabled:a}){const c=j.useContext(ha),u=j.useContext(og),f=j.useContext(FN);let d=n;const p={role:i};if(u){!i&&u.role==="tablist"&&(p.role="tab");const g=u.getControllerId(e??null),y=u.getControlledId(e??null);p[hl("event-key")]=e,p.id=g||r,d=n==null&&e!=null?u.activeKey===e:n,(d||!(f!=null&&f.unmountOnExit)&&!(f!=null&&f.mountOnEnter))&&(p["aria-controls"]=y)}return p.role==="tab"&&(p["aria-selected"]=d,d||(p.tabIndex=-1),a&&(p.tabIndex=-1,p["aria-disabled"]=!0)),p.onClick=In(g=>{a||(t?.(g),e!=null&&c&&!g.isPropagationStopped()&&c(e,g))}),[p,{isActive:d}]}const GN=j.forwardRef((e,t)=>{let{as:n=Pw,active:r,eventKey:i}=e,a=yse(e,mse);const[c,u]=VN(Object.assign({key:vf(i,a.href),active:r},a));return c[hl("active")]=u.isActive,P.jsx(n,Object.assign({},a,c,{ref:t}))});GN.displayName="NavItem";const bse=["as","onSelect","activeKey","role","onKeyDown"];function vse(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}const FO=()=>{},VO=hl("event-key"),KN=j.forwardRef((e,t)=>{let{as:n="div",onSelect:r,activeKey:i,role:a,onKeyDown:c}=e,u=vse(e,bse);const f=pN(),d=j.useRef(!1),p=j.useContext(ha),g=j.useContext(FN);let y,b;g&&(a=a||"tablist",i=g.activeKey,y=g.getControlledId,b=g.getControllerId);const v=j.useRef(null),E=O=>{const $=v.current;if(!$)return null;const I=os($,`[${VO}]:not([aria-disabled=true])`),B=$.querySelector("[aria-selected=true]");if(!B||B!==document.activeElement)return null;const z=I.indexOf(B);if(z===-1)return null;let q=z+O;return q>=I.length&&(q=0),q<0&&(q=I.length-1),I[q]},S=(O,$)=>{O!=null&&(r?.(O,$),p?.(O,$))},_=O=>{if(c?.(O),!g)return;let $;switch(O.key){case"ArrowLeft":case"ArrowUp":$=E(-1);break;case"ArrowRight":case"ArrowDown":$=E(1);break;default:return}$&&(O.preventDefault(),S($.dataset[use("EventKey")]||null,O),d.current=!0,f())};j.useEffect(()=>{if(v.current&&d.current){const O=v.current.querySelector(`[${VO}][aria-selected=true]`);O?.focus()}d.current=!1});const T=cg(t,v);return P.jsx(ha.Provider,{value:S,children:P.jsx(og.Provider,{value:{role:a,activeKey:vf(i),getControlledId:y||FO,getControllerId:b||FO},children:P.jsx(n,Object.assign({},u,{onKeyDown:_,ref:T,role:a}))})})});KN.displayName="Nav";const wse=Object.assign(KN,{Item:GN});function Q0(e){e===void 0&&(e=tg());try{var t=e.activeElement;return!t||!t.nodeName?null:t}catch{return e.body}}function Ese(e){const t=j.useRef(e);return t.current=e,t}function Sse(e){const t=Ese(e);j.useEffect(()=>()=>t.current(),[])}function _se(e=document){const t=e.defaultView;return Math.abs(t.innerWidth-e.documentElement.clientWidth)}const GO=hl("modal-open");class Kw{constructor({ownerDocument:t,handleContainerOverflow:n=!0,isRTL:r=!1}={}){this.handleContainerOverflow=n,this.isRTL=r,this.modals=[],this.ownerDocument=t}getScrollbarWidth(){return _se(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(t){}removeModalAttributes(t){}setContainerStyle(t){const n={overflow:"hidden"},r=this.isRTL?"paddingLeft":"paddingRight",i=this.getElement();t.style={overflow:i.style.overflow,[r]:i.style[r]},t.scrollBarWidth&&(n[r]=`${parseInt(hs(i,r)||"0",10)+t.scrollBarWidth}px`),i.setAttribute(GO,""),hs(i,n)}reset(){[...this.modals].forEach(t=>this.remove(t))}removeContainerStyle(t){const n=this.getElement();n.removeAttribute(GO),Object.assign(n.style,t.style)}add(t){let n=this.modals.indexOf(t);return n!==-1||(n=this.modals.length,this.modals.push(t),this.setModalAttributes(t),n!==0)||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),n}remove(t){const n=this.modals.indexOf(t);n!==-1&&(this.modals.splice(n,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(t))}isTopModal(t){return!!this.modals.length&&this.modals[this.modals.length-1]===t}}const J0=(e,t)=>ng?e==null?(t||tg()).body:(typeof e=="function"&&(e=e()),e&&"current"in e&&(e=e.current),e&&("nodeType"in e||e.getBoundingClientRect)?e:null):null;function xse(e,t){const n=ag(),[r,i]=j.useState(()=>J0(e,n?.document));if(!r){const a=J0(e);a&&i(a)}return j.useEffect(()=>{},[t,r]),j.useEffect(()=>{const a=J0(e);a!==r&&i(a)},[e,r]),r}function Ase({children:e,in:t,onExited:n,mountOnEnter:r,unmountOnExit:i}){const a=j.useRef(null),c=j.useRef(t),u=In(n);j.useEffect(()=>{t?c.current=!0:u(a.current)},[t,u]);const f=cg(a,dl(e)),d=j.cloneElement(e,{ref:f});return t?d:i||!c.current&&r?null:d}const Rse=["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children"];function Ose(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Tse(e){let{onEnter:t,onEntering:n,onEntered:r,onExit:i,onExiting:a,onExited:c,addEndListener:u,children:f}=e,d=Ose(e,Rse);const p=j.useRef(null),g=cg(p,dl(f)),y=$=>I=>{$&&p.current&&$(p.current,I)},b=j.useCallback(y(t),[t]),v=j.useCallback(y(n),[n]),E=j.useCallback(y(r),[r]),S=j.useCallback(y(i),[i]),_=j.useCallback(y(a),[a]),T=j.useCallback(y(c),[c]),O=j.useCallback(y(u),[u]);return Object.assign({},d,{nodeRef:p},t&&{onEnter:b},n&&{onEntering:v},r&&{onEntered:E},i&&{onExit:S},a&&{onExiting:_},c&&{onExited:T},u&&{addEndListener:O},{children:typeof f=="function"?($,I)=>f($,Object.assign({},I,{ref:g})):j.cloneElement(f,{ref:g})})}const Dse=["component"];function Cse(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}const Ise=j.forwardRef((e,t)=>{let{component:n}=e,r=Cse(e,Dse);const i=Tse(r);return P.jsx(n,Object.assign({ref:t},i))});function Nse({in:e,onTransition:t}){const n=j.useRef(null),r=j.useRef(!0),i=In(t);return RO(()=>{if(!n.current)return;let a=!1;return i({in:e,element:n.current,initial:r.current,isStale:()=>a}),()=>{a=!0}},[e,i]),RO(()=>(r.current=!1,()=>{r.current=!0}),[]),n}function $se({children:e,in:t,onExited:n,onEntered:r,transition:i}){const[a,c]=j.useState(!t);t&&a&&c(!1);const u=Nse({in:!!t,onTransition:d=>{const p=()=>{d.isStale()||(d.in?r?.(d.element,d.initial):(c(!0),n?.(d.element)))};Promise.resolve(i(d)).then(p,g=>{throw d.in||c(!0),g})}}),f=cg(u,dl(e));return a&&!t?null:j.cloneElement(e,{ref:f})}function KO(e,t,n){return e?P.jsx(Ise,Object.assign({},n,{component:e})):t?P.jsx($se,Object.assign({},n,{transition:t})):P.jsx(Ase,Object.assign({},n))}const Bse=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];function Pse(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}let eb;function Use(e){return eb||(eb=new Kw({ownerDocument:e?.document})),eb}function kse(e){const t=ag(),n=e||Use(t),r=j.useRef({dialog:null,backdrop:null});return Object.assign(r.current,{add:()=>n.add(r.current),remove:()=>n.remove(r.current),isTopModal:()=>n.isTopModal(r.current),setDialogRef:j.useCallback(i=>{r.current.dialog=i},[]),setBackdropRef:j.useCallback(i=>{r.current.backdrop=i},[])})}const WN=j.forwardRef((e,t)=>{let{show:n=!1,role:r="dialog",className:i,style:a,children:c,backdrop:u=!0,keyboard:f=!0,onBackdropClick:d,onEscapeKeyDown:p,transition:g,runTransition:y,backdropTransition:b,runBackdropTransition:v,autoFocus:E=!0,enforceFocus:S=!0,restoreFocus:_=!0,restoreFocusOptions:T,renderDialog:O,renderBackdrop:$=Ye=>P.jsx("div",Object.assign({},Ye)),manager:I,container:B,onShow:z,onHide:q=()=>{},onExit:k,onExited:W,onExiting:F,onEnter:G,onEntering:ne,onEntered:ee}=e,D=Pse(e,Bse);const R=ag(),L=xse(B),V=kse(I),X=cN(),N=lN(n),[K,te]=j.useState(!n),se=j.useRef(null);j.useImperativeHandle(t,()=>V,[V]),ng&&!N&&n&&(se.current=Q0(R?.document)),n&&K&&te(!1);const ie=In(()=>{if(V.add(),Oe.current=lo(document,"keydown",ye),_e.current=lo(document,"focus",()=>setTimeout(Q),!0),z&&z(),E){var Ye,Vr;const At=Q0((Ye=(Vr=V.dialog)==null?void 0:Vr.ownerDocument)!=null?Ye:R?.document);V.dialog&&At&&!yp(V.dialog,At)&&(se.current=At,V.dialog.focus())}}),fe=In(()=>{if(V.remove(),Oe.current==null||Oe.current(),_e.current==null||_e.current(),_){var Ye;(Ye=se.current)==null||Ye.focus==null||Ye.focus(T),se.current=null}});j.useEffect(()=>{!n||!L||ie()},[n,L,ie]),j.useEffect(()=>{K&&fe()},[K,fe]),Sse(()=>{fe()});const Q=In(()=>{if(!S||!X()||!V.isTopModal())return;const Ye=Q0(R?.document);V.dialog&&Ye&&!yp(V.dialog,Ye)&&V.dialog.focus()}),ve=In(Ye=>{Ye.target===Ye.currentTarget&&(d?.(Ye),u===!0&&q())}),ye=In(Ye=>{f&&rre(Ye)&&V.isTopModal()&&(p?.(Ye),Ye.defaultPrevented||q())}),_e=j.useRef(),Oe=j.useRef(),ke=(...Ye)=>{te(!0),W?.(...Ye)};if(!L)return null;const Et=Object.assign({role:r,ref:V.setDialogRef,"aria-modal":r==="dialog"?!0:void 0},D,{style:a,className:i,tabIndex:-1});let Tt=O?O(Et):P.jsx("div",Object.assign({},Et,{children:j.cloneElement(c,{role:"document"})}));Tt=KO(g,y,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!n,onExit:k,onExiting:F,onExited:ke,onEnter:G,onEntering:ne,onEntered:ee,children:Tt});let xt=null;return u&&(xt=$({ref:V.setBackdropRef,onClick:ve}),xt=KO(b,v,{in:!!n,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:xt})),P.jsx(P.Fragment,{children:jc.createPortal(P.jsxs(P.Fragment,{children:[xt,Tt]}),L)})});WN.displayName="Modal";const Mse=Object.assign(WN,{Manager:Kw});function jse(e,t){return e.classList?e.classList.contains(t):(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")!==-1}function Lse(e,t){e.classList?e.classList.add(t):jse(e,t)||(typeof e.className=="string"?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))}function WO(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function zse(e,t){e.classList?e.classList.remove(t):typeof e.className=="string"?e.className=WO(e.className,t):e.setAttribute("class",WO(e.className&&e.className.baseVal||"",t))}const Pc={FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",STICKY_CONTENT:".sticky-top",NAVBAR_TOGGLER:".navbar-toggler"};class YN extends Kw{adjustAndStore(t,n,r){const i=n.style[t];n.dataset[t]=i,hs(n,{[t]:`${parseFloat(hs(n,t))+r}px`})}restore(t,n){const r=n.dataset[t];r!==void 0&&(delete n.dataset[t],hs(n,{[t]:r}))}setContainerStyle(t){super.setContainerStyle(t);const n=this.getElement();if(Lse(n,"modal-open"),!t.scrollBarWidth)return;const r=this.isRTL?"paddingLeft":"paddingRight",i=this.isRTL?"marginLeft":"marginRight";os(n,Pc.FIXED_CONTENT).forEach(a=>this.adjustAndStore(r,a,t.scrollBarWidth)),os(n,Pc.STICKY_CONTENT).forEach(a=>this.adjustAndStore(i,a,-t.scrollBarWidth)),os(n,Pc.NAVBAR_TOGGLER).forEach(a=>this.adjustAndStore(i,a,t.scrollBarWidth))}removeContainerStyle(t){super.removeContainerStyle(t);const n=this.getElement();zse(n,"modal-open");const r=this.isRTL?"paddingLeft":"paddingRight",i=this.isRTL?"marginLeft":"marginRight";os(n,Pc.FIXED_CONTENT).forEach(a=>this.restore(r,a)),os(n,Pc.STICKY_CONTENT).forEach(a=>this.restore(i,a)),os(n,Pc.NAVBAR_TOGGLER).forEach(a=>this.restore(i,a))}}let tb;function qse(e){return tb||(tb=new YN(e)),tb}const XN=j.createContext({onHide(){}}),ZN=j.forwardRef(({closeLabel:e="Close",closeVariant:t,closeButton:n=!1,onHide:r,children:i,...a},c)=>{const u=j.useContext(XN),f=jf(()=>{u?.onHide(),r?.()});return P.jsxs("div",{ref:c,...a,children:[i,n&&P.jsx(kw,{"aria-label":e,variant:t,onClick:f})]})});ZN.displayName="AbstractModalHeader";const QN=j.forwardRef(({className:e,bsPrefix:t,as:n="div",...r},i)=>(t=Bt(t,"nav-item"),P.jsx(n,{ref:i,className:bt(e,t),...r})));QN.displayName="NavItem";const JN=j.forwardRef(({bsPrefix:e,className:t,as:n=Uw,active:r,eventKey:i,disabled:a=!1,...c},u)=>{e=Bt(e,"nav-link");const[f,d]=VN({key:vf(i,c.href),active:r,disabled:a,...c});return P.jsx(n,{...c,...f,ref:u,disabled:a,className:bt(t,e,a&&"disabled",d.isActive&&"active")})});JN.displayName="NavLink";const e8=j.forwardRef((e,t)=>{const{as:n="div",bsPrefix:r,variant:i,fill:a=!1,justify:c=!1,navbar:u,navbarScroll:f,className:d,activeKey:p,...g}=Cw(e,{activeKey:"onSelect"}),y=Bt(r,"nav");let b,v,E=!1;const S=j.useContext(Ra),_=j.useContext(dN);return S?(b=S.bsPrefix,E=u??!0):_&&({cardHeaderBsPrefix:v}=_),P.jsx(wse,{as:n,ref:t,activeKey:p,className:bt(d,{[y]:!E,[`${b}-nav`]:E,[`${b}-nav-scroll`]:E&&f,[`${v}-${i}`]:!!v,[`${y}-${i}`]:!!i,[`${y}-fill`]:a,[`${y}-justified`]:c}),...g})});e8.displayName="Nav";const Qs=Object.assign(e8,{Item:QN,Link:JN}),t8=j.forwardRef(({bsPrefix:e,className:t,as:n,...r},i)=>{e=Bt(e,"navbar-brand");const a=n||(r.href?"a":"span");return P.jsx(a,{...r,ref:i,className:bt(t,e)})});t8.displayName="NavbarBrand";const n8=j.forwardRef(({children:e,bsPrefix:t,...n},r)=>{t=Bt(t,"navbar-collapse");const i=j.useContext(Ra);return P.jsx(aN,{in:!!(i&&i.expanded),...n,children:P.jsx("div",{ref:r,className:t,children:e})})});n8.displayName="NavbarCollapse";const r8=j.forwardRef(({bsPrefix:e,className:t,children:n,label:r="Toggle navigation",as:i="button",onClick:a,...c},u)=>{e=Bt(e,"navbar-toggler");const{onToggle:f,expanded:d}=j.useContext(Ra)||{},p=jf(g=>{a&&a(g),f&&f()});return i==="button"&&(c.type="button"),P.jsx(i,{...c,ref:u,onClick:p,"aria-label":r,className:bt(t,e,!d&&"collapsed"),children:n||P.jsx("span",{className:`${e}-icon`})})});r8.displayName="NavbarToggle";const vv=new WeakMap,YO=(e,t)=>{if(!e||!t)return;const n=vv.get(t)||new Map;vv.set(t,n);let r=n.get(e);return r||(r=t.matchMedia(e),r.refCount=0,n.set(r.media,r)),r};function Hse(e,t=typeof window>"u"?void 0:window){const n=YO(e,t),[r,i]=j.useState(()=>n?n.matches:!1);return MN(()=>{let a=YO(e,t);if(!a)return i(!1);let c=vv.get(t);const u=()=>{i(a.matches)};return a.refCount++,a.addListener(u),u(),()=>{a.removeListener(u),a.refCount--,a.refCount<=0&&c?.delete(a.media),a=void 0}},[e]),r}function Fse(e){const t=Object.keys(e);function n(u,f){return u===f?f:u?`${u} and ${f}`:f}function r(u){return t[Math.min(t.indexOf(u)+1,t.length-1)]}function i(u){const f=r(u);let d=e[f];return typeof d=="number"?d=`${d-.2}px`:d=`calc(${d} - 0.2px)`,`(max-width: ${d})`}function a(u){let f=e[u];return typeof f=="number"&&(f=`${f}px`),`(min-width: ${f})`}function c(u,f,d){let p;typeof u=="object"?(p=u,d=f,f=!0):(f=f||!0,p={[u]:f});let g=j.useMemo(()=>Object.entries(p).reduce((y,[b,v])=>((v==="up"||v===!0)&&(y=n(y,a(b))),(v==="down"||v===!0)&&(y=n(y,i(b))),y),""),[JSON.stringify(p)]);return Hse(g,d)}return c}const Vse=Fse({xs:0,sm:576,md:768,lg:992,xl:1200,xxl:1400}),i8=j.forwardRef(({className:e,bsPrefix:t,as:n="div",...r},i)=>(t=Bt(t,"offcanvas-body"),P.jsx(n,{ref:i,className:bt(e,t),...r})));i8.displayName="OffcanvasBody";const Gse={[ni]:"show",[cs]:"show"},s8=j.forwardRef(({bsPrefix:e,className:t,children:n,in:r=!1,mountOnEnter:i=!1,unmountOnExit:a=!1,appear:c=!1,...u},f)=>(e=Bt(e,"offcanvas"),P.jsx(rg,{ref:f,addEndListener:Nw,in:r,mountOnEnter:i,unmountOnExit:a,appear:c,...u,childRef:dl(n),children:(d,p)=>j.cloneElement(n,{...p,className:bt(t,n.props.className,(d===ni||d===mf)&&`${e}-toggling`,Gse[d])})})));s8.displayName="OffcanvasToggling";const o8=j.forwardRef(({bsPrefix:e,className:t,closeLabel:n="Close",closeButton:r=!1,...i},a)=>(e=Bt(e,"offcanvas-header"),P.jsx(ZN,{ref:a,...i,className:bt(t,e),closeLabel:n,closeButton:r})));o8.displayName="OffcanvasHeader";const Kse=mre("h5"),a8=j.forwardRef(({className:e,bsPrefix:t,as:n=Kse,...r},i)=>(t=Bt(t,"offcanvas-title"),P.jsx(n,{ref:i,className:bt(e,t),...r})));a8.displayName="OffcanvasTitle";function Wse(e){return P.jsx(s8,{...e})}function Yse(e){return P.jsx(uN,{...e})}const c8=j.forwardRef(({bsPrefix:e,className:t,children:n,"aria-labelledby":r,placement:i="start",responsive:a,show:c=!1,backdrop:u=!0,keyboard:f=!0,scroll:d=!1,onEscapeKeyDown:p,onShow:g,onHide:y,container:b,autoFocus:v=!0,enforceFocus:E=!0,restoreFocus:S=!0,restoreFocusOptions:_,onEntered:T,onExit:O,onExiting:$,onEnter:I,onEntering:B,onExited:z,backdropClassName:q,manager:k,renderStaticNode:W=!1,...F},G)=>{const ne=j.useRef();e=Bt(e,"offcanvas");const[ee,D]=j.useState(!1),R=jf(y),L=Vse(a||"xs","up");j.useEffect(()=>{D(a?c&&!L:c)},[c,a,L]);const V=j.useMemo(()=>({onHide:R}),[R]);function X(){return k||(d?(ne.current||(ne.current=new YN({handleContainerOverflow:!1})),ne.current):qse())}const N=(ie,...fe)=>{ie&&(ie.style.visibility="visible"),I?.(ie,...fe)},K=(ie,...fe)=>{ie&&(ie.style.visibility=""),z?.(...fe)},te=j.useCallback(ie=>P.jsx("div",{...ie,className:bt(`${e}-backdrop`,q)}),[q,e]),se=ie=>P.jsx("div",{...ie,...F,className:bt(t,a?`${e}-${a}`:e,`${e}-${i}`),"aria-labelledby":r,children:n});return P.jsxs(P.Fragment,{children:[!ee&&(a||W)&&se({}),P.jsx(XN.Provider,{value:V,children:P.jsx(Mse,{show:ee,ref:G,backdrop:u,container:b,keyboard:f,autoFocus:v,enforceFocus:E&&!d,restoreFocus:S,restoreFocusOptions:_,onEscapeKeyDown:p,onShow:g,onHide:R,onEnter:N,onEntering:B,onEntered:T,onExit:O,onExiting:$,onExited:K,manager:X(),transition:Wse,backdropTransition:Yse,renderBackdrop:te,renderDialog:se})})]})});c8.displayName="Offcanvas";const Xse=Object.assign(c8,{Body:i8,Header:o8,Title:a8}),l8=j.forwardRef(({onHide:e,...t},n)=>{const r=j.useContext(Ra),i=jf(()=>{r==null||r.onToggle==null||r.onToggle(),e?.()});return P.jsx(Xse,{ref:n,show:!!(r!=null&&r.expanded),...t,renderStaticNode:!0,onHide:i})});l8.displayName="NavbarOffcanvas";const u8=j.forwardRef(({className:e,bsPrefix:t,as:n="span",...r},i)=>(t=Bt(t,"navbar-text"),P.jsx(n,{ref:i,className:bt(e,t),...r})));u8.displayName="NavbarText";const f8=j.forwardRef((e,t)=>{const{bsPrefix:n,expand:r=!0,variant:i="light",bg:a,fixed:c,sticky:u,className:f,as:d="nav",expanded:p,onToggle:g,onSelect:y,collapseOnSelect:b=!1,...v}=Cw(e,{expanded:"onToggle"}),E=Bt(n,"navbar"),S=j.useCallback((...O)=>{y?.(...O),b&&p&&g?.(!1)},[y,b,p,g]);v.role===void 0&&d!=="nav"&&(v.role="navigation");let _=`${E}-expand`;typeof r=="string"&&(_=`${_}-${r}`);const T=j.useMemo(()=>({onToggle:()=>g?.(!p),bsPrefix:E,expanded:!!p,expand:r}),[E,p,r,g]);return P.jsx(Ra.Provider,{value:T,children:P.jsx(ha.Provider,{value:S,children:P.jsx(d,{ref:t,...v,className:bt(f,E,r&&_,i&&`${E}-${i}`,a&&`bg-${a}`,u&&`sticky-${u}`,c&&`fixed-${c}`)})})})});f8.displayName="Navbar";const Ch=Object.assign(f8,{Brand:t8,Collapse:n8,Offcanvas:l8,Text:u8,Toggle:r8});function Zse(){const[e,t]=j.useState({loggedIn:null});j.useEffect(()=>{Aa().subscribe(t)},[]);const n=()=>{$ne()},r=()=>{Bne()};return P.jsxs(P.Fragment,{children:[P.jsx(Ch,{expand:"lg",className:"navbar mb-3",children:P.jsxs(hN,{fluid:!0,children:[P.jsx(Ch.Brand,{as:eo,to:"/",children:P.jsx("img",{src:"/favicon.png",alt:"MVP on Flow Logo",height:"40",className:"me-2"})}),P.jsx(Ch.Toggle,{"aria-controls":"navbarNav",style:{borderColor:"#FDB927",color:"#FDB927"},children:P.jsx("span",{className:"navbar-toggler-icon",style:{filter:"invert(80%) sepia(100%) saturate(400%) hue-rotate(10deg)"}})}),P.jsxs(Ch.Collapse,{id:"navbarNav",children:[P.jsxs(Qs,{className:"me-auto mb-2 mb-lg-0",children:[P.jsx(Qs.Link,{as:eo,to:"/",children:"Home"}),P.jsx(Qs.Link,{as:eo,to:"/swapfest",children:"Swapfest"}),P.jsx(Qs.Link,{as:eo,to:"/treasury",children:"Treasury"}),P.jsx(Qs.Link,{as:eo,to:"/vote",children:"Vote"}),P.jsxs($u,{as:Qs.Item,children:[P.jsxs($u.Toggle,{as:Qs.Link,className:"nav-link fastbreak-dropdown-toggle d-flex align-items-center",children:[P.jsx("span",{children:"Fastbreak"}),P.jsx("span",{className:"ms-2 badge bg-warning text-dark",style:{fontSize:"0.65rem"},children:"BETA"})]}),P.jsxs($u.Menu,{className:"fastbreak-dropdown-menu",children:[P.jsx($u.Item,{as:eo,to:"/fastbreak",children:"Race Track"}),P.jsx($u.Item,{as:eo,to:"/horsestats",children:"Horse Stats"})]})]}),P.jsx(Qs.Link,{id:"buy-mvp",href:"https://app.increment.fi/swap?in=A.1654653399040a61.FlowToken&out=A.6fd2465f3a22e34c.PetJokicsHorses",target:"_blank",rel:"noopener noreferrer",className:"btn btn-sm ms-lg-2 mt-2 mt-lg-0",style:{fontWeight:600,borderRadius:"8px"},onClick:i=>i.currentTarget.blur(),children:" Buy $MVP"})]}),P.jsx("div",{className:"d-flex align-items-center",children:e.loggedIn?P.jsxs(P.Fragment,{children:[P.jsx("span",{className:"wallet-address me-2",children:e.addr}),P.jsx("button",{className:"btn-wallet",onClick:r,children:"Disconnect"})]}):P.jsx("button",{className:"btn-wallet",onClick:n,children:"Connect Wallet"})})]})]})}),P.jsx("div",{className:"container-fluid mt-4 flex-grow-1",children:P.jsx(T$,{})}),P.jsxs("div",{className:"footer mt-auto",children:[P.jsx("p",{children:"This is a fan project and is not affiliated with NBA TopShot, Nikola Joki, or any official organization."}),P.jsxs("div",{className:"d-flex justify-content-center align-items-center gap-3 mt-2",children:[P.jsx("a",{href:"https://discord.gg/3p3ff9PHqW",target:"_blank","aria-label":"Discord",rel:"noreferrer",children:P.jsx("i",{className:"bi bi-discord",style:{fontSize:"1.5rem"}})}),P.jsx("a",{href:"https://x.com/petjokicshorses",target:"_blank","aria-label":"Twitter",rel:"noreferrer",children:P.jsx("i",{className:"bi bi-twitter-x",style:{fontSize:"1.5rem"}})})]})]})]})}function Qse(){return P.jsxs(P.Fragment,{children:[P.jsxs("div",{className:"hero",children:[P.jsx("h1",{children:" MVP on Flow - Pet Jokic's Horses "}),P.jsxs("p",{children:["MVP on Flow, also known as ",P.jsx("strong",{children:"Pet Jokic's horses"}),", is a ",P.jsx("strong",{children:"fan-powered project"})," celebrating Nikola Jokic and his NBA TopShot moments on the Flow blockchain."]}),P.jsx("p",{children:"Join our Discord community for Jokic-themed fun, prediction contests, raffles, giveaways, and more!"}),P.jsxs("p",{children:["Earn and use ",P.jsx("strong",{children:"$MVP"})," tokens in community games, swap them for Jokic moments, trade them on Flow exchanges or stake them to earn rewards. Whether you're a collector or a fan, there's something for everyone."]}),P.jsxs("a",{href:"https://discord.gg/3p3ff9PHqW",target:"_blank",rel:"noopener noreferrer",className:"btn btn-discord",children:[P.jsx("i",{className:"bi bi-discord"})," Join Our Discord"]})]}),P.jsx("div",{className:"card shadow mb-4",children:P.jsxs("div",{className:"card-body",children:[P.jsx("h2",{className:"card-title text-center mb-3",children:" $MVP Tokenomics"}),P.jsx("p",{className:"card-text text-center",children:"Learn how $MVP works: swap Jokic moments, earn rewards, and power community events."}),P.jsx("div",{className:"text-center mt-3",children:P.jsx("img",{src:"/images/Tokenomics.svg",alt:"MVP Tokenomics",className:"img-fluid rounded shadow"})})]})})]})}function Jse(){const[e,t]=j.useState(0),[n,r]=j.useState([]);j.useEffect(()=>{fetch("https://mvponflow.cc/api/leaderboard").then(a=>a.json()).then(a=>{t(a.prize_pool),r(a.leaderboard||[])})},[]);const i=a=>{if(!a)return"-";try{const c=a.includes("T")?a:a.replace(" ","T")+"Z",u=new Date(c);return new Intl.DateTimeFormat(void 0,{year:"numeric",month:"short",day:"2-digit",hour:"2-digit",minute:"2-digit"}).format(u)}catch{return a}};return P.jsx("div",{className:"container",children:P.jsx("div",{className:"card shadow mb-4",children:P.jsxs("div",{className:"card-body",children:[P.jsx("h2",{className:"mb-4 text-center",children:" $MVP Swap Fest Aug 25th - Sep 21st "}),P.jsx("div",{className:"text-center mb-4",children:P.jsx("img",{src:"/images/25-8-15-9-25.png",alt:"Swap Fest Rules",className:"img-fluid rounded shadow"})}),P.jsxs("p",{className:"text-center mb-3",children:["Prize Pool: ",e," chances to pet your horse"]}),P.jsx("div",{className:"table-responsive",children:P.jsxs("table",{className:"mvp-table",children:[P.jsx("thead",{children:P.jsxs("tr",{children:[P.jsx("th",{children:"#"}),P.jsx("th",{children:"TopShot Username"}),P.jsx("th",{children:"Points"}),P.jsx("th",{children:"Last scored at"}),P.jsx("th",{children:"Prize"})]})}),P.jsxs("tbody",{children:[n.map((a,c)=>P.jsxs("tr",{children:[P.jsx("td",{children:c+1}),P.jsx("td",{children:a.username}),P.jsx("td",{children:a.points}),P.jsx("td",{children:i(a.last_scored_at)}),P.jsx("td",{children:a.prize})]},c)),n.length===0&&P.jsx("tr",{children:P.jsx("td",{colSpan:5,style:{textAlign:"center",padding:"1rem"},children:"No entries yet."})})]})]})}),P.jsx("div",{className:"text-muted mt-2",style:{fontSize:"0.9rem"},children:"* Ties on points are ranked by earlier Last scored at."})]})})})}function eoe(){const[e,t]=j.useState(null);return j.useEffect(()=>{fetch("https://mvponflow.cc/api/treasury").then(n=>n.json()).then(n=>t(n))},[]),e?P.jsx("div",{className:"container",children:P.jsx("div",{className:"card shadow mb-4",children:P.jsxs("div",{className:"card-body",children:[P.jsx("h2",{className:"mb-3 text-center",children:" $MVP Treasury Overview"}),P.jsx("p",{className:"text-center mb-2",children:"See the current state of the treasury and the $MVP token economy."}),P.jsxs("p",{className:"text-center mb-4",children:["Last Updated: ",e.last_updated]}),P.jsxs("div",{className:"row",children:[P.jsx("div",{className:"col-md-6 mb-3",children:P.jsx("div",{className:"card treasury-card h-100",children:P.jsxs("div",{className:"card-body",children:[P.jsx("h5",{className:"fw-bold mb-3",children:" Tokens in the Wild"}),P.jsx("p",{className:"display-6",children:e.tokens_in_wild}),P.jsx("p",{children:"Total $MVP tokens released into circulation, not owned by the treasury."})]})})}),P.jsx("div",{className:"col-md-6 mb-3",children:P.jsx("div",{className:"card treasury-card h-100",children:P.jsxs("div",{className:"card-body",children:[P.jsx("h5",{className:"fw-bold mb-3",children:" Treasury Holdings"}),P.jsxs("ul",{className:"list-group list-group-flush",children:[P.jsxs("li",{className:"list-group-item",children:["Common Moments: ",P.jsx("strong",{children:e.common_count})]}),P.jsxs("li",{className:"list-group-item",children:["Rare Moments: ",P.jsx("strong",{children:e.rare_count})]}),P.jsxs("li",{className:"list-group-item",children:["Top Shot Debut: ",P.jsx("strong",{children:e.tsd_count})]}),P.jsxs("li",{className:"list-group-item",children:["Legendary Moments: ",P.jsx("strong",{children:e.lego_count})]})]})]})})}),P.jsx("div",{className:"col-md-6 mb-3",children:P.jsx("div",{className:"card treasury-card h-100",children:P.jsxs("div",{className:"card-body",children:[P.jsx("h5",{className:"fw-bold mb-3",children:" Backed Supply"}),P.jsx("p",{className:"display-6",children:e.backed_supply}),P.jsxs("p",{children:["Calculated as:",P.jsx("br",{}),"2x Common + 100x Rare + 500x TSD + 2000x Legendary"]})]})})}),P.jsx("div",{className:"col-md-6 mb-3",children:P.jsx("div",{className:"card treasury-card h-100",children:P.jsxs("div",{className:"card-body",children:[P.jsx("h5",{className:"fw-bold mb-3",children:" Treasury Surplus"}),P.jsx("p",{className:"display-6",children:e.surplus}),P.jsx("p",{children:"Backed Supply minus Tokens in the Wild."})]})})})]})]})})}):P.jsx("div",{className:"container",children:P.jsx("p",{children:"Loading..."})})}function toe(){const[e,t]=j.useState(!1),n=j.useRef(null),r=j.useRef(null),i=j.useRef(null),a=j.useRef(null),c=()=>{t(!0)},u=f=>{const d=Math.floor(Math.random()*200)-100,p=Math.floor(Math.random()*200)-100;f.current.style.transform=`translate(${d}px, ${p}px)`};return P.jsx("div",{className:"container",children:P.jsx("div",{className:"card shadow mb-4",children:P.jsxs("div",{className:"card-body text-center",children:[P.jsx("h2",{className:"mb-4",children:"Who will win the $MVP award for season 2025/26?"}),P.jsx("p",{className:"text-muted mb-4",children:"Result of this vote will decide which player's moments the project will collect in the following season."}),e?P.jsxs("div",{id:"result-section",className:"mt-4",children:[P.jsx("h3",{className:"mb-3",children:" Voting Results:"}),P.jsxs("div",{className:"list-group w-50 mx-auto",children:[P.jsxs("div",{className:"list-group-item d-flex justify-content-between",children:[P.jsx("span",{children:"Joki"}),P.jsx("span",{children:"100%"})]}),P.jsxs("div",{className:"list-group-item d-flex justify-content-between",children:[P.jsx("span",{children:"Embiid"}),P.jsx("span",{children:"0%"})]}),P.jsxs("div",{className:"list-group-item d-flex justify-content-between",children:[P.jsx("span",{children:"SGA"}),P.jsx("span",{children:"0%"})]}),P.jsxs("div",{className:"list-group-item d-flex justify-content-between",children:[P.jsx("span",{children:"Luka"}),P.jsx("span",{children:"0%"})]}),P.jsxs("div",{className:"list-group-item d-flex justify-content-between",children:[P.jsx("span",{children:"Giannis"}),P.jsx("span",{children:"0%"})]})]})]}):P.jsxs("div",{id:"vote-section",children:[P.jsx("button",{className:"btn btn-success btn-lg mb-3",onClick:c,children:"Joki"}),P.jsx("button",{ref:n,className:"btn btn-outline-secondary btn-lg mb-3",onMouseEnter:()=>u(n),children:"Embiid"}),P.jsx("button",{ref:r,className:"btn btn-outline-secondary btn-lg mb-3",onMouseEnter:()=>u(r),children:"SGA"}),P.jsx("button",{ref:i,className:"btn btn-outline-secondary btn-lg mb-3",onMouseEnter:()=>u(i),children:"Luka"}),P.jsx("button",{ref:a,className:"btn btn-outline-secondary btn-lg mb-3",onMouseEnter:()=>u(a),children:"Giannis"})]})]})})})}let nb=0;function noe(e){const t=typeof e=="number"?e.toFixed(8):String(e),[n,r="0"]=t.split(".");return`${n}.${(r+"00000000").slice(0,8)}`.replace(/(\.\d*?[1-9])0+$/g,"$1")}function d8(e){return(e||"").replace(/^\$/,"")}function Ih(e){const t=d8(e);return t?`$${t}`:""}function roe(e){const t=d8(e).toUpperCase();return t==="MVP"?"MVP":t==="FLOW"?"FLOW":t==="TSHOT"?"TSHOT":t==="BETA"?"BETA":null}const XO={MVP:{contractName:"PetJokicsHorses",contractAddr:"0x6fd2465f3a22e34c",storagePath:"/storage/PetJokicsHorsesVault",publicReceiverPath:"/public/PetJokicsHorsesReceiver"},FLOW:{contractName:"FlowToken",contractAddr:"0x1654653399040a61",storagePath:"/storage/flowTokenVault",publicReceiverPath:"/public/flowTokenReceiver"},TSHOT:{contractName:"TSHOT",contractAddr:"0x05b67ba314000b2d",storagePath:"/storage/TSHOTTokenVault",publicReceiverPath:"/public/TSHOTTokenReceiver"},BETA:{contractName:"EVMVMBridgedToken_d8ad8ae8375aa31bff541e17dc4b4917014ebdaa",contractAddr:"0x1e4aa0b87d10b141",storagePath:"/storage/EVMVMBridgedToken_d8ad8ae8375aa31bff541e17dc4b4917014ebdaaVault",publicReceiverPath:"/public/EVMVMBridgedToken_d8ad8ae8375aa31bff541e17dc4b4917014ebdaaReceiver"}};function ioe({contractName:e,contractAddr:t,storagePath:n,publicReceiverPath:r}){return`
import FungibleToken from 0xf233dcee88fe0abe
import StorageRent from 0x707adbad1428c624
import ${e} from ${t}

transaction(amount: UFix64, recipient: Address) {
  let sentVault: @{FungibleToken.Vault}

  prepare(signer: auth(Storage, BorrowValue) &Account) {
    let vaultRef = signer.storage.borrow<auth(FungibleToken.Withdraw) &${e}.Vault>(
      from: ${n}
    ) ?? panic("Could not borrow reference to the owner's Vault!")
    self.sentVault <- vaultRef.withdraw(amount: amount)
  }

  execute {
    let recipientAccount = getAccount(recipient)
    let receiverRef = recipientAccount.capabilities.borrow<&{FungibleToken.Vault}>(
      ${r}
    ) ?? panic("Recipient is missing receiver capability at ${r}")
    receiverRef.deposit(from: <-self.sentVault)
    StorageRent.tryRefill(recipient)
  }
}
`}async function soe({token:e,amount:t,recipient:n,limit:r=9999}){const i=XO[e];if(!i)throw new Error(`Unsupported token '${e}'. Supported: ${Object.keys(XO).join(", ")}`);const a=ioe(i),c=(f,d)=>[f(noe(t),d.UFix64),f(n,d.Address)],u=Aa().authorization;return Nne({cadence:a,args:c,proposer:u,payer:u,authorizations:[u],limit:r})}function ooe(e){const t=String(e?.message||e);return t.includes("FungibleToken.Vault.withdraw: Cannot withdraw tokens")?"Insufficient balance to complete the transfer.":t.toLowerCase().includes("missing receiver capability")?"Recipient wallet is not set up to receive this token.":t}function aoe(e,t){const n=Number(e?.lock_timestamp??0),r=Number(t?.lock_timestamp??0);return n-r}function h8(e){const t=Math.floor(Date.now()/1e3),n=Number(e?.lock_timestamp??0);return n>0&&t>=n}function coe(e,t=8){if(!h8(e))return!1;const n=Math.floor(Date.now()/1e3),r=Number(e.lock_timestamp);return n-r<=t*3600}function loe(e,t=24){if(!h8(e))return!1;const n=Math.floor(Date.now()/1e3),r=Number(e.lock_timestamp);return n-r>t*3600}function uoe(e){const t=Math.floor(Date.now()/1e3);return e.filter(n=>Number(n.lock_timestamp??0)>t).sort((n,r)=>Number(n.lock_timestamp)-Number(r.lock_timestamp))[0]||null}function foe(e){if(!Array.isArray(e)||e.length===0)return null;const t=e.filter(r=>coe(r,8)).sort((r,i)=>Number(i.lock_timestamp)-Number(r.lock_timestamp));if(t.length>0)return t[0];const n=uoe(e);return n||e.filter(r=>Number(r.lock_timestamp??0)>0).sort((r,i)=>Number(i.lock_timestamp)-Number(r.lock_timestamp))[0]||e[0]}function doe(e){const t=Math.floor(Date.now()/1e3),n=Number(e?.lock_timestamp??0);if(!n)return{text:"Unknown",color:"#9CA3AF"};if(n>t){const r=n-t,i=Math.floor(r/3600),a=Math.floor(r%3600/60);return{text:i>0?`Starts in ${i}h ${a}m`:`Starts in ${a}m`,color:"#FDB927"}}return loe(e,24)?{text:"Completed",color:"#6B7280"}:{text:"Started",color:"#10B981"}}function hoe(e){return typeof window>"u"?null:new URL(window.location.href).searchParams.get(e)}function poe(e,t){if(typeof window>"u"||!e)return;const n=new URL(window.location.href);t==null||t===""?n.searchParams.delete(e):n.searchParams.set(e,String(t)),window.history.replaceState({},"",n.toString())}function goe(e){const t=j.useRef({});return j.useMemo(()=>{const n={};return(e||[]).forEach(r=>{n[r.id]=t.current[r.id]||=bn.createRef()}),n},[e])}function rb(e,t){if(!e||!t)return;const n=e.getBoundingClientRect(),r=t.getBoundingClientRect(),i=e.scrollLeft,a=r.left+r.width/2-(n.left+n.width/2);e.scrollTo({left:i+a,behavior:"smooth"})}function moe(){const[e,t]=j.useState({loggedIn:null}),[n,r]=j.useState(""),[i,a]=j.useState(!1),[c,u]=j.useState([]),[f,d]=j.useState(null),[p,g]=j.useState(""),[y,b]=j.useState(null),[v,E]=j.useState(!1),[S,_]=j.useState(""),[T,O]=j.useState(!1),[$,I]=j.useState(null),B="0x2459710b1d10aed0",[z,q]=j.useState([]),[k,W]=j.useState(!1),[F,G]=j.useState(!1),ne=j.useRef(null),ee=goe(c);j.useEffect(()=>{fetch("https://mvponflow.cc/api/fastbreak_racing_usernames").then(Q=>Q.json()).then(Q=>q(Q)).catch(Q=>console.error("Failed to fetch usernames",Q))},[]),j.useEffect(()=>{Aa().subscribe(async Q=>{t(Q)}),D()},[]),j.useEffect(()=>{if(f){E(!0),R(f.id,e.addr),poe("contest",f.id);const Q=ne.current,ve=ee[f.id]?.current;Q&&ve&&rb(Q,ve)}},[e,f]),j.useEffect(()=>{if(!f||!f.lock_timestamp){_("");return}const Q=setInterval(()=>{const ve=Math.floor(Date.now()/1e3),ye=f.lock_timestamp-ve;if(ye<=0)_("Contest has started!"),clearInterval(Q);else{const _e=String(Math.floor(ye/3600)).padStart(2,"0"),Oe=String(Math.floor(ye%3600/60)).padStart(2,"0"),ke=String(ye%60).padStart(2,"0");_(`${_e}:${Oe}:${ke}`)}},1e3);return()=>clearInterval(Q)},[f]);const D=async()=>{try{const ye=[...await(await fetch("https://mvponflow.cc/api/fastbreak/contests")).json()].sort(aoe);u(ye);const _e=hoe("contest");let Oe=null;if(_e){const ke=Number(_e);Oe=ye.find(Et=>Number(Et.id)===ke)||null}Oe||(Oe=foe(ye)),d(Oe||ye[0]||null),setTimeout(()=>{if(Oe){const ke=ne.current,Et=ee[Oe.id]?.current;ke&&Et&&rb(ke,Et)}},50)}catch(Q){console.error("Failed to load contests",Q)}},R=async(Q,ve)=>{E(!0);const ye=++nb;try{const Oe=await(await fetch(`https://mvponflow.cc/api/fastbreak/contest/${Q}/prediction-leaderboard?userWallet=${ve}`)).json();ye===nb&&b(Oe)}catch(_e){console.error("Failed to load leaderboard",_e)}finally{ye===nb&&E(!1)}},L=Q=>{d(Q),b(null);const ve=ne.current,ye=ee[Q.id]?.current;ve&&ye&&rb(ve,ye)},V=async()=>{if(!e.loggedIn){r(" Please connect your wallet first.");return}if(!f){r(" Please select a contest.");return}if(!p.trim()){r(" Please enter your TopShot username prediction.");return}const Q=roe(f.buy_in_currency);if(!Q){r(` Unsupported token/currency: ${f.buy_in_currency}`);return}try{a(!0),r("Waiting for wallet approval...");const ve=await soe({token:Q,amount:f.buy_in_amount,recipient:B});r(` Transaction submitted! TX ID: <a href="https://flowscan.io/tx/${ve}" target="_blank" rel="noopener noreferrer">${ve}</a>`),await va(ve).onceSealed(),r(" Transaction sealed! Registering your entry..."),await fetch(`https://mvponflow.cc/api/fastbreak/contest/${f.id}/entries`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({topshotUsernamePrediction:p,userWalletAddress:e.addr})}),r(" Entry submitted!"),a(!1),g(""),R(f.id,e.addr)}catch(ve){console.error(ve),a(!1);const ye=ooe(ve),_e=f?.buy_in_amount??"N/A",Oe=Ih(f?.buy_in_currency)??"";ye.includes("Insufficient balance")?r(` Error: You need at least ${_e} ${Oe} in your wallet to buy in.`):r(` Error: ${ye}`)}},X=async Q=>{if(!(!Q||!f))try{const ye=await(await fetch(`https://mvponflow.cc/api/fastbreak_racing_stats/${Q}`)).json(),_e=await fetch(`https://mvponflow.cc/api/has_lineup?username=${Q}&fastbreak_id=${f.fastbreak_id}`),{hasLineup:Oe}=await _e.json();I({...ye,hasLineup:Oe}),O(!0)}catch(ve){console.error("Failed to fetch stats:",ve),alert("Failed to load stats. Please try again.")}},N=({contest:Q,selected:ve,onClick:ye})=>{const{text:_e,color:Oe}=doe(Q);return P.jsxs("div",{ref:ee[Q.id],className:"contest-card",onClick:ye,role:"button",style:{width:240,minWidth:240,maxWidth:240,padding:"12px",borderRadius:"14px",backgroundColor:ve?"#0E2240":"#1C2A3A",border:ve?"2px solid #FDB927":"1px solid #273549",color:"#E5E7EB",cursor:"pointer",boxShadow:ve?"0 6px 20px rgba(253,185,39,0.25)":"0 2px 10px rgba(0,0,0,0.25)",transform:ve?"scale(1.02)":"scale(1)",transition:"transform .12s ease, box-shadow .12s ease, border .12s ease, background-color .12s ease"},children:[P.jsxs("div",{className:"d-flex align-items-start justify-content-between",children:[P.jsx("div",{className:"fw-bold",style:{color:"#FDB927",fontSize:"1rem",lineHeight:1.25},children:Q.display_name||Q.fastbreak_id}),P.jsx("span",{className:"badge rounded-pill",style:{backgroundColor:Oe,color:"#0B1220",fontWeight:700},title:_e,children:_e})]}),P.jsxs("div",{className:"mt-2 small",children:["Buy-in: ",P.jsxs("strong",{children:[Q.buy_in_amount," ",Ih(Q.buy_in_currency)]})]})]})},K=j.useMemo(()=>f?c.findIndex(Q=>Q.id===f.id):-1,[c,f]),te=Q=>{if(Q<0||Q>=c.length)return;const ve=c[Q];ve&&L(ve)},se=()=>te(K-1),ie=()=>te(K+1),fe=e.loggedIn&&!i&&!v&&!!y&&y.status!=="STARTED";return P.jsxs("div",{className:"container",children:[P.jsx("div",{className:"card shadow mb-4",children:P.jsxs("div",{className:"card-body",children:[P.jsx("h2",{className:"mb-3 text-center",children:"Fastbreak Horse Race"}),P.jsx("div",{className:"mb-2 text-center",children:P.jsx("button",{className:"btn",onClick:()=>W(Q=>!Q),style:{backgroundColor:"#0E2240",color:"#FDB927",border:"1px solid #FDB927",fontWeight:700,borderRadius:9999,padding:"8px 16px"},children:k?"Hide Rules":"Show Rules"})}),k&&P.jsxs("div",{className:"mt-3 p-3 rounded-3",style:{backgroundColor:"#1C2A3A",border:"1px solid #273549"},children:[P.jsx("p",{className:"mb-1",children:" Pick your champion  a Top Shot user you think will finish highest in the selected Fastbreak daily game."}),P.jsxs("ul",{className:"fastbreak-rules-list",children:[P.jsx("li",{children:"Submit before lock by choosing a TS user and sending the buy-in"}),P.jsx("li",{children:"90% to the winner (split pot in case of a tie)"}),P.jsx("li",{children:"5% to the actual top horse (TS user selected by the winner)"}),P.jsx("li",{children:"Maximum entries per wallet: Unlimited"})]})]})]})}),P.jsx("div",{className:"card shadow mb-4",children:P.jsx("div",{className:"card-body",children:P.jsxs("div",{className:"position-relative",children:[P.jsx("button",{className:"btn position-absolute top-50 translate-middle-y",onClick:se,disabled:K<=0,style:{left:-8,zIndex:2,backgroundColor:"#0E2240",color:"#FDB927",border:"1px solid #FDB927",borderRadius:"50%",width:40,height:40,opacity:K<=0?.6:1},"aria-label":"Previous contest",children:""}),P.jsx("div",{ref:ne,className:"d-flex gap-3 px-5",style:{overflow:"hidden",scrollBehavior:"smooth",alignItems:"stretch"},children:c.map(Q=>P.jsx(N,{contest:Q,selected:f?.id===Q.id,onClick:()=>L(Q)},Q.id))}),P.jsx("button",{className:"btn position-absolute top-50 translate-middle-y",onClick:ie,disabled:K>=c.length-1,style:{right:-8,zIndex:2,backgroundColor:"#0E2240",color:"#FDB927",border:"1px solid #FDB927",borderRadius:"50%",width:40,height:40,opacity:K>=c.length-1?.6:1},"aria-label":"Next contest",children:""})]})})}),P.jsx("div",{className:"card shadow mb-4",children:P.jsxs("div",{className:"card-body",children:[P.jsxs("div",{className:"mb-3 position-relative",children:[P.jsxs("label",{children:["TopShot Username Prediction (Need help choosing?"," ",P.jsx("span",{onClick:()=>window.location.href="/horsestats",style:{color:"#FDB927",fontWeight:"bold",textDecoration:"underline",cursor:"pointer"},children:"Investigate detailed stats"}),")"]}),P.jsx("input",{type:"text",className:"form-control",value:p,onChange:Q=>{const ve=Q.target.value;g(ve),G(ve.trim().length>0)},onFocus:()=>{p.trim().length>0&&G(!0)},onKeyDown:Q=>{(Q.key==="Escape"||Q.key==="Enter")&&G(!1)},onBlur:()=>{setTimeout(()=>G(!1),120)},placeholder:"Enter TopShot username of someone you predict does well",autoComplete:"off"}),F&&p&&P.jsxs("ul",{className:"list-group position-absolute w-100",style:{zIndex:1e3},role:"listbox",children:[z.filter(Q=>Q.toLowerCase().includes(p.toLowerCase())).slice(0,5).map((Q,ve)=>P.jsx("li",{className:"list-group-item list-group-item-action",style:{backgroundColor:"#1C2A3A",color:"#FDB927",cursor:"pointer"},onMouseDown:ye=>{ye.preventDefault(),g(Q),G(!1)},role:"option","aria-selected":Q.toLowerCase()===p.toLowerCase(),children:Q},ve)),z.filter(Q=>Q.toLowerCase().includes(p.toLowerCase())).length===0&&P.jsxs("li",{className:"list-group-item",style:{backgroundColor:"#1C2A3A",color:"#ADB5BD"},children:["No matches  press Enter to use ",p,""]})]})]}),P.jsxs("div",{className:"d-flex flex-column flex-md-row gap-3 mt-3 justify-content-center",children:[P.jsx("button",{className:"btn btn-outline-light flex-fill",style:{backgroundColor:"#0E2240",color:"#FDB927",border:"1px solid #FDB927",fontWeight:"600"},disabled:!p.trim(),onClick:()=>X(p.trim()),children:" Check Their Stats"}),P.jsx("button",{className:"btn btn-primary flex-fill",onClick:V,disabled:!fe,children:i?"Processing...":v||!y?"Loading contest info...":`Buy In for ${f?.buy_in_amount||""} ${Ih(f?.buy_in_currency)||""}`})]}),n&&P.jsx("div",{className:"mt-3 text-center",children:P.jsx("p",{dangerouslySetInnerHTML:{__html:n}})})]})}),y&&P.jsx("div",{className:"card shadow mb-4",children:P.jsxs("div",{className:"card-body",children:[P.jsx("h3",{className:"card-title",children:" Contest Info"}),S&&P.jsxs("p",{children:[P.jsx("strong",{children:"Contest locks in:"})," ",S]}),P.jsxs("p",{children:[P.jsx("strong",{children:"Total entries:"})," ",y.totalEntries]}),(()=>{const Q=Ih(f?.buy_in_currency),ve=(y.totalPot*18/19).toFixed(2),ye=(y.totalPot/19).toFixed(2);return P.jsxs(P.Fragment,{children:[P.jsxs("p",{children:[P.jsx("strong",{children:"Total pot:"})," ",y.totalPot.toFixed(2)," ",Q]}),P.jsx("p",{className:"text-muted",children:P.jsxs("em",{children:["Winner gets ",ve," ",Q,", Selected user earns ",ye," ",Q]})})]})})(),y.status==="STARTED"?P.jsxs(P.Fragment,{children:[P.jsx("h4",{className:"mt-4 mb-3 text-center",children:" Leaderboard"}),P.jsx("div",{className:"table-responsive",children:P.jsxs("table",{className:"mvp-table",children:[P.jsx("thead",{children:P.jsxs("tr",{children:[P.jsx("th",{children:"Rank"}),P.jsx("th",{children:"Wallet"}),P.jsx("th",{children:"Prediction"}),P.jsx("th",{children:"Fastbreak Rank"}),P.jsx("th",{children:"Points"}),P.jsx("th",{children:"Lineup"})]})}),P.jsx("tbody",{children:y.entries.map(Q=>P.jsxs("tr",{className:Q.isUser?"mvp-user-row":"",children:[P.jsx("td",{children:Q.position}),P.jsx("td",{children:Q.wallet}),P.jsx("td",{className:"leaderboard-link",onClick:()=>X(Q.prediction),children:Q.prediction}),P.jsx("td",{children:Q.rank}),P.jsx("td",{children:Q.points}),P.jsx("td",{children:Q.lineup?Q.lineup.join(", "):"N/A"})]},`${Q.wallet}-${Q.prediction}`))})]})})]}):P.jsx(P.Fragment,{children:y.userEntries.length>0?P.jsxs(P.Fragment,{children:[P.jsx("h5",{className:"mt-4",children:"Your Entries:"}),P.jsx("div",{className:"table-responsive",children:P.jsxs("table",{className:"mvp-table",children:[P.jsx("thead",{children:P.jsxs("tr",{children:[P.jsx("th",{children:"Prediction"}),P.jsx("th",{children:"Fastbreak Rank"}),P.jsx("th",{children:"Points"}),P.jsx("th",{children:"Lineup"})]})}),P.jsx("tbody",{children:y.userEntries.map((Q,ve)=>P.jsxs("tr",{children:[P.jsx("td",{children:Q.prediction}),P.jsx("td",{children:Q.rank!==void 0?Q.rank:"N/A"}),P.jsx("td",{children:Q.points!==void 0?Q.points:"N/A"}),P.jsx("td",{children:Q.lineup?Q.lineup.join(", "):"N/A"})]},ve))})]})})]}):P.jsx("p",{className:"text-muted mt-3",children:"You have not submitted any entries yet."})})]})})]})}function yoe(){const[e,t]=j.useState([]),[n,r]=j.useState([]),[i,a]=j.useState(1),[c]=j.useState(25),[u,f]=j.useState(0),[d,p]=j.useState(""),[g,y]=j.useState([]),[b,v]=j.useState(!1),[E,S]=j.useState(null);j.useEffect(()=>{_(i),T()},[i]);const _=async z=>{try{const k=await(await fetch(`https://mvponflow.cc/api/fastbreak_racing_stats?page=${z}&per_page=${c}`)).json();t(k.leaderboard),f(k.total_users)}catch(q){console.error("Failed to load leaderboard:",q)}},T=async()=>{try{const q=await(await fetch("https://mvponflow.cc/api/fastbreak_racing_usernames")).json();r(q)}catch(z){console.error("Failed to fetch usernames:",z)}},O=async()=>{d.trim()&&$(d.trim())},$=async z=>{try{const k=await(await fetch(`https://mvponflow.cc/api/fastbreak_racing_stats/${z}`)).json();S(k),v(!0)}catch(q){console.error("Failed to fetch user stats:",q),alert("Failed to load user stats")}},I=z=>{const q=z.target.value;if(p(q),q.trim()==="")y([]);else{const k=n.filter(W=>W.toLowerCase().includes(q.toLowerCase()));y(k.slice(0,10))}},B=Math.ceil(u/c);return P.jsxs("div",{className:"container mt-4",children:[P.jsx("h2",{className:"text-center mb-4",children:" Fastbreak stats for last 15 daily classic games"}),P.jsxs("div",{className:"mb-3 position-relative",children:[P.jsx("input",{type:"text",className:"form-control",placeholder:"Search username",value:d,onChange:I,onKeyDown:z=>z.key==="Enter"&&O()}),g.length>0&&P.jsx("ul",{className:"list-group position-absolute w-100",style:{zIndex:10},children:g.map((z,q)=>P.jsx("li",{className:"list-group-item list-group-item-action",style:{backgroundColor:"#1C2A3A",color:"#E5E7EB",cursor:"pointer"},onClick:()=>{p(z),y([]),$(z)},children:z},q))})]}),P.jsx("div",{className:"table-responsive",children:P.jsxs("table",{className:"mvp-table",children:[P.jsx("thead",{children:P.jsxs("tr",{children:[P.jsx("th",{children:"#"}),P.jsx("th",{children:"Username"}),P.jsx("th",{children:"Best"}),P.jsx("th",{children:"Mean"})]})}),P.jsx("tbody",{children:e.map((z,q)=>P.jsxs("tr",{children:[P.jsx("td",{children:(i-1)*c+q+1}),P.jsx("td",{children:P.jsx("button",{className:"btn btn-link p-0",onClick:()=>$(z.username),style:{color:"#FDB927",fontWeight:"bold"},children:z.username})}),P.jsx("td",{children:z.best}),P.jsx("td",{children:z.mean})]},z.username))})]})}),P.jsxs("div",{className:"d-flex justify-content-center align-items-center mt-3 gap-2",children:[P.jsx("button",{className:"btn btn-outline-light",onClick:()=>a(z=>Math.max(1,z-1)),disabled:i===1,children:" Prev"}),P.jsxs("span",{children:["Page ",i," of ",B]}),P.jsx("button",{className:"btn btn-outline-light",onClick:()=>a(z=>Math.min(B,z+1)),disabled:i===B,children:"Next "})]}),b&&E&&P.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0, 0, 0, 0.6)"},children:P.jsx("div",{className:"modal-dialog modal-dialog-centered modal-lg",children:P.jsxs("div",{className:"modal-content",style:{backgroundColor:"#1C2A3A",color:"#E5E7EB",border:"1px solid #273549"},children:[P.jsxs("div",{className:"modal-header border-bottom-0",children:[P.jsxs("h5",{className:"modal-title",style:{color:"#FDB927"},children:[" Stats for ",E.username," (Last 15 Fastbreaks)"]}),P.jsx("button",{type:"button",className:"btn-close",style:{filter:"invert(90%)"},onClick:()=>v(!1)})]}),P.jsxs("div",{className:"modal-body",children:[P.jsxs("div",{className:"d-flex flex-wrap justify-content-around text-center mb-3",children:[P.jsxs("div",{children:[P.jsx("strong",{style:{color:"#FDB927"},children:"Best:"})," ",E.best]}),P.jsxs("div",{children:[P.jsx("strong",{style:{color:"#FDB927"},children:"Mean:"})," ",E.mean]}),P.jsxs("div",{children:[P.jsx("strong",{style:{color:"#FDB927"},children:"Median:"})," ",E.median]})]}),P.jsxs("div",{className:"mt-3",children:[P.jsx("strong",{style:{color:"#FDB927"},children:"Recent Ranks:"}),P.jsx("p",{className:"mt-2 text-muted",style:{wordBreak:"break-word"},children:E.rankings.map(z=>z.rank).join(", ")})]})]}),P.jsx("div",{className:"modal-footer border-top-0",children:P.jsx("button",{className:"btn btn-outline-light",onClick:()=>v(!1),children:"Close"})})]})})})]})}function boe(){return P.jsx(eB,{children:P.jsx(C$,{children:P.jsxs(Js,{path:"/",element:P.jsx(Zse,{}),children:[P.jsx(Js,{index:!0,element:P.jsx(Qse,{})}),P.jsx(Js,{path:"swapfest",element:P.jsx(Jse,{})}),P.jsx(Js,{path:"treasury",element:P.jsx(eoe,{})}),P.jsx(Js,{path:"vote",element:P.jsx(toe,{})}),P.jsx(Js,{path:"fastbreak",element:P.jsx(moe,{})}),P.jsx(Js,{path:"horsestats",element:P.jsx(yoe,{})})]})})})}P4.createRoot(document.getElementById("root")).render(P.jsx(j.StrictMode,{children:P.jsx(boe,{})}));export{wL as H,K3 as _,gx as a,lf as b,Soe as c,pL as d,iD as e,EL as f,Eoe as g,ep as h,Aoe as i,xoe as j,vs as k,_oe as r,sD as t};
