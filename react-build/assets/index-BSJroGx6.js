(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();var qn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function pd(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function P8(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var n=function r(){var s=!1;try{s=this instanceof r}catch{}return s?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var s=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return e[r]}})}),n}var ly={exports:{}},xl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LE;function k8(){if(LE)return xl;LE=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,s,a){var l=null;if(a!==void 0&&(l=""+a),s.key!==void 0&&(l=""+s.key),"key"in s){a={};for(var u in s)u!=="key"&&(a[u]=s[u])}else a=s;return s=a.ref,{$$typeof:e,type:r,key:l,ref:s!==void 0?s:null,props:a}}return xl.Fragment=t,xl.jsx=n,xl.jsxs=n,xl}var jE;function M8(){return jE||(jE=1,ly.exports=k8()),ly.exports}var Q=M8(),uy={exports:{}},Ne={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zE;function L8(){if(zE)return Ne;zE=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),y=Symbol.iterator;function b(C){return C===null||typeof C!="object"?null:(C=y&&C[y]||C["@@iterator"],typeof C=="function"?C:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,E={};function _(C,z,J){this.props=C,this.context=z,this.refs=E,this.updater=J||w}_.prototype.isReactComponent={},_.prototype.setState=function(C,z){if(typeof C!="object"&&typeof C!="function"&&C!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,C,z,"setState")},_.prototype.forceUpdate=function(C){this.updater.enqueueForceUpdate(this,C,"forceUpdate")};function R(){}R.prototype=_.prototype;function D(C,z,J){this.props=C,this.context=z,this.refs=E,this.updater=J||w}var I=D.prototype=new R;I.constructor=D,v(I,_.prototype),I.isPureReactComponent=!0;var $=Array.isArray,U={H:null,A:null,T:null,S:null,V:null},k=Object.prototype.hasOwnProperty;function q(C,z,J,se,re,ge){return J=ge.ref,{$$typeof:e,type:C,key:z,ref:J!==void 0?J:null,props:ge}}function H(C,z){return q(C.type,z,void 0,void 0,void 0,C.props)}function P(C){return typeof C=="object"&&C!==null&&C.$$typeof===e}function V(C){var z={"=":"=0",":":"=2"};return"$"+C.replace(/[=:]/g,function(J){return z[J]})}var G=/\/+/g;function K(C,z){return typeof C=="object"&&C!==null&&C.key!=null?V(""+C.key):z.toString(36)}function ce(){}function ne(C){switch(C.status){case"fulfilled":return C.value;case"rejected":throw C.reason;default:switch(typeof C.status=="string"?C.then(ce,ce):(C.status="pending",C.then(function(z){C.status==="pending"&&(C.status="fulfilled",C.value=z)},function(z){C.status==="pending"&&(C.status="rejected",C.reason=z)})),C.status){case"fulfilled":return C.value;case"rejected":throw C.reason}}throw C}function T(C,z,J,se,re){var ge=typeof C;(ge==="undefined"||ge==="boolean")&&(C=null);var ye=!1;if(C===null)ye=!0;else switch(ge){case"bigint":case"string":case"number":ye=!0;break;case"object":switch(C.$$typeof){case e:case t:ye=!0;break;case p:return ye=C._init,T(ye(C._payload),z,J,se,re)}}if(ye)return re=re(C),ye=se===""?"."+K(C,0):se,$(re)?(J="",ye!=null&&(J=ye.replace(G,"$&/")+"/"),T(re,z,J,"",function(xe){return xe})):re!=null&&(P(re)&&(re=H(re,J+(re.key==null||C&&C.key===re.key?"":(""+re.key).replace(G,"$&/")+"/")+ye)),z.push(re)),1;ye=0;var De=se===""?".":se+":";if($(C))for(var _e=0;_e<C.length;_e++)se=C[_e],ge=De+K(se,_e),ye+=T(se,z,J,ge,re);else if(_e=b(C),typeof _e=="function")for(C=_e.call(C),_e=0;!(se=C.next()).done;)se=se.value,ge=De+K(se,_e++),ye+=T(se,z,J,ge,re);else if(ge==="object"){if(typeof C.then=="function")return T(ne(C),z,J,se,re);throw z=String(C),Error("Objects are not valid as a React child (found: "+(z==="[object Object]"?"object with keys {"+Object.keys(C).join(", ")+"}":z)+"). If you meant to render a collection of children, use an array instead.")}return ye}function O(C,z,J){if(C==null)return C;var se=[],re=0;return T(C,se,"","",function(ge){return z.call(J,ge,re++)}),se}function M(C){if(C._status===-1){var z=C._result;z=z(),z.then(function(J){(C._status===0||C._status===-1)&&(C._status=1,C._result=J)},function(J){(C._status===0||C._status===-1)&&(C._status=2,C._result=J)}),C._status===-1&&(C._status=0,C._result=z)}if(C._status===1)return C._result.default;throw C._result}var F=typeof reportError=="function"?reportError:function(C){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof C=="object"&&C!==null&&typeof C.message=="string"?String(C.message):String(C),error:C});if(!window.dispatchEvent(z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",C);return}console.error(C)};function Y(){}return Ne.Children={map:O,forEach:function(C,z,J){O(C,function(){z.apply(this,arguments)},J)},count:function(C){var z=0;return O(C,function(){z++}),z},toArray:function(C){return O(C,function(z){return z})||[]},only:function(C){if(!P(C))throw Error("React.Children.only expected to receive a single React element child.");return C}},Ne.Component=_,Ne.Fragment=n,Ne.Profiler=s,Ne.PureComponent=D,Ne.StrictMode=r,Ne.Suspense=d,Ne.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=U,Ne.__COMPILER_RUNTIME={__proto__:null,c:function(C){return U.H.useMemoCache(C)}},Ne.cache=function(C){return function(){return C.apply(null,arguments)}},Ne.cloneElement=function(C,z,J){if(C==null)throw Error("The argument must be a React element, but you passed "+C+".");var se=v({},C.props),re=C.key,ge=void 0;if(z!=null)for(ye in z.ref!==void 0&&(ge=void 0),z.key!==void 0&&(re=""+z.key),z)!k.call(z,ye)||ye==="key"||ye==="__self"||ye==="__source"||ye==="ref"&&z.ref===void 0||(se[ye]=z[ye]);var ye=arguments.length-2;if(ye===1)se.children=J;else if(1<ye){for(var De=Array(ye),_e=0;_e<ye;_e++)De[_e]=arguments[_e+2];se.children=De}return q(C.type,re,void 0,void 0,ge,se)},Ne.createContext=function(C){return C={$$typeof:l,_currentValue:C,_currentValue2:C,_threadCount:0,Provider:null,Consumer:null},C.Provider=C,C.Consumer={$$typeof:a,_context:C},C},Ne.createElement=function(C,z,J){var se,re={},ge=null;if(z!=null)for(se in z.key!==void 0&&(ge=""+z.key),z)k.call(z,se)&&se!=="key"&&se!=="__self"&&se!=="__source"&&(re[se]=z[se]);var ye=arguments.length-2;if(ye===1)re.children=J;else if(1<ye){for(var De=Array(ye),_e=0;_e<ye;_e++)De[_e]=arguments[_e+2];re.children=De}if(C&&C.defaultProps)for(se in ye=C.defaultProps,ye)re[se]===void 0&&(re[se]=ye[se]);return q(C,ge,void 0,void 0,null,re)},Ne.createRef=function(){return{current:null}},Ne.forwardRef=function(C){return{$$typeof:u,render:C}},Ne.isValidElement=P,Ne.lazy=function(C){return{$$typeof:p,_payload:{_status:-1,_result:C},_init:M}},Ne.memo=function(C,z){return{$$typeof:h,type:C,compare:z===void 0?null:z}},Ne.startTransition=function(C){var z=U.T,J={};U.T=J;try{var se=C(),re=U.S;re!==null&&re(J,se),typeof se=="object"&&se!==null&&typeof se.then=="function"&&se.then(Y,F)}catch(ge){F(ge)}finally{U.T=z}},Ne.unstable_useCacheRefresh=function(){return U.H.useCacheRefresh()},Ne.use=function(C){return U.H.use(C)},Ne.useActionState=function(C,z,J){return U.H.useActionState(C,z,J)},Ne.useCallback=function(C,z){return U.H.useCallback(C,z)},Ne.useContext=function(C){return U.H.useContext(C)},Ne.useDebugValue=function(){},Ne.useDeferredValue=function(C,z){return U.H.useDeferredValue(C,z)},Ne.useEffect=function(C,z,J){var se=U.H;if(typeof J=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return se.useEffect(C,z)},Ne.useId=function(){return U.H.useId()},Ne.useImperativeHandle=function(C,z,J){return U.H.useImperativeHandle(C,z,J)},Ne.useInsertionEffect=function(C,z){return U.H.useInsertionEffect(C,z)},Ne.useLayoutEffect=function(C,z){return U.H.useLayoutEffect(C,z)},Ne.useMemo=function(C,z){return U.H.useMemo(C,z)},Ne.useOptimistic=function(C,z){return U.H.useOptimistic(C,z)},Ne.useReducer=function(C,z,J){return U.H.useReducer(C,z,J)},Ne.useRef=function(C){return U.H.useRef(C)},Ne.useState=function(C){return U.H.useState(C)},Ne.useSyncExternalStore=function(C,z,J){return U.H.useSyncExternalStore(C,z,J)},Ne.useTransition=function(){return U.H.useTransition()},Ne.version="19.1.0",Ne}var qE;function j0(){return qE||(qE=1,uy.exports=L8()),uy.exports}var le=j0(),fy={exports:{}},Tl={},hy={exports:{}},dy={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HE;function j8(){return HE||(HE=1,function(e){function t(O,M){var F=O.length;O.push(M);e:for(;0<F;){var Y=F-1>>>1,C=O[Y];if(0<s(C,M))O[Y]=M,O[F]=C,F=Y;else break e}}function n(O){return O.length===0?null:O[0]}function r(O){if(O.length===0)return null;var M=O[0],F=O.pop();if(F!==M){O[0]=F;e:for(var Y=0,C=O.length,z=C>>>1;Y<z;){var J=2*(Y+1)-1,se=O[J],re=J+1,ge=O[re];if(0>s(se,F))re<C&&0>s(ge,se)?(O[Y]=ge,O[re]=F,Y=re):(O[Y]=se,O[J]=F,Y=J);else if(re<C&&0>s(ge,F))O[Y]=ge,O[re]=F,Y=re;else break e}}return M}function s(O,M){var F=O.sortIndex-M.sortIndex;return F!==0?F:O.id-M.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var l=Date,u=l.now();e.unstable_now=function(){return l.now()-u}}var d=[],h=[],p=1,y=null,b=3,w=!1,v=!1,E=!1,_=!1,R=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;function $(O){for(var M=n(h);M!==null;){if(M.callback===null)r(h);else if(M.startTime<=O)r(h),M.sortIndex=M.expirationTime,t(d,M);else break;M=n(h)}}function U(O){if(E=!1,$(O),!v)if(n(d)!==null)v=!0,k||(k=!0,K());else{var M=n(h);M!==null&&T(U,M.startTime-O)}}var k=!1,q=-1,H=5,P=-1;function V(){return _?!0:!(e.unstable_now()-P<H)}function G(){if(_=!1,k){var O=e.unstable_now();P=O;var M=!0;try{e:{v=!1,E&&(E=!1,D(q),q=-1),w=!0;var F=b;try{t:{for($(O),y=n(d);y!==null&&!(y.expirationTime>O&&V());){var Y=y.callback;if(typeof Y=="function"){y.callback=null,b=y.priorityLevel;var C=Y(y.expirationTime<=O);if(O=e.unstable_now(),typeof C=="function"){y.callback=C,$(O),M=!0;break t}y===n(d)&&r(d),$(O)}else r(d);y=n(d)}if(y!==null)M=!0;else{var z=n(h);z!==null&&T(U,z.startTime-O),M=!1}}break e}finally{y=null,b=F,w=!1}M=void 0}}finally{M?K():k=!1}}}var K;if(typeof I=="function")K=function(){I(G)};else if(typeof MessageChannel<"u"){var ce=new MessageChannel,ne=ce.port2;ce.port1.onmessage=G,K=function(){ne.postMessage(null)}}else K=function(){R(G,0)};function T(O,M){q=R(function(){O(e.unstable_now())},M)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(O){O.callback=null},e.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<O?Math.floor(1e3/O):5},e.unstable_getCurrentPriorityLevel=function(){return b},e.unstable_next=function(O){switch(b){case 1:case 2:case 3:var M=3;break;default:M=b}var F=b;b=M;try{return O()}finally{b=F}},e.unstable_requestPaint=function(){_=!0},e.unstable_runWithPriority=function(O,M){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var F=b;b=O;try{return M()}finally{b=F}},e.unstable_scheduleCallback=function(O,M,F){var Y=e.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?Y+F:Y):F=Y,O){case 1:var C=-1;break;case 2:C=250;break;case 5:C=1073741823;break;case 4:C=1e4;break;default:C=5e3}return C=F+C,O={id:p++,callback:M,priorityLevel:O,startTime:F,expirationTime:C,sortIndex:-1},F>Y?(O.sortIndex=F,t(h,O),n(d)===null&&O===n(h)&&(E?(D(q),q=-1):E=!0,T(U,F-Y))):(O.sortIndex=C,t(d,O),v||w||(v=!0,k||(k=!0,K()))),O},e.unstable_shouldYield=V,e.unstable_wrapCallback=function(O){var M=b;return function(){var F=b;b=M;try{return O.apply(this,arguments)}finally{b=F}}}}(dy)),dy}var FE;function z8(){return FE||(FE=1,hy.exports=j8()),hy.exports}var py={exports:{}},yn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VE;function q8(){if(VE)return yn;VE=1;var e=j0();function t(d){var h="https://react.dev/errors/"+d;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)h+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+d+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},s=Symbol.for("react.portal");function a(d,h,p){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:y==null?null:""+y,children:d,containerInfo:h,implementation:p}}var l=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(d,h){if(d==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return yn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,yn.createPortal=function(d,h){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(t(299));return a(d,h,null,p)},yn.flushSync=function(d){var h=l.T,p=r.p;try{if(l.T=null,r.p=2,d)return d()}finally{l.T=h,r.p=p,r.d.f()}},yn.preconnect=function(d,h){typeof d=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,r.d.C(d,h))},yn.prefetchDNS=function(d){typeof d=="string"&&r.d.D(d)},yn.preinit=function(d,h){if(typeof d=="string"&&h&&typeof h.as=="string"){var p=h.as,y=u(p,h.crossOrigin),b=typeof h.integrity=="string"?h.integrity:void 0,w=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;p==="style"?r.d.S(d,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:y,integrity:b,fetchPriority:w}):p==="script"&&r.d.X(d,{crossOrigin:y,integrity:b,fetchPriority:w,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},yn.preinitModule=function(d,h){if(typeof d=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var p=u(h.as,h.crossOrigin);r.d.M(d,{crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&r.d.M(d)},yn.preload=function(d,h){if(typeof d=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var p=h.as,y=u(p,h.crossOrigin);r.d.L(d,p,{crossOrigin:y,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},yn.preloadModule=function(d,h){if(typeof d=="string")if(h){var p=u(h.as,h.crossOrigin);r.d.m(d,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else r.d.m(d)},yn.requestFormReset=function(d){r.d.r(d)},yn.unstable_batchedUpdates=function(d,h){return d(h)},yn.useFormState=function(d,h,p){return l.H.useFormState(d,h,p)},yn.useFormStatus=function(){return l.H.useHostTransitionStatus()},yn.version="19.1.0",yn}var GE;function H8(){if(GE)return py.exports;GE=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),py.exports=q8(),py.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KE;function F8(){if(KE)return Tl;KE=1;var e=z8(),t=j0(),n=H8();function r(i){var o="https://react.dev/errors/"+i;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)o+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function a(i){var o=i,c=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,(o.flags&4098)!==0&&(c=o.return),i=o.return;while(i)}return o.tag===3?c:null}function l(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function u(i){if(a(i)!==i)throw Error(r(188))}function d(i){var o=i.alternate;if(!o){if(o=a(i),o===null)throw Error(r(188));return o!==i?null:i}for(var c=i,f=o;;){var g=c.return;if(g===null)break;var m=g.alternate;if(m===null){if(f=g.return,f!==null){c=f;continue}break}if(g.child===m.child){for(m=g.child;m;){if(m===c)return u(g),i;if(m===f)return u(g),o;m=m.sibling}throw Error(r(188))}if(c.return!==f.return)c=g,f=m;else{for(var x=!1,B=g.child;B;){if(B===c){x=!0,c=g,f=m;break}if(B===f){x=!0,f=g,c=m;break}B=B.sibling}if(!x){for(B=m.child;B;){if(B===c){x=!0,c=m,f=g;break}if(B===f){x=!0,f=m,c=g;break}B=B.sibling}if(!x)throw Error(r(189))}}if(c.alternate!==f)throw Error(r(190))}if(c.tag!==3)throw Error(r(188));return c.stateNode.current===c?i:o}function h(i){var o=i.tag;if(o===5||o===26||o===27||o===6)return i;for(i=i.child;i!==null;){if(o=h(i),o!==null)return o;i=i.sibling}return null}var p=Object.assign,y=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),R=Symbol.for("react.provider"),D=Symbol.for("react.consumer"),I=Symbol.for("react.context"),$=Symbol.for("react.forward_ref"),U=Symbol.for("react.suspense"),k=Symbol.for("react.suspense_list"),q=Symbol.for("react.memo"),H=Symbol.for("react.lazy"),P=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),G=Symbol.iterator;function K(i){return i===null||typeof i!="object"?null:(i=G&&i[G]||i["@@iterator"],typeof i=="function"?i:null)}var ce=Symbol.for("react.client.reference");function ne(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===ce?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case v:return"Fragment";case _:return"Profiler";case E:return"StrictMode";case U:return"Suspense";case k:return"SuspenseList";case P:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case w:return"Portal";case I:return(i.displayName||"Context")+".Provider";case D:return(i._context.displayName||"Context")+".Consumer";case $:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case q:return o=i.displayName||null,o!==null?o:ne(i.type)||"Memo";case H:o=i._payload,i=i._init;try{return ne(i(o))}catch{}}return null}var T=Array.isArray,O=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,M=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,F={pending:!1,data:null,method:null,action:null},Y=[],C=-1;function z(i){return{current:i}}function J(i){0>C||(i.current=Y[C],Y[C]=null,C--)}function se(i,o){C++,Y[C]=i.current,i.current=o}var re=z(null),ge=z(null),ye=z(null),De=z(null);function _e(i,o){switch(se(ye,o),se(ge,i),se(re,null),o.nodeType){case 9:case 11:i=(i=o.documentElement)&&(i=i.namespaceURI)?dE(i):0;break;default:if(i=o.tagName,o=o.namespaceURI)o=dE(o),i=pE(o,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}J(re),se(re,i)}function xe(){J(re),J(ge),J(ye)}function nt(i){i.memoizedState!==null&&se(De,i);var o=re.current,c=pE(o,i.type);o!==c&&(se(ge,i),se(re,c))}function bt(i){ge.current===i&&(J(re),J(ge)),De.current===i&&(J(De),_l._currentValue=F)}var Dn=Object.prototype.hasOwnProperty,_n=e.unstable_scheduleCallback,hn=e.unstable_cancelCallback,Fs=e.unstable_shouldYield,Ic=e.unstable_requestPaint,dn=e.unstable_now,Cc=e.unstable_getCurrentPriorityLevel,Vs=e.unstable_ImmediatePriority,Ji=e.unstable_UserBlockingPriority,Wn=e.unstable_NormalPriority,Sn=e.unstable_LowPriority,bi=e.unstable_IdlePriority,Zo=e.log,Xn=e.unstable_setDisableYieldValue,Gr=null,N=null;function S(i){if(typeof Zo=="function"&&Xn(i),N&&typeof N.setStrictMode=="function")try{N.setStrictMode(Gr,i)}catch{}}var A=Math.clz32?Math.clz32:ae,L=Math.log,X=Math.LN2;function ae(i){return i>>>=0,i===0?32:31-(L(i)/X|0)|0}var he=256,Ce=4194304;function Ye(i){var o=i&42;if(o!==0)return o;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function Xe(i,o,c){var f=i.pendingLanes;if(f===0)return 0;var g=0,m=i.suspendedLanes,x=i.pingedLanes;i=i.warmLanes;var B=f&134217727;return B!==0?(f=B&~m,f!==0?g=Ye(f):(x&=B,x!==0?g=Ye(x):c||(c=B&~i,c!==0&&(g=Ye(c))))):(B=f&~m,B!==0?g=Ye(B):x!==0?g=Ye(x):c||(c=f&~i,c!==0&&(g=Ye(c)))),g===0?0:o!==0&&o!==g&&(o&m)===0&&(m=g&-g,c=o&-o,m>=c||m===32&&(c&4194048)!==0)?o:g}function rt(i,o){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&o)===0}function Ze(i,o){switch(i){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Xb(){var i=he;return he<<=1,(he&4194048)===0&&(he=256),i}function Zb(){var i=Ce;return Ce<<=1,(Ce&62914560)===0&&(Ce=4194304),i}function Qd(i){for(var o=[],c=0;31>c;c++)o.push(i);return o}function Nc(i,o){i.pendingLanes|=o,o!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function AD(i,o,c,f,g,m){var x=i.pendingLanes;i.pendingLanes=c,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=c,i.entangledLanes&=c,i.errorRecoveryDisabledLanes&=c,i.shellSuspendCounter=0;var B=i.entanglements,j=i.expirationTimes,te=i.hiddenUpdates;for(c=x&~c;0<c;){var ue=31-A(c),pe=1<<ue;B[ue]=0,j[ue]=-1;var ie=te[ue];if(ie!==null)for(te[ue]=null,ue=0;ue<ie.length;ue++){var oe=ie[ue];oe!==null&&(oe.lane&=-536870913)}c&=~pe}f!==0&&Qb(i,f,0),m!==0&&g===0&&i.tag!==0&&(i.suspendedLanes|=m&~(x&~o))}function Qb(i,o,c){i.pendingLanes|=o,i.suspendedLanes&=~o;var f=31-A(o);i.entangledLanes|=o,i.entanglements[f]=i.entanglements[f]|1073741824|c&4194090}function Jb(i,o){var c=i.entangledLanes|=o;for(i=i.entanglements;c;){var f=31-A(c),g=1<<f;g&o|i[f]&o&&(i[f]|=o),c&=~g}}function Jd(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function ep(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function ew(){var i=M.p;return i!==0?i:(i=window.event,i===void 0?32:UE(i.type))}function RD(i,o){var c=M.p;try{return M.p=i,o()}finally{M.p=c}}var es=Math.random().toString(36).slice(2),pn="__reactFiber$"+es,In="__reactProps$"+es,Qo="__reactContainer$"+es,tp="__reactEvents$"+es,OD="__reactListeners$"+es,xD="__reactHandles$"+es,tw="__reactResources$"+es,Uc="__reactMarker$"+es;function np(i){delete i[pn],delete i[In],delete i[tp],delete i[OD],delete i[xD]}function Jo(i){var o=i[pn];if(o)return o;for(var c=i.parentNode;c;){if(o=c[Qo]||c[pn]){if(c=o.alternate,o.child!==null||c!==null&&c.child!==null)for(i=bE(i);i!==null;){if(c=i[pn])return c;i=bE(i)}return o}i=c,c=i.parentNode}return null}function ea(i){if(i=i[pn]||i[Qo]){var o=i.tag;if(o===5||o===6||o===13||o===26||o===27||o===3)return i}return null}function Bc(i){var o=i.tag;if(o===5||o===26||o===27||o===6)return i.stateNode;throw Error(r(33))}function ta(i){var o=i[tw];return o||(o=i[tw]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function Vt(i){i[Uc]=!0}var nw=new Set,rw={};function Gs(i,o){na(i,o),na(i+"Capture",o)}function na(i,o){for(rw[i]=o,i=0;i<o.length;i++)nw.add(o[i])}var TD=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),iw={},sw={};function DD(i){return Dn.call(sw,i)?!0:Dn.call(iw,i)?!1:TD.test(i)?sw[i]=!0:(iw[i]=!0,!1)}function Vu(i,o,c){if(DD(o))if(c===null)i.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":i.removeAttribute(o);return;case"boolean":var f=o.toLowerCase().slice(0,5);if(f!=="data-"&&f!=="aria-"){i.removeAttribute(o);return}}i.setAttribute(o,""+c)}}function Gu(i,o,c){if(c===null)i.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(o);return}i.setAttribute(o,""+c)}}function wi(i,o,c,f){if(f===null)i.removeAttribute(c);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(c);return}i.setAttributeNS(o,c,""+f)}}var rp,ow;function ra(i){if(rp===void 0)try{throw Error()}catch(c){var o=c.stack.trim().match(/\n( *(at )?)/);rp=o&&o[1]||"",ow=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+rp+i+ow}var ip=!1;function sp(i,o){if(!i||ip)return"";ip=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var f={DetermineComponentFrameRoot:function(){try{if(o){var pe=function(){throw Error()};if(Object.defineProperty(pe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(pe,[])}catch(oe){var ie=oe}Reflect.construct(i,[],pe)}else{try{pe.call()}catch(oe){ie=oe}i.call(pe.prototype)}}else{try{throw Error()}catch(oe){ie=oe}(pe=i())&&typeof pe.catch=="function"&&pe.catch(function(){})}}catch(oe){if(oe&&ie&&typeof oe.stack=="string")return[oe.stack,ie.stack]}return[null,null]}};f.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(f.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(f.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=f.DetermineComponentFrameRoot(),x=m[0],B=m[1];if(x&&B){var j=x.split(`
`),te=B.split(`
`);for(g=f=0;f<j.length&&!j[f].includes("DetermineComponentFrameRoot");)f++;for(;g<te.length&&!te[g].includes("DetermineComponentFrameRoot");)g++;if(f===j.length||g===te.length)for(f=j.length-1,g=te.length-1;1<=f&&0<=g&&j[f]!==te[g];)g--;for(;1<=f&&0<=g;f--,g--)if(j[f]!==te[g]){if(f!==1||g!==1)do if(f--,g--,0>g||j[f]!==te[g]){var ue=`
`+j[f].replace(" at new "," at ");return i.displayName&&ue.includes("<anonymous>")&&(ue=ue.replace("<anonymous>",i.displayName)),ue}while(1<=f&&0<=g);break}}}finally{ip=!1,Error.prepareStackTrace=c}return(c=i?i.displayName||i.name:"")?ra(c):""}function ID(i){switch(i.tag){case 26:case 27:case 5:return ra(i.type);case 16:return ra("Lazy");case 13:return ra("Suspense");case 19:return ra("SuspenseList");case 0:case 15:return sp(i.type,!1);case 11:return sp(i.type.render,!1);case 1:return sp(i.type,!0);case 31:return ra("Activity");default:return""}}function aw(i){try{var o="";do o+=ID(i),i=i.return;while(i);return o}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}function hr(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function cw(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function CD(i){var o=cw(i)?"checked":"value",c=Object.getOwnPropertyDescriptor(i.constructor.prototype,o),f=""+i[o];if(!i.hasOwnProperty(o)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var g=c.get,m=c.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return g.call(this)},set:function(x){f=""+x,m.call(this,x)}}),Object.defineProperty(i,o,{enumerable:c.enumerable}),{getValue:function(){return f},setValue:function(x){f=""+x},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function Ku(i){i._valueTracker||(i._valueTracker=CD(i))}function lw(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var c=o.getValue(),f="";return i&&(f=cw(i)?i.checked?"true":"false":i.value),i=f,i!==c?(o.setValue(i),!0):!1}function Yu(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var ND=/[\n"\\]/g;function dr(i){return i.replace(ND,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function op(i,o,c,f,g,m,x,B){i.name="",x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?i.type=x:i.removeAttribute("type"),o!=null?x==="number"?(o===0&&i.value===""||i.value!=o)&&(i.value=""+hr(o)):i.value!==""+hr(o)&&(i.value=""+hr(o)):x!=="submit"&&x!=="reset"||i.removeAttribute("value"),o!=null?ap(i,x,hr(o)):c!=null?ap(i,x,hr(c)):f!=null&&i.removeAttribute("value"),g==null&&m!=null&&(i.defaultChecked=!!m),g!=null&&(i.checked=g&&typeof g!="function"&&typeof g!="symbol"),B!=null&&typeof B!="function"&&typeof B!="symbol"&&typeof B!="boolean"?i.name=""+hr(B):i.removeAttribute("name")}function uw(i,o,c,f,g,m,x,B){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(i.type=m),o!=null||c!=null){if(!(m!=="submit"&&m!=="reset"||o!=null))return;c=c!=null?""+hr(c):"",o=o!=null?""+hr(o):c,B||o===i.value||(i.value=o),i.defaultValue=o}f=f??g,f=typeof f!="function"&&typeof f!="symbol"&&!!f,i.checked=B?i.checked:!!f,i.defaultChecked=!!f,x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(i.name=x)}function ap(i,o,c){o==="number"&&Yu(i.ownerDocument)===i||i.defaultValue===""+c||(i.defaultValue=""+c)}function ia(i,o,c,f){if(i=i.options,o){o={};for(var g=0;g<c.length;g++)o["$"+c[g]]=!0;for(c=0;c<i.length;c++)g=o.hasOwnProperty("$"+i[c].value),i[c].selected!==g&&(i[c].selected=g),g&&f&&(i[c].defaultSelected=!0)}else{for(c=""+hr(c),o=null,g=0;g<i.length;g++){if(i[g].value===c){i[g].selected=!0,f&&(i[g].defaultSelected=!0);return}o!==null||i[g].disabled||(o=i[g])}o!==null&&(o.selected=!0)}}function fw(i,o,c){if(o!=null&&(o=""+hr(o),o!==i.value&&(i.value=o),c==null)){i.defaultValue!==o&&(i.defaultValue=o);return}i.defaultValue=c!=null?""+hr(c):""}function hw(i,o,c,f){if(o==null){if(f!=null){if(c!=null)throw Error(r(92));if(T(f)){if(1<f.length)throw Error(r(93));f=f[0]}c=f}c==null&&(c=""),o=c}c=hr(o),i.defaultValue=c,f=i.textContent,f===c&&f!==""&&f!==null&&(i.value=f)}function sa(i,o){if(o){var c=i.firstChild;if(c&&c===i.lastChild&&c.nodeType===3){c.nodeValue=o;return}}i.textContent=o}var UD=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function dw(i,o,c){var f=o.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?f?i.setProperty(o,""):o==="float"?i.cssFloat="":i[o]="":f?i.setProperty(o,c):typeof c!="number"||c===0||UD.has(o)?o==="float"?i.cssFloat=c:i[o]=(""+c).trim():i[o]=c+"px"}function pw(i,o,c){if(o!=null&&typeof o!="object")throw Error(r(62));if(i=i.style,c!=null){for(var f in c)!c.hasOwnProperty(f)||o!=null&&o.hasOwnProperty(f)||(f.indexOf("--")===0?i.setProperty(f,""):f==="float"?i.cssFloat="":i[f]="");for(var g in o)f=o[g],o.hasOwnProperty(g)&&c[g]!==f&&dw(i,g,f)}else for(var m in o)o.hasOwnProperty(m)&&dw(i,m,o[m])}function cp(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var BD=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),$D=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Wu(i){return $D.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}var lp=null;function up(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var oa=null,aa=null;function gw(i){var o=ea(i);if(o&&(i=o.stateNode)){var c=i[In]||null;e:switch(i=o.stateNode,o.type){case"input":if(op(i,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),o=c.name,c.type==="radio"&&o!=null){for(c=i;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+dr(""+o)+'"][type="radio"]'),o=0;o<c.length;o++){var f=c[o];if(f!==i&&f.form===i.form){var g=f[In]||null;if(!g)throw Error(r(90));op(f,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(o=0;o<c.length;o++)f=c[o],f.form===i.form&&lw(f)}break e;case"textarea":fw(i,c.value,c.defaultValue);break e;case"select":o=c.value,o!=null&&ia(i,!!c.multiple,o,!1)}}}var fp=!1;function yw(i,o,c){if(fp)return i(o,c);fp=!0;try{var f=i(o);return f}finally{if(fp=!1,(oa!==null||aa!==null)&&($f(),oa&&(o=oa,i=aa,aa=oa=null,gw(o),i)))for(o=0;o<i.length;o++)gw(i[o])}}function $c(i,o){var c=i.stateNode;if(c===null)return null;var f=c[In]||null;if(f===null)return null;c=f[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(i=i.type,f=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!f;break e;default:i=!1}if(i)return null;if(c&&typeof c!="function")throw Error(r(231,o,typeof c));return c}var vi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),hp=!1;if(vi)try{var Pc={};Object.defineProperty(Pc,"passive",{get:function(){hp=!0}}),window.addEventListener("test",Pc,Pc),window.removeEventListener("test",Pc,Pc)}catch{hp=!1}var ts=null,dp=null,Xu=null;function mw(){if(Xu)return Xu;var i,o=dp,c=o.length,f,g="value"in ts?ts.value:ts.textContent,m=g.length;for(i=0;i<c&&o[i]===g[i];i++);var x=c-i;for(f=1;f<=x&&o[c-f]===g[m-f];f++);return Xu=g.slice(i,1<f?1-f:void 0)}function Zu(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function Qu(){return!0}function bw(){return!1}function Cn(i){function o(c,f,g,m,x){this._reactName=c,this._targetInst=g,this.type=f,this.nativeEvent=m,this.target=x,this.currentTarget=null;for(var B in i)i.hasOwnProperty(B)&&(c=i[B],this[B]=c?c(m):m[B]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Qu:bw,this.isPropagationStopped=bw,this}return p(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=Qu)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=Qu)},persist:function(){},isPersistent:Qu}),o}var Ks={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ju=Cn(Ks),kc=p({},Ks,{view:0,detail:0}),PD=Cn(kc),pp,gp,Mc,ef=p({},kc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:mp,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Mc&&(Mc&&i.type==="mousemove"?(pp=i.screenX-Mc.screenX,gp=i.screenY-Mc.screenY):gp=pp=0,Mc=i),pp)},movementY:function(i){return"movementY"in i?i.movementY:gp}}),ww=Cn(ef),kD=p({},ef,{dataTransfer:0}),MD=Cn(kD),LD=p({},kc,{relatedTarget:0}),yp=Cn(LD),jD=p({},Ks,{animationName:0,elapsedTime:0,pseudoElement:0}),zD=Cn(jD),qD=p({},Ks,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),HD=Cn(qD),FD=p({},Ks,{data:0}),vw=Cn(FD),VD={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},GD={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},KD={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function YD(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=KD[i])?!!o[i]:!1}function mp(){return YD}var WD=p({},kc,{key:function(i){if(i.key){var o=VD[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=Zu(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?GD[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:mp,charCode:function(i){return i.type==="keypress"?Zu(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Zu(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),XD=Cn(WD),ZD=p({},ef,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ew=Cn(ZD),QD=p({},kc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:mp}),JD=Cn(QD),eI=p({},Ks,{propertyName:0,elapsedTime:0,pseudoElement:0}),tI=Cn(eI),nI=p({},ef,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),rI=Cn(nI),iI=p({},Ks,{newState:0,oldState:0}),sI=Cn(iI),oI=[9,13,27,32],bp=vi&&"CompositionEvent"in window,Lc=null;vi&&"documentMode"in document&&(Lc=document.documentMode);var aI=vi&&"TextEvent"in window&&!Lc,_w=vi&&(!bp||Lc&&8<Lc&&11>=Lc),Sw=" ",Aw=!1;function Rw(i,o){switch(i){case"keyup":return oI.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ow(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var ca=!1;function cI(i,o){switch(i){case"compositionend":return Ow(o);case"keypress":return o.which!==32?null:(Aw=!0,Sw);case"textInput":return i=o.data,i===Sw&&Aw?null:i;default:return null}}function lI(i,o){if(ca)return i==="compositionend"||!bp&&Rw(i,o)?(i=mw(),Xu=dp=ts=null,ca=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return _w&&o.locale!=="ko"?null:o.data;default:return null}}var uI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xw(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!uI[i.type]:o==="textarea"}function Tw(i,o,c,f){oa?aa?aa.push(f):aa=[f]:oa=f,o=zf(o,"onChange"),0<o.length&&(c=new Ju("onChange","change",null,c,f),i.push({event:c,listeners:o}))}var jc=null,zc=null;function fI(i){cE(i,0)}function tf(i){var o=Bc(i);if(lw(o))return i}function Dw(i,o){if(i==="change")return o}var Iw=!1;if(vi){var wp;if(vi){var vp="oninput"in document;if(!vp){var Cw=document.createElement("div");Cw.setAttribute("oninput","return;"),vp=typeof Cw.oninput=="function"}wp=vp}else wp=!1;Iw=wp&&(!document.documentMode||9<document.documentMode)}function Nw(){jc&&(jc.detachEvent("onpropertychange",Uw),zc=jc=null)}function Uw(i){if(i.propertyName==="value"&&tf(zc)){var o=[];Tw(o,zc,i,up(i)),yw(fI,o)}}function hI(i,o,c){i==="focusin"?(Nw(),jc=o,zc=c,jc.attachEvent("onpropertychange",Uw)):i==="focusout"&&Nw()}function dI(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return tf(zc)}function pI(i,o){if(i==="click")return tf(o)}function gI(i,o){if(i==="input"||i==="change")return tf(o)}function yI(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var Zn=typeof Object.is=="function"?Object.is:yI;function qc(i,o){if(Zn(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var c=Object.keys(i),f=Object.keys(o);if(c.length!==f.length)return!1;for(f=0;f<c.length;f++){var g=c[f];if(!Dn.call(o,g)||!Zn(i[g],o[g]))return!1}return!0}function Bw(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function $w(i,o){var c=Bw(i);i=0;for(var f;c;){if(c.nodeType===3){if(f=i+c.textContent.length,i<=o&&f>=o)return{node:c,offset:o-i};i=f}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=Bw(c)}}function Pw(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?Pw(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function kw(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var o=Yu(i.document);o instanceof i.HTMLIFrameElement;){try{var c=typeof o.contentWindow.location.href=="string"}catch{c=!1}if(c)i=o.contentWindow;else break;o=Yu(i.document)}return o}function Ep(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}var mI=vi&&"documentMode"in document&&11>=document.documentMode,la=null,_p=null,Hc=null,Sp=!1;function Mw(i,o,c){var f=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Sp||la==null||la!==Yu(f)||(f=la,"selectionStart"in f&&Ep(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),Hc&&qc(Hc,f)||(Hc=f,f=zf(_p,"onSelect"),0<f.length&&(o=new Ju("onSelect","select",null,o,c),i.push({event:o,listeners:f}),o.target=la)))}function Ys(i,o){var c={};return c[i.toLowerCase()]=o.toLowerCase(),c["Webkit"+i]="webkit"+o,c["Moz"+i]="moz"+o,c}var ua={animationend:Ys("Animation","AnimationEnd"),animationiteration:Ys("Animation","AnimationIteration"),animationstart:Ys("Animation","AnimationStart"),transitionrun:Ys("Transition","TransitionRun"),transitionstart:Ys("Transition","TransitionStart"),transitioncancel:Ys("Transition","TransitionCancel"),transitionend:Ys("Transition","TransitionEnd")},Ap={},Lw={};vi&&(Lw=document.createElement("div").style,"AnimationEvent"in window||(delete ua.animationend.animation,delete ua.animationiteration.animation,delete ua.animationstart.animation),"TransitionEvent"in window||delete ua.transitionend.transition);function Ws(i){if(Ap[i])return Ap[i];if(!ua[i])return i;var o=ua[i],c;for(c in o)if(o.hasOwnProperty(c)&&c in Lw)return Ap[i]=o[c];return i}var jw=Ws("animationend"),zw=Ws("animationiteration"),qw=Ws("animationstart"),bI=Ws("transitionrun"),wI=Ws("transitionstart"),vI=Ws("transitioncancel"),Hw=Ws("transitionend"),Fw=new Map,Rp="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Rp.push("scrollEnd");function Nr(i,o){Fw.set(i,o),Gs(o,[i])}var Vw=new WeakMap;function pr(i,o){if(typeof i=="object"&&i!==null){var c=Vw.get(i);return c!==void 0?c:(o={value:i,source:o,stack:aw(o)},Vw.set(i,o),o)}return{value:i,source:o,stack:aw(o)}}var gr=[],fa=0,Op=0;function nf(){for(var i=fa,o=Op=fa=0;o<i;){var c=gr[o];gr[o++]=null;var f=gr[o];gr[o++]=null;var g=gr[o];gr[o++]=null;var m=gr[o];if(gr[o++]=null,f!==null&&g!==null){var x=f.pending;x===null?g.next=g:(g.next=x.next,x.next=g),f.pending=g}m!==0&&Gw(c,g,m)}}function rf(i,o,c,f){gr[fa++]=i,gr[fa++]=o,gr[fa++]=c,gr[fa++]=f,Op|=f,i.lanes|=f,i=i.alternate,i!==null&&(i.lanes|=f)}function xp(i,o,c,f){return rf(i,o,c,f),sf(i)}function ha(i,o){return rf(i,null,null,o),sf(i)}function Gw(i,o,c){i.lanes|=c;var f=i.alternate;f!==null&&(f.lanes|=c);for(var g=!1,m=i.return;m!==null;)m.childLanes|=c,f=m.alternate,f!==null&&(f.childLanes|=c),m.tag===22&&(i=m.stateNode,i===null||i._visibility&1||(g=!0)),i=m,m=m.return;return i.tag===3?(m=i.stateNode,g&&o!==null&&(g=31-A(c),i=m.hiddenUpdates,f=i[g],f===null?i[g]=[o]:f.push(o),o.lane=c|536870912),m):null}function sf(i){if(50<pl)throw pl=0,Ug=null,Error(r(185));for(var o=i.return;o!==null;)i=o,o=i.return;return i.tag===3?i.stateNode:null}var da={};function EI(i,o,c,f){this.tag=i,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qn(i,o,c,f){return new EI(i,o,c,f)}function Tp(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Ei(i,o){var c=i.alternate;return c===null?(c=Qn(i.tag,o,i.key,i.mode),c.elementType=i.elementType,c.type=i.type,c.stateNode=i.stateNode,c.alternate=i,i.alternate=c):(c.pendingProps=o,c.type=i.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=i.flags&65011712,c.childLanes=i.childLanes,c.lanes=i.lanes,c.child=i.child,c.memoizedProps=i.memoizedProps,c.memoizedState=i.memoizedState,c.updateQueue=i.updateQueue,o=i.dependencies,c.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},c.sibling=i.sibling,c.index=i.index,c.ref=i.ref,c.refCleanup=i.refCleanup,c}function Kw(i,o){i.flags&=65011714;var c=i.alternate;return c===null?(i.childLanes=0,i.lanes=o,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=c.childLanes,i.lanes=c.lanes,i.child=c.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=c.memoizedProps,i.memoizedState=c.memoizedState,i.updateQueue=c.updateQueue,i.type=c.type,o=c.dependencies,i.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),i}function of(i,o,c,f,g,m){var x=0;if(f=i,typeof i=="function")Tp(i)&&(x=1);else if(typeof i=="string")x=S8(i,c,re.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case P:return i=Qn(31,c,o,g),i.elementType=P,i.lanes=m,i;case v:return Xs(c.children,g,m,o);case E:x=8,g|=24;break;case _:return i=Qn(12,c,o,g|2),i.elementType=_,i.lanes=m,i;case U:return i=Qn(13,c,o,g),i.elementType=U,i.lanes=m,i;case k:return i=Qn(19,c,o,g),i.elementType=k,i.lanes=m,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case R:case I:x=10;break e;case D:x=9;break e;case $:x=11;break e;case q:x=14;break e;case H:x=16,f=null;break e}x=29,c=Error(r(130,i===null?"null":typeof i,"")),f=null}return o=Qn(x,c,o,g),o.elementType=i,o.type=f,o.lanes=m,o}function Xs(i,o,c,f){return i=Qn(7,i,f,o),i.lanes=c,i}function Dp(i,o,c){return i=Qn(6,i,null,o),i.lanes=c,i}function Ip(i,o,c){return o=Qn(4,i.children!==null?i.children:[],i.key,o),o.lanes=c,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}var pa=[],ga=0,af=null,cf=0,yr=[],mr=0,Zs=null,_i=1,Si="";function Qs(i,o){pa[ga++]=cf,pa[ga++]=af,af=i,cf=o}function Yw(i,o,c){yr[mr++]=_i,yr[mr++]=Si,yr[mr++]=Zs,Zs=i;var f=_i;i=Si;var g=32-A(f)-1;f&=~(1<<g),c+=1;var m=32-A(o)+g;if(30<m){var x=g-g%5;m=(f&(1<<x)-1).toString(32),f>>=x,g-=x,_i=1<<32-A(o)+g|c<<g|f,Si=m+i}else _i=1<<m|c<<g|f,Si=i}function Cp(i){i.return!==null&&(Qs(i,1),Yw(i,1,0))}function Np(i){for(;i===af;)af=pa[--ga],pa[ga]=null,cf=pa[--ga],pa[ga]=null;for(;i===Zs;)Zs=yr[--mr],yr[mr]=null,Si=yr[--mr],yr[mr]=null,_i=yr[--mr],yr[mr]=null}var An=null,St=null,Ke=!1,Js=null,Kr=!1,Up=Error(r(519));function eo(i){var o=Error(r(418,""));throw Gc(pr(o,i)),Up}function Ww(i){var o=i.stateNode,c=i.type,f=i.memoizedProps;switch(o[pn]=i,o[In]=f,c){case"dialog":ke("cancel",o),ke("close",o);break;case"iframe":case"object":case"embed":ke("load",o);break;case"video":case"audio":for(c=0;c<yl.length;c++)ke(yl[c],o);break;case"source":ke("error",o);break;case"img":case"image":case"link":ke("error",o),ke("load",o);break;case"details":ke("toggle",o);break;case"input":ke("invalid",o),uw(o,f.value,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name,!0),Ku(o);break;case"select":ke("invalid",o);break;case"textarea":ke("invalid",o),hw(o,f.value,f.defaultValue,f.children),Ku(o)}c=f.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||o.textContent===""+c||f.suppressHydrationWarning===!0||hE(o.textContent,c)?(f.popover!=null&&(ke("beforetoggle",o),ke("toggle",o)),f.onScroll!=null&&ke("scroll",o),f.onScrollEnd!=null&&ke("scrollend",o),f.onClick!=null&&(o.onclick=qf),o=!0):o=!1,o||eo(i)}function Xw(i){for(An=i.return;An;)switch(An.tag){case 5:case 13:Kr=!1;return;case 27:case 3:Kr=!0;return;default:An=An.return}}function Fc(i){if(i!==An)return!1;if(!Ke)return Xw(i),Ke=!0,!1;var o=i.tag,c;if((c=o!==3&&o!==27)&&((c=o===5)&&(c=i.type,c=!(c!=="form"&&c!=="button")||Wg(i.type,i.memoizedProps)),c=!c),c&&St&&eo(i),Xw(i),o===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));e:{for(i=i.nextSibling,o=0;i;){if(i.nodeType===8)if(c=i.data,c==="/$"){if(o===0){St=Br(i.nextSibling);break e}o--}else c!=="$"&&c!=="$!"&&c!=="$?"||o++;i=i.nextSibling}St=null}}else o===27?(o=St,ms(i.type)?(i=Jg,Jg=null,St=i):St=o):St=An?Br(i.stateNode.nextSibling):null;return!0}function Vc(){St=An=null,Ke=!1}function Zw(){var i=Js;return i!==null&&(Bn===null?Bn=i:Bn.push.apply(Bn,i),Js=null),i}function Gc(i){Js===null?Js=[i]:Js.push(i)}var Bp=z(null),to=null,Ai=null;function ns(i,o,c){se(Bp,o._currentValue),o._currentValue=c}function Ri(i){i._currentValue=Bp.current,J(Bp)}function $p(i,o,c){for(;i!==null;){var f=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,f!==null&&(f.childLanes|=o)):f!==null&&(f.childLanes&o)!==o&&(f.childLanes|=o),i===c)break;i=i.return}}function Pp(i,o,c,f){var g=i.child;for(g!==null&&(g.return=i);g!==null;){var m=g.dependencies;if(m!==null){var x=g.child;m=m.firstContext;e:for(;m!==null;){var B=m;m=g;for(var j=0;j<o.length;j++)if(B.context===o[j]){m.lanes|=c,B=m.alternate,B!==null&&(B.lanes|=c),$p(m.return,c,i),f||(x=null);break e}m=B.next}}else if(g.tag===18){if(x=g.return,x===null)throw Error(r(341));x.lanes|=c,m=x.alternate,m!==null&&(m.lanes|=c),$p(x,c,i),x=null}else x=g.child;if(x!==null)x.return=g;else for(x=g;x!==null;){if(x===i){x=null;break}if(g=x.sibling,g!==null){g.return=x.return,x=g;break}x=x.return}g=x}}function Kc(i,o,c,f){i=null;for(var g=o,m=!1;g!==null;){if(!m){if((g.flags&524288)!==0)m=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var x=g.alternate;if(x===null)throw Error(r(387));if(x=x.memoizedProps,x!==null){var B=g.type;Zn(g.pendingProps.value,x.value)||(i!==null?i.push(B):i=[B])}}else if(g===De.current){if(x=g.alternate,x===null)throw Error(r(387));x.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(i!==null?i.push(_l):i=[_l])}g=g.return}i!==null&&Pp(o,i,c,f),o.flags|=262144}function lf(i){for(i=i.firstContext;i!==null;){if(!Zn(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function no(i){to=i,Ai=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function gn(i){return Qw(to,i)}function uf(i,o){return to===null&&no(i),Qw(i,o)}function Qw(i,o){var c=o._currentValue;if(o={context:o,memoizedValue:c,next:null},Ai===null){if(i===null)throw Error(r(308));Ai=o,i.dependencies={lanes:0,firstContext:o},i.flags|=524288}else Ai=Ai.next=o;return c}var _I=typeof AbortController<"u"?AbortController:function(){var i=[],o=this.signal={aborted:!1,addEventListener:function(c,f){i.push(f)}};this.abort=function(){o.aborted=!0,i.forEach(function(c){return c()})}},SI=e.unstable_scheduleCallback,AI=e.unstable_NormalPriority,Lt={$$typeof:I,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function kp(){return{controller:new _I,data:new Map,refCount:0}}function Yc(i){i.refCount--,i.refCount===0&&SI(AI,function(){i.controller.abort()})}var Wc=null,Mp=0,ya=0,ma=null;function RI(i,o){if(Wc===null){var c=Wc=[];Mp=0,ya=jg(),ma={status:"pending",value:void 0,then:function(f){c.push(f)}}}return Mp++,o.then(Jw,Jw),o}function Jw(){if(--Mp===0&&Wc!==null){ma!==null&&(ma.status="fulfilled");var i=Wc;Wc=null,ya=0,ma=null;for(var o=0;o<i.length;o++)(0,i[o])()}}function OI(i,o){var c=[],f={status:"pending",value:null,reason:null,then:function(g){c.push(g)}};return i.then(function(){f.status="fulfilled",f.value=o;for(var g=0;g<c.length;g++)(0,c[g])(o)},function(g){for(f.status="rejected",f.reason=g,g=0;g<c.length;g++)(0,c[g])(void 0)}),f}var ev=O.S;O.S=function(i,o){typeof o=="object"&&o!==null&&typeof o.then=="function"&&RI(i,o),ev!==null&&ev(i,o)};var ro=z(null);function Lp(){var i=ro.current;return i!==null?i:dt.pooledCache}function ff(i,o){o===null?se(ro,ro.current):se(ro,o.pool)}function tv(){var i=Lp();return i===null?null:{parent:Lt._currentValue,pool:i}}var Xc=Error(r(460)),nv=Error(r(474)),hf=Error(r(542)),jp={then:function(){}};function rv(i){return i=i.status,i==="fulfilled"||i==="rejected"}function df(){}function iv(i,o,c){switch(c=i[c],c===void 0?i.push(o):c!==o&&(o.then(df,df),o=c),o.status){case"fulfilled":return o.value;case"rejected":throw i=o.reason,ov(i),i;default:if(typeof o.status=="string")o.then(df,df);else{if(i=dt,i!==null&&100<i.shellSuspendCounter)throw Error(r(482));i=o,i.status="pending",i.then(function(f){if(o.status==="pending"){var g=o;g.status="fulfilled",g.value=f}},function(f){if(o.status==="pending"){var g=o;g.status="rejected",g.reason=f}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw i=o.reason,ov(i),i}throw Zc=o,Xc}}var Zc=null;function sv(){if(Zc===null)throw Error(r(459));var i=Zc;return Zc=null,i}function ov(i){if(i===Xc||i===hf)throw Error(r(483))}var rs=!1;function zp(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function qp(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function is(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function ss(i,o,c){var f=i.updateQueue;if(f===null)return null;if(f=f.shared,(Qe&2)!==0){var g=f.pending;return g===null?o.next=o:(o.next=g.next,g.next=o),f.pending=o,o=sf(i),Gw(i,null,c),o}return rf(i,f,o,c),sf(i)}function Qc(i,o,c){if(o=o.updateQueue,o!==null&&(o=o.shared,(c&4194048)!==0)){var f=o.lanes;f&=i.pendingLanes,c|=f,o.lanes=c,Jb(i,c)}}function Hp(i,o){var c=i.updateQueue,f=i.alternate;if(f!==null&&(f=f.updateQueue,c===f)){var g=null,m=null;if(c=c.firstBaseUpdate,c!==null){do{var x={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};m===null?g=m=x:m=m.next=x,c=c.next}while(c!==null);m===null?g=m=o:m=m.next=o}else g=m=o;c={baseState:f.baseState,firstBaseUpdate:g,lastBaseUpdate:m,shared:f.shared,callbacks:f.callbacks},i.updateQueue=c;return}i=c.lastBaseUpdate,i===null?c.firstBaseUpdate=o:i.next=o,c.lastBaseUpdate=o}var Fp=!1;function Jc(){if(Fp){var i=ma;if(i!==null)throw i}}function el(i,o,c,f){Fp=!1;var g=i.updateQueue;rs=!1;var m=g.firstBaseUpdate,x=g.lastBaseUpdate,B=g.shared.pending;if(B!==null){g.shared.pending=null;var j=B,te=j.next;j.next=null,x===null?m=te:x.next=te,x=j;var ue=i.alternate;ue!==null&&(ue=ue.updateQueue,B=ue.lastBaseUpdate,B!==x&&(B===null?ue.firstBaseUpdate=te:B.next=te,ue.lastBaseUpdate=j))}if(m!==null){var pe=g.baseState;x=0,ue=te=j=null,B=m;do{var ie=B.lane&-536870913,oe=ie!==B.lane;if(oe?(ze&ie)===ie:(f&ie)===ie){ie!==0&&ie===ya&&(Fp=!0),ue!==null&&(ue=ue.next={lane:0,tag:B.tag,payload:B.payload,callback:null,next:null});e:{var Te=i,Re=B;ie=o;var ot=c;switch(Re.tag){case 1:if(Te=Re.payload,typeof Te=="function"){pe=Te.call(ot,pe,ie);break e}pe=Te;break e;case 3:Te.flags=Te.flags&-65537|128;case 0:if(Te=Re.payload,ie=typeof Te=="function"?Te.call(ot,pe,ie):Te,ie==null)break e;pe=p({},pe,ie);break e;case 2:rs=!0}}ie=B.callback,ie!==null&&(i.flags|=64,oe&&(i.flags|=8192),oe=g.callbacks,oe===null?g.callbacks=[ie]:oe.push(ie))}else oe={lane:ie,tag:B.tag,payload:B.payload,callback:B.callback,next:null},ue===null?(te=ue=oe,j=pe):ue=ue.next=oe,x|=ie;if(B=B.next,B===null){if(B=g.shared.pending,B===null)break;oe=B,B=oe.next,oe.next=null,g.lastBaseUpdate=oe,g.shared.pending=null}}while(!0);ue===null&&(j=pe),g.baseState=j,g.firstBaseUpdate=te,g.lastBaseUpdate=ue,m===null&&(g.shared.lanes=0),ds|=x,i.lanes=x,i.memoizedState=pe}}function av(i,o){if(typeof i!="function")throw Error(r(191,i));i.call(o)}function cv(i,o){var c=i.callbacks;if(c!==null)for(i.callbacks=null,i=0;i<c.length;i++)av(c[i],o)}var ba=z(null),pf=z(0);function lv(i,o){i=Ni,se(pf,i),se(ba,o),Ni=i|o.baseLanes}function Vp(){se(pf,Ni),se(ba,ba.current)}function Gp(){Ni=pf.current,J(ba),J(pf)}var os=0,Be=null,it=null,Ct=null,gf=!1,wa=!1,io=!1,yf=0,tl=0,va=null,xI=0;function Tt(){throw Error(r(321))}function Kp(i,o){if(o===null)return!1;for(var c=0;c<o.length&&c<i.length;c++)if(!Zn(i[c],o[c]))return!1;return!0}function Yp(i,o,c,f,g,m){return os=m,Be=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,O.H=i===null||i.memoizedState===null?Gv:Kv,io=!1,m=c(f,g),io=!1,wa&&(m=fv(o,c,f,g)),uv(i),m}function uv(i){O.H=_f;var o=it!==null&&it.next!==null;if(os=0,Ct=it=Be=null,gf=!1,tl=0,va=null,o)throw Error(r(300));i===null||Gt||(i=i.dependencies,i!==null&&lf(i)&&(Gt=!0))}function fv(i,o,c,f){Be=i;var g=0;do{if(wa&&(va=null),tl=0,wa=!1,25<=g)throw Error(r(301));if(g+=1,Ct=it=null,i.updateQueue!=null){var m=i.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}O.H=BI,m=o(c,f)}while(wa);return m}function TI(){var i=O.H,o=i.useState()[0];return o=typeof o.then=="function"?nl(o):o,i=i.useState()[0],(it!==null?it.memoizedState:null)!==i&&(Be.flags|=1024),o}function Wp(){var i=yf!==0;return yf=0,i}function Xp(i,o,c){o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~c}function Zp(i){if(gf){for(i=i.memoizedState;i!==null;){var o=i.queue;o!==null&&(o.pending=null),i=i.next}gf=!1}os=0,Ct=it=Be=null,wa=!1,tl=yf=0,va=null}function Nn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ct===null?Be.memoizedState=Ct=i:Ct=Ct.next=i,Ct}function Nt(){if(it===null){var i=Be.alternate;i=i!==null?i.memoizedState:null}else i=it.next;var o=Ct===null?Be.memoizedState:Ct.next;if(o!==null)Ct=o,it=i;else{if(i===null)throw Be.alternate===null?Error(r(467)):Error(r(310));it=i,i={memoizedState:it.memoizedState,baseState:it.baseState,baseQueue:it.baseQueue,queue:it.queue,next:null},Ct===null?Be.memoizedState=Ct=i:Ct=Ct.next=i}return Ct}function Qp(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function nl(i){var o=tl;return tl+=1,va===null&&(va=[]),i=iv(va,i,o),o=Be,(Ct===null?o.memoizedState:Ct.next)===null&&(o=o.alternate,O.H=o===null||o.memoizedState===null?Gv:Kv),i}function mf(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return nl(i);if(i.$$typeof===I)return gn(i)}throw Error(r(438,String(i)))}function Jp(i){var o=null,c=Be.updateQueue;if(c!==null&&(o=c.memoCache),o==null){var f=Be.alternate;f!==null&&(f=f.updateQueue,f!==null&&(f=f.memoCache,f!=null&&(o={data:f.data.map(function(g){return g.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),c===null&&(c=Qp(),Be.updateQueue=c),c.memoCache=o,c=o.data[o.index],c===void 0)for(c=o.data[o.index]=Array(i),f=0;f<i;f++)c[f]=V;return o.index++,c}function Oi(i,o){return typeof o=="function"?o(i):o}function bf(i){var o=Nt();return eg(o,it,i)}function eg(i,o,c){var f=i.queue;if(f===null)throw Error(r(311));f.lastRenderedReducer=c;var g=i.baseQueue,m=f.pending;if(m!==null){if(g!==null){var x=g.next;g.next=m.next,m.next=x}o.baseQueue=g=m,f.pending=null}if(m=i.baseState,g===null)i.memoizedState=m;else{o=g.next;var B=x=null,j=null,te=o,ue=!1;do{var pe=te.lane&-536870913;if(pe!==te.lane?(ze&pe)===pe:(os&pe)===pe){var ie=te.revertLane;if(ie===0)j!==null&&(j=j.next={lane:0,revertLane:0,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null}),pe===ya&&(ue=!0);else if((os&ie)===ie){te=te.next,ie===ya&&(ue=!0);continue}else pe={lane:0,revertLane:te.revertLane,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null},j===null?(B=j=pe,x=m):j=j.next=pe,Be.lanes|=ie,ds|=ie;pe=te.action,io&&c(m,pe),m=te.hasEagerState?te.eagerState:c(m,pe)}else ie={lane:pe,revertLane:te.revertLane,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null},j===null?(B=j=ie,x=m):j=j.next=ie,Be.lanes|=pe,ds|=pe;te=te.next}while(te!==null&&te!==o);if(j===null?x=m:j.next=B,!Zn(m,i.memoizedState)&&(Gt=!0,ue&&(c=ma,c!==null)))throw c;i.memoizedState=m,i.baseState=x,i.baseQueue=j,f.lastRenderedState=m}return g===null&&(f.lanes=0),[i.memoizedState,f.dispatch]}function tg(i){var o=Nt(),c=o.queue;if(c===null)throw Error(r(311));c.lastRenderedReducer=i;var f=c.dispatch,g=c.pending,m=o.memoizedState;if(g!==null){c.pending=null;var x=g=g.next;do m=i(m,x.action),x=x.next;while(x!==g);Zn(m,o.memoizedState)||(Gt=!0),o.memoizedState=m,o.baseQueue===null&&(o.baseState=m),c.lastRenderedState=m}return[m,f]}function hv(i,o,c){var f=Be,g=Nt(),m=Ke;if(m){if(c===void 0)throw Error(r(407));c=c()}else c=o();var x=!Zn((it||g).memoizedState,c);x&&(g.memoizedState=c,Gt=!0),g=g.queue;var B=gv.bind(null,f,g,i);if(rl(2048,8,B,[i]),g.getSnapshot!==o||x||Ct!==null&&Ct.memoizedState.tag&1){if(f.flags|=2048,Ea(9,wf(),pv.bind(null,f,g,c,o),null),dt===null)throw Error(r(349));m||(os&124)!==0||dv(f,o,c)}return c}function dv(i,o,c){i.flags|=16384,i={getSnapshot:o,value:c},o=Be.updateQueue,o===null?(o=Qp(),Be.updateQueue=o,o.stores=[i]):(c=o.stores,c===null?o.stores=[i]:c.push(i))}function pv(i,o,c,f){o.value=c,o.getSnapshot=f,yv(o)&&mv(i)}function gv(i,o,c){return c(function(){yv(o)&&mv(i)})}function yv(i){var o=i.getSnapshot;i=i.value;try{var c=o();return!Zn(i,c)}catch{return!0}}function mv(i){var o=ha(i,2);o!==null&&rr(o,i,2)}function ng(i){var o=Nn();if(typeof i=="function"){var c=i;if(i=c(),io){S(!0);try{c()}finally{S(!1)}}}return o.memoizedState=o.baseState=i,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Oi,lastRenderedState:i},o}function bv(i,o,c,f){return i.baseState=c,eg(i,it,typeof f=="function"?f:Oi)}function DI(i,o,c,f,g){if(Ef(i))throw Error(r(485));if(i=o.action,i!==null){var m={payload:g,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(x){m.listeners.push(x)}};O.T!==null?c(!0):m.isTransition=!1,f(m),c=o.pending,c===null?(m.next=o.pending=m,wv(o,m)):(m.next=c.next,o.pending=c.next=m)}}function wv(i,o){var c=o.action,f=o.payload,g=i.state;if(o.isTransition){var m=O.T,x={};O.T=x;try{var B=c(g,f),j=O.S;j!==null&&j(x,B),vv(i,o,B)}catch(te){rg(i,o,te)}finally{O.T=m}}else try{m=c(g,f),vv(i,o,m)}catch(te){rg(i,o,te)}}function vv(i,o,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(f){Ev(i,o,f)},function(f){return rg(i,o,f)}):Ev(i,o,c)}function Ev(i,o,c){o.status="fulfilled",o.value=c,_v(o),i.state=c,o=i.pending,o!==null&&(c=o.next,c===o?i.pending=null:(c=c.next,o.next=c,wv(i,c)))}function rg(i,o,c){var f=i.pending;if(i.pending=null,f!==null){f=f.next;do o.status="rejected",o.reason=c,_v(o),o=o.next;while(o!==f)}i.action=null}function _v(i){i=i.listeners;for(var o=0;o<i.length;o++)(0,i[o])()}function Sv(i,o){return o}function Av(i,o){if(Ke){var c=dt.formState;if(c!==null){e:{var f=Be;if(Ke){if(St){t:{for(var g=St,m=Kr;g.nodeType!==8;){if(!m){g=null;break t}if(g=Br(g.nextSibling),g===null){g=null;break t}}m=g.data,g=m==="F!"||m==="F"?g:null}if(g){St=Br(g.nextSibling),f=g.data==="F!";break e}}eo(f)}f=!1}f&&(o=c[0])}}return c=Nn(),c.memoizedState=c.baseState=o,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Sv,lastRenderedState:o},c.queue=f,c=Hv.bind(null,Be,f),f.dispatch=c,f=ng(!1),m=cg.bind(null,Be,!1,f.queue),f=Nn(),g={state:o,dispatch:null,action:i,pending:null},f.queue=g,c=DI.bind(null,Be,g,m,c),g.dispatch=c,f.memoizedState=i,[o,c,!1]}function Rv(i){var o=Nt();return Ov(o,it,i)}function Ov(i,o,c){if(o=eg(i,o,Sv)[0],i=bf(Oi)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var f=nl(o)}catch(x){throw x===Xc?hf:x}else f=o;o=Nt();var g=o.queue,m=g.dispatch;return c!==o.memoizedState&&(Be.flags|=2048,Ea(9,wf(),II.bind(null,g,c),null)),[f,m,i]}function II(i,o){i.action=o}function xv(i){var o=Nt(),c=it;if(c!==null)return Ov(o,c,i);Nt(),o=o.memoizedState,c=Nt();var f=c.queue.dispatch;return c.memoizedState=i,[o,f,!1]}function Ea(i,o,c,f){return i={tag:i,create:c,deps:f,inst:o,next:null},o=Be.updateQueue,o===null&&(o=Qp(),Be.updateQueue=o),c=o.lastEffect,c===null?o.lastEffect=i.next=i:(f=c.next,c.next=i,i.next=f,o.lastEffect=i),i}function wf(){return{destroy:void 0,resource:void 0}}function Tv(){return Nt().memoizedState}function vf(i,o,c,f){var g=Nn();f=f===void 0?null:f,Be.flags|=i,g.memoizedState=Ea(1|o,wf(),c,f)}function rl(i,o,c,f){var g=Nt();f=f===void 0?null:f;var m=g.memoizedState.inst;it!==null&&f!==null&&Kp(f,it.memoizedState.deps)?g.memoizedState=Ea(o,m,c,f):(Be.flags|=i,g.memoizedState=Ea(1|o,m,c,f))}function Dv(i,o){vf(8390656,8,i,o)}function Iv(i,o){rl(2048,8,i,o)}function Cv(i,o){return rl(4,2,i,o)}function Nv(i,o){return rl(4,4,i,o)}function Uv(i,o){if(typeof o=="function"){i=i();var c=o(i);return function(){typeof c=="function"?c():o(null)}}if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function Bv(i,o,c){c=c!=null?c.concat([i]):null,rl(4,4,Uv.bind(null,o,i),c)}function ig(){}function $v(i,o){var c=Nt();o=o===void 0?null:o;var f=c.memoizedState;return o!==null&&Kp(o,f[1])?f[0]:(c.memoizedState=[i,o],i)}function Pv(i,o){var c=Nt();o=o===void 0?null:o;var f=c.memoizedState;if(o!==null&&Kp(o,f[1]))return f[0];if(f=i(),io){S(!0);try{i()}finally{S(!1)}}return c.memoizedState=[f,o],f}function sg(i,o,c){return c===void 0||(os&1073741824)!==0?i.memoizedState=o:(i.memoizedState=c,i=L1(),Be.lanes|=i,ds|=i,c)}function kv(i,o,c,f){return Zn(c,o)?c:ba.current!==null?(i=sg(i,c,f),Zn(i,o)||(Gt=!0),i):(os&42)===0?(Gt=!0,i.memoizedState=c):(i=L1(),Be.lanes|=i,ds|=i,o)}function Mv(i,o,c,f,g){var m=M.p;M.p=m!==0&&8>m?m:8;var x=O.T,B={};O.T=B,cg(i,!1,o,c);try{var j=g(),te=O.S;if(te!==null&&te(B,j),j!==null&&typeof j=="object"&&typeof j.then=="function"){var ue=OI(j,f);il(i,o,ue,nr(i))}else il(i,o,f,nr(i))}catch(pe){il(i,o,{then:function(){},status:"rejected",reason:pe},nr())}finally{M.p=m,O.T=x}}function CI(){}function og(i,o,c,f){if(i.tag!==5)throw Error(r(476));var g=Lv(i).queue;Mv(i,g,o,F,c===null?CI:function(){return jv(i),c(f)})}function Lv(i){var o=i.memoizedState;if(o!==null)return o;o={memoizedState:F,baseState:F,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Oi,lastRenderedState:F},next:null};var c={};return o.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Oi,lastRenderedState:c},next:null},i.memoizedState=o,i=i.alternate,i!==null&&(i.memoizedState=o),o}function jv(i){var o=Lv(i).next.queue;il(i,o,{},nr())}function ag(){return gn(_l)}function zv(){return Nt().memoizedState}function qv(){return Nt().memoizedState}function NI(i){for(var o=i.return;o!==null;){switch(o.tag){case 24:case 3:var c=nr();i=is(c);var f=ss(o,i,c);f!==null&&(rr(f,o,c),Qc(f,o,c)),o={cache:kp()},i.payload=o;return}o=o.return}}function UI(i,o,c){var f=nr();c={lane:f,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null},Ef(i)?Fv(o,c):(c=xp(i,o,c,f),c!==null&&(rr(c,i,f),Vv(c,o,f)))}function Hv(i,o,c){var f=nr();il(i,o,c,f)}function il(i,o,c,f){var g={lane:f,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null};if(Ef(i))Fv(o,g);else{var m=i.alternate;if(i.lanes===0&&(m===null||m.lanes===0)&&(m=o.lastRenderedReducer,m!==null))try{var x=o.lastRenderedState,B=m(x,c);if(g.hasEagerState=!0,g.eagerState=B,Zn(B,x))return rf(i,o,g,0),dt===null&&nf(),!1}catch{}finally{}if(c=xp(i,o,g,f),c!==null)return rr(c,i,f),Vv(c,o,f),!0}return!1}function cg(i,o,c,f){if(f={lane:2,revertLane:jg(),action:f,hasEagerState:!1,eagerState:null,next:null},Ef(i)){if(o)throw Error(r(479))}else o=xp(i,c,f,2),o!==null&&rr(o,i,2)}function Ef(i){var o=i.alternate;return i===Be||o!==null&&o===Be}function Fv(i,o){wa=gf=!0;var c=i.pending;c===null?o.next=o:(o.next=c.next,c.next=o),i.pending=o}function Vv(i,o,c){if((c&4194048)!==0){var f=o.lanes;f&=i.pendingLanes,c|=f,o.lanes=c,Jb(i,c)}}var _f={readContext:gn,use:mf,useCallback:Tt,useContext:Tt,useEffect:Tt,useImperativeHandle:Tt,useLayoutEffect:Tt,useInsertionEffect:Tt,useMemo:Tt,useReducer:Tt,useRef:Tt,useState:Tt,useDebugValue:Tt,useDeferredValue:Tt,useTransition:Tt,useSyncExternalStore:Tt,useId:Tt,useHostTransitionStatus:Tt,useFormState:Tt,useActionState:Tt,useOptimistic:Tt,useMemoCache:Tt,useCacheRefresh:Tt},Gv={readContext:gn,use:mf,useCallback:function(i,o){return Nn().memoizedState=[i,o===void 0?null:o],i},useContext:gn,useEffect:Dv,useImperativeHandle:function(i,o,c){c=c!=null?c.concat([i]):null,vf(4194308,4,Uv.bind(null,o,i),c)},useLayoutEffect:function(i,o){return vf(4194308,4,i,o)},useInsertionEffect:function(i,o){vf(4,2,i,o)},useMemo:function(i,o){var c=Nn();o=o===void 0?null:o;var f=i();if(io){S(!0);try{i()}finally{S(!1)}}return c.memoizedState=[f,o],f},useReducer:function(i,o,c){var f=Nn();if(c!==void 0){var g=c(o);if(io){S(!0);try{c(o)}finally{S(!1)}}}else g=o;return f.memoizedState=f.baseState=g,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:g},f.queue=i,i=i.dispatch=UI.bind(null,Be,i),[f.memoizedState,i]},useRef:function(i){var o=Nn();return i={current:i},o.memoizedState=i},useState:function(i){i=ng(i);var o=i.queue,c=Hv.bind(null,Be,o);return o.dispatch=c,[i.memoizedState,c]},useDebugValue:ig,useDeferredValue:function(i,o){var c=Nn();return sg(c,i,o)},useTransition:function(){var i=ng(!1);return i=Mv.bind(null,Be,i.queue,!0,!1),Nn().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,o,c){var f=Be,g=Nn();if(Ke){if(c===void 0)throw Error(r(407));c=c()}else{if(c=o(),dt===null)throw Error(r(349));(ze&124)!==0||dv(f,o,c)}g.memoizedState=c;var m={value:c,getSnapshot:o};return g.queue=m,Dv(gv.bind(null,f,m,i),[i]),f.flags|=2048,Ea(9,wf(),pv.bind(null,f,m,c,o),null),c},useId:function(){var i=Nn(),o=dt.identifierPrefix;if(Ke){var c=Si,f=_i;c=(f&~(1<<32-A(f)-1)).toString(32)+c,o=""+o+"R"+c,c=yf++,0<c&&(o+="H"+c.toString(32)),o+=""}else c=xI++,o=""+o+"r"+c.toString(32)+"";return i.memoizedState=o},useHostTransitionStatus:ag,useFormState:Av,useActionState:Av,useOptimistic:function(i){var o=Nn();o.memoizedState=o.baseState=i;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=c,o=cg.bind(null,Be,!0,c),c.dispatch=o,[i,o]},useMemoCache:Jp,useCacheRefresh:function(){return Nn().memoizedState=NI.bind(null,Be)}},Kv={readContext:gn,use:mf,useCallback:$v,useContext:gn,useEffect:Iv,useImperativeHandle:Bv,useInsertionEffect:Cv,useLayoutEffect:Nv,useMemo:Pv,useReducer:bf,useRef:Tv,useState:function(){return bf(Oi)},useDebugValue:ig,useDeferredValue:function(i,o){var c=Nt();return kv(c,it.memoizedState,i,o)},useTransition:function(){var i=bf(Oi)[0],o=Nt().memoizedState;return[typeof i=="boolean"?i:nl(i),o]},useSyncExternalStore:hv,useId:zv,useHostTransitionStatus:ag,useFormState:Rv,useActionState:Rv,useOptimistic:function(i,o){var c=Nt();return bv(c,it,i,o)},useMemoCache:Jp,useCacheRefresh:qv},BI={readContext:gn,use:mf,useCallback:$v,useContext:gn,useEffect:Iv,useImperativeHandle:Bv,useInsertionEffect:Cv,useLayoutEffect:Nv,useMemo:Pv,useReducer:tg,useRef:Tv,useState:function(){return tg(Oi)},useDebugValue:ig,useDeferredValue:function(i,o){var c=Nt();return it===null?sg(c,i,o):kv(c,it.memoizedState,i,o)},useTransition:function(){var i=tg(Oi)[0],o=Nt().memoizedState;return[typeof i=="boolean"?i:nl(i),o]},useSyncExternalStore:hv,useId:zv,useHostTransitionStatus:ag,useFormState:xv,useActionState:xv,useOptimistic:function(i,o){var c=Nt();return it!==null?bv(c,it,i,o):(c.baseState=i,[i,c.queue.dispatch])},useMemoCache:Jp,useCacheRefresh:qv},_a=null,sl=0;function Sf(i){var o=sl;return sl+=1,_a===null&&(_a=[]),iv(_a,i,o)}function ol(i,o){o=o.props.ref,i.ref=o!==void 0?o:null}function Af(i,o){throw o.$$typeof===y?Error(r(525)):(i=Object.prototype.toString.call(o),Error(r(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i)))}function Yv(i){var o=i._init;return o(i._payload)}function Wv(i){function o(Z,W){if(i){var ee=Z.deletions;ee===null?(Z.deletions=[W],Z.flags|=16):ee.push(W)}}function c(Z,W){if(!i)return null;for(;W!==null;)o(Z,W),W=W.sibling;return null}function f(Z){for(var W=new Map;Z!==null;)Z.key!==null?W.set(Z.key,Z):W.set(Z.index,Z),Z=Z.sibling;return W}function g(Z,W){return Z=Ei(Z,W),Z.index=0,Z.sibling=null,Z}function m(Z,W,ee){return Z.index=ee,i?(ee=Z.alternate,ee!==null?(ee=ee.index,ee<W?(Z.flags|=67108866,W):ee):(Z.flags|=67108866,W)):(Z.flags|=1048576,W)}function x(Z){return i&&Z.alternate===null&&(Z.flags|=67108866),Z}function B(Z,W,ee,de){return W===null||W.tag!==6?(W=Dp(ee,Z.mode,de),W.return=Z,W):(W=g(W,ee),W.return=Z,W)}function j(Z,W,ee,de){var Ee=ee.type;return Ee===v?ue(Z,W,ee.props.children,de,ee.key):W!==null&&(W.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===H&&Yv(Ee)===W.type)?(W=g(W,ee.props),ol(W,ee),W.return=Z,W):(W=of(ee.type,ee.key,ee.props,null,Z.mode,de),ol(W,ee),W.return=Z,W)}function te(Z,W,ee,de){return W===null||W.tag!==4||W.stateNode.containerInfo!==ee.containerInfo||W.stateNode.implementation!==ee.implementation?(W=Ip(ee,Z.mode,de),W.return=Z,W):(W=g(W,ee.children||[]),W.return=Z,W)}function ue(Z,W,ee,de,Ee){return W===null||W.tag!==7?(W=Xs(ee,Z.mode,de,Ee),W.return=Z,W):(W=g(W,ee),W.return=Z,W)}function pe(Z,W,ee){if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return W=Dp(""+W,Z.mode,ee),W.return=Z,W;if(typeof W=="object"&&W!==null){switch(W.$$typeof){case b:return ee=of(W.type,W.key,W.props,null,Z.mode,ee),ol(ee,W),ee.return=Z,ee;case w:return W=Ip(W,Z.mode,ee),W.return=Z,W;case H:var de=W._init;return W=de(W._payload),pe(Z,W,ee)}if(T(W)||K(W))return W=Xs(W,Z.mode,ee,null),W.return=Z,W;if(typeof W.then=="function")return pe(Z,Sf(W),ee);if(W.$$typeof===I)return pe(Z,uf(Z,W),ee);Af(Z,W)}return null}function ie(Z,W,ee,de){var Ee=W!==null?W.key:null;if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return Ee!==null?null:B(Z,W,""+ee,de);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case b:return ee.key===Ee?j(Z,W,ee,de):null;case w:return ee.key===Ee?te(Z,W,ee,de):null;case H:return Ee=ee._init,ee=Ee(ee._payload),ie(Z,W,ee,de)}if(T(ee)||K(ee))return Ee!==null?null:ue(Z,W,ee,de,null);if(typeof ee.then=="function")return ie(Z,W,Sf(ee),de);if(ee.$$typeof===I)return ie(Z,W,uf(Z,ee),de);Af(Z,ee)}return null}function oe(Z,W,ee,de,Ee){if(typeof de=="string"&&de!==""||typeof de=="number"||typeof de=="bigint")return Z=Z.get(ee)||null,B(W,Z,""+de,Ee);if(typeof de=="object"&&de!==null){switch(de.$$typeof){case b:return Z=Z.get(de.key===null?ee:de.key)||null,j(W,Z,de,Ee);case w:return Z=Z.get(de.key===null?ee:de.key)||null,te(W,Z,de,Ee);case H:var $e=de._init;return de=$e(de._payload),oe(Z,W,ee,de,Ee)}if(T(de)||K(de))return Z=Z.get(ee)||null,ue(W,Z,de,Ee,null);if(typeof de.then=="function")return oe(Z,W,ee,Sf(de),Ee);if(de.$$typeof===I)return oe(Z,W,ee,uf(W,de),Ee);Af(W,de)}return null}function Te(Z,W,ee,de){for(var Ee=null,$e=null,Se=W,Oe=W=0,Yt=null;Se!==null&&Oe<ee.length;Oe++){Se.index>Oe?(Yt=Se,Se=null):Yt=Se.sibling;var He=ie(Z,Se,ee[Oe],de);if(He===null){Se===null&&(Se=Yt);break}i&&Se&&He.alternate===null&&o(Z,Se),W=m(He,W,Oe),$e===null?Ee=He:$e.sibling=He,$e=He,Se=Yt}if(Oe===ee.length)return c(Z,Se),Ke&&Qs(Z,Oe),Ee;if(Se===null){for(;Oe<ee.length;Oe++)Se=pe(Z,ee[Oe],de),Se!==null&&(W=m(Se,W,Oe),$e===null?Ee=Se:$e.sibling=Se,$e=Se);return Ke&&Qs(Z,Oe),Ee}for(Se=f(Se);Oe<ee.length;Oe++)Yt=oe(Se,Z,Oe,ee[Oe],de),Yt!==null&&(i&&Yt.alternate!==null&&Se.delete(Yt.key===null?Oe:Yt.key),W=m(Yt,W,Oe),$e===null?Ee=Yt:$e.sibling=Yt,$e=Yt);return i&&Se.forEach(function(_s){return o(Z,_s)}),Ke&&Qs(Z,Oe),Ee}function Re(Z,W,ee,de){if(ee==null)throw Error(r(151));for(var Ee=null,$e=null,Se=W,Oe=W=0,Yt=null,He=ee.next();Se!==null&&!He.done;Oe++,He=ee.next()){Se.index>Oe?(Yt=Se,Se=null):Yt=Se.sibling;var _s=ie(Z,Se,He.value,de);if(_s===null){Se===null&&(Se=Yt);break}i&&Se&&_s.alternate===null&&o(Z,Se),W=m(_s,W,Oe),$e===null?Ee=_s:$e.sibling=_s,$e=_s,Se=Yt}if(He.done)return c(Z,Se),Ke&&Qs(Z,Oe),Ee;if(Se===null){for(;!He.done;Oe++,He=ee.next())He=pe(Z,He.value,de),He!==null&&(W=m(He,W,Oe),$e===null?Ee=He:$e.sibling=He,$e=He);return Ke&&Qs(Z,Oe),Ee}for(Se=f(Se);!He.done;Oe++,He=ee.next())He=oe(Se,Z,Oe,He.value,de),He!==null&&(i&&He.alternate!==null&&Se.delete(He.key===null?Oe:He.key),W=m(He,W,Oe),$e===null?Ee=He:$e.sibling=He,$e=He);return i&&Se.forEach(function($8){return o(Z,$8)}),Ke&&Qs(Z,Oe),Ee}function ot(Z,W,ee,de){if(typeof ee=="object"&&ee!==null&&ee.type===v&&ee.key===null&&(ee=ee.props.children),typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case b:e:{for(var Ee=ee.key;W!==null;){if(W.key===Ee){if(Ee=ee.type,Ee===v){if(W.tag===7){c(Z,W.sibling),de=g(W,ee.props.children),de.return=Z,Z=de;break e}}else if(W.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===H&&Yv(Ee)===W.type){c(Z,W.sibling),de=g(W,ee.props),ol(de,ee),de.return=Z,Z=de;break e}c(Z,W);break}else o(Z,W);W=W.sibling}ee.type===v?(de=Xs(ee.props.children,Z.mode,de,ee.key),de.return=Z,Z=de):(de=of(ee.type,ee.key,ee.props,null,Z.mode,de),ol(de,ee),de.return=Z,Z=de)}return x(Z);case w:e:{for(Ee=ee.key;W!==null;){if(W.key===Ee)if(W.tag===4&&W.stateNode.containerInfo===ee.containerInfo&&W.stateNode.implementation===ee.implementation){c(Z,W.sibling),de=g(W,ee.children||[]),de.return=Z,Z=de;break e}else{c(Z,W);break}else o(Z,W);W=W.sibling}de=Ip(ee,Z.mode,de),de.return=Z,Z=de}return x(Z);case H:return Ee=ee._init,ee=Ee(ee._payload),ot(Z,W,ee,de)}if(T(ee))return Te(Z,W,ee,de);if(K(ee)){if(Ee=K(ee),typeof Ee!="function")throw Error(r(150));return ee=Ee.call(ee),Re(Z,W,ee,de)}if(typeof ee.then=="function")return ot(Z,W,Sf(ee),de);if(ee.$$typeof===I)return ot(Z,W,uf(Z,ee),de);Af(Z,ee)}return typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint"?(ee=""+ee,W!==null&&W.tag===6?(c(Z,W.sibling),de=g(W,ee),de.return=Z,Z=de):(c(Z,W),de=Dp(ee,Z.mode,de),de.return=Z,Z=de),x(Z)):c(Z,W)}return function(Z,W,ee,de){try{sl=0;var Ee=ot(Z,W,ee,de);return _a=null,Ee}catch(Se){if(Se===Xc||Se===hf)throw Se;var $e=Qn(29,Se,null,Z.mode);return $e.lanes=de,$e.return=Z,$e}finally{}}}var Sa=Wv(!0),Xv=Wv(!1),br=z(null),Yr=null;function as(i){var o=i.alternate;se(jt,jt.current&1),se(br,i),Yr===null&&(o===null||ba.current!==null||o.memoizedState!==null)&&(Yr=i)}function Zv(i){if(i.tag===22){if(se(jt,jt.current),se(br,i),Yr===null){var o=i.alternate;o!==null&&o.memoizedState!==null&&(Yr=i)}}else cs()}function cs(){se(jt,jt.current),se(br,br.current)}function xi(i){J(br),Yr===i&&(Yr=null),J(jt)}var jt=z(0);function Rf(i){for(var o=i;o!==null;){if(o.tag===13){var c=o.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||Qg(c)))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}function lg(i,o,c,f){o=i.memoizedState,c=c(f,o),c=c==null?o:p({},o,c),i.memoizedState=c,i.lanes===0&&(i.updateQueue.baseState=c)}var ug={enqueueSetState:function(i,o,c){i=i._reactInternals;var f=nr(),g=is(f);g.payload=o,c!=null&&(g.callback=c),o=ss(i,g,f),o!==null&&(rr(o,i,f),Qc(o,i,f))},enqueueReplaceState:function(i,o,c){i=i._reactInternals;var f=nr(),g=is(f);g.tag=1,g.payload=o,c!=null&&(g.callback=c),o=ss(i,g,f),o!==null&&(rr(o,i,f),Qc(o,i,f))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var c=nr(),f=is(c);f.tag=2,o!=null&&(f.callback=o),o=ss(i,f,c),o!==null&&(rr(o,i,c),Qc(o,i,c))}};function Qv(i,o,c,f,g,m,x){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(f,m,x):o.prototype&&o.prototype.isPureReactComponent?!qc(c,f)||!qc(g,m):!0}function Jv(i,o,c,f){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(c,f),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(c,f),o.state!==i&&ug.enqueueReplaceState(o,o.state,null)}function so(i,o){var c=o;if("ref"in o){c={};for(var f in o)f!=="ref"&&(c[f]=o[f])}if(i=i.defaultProps){c===o&&(c=p({},c));for(var g in i)c[g]===void 0&&(c[g]=i[g])}return c}var Of=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)};function e1(i){Of(i)}function t1(i){console.error(i)}function n1(i){Of(i)}function xf(i,o){try{var c=i.onUncaughtError;c(o.value,{componentStack:o.stack})}catch(f){setTimeout(function(){throw f})}}function r1(i,o,c){try{var f=i.onCaughtError;f(c.value,{componentStack:c.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function fg(i,o,c){return c=is(c),c.tag=3,c.payload={element:null},c.callback=function(){xf(i,o)},c}function i1(i){return i=is(i),i.tag=3,i}function s1(i,o,c,f){var g=c.type.getDerivedStateFromError;if(typeof g=="function"){var m=f.value;i.payload=function(){return g(m)},i.callback=function(){r1(o,c,f)}}var x=c.stateNode;x!==null&&typeof x.componentDidCatch=="function"&&(i.callback=function(){r1(o,c,f),typeof g!="function"&&(ps===null?ps=new Set([this]):ps.add(this));var B=f.stack;this.componentDidCatch(f.value,{componentStack:B!==null?B:""})})}function $I(i,o,c,f,g){if(c.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){if(o=c.alternate,o!==null&&Kc(o,c,g,!0),c=br.current,c!==null){switch(c.tag){case 13:return Yr===null?$g():c.alternate===null&&At===0&&(At=3),c.flags&=-257,c.flags|=65536,c.lanes=g,f===jp?c.flags|=16384:(o=c.updateQueue,o===null?c.updateQueue=new Set([f]):o.add(f),kg(i,f,g)),!1;case 22:return c.flags|=65536,f===jp?c.flags|=16384:(o=c.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([f])},c.updateQueue=o):(c=o.retryQueue,c===null?o.retryQueue=new Set([f]):c.add(f)),kg(i,f,g)),!1}throw Error(r(435,c.tag))}return kg(i,f,g),$g(),!1}if(Ke)return o=br.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=g,f!==Up&&(i=Error(r(422),{cause:f}),Gc(pr(i,c)))):(f!==Up&&(o=Error(r(423),{cause:f}),Gc(pr(o,c))),i=i.current.alternate,i.flags|=65536,g&=-g,i.lanes|=g,f=pr(f,c),g=fg(i.stateNode,f,g),Hp(i,g),At!==4&&(At=2)),!1;var m=Error(r(520),{cause:f});if(m=pr(m,c),dl===null?dl=[m]:dl.push(m),At!==4&&(At=2),o===null)return!0;f=pr(f,c),c=o;do{switch(c.tag){case 3:return c.flags|=65536,i=g&-g,c.lanes|=i,i=fg(c.stateNode,f,i),Hp(c,i),!1;case 1:if(o=c.type,m=c.stateNode,(c.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(ps===null||!ps.has(m))))return c.flags|=65536,g&=-g,c.lanes|=g,g=i1(g),s1(g,i,c,f),Hp(c,g),!1}c=c.return}while(c!==null);return!1}var o1=Error(r(461)),Gt=!1;function en(i,o,c,f){o.child=i===null?Xv(o,null,c,f):Sa(o,i.child,c,f)}function a1(i,o,c,f,g){c=c.render;var m=o.ref;if("ref"in f){var x={};for(var B in f)B!=="ref"&&(x[B]=f[B])}else x=f;return no(o),f=Yp(i,o,c,x,m,g),B=Wp(),i!==null&&!Gt?(Xp(i,o,g),Ti(i,o,g)):(Ke&&B&&Cp(o),o.flags|=1,en(i,o,f,g),o.child)}function c1(i,o,c,f,g){if(i===null){var m=c.type;return typeof m=="function"&&!Tp(m)&&m.defaultProps===void 0&&c.compare===null?(o.tag=15,o.type=m,l1(i,o,m,f,g)):(i=of(c.type,null,f,o,o.mode,g),i.ref=o.ref,i.return=o,o.child=i)}if(m=i.child,!wg(i,g)){var x=m.memoizedProps;if(c=c.compare,c=c!==null?c:qc,c(x,f)&&i.ref===o.ref)return Ti(i,o,g)}return o.flags|=1,i=Ei(m,f),i.ref=o.ref,i.return=o,o.child=i}function l1(i,o,c,f,g){if(i!==null){var m=i.memoizedProps;if(qc(m,f)&&i.ref===o.ref)if(Gt=!1,o.pendingProps=f=m,wg(i,g))(i.flags&131072)!==0&&(Gt=!0);else return o.lanes=i.lanes,Ti(i,o,g)}return hg(i,o,c,f,g)}function u1(i,o,c){var f=o.pendingProps,g=f.children,m=i!==null?i.memoizedState:null;if(f.mode==="hidden"){if((o.flags&128)!==0){if(f=m!==null?m.baseLanes|c:c,i!==null){for(g=o.child=i.child,m=0;g!==null;)m=m|g.lanes|g.childLanes,g=g.sibling;o.childLanes=m&~f}else o.childLanes=0,o.child=null;return f1(i,o,f,c)}if((c&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},i!==null&&ff(o,m!==null?m.cachePool:null),m!==null?lv(o,m):Vp(),Zv(o);else return o.lanes=o.childLanes=536870912,f1(i,o,m!==null?m.baseLanes|c:c,c)}else m!==null?(ff(o,m.cachePool),lv(o,m),cs(),o.memoizedState=null):(i!==null&&ff(o,null),Vp(),cs());return en(i,o,g,c),o.child}function f1(i,o,c,f){var g=Lp();return g=g===null?null:{parent:Lt._currentValue,pool:g},o.memoizedState={baseLanes:c,cachePool:g},i!==null&&ff(o,null),Vp(),Zv(o),i!==null&&Kc(i,o,f,!0),null}function Tf(i,o){var c=o.ref;if(c===null)i!==null&&i.ref!==null&&(o.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(r(284));(i===null||i.ref!==c)&&(o.flags|=4194816)}}function hg(i,o,c,f,g){return no(o),c=Yp(i,o,c,f,void 0,g),f=Wp(),i!==null&&!Gt?(Xp(i,o,g),Ti(i,o,g)):(Ke&&f&&Cp(o),o.flags|=1,en(i,o,c,g),o.child)}function h1(i,o,c,f,g,m){return no(o),o.updateQueue=null,c=fv(o,f,c,g),uv(i),f=Wp(),i!==null&&!Gt?(Xp(i,o,m),Ti(i,o,m)):(Ke&&f&&Cp(o),o.flags|=1,en(i,o,c,m),o.child)}function d1(i,o,c,f,g){if(no(o),o.stateNode===null){var m=da,x=c.contextType;typeof x=="object"&&x!==null&&(m=gn(x)),m=new c(f,m),o.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=ug,o.stateNode=m,m._reactInternals=o,m=o.stateNode,m.props=f,m.state=o.memoizedState,m.refs={},zp(o),x=c.contextType,m.context=typeof x=="object"&&x!==null?gn(x):da,m.state=o.memoizedState,x=c.getDerivedStateFromProps,typeof x=="function"&&(lg(o,c,x,f),m.state=o.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(x=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),x!==m.state&&ug.enqueueReplaceState(m,m.state,null),el(o,f,m,g),Jc(),m.state=o.memoizedState),typeof m.componentDidMount=="function"&&(o.flags|=4194308),f=!0}else if(i===null){m=o.stateNode;var B=o.memoizedProps,j=so(c,B);m.props=j;var te=m.context,ue=c.contextType;x=da,typeof ue=="object"&&ue!==null&&(x=gn(ue));var pe=c.getDerivedStateFromProps;ue=typeof pe=="function"||typeof m.getSnapshotBeforeUpdate=="function",B=o.pendingProps!==B,ue||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(B||te!==x)&&Jv(o,m,f,x),rs=!1;var ie=o.memoizedState;m.state=ie,el(o,f,m,g),Jc(),te=o.memoizedState,B||ie!==te||rs?(typeof pe=="function"&&(lg(o,c,pe,f),te=o.memoizedState),(j=rs||Qv(o,c,j,f,ie,te,x))?(ue||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(o.flags|=4194308)):(typeof m.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=f,o.memoizedState=te),m.props=f,m.state=te,m.context=x,f=j):(typeof m.componentDidMount=="function"&&(o.flags|=4194308),f=!1)}else{m=o.stateNode,qp(i,o),x=o.memoizedProps,ue=so(c,x),m.props=ue,pe=o.pendingProps,ie=m.context,te=c.contextType,j=da,typeof te=="object"&&te!==null&&(j=gn(te)),B=c.getDerivedStateFromProps,(te=typeof B=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(x!==pe||ie!==j)&&Jv(o,m,f,j),rs=!1,ie=o.memoizedState,m.state=ie,el(o,f,m,g),Jc();var oe=o.memoizedState;x!==pe||ie!==oe||rs||i!==null&&i.dependencies!==null&&lf(i.dependencies)?(typeof B=="function"&&(lg(o,c,B,f),oe=o.memoizedState),(ue=rs||Qv(o,c,ue,f,ie,oe,j)||i!==null&&i.dependencies!==null&&lf(i.dependencies))?(te||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(f,oe,j),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(f,oe,j)),typeof m.componentDidUpdate=="function"&&(o.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof m.componentDidUpdate!="function"||x===i.memoizedProps&&ie===i.memoizedState||(o.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||x===i.memoizedProps&&ie===i.memoizedState||(o.flags|=1024),o.memoizedProps=f,o.memoizedState=oe),m.props=f,m.state=oe,m.context=j,f=ue):(typeof m.componentDidUpdate!="function"||x===i.memoizedProps&&ie===i.memoizedState||(o.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||x===i.memoizedProps&&ie===i.memoizedState||(o.flags|=1024),f=!1)}return m=f,Tf(i,o),f=(o.flags&128)!==0,m||f?(m=o.stateNode,c=f&&typeof c.getDerivedStateFromError!="function"?null:m.render(),o.flags|=1,i!==null&&f?(o.child=Sa(o,i.child,null,g),o.child=Sa(o,null,c,g)):en(i,o,c,g),o.memoizedState=m.state,i=o.child):i=Ti(i,o,g),i}function p1(i,o,c,f){return Vc(),o.flags|=256,en(i,o,c,f),o.child}var dg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function pg(i){return{baseLanes:i,cachePool:tv()}}function gg(i,o,c){return i=i!==null?i.childLanes&~c:0,o&&(i|=wr),i}function g1(i,o,c){var f=o.pendingProps,g=!1,m=(o.flags&128)!==0,x;if((x=m)||(x=i!==null&&i.memoizedState===null?!1:(jt.current&2)!==0),x&&(g=!0,o.flags&=-129),x=(o.flags&32)!==0,o.flags&=-33,i===null){if(Ke){if(g?as(o):cs(),Ke){var B=St,j;if(j=B){e:{for(j=B,B=Kr;j.nodeType!==8;){if(!B){B=null;break e}if(j=Br(j.nextSibling),j===null){B=null;break e}}B=j}B!==null?(o.memoizedState={dehydrated:B,treeContext:Zs!==null?{id:_i,overflow:Si}:null,retryLane:536870912,hydrationErrors:null},j=Qn(18,null,null,0),j.stateNode=B,j.return=o,o.child=j,An=o,St=null,j=!0):j=!1}j||eo(o)}if(B=o.memoizedState,B!==null&&(B=B.dehydrated,B!==null))return Qg(B)?o.lanes=32:o.lanes=536870912,null;xi(o)}return B=f.children,f=f.fallback,g?(cs(),g=o.mode,B=Df({mode:"hidden",children:B},g),f=Xs(f,g,c,null),B.return=o,f.return=o,B.sibling=f,o.child=B,g=o.child,g.memoizedState=pg(c),g.childLanes=gg(i,x,c),o.memoizedState=dg,f):(as(o),yg(o,B))}if(j=i.memoizedState,j!==null&&(B=j.dehydrated,B!==null)){if(m)o.flags&256?(as(o),o.flags&=-257,o=mg(i,o,c)):o.memoizedState!==null?(cs(),o.child=i.child,o.flags|=128,o=null):(cs(),g=f.fallback,B=o.mode,f=Df({mode:"visible",children:f.children},B),g=Xs(g,B,c,null),g.flags|=2,f.return=o,g.return=o,f.sibling=g,o.child=f,Sa(o,i.child,null,c),f=o.child,f.memoizedState=pg(c),f.childLanes=gg(i,x,c),o.memoizedState=dg,o=g);else if(as(o),Qg(B)){if(x=B.nextSibling&&B.nextSibling.dataset,x)var te=x.dgst;x=te,f=Error(r(419)),f.stack="",f.digest=x,Gc({value:f,source:null,stack:null}),o=mg(i,o,c)}else if(Gt||Kc(i,o,c,!1),x=(c&i.childLanes)!==0,Gt||x){if(x=dt,x!==null&&(f=c&-c,f=(f&42)!==0?1:Jd(f),f=(f&(x.suspendedLanes|c))!==0?0:f,f!==0&&f!==j.retryLane))throw j.retryLane=f,ha(i,f),rr(x,i,f),o1;B.data==="$?"||$g(),o=mg(i,o,c)}else B.data==="$?"?(o.flags|=192,o.child=i.child,o=null):(i=j.treeContext,St=Br(B.nextSibling),An=o,Ke=!0,Js=null,Kr=!1,i!==null&&(yr[mr++]=_i,yr[mr++]=Si,yr[mr++]=Zs,_i=i.id,Si=i.overflow,Zs=o),o=yg(o,f.children),o.flags|=4096);return o}return g?(cs(),g=f.fallback,B=o.mode,j=i.child,te=j.sibling,f=Ei(j,{mode:"hidden",children:f.children}),f.subtreeFlags=j.subtreeFlags&65011712,te!==null?g=Ei(te,g):(g=Xs(g,B,c,null),g.flags|=2),g.return=o,f.return=o,f.sibling=g,o.child=f,f=g,g=o.child,B=i.child.memoizedState,B===null?B=pg(c):(j=B.cachePool,j!==null?(te=Lt._currentValue,j=j.parent!==te?{parent:te,pool:te}:j):j=tv(),B={baseLanes:B.baseLanes|c,cachePool:j}),g.memoizedState=B,g.childLanes=gg(i,x,c),o.memoizedState=dg,f):(as(o),c=i.child,i=c.sibling,c=Ei(c,{mode:"visible",children:f.children}),c.return=o,c.sibling=null,i!==null&&(x=o.deletions,x===null?(o.deletions=[i],o.flags|=16):x.push(i)),o.child=c,o.memoizedState=null,c)}function yg(i,o){return o=Df({mode:"visible",children:o},i.mode),o.return=i,i.child=o}function Df(i,o){return i=Qn(22,i,null,o),i.lanes=0,i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},i}function mg(i,o,c){return Sa(o,i.child,null,c),i=yg(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function y1(i,o,c){i.lanes|=o;var f=i.alternate;f!==null&&(f.lanes|=o),$p(i.return,o,c)}function bg(i,o,c,f,g){var m=i.memoizedState;m===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:f,tail:c,tailMode:g}:(m.isBackwards=o,m.rendering=null,m.renderingStartTime=0,m.last=f,m.tail=c,m.tailMode=g)}function m1(i,o,c){var f=o.pendingProps,g=f.revealOrder,m=f.tail;if(en(i,o,f.children,c),f=jt.current,(f&2)!==0)f=f&1|2,o.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&y1(i,c,o);else if(i.tag===19)y1(i,c,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}f&=1}switch(se(jt,f),g){case"forwards":for(c=o.child,g=null;c!==null;)i=c.alternate,i!==null&&Rf(i)===null&&(g=c),c=c.sibling;c=g,c===null?(g=o.child,o.child=null):(g=c.sibling,c.sibling=null),bg(o,!1,g,c,m);break;case"backwards":for(c=null,g=o.child,o.child=null;g!==null;){if(i=g.alternate,i!==null&&Rf(i)===null){o.child=g;break}i=g.sibling,g.sibling=c,c=g,g=i}bg(o,!0,c,null,m);break;case"together":bg(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function Ti(i,o,c){if(i!==null&&(o.dependencies=i.dependencies),ds|=o.lanes,(c&o.childLanes)===0)if(i!==null){if(Kc(i,o,c,!1),(c&o.childLanes)===0)return null}else return null;if(i!==null&&o.child!==i.child)throw Error(r(153));if(o.child!==null){for(i=o.child,c=Ei(i,i.pendingProps),o.child=c,c.return=o;i.sibling!==null;)i=i.sibling,c=c.sibling=Ei(i,i.pendingProps),c.return=o;c.sibling=null}return o.child}function wg(i,o){return(i.lanes&o)!==0?!0:(i=i.dependencies,!!(i!==null&&lf(i)))}function PI(i,o,c){switch(o.tag){case 3:_e(o,o.stateNode.containerInfo),ns(o,Lt,i.memoizedState.cache),Vc();break;case 27:case 5:nt(o);break;case 4:_e(o,o.stateNode.containerInfo);break;case 10:ns(o,o.type,o.memoizedProps.value);break;case 13:var f=o.memoizedState;if(f!==null)return f.dehydrated!==null?(as(o),o.flags|=128,null):(c&o.child.childLanes)!==0?g1(i,o,c):(as(o),i=Ti(i,o,c),i!==null?i.sibling:null);as(o);break;case 19:var g=(i.flags&128)!==0;if(f=(c&o.childLanes)!==0,f||(Kc(i,o,c,!1),f=(c&o.childLanes)!==0),g){if(f)return m1(i,o,c);o.flags|=128}if(g=o.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),se(jt,jt.current),f)break;return null;case 22:case 23:return o.lanes=0,u1(i,o,c);case 24:ns(o,Lt,i.memoizedState.cache)}return Ti(i,o,c)}function b1(i,o,c){if(i!==null)if(i.memoizedProps!==o.pendingProps)Gt=!0;else{if(!wg(i,c)&&(o.flags&128)===0)return Gt=!1,PI(i,o,c);Gt=(i.flags&131072)!==0}else Gt=!1,Ke&&(o.flags&1048576)!==0&&Yw(o,cf,o.index);switch(o.lanes=0,o.tag){case 16:e:{i=o.pendingProps;var f=o.elementType,g=f._init;if(f=g(f._payload),o.type=f,typeof f=="function")Tp(f)?(i=so(f,i),o.tag=1,o=d1(null,o,f,i,c)):(o.tag=0,o=hg(null,o,f,i,c));else{if(f!=null){if(g=f.$$typeof,g===$){o.tag=11,o=a1(null,o,f,i,c);break e}else if(g===q){o.tag=14,o=c1(null,o,f,i,c);break e}}throw o=ne(f)||f,Error(r(306,o,""))}}return o;case 0:return hg(i,o,o.type,o.pendingProps,c);case 1:return f=o.type,g=so(f,o.pendingProps),d1(i,o,f,g,c);case 3:e:{if(_e(o,o.stateNode.containerInfo),i===null)throw Error(r(387));f=o.pendingProps;var m=o.memoizedState;g=m.element,qp(i,o),el(o,f,null,c);var x=o.memoizedState;if(f=x.cache,ns(o,Lt,f),f!==m.cache&&Pp(o,[Lt],c,!0),Jc(),f=x.element,m.isDehydrated)if(m={element:f,isDehydrated:!1,cache:x.cache},o.updateQueue.baseState=m,o.memoizedState=m,o.flags&256){o=p1(i,o,f,c);break e}else if(f!==g){g=pr(Error(r(424)),o),Gc(g),o=p1(i,o,f,c);break e}else{switch(i=o.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(St=Br(i.firstChild),An=o,Ke=!0,Js=null,Kr=!0,c=Xv(o,null,f,c),o.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(Vc(),f===g){o=Ti(i,o,c);break e}en(i,o,f,c)}o=o.child}return o;case 26:return Tf(i,o),i===null?(c=_E(o.type,null,o.pendingProps,null))?o.memoizedState=c:Ke||(c=o.type,i=o.pendingProps,f=Hf(ye.current).createElement(c),f[pn]=o,f[In]=i,nn(f,c,i),Vt(f),o.stateNode=f):o.memoizedState=_E(o.type,i.memoizedProps,o.pendingProps,i.memoizedState),null;case 27:return nt(o),i===null&&Ke&&(f=o.stateNode=wE(o.type,o.pendingProps,ye.current),An=o,Kr=!0,g=St,ms(o.type)?(Jg=g,St=Br(f.firstChild)):St=g),en(i,o,o.pendingProps.children,c),Tf(i,o),i===null&&(o.flags|=4194304),o.child;case 5:return i===null&&Ke&&((g=f=St)&&(f=u8(f,o.type,o.pendingProps,Kr),f!==null?(o.stateNode=f,An=o,St=Br(f.firstChild),Kr=!1,g=!0):g=!1),g||eo(o)),nt(o),g=o.type,m=o.pendingProps,x=i!==null?i.memoizedProps:null,f=m.children,Wg(g,m)?f=null:x!==null&&Wg(g,x)&&(o.flags|=32),o.memoizedState!==null&&(g=Yp(i,o,TI,null,null,c),_l._currentValue=g),Tf(i,o),en(i,o,f,c),o.child;case 6:return i===null&&Ke&&((i=c=St)&&(c=f8(c,o.pendingProps,Kr),c!==null?(o.stateNode=c,An=o,St=null,i=!0):i=!1),i||eo(o)),null;case 13:return g1(i,o,c);case 4:return _e(o,o.stateNode.containerInfo),f=o.pendingProps,i===null?o.child=Sa(o,null,f,c):en(i,o,f,c),o.child;case 11:return a1(i,o,o.type,o.pendingProps,c);case 7:return en(i,o,o.pendingProps,c),o.child;case 8:return en(i,o,o.pendingProps.children,c),o.child;case 12:return en(i,o,o.pendingProps.children,c),o.child;case 10:return f=o.pendingProps,ns(o,o.type,f.value),en(i,o,f.children,c),o.child;case 9:return g=o.type._context,f=o.pendingProps.children,no(o),g=gn(g),f=f(g),o.flags|=1,en(i,o,f,c),o.child;case 14:return c1(i,o,o.type,o.pendingProps,c);case 15:return l1(i,o,o.type,o.pendingProps,c);case 19:return m1(i,o,c);case 31:return f=o.pendingProps,c=o.mode,f={mode:f.mode,children:f.children},i===null?(c=Df(f,c),c.ref=o.ref,o.child=c,c.return=o,o=c):(c=Ei(i.child,f),c.ref=o.ref,o.child=c,c.return=o,o=c),o;case 22:return u1(i,o,c);case 24:return no(o),f=gn(Lt),i===null?(g=Lp(),g===null&&(g=dt,m=kp(),g.pooledCache=m,m.refCount++,m!==null&&(g.pooledCacheLanes|=c),g=m),o.memoizedState={parent:f,cache:g},zp(o),ns(o,Lt,g)):((i.lanes&c)!==0&&(qp(i,o),el(o,null,null,c),Jc()),g=i.memoizedState,m=o.memoizedState,g.parent!==f?(g={parent:f,cache:f},o.memoizedState=g,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=g),ns(o,Lt,f)):(f=m.cache,ns(o,Lt,f),f!==g.cache&&Pp(o,[Lt],c,!0))),en(i,o,o.pendingProps.children,c),o.child;case 29:throw o.pendingProps}throw Error(r(156,o.tag))}function Di(i){i.flags|=4}function w1(i,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!xE(o)){if(o=br.current,o!==null&&((ze&4194048)===ze?Yr!==null:(ze&62914560)!==ze&&(ze&536870912)===0||o!==Yr))throw Zc=jp,nv;i.flags|=8192}}function If(i,o){o!==null&&(i.flags|=4),i.flags&16384&&(o=i.tag!==22?Zb():536870912,i.lanes|=o,xa|=o)}function al(i,o){if(!Ke)switch(i.tailMode){case"hidden":o=i.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?i.tail=null:c.sibling=null;break;case"collapsed":c=i.tail;for(var f=null;c!==null;)c.alternate!==null&&(f=c),c=c.sibling;f===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:f.sibling=null}}function Et(i){var o=i.alternate!==null&&i.alternate.child===i.child,c=0,f=0;if(o)for(var g=i.child;g!==null;)c|=g.lanes|g.childLanes,f|=g.subtreeFlags&65011712,f|=g.flags&65011712,g.return=i,g=g.sibling;else for(g=i.child;g!==null;)c|=g.lanes|g.childLanes,f|=g.subtreeFlags,f|=g.flags,g.return=i,g=g.sibling;return i.subtreeFlags|=f,i.childLanes=c,o}function kI(i,o,c){var f=o.pendingProps;switch(Np(o),o.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Et(o),null;case 1:return Et(o),null;case 3:return c=o.stateNode,f=null,i!==null&&(f=i.memoizedState.cache),o.memoizedState.cache!==f&&(o.flags|=2048),Ri(Lt),xe(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(i===null||i.child===null)&&(Fc(o)?Di(o):i===null||i.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Zw())),Et(o),null;case 26:return c=o.memoizedState,i===null?(Di(o),c!==null?(Et(o),w1(o,c)):(Et(o),o.flags&=-16777217)):c?c!==i.memoizedState?(Di(o),Et(o),w1(o,c)):(Et(o),o.flags&=-16777217):(i.memoizedProps!==f&&Di(o),Et(o),o.flags&=-16777217),null;case 27:bt(o),c=ye.current;var g=o.type;if(i!==null&&o.stateNode!=null)i.memoizedProps!==f&&Di(o);else{if(!f){if(o.stateNode===null)throw Error(r(166));return Et(o),null}i=re.current,Fc(o)?Ww(o):(i=wE(g,f,c),o.stateNode=i,Di(o))}return Et(o),null;case 5:if(bt(o),c=o.type,i!==null&&o.stateNode!=null)i.memoizedProps!==f&&Di(o);else{if(!f){if(o.stateNode===null)throw Error(r(166));return Et(o),null}if(i=re.current,Fc(o))Ww(o);else{switch(g=Hf(ye.current),i){case 1:i=g.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:i=g.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":i=g.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":i=g.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":i=g.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof f.is=="string"?g.createElement("select",{is:f.is}):g.createElement("select"),f.multiple?i.multiple=!0:f.size&&(i.size=f.size);break;default:i=typeof f.is=="string"?g.createElement(c,{is:f.is}):g.createElement(c)}}i[pn]=o,i[In]=f;e:for(g=o.child;g!==null;){if(g.tag===5||g.tag===6)i.appendChild(g.stateNode);else if(g.tag!==4&&g.tag!==27&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===o)break e;for(;g.sibling===null;){if(g.return===null||g.return===o)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}o.stateNode=i;e:switch(nn(i,c,f),c){case"button":case"input":case"select":case"textarea":i=!!f.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&Di(o)}}return Et(o),o.flags&=-16777217,null;case 6:if(i&&o.stateNode!=null)i.memoizedProps!==f&&Di(o);else{if(typeof f!="string"&&o.stateNode===null)throw Error(r(166));if(i=ye.current,Fc(o)){if(i=o.stateNode,c=o.memoizedProps,f=null,g=An,g!==null)switch(g.tag){case 27:case 5:f=g.memoizedProps}i[pn]=o,i=!!(i.nodeValue===c||f!==null&&f.suppressHydrationWarning===!0||hE(i.nodeValue,c)),i||eo(o)}else i=Hf(i).createTextNode(f),i[pn]=o,o.stateNode=i}return Et(o),null;case 13:if(f=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(g=Fc(o),f!==null&&f.dehydrated!==null){if(i===null){if(!g)throw Error(r(318));if(g=o.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(r(317));g[pn]=o}else Vc(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Et(o),g=!1}else g=Zw(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=g),g=!0;if(!g)return o.flags&256?(xi(o),o):(xi(o),null)}if(xi(o),(o.flags&128)!==0)return o.lanes=c,o;if(c=f!==null,i=i!==null&&i.memoizedState!==null,c){f=o.child,g=null,f.alternate!==null&&f.alternate.memoizedState!==null&&f.alternate.memoizedState.cachePool!==null&&(g=f.alternate.memoizedState.cachePool.pool);var m=null;f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(m=f.memoizedState.cachePool.pool),m!==g&&(f.flags|=2048)}return c!==i&&c&&(o.child.flags|=8192),If(o,o.updateQueue),Et(o),null;case 4:return xe(),i===null&&Fg(o.stateNode.containerInfo),Et(o),null;case 10:return Ri(o.type),Et(o),null;case 19:if(J(jt),g=o.memoizedState,g===null)return Et(o),null;if(f=(o.flags&128)!==0,m=g.rendering,m===null)if(f)al(g,!1);else{if(At!==0||i!==null&&(i.flags&128)!==0)for(i=o.child;i!==null;){if(m=Rf(i),m!==null){for(o.flags|=128,al(g,!1),i=m.updateQueue,o.updateQueue=i,If(o,i),o.subtreeFlags=0,i=c,c=o.child;c!==null;)Kw(c,i),c=c.sibling;return se(jt,jt.current&1|2),o.child}i=i.sibling}g.tail!==null&&dn()>Uf&&(o.flags|=128,f=!0,al(g,!1),o.lanes=4194304)}else{if(!f)if(i=Rf(m),i!==null){if(o.flags|=128,f=!0,i=i.updateQueue,o.updateQueue=i,If(o,i),al(g,!0),g.tail===null&&g.tailMode==="hidden"&&!m.alternate&&!Ke)return Et(o),null}else 2*dn()-g.renderingStartTime>Uf&&c!==536870912&&(o.flags|=128,f=!0,al(g,!1),o.lanes=4194304);g.isBackwards?(m.sibling=o.child,o.child=m):(i=g.last,i!==null?i.sibling=m:o.child=m,g.last=m)}return g.tail!==null?(o=g.tail,g.rendering=o,g.tail=o.sibling,g.renderingStartTime=dn(),o.sibling=null,i=jt.current,se(jt,f?i&1|2:i&1),o):(Et(o),null);case 22:case 23:return xi(o),Gp(),f=o.memoizedState!==null,i!==null?i.memoizedState!==null!==f&&(o.flags|=8192):f&&(o.flags|=8192),f?(c&536870912)!==0&&(o.flags&128)===0&&(Et(o),o.subtreeFlags&6&&(o.flags|=8192)):Et(o),c=o.updateQueue,c!==null&&If(o,c.retryQueue),c=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),f=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(f=o.memoizedState.cachePool.pool),f!==c&&(o.flags|=2048),i!==null&&J(ro),null;case 24:return c=null,i!==null&&(c=i.memoizedState.cache),o.memoizedState.cache!==c&&(o.flags|=2048),Ri(Lt),Et(o),null;case 25:return null;case 30:return null}throw Error(r(156,o.tag))}function MI(i,o){switch(Np(o),o.tag){case 1:return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return Ri(Lt),xe(),i=o.flags,(i&65536)!==0&&(i&128)===0?(o.flags=i&-65537|128,o):null;case 26:case 27:case 5:return bt(o),null;case 13:if(xi(o),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(r(340));Vc()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return J(jt),null;case 4:return xe(),null;case 10:return Ri(o.type),null;case 22:case 23:return xi(o),Gp(),i!==null&&J(ro),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 24:return Ri(Lt),null;case 25:return null;default:return null}}function v1(i,o){switch(Np(o),o.tag){case 3:Ri(Lt),xe();break;case 26:case 27:case 5:bt(o);break;case 4:xe();break;case 13:xi(o);break;case 19:J(jt);break;case 10:Ri(o.type);break;case 22:case 23:xi(o),Gp(),i!==null&&J(ro);break;case 24:Ri(Lt)}}function cl(i,o){try{var c=o.updateQueue,f=c!==null?c.lastEffect:null;if(f!==null){var g=f.next;c=g;do{if((c.tag&i)===i){f=void 0;var m=c.create,x=c.inst;f=m(),x.destroy=f}c=c.next}while(c!==g)}}catch(B){at(o,o.return,B)}}function ls(i,o,c){try{var f=o.updateQueue,g=f!==null?f.lastEffect:null;if(g!==null){var m=g.next;f=m;do{if((f.tag&i)===i){var x=f.inst,B=x.destroy;if(B!==void 0){x.destroy=void 0,g=o;var j=c,te=B;try{te()}catch(ue){at(g,j,ue)}}}f=f.next}while(f!==m)}}catch(ue){at(o,o.return,ue)}}function E1(i){var o=i.updateQueue;if(o!==null){var c=i.stateNode;try{cv(o,c)}catch(f){at(i,i.return,f)}}}function _1(i,o,c){c.props=so(i.type,i.memoizedProps),c.state=i.memoizedState;try{c.componentWillUnmount()}catch(f){at(i,o,f)}}function ll(i,o){try{var c=i.ref;if(c!==null){switch(i.tag){case 26:case 27:case 5:var f=i.stateNode;break;case 30:f=i.stateNode;break;default:f=i.stateNode}typeof c=="function"?i.refCleanup=c(f):c.current=f}}catch(g){at(i,o,g)}}function Wr(i,o){var c=i.ref,f=i.refCleanup;if(c!==null)if(typeof f=="function")try{f()}catch(g){at(i,o,g)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(g){at(i,o,g)}else c.current=null}function S1(i){var o=i.type,c=i.memoizedProps,f=i.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":c.autoFocus&&f.focus();break e;case"img":c.src?f.src=c.src:c.srcSet&&(f.srcset=c.srcSet)}}catch(g){at(i,i.return,g)}}function vg(i,o,c){try{var f=i.stateNode;s8(f,i.type,c,o),f[In]=o}catch(g){at(i,i.return,g)}}function A1(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&ms(i.type)||i.tag===4}function Eg(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||A1(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&ms(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function _g(i,o,c){var f=i.tag;if(f===5||f===6)i=i.stateNode,o?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(i,o):(o=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,o.appendChild(i),c=c._reactRootContainer,c!=null||o.onclick!==null||(o.onclick=qf));else if(f!==4&&(f===27&&ms(i.type)&&(c=i.stateNode,o=null),i=i.child,i!==null))for(_g(i,o,c),i=i.sibling;i!==null;)_g(i,o,c),i=i.sibling}function Cf(i,o,c){var f=i.tag;if(f===5||f===6)i=i.stateNode,o?c.insertBefore(i,o):c.appendChild(i);else if(f!==4&&(f===27&&ms(i.type)&&(c=i.stateNode),i=i.child,i!==null))for(Cf(i,o,c),i=i.sibling;i!==null;)Cf(i,o,c),i=i.sibling}function R1(i){var o=i.stateNode,c=i.memoizedProps;try{for(var f=i.type,g=o.attributes;g.length;)o.removeAttributeNode(g[0]);nn(o,f,c),o[pn]=i,o[In]=c}catch(m){at(i,i.return,m)}}var Ii=!1,Dt=!1,Sg=!1,O1=typeof WeakSet=="function"?WeakSet:Set,Kt=null;function LI(i,o){if(i=i.containerInfo,Kg=Wf,i=kw(i),Ep(i)){if("selectionStart"in i)var c={start:i.selectionStart,end:i.selectionEnd};else e:{c=(c=i.ownerDocument)&&c.defaultView||window;var f=c.getSelection&&c.getSelection();if(f&&f.rangeCount!==0){c=f.anchorNode;var g=f.anchorOffset,m=f.focusNode;f=f.focusOffset;try{c.nodeType,m.nodeType}catch{c=null;break e}var x=0,B=-1,j=-1,te=0,ue=0,pe=i,ie=null;t:for(;;){for(var oe;pe!==c||g!==0&&pe.nodeType!==3||(B=x+g),pe!==m||f!==0&&pe.nodeType!==3||(j=x+f),pe.nodeType===3&&(x+=pe.nodeValue.length),(oe=pe.firstChild)!==null;)ie=pe,pe=oe;for(;;){if(pe===i)break t;if(ie===c&&++te===g&&(B=x),ie===m&&++ue===f&&(j=x),(oe=pe.nextSibling)!==null)break;pe=ie,ie=pe.parentNode}pe=oe}c=B===-1||j===-1?null:{start:B,end:j}}else c=null}c=c||{start:0,end:0}}else c=null;for(Yg={focusedElem:i,selectionRange:c},Wf=!1,Kt=o;Kt!==null;)if(o=Kt,i=o.child,(o.subtreeFlags&1024)!==0&&i!==null)i.return=o,Kt=i;else for(;Kt!==null;){switch(o=Kt,m=o.alternate,i=o.flags,o.tag){case 0:break;case 11:case 15:break;case 1:if((i&1024)!==0&&m!==null){i=void 0,c=o,g=m.memoizedProps,m=m.memoizedState,f=c.stateNode;try{var Te=so(c.type,g,c.elementType===c.type);i=f.getSnapshotBeforeUpdate(Te,m),f.__reactInternalSnapshotBeforeUpdate=i}catch(Re){at(c,c.return,Re)}}break;case 3:if((i&1024)!==0){if(i=o.stateNode.containerInfo,c=i.nodeType,c===9)Zg(i);else if(c===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":Zg(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(r(163))}if(i=o.sibling,i!==null){i.return=o.return,Kt=i;break}Kt=o.return}}function x1(i,o,c){var f=c.flags;switch(c.tag){case 0:case 11:case 15:us(i,c),f&4&&cl(5,c);break;case 1:if(us(i,c),f&4)if(i=c.stateNode,o===null)try{i.componentDidMount()}catch(x){at(c,c.return,x)}else{var g=so(c.type,o.memoizedProps);o=o.memoizedState;try{i.componentDidUpdate(g,o,i.__reactInternalSnapshotBeforeUpdate)}catch(x){at(c,c.return,x)}}f&64&&E1(c),f&512&&ll(c,c.return);break;case 3:if(us(i,c),f&64&&(i=c.updateQueue,i!==null)){if(o=null,c.child!==null)switch(c.child.tag){case 27:case 5:o=c.child.stateNode;break;case 1:o=c.child.stateNode}try{cv(i,o)}catch(x){at(c,c.return,x)}}break;case 27:o===null&&f&4&&R1(c);case 26:case 5:us(i,c),o===null&&f&4&&S1(c),f&512&&ll(c,c.return);break;case 12:us(i,c);break;case 13:us(i,c),f&4&&I1(i,c),f&64&&(i=c.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(c=YI.bind(null,c),h8(i,c))));break;case 22:if(f=c.memoizedState!==null||Ii,!f){o=o!==null&&o.memoizedState!==null||Dt,g=Ii;var m=Dt;Ii=f,(Dt=o)&&!m?fs(i,c,(c.subtreeFlags&8772)!==0):us(i,c),Ii=g,Dt=m}break;case 30:break;default:us(i,c)}}function T1(i){var o=i.alternate;o!==null&&(i.alternate=null,T1(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&np(o)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var wt=null,Un=!1;function Ci(i,o,c){for(c=c.child;c!==null;)D1(i,o,c),c=c.sibling}function D1(i,o,c){if(N&&typeof N.onCommitFiberUnmount=="function")try{N.onCommitFiberUnmount(Gr,c)}catch{}switch(c.tag){case 26:Dt||Wr(c,o),Ci(i,o,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:Dt||Wr(c,o);var f=wt,g=Un;ms(c.type)&&(wt=c.stateNode,Un=!1),Ci(i,o,c),bl(c.stateNode),wt=f,Un=g;break;case 5:Dt||Wr(c,o);case 6:if(f=wt,g=Un,wt=null,Ci(i,o,c),wt=f,Un=g,wt!==null)if(Un)try{(wt.nodeType===9?wt.body:wt.nodeName==="HTML"?wt.ownerDocument.body:wt).removeChild(c.stateNode)}catch(m){at(c,o,m)}else try{wt.removeChild(c.stateNode)}catch(m){at(c,o,m)}break;case 18:wt!==null&&(Un?(i=wt,mE(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,c.stateNode),Ol(i)):mE(wt,c.stateNode));break;case 4:f=wt,g=Un,wt=c.stateNode.containerInfo,Un=!0,Ci(i,o,c),wt=f,Un=g;break;case 0:case 11:case 14:case 15:Dt||ls(2,c,o),Dt||ls(4,c,o),Ci(i,o,c);break;case 1:Dt||(Wr(c,o),f=c.stateNode,typeof f.componentWillUnmount=="function"&&_1(c,o,f)),Ci(i,o,c);break;case 21:Ci(i,o,c);break;case 22:Dt=(f=Dt)||c.memoizedState!==null,Ci(i,o,c),Dt=f;break;default:Ci(i,o,c)}}function I1(i,o){if(o.memoizedState===null&&(i=o.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Ol(i)}catch(c){at(o,o.return,c)}}function jI(i){switch(i.tag){case 13:case 19:var o=i.stateNode;return o===null&&(o=i.stateNode=new O1),o;case 22:return i=i.stateNode,o=i._retryCache,o===null&&(o=i._retryCache=new O1),o;default:throw Error(r(435,i.tag))}}function Ag(i,o){var c=jI(i);o.forEach(function(f){var g=WI.bind(null,i,f);c.has(f)||(c.add(f),f.then(g,g))})}function Jn(i,o){var c=o.deletions;if(c!==null)for(var f=0;f<c.length;f++){var g=c[f],m=i,x=o,B=x;e:for(;B!==null;){switch(B.tag){case 27:if(ms(B.type)){wt=B.stateNode,Un=!1;break e}break;case 5:wt=B.stateNode,Un=!1;break e;case 3:case 4:wt=B.stateNode.containerInfo,Un=!0;break e}B=B.return}if(wt===null)throw Error(r(160));D1(m,x,g),wt=null,Un=!1,m=g.alternate,m!==null&&(m.return=null),g.return=null}if(o.subtreeFlags&13878)for(o=o.child;o!==null;)C1(o,i),o=o.sibling}var Ur=null;function C1(i,o){var c=i.alternate,f=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:Jn(o,i),er(i),f&4&&(ls(3,i,i.return),cl(3,i),ls(5,i,i.return));break;case 1:Jn(o,i),er(i),f&512&&(Dt||c===null||Wr(c,c.return)),f&64&&Ii&&(i=i.updateQueue,i!==null&&(f=i.callbacks,f!==null&&(c=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=c===null?f:c.concat(f))));break;case 26:var g=Ur;if(Jn(o,i),er(i),f&512&&(Dt||c===null||Wr(c,c.return)),f&4){var m=c!==null?c.memoizedState:null;if(f=i.memoizedState,c===null)if(f===null)if(i.stateNode===null){e:{f=i.type,c=i.memoizedProps,g=g.ownerDocument||g;t:switch(f){case"title":m=g.getElementsByTagName("title")[0],(!m||m[Uc]||m[pn]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=g.createElement(f),g.head.insertBefore(m,g.querySelector("head > title"))),nn(m,f,c),m[pn]=i,Vt(m),f=m;break e;case"link":var x=RE("link","href",g).get(f+(c.href||""));if(x){for(var B=0;B<x.length;B++)if(m=x[B],m.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&m.getAttribute("rel")===(c.rel==null?null:c.rel)&&m.getAttribute("title")===(c.title==null?null:c.title)&&m.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){x.splice(B,1);break t}}m=g.createElement(f),nn(m,f,c),g.head.appendChild(m);break;case"meta":if(x=RE("meta","content",g).get(f+(c.content||""))){for(B=0;B<x.length;B++)if(m=x[B],m.getAttribute("content")===(c.content==null?null:""+c.content)&&m.getAttribute("name")===(c.name==null?null:c.name)&&m.getAttribute("property")===(c.property==null?null:c.property)&&m.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&m.getAttribute("charset")===(c.charSet==null?null:c.charSet)){x.splice(B,1);break t}}m=g.createElement(f),nn(m,f,c),g.head.appendChild(m);break;default:throw Error(r(468,f))}m[pn]=i,Vt(m),f=m}i.stateNode=f}else OE(g,i.type,i.stateNode);else i.stateNode=AE(g,f,i.memoizedProps);else m!==f?(m===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):m.count--,f===null?OE(g,i.type,i.stateNode):AE(g,f,i.memoizedProps)):f===null&&i.stateNode!==null&&vg(i,i.memoizedProps,c.memoizedProps)}break;case 27:Jn(o,i),er(i),f&512&&(Dt||c===null||Wr(c,c.return)),c!==null&&f&4&&vg(i,i.memoizedProps,c.memoizedProps);break;case 5:if(Jn(o,i),er(i),f&512&&(Dt||c===null||Wr(c,c.return)),i.flags&32){g=i.stateNode;try{sa(g,"")}catch(oe){at(i,i.return,oe)}}f&4&&i.stateNode!=null&&(g=i.memoizedProps,vg(i,g,c!==null?c.memoizedProps:g)),f&1024&&(Sg=!0);break;case 6:if(Jn(o,i),er(i),f&4){if(i.stateNode===null)throw Error(r(162));f=i.memoizedProps,c=i.stateNode;try{c.nodeValue=f}catch(oe){at(i,i.return,oe)}}break;case 3:if(Gf=null,g=Ur,Ur=Ff(o.containerInfo),Jn(o,i),Ur=g,er(i),f&4&&c!==null&&c.memoizedState.isDehydrated)try{Ol(o.containerInfo)}catch(oe){at(i,i.return,oe)}Sg&&(Sg=!1,N1(i));break;case 4:f=Ur,Ur=Ff(i.stateNode.containerInfo),Jn(o,i),er(i),Ur=f;break;case 12:Jn(o,i),er(i);break;case 13:Jn(o,i),er(i),i.child.flags&8192&&i.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(Ig=dn()),f&4&&(f=i.updateQueue,f!==null&&(i.updateQueue=null,Ag(i,f)));break;case 22:g=i.memoizedState!==null;var j=c!==null&&c.memoizedState!==null,te=Ii,ue=Dt;if(Ii=te||g,Dt=ue||j,Jn(o,i),Dt=ue,Ii=te,er(i),f&8192)e:for(o=i.stateNode,o._visibility=g?o._visibility&-2:o._visibility|1,g&&(c===null||j||Ii||Dt||oo(i)),c=null,o=i;;){if(o.tag===5||o.tag===26){if(c===null){j=c=o;try{if(m=j.stateNode,g)x=m.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none";else{B=j.stateNode;var pe=j.memoizedProps.style,ie=pe!=null&&pe.hasOwnProperty("display")?pe.display:null;B.style.display=ie==null||typeof ie=="boolean"?"":(""+ie).trim()}}catch(oe){at(j,j.return,oe)}}}else if(o.tag===6){if(c===null){j=o;try{j.stateNode.nodeValue=g?"":j.memoizedProps}catch(oe){at(j,j.return,oe)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===i)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break e;for(;o.sibling===null;){if(o.return===null||o.return===i)break e;c===o&&(c=null),o=o.return}c===o&&(c=null),o.sibling.return=o.return,o=o.sibling}f&4&&(f=i.updateQueue,f!==null&&(c=f.retryQueue,c!==null&&(f.retryQueue=null,Ag(i,c))));break;case 19:Jn(o,i),er(i),f&4&&(f=i.updateQueue,f!==null&&(i.updateQueue=null,Ag(i,f)));break;case 30:break;case 21:break;default:Jn(o,i),er(i)}}function er(i){var o=i.flags;if(o&2){try{for(var c,f=i.return;f!==null;){if(A1(f)){c=f;break}f=f.return}if(c==null)throw Error(r(160));switch(c.tag){case 27:var g=c.stateNode,m=Eg(i);Cf(i,m,g);break;case 5:var x=c.stateNode;c.flags&32&&(sa(x,""),c.flags&=-33);var B=Eg(i);Cf(i,B,x);break;case 3:case 4:var j=c.stateNode.containerInfo,te=Eg(i);_g(i,te,j);break;default:throw Error(r(161))}}catch(ue){at(i,i.return,ue)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function N1(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var o=i;N1(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),i=i.sibling}}function us(i,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)x1(i,o.alternate,o),o=o.sibling}function oo(i){for(i=i.child;i!==null;){var o=i;switch(o.tag){case 0:case 11:case 14:case 15:ls(4,o,o.return),oo(o);break;case 1:Wr(o,o.return);var c=o.stateNode;typeof c.componentWillUnmount=="function"&&_1(o,o.return,c),oo(o);break;case 27:bl(o.stateNode);case 26:case 5:Wr(o,o.return),oo(o);break;case 22:o.memoizedState===null&&oo(o);break;case 30:oo(o);break;default:oo(o)}i=i.sibling}}function fs(i,o,c){for(c=c&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var f=o.alternate,g=i,m=o,x=m.flags;switch(m.tag){case 0:case 11:case 15:fs(g,m,c),cl(4,m);break;case 1:if(fs(g,m,c),f=m,g=f.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(te){at(f,f.return,te)}if(f=m,g=f.updateQueue,g!==null){var B=f.stateNode;try{var j=g.shared.hiddenCallbacks;if(j!==null)for(g.shared.hiddenCallbacks=null,g=0;g<j.length;g++)av(j[g],B)}catch(te){at(f,f.return,te)}}c&&x&64&&E1(m),ll(m,m.return);break;case 27:R1(m);case 26:case 5:fs(g,m,c),c&&f===null&&x&4&&S1(m),ll(m,m.return);break;case 12:fs(g,m,c);break;case 13:fs(g,m,c),c&&x&4&&I1(g,m);break;case 22:m.memoizedState===null&&fs(g,m,c),ll(m,m.return);break;case 30:break;default:fs(g,m,c)}o=o.sibling}}function Rg(i,o){var c=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),i=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(i=o.memoizedState.cachePool.pool),i!==c&&(i!=null&&i.refCount++,c!=null&&Yc(c))}function Og(i,o){i=null,o.alternate!==null&&(i=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==i&&(o.refCount++,i!=null&&Yc(i))}function Xr(i,o,c,f){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)U1(i,o,c,f),o=o.sibling}function U1(i,o,c,f){var g=o.flags;switch(o.tag){case 0:case 11:case 15:Xr(i,o,c,f),g&2048&&cl(9,o);break;case 1:Xr(i,o,c,f);break;case 3:Xr(i,o,c,f),g&2048&&(i=null,o.alternate!==null&&(i=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==i&&(o.refCount++,i!=null&&Yc(i)));break;case 12:if(g&2048){Xr(i,o,c,f),i=o.stateNode;try{var m=o.memoizedProps,x=m.id,B=m.onPostCommit;typeof B=="function"&&B(x,o.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(j){at(o,o.return,j)}}else Xr(i,o,c,f);break;case 13:Xr(i,o,c,f);break;case 23:break;case 22:m=o.stateNode,x=o.alternate,o.memoizedState!==null?m._visibility&2?Xr(i,o,c,f):ul(i,o):m._visibility&2?Xr(i,o,c,f):(m._visibility|=2,Aa(i,o,c,f,(o.subtreeFlags&10256)!==0)),g&2048&&Rg(x,o);break;case 24:Xr(i,o,c,f),g&2048&&Og(o.alternate,o);break;default:Xr(i,o,c,f)}}function Aa(i,o,c,f,g){for(g=g&&(o.subtreeFlags&10256)!==0,o=o.child;o!==null;){var m=i,x=o,B=c,j=f,te=x.flags;switch(x.tag){case 0:case 11:case 15:Aa(m,x,B,j,g),cl(8,x);break;case 23:break;case 22:var ue=x.stateNode;x.memoizedState!==null?ue._visibility&2?Aa(m,x,B,j,g):ul(m,x):(ue._visibility|=2,Aa(m,x,B,j,g)),g&&te&2048&&Rg(x.alternate,x);break;case 24:Aa(m,x,B,j,g),g&&te&2048&&Og(x.alternate,x);break;default:Aa(m,x,B,j,g)}o=o.sibling}}function ul(i,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var c=i,f=o,g=f.flags;switch(f.tag){case 22:ul(c,f),g&2048&&Rg(f.alternate,f);break;case 24:ul(c,f),g&2048&&Og(f.alternate,f);break;default:ul(c,f)}o=o.sibling}}var fl=8192;function Ra(i){if(i.subtreeFlags&fl)for(i=i.child;i!==null;)B1(i),i=i.sibling}function B1(i){switch(i.tag){case 26:Ra(i),i.flags&fl&&i.memoizedState!==null&&R8(Ur,i.memoizedState,i.memoizedProps);break;case 5:Ra(i);break;case 3:case 4:var o=Ur;Ur=Ff(i.stateNode.containerInfo),Ra(i),Ur=o;break;case 22:i.memoizedState===null&&(o=i.alternate,o!==null&&o.memoizedState!==null?(o=fl,fl=16777216,Ra(i),fl=o):Ra(i));break;default:Ra(i)}}function $1(i){var o=i.alternate;if(o!==null&&(i=o.child,i!==null)){o.child=null;do o=i.sibling,i.sibling=null,i=o;while(i!==null)}}function hl(i){var o=i.deletions;if((i.flags&16)!==0){if(o!==null)for(var c=0;c<o.length;c++){var f=o[c];Kt=f,k1(f,i)}$1(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)P1(i),i=i.sibling}function P1(i){switch(i.tag){case 0:case 11:case 15:hl(i),i.flags&2048&&ls(9,i,i.return);break;case 3:hl(i);break;case 12:hl(i);break;case 22:var o=i.stateNode;i.memoizedState!==null&&o._visibility&2&&(i.return===null||i.return.tag!==13)?(o._visibility&=-3,Nf(i)):hl(i);break;default:hl(i)}}function Nf(i){var o=i.deletions;if((i.flags&16)!==0){if(o!==null)for(var c=0;c<o.length;c++){var f=o[c];Kt=f,k1(f,i)}$1(i)}for(i=i.child;i!==null;){switch(o=i,o.tag){case 0:case 11:case 15:ls(8,o,o.return),Nf(o);break;case 22:c=o.stateNode,c._visibility&2&&(c._visibility&=-3,Nf(o));break;default:Nf(o)}i=i.sibling}}function k1(i,o){for(;Kt!==null;){var c=Kt;switch(c.tag){case 0:case 11:case 15:ls(8,c,o);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var f=c.memoizedState.cachePool.pool;f!=null&&f.refCount++}break;case 24:Yc(c.memoizedState.cache)}if(f=c.child,f!==null)f.return=c,Kt=f;else e:for(c=i;Kt!==null;){f=Kt;var g=f.sibling,m=f.return;if(T1(f),f===c){Kt=null;break e}if(g!==null){g.return=m,Kt=g;break e}Kt=m}}}var zI={getCacheForType:function(i){var o=gn(Lt),c=o.data.get(i);return c===void 0&&(c=i(),o.data.set(i,c)),c}},qI=typeof WeakMap=="function"?WeakMap:Map,Qe=0,dt=null,Pe=null,ze=0,Je=0,tr=null,hs=!1,Oa=!1,xg=!1,Ni=0,At=0,ds=0,ao=0,Tg=0,wr=0,xa=0,dl=null,Bn=null,Dg=!1,Ig=0,Uf=1/0,Bf=null,ps=null,tn=0,gs=null,Ta=null,Da=0,Cg=0,Ng=null,M1=null,pl=0,Ug=null;function nr(){if((Qe&2)!==0&&ze!==0)return ze&-ze;if(O.T!==null){var i=ya;return i!==0?i:jg()}return ew()}function L1(){wr===0&&(wr=(ze&536870912)===0||Ke?Xb():536870912);var i=br.current;return i!==null&&(i.flags|=32),wr}function rr(i,o,c){(i===dt&&(Je===2||Je===9)||i.cancelPendingCommit!==null)&&(Ia(i,0),ys(i,ze,wr,!1)),Nc(i,c),((Qe&2)===0||i!==dt)&&(i===dt&&((Qe&2)===0&&(ao|=c),At===4&&ys(i,ze,wr,!1)),Zr(i))}function j1(i,o,c){if((Qe&6)!==0)throw Error(r(327));var f=!c&&(o&124)===0&&(o&i.expiredLanes)===0||rt(i,o),g=f?VI(i,o):Pg(i,o,!0),m=f;do{if(g===0){Oa&&!f&&ys(i,o,0,!1);break}else{if(c=i.current.alternate,m&&!HI(c)){g=Pg(i,o,!1),m=!1;continue}if(g===2){if(m=o,i.errorRecoveryDisabledLanes&m)var x=0;else x=i.pendingLanes&-536870913,x=x!==0?x:x&536870912?536870912:0;if(x!==0){o=x;e:{var B=i;g=dl;var j=B.current.memoizedState.isDehydrated;if(j&&(Ia(B,x).flags|=256),x=Pg(B,x,!1),x!==2){if(xg&&!j){B.errorRecoveryDisabledLanes|=m,ao|=m,g=4;break e}m=Bn,Bn=g,m!==null&&(Bn===null?Bn=m:Bn.push.apply(Bn,m))}g=x}if(m=!1,g!==2)continue}}if(g===1){Ia(i,0),ys(i,o,0,!0);break}e:{switch(f=i,m=g,m){case 0:case 1:throw Error(r(345));case 4:if((o&4194048)!==o)break;case 6:ys(f,o,wr,!hs);break e;case 2:Bn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((o&62914560)===o&&(g=Ig+300-dn(),10<g)){if(ys(f,o,wr,!hs),Xe(f,0,!0)!==0)break e;f.timeoutHandle=gE(z1.bind(null,f,c,Bn,Bf,Dg,o,wr,ao,xa,hs,m,2,-0,0),g);break e}z1(f,c,Bn,Bf,Dg,o,wr,ao,xa,hs,m,0,-0,0)}}break}while(!0);Zr(i)}function z1(i,o,c,f,g,m,x,B,j,te,ue,pe,ie,oe){if(i.timeoutHandle=-1,pe=o.subtreeFlags,(pe&8192||(pe&16785408)===16785408)&&(El={stylesheets:null,count:0,unsuspend:A8},B1(o),pe=O8(),pe!==null)){i.cancelPendingCommit=pe(Y1.bind(null,i,o,m,c,f,g,x,B,j,ue,1,ie,oe)),ys(i,m,x,!te);return}Y1(i,o,m,c,f,g,x,B,j)}function HI(i){for(var o=i;;){var c=o.tag;if((c===0||c===11||c===15)&&o.flags&16384&&(c=o.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var f=0;f<c.length;f++){var g=c[f],m=g.getSnapshot;g=g.value;try{if(!Zn(m(),g))return!1}catch{return!1}}if(c=o.child,o.subtreeFlags&16384&&c!==null)c.return=o,o=c;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function ys(i,o,c,f){o&=~Tg,o&=~ao,i.suspendedLanes|=o,i.pingedLanes&=~o,f&&(i.warmLanes|=o),f=i.expirationTimes;for(var g=o;0<g;){var m=31-A(g),x=1<<m;f[m]=-1,g&=~x}c!==0&&Qb(i,c,o)}function $f(){return(Qe&6)===0?(gl(0),!1):!0}function Bg(){if(Pe!==null){if(Je===0)var i=Pe.return;else i=Pe,Ai=to=null,Zp(i),_a=null,sl=0,i=Pe;for(;i!==null;)v1(i.alternate,i),i=i.return;Pe=null}}function Ia(i,o){var c=i.timeoutHandle;c!==-1&&(i.timeoutHandle=-1,a8(c)),c=i.cancelPendingCommit,c!==null&&(i.cancelPendingCommit=null,c()),Bg(),dt=i,Pe=c=Ei(i.current,null),ze=o,Je=0,tr=null,hs=!1,Oa=rt(i,o),xg=!1,xa=wr=Tg=ao=ds=At=0,Bn=dl=null,Dg=!1,(o&8)!==0&&(o|=o&32);var f=i.entangledLanes;if(f!==0)for(i=i.entanglements,f&=o;0<f;){var g=31-A(f),m=1<<g;o|=i[g],f&=~m}return Ni=o,nf(),c}function q1(i,o){Be=null,O.H=_f,o===Xc||o===hf?(o=sv(),Je=3):o===nv?(o=sv(),Je=4):Je=o===o1?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,tr=o,Pe===null&&(At=1,xf(i,pr(o,i.current)))}function H1(){var i=O.H;return O.H=_f,i===null?_f:i}function F1(){var i=O.A;return O.A=zI,i}function $g(){At=4,hs||(ze&4194048)!==ze&&br.current!==null||(Oa=!0),(ds&134217727)===0&&(ao&134217727)===0||dt===null||ys(dt,ze,wr,!1)}function Pg(i,o,c){var f=Qe;Qe|=2;var g=H1(),m=F1();(dt!==i||ze!==o)&&(Bf=null,Ia(i,o)),o=!1;var x=At;e:do try{if(Je!==0&&Pe!==null){var B=Pe,j=tr;switch(Je){case 8:Bg(),x=6;break e;case 3:case 2:case 9:case 6:br.current===null&&(o=!0);var te=Je;if(Je=0,tr=null,Ca(i,B,j,te),c&&Oa){x=0;break e}break;default:te=Je,Je=0,tr=null,Ca(i,B,j,te)}}FI(),x=At;break}catch(ue){q1(i,ue)}while(!0);return o&&i.shellSuspendCounter++,Ai=to=null,Qe=f,O.H=g,O.A=m,Pe===null&&(dt=null,ze=0,nf()),x}function FI(){for(;Pe!==null;)V1(Pe)}function VI(i,o){var c=Qe;Qe|=2;var f=H1(),g=F1();dt!==i||ze!==o?(Bf=null,Uf=dn()+500,Ia(i,o)):Oa=rt(i,o);e:do try{if(Je!==0&&Pe!==null){o=Pe;var m=tr;t:switch(Je){case 1:Je=0,tr=null,Ca(i,o,m,1);break;case 2:case 9:if(rv(m)){Je=0,tr=null,G1(o);break}o=function(){Je!==2&&Je!==9||dt!==i||(Je=7),Zr(i)},m.then(o,o);break e;case 3:Je=7;break e;case 4:Je=5;break e;case 7:rv(m)?(Je=0,tr=null,G1(o)):(Je=0,tr=null,Ca(i,o,m,7));break;case 5:var x=null;switch(Pe.tag){case 26:x=Pe.memoizedState;case 5:case 27:var B=Pe;if(!x||xE(x)){Je=0,tr=null;var j=B.sibling;if(j!==null)Pe=j;else{var te=B.return;te!==null?(Pe=te,Pf(te)):Pe=null}break t}}Je=0,tr=null,Ca(i,o,m,5);break;case 6:Je=0,tr=null,Ca(i,o,m,6);break;case 8:Bg(),At=6;break e;default:throw Error(r(462))}}GI();break}catch(ue){q1(i,ue)}while(!0);return Ai=to=null,O.H=f,O.A=g,Qe=c,Pe!==null?0:(dt=null,ze=0,nf(),At)}function GI(){for(;Pe!==null&&!Fs();)V1(Pe)}function V1(i){var o=b1(i.alternate,i,Ni);i.memoizedProps=i.pendingProps,o===null?Pf(i):Pe=o}function G1(i){var o=i,c=o.alternate;switch(o.tag){case 15:case 0:o=h1(c,o,o.pendingProps,o.type,void 0,ze);break;case 11:o=h1(c,o,o.pendingProps,o.type.render,o.ref,ze);break;case 5:Zp(o);default:v1(c,o),o=Pe=Kw(o,Ni),o=b1(c,o,Ni)}i.memoizedProps=i.pendingProps,o===null?Pf(i):Pe=o}function Ca(i,o,c,f){Ai=to=null,Zp(o),_a=null,sl=0;var g=o.return;try{if($I(i,g,o,c,ze)){At=1,xf(i,pr(c,i.current)),Pe=null;return}}catch(m){if(g!==null)throw Pe=g,m;At=1,xf(i,pr(c,i.current)),Pe=null;return}o.flags&32768?(Ke||f===1?i=!0:Oa||(ze&536870912)!==0?i=!1:(hs=i=!0,(f===2||f===9||f===3||f===6)&&(f=br.current,f!==null&&f.tag===13&&(f.flags|=16384))),K1(o,i)):Pf(o)}function Pf(i){var o=i;do{if((o.flags&32768)!==0){K1(o,hs);return}i=o.return;var c=kI(o.alternate,o,Ni);if(c!==null){Pe=c;return}if(o=o.sibling,o!==null){Pe=o;return}Pe=o=i}while(o!==null);At===0&&(At=5)}function K1(i,o){do{var c=MI(i.alternate,i);if(c!==null){c.flags&=32767,Pe=c;return}if(c=i.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!o&&(i=i.sibling,i!==null)){Pe=i;return}Pe=i=c}while(i!==null);At=6,Pe=null}function Y1(i,o,c,f,g,m,x,B,j){i.cancelPendingCommit=null;do kf();while(tn!==0);if((Qe&6)!==0)throw Error(r(327));if(o!==null){if(o===i.current)throw Error(r(177));if(m=o.lanes|o.childLanes,m|=Op,AD(i,c,m,x,B,j),i===dt&&(Pe=dt=null,ze=0),Ta=o,gs=i,Da=c,Cg=m,Ng=g,M1=f,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,XI(Wn,function(){return J1(),null})):(i.callbackNode=null,i.callbackPriority=0),f=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||f){f=O.T,O.T=null,g=M.p,M.p=2,x=Qe,Qe|=4;try{LI(i,o,c)}finally{Qe=x,M.p=g,O.T=f}}tn=1,W1(),X1(),Z1()}}function W1(){if(tn===1){tn=0;var i=gs,o=Ta,c=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||c){c=O.T,O.T=null;var f=M.p;M.p=2;var g=Qe;Qe|=4;try{C1(o,i);var m=Yg,x=kw(i.containerInfo),B=m.focusedElem,j=m.selectionRange;if(x!==B&&B&&B.ownerDocument&&Pw(B.ownerDocument.documentElement,B)){if(j!==null&&Ep(B)){var te=j.start,ue=j.end;if(ue===void 0&&(ue=te),"selectionStart"in B)B.selectionStart=te,B.selectionEnd=Math.min(ue,B.value.length);else{var pe=B.ownerDocument||document,ie=pe&&pe.defaultView||window;if(ie.getSelection){var oe=ie.getSelection(),Te=B.textContent.length,Re=Math.min(j.start,Te),ot=j.end===void 0?Re:Math.min(j.end,Te);!oe.extend&&Re>ot&&(x=ot,ot=Re,Re=x);var Z=$w(B,Re),W=$w(B,ot);if(Z&&W&&(oe.rangeCount!==1||oe.anchorNode!==Z.node||oe.anchorOffset!==Z.offset||oe.focusNode!==W.node||oe.focusOffset!==W.offset)){var ee=pe.createRange();ee.setStart(Z.node,Z.offset),oe.removeAllRanges(),Re>ot?(oe.addRange(ee),oe.extend(W.node,W.offset)):(ee.setEnd(W.node,W.offset),oe.addRange(ee))}}}}for(pe=[],oe=B;oe=oe.parentNode;)oe.nodeType===1&&pe.push({element:oe,left:oe.scrollLeft,top:oe.scrollTop});for(typeof B.focus=="function"&&B.focus(),B=0;B<pe.length;B++){var de=pe[B];de.element.scrollLeft=de.left,de.element.scrollTop=de.top}}Wf=!!Kg,Yg=Kg=null}finally{Qe=g,M.p=f,O.T=c}}i.current=o,tn=2}}function X1(){if(tn===2){tn=0;var i=gs,o=Ta,c=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||c){c=O.T,O.T=null;var f=M.p;M.p=2;var g=Qe;Qe|=4;try{x1(i,o.alternate,o)}finally{Qe=g,M.p=f,O.T=c}}tn=3}}function Z1(){if(tn===4||tn===3){tn=0,Ic();var i=gs,o=Ta,c=Da,f=M1;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?tn=5:(tn=0,Ta=gs=null,Q1(i,i.pendingLanes));var g=i.pendingLanes;if(g===0&&(ps=null),ep(c),o=o.stateNode,N&&typeof N.onCommitFiberRoot=="function")try{N.onCommitFiberRoot(Gr,o,void 0,(o.current.flags&128)===128)}catch{}if(f!==null){o=O.T,g=M.p,M.p=2,O.T=null;try{for(var m=i.onRecoverableError,x=0;x<f.length;x++){var B=f[x];m(B.value,{componentStack:B.stack})}}finally{O.T=o,M.p=g}}(Da&3)!==0&&kf(),Zr(i),g=i.pendingLanes,(c&4194090)!==0&&(g&42)!==0?i===Ug?pl++:(pl=0,Ug=i):pl=0,gl(0)}}function Q1(i,o){(i.pooledCacheLanes&=o)===0&&(o=i.pooledCache,o!=null&&(i.pooledCache=null,Yc(o)))}function kf(i){return W1(),X1(),Z1(),J1()}function J1(){if(tn!==5)return!1;var i=gs,o=Cg;Cg=0;var c=ep(Da),f=O.T,g=M.p;try{M.p=32>c?32:c,O.T=null,c=Ng,Ng=null;var m=gs,x=Da;if(tn=0,Ta=gs=null,Da=0,(Qe&6)!==0)throw Error(r(331));var B=Qe;if(Qe|=4,P1(m.current),U1(m,m.current,x,c),Qe=B,gl(0,!1),N&&typeof N.onPostCommitFiberRoot=="function")try{N.onPostCommitFiberRoot(Gr,m)}catch{}return!0}finally{M.p=g,O.T=f,Q1(i,o)}}function eE(i,o,c){o=pr(c,o),o=fg(i.stateNode,o,2),i=ss(i,o,2),i!==null&&(Nc(i,2),Zr(i))}function at(i,o,c){if(i.tag===3)eE(i,i,c);else for(;o!==null;){if(o.tag===3){eE(o,i,c);break}else if(o.tag===1){var f=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(ps===null||!ps.has(f))){i=pr(c,i),c=i1(2),f=ss(o,c,2),f!==null&&(s1(c,f,o,i),Nc(f,2),Zr(f));break}}o=o.return}}function kg(i,o,c){var f=i.pingCache;if(f===null){f=i.pingCache=new qI;var g=new Set;f.set(o,g)}else g=f.get(o),g===void 0&&(g=new Set,f.set(o,g));g.has(c)||(xg=!0,g.add(c),i=KI.bind(null,i,o,c),o.then(i,i))}function KI(i,o,c){var f=i.pingCache;f!==null&&f.delete(o),i.pingedLanes|=i.suspendedLanes&c,i.warmLanes&=~c,dt===i&&(ze&c)===c&&(At===4||At===3&&(ze&62914560)===ze&&300>dn()-Ig?(Qe&2)===0&&Ia(i,0):Tg|=c,xa===ze&&(xa=0)),Zr(i)}function tE(i,o){o===0&&(o=Zb()),i=ha(i,o),i!==null&&(Nc(i,o),Zr(i))}function YI(i){var o=i.memoizedState,c=0;o!==null&&(c=o.retryLane),tE(i,c)}function WI(i,o){var c=0;switch(i.tag){case 13:var f=i.stateNode,g=i.memoizedState;g!==null&&(c=g.retryLane);break;case 19:f=i.stateNode;break;case 22:f=i.stateNode._retryCache;break;default:throw Error(r(314))}f!==null&&f.delete(o),tE(i,c)}function XI(i,o){return _n(i,o)}var Mf=null,Na=null,Mg=!1,Lf=!1,Lg=!1,co=0;function Zr(i){i!==Na&&i.next===null&&(Na===null?Mf=Na=i:Na=Na.next=i),Lf=!0,Mg||(Mg=!0,QI())}function gl(i,o){if(!Lg&&Lf){Lg=!0;do for(var c=!1,f=Mf;f!==null;){if(i!==0){var g=f.pendingLanes;if(g===0)var m=0;else{var x=f.suspendedLanes,B=f.pingedLanes;m=(1<<31-A(42|i)+1)-1,m&=g&~(x&~B),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(c=!0,sE(f,m))}else m=ze,m=Xe(f,f===dt?m:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),(m&3)===0||rt(f,m)||(c=!0,sE(f,m));f=f.next}while(c);Lg=!1}}function ZI(){nE()}function nE(){Lf=Mg=!1;var i=0;co!==0&&(o8()&&(i=co),co=0);for(var o=dn(),c=null,f=Mf;f!==null;){var g=f.next,m=rE(f,o);m===0?(f.next=null,c===null?Mf=g:c.next=g,g===null&&(Na=c)):(c=f,(i!==0||(m&3)!==0)&&(Lf=!0)),f=g}gl(i)}function rE(i,o){for(var c=i.suspendedLanes,f=i.pingedLanes,g=i.expirationTimes,m=i.pendingLanes&-62914561;0<m;){var x=31-A(m),B=1<<x,j=g[x];j===-1?((B&c)===0||(B&f)!==0)&&(g[x]=Ze(B,o)):j<=o&&(i.expiredLanes|=B),m&=~B}if(o=dt,c=ze,c=Xe(i,i===o?c:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),f=i.callbackNode,c===0||i===o&&(Je===2||Je===9)||i.cancelPendingCommit!==null)return f!==null&&f!==null&&hn(f),i.callbackNode=null,i.callbackPriority=0;if((c&3)===0||rt(i,c)){if(o=c&-c,o===i.callbackPriority)return o;switch(f!==null&&hn(f),ep(c)){case 2:case 8:c=Ji;break;case 32:c=Wn;break;case 268435456:c=bi;break;default:c=Wn}return f=iE.bind(null,i),c=_n(c,f),i.callbackPriority=o,i.callbackNode=c,o}return f!==null&&f!==null&&hn(f),i.callbackPriority=2,i.callbackNode=null,2}function iE(i,o){if(tn!==0&&tn!==5)return i.callbackNode=null,i.callbackPriority=0,null;var c=i.callbackNode;if(kf()&&i.callbackNode!==c)return null;var f=ze;return f=Xe(i,i===dt?f:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),f===0?null:(j1(i,f,o),rE(i,dn()),i.callbackNode!=null&&i.callbackNode===c?iE.bind(null,i):null)}function sE(i,o){if(kf())return null;j1(i,o,!0)}function QI(){c8(function(){(Qe&6)!==0?_n(Vs,ZI):nE()})}function jg(){return co===0&&(co=Xb()),co}function oE(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Wu(""+i)}function aE(i,o){var c=o.ownerDocument.createElement("input");return c.name=o.name,c.value=o.value,i.id&&c.setAttribute("form",i.id),o.parentNode.insertBefore(c,o),i=new FormData(i),c.parentNode.removeChild(c),i}function JI(i,o,c,f,g){if(o==="submit"&&c&&c.stateNode===g){var m=oE((g[In]||null).action),x=f.submitter;x&&(o=(o=x[In]||null)?oE(o.formAction):x.getAttribute("formAction"),o!==null&&(m=o,x=null));var B=new Ju("action","action",null,f,g);i.push({event:B,listeners:[{instance:null,listener:function(){if(f.defaultPrevented){if(co!==0){var j=x?aE(g,x):new FormData(g);og(c,{pending:!0,data:j,method:g.method,action:m},null,j)}}else typeof m=="function"&&(B.preventDefault(),j=x?aE(g,x):new FormData(g),og(c,{pending:!0,data:j,method:g.method,action:m},m,j))},currentTarget:g}]})}}for(var zg=0;zg<Rp.length;zg++){var qg=Rp[zg],e8=qg.toLowerCase(),t8=qg[0].toUpperCase()+qg.slice(1);Nr(e8,"on"+t8)}Nr(jw,"onAnimationEnd"),Nr(zw,"onAnimationIteration"),Nr(qw,"onAnimationStart"),Nr("dblclick","onDoubleClick"),Nr("focusin","onFocus"),Nr("focusout","onBlur"),Nr(bI,"onTransitionRun"),Nr(wI,"onTransitionStart"),Nr(vI,"onTransitionCancel"),Nr(Hw,"onTransitionEnd"),na("onMouseEnter",["mouseout","mouseover"]),na("onMouseLeave",["mouseout","mouseover"]),na("onPointerEnter",["pointerout","pointerover"]),na("onPointerLeave",["pointerout","pointerover"]),Gs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Gs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Gs("onBeforeInput",["compositionend","keypress","textInput","paste"]),Gs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Gs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Gs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var yl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),n8=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(yl));function cE(i,o){o=(o&4)!==0;for(var c=0;c<i.length;c++){var f=i[c],g=f.event;f=f.listeners;e:{var m=void 0;if(o)for(var x=f.length-1;0<=x;x--){var B=f[x],j=B.instance,te=B.currentTarget;if(B=B.listener,j!==m&&g.isPropagationStopped())break e;m=B,g.currentTarget=te;try{m(g)}catch(ue){Of(ue)}g.currentTarget=null,m=j}else for(x=0;x<f.length;x++){if(B=f[x],j=B.instance,te=B.currentTarget,B=B.listener,j!==m&&g.isPropagationStopped())break e;m=B,g.currentTarget=te;try{m(g)}catch(ue){Of(ue)}g.currentTarget=null,m=j}}}}function ke(i,o){var c=o[tp];c===void 0&&(c=o[tp]=new Set);var f=i+"__bubble";c.has(f)||(lE(o,i,2,!1),c.add(f))}function Hg(i,o,c){var f=0;o&&(f|=4),lE(c,i,f,o)}var jf="_reactListening"+Math.random().toString(36).slice(2);function Fg(i){if(!i[jf]){i[jf]=!0,nw.forEach(function(c){c!=="selectionchange"&&(n8.has(c)||Hg(c,!1,i),Hg(c,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[jf]||(o[jf]=!0,Hg("selectionchange",!1,o))}}function lE(i,o,c,f){switch(UE(o)){case 2:var g=D8;break;case 8:g=I8;break;default:g=iy}c=g.bind(null,o,c,i),g=void 0,!hp||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(g=!0),f?g!==void 0?i.addEventListener(o,c,{capture:!0,passive:g}):i.addEventListener(o,c,!0):g!==void 0?i.addEventListener(o,c,{passive:g}):i.addEventListener(o,c,!1)}function Vg(i,o,c,f,g){var m=f;if((o&1)===0&&(o&2)===0&&f!==null)e:for(;;){if(f===null)return;var x=f.tag;if(x===3||x===4){var B=f.stateNode.containerInfo;if(B===g)break;if(x===4)for(x=f.return;x!==null;){var j=x.tag;if((j===3||j===4)&&x.stateNode.containerInfo===g)return;x=x.return}for(;B!==null;){if(x=Jo(B),x===null)return;if(j=x.tag,j===5||j===6||j===26||j===27){f=m=x;continue e}B=B.parentNode}}f=f.return}yw(function(){var te=m,ue=up(c),pe=[];e:{var ie=Fw.get(i);if(ie!==void 0){var oe=Ju,Te=i;switch(i){case"keypress":if(Zu(c)===0)break e;case"keydown":case"keyup":oe=XD;break;case"focusin":Te="focus",oe=yp;break;case"focusout":Te="blur",oe=yp;break;case"beforeblur":case"afterblur":oe=yp;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":oe=ww;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":oe=MD;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":oe=JD;break;case jw:case zw:case qw:oe=zD;break;case Hw:oe=tI;break;case"scroll":case"scrollend":oe=PD;break;case"wheel":oe=rI;break;case"copy":case"cut":case"paste":oe=HD;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":oe=Ew;break;case"toggle":case"beforetoggle":oe=sI}var Re=(o&4)!==0,ot=!Re&&(i==="scroll"||i==="scrollend"),Z=Re?ie!==null?ie+"Capture":null:ie;Re=[];for(var W=te,ee;W!==null;){var de=W;if(ee=de.stateNode,de=de.tag,de!==5&&de!==26&&de!==27||ee===null||Z===null||(de=$c(W,Z),de!=null&&Re.push(ml(W,de,ee))),ot)break;W=W.return}0<Re.length&&(ie=new oe(ie,Te,null,c,ue),pe.push({event:ie,listeners:Re}))}}if((o&7)===0){e:{if(ie=i==="mouseover"||i==="pointerover",oe=i==="mouseout"||i==="pointerout",ie&&c!==lp&&(Te=c.relatedTarget||c.fromElement)&&(Jo(Te)||Te[Qo]))break e;if((oe||ie)&&(ie=ue.window===ue?ue:(ie=ue.ownerDocument)?ie.defaultView||ie.parentWindow:window,oe?(Te=c.relatedTarget||c.toElement,oe=te,Te=Te?Jo(Te):null,Te!==null&&(ot=a(Te),Re=Te.tag,Te!==ot||Re!==5&&Re!==27&&Re!==6)&&(Te=null)):(oe=null,Te=te),oe!==Te)){if(Re=ww,de="onMouseLeave",Z="onMouseEnter",W="mouse",(i==="pointerout"||i==="pointerover")&&(Re=Ew,de="onPointerLeave",Z="onPointerEnter",W="pointer"),ot=oe==null?ie:Bc(oe),ee=Te==null?ie:Bc(Te),ie=new Re(de,W+"leave",oe,c,ue),ie.target=ot,ie.relatedTarget=ee,de=null,Jo(ue)===te&&(Re=new Re(Z,W+"enter",Te,c,ue),Re.target=ee,Re.relatedTarget=ot,de=Re),ot=de,oe&&Te)t:{for(Re=oe,Z=Te,W=0,ee=Re;ee;ee=Ua(ee))W++;for(ee=0,de=Z;de;de=Ua(de))ee++;for(;0<W-ee;)Re=Ua(Re),W--;for(;0<ee-W;)Z=Ua(Z),ee--;for(;W--;){if(Re===Z||Z!==null&&Re===Z.alternate)break t;Re=Ua(Re),Z=Ua(Z)}Re=null}else Re=null;oe!==null&&uE(pe,ie,oe,Re,!1),Te!==null&&ot!==null&&uE(pe,ot,Te,Re,!0)}}e:{if(ie=te?Bc(te):window,oe=ie.nodeName&&ie.nodeName.toLowerCase(),oe==="select"||oe==="input"&&ie.type==="file")var Ee=Dw;else if(xw(ie))if(Iw)Ee=gI;else{Ee=dI;var $e=hI}else oe=ie.nodeName,!oe||oe.toLowerCase()!=="input"||ie.type!=="checkbox"&&ie.type!=="radio"?te&&cp(te.elementType)&&(Ee=Dw):Ee=pI;if(Ee&&(Ee=Ee(i,te))){Tw(pe,Ee,c,ue);break e}$e&&$e(i,ie,te),i==="focusout"&&te&&ie.type==="number"&&te.memoizedProps.value!=null&&ap(ie,"number",ie.value)}switch($e=te?Bc(te):window,i){case"focusin":(xw($e)||$e.contentEditable==="true")&&(la=$e,_p=te,Hc=null);break;case"focusout":Hc=_p=la=null;break;case"mousedown":Sp=!0;break;case"contextmenu":case"mouseup":case"dragend":Sp=!1,Mw(pe,c,ue);break;case"selectionchange":if(mI)break;case"keydown":case"keyup":Mw(pe,c,ue)}var Se;if(bp)e:{switch(i){case"compositionstart":var Oe="onCompositionStart";break e;case"compositionend":Oe="onCompositionEnd";break e;case"compositionupdate":Oe="onCompositionUpdate";break e}Oe=void 0}else ca?Rw(i,c)&&(Oe="onCompositionEnd"):i==="keydown"&&c.keyCode===229&&(Oe="onCompositionStart");Oe&&(_w&&c.locale!=="ko"&&(ca||Oe!=="onCompositionStart"?Oe==="onCompositionEnd"&&ca&&(Se=mw()):(ts=ue,dp="value"in ts?ts.value:ts.textContent,ca=!0)),$e=zf(te,Oe),0<$e.length&&(Oe=new vw(Oe,i,null,c,ue),pe.push({event:Oe,listeners:$e}),Se?Oe.data=Se:(Se=Ow(c),Se!==null&&(Oe.data=Se)))),(Se=aI?cI(i,c):lI(i,c))&&(Oe=zf(te,"onBeforeInput"),0<Oe.length&&($e=new vw("onBeforeInput","beforeinput",null,c,ue),pe.push({event:$e,listeners:Oe}),$e.data=Se)),JI(pe,i,te,c,ue)}cE(pe,o)})}function ml(i,o,c){return{instance:i,listener:o,currentTarget:c}}function zf(i,o){for(var c=o+"Capture",f=[];i!==null;){var g=i,m=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||m===null||(g=$c(i,c),g!=null&&f.unshift(ml(i,g,m)),g=$c(i,o),g!=null&&f.push(ml(i,g,m))),i.tag===3)return f;i=i.return}return[]}function Ua(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function uE(i,o,c,f,g){for(var m=o._reactName,x=[];c!==null&&c!==f;){var B=c,j=B.alternate,te=B.stateNode;if(B=B.tag,j!==null&&j===f)break;B!==5&&B!==26&&B!==27||te===null||(j=te,g?(te=$c(c,m),te!=null&&x.unshift(ml(c,te,j))):g||(te=$c(c,m),te!=null&&x.push(ml(c,te,j)))),c=c.return}x.length!==0&&i.push({event:o,listeners:x})}var r8=/\r\n?/g,i8=/\u0000|\uFFFD/g;function fE(i){return(typeof i=="string"?i:""+i).replace(r8,`
`).replace(i8,"")}function hE(i,o){return o=fE(o),fE(i)===o}function qf(){}function st(i,o,c,f,g,m){switch(c){case"children":typeof f=="string"?o==="body"||o==="textarea"&&f===""||sa(i,f):(typeof f=="number"||typeof f=="bigint")&&o!=="body"&&sa(i,""+f);break;case"className":Gu(i,"class",f);break;case"tabIndex":Gu(i,"tabindex",f);break;case"dir":case"role":case"viewBox":case"width":case"height":Gu(i,c,f);break;case"style":pw(i,f,m);break;case"data":if(o!=="object"){Gu(i,"data",f);break}case"src":case"href":if(f===""&&(o!=="a"||c!=="href")){i.removeAttribute(c);break}if(f==null||typeof f=="function"||typeof f=="symbol"||typeof f=="boolean"){i.removeAttribute(c);break}f=Wu(""+f),i.setAttribute(c,f);break;case"action":case"formAction":if(typeof f=="function"){i.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(c==="formAction"?(o!=="input"&&st(i,o,"name",g.name,g,null),st(i,o,"formEncType",g.formEncType,g,null),st(i,o,"formMethod",g.formMethod,g,null),st(i,o,"formTarget",g.formTarget,g,null)):(st(i,o,"encType",g.encType,g,null),st(i,o,"method",g.method,g,null),st(i,o,"target",g.target,g,null)));if(f==null||typeof f=="symbol"||typeof f=="boolean"){i.removeAttribute(c);break}f=Wu(""+f),i.setAttribute(c,f);break;case"onClick":f!=null&&(i.onclick=qf);break;case"onScroll":f!=null&&ke("scroll",i);break;case"onScrollEnd":f!=null&&ke("scrollend",i);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(r(61));if(c=f.__html,c!=null){if(g.children!=null)throw Error(r(60));i.innerHTML=c}}break;case"multiple":i.multiple=f&&typeof f!="function"&&typeof f!="symbol";break;case"muted":i.muted=f&&typeof f!="function"&&typeof f!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(f==null||typeof f=="function"||typeof f=="boolean"||typeof f=="symbol"){i.removeAttribute("xlink:href");break}c=Wu(""+f),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":f!=null&&typeof f!="function"&&typeof f!="symbol"?i.setAttribute(c,""+f):i.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":f&&typeof f!="function"&&typeof f!="symbol"?i.setAttribute(c,""):i.removeAttribute(c);break;case"capture":case"download":f===!0?i.setAttribute(c,""):f!==!1&&f!=null&&typeof f!="function"&&typeof f!="symbol"?i.setAttribute(c,f):i.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":f!=null&&typeof f!="function"&&typeof f!="symbol"&&!isNaN(f)&&1<=f?i.setAttribute(c,f):i.removeAttribute(c);break;case"rowSpan":case"start":f==null||typeof f=="function"||typeof f=="symbol"||isNaN(f)?i.removeAttribute(c):i.setAttribute(c,f);break;case"popover":ke("beforetoggle",i),ke("toggle",i),Vu(i,"popover",f);break;case"xlinkActuate":wi(i,"http://www.w3.org/1999/xlink","xlink:actuate",f);break;case"xlinkArcrole":wi(i,"http://www.w3.org/1999/xlink","xlink:arcrole",f);break;case"xlinkRole":wi(i,"http://www.w3.org/1999/xlink","xlink:role",f);break;case"xlinkShow":wi(i,"http://www.w3.org/1999/xlink","xlink:show",f);break;case"xlinkTitle":wi(i,"http://www.w3.org/1999/xlink","xlink:title",f);break;case"xlinkType":wi(i,"http://www.w3.org/1999/xlink","xlink:type",f);break;case"xmlBase":wi(i,"http://www.w3.org/XML/1998/namespace","xml:base",f);break;case"xmlLang":wi(i,"http://www.w3.org/XML/1998/namespace","xml:lang",f);break;case"xmlSpace":wi(i,"http://www.w3.org/XML/1998/namespace","xml:space",f);break;case"is":Vu(i,"is",f);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=BD.get(c)||c,Vu(i,c,f))}}function Gg(i,o,c,f,g,m){switch(c){case"style":pw(i,f,m);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(r(61));if(c=f.__html,c!=null){if(g.children!=null)throw Error(r(60));i.innerHTML=c}}break;case"children":typeof f=="string"?sa(i,f):(typeof f=="number"||typeof f=="bigint")&&sa(i,""+f);break;case"onScroll":f!=null&&ke("scroll",i);break;case"onScrollEnd":f!=null&&ke("scrollend",i);break;case"onClick":f!=null&&(i.onclick=qf);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!rw.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(g=c.endsWith("Capture"),o=c.slice(2,g?c.length-7:void 0),m=i[In]||null,m=m!=null?m[c]:null,typeof m=="function"&&i.removeEventListener(o,m,g),typeof f=="function")){typeof m!="function"&&m!==null&&(c in i?i[c]=null:i.hasAttribute(c)&&i.removeAttribute(c)),i.addEventListener(o,f,g);break e}c in i?i[c]=f:f===!0?i.setAttribute(c,""):Vu(i,c,f)}}}function nn(i,o,c){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ke("error",i),ke("load",i);var f=!1,g=!1,m;for(m in c)if(c.hasOwnProperty(m)){var x=c[m];if(x!=null)switch(m){case"src":f=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,o));default:st(i,o,m,x,c,null)}}g&&st(i,o,"srcSet",c.srcSet,c,null),f&&st(i,o,"src",c.src,c,null);return;case"input":ke("invalid",i);var B=m=x=g=null,j=null,te=null;for(f in c)if(c.hasOwnProperty(f)){var ue=c[f];if(ue!=null)switch(f){case"name":g=ue;break;case"type":x=ue;break;case"checked":j=ue;break;case"defaultChecked":te=ue;break;case"value":m=ue;break;case"defaultValue":B=ue;break;case"children":case"dangerouslySetInnerHTML":if(ue!=null)throw Error(r(137,o));break;default:st(i,o,f,ue,c,null)}}uw(i,m,B,j,te,x,g,!1),Ku(i);return;case"select":ke("invalid",i),f=x=m=null;for(g in c)if(c.hasOwnProperty(g)&&(B=c[g],B!=null))switch(g){case"value":m=B;break;case"defaultValue":x=B;break;case"multiple":f=B;default:st(i,o,g,B,c,null)}o=m,c=x,i.multiple=!!f,o!=null?ia(i,!!f,o,!1):c!=null&&ia(i,!!f,c,!0);return;case"textarea":ke("invalid",i),m=g=f=null;for(x in c)if(c.hasOwnProperty(x)&&(B=c[x],B!=null))switch(x){case"value":f=B;break;case"defaultValue":g=B;break;case"children":m=B;break;case"dangerouslySetInnerHTML":if(B!=null)throw Error(r(91));break;default:st(i,o,x,B,c,null)}hw(i,f,g,m),Ku(i);return;case"option":for(j in c)if(c.hasOwnProperty(j)&&(f=c[j],f!=null))switch(j){case"selected":i.selected=f&&typeof f!="function"&&typeof f!="symbol";break;default:st(i,o,j,f,c,null)}return;case"dialog":ke("beforetoggle",i),ke("toggle",i),ke("cancel",i),ke("close",i);break;case"iframe":case"object":ke("load",i);break;case"video":case"audio":for(f=0;f<yl.length;f++)ke(yl[f],i);break;case"image":ke("error",i),ke("load",i);break;case"details":ke("toggle",i);break;case"embed":case"source":case"link":ke("error",i),ke("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(te in c)if(c.hasOwnProperty(te)&&(f=c[te],f!=null))switch(te){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,o));default:st(i,o,te,f,c,null)}return;default:if(cp(o)){for(ue in c)c.hasOwnProperty(ue)&&(f=c[ue],f!==void 0&&Gg(i,o,ue,f,c,void 0));return}}for(B in c)c.hasOwnProperty(B)&&(f=c[B],f!=null&&st(i,o,B,f,c,null))}function s8(i,o,c,f){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,m=null,x=null,B=null,j=null,te=null,ue=null;for(oe in c){var pe=c[oe];if(c.hasOwnProperty(oe)&&pe!=null)switch(oe){case"checked":break;case"value":break;case"defaultValue":j=pe;default:f.hasOwnProperty(oe)||st(i,o,oe,null,f,pe)}}for(var ie in f){var oe=f[ie];if(pe=c[ie],f.hasOwnProperty(ie)&&(oe!=null||pe!=null))switch(ie){case"type":m=oe;break;case"name":g=oe;break;case"checked":te=oe;break;case"defaultChecked":ue=oe;break;case"value":x=oe;break;case"defaultValue":B=oe;break;case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(r(137,o));break;default:oe!==pe&&st(i,o,ie,oe,f,pe)}}op(i,x,B,j,te,ue,m,g);return;case"select":oe=x=B=ie=null;for(m in c)if(j=c[m],c.hasOwnProperty(m)&&j!=null)switch(m){case"value":break;case"multiple":oe=j;default:f.hasOwnProperty(m)||st(i,o,m,null,f,j)}for(g in f)if(m=f[g],j=c[g],f.hasOwnProperty(g)&&(m!=null||j!=null))switch(g){case"value":ie=m;break;case"defaultValue":B=m;break;case"multiple":x=m;default:m!==j&&st(i,o,g,m,f,j)}o=B,c=x,f=oe,ie!=null?ia(i,!!c,ie,!1):!!f!=!!c&&(o!=null?ia(i,!!c,o,!0):ia(i,!!c,c?[]:"",!1));return;case"textarea":oe=ie=null;for(B in c)if(g=c[B],c.hasOwnProperty(B)&&g!=null&&!f.hasOwnProperty(B))switch(B){case"value":break;case"children":break;default:st(i,o,B,null,f,g)}for(x in f)if(g=f[x],m=c[x],f.hasOwnProperty(x)&&(g!=null||m!=null))switch(x){case"value":ie=g;break;case"defaultValue":oe=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(r(91));break;default:g!==m&&st(i,o,x,g,f,m)}fw(i,ie,oe);return;case"option":for(var Te in c)if(ie=c[Te],c.hasOwnProperty(Te)&&ie!=null&&!f.hasOwnProperty(Te))switch(Te){case"selected":i.selected=!1;break;default:st(i,o,Te,null,f,ie)}for(j in f)if(ie=f[j],oe=c[j],f.hasOwnProperty(j)&&ie!==oe&&(ie!=null||oe!=null))switch(j){case"selected":i.selected=ie&&typeof ie!="function"&&typeof ie!="symbol";break;default:st(i,o,j,ie,f,oe)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Re in c)ie=c[Re],c.hasOwnProperty(Re)&&ie!=null&&!f.hasOwnProperty(Re)&&st(i,o,Re,null,f,ie);for(te in f)if(ie=f[te],oe=c[te],f.hasOwnProperty(te)&&ie!==oe&&(ie!=null||oe!=null))switch(te){case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(r(137,o));break;default:st(i,o,te,ie,f,oe)}return;default:if(cp(o)){for(var ot in c)ie=c[ot],c.hasOwnProperty(ot)&&ie!==void 0&&!f.hasOwnProperty(ot)&&Gg(i,o,ot,void 0,f,ie);for(ue in f)ie=f[ue],oe=c[ue],!f.hasOwnProperty(ue)||ie===oe||ie===void 0&&oe===void 0||Gg(i,o,ue,ie,f,oe);return}}for(var Z in c)ie=c[Z],c.hasOwnProperty(Z)&&ie!=null&&!f.hasOwnProperty(Z)&&st(i,o,Z,null,f,ie);for(pe in f)ie=f[pe],oe=c[pe],!f.hasOwnProperty(pe)||ie===oe||ie==null&&oe==null||st(i,o,pe,ie,f,oe)}var Kg=null,Yg=null;function Hf(i){return i.nodeType===9?i:i.ownerDocument}function dE(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function pE(i,o){if(i===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&o==="foreignObject"?0:i}function Wg(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Xg=null;function o8(){var i=window.event;return i&&i.type==="popstate"?i===Xg?!1:(Xg=i,!0):(Xg=null,!1)}var gE=typeof setTimeout=="function"?setTimeout:void 0,a8=typeof clearTimeout=="function"?clearTimeout:void 0,yE=typeof Promise=="function"?Promise:void 0,c8=typeof queueMicrotask=="function"?queueMicrotask:typeof yE<"u"?function(i){return yE.resolve(null).then(i).catch(l8)}:gE;function l8(i){setTimeout(function(){throw i})}function ms(i){return i==="head"}function mE(i,o){var c=o,f=0,g=0;do{var m=c.nextSibling;if(i.removeChild(c),m&&m.nodeType===8)if(c=m.data,c==="/$"){if(0<f&&8>f){c=f;var x=i.ownerDocument;if(c&1&&bl(x.documentElement),c&2&&bl(x.body),c&4)for(c=x.head,bl(c),x=c.firstChild;x;){var B=x.nextSibling,j=x.nodeName;x[Uc]||j==="SCRIPT"||j==="STYLE"||j==="LINK"&&x.rel.toLowerCase()==="stylesheet"||c.removeChild(x),x=B}}if(g===0){i.removeChild(m),Ol(o);return}g--}else c==="$"||c==="$?"||c==="$!"?g++:f=c.charCodeAt(0)-48;else f=0;c=m}while(c);Ol(o)}function Zg(i){var o=i.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var c=o;switch(o=o.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":Zg(c),np(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}i.removeChild(c)}}function u8(i,o,c,f){for(;i.nodeType===1;){var g=c;if(i.nodeName.toLowerCase()!==o.toLowerCase()){if(!f&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(f){if(!i[Uc])switch(o){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(m=i.getAttribute("rel"),m==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(m!==g.rel||i.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||i.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||i.getAttribute("title")!==(g.title==null?null:g.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(m=i.getAttribute("src"),(m!==(g.src==null?null:g.src)||i.getAttribute("type")!==(g.type==null?null:g.type)||i.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&m&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(o==="input"&&i.type==="hidden"){var m=g.name==null?null:""+g.name;if(g.type==="hidden"&&i.getAttribute("name")===m)return i}else return i;if(i=Br(i.nextSibling),i===null)break}return null}function f8(i,o,c){if(o==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!c||(i=Br(i.nextSibling),i===null))return null;return i}function Qg(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState==="complete"}function h8(i,o){var c=i.ownerDocument;if(i.data!=="$?"||c.readyState==="complete")o();else{var f=function(){o(),c.removeEventListener("DOMContentLoaded",f)};c.addEventListener("DOMContentLoaded",f),i._reactRetry=f}}function Br(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?"||o==="F!"||o==="F")break;if(o==="/$")return null}}return i}var Jg=null;function bE(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var c=i.data;if(c==="$"||c==="$!"||c==="$?"){if(o===0)return i;o--}else c==="/$"&&o++}i=i.previousSibling}return null}function wE(i,o,c){switch(o=Hf(c),i){case"html":if(i=o.documentElement,!i)throw Error(r(452));return i;case"head":if(i=o.head,!i)throw Error(r(453));return i;case"body":if(i=o.body,!i)throw Error(r(454));return i;default:throw Error(r(451))}}function bl(i){for(var o=i.attributes;o.length;)i.removeAttributeNode(o[0]);np(i)}var vr=new Map,vE=new Set;function Ff(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var Ui=M.d;M.d={f:d8,r:p8,D:g8,C:y8,L:m8,m:b8,X:v8,S:w8,M:E8};function d8(){var i=Ui.f(),o=$f();return i||o}function p8(i){var o=ea(i);o!==null&&o.tag===5&&o.type==="form"?jv(o):Ui.r(i)}var Ba=typeof document>"u"?null:document;function EE(i,o,c){var f=Ba;if(f&&typeof o=="string"&&o){var g=dr(o);g='link[rel="'+i+'"][href="'+g+'"]',typeof c=="string"&&(g+='[crossorigin="'+c+'"]'),vE.has(g)||(vE.add(g),i={rel:i,crossOrigin:c,href:o},f.querySelector(g)===null&&(o=f.createElement("link"),nn(o,"link",i),Vt(o),f.head.appendChild(o)))}}function g8(i){Ui.D(i),EE("dns-prefetch",i,null)}function y8(i,o){Ui.C(i,o),EE("preconnect",i,o)}function m8(i,o,c){Ui.L(i,o,c);var f=Ba;if(f&&i&&o){var g='link[rel="preload"][as="'+dr(o)+'"]';o==="image"&&c&&c.imageSrcSet?(g+='[imagesrcset="'+dr(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(g+='[imagesizes="'+dr(c.imageSizes)+'"]')):g+='[href="'+dr(i)+'"]';var m=g;switch(o){case"style":m=$a(i);break;case"script":m=Pa(i)}vr.has(m)||(i=p({rel:"preload",href:o==="image"&&c&&c.imageSrcSet?void 0:i,as:o},c),vr.set(m,i),f.querySelector(g)!==null||o==="style"&&f.querySelector(wl(m))||o==="script"&&f.querySelector(vl(m))||(o=f.createElement("link"),nn(o,"link",i),Vt(o),f.head.appendChild(o)))}}function b8(i,o){Ui.m(i,o);var c=Ba;if(c&&i){var f=o&&typeof o.as=="string"?o.as:"script",g='link[rel="modulepreload"][as="'+dr(f)+'"][href="'+dr(i)+'"]',m=g;switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=Pa(i)}if(!vr.has(m)&&(i=p({rel:"modulepreload",href:i},o),vr.set(m,i),c.querySelector(g)===null)){switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(vl(m)))return}f=c.createElement("link"),nn(f,"link",i),Vt(f),c.head.appendChild(f)}}}function w8(i,o,c){Ui.S(i,o,c);var f=Ba;if(f&&i){var g=ta(f).hoistableStyles,m=$a(i);o=o||"default";var x=g.get(m);if(!x){var B={loading:0,preload:null};if(x=f.querySelector(wl(m)))B.loading=5;else{i=p({rel:"stylesheet",href:i,"data-precedence":o},c),(c=vr.get(m))&&ey(i,c);var j=x=f.createElement("link");Vt(j),nn(j,"link",i),j._p=new Promise(function(te,ue){j.onload=te,j.onerror=ue}),j.addEventListener("load",function(){B.loading|=1}),j.addEventListener("error",function(){B.loading|=2}),B.loading|=4,Vf(x,o,f)}x={type:"stylesheet",instance:x,count:1,state:B},g.set(m,x)}}}function v8(i,o){Ui.X(i,o);var c=Ba;if(c&&i){var f=ta(c).hoistableScripts,g=Pa(i),m=f.get(g);m||(m=c.querySelector(vl(g)),m||(i=p({src:i,async:!0},o),(o=vr.get(g))&&ty(i,o),m=c.createElement("script"),Vt(m),nn(m,"link",i),c.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},f.set(g,m))}}function E8(i,o){Ui.M(i,o);var c=Ba;if(c&&i){var f=ta(c).hoistableScripts,g=Pa(i),m=f.get(g);m||(m=c.querySelector(vl(g)),m||(i=p({src:i,async:!0,type:"module"},o),(o=vr.get(g))&&ty(i,o),m=c.createElement("script"),Vt(m),nn(m,"link",i),c.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},f.set(g,m))}}function _E(i,o,c,f){var g=(g=ye.current)?Ff(g):null;if(!g)throw Error(r(446));switch(i){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(o=$a(c.href),c=ta(g).hoistableStyles,f=c.get(o),f||(f={type:"style",instance:null,count:0,state:null},c.set(o,f)),f):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){i=$a(c.href);var m=ta(g).hoistableStyles,x=m.get(i);if(x||(g=g.ownerDocument||g,x={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(i,x),(m=g.querySelector(wl(i)))&&!m._p&&(x.instance=m,x.state.loading=5),vr.has(i)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},vr.set(i,c),m||_8(g,i,c,x.state))),o&&f===null)throw Error(r(528,""));return x}if(o&&f!==null)throw Error(r(529,""));return null;case"script":return o=c.async,c=c.src,typeof c=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=Pa(c),c=ta(g).hoistableScripts,f=c.get(o),f||(f={type:"script",instance:null,count:0,state:null},c.set(o,f)),f):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,i))}}function $a(i){return'href="'+dr(i)+'"'}function wl(i){return'link[rel="stylesheet"]['+i+"]"}function SE(i){return p({},i,{"data-precedence":i.precedence,precedence:null})}function _8(i,o,c,f){i.querySelector('link[rel="preload"][as="style"]['+o+"]")?f.loading=1:(o=i.createElement("link"),f.preload=o,o.addEventListener("load",function(){return f.loading|=1}),o.addEventListener("error",function(){return f.loading|=2}),nn(o,"link",c),Vt(o),i.head.appendChild(o))}function Pa(i){return'[src="'+dr(i)+'"]'}function vl(i){return"script[async]"+i}function AE(i,o,c){if(o.count++,o.instance===null)switch(o.type){case"style":var f=i.querySelector('style[data-href~="'+dr(c.href)+'"]');if(f)return o.instance=f,Vt(f),f;var g=p({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return f=(i.ownerDocument||i).createElement("style"),Vt(f),nn(f,"style",g),Vf(f,c.precedence,i),o.instance=f;case"stylesheet":g=$a(c.href);var m=i.querySelector(wl(g));if(m)return o.state.loading|=4,o.instance=m,Vt(m),m;f=SE(c),(g=vr.get(g))&&ey(f,g),m=(i.ownerDocument||i).createElement("link"),Vt(m);var x=m;return x._p=new Promise(function(B,j){x.onload=B,x.onerror=j}),nn(m,"link",f),o.state.loading|=4,Vf(m,c.precedence,i),o.instance=m;case"script":return m=Pa(c.src),(g=i.querySelector(vl(m)))?(o.instance=g,Vt(g),g):(f=c,(g=vr.get(m))&&(f=p({},c),ty(f,g)),i=i.ownerDocument||i,g=i.createElement("script"),Vt(g),nn(g,"link",f),i.head.appendChild(g),o.instance=g);case"void":return null;default:throw Error(r(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(f=o.instance,o.state.loading|=4,Vf(f,c.precedence,i));return o.instance}function Vf(i,o,c){for(var f=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=f.length?f[f.length-1]:null,m=g,x=0;x<f.length;x++){var B=f[x];if(B.dataset.precedence===o)m=B;else if(m!==g)break}m?m.parentNode.insertBefore(i,m.nextSibling):(o=c.nodeType===9?c.head:c,o.insertBefore(i,o.firstChild))}function ey(i,o){i.crossOrigin==null&&(i.crossOrigin=o.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=o.referrerPolicy),i.title==null&&(i.title=o.title)}function ty(i,o){i.crossOrigin==null&&(i.crossOrigin=o.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=o.referrerPolicy),i.integrity==null&&(i.integrity=o.integrity)}var Gf=null;function RE(i,o,c){if(Gf===null){var f=new Map,g=Gf=new Map;g.set(c,f)}else g=Gf,f=g.get(c),f||(f=new Map,g.set(c,f));if(f.has(i))return f;for(f.set(i,null),c=c.getElementsByTagName(i),g=0;g<c.length;g++){var m=c[g];if(!(m[Uc]||m[pn]||i==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var x=m.getAttribute(o)||"";x=i+x;var B=f.get(x);B?B.push(m):f.set(x,[m])}}return f}function OE(i,o,c){i=i.ownerDocument||i,i.head.insertBefore(c,o==="title"?i.querySelector("head > title"):null)}function S8(i,o,c){if(c===1||o.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return i=o.disabled,typeof o.precedence=="string"&&i==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function xE(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}var El=null;function A8(){}function R8(i,o,c){if(El===null)throw Error(r(475));var f=El;if(o.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var g=$a(c.href),m=i.querySelector(wl(g));if(m){i=m._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(f.count++,f=Kf.bind(f),i.then(f,f)),o.state.loading|=4,o.instance=m,Vt(m);return}m=i.ownerDocument||i,c=SE(c),(g=vr.get(g))&&ey(c,g),m=m.createElement("link"),Vt(m);var x=m;x._p=new Promise(function(B,j){x.onload=B,x.onerror=j}),nn(m,"link",c),o.instance=m}f.stylesheets===null&&(f.stylesheets=new Map),f.stylesheets.set(o,i),(i=o.state.preload)&&(o.state.loading&3)===0&&(f.count++,o=Kf.bind(f),i.addEventListener("load",o),i.addEventListener("error",o))}}function O8(){if(El===null)throw Error(r(475));var i=El;return i.stylesheets&&i.count===0&&ny(i,i.stylesheets),0<i.count?function(o){var c=setTimeout(function(){if(i.stylesheets&&ny(i,i.stylesheets),i.unsuspend){var f=i.unsuspend;i.unsuspend=null,f()}},6e4);return i.unsuspend=o,function(){i.unsuspend=null,clearTimeout(c)}}:null}function Kf(){if(this.count--,this.count===0){if(this.stylesheets)ny(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Yf=null;function ny(i,o){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Yf=new Map,o.forEach(x8,i),Yf=null,Kf.call(i))}function x8(i,o){if(!(o.state.loading&4)){var c=Yf.get(i);if(c)var f=c.get(null);else{c=new Map,Yf.set(i,c);for(var g=i.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<g.length;m++){var x=g[m];(x.nodeName==="LINK"||x.getAttribute("media")!=="not all")&&(c.set(x.dataset.precedence,x),f=x)}f&&c.set(null,f)}g=o.instance,x=g.getAttribute("data-precedence"),m=c.get(x)||f,m===f&&c.set(null,g),c.set(x,g),this.count++,f=Kf.bind(this),g.addEventListener("load",f),g.addEventListener("error",f),m?m.parentNode.insertBefore(g,m.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(g,i.firstChild)),o.state.loading|=4}}var _l={$$typeof:I,Provider:null,Consumer:null,_currentValue:F,_currentValue2:F,_threadCount:0};function T8(i,o,c,f,g,m,x,B){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Qd(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Qd(0),this.hiddenUpdates=Qd(null),this.identifierPrefix=f,this.onUncaughtError=g,this.onCaughtError=m,this.onRecoverableError=x,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=B,this.incompleteTransitions=new Map}function TE(i,o,c,f,g,m,x,B,j,te,ue,pe){return i=new T8(i,o,c,x,B,j,te,pe),o=1,m===!0&&(o|=24),m=Qn(3,null,null,o),i.current=m,m.stateNode=i,o=kp(),o.refCount++,i.pooledCache=o,o.refCount++,m.memoizedState={element:f,isDehydrated:c,cache:o},zp(m),i}function DE(i){return i?(i=da,i):da}function IE(i,o,c,f,g,m){g=DE(g),f.context===null?f.context=g:f.pendingContext=g,f=is(o),f.payload={element:c},m=m===void 0?null:m,m!==null&&(f.callback=m),c=ss(i,f,o),c!==null&&(rr(c,i,o),Qc(c,i,o))}function CE(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var c=i.retryLane;i.retryLane=c!==0&&c<o?c:o}}function ry(i,o){CE(i,o),(i=i.alternate)&&CE(i,o)}function NE(i){if(i.tag===13){var o=ha(i,67108864);o!==null&&rr(o,i,67108864),ry(i,67108864)}}var Wf=!0;function D8(i,o,c,f){var g=O.T;O.T=null;var m=M.p;try{M.p=2,iy(i,o,c,f)}finally{M.p=m,O.T=g}}function I8(i,o,c,f){var g=O.T;O.T=null;var m=M.p;try{M.p=8,iy(i,o,c,f)}finally{M.p=m,O.T=g}}function iy(i,o,c,f){if(Wf){var g=sy(f);if(g===null)Vg(i,o,f,Xf,c),BE(i,f);else if(N8(g,i,o,c,f))f.stopPropagation();else if(BE(i,f),o&4&&-1<C8.indexOf(i)){for(;g!==null;){var m=ea(g);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var x=Ye(m.pendingLanes);if(x!==0){var B=m;for(B.pendingLanes|=2,B.entangledLanes|=2;x;){var j=1<<31-A(x);B.entanglements[1]|=j,x&=~j}Zr(m),(Qe&6)===0&&(Uf=dn()+500,gl(0))}}break;case 13:B=ha(m,2),B!==null&&rr(B,m,2),$f(),ry(m,2)}if(m=sy(f),m===null&&Vg(i,o,f,Xf,c),m===g)break;g=m}g!==null&&f.stopPropagation()}else Vg(i,o,f,null,c)}}function sy(i){return i=up(i),oy(i)}var Xf=null;function oy(i){if(Xf=null,i=Jo(i),i!==null){var o=a(i);if(o===null)i=null;else{var c=o.tag;if(c===13){if(i=l(o),i!==null)return i;i=null}else if(c===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null)}}return Xf=i,null}function UE(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Cc()){case Vs:return 2;case Ji:return 8;case Wn:case Sn:return 32;case bi:return 268435456;default:return 32}default:return 32}}var ay=!1,bs=null,ws=null,vs=null,Sl=new Map,Al=new Map,Es=[],C8="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function BE(i,o){switch(i){case"focusin":case"focusout":bs=null;break;case"dragenter":case"dragleave":ws=null;break;case"mouseover":case"mouseout":vs=null;break;case"pointerover":case"pointerout":Sl.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Al.delete(o.pointerId)}}function Rl(i,o,c,f,g,m){return i===null||i.nativeEvent!==m?(i={blockedOn:o,domEventName:c,eventSystemFlags:f,nativeEvent:m,targetContainers:[g]},o!==null&&(o=ea(o),o!==null&&NE(o)),i):(i.eventSystemFlags|=f,o=i.targetContainers,g!==null&&o.indexOf(g)===-1&&o.push(g),i)}function N8(i,o,c,f,g){switch(o){case"focusin":return bs=Rl(bs,i,o,c,f,g),!0;case"dragenter":return ws=Rl(ws,i,o,c,f,g),!0;case"mouseover":return vs=Rl(vs,i,o,c,f,g),!0;case"pointerover":var m=g.pointerId;return Sl.set(m,Rl(Sl.get(m)||null,i,o,c,f,g)),!0;case"gotpointercapture":return m=g.pointerId,Al.set(m,Rl(Al.get(m)||null,i,o,c,f,g)),!0}return!1}function $E(i){var o=Jo(i.target);if(o!==null){var c=a(o);if(c!==null){if(o=c.tag,o===13){if(o=l(c),o!==null){i.blockedOn=o,RD(i.priority,function(){if(c.tag===13){var f=nr();f=Jd(f);var g=ha(c,f);g!==null&&rr(g,c,f),ry(c,f)}});return}}else if(o===3&&c.stateNode.current.memoizedState.isDehydrated){i.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Zf(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var c=sy(i.nativeEvent);if(c===null){c=i.nativeEvent;var f=new c.constructor(c.type,c);lp=f,c.target.dispatchEvent(f),lp=null}else return o=ea(c),o!==null&&NE(o),i.blockedOn=c,!1;o.shift()}return!0}function PE(i,o,c){Zf(i)&&c.delete(o)}function U8(){ay=!1,bs!==null&&Zf(bs)&&(bs=null),ws!==null&&Zf(ws)&&(ws=null),vs!==null&&Zf(vs)&&(vs=null),Sl.forEach(PE),Al.forEach(PE)}function Qf(i,o){i.blockedOn===o&&(i.blockedOn=null,ay||(ay=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,U8)))}var Jf=null;function kE(i){Jf!==i&&(Jf=i,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Jf===i&&(Jf=null);for(var o=0;o<i.length;o+=3){var c=i[o],f=i[o+1],g=i[o+2];if(typeof f!="function"){if(oy(f||c)===null)continue;break}var m=ea(c);m!==null&&(i.splice(o,3),o-=3,og(m,{pending:!0,data:g,method:c.method,action:f},f,g))}}))}function Ol(i){function o(j){return Qf(j,i)}bs!==null&&Qf(bs,i),ws!==null&&Qf(ws,i),vs!==null&&Qf(vs,i),Sl.forEach(o),Al.forEach(o);for(var c=0;c<Es.length;c++){var f=Es[c];f.blockedOn===i&&(f.blockedOn=null)}for(;0<Es.length&&(c=Es[0],c.blockedOn===null);)$E(c),c.blockedOn===null&&Es.shift();if(c=(i.ownerDocument||i).$$reactFormReplay,c!=null)for(f=0;f<c.length;f+=3){var g=c[f],m=c[f+1],x=g[In]||null;if(typeof m=="function")x||kE(c);else if(x){var B=null;if(m&&m.hasAttribute("formAction")){if(g=m,x=m[In]||null)B=x.formAction;else if(oy(g)!==null)continue}else B=x.action;typeof B=="function"?c[f+1]=B:(c.splice(f,3),f-=3),kE(c)}}}function cy(i){this._internalRoot=i}eh.prototype.render=cy.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(r(409));var c=o.current,f=nr();IE(c,f,i,o,null,null)},eh.prototype.unmount=cy.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;IE(i.current,2,null,i,null,null),$f(),o[Qo]=null}};function eh(i){this._internalRoot=i}eh.prototype.unstable_scheduleHydration=function(i){if(i){var o=ew();i={blockedOn:null,target:i,priority:o};for(var c=0;c<Es.length&&o!==0&&o<Es[c].priority;c++);Es.splice(c,0,i),c===0&&$E(i)}};var ME=t.version;if(ME!=="19.1.0")throw Error(r(527,ME,"19.1.0"));M.findDOMNode=function(i){var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(r(188)):(i=Object.keys(i).join(","),Error(r(268,i)));return i=d(o),i=i!==null?h(i):null,i=i===null?null:i.stateNode,i};var B8={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:O,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var th=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!th.isDisabled&&th.supportsFiber)try{Gr=th.inject(B8),N=th}catch{}}return Tl.createRoot=function(i,o){if(!s(i))throw Error(r(299));var c=!1,f="",g=e1,m=t1,x=n1,B=null;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(g=o.onUncaughtError),o.onCaughtError!==void 0&&(m=o.onCaughtError),o.onRecoverableError!==void 0&&(x=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(B=o.unstable_transitionCallbacks)),o=TE(i,1,!1,null,null,c,f,g,m,x,B,null),i[Qo]=o.current,Fg(i),new cy(o)},Tl.hydrateRoot=function(i,o,c){if(!s(i))throw Error(r(299));var f=!1,g="",m=e1,x=t1,B=n1,j=null,te=null;return c!=null&&(c.unstable_strictMode===!0&&(f=!0),c.identifierPrefix!==void 0&&(g=c.identifierPrefix),c.onUncaughtError!==void 0&&(m=c.onUncaughtError),c.onCaughtError!==void 0&&(x=c.onCaughtError),c.onRecoverableError!==void 0&&(B=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(j=c.unstable_transitionCallbacks),c.formState!==void 0&&(te=c.formState)),o=TE(i,1,!0,o,c??null,f,g,m,x,B,j,te),o.context=DE(null),c=o.current,f=nr(),f=Jd(f),g=is(f),g.callback=null,ss(c,g,f),c=f,o.current.lanes=c,Nc(o,c),Zr(o),i[Qo]=o.current,Fg(i),new eh(o)},Tl.version="19.1.0",Tl}var YE;function V8(){if(YE)return fy.exports;YE=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),fy.exports=F8(),fy.exports}var G8=V8(),Dl={},WE;function K8(){if(WE)return Dl;WE=1,Object.defineProperty(Dl,"__esModule",{value:!0}),Dl.parse=l,Dl.serialize=h;const e=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,t=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,s=Object.prototype.toString,a=(()=>{const b=function(){};return b.prototype=Object.create(null),b})();function l(b,w){const v=new a,E=b.length;if(E<2)return v;const _=w?.decode||p;let R=0;do{const D=b.indexOf("=",R);if(D===-1)break;const I=b.indexOf(";",R),$=I===-1?E:I;if(D>$){R=b.lastIndexOf(";",D-1)+1;continue}const U=u(b,R,D),k=d(b,D,U),q=b.slice(U,k);if(v[q]===void 0){let H=u(b,D+1,$),P=d(b,$,H);const V=_(b.slice(H,P));v[q]=V}R=$+1}while(R<E);return v}function u(b,w,v){do{const E=b.charCodeAt(w);if(E!==32&&E!==9)return w}while(++w<v);return v}function d(b,w,v){for(;w>v;){const E=b.charCodeAt(--w);if(E!==32&&E!==9)return w+1}return v}function h(b,w,v){const E=v?.encode||encodeURIComponent;if(!e.test(b))throw new TypeError(`argument name is invalid: ${b}`);const _=E(w);if(!t.test(_))throw new TypeError(`argument val is invalid: ${w}`);let R=b+"="+_;if(!v)return R;if(v.maxAge!==void 0){if(!Number.isInteger(v.maxAge))throw new TypeError(`option maxAge is invalid: ${v.maxAge}`);R+="; Max-Age="+v.maxAge}if(v.domain){if(!n.test(v.domain))throw new TypeError(`option domain is invalid: ${v.domain}`);R+="; Domain="+v.domain}if(v.path){if(!r.test(v.path))throw new TypeError(`option path is invalid: ${v.path}`);R+="; Path="+v.path}if(v.expires){if(!y(v.expires)||!Number.isFinite(v.expires.valueOf()))throw new TypeError(`option expires is invalid: ${v.expires}`);R+="; Expires="+v.expires.toUTCString()}if(v.httpOnly&&(R+="; HttpOnly"),v.secure&&(R+="; Secure"),v.partitioned&&(R+="; Partitioned"),v.priority)switch(typeof v.priority=="string"?v.priority.toLowerCase():void 0){case"low":R+="; Priority=Low";break;case"medium":R+="; Priority=Medium";break;case"high":R+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${v.priority}`)}if(v.sameSite)switch(typeof v.sameSite=="string"?v.sameSite.toLowerCase():v.sameSite){case!0:case"strict":R+="; SameSite=Strict";break;case"lax":R+="; SameSite=Lax";break;case"none":R+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${v.sameSite}`)}return R}function p(b){if(b.indexOf("%")===-1)return b;try{return decodeURIComponent(b)}catch{return b}}function y(b){return s.call(b)==="[object Date]"}return Dl}K8();var XE="popstate";function Y8(e={}){function t(r,s){let{pathname:a,search:l,hash:u}=r.location;return Nm("",{pathname:a,search:l,hash:u},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:fu(s)}return X8(t,n,null,e)}function _t(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function hi(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function W8(){return Math.random().toString(36).substring(2,10)}function ZE(e,t){return{usr:e.state,key:e.key,idx:t}}function Nm(e,t,n=null,r){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?bc(t):t,state:n,key:t&&t.key||r||W8()}}function fu({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function bc(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function X8(e,t,n,r={}){let{window:s=document.defaultView,v5Compat:a=!1}=r,l=s.history,u="POP",d=null,h=p();h==null&&(h=0,l.replaceState({...l.state,idx:h},""));function p(){return(l.state||{idx:null}).idx}function y(){u="POP";let _=p(),R=_==null?null:_-h;h=_,d&&d({action:u,location:E.location,delta:R})}function b(_,R){u="PUSH";let D=Nm(E.location,_,R);h=p()+1;let I=ZE(D,h),$=E.createHref(D);try{l.pushState(I,"",$)}catch(U){if(U instanceof DOMException&&U.name==="DataCloneError")throw U;s.location.assign($)}a&&d&&d({action:u,location:E.location,delta:1})}function w(_,R){u="REPLACE";let D=Nm(E.location,_,R);h=p();let I=ZE(D,h),$=E.createHref(D);l.replaceState(I,"",$),a&&d&&d({action:u,location:E.location,delta:0})}function v(_){return Z8(_)}let E={get action(){return u},get location(){return e(s,l)},listen(_){if(d)throw new Error("A history only accepts one active listener");return s.addEventListener(XE,y),d=_,()=>{s.removeEventListener(XE,y),d=null}},createHref(_){return t(s,_)},createURL:v,encodeLocation(_){let R=v(_);return{pathname:R.pathname,search:R.search,hash:R.hash}},push:b,replace:w,go(_){return l.go(_)}};return E}function Z8(e,t=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),_t(n,"No window.location.(origin|href) available to create URL");let r=typeof e=="string"?e:fu(e);return r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function ER(e,t,n="/"){return Q8(e,t,n,!1)}function Q8(e,t,n,r){let s=typeof t=="string"?bc(t):t,a=Wi(s.pathname||"/",n);if(a==null)return null;let l=_R(e);J8(l);let u=null;for(let d=0;u==null&&d<l.length;++d){let h=uC(a);u=cC(l[d],h,r)}return u}function _R(e,t=[],n=[],r=""){let s=(a,l,u)=>{let d={relativePath:u===void 0?a.path||"":u,caseSensitive:a.caseSensitive===!0,childrenIndex:l,route:a};d.relativePath.startsWith("/")&&(_t(d.relativePath.startsWith(r),`Absolute route path "${d.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(r.length));let h=Gi([r,d.relativePath]),p=n.concat(d);a.children&&a.children.length>0&&(_t(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${h}".`),_R(a.children,t,p,h)),!(a.path==null&&!a.index)&&t.push({path:h,score:oC(h,a.index),routesMeta:p})};return e.forEach((a,l)=>{if(a.path===""||!a.path?.includes("?"))s(a,l);else for(let u of SR(a.path))s(a,l,u)}),t}function SR(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,s=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return s?[a,""]:[a];let l=SR(r.join("/")),u=[];return u.push(...l.map(d=>d===""?a:[a,d].join("/"))),s&&u.push(...l),u.map(d=>e.startsWith("/")&&d===""?"/":d)}function J8(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:aC(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var eC=/^:[\w-]+$/,tC=3,nC=2,rC=1,iC=10,sC=-2,QE=e=>e==="*";function oC(e,t){let n=e.split("/"),r=n.length;return n.some(QE)&&(r+=sC),t&&(r+=nC),n.filter(s=>!QE(s)).reduce((s,a)=>s+(eC.test(a)?tC:a===""?rC:iC),r)}function aC(e,t){return e.length===t.length&&e.slice(0,-1).every((r,s)=>r===t[s])?e[e.length-1]-t[t.length-1]:0}function cC(e,t,n=!1){let{routesMeta:r}=e,s={},a="/",l=[];for(let u=0;u<r.length;++u){let d=r[u],h=u===r.length-1,p=a==="/"?t:t.slice(a.length)||"/",y=Kh({path:d.relativePath,caseSensitive:d.caseSensitive,end:h},p),b=d.route;if(!y&&h&&n&&!r[r.length-1].route.index&&(y=Kh({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},p)),!y)return null;Object.assign(s,y.params),l.push({params:s,pathname:Gi([a,y.pathname]),pathnameBase:pC(Gi([a,y.pathnameBase])),route:b}),y.pathnameBase!=="/"&&(a=Gi([a,y.pathnameBase]))}return l}function Kh(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=lC(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let a=s[0],l=a.replace(/(.)\/+$/,"$1"),u=s.slice(1);return{params:r.reduce((h,{paramName:p,isOptional:y},b)=>{if(p==="*"){let v=u[b]||"";l=a.slice(0,a.length-v.length).replace(/(.)\/+$/,"$1")}const w=u[b];return y&&!w?h[p]=void 0:h[p]=(w||"").replace(/%2F/g,"/"),h},{}),pathname:a,pathnameBase:l,pattern:e}}function lC(e,t=!1,n=!0){hi(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,u,d)=>(r.push({paramName:u,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),r]}function uC(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return hi(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Wi(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function fC(e,t="/"){let{pathname:n,search:r="",hash:s=""}=typeof e=="string"?bc(e):e;return{pathname:n?n.startsWith("/")?n:hC(n,t):t,search:gC(r),hash:yC(s)}}function hC(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function gy(e,t,n,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function dC(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function AR(e){let t=dC(e);return t.map((n,r)=>r===t.length-1?n.pathname:n.pathnameBase)}function RR(e,t,n,r=!1){let s;typeof e=="string"?s=bc(e):(s={...e},_t(!s.pathname||!s.pathname.includes("?"),gy("?","pathname","search",s)),_t(!s.pathname||!s.pathname.includes("#"),gy("#","pathname","hash",s)),_t(!s.search||!s.search.includes("#"),gy("#","search","hash",s)));let a=e===""||s.pathname==="",l=a?"/":s.pathname,u;if(l==null)u=n;else{let y=t.length-1;if(!r&&l.startsWith("..")){let b=l.split("/");for(;b[0]==="..";)b.shift(),y-=1;s.pathname=b.join("/")}u=y>=0?t[y]:"/"}let d=fC(s,u),h=l&&l!=="/"&&l.endsWith("/"),p=(a||l===".")&&n.endsWith("/");return!d.pathname.endsWith("/")&&(h||p)&&(d.pathname+="/"),d}var Gi=e=>e.join("/").replace(/\/\/+/g,"/"),pC=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),gC=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,yC=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function mC(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var OR=["POST","PUT","PATCH","DELETE"];new Set(OR);var bC=["GET",...OR];new Set(bC);var wc=le.createContext(null);wc.displayName="DataRouter";var gd=le.createContext(null);gd.displayName="DataRouterState";var xR=le.createContext({isTransitioning:!1});xR.displayName="ViewTransition";var wC=le.createContext(new Map);wC.displayName="Fetchers";var vC=le.createContext(null);vC.displayName="Await";var yi=le.createContext(null);yi.displayName="Navigation";var Ou=le.createContext(null);Ou.displayName="Location";var mi=le.createContext({outlet:null,matches:[],isDataRoute:!1});mi.displayName="Route";var z0=le.createContext(null);z0.displayName="RouteError";function EC(e,{relative:t}={}){_t(xu(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=le.useContext(yi),{hash:s,pathname:a,search:l}=Tu(e,{relative:t}),u=a;return n!=="/"&&(u=a==="/"?n:Gi([n,a])),r.createHref({pathname:u,search:l,hash:s})}function xu(){return le.useContext(Ou)!=null}function jo(){return _t(xu(),"useLocation() may be used only in the context of a <Router> component."),le.useContext(Ou).location}var TR="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function DR(e){le.useContext(yi).static||le.useLayoutEffect(e)}function _C(){let{isDataRoute:e}=le.useContext(mi);return e?kC():SC()}function SC(){_t(xu(),"useNavigate() may be used only in the context of a <Router> component.");let e=le.useContext(wc),{basename:t,navigator:n}=le.useContext(yi),{matches:r}=le.useContext(mi),{pathname:s}=jo(),a=JSON.stringify(AR(r)),l=le.useRef(!1);return DR(()=>{l.current=!0}),le.useCallback((d,h={})=>{if(hi(l.current,TR),!l.current)return;if(typeof d=="number"){n.go(d);return}let p=RR(d,JSON.parse(a),s,h.relative==="path");e==null&&t!=="/"&&(p.pathname=p.pathname==="/"?t:Gi([t,p.pathname])),(h.replace?n.replace:n.push)(p,h.state,h)},[t,n,a,s,e])}var AC=le.createContext(null);function RC(e){let t=le.useContext(mi).outlet;return t&&le.createElement(AC.Provider,{value:e},t)}function Tu(e,{relative:t}={}){let{matches:n}=le.useContext(mi),{pathname:r}=jo(),s=JSON.stringify(AR(n));return le.useMemo(()=>RR(e,JSON.parse(s),r,t==="path"),[e,s,r,t])}function OC(e,t){return IR(e,t)}function IR(e,t,n,r){_t(xu(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=le.useContext(yi),{matches:a}=le.useContext(mi),l=a[a.length-1],u=l?l.params:{},d=l?l.pathname:"/",h=l?l.pathnameBase:"/",p=l&&l.route;{let R=p&&p.path||"";CR(d,!p||R.endsWith("*")||R.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${R}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${R}"> to <Route path="${R==="/"?"*":`${R}/*`}">.`)}let y=jo(),b;if(t){let R=typeof t=="string"?bc(t):t;_t(h==="/"||R.pathname?.startsWith(h),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${R.pathname}" was given in the \`location\` prop.`),b=R}else b=y;let w=b.pathname||"/",v=w;if(h!=="/"){let R=h.replace(/^\//,"").split("/");v="/"+w.replace(/^\//,"").split("/").slice(R.length).join("/")}let E=ER(e,{pathname:v});hi(p||E!=null,`No routes matched location "${b.pathname}${b.search}${b.hash}" `),hi(E==null||E[E.length-1].route.element!==void 0||E[E.length-1].route.Component!==void 0||E[E.length-1].route.lazy!==void 0,`Matched leaf route at location "${b.pathname}${b.search}${b.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let _=CC(E&&E.map(R=>Object.assign({},R,{params:Object.assign({},u,R.params),pathname:Gi([h,s.encodeLocation?s.encodeLocation(R.pathname).pathname:R.pathname]),pathnameBase:R.pathnameBase==="/"?h:Gi([h,s.encodeLocation?s.encodeLocation(R.pathnameBase).pathname:R.pathnameBase])})),a,n,r);return t&&_?le.createElement(Ou.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...b},navigationType:"POP"}},_):_}function xC(){let e=PC(),t=mC(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},l=null;return console.error("Error handled by React Router default ErrorBoundary:",e),l=le.createElement(le.Fragment,null,le.createElement("p",null," Hey developer "),le.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",le.createElement("code",{style:a},"ErrorBoundary")," or"," ",le.createElement("code",{style:a},"errorElement")," prop on your route.")),le.createElement(le.Fragment,null,le.createElement("h2",null,"Unexpected Application Error!"),le.createElement("h3",{style:{fontStyle:"italic"}},t),n?le.createElement("pre",{style:s},n):null,l)}var TC=le.createElement(xC,null),DC=class extends le.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?le.createElement(mi.Provider,{value:this.props.routeContext},le.createElement(z0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function IC({routeContext:e,match:t,children:n}){let r=le.useContext(wc);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),le.createElement(mi.Provider,{value:e},n)}function CC(e,t=[],n=null,r=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let s=e,a=n?.errors;if(a!=null){let d=s.findIndex(h=>h.route.id&&a?.[h.route.id]!==void 0);_t(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),s=s.slice(0,Math.min(s.length,d+1))}let l=!1,u=-1;if(n)for(let d=0;d<s.length;d++){let h=s[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=d),h.route.id){let{loaderData:p,errors:y}=n,b=h.route.loader&&!p.hasOwnProperty(h.route.id)&&(!y||y[h.route.id]===void 0);if(h.route.lazy||b){l=!0,u>=0?s=s.slice(0,u+1):s=[s[0]];break}}}return s.reduceRight((d,h,p)=>{let y,b=!1,w=null,v=null;n&&(y=a&&h.route.id?a[h.route.id]:void 0,w=h.route.errorElement||TC,l&&(u<0&&p===0?(CR("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),b=!0,v=null):u===p&&(b=!0,v=h.route.hydrateFallbackElement||null)));let E=t.concat(s.slice(0,p+1)),_=()=>{let R;return y?R=w:b?R=v:h.route.Component?R=le.createElement(h.route.Component,null):h.route.element?R=h.route.element:R=d,le.createElement(IC,{match:h,routeContext:{outlet:d,matches:E,isDataRoute:n!=null},children:R})};return n&&(h.route.ErrorBoundary||h.route.errorElement||p===0)?le.createElement(DC,{location:n.location,revalidation:n.revalidation,component:w,error:y,children:_(),routeContext:{outlet:null,matches:E,isDataRoute:!0}}):_()},null)}function q0(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function NC(e){let t=le.useContext(wc);return _t(t,q0(e)),t}function UC(e){let t=le.useContext(gd);return _t(t,q0(e)),t}function BC(e){let t=le.useContext(mi);return _t(t,q0(e)),t}function H0(e){let t=BC(e),n=t.matches[t.matches.length-1];return _t(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function $C(){return H0("useRouteId")}function PC(){let e=le.useContext(z0),t=UC("useRouteError"),n=H0("useRouteError");return e!==void 0?e:t.errors?.[n]}function kC(){let{router:e}=NC("useNavigate"),t=H0("useNavigate"),n=le.useRef(!1);return DR(()=>{n.current=!0}),le.useCallback(async(s,a={})=>{hi(n.current,TR),n.current&&(typeof s=="number"?e.navigate(s):await e.navigate(s,{fromRouteId:t,...a}))},[e,t])}var JE={};function CR(e,t,n){!t&&!JE[e]&&(JE[e]=!0,hi(!1,n))}le.memo(MC);function MC({routes:e,future:t,state:n}){return IR(e,void 0,n,t)}function LC(e){return RC(e.context)}function wo(e){_t(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function jC({basename:e="/",children:t=null,location:n,navigationType:r="POP",navigator:s,static:a=!1}){_t(!xu(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=e.replace(/^\/*/,"/"),u=le.useMemo(()=>({basename:l,navigator:s,static:a,future:{}}),[l,s,a]);typeof n=="string"&&(n=bc(n));let{pathname:d="/",search:h="",hash:p="",state:y=null,key:b="default"}=n,w=le.useMemo(()=>{let v=Wi(d,l);return v==null?null:{location:{pathname:v,search:h,hash:p,state:y,key:b},navigationType:r}},[l,d,h,p,y,b,r]);return hi(w!=null,`<Router basename="${l}"> is not able to match the URL "${d}${h}${p}" because it does not start with the basename, so the <Router> won't render anything.`),w==null?null:le.createElement(yi.Provider,{value:u},le.createElement(Ou.Provider,{children:t,value:w}))}function zC({children:e,location:t}){return OC(Um(e),t)}function Um(e,t=[]){let n=[];return le.Children.forEach(e,(r,s)=>{if(!le.isValidElement(r))return;let a=[...t,s];if(r.type===le.Fragment){n.push.apply(n,Um(r.props.children,a));return}_t(r.type===wo,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),_t(!r.props.index||!r.props.children,"An index route cannot have child routes.");let l={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(l.children=Um(r.props.children,a)),n.push(l)}),n}var Ch="get",Nh="application/x-www-form-urlencoded";function yd(e){return e!=null&&typeof e.tagName=="string"}function qC(e){return yd(e)&&e.tagName.toLowerCase()==="button"}function HC(e){return yd(e)&&e.tagName.toLowerCase()==="form"}function FC(e){return yd(e)&&e.tagName.toLowerCase()==="input"}function VC(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function GC(e,t){return e.button===0&&(!t||t==="_self")&&!VC(e)}var nh=null;function KC(){if(nh===null)try{new FormData(document.createElement("form"),0),nh=!1}catch{nh=!0}return nh}var YC=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function yy(e){return e!=null&&!YC.has(e)?(hi(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Nh}"`),null):e}function WC(e,t){let n,r,s,a,l;if(HC(e)){let u=e.getAttribute("action");r=u?Wi(u,t):null,n=e.getAttribute("method")||Ch,s=yy(e.getAttribute("enctype"))||Nh,a=new FormData(e)}else if(qC(e)||FC(e)&&(e.type==="submit"||e.type==="image")){let u=e.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=e.getAttribute("formaction")||u.getAttribute("action");if(r=d?Wi(d,t):null,n=e.getAttribute("formmethod")||u.getAttribute("method")||Ch,s=yy(e.getAttribute("formenctype"))||yy(u.getAttribute("enctype"))||Nh,a=new FormData(u,e),!KC()){let{name:h,type:p,value:y}=e;if(p==="image"){let b=h?`${h}.`:"";a.append(`${b}x`,"0"),a.append(`${b}y`,"0")}else h&&a.append(h,y)}}else{if(yd(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Ch,r=null,s=Nh,l=e}return a&&s==="text/plain"&&(l=a,a=void 0),{action:r,method:n.toLowerCase(),encType:s,formData:a,body:l}}function F0(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}async function XC(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function ZC(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function QC(e,t,n){let r=await Promise.all(e.map(async s=>{let a=t.routes[s.route.id];if(a){let l=await XC(a,n);return l.links?l.links():[]}return[]}));return nN(r.flat(1).filter(ZC).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function e2(e,t,n,r,s,a){let l=(d,h)=>n[h]?d.route.id!==n[h].route.id:!0,u=(d,h)=>n[h].pathname!==d.pathname||n[h].route.path?.endsWith("*")&&n[h].params["*"]!==d.params["*"];return a==="assets"?t.filter((d,h)=>l(d,h)||u(d,h)):a==="data"?t.filter((d,h)=>{let p=r.routes[d.route.id];if(!p||!p.hasLoader)return!1;if(l(d,h)||u(d,h))return!0;if(d.route.shouldRevalidate){let y=d.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function JC(e,t,{includeHydrateFallback:n}={}){return eN(e.map(r=>{let s=t.routes[r.route.id];if(!s)return[];let a=[s.module];return s.clientActionModule&&(a=a.concat(s.clientActionModule)),s.clientLoaderModule&&(a=a.concat(s.clientLoaderModule)),n&&s.hydrateFallbackModule&&(a=a.concat(s.hydrateFallbackModule)),s.imports&&(a=a.concat(s.imports)),a}).flat(1))}function eN(e){return[...new Set(e)]}function tN(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}function nN(e,t){let n=new Set;return new Set(t),e.reduce((r,s)=>{let a=JSON.stringify(tN(s));return n.has(a)||(n.add(a),r.push({key:a,link:s})),r},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var rN=new Set([100,101,204,205]);function iN(e,t){let n=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return n.pathname==="/"?n.pathname="_root.data":t&&Wi(n.pathname,t)==="/"?n.pathname=`${t.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function NR(){let e=le.useContext(wc);return F0(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function sN(){let e=le.useContext(gd);return F0(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var V0=le.createContext(void 0);V0.displayName="FrameworkContext";function UR(){let e=le.useContext(V0);return F0(e,"You must render this element inside a <HydratedRouter> element"),e}function oN(e,t){let n=le.useContext(V0),[r,s]=le.useState(!1),[a,l]=le.useState(!1),{onFocus:u,onBlur:d,onMouseEnter:h,onMouseLeave:p,onTouchStart:y}=t,b=le.useRef(null);le.useEffect(()=>{if(e==="render"&&l(!0),e==="viewport"){let E=R=>{R.forEach(D=>{l(D.isIntersecting)})},_=new IntersectionObserver(E,{threshold:.5});return b.current&&_.observe(b.current),()=>{_.disconnect()}}},[e]),le.useEffect(()=>{if(r){let E=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(E)}}},[r]);let w=()=>{s(!0)},v=()=>{s(!1),l(!1)};return n?e!=="intent"?[a,b,{}]:[a,b,{onFocus:Il(u,w),onBlur:Il(d,v),onMouseEnter:Il(h,w),onMouseLeave:Il(p,v),onTouchStart:Il(y,w)}]:[!1,b,{}]}function Il(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function aN({page:e,...t}){let{router:n}=NR(),r=le.useMemo(()=>ER(n.routes,e,n.basename),[n.routes,e,n.basename]);return r?le.createElement(lN,{page:e,matches:r,...t}):null}function cN(e){let{manifest:t,routeModules:n}=UR(),[r,s]=le.useState([]);return le.useEffect(()=>{let a=!1;return QC(e,t,n).then(l=>{a||s(l)}),()=>{a=!0}},[e,t,n]),r}function lN({page:e,matches:t,...n}){let r=jo(),{manifest:s,routeModules:a}=UR(),{basename:l}=NR(),{loaderData:u,matches:d}=sN(),h=le.useMemo(()=>e2(e,t,d,s,r,"data"),[e,t,d,s,r]),p=le.useMemo(()=>e2(e,t,d,s,r,"assets"),[e,t,d,s,r]),y=le.useMemo(()=>{if(e===r.pathname+r.search+r.hash)return[];let v=new Set,E=!1;if(t.forEach(R=>{let D=s.routes[R.route.id];!D||!D.hasLoader||(!h.some(I=>I.route.id===R.route.id)&&R.route.id in u&&a[R.route.id]?.shouldRevalidate||D.hasClientLoader?E=!0:v.add(R.route.id))}),v.size===0)return[];let _=iN(e,l);return E&&v.size>0&&_.searchParams.set("_routes",t.filter(R=>v.has(R.route.id)).map(R=>R.route.id).join(",")),[_.pathname+_.search]},[l,u,r,s,h,t,e,a]),b=le.useMemo(()=>JC(p,s),[p,s]),w=cN(p);return le.createElement(le.Fragment,null,y.map(v=>le.createElement("link",{key:v,rel:"prefetch",as:"fetch",href:v,...n})),b.map(v=>le.createElement("link",{key:v,rel:"modulepreload",href:v,...n})),w.map(({key:v,link:E})=>le.createElement("link",{key:v,...E})))}function uN(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var BR=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{BR&&(window.__reactRouterVersion="7.6.3")}catch{}function fN({basename:e,children:t,window:n}){let r=le.useRef();r.current==null&&(r.current=Y8({window:n,v5Compat:!0}));let s=r.current,[a,l]=le.useState({action:s.action,location:s.location}),u=le.useCallback(d=>{le.startTransition(()=>l(d))},[l]);return le.useLayoutEffect(()=>s.listen(u),[s,u]),le.createElement(jC,{basename:e,children:t,location:a.location,navigationType:a.action,navigator:s})}var $R=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,PR=le.forwardRef(function({onClick:t,discover:n="render",prefetch:r="none",relative:s,reloadDocument:a,replace:l,state:u,target:d,to:h,preventScrollReset:p,viewTransition:y,...b},w){let{basename:v}=le.useContext(yi),E=typeof h=="string"&&$R.test(h),_,R=!1;if(typeof h=="string"&&E&&(_=h,BR))try{let P=new URL(window.location.href),V=h.startsWith("//")?new URL(P.protocol+h):new URL(h),G=Wi(V.pathname,v);V.origin===P.origin&&G!=null?h=G+V.search+V.hash:R=!0}catch{hi(!1,`<Link to="${h}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let D=EC(h,{relative:s}),[I,$,U]=oN(r,b),k=pN(h,{replace:l,state:u,target:d,preventScrollReset:p,relative:s,viewTransition:y});function q(P){t&&t(P),P.defaultPrevented||k(P)}let H=le.createElement("a",{...b,...U,href:_||D,onClick:R||a?t:q,ref:uN(w,$),target:d,"data-discover":!E&&n==="render"?"true":void 0});return I&&!E?le.createElement(le.Fragment,null,H,le.createElement(aN,{page:D})):H});PR.displayName="Link";var vo=le.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:r="",end:s=!1,style:a,to:l,viewTransition:u,children:d,...h},p){let y=Tu(l,{relative:h.relative}),b=jo(),w=le.useContext(gd),{navigator:v,basename:E}=le.useContext(yi),_=w!=null&&wN(y)&&u===!0,R=v.encodeLocation?v.encodeLocation(y).pathname:y.pathname,D=b.pathname,I=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;n||(D=D.toLowerCase(),I=I?I.toLowerCase():null,R=R.toLowerCase()),I&&E&&(I=Wi(I,E)||I);const $=R!=="/"&&R.endsWith("/")?R.length-1:R.length;let U=D===R||!s&&D.startsWith(R)&&D.charAt($)==="/",k=I!=null&&(I===R||!s&&I.startsWith(R)&&I.charAt(R.length)==="/"),q={isActive:U,isPending:k,isTransitioning:_},H=U?t:void 0,P;typeof r=="function"?P=r(q):P=[r,U?"active":null,k?"pending":null,_?"transitioning":null].filter(Boolean).join(" ");let V=typeof a=="function"?a(q):a;return le.createElement(PR,{...h,"aria-current":H,className:P,ref:p,style:V,to:l,viewTransition:u},typeof d=="function"?d(q):d)});vo.displayName="NavLink";var hN=le.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:r,replace:s,state:a,method:l=Ch,action:u,onSubmit:d,relative:h,preventScrollReset:p,viewTransition:y,...b},w)=>{let v=mN(),E=bN(u,{relative:h}),_=l.toLowerCase()==="get"?"get":"post",R=typeof u=="string"&&$R.test(u),D=I=>{if(d&&d(I),I.defaultPrevented)return;I.preventDefault();let $=I.nativeEvent.submitter,U=$?.getAttribute("formmethod")||l;v($||I.currentTarget,{fetcherKey:t,method:U,navigate:n,replace:s,state:a,relative:h,preventScrollReset:p,viewTransition:y})};return le.createElement("form",{ref:w,method:_,action:E,onSubmit:r?d:D,...b,"data-discover":!R&&e==="render"?"true":void 0})});hN.displayName="Form";function dN(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function kR(e){let t=le.useContext(wc);return _t(t,dN(e)),t}function pN(e,{target:t,replace:n,state:r,preventScrollReset:s,relative:a,viewTransition:l}={}){let u=_C(),d=jo(),h=Tu(e,{relative:a});return le.useCallback(p=>{if(GC(p,t)){p.preventDefault();let y=n!==void 0?n:fu(d)===fu(h);u(e,{replace:y,state:r,preventScrollReset:s,relative:a,viewTransition:l})}},[d,u,h,n,r,t,e,s,a,l])}var gN=0,yN=()=>`__${String(++gN)}__`;function mN(){let{router:e}=kR("useSubmit"),{basename:t}=le.useContext(yi),n=$C();return le.useCallback(async(r,s={})=>{let{action:a,method:l,encType:u,formData:d,body:h}=WC(r,t);if(s.navigate===!1){let p=s.fetcherKey||yN();await e.fetch(p,n,s.action||a,{preventScrollReset:s.preventScrollReset,formData:d,body:h,formMethod:s.method||l,formEncType:s.encType||u,flushSync:s.flushSync})}else await e.navigate(s.action||a,{preventScrollReset:s.preventScrollReset,formData:d,body:h,formMethod:s.method||l,formEncType:s.encType||u,replace:s.replace,state:s.state,fromRouteId:n,flushSync:s.flushSync,viewTransition:s.viewTransition})},[e,t,n])}function bN(e,{relative:t}={}){let{basename:n}=le.useContext(yi),r=le.useContext(mi);_t(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),a={...Tu(e||".",{relative:t})},l=jo();if(e==null){a.search=l.search;let u=new URLSearchParams(a.search),d=u.getAll("index");if(d.some(p=>p==="")){u.delete("index"),d.filter(y=>y).forEach(y=>u.append("index",y));let p=u.toString();a.search=p?`?${p}`:""}}return(!e||e===".")&&s.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(a.pathname=a.pathname==="/"?n:Gi([n,a.pathname])),fu(a)}function wN(e,t={}){let n=le.useContext(xR);_t(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=kR("useViewTransitionState"),s=Tu(e,{relative:t.relative});if(!n.isTransitioning)return!1;let a=Wi(n.currentLocation.pathname,r)||n.currentLocation.pathname,l=Wi(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Kh(s.pathname,l)!=null||Kh(s.pathname,a)!=null}[...rN];let MR=null;const vN=e=>{MR=e};let ft=function(e){return e[e.debug=5]="debug",e[e.info=4]="info",e[e.log=3]="log",e[e.warn=2]="warn",e[e.error=1]="error",e}({});const EN=e=>{const{title:t,message:n}=e;return[`
    %c${t}
    ============================

    ${n}

    ============================
    `.replace(/\n[^\S\r\n]+/g,`
`).trim(),"font-weight:bold;font-family:monospace;"]},qe=async e=>{const{title:t,message:n,level:r,always:s}=e,a=await MR?.()?.get("logger.level")??ft.warn;if(!s&&a<r)return;const l=EN({title:t,message:n});switch(r){case ft.debug:console.debug(...l);break;case ft.info:console.info(...l);break;case ft.warn:console.warn(...l);break;case ft.error:console.error(...l);break;default:console.log(...l)}};qe.deprecate=e=>{const{pkg:t,subject:n,transition:r,level:s=ft.warn,message:a="",callback:l=null}=e,u=h=>h.charAt(0).toUpperCase()+h.slice(1),d=()=>qe({title:`${t?t+" ":""}Deprecation Notice`,message:`
      ${n?`${u(n)} is deprecated and will cease to work in future releases${t?" of "+t:""}.`:""}${a?`
`+a:""}${r?`
You can learn more (including a guide on common transition paths) here: ${r}`:""}
    `.trim(),level:s});return typeof l=="function"?async function(){return await d(),await l(...arguments)}:d()};function fe(e,t){if(!e){const a=new Error(`INVARIANT ${t}`);a.stack=a.stack?.split(`
`)?.filter(l=>!/at invariant/.test(l))?.join(`
`);for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];throw console.error(`

---

`,a,`

`,...r,`

---

`),a}}let rh;const _N=new Uint8Array(16);function SN(){if(!rh&&(rh=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!rh))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return rh(_N)}const an=[];for(let e=0;e<256;++e)an.push((e+256).toString(16).slice(1));function AN(e,t=0){return an[e[t+0]]+an[e[t+1]]+an[e[t+2]]+an[e[t+3]]+"-"+an[e[t+4]]+an[e[t+5]]+"-"+an[e[t+6]]+an[e[t+7]]+"-"+an[e[t+8]]+an[e[t+9]]+"-"+an[e[t+10]]+an[e[t+11]]+an[e[t+12]]+an[e[t+13]]+an[e[t+14]]+an[e[t+15]]}const RN=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),t2={randomUUID:RN};function G0(e,t,n){if(t2.randomUUID&&!e)return t2.randomUUID();e=e||{};const r=e.random||(e.rng||SN)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,AN(r)}var tt=function(e){return e.UNKNOWN="UNKNOWN",e.SCRIPT="SCRIPT",e.TRANSACTION="TRANSACTION",e.GET_TRANSACTION_STATUS="GET_TRANSACTION_STATUS",e.GET_ACCOUNT="GET_ACCOUNT",e.GET_EVENTS="GET_EVENTS",e.PING="PING",e.GET_TRANSACTION="GET_TRANSACTION",e.GET_BLOCK="GET_BLOCK",e.GET_BLOCK_HEADER="GET_BLOCK_HEADER",e.GET_COLLECTION="GET_COLLECTION",e.GET_NETWORK_PARAMETERS="GET_NETWORK_PARAMETERS",e.SUBSCRIBE_EVENTS="SUBSCRIBE_EVENTS",e.GET_NODE_VERSION_INFO="GET_NODE_VERSION_INFO",e}({}),Du=function(e){return e.BAD="BAD",e.OK="OK",e}({}),hu=function(e){return e.AUTHORIZER="authorizer",e.PAYER="payer",e.PROPOSER="proposer",e}({}),md=function(e){return e.ARGUMENT="ARGUMENT",e.ACCOUNT="ACCOUNT",e}({}),n2=function(e){return e[e.UNKNOWN_ERROR=-1]="UNKNOWN_ERROR",e[e.TX_VALIDATION_ERROR=1e3]="TX_VALIDATION_ERROR",e[e.INVALID_TX_BYTE_SIZE_ERROR=1001]="INVALID_TX_BYTE_SIZE_ERROR",e[e.INVALID_REFERENCE_BLOCK_ERROR=1002]="INVALID_REFERENCE_BLOCK_ERROR",e[e.EXPIRED_TRANSACTION_ERROR=1003]="EXPIRED_TRANSACTION_ERROR",e[e.INVALID_SCRIPT_ERROR=1004]="INVALID_SCRIPT_ERROR",e[e.INVALID_GAS_LIMIT_ERROR=1005]="INVALID_GAS_LIMIT_ERROR",e[e.INVALID_PROPOSAL_SIGNATURE_ERROR=1006]="INVALID_PROPOSAL_SIGNATURE_ERROR",e[e.INVALID_PROPOSAL_SEQ_NUMBER_ERROR=1007]="INVALID_PROPOSAL_SEQ_NUMBER_ERROR",e[e.INVALID_PAYLOAD_SIGNATURE_ERROR=1008]="INVALID_PAYLOAD_SIGNATURE_ERROR",e[e.INVALID_ENVELOPE_SIGNATURE_ERROR=1009]="INVALID_ENVELOPE_SIGNATURE_ERROR",e[e.FVM_INTERNAL_ERROR=1050]="FVM_INTERNAL_ERROR",e[e.VALUE_ERROR=1051]="VALUE_ERROR",e[e.INVALID_ARGUMENT_ERROR=1052]="INVALID_ARGUMENT_ERROR",e[e.INVALID_ADDRESS_ERROR=1053]="INVALID_ADDRESS_ERROR",e[e.INVALID_LOCATION_ERROR=1054]="INVALID_LOCATION_ERROR",e[e.ACCOUNT_AUTHORIZATION_ERROR=1055]="ACCOUNT_AUTHORIZATION_ERROR",e[e.OPERATION_AUTHORIZATION_ERROR=1056]="OPERATION_AUTHORIZATION_ERROR",e[e.OPERATION_NOT_SUPPORTED_ERROR=1057]="OPERATION_NOT_SUPPORTED_ERROR",e[e.BLOCK_HEIGHT_OUT_OF_RANGE_ERROR=1058]="BLOCK_HEIGHT_OUT_OF_RANGE_ERROR",e[e.EXECUTION_ERROR=1100]="EXECUTION_ERROR",e[e.CADENCE_RUNTIME_ERROR=1101]="CADENCE_RUNTIME_ERROR",e[e.ENCODING_UNSUPPORTED_VALUE=1102]="ENCODING_UNSUPPORTED_VALUE",e[e.STORAGE_CAPACITY_EXCEEDED=1103]="STORAGE_CAPACITY_EXCEEDED",e[e.GAS_LIMIT_EXCEEDED_ERROR=1104]="GAS_LIMIT_EXCEEDED_ERROR",e[e.EVENT_LIMIT_EXCEEDED_ERROR=1105]="EVENT_LIMIT_EXCEEDED_ERROR",e[e.LEDGER_INTERACTION_LIMIT_EXCEEDED_ERROR=1106]="LEDGER_INTERACTION_LIMIT_EXCEEDED_ERROR",e[e.STATE_KEY_SIZE_LIMIT_ERROR=1107]="STATE_KEY_SIZE_LIMIT_ERROR",e[e.STATE_VALUE_SIZE_LIMIT_ERROR=1108]="STATE_VALUE_SIZE_LIMIT_ERROR",e[e.TRANSACTION_FEE_DEDUCTION_FAILED_ERROR=1109]="TRANSACTION_FEE_DEDUCTION_FAILED_ERROR",e[e.COMPUTATION_LIMIT_EXCEEDED_ERROR=1110]="COMPUTATION_LIMIT_EXCEEDED_ERROR",e[e.MEMORY_LIMIT_EXCEEDED_ERROR=1111]="MEMORY_LIMIT_EXCEEDED_ERROR",e[e.COULD_NOT_DECODE_EXECUTION_PARAMETER_FROM_STATE=1112]="COULD_NOT_DECODE_EXECUTION_PARAMETER_FROM_STATE",e[e.SCRIPT_EXECUTION_TIMED_OUT_ERROR=1113]="SCRIPT_EXECUTION_TIMED_OUT_ERROR",e[e.SCRIPT_EXECUTION_CANCELLED_ERROR=1114]="SCRIPT_EXECUTION_CANCELLED_ERROR",e[e.EVENT_ENCODING_ERROR=1115]="EVENT_ENCODING_ERROR",e[e.INVALID_INTERNAL_STATE_ACCESS_ERROR=1116]="INVALID_INTERNAL_STATE_ACCESS_ERROR",e[e.INSUFFICIENT_PAYER_BALANCE=1118]="INSUFFICIENT_PAYER_BALANCE",e[e.ACCOUNT_ERROR=1200]="ACCOUNT_ERROR",e[e.ACCOUNT_NOT_FOUND_ERROR=1201]="ACCOUNT_NOT_FOUND_ERROR",e[e.ACCOUNT_PUBLIC_KEY_NOT_FOUND_ERROR=1202]="ACCOUNT_PUBLIC_KEY_NOT_FOUND_ERROR",e[e.ACCOUNT_ALREADY_EXISTS_ERROR=1203]="ACCOUNT_ALREADY_EXISTS_ERROR",e[e.FROZEN_ACCOUNT_ERROR=1204]="FROZEN_ACCOUNT_ERROR",e[e.ACCOUNT_STORAGE_NOT_INITIALIZED_ERROR=1205]="ACCOUNT_STORAGE_NOT_INITIALIZED_ERROR",e[e.ACCOUNT_PUBLIC_KEY_LIMIT_ERROR=1206]="ACCOUNT_PUBLIC_KEY_LIMIT_ERROR",e[e.CONTRACT_ERROR=1250]="CONTRACT_ERROR",e[e.CONTRACT_NOT_FOUND_ERROR=1251]="CONTRACT_NOT_FOUND_ERROR",e[e.CONTRACT_NAMES_NOT_FOUND_ERROR=1252]="CONTRACT_NAMES_NOT_FOUND_ERROR",e[e.EVM_EXECUTION_ERROR=1300]="EVM_EXECUTION_ERROR",e}({}),zo=function(e){return e.BLOCKS="blocks",e.BLOCK_HEADERS="block_headers",e.BLOCK_DIGESTS="block_digests",e.ACCOUNT_STATUSES="account_statuses",e.TRANSACTION_STATUSES="transaction_statuses",e.EVENTS="events",e}({}),ON=function(e){return e[e.UNKNOWN=0]="UNKNOWN",e[e.PENDING=1]="PENDING",e[e.FINALIZED=2]="FINALIZED",e[e.EXECUTED=3]="EXECUTED",e[e.SEALED=4]="SEALED",e[e.EXPIRED=5]="EXPIRED",e}({});const xN=()=>{const e=[];let t;return{async deliver(n){e.push(n),t&&(t(e.shift()),t=void 0)},receive(){return new Promise(function(r){const s=e.shift();if(s)return r(s);t=r})}}};let r2;const TN=e=>(r2||(r2=Promise.resolve())).then(e).catch(t=>setTimeout(()=>{throw t},0)),du="INIT",vc="SUBSCRIBE",Co="UNSUBSCRIBE",Bm="UPDATED",LR="SNAPSHOT",$m="EXIT",i2="TERMINATE",Uh=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||typeof window=="object"&&window.window===window&&window||{FCL_REGISTRY:null};Uh.FCL_REGISTRY=Uh.FCL_REGISTRY==null?{}:Uh.FCL_REGISTRY;const ut=Uh.FCL_REGISTRY;let my=0;const DN=5e3;function Ft(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{expectReply:!1};return new Promise((s,a)=>{const l=r.expectReply||!1,u=r.timeout!=null?r.timeout:DN;l&&u&&setTimeout(()=>a(new Error(`Timeout: ${u}ms passed without a response.`)),u);const d={to:e,from:r.from,tag:t,data:n,timeout:u,reply:s,reject:a};try{ut[e]&&ut[e].mailbox.deliver(d),l||s(!0)}catch(h){console.error("FCL.Actor -- Could Not Deliver Message",d,ut[e],h),a(h)}})}const IN=e=>{delete ut[e]},CN=e=>async t=>{typeof e[du]=="function"&&await e[du](t);e:for(;;){const n=await t.receive();try{if(n.tag===$m){typeof e[i2]=="function"&&await e[i2](t,n,n.data||{});break e}await e[n.tag]?.(t,n,n.data||{})}catch(r){console.error(`${t.self()} Error`,n,r)}finally{continue e}}},NN=e=>{if(e==null){for(;ut[String(my)];)my++;return String(my)}return String(e)},qo=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;const n=NN(t);if(ut[n]!=null)return n;ut[n]={addr:n,mailbox:xN(),subs:new Set,kvs:{},error:null};const r=UN(n);let s;return typeof e=="object"?s=CN(e):s=e,TN(async()=>{await s(r),IN(n)}),n},UN=e=>({self:()=>e,receive:()=>ut[e].mailbox.receive(),send:function(t,n,r){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};if(t!=null)return s.from=e,Ft(t,n,r,s)},sendSelf:function(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};ut[e]&&Ft(e,t,n,r)},broadcast:function(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};r.from=e;for(const s of ut[e].subs)Ft(s,t,n,r)},subscribe:t=>t!=null&&ut[e].subs.add(t),unsubscribe:t=>t!=null&&ut[e].subs.delete(t),subscriberCount:()=>ut[e].subs.size,hasSubs:()=>!!ut[e].subs.size,put:(t,n)=>{t!=null&&(ut[e].kvs[t]=n)},get:function(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;const r=ut[e].kvs[t];return r??n},delete:t=>{delete ut[e].kvs[t]},update:(t,n)=>{t!=null&&(ut[e].kvs[t]=n(ut[e].kvs[t]))},keys:()=>Object.keys(ut[e].kvs),all:()=>ut[e].kvs,where:t=>Object.keys(ut[e].kvs).reduce((n,r)=>t.test(r)?{...n,[r]:ut[e].kvs[r]}:n,{}),merge:function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.keys(t).forEach(n=>ut[e].kvs[n]=t[n])},fatalError:t=>{ut[e].error=t;for(const n of ut[e].subs)Ft(n,Bm)}});function K0(e,t,n){t(e);const r=qo(async s=>{for(s.send(e,vc);;){const a=await s.receive(),l=ut[e].error;if(a.tag===$m){s.send(e,Co);return}if(l){n(null,l),s.send(e,Co);return}n(a.data,null)}});return()=>Ft(r,$m)}function jR(e,t){return t(e),Ft(e,LR,null,{expectReply:!0,timeout:0})}const by=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r=>t.reduce((s,a)=>a(s),r)},BN=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r=>t.reduce((s,a)=>({...s,...a(r)}),{})},wy=e=>e&&typeof e=="object"&&!Array.isArray(e),Pm=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(!n.length)return e;const s=n.shift();if(wy(e)&&wy(s))for(const a in s)wy(s[a])?(e[a]||Object.assign(e,{[a]:{}}),Pm(e[a],s[a])):Object.assign(e,{[a]:s[a]});return Pm(e,...n)},$N=e=>Array.isArray(e)?Pm({},...e):e,PN=e=>e.contracts?e.contracts:{},kN=e=>e.dependencies?e.dependencies:{},MN=e=>t=>Object.entries(t).reduce((n,r)=>{let[s,a]=r;const l=a?.aliases?.[e];return l&&(n[s]=l),n},{}),LN=e=>t=>Object.entries(t).reduce((n,r)=>{let[s,a]=r;const l=a?.aliases?.[e];return l&&(n[s]=l),n},{}),jN=e=>t=>{let{deployments:n={},accounts:r={}}=t;const s=n?.[e];return s?Object.entries(s).reduce((a,l)=>{let[u,d]=l;const h=r[u]?.address;return h?d.reduce((p,y)=>({...p,[y]:h}),{}):a},{}):{}},zN=(e,t)=>by($N,BN(jN(t),by(PN,MN(t)),by(kN,LN(t))))(e),qN=e=>typeof e!="string"?!1:/^[0-9A-Fa-f]+$/.test(e),s2=e=>Object.entries(e?.accounts??[]).reduce((t,n)=>{let[,r]=n;return t?!0:r&&Object.prototype.hasOwnProperty.call(r,"key")&&qN(r?.key)},!1),HN=e=>Array.isArray(e)?e.some(s2):s2(e),FN=e=>{const t=e?.toLowerCase()==="local"?"emulator":e?.toLowerCase();if(t==="emulator"||t==="testnet"||t==="mainnet"||t==="previewnet")return t;throw new Error(`Invalid network "${e}". Must be one of "emulator", "local", "testnet", or "mainnet"`)};vN(Ae);const di="config",zR="PUT_CONFIG",qR="GET_CONFIG",HR="GET_ALL_CONFIG",FR="UPDATE_CONFIG",VR="DELETE_CONFIG",GR="CLEAR_CONFIG",KR="WHERE_CONFIG",Cl="CONFIG/UPDATED",YR=e=>e,WR={[zR]:(e,t,n)=>{let{key:r,value:s}=n;if(r==null)throw new Error("Missing 'key' for config/put.");e.put(r,s),e.broadcast(Cl,{...e.all()})},[qR]:(e,t,n)=>{let{key:r,fallback:s}=n;if(r==null)throw new Error("Missing 'key' for config/get");t.reply(e.get(r,s))},[HR]:(e,t)=>{t.reply({...e.all()})},[FR]:(e,t,n)=>{let{key:r,fn:s}=n;if(r==null)throw new Error("Missing 'key' for config/update");e.update(r,s||YR),e.broadcast(Cl,{...e.all()})},[VR]:(e,t,n)=>{let{key:r}=n;if(r==null)throw new Error("Missing 'key' for config/delete");e.delete(r),e.broadcast(Cl,{...e.all()})},[GR]:e=>{const t=Object.keys(e.all());for(const n of t)e.delete(n);e.broadcast(Cl,{...e.all()})},[KR]:(e,t,n)=>{let{pattern:r}=n;if(r==null)throw new Error("Missing 'pattern' for config/where");t.reply(e.where(r))},[vc]:(e,t)=>{e.subscribe(t.from),e.send(t.from,Cl,{...e.all()})},[Co]:(e,t)=>{e.unsubscribe(t.from)}};qo(WR,di);function pu(e,t){return Ft(di,zR,{key:e,value:t}),Ae()}function uc(e,t){return Ft(di,qR,{key:e,fallback:t},{expectReply:!0,timeout:10})}async function Y0(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;if(!e.length)return t;const[n,...r]=e,s=await uc(n);return s??Y0(r,t)}function Yh(){return Ft(di,HR,null,{expectReply:!0,timeout:10})}function XR(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:YR;return Ft(di,FR,{key:e,fn:t}),Ae()}function ZR(e){return Ft(di,VR,{key:e}),Ae()}function QR(e){return Ft(di,KR,{pattern:e},{expectReply:!0,timeout:10})}function JR(e){return K0(di,()=>qo(WR,di),e)}async function VN(){await Ft(di,GR)}async function GN(e){return VN().then(()=>Ae(e))}async function e3(e){let{ignoreConflicts:t=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=await uc("flow.network"),r=FN(n),{flowJSON:s}=e;if(fe(!!s,"config.load -- 'flowJSON' must be defined"),fe(!!r,'Flow Network Required -- In order for FCL to load your contracts please define "flow.network" to "emulator", "local", "testnet", or "mainnet" in your config. See more here: https://developers.flow.com/tools/fcl-js/reference/configure-fcl'),HN(s)){const a=r==="emulator";qe({title:"Private Keys Detected",message:"Private keys should be stored in a separate flow.json file for security. See more here: https://developers.flow.com/tools/flow-cli/security",level:a?ft.warn:ft.error}),fe(a,"Private keys should be stored in a separate flow.json file for security. See more here: https://developers.flow.com/tools/flow-cli/security")}for(const[a,l]of Object.entries(zN(s,r))){const u=`0x${a}`,d=await uc(u);d&&d!==l&&!t?qe({title:"Contract Placeholder Conflict Detected",message:"A generated contract placeholder from config.load conflicts with a placeholder you've set manually in config have the same name.",level:ft.warn}):pu(u,l);const h=`system.contracts.${a}`,p=await uc(h);p&&p!==l&&!t?qe({title:"Contract Placeholder Conflict Detected",message:"A generated contract placeholder from config.load conflicts with a placeholder you've set manually in config have the same name.",level:ft.warn}):pu(h,l)}}function Ae(e){return e!=null&&typeof e=="object"&&Object.keys(e).map(t=>pu(t,e[t])),{put:pu,get:uc,all:Yh,first:Y0,update:XR,delete:ZR,where:QR,subscribe:JR,overload:t3,load:e3}}Ae.put=pu;Ae.get=uc;Ae.all=Yh;Ae.first=Y0;Ae.update=XR;Ae.delete=ZR;Ae.where=QR;Ae.subscribe=JR;Ae.overload=t3;Ae.load=e3;async function t3(e,t){const n=await Yh();try{return Ae(e),await t(await Yh())}finally{await GN(n)}}var vy={},Nl={},o2;function KN(){if(o2)return Nl;o2=1,Nl.byteLength=u,Nl.toByteArray=h,Nl.fromByteArray=b;for(var e=[],t=[],n=typeof Uint8Array<"u"?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,a=r.length;s<a;++s)e[s]=r[s],t[r.charCodeAt(s)]=s;t[45]=62,t[95]=63;function l(w){var v=w.length;if(v%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var E=w.indexOf("=");E===-1&&(E=v);var _=E===v?0:4-E%4;return[E,_]}function u(w){var v=l(w),E=v[0],_=v[1];return(E+_)*3/4-_}function d(w,v,E){return(v+E)*3/4-E}function h(w){var v,E=l(w),_=E[0],R=E[1],D=new n(d(w,_,R)),I=0,$=R>0?_-4:_,U;for(U=0;U<$;U+=4)v=t[w.charCodeAt(U)]<<18|t[w.charCodeAt(U+1)]<<12|t[w.charCodeAt(U+2)]<<6|t[w.charCodeAt(U+3)],D[I++]=v>>16&255,D[I++]=v>>8&255,D[I++]=v&255;return R===2&&(v=t[w.charCodeAt(U)]<<2|t[w.charCodeAt(U+1)]>>4,D[I++]=v&255),R===1&&(v=t[w.charCodeAt(U)]<<10|t[w.charCodeAt(U+1)]<<4|t[w.charCodeAt(U+2)]>>2,D[I++]=v>>8&255,D[I++]=v&255),D}function p(w){return e[w>>18&63]+e[w>>12&63]+e[w>>6&63]+e[w&63]}function y(w,v,E){for(var _,R=[],D=v;D<E;D+=3)_=(w[D]<<16&16711680)+(w[D+1]<<8&65280)+(w[D+2]&255),R.push(p(_));return R.join("")}function b(w){for(var v,E=w.length,_=E%3,R=[],D=16383,I=0,$=E-_;I<$;I+=D)R.push(y(w,I,I+D>$?$:I+D));return _===1?(v=w[E-1],R.push(e[v>>2]+e[v<<4&63]+"==")):_===2&&(v=(w[E-2]<<8)+w[E-1],R.push(e[v>>10]+e[v>>4&63]+e[v<<2&63]+"=")),R.join("")}return Nl}var ih={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var a2;function YN(){return a2||(a2=1,ih.read=function(e,t,n,r,s){var a,l,u=s*8-r-1,d=(1<<u)-1,h=d>>1,p=-7,y=n?s-1:0,b=n?-1:1,w=e[t+y];for(y+=b,a=w&(1<<-p)-1,w>>=-p,p+=u;p>0;a=a*256+e[t+y],y+=b,p-=8);for(l=a&(1<<-p)-1,a>>=-p,p+=r;p>0;l=l*256+e[t+y],y+=b,p-=8);if(a===0)a=1-h;else{if(a===d)return l?NaN:(w?-1:1)*(1/0);l=l+Math.pow(2,r),a=a-h}return(w?-1:1)*l*Math.pow(2,a-r)},ih.write=function(e,t,n,r,s,a){var l,u,d,h=a*8-s-1,p=(1<<h)-1,y=p>>1,b=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,w=r?0:a-1,v=r?1:-1,E=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(u=isNaN(t)?1:0,l=p):(l=Math.floor(Math.log(t)/Math.LN2),t*(d=Math.pow(2,-l))<1&&(l--,d*=2),l+y>=1?t+=b/d:t+=b*Math.pow(2,1-y),t*d>=2&&(l++,d/=2),l+y>=p?(u=0,l=p):l+y>=1?(u=(t*d-1)*Math.pow(2,s),l=l+y):(u=t*Math.pow(2,y-1)*Math.pow(2,s),l=0));s>=8;e[n+w]=u&255,w+=v,u/=256,s-=8);for(l=l<<s|u,h+=s;h>0;e[n+w]=l&255,w+=v,l/=256,h-=8);e[n+w-v]|=E*128}),ih}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var c2;function W0(){return c2||(c2=1,function(e){const t=KN(),n=YN(),r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=u,e.SlowBuffer=D,e.INSPECT_MAX_BYTES=50;const s=2147483647;e.kMaxLength=s,u.TYPED_ARRAY_SUPPORT=a(),!u.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function a(){try{const N=new Uint8Array(1),S={foo:function(){return 42}};return Object.setPrototypeOf(S,Uint8Array.prototype),Object.setPrototypeOf(N,S),N.foo()===42}catch{return!1}}Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}});function l(N){if(N>s)throw new RangeError('The value "'+N+'" is invalid for option "size"');const S=new Uint8Array(N);return Object.setPrototypeOf(S,u.prototype),S}function u(N,S,A){if(typeof N=="number"){if(typeof S=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return y(N)}return d(N,S,A)}u.poolSize=8192;function d(N,S,A){if(typeof N=="string")return b(N,S);if(ArrayBuffer.isView(N))return v(N);if(N==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof N);if(Sn(N,ArrayBuffer)||N&&Sn(N.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Sn(N,SharedArrayBuffer)||N&&Sn(N.buffer,SharedArrayBuffer)))return E(N,S,A);if(typeof N=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const L=N.valueOf&&N.valueOf();if(L!=null&&L!==N)return u.from(L,S,A);const X=_(N);if(X)return X;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof N[Symbol.toPrimitive]=="function")return u.from(N[Symbol.toPrimitive]("string"),S,A);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof N)}u.from=function(N,S,A){return d(N,S,A)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array);function h(N){if(typeof N!="number")throw new TypeError('"size" argument must be of type number');if(N<0)throw new RangeError('The value "'+N+'" is invalid for option "size"')}function p(N,S,A){return h(N),N<=0?l(N):S!==void 0?typeof A=="string"?l(N).fill(S,A):l(N).fill(S):l(N)}u.alloc=function(N,S,A){return p(N,S,A)};function y(N){return h(N),l(N<0?0:R(N)|0)}u.allocUnsafe=function(N){return y(N)},u.allocUnsafeSlow=function(N){return y(N)};function b(N,S){if((typeof S!="string"||S==="")&&(S="utf8"),!u.isEncoding(S))throw new TypeError("Unknown encoding: "+S);const A=I(N,S)|0;let L=l(A);const X=L.write(N,S);return X!==A&&(L=L.slice(0,X)),L}function w(N){const S=N.length<0?0:R(N.length)|0,A=l(S);for(let L=0;L<S;L+=1)A[L]=N[L]&255;return A}function v(N){if(Sn(N,Uint8Array)){const S=new Uint8Array(N);return E(S.buffer,S.byteOffset,S.byteLength)}return w(N)}function E(N,S,A){if(S<0||N.byteLength<S)throw new RangeError('"offset" is outside of buffer bounds');if(N.byteLength<S+(A||0))throw new RangeError('"length" is outside of buffer bounds');let L;return S===void 0&&A===void 0?L=new Uint8Array(N):A===void 0?L=new Uint8Array(N,S):L=new Uint8Array(N,S,A),Object.setPrototypeOf(L,u.prototype),L}function _(N){if(u.isBuffer(N)){const S=R(N.length)|0,A=l(S);return A.length===0||N.copy(A,0,0,S),A}if(N.length!==void 0)return typeof N.length!="number"||bi(N.length)?l(0):w(N);if(N.type==="Buffer"&&Array.isArray(N.data))return w(N.data)}function R(N){if(N>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return N|0}function D(N){return+N!=N&&(N=0),u.alloc(+N)}u.isBuffer=function(S){return S!=null&&S._isBuffer===!0&&S!==u.prototype},u.compare=function(S,A){if(Sn(S,Uint8Array)&&(S=u.from(S,S.offset,S.byteLength)),Sn(A,Uint8Array)&&(A=u.from(A,A.offset,A.byteLength)),!u.isBuffer(S)||!u.isBuffer(A))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(S===A)return 0;let L=S.length,X=A.length;for(let ae=0,he=Math.min(L,X);ae<he;++ae)if(S[ae]!==A[ae]){L=S[ae],X=A[ae];break}return L<X?-1:X<L?1:0},u.isEncoding=function(S){switch(String(S).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(S,A){if(!Array.isArray(S))throw new TypeError('"list" argument must be an Array of Buffers');if(S.length===0)return u.alloc(0);let L;if(A===void 0)for(A=0,L=0;L<S.length;++L)A+=S[L].length;const X=u.allocUnsafe(A);let ae=0;for(L=0;L<S.length;++L){let he=S[L];if(Sn(he,Uint8Array))ae+he.length>X.length?(u.isBuffer(he)||(he=u.from(he)),he.copy(X,ae)):Uint8Array.prototype.set.call(X,he,ae);else if(u.isBuffer(he))he.copy(X,ae);else throw new TypeError('"list" argument must be an Array of Buffers');ae+=he.length}return X};function I(N,S){if(u.isBuffer(N))return N.length;if(ArrayBuffer.isView(N)||Sn(N,ArrayBuffer))return N.byteLength;if(typeof N!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof N);const A=N.length,L=arguments.length>2&&arguments[2]===!0;if(!L&&A===0)return 0;let X=!1;for(;;)switch(S){case"ascii":case"latin1":case"binary":return A;case"utf8":case"utf-8":return dn(N).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A*2;case"hex":return A>>>1;case"base64":return Ji(N).length;default:if(X)return L?-1:dn(N).length;S=(""+S).toLowerCase(),X=!0}}u.byteLength=I;function $(N,S,A){let L=!1;if((S===void 0||S<0)&&(S=0),S>this.length||((A===void 0||A>this.length)&&(A=this.length),A<=0)||(A>>>=0,S>>>=0,A<=S))return"";for(N||(N="utf8");;)switch(N){case"hex":return Y(this,S,A);case"utf8":case"utf-8":return ne(this,S,A);case"ascii":return M(this,S,A);case"latin1":case"binary":return F(this,S,A);case"base64":return ce(this,S,A);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,S,A);default:if(L)throw new TypeError("Unknown encoding: "+N);N=(N+"").toLowerCase(),L=!0}}u.prototype._isBuffer=!0;function U(N,S,A){const L=N[S];N[S]=N[A],N[A]=L}u.prototype.swap16=function(){const S=this.length;if(S%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let A=0;A<S;A+=2)U(this,A,A+1);return this},u.prototype.swap32=function(){const S=this.length;if(S%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let A=0;A<S;A+=4)U(this,A,A+3),U(this,A+1,A+2);return this},u.prototype.swap64=function(){const S=this.length;if(S%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let A=0;A<S;A+=8)U(this,A,A+7),U(this,A+1,A+6),U(this,A+2,A+5),U(this,A+3,A+4);return this},u.prototype.toString=function(){const S=this.length;return S===0?"":arguments.length===0?ne(this,0,S):$.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(S){if(!u.isBuffer(S))throw new TypeError("Argument must be a Buffer");return this===S?!0:u.compare(this,S)===0},u.prototype.inspect=function(){let S="";const A=e.INSPECT_MAX_BYTES;return S=this.toString("hex",0,A).replace(/(.{2})/g,"$1 ").trim(),this.length>A&&(S+=" ... "),"<Buffer "+S+">"},r&&(u.prototype[r]=u.prototype.inspect),u.prototype.compare=function(S,A,L,X,ae){if(Sn(S,Uint8Array)&&(S=u.from(S,S.offset,S.byteLength)),!u.isBuffer(S))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof S);if(A===void 0&&(A=0),L===void 0&&(L=S?S.length:0),X===void 0&&(X=0),ae===void 0&&(ae=this.length),A<0||L>S.length||X<0||ae>this.length)throw new RangeError("out of range index");if(X>=ae&&A>=L)return 0;if(X>=ae)return-1;if(A>=L)return 1;if(A>>>=0,L>>>=0,X>>>=0,ae>>>=0,this===S)return 0;let he=ae-X,Ce=L-A;const Ye=Math.min(he,Ce),Xe=this.slice(X,ae),rt=S.slice(A,L);for(let Ze=0;Ze<Ye;++Ze)if(Xe[Ze]!==rt[Ze]){he=Xe[Ze],Ce=rt[Ze];break}return he<Ce?-1:Ce<he?1:0};function k(N,S,A,L,X){if(N.length===0)return-1;if(typeof A=="string"?(L=A,A=0):A>2147483647?A=2147483647:A<-2147483648&&(A=-2147483648),A=+A,bi(A)&&(A=X?0:N.length-1),A<0&&(A=N.length+A),A>=N.length){if(X)return-1;A=N.length-1}else if(A<0)if(X)A=0;else return-1;if(typeof S=="string"&&(S=u.from(S,L)),u.isBuffer(S))return S.length===0?-1:q(N,S,A,L,X);if(typeof S=="number")return S=S&255,typeof Uint8Array.prototype.indexOf=="function"?X?Uint8Array.prototype.indexOf.call(N,S,A):Uint8Array.prototype.lastIndexOf.call(N,S,A):q(N,[S],A,L,X);throw new TypeError("val must be string, number or Buffer")}function q(N,S,A,L,X){let ae=1,he=N.length,Ce=S.length;if(L!==void 0&&(L=String(L).toLowerCase(),L==="ucs2"||L==="ucs-2"||L==="utf16le"||L==="utf-16le")){if(N.length<2||S.length<2)return-1;ae=2,he/=2,Ce/=2,A/=2}function Ye(rt,Ze){return ae===1?rt[Ze]:rt.readUInt16BE(Ze*ae)}let Xe;if(X){let rt=-1;for(Xe=A;Xe<he;Xe++)if(Ye(N,Xe)===Ye(S,rt===-1?0:Xe-rt)){if(rt===-1&&(rt=Xe),Xe-rt+1===Ce)return rt*ae}else rt!==-1&&(Xe-=Xe-rt),rt=-1}else for(A+Ce>he&&(A=he-Ce),Xe=A;Xe>=0;Xe--){let rt=!0;for(let Ze=0;Ze<Ce;Ze++)if(Ye(N,Xe+Ze)!==Ye(S,Ze)){rt=!1;break}if(rt)return Xe}return-1}u.prototype.includes=function(S,A,L){return this.indexOf(S,A,L)!==-1},u.prototype.indexOf=function(S,A,L){return k(this,S,A,L,!0)},u.prototype.lastIndexOf=function(S,A,L){return k(this,S,A,L,!1)};function H(N,S,A,L){A=Number(A)||0;const X=N.length-A;L?(L=Number(L),L>X&&(L=X)):L=X;const ae=S.length;L>ae/2&&(L=ae/2);let he;for(he=0;he<L;++he){const Ce=parseInt(S.substr(he*2,2),16);if(bi(Ce))return he;N[A+he]=Ce}return he}function P(N,S,A,L){return Wn(dn(S,N.length-A),N,A,L)}function V(N,S,A,L){return Wn(Cc(S),N,A,L)}function G(N,S,A,L){return Wn(Ji(S),N,A,L)}function K(N,S,A,L){return Wn(Vs(S,N.length-A),N,A,L)}u.prototype.write=function(S,A,L,X){if(A===void 0)X="utf8",L=this.length,A=0;else if(L===void 0&&typeof A=="string")X=A,L=this.length,A=0;else if(isFinite(A))A=A>>>0,isFinite(L)?(L=L>>>0,X===void 0&&(X="utf8")):(X=L,L=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const ae=this.length-A;if((L===void 0||L>ae)&&(L=ae),S.length>0&&(L<0||A<0)||A>this.length)throw new RangeError("Attempt to write outside buffer bounds");X||(X="utf8");let he=!1;for(;;)switch(X){case"hex":return H(this,S,A,L);case"utf8":case"utf-8":return P(this,S,A,L);case"ascii":case"latin1":case"binary":return V(this,S,A,L);case"base64":return G(this,S,A,L);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return K(this,S,A,L);default:if(he)throw new TypeError("Unknown encoding: "+X);X=(""+X).toLowerCase(),he=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ce(N,S,A){return S===0&&A===N.length?t.fromByteArray(N):t.fromByteArray(N.slice(S,A))}function ne(N,S,A){A=Math.min(N.length,A);const L=[];let X=S;for(;X<A;){const ae=N[X];let he=null,Ce=ae>239?4:ae>223?3:ae>191?2:1;if(X+Ce<=A){let Ye,Xe,rt,Ze;switch(Ce){case 1:ae<128&&(he=ae);break;case 2:Ye=N[X+1],(Ye&192)===128&&(Ze=(ae&31)<<6|Ye&63,Ze>127&&(he=Ze));break;case 3:Ye=N[X+1],Xe=N[X+2],(Ye&192)===128&&(Xe&192)===128&&(Ze=(ae&15)<<12|(Ye&63)<<6|Xe&63,Ze>2047&&(Ze<55296||Ze>57343)&&(he=Ze));break;case 4:Ye=N[X+1],Xe=N[X+2],rt=N[X+3],(Ye&192)===128&&(Xe&192)===128&&(rt&192)===128&&(Ze=(ae&15)<<18|(Ye&63)<<12|(Xe&63)<<6|rt&63,Ze>65535&&Ze<1114112&&(he=Ze))}}he===null?(he=65533,Ce=1):he>65535&&(he-=65536,L.push(he>>>10&1023|55296),he=56320|he&1023),L.push(he),X+=Ce}return O(L)}const T=4096;function O(N){const S=N.length;if(S<=T)return String.fromCharCode.apply(String,N);let A="",L=0;for(;L<S;)A+=String.fromCharCode.apply(String,N.slice(L,L+=T));return A}function M(N,S,A){let L="";A=Math.min(N.length,A);for(let X=S;X<A;++X)L+=String.fromCharCode(N[X]&127);return L}function F(N,S,A){let L="";A=Math.min(N.length,A);for(let X=S;X<A;++X)L+=String.fromCharCode(N[X]);return L}function Y(N,S,A){const L=N.length;(!S||S<0)&&(S=0),(!A||A<0||A>L)&&(A=L);let X="";for(let ae=S;ae<A;++ae)X+=Zo[N[ae]];return X}function C(N,S,A){const L=N.slice(S,A);let X="";for(let ae=0;ae<L.length-1;ae+=2)X+=String.fromCharCode(L[ae]+L[ae+1]*256);return X}u.prototype.slice=function(S,A){const L=this.length;S=~~S,A=A===void 0?L:~~A,S<0?(S+=L,S<0&&(S=0)):S>L&&(S=L),A<0?(A+=L,A<0&&(A=0)):A>L&&(A=L),A<S&&(A=S);const X=this.subarray(S,A);return Object.setPrototypeOf(X,u.prototype),X};function z(N,S,A){if(N%1!==0||N<0)throw new RangeError("offset is not uint");if(N+S>A)throw new RangeError("Trying to access beyond buffer length")}u.prototype.readUintLE=u.prototype.readUIntLE=function(S,A,L){S=S>>>0,A=A>>>0,L||z(S,A,this.length);let X=this[S],ae=1,he=0;for(;++he<A&&(ae*=256);)X+=this[S+he]*ae;return X},u.prototype.readUintBE=u.prototype.readUIntBE=function(S,A,L){S=S>>>0,A=A>>>0,L||z(S,A,this.length);let X=this[S+--A],ae=1;for(;A>0&&(ae*=256);)X+=this[S+--A]*ae;return X},u.prototype.readUint8=u.prototype.readUInt8=function(S,A){return S=S>>>0,A||z(S,1,this.length),this[S]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(S,A){return S=S>>>0,A||z(S,2,this.length),this[S]|this[S+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(S,A){return S=S>>>0,A||z(S,2,this.length),this[S]<<8|this[S+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(S,A){return S=S>>>0,A||z(S,4,this.length),(this[S]|this[S+1]<<8|this[S+2]<<16)+this[S+3]*16777216},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(S,A){return S=S>>>0,A||z(S,4,this.length),this[S]*16777216+(this[S+1]<<16|this[S+2]<<8|this[S+3])},u.prototype.readBigUInt64LE=Xn(function(S){S=S>>>0,_n(S,"offset");const A=this[S],L=this[S+7];(A===void 0||L===void 0)&&hn(S,this.length-8);const X=A+this[++S]*2**8+this[++S]*2**16+this[++S]*2**24,ae=this[++S]+this[++S]*2**8+this[++S]*2**16+L*2**24;return BigInt(X)+(BigInt(ae)<<BigInt(32))}),u.prototype.readBigUInt64BE=Xn(function(S){S=S>>>0,_n(S,"offset");const A=this[S],L=this[S+7];(A===void 0||L===void 0)&&hn(S,this.length-8);const X=A*2**24+this[++S]*2**16+this[++S]*2**8+this[++S],ae=this[++S]*2**24+this[++S]*2**16+this[++S]*2**8+L;return(BigInt(X)<<BigInt(32))+BigInt(ae)}),u.prototype.readIntLE=function(S,A,L){S=S>>>0,A=A>>>0,L||z(S,A,this.length);let X=this[S],ae=1,he=0;for(;++he<A&&(ae*=256);)X+=this[S+he]*ae;return ae*=128,X>=ae&&(X-=Math.pow(2,8*A)),X},u.prototype.readIntBE=function(S,A,L){S=S>>>0,A=A>>>0,L||z(S,A,this.length);let X=A,ae=1,he=this[S+--X];for(;X>0&&(ae*=256);)he+=this[S+--X]*ae;return ae*=128,he>=ae&&(he-=Math.pow(2,8*A)),he},u.prototype.readInt8=function(S,A){return S=S>>>0,A||z(S,1,this.length),this[S]&128?(255-this[S]+1)*-1:this[S]},u.prototype.readInt16LE=function(S,A){S=S>>>0,A||z(S,2,this.length);const L=this[S]|this[S+1]<<8;return L&32768?L|4294901760:L},u.prototype.readInt16BE=function(S,A){S=S>>>0,A||z(S,2,this.length);const L=this[S+1]|this[S]<<8;return L&32768?L|4294901760:L},u.prototype.readInt32LE=function(S,A){return S=S>>>0,A||z(S,4,this.length),this[S]|this[S+1]<<8|this[S+2]<<16|this[S+3]<<24},u.prototype.readInt32BE=function(S,A){return S=S>>>0,A||z(S,4,this.length),this[S]<<24|this[S+1]<<16|this[S+2]<<8|this[S+3]},u.prototype.readBigInt64LE=Xn(function(S){S=S>>>0,_n(S,"offset");const A=this[S],L=this[S+7];(A===void 0||L===void 0)&&hn(S,this.length-8);const X=this[S+4]+this[S+5]*2**8+this[S+6]*2**16+(L<<24);return(BigInt(X)<<BigInt(32))+BigInt(A+this[++S]*2**8+this[++S]*2**16+this[++S]*2**24)}),u.prototype.readBigInt64BE=Xn(function(S){S=S>>>0,_n(S,"offset");const A=this[S],L=this[S+7];(A===void 0||L===void 0)&&hn(S,this.length-8);const X=(A<<24)+this[++S]*2**16+this[++S]*2**8+this[++S];return(BigInt(X)<<BigInt(32))+BigInt(this[++S]*2**24+this[++S]*2**16+this[++S]*2**8+L)}),u.prototype.readFloatLE=function(S,A){return S=S>>>0,A||z(S,4,this.length),n.read(this,S,!0,23,4)},u.prototype.readFloatBE=function(S,A){return S=S>>>0,A||z(S,4,this.length),n.read(this,S,!1,23,4)},u.prototype.readDoubleLE=function(S,A){return S=S>>>0,A||z(S,8,this.length),n.read(this,S,!0,52,8)},u.prototype.readDoubleBE=function(S,A){return S=S>>>0,A||z(S,8,this.length),n.read(this,S,!1,52,8)};function J(N,S,A,L,X,ae){if(!u.isBuffer(N))throw new TypeError('"buffer" argument must be a Buffer instance');if(S>X||S<ae)throw new RangeError('"value" argument is out of bounds');if(A+L>N.length)throw new RangeError("Index out of range")}u.prototype.writeUintLE=u.prototype.writeUIntLE=function(S,A,L,X){if(S=+S,A=A>>>0,L=L>>>0,!X){const Ce=Math.pow(2,8*L)-1;J(this,S,A,L,Ce,0)}let ae=1,he=0;for(this[A]=S&255;++he<L&&(ae*=256);)this[A+he]=S/ae&255;return A+L},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(S,A,L,X){if(S=+S,A=A>>>0,L=L>>>0,!X){const Ce=Math.pow(2,8*L)-1;J(this,S,A,L,Ce,0)}let ae=L-1,he=1;for(this[A+ae]=S&255;--ae>=0&&(he*=256);)this[A+ae]=S/he&255;return A+L},u.prototype.writeUint8=u.prototype.writeUInt8=function(S,A,L){return S=+S,A=A>>>0,L||J(this,S,A,1,255,0),this[A]=S&255,A+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(S,A,L){return S=+S,A=A>>>0,L||J(this,S,A,2,65535,0),this[A]=S&255,this[A+1]=S>>>8,A+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(S,A,L){return S=+S,A=A>>>0,L||J(this,S,A,2,65535,0),this[A]=S>>>8,this[A+1]=S&255,A+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(S,A,L){return S=+S,A=A>>>0,L||J(this,S,A,4,4294967295,0),this[A+3]=S>>>24,this[A+2]=S>>>16,this[A+1]=S>>>8,this[A]=S&255,A+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(S,A,L){return S=+S,A=A>>>0,L||J(this,S,A,4,4294967295,0),this[A]=S>>>24,this[A+1]=S>>>16,this[A+2]=S>>>8,this[A+3]=S&255,A+4};function se(N,S,A,L,X){Dn(S,L,X,N,A,7);let ae=Number(S&BigInt(4294967295));N[A++]=ae,ae=ae>>8,N[A++]=ae,ae=ae>>8,N[A++]=ae,ae=ae>>8,N[A++]=ae;let he=Number(S>>BigInt(32)&BigInt(4294967295));return N[A++]=he,he=he>>8,N[A++]=he,he=he>>8,N[A++]=he,he=he>>8,N[A++]=he,A}function re(N,S,A,L,X){Dn(S,L,X,N,A,7);let ae=Number(S&BigInt(4294967295));N[A+7]=ae,ae=ae>>8,N[A+6]=ae,ae=ae>>8,N[A+5]=ae,ae=ae>>8,N[A+4]=ae;let he=Number(S>>BigInt(32)&BigInt(4294967295));return N[A+3]=he,he=he>>8,N[A+2]=he,he=he>>8,N[A+1]=he,he=he>>8,N[A]=he,A+8}u.prototype.writeBigUInt64LE=Xn(function(S,A=0){return se(this,S,A,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeBigUInt64BE=Xn(function(S,A=0){return re(this,S,A,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeIntLE=function(S,A,L,X){if(S=+S,A=A>>>0,!X){const Ye=Math.pow(2,8*L-1);J(this,S,A,L,Ye-1,-Ye)}let ae=0,he=1,Ce=0;for(this[A]=S&255;++ae<L&&(he*=256);)S<0&&Ce===0&&this[A+ae-1]!==0&&(Ce=1),this[A+ae]=(S/he>>0)-Ce&255;return A+L},u.prototype.writeIntBE=function(S,A,L,X){if(S=+S,A=A>>>0,!X){const Ye=Math.pow(2,8*L-1);J(this,S,A,L,Ye-1,-Ye)}let ae=L-1,he=1,Ce=0;for(this[A+ae]=S&255;--ae>=0&&(he*=256);)S<0&&Ce===0&&this[A+ae+1]!==0&&(Ce=1),this[A+ae]=(S/he>>0)-Ce&255;return A+L},u.prototype.writeInt8=function(S,A,L){return S=+S,A=A>>>0,L||J(this,S,A,1,127,-128),S<0&&(S=255+S+1),this[A]=S&255,A+1},u.prototype.writeInt16LE=function(S,A,L){return S=+S,A=A>>>0,L||J(this,S,A,2,32767,-32768),this[A]=S&255,this[A+1]=S>>>8,A+2},u.prototype.writeInt16BE=function(S,A,L){return S=+S,A=A>>>0,L||J(this,S,A,2,32767,-32768),this[A]=S>>>8,this[A+1]=S&255,A+2},u.prototype.writeInt32LE=function(S,A,L){return S=+S,A=A>>>0,L||J(this,S,A,4,2147483647,-2147483648),this[A]=S&255,this[A+1]=S>>>8,this[A+2]=S>>>16,this[A+3]=S>>>24,A+4},u.prototype.writeInt32BE=function(S,A,L){return S=+S,A=A>>>0,L||J(this,S,A,4,2147483647,-2147483648),S<0&&(S=4294967295+S+1),this[A]=S>>>24,this[A+1]=S>>>16,this[A+2]=S>>>8,this[A+3]=S&255,A+4},u.prototype.writeBigInt64LE=Xn(function(S,A=0){return se(this,S,A,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),u.prototype.writeBigInt64BE=Xn(function(S,A=0){return re(this,S,A,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function ge(N,S,A,L,X,ae){if(A+L>N.length)throw new RangeError("Index out of range");if(A<0)throw new RangeError("Index out of range")}function ye(N,S,A,L,X){return S=+S,A=A>>>0,X||ge(N,S,A,4),n.write(N,S,A,L,23,4),A+4}u.prototype.writeFloatLE=function(S,A,L){return ye(this,S,A,!0,L)},u.prototype.writeFloatBE=function(S,A,L){return ye(this,S,A,!1,L)};function De(N,S,A,L,X){return S=+S,A=A>>>0,X||ge(N,S,A,8),n.write(N,S,A,L,52,8),A+8}u.prototype.writeDoubleLE=function(S,A,L){return De(this,S,A,!0,L)},u.prototype.writeDoubleBE=function(S,A,L){return De(this,S,A,!1,L)},u.prototype.copy=function(S,A,L,X){if(!u.isBuffer(S))throw new TypeError("argument should be a Buffer");if(L||(L=0),!X&&X!==0&&(X=this.length),A>=S.length&&(A=S.length),A||(A=0),X>0&&X<L&&(X=L),X===L||S.length===0||this.length===0)return 0;if(A<0)throw new RangeError("targetStart out of bounds");if(L<0||L>=this.length)throw new RangeError("Index out of range");if(X<0)throw new RangeError("sourceEnd out of bounds");X>this.length&&(X=this.length),S.length-A<X-L&&(X=S.length-A+L);const ae=X-L;return this===S&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(A,L,X):Uint8Array.prototype.set.call(S,this.subarray(L,X),A),ae},u.prototype.fill=function(S,A,L,X){if(typeof S=="string"){if(typeof A=="string"?(X=A,A=0,L=this.length):typeof L=="string"&&(X=L,L=this.length),X!==void 0&&typeof X!="string")throw new TypeError("encoding must be a string");if(typeof X=="string"&&!u.isEncoding(X))throw new TypeError("Unknown encoding: "+X);if(S.length===1){const he=S.charCodeAt(0);(X==="utf8"&&he<128||X==="latin1")&&(S=he)}}else typeof S=="number"?S=S&255:typeof S=="boolean"&&(S=Number(S));if(A<0||this.length<A||this.length<L)throw new RangeError("Out of range index");if(L<=A)return this;A=A>>>0,L=L===void 0?this.length:L>>>0,S||(S=0);let ae;if(typeof S=="number")for(ae=A;ae<L;++ae)this[ae]=S;else{const he=u.isBuffer(S)?S:u.from(S,X),Ce=he.length;if(Ce===0)throw new TypeError('The value "'+S+'" is invalid for argument "value"');for(ae=0;ae<L-A;++ae)this[ae+A]=he[ae%Ce]}return this};const _e={};function xe(N,S,A){_e[N]=class extends A{constructor(){super(),Object.defineProperty(this,"message",{value:S.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${N}]`,this.stack,delete this.name}get code(){return N}set code(X){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:X,writable:!0})}toString(){return`${this.name} [${N}]: ${this.message}`}}}xe("ERR_BUFFER_OUT_OF_BOUNDS",function(N){return N?`${N} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),xe("ERR_INVALID_ARG_TYPE",function(N,S){return`The "${N}" argument must be of type number. Received type ${typeof S}`},TypeError),xe("ERR_OUT_OF_RANGE",function(N,S,A){let L=`The value of "${N}" is out of range.`,X=A;return Number.isInteger(A)&&Math.abs(A)>2**32?X=nt(String(A)):typeof A=="bigint"&&(X=String(A),(A>BigInt(2)**BigInt(32)||A<-(BigInt(2)**BigInt(32)))&&(X=nt(X)),X+="n"),L+=` It must be ${S}. Received ${X}`,L},RangeError);function nt(N){let S="",A=N.length;const L=N[0]==="-"?1:0;for(;A>=L+4;A-=3)S=`_${N.slice(A-3,A)}${S}`;return`${N.slice(0,A)}${S}`}function bt(N,S,A){_n(S,"offset"),(N[S]===void 0||N[S+A]===void 0)&&hn(S,N.length-(A+1))}function Dn(N,S,A,L,X,ae){if(N>A||N<S){const he=typeof S=="bigint"?"n":"";let Ce;throw S===0||S===BigInt(0)?Ce=`>= 0${he} and < 2${he} ** ${(ae+1)*8}${he}`:Ce=`>= -(2${he} ** ${(ae+1)*8-1}${he}) and < 2 ** ${(ae+1)*8-1}${he}`,new _e.ERR_OUT_OF_RANGE("value",Ce,N)}bt(L,X,ae)}function _n(N,S){if(typeof N!="number")throw new _e.ERR_INVALID_ARG_TYPE(S,"number",N)}function hn(N,S,A){throw Math.floor(N)!==N?(_n(N,A),new _e.ERR_OUT_OF_RANGE("offset","an integer",N)):S<0?new _e.ERR_BUFFER_OUT_OF_BOUNDS:new _e.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${S}`,N)}const Fs=/[^+/0-9A-Za-z-_]/g;function Ic(N){if(N=N.split("=")[0],N=N.trim().replace(Fs,""),N.length<2)return"";for(;N.length%4!==0;)N=N+"=";return N}function dn(N,S){S=S||1/0;let A;const L=N.length;let X=null;const ae=[];for(let he=0;he<L;++he){if(A=N.charCodeAt(he),A>55295&&A<57344){if(!X){if(A>56319){(S-=3)>-1&&ae.push(239,191,189);continue}else if(he+1===L){(S-=3)>-1&&ae.push(239,191,189);continue}X=A;continue}if(A<56320){(S-=3)>-1&&ae.push(239,191,189),X=A;continue}A=(X-55296<<10|A-56320)+65536}else X&&(S-=3)>-1&&ae.push(239,191,189);if(X=null,A<128){if((S-=1)<0)break;ae.push(A)}else if(A<2048){if((S-=2)<0)break;ae.push(A>>6|192,A&63|128)}else if(A<65536){if((S-=3)<0)break;ae.push(A>>12|224,A>>6&63|128,A&63|128)}else if(A<1114112){if((S-=4)<0)break;ae.push(A>>18|240,A>>12&63|128,A>>6&63|128,A&63|128)}else throw new Error("Invalid code point")}return ae}function Cc(N){const S=[];for(let A=0;A<N.length;++A)S.push(N.charCodeAt(A)&255);return S}function Vs(N,S){let A,L,X;const ae=[];for(let he=0;he<N.length&&!((S-=2)<0);++he)A=N.charCodeAt(he),L=A>>8,X=A%256,ae.push(X),ae.push(L);return ae}function Ji(N){return t.toByteArray(Ic(N))}function Wn(N,S,A,L){let X;for(X=0;X<L&&!(X+A>=S.length||X>=N.length);++X)S[X+A]=N[X];return X}function Sn(N,S){return N instanceof S||N!=null&&N.constructor!=null&&N.constructor.name!=null&&N.constructor.name===S.name}function bi(N){return N!==N}const Zo=function(){const N="0123456789abcdef",S=new Array(256);for(let A=0;A<16;++A){const L=A*16;for(let X=0;X<16;++X)S[L+X]=N[A]+N[X]}return S}();function Xn(N){return typeof BigInt>"u"?Gr:N}function Gr(){throw new Error("BigInt not supported")}}(vy)),vy}var Ot=W0();function X0(e){if(Array.isArray(e)){const t=[];for(let r=0;r<e.length;r++)t.push(X0(e[r]));const n=Ot.Buffer.concat(t);return Ot.Buffer.concat([l2(n.length,192),n])}else{const t=QN(e);return t.length===1&&t[0]<128?t:Ot.Buffer.concat([l2(t.length,128),t])}}function l2(e,t){if(e<56)return Ot.Buffer.from([e+t]);{const n=km(e),r=n.length/2,s=km(t+55+r);return Ot.Buffer.from(s+n,"hex")}}function n3(e){return e.slice(0,2)==="0x"}function WN(e){return typeof e!="string"?e:n3(e)?e.slice(2):e}function km(e){if(e<0)throw new Error("Invalid integer as argument, must be unsigned!");const t=e.toString(16);return t.length%2?"0"+t:t}function XN(e){return e.length%2?"0"+e:e}function ZN(e){const t=km(e);return Ot.Buffer.from(t,"hex")}function QN(e){if(!Ot.Buffer.isBuffer(e)){if(typeof e=="string")return n3(e)?Ot.Buffer.from(XN(WN(e)),"hex"):Ot.Buffer.from(e);if(typeof e=="number")return e?ZN(e):Ot.Buffer.from([]);if(e==null)return Ot.Buffer.from([]);if(e instanceof Uint8Array)return Ot.Buffer.from(e);throw new Error("invalid type")}return e}var sh={exports:{}},u2;function JN(){return u2||(u2=1,function(e,t){var n=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof qn<"u"&&qn,r=function(){function a(){this.fetch=!1,this.DOMException=n.DOMException}return a.prototype=n,new a}();(function(a){(function(l){var u=typeof a<"u"&&a||typeof self<"u"&&self||typeof qn<"u"&&qn||{},d={searchParams:"URLSearchParams"in u,iterable:"Symbol"in u&&"iterator"in Symbol,blob:"FileReader"in u&&"Blob"in u&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in u,arrayBuffer:"ArrayBuffer"in u};function h(T){return T&&DataView.prototype.isPrototypeOf(T)}if(d.arrayBuffer)var p=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],y=ArrayBuffer.isView||function(T){return T&&p.indexOf(Object.prototype.toString.call(T))>-1};function b(T){if(typeof T!="string"&&(T=String(T)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(T)||T==="")throw new TypeError('Invalid character in header field name: "'+T+'"');return T.toLowerCase()}function w(T){return typeof T!="string"&&(T=String(T)),T}function v(T){var O={next:function(){var M=T.shift();return{done:M===void 0,value:M}}};return d.iterable&&(O[Symbol.iterator]=function(){return O}),O}function E(T){this.map={},T instanceof E?T.forEach(function(O,M){this.append(M,O)},this):Array.isArray(T)?T.forEach(function(O){if(O.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+O.length);this.append(O[0],O[1])},this):T&&Object.getOwnPropertyNames(T).forEach(function(O){this.append(O,T[O])},this)}E.prototype.append=function(T,O){T=b(T),O=w(O);var M=this.map[T];this.map[T]=M?M+", "+O:O},E.prototype.delete=function(T){delete this.map[b(T)]},E.prototype.get=function(T){return T=b(T),this.has(T)?this.map[T]:null},E.prototype.has=function(T){return this.map.hasOwnProperty(b(T))},E.prototype.set=function(T,O){this.map[b(T)]=w(O)},E.prototype.forEach=function(T,O){for(var M in this.map)this.map.hasOwnProperty(M)&&T.call(O,this.map[M],M,this)},E.prototype.keys=function(){var T=[];return this.forEach(function(O,M){T.push(M)}),v(T)},E.prototype.values=function(){var T=[];return this.forEach(function(O){T.push(O)}),v(T)},E.prototype.entries=function(){var T=[];return this.forEach(function(O,M){T.push([M,O])}),v(T)},d.iterable&&(E.prototype[Symbol.iterator]=E.prototype.entries);function _(T){if(!T._noBody){if(T.bodyUsed)return Promise.reject(new TypeError("Already read"));T.bodyUsed=!0}}function R(T){return new Promise(function(O,M){T.onload=function(){O(T.result)},T.onerror=function(){M(T.error)}})}function D(T){var O=new FileReader,M=R(O);return O.readAsArrayBuffer(T),M}function I(T){var O=new FileReader,M=R(O),F=/charset=([A-Za-z0-9_-]+)/.exec(T.type),Y=F?F[1]:"utf-8";return O.readAsText(T,Y),M}function $(T){for(var O=new Uint8Array(T),M=new Array(O.length),F=0;F<O.length;F++)M[F]=String.fromCharCode(O[F]);return M.join("")}function U(T){if(T.slice)return T.slice(0);var O=new Uint8Array(T.byteLength);return O.set(new Uint8Array(T)),O.buffer}function k(){return this.bodyUsed=!1,this._initBody=function(T){this.bodyUsed=this.bodyUsed,this._bodyInit=T,T?typeof T=="string"?this._bodyText=T:d.blob&&Blob.prototype.isPrototypeOf(T)?this._bodyBlob=T:d.formData&&FormData.prototype.isPrototypeOf(T)?this._bodyFormData=T:d.searchParams&&URLSearchParams.prototype.isPrototypeOf(T)?this._bodyText=T.toString():d.arrayBuffer&&d.blob&&h(T)?(this._bodyArrayBuffer=U(T.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):d.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(T)||y(T))?this._bodyArrayBuffer=U(T):this._bodyText=T=Object.prototype.toString.call(T):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof T=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):d.searchParams&&URLSearchParams.prototype.isPrototypeOf(T)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},d.blob&&(this.blob=function(){var T=_(this);if(T)return T;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var T=_(this);return T||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(d.blob)return this.blob().then(D);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var T=_(this);if(T)return T;if(this._bodyBlob)return I(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve($(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},d.formData&&(this.formData=function(){return this.text().then(V)}),this.json=function(){return this.text().then(JSON.parse)},this}var q=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function H(T){var O=T.toUpperCase();return q.indexOf(O)>-1?O:T}function P(T,O){if(!(this instanceof P))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');O=O||{};var M=O.body;if(T instanceof P){if(T.bodyUsed)throw new TypeError("Already read");this.url=T.url,this.credentials=T.credentials,O.headers||(this.headers=new E(T.headers)),this.method=T.method,this.mode=T.mode,this.signal=T.signal,!M&&T._bodyInit!=null&&(M=T._bodyInit,T.bodyUsed=!0)}else this.url=String(T);if(this.credentials=O.credentials||this.credentials||"same-origin",(O.headers||!this.headers)&&(this.headers=new E(O.headers)),this.method=H(O.method||this.method||"GET"),this.mode=O.mode||this.mode||null,this.signal=O.signal||this.signal||function(){if("AbortController"in u){var C=new AbortController;return C.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&M)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(M),(this.method==="GET"||this.method==="HEAD")&&(O.cache==="no-store"||O.cache==="no-cache")){var F=/([?&])_=[^&]*/;if(F.test(this.url))this.url=this.url.replace(F,"$1_="+new Date().getTime());else{var Y=/\?/;this.url+=(Y.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}P.prototype.clone=function(){return new P(this,{body:this._bodyInit})};function V(T){var O=new FormData;return T.trim().split("&").forEach(function(M){if(M){var F=M.split("="),Y=F.shift().replace(/\+/g," "),C=F.join("=").replace(/\+/g," ");O.append(decodeURIComponent(Y),decodeURIComponent(C))}}),O}function G(T){var O=new E,M=T.replace(/\r?\n[\t ]+/g," ");return M.split("\r").map(function(F){return F.indexOf(`
`)===0?F.substr(1,F.length):F}).forEach(function(F){var Y=F.split(":"),C=Y.shift().trim();if(C){var z=Y.join(":").trim();try{O.append(C,z)}catch(J){console.warn("Response "+J.message)}}}),O}k.call(P.prototype);function K(T,O){if(!(this instanceof K))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(O||(O={}),this.type="default",this.status=O.status===void 0?200:O.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=O.statusText===void 0?"":""+O.statusText,this.headers=new E(O.headers),this.url=O.url||"",this._initBody(T)}k.call(K.prototype),K.prototype.clone=function(){return new K(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new E(this.headers),url:this.url})},K.error=function(){var T=new K(null,{status:200,statusText:""});return T.ok=!1,T.status=0,T.type="error",T};var ce=[301,302,303,307,308];K.redirect=function(T,O){if(ce.indexOf(O)===-1)throw new RangeError("Invalid status code");return new K(null,{status:O,headers:{location:T}})},l.DOMException=u.DOMException;try{new l.DOMException}catch{l.DOMException=function(O,M){this.message=O,this.name=M;var F=Error(O);this.stack=F.stack},l.DOMException.prototype=Object.create(Error.prototype),l.DOMException.prototype.constructor=l.DOMException}function ne(T,O){return new Promise(function(M,F){var Y=new P(T,O);if(Y.signal&&Y.signal.aborted)return F(new l.DOMException("Aborted","AbortError"));var C=new XMLHttpRequest;function z(){C.abort()}C.onload=function(){var re={statusText:C.statusText,headers:G(C.getAllResponseHeaders()||"")};Y.url.indexOf("file://")===0&&(C.status<200||C.status>599)?re.status=200:re.status=C.status,re.url="responseURL"in C?C.responseURL:re.headers.get("X-Request-URL");var ge="response"in C?C.response:C.responseText;setTimeout(function(){M(new K(ge,re))},0)},C.onerror=function(){setTimeout(function(){F(new TypeError("Network request failed"))},0)},C.ontimeout=function(){setTimeout(function(){F(new TypeError("Network request timed out"))},0)},C.onabort=function(){setTimeout(function(){F(new l.DOMException("Aborted","AbortError"))},0)};function J(re){try{return re===""&&u.location.href?u.location.href:re}catch{return re}}if(C.open(Y.method,J(Y.url),!0),Y.credentials==="include"?C.withCredentials=!0:Y.credentials==="omit"&&(C.withCredentials=!1),"responseType"in C&&(d.blob?C.responseType="blob":d.arrayBuffer&&(C.responseType="arraybuffer")),O&&typeof O.headers=="object"&&!(O.headers instanceof E||u.Headers&&O.headers instanceof u.Headers)){var se=[];Object.getOwnPropertyNames(O.headers).forEach(function(re){se.push(b(re)),C.setRequestHeader(re,w(O.headers[re]))}),Y.headers.forEach(function(re,ge){se.indexOf(ge)===-1&&C.setRequestHeader(ge,re)})}else Y.headers.forEach(function(re,ge){C.setRequestHeader(ge,re)});Y.signal&&(Y.signal.addEventListener("abort",z),C.onreadystatechange=function(){C.readyState===4&&Y.signal.removeEventListener("abort",z)}),C.send(typeof Y._bodyInit>"u"?null:Y._bodyInit)})}return ne.polyfill=!0,u.fetch||(u.fetch=ne,u.Headers=E,u.Request=P,u.Response=K),l.Headers=E,l.Request=P,l.Response=K,l.fetch=ne,l})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var s=n.fetch?n:r;t=s.fetch,t.default=s.fetch,t.fetch=s.fetch,t.Headers=s.Headers,t.Request=s.Request,t.Response=s.Response,e.exports=t}(sh,sh.exports)),sh.exports}var e4=JN();const r3=pd(e4);function $t(e){return e==null?null:e.replace(/^0x/,"").replace(/^Fx/,"")}function Rn(e){return e==null?null:"0x"+$t(e)}var oh={exports:{}},f2;function t4(){if(f2)return oh.exports;f2=1;var e=typeof Reflect=="object"?Reflect:null,t=e&&typeof e.apply=="function"?e.apply:function(U,k,q){return Function.prototype.apply.call(U,k,q)},n;e&&typeof e.ownKeys=="function"?n=e.ownKeys:Object.getOwnPropertySymbols?n=function(U){return Object.getOwnPropertyNames(U).concat(Object.getOwnPropertySymbols(U))}:n=function(U){return Object.getOwnPropertyNames(U)};function r($){console&&console.warn&&console.warn($)}var s=Number.isNaN||function(U){return U!==U};function a(){a.init.call(this)}oh.exports=a,oh.exports.once=R,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var l=10;function u($){if(typeof $!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof $)}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function($){if(typeof $!="number"||$<0||s($))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+$+".");l=$}}),a.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(U){if(typeof U!="number"||U<0||s(U))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+U+".");return this._maxListeners=U,this};function d($){return $._maxListeners===void 0?a.defaultMaxListeners:$._maxListeners}a.prototype.getMaxListeners=function(){return d(this)},a.prototype.emit=function(U){for(var k=[],q=1;q<arguments.length;q++)k.push(arguments[q]);var H=U==="error",P=this._events;if(P!==void 0)H=H&&P.error===void 0;else if(!H)return!1;if(H){var V;if(k.length>0&&(V=k[0]),V instanceof Error)throw V;var G=new Error("Unhandled error."+(V?" ("+V.message+")":""));throw G.context=V,G}var K=P[U];if(K===void 0)return!1;if(typeof K=="function")t(K,this,k);else for(var ce=K.length,ne=v(K,ce),q=0;q<ce;++q)t(ne[q],this,k);return!0};function h($,U,k,q){var H,P,V;if(u(k),P=$._events,P===void 0?(P=$._events=Object.create(null),$._eventsCount=0):(P.newListener!==void 0&&($.emit("newListener",U,k.listener?k.listener:k),P=$._events),V=P[U]),V===void 0)V=P[U]=k,++$._eventsCount;else if(typeof V=="function"?V=P[U]=q?[k,V]:[V,k]:q?V.unshift(k):V.push(k),H=d($),H>0&&V.length>H&&!V.warned){V.warned=!0;var G=new Error("Possible EventEmitter memory leak detected. "+V.length+" "+String(U)+" listeners added. Use emitter.setMaxListeners() to increase limit");G.name="MaxListenersExceededWarning",G.emitter=$,G.type=U,G.count=V.length,r(G)}return $}a.prototype.addListener=function(U,k){return h(this,U,k,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(U,k){return h(this,U,k,!0)};function p(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function y($,U,k){var q={fired:!1,wrapFn:void 0,target:$,type:U,listener:k},H=p.bind(q);return H.listener=k,q.wrapFn=H,H}a.prototype.once=function(U,k){return u(k),this.on(U,y(this,U,k)),this},a.prototype.prependOnceListener=function(U,k){return u(k),this.prependListener(U,y(this,U,k)),this},a.prototype.removeListener=function(U,k){var q,H,P,V,G;if(u(k),H=this._events,H===void 0)return this;if(q=H[U],q===void 0)return this;if(q===k||q.listener===k)--this._eventsCount===0?this._events=Object.create(null):(delete H[U],H.removeListener&&this.emit("removeListener",U,q.listener||k));else if(typeof q!="function"){for(P=-1,V=q.length-1;V>=0;V--)if(q[V]===k||q[V].listener===k){G=q[V].listener,P=V;break}if(P<0)return this;P===0?q.shift():E(q,P),q.length===1&&(H[U]=q[0]),H.removeListener!==void 0&&this.emit("removeListener",U,G||k)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(U){var k,q,H;if(q=this._events,q===void 0)return this;if(q.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):q[U]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete q[U]),this;if(arguments.length===0){var P=Object.keys(q),V;for(H=0;H<P.length;++H)V=P[H],V!=="removeListener"&&this.removeAllListeners(V);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(k=q[U],typeof k=="function")this.removeListener(U,k);else if(k!==void 0)for(H=k.length-1;H>=0;H--)this.removeListener(U,k[H]);return this};function b($,U,k){var q=$._events;if(q===void 0)return[];var H=q[U];return H===void 0?[]:typeof H=="function"?k?[H.listener||H]:[H]:k?_(H):v(H,H.length)}a.prototype.listeners=function(U){return b(this,U,!0)},a.prototype.rawListeners=function(U){return b(this,U,!1)},a.listenerCount=function($,U){return typeof $.listenerCount=="function"?$.listenerCount(U):w.call($,U)},a.prototype.listenerCount=w;function w($){var U=this._events;if(U!==void 0){var k=U[$];if(typeof k=="function")return 1;if(k!==void 0)return k.length}return 0}a.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]};function v($,U){for(var k=new Array(U),q=0;q<U;++q)k[q]=$[q];return k}function E($,U){for(;U+1<$.length;U++)$[U]=$[U+1];$.pop()}function _($){for(var U=new Array($.length),k=0;k<U.length;++k)U[k]=$[k].listener||$[k];return U}function R($,U){return new Promise(function(k,q){function H(V){$.removeListener(U,P),q(V)}function P(){typeof $.removeListener=="function"&&$.removeListener("error",H),k([].slice.call(arguments))}I($,U,P,{once:!0}),U!=="error"&&D($,H,{once:!0})})}function D($,U,k){typeof $.on=="function"&&I($,"error",U,k)}function I($,U,k,q){if(typeof $.on=="function")q.once?$.once(U,k):$.on(U,k);else if(typeof $.addEventListener=="function")$.addEventListener(U,function H(P){q.once&&$.removeEventListener(U,H),k(P)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof $)}return oh.exports}var Vn=t4();const bd=pd(Vn);var sc=null;typeof WebSocket<"u"?sc=WebSocket:typeof MozWebSocket<"u"?sc=MozWebSocket:typeof global<"u"?sc=global.WebSocket||global.MozWebSocket:typeof window<"u"?sc=window.WebSocket||window.MozWebSocket:typeof self<"u"&&(sc=self.WebSocket||self.MozWebSocket);const n4=sc;function i3(e){try{return JSON.parse(e)}catch{return null}}function s3(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}const r4=globalThis.AbortController||require("abort-controller");class Bh extends Error{constructor(t){let{error:n,hostname:r,path:s,method:a,requestBody:l,responseBody:u,responseStatusText:d,statusCode:h}=t;const p=`
      HTTP Request Error: An error occurred when interacting with the Access API.
      ${n?`error=${n}`:""}
      ${r?`hostname=${r}`:""}
      ${s?`path=${s}`:""}
      ${a?`method=${a}`:""}
      ${l?`requestBody=${l}`:""}
      ${u?`responseBody=${u}`:""}
      ${d?`responseStatusText=${d}`:""}
      ${h?`statusCode=${h}`:""}
    `;super(p),this.name="HTTP Request Error",this.statusCode=h,this.errorMessage=n}}async function Pt(e){let{hostname:t,path:n,method:r,body:s,headers:a,retryLimit:l=5,retryIntervalMs:u=1e3,timeoutLimit:d=3e4,enableRequestLogging:h=!0}=e;const p=s?JSON.stringify(s):null;function y(){const w=new r4,v=setTimeout(()=>{w.abort()},d);return r3(s3(t,n).toString(),{method:r,body:p,headers:a,signal:w.signal}).then(async E=>{if(E.ok)return E.json();const _=await E.text().catch(()=>null),R=i3(_);throw new Bh({error:R?.message,hostname:t,path:n,method:r,requestBody:p,responseBody:_,responseStatusText:E.statusText,statusCode:E.status})}).catch(async E=>{throw E instanceof Bh||E.name==="AbortError"?E:(h&&await qe({title:"Access Node Error",message:`The provided access node ${t} does not appear to be a valid REST/HTTP access node.
  Please verify that you are not unintentionally using a GRPC access node.
  See more here: https://docs.onflow.org/fcl/reference/sdk-guidelines/#connect`,level:ft.error}),new Bh({error:E?.message,hostname:t,path:n,method:r,requestBody:p}))}).finally(()=>{clearTimeout(v)})}async function b(){let w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;try{return await y()}catch(v){const E=[408,429,500,502,503,504];if(v.name==="AbortError"||E.includes(v.statusCode))return await new Promise((_,R)=>{w<l?(h&&console.warn(`Access node unavailable, retrying in ${u} ms...`),setTimeout(()=>{_(b(w+1))},u)):R(v)});throw v}}return await b()}async function i4(e,t,n){const s=await(n.httpRequest||Pt)({hostname:n.node,path:`/v1/scripts?block_id=${e.block.id}`,method:"POST",body:{script:t.Buffer.from(e.message.cadence).toString("base64"),arguments:e.message.arguments.map(a=>t.Buffer.from(JSON.stringify(e.arguments[a].asArgument)).toString("base64"))}});return Z0(e,t,s)}async function s4(e,t,n){const s=await(n.httpRequest||Pt)({hostname:n.node,path:`/v1/scripts?block_height=${e.block.height}`,method:"POST",body:{script:t.Buffer.from(e.message.cadence).toString("base64"),arguments:e.message.arguments.map(a=>t.Buffer.from(JSON.stringify(e.arguments[a].asArgument)).toString("base64"))}});return Z0(e,t,s)}async function o4(e,t,n){const s=await(n.httpRequest||Pt)({hostname:n.node,path:`/v1/scripts?block_height=${e.block.isSealed?"sealed":"final"}`,method:"POST",body:{script:t.Buffer.from(e.message.cadence).toString("base64"),arguments:e.message.arguments.map(a=>t.Buffer.from(JSON.stringify(e.arguments[a].asArgument)).toString("base64"))}});return Z0(e,t,s)}function Z0(e,t,n){let r=t.response();return r.tag=e.tag,r.encodedData=JSON.parse(t.Buffer.from(n,"base64").toString()),r}async function a4(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return fe(n.node,"SDK Send Execute Script Error: opts.node must be defined."),fe(t.response,"SDK Send Execute Script Error: context.response must be defined."),fe(t.Buffer,"SDK Send Execute Script Error: context.Buffer must be defined."),e=await e,e.block.id?await i4(e,t,n):e.block.height?await s4(e,t,n):await o4(e,t,n)}const c4={SHA2_256:1,SHA2_384:2,SHA3_256:3,SHA3_384:4,KMAC128_BLS_BLS12_381:5},l4={ECDSA_P256:1,ECDSA_secp256k1:2,BLS_BLS12_381:3};async function u4(e,t,n){const s=await(n.httpRequest||Pt)({hostname:n.node,path:`/v1/accounts/${e.account.addr}?block_height=${e.block.height}&expand=contracts,keys`,method:"GET",body:null});return o3(e,t,s)}async function f4(e,t,n){const s=await(n.httpRequest||Pt)({hostname:n.node,path:`/v1/accounts/${e.account.addr}?block_height=${e.block.isSealed?"sealed":"final"}&expand=contracts,keys`,method:"GET",body:null});return o3(e,t,s)}function o3(e,t,n){let r=t.response();r.tag=e.tag;const s=a=>{const l={};if(!a)return l;for(let u of Object.keys(a))l[u]=t.Buffer.from(a[u],"base64").toString();return l};return r.account={address:n.address,balance:Number(n.balance),code:"",contracts:s(n.contracts),keys:n.keys?.map(a=>({index:Number(a.index),publicKey:a.public_key.replace(/^0x/,""),signAlgo:l4[a.signing_algorithm],signAlgoString:a.signing_algorithm,hashAlgo:c4[a.hashing_algorithm],hashAlgoString:a.hashing_algorithm,sequenceNumber:Number(a.sequence_number),weight:Number(a.weight),revoked:a.revoked}))??[]},r}async function h4(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return fe(n.node,"SDK Send Get Account Error: opts.node must be defined."),fe(t.response,"SDK Send Get Account Error: context.response must be defined."),fe(t.Buffer,"SDK Send Get Account Error: context.Buffer must be defined."),e=await e,e.block.height!==null?await u4(e,t,n):await f4(e,t,n)}async function d4(e,t,n){const s=await(n.httpRequest||Pt)({hostname:n.node,path:`/v1/blocks/${e.block.id}`,method:"GET",body:null});return Q0(e,t,s)}async function p4(e,t,n){const s=await(n.httpRequest||Pt)({hostname:n.node,path:`/v1/blocks?height=${e.block.height}`,method:"GET",body:null});return Q0(e,t,s)}async function g4(e,t,n){const r=n.httpRequest||Pt,s=e.block?.isSealed?"sealed":"final",a=await r({hostname:n.node,path:`/v1/blocks?height=${s}`,method:"GET",body:null});return Q0(e,t,a)}function Q0(e,t,n){const r=n.length?n[0]:null,s=t.response();return s.tag=e.tag,s.blockHeader={id:r.header.id,parentId:r.header.parent_id,height:Number(r.header.height),timestamp:r.header.timestamp},s}async function y4(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};fe(n.node,"SDK Send Get Block Header Error: opts.node must be defined."),fe(t.response,"SDK Send Get Block Header Error: context.response must be defined."),e=await e;const r=e.block.id!==null,s=e.block.height!==null;return r?await d4(e,t,n):s?await p4(e,t,n):await g4(e,t,n)}async function m4(e,t,n){const s=await(n.httpRequest||Pt)({hostname:n.node,path:`/v1/blocks/${e.block.id}?expand=payload`,method:"GET",body:null});return J0(e,t,s)}async function b4(e,t,n){const s=await(n.httpRequest||Pt)({hostname:n.node,path:`/v1/blocks?height=${e.block.height}&expand=payload`,method:"GET",body:null});return J0(e,t,s)}async function w4(e,t,n){const r=n.httpRequest||Pt,s=e.block?.isSealed?"sealed":"final",a=await r({hostname:n.node,path:`/v1/blocks?height=${s}&expand=payload`,method:"GET",body:null});return J0(e,t,a)}function J0(e,t,n){const r=n.length?n[0]:null,s=t.response();return s.tag=e.tag,s.block={id:r.header.id,parentId:r.header.parent_id,height:Number(r.header.height),timestamp:r.header.timestamp,parentVoterSignature:r.header.parent_voter_signature,collectionGuarantees:r.payload.collection_guarantees.map(a=>({collectionId:a.collection_id,signerIds:a.signer_ids})),blockSeals:r.payload.block_seals.map(a=>({blockId:a.block_id,executionReceiptId:a.result_id}))},s}async function v4(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};fe(n.node,"SDK Send Get Block Error: opts.node must be defined."),fe(t.response,"SDK Send Get Block Error: context.response must be defined."),e=await e;const r=e.block.id!==null,s=e.block.height!==null;return r?await m4(e,t,n):s?await b4(e,t,n):await w4(e,t,n)}async function E4(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};fe(n.node,"SDK Send Get Collection Error: opts.node must be defined."),fe(t.response,"SDK Send Get Collection Error: context.response must be defined.");const s=await(n.httpRequest||Pt)({hostname:n.node,path:`/v1/collections/${e.collection.id}?expand=transactions`,method:"GET",body:null}),a=t.response();return a.tag=e.tag,a.collection={id:s.id,transactionIds:s.transactions.map(l=>l.id)},a}async function _4(e,t,n){const s=await(n.httpRequest||Pt)({hostname:n.node,path:`/v1/events?type=${e.events.eventType}&start_height=${e.events.start}&end_height=${e.events.end}`,method:"GET",body:null});return a3(e,t,s)}async function S4(e,t,n){const s=await(n.httpRequest||Pt)({hostname:n.node,path:`/v1/events?type=${e.events.eventType}&block_ids=${e.events.blockIds.join(",")}`,method:"GET",body:null});return a3(e,t,s)}function a3(e,t,n){let r=t.response();return r.tag=e.tag,r.events=[],n.forEach(s=>s.events?s.events.forEach(a=>r.events.push({blockId:s.block_id,blockHeight:Number(s.block_height),blockTimestamp:s.block_timestamp,type:a.type,transactionId:a.transaction_id,transactionIndex:Number(a.transaction_index),eventIndex:Number(a.event_index),payload:JSON.parse(t.Buffer.from(a.payload,"base64").toString())})):null),r}async function A4(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};fe(n.node,"SDK Send Get Events Error: opts.node must be defined."),fe(t.response,"SDK Send Get Events Error: context.response must be defined."),fe(t.Buffer,"SDK Send Get Events Error: context.Buffer must be defined."),e=await e;const r=e.events.start!==null,s=Array.isArray(e.events.blockIds)&&e.events.blockIds.length>0;return fe(r||s,"SendGetEventsError: Unable to determine which get events request to send. Either a block height range, or block IDs must be specified."),r?await _4(e,t,n):await S4(e,t,n)}async function R4(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};fe(n.node,"SDK Send Get Transaction Error: opts.node must be defined."),fe(t.response,"SDK Send Get Transaction Error: context.response must be defined."),fe(t.Buffer,"SDK Send Get Transaction Error: context.Buffer must be defined.");const r=n.httpRequest||Pt;e=await e;const s=await r({hostname:n.node,path:`/v1/transactions/${e.transaction.id}`,method:"GET",body:null}),a=h=>({address:h.address,keyId:Number(h.key_index),sequenceNumber:Number(h.sequence_number)}),l=h=>({address:h.address,keyId:Number(h.key_index),signature:h.signature}),u=h=>JSON.parse(t.Buffer.from(h,"base64").toString());let d=t.response();return d.tag=e.tag,d.transaction={script:t.Buffer.from(s.script,"base64").toString(),args:[...s.arguments.map(u)],referenceBlockId:s.reference_block_id,gasLimit:Number(s.gas_limit),payer:s.payer,proposalKey:s.proposal_key?a(s.proposal_key):s.proposal_key,authorizers:s.authorizers,payloadSignatures:[...s.payload_signatures.map(l)],envelopeSignatures:[...s.envelope_signatures.map(l)]},d}const O4={UNKNOWN:0,PENDING:1,FINALIZED:2,EXECUTED:3,SEALED:4,EXPIRED:5};async function x4(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};fe(n.node,"SDK Send Get Transaction Status Error: opts.node must be defined."),fe(t.response,"SDK Send Get Transaction Status Error: context.response must be defined."),fe(t.Buffer,"SDK Send Get Transaction Status Error: context.Buffer must be defined.");const r=n.httpRequest||Pt;e=await e;const s=await r({hostname:n.node,path:`/v1/transaction_results/${e.transaction.id}`,method:"GET",body:null});let a=t.response();return a.tag=e.tag,a.transactionStatus={blockId:s.block_id,status:O4[s.status.toUpperCase()]||"",statusString:s.status.toUpperCase(),statusCode:s.status_code,errorMessage:s.error_message,events:s.events.map(l=>({type:l.type,transactionId:l.transaction_id,transactionIndex:Number(l.transaction_index),eventIndex:Number(l.event_index),payload:JSON.parse(t.Buffer.from(l.payload,"base64").toString())}))},a}async function T4(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};fe(!!n.node,"SDK Send Ping Error: opts.node must be defined."),fe(!!t.response,"SDK Send Ping Error: context.response must be defined."),await(n.httpRequest||Pt)({hostname:n.node,path:"/v1/blocks?height=sealed",method:"GET",body:null});let s=typeof t?.response=="function"?t.response():{};return s.tag=e.tag,s}const D4=e=>`${withPrefix(e.addr)}-${e.keyId}`;async function I4(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};fe(n.node,"SDK Send Transaction Error: opts.node must be defined."),fe(t.response,"SDK Send Transaction Error: context.response must be defined."),fe(t.Buffer,"SDK Send Transaction Error: context.Buffer must be defined.");const r=n.httpRequest||Pt;e=await e;let s=[];for(let p of Object.values(e.accounts))try{if(!p.role.payer&&p.signature!=null){const y={address:$t(p.addr),key_index:String(p.keyId),signature:t.Buffer.from(p.signature,"hex").toString("base64")};s.find(b=>b.address===y.address&&b.key_index===y.key_index&&b.signature===y.signature)||s.push(y)}}catch(y){throw console.error("SDK HTTP Send Error: Trouble applying payload signature",{acct:p,ix:e}),y}let a={};for(let p of Object.values(e.accounts))try{if(p.role.payer&&p.signature!=null){let y=p.tempId||D4(p);a[y]=a[y]||{address:$t(p.addr),key_index:String(p.keyId),signature:t.Buffer.from(p.signature,"hex").toString("base64")}}}catch(y){throw console.error("SDK HTTP Send Error: Trouble applying envelope signature",{acct:p,ix:e}),y}a=Object.values(a);var l=Date.now();const u=await r({hostname:n.node,path:"/v1/transactions",method:"POST",body:{script:t.Buffer.from(e.message.cadence).toString("base64"),arguments:[...e.message.arguments.map(p=>t.Buffer.from(JSON.stringify(e.arguments[p].asArgument)).toString("base64"))],reference_block_id:e.message.refBlock?e.message.refBlock:null,gas_limit:String(e.message.computeLimit),payer:$t(e.accounts[Array.isArray(e.payer)?e.payer[0]:e.payer].addr),proposal_key:{address:$t(e.accounts[e.proposer].addr),key_index:String(e.accounts[e.proposer].keyId),sequence_number:String(e.accounts[e.proposer].sequenceNum)},authorizers:e.authorizations.map(p=>e.accounts[p].addr).reduce((p,y)=>p.find(b=>b===y)?p:[...p,y],[]).map($t),payload_signatures:s,envelope_signatures:a}});var d=Date.now();let h=t.response();return h.tag=e.tag,h.transactionId=u.id,typeof window<"u"&&typeof CustomEvent<"u"&&window.dispatchEvent(new CustomEvent("FLOW::TX",{detail:{txId:h.transactionId,delta:d-l}})),h}async function C4(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};fe(n.node,"SDK Send Get Network Parameters Error: opts.node must be defined."),fe(t.response,"SDK Send Get Network Parameters Error: context.response must be defined.");const r=n.httpRequest||Pt;e=await e;const s=await r({hostname:n.node,path:"/v1/network/parameters",method:"GET",body:null,enableRequestLogging:n.enableRequestLogging??!0});let a=t.response();return a.tag=e.tag,a.networkParameters={chainId:s.chain_id},a}async function N4(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};fe(n.node,"SDK Send Get Node Version Info Error: opts.node must be defined."),fe(t.response,"SDK Send Get Node Verison Info Error: context.response must be defined.");const r=n.httpRequest||Pt;e=await e;const s=await r({hostname:n.node,path:"/v1/node_version_info",method:"GET"});let a=t.response();return a.tag=e.tag,a.nodeVersionInfo={semver:s.semver,commit:s.commit,sporkId:s.spork_id,protocolVersion:parseInt(s.protocol_version),sporkRootBlockHeight:parseInt(s.spork_root_block_height),nodeRootBlockHeight:parseInt(s.node_root_block_height)},a}const c3=n4;class h2 extends Error{constructor(t){let{code:n,reason:r,message:s,wasClean:a}=t;const l=`
      connectWs: connection closed with error${s?`: ${s}`:""}
      ${n?`code: ${n}`:""}
      ${r?`reason: ${r}`:""}
      ${a?`wasClean: ${a}`:""}
    `;super(l),this.name="WebsocketError",this.code=n,this.reason=r,this.wasClean=!1}}function U4(e){let{hostname:t,path:n,params:r,getParams:s,retryLimit:a=5,retryIntervalMs:l=1e3}=e;if(s&&r)throw new Error("connectWs: cannot specify both params and getParams");let u=new Vn.EventEmitter,d=0;const h=s||(()=>r);let p=()=>{};return function y(){let b=!1,w=!1;const v=B4(t,n,h()),E=new c3(v);E.onmessage=function(_){const R=i3(_.data);R?u.emit("data",R):(u.emit("error",new h2({message:"invalid JSON data"})),this.close())},E.onclose=function(_){if(b){u.emit("close"),u.removeAllListeners();return}w?setTimeout(y,l):d<a?(d++,setTimeout(y,l)):(u.emit("error",new h2({wasClean:_.wasClean,code:_.code,reason:_.reason,message:"failed to connect"})),setTimeout(()=>{u.emit("close"),u.removeAllListeners()}))},E.onopen=function(){w=!0,d=0},p=()=>{b=!0,E.close()}}(),{on(y,b){return u.on(y,b),this},off(y,b){return u.off(y,b),this},close(){p()}}}function B4(e,t,n){const r=new URL(t||"",e);return r.protocol==="https:"?r.protocol="wss:":r.protocol==="http:"&&(r.protocol="ws:"),Object.entries(n||{}).forEach(s=>{let[a,l]=s;if(l){let u;Array.isArray(l)?u=l.join(","):u=l.toString(),r.searchParams.append(a,u)}}),r.toString()}function $4(e,t,n){const r=t.response();return r.tag=e.tag,r.events=n.Events?.length>0?n.Events.map(s=>({blockId:n.BlockID,blockHeight:Number(n.Height),blockTimestamp:n.BlockTimestamp,type:s.Type,transactionId:s.TransactionID,transactionIndex:Number(s.TransactionIndex),eventIndex:Number(s.EventIndex),payload:JSON.parse(t.Buffer.from(s.Payload,"base64").toString())})):null,r.heartbeat={blockId:n.BlockID,blockHeight:Number(n.Height),blockTimestamp:n.BlockTimestamp},r}function P4(e,t,n){const r=t.response();return r.tag=e.tag,r.streamConnection=n,r}async function k4(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};fe(n.node,"SDK Send Get Events Error: opts.node must be defined."),fe(t.response,"SDK Send Get Events Error: context.response must be defined."),fe(t.Buffer,"SDK Send Get Events Error: context.Buffer must be defined.");const r=await e,s=n.connectWs||U4,a=new Vn.EventEmitter;let l=null;const u=s({hostname:n.node,path:"/v1/subscribe_events",getParams:()=>{const h={event_types:r.subscribeEvents?.eventTypes,addresses:r.subscribeEvents?.addresses,contracts:r.subscribeEvents?.contracts,heartbeat_interval:r.subscribeEvents?.heartbeatInterval};return l?h.start_height=l+1:(h.start_block_id=r.subscribeEvents?.startBlockId,h.start_height=r.subscribeEvents?.startHeight),h}});return u.on("data",h=>{const p=$4(r,t,h);l=p.heartbeat.blockHeight,a.emit("data",p)}),u.on("error",h=>{a.emit("error",h)}),u.on("close",()=>{a.emit("close")}),P4(r,t,{on(h,p){return a.on(h,p),this},off(h,p){return a.off(h,p),this},close(){u.close()}})}const eb=async function(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};switch(fe(!!n?.node,'SDK Send Error: Either opts.node or "accessNode.api" in config must be defined.'),fe(!!t.ix,"SDK Send Error: context.ix must be defined."),e=await e,!0){case t.ix.isTransaction(e):return n.sendTransaction?n.sendTransaction(e,t,n):I4(e,t,n);case t.ix.isGetTransactionStatus(e):return n.sendGetTransactionStatus?n.sendGetTransactionStatus(e,t,n):x4(e,t,n);case t.ix.isGetTransaction(e):return n.sendGetTransaction?n.sendGetTransaction(e,t,n):R4(e,t,n);case t.ix.isScript(e):return n.sendExecuteScript?n.sendExecuteScript(e,t,n):a4(e,t,n);case t.ix.isGetAccount(e):return n.sendGetAccount?n.sendGetAccount(e,t,n):h4(e,t,n);case t.ix.isGetEvents(e):return n.sendGetEvents?n.sendGetEvents(e,t,n):A4(e,t,n);case t.ix.isSubscribeEvents?.(e):return n.connectSubscribeEvents?n.connectSubscribeEvents(e,t,n):k4(e,t,n);case t.ix.isGetBlock(e):return n.sendGetBlock?n.sendGetBlock(e,t,n):v4(e,t,n);case t.ix.isGetBlockHeader(e):return n.sendGetBlockHeader?n.sendGetBlockHeader(e,t,n):y4(e,t,n);case t.ix.isGetCollection(e):return n.sendGetCollection?n.sendGetCollection(e,t,n):E4(e,t,n);case t.ix.isPing(e):return n.sendPing?n.sendPing(e,t,n):T4(e,t,n);case t.ix.isGetNetworkParameters(e):return n.sendGetNetworkParameters?n.sendGetNetworkParameters(e,t,n):C4(e,t,n);case t.ix.isGetNodeVersionInfo?.(e):return n.sendGetNodeVersionInfo?n.sendGetNodeVersionInfo(e,t,n):N4(e,t,n);default:return e}};let d2=function(e){return e.LIST_SUBSCRIPTIONS="list_subscriptions",e.SUBSCRIBE="subscribe",e.UNSUBSCRIBE="unsubscribe",e}({});class tu extends Error{constructor(t,n){super(n),this.name="SocketError",this.code=t}static fromMessage(t){return new tu(t.code,t.message)}}const M4=1;class L4{counter=0;socket=null;subscriptions=[];reconnectAttempts=0;connectPromise=null;closeConnection=null;constructor(t,n){this.config={...n,reconnectOptions:{initialReconnectDelay:500,reconnectAttempts:5,maxReconnectDelay:5e3,...n.reconnectOptions}},this.handlers=t}subscribe(t){const n=this._subscribe(t);return{unsubscribe:()=>{n.then(r=>r&&this.unsubscribe(r))}}}async _subscribe(t){const r=this.getHandler(t.topic).createSubscriber(t.args,t.onData,t.onError);let s=null;try{await this.connect(),s={id:String(this.counter++),topic:t.topic,subscriber:r},this.subscriptions.push(s);const a=await this.sendSubscribe(s);if(a.error)throw new Error(`Failed to subscribe to topic ${s.topic}`,{cause:tu.fromMessage(a.error)})}catch(a){return r.onError(a instanceof Error?a:new Error(String(a))),s&&this.unsubscribe(s.id),null}return s.id}unsubscribe(t){const n=this.subscriptions.find(r=>r.id===t);if(n){if(this.subscriptions=this.subscriptions.filter(r=>r.id!==t),this.subscriptions.length===0){this.closeConnection?.();return}this.sendUnsubscribe(n).catch(r=>{console.error(`Error while unsubscribing from topic: ${r}`)})}}async connect(){return this.connectPromise?this.connectPromise:(this.connectPromise=new Promise((t,n)=>{if(this.socket?.readyState===M4){t();return}this.socket=new c3(this.config.node);const r=l=>{const u=JSON.parse(l.data);if("action"in u&&u.error){const h=this.subscriptions.find(p=>p.id===u.subscription_id);h&&(h.subscriber.onError(new Error(`Failed to subscribe to topic ${h.topic}: ${u.error.message}`)),this.subscriptions=this.subscriptions.filter(p=>p.id!==u.subscription_id));return}const d=this.subscriptions.find(h=>h.id===u.subscription_id);d&&!("action"in u)&&u.subscription_id===d.id&&d.subscriber.onData(u.payload)},s=()=>{this.handleSocketError(new Error("WebSocket closed")).then(()=>{t()}).catch(l=>{n(l)})},a=()=>{t()};this.socket.addEventListener("message",r),this.socket.addEventListener("close",s),this.socket.addEventListener("open",a),this.closeConnection=()=>{this.socket?.removeEventListener("message",r),this.socket?.removeEventListener("close",s),this.socket?.removeEventListener("open",a),this.socket?.close(),this.socket=null,this.closeConnection=null,this.connectPromise=null}}),this.connectPromise)}async handleSocketError(t){if(this.closeConnection?.(),++this.reconnectAttempts>=this.config.reconnectOptions.reconnectAttempts)throw qe({level:ft.error,title:"WebSocket Error",message:`Failed to reconnect to the server after ${this.reconnectAttempts+1} attempts: ${t}`}),this.subscriptions.forEach(n=>{n.subscriber.onError(new Error(`Failed to reconnect to the server after ${this.reconnectAttempts+1} attempts: ${t}`))}),this.subscriptions=[],this.reconnectAttempts=0,t;qe({level:ft.warn,title:"WebSocket Error",message:`WebSocket error, reconnecting in ${this.backoffInterval}ms: ${t}`}),await new Promise(n=>setTimeout(n,this.backoffInterval)),await this.connect(),await Promise.all(this.subscriptions.map(async n=>{await this.sendSubscribe(n).catch(r=>{n.subscriber.onError(new Error(`Failed to restore subscription: ${r}`)),this.subscriptions=this.subscriptions.filter(s=>s.id!==n.id)})})),this.reconnectAttempts=0}async sendSubscribe(t){const n={action:d2.SUBSCRIBE,topic:t.topic,arguments:t.subscriber.getConnectionArgs(),subscription_id:String(t.id)},r=await this.request(n);if(r.error)throw new Error(`Failed to subscribe to topic ${t.topic}`,{cause:tu.fromMessage(r.error)});return r}async sendUnsubscribe(t){const n={action:d2.UNSUBSCRIBE,subscription_id:t.id};this.socket?.send(JSON.stringify(n));const r=await this.request(n);if(r.error)throw new Error(`Failed to unsubscribe from topic ${t.topic}`,{cause:tu.fromMessage(r.error)});return r}async request(t){let n=()=>{};return await new Promise((r,s)=>{if(!this.socket){s(new Error("WebSocket is not connected"));return}n=()=>{this.socket?.removeEventListener("error",a),this.socket?.removeEventListener("message",u),this.socket?.removeEventListener("close",l)},this.socket.addEventListener("error",a),this.socket.addEventListener("message",u),this.socket.addEventListener("close",l),this.socket.send(JSON.stringify(t));function a(d){s(new Error(`WebSocket error: ${d}`))}function l(){s(new Error("WebSocket closed"))}function u(d){const h=JSON.parse(d.data);h.subscription_id===t.subscription_id&&r(h)}}).finally(()=>{n()})}getHandler(t){const n=this.handlers.find(r=>r.topic===t);if(!n)throw new Error(`No handler found for topic ${t}`);return n}get backoffInterval(){return Math.min(this.config.reconnectOptions.maxReconnectDelay,this.config.reconnectOptions.initialReconnectDelay*2**this.reconnectAttempts)}}const j4={topic:zo.BLOCKS,createSubscriber:(e,t,n)=>{let r={...e};return{onData(s){const a={block:{id:s.header.id,parentId:s.header.parent_id,height:Number(s.header.height),timestamp:s.header.timestamp,parentVoterSignature:s.header.parent_voter_signature,collectionGuarantees:s.payload.collection_guarantees.map(l=>({collectionId:l.collection_id,signerIds:l.signer_indices})),blockSeals:s.payload.block_seals.map(l=>({blockId:l.block_id,executionReceiptId:l.result_id}))}};r={blockStatus:r.blockStatus,startBlockHeight:Number(BigInt(s.header.height)+BigInt(1))},t(a)},onError(s){n(s)},getConnectionArgs(){let s={block_status:r.blockStatus};return"startBlockHeight"in r&&r.startBlockHeight?{...s,start_block_height:String(r.startBlockHeight)}:"startBlockId"in r&&r.startBlockId?{...s,start_block_id:r.startBlockId}:s}}}},z4={topic:zo.BLOCK_HEADERS,createSubscriber:(e,t,n)=>{let r={...e};return{onData(s){const a={blockHeader:{id:s.id,parentId:s.parent_id,height:Number(s.height),timestamp:s.timestamp,parentVoterSignature:s.parent_voter_signature}};r={blockStatus:r.blockStatus,startBlockHeight:Number(BigInt(s.height)+BigInt(1))},t(a)},onError(s){n(s)},getConnectionArgs(){let s={block_status:r.blockStatus};return"startBlockHeight"in r&&r.startBlockHeight?{...s,start_block_height:r.startBlockHeight}:"startBlockId"in r&&r.startBlockId?{...s,start_block_id:r.startBlockId}:s}}}},q4={topic:zo.BLOCK_DIGESTS,createSubscriber:(e,t,n)=>{let r={...e};return{onData(s){const a={blockDigest:{id:s.block_id,height:Number(s.height),timestamp:s.timestamp}};r={blockStatus:r.blockStatus,startBlockId:String(BigInt(s.height)+BigInt(1))},t(a)},onError(s){n(s)},getConnectionArgs(){let s={block_status:r.blockStatus};return"startBlockHeight"in r&&r.startBlockHeight?{...s,start_block_height:r.startBlockHeight}:"startBlockId"in r&&r.startBlockId?{...s,start_block_id:r.startBlockId}:s}}}},H4={topic:zo.ACCOUNT_STATUSES,createSubscriber:(e,t,n)=>{let r={...e};return{onData(s){const a=[];for(const[l,u]of Object.entries(s.account_events)){for(const d of u){const h={accountStatusEvent:{accountAddress:l,blockId:s.block_id,blockHeight:Number(s.height),type:d.type,transactionId:d.transaction_id,transactionIndex:Number(d.transaction_index),eventIndex:Number(d.event_index),payload:JSON.parse(Buffer.from(d.payload,"base64").toString())}};a.push(h)}a.sort((d,h)=>{const p=d.accountStatusEvent.transactionIndex-h.accountStatusEvent.transactionIndex;return p!==0?p:d.accountStatusEvent.eventIndex-h.accountStatusEvent.eventIndex});for(const d of a)t(d);r={...r,startBlockHeight:Number(BigInt(s.height)+BigInt(1)),startBlockId:void 0}}},onError(s){n(s)},getConnectionArgs(){let s={event_types:r.eventTypes,addresses:r.addresses,account_addresses:r.accountAddresses};return"startBlockHeight"in r&&r.startBlockHeight?{...s,start_block_height:r.startBlockHeight}:"startBlockId"in r&&r.startBlockId?{...s,start_block_id:r.startBlockId}:s}}}},F4={UNKNOWN:0,PENDING:1,FINALIZED:2,EXECUTED:3,SEALED:4,EXPIRED:5},V4={topic:zo.TRANSACTION_STATUSES,createSubscriber:(e,t,n)=>{let r={...e};return{onData(s){const a={transactionStatus:{blockId:s.transaction_result.block_id,status:F4[s.transaction_result.status.toUpperCase()],statusString:s.transaction_result.status.toUpperCase(),statusCode:s.transaction_result.status_code,errorMessage:s.transaction_result.error_message,events:s.transaction_result.events.map(l=>({type:l.type,transactionId:l.transaction_id,transactionIndex:Number(l.transaction_index),eventIndex:Number(l.event_index),payload:JSON.parse(Ot.Buffer.from(l.payload,"base64").toString())}))}};t(a)},onError(s){n(s)},getConnectionArgs(){return{tx_id:r.transactionId}}}}},G4={topic:zo.EVENTS,createSubscriber:(e,t,n)=>{let r={...e};return{onData(s){for(const a of s.events){const l={event:{blockId:s.block_id,blockHeight:Number(s.block_height),blockTimestamp:s.block_timestamp,type:a.type,transactionId:a.transaction_id,transactionIndex:Number(a.transaction_index),eventIndex:Number(a.event_index),payload:JSON.parse(Buffer.from(a.payload,"base64").toString())}};t(l)}r={...r,startHeight:Number(BigInt(s.block_height)+BigInt(1)),startBlockId:void 0}},onError(s){n(s)},getConnectionArgs(){let s={event_types:r.eventTypes,addresses:r.addresses,contracts:r.contracts};return"startBlockHeight"in r&&r.startBlockHeight?{...s,start_block_height:r.startBlockHeight}:"startBlockId"in r&&r.startBlockId?{...s,start_block_id:r.startBlockId}:s}}}},K4=[j4,z4,q4,H4,V4,G4];let p2=new Map;function Y4(e,t){let{topic:n,args:r,onData:s,onError:a}=e;const l=W4(t.node),u=p2.get(l)||new L4(K4,{node:l});return p2.set(l,u),u.subscribe({topic:n,args:r,onData:s,onError:a})}function W4(e){const t=new URL(s3(e,"/v1/ws"));return t.protocol==="https:"?t.protocol="wss:":t.protocol==="http:"&&(t.protocol="ws:"),t.toString()}const X4={send:eb,subscribe:Y4};var Ey={},_y={},Sy={},Ay={},Ry,g2;function tb(){if(g2)return Ry;g2=1;var e=function(n,r){return function(s,a){var l=a*2,u=r*2;s[l]=n[u],s[l+1]=n[u+1]}};return Ry=e,Ry}var y2;function Z4(){return y2||(y2=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=n(tb());function n(a){return a&&a.__esModule?a:{default:a}}var r=function(l){for(var u=l.A,d=l.C,h=0;h<25;h+=5){for(var p=0;p<5;p++)(0,t.default)(u,h+p)(d,p);for(var y=0;y<5;y++){var b=(h+y)*2,w=(y+1)%5*2,v=(y+2)%5*2;u[b]^=~d[w]&d[v],u[b+1]^=~d[w+1]&d[v+1]}}},s=r;e.default=s}(Ay)),Ay}var Oy={},xy={},m2;function Q4(){return m2||(m2=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=new Uint32Array([0,1,0,32898,2147483648,32906,2147483648,2147516416,0,32907,0,2147483649,2147483648,2147516545,2147483648,32777,0,138,0,136,0,2147516425,0,2147483658,0,2147516555,2147483648,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,0,32778,2147483648,2147483658,2147483648,2147516545,2147483648,32896,0,2147483649,2147483648,2147516424]),n=t;e.default=n}(xy)),xy}var b2;function J4(){return b2||(b2=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=n(Q4());function n(a){return a&&a.__esModule?a:{default:a}}var r=function(l){var u=l.A,d=l.roundIndex,h=d*2;u[0]^=t.default[h],u[1]^=t.default[h+1]},s=r;e.default=s}(Oy)),Oy}var Ty={},Dy={},w2;function e6(){return w2||(w2=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=[10,7,11,17,18,3,5,16,8,21,24,4,15,23,19,13,12,2,20,14,22,9,6,1],n=t;e.default=n}(Dy)),Dy}var Iy={},v2;function t6(){return v2||(v2=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=[1,3,6,10,15,21,28,36,45,55,2,14,27,41,56,8,25,43,62,18,39,61,20,44],n=t;e.default=n}(Iy)),Iy}var E2;function n6(){return E2||(E2=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=s(e6()),n=s(t6()),r=s(tb());function s(u){return u&&u.__esModule?u:{default:u}}var a=function(d){var h=d.A,p=d.C,y=d.W;(0,r.default)(h,1)(y,0);for(var b=0,w=0,v=0,E=32,_=0;_<24;_++){var R=t.default[_],D=n.default[_];(0,r.default)(h,R)(p,0),b=y[0],w=y[1],E=32-D,v=D<32?0:1,y[v]=b<<D|w>>>E,y[(v+1)%2]=w<<D|b>>>E,(0,r.default)(y,0)(h,R),(0,r.default)(p,0)(y,0)}},l=a;e.default=l}(Ty)),Ty}var Cy={},_2;function r6(){return _2||(_2=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=n(tb());function n(a){return a&&a.__esModule?a:{default:a}}var r=function(l){for(var u=l.A,d=l.C,h=l.D,p=l.W,y=0,b=0,w=0;w<5;w++){var v=w*2,E=(w+5)*2,_=(w+10)*2,R=(w+15)*2,D=(w+20)*2;d[v]=u[v]^u[E]^u[_]^u[R]^u[D],d[v+1]=u[v+1]^u[E+1]^u[_+1]^u[R+1]^u[D+1]}for(var I=0;I<5;I++){(0,t.default)(d,(I+1)%5)(p,0),y=p[0],b=p[1],p[0]=y<<1|b>>>31,p[1]=b<<1|y>>>31,h[I*2]=d[(I+4)%5*2]^p[0],h[I*2+1]=d[(I+4)%5*2+1]^p[1];for(var $=0;$<25;$+=5)u[($+I)*2]^=h[I*2],u[($+I)*2+1]^=h[I*2+1]}},s=r;e.default=s}(Cy)),Cy}var S2;function i6(){return S2||(S2=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=a(Z4()),n=a(J4()),r=a(n6()),s=a(r6());function a(d){return d&&d.__esModule?d:{default:d}}var l=function(){var h=new Uint32Array(10),p=new Uint32Array(10),y=new Uint32Array(2);return function(b){for(var w=0;w<24;w++)(0,s.default)({A:b,C:h,D:p,W:y}),(0,r.default)({A:b,C:h,W:y}),(0,t.default)({A:b,C:h}),(0,n.default)({A:b,roundIndex:w});h.fill(0),p.fill(0),y.fill(0)}},u=l;e.default=u}(Sy)),Sy}var A2;function s6(){return A2||(A2=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=W0(),n=r(i6());function r(d){return d&&d.__esModule?d:{default:d}}var s=function(h,p){for(var y=0;y<h.length;y+=8){var b=y/4;p[b]^=h[y+7]<<24|h[y+6]<<16|h[y+5]<<8|h[y+4],p[b+1]^=h[y+3]<<24|h[y+2]<<16|h[y+1]<<8|h[y]}return p},a=function(h,p){for(var y=0;y<p.length;y+=8){var b=y/4;p[y]=h[b+1],p[y+1]=h[b+1]>>>8,p[y+2]=h[b+1]>>>16,p[y+3]=h[b+1]>>>24,p[y+4]=h[b],p[y+5]=h[b]>>>8,p[y+6]=h[b]>>>16,p[y+7]=h[b]>>>24}return p},l=function(h){var p=this,y=h.capacity,b=h.padding,w=(0,n.default)(),v=200,E=y/8,_=v-y/4,R=0,D=new Uint32Array(v/4),I=t.Buffer.allocUnsafe(_);return this.absorb=function($){for(var U=0;U<$.length;U++)I[R]=$[U],R+=1,R>=_&&(s(I,D),w(D),R=0);return p},this.squeeze=function(){var $=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},U={buffer:$.buffer||t.Buffer.allocUnsafe(E),padding:$.padding||b,queue:t.Buffer.allocUnsafe(I.length),state:new Uint32Array(D.length)};I.copy(U.queue);for(var k=0;k<D.length;k++)U.state[k]=D[k];U.queue.fill(0,R),U.queue[R]|=U.padding,U.queue[_-1]|=128,s(U.queue,U.state);for(var q=0;q<U.buffer.length;q+=_)w(U.state),a(U.state,U.buffer.slice(q,q+_));return U.buffer},this.reset=function(){return I.fill(0),D.fill(0),R=0,p},this},u=l;e.default=u}(_y)),_y}var R2;function o6(){return R2||(R2=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.SHAKE=e.SHA3Hash=e.SHA3=e.Keccak=void 0;var t=W0(),n=r(s6());function r(p){return p&&p.__esModule?p:{default:p}}var s=function(y){var b=y.allowedSizes,w=y.defaultSize,v=y.padding;return function E(){var _=this,R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:w;if(!this||this.constructor!==E)return new E(R);if(b&&!b.includes(R))throw new Error("Unsupported hash length");var D=new n.default({capacity:R});return this.update=function(I){var $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"utf8";if(t.Buffer.isBuffer(I))return D.absorb(I),_;if(typeof I=="string")return _.update(t.Buffer.from(I,$));throw new TypeError("Not a string or buffer")},this.digest=function(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"binary",$=typeof I=="string"?{format:I}:I,U=D.squeeze({buffer:$.buffer,padding:$.padding||v});return $.format&&$.format!=="binary"?U.toString($.format):U},this.reset=function(){return D.reset(),_},this}},a=s({allowedSizes:[224,256,384,512],defaultSize:512,padding:1});e.Keccak=a;var l=s({allowedSizes:[224,256,384,512],defaultSize:512,padding:6});e.SHA3=l;var u=s({allowedSizes:[128,256],defaultSize:256,padding:31});e.SHAKE=u;var d=a;e.SHA3Hash=d,l.SHA3Hash=d;var h=l;e.default=h}(Ey)),Ey}o6();function l3(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];if(!e.length&&!t.length||!e.length)return n;if(!t.length)return n.push(...e),n;const[r,...s]=e,[a,...l]=t;return r!==void 0&&n.push(r),a!==void 0&&n.push(a),l3(s,l,n)}function u3(e){return function(t){return typeof t=="function"?(qe.deprecate({pkg:"FCL/SDK",subject:"Interopolation of functions into template literals",transition:"https://github.com/onflow/flow-js-sdk/blob/master/packages/sdk/TRANSITIONS.md#0001-deprecate-params"}),u3(e)(t(e))):String(t)}}function f3(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return typeof e=="string"?()=>e:typeof e=="function"?e:s=>l3([...e],n.map(u3(s))).join("").trim()}const Me=(e,t,n)=>({label:e,asArgument:t,asInjection:r=>(qe.deprecate({pkg:"@onflow/types",subject:`Passing in ${e} as value for ${e}`,message:`Going forward, use ${e} as value for ${e}.`}),n(r))}),No=e=>Array.isArray(e),zs=e=>typeof e=="object",h3=e=>e==null,a6=e=>typeof e=="boolean",xt=e=>typeof e=="number",kt=e=>Number.isInteger(e),ht=e=>typeof e=="string",Ie=e=>{throw new Error("Type Error: "+e)},Mt=e=>{qe.deprecate({pkg:"@onflow/types",subject:`Passing in Number as value for ${e}`,message:`Going forward, use String as value for ${e}.`,transition:"https://github.com/onflow/flow-js-sdk/blob/master/packages/types/WARNINGS.md#0002-[U]Int*-and-Word*-as-Number"})};let O2=!1;const c6={label:"Identity",asArgument:e=>(O2||(qe.deprecate({pkg:"@onflow/types",subject:"Identity",message:"Identity type is deprecated and will be removed in v2.0.0.  Please remove it from your code."}),O2=!0),e),asInjection:e=>e},l6=Me("UInt",e=>xt(e)&&kt(e)?(Mt("UInt"),{type:"UInt",value:e.toString()}):ht(e)?{type:"UInt",value:e}:Ie("Expected Positive Integer for type Unsigned Int"),e=>e),u6=Me("Int",e=>xt(e)&&kt(e)?(Mt("Int"),{type:"Int",value:e.toString()}):ht(e)?{type:"Int",value:e}:Ie("Expected Integer for type Int"),e=>e),f6=Me("UInt8",e=>xt(e)&&kt(e)?(Mt("UInt8"),{type:"UInt8",value:e.toString()}):ht(e)?{type:"UInt8",value:e}:Ie("Expected integer for UInt8"),e=>e),h6=Me("Int8",e=>xt(e)&&kt(e)?(Mt("Int8"),{type:"Int8",value:e.toString()}):ht(e)?{type:"Int8",value:e}:Ie("Expected positive integer for Int8"),e=>e),d6=Me("UInt16",e=>xt(e)&&kt(e)?(Mt("UInt16"),{type:"UInt16",value:e.toString()}):ht(e)?{type:"UInt16",value:e}:Ie("Expected integer for UInt16"),e=>e),p6=Me("Int16",e=>xt(e)&&kt(e)?(Mt("Int16"),{type:"Int16",value:e.toString()}):ht(e)?{type:"Int16",value:e}:Ie("Expected positive integer for Int16"),e=>e),g6=Me("UInt32",e=>xt(e)&&kt(e)?(Mt("UInt32"),{type:"UInt32",value:e.toString()}):ht(e)?{type:"UInt32",value:e}:Ie("Expected integer for UInt32"),e=>e),y6=Me("Int32",e=>xt(e)&&kt(e)?(Mt("Int32"),{type:"Int32",value:e.toString()}):ht(e)?{type:"Int32",value:e}:Ie("Expected positive integer for Int32"),e=>e),m6=Me("UInt64",e=>xt(e)&&kt(e)?(Mt("UInt64"),{type:"UInt64",value:e.toString()}):ht(e)?{type:"UInt64",value:e}:Ie("Expected integer for UInt64"),e=>e),b6=Me("Int64",e=>xt(e)&&kt(e)?(Mt("Int64"),{type:"Int64",value:e.toString()}):ht(e)?{type:"Int64",value:e}:Ie("Expected positive integer for Int64"),e=>e),w6=Me("UInt128",e=>xt(e)&&kt(e)?(Mt("UInt128"),{type:"UInt128",value:e.toString()}):ht(e)?{type:"UInt128",value:e}:Ie("Expected integer for UInt128"),e=>e),v6=Me("Int128",e=>xt(e)&&kt(e)?(Mt("Int128"),{type:"Int128",value:e.toString()}):ht(e)?{type:"Int128",value:e}:Ie("Expected positive integer for Int128"),e=>e),E6=Me("UInt256",e=>xt(e)&&kt(e)?(Mt("UInt256"),{type:"UInt256",value:e.toString()}):ht(e)?{type:"UInt256",value:e}:Ie("Expected integer for UInt256"),e=>e),_6=Me("Int256",e=>xt(e)&&kt(e)?(Mt("Int256"),{type:"Int256",value:e.toString()}):ht(e)?{type:"Int256",value:e}:Ie("Expected integer for Int256"),e=>e),S6=Me("Word8",e=>xt(e)&&kt(e)?(Mt("Word8"),{type:"Word8",value:e.toString()}):ht(e)?{type:"Word8",value:e}:Ie("Expected positive number for Word8"),e=>e),A6=Me("Word16",e=>xt(e)&&kt(e)?(Mt("Word16"),{type:"Word16",value:e.toString()}):ht(e)?{type:"Word16",value:e}:Ie("Expected positive number for Word16"),e=>e),R6=Me("Word32",e=>xt(e)&&kt(e)?(Mt("Word32"),{type:"Word32",value:e.toString()}):ht(e)?{type:"Word32",value:e}:Ie("Expected positive number for Word32"),e=>e),O6=Me("Word64",e=>xt(e)&&kt(e)?(Mt("Word64"),{type:"Word64",value:e.toString()}):ht(e)?{type:"Word64",value:e}:Ie("Expected positive number for Word64"),e=>e),x6=Me("Word128",e=>xt(e)&&kt(e)?(Mt("Word128"),{type:"Word128",value:e.toString()}):ht(e)?{type:"Word128",value:e}:Ie("Expected positive number for Word128"),e=>e),T6=Me("Word256",e=>xt(e)&&kt(e)?(Mt("Word256"),{type:"Word256",value:e.toString()}):ht(e)?{type:"Word256",value:e}:Ie("Expected positive number for Word256"),e=>e),d3=()=>{qe.deprecate({subject:"Passing in Numbers as values for Fix64 and UFix64 types",pkg:"@onflow/types",transition:"https://github.com/onflow/flow-js-sdk/blob/master/packages/types/WARNINGS.md#0001-[U]Fix64-as-Number"})},D6=Me("UFix64",e=>{if(ht(e)){const t=e.split(".");return t.length!==2?Ie(`Expected one decimal but found ${t.length} in the [U]Fix64 value. Find out more about [U]Fix64 types here: https://docs.onflow.org/cadence/json-cadence-spec/#fixed-point-numbers`):t[1].length==0||t[1].length>8?Ie(`Expected at least one digit, and at most 8 digits following the decimal of the [U]Fix64 value but found ${t[1].length} digits. Find out more about [U]Fix64 types here: https://docs.onflow.org/cadence/json-cadence-spec/#fixed-point-numbers`):(t[1]=t[1].padEnd(8,"0"),e=t.join("."),{type:"UFix64",value:e})}else if(xt(e))return d3(),{type:"UFix64",value:e.toString()};return Ie("Expected String for UFix64")},e=>e),I6=Me("Fix64",e=>{if(ht(e)){const t=e.split(".");return t.length!==2?Ie(`Expected one decimal but found ${t.length} in the [U]Fix64 value. Find out more about [U]Fix64 types here: https://docs.onflow.org/cadence/json-cadence-spec/#fixed-point-numbers`):t[1].length==0||t[1].length>8?Ie(`Expected at least one digit, and at most 8 digits following the decimal of the [U]Fix64 value but found ${t[1].length} digits. Find out more about [U]Fix64 types here: https://docs.onflow.org/cadence/json-cadence-spec/#fixed-point-numbers`):(t[1]=t[1].padEnd(8,"0"),e=t.join("."),{type:"Fix64",value:e})}else if(xt(e))return d3(),{type:"Fix64",value:e.toString()};return Ie("Expected String for Fix64")},e=>e),C6=Me("String",e=>ht(e)?{type:"String",value:e}:Ie("Expected String for type String"),e=>e),N6=Me("Character",e=>ht(e)?{type:"Character",value:e}:Ie("Expected Character for type Character"),e=>e),U6=Me("Bool",e=>a6(e)?{type:"Bool",value:e}:Ie("Expected Boolean for type Bool"),e=>e),p3=Me("Address",e=>ht(e)?{type:"Address",value:e}:Ie("Expected Address for type Address"),e=>e),B6=Me("Void",e=>!e||h3(e)?{type:"Void",value:null}:Ie("Expected Void for type Void"),e=>e),$6=e=>Me("Optional",t=>({type:"Optional",value:h3(t)?null:e.asArgument(t)}),t=>t),P6=Me("Reference",e=>zs(e)?{type:"Reference",value:e}:Ie("Expected Object for type Reference"),e=>e),x2=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Me("Array",t=>({type:"Array",value:No(e)?e.map((n,r)=>n.asArgument(t[r])):t.map(n=>e.asArgument(n))}),t=>t)},k6=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Me("Dictionary",t=>{const n=No(t),r=No(e);return zs(t)?{type:"Dictionary",value:r&&n?e.map((s,a)=>({key:s.key.asArgument(t[a].key),value:s.value.asArgument(t[a].value)})):n&&!r?t.map(s=>({key:e.key.asArgument(s.key),value:e.value.asArgument(s.value)})):!n&&!r?[{key:e.key.asArgument(t.key),value:e.value.asArgument(t.value)}]:Ie("Invalid arguments for Dictionary.")}:Ie("Expected Object for type Dictionary")},t=>t)},M6=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return Me("Event",n=>zs(n)?{type:"Event",value:{id:e,fields:No(t)?t.map((r,s)=>({name:n.fields[s].name,value:r.value.asArgument(n.fields[s].value)})):n.fields.map(r=>({name:r.name,value:t.value.asArgument(r.value)}))}}:Ie("Expected Object for type Event"),n=>n)},L6=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return Me("Resource",n=>zs(n)?{type:"Resource",value:{id:e,fields:No(t)?t.map((r,s)=>({name:n.fields[s].name,value:r.value.asArgument(n.fields[s].value)})):n.fields.map(r=>({name:r.name,value:t.value.asArgument(r.value)}))}}:Ie("Expected Object for type Resource"),n=>n)},j6=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return Me("Struct",n=>zs(n)?{type:"Struct",value:{id:e,fields:No(t)?t.map((r,s)=>({name:n.fields[s].name,value:r.value.asArgument(n.fields[s].value)})):n.fields.map(r=>({name:r.name,value:t.value.asArgument(r.value)}))}}:Ie("Expected Object for type Struct"),n=>n)},z6=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return Me("Enum",n=>zs(n)?{type:"Enum",value:{id:e,fields:No(t)?t.map((r,s)=>({name:n.fields[s].name,value:r.value.asArgument(n.fields[s].value)})):n.fields.map(r=>({name:r.name,value:t.value.asArgument(r.value)}))}}:Ie("Expected Object for type Enum"),n=>n)},q6=Me("Path",e=>zs(e)?ht(e.domain)?e.domain==="storage"||e.domain==="private"||e.domain==="public"?ht(e.identifier)?{type:"Path",value:{domain:e.domain,identifier:e.identifier}}:Ie(`Expected a string for the Path identifier but found ${e.identifier}. Find out more about the Path type here: https://docs.onflow.org/cadence/json-cadence-spec/#path`):Ie(`Expected either "storage", "private" or "public" as the Path domain but found ${e.domain}. Find out more about the Path type here: https://docs.onflow.org/cadence/json-cadence-spec/#path`):Ie(`Expected a string for the Path domain but found ${e.domain}. Find out more about the Path type here: https://docs.onflow.org/cadence/json-cadence-spec/#path`):Ie("Expected Object for type Path"),e=>e),H6=e=>Me("InclusiveRange",t=>{if(zs(t)){const{start:n,end:r,step:s}=t;return{type:"InclusiveRange",value:{start:e.asArgument(n),end:e.asArgument(r),step:e.asArgument(s)}}}return Ie("Expected Object for type InclusiveRange")},t=>t),F6=Object.freeze(Object.defineProperty({__proto__:null,Address:p3,Array:x2,Bool:U6,Character:N6,Dictionary:k6,Enum:z6,Event:M6,Fix64:I6,Identity:c6,InclusiveRange:H6,Int:u6,Int128:v6,Int16:p6,Int256:_6,Int32:y6,Int64:b6,Int8:h6,Optional:$6,Path:q6,Reference:P6,Resource:L6,String:C6,Struct:j6,UFix64:D6,UInt:l6,UInt128:w6,UInt16:d6,UInt256:E6,UInt32:g6,UInt64:m6,UInt8:f6,Void:B6,Word128:x6,Word16:A6,Word256:T6,Word32:R6,Word64:O6,Word8:S6,_Array:x2},Symbol.toStringTag,{value:"Module"})),V6=`{
  "kind":"${md.ACCOUNT}",
  "tempId":null,
  "addr":null,
  "keyId":null,
  "sequenceNum":null,
  "signature":null,
  "signingFunction":null,
  "resolve":null,
  "role": {
    "proposer":false,
    "authorizer":false,
    "payer":false,
    "param":false
  }
}`,G6=`{
  "kind":"${md.ARGUMENT}",
  "tempId":null,
  "value":null,
  "asArgument":null,
  "xform":null,
  "resolve": null,
  "resolveArgument": null
}`,g3=`{
  "tag":"${tt.UNKNOWN}",
  "assigns":{},
  "status":"${Du.OK}",
  "reason":null,
  "accounts":{},
  "params":{},
  "arguments":{},
  "message": {
    "cadence":null,
    "refBlock":null,
    "computeLimit":null,
    "proposer":null,
    "payer":null,
    "authorizations":[],
    "params":[],
    "arguments":[]
  },
  "proposer":null,
  "authorizations":[],
  "payer":[],
  "events": {
    "eventType":null,
    "start":null,
    "end":null,
    "blockIds":[]
  },
  "subscribeEvents": {
    "startBlockId":null,
    "startHeight":null,
    "eventTypes":null,
    "addresses":null,
    "contracts":null,
    "heartbeatInterval":null
  },
  "transaction": {
    "id":null
  },
  "block": {
    "id":null,
    "height":null,
    "isSealed":null
  },
  "account": {
    "addr":null
  },
  "collection": {
    "id":null
  }
}`,y3=new Set(Object.keys(JSON.parse(g3))),wd=()=>JSON.parse(g3),K6=()=>(qe.deprecate({pkg:"FCL/SDK",message:"The interaction been deprecated from the Flow JS-SDK/FCL. use initInteraction instead",transition:"https://github.com/onflow/flow-js-sdk/blob/master/packages/sdk/TRANSITIONS.md#0010-deprecate-interaction",level:ft.warn}),wd()),m3=e=>typeof e=="number",b3=e=>Array.isArray(e),w3=e=>e!==null&&typeof e=="object",nb=e=>e==null,pc=e=>typeof e=="function",v3=e=>{if(!w3(e)||nb(e)||m3(e))return!1;for(let t of y3)if(!e.hasOwnProperty(t))return!1;return!0},fr=e=>(e.status=Du.OK,e),rb=(e,t)=>(e.status=Du.BAD,e.reason=t,e),Gn=e=>t=>(t.tag=e,fr(t)),T2=e=>e.keyId==null?e:(fe(!isNaN(parseInt(e.keyId.toString())),"account.keyId must be an integer"),{...e,keyId:parseInt(e.keyId.toString())}),E3=()=>JSON.parse(V6),vd=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return n=>{fe(typeof e=="function"||typeof e=="object","prepAccount must be passed an authorization function or an account object"),fe(t.role!=null,"Account must have a role");const r=E3(),s=t.role,a=G0();let l={...e};e.authorization&&pc(e.authorization)&&(l={resolve:e.authorization}),!e.authorization&&pc(e)&&(l={resolve:e});const u=l.resolve;return u&&(l.resolve=function(d){for(var h=arguments.length,p=new Array(h>1?h-1:0),y=1;y<h;y++)p[y-1]=arguments[y];return[u,T2].reduce(async(b,w)=>w(await b,...p),d)}),l=T2(l),n.accounts[a]={...r,tempId:a,...l,role:{...r.role,...typeof e.role=="object"?e.role:{},...s?{[s]:!0}:{}}},s===hu.AUTHORIZER?n.authorizations.push(a):s===hu.PAYER?n.payer.push(a):s&&(n[s]=a),n}},_3=e=>t=>{let n=G0();return t.message.arguments.push(n),t.arguments[n]=JSON.parse(G6),t.arguments[n].tempId=n,t.arguments[n].value=e.value,t.arguments[n].asArgument=e.asArgument,t.arguments[n].xform=e.xform,t.arguments[n].resolve=e.resolve,t.arguments[n].resolveArgument=pc(e.resolveArgument)?e.resolveArgument.bind(e):e.resolveArgument,fr(t)},Y6=Gn(tt.UNKNOWN),S3=Gn(tt.SCRIPT),A3=Gn(tt.TRANSACTION),R3=Gn(tt.GET_TRANSACTION_STATUS),W6=Gn(tt.GET_TRANSACTION),O3=Gn(tt.GET_ACCOUNT),X6=Gn(tt.GET_EVENTS),Z6=Gn(tt.PING),x3=Gn(tt.GET_BLOCK),Q6=Gn(tt.GET_BLOCK_HEADER),J6=Gn(tt.GET_COLLECTION),T3=Gn(tt.GET_NETWORK_PARAMETERS),eU=Gn(tt.SUBSCRIBE_EVENTS),tU=Gn(tt.GET_NODE_VERSION_INFO),Kn=e=>t=>t.tag===e,D3=Kn(tt.UNKNOWN),ib=Kn(tt.SCRIPT),qs=Kn(tt.TRANSACTION),nU=Kn(tt.GET_TRANSACTION_STATUS),rU=Kn(tt.GET_TRANSACTION),iU=Kn(tt.GET_ACCOUNT),sU=Kn(tt.GET_EVENTS),oU=Kn(tt.PING),aU=Kn(tt.GET_BLOCK),cU=Kn(tt.GET_BLOCK_HEADER),lU=Kn(tt.GET_COLLECTION),uU=Kn(tt.GET_NETWORK_PARAMETERS),fU=Kn(tt.GET_NODE_VERSION_INFO),hU=Kn(tt.SUBSCRIBE_EVENTS),dU=e=>e.status===Du.OK,I3=e=>e.status===Du.BAD,pU=e=>e.reason,gU=e=>e.kind===md.ACCOUNT,yU=e=>e.kind===md.ARGUMENT,mU=e=>{for(let t of Object.keys(e))if(!y3.has(t))throw new Error(`"${t}" is an invalid root level Interaction property.`);return e},$h=async function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];try{if(e=mU(await e),I3(e))throw new Error(`Interaction Error: ${e.reason}`);if(!t.length)return e;const[n,...r]=t,s=await n;if(pc(s))return $h(s(e),r);if(nb(s)||!s)return $h(e,r);if(v3(s))return $h(s,r);throw new Error("Invalid Interaction Composition")}catch(n){throw n}};function En(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const[r,s]=t;return b3(r)?u=>En(u,r):$h(r,s)}const bU=function(e){return e},Ed=function(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;return e.assigns[t]==null?n:e.assigns[t]},sb=(e,t)=>n=>(n.assigns[e]=t,fr(n)),C3=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:bU;return n=>(n.assigns[e]=t(n.assigns[e],n),fr(n))},wU=e=>t=>(delete t.assigns[e],fr(t));var ob=Object.freeze({__proto__:null,Bad:rb,Ok:fr,destroy:wU,get:Ed,initAccount:E3,initInteraction:wd,interaction:K6,isAccount:gU,isArgument:yU,isArray:b3,isBad:I3,isFn:pc,isGetAccount:iU,isGetBlock:aU,isGetBlockHeader:cU,isGetCollection:lU,isGetEvents:sU,isGetNetworkParameters:uU,isGetNodeVersionInfo:fU,isGetTransaction:rU,isGetTransactionStatus:nU,isInteraction:v3,isNull:nb,isNumber:m3,isObj:w3,isOk:dU,isPing:oU,isScript:ib,isSubscribeEvents:hU,isTransaction:qs,isUnknown:D3,makeArgument:_3,makeGetAccount:O3,makeGetBlock:x3,makeGetBlockHeader:Q6,makeGetCollection:J6,makeGetEvents:X6,makeGetNetworkParameters:T3,makeGetNodeVerionInfo:tU,makeGetTransaction:W6,makeGetTransactionStatus:R3,makePing:Z6,makeScript:S3,makeSubscribeEvents:eU,makeTransaction:A3,makeUnknown:Y6,pipe:En,prepAccount:vd,put:sb,update:C3,why:pU});function N3(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return En(wd(),e)}const vU={tag:null,transaction:null,transactionStatus:null,transactionId:null,encodedData:null,events:null,event:null,accountStatusEvent:null,account:null,block:null,blockHeader:null,blockDigest:null,latestBlock:null,collection:null,networkParameters:null,streamConnection:null,heartbeat:null,nodeVersionInfo:null},ab=()=>({...vU});function EU(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return En([x3,t=>(t.block.isSealed=e,fr(t))])}function _U(e){return En([O3,t=>(t.account.addr=$t(e),fr(t))])}const SU=(e,t,n)=>{const r=new bd;let s=AU();e.on("data",async l=>{const u=Object.keys(l).filter(h=>l[h]!=null&&h!=="tag");let d=Promise.all(u.map(async h=>{const p={[h]:l[h]},y=await t(p,n);return{channel:h,message:y}}));s.push(async()=>{(await d).forEach(p=>{let{channel:y,message:b}=p;r.emit(y,b)})})});function a(l){e.on(l,u=>{s.push(async()=>{r.emit(l,u)})})}return a("close"),a("error"),{on(l,u){return r.on(l,u),this},off(l,u){return r.off(l,u),this},close:()=>{e.close()}}};function AU(){let e=[],t=!1;async function n(){if(!t){for(t=!0;e.length>0;)await e.shift()?.();t=!1}}return{push:r=>{e.push(r),n()}}}const RU=()=>{qe.deprecate({pkg:"@onflow/decode",subject:"Operating upon data of the latestBlock field of the response object",transition:"https://github.com/onflow/flow-js-sdk/blob/master/packages/decode/WARNINGS.md#0001-Deprecating-latestBlock-field"})},et=async e=>e,OU=async()=>null,xU=async e=>e.staticType,TU=async(e,t,n)=>e?await Uo(e,t,n):null,DU=async(e,t,n)=>await Promise.all(e.map(r=>new Promise(async s=>s(await Uo(r,t,[...n,r.type]))))),IU=async(e,t,n)=>await e.reduce(async(r,s)=>(r=await r,r[await Uo(s.key,t,[...n,s.key])]=await Uo(s.value,t,[...n,s.key]),r),Promise.resolve({})),ah=async(e,t,n)=>{const r=await e.fields.reduce(async(a,l)=>(a=await a,a[l.name]=await Uo(l.value,t,[...n,l.name]),a),Promise.resolve({})),s=e.id&&U3(t,e.id);return s?await s(r):r},CU=async(e,t,n)=>{const r=["start","end","step"];return await Object.keys(e).reduce(async(a,l)=>(a=await a,r.includes(l)&&(a[l]=await Uo(e[l],t,[...n,l])),a),Promise.resolve({}))},D2={UInt:et,Int:et,UInt8:et,Int8:et,UInt16:et,Int16:et,UInt32:et,Int32:et,UInt64:et,Int64:et,UInt128:et,Int128:et,UInt256:et,Int256:et,Word8:et,Word16:et,Word32:et,Word64:et,Word128:et,Word256:et,UFix64:et,Fix64:et,String:et,Character:et,Bool:et,Address:et,Void:OU,Optional:TU,Reference:et,Array:DU,Dictionary:IU,Event:ah,Resource:ah,Struct:ah,Enum:ah,Type:xU,Path:et,Capability:et,InclusiveRange:CU},U3=(e,t)=>{const n=Object.keys(e).find(r=>/^\/.*\/$/.test(r)?new RegExp(r.substring(1,r.length-1)).test(t):r===t);return t&&n&&e[n]},Uo=async(e,t,n)=>{let r=U3(t,e.type);if(!r)throw new Error(`Undefined Decoder Error: ${e.type}@${n.join(".")}`);return await r(e.value,t,n)},Ul=async function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];const s={...Object.keys(D2).filter(a=>!Object.keys(t).find(l=>new RegExp(l).test(a))).reduce((a,l)=>(a[l]=D2[l],a),t),...t};return Uo(e,s,n)},Iu=async function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e.encodedData)return Ul(e.encodedData,t);if(e.transactionStatus)return{...e.transactionStatus,events:await Promise.all(e.transactionStatus.events.map(async function(r){return{type:r.type,transactionId:r.transactionId,transactionIndex:r.transactionIndex,eventIndex:r.eventIndex,data:await Ul(r.payload,t)}}))};if(e.transaction)return e.transaction;if(e.events)return await Promise.all(e.events.map(async function(r){return{blockId:r.blockId,blockHeight:r.blockHeight,blockTimestamp:r.blockTimestamp,type:r.type,transactionId:r.transactionId,transactionIndex:r.transactionIndex,eventIndex:r.eventIndex,data:await Ul(r.payload,t)}}));if(e.event){const{payload:n,...r}=e.event;return{...r,data:await Ul(n,t)}}else if(e.accountStatusEvent){const{payload:n,...r}=e.accountStatusEvent;return{...r,data:await Ul(n,t)}}else{if(e.account)return e.account;if(e.block)return e.block;if(e.blockHeader)return e.blockHeader;if(e.blockDigest)return e.blockDigest;if(e.latestBlock)return RU(),e.latestBlock;if(e.transactionId)return e.transactionId;if(e.collection)return e.collection;if(e.networkParameters){const n=/^flow-/,r=e.networkParameters.chainId;let s;return r==="flow-emulator"?s="local":n.test(r)?s=r.replace(n,""):s=r,{chainId:s}}else{if(e.streamConnection)return SU(e.streamConnection,Iu,t);if(e.heartbeat)return e.heartbeat;if(e.nodeVersionInfo)return e.nodeVersionInfo}}return null},I2=e=>typeof e=="function",C2=e=>typeof e=="string",NU=()=>/\b(0x\w+)\b/g;function N2(e){return NU().test(e)}const B3=()=>/import\s+"(\w+)"/g;function U2(e){return B3().test(e)}function UU(e){return e.matchAll(B3())}async function BU(e){if(!qs(e)&&!ib(e))return e;var t=Ed(e,"ix.cadence");if(fe(I2(t)||C2(t),"Cadence needs to be a function or a string."),I2(t)&&(t=await t({})),fe(C2(t),"Cadence needs to be a string at this point."),fe(!N2(t)||!U2(t),"Both account identifier and contract identifier syntax not simultaneously supported."),N2(t)&&(t=await Ae().where(/^0x/).then(n=>Object.entries(n).reduce((r,s)=>{let[a,l]=s;const u=new RegExp("(\\b"+a+"\\b)","g");return r.replace(u,l)},t))),U2(t))for(const[n,r]of UU(t)){const s=await Ae().get(`system.contracts.${r}`);s?t=t.replace(n,`import ${r} from ${Rn(s)}`):qe({title:"Contract Placeholder not found",message:`Cannot find a value for contract placeholder ${r}. Please add to your flow.json or explicitly add it to the config 'contracts.*' namespace.`,level:ft.warn})}return e.message.cadence=t,e}const Mm=e=>typeof e=="function";function $U(e){if(fe(typeof e.xform!=null,`No type specified for argument: ${e.value}`),Mm(e.xform))return e.xform(e.value);if(Mm(e.xform.asArgument))return e.xform.asArgument(e.value);fe(!1,"Invalid Argument",e)}async function $3(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:3;if(fe(t>0,`Argument Resolve Recursion Limit Exceeded for Arg: ${e.tempId}`),Mm(e.resolveArgument)){const n=await e.resolveArgument();return $3(n,t-1)}else return e}async function PU(e){if(qs(e)||ib(e))for(let[t,n]of Object.entries(e.arguments)){const r=await $3(n);e.arguments[t].asArgument=$U(r)}return e}const kU=e=>k3(M3(L3(e))),MU=e=>k3(M3(VU(e))),LU=(e,t)=>Ot.Buffer.from(e.padEnd(t*2,"0"),"hex"),P3=(e,t)=>Ot.Buffer.from(e.padStart(t*2,"0"),"hex"),jU=LU(Ot.Buffer.from("FLOW-V0.0-transaction").toString("hex"),32).toString("hex"),k3=e=>jU+e,Ny=e=>P3(e,8),zU=e=>P3(e,32),qU=e=>Ot.Buffer.from(JSON.stringify(e),"utf8"),HU=e=>Ot.Buffer.from(e,"utf8"),FU=e=>Ot.Buffer.from(e,"hex"),M3=e=>X0(e).toString("hex"),L3=e=>(YU(e),[HU(e.cadence||""),e.arguments.map(qU),zU(e.refBlock||""),e.computeLimit,Ny($t(e.proposalKey.address||"")),e.proposalKey.keyId,e.proposalKey.sequenceNum,Ny($t(e.payer)),e.authorizers.map(t=>Ny($t(t)))]),VU=e=>(WU(e),[L3(e),GU(e)]),GU=e=>{const t=KU(e);return e.payloadSigs?.map(n=>({signerIndex:t.get($t(n.address))||"",keyId:n.keyId,sig:n.sig})).sort((n,r)=>n.signerIndex>r.signerIndex?1:n.signerIndex<r.signerIndex?-1:n.keyId>r.keyId?1:n.keyId<r.keyId?-1:0).map(n=>[n.signerIndex,n.keyId,FU(n.sig)])},KU=e=>{const t=new Map;let n=0;const r=s=>{t.has(s)||(t.set(s,n),n++)};return e.proposalKey.address&&r(e.proposalKey.address),r(e.payer),e.authorizers.forEach(r),t},YU=e=>{XU.forEach(t=>Xh(e,t)),ZU.forEach(t=>Xh(e.proposalKey,t,"proposalKey"))},WU=e=>{QU.forEach(t=>Xh(e,t)),e.payloadSigs?.forEach((t,n)=>{JU.forEach(r=>Xh(t,r,"payloadSigs",n))})},Wh=e=>typeof e=="number",fc=e=>typeof e=="string",j3=e=>e!==null&&typeof e=="object",Lm=e=>j3(e)&&e instanceof Array,XU=[{name:"cadence",check:fc},{name:"arguments",check:Lm},{name:"refBlock",check:fc,defaultVal:"0"},{name:"computeLimit",check:Wh},{name:"proposalKey",check:j3},{name:"payer",check:fc},{name:"authorizers",check:Lm}],ZU=[{name:"address",check:fc},{name:"keyId",check:Wh},{name:"sequenceNum",check:Wh}],QU=[{name:"payloadSigs",check:Lm}],JU=[{name:"address",check:fc},{name:"keyId",check:Wh},{name:"sig",check:fc}],Xh=(e,t,n,r)=>{const{name:s,check:a,defaultVal:l}=t;if(e[s]==null&&l!=null&&(e[s]=l),e[s]==null)throw eB(s,n,r);if(!a(e[s]))throw tB(s,n,r)},z3=(e,t,n)=>t?n==null?`${t}.${e}`:`${t}.${n}.${e}`:e,eB=(e,t,n)=>new Error(`Missing field ${z3(e,t,n)}`),tB=(e,t,n)=>new Error(`Invalid field ${z3(e,t,n)}`);function q3(e){let t=new Set(e.authorizations);return e.proposer&&t.add(e.proposer),Array.isArray(e.payer)?e.payer.forEach(n=>t.delete(n)):t.delete(e.payer),Array.from(t)}function H3(e){let t=new Set(Array.isArray(e.payer)?e.payer:[e.payer]);return Array.from(t)}const cb=e=>{const t=()=>e.authorizations.map(l=>Rn(e.accounts[l].addr)).reduce((l,u)=>l.find(d=>d===u)?l:[...l,u],[]),n=()=>q3(e).map(a=>({address:Rn(e.accounts[a].addr),keyId:e.accounts[a].keyId,sig:e.accounts[a].signature})),r=()=>H3(e).map(a=>({address:Rn(e.accounts[a].addr),keyId:e.accounts[a].keyId,sig:e.accounts[a].signature})),s=e.proposer?{address:Rn(e.accounts[e.proposer].addr),keyId:e.accounts[e.proposer].keyId,sequenceNum:e.accounts[e.proposer].sequenceNum}:{};return{cadence:e.message.cadence,refBlock:e.message.refBlock||null,computeLimit:e.message.computeLimit,arguments:e.message.arguments.map(a=>e.arguments[a].asArgument),proposalKey:s,payer:Rn(e.accounts[Array.isArray(e.payer)?e.payer[0]:e.payer].addr),authorizers:t(),payloadSigs:n(),envelopeSigs:r()}},oi=5,nB=e=>`${Rn(e.addr)}-${e.keyId}`,rB=e=>e&&(Object.prototype.toString.call(e)==="[object Function]"||typeof e=="function"||e instanceof Function),iB=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.join("-")};var ar=function(e){return e.PAYER="payer",e.PROPOSER="proposer",e.AUTHORIZATIONS="authorizations",e}(ar||{});function sB(){const e=" ",n=[];return[function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;n.push(Array(s*4).fill(e).join("-")+r)},function(){return n.reduce((r,s)=>r+`
`+s)}]}function lb(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:3;return t<=0||!Array.isArray(e)?e:lb(e.flatMap(n=>n),t-1)}function oB(e,t){try{return{f_type:"PreSignable",f_vsn:"1.0.1",roles:e.role,cadence:t.message.cadence,args:t.message.arguments.map(n=>t.arguments[n].asArgument),data:{},interaction:t,voucher:cb(t)}}catch(n){throw console.error("buildPreSignable",n),n}}async function aB(e,t){const n=Array.isArray(e.payer)?e.payer:[e.payer],r=Array.isArray(e.authorizations)?e.authorizations:[e.authorizations],s=e.proposer===null?[]:Array.isArray(e.proposer)?e.proposer:[e.proposer],a=Object.keys(e.accounts),l=[...new Set(n.concat(r,s))];for(const u of a)l.find(d=>d===u)||delete e.accounts[u]}function B2(e,t){typeof t.addr=="string"&&(typeof t.keyId=="number"||typeof t.keyId=="string")?t.tempId=nB(t):t.tempId=t.tempId||G0();const n=e.accounts[t.tempId]||t;return e.accounts[t.tempId]||(e.accounts[t.tempId]=t),e.accounts[t.tempId].role.proposer=n.role.proposer||t.role.proposer,e.accounts[t.tempId].role.payer=n.role.payer||t.role.payer,e.accounts[t.tempId].role.authorizer=n.role.authorizer||t.role.authorizer,e.accounts[t.tempId]}function cB(e){const t=lb(e),n=new Set;return t.map(s=>{const a=iB(s.tempId,s.role.payer,s.role.proposer,s.role.authorizer,s.role.param);return n.has(a)?null:(n.add(a),s)}).filter(s=>s!==null)}async function lB(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:oi,{debugLogger:r}=arguments.length>3?arguments[3]:void 0;if(n<=0)throw new Error(`recurseResolveAccount Error: Depth limit (${oi}) reached. Ensure your authorization functions resolve to an account after ${oi} resolves.`);let s=e.accounts[t];if(!s)return[[],!1];if(r(`account: ${s.tempId}`,Math.max(oi-n,0)),s?.resolve)if(rB(s?.resolve)){r(`account: ${s.tempId} -- cache MISS`,Math.max(oi-n,0));const{resolve:a,...l}=s;let u=await a(l,oB(l,e));u=Array.isArray(u)?u:[u];let d=lb(u);return d=d.map(h=>B2(e,h)),s.resolve=d.map(h=>h.tempId),s=B2(e,s),[d.map(h=>h.tempId),!0]}else return r(`account: ${s.tempId} -- cache HIT`,Math.max(oi-n,0)),[s.resolve,!1];return[s.tempId?[s.tempId]:[],!1]}const Wl=e=>e===null?[]:Array.isArray(e)?e:[e];async function uB(e,t,n){for(let r of Object.values(ar))if(r===ar.AUTHORIZATIONS||r===ar.PAYER)e[r]=Wl(e[r]).reduce((s,a)=>a===t?s.concat(...n.filter(l=>r===ar.PAYER&&l.role.payer||r===ar.AUTHORIZATIONS&&l.role.authorizer).map(l=>l.tempId)):s.concat(a),[]);else if(r===ar.PROPOSER){const s=n.filter(a=>a.role.proposer);if(s.length>1)throw new Error("replaceRoles Error: Multiple proposer keys were resolved, but only one is allowed");e[r]=s[0]?.tempId??e[r]}}async function fB(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:oi,{debugLogger:r}=arguments.length>3?arguments[3]:void 0;fe(e&&typeof e=="object","resolveAccountType Error: ix not defined");let s=new Set;for(let l of t){let u=e.accounts[l];fe(!!u,"resolveAccountType Error: account not found");const[d,h]=await lB(e,l,n,{debugLogger:r});if(h){const p=d.map(b=>e.accounts[b]),y=cB(p);y.forEach(b=>s.add(b.tempId)),uB(e,l,y)}}let a;for(const l of e[ar.PAYER]){let u=e.accounts[l];if(!a)a=u.addr;else if(a!==u.addr)throw new Error("resolveAccountType Error: payers from different accounts detected")}return s}async function hB(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(qs(e)){Array.isArray(e.payer)||qe.deprecate({pkg:"FCL",subject:'"ix.payer" must be an array. Support for ix.payer as a singular',message:"See changelog for more info."});let[n,r]=sB();try{let s=oi,a=new Set([...Wl(e[ar.PAYER]),...Wl(e[ar.PROPOSER]),...Wl(e[ar.AUTHORIZATIONS])]);for(;a.size>0;){if(s<=0)throw new Error(`resolveAccounts Error: Depth limit (${oi}) reached. Ensure your authorization functions resolve to an account after ${oi} resolves.`);a=await fB(e,a,s,{debugLogger:n}),s--}await aB(e,{debugLogger:n});for(const l of Object.values(ar))fe(Wl(e[l]).length>0||l===ar.AUTHORIZATIONS,`resolveAccountType Error: no accounts for role "${l}" found`);t.enableDebug&&console.debug(r())}catch(s){throw console.error(`=== SAD PANDA ===

`,s,`

=== SAD PANDA ===`),s}}return e}async function dB(e){if(qs(e))try{let t=q3(e);const n=kU(P2(e));await Promise.all(t.map($2(e,n)));let r=H3(e);const s=MU({...P2(e),payloadSigs:t.map(a=>({address:e.accounts[a].addr||"",keyId:e.accounts[a].keyId||0,sig:e.accounts[a].signature||""}))});await Promise.all(r.map($2(e,s)))}catch(t){throw console.error("Signatures",t,{ix:e}),t}return e}function $2(e,t){return async function(r){const s=e.accounts[r];if(s.signature!=null&&s.signature!==void 0)return;const{signature:a}=await s.signingFunction(pB(s,t,e));e.accounts[r].signature=a}}function pB(e,t,n){try{return{f_type:"Signable",f_vsn:"1.0.1",message:t,addr:$t(e.addr),keyId:e.keyId,roles:e.role,cadence:n.message.cadence,args:n.message.arguments.map(r=>n.arguments[r].asArgument),data:{},interaction:n,voucher:cb(n)}}catch(r){throw console.error("buildSignable",r),r}}function P2(e){const t=$t((Array.isArray(e.payer)?e.accounts[e.payer[0]]:e.accounts[e.payer]).addr||""),n=e.proposer?{address:$t(e.accounts[e.proposer].addr)||"",keyId:e.accounts[e.proposer].keyId||0,sequenceNum:e.accounts[e.proposer].sequenceNum||0}:{};return{cadence:e.message.cadence,refBlock:e.message.refBlock,computeLimit:e.message.computeLimit,arguments:e.message.arguments.map(r=>e.arguments[r].asArgument),proposalKey:n,payer:t,authorizers:e.authorizations.map(r=>$t(e.accounts[r].addr)||"").reduce((r,s)=>r.find(a=>a===s)?r:[...r,s],[])}}async function gB(e){const t=Ed(e,"ix.validators",[]);return En(e,t.map(n=>r=>n(r,{Ok:fr,Bad:rb})))}async function yB(e){for(let t of Object.keys(e.accounts))e.accounts[t].addr=$t(e.accounts[t].addr);return e}async function mB(e){const t=Ed(e,"ix.voucher-intercept");return pc(t)&&await t(cb(e)),e}const bB=100;async function wB(e){return qs(e)&&(e.message.computeLimit=e.message.computeLimit||await Ae.get("fcl.limit"),e.message.computeLimit||(qe.deprecate({pkg:"FCL/SDK",subject:"The built-in default compute limit (DEFAULT_COMPUTE_LIMIT=10)",transition:"https://github.com/onflow/flow-js-sdk/blob/master/packages/sdk/TRANSITIONS.md#0009-deprecate-default-compute-limit"}),e.message.computeLimit=bB)),e}const vB=e=>e,ka=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:vB;return async n=>{const r=a=>[`
Accounts:`,{proposer:a.proposer,authorizations:a.authorizations,payer:a.payer},`

Details:`,a.accounts].filter(Boolean),s=function(){for(var a=arguments.length,l=new Array(a),u=0;u<a;u++)l[u]=arguments[u];console.log(`debug[${e}] ---
`,...l,`


---`)};return await Ae.get(`debug.${e}`)&&await t(n,s,r),n}},EB=En([BU,ka("cadence",(e,t)=>t(e.message.cadence)),wB,ka("compute limit",(e,t)=>t(e.message.computeLimit)),PU,ka("arguments",(e,t)=>t(e.message.arguments,e.message)),hB,ka("accounts",(e,t,n)=>t(...n(e))),_B,SB,dB,ka("signatures",(e,t,n)=>t(...n(e))),yB,gB,mB,ka("resolved",(e,t)=>t(e))]);async function _B(e){if(qs(e)&&e.message.refBlock==null){const t=await Ae().get("accessNode.api"),n=await Ae.first(["sdk.transport","sdk.send"],eb);fe(n,"Required value for sdk.transport is not defined in config. See: https://github.com/onflow/fcl-js/blob/master/packages/sdk/CHANGELOG.md#0057-alpha1----2022-01-21"),e.message.refBlock=(await n(N3([EU()]),{config:Ae,response:ab,Buffer:Ot.Buffer,ix:ob},{node:t}).then(Iu)).id}return e}async function SB(e){if(qs(e)){var t=Object.values(e.accounts).find(n=>n.role.proposer);if(fe(t!==void 0,"Transactions require a proposer"),t&&t.sequenceNum==null){const n=await Ae().get("accessNode.api"),r=await Ae.first(["sdk.transport","sdk.send"],eb);fe(r,"Required value for sdk.transport is not defined in config. See: https://github.com/onflow/fcl-js/blob/master/packages/sdk/CHANGELOG.md#0057-alpha1----2022-01-21"),e.accounts[t.tempId].sequenceNum=await r(await N3([_U(t.addr)]),{config:Ae,response:ab,Buffer:Ot.Buffer,ix:ob},{node:n}).then(Iu).then(s=>s.keys).then(s=>s.find(a=>a.index===t.keyId)).then(s=>s.sequenceNumber)}}return e}function F3(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(t.length>1){const[s,a]=t;return F3((l,u)=>{let{Ok:d,Bad:h}=u;return s?d(l):h(l,a)})}const[r]=t;return s=>r(s,{Ok:fr,Bad:rb})}class V3 extends Error{constructor(){super("The current transport does not support subscriptions.  If you have provided a custom transport (e.g. via `sdk.transport` configuration), ensure that it implements the subscribe method."),this.name="SubscriptionsNotSupportedError"}}async function G3(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};fe(e.send==null||e.transport==null,'SDK Transport Error: Cannot provide both "transport" and legacy "send" options.');const t=e.transport||e.send||await Ae().first(["sdk.transport","sdk.send"],X4);return AB(t)?t:{send:t,subscribe:()=>{throw new V3}}}function AB(e){return e.send!==void 0&&e.subscribe!==void 0&&typeof e.send=="function"&&typeof e.subscribe=="function"}const _d=async function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=await G3(t),r=n.send.bind(n);F3(r,"Required value for sdk.transport is not defined in config. See: https://github.com/onflow/fcl-js/blob/master/packages/sdk/CHANGELOG.md#0057-alpha1----2022-01-21");const s=await Ae.first(["sdk.resolve"],t.resolve||EB);return t.node=t.node||await Ae().get("accessNode.api"),Array.isArray(e)&&(e=En(wd(),e)),r(await s(e),{config:Ae,response:ab,ix:ob,Buffer:Ot.Buffer},t)};function RB(e){let{topic:t,args:n,onData:r,onError:s}=e,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};async function l(){let d,h;try{d=await G3(a),h=a?.node||await Ae().get("accessNode.api"),fe(!!h,'SDK Send Error: Either opts.node or "accessNode.api" in config must be defined.')}catch(p){s(p instanceof Error?p:new Error(String(p)));return}return d.subscribe({topic:t,args:n,onData:r,onError:s},{node:h,...a})}let u=l();return{unsubscribe:()=>{u.then(d=>d?.unsubscribe?.())}}}function OB(e){let{topic:t,args:n,onData:r,onError:s}=e,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const l=RB({topic:t,args:n,onData:u=>{Iu(u).then(r).catch(d=>{s(new Error(`Failed to decode response: ${d.message}`)),l?.unsubscribe?.()})},onError:s},a);return l}async function Sd(e){const t=await Ae().where(/^decoder\./),n=Object.entries(t).map(r=>{let[s,a]=r;return s=`/${s.replace(/^decoder\./,"")}$/`,[s,a]});return Iu(e,Object.fromEntries(n))}function xB(e){return C3("ix.validators",t=>Array.isArray(t)?[...t,e]:[e])}function TB(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return En([t=>(t.block.isSealed=e,t),xB(t=>{if(t.block.id)throw new Error("Unable to specify both block finality and block id.");if(t.block.height)throw new Error("Unable to specify both block finality and block height.");return t})])}function DB(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return En(e.map(t=>vd(t,{role:hu.AUTHORIZER})))}function IB(e){return En([R3,t=>(t.transaction.id=e,fr(t))])}function CB(){return En([T3,e=>fr(e)])}function K3(e){return t=>(t.message.computeLimit=e,t)}function Y3(e){return En(e.map(_3))}function W3(e,t){return{value:e,xform:t}}function NB(e){return vd(e,{role:hu.PROPOSER})}function UB(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Array.isArray(e)||(e=[e]),En(e.map(t=>vd(t,{role:hu.PAYER})))}function BB(){return En([S3,sb("ix.cadence",f3(...arguments))])}const $B=[],PB=null;function kB(){return En([A3,sb("ix.cadence",f3(...arguments)),e=>(e.message.refBlock=e.message.refBlock||PB,e.authorizations=e.authorizations||$B,fr(e))])}var Ph={exports:{}},MB=Ph.exports,k2;function LB(){return k2||(k2=1,function(e,t){(function(n,r){e.exports=r()})(MB,function(){return n={418:function(s,a){(function(l,u){for(var d in u)l[d]=u[d]})(a,function(l){var u={};function d(h){if(u[h])return u[h].exports;var p=u[h]={i:h,l:!1,exports:{}};return l[h].call(p.exports,p,p.exports,d),p.l=!0,p.exports}return d.m=l,d.c=u,d.i=function(h){return h},d.d=function(h,p,y){d.o(h,p)||Object.defineProperty(h,p,{configurable:!1,enumerable:!0,get:y})},d.n=function(h){var p=h&&h.__esModule?function(){return h.default}:function(){return h};return d.d(p,"a",p),p},d.o=function(h,p){return Object.prototype.hasOwnProperty.call(h,p)},d.p="",d(d.s=1)}([function(l,u,d){Object.defineProperty(u,"__esModule",{value:!0});var h=d(3),p=function(){function y(b,w){b===void 0&&(b={}),w===void 0&&(w={splitValues:!1});var v,E=this;this.headersMap={},b&&(typeof Headers<"u"&&b instanceof Headers?h.getHeaderKeys(b).forEach(function(_){h.getHeaderValues(b,_).forEach(function(R){w.splitValues?E.append(_,h.splitHeaderValue(R)):E.append(_,R)})}):typeof(v=b)=="object"&&typeof v.headersMap=="object"&&typeof v.forEach=="function"?b.forEach(function(_,R){E.append(_,R)}):typeof Map<"u"&&b instanceof Map?b.forEach(function(_,R){E.append(R,_)}):typeof b=="string"?this.appendFromString(b):typeof b=="object"&&Object.getOwnPropertyNames(b).forEach(function(_){var R=b[_];Array.isArray(R)?R.forEach(function(D){E.append(_,D)}):E.append(_,R)}))}return y.prototype.appendFromString=function(b){for(var w=b.split(`\r
`),v=0;v<w.length;v++){var E=w[v],_=E.indexOf(":");if(_>0){var R=E.substring(0,_).trim(),D=E.substring(_+1).trim();this.append(R,D)}}},y.prototype.delete=function(b,w){var v=h.normalizeName(b);if(w===void 0)delete this.headersMap[v];else{var E=this.headersMap[v];if(E){var _=E.indexOf(w);_>=0&&E.splice(_,1),E.length===0&&delete this.headersMap[v]}}},y.prototype.append=function(b,w){var v=this,E=h.normalizeName(b);Array.isArray(this.headersMap[E])||(this.headersMap[E]=[]),Array.isArray(w)?w.forEach(function(_){v.headersMap[E].push(h.normalizeValue(_))}):this.headersMap[E].push(h.normalizeValue(w))},y.prototype.set=function(b,w){var v=h.normalizeName(b);if(Array.isArray(w)){var E=[];w.forEach(function(_){E.push(h.normalizeValue(_))}),this.headersMap[v]=E}else this.headersMap[v]=[h.normalizeValue(w)]},y.prototype.has=function(b,w){var v=this.headersMap[h.normalizeName(b)];if(!Array.isArray(v))return!1;if(w!==void 0){var E=h.normalizeValue(w);return v.indexOf(E)>=0}return!0},y.prototype.get=function(b){var w=this.headersMap[h.normalizeName(b)];return w!==void 0?w.concat():[]},y.prototype.forEach=function(b){var w=this;Object.getOwnPropertyNames(this.headersMap).forEach(function(v){b(v,w.headersMap[v])},this)},y.prototype.toHeaders=function(){if(typeof Headers<"u"){var b=new Headers;return this.forEach(function(w,v){v.forEach(function(E){b.append(w,E)})}),b}throw new Error("Headers class is not defined")},y}();u.BrowserHeaders=p},function(l,u,d){Object.defineProperty(u,"__esModule",{value:!0});var h=d(0);u.BrowserHeaders=h.BrowserHeaders},function(l,u,d){Object.defineProperty(u,"__esModule",{value:!0}),u.iterateHeaders=function(h,p){for(var y=h[Symbol.iterator](),b=y.next();!b.done;)p(b.value[0]),b=y.next()},u.iterateHeadersKeys=function(h,p){for(var y=h.keys(),b=y.next();!b.done;)p(b.value),b=y.next()}},function(l,u,d){Object.defineProperty(u,"__esModule",{value:!0});var h=d(2);u.normalizeName=function(p){if(typeof p!="string"&&(p=String(p)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(p))throw new TypeError("Invalid character in header field name");return p.toLowerCase()},u.normalizeValue=function(p){return typeof p!="string"&&(p=String(p)),p},u.getHeaderValues=function(p,y){var b=p;if(b instanceof Headers&&b.getAll)return b.getAll(y);var w=b.get(y);return w&&typeof w=="string"?[w]:w},u.getHeaderKeys=function(p){var y=p,b={},w=[];return y.keys?h.iterateHeadersKeys(y,function(v){b[v]||(b[v]=!0,w.push(v))}):y.forEach?y.forEach(function(v,E){b[E]||(b[E]=!0,w.push(E))}):h.iterateHeaders(y,function(v){var E=v[0];b[E]||(b[E]=!0,w.push(E))}),w},u.splitHeaderValue=function(p){var y=[];return p.split(", ").forEach(function(b){b.split(",").forEach(function(w){y.push(w)})}),y}}]))},617:function(s,a,l){Object.defineProperty(a,"__esModule",{value:!0}),a.ChunkParser=a.ChunkType=a.encodeASCII=a.decodeASCII=void 0;var u,d=l(65);function h(_){return(R=_)===9||R===10||R===13||_>=32&&_<=126;var R}function p(_){for(var R=0;R!==_.length;++R)if(!h(_[R]))throw new Error("Metadata is not valid (printable) ASCII");return String.fromCharCode.apply(String,Array.prototype.slice.call(_))}function y(_){return(128&_.getUint8(0))==128}function b(_){return _.getUint32(1,!1)}function w(_,R,D){return _.byteLength-R>=D}function v(_,R,D){if(_.slice)return _.slice(R,D);var I=_.length;D!==void 0&&(I=D);for(var $=new Uint8Array(I-R),U=0,k=R;k<I;k++)$[U++]=_[k];return $}a.decodeASCII=p,a.encodeASCII=function(_){for(var R=new Uint8Array(_.length),D=0;D!==_.length;++D){var I=_.charCodeAt(D);if(!h(I))throw new Error("Metadata contains invalid ASCII");R[D]=I}return R},function(_){_[_.MESSAGE=1]="MESSAGE",_[_.TRAILERS=2]="TRAILERS"}(u=a.ChunkType||(a.ChunkType={}));var E=function(){function _(){this.buffer=null,this.position=0}return _.prototype.parse=function(R,D){if(R.length===0&&D)return[];var I,$=[];if(this.buffer==null)this.buffer=R,this.position=0;else if(this.position===this.buffer.byteLength)this.buffer=R,this.position=0;else{var U=this.buffer.byteLength-this.position,k=new Uint8Array(U+R.byteLength),q=v(this.buffer,this.position);k.set(q,0);var H=new Uint8Array(R);k.set(H,U),this.buffer=k,this.position=0}for(;;){if(!w(this.buffer,this.position,5))return $;var P=v(this.buffer,this.position,this.position+5),V=new DataView(P.buffer,P.byteOffset,P.byteLength),G=b(V);if(!w(this.buffer,this.position,5+G))return $;var K=v(this.buffer,this.position+5,this.position+5+G);if(this.position+=5+G,y(V))return $.push({chunkType:u.TRAILERS,trailers:(I=K,new d.Metadata(p(I)))}),$;$.push({chunkType:u.MESSAGE,data:K})}},_}();a.ChunkParser=E},8:function(s,a){var l;Object.defineProperty(a,"__esModule",{value:!0}),a.httpStatusToCode=a.Code=void 0,function(u){u[u.OK=0]="OK",u[u.Canceled=1]="Canceled",u[u.Unknown=2]="Unknown",u[u.InvalidArgument=3]="InvalidArgument",u[u.DeadlineExceeded=4]="DeadlineExceeded",u[u.NotFound=5]="NotFound",u[u.AlreadyExists=6]="AlreadyExists",u[u.PermissionDenied=7]="PermissionDenied",u[u.ResourceExhausted=8]="ResourceExhausted",u[u.FailedPrecondition=9]="FailedPrecondition",u[u.Aborted=10]="Aborted",u[u.OutOfRange=11]="OutOfRange",u[u.Unimplemented=12]="Unimplemented",u[u.Internal=13]="Internal",u[u.Unavailable=14]="Unavailable",u[u.DataLoss=15]="DataLoss",u[u.Unauthenticated=16]="Unauthenticated"}(l=a.Code||(a.Code={})),a.httpStatusToCode=function(u){switch(u){case 0:return l.Internal;case 200:return l.OK;case 400:return l.InvalidArgument;case 401:return l.Unauthenticated;case 403:return l.PermissionDenied;case 404:return l.NotFound;case 409:return l.Aborted;case 412:return l.FailedPrecondition;case 429:return l.ResourceExhausted;case 499:return l.Canceled;case 500:return l.Unknown;case 501:return l.Unimplemented;case 503:return l.Unavailable;case 504:return l.DeadlineExceeded;default:return l.Unknown}}},934:function(s,a,l){Object.defineProperty(a,"__esModule",{value:!0}),a.client=void 0;var u=l(65),d=l(617),h=l(8),p=l(346),y=l(57),b=l(882);a.client=function(E,_){return new w(E,_)};var w=function(){function E(_,R){this.started=!1,this.sentFirstMessage=!1,this.completed=!1,this.closed=!1,this.finishedSending=!1,this.onHeadersCallbacks=[],this.onMessageCallbacks=[],this.onEndCallbacks=[],this.parser=new d.ChunkParser,this.methodDefinition=_,this.props=R,this.createTransport()}return E.prototype.createTransport=function(){var _=this.props.host+"/"+this.methodDefinition.service.serviceName+"/"+this.methodDefinition.methodName,R={methodDefinition:this.methodDefinition,debug:this.props.debug||!1,url:_,onHeaders:this.onTransportHeaders.bind(this),onChunk:this.onTransportChunk.bind(this),onEnd:this.onTransportEnd.bind(this)};this.props.transport?this.transport=this.props.transport(R):this.transport=y.makeDefaultTransport(R)},E.prototype.onTransportHeaders=function(_,R){if(this.props.debug&&p.debug("onHeaders",_,R),this.closed)this.props.debug&&p.debug("grpc.onHeaders received after request was closed - ignoring");else if(R!==0){this.responseHeaders=_,this.props.debug&&p.debug("onHeaders.responseHeaders",JSON.stringify(this.responseHeaders,null,2));var D=v(_);this.props.debug&&p.debug("onHeaders.gRPCStatus",D);var I=D&&D>=0?D:h.httpStatusToCode(R);this.props.debug&&p.debug("onHeaders.code",I);var $=_.get("grpc-message")||[];if(this.props.debug&&p.debug("onHeaders.gRPCMessage",$),this.rawOnHeaders(_),I!==h.Code.OK){var U=this.decodeGRPCStatus($[0]);this.rawOnError(I,U,_)}}},E.prototype.onTransportChunk=function(_){var R=this;if(this.closed)this.props.debug&&p.debug("grpc.onChunk received after request was closed - ignoring");else{var D=[];try{D=this.parser.parse(_)}catch(I){return this.props.debug&&p.debug("onChunk.parsing error",I,I.message),void this.rawOnError(h.Code.Internal,"parsing error: "+I.message)}D.forEach(function(I){if(I.chunkType===d.ChunkType.MESSAGE){var $=R.methodDefinition.responseType.deserializeBinary(I.data);R.rawOnMessage($)}else I.chunkType===d.ChunkType.TRAILERS&&(R.responseHeaders?(R.responseTrailers=new u.Metadata(I.trailers),R.props.debug&&p.debug("onChunk.trailers",R.responseTrailers)):(R.responseHeaders=new u.Metadata(I.trailers),R.rawOnHeaders(R.responseHeaders)))})}},E.prototype.onTransportEnd=function(){if(this.props.debug&&p.debug("grpc.onEnd"),this.closed)this.props.debug&&p.debug("grpc.onEnd received after request was closed - ignoring");else if(this.responseTrailers!==void 0){var _=v(this.responseTrailers);if(_!==null){var R=this.responseTrailers.get("grpc-message"),D=this.decodeGRPCStatus(R[0]);this.rawOnEnd(_,D,this.responseTrailers)}else this.rawOnError(h.Code.Internal,"Response closed without grpc-status (Trailers provided)")}else{if(this.responseHeaders===void 0)return void this.rawOnError(h.Code.Unknown,"Response closed without headers");var I=v(this.responseHeaders),$=this.responseHeaders.get("grpc-message");if(this.props.debug&&p.debug("grpc.headers only response ",I,$),I===null)return void this.rawOnEnd(h.Code.Unknown,"Response closed without grpc-status (Headers only)",this.responseHeaders);var U=this.decodeGRPCStatus($[0]);this.rawOnEnd(I,U,this.responseHeaders)}},E.prototype.decodeGRPCStatus=function(_){if(!_)return"";try{return decodeURIComponent(_)}catch{return _}},E.prototype.rawOnEnd=function(_,R,D){var I=this;this.props.debug&&p.debug("rawOnEnd",_,R,D),this.completed||(this.completed=!0,this.onEndCallbacks.forEach(function($){if(!I.closed)try{$(_,R,D)}catch(U){setTimeout(function(){throw U},0)}}))},E.prototype.rawOnHeaders=function(_){this.props.debug&&p.debug("rawOnHeaders",_),this.completed||this.onHeadersCallbacks.forEach(function(R){try{R(_)}catch(D){setTimeout(function(){throw D},0)}})},E.prototype.rawOnError=function(_,R,D){var I=this;D===void 0&&(D=new u.Metadata),this.props.debug&&p.debug("rawOnError",_,R),this.completed||(this.completed=!0,this.onEndCallbacks.forEach(function($){if(!I.closed)try{$(_,R,D)}catch(U){setTimeout(function(){throw U},0)}}))},E.prototype.rawOnMessage=function(_){var R=this;this.props.debug&&p.debug("rawOnMessage",_.toObject()),this.completed||this.closed||this.onMessageCallbacks.forEach(function(D){if(!R.closed)try{D(_)}catch(I){setTimeout(function(){throw I},0)}})},E.prototype.onHeaders=function(_){this.onHeadersCallbacks.push(_)},E.prototype.onMessage=function(_){this.onMessageCallbacks.push(_)},E.prototype.onEnd=function(_){this.onEndCallbacks.push(_)},E.prototype.start=function(_){if(this.started)throw new Error("Client already started - cannot .start()");this.started=!0;var R=new u.Metadata(_||{});R.set("content-type","application/grpc-web+proto"),R.set("x-grpc-web","1"),this.transport.start(R)},E.prototype.send=function(_){if(!this.started)throw new Error("Client not started - .start() must be called before .send()");if(this.closed)throw new Error("Client already closed - cannot .send()");if(this.finishedSending)throw new Error("Client already finished sending - cannot .send()");if(!this.methodDefinition.requestStream&&this.sentFirstMessage)throw new Error("Message already sent for non-client-streaming method - cannot .send()");this.sentFirstMessage=!0;var R=b.frameRequest(_);this.transport.sendMessage(R)},E.prototype.finishSend=function(){if(!this.started)throw new Error("Client not started - .finishSend() must be called before .close()");if(this.closed)throw new Error("Client already closed - cannot .send()");if(this.finishedSending)throw new Error("Client already finished sending - cannot .finishSend()");this.finishedSending=!0,this.transport.finishSend()},E.prototype.close=function(){if(!this.started)throw new Error("Client not started - .start() must be called before .close()");if(this.closed)throw new Error("Client already closed - cannot .close()");this.closed=!0,this.props.debug&&p.debug("request.abort aborting request"),this.transport.cancel()},E}();function v(E){var _=E.get("grpc-status")||[];if(_.length>0)try{var R=_[0];return parseInt(R,10)}catch{return null}return null}},346:function(s,a){Object.defineProperty(a,"__esModule",{value:!0}),a.debug=void 0,a.debug=function(){for(var l=[],u=0;u<arguments.length;u++)l[u]=arguments[u];console.debug?console.debug.apply(null,l):console.log.apply(null,l)}},607:function(s,a,l){Object.defineProperty(a,"__esModule",{value:!0}),a.grpc=void 0;var u,d=l(418),h=l(57),p=l(229),y=l(540),b=l(210),w=l(859),v=l(8),E=l(938),_=l(35),R=l(934);(u=a.grpc||(a.grpc={})).setDefaultTransport=h.setDefaultTransportFactory,u.CrossBrowserHttpTransport=w.CrossBrowserHttpTransport,u.FetchReadableStreamTransport=p.FetchReadableStreamTransport,u.XhrTransport=b.XhrTransport,u.WebsocketTransport=y.WebsocketTransport,u.Code=v.Code,u.Metadata=d.BrowserHeaders,u.client=function(D,I){return R.client(D,I)},u.invoke=E.invoke,u.unary=_.unary},938:function(s,a,l){Object.defineProperty(a,"__esModule",{value:!0}),a.invoke=void 0;var u=l(934);a.invoke=function(d,h){if(d.requestStream)throw new Error(".invoke cannot be used with client-streaming methods. Use .client instead.");var p=u.client(d,{host:h.host,transport:h.transport,debug:h.debug});return h.onHeaders&&p.onHeaders(h.onHeaders),h.onMessage&&p.onMessage(h.onMessage),h.onEnd&&p.onEnd(h.onEnd),p.start(h.metadata),p.send(h.request),p.finishSend(),{close:function(){p.close()}}}},65:function(s,a,l){Object.defineProperty(a,"__esModule",{value:!0}),a.Metadata=void 0;var u=l(418);Object.defineProperty(a,"Metadata",{enumerable:!0,get:function(){return u.BrowserHeaders}})},57:function(s,a,l){Object.defineProperty(a,"__esModule",{value:!0}),a.makeDefaultTransport=a.setDefaultTransportFactory=void 0;var u=l(859),d=function(h){return u.CrossBrowserHttpTransport({withCredentials:!1})(h)};a.setDefaultTransportFactory=function(h){d=h},a.makeDefaultTransport=function(h){return d(h)}},229:function(s,a,l){var u=this&&this.__assign||function(){return(u=Object.assign||function(y){for(var b,w=1,v=arguments.length;w<v;w++)for(var E in b=arguments[w])Object.prototype.hasOwnProperty.call(b,E)&&(y[E]=b[E]);return y}).apply(this,arguments)};Object.defineProperty(a,"__esModule",{value:!0}),a.detectFetchSupport=a.FetchReadableStreamTransport=void 0;var d=l(65),h=l(346);a.FetchReadableStreamTransport=function(y){return function(b){return function(w,v){return w.debug&&h.debug("fetchRequest",w),new p(w,v)}(b,y)}};var p=function(){function y(b,w){this.cancelled=!1,this.controller=self.AbortController&&new AbortController,this.options=b,this.init=w}return y.prototype.pump=function(b,w){var v=this;if(this.reader=b,this.cancelled)return this.options.debug&&h.debug("Fetch.pump.cancel at first pump"),void this.reader.cancel().catch(function(E){v.options.debug&&h.debug("Fetch.pump.reader.cancel exception",E)});this.reader.read().then(function(E){if(E.done)return v.options.onEnd(),w;v.options.onChunk(E.value),v.pump(v.reader,w)}).catch(function(E){v.cancelled?v.options.debug&&h.debug("Fetch.catch - request cancelled"):(v.cancelled=!0,v.options.debug&&h.debug("Fetch.catch",E.message),v.options.onEnd(E))})},y.prototype.send=function(b){var w=this;fetch(this.options.url,u(u({},this.init),{headers:this.metadata.toHeaders(),method:"POST",body:b,signal:this.controller&&this.controller.signal})).then(function(v){if(w.options.debug&&h.debug("Fetch.response",v),w.options.onHeaders(new d.Metadata(v.headers),v.status),!v.body)return v;w.pump(v.body.getReader(),v)}).catch(function(v){w.cancelled?w.options.debug&&h.debug("Fetch.catch - request cancelled"):(w.cancelled=!0,w.options.debug&&h.debug("Fetch.catch",v.message),w.options.onEnd(v))})},y.prototype.sendMessage=function(b){this.send(b)},y.prototype.finishSend=function(){},y.prototype.start=function(b){this.metadata=b},y.prototype.cancel=function(){var b=this;this.cancelled?this.options.debug&&h.debug("Fetch.cancel already cancelled"):(this.cancelled=!0,this.controller?(this.options.debug&&h.debug("Fetch.cancel.controller.abort"),this.controller.abort()):this.options.debug&&h.debug("Fetch.cancel.missing abort controller"),this.reader?(this.options.debug&&h.debug("Fetch.cancel.reader.cancel"),this.reader.cancel().catch(function(w){b.options.debug&&h.debug("Fetch.cancel.reader.cancel exception",w)})):this.options.debug&&h.debug("Fetch.cancel before reader"))},y}();a.detectFetchSupport=function(){return typeof Response<"u"&&Response.prototype.hasOwnProperty("body")&&typeof Headers=="function"}},859:function(s,a,l){Object.defineProperty(a,"__esModule",{value:!0}),a.CrossBrowserHttpTransport=void 0;var u=l(229),d=l(210);a.CrossBrowserHttpTransport=function(h){if(u.detectFetchSupport()){var p={credentials:h.withCredentials?"include":"same-origin"};return u.FetchReadableStreamTransport(p)}return d.XhrTransport({withCredentials:h.withCredentials})}},210:function(s,a,l){var u,d=this&&this.__extends||(u=function(_,R){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,I){D.__proto__=I}||function(D,I){for(var $ in I)Object.prototype.hasOwnProperty.call(I,$)&&(D[$]=I[$])})(_,R)},function(_,R){function D(){this.constructor=_}u(_,R),_.prototype=R===null?Object.create(R):(D.prototype=R.prototype,new D)});Object.defineProperty(a,"__esModule",{value:!0}),a.stringToArrayBuffer=a.MozChunkedArrayBufferXHR=a.XHR=a.XhrTransport=void 0;var h=l(65),p=l(346),y=l(849);a.XhrTransport=function(_){return function(R){if(y.detectMozXHRSupport())return new w(R,_);if(y.detectXHROverrideMimeTypeSupport())return new b(R,_);throw new Error("This environment's XHR implementation cannot support binary transfer.")}};var b=function(){function _(R,D){this.options=R,this.init=D}return _.prototype.onProgressEvent=function(){this.options.debug&&p.debug("XHR.onProgressEvent.length: ",this.xhr.response.length);var R=this.xhr.response.substr(this.index);this.index=this.xhr.response.length;var D=E(R);this.options.onChunk(D)},_.prototype.onLoadEvent=function(){this.options.debug&&p.debug("XHR.onLoadEvent"),this.options.onEnd()},_.prototype.onStateChange=function(){this.options.debug&&p.debug("XHR.onStateChange",this.xhr.readyState),this.xhr.readyState===XMLHttpRequest.HEADERS_RECEIVED&&this.options.onHeaders(new h.Metadata(this.xhr.getAllResponseHeaders()),this.xhr.status)},_.prototype.sendMessage=function(R){this.xhr.send(R)},_.prototype.finishSend=function(){},_.prototype.start=function(R){var D=this;this.metadata=R;var I=new XMLHttpRequest;this.xhr=I,I.open("POST",this.options.url),this.configureXhr(),this.metadata.forEach(function($,U){I.setRequestHeader($,U.join(", "))}),I.withCredentials=!!this.init.withCredentials,I.addEventListener("readystatechange",this.onStateChange.bind(this)),I.addEventListener("progress",this.onProgressEvent.bind(this)),I.addEventListener("loadend",this.onLoadEvent.bind(this)),I.addEventListener("error",function($){D.options.debug&&p.debug("XHR.error",$),D.options.onEnd($.error)})},_.prototype.configureXhr=function(){this.xhr.responseType="text",this.xhr.overrideMimeType("text/plain; charset=x-user-defined")},_.prototype.cancel=function(){this.options.debug&&p.debug("XHR.abort"),this.xhr.abort()},_}();a.XHR=b;var w=function(_){function R(){return _!==null&&_.apply(this,arguments)||this}return d(R,_),R.prototype.configureXhr=function(){this.options.debug&&p.debug("MozXHR.configureXhr: setting responseType to 'moz-chunked-arraybuffer'"),this.xhr.responseType="moz-chunked-arraybuffer"},R.prototype.onProgressEvent=function(){var D=this.xhr.response;this.options.debug&&p.debug("MozXHR.onProgressEvent: ",new Uint8Array(D)),this.options.onChunk(new Uint8Array(D))},R}(b);function v(_,R){var D=_.charCodeAt(R);if(D>=55296&&D<=56319){var I=_.charCodeAt(R+1);I>=56320&&I<=57343&&(D=65536+(D-55296<<10)+(I-56320))}return D}function E(_){for(var R=new Uint8Array(_.length),D=0,I=0;I<_.length;I++){var $=String.prototype.codePointAt?_.codePointAt(I):v(_,I);R[D++]=255&$}return R}a.MozChunkedArrayBufferXHR=w,a.stringToArrayBuffer=E},849:function(s,a){var l;function u(){if(l!==void 0)return l;if(XMLHttpRequest){l=new XMLHttpRequest;try{l.open("GET","https://localhost")}catch{}}return l}function d(h){var p=u();if(!p)return!1;try{return p.responseType=h,p.responseType===h}catch{}return!1}Object.defineProperty(a,"__esModule",{value:!0}),a.detectXHROverrideMimeTypeSupport=a.detectMozXHRSupport=a.xhrSupportsResponseType=void 0,a.xhrSupportsResponseType=d,a.detectMozXHRSupport=function(){return typeof XMLHttpRequest<"u"&&d("moz-chunked-arraybuffer")},a.detectXHROverrideMimeTypeSupport=function(){return typeof XMLHttpRequest<"u"&&XMLHttpRequest.prototype.hasOwnProperty("overrideMimeType")}},540:function(s,a,l){Object.defineProperty(a,"__esModule",{value:!0}),a.WebsocketTransport=void 0;var u,d=l(346),h=l(617);(function(y){y[y.FINISH_SEND=1]="FINISH_SEND"})(u||(u={}));var p=new Uint8Array([1]);a.WebsocketTransport=function(){return function(y){return function(b){b.debug&&d.debug("websocketRequest",b);var w,v=function(R){if(R.substr(0,8)==="https://")return"wss://"+R.substr(8);if(R.substr(0,7)==="http://")return"ws://"+R.substr(7);throw new Error("Websocket transport constructed with non-https:// or http:// host.")}(b.url),E=[];function _(R){if(R===u.FINISH_SEND)w.send(p);else{var D=R,I=new Int8Array(D.byteLength+1);I.set(new Uint8Array([0])),I.set(D,1),w.send(I)}}return{sendMessage:function(R){w&&w.readyState!==w.CONNECTING?_(R):E.push(R)},finishSend:function(){w&&w.readyState!==w.CONNECTING?_(u.FINISH_SEND):E.push(u.FINISH_SEND)},start:function(R){(w=new WebSocket(v,["grpc-websockets"])).binaryType="arraybuffer",w.onopen=function(){var D;b.debug&&d.debug("websocketRequest.onopen"),w.send((D="",R.forEach(function(I,$){D+=I+": "+$.join(", ")+`\r
`}),h.encodeASCII(D))),E.forEach(function(I){_(I)})},w.onclose=function(D){b.debug&&d.debug("websocketRequest.onclose",D),b.onEnd()},w.onerror=function(D){b.debug&&d.debug("websocketRequest.onerror",D)},w.onmessage=function(D){b.onChunk(new Uint8Array(D.data))}},cancel:function(){b.debug&&d.debug("websocket.abort"),w.close()}}}(y)}}},35:function(s,a,l){Object.defineProperty(a,"__esModule",{value:!0}),a.unary=void 0;var u=l(65),d=l(934);a.unary=function(h,p){if(h.responseStream)throw new Error(".unary cannot be used with server-streaming methods. Use .invoke or .client instead.");if(h.requestStream)throw new Error(".unary cannot be used with client-streaming methods. Use .client instead.");var y=null,b=null,w=d.client(h,{host:p.host,transport:p.transport,debug:p.debug});return w.onHeaders(function(v){y=v}),w.onMessage(function(v){b=v}),w.onEnd(function(v,E,_){p.onEnd({status:v,statusMessage:E,headers:y||new u.Metadata,message:b,trailers:_})}),w.start(p.metadata),w.send(p.request),w.finishSend(),{close:function(){w.close()}}}},882:function(s,a){Object.defineProperty(a,"__esModule",{value:!0}),a.frameRequest=void 0,a.frameRequest=function(l){var u=l.serializeBinary(),d=new ArrayBuffer(u.byteLength+5);return new DataView(d,1,4).setUint32(0,u.length,!1),new Uint8Array(d,5).set(u),new Uint8Array(d)}}},r={},function s(a){if(r[a])return r[a].exports;var l=r[a]={exports:{}};return n[a].call(l.exports,l,l.exports,s),l.exports}(607);var n,r})}(Ph)),Ph.exports}var jB=LB(),M2=/^[0-9]+$/,zB=function(t,n){var r=M2.test(t),s=M2.test(n);return r&&s&&(t=+t,n=+n),t===n?0:r&&!s?-1:s&&!r?1:t<n?-1:1},L2=/^(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)(?:-((?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$/,qB=function(t,n){if(typeof t!="string"||typeof n!="string")throw new Error("Invalid input");var r=t.match(L2),s=n.match(L2);if(!r||!s)throw new Error("Invalid input");for(var a=1;a<=3;a++){if(parseInt(r[a])>parseInt(s[a]))return 1;if(parseInt(r[a])<parseInt(s[a]))return-1}if(r[4]&&s[4])for(var l=(r[4]||"").split("."),u=(s[4]||"").split("."),d=0;d<Math.max(l.length,u.length);d++){if(l[d]===void 0)return-1;if(u[d]===void 0)return 1;var h=zB(l[d],u[d]);if(h!==0)return h}return 0};const ub="1.20.0",Ad=e=>t=>typeof t===e,Hi=e=>e!=null,HB=Ad("object"),hc=Ad("string"),X3=Ad("function"),FB=Ad("number");function Z3(e){return X3(e)?e(W3,F6):[]}async function Q3(e,t){fe(Hi(t),`${e}(opts) -- opts is required`),fe(HB(t),`${e}(opts) -- opts must be an object`),fe(!(t.cadence&&t.template),`${e}({ template, cadence }) -- cannot pass both cadence and template`),fe(Hi(t.cadence||t?.template),`${e}({ cadence }) -- cadence is required`),fe(hc(t.cadence)||t?.template,`${e}({ cadence }) -- cadence must be a string`),fe(await Ae().get("accessNode.api"),`${e}(opts) -- Required value for "accessNode.api" not defined in config. See: https://github.com/onflow/flow-js-sdk/blob/master/packages/fcl/src/exec/query.md#configuration`)}async function VB(e){return Q3("mutate",e)}async function GB(e){return Q3("query",e)}async function j2(e){let{url:t}=e;fe(typeof t<"u","retrieve({ url }) -- url must be defined");let n;try{n=await r3(t)}catch{throw new Error("httpDocumentResolver Error: Failed to retrieve document.")}return n.ok?await n.json():null}const z2=new Map([["http",j2],["https",j2]]);async function KB(e){let{url:t}=e;fe(typeof t<"u","retrieve({ url }) -- url must be defined"),fe(typeof t=="string","retrieve({ url }) -- url must be a string");const n=await Ae().where(/^document\.resolver\./);Object.keys(n).map(u=>{const d=n[u],h=u.replace(/^document\.resolver\./,"");z2.set(h,d)});const r=/^(.*):\/\/([A-Za-z0-9\-\.]+)(:[0-9]+)?(.*)$/.exec(t);fe(r,"Failed to parse URL");const s=r[1];fe(r,"Failed to parse URL protocol");const a=z2.get(s);return fe(a,`No resolver found for protcol=${s}`),await a({url:t})}async function YB(e){let{network:t,template:n}=e;return fe(n.f_version==="1.0.0","deriveCadenceByNetwork100({ template }) -- template must be version 1.0.0"),Object.keys(n?.data?.dependencies).map(s=>{const a=Object.values(n?.data?.dependencies?.[s]);fe(a!==void 0,`deriveCadenceByNetwork100 -- Could not find contracts for dependency placeholder: ${s}`),fe(a.length>0,`deriveCadenceByNetwork100 -- Could not find contracts for dependency placeholder: ${s}`);const u=a[0]?.[t];return fe(u,`deriveCadenceByNetwork100 -- Could not find ${t} network information for dependency: ${s}`),[s,u?.address]}).reduce((s,a)=>{let[l,u]=a;const d=new RegExp("(\\b"+l+"\\b)","g");return s.replace(d,u)},n.data.cadence)}function WB(e){let{cadence:t,networkDependencies:n}=e;return Object.keys(n).reduce((r,s)=>{const a=n[s],l=new RegExp(`import "\\b${s}\\b"`,"g");return r.replace(l,`import ${s} from ${a}`)},t)}async function XB(e){let{network:t,template:n}=e;fe(n.f_version==="1.1.0","deriveCadenceByNetwork110({ template }) -- template must be version 1.0.0");const r={};return n?.data?.dependencies.forEach(s=>{s.contracts.forEach(a=>{const l=a.contract;a.networks.forEach(u=>{u.network===t&&(r[l]=u.address)}),fe(r[l]!==void 0,`deriveCadenceByNetwork110 -- Could not find contracts Network Address: ${t} ${l}`)})}),fe(Object.keys(r).length===n?.data?.dependencies.length,`deriveCadenceByNetwork110 -- Could not find contracts for import dependencies: ${r}`),fe(Object.keys(r).length===Object.values(r).length,`deriveCadenceByNetwork110 -- Could not find all addresses for network ${t} dependencies:  ${r}`),fe(n?.data?.cadence?.body,`no cadence found -- Could not replace import dependencies: ${r}`),WB({cadence:n?.data?.cadence?.body,networkDependencies:r})}async function ZB(e){let{network:t,template:n}=e;switch(fe(t!=null,"deriveCadenceByNetwork({ network }) -- network must be defined"),fe(typeof t=="string","deriveCadenceByNetwork({ network }) -- network must be a string"),fe(n!=null,"deriveCadenceByNetwork({ template }) -- template must be defined"),fe(typeof n=="object","deriveCadenceByNetwork({ template }) -- template must be an object"),fe(n.f_type==="InteractionTemplate","deriveCadenceByNetwork({ template }) -- template must be an InteractionTemplate"),n.f_version){case"1.1.0":return await XB({network:t,template:n});case"1.0.0":return await YB({network:t,template:n});default:throw new Error("deriveCadenceByNetwork Error: Unsupported template version")}}async function QB(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(await _d([CB()],e).then(Sd)).chainId}let Ma={},q2=!1;async function Ho(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=await Ae.get("flow.network"),n=await Ae.get("env");n&&!q2&&(qe.deprecate({pkg:"FCL",subject:'Using the "env" configuration key for specifying the flow network',message:"Configuring to specify flow network is no longer required",transition:"https://github.com/onflow/flow-js-sdk/blob/master/packages/fcl/TRANSITIONS.md#0001-deprecate-env-config-key"}),q2=!0);const r=e.node||await Ae.get("accessNode.api");if(!r){if(t)return t;if(n)return n;throw new Error('Either the "accessNode.api" config key or opts.node must be set')}if(Ma[r])try{return await Ma[r]}catch{}Ma[r]||(Ma[r]=QB(e).catch(s=>{throw Ma[r]=null,s}));try{return await Ma[r]}catch(s){if(t)return t;if(n)return n;throw new Error(`Error getting chainId from access node - are you using the correct access node endpoint.  If running locally, is your emulator up-to-date? ${s.message}`)}}function JB(){return Ae.subscribe(()=>{Ho({enableRequestLogging:!1}).catch(()=>{})})}async function J3(e){hc(e?.template)&&(e.template=await KB({url:e?.template}));const t=e.cadence||await ZB({template:e.template,network:await Ho(e)});return e.cadence=t,e}async function e$(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return await GB(e),e=await J3(e),_d([BB(e.cadence),Y3(Z3(e.args||[])),TB(e.isSealed??!1),e.limit&&typeof e.limit=="number"&&K3(e.limit)])}async function t$(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e$(e).then(Sd)}const cr={"HTTP/RPC":"HTTP/RPC","HTTP/POST":"HTTP/POST","IFRAME/RPC":"IFRAME/RPC","POP/RPC":"POP/RPC","TAB/RPC":"TAB/RPC","EXT/RPC":"EXT/RPC","DEEPLINK/RPC":"DEEPLINK/RPC"},n$=globalThis.URL;let fb=class extends n${constructor(t,n){for(var r=arguments.length,s=new Array(r>2?r-2:0),a=2;a<r;a++)s[a-2]=arguments[a];super(t,n,...s)}};const Ec={f_type:"Service",f_vsn:"1.0.0"},eO={f_type:"Identity",f_vsn:"1.0.0"},r$={f_type:"USER",f_vsn:"1.0.0"},i$={f_type:"PollingResponse",f_vsn:"1.0.0"},s$={f_type:"CompositeSignature",f_vsn:"1.0.0"},o$="USER_SIGNATURE",a$=e=>{if(e.appIdentifier){const{appIdentifier:t,address:n,nonce:r,signatures:s}=e;return fe(hc(t),"verifyAccountProof({ appIdentifier }) -- appIdentifier must be a string"),fe(hc(n)&&$t(n).length===16,"verifyAccountProof({ address }) -- address must be a valid address"),fe(/^[0-9a-f]+$/i.test(r),"nonce must be a hex string"),fe(Array.isArray(s)&&s.every((a,l,u)=>a.f_type==="CompositeSignature"),"Must include an Array of CompositeSignatures to verify"),fe(s.map(a=>a.addr).every((a,l,u)=>a===u[0]),"User signatures to be verified must be from a single account address"),!0}else{const{message:t,address:n,compSigs:r}=e;return fe(/^[0-9a-f]+$/i.test(t),"Signed message must be a hex string"),fe(hc(n)&&$t(n).length===16,"verifyUserSignatures({ address }) -- address must be a valid address"),fe(Array.isArray(r)&&r.every((s,a,l)=>s.f_type==="CompositeSignature"),"Must include an Array of CompositeSignatures to verify"),fe(r.map(s=>s.addr).every((s,a,l)=>s===l[0]),"User signatures to be verified must be from a single account address"),!0}},c$=async(e,t)=>{const n="verifyUserSignatures";let r=await Ho(t);const s={testnet:"0x74daa6f9c7ef24b1",mainnet:"0xb4b82a1c9d21d284",previewnet:"0x40b5b8b2ce81ea4a"},a=t.fclCryptoContract||s[r];return fe(a,`${n}({ fclCryptoContract }) -- FCLCrypto contract address is unknown for network: ${r}. Please manually specify the FCLCrypto contract address.`),`
      import FCLCrypto from ${a}

      access(all) fun main(
          address: Address, 
          message: String, 
          keyIndices: [Int], 
          signatures: [String]
      ): Bool {
        return FCLCrypto.${n}(address: address, message: message, keyIndices: keyIndices, signatures: signatures)
      }
    `};async function l$(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const r=Rn(t[0].addr);a$({message:e,address:r,compSigs:t});let s=[],a=[];for(const l of t)s.push(l.signature),a.push(l.keyId.toString());return t$({cadence:await c$(o$,n),args:(l,u)=>[l(r,u.Address),l(e,u.String),l(a,u.Array(u.Int)),l(s,u.Array(u.String))]})}qe.deprecate({pkg:"FCL",subject:"fcl.verifyUserSignatures()",message:"Please use fcl.AppUtils.verifyUserSignatures()",callback:function(t,n){return l$(t,n)}});const u$=/\[Error Code: (\d+)\]/;class Rd extends Error{constructor(t,n){super(t),this.code=n,this.type=n2[n]}static fromErrorMessage(t){const n=t.match(u$),r=n?parseInt(n[1],10):void 0;return new Rd(t,r||n2.UNKNOWN_ERROR)}}async function H2(e){return Object.fromEntries(Object.entries(await Ae().where(e)).map(t=>{let[n,r]=t;return[n.replace(e,""),r]}))}const tO=e=>e.status===5,Ms=e=>e.status>=4,Od=e=>e.status>=3,xd=e=>e.status>=2,nO=e=>e.status>=1,f$=e=>e.status>=0,rO=(e,t)=>{if(e===t)return!0;if(typeof e!="object"||typeof t!="object"||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!rO(e[n],t[n]))return!1;return!0},jm=(e,t)=>!rO(e,t),Zh=e=>{if(typeof e=="object"&&(e=e.transactionId),e==null)throw new Error("transactionId required");return e},iO=/^[0-9a-fA-F]{64}$/,Uy="POLL",F2="TIMEOUT",h$=async e=>_d([IB(e)]).then(Sd),d$=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return{[du]:async t=>{setTimeout(()=>t.sendSelf(F2),e.txNotFoundTimeout),t.sendSelf(Uy)},[vc]:(t,n)=>{t.subscribe(n.from),t.send(n.from,Bm,t.all())},[Co]:(t,n)=>{t.unsubscribe(n.from)},[LR]:async(t,n)=>{n.reply(t.all())},[F2]:async t=>{Object.keys(t.all()).length===0&&t.fatalError(new Error(`TX status polling failed: no transaction was found within timeout interval (${e.txNotFoundTimeout}ms)`))},[Uy]:async t=>{const n=()=>setTimeout(()=>t.sendSelf(Uy),e.pollRate);let r;const s=t.all();try{r=await h$(t.self())}catch(a){const l=a instanceof Bh&&a.statusCode===404,u=a.code===jB.grpc.Code.NotFound;return l||u?n():t.fatalError(a)}Ms(r)||n(),jm(s,r)&&t.broadcast(Bm,r),t.merge(r)}}},V2=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return t=>qo(d$(e),Zh(t))};function Fo(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{txNotFoundTimeout:12500,pollRate:1e3};if(!iO.test(Zh(e)))throw new Error("Invalid transactionId");function n(){return jR(e,V2(t))}function r(a){return K0(Zh(e),V2(t),a)}function s(a){return function(){const d=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}).suppress||!1;return new Promise((h,p)=>{const y=r((b,w)=>{if((w||b.statusCode)&&!d){if(w!=null)p(w),y();else if(b.statusCode===1){const v=Rd.fromErrorMessage(b.errorMessage);p(v),y()}return}a(b)&&(h(b),y())})})}}return{snapshot:n,subscribe:r,onceFinalized:s(xd),onceExecuted:s(Od),onceSealed:s(Ms)}}Fo.isUnknown=f$;Fo.isPending=nO;Fo.isFinalized=xd;Fo.isExecuted=Od;Fo.isSealed=Ms;Fo.isExpired=tO;const p$="local",G2=new Map;function Vo(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{txNotFoundTimeout:12500,pollRate:1e3};if(!iO.test(Zh(e)))throw new Error("Invalid transactionId");function n(){let l=G2.get(e);return l||(l=g$(e,t),G2.set(e,l)),l}function r(){return Promise.resolve(n().value)}function s(l,u){const d=n(),{unsubscribe:h}=d.subscribe(l,u);return()=>h()}function a(l){return function(){const h=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{suppress:!1}).suppress||!1;return new Promise((p,y)=>{const b=s(w=>{if(w.statusCode===1){const v=Rd.fromErrorMessage(w.errorMessage);y(v),b()}else l(w)&&(p(w),b())},w=>{h||(y(w),b())})})}}return{snapshot:r,subscribe:s,onceFinalized:a(xd),onceExecuted:a(Od),onceSealed:a(Ms)}}Vo.isUnknown=D3;Vo.isPending=nO;Vo.isFinalized=xd;Vo.isExecuted=Od;Vo.isSealed=Ms;Vo.isExpired=tO;function g$(e,t){const n=new Set;let r={blockId:"",status:ON.UNKNOWN,statusCode:0,errorMessage:"",events:[],statusString:""};s().catch(d);async function s(){await Ho()===p$?(console.warn("Events are not supported on the Flow emulator, falling back to legacy polling."),l()):a()}function a(){const h=OB({topic:zo.TRANSACTION_STATUSES,args:{transactionId:e},onData:p=>{jm(r,p)&&(r=p,u(p)),Ms(p)&&new Promise(y=>setTimeout(y,0)).then(()=>{Ms(p)&&h.unsubscribe()})},onError:p=>{p instanceof V3?(console.warn("Failed to subscribe to transaction status updates using real-time streaming (are you using the deprecated GRPC transport?), falling back to polling."),l()):d(p)}})}function l(){const h=Fo(e,t).subscribe((p,y)=>{y?d(y):p&&jm(r,p)&&(r=p,u(p),Ms(p)&&new Promise(b=>setTimeout(b,0)).then(()=>{h()}))})}function u(h){for(const p of n)try{p.onData(h)}catch(y){console.error("Error in transaction observer",y)}}function d(h){for(const p of n)try{p.onError(h)}catch(y){console.error("Error in transaction observer",y)}}return{subscribe(h,p){const y={onData:h,onError:p||(()=>{})};return n.add(y),h(r),{unsubscribe:()=>n.delete(y)}},get value(){return r}}}const La=()=>{throw new Error("Platform specific Core Strategies are not initialized")},y$={[cr["EXT/RPC"]]:La,[cr["HTTP/POST"]]:La,[cr["IFRAME/RPC"]]:La,[cr["POP/RPC"]]:La,[cr["TAB/RPC"]]:La,[cr["EXT/RPC"]]:La},m$=["ServicePlugin"],b$=["discovery-service"],w$=e=>{const{services:t=[],serviceStrategy:n}=e;fe(Array.isArray(t),"Services must be an array");for(const r of t)fe(Hi(r.f_type)&&r.f_type==="Service","Service is required"),fe(Hi(r.type)&&r.type==="authn",`Service must be type authn. Received ${r.type}`),fe(r.method in cr||n.method===r.method,`Service method ${r.method} is not supported`);return fe(Hi(n),"Service strategy is required"),fe(Hi(n.method)&&hc(n.method),"Service strategy method is required"),fe(Hi(n.exec)&&X3(n.exec),"Service strategy exec function is required"),{discoveryServices:t,serviceStrategy:n}},v$=e=>{let{coreStrategies:t}=e,n=new Set,r=new Map(Object.entries(t));const s=h=>{if(fe(b$.includes(h.type),`Service Plugin type ${h.type} is not supported`),h.type==="discovery-service"){const{discoveryServices:p,serviceStrategy:y}=w$(h);a(p),r.has(y.method)?qe({title:"Add Service Plugin",message:`Service strategy for ${y.method} already exists`,level:ft.warn}):r.set(y.method,y.exec)}},a=h=>n=new Set([...h]);return Object.freeze({add:s,getServices:()=>[...n],getStrategy:h=>r.get(h),getStrategies:()=>[...r.keys()]})},E$=e=>{let t;fe(!!e,"No plugins supplied"),Array.isArray(e)?t=[...e]:t=[e];for(const n of t)fe(Hi(n.name),"Plugin name is required"),fe(Hi(n.f_type),"Plugin f_type is required"),fe(m$.includes(n.f_type),`Plugin type ${n.f_type} is not supported`);return t},_$=()=>{const e=new Map;return Object.freeze({add:r=>{const s=E$(r);for(const a of s)e.set(a.name,a),a.f_type==="ServicePlugin"&&gu.add(a)},getPlugins:()=>e})};let gu;const sO=()=>typeof gu<"u",oO=e=>{let{coreStrategies:t}=e;if(sO())return gu;const n=v$({coreStrategies:t});return gu=n,n},Cu=()=>sO()?gu:(console.warn("Registry is not initalized, it will be initialized with stub core strategies"),oO({coreStrategies:y$})),K2=_$(),aO=async()=>[...window?.fcl_extensions||[],...Cu().getServices()];async function S$(e){const t=await Ae.get("discovery.authn.include",[]),n=await Ae.get("discovery.authn.exclude",[]),r=await Ae.get("discovery.features.suggested",[]),s=await Ae.first(["discovery.wallet.method","discovery.wallet.method.default"]),a=e?.method?e.method:s,l=e?.endpoint??await Ae.first(["discovery.wallet","challenge.handshake"]);return fe(l,`
    If no service is passed to "authenticate," then "discovery.wallet" must be defined in fcl config.
    See: "https://docs.onflow.org/fcl/reference/api/#setting-configuration-values"
    `),{...e,type:"authn",endpoint:l,method:a,discoveryAuthnInclude:t,discoveryAuthnExclude:n,discoveryFeaturesSuggested:r}}async function A$(e){let{types:t}=e;const n=await Ae.get("discovery.authn.endpoint");fe(!!n,'"discovery.authn.endpoint" in config must be defined.');const r=await Ae.get("discovery.authn.include",[]),s=await Ae.get("discovery.authn.exclude",[]),a=new fb(n);return fetch(a,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:t,fclVersion:ub,include:r,exclude:s,features:{suggested:await Ae.get("discovery.features.suggested",[])},clientServices:await aO(),supportedStrategies:Cu().getStrategies(),userAgent:window?.navigator?.userAgent,network:await Ho()})}).then(l=>l.json())}const ci={AUTHN:"authn",RESULTS:"results",SNAPSHOT:"SNAPSHOT",UPDATED:"UPDATED",UPDATE_RESULTS:"UPDATE_RESULTS"},R$=(e,t)=>{e&&console.warn(`
      %cFCL Warning
      ============================
      ${t}
      For more info, please see the docs: https://docs.onflow.org/fcl/
      ============================
      `,"font-weight:bold;font-family:monospace;")},zm=async()=>{try{const e=await A$({types:[ci.AUTHN]});Ft(ci.AUTHN,ci.UPDATE_RESULTS,{results:e})}catch(e){qe({title:`${e.name} Error fetching Discovery API services.`,message:e.message,level:ft.error})}},O$={[du]:async e=>{R$(typeof window>"u",'"fcl.discovery" is only available in the browser.'),document.readyState==="complete"?zm():window.addEventListener("load",()=>{zm()})},[ci.UPDATE_RESULTS]:(e,t,n)=>{e.merge(n),e.broadcast(ci.UPDATED,{...e.all()})},[vc]:(e,t)=>{e.subscribe(t.from),e.send(t.from,ci.UPDATED,{...e.all()})},[Co]:(e,t)=>e.unsubscribe(t.from),[ci.SNAPSHOT]:async(e,t)=>t.reply({...e.all()})},Y2=()=>qo(O$,ci.AUTHN),x$={subscribe:e=>K0(ci.AUTHN,Y2,e),snapshot:()=>jR(ci.AUTHN,Y2),update:()=>{document.readyState==="complete"&&zm()}},T$={authn:x$};async function D$(e,t){if(e==null||t==null)return[];const n=new fb(e);n.searchParams.append("code",t);const r=await fetch(n,{method:"GET",headers:{"Content-Type":"application/json"}}).then(a=>a.json());if(Array.isArray(r))return r;const s=[];if(Array.isArray(r.authorizations))for(let a of r.authorizations)s.push({type:"authz",keyId:r.keyId,...a});return r.provider!=null&&s.push({type:"authn",id:"wallet-provider#authn",...r.provider}),s}function I$(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return[...e,...t]}function C$(e){if(e==null)return null;if(!e.f_vsn)return{...Ec,type:e.type,uid:e.id,endpoint:e.authn,id:e.pid,provider:{address:Rn(e.addr),name:e.name,icon:e.icon}};switch(e.f_vsn){case"1.0.0":return e;default:return null}}function N$(e){if(e==null)return null;if(!e.f_vsn)return{...Ec,type:e.type,uid:e.id,endpoint:e.endpoint,method:e.method,identity:{...eO,address:Rn(e.addr),keyId:e.keyId},params:e.params,data:e.data};switch(e.f_vsn){case"1.0.0":return e;default:return null}}function U$(e){if(e==null)return null;if(!e.f_vsn)return{...Ec,type:e.type,uid:e.id,endpoint:e.endpoint,method:e.method,identity:{...eO,address:Rn(e.addr),keyId:e.keyId},params:e.params,data:e.data};switch(e.f_vsn){case"1.0.0":return e;default:return null}}function cO(e){if(e==null)return null;if(!e.f_vsn)return{old:e,...Ec,type:"frame",endpoint:e.endpoint,params:e.params||{},data:e.data||{}};switch(e.f_vsn){case"1.0.0":return e;default:return null}}function lO(e){if(e==null)return null;if(!e.f_vsn)return{...Ec,type:"back-channel-rpc",endpoint:e.endpoint,method:e.method,params:e.params||{},data:e.data||{}};switch(e.f_vsn){case"1.0.0":return e;default:return null}}function B$(e){if(e==null)return null;switch(e.f_vsn){case"1.0.0":return e;default:return null}}function $$(e){if(e==null)return null;if(!e.f_vsn)throw new Error("Invalid user-signature service");switch(e.f_vsn){case"1.0.0":return e;default:return null}}function uO(e){if(e==null)return null;if(e.method==null&&(e={...e,type:"local-view",method:"VIEW/IFRAME"}),!e.f_vsn)return{...Ec,type:e.type||"local-view",method:e.method,endpoint:e.endpoint,data:e.data||{},params:e.params||{}};switch(e.f_vsn){case"1.0.0":return e;default:return null}}function P$(e){if(e==null)return null;if(!e.f_vsn)throw new Error("FCL Normalizer Error: Invalid account-proof service");switch(e.f_vsn){case"1.0.0":return e;default:return null}}function k$(e){if(e==null)return null;if(!e.f_vsn)throw new Error("Invalid authn-refresh service");switch(e.f_vsn){case"1.0.0":return e;default:return null}}function M$(e,t){return e.map(n=>j$(n,t)).filter(Boolean)}const L$={"back-channel-rpc":lO,"pre-authz":U$,authz:N$,authn:C$,frame:cO,"open-id":B$,"user-signature":$$,"local-view":uO,"account-proof":P$,"authn-refresh":k$};function j$(e,t){try{var n=L$[e.type](e,t);return n}catch(r){return console.error(`Unrecognized FCL Service Type [${e.type}]`,e,r),e}}function yu(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return e.reduce((n,r)=>r.type===t&&(!n||qB(r.f_vsn,n.f_vsn)>0)?r:n,null)}function z$(e){return X0([e.provider?.address||e.provider?.name||"UNSPECIFIED",e.id]).toString("hex")}function q$(e){return e.addr=e.addr?Rn(e.addr):null,e.paddr=e.paddr?Rn(e.paddr):null,e}async function W2(e){e=q$(e);var t=M$(I$(e.services||[],await D$(e.hks,e.code)));const n=yu(t,"authn");return{...r$,addr:Rn(e.addr),cid:z$(n),loggedIn:!0,services:t,expiresAt:e.expires}}const H$="WC/RPC",F$=typeof window>"u";function V$(){if(F$)return;Cu().getStrategies().includes(H$)||qe({title:"FCL WalletConnect Service Plugin",level:ft.error,message:"All dApps are expected to register for a WalletConnect projectId & add this to their FCL configuration.  If you do not do so, users will be unable to use certain wallets to interact with your dApp.  See https://developers.flow.com/tools/clients/fcl-js/configure-fcl for more information."})}const G$=globalThis.AbortController||require("abort-controller"),Td=async e=>{let{service:t,body:n,config:r,abortSignal:s,customRpc:a,user:l,opts:u}=e;return Cu().getStrategy(t.method)({service:t,body:n,config:r,abortSignal:s,customRpc:a,opts:u,user:l})};async function Bo(e){let{service:t,msg:n={},config:r={},opts:s={},platform:a,abortSignal:l=new G$().signal,execStrategy:u,user:d}=e;V$(),n.data=t.data;const h={services:await H2(/^service\./),app:await H2(/^app\.detail\./),client:{...r.client,platform:a,fclVersion:ub,fclLibrary:"https://github.com/onflow/fcl-js",hostname:window?.location?.hostname??null,network:await Ho(s)}};try{const p=await(u||Td)({service:t,body:n,config:h,opts:s,user:d,abortSignal:l});return p.status==="REDIRECT"?(fe(t.type===p.data.type,"Cannot shift recursive service type in execService"),await Bo({service:p.data,msg:n,config:h,opts:s,abortSignal:l,platform:a,user:d})):p}catch(p){throw qe({title:`Error on execService ${t?.type}`,message:p,level:ft.error}),p}}function qm(e){if(e==null)return null;if(!e.f_vsn)return{...s$,addr:$t(e.addr||e.address),signature:e.signature||e.sig,keyId:e.keyId};switch(e.f_vsn){case"1.0.0":return e;default:return null}}const K$=e=>typeof e=="function",Fr="CURRENT_USER",By="CURRENT_USER/UPDATED",fO="SNAPSHOT",Hm="SET_CURRENT_USER",hO="DEL_CURRENT_USER",Fm=`{
  "f_type": "User",
  "f_vsn": "1.0.0",
  "addr":null,
  "cid":null,
  "loggedIn":null,
  "expiresAt":null,
  "services":[]
}`,Y$=async e=>{const t=JSON.parse(Fm),n=await e.get(Fr);return n!=null&&t.f_vsn!==n.f_vsn?(e.removeItem(Fr),t):n||t},W$=e=>{const t=async()=>e.getStorageProvider?await e.getStorageProvider():await Ae.first(["fcl.storage","fcl.storage.default"]);return{[du]:async n=>{typeof window>"u"&&console.warn(`
        %cFCL Warning
        ============================
        "currentUser" is only available in the browser.
        For more info, please see the docs: https://docs.onflow.org/fcl/
        ============================
        `,"font-weight:bold;font-family:monospace;"),n.merge(JSON.parse(Fm));const r=await t();if(r.can){const s=await Y$(r);X$(s)&&n.merge(s)}},[vc]:(n,r)=>{n.subscribe(r.from),n.send(r.from,By,{...n.all()})},[Co]:(n,r)=>{n.unsubscribe(r.from)},[fO]:async(n,r)=>{r.reply({...n.all()})},[Hm]:async(n,r,s)=>{n.merge(s);const a=await t();a.can&&a.put(Fr,n.all()),n.broadcast(By,{...n.all()})},[hO]:async(n,r)=>{n.merge(JSON.parse(Fm));const s=await t();s.can&&s.put(Fr,n.all()),n.broadcast(By,{...n.all()})}}},_c=e=>qo(W$(e),Fr);function X$(e){return e.expiresAt==null||e.expiresAt===0||e.expiresAt>Date.now()}async function Z$(){let e=await Ae.get("fcl.accountProof.resolver");if(e==null)return;if(!K$(e)){qe({title:"Account Proof Data Resolver must be a function",message:`Check fcl.accountProof.resolver configuration.
                Expected: fcl.accountProof.resolver: async () => { ... }
                Received: fcl.accountProof.resolver: ${typeof e}
                `,level:ft.warn});return}const t={...await e()},n=window?.location?.origin;return t.appIdentifier?n&&(qe.deprecate({pkg:"FCL",subject:"appIdentifier in fcl.accountProof.resolver",message:"Manually set app identifiers in the account proof resolver function are now deprecated.  These are now automatically set to the application origin URL by FCL",transition:"https://github.com/onflow/flow-js-sdk/blob/master/packages/fcl/TRANSITIONS.md#0002-deprecate-appIdentifier-field-in-account-proof-resolver"}),fe(typeof t.appIdentifier=="string","appIdentifier must be a string")):(fe(n,"The appIdentifier (origin) could not be inferred from the window.location.origin.  Please set the appIdentifier manually in the fcl.accountProof.resolver function."),t.appIdentifier=n),fe(/^[0-9a-f]+$/i.test(t.nonce),"Nonce must be a hex string"),t}const Q$=async e=>{let{discoveryAuthnInclude:t,discoveryAuthnExclude:n,discoveryFeaturesSuggested:r}=e;return{client:{discoveryAuthnInclude:t,discoveryAuthnExclude:n,discoveryFeaturesSuggested:r,clientServices:await aO(),supportedStrategies:Cu().getStrategies()}}},Dd=e=>async function(){let{service:t,redir:n=!1,forceReauth:r=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(t&&!t?.provider?.is_installed&&t?.provider?.requires_install){window.location.href=t?.provider?.install_link;return}return new Promise(async(s,a)=>{_c(e);const l={redir:n},u=await kh(e)(),d=yu(u.services,"authn-refresh");let h;if(u.loggedIn&&!r)if(d)try{const p=await Bo({service:d,msg:h,opts:l,platform:e.platform,user:u});Ft(Fr,Hm,await W2(p))}catch(p){qe({title:`${p.name} Could not refresh wallet authentication.`,message:p.message,level:ft.error})}finally{return s(await kh(e)())}else return s(u);try{h=await Z$()}catch(p){return qe({title:`${p.name} On Authentication: Could not resolve account proof data.`,message:p.message,level:ft.error}),a(p)}try{const p=await S$(t),y=await Bo({service:p,msg:h,config:await Q$(p),opts:l,platform:e.platform,execStrategy:e.discovery?.execStrategy,user:u});Ft(Fr,Hm,await W2(y))}catch(p){qe({title:`${p} On Authentication`,message:p,level:ft.error})}finally{s(await kh(e)())}})};function J$(e){return function(){_c(e),Ft(Fr,hO)}}const eP=e=>({f_type:"PreAuthzResponse",f_vsn:"1.0.0",proposer:(e||{}).proposer,payer:(e||{}).payer||[],authorization:(e||{}).authorization||[]}),tP=e=>(t,n)=>{let{user:r}=n;const s=eP(t),a=[];s.proposer!=null&&a.push(["PROPOSER",s.proposer]);for(let u of s.payer||[])a.push(["PAYER",u]);for(let u of s.authorization||[])a.push(["AUTHORIZER",u]);var l=a.map(u=>{let[d,h]=u;return{tempId:[h.identity.address,h.identity.keyId].join("|"),addr:h.identity.address,keyId:h.identity.keyId,signingFunction(p){return Bo({service:h,msg:p,platform:e.platform,user:r})},role:{proposer:d==="PROPOSER",payer:d==="PAYER",authorizer:d==="AUTHORIZER"}}});return l},nP=e=>async t=>(_c(e),{...t,tempId:"CURRENT_USER",async resolve(n,r){const s=await Dd(e)({redir:!0}),a=yu(s.services,"authz"),l=yu(s.services,"pre-authz");if(l)return tP(e)(await Bo({service:l,msg:r,platform:e.platform,user:s}),{user:s});if(a)return{...n,tempId:"CURRENT_USER",resolve:null,addr:$t(a.identity.address),keyId:a.identity.keyId,sequenceNum:null,signature:null,async signingFunction(u){return qm(await Bo({service:a,msg:u,opts:{includeOlderJsonRpcCall:!0},platform:e.platform,user:s}))}};throw new Error("No Authz or PreAuthz Service configured for CURRENT_USER")}});function rP(e){return function(n){_c(e);const r="@EXIT",s=qo(async a=>{for(a.send(Fr,vc);;){const l=await a.receive();if(l.tag===r){a.send(Fr,Co);return}n(l.data)}});return()=>Ft(s,r)}}function kh(e){return function(){return _c(e),Ft(Fr,fO,null,{expectReply:!0,timeout:0})}}const iP=e=>async()=>{const{addr:t}=await Dd(e)();return W3(Rn(t),p3)},sP=e=>(fe(/^[0-9a-f]+$/i.test(e),"Message must be a hex string"),{message:e}),oP=e=>async t=>{_c(e);const n=await Dd(e)({redir:!0}),r=yu(n.services,"user-signature");fe(r,"Current user must have authorized a signing service.");try{const s=await Bo({service:r,msg:sP(t),platform:e.platform,user:n});return Array.isArray(s)?s.map(a=>qm(a)):[qm(s)]}catch(s){return s}},dO=e=>{const t={authenticate:Dd(e),unauthenticate:J$(e),authorization:nP(e),signUserMessage:oP(e),subscribe:rP(e),snapshot:kh(e),resolveArgument:iP(e)};return Object.assign(()=>({...t}),{...t})},aP=e=>async function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};var r;try{await VB(n),n=await J3(n);const s=typeof e=="function"?e:dO(e),a=await Ae().get("fcl.authz",s().authorization);return r=_d([kB(n.cadence),Y3(Z3(n.args||[])),n.limit&&FB(n.limit)&&K3(n.limit),NB(n.proposer||n.authz||a),UB(n.payer||n.authz||a),DB(n.authorizations||[n.authz||a])]).then(Sd),r}catch(s){throw s}};function Nu(e){const t=new fb(e.endpoint);if(window?.location?.origin&&t.searchParams.append("l6n",window.location.origin),e.params!=null)for(let[n,r]of Object.entries(e.params||{}))t.searchParams.append(n,r);return t}function pO(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=t.method||"POST",r=n==="GET"?void 0:JSON.stringify(t.data||e.data||{});return fetch(Nu(e),{method:n,headers:{...e.headers||{},...t.headers||{},"Content-Type":"application/json"},body:r}).then(s=>s.json())}function pi(e){if(e==null)return null;if(!e.f_vsn)return{...i$,status:e.status??"APPROVED",reason:e.reason??null,data:e.compositeSignature||e.data||{...e},updates:lO(e.authorizationUpdates),local:cO((e.local||[])[0])};switch(e.f_vsn){case"1.0.0":return e;default:return null}}const X2={"HTTP/GET":"GET","HTTP/POST":"POST"},cP=e=>(fe(X2[e.method],"Invalid Service Method for type back-channel-rpc",{service:e}),X2[e.method]);async function Vm(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:()=>!0;if(fe(e,"Missing Polling Service",{service:e}),!t())throw new Error("Externally Halted");let r;try{if(typeof document<"u"&&document.visibilityState==="hidden")return await new Promise(s=>setTimeout(s,500)),Vm(e,t);r=await pO(e,{method:cP(e)}).then(pi)}catch(s){throw s}switch(r.status){case"APPROVED":return r.data;case"DECLINED":throw new Error(`Declined: ${r.reason||"No reason supplied."}`);default:return await new Promise(s=>setTimeout(s,500)),Vm(r.updates,t)}}const Z2=e=>async t=>{let{service:n,body:r,config:s,opts:a}=t;const l=await pO(n,{data:{fclVersion:ub,service:{params:n.params,data:n.data,type:n.type},config:s,...r}}).then(pi);if(l.status==="APPROVED")return l.data;if(l.status==="DECLINED")throw new Error(`Declined: ${l.reason||"No reason supplied."}`);if(l.status==="REDIRECT")return l;if(l.status==="PENDING"){var u=!0,d=!0;const[h,p]=await e(uO(l.local),{serviceEndpoint:Nu,onClose:()=>d=!1}),y=()=>{try{p(),d=!1}catch(w){console.error("Frame Close Error",w)}},b=()=>{const w=u;return u=d,w};return Vm(l.updates,b).then(w=>(y(),w)).catch(w=>{throw console.error(w),y(),w})}else throw console.error("Auto Decline: Invalid Response",{service:n,resp:l}),new Error("Auto Decline: Invalid Response")},ch="FCL:VIEW:CLOSE",$y="FCL:VIEW:READY",Py="FCL:VIEW:RESPONSE",lP="FCL:VIEW:CUSTOM_RPC",Rt=e=>typeof e=="string"&&e.toLowerCase(),uP=new Set(["monetizationstart","monetizationpending","monetizationprogress","monetizationstop"]),lo=(e,t)=>console.warn("DEPRECATION NOTICE",`Received ${e}, please use ${t} for this and future versions of FCL`),Id=e=>{let{close:t,send:n,onReady:r,onResponse:s,onMessage:a,onCustomRpc:l,getSource:u}=e,d;return h=>{try{d=u?.()||d}catch{d=null}try{if(typeof h.data!="object"||uP.has(h.data.type)||d!=null&&h.source!==d)return;Rt(h.data.type)===Rt(ch)&&t(),Rt(h.data.type)===Rt($y)&&(r(h,{send:n,close:t}),d||=h.source),Rt(h.data.type)===Rt(Py)&&s(h,{send:n,close:t}),Rt(h.data.type)===Rt(lP)&&l(h.data.payload,{send:n,close:t}),a(h,{send:n,close:t}),Rt(h.data.type)===Rt("FCL:FRAME:READY")&&(lo(h.data.type,$y),r(h,{send:n,close:t}),d||=h.source),Rt(h.data.type)===Rt("FCL:FRAME:RESPONSE")&&(lo(h.data.type,Py),s(h,{send:n,close:t})),Rt(h.data.type)===Rt("FCL:FRAME:CLOSE")&&(lo(h.data.type,ch),t()),Rt(h.data.type)===Rt("FCL::CHALLENGE::RESPONSE")&&(lo(h.data.type,Py),s(h,{send:n,close:t})),Rt(h.data.type)===Rt("FCL::AUTHZ_READY")&&(lo(h.data.type,$y),r(h,{send:n,close:t}),d||=h.source),Rt(h.data.type)===Rt("FCL::CHALLENGE::CANCEL")&&(lo(h.data.type,ch),t()),Rt(h.data.type)===Rt("FCL::CANCEL")&&(lo(h.data.type,ch),t())}catch(p){console.error("Frame Callback Error",p),t()}}};JB();let Q2=function(e){return e[e.INVALID_REQUEST=-32600]="INVALID_REQUEST",e[e.METHOD_NOT_FOUND=-32601]="METHOD_NOT_FOUND",e[e.INVALID_PARAMS=-32602]="INVALID_PARAMS",e[e.INTERNAL_ERROR=-32603]="INTERNAL_ERROR",e[e.PARSE_ERROR=-32700]="PARSE_ERROR",e}({});class J2 extends Error{constructor(t,n,r){super(n),this.code=t,this.message=n,this.data=r}}var Gm=function(e){return e.HELLO="rpc_hello",e}(Gm||{});class fP{id=0;setSend=()=>{};_send=new Promise(t=>{this.setSend=t});peerInfo=new Promise((t,n)=>{this.resolvePeerInfo=t,this.rejectPeerInfo=n});enabledNotifications=[];requestHandlers={};subscriptions={};messageListeners=[];constructor(t){let{notifications:n}=t;this.enabledNotifications=n||[],this.on(Gm.HELLO,r=>(this.resolvePeerInfo(r),this.ownInfo()))}connect(t){let{send:n}=t;this.setSend(n),this.requestWithoutConnection(Gm.HELLO,this.ownInfo()).then(r=>{this.resolvePeerInfo(r)}).catch(this.rejectPeerInfo)}ownInfo(){return{requests:Object.keys(this.requestHandlers),notifications:this.enabledNotifications}}async send(t){return(await this._send)(t)}receive(t){t?.jsonrpc==="2.0"&&("method"in t&&("id"in t?this.handleRequest(t):this.handleNotification(t)),this.messageListeners.forEach(n=>n(t)))}async handleRequest(t){const n=this.requestHandlers[t.method];if(n)try{const r=await n(t.params);this.send({jsonrpc:"2.0",id:t.id,result:r})}catch(r){r instanceof J2?this.send({jsonrpc:"2.0",id:t.id,error:{code:r.code,message:r.message,data:r.data}}):this.send({jsonrpc:"2.0",id:t.id,error:{code:Q2.INTERNAL_ERROR,message:r?.message}})}else this.send({jsonrpc:"2.0",id:t.id,error:{code:Q2.METHOD_NOT_FOUND,message:`Method not found: ${t.method}`}})}handleNotification(t){this.subscriptions[t.method]&&this.subscriptions[t.method].forEach(n=>n(t.params))}onMessage(t){return this.messageListeners.push(t),()=>{this.messageListeners=this.messageListeners.filter(n=>n!==t)}}async notify(t,n){await this.onceConnected(),this.send({jsonrpc:"2.0",method:t,params:n})}async request(t,n){return await this.onceConnected(),this.requestWithoutConnection(t,n)}async requestWithoutConnection(t,n){const r=this.id++;let s=()=>{};const a=new Promise((l,u)=>{s=this.onMessage(d=>{if(d.id===r&&("result"in d||"error"in d)){if(d.error){const h=new J2(d.error.code,d.error.message,d.error.data);u(h)}l(d.result)}})}).finally(s);return this.send({jsonrpc:"2.0",method:t,params:n,id:r}),a}on(t,n){this.requestHandlers[t]=n}subscribe(t,n){this.subscriptions[t]=this.subscriptions[t]||new Set,this.subscriptions[t].add(n)}unsubscribe(t,n){this.subscriptions[t]?.delete(n)}async onceConnected(){return this.peerInfo.then(()=>{})}async getAvailableRequests(){return this.peerInfo.then(t=>t.requests)}async getAvailableNotifications(){return this.peerInfo.then(t=>t.notifications)}}const hP="modulepreload",dP=function(e){return"/"+e},e_={},gO=function(t,n,r){let s=Promise.resolve();if(n&&n.length>0){let d=function(h){return Promise.all(h.map(p=>Promise.resolve(p).then(y=>({status:"fulfilled",value:y}),y=>({status:"rejected",reason:y}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),u=l?.nonce||l?.getAttribute("nonce");s=d(n.map(h=>{if(h=dP(h),h in e_)return;e_[h]=!0;const p=h.endsWith(".css"),y=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${y}`))return;const b=document.createElement("link");if(b.rel=p?"stylesheet":hP,p||(b.as="script"),b.crossOrigin="",b.href=h,u&&b.setAttribute("nonce",u),document.head.appendChild(b),p)return new Promise((w,v)=>{b.addEventListener("load",w),b.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${h}`)))})}))}function a(l){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=l,window.dispatchEvent(u),!u.defaultPrevented)throw l}return s.then(l=>{for(const u of l||[])u.status==="rejected"&&a(u.reason);return t().catch(a)})};var t_=function(e,t,n){if(n||arguments.length===2)for(var r=0,s=t.length,a;r<s;r++)(a||!(r in t))&&(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))},pP=function(){function e(t,n,r){this.name=t,this.version=n,this.os=r,this.type="browser"}return e}(),gP=function(){function e(t){this.version=t,this.type="node",this.name="node",this.os=process.platform}return e}(),yP=function(){function e(t,n,r,s){this.name=t,this.version=n,this.os=r,this.bot=s,this.type="bot-device"}return e}(),mP=function(){function e(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return e}(),bP=function(){function e(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return e}(),wP=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,vP=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,n_=3,EP=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",wP]],r_=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function _P(e){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new bP:typeof navigator<"u"?AP(navigator.userAgent):OP()}function SP(e){return e!==""&&EP.reduce(function(t,n){var r=n[0],s=n[1];if(t)return t;var a=s.exec(e);return!!a&&[r,a]},!1)}function AP(e){var t=SP(e);if(!t)return null;var n=t[0],r=t[1];if(n==="searchbot")return new mP;var s=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);s?s.length<n_&&(s=t_(t_([],s,!0),xP(n_-s.length),!0)):s=[];var a=s.join("."),l=RP(e),u=vP.exec(e);return u&&u[1]?new yP(n,a,l,u[1]):new pP(n,a,l)}function RP(e){for(var t=0,n=r_.length;t<n;t++){var r=r_[t],s=r[0],a=r[1],l=a.exec(e);if(l)return s}return null}function OP(){var e=typeof process<"u"&&process.version;return e?new gP(process.version.slice(1)):null}function xP(e){for(var t=[],n=0;n<e;n++)t.push("0");return t}var ky={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Km=function(e,t){return Km=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)r.hasOwnProperty(s)&&(n[s]=r[s])},Km(e,t)};function TP(e,t){Km(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var Ym=function(){return Ym=Object.assign||function(t){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},Ym.apply(this,arguments)};function DP(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n}function IP(e,t,n,r){var s=arguments.length,a=s<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(e,t,n,r);else for(var u=e.length-1;u>=0;u--)(l=e[u])&&(a=(s<3?l(a):s>3?l(t,n,a):l(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a}function CP(e,t){return function(n,r){t(n,r,e)}}function NP(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function UP(e,t,n,r){function s(a){return a instanceof n?a:new n(function(l){l(a)})}return new(n||(n=Promise))(function(a,l){function u(p){try{h(r.next(p))}catch(y){l(y)}}function d(p){try{h(r.throw(p))}catch(y){l(y)}}function h(p){p.done?a(p.value):s(p.value).then(u,d)}h((r=r.apply(e,t||[])).next())})}function BP(e,t){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,s,a,l;return l={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function u(h){return function(p){return d([h,p])}}function d(h){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(a=h[0]&2?s.return:h[0]?s.throw||((a=s.return)&&a.call(s),0):s.next)&&!(a=a.call(s,h[1])).done)return a;switch(s=0,a&&(h=[h[0]&2,a.value]),h[0]){case 0:case 1:a=h;break;case 4:return n.label++,{value:h[1],done:!1};case 5:n.label++,s=h[1],h=[0];continue;case 7:h=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(h[0]===6||h[0]===2)){n=0;continue}if(h[0]===3&&(!a||h[1]>a[0]&&h[1]<a[3])){n.label=h[1];break}if(h[0]===6&&n.label<a[1]){n.label=a[1],a=h;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(h);break}a[2]&&n.ops.pop(),n.trys.pop();continue}h=t.call(e,n)}catch(p){h=[6,p],s=0}finally{r=a=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}}function $P(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}function PP(e,t){for(var n in e)n!=="default"&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function Wm(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function yO(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),s,a=[],l;try{for(;(t===void 0||t-- >0)&&!(s=r.next()).done;)a.push(s.value)}catch(u){l={error:u}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(l)throw l.error}}return a}function kP(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(yO(arguments[t]));return e}function MP(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),s=0,t=0;t<n;t++)for(var a=arguments[t],l=0,u=a.length;l<u;l++,s++)r[s]=a[l];return r}function mu(e){return this instanceof mu?(this.v=e,this):new mu(e)}function LP(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),s,a=[];return s={},l("next"),l("throw"),l("return"),s[Symbol.asyncIterator]=function(){return this},s;function l(b){r[b]&&(s[b]=function(w){return new Promise(function(v,E){a.push([b,w,v,E])>1||u(b,w)})})}function u(b,w){try{d(r[b](w))}catch(v){y(a[0][3],v)}}function d(b){b.value instanceof mu?Promise.resolve(b.value.v).then(h,p):y(a[0][2],b)}function h(b){u("next",b)}function p(b){u("throw",b)}function y(b,w){b(w),a.shift(),a.length&&u(a[0][0],a[0][1])}}function jP(e){var t,n;return t={},r("next"),r("throw",function(s){throw s}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(s,a){t[s]=e[s]?function(l){return(n=!n)?{value:mu(e[s](l)),done:s==="return"}:a?a(l):l}:a}}function zP(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof Wm=="function"?Wm(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(a){n[a]=e[a]&&function(l){return new Promise(function(u,d){l=e[a](l),s(u,d,l.done,l.value)})}}function s(a,l,u,d){Promise.resolve(d).then(function(h){a({value:h,done:u})},l)}}function qP(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function HP(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function FP(e){return e&&e.__esModule?e:{default:e}}function VP(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function GP(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n}const KP=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return Ym},__asyncDelegator:jP,__asyncGenerator:LP,__asyncValues:zP,__await:mu,__awaiter:UP,__classPrivateFieldGet:VP,__classPrivateFieldSet:GP,__createBinding:$P,__decorate:IP,__exportStar:PP,__extends:TP,__generator:BP,__importDefault:FP,__importStar:HP,__makeTemplateObject:qP,__metadata:NP,__param:CP,__read:yO,__rest:DP,__spread:kP,__spreadArrays:MP,__values:Wm},Symbol.toStringTag,{value:"Module"})),Uu=P8(KP);var My={},Bl={},i_;function YP(){if(i_)return Bl;i_=1,Object.defineProperty(Bl,"__esModule",{value:!0}),Bl.delay=void 0;function e(t){return new Promise(n=>{setTimeout(()=>{n(!0)},t)})}return Bl.delay=e,Bl}var uo={},Ly={},fo={},s_;function WP(){return s_||(s_=1,Object.defineProperty(fo,"__esModule",{value:!0}),fo.ONE_THOUSAND=fo.ONE_HUNDRED=void 0,fo.ONE_HUNDRED=100,fo.ONE_THOUSAND=1e3),fo}var jy={},o_;function XP(){return o_||(o_=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ONE_YEAR=e.FOUR_WEEKS=e.THREE_WEEKS=e.TWO_WEEKS=e.ONE_WEEK=e.THIRTY_DAYS=e.SEVEN_DAYS=e.FIVE_DAYS=e.THREE_DAYS=e.ONE_DAY=e.TWENTY_FOUR_HOURS=e.TWELVE_HOURS=e.SIX_HOURS=e.THREE_HOURS=e.ONE_HOUR=e.SIXTY_MINUTES=e.THIRTY_MINUTES=e.TEN_MINUTES=e.FIVE_MINUTES=e.ONE_MINUTE=e.SIXTY_SECONDS=e.THIRTY_SECONDS=e.TEN_SECONDS=e.FIVE_SECONDS=e.ONE_SECOND=void 0,e.ONE_SECOND=1,e.FIVE_SECONDS=5,e.TEN_SECONDS=10,e.THIRTY_SECONDS=30,e.SIXTY_SECONDS=60,e.ONE_MINUTE=e.SIXTY_SECONDS,e.FIVE_MINUTES=e.ONE_MINUTE*5,e.TEN_MINUTES=e.ONE_MINUTE*10,e.THIRTY_MINUTES=e.ONE_MINUTE*30,e.SIXTY_MINUTES=e.ONE_MINUTE*60,e.ONE_HOUR=e.SIXTY_MINUTES,e.THREE_HOURS=e.ONE_HOUR*3,e.SIX_HOURS=e.ONE_HOUR*6,e.TWELVE_HOURS=e.ONE_HOUR*12,e.TWENTY_FOUR_HOURS=e.ONE_HOUR*24,e.ONE_DAY=e.TWENTY_FOUR_HOURS,e.THREE_DAYS=e.ONE_DAY*3,e.FIVE_DAYS=e.ONE_DAY*5,e.SEVEN_DAYS=e.ONE_DAY*7,e.THIRTY_DAYS=e.ONE_DAY*30,e.ONE_WEEK=e.SEVEN_DAYS,e.TWO_WEEKS=e.ONE_WEEK*2,e.THREE_WEEKS=e.ONE_WEEK*3,e.FOUR_WEEKS=e.ONE_WEEK*4,e.ONE_YEAR=e.ONE_DAY*365}(jy)),jy}var a_;function mO(){return a_||(a_=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});const t=Uu;t.__exportStar(WP(),e),t.__exportStar(XP(),e)}(Ly)),Ly}var c_;function ZP(){if(c_)return uo;c_=1,Object.defineProperty(uo,"__esModule",{value:!0}),uo.fromMiliseconds=uo.toMiliseconds=void 0;const e=mO();function t(r){return r*e.ONE_THOUSAND}uo.toMiliseconds=t;function n(r){return Math.floor(r/e.ONE_THOUSAND)}return uo.fromMiliseconds=n,uo}var l_;function QP(){return l_||(l_=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});const t=Uu;t.__exportStar(YP(),e),t.__exportStar(ZP(),e)}(My)),My}var ja={},u_;function JP(){if(u_)return ja;u_=1,Object.defineProperty(ja,"__esModule",{value:!0}),ja.Watch=void 0;class e{constructor(){this.timestamps=new Map}start(n){if(this.timestamps.has(n))throw new Error(`Watch already started for label: ${n}`);this.timestamps.set(n,{started:Date.now()})}stop(n){const r=this.get(n);if(typeof r.elapsed<"u")throw new Error(`Watch already stopped for label: ${n}`);const s=Date.now()-r.started;this.timestamps.set(n,{started:r.started,elapsed:s})}get(n){const r=this.timestamps.get(n);if(typeof r>"u")throw new Error(`No timestamp found for label: ${n}`);return r}elapsed(n){const r=this.get(n);return r.elapsed||Date.now()-r.started}}return ja.Watch=e,ja.default=e,ja}var zy={},$l={},f_;function e5(){if(f_)return $l;f_=1,Object.defineProperty($l,"__esModule",{value:!0}),$l.IWatch=void 0;class e{}return $l.IWatch=e,$l}var h_;function t5(){return h_||(h_=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Uu.__exportStar(e5(),e)}(zy)),zy}var d_;function n5(){return d_||(d_=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});const t=Uu;t.__exportStar(QP(),e),t.__exportStar(JP(),e),t.__exportStar(t5(),e),t.__exportStar(mO(),e)}(ky)),ky}var we=n5(),ct={},p_;function bO(){if(p_)return ct;p_=1,Object.defineProperty(ct,"__esModule",{value:!0}),ct.getLocalStorage=ct.getLocalStorageOrThrow=ct.getCrypto=ct.getCryptoOrThrow=ct.getLocation=ct.getLocationOrThrow=ct.getNavigator=ct.getNavigatorOrThrow=ct.getDocument=ct.getDocumentOrThrow=ct.getFromWindowOrThrow=ct.getFromWindow=void 0;function e(b){let w;return typeof window<"u"&&typeof window[b]<"u"&&(w=window[b]),w}ct.getFromWindow=e;function t(b){const w=e(b);if(!w)throw new Error(`${b} is not defined in Window`);return w}ct.getFromWindowOrThrow=t;function n(){return t("document")}ct.getDocumentOrThrow=n;function r(){return e("document")}ct.getDocument=r;function s(){return t("navigator")}ct.getNavigatorOrThrow=s;function a(){return e("navigator")}ct.getNavigator=a;function l(){return t("location")}ct.getLocationOrThrow=l;function u(){return e("location")}ct.getLocation=u;function d(){return t("crypto")}ct.getCryptoOrThrow=d;function h(){return e("crypto")}ct.getCrypto=h;function p(){return t("localStorage")}ct.getLocalStorageOrThrow=p;function y(){return e("localStorage")}return ct.getLocalStorage=y,ct}var Xi=bO(),Pl={},g_;function r5(){if(g_)return Pl;g_=1,Object.defineProperty(Pl,"__esModule",{value:!0}),Pl.getWindowMetadata=void 0;const e=bO();function t(){let n,r;try{n=e.getDocumentOrThrow(),r=e.getLocationOrThrow()}catch{return null}function s(){const w=n.getElementsByTagName("link"),v=[];for(let E=0;E<w.length;E++){const _=w[E],R=_.getAttribute("rel");if(R&&R.toLowerCase().indexOf("icon")>-1){const D=_.getAttribute("href");if(D)if(D.toLowerCase().indexOf("https:")===-1&&D.toLowerCase().indexOf("http:")===-1&&D.indexOf("//")!==0){let I=r.protocol+"//"+r.host;if(D.indexOf("/")===0)I+=D;else{const $=r.pathname.split("/");$.pop();const U=$.join("/");I+=U+"/"+D}v.push(I)}else if(D.indexOf("//")===0){const I=r.protocol+D;v.push(I)}else v.push(D)}}return v}function a(...w){const v=n.getElementsByTagName("meta");for(let E=0;E<v.length;E++){const _=v[E],R=["itemprop","property","name"].map(D=>_.getAttribute(D)).filter(D=>D?w.includes(D):!1);if(R.length&&R){const D=_.getAttribute("content");if(D)return D}}return""}function l(){let w=a("name","og:site_name","og:title","twitter:title");return w||(w=n.title),w}function u(){return a("description","og:description","twitter:description","keywords")}const d=l(),h=u(),p=r.origin,y=s();return{description:h,url:p,icons:y,name:d}}return Pl.getWindowMetadata=t,Pl}var i5=r5();function bu(e,{strict:t=!0}={}){return!e||typeof e!="string"?!1:t?/^0x[0-9a-fA-F]*$/.test(e):e.startsWith("0x")}function Xm(e){return bu(e,{strict:!1})?Math.ceil((e.length-2)/2):e.length}const wO="2.31.0";let qy={getDocsUrl:({docsBaseUrl:e,docsPath:t="",docsSlug:n})=>t?`${e??"https://viem.sh"}${t}${n?`#${n}`:""}`:void 0,version:`viem@${wO}`};class $o extends Error{constructor(t,n={}){const r=n.cause instanceof $o?n.cause.details:n.cause?.message?n.cause.message:n.details,s=n.cause instanceof $o&&n.cause.docsPath||n.docsPath,a=qy.getDocsUrl?.({...n,docsPath:s}),l=[t||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...a?[`Docs: ${a}`]:[],...r?[`Details: ${r}`]:[],...qy.version?[`Version: ${qy.version}`]:[]].join(`
`);super(l,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=t,this.version=wO}walk(t){return vO(this,t)}}function vO(e,t){return t?.(e)?e:e&&typeof e=="object"&&"cause"in e&&e.cause!==void 0?vO(e.cause,t):t?null:e}class EO extends $o{constructor({size:t,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${t}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}}function Sc(e,{dir:t,size:n=32}={}){return typeof e=="string"?s5(e,{dir:t,size:n}):o5(e,{dir:t,size:n})}function s5(e,{dir:t,size:n=32}={}){if(n===null)return e;const r=e.replace("0x","");if(r.length>n*2)throw new EO({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[t==="right"?"padEnd":"padStart"](n*2,"0")}`}function o5(e,{dir:t,size:n=32}={}){if(n===null)return e;if(e.length>n)throw new EO({size:e.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let s=0;s<n;s++){const a=t==="right";r[a?s:n-s-1]=e[a?s:e.length-s-1]}return r}class a5 extends $o{constructor({max:t,min:n,signed:r,size:s,value:a}){super(`Number "${a}" is not in safe ${s?`${s*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${t?`(${n} to ${t})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}}class c5 extends $o{constructor({givenSize:t,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${t} bytes.`,{name:"SizeOverflowError"})}}function Ac(e,{size:t}){if(Xm(e)>t)throw new c5({givenSize:Xm(e),maxSize:t})}function Zm(e,t={}){const{signed:n}=t;t.size&&Ac(e,{size:t.size});const r=BigInt(e);if(!n)return r;const s=(e.length-2)/2,a=(1n<<BigInt(s)*8n-1n)-1n;return r<=a?r:r-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function l5(e,t={}){return Number(Zm(e,t))}const u5=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Qm(e,t={}){return typeof e=="number"||typeof e=="bigint"?SO(e,t):typeof e=="string"?d5(e,t):typeof e=="boolean"?f5(e,t):_O(e,t)}function f5(e,t={}){const n=`0x${Number(e)}`;return typeof t.size=="number"?(Ac(n,{size:t.size}),Sc(n,{size:t.size})):n}function _O(e,t={}){let n="";for(let s=0;s<e.length;s++)n+=u5[e[s]];const r=`0x${n}`;return typeof t.size=="number"?(Ac(r,{size:t.size}),Sc(r,{dir:"right",size:t.size})):r}function SO(e,t={}){const{signed:n,size:r}=t,s=BigInt(e);let a;r?n?a=(1n<<BigInt(r)*8n-1n)-1n:a=2n**(BigInt(r)*8n)-1n:typeof e=="number"&&(a=BigInt(Number.MAX_SAFE_INTEGER));const l=typeof a=="bigint"&&n?-a-1n:0;if(a&&s>a||s<l){const d=typeof e=="bigint"?"n":"";throw new a5({max:a?`${a}${d}`:void 0,min:`${l}${d}`,signed:n,size:r,value:`${e}${d}`})}const u=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?Sc(u,{size:r}):u}const h5=new TextEncoder;function d5(e,t={}){const n=h5.encode(e);return _O(n,t)}const p5=new TextEncoder;function g5(e,t={}){return typeof e=="number"||typeof e=="bigint"?m5(e,t):typeof e=="boolean"?y5(e,t):bu(e)?AO(e,t):RO(e,t)}function y5(e,t={}){const n=new Uint8Array(1);return n[0]=Number(e),typeof t.size=="number"?(Ac(n,{size:t.size}),Sc(n,{size:t.size})):n}const Bi={zero:48,nine:57,A:65,F:70,a:97,f:102};function y_(e){if(e>=Bi.zero&&e<=Bi.nine)return e-Bi.zero;if(e>=Bi.A&&e<=Bi.F)return e-(Bi.A-10);if(e>=Bi.a&&e<=Bi.f)return e-(Bi.a-10)}function AO(e,t={}){let n=e;t.size&&(Ac(n,{size:t.size}),n=Sc(n,{dir:"right",size:t.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const s=r.length/2,a=new Uint8Array(s);for(let l=0,u=0;l<s;l++){const d=y_(r.charCodeAt(u++)),h=y_(r.charCodeAt(u++));if(d===void 0||h===void 0)throw new $o(`Invalid byte sequence ("${r[u-2]}${r[u-1]}" in "${r}").`);a[l]=d*16+h}return a}function m5(e,t){const n=SO(e,t);return AO(n)}function RO(e,t={}){const n=p5.encode(e);return typeof t.size=="number"?(Ac(n,{size:t.size}),Sc(n,{dir:"right",size:t.size})):n}const lh=BigInt(2**32-1),m_=BigInt(32);function b5(e,t=!1){return t?{h:Number(e&lh),l:Number(e>>m_&lh)}:{h:Number(e>>m_&lh)|0,l:Number(e&lh)|0}}function w5(e,t=!1){const n=e.length;let r=new Uint32Array(n),s=new Uint32Array(n);for(let a=0;a<n;a++){const{h:l,l:u}=b5(e[a],t);[r[a],s[a]]=[l,u]}return[r,s]}const v5=(e,t,n)=>e<<n|t>>>32-n,E5=(e,t,n)=>t<<n|e>>>32-n,_5=(e,t,n)=>t<<n-32|e>>>64-n,S5=(e,t,n)=>e<<n-32|t>>>64-n,za=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function A5(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function Qh(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function wu(e,...t){if(!A5(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function tJ(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");Qh(e.outputLen),Qh(e.blockLen)}function b_(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function R5(e,t){wu(e);const n=t.outputLen;if(e.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function O5(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))}function OO(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}function nJ(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function rJ(e,t){return e<<32-t|e>>>t}const x5=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function T5(e){return e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255}function D5(e){for(let t=0;t<e.length;t++)e[t]=T5(e[t]);return e}const w_=x5?e=>e:D5;function I5(e){if(typeof e!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(e))}function xO(e){return typeof e=="string"&&(e=I5(e)),wu(e),e}function iJ(...e){let t=0;for(let r=0;r<e.length;r++){const s=e[r];wu(s),t+=s.length}const n=new Uint8Array(t);for(let r=0,s=0;r<e.length;r++){const a=e[r];n.set(a,s),s+=a.length}return n}class C5{}function N5(e){const t=r=>e().update(xO(r)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function sJ(e=32){if(za&&typeof za.getRandomValues=="function")return za.getRandomValues(new Uint8Array(e));if(za&&typeof za.randomBytes=="function")return Uint8Array.from(za.randomBytes(e));throw new Error("crypto.getRandomValues must be defined")}const U5=BigInt(0),kl=BigInt(1),B5=BigInt(2),$5=BigInt(7),P5=BigInt(256),k5=BigInt(113),TO=[],DO=[],IO=[];for(let e=0,t=kl,n=1,r=0;e<24;e++){[n,r]=[r,(2*n+3*r)%5],TO.push(2*(5*r+n)),DO.push((e+1)*(e+2)/2%64);let s=U5;for(let a=0;a<7;a++)t=(t<<kl^(t>>$5)*k5)%P5,t&B5&&(s^=kl<<(kl<<BigInt(a))-kl);IO.push(s)}const CO=w5(IO,!0),M5=CO[0],L5=CO[1],v_=(e,t,n)=>n>32?_5(e,t,n):v5(e,t,n),E_=(e,t,n)=>n>32?S5(e,t,n):E5(e,t,n);function j5(e,t=24){const n=new Uint32Array(10);for(let r=24-t;r<24;r++){for(let l=0;l<10;l++)n[l]=e[l]^e[l+10]^e[l+20]^e[l+30]^e[l+40];for(let l=0;l<10;l+=2){const u=(l+8)%10,d=(l+2)%10,h=n[d],p=n[d+1],y=v_(h,p,1)^n[u],b=E_(h,p,1)^n[u+1];for(let w=0;w<50;w+=10)e[l+w]^=y,e[l+w+1]^=b}let s=e[2],a=e[3];for(let l=0;l<24;l++){const u=DO[l],d=v_(s,a,u),h=E_(s,a,u),p=TO[l];s=e[p],a=e[p+1],e[p]=d,e[p+1]=h}for(let l=0;l<50;l+=10){for(let u=0;u<10;u++)n[u]=e[l+u];for(let u=0;u<10;u++)e[l+u]^=~n[(u+2)%10]&n[(u+4)%10]}e[0]^=M5[r],e[1]^=L5[r]}OO(n)}class hb extends C5{constructor(t,n,r,s=!1,a=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=t,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=a,Qh(r),!(0<t&&t<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=O5(this.state)}clone(){return this._cloneInto()}keccak(){w_(this.state32),j5(this.state32,this.rounds),w_(this.state32),this.posOut=0,this.pos=0}update(t){b_(this),t=xO(t),wu(t);const{blockLen:n,state:r}=this,s=t.length;for(let a=0;a<s;){const l=Math.min(n-this.pos,s-a);for(let u=0;u<l;u++)r[this.pos++]^=t[a++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:n,pos:r,blockLen:s}=this;t[r]^=n,(n&128)!==0&&r===s-1&&this.keccak(),t[s-1]^=128,this.keccak()}writeInto(t){b_(this,!1),wu(t),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,a=t.length;s<a;){this.posOut>=r&&this.keccak();const l=Math.min(r-this.posOut,a-s);t.set(n.subarray(this.posOut,this.posOut+l),s),this.posOut+=l,s+=l}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return Qh(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(R5(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,OO(this.state)}_cloneInto(t){const{blockLen:n,suffix:r,outputLen:s,rounds:a,enableXOF:l}=this;return t||(t=new hb(n,r,s,l,a)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=a,t.suffix=r,t.outputLen=s,t.enableXOF=l,t.destroyed=this.destroyed,t}}const z5=(e,t,n)=>N5(()=>new hb(t,e,n)),q5=z5(1,136,256/8);function NO(e,t){const n=t||"hex",r=q5(bu(e,{strict:!1})?g5(e):e);return n==="bytes"?r:Qm(r)}class H5 extends Map{constructor(t){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=t}get(t){const n=super.get(t);return super.has(t)&&n!==void 0&&(this.delete(t),super.set(t,n)),n}set(t,n){if(super.set(t,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}}const Hy=new H5(8192);function F5(e,t){if(Hy.has(`${e}.${t}`))return Hy.get(`${e}.${t}`);const n=e.substring(2).toLowerCase(),r=NO(RO(n),"bytes"),s=n.split("");for(let l=0;l<40;l+=2)r[l>>1]>>4>=8&&s[l]&&(s[l]=s[l].toUpperCase()),(r[l>>1]&15)>=8&&s[l+1]&&(s[l+1]=s[l+1].toUpperCase());const a=`0x${s.join("")}`;return Hy.set(`${e}.${t}`,a),a}function V5(e){const t=NO(`0x${e.substring(4)}`).substring(26);return F5(`0x${t}`)}async function G5({hash:e,signature:t}){const n=bu(e)?e:Qm(e),{secp256k1:r}=await gO(async()=>{const{secp256k1:l}=await import("./secp256k1-CIWnoKps.js");return{secp256k1:l}},[]);return`0x${(()=>{if(typeof t=="object"&&"r"in t&&"s"in t){const{r:h,s:p,v:y,yParity:b}=t,w=Number(b??y),v=__(w);return new r.Signature(Zm(h),Zm(p)).addRecoveryBit(v)}const l=bu(t)?t:Qm(t);if(Xm(l)!==65)throw new Error("invalid signature length");const u=l5(`0x${l.slice(130)}`),d=__(u);return r.Signature.fromCompact(l.substring(2,130)).addRecoveryBit(d)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function __(e){if(e===0||e===1)return e;if(e===27)return 0;if(e===28)return 1;throw new Error("Invalid yParityOrV value")}async function K5({hash:e,signature:t}){return V5(await G5({hash:e,signature:t}))}function Y5(e){if(e.length>=255)throw new TypeError("Alphabet too long");const t=new Uint8Array(256);for(let h=0;h<t.length;h++)t[h]=255;for(let h=0;h<e.length;h++){const p=e.charAt(h),y=p.charCodeAt(0);if(t[y]!==255)throw new TypeError(p+" is ambiguous");t[y]=h}const n=e.length,r=e.charAt(0),s=Math.log(n)/Math.log(256),a=Math.log(256)/Math.log(n);function l(h){if(h instanceof Uint8Array||(ArrayBuffer.isView(h)?h=new Uint8Array(h.buffer,h.byteOffset,h.byteLength):Array.isArray(h)&&(h=Uint8Array.from(h))),!(h instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(h.length===0)return"";let p=0,y=0,b=0;const w=h.length;for(;b!==w&&h[b]===0;)b++,p++;const v=(w-b)*a+1>>>0,E=new Uint8Array(v);for(;b!==w;){let D=h[b],I=0;for(let $=v-1;(D!==0||I<y)&&$!==-1;$--,I++)D+=256*E[$]>>>0,E[$]=D%n>>>0,D=D/n>>>0;if(D!==0)throw new Error("Non-zero carry");y=I,b++}let _=v-y;for(;_!==v&&E[_]===0;)_++;let R=r.repeat(p);for(;_<v;++_)R+=e.charAt(E[_]);return R}function u(h){if(typeof h!="string")throw new TypeError("Expected String");if(h.length===0)return new Uint8Array;let p=0,y=0,b=0;for(;h[p]===r;)y++,p++;const w=(h.length-p)*s+1>>>0,v=new Uint8Array(w);for(;p<h.length;){const D=h.charCodeAt(p);if(D>255)return;let I=t[D];if(I===255)return;let $=0;for(let U=w-1;(I!==0||$<b)&&U!==-1;U--,$++)I+=n*v[U]>>>0,v[U]=I%256>>>0,I=I/256>>>0;if(I!==0)throw new Error("Non-zero carry");b=$,p++}let E=w-b;for(;E!==w&&v[E]===0;)E++;const _=new Uint8Array(y+(w-E));let R=y;for(;E!==w;)_[R++]=v[E++];return _}function d(h){const p=u(h);if(p)return p;throw new Error("Non-base"+n+" character")}return{encode:l,decodeUnsafe:u,decode:d}}var W5="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const Bu=Y5(W5);function X5(e){const t=e.length;let n=0,r=0;for(;r<t;){let s=e.charCodeAt(r++);if((s&4294967168)===0){n++;continue}else if((s&4294965248)===0)n+=2;else{if(s>=55296&&s<=56319&&r<t){const a=e.charCodeAt(r);(a&64512)===56320&&(++r,s=((s&1023)<<10)+(a&1023)+65536)}(s&4294901760)===0?n+=3:n+=4}}return n}function Z5(e,t,n){const r=e.length;let s=n,a=0;for(;a<r;){let l=e.charCodeAt(a++);if((l&4294967168)===0){t[s++]=l;continue}else if((l&4294965248)===0)t[s++]=l>>6&31|192;else{if(l>=55296&&l<=56319&&a<r){const u=e.charCodeAt(a);(u&64512)===56320&&(++a,l=((l&1023)<<10)+(u&1023)+65536)}(l&4294901760)===0?(t[s++]=l>>12&15|224,t[s++]=l>>6&63|128):(t[s++]=l>>18&7|240,t[s++]=l>>12&63|128,t[s++]=l>>6&63|128)}t[s++]=l&63|128}}const Q5=new TextEncoder,J5=50;function ek(e,t,n){Q5.encodeInto(e,t.subarray(n))}function tk(e,t,n){e.length>J5?ek(e,t,n):Z5(e,t,n)}const nk=4096;function UO(e,t,n){let r=t;const s=r+n,a=[];let l="";for(;r<s;){const u=e[r++];if((u&128)===0)a.push(u);else if((u&224)===192){const d=e[r++]&63;a.push((u&31)<<6|d)}else if((u&240)===224){const d=e[r++]&63,h=e[r++]&63;a.push((u&31)<<12|d<<6|h)}else if((u&248)===240){const d=e[r++]&63,h=e[r++]&63,p=e[r++]&63;let y=(u&7)<<18|d<<12|h<<6|p;y>65535&&(y-=65536,a.push(y>>>10&1023|55296),y=56320|y&1023),a.push(y)}else a.push(u);a.length>=nk&&(l+=String.fromCharCode(...a),a.length=0)}return a.length>0&&(l+=String.fromCharCode(...a)),l}const rk=new TextDecoder,ik=200;function sk(e,t,n){const r=e.subarray(t,t+n);return rk.decode(r)}function ok(e,t,n){return n>ik?sk(e,t,n):UO(e,t,n)}class uh{constructor(t,n){this.type=t,this.data=n}}class or extends Error{constructor(t){super(t);const n=Object.create(or.prototype);Object.setPrototypeOf(this,n),Object.defineProperty(this,"name",{configurable:!0,enumerable:!1,value:or.name})}}const Ml=4294967295;function ak(e,t,n){const r=n/4294967296,s=n;e.setUint32(t,r),e.setUint32(t+4,s)}function BO(e,t,n){const r=Math.floor(n/4294967296),s=n;e.setUint32(t,r),e.setUint32(t+4,s)}function $O(e,t){const n=e.getInt32(t),r=e.getUint32(t+4);return n*4294967296+r}function ck(e,t){const n=e.getUint32(t),r=e.getUint32(t+4);return n*4294967296+r}const lk=-1,uk=4294967296-1,fk=17179869184-1;function hk({sec:e,nsec:t}){if(e>=0&&t>=0&&e<=fk)if(t===0&&e<=uk){const n=new Uint8Array(4);return new DataView(n.buffer).setUint32(0,e),n}else{const n=e/4294967296,r=e&4294967295,s=new Uint8Array(8),a=new DataView(s.buffer);return a.setUint32(0,t<<2|n&3),a.setUint32(4,r),s}else{const n=new Uint8Array(12),r=new DataView(n.buffer);return r.setUint32(0,t),BO(r,4,e),n}}function dk(e){const t=e.getTime(),n=Math.floor(t/1e3),r=(t-n*1e3)*1e6,s=Math.floor(r/1e9);return{sec:n+s,nsec:r-s*1e9}}function pk(e){if(e instanceof Date){const t=dk(e);return hk(t)}else return null}function gk(e){const t=new DataView(e.buffer,e.byteOffset,e.byteLength);switch(e.byteLength){case 4:return{sec:t.getUint32(0),nsec:0};case 8:{const n=t.getUint32(0),r=t.getUint32(4),s=(n&3)*4294967296+r,a=n>>>2;return{sec:s,nsec:a}}case 12:{const n=$O(t,4),r=t.getUint32(0);return{sec:n,nsec:r}}default:throw new or(`Unrecognized data size for timestamp (expected 4, 8, or 12): ${e.length}`)}}function yk(e){const t=gk(e);return new Date(t.sec*1e3+t.nsec/1e6)}const mk={type:lk,encode:pk,decode:yk};class Jh{constructor(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(mk)}register({type:t,encode:n,decode:r}){if(t>=0)this.encoders[t]=n,this.decoders[t]=r;else{const s=-1-t;this.builtInEncoders[s]=n,this.builtInDecoders[s]=r}}tryToEncode(t,n){for(let r=0;r<this.builtInEncoders.length;r++){const s=this.builtInEncoders[r];if(s!=null){const a=s(t,n);if(a!=null){const l=-1-r;return new uh(l,a)}}}for(let r=0;r<this.encoders.length;r++){const s=this.encoders[r];if(s!=null){const a=s(t,n);if(a!=null){const l=r;return new uh(l,a)}}}return t instanceof uh?t:null}decode(t,n,r){const s=n<0?this.builtInDecoders[-1-n]:this.decoders[n];return s?s(t,n,r):new uh(n,t)}}Jh.defaultCodec=new Jh;function bk(e){return e instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&e instanceof SharedArrayBuffer}function Jm(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):bk(e)?new Uint8Array(e):Uint8Array.from(e)}const wk=100,vk=2048;let Ek=class PO{constructor(t){this.entered=!1,this.extensionCodec=t?.extensionCodec??Jh.defaultCodec,this.context=t?.context,this.useBigInt64=t?.useBigInt64??!1,this.maxDepth=t?.maxDepth??wk,this.initialBufferSize=t?.initialBufferSize??vk,this.sortKeys=t?.sortKeys??!1,this.forceFloat32=t?.forceFloat32??!1,this.ignoreUndefined=t?.ignoreUndefined??!1,this.forceIntegerToFloat=t?.forceIntegerToFloat??!1,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}clone(){return new PO({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,maxDepth:this.maxDepth,initialBufferSize:this.initialBufferSize,sortKeys:this.sortKeys,forceFloat32:this.forceFloat32,ignoreUndefined:this.ignoreUndefined,forceIntegerToFloat:this.forceIntegerToFloat})}reinitializeState(){this.pos=0}encodeSharedRef(t){if(this.entered)return this.clone().encodeSharedRef(t);try{return this.entered=!0,this.reinitializeState(),this.doEncode(t,1),this.bytes.subarray(0,this.pos)}finally{this.entered=!1}}encode(t){if(this.entered)return this.clone().encode(t);try{return this.entered=!0,this.reinitializeState(),this.doEncode(t,1),this.bytes.slice(0,this.pos)}finally{this.entered=!1}}doEncode(t,n){if(n>this.maxDepth)throw new Error(`Too deep objects in depth ${n}`);t==null?this.encodeNil():typeof t=="boolean"?this.encodeBoolean(t):typeof t=="number"?this.forceIntegerToFloat?this.encodeNumberAsFloat(t):this.encodeNumber(t):typeof t=="string"?this.encodeString(t):this.useBigInt64&&typeof t=="bigint"?this.encodeBigInt64(t):this.encodeObject(t,n)}ensureBufferSizeToWrite(t){const n=this.pos+t;this.view.byteLength<n&&this.resizeBuffer(n*2)}resizeBuffer(t){const n=new ArrayBuffer(t),r=new Uint8Array(n),s=new DataView(n);r.set(this.bytes),this.view=s,this.bytes=r}encodeNil(){this.writeU8(192)}encodeBoolean(t){t===!1?this.writeU8(194):this.writeU8(195)}encodeNumber(t){!this.forceIntegerToFloat&&Number.isSafeInteger(t)?t>=0?t<128?this.writeU8(t):t<256?(this.writeU8(204),this.writeU8(t)):t<65536?(this.writeU8(205),this.writeU16(t)):t<4294967296?(this.writeU8(206),this.writeU32(t)):this.useBigInt64?this.encodeNumberAsFloat(t):(this.writeU8(207),this.writeU64(t)):t>=-32?this.writeU8(224|t+32):t>=-128?(this.writeU8(208),this.writeI8(t)):t>=-32768?(this.writeU8(209),this.writeI16(t)):t>=-2147483648?(this.writeU8(210),this.writeI32(t)):this.useBigInt64?this.encodeNumberAsFloat(t):(this.writeU8(211),this.writeI64(t)):this.encodeNumberAsFloat(t)}encodeNumberAsFloat(t){this.forceFloat32?(this.writeU8(202),this.writeF32(t)):(this.writeU8(203),this.writeF64(t))}encodeBigInt64(t){t>=BigInt(0)?(this.writeU8(207),this.writeBigUint64(t)):(this.writeU8(211),this.writeBigInt64(t))}writeStringHeader(t){if(t<32)this.writeU8(160+t);else if(t<256)this.writeU8(217),this.writeU8(t);else if(t<65536)this.writeU8(218),this.writeU16(t);else if(t<4294967296)this.writeU8(219),this.writeU32(t);else throw new Error(`Too long string: ${t} bytes in UTF-8`)}encodeString(t){const r=X5(t);this.ensureBufferSizeToWrite(5+r),this.writeStringHeader(r),tk(t,this.bytes,this.pos),this.pos+=r}encodeObject(t,n){const r=this.extensionCodec.tryToEncode(t,this.context);if(r!=null)this.encodeExtension(r);else if(Array.isArray(t))this.encodeArray(t,n);else if(ArrayBuffer.isView(t))this.encodeBinary(t);else if(typeof t=="object")this.encodeMap(t,n);else throw new Error(`Unrecognized object: ${Object.prototype.toString.apply(t)}`)}encodeBinary(t){const n=t.byteLength;if(n<256)this.writeU8(196),this.writeU8(n);else if(n<65536)this.writeU8(197),this.writeU16(n);else if(n<4294967296)this.writeU8(198),this.writeU32(n);else throw new Error(`Too large binary: ${n}`);const r=Jm(t);this.writeU8a(r)}encodeArray(t,n){const r=t.length;if(r<16)this.writeU8(144+r);else if(r<65536)this.writeU8(220),this.writeU16(r);else if(r<4294967296)this.writeU8(221),this.writeU32(r);else throw new Error(`Too large array: ${r}`);for(const s of t)this.doEncode(s,n+1)}countWithoutUndefined(t,n){let r=0;for(const s of n)t[s]!==void 0&&r++;return r}encodeMap(t,n){const r=Object.keys(t);this.sortKeys&&r.sort();const s=this.ignoreUndefined?this.countWithoutUndefined(t,r):r.length;if(s<16)this.writeU8(128+s);else if(s<65536)this.writeU8(222),this.writeU16(s);else if(s<4294967296)this.writeU8(223),this.writeU32(s);else throw new Error(`Too large map object: ${s}`);for(const a of r){const l=t[a];this.ignoreUndefined&&l===void 0||(this.encodeString(a),this.doEncode(l,n+1))}}encodeExtension(t){if(typeof t.data=="function"){const r=t.data(this.pos+6),s=r.length;if(s>=4294967296)throw new Error(`Too large extension object: ${s}`);this.writeU8(201),this.writeU32(s),this.writeI8(t.type),this.writeU8a(r);return}const n=t.data.length;if(n===1)this.writeU8(212);else if(n===2)this.writeU8(213);else if(n===4)this.writeU8(214);else if(n===8)this.writeU8(215);else if(n===16)this.writeU8(216);else if(n<256)this.writeU8(199),this.writeU8(n);else if(n<65536)this.writeU8(200),this.writeU16(n);else if(n<4294967296)this.writeU8(201),this.writeU32(n);else throw new Error(`Too large extension object: ${n}`);this.writeI8(t.type),this.writeU8a(t.data)}writeU8(t){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,t),this.pos++}writeU8a(t){const n=t.length;this.ensureBufferSizeToWrite(n),this.bytes.set(t,this.pos),this.pos+=n}writeI8(t){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,t),this.pos++}writeU16(t){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,t),this.pos+=2}writeI16(t){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,t),this.pos+=2}writeU32(t){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,t),this.pos+=4}writeI32(t){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,t),this.pos+=4}writeF32(t){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,t),this.pos+=4}writeF64(t){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,t),this.pos+=8}writeU64(t){this.ensureBufferSizeToWrite(8),ak(this.view,this.pos,t),this.pos+=8}writeI64(t){this.ensureBufferSizeToWrite(8),BO(this.view,this.pos,t),this.pos+=8}writeBigUint64(t){this.ensureBufferSizeToWrite(8),this.view.setBigUint64(this.pos,t),this.pos+=8}writeBigInt64(t){this.ensureBufferSizeToWrite(8),this.view.setBigInt64(this.pos,t),this.pos+=8}};function _k(e,t){return new Ek(t).encodeSharedRef(e)}function Fy(e){return`${e<0?"-":""}0x${Math.abs(e).toString(16).padStart(2,"0")}`}const Sk=16,Ak=16;class Rk{constructor(t=Sk,n=Ak){this.hit=0,this.miss=0,this.maxKeyLength=t,this.maxLengthPerKey=n,this.caches=[];for(let r=0;r<this.maxKeyLength;r++)this.caches.push([])}canBeCached(t){return t>0&&t<=this.maxKeyLength}find(t,n,r){const s=this.caches[r-1];e:for(const a of s){const l=a.bytes;for(let u=0;u<r;u++)if(l[u]!==t[n+u])continue e;return a.str}return null}store(t,n){const r=this.caches[t.length-1],s={bytes:t,str:n};r.length>=this.maxLengthPerKey?r[Math.random()*r.length|0]=s:r.push(s)}decode(t,n,r){const s=this.find(t,n,r);if(s!=null)return this.hit++,s;this.miss++;const a=UO(t,n,r),l=Uint8Array.prototype.slice.call(t,n,n+r);return this.store(l,a),a}}const e0="array",nu="map_key",kO="map_value",Ok=e=>{if(typeof e=="string"||typeof e=="number")return e;throw new or("The type of key must be string or number but "+typeof e)};class xk{constructor(){this.stack=[],this.stackHeadPosition=-1}get length(){return this.stackHeadPosition+1}top(){return this.stack[this.stackHeadPosition]}pushArrayState(t){const n=this.getUninitializedStateFromPool();n.type=e0,n.position=0,n.size=t,n.array=new Array(t)}pushMapState(t){const n=this.getUninitializedStateFromPool();n.type=nu,n.readCount=0,n.size=t,n.map={}}getUninitializedStateFromPool(){if(this.stackHeadPosition++,this.stackHeadPosition===this.stack.length){const t={type:void 0,size:0,array:void 0,position:0,readCount:0,map:void 0,key:null};this.stack.push(t)}return this.stack[this.stackHeadPosition]}release(t){if(this.stack[this.stackHeadPosition]!==t)throw new Error("Invalid stack state. Released state is not on top of the stack.");if(t.type===e0){const r=t;r.size=0,r.array=void 0,r.position=0,r.type=void 0}if(t.type===nu||t.type===kO){const r=t;r.size=0,r.map=void 0,r.readCount=0,r.type=void 0}this.stackHeadPosition--}reset(){this.stack.length=0,this.stackHeadPosition=-1}}const Ll=-1,db=new DataView(new ArrayBuffer(0)),Tk=new Uint8Array(db.buffer);try{db.getInt8(0)}catch(e){if(!(e instanceof RangeError))throw new Error("This module is not supported in the current JavaScript engine because DataView does not throw RangeError on out-of-bounds access")}const S_=new RangeError("Insufficient data"),Dk=new Rk;let Ik=class MO{constructor(t){this.totalPos=0,this.pos=0,this.view=db,this.bytes=Tk,this.headByte=Ll,this.stack=new xk,this.entered=!1,this.extensionCodec=t?.extensionCodec??Jh.defaultCodec,this.context=t?.context,this.useBigInt64=t?.useBigInt64??!1,this.rawStrings=t?.rawStrings??!1,this.maxStrLength=t?.maxStrLength??Ml,this.maxBinLength=t?.maxBinLength??Ml,this.maxArrayLength=t?.maxArrayLength??Ml,this.maxMapLength=t?.maxMapLength??Ml,this.maxExtLength=t?.maxExtLength??Ml,this.keyDecoder=t?.keyDecoder!==void 0?t.keyDecoder:Dk,this.mapKeyConverter=t?.mapKeyConverter??Ok}clone(){return new MO({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,rawStrings:this.rawStrings,maxStrLength:this.maxStrLength,maxBinLength:this.maxBinLength,maxArrayLength:this.maxArrayLength,maxMapLength:this.maxMapLength,maxExtLength:this.maxExtLength,keyDecoder:this.keyDecoder})}reinitializeState(){this.totalPos=0,this.headByte=Ll,this.stack.reset()}setBuffer(t){const n=Jm(t);this.bytes=n,this.view=new DataView(n.buffer,n.byteOffset,n.byteLength),this.pos=0}appendBuffer(t){if(this.headByte===Ll&&!this.hasRemaining(1))this.setBuffer(t);else{const n=this.bytes.subarray(this.pos),r=Jm(t),s=new Uint8Array(n.length+r.length);s.set(n),s.set(r,n.length),this.setBuffer(s)}}hasRemaining(t){return this.view.byteLength-this.pos>=t}createExtraByteError(t){const{view:n,pos:r}=this;return new RangeError(`Extra ${n.byteLength-r} of ${n.byteLength} byte(s) found at buffer[${t}]`)}decode(t){if(this.entered)return this.clone().decode(t);try{this.entered=!0,this.reinitializeState(),this.setBuffer(t);const n=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return n}finally{this.entered=!1}}*decodeMulti(t){if(this.entered){yield*this.clone().decodeMulti(t);return}try{for(this.entered=!0,this.reinitializeState(),this.setBuffer(t);this.hasRemaining(1);)yield this.doDecodeSync()}finally{this.entered=!1}}async decodeAsync(t){if(this.entered)return this.clone().decodeAsync(t);try{this.entered=!0;let n=!1,r;for await(const u of t){if(n)throw this.entered=!1,this.createExtraByteError(this.totalPos);this.appendBuffer(u);try{r=this.doDecodeSync(),n=!0}catch(d){if(!(d instanceof RangeError))throw d}this.totalPos+=this.pos}if(n){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return r}const{headByte:s,pos:a,totalPos:l}=this;throw new RangeError(`Insufficient data in parsing ${Fy(s)} at ${l} (${a} in the current buffer)`)}finally{this.entered=!1}}decodeArrayStream(t){return this.decodeMultiAsync(t,!0)}decodeStream(t){return this.decodeMultiAsync(t,!1)}async*decodeMultiAsync(t,n){if(this.entered){yield*this.clone().decodeMultiAsync(t,n);return}try{this.entered=!0;let r=n,s=-1;for await(const a of t){if(n&&s===0)throw this.createExtraByteError(this.totalPos);this.appendBuffer(a),r&&(s=this.readArraySize(),r=!1,this.complete());try{for(;yield this.doDecodeSync(),--s!==0;);}catch(l){if(!(l instanceof RangeError))throw l}this.totalPos+=this.pos}}finally{this.entered=!1}}doDecodeSync(){e:for(;;){const t=this.readHeadByte();let n;if(t>=224)n=t-256;else if(t<192)if(t<128)n=t;else if(t<144){const s=t-128;if(s!==0){this.pushMapState(s),this.complete();continue e}else n={}}else if(t<160){const s=t-144;if(s!==0){this.pushArrayState(s),this.complete();continue e}else n=[]}else{const s=t-160;n=this.decodeString(s,0)}else if(t===192)n=null;else if(t===194)n=!1;else if(t===195)n=!0;else if(t===202)n=this.readF32();else if(t===203)n=this.readF64();else if(t===204)n=this.readU8();else if(t===205)n=this.readU16();else if(t===206)n=this.readU32();else if(t===207)this.useBigInt64?n=this.readU64AsBigInt():n=this.readU64();else if(t===208)n=this.readI8();else if(t===209)n=this.readI16();else if(t===210)n=this.readI32();else if(t===211)this.useBigInt64?n=this.readI64AsBigInt():n=this.readI64();else if(t===217){const s=this.lookU8();n=this.decodeString(s,1)}else if(t===218){const s=this.lookU16();n=this.decodeString(s,2)}else if(t===219){const s=this.lookU32();n=this.decodeString(s,4)}else if(t===220){const s=this.readU16();if(s!==0){this.pushArrayState(s),this.complete();continue e}else n=[]}else if(t===221){const s=this.readU32();if(s!==0){this.pushArrayState(s),this.complete();continue e}else n=[]}else if(t===222){const s=this.readU16();if(s!==0){this.pushMapState(s),this.complete();continue e}else n={}}else if(t===223){const s=this.readU32();if(s!==0){this.pushMapState(s),this.complete();continue e}else n={}}else if(t===196){const s=this.lookU8();n=this.decodeBinary(s,1)}else if(t===197){const s=this.lookU16();n=this.decodeBinary(s,2)}else if(t===198){const s=this.lookU32();n=this.decodeBinary(s,4)}else if(t===212)n=this.decodeExtension(1,0);else if(t===213)n=this.decodeExtension(2,0);else if(t===214)n=this.decodeExtension(4,0);else if(t===215)n=this.decodeExtension(8,0);else if(t===216)n=this.decodeExtension(16,0);else if(t===199){const s=this.lookU8();n=this.decodeExtension(s,1)}else if(t===200){const s=this.lookU16();n=this.decodeExtension(s,2)}else if(t===201){const s=this.lookU32();n=this.decodeExtension(s,4)}else throw new or(`Unrecognized type byte: ${Fy(t)}`);this.complete();const r=this.stack;for(;r.length>0;){const s=r.top();if(s.type===e0)if(s.array[s.position]=n,s.position++,s.position===s.size)n=s.array,r.release(s);else continue e;else if(s.type===nu){if(n==="__proto__")throw new or("The key __proto__ is not allowed");s.key=this.mapKeyConverter(n),s.type=kO;continue e}else if(s.map[s.key]=n,s.readCount++,s.readCount===s.size)n=s.map,r.release(s);else{s.key=null,s.type=nu;continue e}}return n}}readHeadByte(){return this.headByte===Ll&&(this.headByte=this.readU8()),this.headByte}complete(){this.headByte=Ll}readArraySize(){const t=this.readHeadByte();switch(t){case 220:return this.readU16();case 221:return this.readU32();default:{if(t<160)return t-144;throw new or(`Unrecognized array type byte: ${Fy(t)}`)}}}pushMapState(t){if(t>this.maxMapLength)throw new or(`Max length exceeded: map length (${t}) > maxMapLengthLength (${this.maxMapLength})`);this.stack.pushMapState(t)}pushArrayState(t){if(t>this.maxArrayLength)throw new or(`Max length exceeded: array length (${t}) > maxArrayLength (${this.maxArrayLength})`);this.stack.pushArrayState(t)}decodeString(t,n){return!this.rawStrings||this.stateIsMapKey()?this.decodeUtf8String(t,n):this.decodeBinary(t,n)}decodeUtf8String(t,n){if(t>this.maxStrLength)throw new or(`Max length exceeded: UTF-8 byte length (${t}) > maxStrLength (${this.maxStrLength})`);if(this.bytes.byteLength<this.pos+n+t)throw S_;const r=this.pos+n;let s;return this.stateIsMapKey()&&this.keyDecoder?.canBeCached(t)?s=this.keyDecoder.decode(this.bytes,r,t):s=ok(this.bytes,r,t),this.pos+=n+t,s}stateIsMapKey(){return this.stack.length>0?this.stack.top().type===nu:!1}decodeBinary(t,n){if(t>this.maxBinLength)throw new or(`Max length exceeded: bin length (${t}) > maxBinLength (${this.maxBinLength})`);if(!this.hasRemaining(t+n))throw S_;const r=this.pos+n,s=this.bytes.subarray(r,r+t);return this.pos+=n+t,s}decodeExtension(t,n){if(t>this.maxExtLength)throw new or(`Max length exceeded: ext length (${t}) > maxExtLength (${this.maxExtLength})`);const r=this.view.getInt8(this.pos+n),s=this.decodeBinary(t,n+1);return this.extensionCodec.decode(s,r,this.context)}lookU8(){return this.view.getUint8(this.pos)}lookU16(){return this.view.getUint16(this.pos)}lookU32(){return this.view.getUint32(this.pos)}readU8(){const t=this.view.getUint8(this.pos);return this.pos++,t}readI8(){const t=this.view.getInt8(this.pos);return this.pos++,t}readU16(){const t=this.view.getUint16(this.pos);return this.pos+=2,t}readI16(){const t=this.view.getInt16(this.pos);return this.pos+=2,t}readU32(){const t=this.view.getUint32(this.pos);return this.pos+=4,t}readI32(){const t=this.view.getInt32(this.pos);return this.pos+=4,t}readU64(){const t=ck(this.view,this.pos);return this.pos+=8,t}readI64(){const t=$O(this.view,this.pos);return this.pos+=8,t}readU64AsBigInt(){const t=this.view.getBigUint64(this.pos);return this.pos+=8,t}readI64AsBigInt(){const t=this.view.getBigInt64(this.pos);return this.pos+=8,t}readF32(){const t=this.view.getFloat32(this.pos);return this.pos+=4,t}readF64(){const t=this.view.getFloat64(this.pos);return this.pos+=8,t}};function Ck(e,t){return new Ik(t).decode(e)}/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Nk(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function LO(e,t){return Array.isArray(t)?t.length===0?!0:e?t.every(n=>typeof n=="string"):t.every(n=>Number.isSafeInteger(n)):!1}function ed(e,t){if(typeof t!="string")throw new Error(`${e}: string expected`);return!0}function pb(e){if(!Number.isSafeInteger(e))throw new Error(`invalid integer: ${e}`)}function t0(e){if(!Array.isArray(e))throw new Error("array expected")}function td(e,t){if(!LO(!0,t))throw new Error(`${e}: array of strings expected`)}function Uk(e,t){if(!LO(!1,t))throw new Error(`${e}: array of numbers expected`)}function Bk(...e){const t=a=>a,n=(a,l)=>u=>a(l(u)),r=e.map(a=>a.encode).reduceRight(n,t),s=e.map(a=>a.decode).reduce(n,t);return{encode:r,decode:s}}function $k(e){const t=typeof e=="string"?e.split(""):e,n=t.length;td("alphabet",t);const r=new Map(t.map((s,a)=>[s,a]));return{encode:s=>(t0(s),s.map(a=>{if(!Number.isSafeInteger(a)||a<0||a>=n)throw new Error(`alphabet.encode: digit index outside alphabet "${a}". Allowed: ${e}`);return t[a]})),decode:s=>(t0(s),s.map(a=>{ed("alphabet.decode",a);const l=r.get(a);if(l===void 0)throw new Error(`Unknown letter: "${a}". Allowed: ${e}`);return l}))}}function Pk(e=""){return ed("join",e),{encode:t=>(td("join.decode",t),t.join(e)),decode:t=>(ed("join.decode",t),t.split(e))}}function kk(e,t="="){return pb(e),ed("padding",t),{encode(n){for(td("padding.encode",n);n.length*e%8;)n.push(t);return n},decode(n){td("padding.decode",n);let r=n.length;if(r*e%8)throw new Error("padding: invalid, string should have whole number of bytes");for(;r>0&&n[r-1]===t;r--)if((r-1)*e%8===0)throw new Error("padding: invalid, string has too much padding");return n.slice(0,r)}}}const jO=(e,t)=>t===0?e:jO(t,e%t),nd=(e,t)=>e+(t-jO(e,t)),Vy=(()=>{let e=[];for(let t=0;t<40;t++)e.push(2**t);return e})();function A_(e,t,n,r){if(t0(e),t<=0||t>32)throw new Error(`convertRadix2: wrong from=${t}`);if(n<=0||n>32)throw new Error(`convertRadix2: wrong to=${n}`);if(nd(t,n)>32)throw new Error(`convertRadix2: carry overflow from=${t} to=${n} carryBits=${nd(t,n)}`);let s=0,a=0;const l=Vy[t],u=Vy[n]-1,d=[];for(const h of e){if(pb(h),h>=l)throw new Error(`convertRadix2: invalid data word=${h} from=${t}`);if(s=s<<t|h,a+t>32)throw new Error(`convertRadix2: carry overflow pos=${a} from=${t}`);for(a+=t;a>=n;a-=n)d.push((s>>a-n&u)>>>0);const p=Vy[a];if(p===void 0)throw new Error("invalid carry");s&=p-1}if(s=s<<n-a&u,!r&&a>=t)throw new Error("Excess padding");if(!r&&s>0)throw new Error(`Non-zero padding: ${s}`);return r&&a>0&&d.push(s>>>0),d}function Mk(e,t=!1){if(pb(e),e<=0||e>32)throw new Error("radix2: bits should be in (0..32]");if(nd(8,e)>32||nd(e,8)>32)throw new Error("radix2: carry overflow");return{encode:n=>{if(!Nk(n))throw new Error("radix2.encode input should be Uint8Array");return A_(Array.from(n),8,e,!t)},decode:n=>(Uk("radix2.decode",n),Uint8Array.from(A_(n,e,8,t)))}}const Lk=Bk(Mk(5),$k("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),kk(5),Pk("")),jk=e=>JSON.stringify(e,(t,n)=>typeof n=="bigint"?n.toString()+"n":n),zk=e=>{const t=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,n=e.replace(t,'$1"$2n"$3');return JSON.parse(n,(r,s)=>typeof s=="string"&&s.match(/^\d+n$/)?BigInt(s.substring(0,s.length-1)):s)};function Po(e){if(typeof e!="string")throw new Error(`Cannot safe json parse value of type ${typeof e}`);try{return zk(e)}catch{return e}}function Zi(e){return typeof e=="string"?e:jk(e)||""}function qk(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function zO(e,...t){if(!qk(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function R_(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function Hk(e,t){zO(e);const n=t.outputLen;if(e.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const qa=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Gy=e=>new DataView(e.buffer,e.byteOffset,e.byteLength);function Fk(e){if(typeof e!="string")throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array(new TextEncoder().encode(e))}function qO(e){return typeof e=="string"&&(e=Fk(e)),zO(e),e}let Vk=class{clone(){return this._cloneInto()}};function Gk(e){const t=r=>e().update(qO(r)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function HO(e=32){if(qa&&typeof qa.getRandomValues=="function")return qa.getRandomValues(new Uint8Array(e));if(qa&&typeof qa.randomBytes=="function")return qa.randomBytes(e);throw new Error("crypto.getRandomValues must be defined")}function Kk(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const s=BigInt(32),a=BigInt(4294967295),l=Number(n>>s&a),u=Number(n&a),d=r?4:0,h=r?0:4;e.setUint32(t+d,l,r),e.setUint32(t+h,u,r)}let Yk=class extends Vk{constructor(t,n,r,s){super(),this.blockLen=t,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=Gy(this.buffer)}update(t){R_(this);const{view:n,buffer:r,blockLen:s}=this;t=qO(t);const a=t.length;for(let l=0;l<a;){const u=Math.min(s-this.pos,a-l);if(u===s){const d=Gy(t);for(;s<=a-l;l+=s)this.process(d,l);continue}r.set(t.subarray(l,l+u),this.pos),this.pos+=u,l+=u,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){R_(this),Hk(t,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:a}=this;let{pos:l}=this;n[l++]=128,this.buffer.subarray(l).fill(0),this.padOffset>s-l&&(this.process(r,0),l=0);for(let y=l;y<s;y++)n[y]=0;Kk(r,s-8,BigInt(this.length*8),a),this.process(r,0);const u=Gy(t),d=this.outputLen;if(d%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const h=d/4,p=this.get();if(h>p.length)throw new Error("_sha2: outputLen bigger than state");for(let y=0;y<h;y++)u.setUint32(4*y,p[y],a)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:a,destroyed:l,pos:u}=this;return t.length=s,t.pos=u,t.finished=a,t.destroyed=l,s%n&&t.buffer.set(r),t}};const fh=BigInt(2**32-1),n0=BigInt(32);function FO(e,t=!1){return t?{h:Number(e&fh),l:Number(e>>n0&fh)}:{h:Number(e>>n0&fh)|0,l:Number(e&fh)|0}}function Wk(e,t=!1){let n=new Uint32Array(e.length),r=new Uint32Array(e.length);for(let s=0;s<e.length;s++){const{h:a,l}=FO(e[s],t);[n[s],r[s]]=[a,l]}return[n,r]}const Xk=(e,t)=>BigInt(e>>>0)<<n0|BigInt(t>>>0),Zk=(e,t,n)=>e>>>n,Qk=(e,t,n)=>e<<32-n|t>>>n,Jk=(e,t,n)=>e>>>n|t<<32-n,eM=(e,t,n)=>e<<32-n|t>>>n,tM=(e,t,n)=>e<<64-n|t>>>n-32,nM=(e,t,n)=>e>>>n-32|t<<64-n,rM=(e,t)=>t,iM=(e,t)=>e,sM=(e,t,n)=>e<<n|t>>>32-n,oM=(e,t,n)=>t<<n|e>>>32-n,aM=(e,t,n)=>t<<n-32|e>>>64-n,cM=(e,t,n)=>e<<n-32|t>>>64-n;function lM(e,t,n,r){const s=(t>>>0)+(r>>>0);return{h:e+n+(s/2**32|0)|0,l:s|0}}const uM=(e,t,n)=>(e>>>0)+(t>>>0)+(n>>>0),fM=(e,t,n,r)=>t+n+r+(e/2**32|0)|0,hM=(e,t,n,r)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0),dM=(e,t,n,r,s)=>t+n+r+s+(e/2**32|0)|0,pM=(e,t,n,r,s)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0)+(s>>>0),gM=(e,t,n,r,s,a)=>t+n+r+s+a+(e/2**32|0)|0,Ue={fromBig:FO,split:Wk,toBig:Xk,shrSH:Zk,shrSL:Qk,rotrSH:Jk,rotrSL:eM,rotrBH:tM,rotrBL:nM,rotr32H:rM,rotr32L:iM,rotlSH:sM,rotlSL:oM,rotlBH:aM,rotlBL:cM,add:lM,add3L:uM,add3H:fM,add4L:hM,add4H:dM,add5H:gM,add5L:pM},[yM,mM]=Ue.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),Ss=new Uint32Array(80),As=new Uint32Array(80);let bM=class extends Yk{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:t,Al:n,Bh:r,Bl:s,Ch:a,Cl:l,Dh:u,Dl:d,Eh:h,El:p,Fh:y,Fl:b,Gh:w,Gl:v,Hh:E,Hl:_}=this;return[t,n,r,s,a,l,u,d,h,p,y,b,w,v,E,_]}set(t,n,r,s,a,l,u,d,h,p,y,b,w,v,E,_){this.Ah=t|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=a|0,this.Cl=l|0,this.Dh=u|0,this.Dl=d|0,this.Eh=h|0,this.El=p|0,this.Fh=y|0,this.Fl=b|0,this.Gh=w|0,this.Gl=v|0,this.Hh=E|0,this.Hl=_|0}process(t,n){for(let I=0;I<16;I++,n+=4)Ss[I]=t.getUint32(n),As[I]=t.getUint32(n+=4);for(let I=16;I<80;I++){const $=Ss[I-15]|0,U=As[I-15]|0,k=Ue.rotrSH($,U,1)^Ue.rotrSH($,U,8)^Ue.shrSH($,U,7),q=Ue.rotrSL($,U,1)^Ue.rotrSL($,U,8)^Ue.shrSL($,U,7),H=Ss[I-2]|0,P=As[I-2]|0,V=Ue.rotrSH(H,P,19)^Ue.rotrBH(H,P,61)^Ue.shrSH(H,P,6),G=Ue.rotrSL(H,P,19)^Ue.rotrBL(H,P,61)^Ue.shrSL(H,P,6),K=Ue.add4L(q,G,As[I-7],As[I-16]),ce=Ue.add4H(K,k,V,Ss[I-7],Ss[I-16]);Ss[I]=ce|0,As[I]=K|0}let{Ah:r,Al:s,Bh:a,Bl:l,Ch:u,Cl:d,Dh:h,Dl:p,Eh:y,El:b,Fh:w,Fl:v,Gh:E,Gl:_,Hh:R,Hl:D}=this;for(let I=0;I<80;I++){const $=Ue.rotrSH(y,b,14)^Ue.rotrSH(y,b,18)^Ue.rotrBH(y,b,41),U=Ue.rotrSL(y,b,14)^Ue.rotrSL(y,b,18)^Ue.rotrBL(y,b,41),k=y&w^~y&E,q=b&v^~b&_,H=Ue.add5L(D,U,q,mM[I],As[I]),P=Ue.add5H(H,R,$,k,yM[I],Ss[I]),V=H|0,G=Ue.rotrSH(r,s,28)^Ue.rotrBH(r,s,34)^Ue.rotrBH(r,s,39),K=Ue.rotrSL(r,s,28)^Ue.rotrBL(r,s,34)^Ue.rotrBL(r,s,39),ce=r&a^r&u^a&u,ne=s&l^s&d^l&d;R=E|0,D=_|0,E=w|0,_=v|0,w=y|0,v=b|0,{h:y,l:b}=Ue.add(h|0,p|0,P|0,V|0),h=u|0,p=d|0,u=a|0,d=l|0,a=r|0,l=s|0;const T=Ue.add3L(V,K,ne);r=Ue.add3H(T,P,G,ce),s=T|0}({h:r,l:s}=Ue.add(this.Ah|0,this.Al|0,r|0,s|0)),{h:a,l}=Ue.add(this.Bh|0,this.Bl|0,a|0,l|0),{h:u,l:d}=Ue.add(this.Ch|0,this.Cl|0,u|0,d|0),{h,l:p}=Ue.add(this.Dh|0,this.Dl|0,h|0,p|0),{h:y,l:b}=Ue.add(this.Eh|0,this.El|0,y|0,b|0),{h:w,l:v}=Ue.add(this.Fh|0,this.Fl|0,w|0,v|0),{h:E,l:_}=Ue.add(this.Gh|0,this.Gl|0,E|0,_|0),{h:R,l:D}=Ue.add(this.Hh|0,this.Hl|0,R|0,D|0),this.set(r,s,a,l,u,d,h,p,y,b,w,v,E,_,R,D)}roundClean(){Ss.fill(0),As.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};const wM=Gk(()=>new bM);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const gb=BigInt(0),VO=BigInt(1),vM=BigInt(2);function yb(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function mb(e){if(!yb(e))throw new Error("Uint8Array expected")}function Ky(e,t){if(typeof t!="boolean")throw new Error(e+" boolean expected, got "+t)}const EM=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function bb(e){mb(e);let t="";for(let n=0;n<e.length;n++)t+=EM[e[n]];return t}function GO(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return e===""?gb:BigInt("0x"+e)}const $i={_0:48,_9:57,A:65,F:70,a:97,f:102};function O_(e){if(e>=$i._0&&e<=$i._9)return e-$i._0;if(e>=$i.A&&e<=$i.F)return e-($i.A-10);if(e>=$i.a&&e<=$i.f)return e-($i.a-10)}function KO(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);const t=e.length,n=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(n);for(let s=0,a=0;s<n;s++,a+=2){const l=O_(e.charCodeAt(a)),u=O_(e.charCodeAt(a+1));if(l===void 0||u===void 0){const d=e[a]+e[a+1];throw new Error('hex string expected, got non-hex character "'+d+'" at index '+a)}r[s]=l*16+u}return r}function _M(e){return GO(bb(e))}function Mh(e){return mb(e),GO(bb(Uint8Array.from(e).reverse()))}function YO(e,t){return KO(e.toString(16).padStart(t*2,"0"))}function r0(e,t){return YO(e,t).reverse()}function Pi(e,t,n){let r;if(typeof t=="string")try{r=KO(t)}catch(a){throw new Error(e+" must be hex string or Uint8Array, cause: "+a)}else if(yb(t))r=Uint8Array.from(t);else throw new Error(e+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(e+" of length "+n+" expected, got "+s);return r}function x_(...e){let t=0;for(let r=0;r<e.length;r++){const s=e[r];mb(s),t+=s.length}const n=new Uint8Array(t);for(let r=0,s=0;r<e.length;r++){const a=e[r];n.set(a,s),s+=a.length}return n}const Yy=e=>typeof e=="bigint"&&gb<=e;function SM(e,t,n){return Yy(e)&&Yy(t)&&Yy(n)&&t<=e&&e<n}function jl(e,t,n,r){if(!SM(t,n,r))throw new Error("expected valid "+e+": "+n+" <= n < "+r+", got "+t)}function AM(e){let t;for(t=0;e>gb;e>>=VO,t+=1);return t}const RM=e=>(vM<<BigInt(e-1))-VO,OM={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",stringOrUint8Array:e=>typeof e=="string"||yb(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function wb(e,t,n={}){const r=(s,a,l)=>{const u=OM[a];if(typeof u!="function")throw new Error("invalid validator function");const d=e[s];if(!(l&&d===void 0)&&!u(d,e))throw new Error("param "+String(s)+" is invalid. Expected "+a+", got "+d)};for(const[s,a]of Object.entries(t))r(s,a,!1);for(const[s,a]of Object.entries(n))r(s,a,!0);return e}function T_(e){const t=new WeakMap;return(n,...r)=>{const s=t.get(n);if(s!==void 0)return s;const a=e(n,...r);return t.set(n,a),a}}const Jt=BigInt(0),It=BigInt(1),_o=BigInt(2),xM=BigInt(3),i0=BigInt(4),D_=BigInt(5),I_=BigInt(8);function Ht(e,t){const n=e%t;return n>=Jt?n:t+n}function TM(e,t,n){if(t<Jt)throw new Error("invalid exponent, negatives unsupported");if(n<=Jt)throw new Error("invalid modulus");if(n===It)return Jt;let r=It;for(;t>Jt;)t&It&&(r=r*e%n),e=e*e%n,t>>=It;return r}function Qr(e,t,n){let r=e;for(;t-- >Jt;)r*=r,r%=n;return r}function C_(e,t){if(e===Jt)throw new Error("invert: expected non-zero number");if(t<=Jt)throw new Error("invert: expected positive modulus, got "+t);let n=Ht(e,t),r=t,s=Jt,a=It;for(;n!==Jt;){const l=r/n,u=r%n,d=s-a*l;r=n,n=u,s=a,a=d}if(r!==It)throw new Error("invert: does not exist");return Ht(s,t)}function DM(e){const t=(e-It)/_o;let n,r,s;for(n=e-It,r=0;n%_o===Jt;n/=_o,r++);for(s=_o;s<e&&TM(s,t,e)!==e-It;s++)if(s>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const l=(e+It)/i0;return function(u,d){const h=u.pow(d,l);if(!u.eql(u.sqr(h),d))throw new Error("Cannot find square root");return h}}const a=(n+It)/_o;return function(l,u){if(l.pow(u,t)===l.neg(l.ONE))throw new Error("Cannot find square root");let d=r,h=l.pow(l.mul(l.ONE,s),n),p=l.pow(u,a),y=l.pow(u,n);for(;!l.eql(y,l.ONE);){if(l.eql(y,l.ZERO))return l.ZERO;let b=1;for(let v=l.sqr(y);b<d&&!l.eql(v,l.ONE);b++)v=l.sqr(v);const w=l.pow(h,It<<BigInt(d-b-1));h=l.sqr(w),p=l.mul(p,w),y=l.mul(y,h),d=b}return p}}function IM(e){if(e%i0===xM){const t=(e+It)/i0;return function(n,r){const s=n.pow(r,t);if(!n.eql(n.sqr(s),r))throw new Error("Cannot find square root");return s}}if(e%I_===D_){const t=(e-D_)/I_;return function(n,r){const s=n.mul(r,_o),a=n.pow(s,t),l=n.mul(r,a),u=n.mul(n.mul(l,_o),a),d=n.mul(l,n.sub(u,n.ONE));if(!n.eql(n.sqr(d),r))throw new Error("Cannot find square root");return d}}return DM(e)}const CM=(e,t)=>(Ht(e,t)&It)===It,NM=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function UM(e){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=NM.reduce((r,s)=>(r[s]="function",r),t);return wb(e,n)}function BM(e,t,n){if(n<Jt)throw new Error("invalid exponent, negatives unsupported");if(n===Jt)return e.ONE;if(n===It)return t;let r=e.ONE,s=t;for(;n>Jt;)n&It&&(r=e.mul(r,s)),s=e.sqr(s),n>>=It;return r}function $M(e,t){const n=new Array(t.length),r=t.reduce((a,l,u)=>e.is0(l)?a:(n[u]=a,e.mul(a,l)),e.ONE),s=e.inv(r);return t.reduceRight((a,l,u)=>e.is0(l)?a:(n[u]=e.mul(a,n[u]),e.mul(a,l)),s),n}function WO(e,t){const n=t!==void 0?t:e.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function XO(e,t,n=!1,r={}){if(e<=Jt)throw new Error("invalid field: expected ORDER > 0, got "+e);const{nBitLength:s,nByteLength:a}=WO(e,t);if(a>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let l;const u=Object.freeze({ORDER:e,isLE:n,BITS:s,BYTES:a,MASK:RM(s),ZERO:Jt,ONE:It,create:d=>Ht(d,e),isValid:d=>{if(typeof d!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof d);return Jt<=d&&d<e},is0:d=>d===Jt,isOdd:d=>(d&It)===It,neg:d=>Ht(-d,e),eql:(d,h)=>d===h,sqr:d=>Ht(d*d,e),add:(d,h)=>Ht(d+h,e),sub:(d,h)=>Ht(d-h,e),mul:(d,h)=>Ht(d*h,e),pow:(d,h)=>BM(u,d,h),div:(d,h)=>Ht(d*C_(h,e),e),sqrN:d=>d*d,addN:(d,h)=>d+h,subN:(d,h)=>d-h,mulN:(d,h)=>d*h,inv:d=>C_(d,e),sqrt:r.sqrt||(d=>(l||(l=IM(e)),l(u,d))),invertBatch:d=>$M(u,d),cmov:(d,h,p)=>p?h:d,toBytes:d=>n?r0(d,a):YO(d,a),fromBytes:d=>{if(d.length!==a)throw new Error("Field.fromBytes: expected "+a+" bytes, got "+d.length);return n?Mh(d):_M(d)}});return Object.freeze(u)}const N_=BigInt(0),hh=BigInt(1);function Wy(e,t){const n=t.negate();return e?n:t}function ZO(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+e)}function Xy(e,t){ZO(e,t);const n=Math.ceil(t/e)+1,r=2**(e-1);return{windows:n,windowSize:r}}function PM(e,t){if(!Array.isArray(e))throw new Error("array expected");e.forEach((n,r)=>{if(!(n instanceof t))throw new Error("invalid point at index "+r)})}function kM(e,t){if(!Array.isArray(e))throw new Error("array of scalars expected");e.forEach((n,r)=>{if(!t.isValid(n))throw new Error("invalid scalar at index "+r)})}const Zy=new WeakMap,QO=new WeakMap;function Qy(e){return QO.get(e)||1}function MM(e,t){return{constTimeNegate:Wy,hasPrecomputes(n){return Qy(n)!==1},unsafeLadder(n,r,s=e.ZERO){let a=n;for(;r>N_;)r&hh&&(s=s.add(a)),a=a.double(),r>>=hh;return s},precomputeWindow(n,r){const{windows:s,windowSize:a}=Xy(r,t),l=[];let u=n,d=u;for(let h=0;h<s;h++){d=u,l.push(d);for(let p=1;p<a;p++)d=d.add(u),l.push(d);u=d.double()}return l},wNAF(n,r,s){const{windows:a,windowSize:l}=Xy(n,t);let u=e.ZERO,d=e.BASE;const h=BigInt(2**n-1),p=2**n,y=BigInt(n);for(let b=0;b<a;b++){const w=b*l;let v=Number(s&h);s>>=y,v>l&&(v-=p,s+=hh);const E=w,_=w+Math.abs(v)-1,R=b%2!==0,D=v<0;v===0?d=d.add(Wy(R,r[E])):u=u.add(Wy(D,r[_]))}return{p:u,f:d}},wNAFUnsafe(n,r,s,a=e.ZERO){const{windows:l,windowSize:u}=Xy(n,t),d=BigInt(2**n-1),h=2**n,p=BigInt(n);for(let y=0;y<l;y++){const b=y*u;if(s===N_)break;let w=Number(s&d);if(s>>=p,w>u&&(w-=h,s+=hh),w===0)continue;let v=r[b+Math.abs(w)-1];w<0&&(v=v.negate()),a=a.add(v)}return a},getPrecomputes(n,r,s){let a=Zy.get(r);return a||(a=this.precomputeWindow(r,n),n!==1&&Zy.set(r,s(a))),a},wNAFCached(n,r,s){const a=Qy(n);return this.wNAF(a,this.getPrecomputes(a,n,s),r)},wNAFCachedUnsafe(n,r,s,a){const l=Qy(n);return l===1?this.unsafeLadder(n,r,a):this.wNAFUnsafe(l,this.getPrecomputes(l,n,s),r,a)},setWindowSize(n,r){ZO(r,t),QO.set(n,r),Zy.delete(n)}}}function LM(e,t,n,r){if(PM(n,e),kM(r,t),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const s=e.ZERO,a=AM(BigInt(n.length)),l=a>12?a-3:a>4?a-2:a?2:1,u=(1<<l)-1,d=new Array(u+1).fill(s),h=Math.floor((t.BITS-1)/l)*l;let p=s;for(let y=h;y>=0;y-=l){d.fill(s);for(let w=0;w<r.length;w++){const v=r[w],E=Number(v>>BigInt(y)&BigInt(u));d[E]=d[E].add(n[w])}let b=s;for(let w=d.length-1,v=s;w>0;w--)v=v.add(d[w]),b=b.add(v);if(p=p.add(b),y!==0)for(let w=0;w<l;w++)p=p.double()}return p}function jM(e){return UM(e.Fp),wb(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...WO(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}const $r=BigInt(0),$n=BigInt(1),dh=BigInt(2),zM=BigInt(8),qM={zip215:!0};function HM(e){const t=jM(e);return wb(e,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...t})}function FM(e){const t=HM(e),{Fp:n,n:r,prehash:s,hash:a,randomBytes:l,nByteLength:u,h:d}=t,h=dh<<BigInt(u*8)-$n,p=n.create,y=XO(t.n,t.nBitLength),b=t.uvRatio||((T,O)=>{try{return{isValid:!0,value:n.sqrt(T*n.inv(O))}}catch{return{isValid:!1,value:$r}}}),w=t.adjustScalarBytes||(T=>T),v=t.domain||((T,O,M)=>{if(Ky("phflag",M),O.length||M)throw new Error("Contexts/pre-hash are not supported");return T});function E(T,O){jl("coordinate "+T,O,$r,h)}function _(T){if(!(T instanceof I))throw new Error("ExtendedPoint expected")}const R=T_((T,O)=>{const{ex:M,ey:F,ez:Y}=T,C=T.is0();O==null&&(O=C?zM:n.inv(Y));const z=p(M*O),J=p(F*O),se=p(Y*O);if(C)return{x:$r,y:$n};if(se!==$n)throw new Error("invZ was invalid");return{x:z,y:J}}),D=T_(T=>{const{a:O,d:M}=t;if(T.is0())throw new Error("bad point: ZERO");const{ex:F,ey:Y,ez:C,et:z}=T,J=p(F*F),se=p(Y*Y),re=p(C*C),ge=p(re*re),ye=p(J*O),De=p(re*p(ye+se)),_e=p(ge+p(M*p(J*se)));if(De!==_e)throw new Error("bad point: equation left != right (1)");const xe=p(F*Y),nt=p(C*z);if(xe!==nt)throw new Error("bad point: equation left != right (2)");return!0});class I{constructor(O,M,F,Y){this.ex=O,this.ey=M,this.ez=F,this.et=Y,E("x",O),E("y",M),E("z",F),E("t",Y),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(O){if(O instanceof I)throw new Error("extended point not allowed");const{x:M,y:F}=O||{};return E("x",M),E("y",F),new I(M,F,$n,p(M*F))}static normalizeZ(O){const M=n.invertBatch(O.map(F=>F.ez));return O.map((F,Y)=>F.toAffine(M[Y])).map(I.fromAffine)}static msm(O,M){return LM(I,y,O,M)}_setWindowSize(O){k.setWindowSize(this,O)}assertValidity(){D(this)}equals(O){_(O);const{ex:M,ey:F,ez:Y}=this,{ex:C,ey:z,ez:J}=O,se=p(M*J),re=p(C*Y),ge=p(F*J),ye=p(z*Y);return se===re&&ge===ye}is0(){return this.equals(I.ZERO)}negate(){return new I(p(-this.ex),this.ey,this.ez,p(-this.et))}double(){const{a:O}=t,{ex:M,ey:F,ez:Y}=this,C=p(M*M),z=p(F*F),J=p(dh*p(Y*Y)),se=p(O*C),re=M+F,ge=p(p(re*re)-C-z),ye=se+z,De=ye-J,_e=se-z,xe=p(ge*De),nt=p(ye*_e),bt=p(ge*_e),Dn=p(De*ye);return new I(xe,nt,Dn,bt)}add(O){_(O);const{a:M,d:F}=t,{ex:Y,ey:C,ez:z,et:J}=this,{ex:se,ey:re,ez:ge,et:ye}=O;if(M===BigInt(-1)){const Vs=p((C-Y)*(re+se)),Ji=p((C+Y)*(re-se)),Wn=p(Ji-Vs);if(Wn===$r)return this.double();const Sn=p(z*dh*ye),bi=p(J*dh*ge),Zo=bi+Sn,Xn=Ji+Vs,Gr=bi-Sn,N=p(Zo*Wn),S=p(Xn*Gr),A=p(Zo*Gr),L=p(Wn*Xn);return new I(N,S,L,A)}const De=p(Y*se),_e=p(C*re),xe=p(J*F*ye),nt=p(z*ge),bt=p((Y+C)*(se+re)-De-_e),Dn=nt-xe,_n=nt+xe,hn=p(_e-M*De),Fs=p(bt*Dn),Ic=p(_n*hn),dn=p(bt*hn),Cc=p(Dn*_n);return new I(Fs,Ic,Cc,dn)}subtract(O){return this.add(O.negate())}wNAF(O){return k.wNAFCached(this,O,I.normalizeZ)}multiply(O){const M=O;jl("scalar",M,$n,r);const{p:F,f:Y}=this.wNAF(M);return I.normalizeZ([F,Y])[0]}multiplyUnsafe(O,M=I.ZERO){const F=O;return jl("scalar",F,$r,r),F===$r?U:this.is0()||F===$n?this:k.wNAFCachedUnsafe(this,F,I.normalizeZ,M)}isSmallOrder(){return this.multiplyUnsafe(d).is0()}isTorsionFree(){return k.unsafeLadder(this,r).is0()}toAffine(O){return R(this,O)}clearCofactor(){const{h:O}=t;return O===$n?this:this.multiplyUnsafe(O)}static fromHex(O,M=!1){const{d:F,a:Y}=t,C=n.BYTES;O=Pi("pointHex",O,C),Ky("zip215",M);const z=O.slice(),J=O[C-1];z[C-1]=J&-129;const se=Mh(z),re=M?h:n.ORDER;jl("pointHex.y",se,$r,re);const ge=p(se*se),ye=p(ge-$n),De=p(F*ge-Y);let{isValid:_e,value:xe}=b(ye,De);if(!_e)throw new Error("Point.fromHex: invalid y coordinate");const nt=(xe&$n)===$n,bt=(J&128)!==0;if(!M&&xe===$r&&bt)throw new Error("Point.fromHex: x=0 and x_0=1");return bt!==nt&&(xe=p(-xe)),I.fromAffine({x:xe,y:se})}static fromPrivateKey(O){return P(O).point}toRawBytes(){const{x:O,y:M}=this.toAffine(),F=r0(M,n.BYTES);return F[F.length-1]|=O&$n?128:0,F}toHex(){return bb(this.toRawBytes())}}I.BASE=new I(t.Gx,t.Gy,$n,p(t.Gx*t.Gy)),I.ZERO=new I($r,$n,$n,$r);const{BASE:$,ZERO:U}=I,k=MM(I,u*8);function q(T){return Ht(T,r)}function H(T){return q(Mh(T))}function P(T){const O=n.BYTES;T=Pi("private key",T,O);const M=Pi("hashed private key",a(T),2*O),F=w(M.slice(0,O)),Y=M.slice(O,2*O),C=H(F),z=$.multiply(C),J=z.toRawBytes();return{head:F,prefix:Y,scalar:C,point:z,pointBytes:J}}function V(T){return P(T).pointBytes}function G(T=new Uint8Array,...O){const M=x_(...O);return H(a(v(M,Pi("context",T),!!s)))}function K(T,O,M={}){T=Pi("message",T),s&&(T=s(T));const{prefix:F,scalar:Y,pointBytes:C}=P(O),z=G(M.context,F,T),J=$.multiply(z).toRawBytes(),se=G(M.context,J,C,T),re=q(z+se*Y);jl("signature.s",re,$r,r);const ge=x_(J,r0(re,n.BYTES));return Pi("result",ge,n.BYTES*2)}const ce=qM;function ne(T,O,M,F=ce){const{context:Y,zip215:C}=F,z=n.BYTES;T=Pi("signature",T,2*z),O=Pi("message",O),M=Pi("publicKey",M,z),C!==void 0&&Ky("zip215",C),s&&(O=s(O));const J=Mh(T.slice(z,2*z));let se,re,ge;try{se=I.fromHex(M,C),re=I.fromHex(T.slice(0,z),C),ge=$.multiplyUnsafe(J)}catch{return!1}if(!C&&se.isSmallOrder())return!1;const ye=G(Y,re.toRawBytes(),se.toRawBytes(),O);return re.add(se.multiplyUnsafe(ye)).subtract(ge).clearCofactor().equals(I.ZERO)}return $._setWindowSize(8),{CURVE:t,getPublicKey:V,sign:K,verify:ne,ExtendedPoint:I,utils:{getExtendedPublicKey:P,randomPrivateKey:()=>l(n.BYTES),precompute(T=8,O=I.BASE){return O._setWindowSize(T),O.multiply(BigInt(3)),O}}}}BigInt(0),BigInt(1);const vb=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),U_=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const VM=BigInt(1),B_=BigInt(2);BigInt(3);const GM=BigInt(5),KM=BigInt(8);function YM(e){const t=BigInt(10),n=BigInt(20),r=BigInt(40),s=BigInt(80),a=vb,l=e*e%a*e%a,u=Qr(l,B_,a)*l%a,d=Qr(u,VM,a)*e%a,h=Qr(d,GM,a)*d%a,p=Qr(h,t,a)*h%a,y=Qr(p,n,a)*p%a,b=Qr(y,r,a)*y%a,w=Qr(b,s,a)*b%a,v=Qr(w,s,a)*b%a,E=Qr(v,t,a)*h%a;return{pow_p_5_8:Qr(E,B_,a)*e%a,b2:l}}function WM(e){return e[0]&=248,e[31]&=127,e[31]|=64,e}function XM(e,t){const n=vb,r=Ht(t*t*t,n),s=Ht(r*r*t,n),a=YM(e*s).pow_p_5_8;let l=Ht(e*r*a,n);const u=Ht(t*l*l,n),d=l,h=Ht(l*U_,n),p=u===e,y=u===Ht(-e,n),b=u===Ht(-e*U_,n);return p&&(l=d),(y||b)&&(l=h),CM(l,n)&&(l=Ht(-l,n)),{isValid:p||y,value:l}}const ZM=XO(vb,void 0,!0),QM={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:ZM,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:KM,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:wM,randomBytes:HO,adjustScalarBytes:WM,uvRatio:XM},JO=FM(QM),JM="EdDSA",eL="JWT",rd=".",Cd="base64url",ex="utf8",tx="utf8",tL=":",nL="did",rL="key",$_="base58btc",iL="z",sL="K36",oL=32;function Eb(e){return globalThis.Buffer!=null?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}function nx(e=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?Eb(globalThis.Buffer.allocUnsafe(e)):new Uint8Array(e)}function rx(e,t){t||(t=e.reduce((s,a)=>s+a.length,0));const n=nx(t);let r=0;for(const s of e)n.set(s,r),r+=s.length;return Eb(n)}function aL(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<e.length;s++){var a=e.charAt(s),l=a.charCodeAt(0);if(n[l]!==255)throw new TypeError(a+" is ambiguous");n[l]=s}var u=e.length,d=e.charAt(0),h=Math.log(u)/Math.log(256),p=Math.log(256)/Math.log(u);function y(v){if(v instanceof Uint8Array||(ArrayBuffer.isView(v)?v=new Uint8Array(v.buffer,v.byteOffset,v.byteLength):Array.isArray(v)&&(v=Uint8Array.from(v))),!(v instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(v.length===0)return"";for(var E=0,_=0,R=0,D=v.length;R!==D&&v[R]===0;)R++,E++;for(var I=(D-R)*p+1>>>0,$=new Uint8Array(I);R!==D;){for(var U=v[R],k=0,q=I-1;(U!==0||k<_)&&q!==-1;q--,k++)U+=256*$[q]>>>0,$[q]=U%u>>>0,U=U/u>>>0;if(U!==0)throw new Error("Non-zero carry");_=k,R++}for(var H=I-_;H!==I&&$[H]===0;)H++;for(var P=d.repeat(E);H<I;++H)P+=e.charAt($[H]);return P}function b(v){if(typeof v!="string")throw new TypeError("Expected String");if(v.length===0)return new Uint8Array;var E=0;if(v[E]!==" "){for(var _=0,R=0;v[E]===d;)_++,E++;for(var D=(v.length-E)*h+1>>>0,I=new Uint8Array(D);v[E];){var $=n[v.charCodeAt(E)];if($===255)return;for(var U=0,k=D-1;($!==0||U<R)&&k!==-1;k--,U++)$+=u*I[k]>>>0,I[k]=$%256>>>0,$=$/256>>>0;if($!==0)throw new Error("Non-zero carry");R=U,E++}if(v[E]!==" "){for(var q=D-R;q!==D&&I[q]===0;)q++;for(var H=new Uint8Array(_+(D-q)),P=_;q!==D;)H[P++]=I[q++];return H}}}function w(v){var E=b(v);if(E)return E;throw new Error(`Non-${t} character`)}return{encode:y,decodeUnsafe:b,decode:w}}var cL=aL,lL=cL;const ix=e=>{if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")},uL=e=>new TextEncoder().encode(e),fL=e=>new TextDecoder().decode(e);let hL=class{constructor(t,n,r){this.name=t,this.prefix=n,this.baseEncode=r}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}},dL=class{constructor(t,n,r){if(this.name=t,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return sx(this,t)}},pL=class{constructor(t){this.decoders=t}or(t){return sx(this,t)}decode(t){const n=t[0],r=this.decoders[n];if(r)return r.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const sx=(e,t)=>new pL({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});let gL=class{constructor(t,n,r,s){this.name=t,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new hL(t,n,r),this.decoder=new dL(t,n,s)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}};const Nd=({name:e,prefix:t,encode:n,decode:r})=>new gL(e,t,n,r),$u=({prefix:e,name:t,alphabet:n})=>{const{encode:r,decode:s}=lL(n,t);return Nd({prefix:e,name:t,encode:r,decode:a=>ix(s(a))})},yL=(e,t,n,r)=>{const s={};for(let p=0;p<t.length;++p)s[t[p]]=p;let a=e.length;for(;e[a-1]==="=";)--a;const l=new Uint8Array(a*n/8|0);let u=0,d=0,h=0;for(let p=0;p<a;++p){const y=s[e[p]];if(y===void 0)throw new SyntaxError(`Non-${r} character`);d=d<<n|y,u+=n,u>=8&&(u-=8,l[h++]=255&d>>u)}if(u>=n||255&d<<8-u)throw new SyntaxError("Unexpected end of data");return l},mL=(e,t,n)=>{const r=t[t.length-1]==="=",s=(1<<n)-1;let a="",l=0,u=0;for(let d=0;d<e.length;++d)for(u=u<<8|e[d],l+=8;l>n;)l-=n,a+=t[s&u>>l];if(l&&(a+=t[s&u<<n-l]),r)for(;a.length*n&7;)a+="=";return a},ln=({name:e,prefix:t,bitsPerChar:n,alphabet:r})=>Nd({prefix:t,name:e,encode(s){return mL(s,r,n)},decode(s){return yL(s,r,n,e)}}),bL=Nd({prefix:"\0",name:"identity",encode:e=>fL(e),decode:e=>uL(e)});var wL=Object.freeze({__proto__:null,identity:bL});const vL=ln({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var EL=Object.freeze({__proto__:null,base2:vL});const _L=ln({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var SL=Object.freeze({__proto__:null,base8:_L});const AL=$u({prefix:"9",name:"base10",alphabet:"0123456789"});var RL=Object.freeze({__proto__:null,base10:AL});const OL=ln({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),xL=ln({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var TL=Object.freeze({__proto__:null,base16:OL,base16upper:xL});const DL=ln({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),IL=ln({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),CL=ln({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),NL=ln({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),UL=ln({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),BL=ln({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),$L=ln({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),PL=ln({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),kL=ln({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var ML=Object.freeze({__proto__:null,base32:DL,base32upper:IL,base32pad:CL,base32padupper:NL,base32hex:UL,base32hexupper:BL,base32hexpad:$L,base32hexpadupper:PL,base32z:kL});const LL=$u({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),jL=$u({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var zL=Object.freeze({__proto__:null,base36:LL,base36upper:jL});const qL=$u({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),HL=$u({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var FL=Object.freeze({__proto__:null,base58btc:qL,base58flickr:HL});const VL=ln({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),GL=ln({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),KL=ln({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),YL=ln({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var WL=Object.freeze({__proto__:null,base64:VL,base64pad:GL,base64url:KL,base64urlpad:YL});const ox=Array.from(""),XL=ox.reduce((e,t,n)=>(e[n]=t,e),[]),ZL=ox.reduce((e,t,n)=>(e[t.codePointAt(0)]=n,e),[]);function QL(e){return e.reduce((t,n)=>(t+=XL[n],t),"")}function JL(e){const t=[];for(const n of e){const r=ZL[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);t.push(r)}return new Uint8Array(t)}const e7=Nd({prefix:"",name:"base256emoji",encode:QL,decode:JL});var t7=Object.freeze({__proto__:null,base256emoji:e7}),n7=ax,P_=128,r7=-128,i7=Math.pow(2,31);function ax(e,t,n){t=t||[],n=n||0;for(var r=n;e>=i7;)t[n++]=e&255|P_,e/=128;for(;e&r7;)t[n++]=e&255|P_,e>>>=7;return t[n]=e|0,ax.bytes=n-r+1,t}var s7=s0,o7=128,k_=127;function s0(e,r){var n=0,r=r||0,s=0,a=r,l,u=e.length;do{if(a>=u)throw s0.bytes=0,new RangeError("Could not decode varint");l=e[a++],n+=s<28?(l&k_)<<s:(l&k_)*Math.pow(2,s),s+=7}while(l>=o7);return s0.bytes=a-r,n}var a7=Math.pow(2,7),c7=Math.pow(2,14),l7=Math.pow(2,21),u7=Math.pow(2,28),f7=Math.pow(2,35),h7=Math.pow(2,42),d7=Math.pow(2,49),p7=Math.pow(2,56),g7=Math.pow(2,63),y7=function(e){return e<a7?1:e<c7?2:e<l7?3:e<u7?4:e<f7?5:e<h7?6:e<d7?7:e<p7?8:e<g7?9:10},m7={encode:n7,decode:s7,encodingLength:y7},cx=m7;const M_=(e,t,n=0)=>(cx.encode(e,t,n),t),L_=e=>cx.encodingLength(e),o0=(e,t)=>{const n=t.byteLength,r=L_(e),s=r+L_(n),a=new Uint8Array(s+n);return M_(e,a,0),M_(n,a,r),a.set(t,s),new b7(e,n,t,a)};let b7=class{constructor(t,n,r,s){this.code=t,this.size=n,this.digest=r,this.bytes=s}};const lx=({name:e,code:t,encode:n})=>new w7(e,t,n);let w7=class{constructor(t,n,r){this.name=t,this.code=n,this.encode=r}digest(t){if(t instanceof Uint8Array){const n=this.encode(t);return n instanceof Uint8Array?o0(this.code,n):n.then(r=>o0(this.code,r))}else throw Error("Unknown type, must be binary type")}};const ux=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),v7=lx({name:"sha2-256",code:18,encode:ux("SHA-256")}),E7=lx({name:"sha2-512",code:19,encode:ux("SHA-512")});var _7=Object.freeze({__proto__:null,sha256:v7,sha512:E7});const fx=0,S7="identity",hx=ix,A7=e=>o0(fx,hx(e)),R7={code:fx,name:S7,encode:hx,digest:A7};var O7=Object.freeze({__proto__:null,identity:R7});new TextEncoder,new TextDecoder;const j_={...wL,...EL,...SL,...RL,...TL,...ML,...zL,...FL,...WL,...t7};({..._7,...O7});function dx(e,t,n,r){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:n},decoder:{decode:r}}}const z_=dx("utf8","u",e=>"u"+new TextDecoder("utf8").decode(e),e=>new TextEncoder().encode(e.substring(1))),Jy=dx("ascii","a",e=>{let t="a";for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t},e=>{e=e.substring(1);const t=nx(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}),px={utf8:z_,"utf-8":z_,hex:j_.base16,latin1:Jy,ascii:Jy,binary:Jy,...j_};function Ud(e,t="utf8"){const n=px[t];if(!n)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8"):n.encoder.encode(e).substring(1)}function Rc(e,t="utf8"){const n=px[t];if(!n)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Eb(globalThis.Buffer.from(e,"utf-8")):n.decoder.decode(`${n.prefix}${e}`)}function q_(e){return Po(Ud(Rc(e,Cd),ex))}function id(e){return Ud(Rc(Zi(e),ex),Cd)}function gx(e){const t=Rc(sL,$_),n=iL+Ud(rx([t,e]),$_);return[nL,rL,n].join(tL)}function x7(e){return Ud(e,Cd)}function T7(e){return Rc(e,Cd)}function D7(e){return Rc([id(e.header),id(e.payload)].join(rd),tx)}function I7(e){return[id(e.header),id(e.payload),x7(e.signature)].join(rd)}function a0(e){const t=e.split(rd),n=q_(t[0]),r=q_(t[1]),s=T7(t[2]),a=Rc(t.slice(0,2).join(rd),tx);return{header:n,payload:r,signature:s,data:a}}function H_(e=HO(oL)){const t=JO.getPublicKey(e);return{secretKey:rx([e,t]),publicKey:t}}async function C7(e,t,n,r,s=we.fromMiliseconds(Date.now())){const a={alg:JM,typ:eL},l=gx(r.publicKey),u=s+n,d={iss:l,sub:e,aud:t,iat:s,exp:u},h=D7({header:a,payload:d}),p=JO.sign(h,r.secretKey.slice(0,32));return I7({header:a,payload:d,signature:p})}function _b(e){return globalThis.Buffer!=null?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}function yx(e=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?_b(globalThis.Buffer.allocUnsafe(e)):new Uint8Array(e)}function ru(e,t){t||(t=e.reduce((s,a)=>s+a.length,0));const n=yx(t);let r=0;for(const s of e)n.set(s,r),r+=s.length;return _b(n)}function N7(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<e.length;s++){var a=e.charAt(s),l=a.charCodeAt(0);if(n[l]!==255)throw new TypeError(a+" is ambiguous");n[l]=s}var u=e.length,d=e.charAt(0),h=Math.log(u)/Math.log(256),p=Math.log(256)/Math.log(u);function y(v){if(v instanceof Uint8Array||(ArrayBuffer.isView(v)?v=new Uint8Array(v.buffer,v.byteOffset,v.byteLength):Array.isArray(v)&&(v=Uint8Array.from(v))),!(v instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(v.length===0)return"";for(var E=0,_=0,R=0,D=v.length;R!==D&&v[R]===0;)R++,E++;for(var I=(D-R)*p+1>>>0,$=new Uint8Array(I);R!==D;){for(var U=v[R],k=0,q=I-1;(U!==0||k<_)&&q!==-1;q--,k++)U+=256*$[q]>>>0,$[q]=U%u>>>0,U=U/u>>>0;if(U!==0)throw new Error("Non-zero carry");_=k,R++}for(var H=I-_;H!==I&&$[H]===0;)H++;for(var P=d.repeat(E);H<I;++H)P+=e.charAt($[H]);return P}function b(v){if(typeof v!="string")throw new TypeError("Expected String");if(v.length===0)return new Uint8Array;var E=0;if(v[E]!==" "){for(var _=0,R=0;v[E]===d;)_++,E++;for(var D=(v.length-E)*h+1>>>0,I=new Uint8Array(D);v[E];){var $=n[v.charCodeAt(E)];if($===255)return;for(var U=0,k=D-1;($!==0||U<R)&&k!==-1;k--,U++)$+=u*I[k]>>>0,I[k]=$%256>>>0,$=$/256>>>0;if($!==0)throw new Error("Non-zero carry");R=U,E++}if(v[E]!==" "){for(var q=D-R;q!==D&&I[q]===0;)q++;for(var H=new Uint8Array(_+(D-q)),P=_;q!==D;)H[P++]=I[q++];return H}}}function w(v){var E=b(v);if(E)return E;throw new Error(`Non-${t} character`)}return{encode:y,decodeUnsafe:b,decode:w}}var U7=N7,B7=U7;const $7=e=>{if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")},P7=e=>new TextEncoder().encode(e),k7=e=>new TextDecoder().decode(e);class M7{constructor(t,n,r){this.name=t,this.prefix=n,this.baseEncode=r}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}}class L7{constructor(t,n,r){if(this.name=t,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return mx(this,t)}}class j7{constructor(t){this.decoders=t}or(t){return mx(this,t)}decode(t){const n=t[0],r=this.decoders[n];if(r)return r.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const mx=(e,t)=>new j7({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class z7{constructor(t,n,r,s){this.name=t,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new M7(t,n,r),this.decoder=new L7(t,n,s)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}}const Bd=({name:e,prefix:t,encode:n,decode:r})=>new z7(e,t,n,r),Pu=({prefix:e,name:t,alphabet:n})=>{const{encode:r,decode:s}=B7(n,t);return Bd({prefix:e,name:t,encode:r,decode:a=>$7(s(a))})},q7=(e,t,n,r)=>{const s={};for(let p=0;p<t.length;++p)s[t[p]]=p;let a=e.length;for(;e[a-1]==="=";)--a;const l=new Uint8Array(a*n/8|0);let u=0,d=0,h=0;for(let p=0;p<a;++p){const y=s[e[p]];if(y===void 0)throw new SyntaxError(`Non-${r} character`);d=d<<n|y,u+=n,u>=8&&(u-=8,l[h++]=255&d>>u)}if(u>=n||255&d<<8-u)throw new SyntaxError("Unexpected end of data");return l},H7=(e,t,n)=>{const r=t[t.length-1]==="=",s=(1<<n)-1;let a="",l=0,u=0;for(let d=0;d<e.length;++d)for(u=u<<8|e[d],l+=8;l>n;)l-=n,a+=t[s&u>>l];if(l&&(a+=t[s&u<<n-l]),r)for(;a.length*n&7;)a+="=";return a},un=({name:e,prefix:t,bitsPerChar:n,alphabet:r})=>Bd({prefix:t,name:e,encode(s){return H7(s,r,n)},decode(s){return q7(s,r,n,e)}}),F7=Bd({prefix:"\0",name:"identity",encode:e=>k7(e),decode:e=>P7(e)}),V7=Object.freeze(Object.defineProperty({__proto__:null,identity:F7},Symbol.toStringTag,{value:"Module"})),G7=un({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),K7=Object.freeze(Object.defineProperty({__proto__:null,base2:G7},Symbol.toStringTag,{value:"Module"})),Y7=un({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),W7=Object.freeze(Object.defineProperty({__proto__:null,base8:Y7},Symbol.toStringTag,{value:"Module"})),X7=Pu({prefix:"9",name:"base10",alphabet:"0123456789"}),Z7=Object.freeze(Object.defineProperty({__proto__:null,base10:X7},Symbol.toStringTag,{value:"Module"})),Q7=un({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),J7=un({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),e9=Object.freeze(Object.defineProperty({__proto__:null,base16:Q7,base16upper:J7},Symbol.toStringTag,{value:"Module"})),t9=un({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),n9=un({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),r9=un({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),i9=un({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),s9=un({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),o9=un({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),a9=un({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),c9=un({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),l9=un({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),u9=Object.freeze(Object.defineProperty({__proto__:null,base32:t9,base32hex:s9,base32hexpad:a9,base32hexpadupper:c9,base32hexupper:o9,base32pad:r9,base32padupper:i9,base32upper:n9,base32z:l9},Symbol.toStringTag,{value:"Module"})),f9=Pu({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),h9=Pu({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),d9=Object.freeze(Object.defineProperty({__proto__:null,base36:f9,base36upper:h9},Symbol.toStringTag,{value:"Module"})),p9=Pu({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),g9=Pu({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),y9=Object.freeze(Object.defineProperty({__proto__:null,base58btc:p9,base58flickr:g9},Symbol.toStringTag,{value:"Module"})),m9=un({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),b9=un({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),w9=un({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),v9=un({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),E9=Object.freeze(Object.defineProperty({__proto__:null,base64:m9,base64pad:b9,base64url:w9,base64urlpad:v9},Symbol.toStringTag,{value:"Module"})),bx=Array.from(""),_9=bx.reduce((e,t,n)=>(e[n]=t,e),[]),S9=bx.reduce((e,t,n)=>(e[t.codePointAt(0)]=n,e),[]);function A9(e){return e.reduce((t,n)=>(t+=_9[n],t),"")}function R9(e){const t=[];for(const n of e){const r=S9[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);t.push(r)}return new Uint8Array(t)}const O9=Bd({prefix:"",name:"base256emoji",encode:A9,decode:R9}),x9=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:O9},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const F_={...V7,...K7,...W7,...Z7,...e9,...u9,...d9,...y9,...E9,...x9};function wx(e,t,n,r){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:n},decoder:{decode:r}}}const V_=wx("utf8","u",e=>"u"+new TextDecoder("utf8").decode(e),e=>new TextEncoder().encode(e.substring(1))),em=wx("ascii","a",e=>{let t="a";for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t},e=>{e=e.substring(1);const t=yx(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}),vx={utf8:V_,"utf-8":V_,hex:F_.base16,latin1:em,ascii:em,binary:em,...F_};function xr(e,t="utf8"){const n=vx[t];if(!n)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?_b(globalThis.Buffer.from(e,"utf-8")):n.decoder.decode(`${n.prefix}${e}`)}function Fn(e,t="utf8"){const n=vx[t];if(!n)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8"):n.encoder.encode(e).substring(1)}const T9={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}};var tm,G_;function Ex(){if(G_)return tm;G_=1;const e="Input must be an string, Buffer or Uint8Array";function t(l){let u;if(l instanceof Uint8Array)u=l;else if(typeof l=="string")u=new TextEncoder().encode(l);else throw new Error(e);return u}function n(l){return Array.prototype.map.call(l,function(u){return(u<16?"0":"")+u.toString(16)}).join("")}function r(l){return(4294967296+l).toString(16).substring(1)}function s(l,u,d){let h=`
`+l+" = ";for(let p=0;p<u.length;p+=2){if(d===32)h+=r(u[p]).toUpperCase(),h+=" ",h+=r(u[p+1]).toUpperCase();else if(d===64)h+=r(u[p+1]).toUpperCase(),h+=r(u[p]).toUpperCase();else throw new Error("Invalid size "+d);p%6===4?h+=`
`+new Array(l.length+4).join(" "):p<u.length-2&&(h+=" ")}console.log(h)}function a(l,u,d){let h=new Date().getTime();const p=new Uint8Array(u);for(let b=0;b<u;b++)p[b]=b%256;const y=new Date().getTime();console.log("Generated random input in "+(y-h)+"ms"),h=y;for(let b=0;b<d;b++){const w=l(p),v=new Date().getTime(),E=v-h;h=v,console.log("Hashed in "+E+"ms: "+w.substring(0,20)+"..."),console.log(Math.round(u/(1<<20)/(E/1e3)*100)/100+" MB PER SECOND")}}return tm={normalizeInput:t,toHex:n,debugPrint:s,testSpeed:a},tm}var nm,K_;function D9(){if(K_)return nm;K_=1;const e=Ex();function t(R,D,I){const $=R[D]+R[I];let U=R[D+1]+R[I+1];$>=4294967296&&U++,R[D]=$,R[D+1]=U}function n(R,D,I,$){let U=R[D]+I;I<0&&(U+=4294967296);let k=R[D+1]+$;U>=4294967296&&k++,R[D]=U,R[D+1]=k}function r(R,D){return R[D]^R[D+1]<<8^R[D+2]<<16^R[D+3]<<24}function s(R,D,I,$,U,k){const q=h[U],H=h[U+1],P=h[k],V=h[k+1];t(d,R,D),n(d,R,q,H);let G=d[$]^d[R],K=d[$+1]^d[R+1];d[$]=K,d[$+1]=G,t(d,I,$),G=d[D]^d[I],K=d[D+1]^d[I+1],d[D]=G>>>24^K<<8,d[D+1]=K>>>24^G<<8,t(d,R,D),n(d,R,P,V),G=d[$]^d[R],K=d[$+1]^d[R+1],d[$]=G>>>16^K<<16,d[$+1]=K>>>16^G<<16,t(d,I,$),G=d[D]^d[I],K=d[D+1]^d[I+1],d[D]=K>>>31^G<<1,d[D+1]=G>>>31^K<<1}const a=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),l=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3],u=new Uint8Array(l.map(function(R){return R*2})),d=new Uint32Array(32),h=new Uint32Array(32);function p(R,D){let I=0;for(I=0;I<16;I++)d[I]=R.h[I],d[I+16]=a[I];for(d[24]=d[24]^R.t,d[25]=d[25]^R.t/4294967296,D&&(d[28]=~d[28],d[29]=~d[29]),I=0;I<32;I++)h[I]=r(R.b,4*I);for(I=0;I<12;I++)s(0,8,16,24,u[I*16+0],u[I*16+1]),s(2,10,18,26,u[I*16+2],u[I*16+3]),s(4,12,20,28,u[I*16+4],u[I*16+5]),s(6,14,22,30,u[I*16+6],u[I*16+7]),s(0,10,20,30,u[I*16+8],u[I*16+9]),s(2,12,22,24,u[I*16+10],u[I*16+11]),s(4,14,16,26,u[I*16+12],u[I*16+13]),s(6,8,18,28,u[I*16+14],u[I*16+15]);for(I=0;I<16;I++)R.h[I]=R.h[I]^d[I]^d[I+16]}const y=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);function b(R,D,I,$){if(R===0||R>64)throw new Error("Illegal output length, expected 0 < length <= 64");if(D&&D.length>64)throw new Error("Illegal key, expected Uint8Array with 0 < length <= 64");if(I&&I.length!==16)throw new Error("Illegal salt, expected Uint8Array with length is 16");if($&&$.length!==16)throw new Error("Illegal personal, expected Uint8Array with length is 16");const U={b:new Uint8Array(128),h:new Uint32Array(16),t:0,c:0,outlen:R};y.fill(0),y[0]=R,D&&(y[1]=D.length),y[2]=1,y[3]=1,I&&y.set(I,32),$&&y.set($,48);for(let k=0;k<16;k++)U.h[k]=a[k]^r(y,k*4);return D&&(w(U,D),U.c=128),U}function w(R,D){for(let I=0;I<D.length;I++)R.c===128&&(R.t+=R.c,p(R,!1),R.c=0),R.b[R.c++]=D[I]}function v(R){for(R.t+=R.c;R.c<128;)R.b[R.c++]=0;p(R,!0);const D=new Uint8Array(R.outlen);for(let I=0;I<R.outlen;I++)D[I]=R.h[I>>2]>>8*(I&3);return D}function E(R,D,I,$,U){I=I||64,R=e.normalizeInput(R),$&&($=e.normalizeInput($)),U&&(U=e.normalizeInput(U));const k=b(I,D,$,U);return w(k,R),v(k)}function _(R,D,I,$,U){const k=E(R,D,I,$,U);return e.toHex(k)}return nm={blake2b:E,blake2bHex:_,blake2bInit:b,blake2bUpdate:w,blake2bFinal:v},nm}var rm,Y_;function I9(){if(Y_)return rm;Y_=1;const e=Ex();function t(v,E){return v[E]^v[E+1]<<8^v[E+2]<<16^v[E+3]<<24}function n(v,E,_,R,D,I){l[v]=l[v]+l[E]+D,l[R]=r(l[R]^l[v],16),l[_]=l[_]+l[R],l[E]=r(l[E]^l[_],12),l[v]=l[v]+l[E]+I,l[R]=r(l[R]^l[v],8),l[_]=l[_]+l[R],l[E]=r(l[E]^l[_],7)}function r(v,E){return v>>>E^v<<32-E}const s=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),a=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0]),l=new Uint32Array(16),u=new Uint32Array(16);function d(v,E){let _=0;for(_=0;_<8;_++)l[_]=v.h[_],l[_+8]=s[_];for(l[12]^=v.t,l[13]^=v.t/4294967296,E&&(l[14]=~l[14]),_=0;_<16;_++)u[_]=t(v.b,4*_);for(_=0;_<10;_++)n(0,4,8,12,u[a[_*16+0]],u[a[_*16+1]]),n(1,5,9,13,u[a[_*16+2]],u[a[_*16+3]]),n(2,6,10,14,u[a[_*16+4]],u[a[_*16+5]]),n(3,7,11,15,u[a[_*16+6]],u[a[_*16+7]]),n(0,5,10,15,u[a[_*16+8]],u[a[_*16+9]]),n(1,6,11,12,u[a[_*16+10]],u[a[_*16+11]]),n(2,7,8,13,u[a[_*16+12]],u[a[_*16+13]]),n(3,4,9,14,u[a[_*16+14]],u[a[_*16+15]]);for(_=0;_<8;_++)v.h[_]^=l[_]^l[_+8]}function h(v,E){if(!(v>0&&v<=32))throw new Error("Incorrect output length, should be in [1, 32]");const _=E?E.length:0;if(E&&!(_>0&&_<=32))throw new Error("Incorrect key length, should be in [1, 32]");const R={h:new Uint32Array(s),b:new Uint8Array(64),c:0,t:0,outlen:v};return R.h[0]^=16842752^_<<8^v,_>0&&(p(R,E),R.c=64),R}function p(v,E){for(let _=0;_<E.length;_++)v.c===64&&(v.t+=v.c,d(v,!1),v.c=0),v.b[v.c++]=E[_]}function y(v){for(v.t+=v.c;v.c<64;)v.b[v.c++]=0;d(v,!0);const E=new Uint8Array(v.outlen);for(let _=0;_<v.outlen;_++)E[_]=v.h[_>>2]>>8*(_&3)&255;return E}function b(v,E,_){_=_||32,v=e.normalizeInput(v);const R=h(_,E);return p(R,v),y(R)}function w(v,E,_){const R=b(v,E,_);return e.toHex(R)}return rm={blake2s:b,blake2sHex:w,blake2sInit:h,blake2sUpdate:p,blake2sFinal:y},rm}var im,W_;function C9(){if(W_)return im;W_=1;const e=D9(),t=I9();return im={blake2b:e.blake2b,blake2bHex:e.blake2bHex,blake2bInit:e.blake2bInit,blake2bUpdate:e.blake2bUpdate,blake2bFinal:e.blake2bFinal,blake2s:t.blake2s,blake2sHex:t.blake2sHex,blake2sInit:t.blake2sInit,blake2sUpdate:t.blake2sUpdate,blake2sFinal:t.blake2sFinal},im}var N9=C9(),U9={};const B9=":";function dc(e){const[t,n]=e.split(B9);return{namespace:t,reference:n}}function _x(e,t){return e.includes(":")?[e]:t.chains||[]}var $9=Object.defineProperty,P9=Object.defineProperties,k9=Object.getOwnPropertyDescriptors,X_=Object.getOwnPropertySymbols,M9=Object.prototype.hasOwnProperty,L9=Object.prototype.propertyIsEnumerable,c0=(e,t,n)=>t in e?$9(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Z_=(e,t)=>{for(var n in t||(t={}))M9.call(t,n)&&c0(e,n,t[n]);if(X_)for(var n of X_(t))L9.call(t,n)&&c0(e,n,t[n]);return e},j9=(e,t)=>P9(e,k9(t)),Q_=(e,t,n)=>c0(e,typeof t!="symbol"?t+"":t,n);const z9="ReactNative",lr={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},q9="js";function sd(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function Hs(){return!Xi.getDocument()&&!!Xi.getNavigator()&&navigator.product===z9}function H9(){return Hs()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="android"}function F9(){return Hs()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="ios"}function Oc(){return!sd()&&!!Xi.getNavigator()&&!!Xi.getDocument()}function ku(){return Hs()?lr.reactNative:sd()?lr.node:Oc()?lr.browser:lr.unknown}function J_(){var e;try{return Hs()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(e=global.Application)==null?void 0:e.applicationId:void 0}catch{return}}function V9(e,t){const n=new URLSearchParams(e);for(const r of Object.keys(t).sort())if(t.hasOwnProperty(r)){const s=t[r];s!==void 0&&n.set(r,s)}return n.toString()}function G9(e){var t,n;const r=Sx();try{return e!=null&&e.url&&r.url&&new URL(e.url).host!==new URL(r.url).host&&(console.warn(`The configured WalletConnect 'metadata.url':${e.url} differs from the actual page url:${r.url}. This is probably unintended and can lead to issues.`),e.url=r.url),(t=e?.icons)!=null&&t.length&&e.icons.length>0&&(e.icons=e.icons.filter(s=>s!=="")),j9(Z_(Z_({},r),e),{url:e?.url||r.url,name:e?.name||r.name,description:e?.description||r.description,icons:(n=e?.icons)!=null&&n.length&&e.icons.length>0?e.icons:r.icons})}catch(s){return console.warn("Error populating app metadata",s),e||r}}function Sx(){return i5.getWindowMetadata()||{name:"",description:"",url:"",icons:[""]}}function K9(){if(ku()===lr.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:n,Version:r}=global.Platform;return[n,r].join("-")}const e=_P();if(e===null)return"unknown";const t=e.os?e.os.replace(" ","").toLowerCase():"unknown";return e.type==="browser"?[t,e.name,e.version].join("-"):[t,e.version].join("-")}function Y9(){var e;const t=ku();return t===lr.browser?[t,((e=Xi.getLocation())==null?void 0:e.host)||"unknown"].join(":"):t}function Ax(e,t,n){const r=K9(),s=Y9();return[[e,t].join("-"),[q9,n].join("-"),r,s].join("/")}function W9({protocol:e,version:t,relayUrl:n,sdkVersion:r,auth:s,projectId:a,useOnCloseEvent:l,bundleId:u,packageName:d}){const h=n.split("?"),p=Ax(e,t,r),y={auth:s,ua:p,projectId:a,useOnCloseEvent:l,packageName:d||void 0,bundleId:u||void 0},b=V9(h[1]||"",y);return h[0]+"?"+b}function Oo(e,t){return e.filter(n=>t.includes(n)).length===e.length}function l0(e){return Object.fromEntries(e.entries())}function u0(e){return new Map(Object.entries(e))}function Eo(e=we.FIVE_MINUTES,t){const n=we.toMiliseconds(e||we.FIVE_MINUTES);let r,s,a,l;return{resolve:u=>{a&&r&&(clearTimeout(a),r(u),l=Promise.resolve(u))},reject:u=>{a&&s&&(clearTimeout(a),s(u))},done:()=>new Promise((u,d)=>{if(l)return u(l);a=setTimeout(()=>{const h=new Error(t);l=Promise.reject(h),d(h)},n),r=u,s=d})}}function Ps(e,t,n){return new Promise(async(r,s)=>{const a=setTimeout(()=>s(new Error(n)),t);try{const l=await e;r(l)}catch(l){s(l)}clearTimeout(a)})}function Rx(e,t){if(typeof t=="string"&&t.startsWith(`${e}:`))return t;if(e.toLowerCase()==="topic"){if(typeof t!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${t}`}else if(e.toLowerCase()==="id"){if(typeof t!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${t}`}throw new Error(`Unknown expirer target type: ${e}`)}function X9(e){return Rx("topic",e)}function Z9(e){return Rx("id",e)}function Ox(e){const[t,n]=e.split(":"),r={id:void 0,topic:void 0};if(t==="topic"&&typeof n=="string")r.topic=n;else if(t==="id"&&Number.isInteger(Number(n)))r.id=Number(n);else throw new Error(`Invalid target, expected id:number or topic:string, got ${t}:${n}`);return r}function qt(e,t){return we.fromMiliseconds(Date.now()+we.toMiliseconds(e))}function Cs(e){return Date.now()>=we.toMiliseconds(e)}function We(e,t){return`${e}${t?`:${t}`:""}`}function ui(e=[],t=[]){return[...new Set([...e,...t])]}async function Q9({id:e,topic:t,wcDeepLink:n}){var r;try{if(!n)return;const s=typeof n=="string"?JSON.parse(n):n,a=s?.href;if(typeof a!="string")return;const l=J9(a,e,t),u=ku();if(u===lr.browser){if(!((r=Xi.getDocument())!=null&&r.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}ej(l)}else u===lr.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(l)}catch(s){console.error(s)}}function J9(e,t,n){const r=`requestId=${t}&sessionTopic=${n}`;e.endsWith("/")&&(e=e.slice(0,-1));let s=`${e}`;if(e.startsWith("https://t.me")){const a=e.includes("?")?"&startapp=":"?startapp=";s=`${s}${a}${ij(r,!0)}`}else s=`${s}/wc?${r}`;return s}function ej(e){let t="_self";rj()?t="_top":(nj()||e.startsWith("https://")||e.startsWith("http://"))&&(t="_blank"),window.open(e,t,"noreferrer noopener")}async function tj(e,t){let n="";try{if(Oc()&&(n=localStorage.getItem(t),n))return n;n=await e.getItem(t)}catch(r){console.error(r)}return n}function eS(e,t){if(!e.includes(t))return null;const n=e.split(/([&,?,=])/),r=n.indexOf(t);return n[r+2]}function tS(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})}function Sb(){return typeof process<"u"&&U9.IS_VITEST==="true"}function nj(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function rj(){try{return window.self!==window.top}catch{return!1}}function ij(e,t=!1){const n=Buffer.from(e).toString("base64");return t?n.replace(/[=]/g,""):n}function xx(e){return Buffer.from(e,"base64").toString("utf-8")}function sj(e){return new Promise(t=>setTimeout(t,e))}let oj=class{constructor({limit:t}){Q_(this,"limit"),Q_(this,"set"),this.limit=t,this.set=new Set}add(t){if(!this.set.has(t)){if(this.set.size>=this.limit){const n=this.set.values().next().value;n&&this.set.delete(n)}this.set.add(t)}}has(t){return this.set.has(t)}};const ph=BigInt(2**32-1),nS=BigInt(32);function Tx(e,t=!1){return t?{h:Number(e&ph),l:Number(e>>nS&ph)}:{h:Number(e>>nS&ph)|0,l:Number(e&ph)|0}}function Dx(e,t=!1){const n=e.length;let r=new Uint32Array(n),s=new Uint32Array(n);for(let a=0;a<n;a++){const{h:l,l:u}=Tx(e[a],t);[r[a],s[a]]=[l,u]}return[r,s]}const rS=(e,t,n)=>e>>>n,iS=(e,t,n)=>e<<32-n|t>>>n,Ns=(e,t,n)=>e>>>n|t<<32-n,Us=(e,t,n)=>e<<32-n|t>>>n,Xl=(e,t,n)=>e<<64-n|t>>>n-32,Zl=(e,t,n)=>e>>>n-32|t<<64-n,aj=(e,t)=>t,cj=(e,t)=>e,lj=(e,t,n)=>e<<n|t>>>32-n,uj=(e,t,n)=>t<<n|e>>>32-n,fj=(e,t,n)=>t<<n-32|e>>>64-n,hj=(e,t,n)=>e<<n-32|t>>>64-n;function zr(e,t,n,r){const s=(t>>>0)+(r>>>0);return{h:e+n+(s/2**32|0)|0,l:s|0}}const Ab=(e,t,n)=>(e>>>0)+(t>>>0)+(n>>>0),Rb=(e,t,n,r)=>t+n+r+(e/2**32|0)|0,dj=(e,t,n,r)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0),pj=(e,t,n,r,s)=>t+n+r+s+(e/2**32|0)|0,gj=(e,t,n,r,s)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0)+(s>>>0),yj=(e,t,n,r,s,a)=>t+n+r+s+a+(e/2**32|0)|0,Ha=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function Ob(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function Qi(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function Tr(e,...t){if(!Ob(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function xb(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");Qi(e.outputLen),Qi(e.blockLen)}function js(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function Tb(e,t){Tr(e);const n=t.outputLen;if(e.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function vu(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))}function Dr(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}function sm(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function Jr(e,t){return e<<32-t|e>>>t}const Ix=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function Cx(e){return e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255}const ji=Ix?e=>e:e=>Cx(e);function mj(e){for(let t=0;t<e.length;t++)e[t]=Cx(e[t]);return e}const Bs=Ix?e=>e:mj,Nx=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",bj=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Eu(e){if(Tr(e),Nx)return e.toHex();let t="";for(let n=0;n<e.length;n++)t+=bj[e[n]];return t}const ki={_0:48,_9:57,A:65,F:70,a:97,f:102};function sS(e){if(e>=ki._0&&e<=ki._9)return e-ki._0;if(e>=ki.A&&e<=ki.F)return e-(ki.A-10);if(e>=ki.a&&e<=ki.f)return e-(ki.a-10)}function Db(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);if(Nx)return Uint8Array.fromHex(e);const t=e.length,n=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(n);for(let s=0,a=0;s<n;s++,a+=2){const l=sS(e.charCodeAt(a)),u=sS(e.charCodeAt(a+1));if(l===void 0||u===void 0){const d=e[a]+e[a+1];throw new Error('hex string expected, got non-hex character "'+d+'" at index '+a)}r[s]=l*16+u}return r}function wj(e){if(typeof e!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(e))}function Hr(e){return typeof e=="string"&&(e=wj(e)),Tr(e),e}function xo(...e){let t=0;for(let r=0;r<e.length;r++){const s=e[r];Tr(s),t+=s.length}const n=new Uint8Array(t);for(let r=0,s=0;r<e.length;r++){const a=e[r];n.set(a,s),s+=a.length}return n}let $d=class{};function Mu(e){const t=r=>e().update(Hr(r)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function vj(e){const t=(r,s)=>e(s).update(Hr(r)).digest(),n=e({});return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=r=>e(r),t}function xc(e=32){if(Ha&&typeof Ha.getRandomValues=="function")return Ha.getRandomValues(new Uint8Array(e));if(Ha&&typeof Ha.randomBytes=="function")return Uint8Array.from(Ha.randomBytes(e));throw new Error("crypto.getRandomValues must be defined")}const Ej=BigInt(0),zl=BigInt(1),_j=BigInt(2),Sj=BigInt(7),Aj=BigInt(256),Rj=BigInt(113),Ux=[],Bx=[],$x=[];for(let e=0,t=zl,n=1,r=0;e<24;e++){[n,r]=[r,(2*n+3*r)%5],Ux.push(2*(5*r+n)),Bx.push((e+1)*(e+2)/2%64);let s=Ej;for(let a=0;a<7;a++)t=(t<<zl^(t>>Sj)*Rj)%Aj,t&_j&&(s^=zl<<(zl<<BigInt(a))-zl);$x.push(s)}const Px=Dx($x,!0),Oj=Px[0],xj=Px[1],oS=(e,t,n)=>n>32?fj(e,t,n):lj(e,t,n),aS=(e,t,n)=>n>32?hj(e,t,n):uj(e,t,n);function Tj(e,t=24){const n=new Uint32Array(10);for(let r=24-t;r<24;r++){for(let l=0;l<10;l++)n[l]=e[l]^e[l+10]^e[l+20]^e[l+30]^e[l+40];for(let l=0;l<10;l+=2){const u=(l+8)%10,d=(l+2)%10,h=n[d],p=n[d+1],y=oS(h,p,1)^n[u],b=aS(h,p,1)^n[u+1];for(let w=0;w<50;w+=10)e[l+w]^=y,e[l+w+1]^=b}let s=e[2],a=e[3];for(let l=0;l<24;l++){const u=Bx[l],d=oS(s,a,u),h=aS(s,a,u),p=Ux[l];s=e[p],a=e[p+1],e[p]=d,e[p+1]=h}for(let l=0;l<50;l+=10){for(let u=0;u<10;u++)n[u]=e[l+u];for(let u=0;u<10;u++)e[l+u]^=~n[(u+2)%10]&n[(u+4)%10]}e[0]^=Oj[r],e[1]^=xj[r]}Dr(n)}let Dj=class kx extends $d{constructor(t,n,r,s=!1,a=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=t,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=a,Qi(r),!(0<t&&t<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=vu(this.state)}clone(){return this._cloneInto()}keccak(){Bs(this.state32),Tj(this.state32,this.rounds),Bs(this.state32),this.posOut=0,this.pos=0}update(t){js(this),t=Hr(t),Tr(t);const{blockLen:n,state:r}=this,s=t.length;for(let a=0;a<s;){const l=Math.min(n-this.pos,s-a);for(let u=0;u<l;u++)r[this.pos++]^=t[a++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:n,pos:r,blockLen:s}=this;t[r]^=n,(n&128)!==0&&r===s-1&&this.keccak(),t[s-1]^=128,this.keccak()}writeInto(t){js(this,!1),Tr(t),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,a=t.length;s<a;){this.posOut>=r&&this.keccak();const l=Math.min(r-this.posOut,a-s);t.set(n.subarray(this.posOut,this.posOut+l),s),this.posOut+=l,s+=l}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return Qi(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(Tb(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,Dr(this.state)}_cloneInto(t){const{blockLen:n,suffix:r,outputLen:s,rounds:a,enableXOF:l}=this;return t||(t=new kx(n,r,s,l,a)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=a,t.suffix=r,t.outputLen=s,t.enableXOF=l,t.destroyed=this.destroyed,t}};const Ij=(e,t,n)=>Mu(()=>new Dj(t,e,n)),Cj=Ij(1,136,256/8);function Nj(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const s=BigInt(32),a=BigInt(4294967295),l=Number(n>>s&a),u=Number(n&a),d=r?4:0,h=r?0:4;e.setUint32(t+d,l,r),e.setUint32(t+h,u,r)}function Uj(e,t,n){return e&t^~e&n}function Bj(e,t,n){return e&t^e&n^t&n}let Mx=class extends $d{constructor(t,n,r,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=t,this.outputLen=n,this.padOffset=r,this.isLE=s,this.buffer=new Uint8Array(t),this.view=sm(this.buffer)}update(t){js(this),t=Hr(t),Tr(t);const{view:n,buffer:r,blockLen:s}=this,a=t.length;for(let l=0;l<a;){const u=Math.min(s-this.pos,a-l);if(u===s){const d=sm(t);for(;s<=a-l;l+=s)this.process(d,l);continue}r.set(t.subarray(l,l+u),this.pos),this.pos+=u,l+=u,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){js(this),Tb(t,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:a}=this;let{pos:l}=this;n[l++]=128,Dr(this.buffer.subarray(l)),this.padOffset>s-l&&(this.process(r,0),l=0);for(let y=l;y<s;y++)n[y]=0;Nj(r,s-8,BigInt(this.length*8),a),this.process(r,0);const u=sm(t),d=this.outputLen;if(d%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const h=d/4,p=this.get();if(h>p.length)throw new Error("_sha2: outputLen bigger than state");for(let y=0;y<h;y++)u.setUint32(4*y,p[y],a)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:a,destroyed:l,pos:u}=this;return t.destroyed=l,t.finished=a,t.length=s,t.pos=u,s%n&&t.buffer.set(r),t}clone(){return this._cloneInto()}};const Rs=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),mn=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),bn=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),$j=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Os=new Uint32Array(64);let Pj=class extends Mx{constructor(t=32){super(64,t,8,!1),this.A=Rs[0]|0,this.B=Rs[1]|0,this.C=Rs[2]|0,this.D=Rs[3]|0,this.E=Rs[4]|0,this.F=Rs[5]|0,this.G=Rs[6]|0,this.H=Rs[7]|0}get(){const{A:t,B:n,C:r,D:s,E:a,F:l,G:u,H:d}=this;return[t,n,r,s,a,l,u,d]}set(t,n,r,s,a,l,u,d){this.A=t|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=a|0,this.F=l|0,this.G=u|0,this.H=d|0}process(t,n){for(let y=0;y<16;y++,n+=4)Os[y]=t.getUint32(n,!1);for(let y=16;y<64;y++){const b=Os[y-15],w=Os[y-2],v=Jr(b,7)^Jr(b,18)^b>>>3,E=Jr(w,17)^Jr(w,19)^w>>>10;Os[y]=E+Os[y-7]+v+Os[y-16]|0}let{A:r,B:s,C:a,D:l,E:u,F:d,G:h,H:p}=this;for(let y=0;y<64;y++){const b=Jr(u,6)^Jr(u,11)^Jr(u,25),w=p+b+Uj(u,d,h)+$j[y]+Os[y]|0,v=(Jr(r,2)^Jr(r,13)^Jr(r,22))+Bj(r,s,a)|0;p=h,h=d,d=u,u=l+w|0,l=a,a=s,s=r,r=w+v|0}r=r+this.A|0,s=s+this.B|0,a=a+this.C|0,l=l+this.D|0,u=u+this.E|0,d=d+this.F|0,h=h+this.G|0,p=p+this.H|0,this.set(r,s,a,l,u,d,h,p)}roundClean(){Dr(Os)}destroy(){this.set(0,0,0,0,0,0,0,0),Dr(this.buffer)}};const Lx=Dx(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),kj=Lx[0],Mj=Lx[1],xs=new Uint32Array(80),Ts=new Uint32Array(80);let Ib=class extends Mx{constructor(t=64){super(128,t,16,!1),this.Ah=bn[0]|0,this.Al=bn[1]|0,this.Bh=bn[2]|0,this.Bl=bn[3]|0,this.Ch=bn[4]|0,this.Cl=bn[5]|0,this.Dh=bn[6]|0,this.Dl=bn[7]|0,this.Eh=bn[8]|0,this.El=bn[9]|0,this.Fh=bn[10]|0,this.Fl=bn[11]|0,this.Gh=bn[12]|0,this.Gl=bn[13]|0,this.Hh=bn[14]|0,this.Hl=bn[15]|0}get(){const{Ah:t,Al:n,Bh:r,Bl:s,Ch:a,Cl:l,Dh:u,Dl:d,Eh:h,El:p,Fh:y,Fl:b,Gh:w,Gl:v,Hh:E,Hl:_}=this;return[t,n,r,s,a,l,u,d,h,p,y,b,w,v,E,_]}set(t,n,r,s,a,l,u,d,h,p,y,b,w,v,E,_){this.Ah=t|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=a|0,this.Cl=l|0,this.Dh=u|0,this.Dl=d|0,this.Eh=h|0,this.El=p|0,this.Fh=y|0,this.Fl=b|0,this.Gh=w|0,this.Gl=v|0,this.Hh=E|0,this.Hl=_|0}process(t,n){for(let I=0;I<16;I++,n+=4)xs[I]=t.getUint32(n),Ts[I]=t.getUint32(n+=4);for(let I=16;I<80;I++){const $=xs[I-15]|0,U=Ts[I-15]|0,k=Ns($,U,1)^Ns($,U,8)^rS($,U,7),q=Us($,U,1)^Us($,U,8)^iS($,U,7),H=xs[I-2]|0,P=Ts[I-2]|0,V=Ns(H,P,19)^Xl(H,P,61)^rS(H,P,6),G=Us(H,P,19)^Zl(H,P,61)^iS(H,P,6),K=dj(q,G,Ts[I-7],Ts[I-16]),ce=pj(K,k,V,xs[I-7],xs[I-16]);xs[I]=ce|0,Ts[I]=K|0}let{Ah:r,Al:s,Bh:a,Bl:l,Ch:u,Cl:d,Dh:h,Dl:p,Eh:y,El:b,Fh:w,Fl:v,Gh:E,Gl:_,Hh:R,Hl:D}=this;for(let I=0;I<80;I++){const $=Ns(y,b,14)^Ns(y,b,18)^Xl(y,b,41),U=Us(y,b,14)^Us(y,b,18)^Zl(y,b,41),k=y&w^~y&E,q=b&v^~b&_,H=gj(D,U,q,Mj[I],Ts[I]),P=yj(H,R,$,k,kj[I],xs[I]),V=H|0,G=Ns(r,s,28)^Xl(r,s,34)^Xl(r,s,39),K=Us(r,s,28)^Zl(r,s,34)^Zl(r,s,39),ce=r&a^r&u^a&u,ne=s&l^s&d^l&d;R=E|0,D=_|0,E=w|0,_=v|0,w=y|0,v=b|0,{h:y,l:b}=zr(h|0,p|0,P|0,V|0),h=u|0,p=d|0,u=a|0,d=l|0,a=r|0,l=s|0;const T=Ab(V,K,ne);r=Rb(T,P,G,ce),s=T|0}({h:r,l:s}=zr(this.Ah|0,this.Al|0,r|0,s|0)),{h:a,l}=zr(this.Bh|0,this.Bl|0,a|0,l|0),{h:u,l:d}=zr(this.Ch|0,this.Cl|0,u|0,d|0),{h,l:p}=zr(this.Dh|0,this.Dl|0,h|0,p|0),{h:y,l:b}=zr(this.Eh|0,this.El|0,y|0,b|0),{h:w,l:v}=zr(this.Fh|0,this.Fl|0,w|0,v|0),{h:E,l:_}=zr(this.Gh|0,this.Gl|0,E|0,_|0),{h:R,l:D}=zr(this.Hh|0,this.Hl|0,R|0,D|0),this.set(r,s,a,l,u,d,h,p,y,b,w,v,E,_,R,D)}roundClean(){Dr(xs,Ts)}destroy(){Dr(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}},Lj=class extends Ib{constructor(){super(48),this.Ah=mn[0]|0,this.Al=mn[1]|0,this.Bh=mn[2]|0,this.Bl=mn[3]|0,this.Ch=mn[4]|0,this.Cl=mn[5]|0,this.Dh=mn[6]|0,this.Dl=mn[7]|0,this.Eh=mn[8]|0,this.El=mn[9]|0,this.Fh=mn[10]|0,this.Fl=mn[11]|0,this.Gh=mn[12]|0,this.Gl=mn[13]|0,this.Hh=mn[14]|0,this.Hl=mn[15]|0}};const wn=Uint32Array.from([573645204,4230739756,2673172387,3360449730,596883563,1867755857,2520282905,1497426621,2519219938,2827943907,3193839141,1401305490,721525244,746961066,246885852,2177182882]);class jj extends Ib{constructor(){super(32),this.Ah=wn[0]|0,this.Al=wn[1]|0,this.Bh=wn[2]|0,this.Bl=wn[3]|0,this.Ch=wn[4]|0,this.Cl=wn[5]|0,this.Dh=wn[6]|0,this.Dl=wn[7]|0,this.Eh=wn[8]|0,this.El=wn[9]|0,this.Fh=wn[10]|0,this.Fl=wn[11]|0,this.Gh=wn[12]|0,this.Gl=wn[13]|0,this.Hh=wn[14]|0,this.Hl=wn[15]|0}}const Pd=Mu(()=>new Pj),zj=Mu(()=>new Ib),qj=Mu(()=>new Lj),Hj=Mu(()=>new jj),Fj=Uint8Array.from([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9]),zt=Uint32Array.from([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),ve=new Uint32Array(32);function Ds(e,t,n,r,s,a){const l=s[a],u=s[a+1];let d=ve[2*e],h=ve[2*e+1],p=ve[2*t],y=ve[2*t+1],b=ve[2*n],w=ve[2*n+1],v=ve[2*r],E=ve[2*r+1],_=Ab(d,p,l);h=Rb(_,h,y,u),d=_|0,{Dh:E,Dl:v}={Dh:E^h,Dl:v^d},{Dh:E,Dl:v}={Dh:aj(E,v),Dl:cj(E)},{h:w,l:b}=zr(w,b,E,v),{Bh:y,Bl:p}={Bh:y^w,Bl:p^b},{Bh:y,Bl:p}={Bh:Ns(y,p,24),Bl:Us(y,p,24)},ve[2*e]=d,ve[2*e+1]=h,ve[2*t]=p,ve[2*t+1]=y,ve[2*n]=b,ve[2*n+1]=w,ve[2*r]=v,ve[2*r+1]=E}function Is(e,t,n,r,s,a){const l=s[a],u=s[a+1];let d=ve[2*e],h=ve[2*e+1],p=ve[2*t],y=ve[2*t+1],b=ve[2*n],w=ve[2*n+1],v=ve[2*r],E=ve[2*r+1],_=Ab(d,p,l);h=Rb(_,h,y,u),d=_|0,{Dh:E,Dl:v}={Dh:E^h,Dl:v^d},{Dh:E,Dl:v}={Dh:Ns(E,v,16),Dl:Us(E,v,16)},{h:w,l:b}=zr(w,b,E,v),{Bh:y,Bl:p}={Bh:y^w,Bl:p^b},{Bh:y,Bl:p}={Bh:Xl(y,p,63),Bl:Zl(y,p,63)},ve[2*e]=d,ve[2*e+1]=h,ve[2*t]=p,ve[2*t+1]=y,ve[2*n]=b,ve[2*n+1]=w,ve[2*r]=v,ve[2*r+1]=E}function Vj(e,t={},n,r,s){if(Qi(n),e<0||e>n)throw new Error("outputLen bigger than keyLen");const{key:a,salt:l,personalization:u}=t;if(a!==void 0&&(a.length<1||a.length>n))throw new Error("key length must be undefined or 1.."+n);if(l!==void 0&&l.length!==r)throw new Error("salt must be undefined or "+r);if(u!==void 0&&u.length!==s)throw new Error("personalization must be undefined or "+s)}class Gj extends $d{constructor(t,n){super(),this.finished=!1,this.destroyed=!1,this.length=0,this.pos=0,Qi(t),Qi(n),this.blockLen=t,this.outputLen=n,this.buffer=new Uint8Array(t),this.buffer32=vu(this.buffer)}update(t){js(this),t=Hr(t),Tr(t);const{blockLen:n,buffer:r,buffer32:s}=this,a=t.length,l=t.byteOffset,u=t.buffer;for(let d=0;d<a;){this.pos===n&&(Bs(s),this.compress(s,0,!1),Bs(s),this.pos=0);const h=Math.min(n-this.pos,a-d),p=l+d;if(h===n&&!(p%4)&&d+h<a){const y=new Uint32Array(u,p,Math.floor((a-d)/4));Bs(y);for(let b=0;d+n<a;b+=s.length,d+=n)this.length+=n,this.compress(y,b,!1);Bs(y);continue}r.set(t.subarray(d,d+h),this.pos),this.pos+=h,this.length+=h,d+=h}return this}digestInto(t){js(this),Tb(t,this);const{pos:n,buffer32:r}=this;this.finished=!0,Dr(this.buffer.subarray(n)),Bs(r),this.compress(r,0,!0),Bs(r);const s=vu(t);this.get().forEach((a,l)=>s[l]=ji(a))}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){const{buffer:n,length:r,finished:s,destroyed:a,outputLen:l,pos:u}=this;return t||(t=new this.constructor({dkLen:l})),t.set(...this.get()),t.buffer.set(n),t.destroyed=a,t.finished=s,t.length=r,t.pos=u,t.outputLen=l,t}clone(){return this._cloneInto()}}class Kj extends Gj{constructor(t={}){const n=t.dkLen===void 0?64:t.dkLen;super(128,n),this.v0l=zt[0]|0,this.v0h=zt[1]|0,this.v1l=zt[2]|0,this.v1h=zt[3]|0,this.v2l=zt[4]|0,this.v2h=zt[5]|0,this.v3l=zt[6]|0,this.v3h=zt[7]|0,this.v4l=zt[8]|0,this.v4h=zt[9]|0,this.v5l=zt[10]|0,this.v5h=zt[11]|0,this.v6l=zt[12]|0,this.v6h=zt[13]|0,this.v7l=zt[14]|0,this.v7h=zt[15]|0,Vj(n,t,64,16,16);let{key:r,personalization:s,salt:a}=t,l=0;if(r!==void 0&&(r=Hr(r),l=r.length),this.v0l^=this.outputLen|l<<8|65536|1<<24,a!==void 0){a=Hr(a);const u=vu(a);this.v4l^=ji(u[0]),this.v4h^=ji(u[1]),this.v5l^=ji(u[2]),this.v5h^=ji(u[3])}if(s!==void 0){s=Hr(s);const u=vu(s);this.v6l^=ji(u[0]),this.v6h^=ji(u[1]),this.v7l^=ji(u[2]),this.v7h^=ji(u[3])}if(r!==void 0){const u=new Uint8Array(this.blockLen);u.set(r),this.update(u)}}get(){let{v0l:t,v0h:n,v1l:r,v1h:s,v2l:a,v2h:l,v3l:u,v3h:d,v4l:h,v4h:p,v5l:y,v5h:b,v6l:w,v6h:v,v7l:E,v7h:_}=this;return[t,n,r,s,a,l,u,d,h,p,y,b,w,v,E,_]}set(t,n,r,s,a,l,u,d,h,p,y,b,w,v,E,_){this.v0l=t|0,this.v0h=n|0,this.v1l=r|0,this.v1h=s|0,this.v2l=a|0,this.v2h=l|0,this.v3l=u|0,this.v3h=d|0,this.v4l=h|0,this.v4h=p|0,this.v5l=y|0,this.v5h=b|0,this.v6l=w|0,this.v6h=v|0,this.v7l=E|0,this.v7h=_|0}compress(t,n,r){this.get().forEach((d,h)=>ve[h]=d),ve.set(zt,16);let{h:s,l:a}=Tx(BigInt(this.length));ve[24]=zt[8]^a,ve[25]=zt[9]^s,r&&(ve[28]=~ve[28],ve[29]=~ve[29]);let l=0;const u=Fj;for(let d=0;d<12;d++)Ds(0,4,8,12,t,n+2*u[l++]),Is(0,4,8,12,t,n+2*u[l++]),Ds(1,5,9,13,t,n+2*u[l++]),Is(1,5,9,13,t,n+2*u[l++]),Ds(2,6,10,14,t,n+2*u[l++]),Is(2,6,10,14,t,n+2*u[l++]),Ds(3,7,11,15,t,n+2*u[l++]),Is(3,7,11,15,t,n+2*u[l++]),Ds(0,5,10,15,t,n+2*u[l++]),Is(0,5,10,15,t,n+2*u[l++]),Ds(1,6,11,12,t,n+2*u[l++]),Is(1,6,11,12,t,n+2*u[l++]),Ds(2,7,8,13,t,n+2*u[l++]),Is(2,7,8,13,t,n+2*u[l++]),Ds(3,4,9,14,t,n+2*u[l++]),Is(3,4,9,14,t,n+2*u[l++]);this.v0l^=ve[0]^ve[16],this.v0h^=ve[1]^ve[17],this.v1l^=ve[2]^ve[18],this.v1h^=ve[3]^ve[19],this.v2l^=ve[4]^ve[20],this.v2h^=ve[5]^ve[21],this.v3l^=ve[6]^ve[22],this.v3h^=ve[7]^ve[23],this.v4l^=ve[8]^ve[24],this.v4h^=ve[9]^ve[25],this.v5l^=ve[10]^ve[26],this.v5h^=ve[11]^ve[27],this.v6l^=ve[12]^ve[28],this.v6h^=ve[13]^ve[29],this.v7l^=ve[14]^ve[30],this.v7h^=ve[15]^ve[31],Dr(ve)}destroy(){this.destroyed=!0,Dr(this.buffer32),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const Yj=vj(e=>new Kj(e)),Wj="https://rpc.walletconnect.org/v1";function jx(e){const t=`Ethereum Signed Message:
${e.length}`,n=new TextEncoder().encode(t+e);return"0x"+Buffer.from(Cj(n)).toString("hex")}async function Xj(e,t,n,r,s,a){switch(n.t){case"eip191":return await Zj(e,t,n.s);case"eip1271":return await Qj(e,t,n.s,r,s,a);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${n.t}`)}}async function Zj(e,t,n){return(await K5({hash:jx(t),signature:n})).toLowerCase()===e.toLowerCase()}async function Qj(e,t,n,r,s,a){const l=dc(r);if(!l.namespace||!l.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${r}`);try{const u="0x1626ba7e",d="0000000000000000000000000000000000000000000000000000000000000040",h=n.substring(2),p=(h.length/2).toString(16).padStart(64,"0"),y=(t.startsWith("0x")?t:jx(t)).substring(2),b=u+y+d+p+h,w=await fetch(`${a||Wj}/?chainId=${r}&projectId=${s}`,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({id:Jj(),jsonrpc:"2.0",method:"eth_call",params:[{to:e,data:b},"latest"]})}),{result:v}=await w.json();return v?v.slice(0,u.length).toLowerCase()===u.toLowerCase():!1}catch(u){return console.error("isValidEip1271Signature: ",u),!1}}function Jj(){return Date.now()+Math.floor(Math.random()*1e3)}function ez(e){const t=atob(e),n=new Uint8Array(t.length);for(let l=0;l<t.length;l++)n[l]=t.charCodeAt(l);const r=n[0];if(r===0)throw new Error("No signatures found");const s=1+r*64;if(n.length<s)throw new Error("Transaction data too short for claimed signature count");if(n.length<100)throw new Error("Transaction too short");const a=Buffer.from(e,"base64").slice(1,65);return Bu.encode(a)}function tz(e){const t=new Uint8Array(Buffer.from(e,"base64")),n=Array.from("TransactionData::").map(a=>a.charCodeAt(0)),r=new Uint8Array(n.length+t.length);r.set(n),r.set(t,n.length);const s=Yj(r,{dkLen:32});return Bu.encode(s)}function cS(e){const t=new Uint8Array(Pd(nz(e)));return Bu.encode(t)}function nz(e){if(e instanceof Uint8Array)return e;if(Array.isArray(e))return new Uint8Array(e);if(typeof e=="object"&&e!=null&&e.data)return new Uint8Array(Object.values(e.data));if(typeof e=="object"&&e)return new Uint8Array(Object.values(e));throw new Error("getNearUint8ArrayFromBytes: Unexpected result type from bytes array")}function lS(e){const t=Buffer.from(e,"base64"),n=Ck(t).txn;if(!n)throw new Error("Invalid signed transaction: missing 'txn' field");const r=_k(n),s=Buffer.from("TX"),a=Buffer.concat([s,Buffer.from(r)]),l=Hj(a);return Lk.encode(l).replace(/=+$/,"")}function om(e){const t=[];let n=BigInt(e);for(;n>=BigInt(128);)t.push(Number(n&BigInt(127)|BigInt(128))),n>>=BigInt(7);return t.push(Number(n)),Buffer.from(t)}function rz(e){const t=Buffer.from(e.signed.bodyBytes,"base64"),n=Buffer.from(e.signed.authInfoBytes,"base64"),r=Buffer.from(e.signature.signature,"base64"),s=[];s.push(Buffer.from([10])),s.push(om(t.length)),s.push(t),s.push(Buffer.from([18])),s.push(om(n.length)),s.push(n),s.push(Buffer.from([26])),s.push(om(r.length)),s.push(r);const a=Buffer.concat(s),l=Pd(a);return Buffer.from(l).toString("hex").toUpperCase()}var iz=Object.defineProperty,sz=Object.defineProperties,oz=Object.getOwnPropertyDescriptors,uS=Object.getOwnPropertySymbols,az=Object.prototype.hasOwnProperty,cz=Object.prototype.propertyIsEnumerable,fS=(e,t,n)=>t in e?iz(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,lz=(e,t)=>{for(var n in t||(t={}))az.call(t,n)&&fS(e,n,t[n]);if(uS)for(var n of uS(t))cz.call(t,n)&&fS(e,n,t[n]);return e},uz=(e,t)=>sz(e,oz(t));const fz="did:pkh:",Cb=e=>e?.split(":"),hz=e=>{const t=e&&Cb(e);if(t)return e.includes(fz)?t[3]:t[1]},f0=e=>{const t=e&&Cb(e);if(t)return t[2]+":"+t[3]},od=e=>{const t=e&&Cb(e);if(t)return t.pop()};async function hS(e){const{cacao:t,projectId:n}=e,{s:r,p:s}=t,a=zx(s,s.iss),l=od(s.iss);return await Xj(l,a,r,f0(s.iss),n)}const zx=(e,t)=>{const n=`${e.domain} wants you to sign in with your Ethereum account:`,r=od(t);if(!e.aud&&!e.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let s=e.statement||void 0;const a=`URI: ${e.aud||e.uri}`,l=`Version: ${e.version}`,u=`Chain ID: ${hz(t)}`,d=`Nonce: ${e.nonce}`,h=`Issued At: ${e.iat}`,p=e.exp?`Expiration Time: ${e.exp}`:void 0,y=e.nbf?`Not Before: ${e.nbf}`:void 0,b=e.requestId?`Request ID: ${e.requestId}`:void 0,w=e.resources?`Resources:${e.resources.map(E=>`
- ${E}`).join("")}`:void 0,v=Lh(e.resources);if(v){const E=_u(v);s=Ez(s,E)}return[n,r,"",s,"",a,l,u,d,h,p,y,b,w].filter(E=>E!=null).join(`
`)};function dz(e){return Buffer.from(JSON.stringify(e)).toString("base64")}function pz(e){return JSON.parse(Buffer.from(e,"base64").toString("utf-8"))}function ko(e){if(!e)throw new Error("No recap provided, value is undefined");if(!e.att)throw new Error("No `att` property found");const t=Object.keys(e.att);if(!(t!=null&&t.length))throw new Error("No resources found in `att` property");t.forEach(n=>{const r=e.att[n];if(Array.isArray(r))throw new Error(`Resource must be an object: ${n}`);if(typeof r!="object")throw new Error(`Resource must be an object: ${n}`);if(!Object.keys(r).length)throw new Error(`Resource object is empty: ${n}`);Object.keys(r).forEach(s=>{const a=r[s];if(!Array.isArray(a))throw new Error(`Ability limits ${s} must be an array of objects, found: ${a}`);if(!a.length)throw new Error(`Value of ${s} is empty array, must be an array with objects`);a.forEach(l=>{if(typeof l!="object")throw new Error(`Ability limits (${s}) must be an array of objects, found: ${l}`)})})})}function gz(e,t,n,r={}){return n?.sort((s,a)=>s.localeCompare(a)),{att:{[e]:yz(t,n,r)}}}function yz(e,t,n={}){t=t?.sort((s,a)=>s.localeCompare(a));const r=t.map(s=>({[`${e}/${s}`]:[n]}));return Object.assign({},...r)}function qx(e){return ko(e),`urn:recap:${dz(e).replace(/=/g,"")}`}function _u(e){const t=pz(e.replace("urn:recap:",""));return ko(t),t}function mz(e,t,n){const r=gz(e,t,n);return qx(r)}function bz(e){return e&&e.includes("urn:recap:")}function wz(e,t){const n=_u(e),r=_u(t),s=vz(n,r);return qx(s)}function vz(e,t){ko(e),ko(t);const n=Object.keys(e.att).concat(Object.keys(t.att)).sort((s,a)=>s.localeCompare(a)),r={att:{}};return n.forEach(s=>{var a,l;Object.keys(((a=e.att)==null?void 0:a[s])||{}).concat(Object.keys(((l=t.att)==null?void 0:l[s])||{})).sort((u,d)=>u.localeCompare(d)).forEach(u=>{var d,h;r.att[s]=uz(lz({},r.att[s]),{[u]:((d=e.att[s])==null?void 0:d[u])||((h=t.att[s])==null?void 0:h[u])})})}),r}function Ez(e="",t){ko(t);const n="I further authorize the stated URI to perform the following actions on my behalf: ";if(e.includes(n))return e;const r=[];let s=0;Object.keys(t.att).forEach(u=>{const d=Object.keys(t.att[u]).map(y=>({ability:y.split("/")[0],action:y.split("/")[1]}));d.sort((y,b)=>y.action.localeCompare(b.action));const h={};d.forEach(y=>{h[y.ability]||(h[y.ability]=[]),h[y.ability].push(y.action)});const p=Object.keys(h).map(y=>(s++,`(${s}) '${y}': '${h[y].join("', '")}' for '${u}'.`));r.push(p.join(", ").replace(".,","."))});const a=r.join(" "),l=`${n}${a}`;return`${e?e+" ":""}${l}`}function dS(e){var t;const n=_u(e);ko(n);const r=(t=n.att)==null?void 0:t.eip155;return r?Object.keys(r).map(s=>s.split("/")[1]):[]}function pS(e){const t=_u(e);ko(t);const n=[];return Object.values(t.att).forEach(r=>{Object.values(r).forEach(s=>{var a;(a=s?.[0])!=null&&a.chains&&n.push(s[0].chains)})}),[...new Set(n.flat())]}function Lh(e){if(!e)return;const t=e?.[e.length-1];return bz(t)?t:void 0}/*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) */function Hx(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function h0(e){if(typeof e!="boolean")throw new Error(`boolean expected, not ${e}`)}function am(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function zn(e,...t){if(!Hx(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function gS(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function _z(e,t){zn(e);const n=t.outputLen;if(e.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function Ls(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))}function gc(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}function Sz(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}const Az=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function Rz(e){if(typeof e!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(e))}function d0(e){if(typeof e=="string")e=Rz(e);else if(Hx(e))e=p0(e);else throw new Error("Uint8Array expected, got "+typeof e);return e}function Oz(e,t){if(t==null||typeof t!="object")throw new Error("options must be defined");return Object.assign(e,t)}function xz(e,t){if(e.length!==t.length)return!1;let n=0;for(let r=0;r<e.length;r++)n|=e[r]^t[r];return n===0}const Tz=(e,t)=>{function n(r,...s){if(zn(r),!Az)throw new Error("Non little-endian hardware is not yet supported");if(e.nonceLength!==void 0){const h=s[0];if(!h)throw new Error("nonce / iv required");e.varSizeNonce?zn(h):zn(h,e.nonceLength)}const a=e.tagLength;a&&s[1]!==void 0&&zn(s[1]);const l=t(r,...s),u=(h,p)=>{if(p!==void 0){if(h!==2)throw new Error("cipher output not supported");zn(p)}};let d=!1;return{encrypt(h,p){if(d)throw new Error("cannot encrypt() twice with same key + nonce");return d=!0,zn(h),u(l.encrypt.length,p),l.encrypt(h,p)},decrypt(h,p){if(zn(h),a&&h.length<a)throw new Error("invalid ciphertext length: smaller than tagLength="+a);return u(l.decrypt.length,p),l.decrypt(h,p)}}}return Object.assign(n,e),n};function yS(e,t,n=!0){if(t===void 0)return new Uint8Array(e);if(t.length!==e)throw new Error("invalid output length, expected "+e+", got: "+t.length);if(n&&!Iz(t))throw new Error("invalid output, must be aligned");return t}function mS(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const s=BigInt(32),a=BigInt(4294967295),l=Number(n>>s&a),u=Number(n&a);e.setUint32(t+4,l,r),e.setUint32(t+0,u,r)}function Dz(e,t,n){h0(n);const r=new Uint8Array(16),s=Sz(r);return mS(s,0,BigInt(t),n),mS(s,8,BigInt(e),n),r}function Iz(e){return e.byteOffset%4===0}function p0(e){return Uint8Array.from(e)}const Fx=e=>Uint8Array.from(e.split("").map(t=>t.charCodeAt(0))),Cz=Fx("expand 16-byte k"),Nz=Fx("expand 32-byte k"),Uz=Ls(Cz),Bz=Ls(Nz);function Fe(e,t){return e<<t|e>>>32-t}function g0(e){return e.byteOffset%4===0}const gh=64,$z=16,Vx=2**32-1,bS=new Uint32Array;function Pz(e,t,n,r,s,a,l,u){const d=s.length,h=new Uint8Array(gh),p=Ls(h),y=g0(s)&&g0(a),b=y?Ls(s):bS,w=y?Ls(a):bS;for(let v=0;v<d;l++){if(e(t,n,r,p,l,u),l>=Vx)throw new Error("arx: counter overflow");const E=Math.min(gh,d-v);if(y&&E===gh){const _=v/4;if(v%4!==0)throw new Error("arx: invalid block position");for(let R=0,D;R<$z;R++)D=_+R,w[D]=b[D]^p[R];v+=gh;continue}for(let _=0,R;_<E;_++)R=v+_,a[R]=s[R]^h[_];v+=E}}function kz(e,t){const{allowShortKeys:n,extendNonceFn:r,counterLength:s,counterRight:a,rounds:l}=Oz({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},t);if(typeof e!="function")throw new Error("core must be a function");return am(s),am(l),h0(a),h0(n),(u,d,h,p,y=0)=>{zn(u),zn(d),zn(h);const b=h.length;if(p===void 0&&(p=new Uint8Array(b)),zn(p),am(y),y<0||y>=Vx)throw new Error("arx: counter overflow");if(p.length<b)throw new Error(`arx: output (${p.length}) is shorter than data (${b})`);const w=[];let v=u.length,E,_;if(v===32)w.push(E=p0(u)),_=Bz;else if(v===16&&n)E=new Uint8Array(32),E.set(u),E.set(u,16),_=Uz,w.push(E);else throw new Error(`arx: invalid 32-byte key, got length=${v}`);g0(d)||w.push(d=p0(d));const R=Ls(E);if(r){if(d.length!==24)throw new Error("arx: extended nonce must be 24 bytes");r(_,R,Ls(d.subarray(0,16)),R),d=d.subarray(16)}const D=16-s;if(D!==d.length)throw new Error(`arx: nonce must be ${D} or 16 bytes`);if(D!==12){const $=new Uint8Array(12);$.set(d,a?0:12-d.length),d=$,w.push(d)}const I=Ls(d);return Pz(e,_,R,I,h,p,y,l),gc(...w),p}}const rn=(e,t)=>e[t++]&255|(e[t++]&255)<<8;class Mz{constructor(t){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,t=d0(t),zn(t,32);const n=rn(t,0),r=rn(t,2),s=rn(t,4),a=rn(t,6),l=rn(t,8),u=rn(t,10),d=rn(t,12),h=rn(t,14);this.r[0]=n&8191,this.r[1]=(n>>>13|r<<3)&8191,this.r[2]=(r>>>10|s<<6)&7939,this.r[3]=(s>>>7|a<<9)&8191,this.r[4]=(a>>>4|l<<12)&255,this.r[5]=l>>>1&8190,this.r[6]=(l>>>14|u<<2)&8191,this.r[7]=(u>>>11|d<<5)&8065,this.r[8]=(d>>>8|h<<8)&8191,this.r[9]=h>>>5&127;for(let p=0;p<8;p++)this.pad[p]=rn(t,16+2*p)}process(t,n,r=!1){const s=r?0:2048,{h:a,r:l}=this,u=l[0],d=l[1],h=l[2],p=l[3],y=l[4],b=l[5],w=l[6],v=l[7],E=l[8],_=l[9],R=rn(t,n+0),D=rn(t,n+2),I=rn(t,n+4),$=rn(t,n+6),U=rn(t,n+8),k=rn(t,n+10),q=rn(t,n+12),H=rn(t,n+14);let P=a[0]+(R&8191),V=a[1]+((R>>>13|D<<3)&8191),G=a[2]+((D>>>10|I<<6)&8191),K=a[3]+((I>>>7|$<<9)&8191),ce=a[4]+(($>>>4|U<<12)&8191),ne=a[5]+(U>>>1&8191),T=a[6]+((U>>>14|k<<2)&8191),O=a[7]+((k>>>11|q<<5)&8191),M=a[8]+((q>>>8|H<<8)&8191),F=a[9]+(H>>>5|s),Y=0,C=Y+P*u+V*(5*_)+G*(5*E)+K*(5*v)+ce*(5*w);Y=C>>>13,C&=8191,C+=ne*(5*b)+T*(5*y)+O*(5*p)+M*(5*h)+F*(5*d),Y+=C>>>13,C&=8191;let z=Y+P*d+V*u+G*(5*_)+K*(5*E)+ce*(5*v);Y=z>>>13,z&=8191,z+=ne*(5*w)+T*(5*b)+O*(5*y)+M*(5*p)+F*(5*h),Y+=z>>>13,z&=8191;let J=Y+P*h+V*d+G*u+K*(5*_)+ce*(5*E);Y=J>>>13,J&=8191,J+=ne*(5*v)+T*(5*w)+O*(5*b)+M*(5*y)+F*(5*p),Y+=J>>>13,J&=8191;let se=Y+P*p+V*h+G*d+K*u+ce*(5*_);Y=se>>>13,se&=8191,se+=ne*(5*E)+T*(5*v)+O*(5*w)+M*(5*b)+F*(5*y),Y+=se>>>13,se&=8191;let re=Y+P*y+V*p+G*h+K*d+ce*u;Y=re>>>13,re&=8191,re+=ne*(5*_)+T*(5*E)+O*(5*v)+M*(5*w)+F*(5*b),Y+=re>>>13,re&=8191;let ge=Y+P*b+V*y+G*p+K*h+ce*d;Y=ge>>>13,ge&=8191,ge+=ne*u+T*(5*_)+O*(5*E)+M*(5*v)+F*(5*w),Y+=ge>>>13,ge&=8191;let ye=Y+P*w+V*b+G*y+K*p+ce*h;Y=ye>>>13,ye&=8191,ye+=ne*d+T*u+O*(5*_)+M*(5*E)+F*(5*v),Y+=ye>>>13,ye&=8191;let De=Y+P*v+V*w+G*b+K*y+ce*p;Y=De>>>13,De&=8191,De+=ne*h+T*d+O*u+M*(5*_)+F*(5*E),Y+=De>>>13,De&=8191;let _e=Y+P*E+V*v+G*w+K*b+ce*y;Y=_e>>>13,_e&=8191,_e+=ne*p+T*h+O*d+M*u+F*(5*_),Y+=_e>>>13,_e&=8191;let xe=Y+P*_+V*E+G*v+K*w+ce*b;Y=xe>>>13,xe&=8191,xe+=ne*y+T*p+O*h+M*d+F*u,Y+=xe>>>13,xe&=8191,Y=(Y<<2)+Y|0,Y=Y+C|0,C=Y&8191,Y=Y>>>13,z+=Y,a[0]=C,a[1]=z,a[2]=J,a[3]=se,a[4]=re,a[5]=ge,a[6]=ye,a[7]=De,a[8]=_e,a[9]=xe}finalize(){const{h:t,pad:n}=this,r=new Uint16Array(10);let s=t[1]>>>13;t[1]&=8191;for(let u=2;u<10;u++)t[u]+=s,s=t[u]>>>13,t[u]&=8191;t[0]+=s*5,s=t[0]>>>13,t[0]&=8191,t[1]+=s,s=t[1]>>>13,t[1]&=8191,t[2]+=s,r[0]=t[0]+5,s=r[0]>>>13,r[0]&=8191;for(let u=1;u<10;u++)r[u]=t[u]+s,s=r[u]>>>13,r[u]&=8191;r[9]-=8192;let a=(s^1)-1;for(let u=0;u<10;u++)r[u]&=a;a=~a;for(let u=0;u<10;u++)t[u]=t[u]&a|r[u];t[0]=(t[0]|t[1]<<13)&65535,t[1]=(t[1]>>>3|t[2]<<10)&65535,t[2]=(t[2]>>>6|t[3]<<7)&65535,t[3]=(t[3]>>>9|t[4]<<4)&65535,t[4]=(t[4]>>>12|t[5]<<1|t[6]<<14)&65535,t[5]=(t[6]>>>2|t[7]<<11)&65535,t[6]=(t[7]>>>5|t[8]<<8)&65535,t[7]=(t[8]>>>8|t[9]<<5)&65535;let l=t[0]+n[0];t[0]=l&65535;for(let u=1;u<8;u++)l=(t[u]+n[u]|0)+(l>>>16)|0,t[u]=l&65535;gc(r)}update(t){gS(this),t=d0(t),zn(t);const{buffer:n,blockLen:r}=this,s=t.length;for(let a=0;a<s;){const l=Math.min(r-this.pos,s-a);if(l===r){for(;r<=s-a;a+=r)this.process(t,a);continue}n.set(t.subarray(a,a+l),this.pos),this.pos+=l,a+=l,this.pos===r&&(this.process(n,0,!1),this.pos=0)}return this}destroy(){gc(this.h,this.r,this.buffer,this.pad)}digestInto(t){gS(this),_z(t,this),this.finished=!0;const{buffer:n,h:r}=this;let{pos:s}=this;if(s){for(n[s++]=1;s<16;s++)n[s]=0;this.process(n,0,!0)}this.finalize();let a=0;for(let l=0;l<8;l++)t[a++]=r[l]>>>0,t[a++]=r[l]>>>8;return t}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}}function Lz(e){const t=(r,s)=>e(s).update(d0(r)).digest(),n=e(new Uint8Array(32));return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=r=>e(r),t}const jz=Lz(e=>new Mz(e));function zz(e,t,n,r,s,a=20){let l=e[0],u=e[1],d=e[2],h=e[3],p=t[0],y=t[1],b=t[2],w=t[3],v=t[4],E=t[5],_=t[6],R=t[7],D=s,I=n[0],$=n[1],U=n[2],k=l,q=u,H=d,P=h,V=p,G=y,K=b,ce=w,ne=v,T=E,O=_,M=R,F=D,Y=I,C=$,z=U;for(let se=0;se<a;se+=2)k=k+V|0,F=Fe(F^k,16),ne=ne+F|0,V=Fe(V^ne,12),k=k+V|0,F=Fe(F^k,8),ne=ne+F|0,V=Fe(V^ne,7),q=q+G|0,Y=Fe(Y^q,16),T=T+Y|0,G=Fe(G^T,12),q=q+G|0,Y=Fe(Y^q,8),T=T+Y|0,G=Fe(G^T,7),H=H+K|0,C=Fe(C^H,16),O=O+C|0,K=Fe(K^O,12),H=H+K|0,C=Fe(C^H,8),O=O+C|0,K=Fe(K^O,7),P=P+ce|0,z=Fe(z^P,16),M=M+z|0,ce=Fe(ce^M,12),P=P+ce|0,z=Fe(z^P,8),M=M+z|0,ce=Fe(ce^M,7),k=k+G|0,z=Fe(z^k,16),O=O+z|0,G=Fe(G^O,12),k=k+G|0,z=Fe(z^k,8),O=O+z|0,G=Fe(G^O,7),q=q+K|0,F=Fe(F^q,16),M=M+F|0,K=Fe(K^M,12),q=q+K|0,F=Fe(F^q,8),M=M+F|0,K=Fe(K^M,7),H=H+ce|0,Y=Fe(Y^H,16),ne=ne+Y|0,ce=Fe(ce^ne,12),H=H+ce|0,Y=Fe(Y^H,8),ne=ne+Y|0,ce=Fe(ce^ne,7),P=P+V|0,C=Fe(C^P,16),T=T+C|0,V=Fe(V^T,12),P=P+V|0,C=Fe(C^P,8),T=T+C|0,V=Fe(V^T,7);let J=0;r[J++]=l+k|0,r[J++]=u+q|0,r[J++]=d+H|0,r[J++]=h+P|0,r[J++]=p+V|0,r[J++]=y+G|0,r[J++]=b+K|0,r[J++]=w+ce|0,r[J++]=v+ne|0,r[J++]=E+T|0,r[J++]=_+O|0,r[J++]=R+M|0,r[J++]=D+F|0,r[J++]=I+Y|0,r[J++]=$+C|0,r[J++]=U+z|0}const qz=kz(zz,{counterRight:!1,counterLength:4,allowShortKeys:!1}),Hz=new Uint8Array(16),wS=(e,t)=>{e.update(t);const n=t.length%16;n&&e.update(Hz.subarray(n))},Fz=new Uint8Array(32);function vS(e,t,n,r,s){const a=e(t,n,Fz),l=jz.create(a);s&&wS(l,s),wS(l,r);const u=Dz(r.length,s?s.length:0,!0);l.update(u);const d=l.digest();return gc(a,u),d}const Vz=e=>(t,n,r)=>({encrypt(s,a){const l=s.length;a=yS(l+16,a,!1),a.set(s);const u=a.subarray(0,-16);e(t,n,u,u,1);const d=vS(e,t,n,u,r);return a.set(d,l),gc(d),a},decrypt(s,a){a=yS(s.length-16,a,!1);const l=s.subarray(0,-16),u=s.subarray(-16),d=vS(e,t,n,l,r);if(!xz(u,d))throw new Error("invalid tag");return a.set(s.subarray(0,-16)),e(t,n,a,a,1),gc(d),a}}),Gx=Tz({blockSize:64,nonceLength:12,tagLength:16},Vz(qz));let Kx=class extends $d{constructor(t,n){super(),this.finished=!1,this.destroyed=!1,xb(t);const r=Hr(n);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,a=new Uint8Array(s);a.set(r.length>s?t.create().update(r).digest():r);for(let l=0;l<a.length;l++)a[l]^=54;this.iHash.update(a),this.oHash=t.create();for(let l=0;l<a.length;l++)a[l]^=106;this.oHash.update(a),Dr(a)}update(t){return js(this),this.iHash.update(t),this}digestInto(t){js(this),Tr(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:a,blockLen:l,outputLen:u}=this;return t=t,t.finished=s,t.destroyed=a,t.blockLen=l,t.outputLen=u,t.oHash=n._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const kd=(e,t,n)=>new Kx(e,t).update(n).digest();kd.create=(e,t)=>new Kx(e,t);function Gz(e,t,n){return xb(e),n===void 0&&(n=new Uint8Array(e.outputLen)),kd(e,Hr(n),Hr(t))}const cm=Uint8Array.from([0]),ES=Uint8Array.of();function Kz(e,t,n,r=32){xb(e),Qi(r);const s=e.outputLen;if(r>255*s)throw new Error("Length should be <= 255*HashLen");const a=Math.ceil(r/s);n===void 0&&(n=ES);const l=new Uint8Array(a*s),u=kd.create(e,t),d=u._cloneInto(),h=new Uint8Array(u.outputLen);for(let p=0;p<a;p++)cm[0]=p+1,d.update(p===0?ES:h).update(n).update(cm).digestInto(h),l.set(h,s*p),u._cloneInto(d);return u.destroy(),d.destroy(),Dr(h,cm),l.slice(0,r)}const Yz=(e,t,n,r,s)=>Kz(e,Gz(e,t,n),r,s),Md=Pd,Nb=BigInt(0),y0=BigInt(1);function ad(e,t){if(typeof t!="boolean")throw new Error(e+" boolean expected, got "+t)}function yh(e){const t=e.toString(16);return t.length&1?"0"+t:t}function Yx(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return e===""?Nb:BigInt("0x"+e)}function Ld(e){return Yx(Eu(e))}function cd(e){return Tr(e),Yx(Eu(Uint8Array.from(e).reverse()))}function Ub(e,t){return Db(e.toString(16).padStart(t*2,"0"))}function Bb(e,t){return Ub(e,t).reverse()}function jn(e,t,n){let r;if(typeof t=="string")try{r=Db(t)}catch(a){throw new Error(e+" must be hex string or Uint8Array, cause: "+a)}else if(Ob(t))r=Uint8Array.from(t);else throw new Error(e+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(e+" of length "+n+" expected, got "+s);return r}const lm=e=>typeof e=="bigint"&&Nb<=e;function Wz(e,t,n){return lm(e)&&lm(t)&&lm(n)&&t<=e&&e<n}function m0(e,t,n,r){if(!Wz(t,n,r))throw new Error("expected valid "+e+": "+n+" <= n < "+r+", got "+t)}function Xz(e){let t;for(t=0;e>Nb;e>>=y0,t+=1);return t}const jd=e=>(y0<<BigInt(e))-y0;function Zz(e,t,n){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");const r=b=>new Uint8Array(b),s=b=>Uint8Array.of(b);let a=r(e),l=r(e),u=0;const d=()=>{a.fill(1),l.fill(0),u=0},h=(...b)=>n(l,a,...b),p=(b=r(0))=>{l=h(s(0),b),a=h(),b.length!==0&&(l=h(s(1),b),a=h())},y=()=>{if(u++>=1e3)throw new Error("drbg: tried 1000 values");let b=0;const w=[];for(;b<t;){a=h();const v=a.slice();w.push(v),b+=a.length}return xo(...w)};return(b,w)=>{d(),p(b);let v;for(;!(v=w(y()));)p();return d(),v}}function zd(e,t,n={}){if(!e||typeof e!="object")throw new Error("expected valid options object");function r(s,a,l){const u=e[s];if(l&&u===void 0)return;const d=typeof u;if(d!==a||u===null)throw new Error(`param "${s}" is invalid: expected ${a}, got ${d}`)}Object.entries(t).forEach(([s,a])=>r(s,a,!1)),Object.entries(n).forEach(([s,a])=>r(s,a,!0))}function _S(e){const t=new WeakMap;return(n,...r)=>{const s=t.get(n);if(s!==void 0)return s;const a=e(n,...r);return t.set(n,a),a}}const Hn=BigInt(0),On=BigInt(1),To=BigInt(2),Qz=BigInt(3),Wx=BigInt(4),Xx=BigInt(5),Zx=BigInt(8);function Or(e,t){const n=e%t;return n>=Hn?n:t+n}function jr(e,t,n){let r=e;for(;t-- >Hn;)r*=r,r%=n;return r}function SS(e,t){if(e===Hn)throw new Error("invert: expected non-zero number");if(t<=Hn)throw new Error("invert: expected positive modulus, got "+t);let n=Or(e,t),r=t,s=Hn,a=On;for(;n!==Hn;){const l=r/n,u=r%n,d=s-a*l;r=n,n=u,s=a,a=d}if(r!==On)throw new Error("invert: does not exist");return Or(s,t)}function Qx(e,t){const n=(e.ORDER+On)/Wx,r=e.pow(t,n);if(!e.eql(e.sqr(r),t))throw new Error("Cannot find square root");return r}function Jz(e,t){const n=(e.ORDER-Xx)/Zx,r=e.mul(t,To),s=e.pow(r,n),a=e.mul(t,s),l=e.mul(e.mul(a,To),s),u=e.mul(a,e.sub(l,e.ONE));if(!e.eql(e.sqr(u),t))throw new Error("Cannot find square root");return u}function eq(e){if(e<BigInt(3))throw new Error("sqrt is not defined for small field");let t=e-On,n=0;for(;t%To===Hn;)t/=To,n++;let r=To;const s=Tc(e);for(;AS(s,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return Qx;let a=s.pow(r,t);const l=(t+On)/To;return function(u,d){if(u.is0(d))return d;if(AS(u,d)!==1)throw new Error("Cannot find square root");let h=n,p=u.mul(u.ONE,a),y=u.pow(d,t),b=u.pow(d,l);for(;!u.eql(y,u.ONE);){if(u.is0(y))return u.ZERO;let w=1,v=u.sqr(y);for(;!u.eql(v,u.ONE);)if(w++,v=u.sqr(v),w===h)throw new Error("Cannot find square root");const E=On<<BigInt(h-w-1),_=u.pow(p,E);h=w,p=u.sqr(_),y=u.mul(y,p),b=u.mul(b,_)}return b}}function tq(e){return e%Wx===Qz?Qx:e%Zx===Xx?Jz:eq(e)}const nq=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function rq(e){const t={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},n=nq.reduce((r,s)=>(r[s]="function",r),t);return zd(e,n),e}function iq(e,t,n){if(n<Hn)throw new Error("invalid exponent, negatives unsupported");if(n===Hn)return e.ONE;if(n===On)return t;let r=e.ONE,s=t;for(;n>Hn;)n&On&&(r=e.mul(r,s)),s=e.sqr(s),n>>=On;return r}function Jx(e,t,n=!1){const r=new Array(t.length).fill(n?e.ZERO:void 0),s=t.reduce((l,u,d)=>e.is0(u)?l:(r[d]=l,e.mul(l,u)),e.ONE),a=e.inv(s);return t.reduceRight((l,u,d)=>e.is0(u)?l:(r[d]=e.mul(l,r[d]),e.mul(l,u)),a),r}function AS(e,t){const n=(e.ORDER-On)/To,r=e.pow(t,n),s=e.eql(r,e.ONE),a=e.eql(r,e.ZERO),l=e.eql(r,e.neg(e.ONE));if(!s&&!a&&!l)throw new Error("invalid Legendre symbol result");return s?1:a?0:-1}function sq(e,t){t!==void 0&&Qi(t);const n=t!==void 0?t:e.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function Tc(e,t,n=!1,r={}){if(e<=Hn)throw new Error("invalid field: expected ORDER > 0, got "+e);let s,a;if(typeof t=="object"&&t!=null){if(r.sqrt||n)throw new Error("cannot specify opts in two arguments");const p=t;p.BITS&&(s=p.BITS),p.sqrt&&(a=p.sqrt),typeof p.isLE=="boolean"&&(n=p.isLE)}else typeof t=="number"&&(s=t),r.sqrt&&(a=r.sqrt);const{nBitLength:l,nByteLength:u}=sq(e,s);if(u>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let d;const h=Object.freeze({ORDER:e,isLE:n,BITS:l,BYTES:u,MASK:jd(l),ZERO:Hn,ONE:On,create:p=>Or(p,e),isValid:p=>{if(typeof p!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof p);return Hn<=p&&p<e},is0:p=>p===Hn,isValidNot0:p=>!h.is0(p)&&h.isValid(p),isOdd:p=>(p&On)===On,neg:p=>Or(-p,e),eql:(p,y)=>p===y,sqr:p=>Or(p*p,e),add:(p,y)=>Or(p+y,e),sub:(p,y)=>Or(p-y,e),mul:(p,y)=>Or(p*y,e),pow:(p,y)=>iq(h,p,y),div:(p,y)=>Or(p*SS(y,e),e),sqrN:p=>p*p,addN:(p,y)=>p+y,subN:(p,y)=>p-y,mulN:(p,y)=>p*y,inv:p=>SS(p,e),sqrt:a||(p=>(d||(d=tq(e)),d(h,p))),toBytes:p=>n?Bb(p,u):Ub(p,u),fromBytes:p=>{if(p.length!==u)throw new Error("Field.fromBytes: expected "+u+" bytes, got "+p.length);return n?cd(p):Ld(p)},invertBatch:p=>Jx(h,p),cmov:(p,y,b)=>b?y:p});return Object.freeze(h)}function eT(e){if(typeof e!="bigint")throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function tT(e){const t=eT(e);return t+Math.ceil(t/2)}function oq(e,t,n=!1){const r=e.length,s=eT(t),a=tT(t);if(r<16||r<a||r>1024)throw new Error("expected "+a+"-1024 bytes of input, got "+r);const l=n?cd(e):Ld(e),u=Or(l,t-On)+On;return n?Bb(u,s):Ub(u,s)}const yc=BigInt(0),Do=BigInt(1);function iu(e,t){const n=t.negate();return e?n:t}function aq(e,t,n){const r=a=>a.pz,s=Jx(e.Fp,n.map(r));return n.map((a,l)=>a.toAffine(s[l])).map(e.fromAffine)}function nT(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+e)}function um(e,t){nT(e,t);const n=Math.ceil(t/e)+1,r=2**(e-1),s=2**e,a=jd(e),l=BigInt(e);return{windows:n,windowSize:r,mask:a,maxNumber:s,shiftBy:l}}function RS(e,t,n){const{windowSize:r,mask:s,maxNumber:a,shiftBy:l}=n;let u=Number(e&s),d=e>>l;u>r&&(u-=a,d+=Do);const h=t*r,p=h+Math.abs(u)-1,y=u===0,b=u<0,w=t%2!==0;return{nextN:d,offset:p,isZero:y,isNeg:b,isNegF:w,offsetF:h}}function cq(e,t){if(!Array.isArray(e))throw new Error("array expected");e.forEach((n,r)=>{if(!(n instanceof t))throw new Error("invalid point at index "+r)})}function lq(e,t){if(!Array.isArray(e))throw new Error("array of scalars expected");e.forEach((n,r)=>{if(!t.isValid(n))throw new Error("invalid scalar at index "+r)})}const fm=new WeakMap,rT=new WeakMap;function hm(e){return rT.get(e)||1}function OS(e){if(e!==yc)throw new Error("invalid wNAF")}function uq(e,t){return{constTimeNegate:iu,hasPrecomputes(n){return hm(n)!==1},unsafeLadder(n,r,s=e.ZERO){let a=n;for(;r>yc;)r&Do&&(s=s.add(a)),a=a.double(),r>>=Do;return s},precomputeWindow(n,r){const{windows:s,windowSize:a}=um(r,t),l=[];let u=n,d=u;for(let h=0;h<s;h++){d=u,l.push(d);for(let p=1;p<a;p++)d=d.add(u),l.push(d);u=d.double()}return l},wNAF(n,r,s){let a=e.ZERO,l=e.BASE;const u=um(n,t);for(let d=0;d<u.windows;d++){const{nextN:h,offset:p,isZero:y,isNeg:b,isNegF:w,offsetF:v}=RS(s,d,u);s=h,y?l=l.add(iu(w,r[v])):a=a.add(iu(b,r[p]))}return OS(s),{p:a,f:l}},wNAFUnsafe(n,r,s,a=e.ZERO){const l=um(n,t);for(let u=0;u<l.windows&&s!==yc;u++){const{nextN:d,offset:h,isZero:p,isNeg:y}=RS(s,u,l);if(s=d,!p){const b=r[h];a=a.add(y?b.negate():b)}}return OS(s),a},getPrecomputes(n,r,s){let a=fm.get(r);return a||(a=this.precomputeWindow(r,n),n!==1&&(typeof s=="function"&&(a=s(a)),fm.set(r,a))),a},wNAFCached(n,r,s){const a=hm(n);return this.wNAF(a,this.getPrecomputes(a,n,s),r)},wNAFCachedUnsafe(n,r,s,a){const l=hm(n);return l===1?this.unsafeLadder(n,r,a):this.wNAFUnsafe(l,this.getPrecomputes(l,n,s),r,a)},setWindowSize(n,r){nT(r,t),rT.set(n,r),fm.delete(n)}}}function fq(e,t,n,r){let s=t,a=e.ZERO,l=e.ZERO;for(;n>yc||r>yc;)n&Do&&(a=a.add(s)),r&Do&&(l=l.add(s)),s=s.double(),n>>=Do,r>>=Do;return{p1:a,p2:l}}function hq(e,t,n,r){cq(n,e),lq(r,t);const s=n.length,a=r.length;if(s!==a)throw new Error("arrays of points and scalars must have equal length");const l=e.ZERO,u=Xz(BigInt(s));let d=1;u>12?d=u-3:u>4?d=u-2:u>0&&(d=2);const h=jd(d),p=new Array(Number(h)+1).fill(l),y=Math.floor((t.BITS-1)/d)*d;let b=l;for(let w=y;w>=0;w-=d){p.fill(l);for(let E=0;E<a;E++){const _=r[E],R=Number(_>>BigInt(w)&h);p[R]=p[R].add(n[E])}let v=l;for(let E=p.length-1,_=l;E>0;E--)_=_.add(p[E]),v=v.add(_);if(b=b.add(v),w!==0)for(let E=0;E<d;E++)b=b.double()}return b}function xS(e,t){if(t){if(t.ORDER!==e)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return rq(t),t}else return Tc(e)}function dq(e,t,n={}){if(!t||typeof t!="object")throw new Error(`expected valid ${e} CURVE object`);for(const l of["p","n","h"]){const u=t[l];if(!(typeof u=="bigint"&&u>yc))throw new Error(`CURVE.${l} must be positive bigint`)}const r=xS(t.p,n.Fp),s=xS(t.n,n.Fn),a=["Gx","Gy","a","b"];for(const l of a)if(!r.isValid(t[l]))throw new Error(`CURVE.${l} must be valid field element of CURVE.Fp`);return{Fp:r,Fn:s}}BigInt(0),BigInt(1),BigInt(2),BigInt(8);const ql=BigInt(0),Fa=BigInt(1),mh=BigInt(2);function pq(e){return zd(e,{adjustScalarBytes:"function",powPminus2:"function"}),Object.freeze({...e})}function gq(e){const t=pq(e),{P:n,type:r,adjustScalarBytes:s,powPminus2:a,randomBytes:l}=t,u=r==="x25519";if(!u&&r!=="x448")throw new Error("invalid type");const d=l||xc,h=u?255:448,p=u?32:56,y=BigInt(u?9:5),b=BigInt(u?121665:39081),w=u?mh**BigInt(254):mh**BigInt(447),v=u?BigInt(8)*mh**BigInt(251)-Fa:BigInt(4)*mh**BigInt(445)-Fa,E=w+v+Fa,_=P=>Or(P,n),R=D(y);function D(P){return Bb(_(P),p)}function I(P){const V=jn("u coordinate",P,p);return u&&(V[31]&=127),_(cd(V))}function $(P){return cd(s(jn("scalar",P,p)))}function U(P,V){const G=H(I(V),$(P));if(G===ql)throw new Error("invalid private or public key received");return D(G)}function k(P){return U(P,R)}function q(P,V,G){const K=_(P*(V-G));return V=_(V-K),G=_(G+K),{x_2:V,x_3:G}}function H(P,V){m0("u",P,ql,n),m0("scalar",V,w,E);const G=V,K=P;let ce=Fa,ne=ql,T=P,O=Fa,M=ql;for(let Y=BigInt(h-1);Y>=ql;Y--){const C=G>>Y&Fa;M^=C,{x_2:ce,x_3:T}=q(M,ce,T),{x_2:ne,x_3:O}=q(M,ne,O),M=C;const z=ce+ne,J=_(z*z),se=ce-ne,re=_(se*se),ge=J-re,ye=T+O,De=T-O,_e=_(De*z),xe=_(ye*se),nt=_e+xe,bt=_e-xe;T=_(nt*nt),O=_(K*_(bt*bt)),ce=_(J*re),ne=_(ge*(J+_(b*ge)))}({x_2:ce,x_3:T}=q(M,ce,T)),{x_2:ne,x_3:O}=q(M,ne,O);const F=a(ne);return _(ce*F)}return{scalarMult:U,scalarMultBase:k,getSharedSecret:(P,V)=>U(P,V),getPublicKey:P=>k(P),utils:{randomPrivateKey:()=>d(p)},GuBytes:R.slice()}}BigInt(0);const yq=BigInt(1),TS=BigInt(2),mq=BigInt(3),bq=BigInt(5);BigInt(8);const iT={p:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function wq(e){const t=BigInt(10),n=BigInt(20),r=BigInt(40),s=BigInt(80),a=iT.p,l=e*e%a*e%a,u=jr(l,TS,a)*l%a,d=jr(u,yq,a)*e%a,h=jr(d,bq,a)*d%a,p=jr(h,t,a)*h%a,y=jr(p,n,a)*p%a,b=jr(y,r,a)*y%a,w=jr(b,s,a)*b%a,v=jr(w,s,a)*b%a,E=jr(v,t,a)*h%a;return{pow_p_5_8:jr(E,TS,a)*e%a,b2:l}}function vq(e){return e[0]&=248,e[31]&=127,e[31]|=64,e}const b0=(()=>{const e=iT.p;return gq({P:e,type:"x25519",powPminus2:t=>{const{pow_p_5_8:n,b2:r}=wq(t);return Or(jr(n,mq,e)*r,e)},adjustScalarBytes:vq})})();function DS(e){e.lowS!==void 0&&ad("lowS",e.lowS),e.prehash!==void 0&&ad("prehash",e.prehash)}class Eq extends Error{constructor(t=""){super(t)}}const qi={Err:Eq,_tlv:{encode:(e,t)=>{const{Err:n}=qi;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(t.length&1)throw new n("tlv.encode: unpadded data");const r=t.length/2,s=yh(r);if(s.length/2&128)throw new n("tlv.encode: long form length too big");const a=r>127?yh(s.length/2|128):"";return yh(e)+a+s+t},decode(e,t){const{Err:n}=qi;let r=0;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(t.length<2||t[r++]!==e)throw new n("tlv.decode: wrong tlv");const s=t[r++],a=!!(s&128);let l=0;if(!a)l=s;else{const d=s&127;if(!d)throw new n("tlv.decode(long): indefinite length not supported");if(d>4)throw new n("tlv.decode(long): byte length is too big");const h=t.subarray(r,r+d);if(h.length!==d)throw new n("tlv.decode: length bytes not complete");if(h[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const p of h)l=l<<8|p;if(r+=d,l<128)throw new n("tlv.decode(long): not minimal encoding")}const u=t.subarray(r,r+l);if(u.length!==l)throw new n("tlv.decode: wrong value length");return{v:u,l:t.subarray(r+l)}}},_int:{encode(e){const{Err:t}=qi;if(e<su)throw new t("integer: negative integers are not allowed");let n=yh(e);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new t("unexpected DER parsing assertion: unpadded hex");return n},decode(e){const{Err:t}=qi;if(e[0]&128)throw new t("invalid signature integer: negative");if(e[0]===0&&!(e[1]&128))throw new t("invalid signature integer: unnecessary leading zero");return Ld(e)}},toSig(e){const{Err:t,_int:n,_tlv:r}=qi,s=jn("signature",e),{v:a,l}=r.decode(48,s);if(l.length)throw new t("invalid signature: left bytes after parsing");const{v:u,l:d}=r.decode(2,a),{v:h,l:p}=r.decode(2,d);if(p.length)throw new t("invalid signature: left bytes after parsing");return{r:n.decode(u),s:n.decode(h)}},hexFromSig(e){const{_tlv:t,_int:n}=qi,r=t.encode(2,n.encode(e.r)),s=t.encode(2,n.encode(e.s)),a=r+s;return t.encode(48,a)}},su=BigInt(0),ou=BigInt(1),_q=BigInt(2),bh=BigInt(3),Sq=BigInt(4);function Aq(e,t,n){function r(s){const a=e.sqr(s),l=e.mul(a,s);return e.add(e.add(l,e.mul(s,t)),n)}return r}function sT(e,t,n){const{BYTES:r}=e;function s(a){let l;if(typeof a=="bigint")l=a;else{let u=jn("private key",a);if(t){if(!t.includes(u.length*2))throw new Error("invalid private key");const d=new Uint8Array(r);d.set(u,d.length-u.length),u=d}try{l=e.fromBytes(u)}catch{throw new Error(`invalid private key: expected ui8a of size ${r}, got ${typeof a}`)}}if(n&&(l=e.create(l)),!e.isValidNot0(l))throw new Error("invalid private key: out of range [1..N-1]");return l}return s}function Rq(e,t={}){const{Fp:n,Fn:r}=dq("weierstrass",e,t),{h:s,n:a}=e;zd(t,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:l}=t;if(l&&(!n.is0(e.a)||typeof l.beta!="bigint"||typeof l.splitScalar!="function"))throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function');function u(){if(!n.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function d(H,P,V){const{x:G,y:K}=P.toAffine(),ce=n.toBytes(G);if(ad("isCompressed",V),V){u();const ne=!n.isOdd(K);return xo(oT(ne),ce)}else return xo(Uint8Array.of(4),ce,n.toBytes(K))}function h(H){Tr(H);const P=n.BYTES,V=P+1,G=2*P+1,K=H.length,ce=H[0],ne=H.subarray(1);if(K===V&&(ce===2||ce===3)){const T=n.fromBytes(ne);if(!n.isValid(T))throw new Error("bad point: is not on curve, wrong x");const O=b(T);let M;try{M=n.sqrt(O)}catch(Y){const C=Y instanceof Error?": "+Y.message:"";throw new Error("bad point: is not on curve, sqrt error"+C)}u();const F=n.isOdd(M);return(ce&1)===1!==F&&(M=n.neg(M)),{x:T,y:M}}else if(K===G&&ce===4){const T=n.fromBytes(ne.subarray(P*0,P*1)),O=n.fromBytes(ne.subarray(P*1,P*2));if(!w(T,O))throw new Error("bad point: is not on curve");return{x:T,y:O}}else throw new Error(`bad point: got length ${K}, expected compressed=${V} or uncompressed=${G}`)}const p=t.toBytes||d,y=t.fromBytes||h,b=Aq(n,e.a,e.b);function w(H,P){const V=n.sqr(P),G=b(H);return n.eql(V,G)}if(!w(e.Gx,e.Gy))throw new Error("bad curve params: generator point");const v=n.mul(n.pow(e.a,bh),Sq),E=n.mul(n.sqr(e.b),BigInt(27));if(n.is0(n.add(v,E)))throw new Error("bad curve params: a or b");function _(H,P,V=!1){if(!n.isValid(P)||V&&n.is0(P))throw new Error(`bad point coordinate ${H}`);return P}function R(H){if(!(H instanceof U))throw new Error("ProjectivePoint expected")}const D=_S((H,P)=>{const{px:V,py:G,pz:K}=H;if(n.eql(K,n.ONE))return{x:V,y:G};const ce=H.is0();P==null&&(P=ce?n.ONE:n.inv(K));const ne=n.mul(V,P),T=n.mul(G,P),O=n.mul(K,P);if(ce)return{x:n.ZERO,y:n.ZERO};if(!n.eql(O,n.ONE))throw new Error("invZ was invalid");return{x:ne,y:T}}),I=_S(H=>{if(H.is0()){if(t.allowInfinityPoint&&!n.is0(H.py))return;throw new Error("bad point: ZERO")}const{x:P,y:V}=H.toAffine();if(!n.isValid(P)||!n.isValid(V))throw new Error("bad point: x or y not field elements");if(!w(P,V))throw new Error("bad point: equation left != right");if(!H.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function $(H,P,V,G,K){return V=new U(n.mul(V.px,H),V.py,V.pz),P=iu(G,P),V=iu(K,V),P.add(V)}class U{constructor(P,V,G){this.px=_("x",P),this.py=_("y",V,!0),this.pz=_("z",G),Object.freeze(this)}static fromAffine(P){const{x:V,y:G}=P||{};if(!P||!n.isValid(V)||!n.isValid(G))throw new Error("invalid affine point");if(P instanceof U)throw new Error("projective point not allowed");return n.is0(V)&&n.is0(G)?U.ZERO:new U(V,G,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(P){return aq(U,"pz",P)}static fromBytes(P){return Tr(P),U.fromHex(P)}static fromHex(P){const V=U.fromAffine(y(jn("pointHex",P)));return V.assertValidity(),V}static fromPrivateKey(P){const V=sT(r,t.allowedPrivateKeyLengths,t.wrapPrivateKey);return U.BASE.multiply(V(P))}static msm(P,V){return hq(U,r,P,V)}precompute(P=8,V=!0){return q.setWindowSize(this,P),V||this.multiply(bh),this}_setWindowSize(P){this.precompute(P)}assertValidity(){I(this)}hasEvenY(){const{y:P}=this.toAffine();if(!n.isOdd)throw new Error("Field doesn't support isOdd");return!n.isOdd(P)}equals(P){R(P);const{px:V,py:G,pz:K}=this,{px:ce,py:ne,pz:T}=P,O=n.eql(n.mul(V,T),n.mul(ce,K)),M=n.eql(n.mul(G,T),n.mul(ne,K));return O&&M}negate(){return new U(this.px,n.neg(this.py),this.pz)}double(){const{a:P,b:V}=e,G=n.mul(V,bh),{px:K,py:ce,pz:ne}=this;let T=n.ZERO,O=n.ZERO,M=n.ZERO,F=n.mul(K,K),Y=n.mul(ce,ce),C=n.mul(ne,ne),z=n.mul(K,ce);return z=n.add(z,z),M=n.mul(K,ne),M=n.add(M,M),T=n.mul(P,M),O=n.mul(G,C),O=n.add(T,O),T=n.sub(Y,O),O=n.add(Y,O),O=n.mul(T,O),T=n.mul(z,T),M=n.mul(G,M),C=n.mul(P,C),z=n.sub(F,C),z=n.mul(P,z),z=n.add(z,M),M=n.add(F,F),F=n.add(M,F),F=n.add(F,C),F=n.mul(F,z),O=n.add(O,F),C=n.mul(ce,ne),C=n.add(C,C),F=n.mul(C,z),T=n.sub(T,F),M=n.mul(C,Y),M=n.add(M,M),M=n.add(M,M),new U(T,O,M)}add(P){R(P);const{px:V,py:G,pz:K}=this,{px:ce,py:ne,pz:T}=P;let O=n.ZERO,M=n.ZERO,F=n.ZERO;const Y=e.a,C=n.mul(e.b,bh);let z=n.mul(V,ce),J=n.mul(G,ne),se=n.mul(K,T),re=n.add(V,G),ge=n.add(ce,ne);re=n.mul(re,ge),ge=n.add(z,J),re=n.sub(re,ge),ge=n.add(V,K);let ye=n.add(ce,T);return ge=n.mul(ge,ye),ye=n.add(z,se),ge=n.sub(ge,ye),ye=n.add(G,K),O=n.add(ne,T),ye=n.mul(ye,O),O=n.add(J,se),ye=n.sub(ye,O),F=n.mul(Y,ge),O=n.mul(C,se),F=n.add(O,F),O=n.sub(J,F),F=n.add(J,F),M=n.mul(O,F),J=n.add(z,z),J=n.add(J,z),se=n.mul(Y,se),ge=n.mul(C,ge),J=n.add(J,se),se=n.sub(z,se),se=n.mul(Y,se),ge=n.add(ge,se),z=n.mul(J,ge),M=n.add(M,z),z=n.mul(ye,ge),O=n.mul(re,O),O=n.sub(O,z),z=n.mul(re,J),F=n.mul(ye,F),F=n.add(F,z),new U(O,M,F)}subtract(P){return this.add(P.negate())}is0(){return this.equals(U.ZERO)}multiply(P){const{endo:V}=t;if(!r.isValidNot0(P))throw new Error("invalid scalar: out of range");let G,K;const ce=ne=>q.wNAFCached(this,ne,U.normalizeZ);if(V){const{k1neg:ne,k1:T,k2neg:O,k2:M}=V.splitScalar(P),{p:F,f:Y}=ce(T),{p:C,f:z}=ce(M);K=Y.add(z),G=$(V.beta,F,C,ne,O)}else{const{p:ne,f:T}=ce(P);G=ne,K=T}return U.normalizeZ([G,K])[0]}multiplyUnsafe(P){const{endo:V}=t,G=this;if(!r.isValid(P))throw new Error("invalid scalar: out of range");if(P===su||G.is0())return U.ZERO;if(P===ou)return G;if(q.hasPrecomputes(this))return this.multiply(P);if(V){const{k1neg:K,k1:ce,k2neg:ne,k2:T}=V.splitScalar(P),{p1:O,p2:M}=fq(U,G,ce,T);return $(V.beta,O,M,K,ne)}else return q.wNAFCachedUnsafe(G,P)}multiplyAndAddUnsafe(P,V,G){const K=this.multiplyUnsafe(V).add(P.multiplyUnsafe(G));return K.is0()?void 0:K}toAffine(P){return D(this,P)}isTorsionFree(){const{isTorsionFree:P}=t;return s===ou?!0:P?P(U,this):q.wNAFCachedUnsafe(this,a).is0()}clearCofactor(){const{clearCofactor:P}=t;return s===ou?this:P?P(U,this):this.multiplyUnsafe(s)}toBytes(P=!0){return ad("isCompressed",P),this.assertValidity(),p(U,this,P)}toRawBytes(P=!0){return this.toBytes(P)}toHex(P=!0){return Eu(this.toBytes(P))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}U.BASE=new U(e.Gx,e.Gy,n.ONE),U.ZERO=new U(n.ZERO,n.ONE,n.ZERO),U.Fp=n,U.Fn=r;const k=r.BITS,q=uq(U,t.endo?Math.ceil(k/2):k);return U}function oT(e){return Uint8Array.of(e?2:3)}function Oq(e,t,n={}){zd(t,{hash:"function"},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const r=t.randomBytes||xc,s=t.hmac||((G,...K)=>kd(t.hash,G,xo(...K))),{Fp:a,Fn:l}=e,{ORDER:u,BITS:d}=l;function h(G){const K=u>>ou;return G>K}function p(G){return h(G)?l.neg(G):G}function y(G,K){if(!l.isValidNot0(K))throw new Error(`invalid signature ${G}: out of range 1..CURVE.n`)}class b{constructor(K,ce,ne){y("r",K),y("s",ce),this.r=K,this.s=ce,ne!=null&&(this.recovery=ne),Object.freeze(this)}static fromCompact(K){const ce=l.BYTES,ne=jn("compactSignature",K,ce*2);return new b(l.fromBytes(ne.subarray(0,ce)),l.fromBytes(ne.subarray(ce,ce*2)))}static fromDER(K){const{r:ce,s:ne}=qi.toSig(jn("DER",K));return new b(ce,ne)}assertValidity(){}addRecoveryBit(K){return new b(this.r,this.s,K)}recoverPublicKey(K){const ce=a.ORDER,{r:ne,s:T,recovery:O}=this;if(O==null||![0,1,2,3].includes(O))throw new Error("recovery id invalid");if(u*_q<ce&&O>1)throw new Error("recovery id is ambiguous for h>1 curve");const M=O===2||O===3?ne+u:ne;if(!a.isValid(M))throw new Error("recovery id 2 or 3 invalid");const F=a.toBytes(M),Y=e.fromHex(xo(oT((O&1)===0),F)),C=l.inv(M),z=I(jn("msgHash",K)),J=l.create(-z*C),se=l.create(T*C),re=e.BASE.multiplyUnsafe(J).add(Y.multiplyUnsafe(se));if(re.is0())throw new Error("point at infinify");return re.assertValidity(),re}hasHighS(){return h(this.s)}normalizeS(){return this.hasHighS()?new b(this.r,l.neg(this.s),this.recovery):this}toBytes(K){if(K==="compact")return xo(l.toBytes(this.r),l.toBytes(this.s));if(K==="der")return Db(qi.hexFromSig(this));throw new Error("invalid format")}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return Eu(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return Eu(this.toBytes("compact"))}}const w=sT(l,n.allowedPrivateKeyLengths,n.wrapPrivateKey),v={isValidPrivateKey(G){try{return w(G),!0}catch{return!1}},normPrivateKeyToScalar:w,randomPrivateKey:()=>{const G=u;return oq(r(tT(G)),G)},precompute(G=8,K=e.BASE){return K.precompute(G,!1)}};function E(G,K=!0){return e.fromPrivateKey(G).toBytes(K)}function _(G){if(typeof G=="bigint")return!1;if(G instanceof e)return!0;const K=jn("key",G).length,ce=a.BYTES,ne=ce+1,T=2*ce+1;if(!(n.allowedPrivateKeyLengths||l.BYTES===ne))return K===ne||K===T}function R(G,K,ce=!0){if(_(G)===!0)throw new Error("first arg must be private key");if(_(K)===!1)throw new Error("second arg must be public key");return e.fromHex(K).multiply(w(G)).toBytes(ce)}const D=t.bits2int||function(G){if(G.length>8192)throw new Error("input is too large");const K=Ld(G),ce=G.length*8-d;return ce>0?K>>BigInt(ce):K},I=t.bits2int_modN||function(G){return l.create(D(G))},$=jd(d);function U(G){return m0("num < 2^"+d,G,su,$),l.toBytes(G)}function k(G,K,ce=q){if(["recovered","canonical"].some(re=>re in ce))throw new Error("sign() legacy options not supported");const{hash:ne}=t;let{lowS:T,prehash:O,extraEntropy:M}=ce;T==null&&(T=!0),G=jn("msgHash",G),DS(ce),O&&(G=jn("prehashed msgHash",ne(G)));const F=I(G),Y=w(K),C=[U(Y),U(F)];if(M!=null&&M!==!1){const re=M===!0?r(a.BYTES):M;C.push(jn("extraEntropy",re))}const z=xo(...C),J=F;function se(re){const ge=D(re);if(!l.isValidNot0(ge))return;const ye=l.inv(ge),De=e.BASE.multiply(ge).toAffine(),_e=l.create(De.x);if(_e===su)return;const xe=l.create(ye*l.create(J+_e*Y));if(xe===su)return;let nt=(De.x===_e?0:2)|Number(De.y&ou),bt=xe;return T&&h(xe)&&(bt=p(xe),nt^=1),new b(_e,bt,nt)}return{seed:z,k2sig:se}}const q={lowS:t.lowS,prehash:!1},H={lowS:t.lowS,prehash:!1};function P(G,K,ce=q){const{seed:ne,k2sig:T}=k(G,K,ce);return Zz(t.hash.outputLen,l.BYTES,s)(ne,T)}e.BASE.precompute(8);function V(G,K,ce,ne=H){const T=G;K=jn("msgHash",K),ce=jn("publicKey",ce),DS(ne);const{lowS:O,prehash:M,format:F}=ne;if("strict"in ne)throw new Error("options.strict was renamed to lowS");if(F!==void 0&&!["compact","der","js"].includes(F))throw new Error('format must be "compact", "der" or "js"');const Y=typeof T=="string"||Ob(T),C=!Y&&!F&&typeof T=="object"&&T!==null&&typeof T.r=="bigint"&&typeof T.s=="bigint";if(!Y&&!C)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let z,J;try{if(C)if(F===void 0||F==="js")z=new b(T.r,T.s);else throw new Error("invalid format");if(Y){try{F!=="compact"&&(z=b.fromDER(T))}catch(nt){if(!(nt instanceof qi.Err))throw nt}!z&&F!=="der"&&(z=b.fromCompact(T))}J=e.fromHex(ce)}catch{return!1}if(!z||O&&z.hasHighS())return!1;M&&(K=t.hash(K));const{r:se,s:re}=z,ge=I(K),ye=l.inv(re),De=l.create(ge*ye),_e=l.create(se*ye),xe=e.BASE.multiplyUnsafe(De).add(J.multiplyUnsafe(_e));return xe.is0()?!1:l.create(xe.x)===se}return Object.freeze({getPublicKey:E,getSharedSecret:R,sign:P,verify:V,utils:v,Point:e,Signature:b})}function xq(e){const t={a:e.a,b:e.b,p:e.Fp.ORDER,n:e.n,h:e.h,Gx:e.Gx,Gy:e.Gy},n=e.Fp,r=Tc(t.n,e.nBitLength),s={Fp:n,Fn:r,allowedPrivateKeyLengths:e.allowedPrivateKeyLengths,allowInfinityPoint:e.allowInfinityPoint,endo:e.endo,wrapPrivateKey:e.wrapPrivateKey,isTorsionFree:e.isTorsionFree,clearCofactor:e.clearCofactor,fromBytes:e.fromBytes,toBytes:e.toBytes};return{CURVE:t,curveOpts:s}}function Tq(e){const{CURVE:t,curveOpts:n}=xq(e),r={hash:e.hash,hmac:e.hmac,randomBytes:e.randomBytes,lowS:e.lowS,bits2int:e.bits2int,bits2int_modN:e.bits2int_modN};return{CURVE:t,curveOpts:n,ecdsaOpts:r}}function Dq(e,t){return Object.assign({},t,{ProjectivePoint:t.Point,CURVE:e})}function Iq(e){const{CURVE:t,curveOpts:n,ecdsaOpts:r}=Tq(e),s=Rq(t,n),a=Oq(s,r,n);return Dq(e,a)}function w0(e,t){const n=r=>Iq({...e,hash:r});return{...n(t),create:n}}const aT={p:BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff"),n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),h:BigInt(1),a:BigInt("0xffffffff00000001000000000000000000000000fffffffffffffffffffffffc"),b:BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5")},cT={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000ffffffff"),n:BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffc7634d81f4372ddf581a0db248b0a77aecec196accc52973"),h:BigInt(1),a:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000fffffffc"),b:BigInt("0xb3312fa7e23ee7e4988e056be3f82d19181d9c6efe8141120314088f5013875ac656398d8a2ed19d2a85c8edd3ec2aef"),Gx:BigInt("0xaa87ca22be8b05378eb1c71ef320ad746e1d3b628ba79b9859f741e082542a385502f25dbf55296c3a545e3872760ab7"),Gy:BigInt("0x3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f")},lT={p:BigInt("0x1ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),n:BigInt("0x01fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffa51868783bf2f966b7fcc0148f709a5d03bb5c9b8899c47aebb6fb71e91386409"),h:BigInt(1),a:BigInt("0x1fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc"),b:BigInt("0x0051953eb9618e1c9a1f929a21a0b68540eea2da725b99b315f3b8b489918ef109e156193951ec7e937b1652c0bd3bb1bf073573df883d2c34f1ef451fd46b503f00"),Gx:BigInt("0x00c6858e06b70404e9cd9e3ecb662395b4429c648139053fb521f828af606b4d3dbaa14b5e77efe75928fe1dc127a2ffa8de3348b3c1856a429bf97e7e31c2e5bd66"),Gy:BigInt("0x011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650")},Cq=Tc(aT.p),Nq=Tc(cT.p),Uq=Tc(lT.p),Bq=w0({...aT,Fp:Cq,lowS:!1},Pd);w0({...cT,Fp:Nq,lowS:!1},qj),w0({...lT,Fp:Uq,lowS:!1,allowedPrivateKeyLengths:[130,131,132]},zj);const $q=Bq,uT="base10",xn="base16",qr="base64pad",$s="base64url",Lu="utf8",fT=0,Ki=1,ju=2,Pq=0,IS=1,au=12,$b=32;function kq(){const e=b0.utils.randomPrivateKey(),t=b0.getPublicKey(e);return{privateKey:Fn(e,xn),publicKey:Fn(t,xn)}}function v0(){const e=xc($b);return Fn(e,xn)}function Mq(e,t){const n=b0.getSharedSecret(xr(e,xn),xr(t,xn)),r=Yz(Md,n,void 0,void 0,$b);return Fn(r,xn)}function jh(e){const t=Md(xr(e,xn));return Fn(t,xn)}function ai(e){const t=Md(xr(e,Lu));return Fn(t,xn)}function hT(e){return xr(`${e}`,uT)}function Mo(e){return Number(Fn(e,uT))}function dT(e){return e.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function pT(e){const t=e.replace(/-/g,"+").replace(/_/g,"/"),n=(4-t.length%4)%4;return t+"=".repeat(n)}function Lq(e){const t=hT(typeof e.type<"u"?e.type:fT);if(Mo(t)===Ki&&typeof e.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const n=typeof e.senderPublicKey<"u"?xr(e.senderPublicKey,xn):void 0,r=typeof e.iv<"u"?xr(e.iv,xn):xc(au),s=xr(e.symKey,xn),a=Gx(s,r).encrypt(xr(e.message,Lu)),l=gT({type:t,sealed:a,iv:r,senderPublicKey:n});return e.encoding===$s?dT(l):l}function jq(e){const t=xr(e.symKey,xn),{sealed:n,iv:r}=Su({encoded:e.encoded,encoding:e.encoding}),s=Gx(t,r).decrypt(n);if(s===null)throw new Error("Failed to decrypt");return Fn(s,Lu)}function zq(e,t){const n=hT(ju),r=xc(au),s=xr(e,Lu),a=gT({type:n,sealed:s,iv:r});return t===$s?dT(a):a}function qq(e,t){const{sealed:n}=Su({encoded:e,encoding:t});return Fn(n,Lu)}function gT(e){if(Mo(e.type)===ju)return Fn(ru([e.type,e.sealed]),qr);if(Mo(e.type)===Ki){if(typeof e.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return Fn(ru([e.type,e.senderPublicKey,e.iv,e.sealed]),qr)}return Fn(ru([e.type,e.iv,e.sealed]),qr)}function Su(e){const t=(e.encoding||qr)===$s?pT(e.encoded):e.encoded,n=xr(t,qr),r=n.slice(Pq,IS),s=IS;if(Mo(r)===Ki){const d=s+$b,h=d+au,p=n.slice(s,d),y=n.slice(d,h),b=n.slice(h);return{type:r,sealed:b,iv:y,senderPublicKey:p}}if(Mo(r)===ju){const d=n.slice(s),h=xc(au);return{type:r,sealed:d,iv:h}}const a=s+au,l=n.slice(s,a),u=n.slice(a);return{type:r,sealed:u,iv:l}}function Hq(e,t){const n=Su({encoded:e,encoding:t?.encoding});return yT({type:Mo(n.type),senderPublicKey:typeof n.senderPublicKey<"u"?Fn(n.senderPublicKey,xn):void 0,receiverPublicKey:t?.receiverPublicKey})}function yT(e){const t=e?.type||fT;if(t===Ki){if(typeof e?.senderPublicKey>"u")throw new Error("missing sender public key");if(typeof e?.receiverPublicKey>"u")throw new Error("missing receiver public key")}return{type:t,senderPublicKey:e?.senderPublicKey,receiverPublicKey:e?.receiverPublicKey}}function CS(e){return e.type===Ki&&typeof e.senderPublicKey=="string"&&typeof e.receiverPublicKey=="string"}function NS(e){return e.type===ju}function Fq(e){const t=Buffer.from(e.x,"base64"),n=Buffer.from(e.y,"base64");return ru([new Uint8Array([4]),t,n])}function Vq(e,t){const[n,r,s]=e.split("."),a=Buffer.from(pT(s),"base64");if(a.length!==64)throw new Error("Invalid signature length");const l=a.slice(0,32),u=a.slice(32,64),d=`${n}.${r}`,h=Md(d),p=Fq(t);if(!$q.verify(ru([l,u]),h,p))throw new Error("Invalid signature");return a0(e).payload}const Gq="irn";function ld(e){return e?.relay||{protocol:Gq}}function Ql(e){const t=T9[e];if(typeof t>"u")throw new Error(`Relay Protocol not supported: ${e}`);return t}function Kq(e,t="-"){const n={},r="relay"+t;return Object.keys(e).forEach(s=>{if(s.startsWith(r)){const a=s.replace(r,""),l=e[s];n[a]=l}}),n}function US(e){if(!e.includes("wc:")){const h=xx(e);h!=null&&h.includes("wc:")&&(e=h)}e=e.includes("wc://")?e.replace("wc://",""):e,e=e.includes("wc:")?e.replace("wc:",""):e;const t=e.indexOf(":"),n=e.indexOf("?")!==-1?e.indexOf("?"):void 0,r=e.substring(0,t),s=e.substring(t+1,n).split("@"),a=typeof n<"u"?e.substring(n):"",l=new URLSearchParams(a),u={};l.forEach((h,p)=>{u[p]=h});const d=typeof u.methods=="string"?u.methods.split(","):void 0;return{protocol:r,topic:Yq(s[0]),version:parseInt(s[1],10),symKey:u.symKey,relay:Kq(u),methods:d,expiryTimestamp:u.expiryTimestamp?parseInt(u.expiryTimestamp,10):void 0}}function Yq(e){return e.startsWith("//")?e.substring(2):e}function Wq(e,t="-"){const n="relay",r={};return Object.keys(e).forEach(s=>{const a=s,l=n+t+a;e[a]&&(r[l]=e[a])}),r}function BS(e){const t=new URLSearchParams,n=Wq(e.relay);Object.keys(n).sort().forEach(s=>{t.set(s,n[s])}),t.set("symKey",e.symKey),e.expiryTimestamp&&t.set("expiryTimestamp",e.expiryTimestamp.toString()),e.methods&&t.set("methods",e.methods.join(","));const r=t.toString();return`${e.protocol}:${e.topic}@${e.version}?${r}`}function wh(e,t,n){return`${e}?wc_ev=${n}&topic=${t}`}var Xq=Object.defineProperty,Zq=Object.defineProperties,Qq=Object.getOwnPropertyDescriptors,$S=Object.getOwnPropertySymbols,Jq=Object.prototype.hasOwnProperty,eH=Object.prototype.propertyIsEnumerable,PS=(e,t,n)=>t in e?Xq(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,tH=(e,t)=>{for(var n in t||(t={}))Jq.call(t,n)&&PS(e,n,t[n]);if($S)for(var n of $S(t))eH.call(t,n)&&PS(e,n,t[n]);return e},nH=(e,t)=>Zq(e,Qq(t));function Dc(e){const t=[];return e.forEach(n=>{const[r,s]=n.split(":");t.push(`${r}:${s}`)}),t}function rH(e){const t=[];return Object.values(e).forEach(n=>{t.push(...Dc(n.accounts))}),t}function iH(e,t){const n=[];return Object.values(e).forEach(r=>{Dc(r.accounts).includes(t)&&n.push(...r.methods)}),n}function sH(e,t){const n=[];return Object.values(e).forEach(r=>{Dc(r.accounts).includes(t)&&n.push(...r.events)}),n}function qd(e){return e.includes(":")}function cc(e){return qd(e)?e.split(":")[0]:e}function kS(e){var t,n,r;const s={};if(!fi(e))return s;for(const[a,l]of Object.entries(e)){const u=qd(a)?[a]:l.chains,d=l.methods||[],h=l.events||[],p=cc(a);s[p]=nH(tH({},s[p]),{chains:ui(u,(t=s[p])==null?void 0:t.chains),methods:ui(d,(n=s[p])==null?void 0:n.methods),events:ui(h,(r=s[p])==null?void 0:r.events)})}return s}function oH(e){const t={};return e?.forEach(n=>{var r;const[s,a]=n.split(":");t[s]||(t[s]={accounts:[],chains:[],events:[],methods:[]}),t[s].accounts.push(n),(r=t[s].chains)==null||r.push(`${s}:${a}`)}),t}function MS(e,t){t=t.map(r=>r.replace("did:pkh:",""));const n=oH(t);for(const[r,s]of Object.entries(n))s.methods?s.methods=ui(s.methods,e):s.methods=e,s.events=["chainChanged","accountsChanged"];return n}function aH(e,t){var n,r,s,a,l,u;const d=kS(e),h=kS(t),p={},y=Object.keys(d).concat(Object.keys(h));for(const b of y)p[b]={chains:ui((n=d[b])==null?void 0:n.chains,(r=h[b])==null?void 0:r.chains),methods:ui((s=d[b])==null?void 0:s.methods,(a=h[b])==null?void 0:a.methods),events:ui((l=d[b])==null?void 0:l.events,(u=h[b])==null?void 0:u.events)};return p}const cH={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},lH={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function be(e,t){const{message:n,code:r}=lH[e];return{message:t?`${n} ${t}`:n,code:r}}function vt(e,t){const{message:n,code:r}=cH[e];return{message:t?`${n} ${t}`:n,code:r}}function Yi(e,t){return!!Array.isArray(e)}function fi(e){return Object.getPrototypeOf(e)===Object.prototype&&Object.keys(e).length}function cn(e){return typeof e>"u"}function Bt(e,t){return t&&cn(e)?!0:typeof e=="string"&&!!e.trim().length}function Pb(e,t){return t&&cn(e)?!0:typeof e=="number"&&!isNaN(e)}function uH(e,t){const{requiredNamespaces:n}=t,r=Object.keys(e.namespaces),s=Object.keys(n);let a=!0;return Oo(s,r)?(r.forEach(l=>{const{accounts:u,methods:d,events:h}=e.namespaces[l],p=Dc(u),y=n[l];(!Oo(_x(l,y),p)||!Oo(y.methods,d)||!Oo(y.events,h))&&(a=!1)}),a):!1}function ud(e){return Bt(e,!1)&&e.includes(":")?e.split(":").length===2:!1}function fH(e){if(Bt(e,!1)&&e.includes(":")){const t=e.split(":");if(t.length===3){const n=t[0]+":"+t[1];return!!t[2]&&ud(n)}}return!1}function hH(e){function t(n){try{return typeof new URL(n)<"u"}catch{return!1}}try{if(Bt(e,!1)){if(t(e))return!0;const n=xx(e);return t(n)}}catch{}return!1}function dH(e){var t;return(t=e?.proposer)==null?void 0:t.publicKey}function pH(e){return e?.topic}function gH(e,t){let n=null;return Bt(e?.publicKey,!1)||(n=be("MISSING_OR_INVALID",`${t} controller public key should be a string`)),n}function LS(e){let t=!0;return Yi(e)?e.length&&(t=e.every(n=>Bt(n,!1))):t=!1,t}function yH(e,t,n){let r=null;return Yi(t)&&t.length?t.forEach(s=>{r||ud(s)||(r=vt("UNSUPPORTED_CHAINS",`${n}, chain ${s} should be a string and conform to "namespace:chainId" format`))}):ud(e)||(r=vt("UNSUPPORTED_CHAINS",`${n}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),r}function mH(e,t,n){let r=null;return Object.entries(e).forEach(([s,a])=>{if(r)return;const l=yH(s,_x(s,a),`${t} ${n}`);l&&(r=l)}),r}function bH(e,t){let n=null;return Yi(e)?e.forEach(r=>{n||fH(r)||(n=vt("UNSUPPORTED_ACCOUNTS",`${t}, account ${r} should be a string and conform to "namespace:chainId:address" format`))}):n=vt("UNSUPPORTED_ACCOUNTS",`${t}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),n}function wH(e,t){let n=null;return Object.values(e).forEach(r=>{if(n)return;const s=bH(r?.accounts,`${t} namespace`);s&&(n=s)}),n}function vH(e,t){let n=null;return LS(e?.methods)?LS(e?.events)||(n=vt("UNSUPPORTED_EVENTS",`${t}, events should be an array of strings or empty array for no events`)):n=vt("UNSUPPORTED_METHODS",`${t}, methods should be an array of strings or empty array for no methods`),n}function mT(e,t){let n=null;return Object.values(e).forEach(r=>{if(n)return;const s=vH(r,`${t}, namespace`);s&&(n=s)}),n}function EH(e,t,n){let r=null;if(e&&fi(e)){const s=mT(e,t);s&&(r=s);const a=mH(e,t,n);a&&(r=a)}else r=be("MISSING_OR_INVALID",`${t}, ${n} should be an object with data`);return r}function dm(e,t){let n=null;if(e&&fi(e)){const r=mT(e,t);r&&(n=r);const s=wH(e,t);s&&(n=s)}else n=be("MISSING_OR_INVALID",`${t}, namespaces should be an object with data`);return n}function bT(e){return Bt(e.protocol,!0)}function _H(e,t){let n=!1;return e?e&&Yi(e)&&e.length&&e.forEach(r=>{n=bT(r)}):n=!0,n}function SH(e){return typeof e=="number"}function Ln(e){return typeof e<"u"&&typeof e!==null}function AH(e){return!(!e||typeof e!="object"||!e.code||!Pb(e.code,!1)||!e.message||!Bt(e.message,!1))}function RH(e){return!(cn(e)||!Bt(e.method,!1))}function OH(e){return!(cn(e)||cn(e.result)&&cn(e.error)||!Pb(e.id,!1)||!Bt(e.jsonrpc,!1))}function xH(e){return!(cn(e)||!Bt(e.name,!1))}function jS(e,t){return!(!ud(t)||!rH(e).includes(t))}function TH(e,t,n){return Bt(n,!1)?iH(e,t).includes(n):!1}function DH(e,t,n){return Bt(n,!1)?sH(e,t).includes(n):!1}function zS(e,t,n){let r=null;const s=IH(e),a=CH(t),l=Object.keys(s),u=Object.keys(a),d=qS(Object.keys(e)),h=qS(Object.keys(t)),p=d.filter(y=>!h.includes(y));return p.length&&(r=be("NON_CONFORMING_NAMESPACES",`${n} namespaces keys don't satisfy requiredNamespaces.
      Required: ${p.toString()}
      Received: ${Object.keys(t).toString()}`)),Oo(l,u)||(r=be("NON_CONFORMING_NAMESPACES",`${n} namespaces chains don't satisfy required namespaces.
      Required: ${l.toString()}
      Approved: ${u.toString()}`)),Object.keys(t).forEach(y=>{if(!y.includes(":")||r)return;const b=Dc(t[y].accounts);b.includes(y)||(r=be("NON_CONFORMING_NAMESPACES",`${n} namespaces accounts don't satisfy namespace accounts for ${y}
        Required: ${y}
        Approved: ${b.toString()}`))}),l.forEach(y=>{r||(Oo(s[y].methods,a[y].methods)?Oo(s[y].events,a[y].events)||(r=be("NON_CONFORMING_NAMESPACES",`${n} namespaces events don't satisfy namespace events for ${y}`)):r=be("NON_CONFORMING_NAMESPACES",`${n} namespaces methods don't satisfy namespace methods for ${y}`))}),r}function IH(e){const t={};return Object.keys(e).forEach(n=>{var r;n.includes(":")?t[n]=e[n]:(r=e[n].chains)==null||r.forEach(s=>{t[s]={methods:e[n].methods,events:e[n].events}})}),t}function qS(e){return[...new Set(e.map(t=>t.includes(":")?t.split(":")[0]:t))]}function CH(e){const t={};return Object.keys(e).forEach(n=>{n.includes(":")?t[n]=e[n]:Dc(e[n].accounts)?.forEach(s=>{t[s]={accounts:e[n].accounts.filter(a=>a.includes(`${s}:`)),methods:e[n].methods,events:e[n].events}})}),t}function NH(e,t){return Pb(e,!1)&&e<=t.max&&e>=t.min}function HS(){const e=ku();return new Promise(t=>{switch(e){case lr.browser:t(UH());break;case lr.reactNative:t(BH());break;case lr.node:t($H());break;default:t(!0)}})}function UH(){return Oc()&&navigator?.onLine}async function BH(){return Hs()&&typeof global<"u"&&global!=null&&global.NetInfo?(await(global==null?void 0:global.NetInfo.fetch()))?.isConnected:!0}function $H(){return!0}function PH(e){switch(ku()){case lr.browser:kH(e);break;case lr.reactNative:MH(e);break}}function kH(e){!Hs()&&Oc()&&(window.addEventListener("online",()=>e(!0)),window.addEventListener("offline",()=>e(!1)))}function MH(e){Hs()&&typeof global<"u"&&global!=null&&global.NetInfo&&global?.NetInfo.addEventListener(t=>e(t?.isConnected))}function LH(){var e;return Oc()&&Xi.getDocument()?((e=Xi.getDocument())==null?void 0:e.visibilityState)==="visible":!0}const pm={};class Hl{static get(t){return pm[t]}static set(t,n){pm[t]=n}static delete(t){delete pm[t]}}function jH(e){const t=Bu.decode(e);if(t.length<33)throw new Error("Too short to contain a public key");return t.slice(1,33)}function zH({publicKey:e,signature:t,payload:n}){var r;const s=E0(n.method),a=128|parseInt(((r=n.version)==null?void 0:r.toString())||"4"),l=FH(n.address),u=n.era==="00"?new Uint8Array([0]):E0(n.era);if(u.length!==1&&u.length!==2)throw new Error("Invalid era length");const d=parseInt(n.nonce,16),h=new Uint8Array([d&255,d>>8&255]),p=BigInt(`0x${HH(n.tip)}`),y=GH(p),b=new Uint8Array([0,...e,l,...t,...u,...h,...y,...s]),w=VH(b.length+1);return new Uint8Array([...w,a,...b])}function qH(e){const t=E0(e),n=N9.blake2b(t,void 0,32);return"0x"+Buffer.from(n).toString("hex")}function E0(e){return new Uint8Array(e.replace(/^0x/,"").match(/.{1,2}/g).map(t=>parseInt(t,16)))}function HH(e){return e.startsWith("0x")?e.slice(2):e}function FH(e){const t=Bu.decode(e)[0];return t===42?0:t===60?2:1}function VH(e){if(e<64)return new Uint8Array([e<<2]);if(e<16384){const t=e<<2|1;return new Uint8Array([t&255,t>>8&255])}else if(e<1<<30){const t=e<<2|2;return new Uint8Array([t&255,t>>8&255,t>>16&255,t>>24&255])}else throw new Error("Compact encoding > 2^30 not supported")}function GH(e){if(e<BigInt(1)<<BigInt(6))return new Uint8Array([Number(e<<BigInt(2))]);if(e<BigInt(1)<<BigInt(14)){const t=e<<BigInt(2)|BigInt(1);return new Uint8Array([Number(t&BigInt(255)),Number(t>>BigInt(8)&BigInt(255))])}else if(e<BigInt(1)<<BigInt(30)){const t=e<<BigInt(2)|BigInt(2);return new Uint8Array([Number(t&BigInt(255)),Number(t>>BigInt(8)&BigInt(255)),Number(t>>BigInt(16)&BigInt(255)),Number(t>>BigInt(24)&BigInt(255))])}else throw new Error("BigInt compact encoding not supported > 2^30")}function KH(e){const t=Uint8Array.from(Buffer.from(e.signature,"hex")),n=jH(e.transaction.address),r=zH({publicKey:n,signature:t,payload:e.transaction}),s=Buffer.from(r).toString("hex");return qH(s)}var Hd,gt,wT,So,FS,vT,ET,_T,kb,_0,S0,Au={},ST=[],YH=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Fd=Array.isArray;function Fi(e,t){for(var n in t)e[n]=t[n];return e}function Mb(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function WH(e,t,n){var r,s,a,l={};for(a in t)a=="key"?r=t[a]:a=="ref"?s=t[a]:l[a]=t[a];if(arguments.length>2&&(l.children=arguments.length>3?Hd.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(a in e.defaultProps)l[a]===void 0&&(l[a]=e.defaultProps[a]);return zh(e,l,r,s,null)}function zh(e,t,n,r,s){var a={type:e,props:t,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:s??++wT,__i:-1,__u:0};return s==null&&gt.vnode!=null&&gt.vnode(a),a}function Vd(e){return e.children}function qh(e,t){this.props=e,this.context=t}function mc(e,t){if(t==null)return e.__?mc(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?mc(e):null}function AT(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return AT(e)}}function VS(e){(!e.__d&&(e.__d=!0)&&So.push(e)&&!fd.__r++||FS!=gt.debounceRendering)&&((FS=gt.debounceRendering)||vT)(fd)}function fd(){for(var e,t,n,r,s,a,l,u=1;So.length;)So.length>u&&So.sort(ET),e=So.shift(),u=So.length,e.__d&&(n=void 0,s=(r=(t=e).__v).__e,a=[],l=[],t.__P&&((n=Fi({},r)).__v=r.__v+1,gt.vnode&&gt.vnode(n),Lb(t.__P,n,r,t.__n,t.__P.namespaceURI,32&r.__u?[s]:null,a,s??mc(r),!!(32&r.__u),l),n.__v=r.__v,n.__.__k[n.__i]=n,xT(a,n,l),n.__e!=s&&AT(n)));fd.__r=0}function RT(e,t,n,r,s,a,l,u,d,h,p){var y,b,w,v,E,_,R=r&&r.__k||ST,D=t.length;for(d=XH(n,t,R,d,D),y=0;y<D;y++)(w=n.__k[y])!=null&&(b=w.__i==-1?Au:R[w.__i]||Au,w.__i=y,_=Lb(e,w,b,s,a,l,u,d,h,p),v=w.__e,w.ref&&b.ref!=w.ref&&(b.ref&&jb(b.ref,null,w),p.push(w.ref,w.__c||v,w)),E==null&&v!=null&&(E=v),4&w.__u||b.__k===w.__k?d=OT(w,d,e):typeof w.type=="function"&&_!==void 0?d=_:v&&(d=v.nextSibling),w.__u&=-7);return n.__e=E,d}function XH(e,t,n,r,s){var a,l,u,d,h,p=n.length,y=p,b=0;for(e.__k=new Array(s),a=0;a<s;a++)(l=t[a])!=null&&typeof l!="boolean"&&typeof l!="function"?(d=a+b,(l=e.__k[a]=typeof l=="string"||typeof l=="number"||typeof l=="bigint"||l.constructor==String?zh(null,l,null,null,null):Fd(l)?zh(Vd,{children:l},null,null,null):l.constructor==null&&l.__b>0?zh(l.type,l.props,l.key,l.ref?l.ref:null,l.__v):l).__=e,l.__b=e.__b+1,u=null,(h=l.__i=ZH(l,n,d,y))!=-1&&(y--,(u=n[h])&&(u.__u|=2)),u==null||u.__v==null?(h==-1&&(s>p?b--:s<p&&b++),typeof l.type!="function"&&(l.__u|=4)):h!=d&&(h==d-1?b--:h==d+1?b++:(h>d?b--:b++,l.__u|=4))):e.__k[a]=null;if(y)for(a=0;a<p;a++)(u=n[a])!=null&&(2&u.__u)==0&&(u.__e==r&&(r=mc(u)),DT(u,u));return r}function OT(e,t,n){var r,s;if(typeof e.type=="function"){for(r=e.__k,s=0;r&&s<r.length;s++)r[s]&&(r[s].__=e,t=OT(r[s],t,n));return t}e.__e!=t&&(t&&e.type&&!n.contains(t)&&(t=mc(e)),n.insertBefore(e.__e,t||null),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType==8);return t}function ZH(e,t,n,r){var s,a,l=e.key,u=e.type,d=t[n];if(d===null&&e.key==null||d&&l==d.key&&u==d.type&&(2&d.__u)==0)return n;if(r>(d!=null&&(2&d.__u)==0?1:0))for(s=n-1,a=n+1;s>=0||a<t.length;){if(s>=0){if((d=t[s])&&(2&d.__u)==0&&l==d.key&&u==d.type)return s;s--}if(a<t.length){if((d=t[a])&&(2&d.__u)==0&&l==d.key&&u==d.type)return a;a++}}return-1}function GS(e,t,n){t[0]=="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||YH.test(t)?n:n+"px"}function vh(e,t,n,r,s){var a,l;e:if(t=="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof r=="string"&&(e.style.cssText=r=""),r)for(t in r)n&&t in n||GS(e.style,t,"");if(n)for(t in n)r&&n[t]==r[t]||GS(e.style,t,n[t])}else if(t[0]=="o"&&t[1]=="n")a=t!=(t=t.replace(_T,"$1")),l=t.toLowerCase(),t=l in e||t=="onFocusOut"||t=="onFocusIn"?l.slice(2):t.slice(2),e.l||(e.l={}),e.l[t+a]=n,n?r?n.u=r.u:(n.u=kb,e.addEventListener(t,a?S0:_0,a)):e.removeEventListener(t,a?S0:_0,a);else{if(s=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&n==1?"":n))}}function KS(e){return function(t){if(this.l){var n=this.l[t.type+e];if(t.t==null)t.t=kb++;else if(t.t<n.u)return;return n(gt.event?gt.event(t):t)}}}function Lb(e,t,n,r,s,a,l,u,d,h){var p,y,b,w,v,E,_,R,D,I,$,U,k,q,H,P,V,G=t.type;if(t.constructor!=null)return null;128&n.__u&&(d=!!(32&n.__u),a=[u=t.__e=n.__e]),(p=gt.__b)&&p(t);e:if(typeof G=="function")try{if(R=t.props,D="prototype"in G&&G.prototype.render,I=(p=G.contextType)&&r[p.__c],$=p?I?I.props.value:p.__:r,n.__c?_=(y=t.__c=n.__c).__=y.__E:(D?t.__c=y=new G(R,$):(t.__c=y=new qh(R,$),y.constructor=G,y.render=JH),I&&I.sub(y),y.props=R,y.state||(y.state={}),y.context=$,y.__n=r,b=y.__d=!0,y.__h=[],y._sb=[]),D&&y.__s==null&&(y.__s=y.state),D&&G.getDerivedStateFromProps!=null&&(y.__s==y.state&&(y.__s=Fi({},y.__s)),Fi(y.__s,G.getDerivedStateFromProps(R,y.__s))),w=y.props,v=y.state,y.__v=t,b)D&&G.getDerivedStateFromProps==null&&y.componentWillMount!=null&&y.componentWillMount(),D&&y.componentDidMount!=null&&y.__h.push(y.componentDidMount);else{if(D&&G.getDerivedStateFromProps==null&&R!==w&&y.componentWillReceiveProps!=null&&y.componentWillReceiveProps(R,$),!y.__e&&y.shouldComponentUpdate!=null&&y.shouldComponentUpdate(R,y.__s,$)===!1||t.__v==n.__v){for(t.__v!=n.__v&&(y.props=R,y.state=y.__s,y.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.some(function(K){K&&(K.__=t)}),U=0;U<y._sb.length;U++)y.__h.push(y._sb[U]);y._sb=[],y.__h.length&&l.push(y);break e}y.componentWillUpdate!=null&&y.componentWillUpdate(R,y.__s,$),D&&y.componentDidUpdate!=null&&y.__h.push(function(){y.componentDidUpdate(w,v,E)})}if(y.context=$,y.props=R,y.__P=e,y.__e=!1,k=gt.__r,q=0,D){for(y.state=y.__s,y.__d=!1,k&&k(t),p=y.render(y.props,y.state,y.context),H=0;H<y._sb.length;H++)y.__h.push(y._sb[H]);y._sb=[]}else do y.__d=!1,k&&k(t),p=y.render(y.props,y.state,y.context),y.state=y.__s;while(y.__d&&++q<25);y.state=y.__s,y.getChildContext!=null&&(r=Fi(Fi({},r),y.getChildContext())),D&&!b&&y.getSnapshotBeforeUpdate!=null&&(E=y.getSnapshotBeforeUpdate(w,v)),P=p,p!=null&&p.type===Vd&&p.key==null&&(P=TT(p.props.children)),u=RT(e,Fd(P)?P:[P],t,n,r,s,a,l,u,d,h),y.base=t.__e,t.__u&=-161,y.__h.length&&l.push(y),_&&(y.__E=y.__=null)}catch(K){if(t.__v=null,d||a!=null)if(K.then){for(t.__u|=d?160:128;u&&u.nodeType==8&&u.nextSibling;)u=u.nextSibling;a[a.indexOf(u)]=null,t.__e=u}else for(V=a.length;V--;)Mb(a[V]);else t.__e=n.__e,t.__k=n.__k;gt.__e(K,t,n)}else a==null&&t.__v==n.__v?(t.__k=n.__k,t.__e=n.__e):u=t.__e=QH(n.__e,t,n,r,s,a,l,d,h);return(p=gt.diffed)&&p(t),128&t.__u?void 0:u}function xT(e,t,n){for(var r=0;r<n.length;r++)jb(n[r],n[++r],n[++r]);gt.__c&&gt.__c(t,e),e.some(function(s){try{e=s.__h,s.__h=[],e.some(function(a){a.call(s)})}catch(a){gt.__e(a,s.__v)}})}function TT(e){return typeof e!="object"||e==null||e.__b&&e.__b>0?e:Fd(e)?e.map(TT):Fi({},e)}function QH(e,t,n,r,s,a,l,u,d){var h,p,y,b,w,v,E,_=n.props,R=t.props,D=t.type;if(D=="svg"?s="http://www.w3.org/2000/svg":D=="math"?s="http://www.w3.org/1998/Math/MathML":s||(s="http://www.w3.org/1999/xhtml"),a!=null){for(h=0;h<a.length;h++)if((w=a[h])&&"setAttribute"in w==!!D&&(D?w.localName==D:w.nodeType==3)){e=w,a[h]=null;break}}if(e==null){if(D==null)return document.createTextNode(R);e=document.createElementNS(s,D,R.is&&R),u&&(gt.__m&&gt.__m(t,a),u=!1),a=null}if(D==null)_===R||u&&e.data==R||(e.data=R);else{if(a=a&&Hd.call(e.childNodes),_=n.props||Au,!u&&a!=null)for(_={},h=0;h<e.attributes.length;h++)_[(w=e.attributes[h]).name]=w.value;for(h in _)if(w=_[h],h!="children"){if(h=="dangerouslySetInnerHTML")y=w;else if(!(h in R)){if(h=="value"&&"defaultValue"in R||h=="checked"&&"defaultChecked"in R)continue;vh(e,h,null,w,s)}}for(h in R)w=R[h],h=="children"?b=w:h=="dangerouslySetInnerHTML"?p=w:h=="value"?v=w:h=="checked"?E=w:u&&typeof w!="function"||_[h]===w||vh(e,h,w,_[h],s);if(p)u||y&&(p.__html==y.__html||p.__html==e.innerHTML)||(e.innerHTML=p.__html),t.__k=[];else if(y&&(e.innerHTML=""),RT(t.type=="template"?e.content:e,Fd(b)?b:[b],t,n,r,D=="foreignObject"?"http://www.w3.org/1999/xhtml":s,a,l,a?a[0]:n.__k&&mc(n,0),u,d),a!=null)for(h=a.length;h--;)Mb(a[h]);u||(h="value",D=="progress"&&v==null?e.removeAttribute("value"):v!=null&&(v!==e[h]||D=="progress"&&!v||D=="option"&&v!=_[h])&&vh(e,h,v,_[h],s),h="checked",E!=null&&E!=e[h]&&vh(e,h,E,_[h],s))}return e}function jb(e,t,n){try{if(typeof e=="function"){var r=typeof e.__u=="function";r&&e.__u(),r&&t==null||(e.__u=e(t))}else e.current=t}catch(s){gt.__e(s,n)}}function DT(e,t,n){var r,s;if(gt.unmount&&gt.unmount(e),(r=e.ref)&&(r.current&&r.current!=e.__e||jb(r,null,t)),(r=e.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(a){gt.__e(a,t)}r.base=r.__P=null}if(r=e.__k)for(s=0;s<r.length;s++)r[s]&&DT(r[s],t,n||typeof e.type!="function");n||Mb(e.__e),e.__c=e.__=e.__e=void 0}function JH(e,t,n){return this.constructor(e,n)}function YS(e,t,n){var r,s,a,l;t==document&&(t=document.documentElement),gt.__&&gt.__(e,t),s=(r=!1)?null:t.__k,a=[],l=[],Lb(t,e=t.__k=WH(Vd,null,[e]),s||Au,Au,t.namespaceURI,s?null:t.firstChild?Hd.call(t.childNodes):null,a,s?s.__e:t.firstChild,r,l),xT(a,e,l)}Hd=ST.slice,gt={__e:function(e,t,n,r){for(var s,a,l;t=t.__;)if((s=t.__c)&&!s.__)try{if((a=s.constructor)&&a.getDerivedStateFromError!=null&&(s.setState(a.getDerivedStateFromError(e)),l=s.__d),s.componentDidCatch!=null&&(s.componentDidCatch(e,r||{}),l=s.__d),l)return s.__E=s}catch(u){e=u}throw e}},wT=0,qh.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=Fi({},this.state),typeof e=="function"&&(e=e(Fi({},n),this.props)),e&&Fi(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),VS(this))},qh.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),VS(this))},qh.prototype.render=Vd,So=[],vT=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,ET=function(e,t){return e.__v.__b-t.__v.__b},fd.__r=0,_T=/(PointerCapture)$|Capture$/i,kb=0,_0=KS(!1),S0=KS(!0);var eF=0;function ni(e,t,n,r,s,a){t||(t={});var l,u,d=t;if("ref"in d)for(u in d={},t)u=="ref"?l=t[u]:d[u]=t[u];var h={type:e,props:d,key:n,ref:l,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--eF,__i:-1,__u:0,__source:s,__self:a};if(typeof e=="function"&&(l=e.defaultProps))for(u in l)d[u]===void 0&&(d[u]=l[u]);return gt.vnode&&gt.vnode(h),h}class Go{}let tF=class extends Go{constructor(t){super()}};const WS=we.FIVE_SECONDS,Ko={pulse:"heartbeat_pulse"};let nF=class IT extends tF{constructor(t){super(t),this.events=new Vn.EventEmitter,this.interval=WS,this.interval=t?.interval||WS}static async init(t){const n=new IT(t);return await n.init(),n}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(t,n){this.events.on(t,n)}once(t,n){this.events.once(t,n)}off(t,n){this.events.off(t,n)}removeListener(t,n){this.events.removeListener(t,n)}async initialize(){this.intervalRef=setInterval(()=>this.pulse(),we.toMiliseconds(this.interval))}pulse(){this.events.emit(Ko.pulse)}};const rF=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,iF=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,sF=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function oF(e,t){if(e==="__proto__"||e==="constructor"&&t&&typeof t=="object"&&"prototype"in t){aF(e);return}return t}function aF(e){console.warn(`[destr] Dropping "${e}" key to prevent prototype pollution.`)}function Eh(e,t={}){if(typeof e!="string")return e;if(e[0]==='"'&&e[e.length-1]==='"'&&e.indexOf("\\")===-1)return e.slice(1,-1);const n=e.trim();if(n.length<=9)switch(n.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!sF.test(e)){if(t.strict)throw new SyntaxError("[destr] Invalid JSON");return e}try{if(rF.test(e)||iF.test(e)){if(t.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(e,oF)}return JSON.parse(e)}catch(r){if(t.strict)throw r;return e}}function cF(e){return!e||typeof e.then!="function"?Promise.resolve(e):e}function Zt(e,...t){try{return cF(e(...t))}catch(n){return Promise.reject(n)}}function lF(e){const t=typeof e;return e===null||t!=="object"&&t!=="function"}function uF(e){const t=Object.getPrototypeOf(e);return!t||t.isPrototypeOf(Object)}function Hh(e){if(lF(e))return String(e);if(uF(e)||Array.isArray(e))return JSON.stringify(e);if(typeof e.toJSON=="function")return Hh(e.toJSON());throw new Error("[unstorage] Cannot stringify value!")}const A0="base64:";function fF(e){return typeof e=="string"?e:A0+pF(e)}function hF(e){return typeof e!="string"||!e.startsWith(A0)?e:dF(e.slice(A0.length))}function dF(e){return globalThis.Buffer?Buffer.from(e,"base64"):Uint8Array.from(globalThis.atob(e),t=>t.codePointAt(0))}function pF(e){return globalThis.Buffer?Buffer.from(e).toString("base64"):globalThis.btoa(String.fromCodePoint(...e))}function Mn(e){return e&&e.split("?")[0]?.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,"")||""}function gF(...e){return Mn(e.join(":"))}function _h(e){return e=Mn(e),e?e+":":""}function yF(e,t){if(t===void 0)return!0;let n=0,r=e.indexOf(":");for(;r>-1;)n++,r=e.indexOf(":",r+1);return n<=t}function mF(e,t){return t?e.startsWith(t)&&e[e.length-1]!=="$":e[e.length-1]!=="$"}const bF="memory",wF=()=>{const e=new Map;return{name:bF,getInstance:()=>e,hasItem(t){return e.has(t)},getItem(t){return e.get(t)??null},getItemRaw(t){return e.get(t)??null},setItem(t,n){e.set(t,n)},setItemRaw(t,n){e.set(t,n)},removeItem(t){e.delete(t)},getKeys(){return[...e.keys()]},clear(){e.clear()},dispose(){e.clear()}}};function vF(e={}){const t={mounts:{"":e.driver||wF()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},n=h=>{for(const p of t.mountpoints)if(h.startsWith(p))return{base:p,relativeKey:h.slice(p.length),driver:t.mounts[p]};return{base:"",relativeKey:h,driver:t.mounts[""]}},r=(h,p)=>t.mountpoints.filter(y=>y.startsWith(h)||p&&h.startsWith(y)).map(y=>({relativeBase:h.length>y.length?h.slice(y.length):void 0,mountpoint:y,driver:t.mounts[y]})),s=(h,p)=>{if(t.watching){p=Mn(p);for(const y of t.watchListeners)y(h,p)}},a=async()=>{if(!t.watching){t.watching=!0;for(const h in t.mounts)t.unwatch[h]=await XS(t.mounts[h],s,h)}},l=async()=>{if(t.watching){for(const h in t.unwatch)await t.unwatch[h]();t.unwatch={},t.watching=!1}},u=(h,p,y)=>{const b=new Map,w=v=>{let E=b.get(v.base);return E||(E={driver:v.driver,base:v.base,items:[]},b.set(v.base,E)),E};for(const v of h){const E=typeof v=="string",_=Mn(E?v:v.key),R=E?void 0:v.value,D=E||!v.options?p:{...p,...v.options},I=n(_);w(I).items.push({key:_,value:R,relativeKey:I.relativeKey,options:D})}return Promise.all([...b.values()].map(v=>y(v))).then(v=>v.flat())},d={hasItem(h,p={}){h=Mn(h);const{relativeKey:y,driver:b}=n(h);return Zt(b.hasItem,y,p)},getItem(h,p={}){h=Mn(h);const{relativeKey:y,driver:b}=n(h);return Zt(b.getItem,y,p).then(w=>Eh(w))},getItems(h,p={}){return u(h,p,y=>y.driver.getItems?Zt(y.driver.getItems,y.items.map(b=>({key:b.relativeKey,options:b.options})),p).then(b=>b.map(w=>({key:gF(y.base,w.key),value:Eh(w.value)}))):Promise.all(y.items.map(b=>Zt(y.driver.getItem,b.relativeKey,b.options).then(w=>({key:b.key,value:Eh(w)})))))},getItemRaw(h,p={}){h=Mn(h);const{relativeKey:y,driver:b}=n(h);return b.getItemRaw?Zt(b.getItemRaw,y,p):Zt(b.getItem,y,p).then(w=>hF(w))},async setItem(h,p,y={}){if(p===void 0)return d.removeItem(h);h=Mn(h);const{relativeKey:b,driver:w}=n(h);w.setItem&&(await Zt(w.setItem,b,Hh(p),y),w.watch||s("update",h))},async setItems(h,p){await u(h,p,async y=>{if(y.driver.setItems)return Zt(y.driver.setItems,y.items.map(b=>({key:b.relativeKey,value:Hh(b.value),options:b.options})),p);y.driver.setItem&&await Promise.all(y.items.map(b=>Zt(y.driver.setItem,b.relativeKey,Hh(b.value),b.options)))})},async setItemRaw(h,p,y={}){if(p===void 0)return d.removeItem(h,y);h=Mn(h);const{relativeKey:b,driver:w}=n(h);if(w.setItemRaw)await Zt(w.setItemRaw,b,p,y);else if(w.setItem)await Zt(w.setItem,b,fF(p),y);else return;w.watch||s("update",h)},async removeItem(h,p={}){typeof p=="boolean"&&(p={removeMeta:p}),h=Mn(h);const{relativeKey:y,driver:b}=n(h);b.removeItem&&(await Zt(b.removeItem,y,p),(p.removeMeta||p.removeMata)&&await Zt(b.removeItem,y+"$",p),b.watch||s("remove",h))},async getMeta(h,p={}){typeof p=="boolean"&&(p={nativeOnly:p}),h=Mn(h);const{relativeKey:y,driver:b}=n(h),w=Object.create(null);if(b.getMeta&&Object.assign(w,await Zt(b.getMeta,y,p)),!p.nativeOnly){const v=await Zt(b.getItem,y+"$",p).then(E=>Eh(E));v&&typeof v=="object"&&(typeof v.atime=="string"&&(v.atime=new Date(v.atime)),typeof v.mtime=="string"&&(v.mtime=new Date(v.mtime)),Object.assign(w,v))}return w},setMeta(h,p,y={}){return this.setItem(h+"$",p,y)},removeMeta(h,p={}){return this.removeItem(h+"$",p)},async getKeys(h,p={}){h=_h(h);const y=r(h,!0);let b=[];const w=[];let v=!0;for(const _ of y){_.driver.flags?.maxDepth||(v=!1);const R=await Zt(_.driver.getKeys,_.relativeBase,p);for(const D of R){const I=_.mountpoint+Mn(D);b.some($=>I.startsWith($))||w.push(I)}b=[_.mountpoint,...b.filter(D=>!D.startsWith(_.mountpoint))]}const E=p.maxDepth!==void 0&&!v;return w.filter(_=>(!E||yF(_,p.maxDepth))&&mF(_,h))},async clear(h,p={}){h=_h(h),await Promise.all(r(h,!1).map(async y=>{if(y.driver.clear)return Zt(y.driver.clear,y.relativeBase,p);if(y.driver.removeItem){const b=await y.driver.getKeys(y.relativeBase||"",p);return Promise.all(b.map(w=>y.driver.removeItem(w,p)))}}))},async dispose(){await Promise.all(Object.values(t.mounts).map(h=>ZS(h)))},async watch(h){return await a(),t.watchListeners.push(h),async()=>{t.watchListeners=t.watchListeners.filter(p=>p!==h),t.watchListeners.length===0&&await l()}},async unwatch(){t.watchListeners=[],await l()},mount(h,p){if(h=_h(h),h&&t.mounts[h])throw new Error(`already mounted at ${h}`);return h&&(t.mountpoints.push(h),t.mountpoints.sort((y,b)=>b.length-y.length)),t.mounts[h]=p,t.watching&&Promise.resolve(XS(p,s,h)).then(y=>{t.unwatch[h]=y}).catch(console.error),d},async unmount(h,p=!0){h=_h(h),!(!h||!t.mounts[h])&&(t.watching&&h in t.unwatch&&(t.unwatch[h]?.(),delete t.unwatch[h]),p&&await ZS(t.mounts[h]),t.mountpoints=t.mountpoints.filter(y=>y!==h),delete t.mounts[h])},getMount(h=""){h=Mn(h)+":";const p=n(h);return{driver:p.driver,base:p.base}},getMounts(h="",p={}){return h=Mn(h),r(h,p.parents).map(b=>({driver:b.driver,base:b.mountpoint}))},keys:(h,p={})=>d.getKeys(h,p),get:(h,p={})=>d.getItem(h,p),set:(h,p,y={})=>d.setItem(h,p,y),has:(h,p={})=>d.hasItem(h,p),del:(h,p={})=>d.removeItem(h,p),remove:(h,p={})=>d.removeItem(h,p)};return d}function XS(e,t,n){return e.watch?e.watch((r,s)=>t(r,n+s)):()=>{}}async function ZS(e){typeof e.dispose=="function"&&await Zt(e.dispose)}function Yo(e){return new Promise((t,n)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>n(e.error)})}function CT(e,t){let n;const r=()=>{if(n)return n;const s=indexedDB.open(e);return s.onupgradeneeded=()=>s.result.createObjectStore(t),n=Yo(s),n.then(a=>{a.onclose=()=>n=void 0},()=>{}),n};return(s,a)=>r().then(l=>a(l.transaction(t,s).objectStore(t)))}let gm;function zu(){return gm||(gm=CT("keyval-store","keyval")),gm}function QS(e,t=zu()){return t("readonly",n=>Yo(n.get(e)))}function EF(e,t,n=zu()){return n("readwrite",r=>(r.put(t,e),Yo(r.transaction)))}function _F(e,t=zu()){return t("readwrite",n=>(n.delete(e),Yo(n.transaction)))}function SF(e=zu()){return e("readwrite",t=>(t.clear(),Yo(t.transaction)))}function AF(e,t){return e.openCursor().onsuccess=function(){this.result&&(t(this.result),this.result.continue())},Yo(e.transaction)}function RF(e=zu()){return e("readonly",t=>{if(t.getAllKeys)return Yo(t.getAllKeys());const n=[];return AF(t,r=>n.push(r.key)).then(()=>n)})}const OF="idb-keyval";var xF=(e={})=>{const t=e.base&&e.base.length>0?`${e.base}:`:"",n=s=>t+s;let r;return e.dbName&&e.storeName&&(r=CT(e.dbName,e.storeName)),{name:OF,options:e,async hasItem(s){return!(typeof await QS(n(s),r)>"u")},async getItem(s){return await QS(n(s),r)??null},setItem(s,a){return EF(n(s),a,r)},removeItem(s){return _F(n(s),r)},getKeys(){return RF(r)},clear(){return SF(r)}}};const TF="WALLET_CONNECT_V2_INDEXED_DB",DF="keyvaluestorage";let IF=class{constructor(){this.indexedDb=vF({driver:xF({dbName:TF,storeName:DF})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(t=>[t.key,t.value])}async getItem(t){const n=await this.indexedDb.getItem(t);if(n!==null)return n}async setItem(t,n){await this.indexedDb.setItem(t,Zi(n))}async removeItem(t){await this.indexedDb.removeItem(t)}};var ym=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Fh={exports:{}};(function(){let e;function t(){}e=t,e.prototype.getItem=function(n){return this.hasOwnProperty(n)?String(this[n]):null},e.prototype.setItem=function(n,r){this[n]=String(r)},e.prototype.removeItem=function(n){delete this[n]},e.prototype.clear=function(){const n=this;Object.keys(n).forEach(function(r){n[r]=void 0,delete n[r]})},e.prototype.key=function(n){return n=n||0,Object.keys(this)[n]},e.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof ym<"u"&&ym.localStorage?Fh.exports=ym.localStorage:typeof window<"u"&&window.localStorage?Fh.exports=window.localStorage:Fh.exports=new t})();function CF(e){var t;return[e[0],Po((t=e[1])!=null?t:"")]}let NF=class{constructor(){this.localStorage=Fh.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(CF)}async getItem(t){const n=this.localStorage.getItem(t);if(n!==null)return Po(n)}async setItem(t,n){this.localStorage.setItem(t,Zi(n))}async removeItem(t){this.localStorage.removeItem(t)}};const UF="wc_storage_version",JS=1,BF=async(e,t,n)=>{const r=UF,s=await t.getItem(r);if(s&&s>=JS){n(t);return}const a=await e.getKeys();if(!a.length){n(t);return}const l=[];for(;a.length;){const u=a.shift();if(!u)continue;const d=u.toLowerCase();if(d.includes("wc@")||d.includes("walletconnect")||d.includes("wc_")||d.includes("wallet_connect")){const h=await e.getItem(u);await t.setItem(u,h),l.push(u)}}await t.setItem(r,JS),n(t),$F(e,l)},$F=async(e,t)=>{t.length&&t.forEach(async n=>{await e.removeItem(n)})};let PF=class{constructor(){this.initialized=!1,this.setInitialized=n=>{this.storage=n,this.initialized=!0};const t=new NF;this.storage=t;try{const n=new IF;BF(t,n,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(t){return await this.initialize(),this.storage.getItem(t)}async setItem(t,n){return await this.initialize(),this.storage.setItem(t,n)}async removeItem(t){return await this.initialize(),this.storage.removeItem(t)}async initialize(){this.initialized||await new Promise(t=>{const n=setInterval(()=>{this.initialized&&(clearInterval(n),t())},20)})}};var mm,eA;function kF(){if(eA)return mm;eA=1;function e(n){try{return JSON.stringify(n)}catch{return'"[Circular]"'}}mm=t;function t(n,r,s){var a=s&&s.stringify||e,l=1;if(typeof n=="object"&&n!==null){var u=r.length+l;if(u===1)return n;var d=new Array(u);d[0]=a(n);for(var h=1;h<u;h++)d[h]=a(r[h]);return d.join(" ")}if(typeof n!="string")return n;var p=r.length;if(p===0)return n;for(var y="",b=1-l,w=-1,v=n&&n.length||0,E=0;E<v;){if(n.charCodeAt(E)===37&&E+1<v){switch(w=w>-1?w:0,n.charCodeAt(E+1)){case 100:case 102:if(b>=p||r[b]==null)break;w<E&&(y+=n.slice(w,E)),y+=Number(r[b]),w=E+2,E++;break;case 105:if(b>=p||r[b]==null)break;w<E&&(y+=n.slice(w,E)),y+=Math.floor(Number(r[b])),w=E+2,E++;break;case 79:case 111:case 106:if(b>=p||r[b]===void 0)break;w<E&&(y+=n.slice(w,E));var _=typeof r[b];if(_==="string"){y+="'"+r[b]+"'",w=E+2,E++;break}if(_==="function"){y+=r[b].name||"<anonymous>",w=E+2,E++;break}y+=a(r[b]),w=E+2,E++;break;case 115:if(b>=p)break;w<E&&(y+=n.slice(w,E)),y+=String(r[b]),w=E+2,E++;break;case 37:w<E&&(y+=n.slice(w,E)),y+="%",w=E+2,E++,b--;break}++b}++E}return w===-1?n:(w<v&&(y+=n.slice(w)),y)}return mm}var bm,tA;function MF(){if(tA)return bm;tA=1;const e=kF();bm=s;const t=U().console||{},n={mapHttpRequest:v,mapHttpResponse:v,wrapRequestSerializer:E,wrapResponseSerializer:E,wrapErrorSerializer:E,req:v,res:v,err:b};function r(k,q){return Array.isArray(k)?k.filter(function(P){return P!=="!stdSerializers.err"}):k===!0?Object.keys(q):!1}function s(k){k=k||{},k.browser=k.browser||{};const q=k.browser.transmit;if(q&&typeof q.send!="function")throw Error("pino: transmit option must have a send function");const H=k.browser.write||t;k.browser.write&&(k.browser.asObject=!0);const P=k.serializers||{},V=r(k.browser.serialize,P);let G=k.browser.serialize;Array.isArray(k.browser.serialize)&&k.browser.serialize.indexOf("!stdSerializers.err")>-1&&(G=!1);const K=["error","fatal","warn","info","debug","trace"];typeof H=="function"&&(H.error=H.fatal=H.warn=H.info=H.debug=H.trace=H),k.enabled===!1&&(k.level="silent");const ce=k.level||"info",ne=Object.create(H);ne.log||(ne.log=_),Object.defineProperty(ne,"levelVal",{get:O}),Object.defineProperty(ne,"level",{get:M,set:F});const T={transmit:q,serialize:V,asObject:k.browser.asObject,levels:K,timestamp:w(k)};ne.levels=s.levels,ne.level=ce,ne.setMaxListeners=ne.getMaxListeners=ne.emit=ne.addListener=ne.on=ne.prependListener=ne.once=ne.prependOnceListener=ne.removeListener=ne.removeAllListeners=ne.listeners=ne.listenerCount=ne.eventNames=ne.write=ne.flush=_,ne.serializers=P,ne._serialize=V,ne._stdErrSerialize=G,ne.child=Y,q&&(ne._logEvent=y());function O(){return this.level==="silent"?1/0:this.levels.values[this.level]}function M(){return this._level}function F(C){if(C!=="silent"&&!this.levels.values[C])throw Error("unknown level "+C);this._level=C,a(T,ne,"error","log"),a(T,ne,"fatal","error"),a(T,ne,"warn","error"),a(T,ne,"info","log"),a(T,ne,"debug","log"),a(T,ne,"trace","log")}function Y(C,z){if(!C)throw new Error("missing bindings for child Pino");z=z||{},V&&C.serializers&&(z.serializers=C.serializers);const J=z.serializers;if(V&&J){var se=Object.assign({},P,J),re=k.browser.serialize===!0?Object.keys(se):V;delete C.serializers,d([C],re,se,this._stdErrSerialize)}function ge(ye){this._childLevel=(ye._childLevel|0)+1,this.error=h(ye,C,"error"),this.fatal=h(ye,C,"fatal"),this.warn=h(ye,C,"warn"),this.info=h(ye,C,"info"),this.debug=h(ye,C,"debug"),this.trace=h(ye,C,"trace"),se&&(this.serializers=se,this._serialize=re),q&&(this._logEvent=y([].concat(ye._logEvent.bindings,C)))}return ge.prototype=this,new ge(this)}return ne}s.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},s.stdSerializers=n,s.stdTimeFunctions=Object.assign({},{nullTime:R,epochTime:D,unixTime:I,isoTime:$});function a(k,q,H,P){const V=Object.getPrototypeOf(q);q[H]=q.levelVal>q.levels.values[H]?_:V[H]?V[H]:t[H]||t[P]||_,l(k,q,H)}function l(k,q,H){!k.transmit&&q[H]===_||(q[H]=function(P){return function(){const G=k.timestamp(),K=new Array(arguments.length),ce=Object.getPrototypeOf&&Object.getPrototypeOf(this)===t?t:this;for(var ne=0;ne<K.length;ne++)K[ne]=arguments[ne];if(k.serialize&&!k.asObject&&d(K,this._serialize,this.serializers,this._stdErrSerialize),k.asObject?P.call(ce,u(this,H,K,G)):P.apply(ce,K),k.transmit){const T=k.transmit.level||q.level,O=s.levels.values[T],M=s.levels.values[H];if(M<O)return;p(this,{ts:G,methodLevel:H,methodValue:M,transmitValue:s.levels.values[k.transmit.level||q.level],send:k.transmit.send,val:q.levelVal},K)}}}(q[H]))}function u(k,q,H,P){k._serialize&&d(H,k._serialize,k.serializers,k._stdErrSerialize);const V=H.slice();let G=V[0];const K={};P&&(K.time=P),K.level=s.levels.values[q];let ce=(k._childLevel|0)+1;if(ce<1&&(ce=1),G!==null&&typeof G=="object"){for(;ce--&&typeof V[0]=="object";)Object.assign(K,V.shift());G=V.length?e(V.shift(),V):void 0}else typeof G=="string"&&(G=e(V.shift(),V));return G!==void 0&&(K.msg=G),K}function d(k,q,H,P){for(const V in k)if(P&&k[V]instanceof Error)k[V]=s.stdSerializers.err(k[V]);else if(typeof k[V]=="object"&&!Array.isArray(k[V]))for(const G in k[V])q&&q.indexOf(G)>-1&&G in H&&(k[V][G]=H[G](k[V][G]))}function h(k,q,H){return function(){const P=new Array(1+arguments.length);P[0]=q;for(var V=1;V<P.length;V++)P[V]=arguments[V-1];return k[H].apply(this,P)}}function p(k,q,H){const P=q.send,V=q.ts,G=q.methodLevel,K=q.methodValue,ce=q.val,ne=k._logEvent.bindings;d(H,k._serialize||Object.keys(k.serializers),k.serializers,k._stdErrSerialize===void 0?!0:k._stdErrSerialize),k._logEvent.ts=V,k._logEvent.messages=H.filter(function(T){return ne.indexOf(T)===-1}),k._logEvent.level.label=G,k._logEvent.level.value=K,P(G,k._logEvent,ce),k._logEvent=y(ne)}function y(k){return{ts:0,messages:[],bindings:k||[],level:{label:"",value:0}}}function b(k){const q={type:k.constructor.name,msg:k.message,stack:k.stack};for(const H in k)q[H]===void 0&&(q[H]=k[H]);return q}function w(k){return typeof k.timestamp=="function"?k.timestamp:k.timestamp===!1?R:D}function v(){return{}}function E(k){return k}function _(){}function R(){return!1}function D(){return Date.now()}function I(){return Math.round(Date.now()/1e3)}function $(){return new Date(Date.now()).toISOString()}function U(){function k(q){return typeof q<"u"&&q}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return k(self)||k(window)||k(this)||{}}}return bm}var oc=MF();const qu=pd(oc),LF={level:"info"},Hu="custom_context",zb=1e3*1024;let jF=class{constructor(t){this.nodeValue=t,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}},nA=class{constructor(t){this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=t,this.sizeInBytes=0}append(t){const n=new jF(t);if(n.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${t} with size ${n.size}`);for(;this.size+n.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=n),this.tail=n):(this.head=n,this.tail=n),this.lengthInNodes++,this.sizeInBytes+=n.size}shift(){if(!this.head)return;const t=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=t.size}toArray(){const t=[];let n=this.head;for(;n!==null;)t.push(n.value),n=n.next;return t}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let t=this.head;return{next:()=>{if(!t)return{done:!0,value:null};const n=t.value;return t=t.next,{done:!1,value:n}}}}},NT=class{constructor(t,n=zb){this.level=t??"error",this.levelValue=oc.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=n,this.logs=new nA(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(t,n){n===oc.levels.values.error?console.error(t):n===oc.levels.values.warn?console.warn(t):n===oc.levels.values.debug?console.debug(t):n===oc.levels.values.trace?console.trace(t):console.log(t)}appendToLogs(t){this.logs.append(Zi({timestamp:new Date().toISOString(),log:t}));const n=typeof t=="string"?JSON.parse(t).level:t.level;n>=this.levelValue&&this.forwardToConsole(t,n)}getLogs(){return this.logs}clearLogs(){this.logs=new nA(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(t){const n=this.getLogArray();return n.push(Zi({extraMetadata:t})),new Blob(n,{type:"application/json"})}},zF=class{constructor(t,n=zb){this.baseChunkLogger=new NT(t,n)}write(t){this.baseChunkLogger.appendToLogs(t)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(t){return this.baseChunkLogger.logsToBlob(t)}downloadLogsBlobInBrowser(t){const n=URL.createObjectURL(this.logsToBlob(t)),r=document.createElement("a");r.href=n,r.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)}},qF=class{constructor(t,n=zb){this.baseChunkLogger=new NT(t,n)}write(t){this.baseChunkLogger.appendToLogs(t)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(t){return this.baseChunkLogger.logsToBlob(t)}};var HF=Object.defineProperty,FF=Object.defineProperties,VF=Object.getOwnPropertyDescriptors,rA=Object.getOwnPropertySymbols,GF=Object.prototype.hasOwnProperty,KF=Object.prototype.propertyIsEnumerable,iA=(e,t,n)=>t in e?HF(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,hd=(e,t)=>{for(var n in t||(t={}))GF.call(t,n)&&iA(e,n,t[n]);if(rA)for(var n of rA(t))KF.call(t,n)&&iA(e,n,t[n]);return e},dd=(e,t)=>FF(e,VF(t));function Gd(e){return dd(hd({},e),{level:e?.level||LF.level})}function YF(e,t=Hu){return e[t]||""}function WF(e,t,n=Hu){return e[n]=t,e}function Yn(e,t=Hu){let n="";return typeof e.bindings>"u"?n=YF(e,t):n=e.bindings().context||"",n}function XF(e,t,n=Hu){const r=Yn(e,n);return r.trim()?`${r}/${t}`:t}function Tn(e,t,n=Hu){const r=XF(e,t,n),s=e.child({context:r});return WF(s,r,n)}function ZF(e){var t,n;const r=new zF((t=e.opts)==null?void 0:t.level,e.maxSizeInBytes);return{logger:qu(dd(hd({},e.opts),{level:"trace",browser:dd(hd({},(n=e.opts)==null?void 0:n.browser),{write:s=>r.write(s)})})),chunkLoggerController:r}}function QF(e){var t;const n=new qF((t=e.opts)==null?void 0:t.level,e.maxSizeInBytes);return{logger:qu(dd(hd({},e.opts),{level:"trace"}),n),chunkLoggerController:n}}function JF(e){return typeof e.loggerOverride<"u"&&typeof e.loggerOverride!="string"?{logger:e.loggerOverride,chunkLoggerController:null}:typeof window<"u"?ZF(e):QF(e)}var eV=Object.defineProperty,tV=(e,t,n)=>t in e?eV(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,sA=(e,t,n)=>tV(e,typeof t!="symbol"?t+"":t,n);let nV=class extends Go{constructor(t){super(),this.opts=t,sA(this,"protocol","wc"),sA(this,"version",2)}};var rV=Object.defineProperty,iV=(e,t,n)=>t in e?rV(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,sV=(e,t,n)=>iV(e,t+"",n);let oV=class extends Go{constructor(t,n){super(),this.core=t,this.logger=n,sV(this,"records",new Map)}},aV=class{constructor(t,n){this.logger=t,this.core=n}};class cV extends Go{constructor(t,n){super(),this.relayer=t,this.logger=n}}let lV=class extends Go{constructor(t){super()}},uV=class{constructor(t,n,r,s){this.core=t,this.logger=n,this.name=r}},fV=class extends Go{constructor(t,n){super(),this.relayer=t,this.logger=n}},hV=class extends Go{constructor(t,n){super(),this.core=t,this.logger=n}},dV=class{constructor(t,n,r){this.core=t,this.logger=n,this.store=r}},pV=class{constructor(t,n){this.projectId=t,this.logger=n}},gV=class{constructor(t,n,r){this.core=t,this.logger=n,this.telemetryEnabled=r}};var yV=Object.defineProperty,mV=(e,t,n)=>t in e?yV(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,oA=(e,t,n)=>mV(e,typeof t!="symbol"?t+"":t,n);class bV{constructor(t){this.opts=t,oA(this,"protocol","wc"),oA(this,"version",2)}}let wV=class{constructor(t){this.client=t}};const vV="PARSE_ERROR",EV="INVALID_REQUEST",_V="METHOD_NOT_FOUND",SV="INVALID_PARAMS",UT="INTERNAL_ERROR",qb="SERVER_ERROR",AV=[-32700,-32600,-32601,-32602,-32603],cu={[vV]:{code:-32700,message:"Parse error"},[EV]:{code:-32600,message:"Invalid Request"},[_V]:{code:-32601,message:"Method not found"},[SV]:{code:-32602,message:"Invalid params"},[UT]:{code:-32603,message:"Internal error"},[qb]:{code:-32e3,message:"Server error"}},BT=qb;function RV(e){return AV.includes(e)}function aA(e){return Object.keys(cu).includes(e)?cu[e]:cu[BT]}function OV(e){const t=Object.values(cu).find(n=>n.code===e);return t||cu[BT]}function $T(e,t,n){return e.message.includes("getaddrinfo ENOTFOUND")||e.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${n} RPC url at ${t}`):e}var wm={},Mi={},cA;function xV(){if(cA)return Mi;cA=1,Object.defineProperty(Mi,"__esModule",{value:!0}),Mi.isBrowserCryptoAvailable=Mi.getSubtleCrypto=Mi.getBrowerCrypto=void 0;function e(){return qn?.crypto||qn?.msCrypto||{}}Mi.getBrowerCrypto=e;function t(){const r=e();return r.subtle||r.webkitSubtle}Mi.getSubtleCrypto=t;function n(){return!!e()&&!!t()}return Mi.isBrowserCryptoAvailable=n,Mi}var Li={},lA;function TV(){if(lA)return Li;lA=1,Object.defineProperty(Li,"__esModule",{value:!0}),Li.isBrowser=Li.isNode=Li.isReactNative=void 0;function e(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}Li.isReactNative=e;function t(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}Li.isNode=t;function n(){return!e()&&!t()}return Li.isBrowser=n,Li}var uA;function DV(){return uA||(uA=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});const t=Uu;t.__exportStar(xV(),e),t.__exportStar(TV(),e)}(wm)),wm}var IV=DV();function ii(e=3){const t=Date.now()*Math.pow(10,e),n=Math.floor(Math.random()*Math.pow(10,e));return t+n}function Io(e=6){return BigInt(ii(e))}function ks(e,t,n){return{id:n||ii(),jsonrpc:"2.0",method:e,params:t}}function Kd(e,t){return{id:e,jsonrpc:"2.0",result:t}}function Yd(e,t,n){return{id:e,jsonrpc:"2.0",error:CV(t)}}function CV(e,t){return typeof e>"u"?aA(UT):(typeof e=="string"&&(e=Object.assign(Object.assign({},aA(qb)),{message:e})),RV(e.code)&&(e=OV(e.code)),e)}class NV{}class UV extends NV{constructor(){super()}}class BV extends UV{constructor(t){super()}}const $V="^https?:",PV="^wss?:";function kV(e){const t=e.match(new RegExp(/^\w+:/,"gi"));if(!(!t||!t.length))return t[0]}function PT(e,t){const n=kV(e);return typeof n>"u"?!1:new RegExp(t).test(n)}function fA(e){return PT(e,$V)}function hA(e){return PT(e,PV)}function MV(e){return new RegExp("wss?://localhost(:d{2,5})?").test(e)}function kT(e){return typeof e=="object"&&"id"in e&&"jsonrpc"in e&&e.jsonrpc==="2.0"}function Hb(e){return kT(e)&&"method"in e}function Wd(e){return kT(e)&&(si(e)||Rr(e))}function si(e){return"result"in e}function Rr(e){return"error"in e}let Ir=class extends BV{constructor(t){super(t),this.events=new Vn.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(t),this.connection.connected&&this.registerEventListeners()}async connect(t=this.connection){await this.open(t)}async disconnect(){await this.close()}on(t,n){this.events.on(t,n)}once(t,n){this.events.once(t,n)}off(t,n){this.events.off(t,n)}removeListener(t,n){this.events.removeListener(t,n)}async request(t,n){return this.requestStrict(ks(t.method,t.params||[],t.id||Io().toString()),n)}async requestStrict(t,n){return new Promise(async(r,s)=>{if(!this.connection.connected)try{await this.open()}catch(a){s(a)}this.events.on(`${t.id}`,a=>{Rr(a)?s(a.error):r(a.result)});try{await this.connection.send(t,n)}catch(a){s(a)}})}setConnection(t=this.connection){return t}onPayload(t){this.events.emit("payload",t),Wd(t)?this.events.emit(`${t.id}`,t):this.events.emit("message",{type:t.method,data:t.params})}onClose(t){t&&t.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${t.code} ${t.reason?`(${t.reason})`:""}`)),this.events.emit("disconnect")}async open(t=this.connection){this.connection===t&&this.connection.connected||(this.connection.connected&&this.close(),typeof t=="string"&&(await this.connection.open(t),t=this.connection),this.connection=this.setConnection(t),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",t=>this.onPayload(t)),this.connection.on("close",t=>this.onClose(t)),this.connection.on("error",t=>this.events.emit("error",t)),this.connection.on("register_error",t=>this.onClose()),this.hasRegisteredEventListeners=!0)}};const LV=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),jV=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",dA=e=>e.split("?")[0],pA=10,zV=LV();let qV=class{constructor(t){if(this.url=t,this.events=new Vn.EventEmitter,this.registering=!1,!hA(t))throw new Error(`Provided URL is not compatible with WebSocket connection: ${t}`);this.url=t}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(t,n){this.events.on(t,n)}once(t,n){this.events.once(t,n)}off(t,n){this.events.off(t,n)}removeListener(t,n){this.events.removeListener(t,n)}async open(t=this.url){await this.register(t)}async close(){return new Promise((t,n)=>{if(typeof this.socket>"u"){n(new Error("Connection already closed"));return}this.socket.onclose=r=>{this.onClose(r),t()},this.socket.close()})}async send(t){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(Zi(t))}catch(n){this.onError(t.id,n)}}register(t=this.url){if(!hA(t))throw new Error(`Provided URL is not compatible with WebSocket connection: ${t}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((r,s)=>{this.events.once("register_error",a=>{this.resetMaxListeners(),s(a)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return s(new Error("WebSocket connection is missing or invalid"));r(this.socket)})})}return this.url=t,this.registering=!0,new Promise((n,r)=>{const s=IV.isReactNative()?void 0:{rejectUnauthorized:!MV(t)},a=new zV(t,[],s);jV()?a.onerror=l=>{const u=l;r(this.emitError(u.error))}:a.on("error",l=>{r(this.emitError(l))}),a.onopen=()=>{this.onOpen(a),n(a)}})}onOpen(t){t.onmessage=n=>this.onPayload(n),t.onclose=n=>this.onClose(n),this.socket=t,this.registering=!1,this.events.emit("open")}onClose(t){this.socket=void 0,this.registering=!1,this.events.emit("close",t)}onPayload(t){if(typeof t.data>"u")return;const n=typeof t.data=="string"?Po(t.data):t.data;this.events.emit("payload",n)}onError(t,n){const r=this.parseError(n),s=r.message||r.toString(),a=Yd(t,s);this.events.emit("payload",a)}parseError(t,n=this.url){return $T(t,dA(n),"WS")}resetMaxListeners(){this.events.getMaxListeners()>pA&&this.events.setMaxListeners(pA)}emitError(t){const n=this.parseError(new Error(t?.message||`WebSocket connection failed for host: ${dA(this.url)}`));return this.events.emit("register_error",n),n}};var HV={};const MT="wc",LT=2,R0="core",gi=`${MT}@2:${R0}:`,FV={logger:"error"},VV={database:":memory:"},GV="crypto",gA="client_ed25519_seed",KV=we.ONE_DAY,YV="keychain",WV="0.3",XV="messages",ZV="0.3",yA=we.SIX_HOURS,QV="publisher",jT="irn",JV="error",zT="wss://relay.walletconnect.org",eG="relayer",Qt={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},tG="_subscription",Er={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},nG=.1,O0="2.21.4",mt={link_mode:"link_mode",relay:"relay"},Vh={inbound:"inbound",outbound:"outbound"},rG="0.3",iG="WALLETCONNECT_CLIENT_ID",mA="WALLETCONNECT_LINK_MODE_APPS",sr={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},sG="subscription",oG="0.3",aG="pairing",cG="0.3",Fl={wc_pairingDelete:{req:{ttl:we.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:we.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:we.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:we.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:we.ONE_DAY,prompt:!1,tag:0},res:{ttl:we.ONE_DAY,prompt:!1,tag:0}}},Ao={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},Pr={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},lG="history",uG="0.3",fG="expirer",Ar={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},hG="0.3",dG="verify-api",pG="https://verify.walletconnect.com",qT="https://verify.walletconnect.org",lu=qT,gG=`${lu}/v3`,yG=[pG,qT],mG="echo",bG="https://echo.walletconnect.com",ri={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal",subscribing_to_pairing_topic:"subscribing_to_pairing_topic"},zi={no_wss_connection:"no_wss_connection",no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_expired:"proposal_expired",proposal_listener_not_found:"proposal_listener_not_found"},kr={session_approve_started:"session_approve_started",proposal_not_expired:"proposal_not_expired",session_namespaces_validation_success:"session_namespaces_validation_success",create_session_topic:"create_session_topic",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success"},ho={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found"},po={authenticated_session_approve_started:"authenticated_session_approve_started",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve"},Vl={no_internet_connection:"no_internet_connection",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"},wG=.1,vG="event-client",EG=86400,_G="https://pulse.walletconnect.org/batch";function SG(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<e.length;s++){var a=e.charAt(s),l=a.charCodeAt(0);if(n[l]!==255)throw new TypeError(a+" is ambiguous");n[l]=s}var u=e.length,d=e.charAt(0),h=Math.log(u)/Math.log(256),p=Math.log(256)/Math.log(u);function y(v){if(v instanceof Uint8Array||(ArrayBuffer.isView(v)?v=new Uint8Array(v.buffer,v.byteOffset,v.byteLength):Array.isArray(v)&&(v=Uint8Array.from(v))),!(v instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(v.length===0)return"";for(var E=0,_=0,R=0,D=v.length;R!==D&&v[R]===0;)R++,E++;for(var I=(D-R)*p+1>>>0,$=new Uint8Array(I);R!==D;){for(var U=v[R],k=0,q=I-1;(U!==0||k<_)&&q!==-1;q--,k++)U+=256*$[q]>>>0,$[q]=U%u>>>0,U=U/u>>>0;if(U!==0)throw new Error("Non-zero carry");_=k,R++}for(var H=I-_;H!==I&&$[H]===0;)H++;for(var P=d.repeat(E);H<I;++H)P+=e.charAt($[H]);return P}function b(v){if(typeof v!="string")throw new TypeError("Expected String");if(v.length===0)return new Uint8Array;var E=0;if(v[E]!==" "){for(var _=0,R=0;v[E]===d;)_++,E++;for(var D=(v.length-E)*h+1>>>0,I=new Uint8Array(D);v[E];){var $=n[v.charCodeAt(E)];if($===255)return;for(var U=0,k=D-1;($!==0||U<R)&&k!==-1;k--,U++)$+=u*I[k]>>>0,I[k]=$%256>>>0,$=$/256>>>0;if($!==0)throw new Error("Non-zero carry");R=U,E++}if(v[E]!==" "){for(var q=D-R;q!==D&&I[q]===0;)q++;for(var H=new Uint8Array(_+(D-q)),P=_;q!==D;)H[P++]=I[q++];return H}}}function w(v){var E=b(v);if(E)return E;throw new Error(`Non-${t} character`)}return{encode:y,decodeUnsafe:b,decode:w}}var AG=SG,RG=AG;const HT=e=>{if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")},OG=e=>new TextEncoder().encode(e),xG=e=>new TextDecoder().decode(e);class TG{constructor(t,n,r){this.name=t,this.prefix=n,this.baseEncode=r}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}}class DG{constructor(t,n,r){if(this.name=t,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return FT(this,t)}}class IG{constructor(t){this.decoders=t}or(t){return FT(this,t)}decode(t){const n=t[0],r=this.decoders[n];if(r)return r.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const FT=(e,t)=>new IG({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class CG{constructor(t,n,r,s){this.name=t,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new TG(t,n,r),this.decoder=new DG(t,n,s)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}}const Xd=({name:e,prefix:t,encode:n,decode:r})=>new CG(e,t,n,r),Fu=({prefix:e,name:t,alphabet:n})=>{const{encode:r,decode:s}=RG(n,t);return Xd({prefix:e,name:t,encode:r,decode:a=>HT(s(a))})},NG=(e,t,n,r)=>{const s={};for(let p=0;p<t.length;++p)s[t[p]]=p;let a=e.length;for(;e[a-1]==="=";)--a;const l=new Uint8Array(a*n/8|0);let u=0,d=0,h=0;for(let p=0;p<a;++p){const y=s[e[p]];if(y===void 0)throw new SyntaxError(`Non-${r} character`);d=d<<n|y,u+=n,u>=8&&(u-=8,l[h++]=255&d>>u)}if(u>=n||255&d<<8-u)throw new SyntaxError("Unexpected end of data");return l},UG=(e,t,n)=>{const r=t[t.length-1]==="=",s=(1<<n)-1;let a="",l=0,u=0;for(let d=0;d<e.length;++d)for(u=u<<8|e[d],l+=8;l>n;)l-=n,a+=t[s&u>>l];if(l&&(a+=t[s&u<<n-l]),r)for(;a.length*n&7;)a+="=";return a},fn=({name:e,prefix:t,bitsPerChar:n,alphabet:r})=>Xd({prefix:t,name:e,encode(s){return UG(s,r,n)},decode(s){return NG(s,r,n,e)}}),BG=Xd({prefix:"\0",name:"identity",encode:e=>xG(e),decode:e=>OG(e)});var $G=Object.freeze({__proto__:null,identity:BG});const PG=fn({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var kG=Object.freeze({__proto__:null,base2:PG});const MG=fn({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var LG=Object.freeze({__proto__:null,base8:MG});const jG=Fu({prefix:"9",name:"base10",alphabet:"0123456789"});var zG=Object.freeze({__proto__:null,base10:jG});const qG=fn({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),HG=fn({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var FG=Object.freeze({__proto__:null,base16:qG,base16upper:HG});const VG=fn({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),GG=fn({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),KG=fn({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),YG=fn({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),WG=fn({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),XG=fn({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),ZG=fn({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),QG=fn({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),JG=fn({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var eK=Object.freeze({__proto__:null,base32:VG,base32upper:GG,base32pad:KG,base32padupper:YG,base32hex:WG,base32hexupper:XG,base32hexpad:ZG,base32hexpadupper:QG,base32z:JG});const tK=Fu({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),nK=Fu({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var rK=Object.freeze({__proto__:null,base36:tK,base36upper:nK});const iK=Fu({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),sK=Fu({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var oK=Object.freeze({__proto__:null,base58btc:iK,base58flickr:sK});const aK=fn({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),cK=fn({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),lK=fn({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),uK=fn({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var fK=Object.freeze({__proto__:null,base64:aK,base64pad:cK,base64url:lK,base64urlpad:uK});const VT=Array.from(""),hK=VT.reduce((e,t,n)=>(e[n]=t,e),[]),dK=VT.reduce((e,t,n)=>(e[t.codePointAt(0)]=n,e),[]);function pK(e){return e.reduce((t,n)=>(t+=hK[n],t),"")}function gK(e){const t=[];for(const n of e){const r=dK[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);t.push(r)}return new Uint8Array(t)}const yK=Xd({prefix:"",name:"base256emoji",encode:pK,decode:gK});var mK=Object.freeze({__proto__:null,base256emoji:yK}),bK=GT,bA=128,wK=-128,vK=Math.pow(2,31);function GT(e,t,n){t=t||[],n=n||0;for(var r=n;e>=vK;)t[n++]=e&255|bA,e/=128;for(;e&wK;)t[n++]=e&255|bA,e>>>=7;return t[n]=e|0,GT.bytes=n-r+1,t}var EK=x0,_K=128,wA=127;function x0(e,r){var n=0,r=r||0,s=0,a=r,l,u=e.length;do{if(a>=u)throw x0.bytes=0,new RangeError("Could not decode varint");l=e[a++],n+=s<28?(l&wA)<<s:(l&wA)*Math.pow(2,s),s+=7}while(l>=_K);return x0.bytes=a-r,n}var SK=Math.pow(2,7),AK=Math.pow(2,14),RK=Math.pow(2,21),OK=Math.pow(2,28),xK=Math.pow(2,35),TK=Math.pow(2,42),DK=Math.pow(2,49),IK=Math.pow(2,56),CK=Math.pow(2,63),NK=function(e){return e<SK?1:e<AK?2:e<RK?3:e<OK?4:e<xK?5:e<TK?6:e<DK?7:e<IK?8:e<CK?9:10},UK={encode:bK,decode:EK,encodingLength:NK},KT=UK;const vA=(e,t,n=0)=>(KT.encode(e,t,n),t),EA=e=>KT.encodingLength(e),T0=(e,t)=>{const n=t.byteLength,r=EA(e),s=r+EA(n),a=new Uint8Array(s+n);return vA(e,a,0),vA(n,a,r),a.set(t,s),new BK(e,n,t,a)};class BK{constructor(t,n,r,s){this.code=t,this.size=n,this.digest=r,this.bytes=s}}const YT=({name:e,code:t,encode:n})=>new $K(e,t,n);class $K{constructor(t,n,r){this.name=t,this.code=n,this.encode=r}digest(t){if(t instanceof Uint8Array){const n=this.encode(t);return n instanceof Uint8Array?T0(this.code,n):n.then(r=>T0(this.code,r))}else throw Error("Unknown type, must be binary type")}}const WT=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),PK=YT({name:"sha2-256",code:18,encode:WT("SHA-256")}),kK=YT({name:"sha2-512",code:19,encode:WT("SHA-512")});var MK=Object.freeze({__proto__:null,sha256:PK,sha512:kK});const XT=0,LK="identity",ZT=HT,jK=e=>T0(XT,ZT(e)),zK={code:XT,name:LK,encode:ZT,digest:jK};var qK=Object.freeze({__proto__:null,identity:zK});new TextEncoder,new TextDecoder;const _A={...$G,...kG,...LG,...zG,...FG,...eK,...rK,...oK,...fK,...mK};({...MK,...qK});function QT(e){return globalThis.Buffer!=null?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}function HK(e=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?QT(globalThis.Buffer.allocUnsafe(e)):new Uint8Array(e)}function JT(e,t,n,r){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:n},decoder:{decode:r}}}const SA=JT("utf8","u",e=>"u"+new TextDecoder("utf8").decode(e),e=>new TextEncoder().encode(e.substring(1))),vm=JT("ascii","a",e=>{let t="a";for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t},e=>{e=e.substring(1);const t=HK(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}),FK={utf8:SA,"utf-8":SA,hex:_A.base16,latin1:vm,ascii:vm,binary:vm,..._A};function VK(e,t="utf8"){const n=FK[t];if(!n)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?QT(globalThis.Buffer.from(e,"utf-8")):n.decoder.decode(`${n.prefix}${e}`)}var GK=Object.defineProperty,KK=(e,t,n)=>t in e?GK(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ei=(e,t,n)=>KK(e,typeof t!="symbol"?t+"":t,n);class YK{constructor(t,n){this.core=t,this.logger=n,ei(this,"keychain",new Map),ei(this,"name",YV),ei(this,"version",WV),ei(this,"initialized",!1),ei(this,"storagePrefix",gi),ei(this,"init",async()=>{if(!this.initialized){const r=await this.getKeyChain();typeof r<"u"&&(this.keychain=r),this.initialized=!0}}),ei(this,"has",r=>(this.isInitialized(),this.keychain.has(r))),ei(this,"set",async(r,s)=>{this.isInitialized(),this.keychain.set(r,s),await this.persist()}),ei(this,"get",r=>{this.isInitialized();const s=this.keychain.get(r);if(typeof s>"u"){const{message:a}=be("NO_MATCHING_KEY",`${this.name}: ${r}`);throw new Error(a)}return s}),ei(this,"del",async r=>{this.isInitialized(),this.keychain.delete(r),await this.persist()}),this.core=t,this.logger=Tn(n,this.name)}get context(){return Yn(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(t){await this.core.storage.setItem(this.storageKey,l0(t))}async getKeyChain(){const t=await this.core.storage.getItem(this.storageKey);return typeof t<"u"?u0(t):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:t}=be("NOT_INITIALIZED",this.name);throw new Error(t)}}}var WK=Object.defineProperty,XK=(e,t,n)=>t in e?WK(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,sn=(e,t,n)=>XK(e,typeof t!="symbol"?t+"":t,n);class ZK{constructor(t,n,r){this.core=t,this.logger=n,sn(this,"name",GV),sn(this,"keychain"),sn(this,"randomSessionIdentifier",v0()),sn(this,"initialized",!1),sn(this,"init",async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)}),sn(this,"hasKeys",s=>(this.isInitialized(),this.keychain.has(s))),sn(this,"getClientId",async()=>{this.isInitialized();const s=await this.getClientSeed(),a=H_(s);return gx(a.publicKey)}),sn(this,"generateKeyPair",()=>{this.isInitialized();const s=kq();return this.setPrivateKey(s.publicKey,s.privateKey)}),sn(this,"signJWT",async s=>{this.isInitialized();const a=await this.getClientSeed(),l=H_(a),u=this.randomSessionIdentifier;return await C7(u,s,KV,l)}),sn(this,"generateSharedKey",(s,a,l)=>{this.isInitialized();const u=this.getPrivateKey(s),d=Mq(u,a);return this.setSymKey(d,l)}),sn(this,"setSymKey",async(s,a)=>{this.isInitialized();const l=a||jh(s);return await this.keychain.set(l,s),l}),sn(this,"deleteKeyPair",async s=>{this.isInitialized(),await this.keychain.del(s)}),sn(this,"deleteSymKey",async s=>{this.isInitialized(),await this.keychain.del(s)}),sn(this,"encode",async(s,a,l)=>{this.isInitialized();const u=yT(l),d=Zi(a);if(NS(u))return zq(d,l?.encoding);if(CS(u)){const b=u.senderPublicKey,w=u.receiverPublicKey;s=await this.generateSharedKey(b,w)}const h=this.getSymKey(s),{type:p,senderPublicKey:y}=u;return Lq({type:p,symKey:h,message:d,senderPublicKey:y,encoding:l?.encoding})}),sn(this,"decode",async(s,a,l)=>{this.isInitialized();const u=Hq(a,l);if(NS(u)){const d=qq(a,l?.encoding);return Po(d)}if(CS(u)){const d=u.receiverPublicKey,h=u.senderPublicKey;s=await this.generateSharedKey(d,h)}try{const d=this.getSymKey(s),h=jq({symKey:d,encoded:a,encoding:l?.encoding});return Po(h)}catch(d){this.logger.error(`Failed to decode message from topic: '${s}', clientId: '${await this.getClientId()}'`),this.logger.error(d)}}),sn(this,"getPayloadType",(s,a=qr)=>{const l=Su({encoded:s,encoding:a});return Mo(l.type)}),sn(this,"getPayloadSenderPublicKey",(s,a=qr)=>{const l=Su({encoded:s,encoding:a});return l.senderPublicKey?Fn(l.senderPublicKey,xn):void 0}),this.core=t,this.logger=Tn(n,this.name),this.keychain=r||new YK(this.core,this.logger)}get context(){return Yn(this.logger)}async setPrivateKey(t,n){return await this.keychain.set(t,n),t}getPrivateKey(t){return this.keychain.get(t)}async getClientSeed(){let t="";try{t=this.keychain.get(gA)}catch{t=v0(),await this.keychain.set(gA,t)}return VK(t,"base16")}getSymKey(t){return this.keychain.get(t)}isInitialized(){if(!this.initialized){const{message:t}=be("NOT_INITIALIZED",this.name);throw new Error(t)}}}var QK=Object.defineProperty,JK=Object.defineProperties,eY=Object.getOwnPropertyDescriptors,AA=Object.getOwnPropertySymbols,tY=Object.prototype.hasOwnProperty,nY=Object.prototype.propertyIsEnumerable,D0=(e,t,n)=>t in e?QK(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,rY=(e,t)=>{for(var n in t||(t={}))tY.call(t,n)&&D0(e,n,t[n]);if(AA)for(var n of AA(t))nY.call(t,n)&&D0(e,n,t[n]);return e},iY=(e,t)=>JK(e,eY(t)),ir=(e,t,n)=>D0(e,typeof t!="symbol"?t+"":t,n);class sY extends aV{constructor(t,n){super(t,n),this.logger=t,this.core=n,ir(this,"messages",new Map),ir(this,"messagesWithoutClientAck",new Map),ir(this,"name",XV),ir(this,"version",ZV),ir(this,"initialized",!1),ir(this,"storagePrefix",gi),ir(this,"init",async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const r=await this.getRelayerMessages();typeof r<"u"&&(this.messages=r);const s=await this.getRelayerMessagesWithoutClientAck();typeof s<"u"&&(this.messagesWithoutClientAck=s),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(r){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(r)}finally{this.initialized=!0}}}),ir(this,"set",async(r,s,a)=>{this.isInitialized();const l=ai(s);let u=this.messages.get(r);if(typeof u>"u"&&(u={}),typeof u[l]<"u")return l;if(u[l]=s,this.messages.set(r,u),a===Vh.inbound){const d=this.messagesWithoutClientAck.get(r)||{};this.messagesWithoutClientAck.set(r,iY(rY({},d),{[l]:s}))}return await this.persist(),l}),ir(this,"get",r=>{this.isInitialized();let s=this.messages.get(r);return typeof s>"u"&&(s={}),s}),ir(this,"getWithoutAck",r=>{this.isInitialized();const s={};for(const a of r){const l=this.messagesWithoutClientAck.get(a)||{};s[a]=Object.values(l)}return s}),ir(this,"has",(r,s)=>{this.isInitialized();const a=this.get(r),l=ai(s);return typeof a[l]<"u"}),ir(this,"ack",async(r,s)=>{this.isInitialized();const a=this.messagesWithoutClientAck.get(r);if(typeof a>"u")return;const l=ai(s);delete a[l],Object.keys(a).length===0?this.messagesWithoutClientAck.delete(r):this.messagesWithoutClientAck.set(r,a),await this.persist()}),ir(this,"del",async r=>{this.isInitialized(),this.messages.delete(r),this.messagesWithoutClientAck.delete(r),await this.persist()}),this.logger=Tn(t,this.name),this.core=n}get context(){return Yn(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get storageKeyWithoutClientAck(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name+"_withoutClientAck"}async setRelayerMessages(t){await this.core.storage.setItem(this.storageKey,l0(t))}async setRelayerMessagesWithoutClientAck(t){await this.core.storage.setItem(this.storageKeyWithoutClientAck,l0(t))}async getRelayerMessages(){const t=await this.core.storage.getItem(this.storageKey);return typeof t<"u"?u0(t):void 0}async getRelayerMessagesWithoutClientAck(){const t=await this.core.storage.getItem(this.storageKeyWithoutClientAck);return typeof t<"u"?u0(t):void 0}async persist(){await this.setRelayerMessages(this.messages),await this.setRelayerMessagesWithoutClientAck(this.messagesWithoutClientAck)}isInitialized(){if(!this.initialized){const{message:t}=be("NOT_INITIALIZED",this.name);throw new Error(t)}}}var oY=Object.defineProperty,aY=Object.defineProperties,cY=Object.getOwnPropertyDescriptors,RA=Object.getOwnPropertySymbols,lY=Object.prototype.hasOwnProperty,uY=Object.prototype.propertyIsEnumerable,I0=(e,t,n)=>t in e?oY(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Sh=(e,t)=>{for(var n in t||(t={}))lY.call(t,n)&&I0(e,n,t[n]);if(RA)for(var n of RA(t))uY.call(t,n)&&I0(e,n,t[n]);return e},Em=(e,t)=>aY(e,cY(t)),Mr=(e,t,n)=>I0(e,typeof t!="symbol"?t+"":t,n);class fY extends cV{constructor(t,n){super(t,n),this.relayer=t,this.logger=n,Mr(this,"events",new Vn.EventEmitter),Mr(this,"name",QV),Mr(this,"queue",new Map),Mr(this,"publishTimeout",we.toMiliseconds(we.ONE_MINUTE)),Mr(this,"initialPublishTimeout",we.toMiliseconds(we.ONE_SECOND*15)),Mr(this,"needsTransportRestart",!1),Mr(this,"publish",async(r,s,a)=>{var l;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:r,message:s,opts:a}});const u=a?.ttl||yA,d=ld(a),h=a?.prompt||!1,p=a?.tag||0,y=a?.id||Io().toString(),b={topic:r,message:s,opts:{ttl:u,relay:d,prompt:h,tag:p,id:y,attestation:a?.attestation,tvf:a?.tvf}},w=`Failed to publish payload, please try again. id:${y} tag:${p}`;try{const v=new Promise(async E=>{const _=({id:D})=>{b.opts.id===D&&(this.removeRequestFromQueue(D),this.relayer.events.removeListener(Qt.publish,_),E(b))};this.relayer.events.on(Qt.publish,_);const R=Ps(new Promise((D,I)=>{this.rpcPublish({topic:r,message:s,ttl:u,prompt:h,tag:p,id:y,attestation:a?.attestation,tvf:a?.tvf}).then(D).catch($=>{this.logger.warn($,$?.message),I($)})}),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${y} tag:${p}`);try{await R,this.events.removeListener(Qt.publish,_)}catch(D){this.queue.set(y,Em(Sh({},b),{attempt:1})),this.logger.warn(D,D?.message)}});this.logger.trace({type:"method",method:"publish",params:{id:y,topic:r,message:s,opts:a}}),await Ps(v,this.publishTimeout,w)}catch(v){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(v),(l=a?.internal)!=null&&l.throwOnFailedPublish)throw v}finally{this.queue.delete(y)}}),Mr(this,"on",(r,s)=>{this.events.on(r,s)}),Mr(this,"once",(r,s)=>{this.events.once(r,s)}),Mr(this,"off",(r,s)=>{this.events.off(r,s)}),Mr(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.relayer=t,this.logger=Tn(n,this.name),this.registerEventListeners()}get context(){return Yn(this.logger)}async rpcPublish(t){var n,r,s,a;const{topic:l,message:u,ttl:d=yA,prompt:h,tag:p,id:y,attestation:b,tvf:w}=t,v={method:Ql(ld().protocol).publish,params:Sh({topic:l,message:u,ttl:d,prompt:h,tag:p,attestation:b},w),id:y};cn((n=v.params)==null?void 0:n.prompt)&&((r=v.params)==null||delete r.prompt),cn((s=v.params)==null?void 0:s.tag)&&((a=v.params)==null||delete a.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:v});const E=await this.relayer.request(v);return this.relayer.events.emit(Qt.publish,t),this.logger.debug("Successfully Published Payload"),E}removeRequestFromQueue(t){this.queue.delete(t)}checkQueue(){this.queue.forEach(async(t,n)=>{const r=t.attempt+1;this.queue.set(n,Em(Sh({},t),{attempt:r}));const{topic:s,message:a,opts:l,attestation:u}=t;this.logger.warn({},`Publisher: queue->publishing: ${t.opts.id}, tag: ${t.opts.tag}, attempt: ${r}`),await this.rpcPublish(Em(Sh({},t),{topic:s,message:a,ttl:l.ttl,prompt:l.prompt,tag:l.tag,id:l.id,attestation:u,tvf:l.tvf})),this.logger.warn({},`Publisher: queue->published: ${t.opts.id}`)})}registerEventListeners(){this.relayer.core.heartbeat.on(Ko.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(Qt.connection_stalled);return}this.checkQueue()}),this.relayer.on(Qt.message_ack,t=>{this.removeRequestFromQueue(t.id.toString())})}}var hY=Object.defineProperty,dY=(e,t,n)=>t in e?hY(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Va=(e,t,n)=>dY(e,typeof t!="symbol"?t+"":t,n);class pY{constructor(){Va(this,"map",new Map),Va(this,"set",(t,n)=>{const r=this.get(t);this.exists(t,n)||this.map.set(t,[...r,n])}),Va(this,"get",t=>this.map.get(t)||[]),Va(this,"exists",(t,n)=>this.get(t).includes(n)),Va(this,"delete",(t,n)=>{if(typeof n>"u"){this.map.delete(t);return}if(!this.map.has(t))return;const r=this.get(t);if(!this.exists(t,n))return;const s=r.filter(a=>a!==n);if(!s.length){this.map.delete(t);return}this.map.set(t,s)}),Va(this,"clear",()=>{this.map.clear()})}get topics(){return Array.from(this.map.keys())}}var gY=Object.defineProperty,yY=Object.defineProperties,mY=Object.getOwnPropertyDescriptors,OA=Object.getOwnPropertySymbols,bY=Object.prototype.hasOwnProperty,wY=Object.prototype.propertyIsEnumerable,C0=(e,t,n)=>t in e?gY(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Gl=(e,t)=>{for(var n in t||(t={}))bY.call(t,n)&&C0(e,n,t[n]);if(OA)for(var n of OA(t))wY.call(t,n)&&C0(e,n,t[n]);return e},_m=(e,t)=>yY(e,mY(t)),lt=(e,t,n)=>C0(e,typeof t!="symbol"?t+"":t,n);class vY extends fV{constructor(t,n){super(t,n),this.relayer=t,this.logger=n,lt(this,"subscriptions",new Map),lt(this,"topicMap",new pY),lt(this,"events",new Vn.EventEmitter),lt(this,"name",sG),lt(this,"version",oG),lt(this,"pending",new Map),lt(this,"cached",[]),lt(this,"initialized",!1),lt(this,"storagePrefix",gi),lt(this,"subscribeTimeout",we.toMiliseconds(we.ONE_MINUTE)),lt(this,"initialSubscribeTimeout",we.toMiliseconds(we.ONE_SECOND*15)),lt(this,"clientId"),lt(this,"batchSubscribeTopicsLimit",500),lt(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),await this.restore()),this.initialized=!0}),lt(this,"subscribe",async(r,s)=>{this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:s}});try{const a=ld(s),l={topic:r,relay:a,transportType:s?.transportType};this.pending.set(r,l);const u=await this.rpcSubscribe(r,a,s);return typeof u=="string"&&(this.onSubscribe(u,l),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:s}})),u}catch(a){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(a),a}}),lt(this,"unsubscribe",async(r,s)=>{this.isInitialized(),typeof s?.id<"u"?await this.unsubscribeById(r,s.id,s):await this.unsubscribeByTopic(r,s)}),lt(this,"isSubscribed",r=>new Promise(s=>{s(this.topicMap.topics.includes(r))})),lt(this,"isKnownTopic",r=>new Promise(s=>{s(this.topicMap.topics.includes(r)||this.pending.has(r)||this.cached.some(a=>a.topic===r))})),lt(this,"on",(r,s)=>{this.events.on(r,s)}),lt(this,"once",(r,s)=>{this.events.once(r,s)}),lt(this,"off",(r,s)=>{this.events.off(r,s)}),lt(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),lt(this,"start",async()=>{await this.onConnect()}),lt(this,"stop",async()=>{await this.onDisconnect()}),lt(this,"restart",async()=>{await this.restore(),await this.onRestart()}),lt(this,"checkPending",async()=>{if(this.pending.size===0&&(!this.initialized||!this.relayer.connected))return;const r=[];this.pending.forEach(s=>{r.push(s)}),await this.batchSubscribe(r)}),lt(this,"registerEventListeners",()=>{this.relayer.core.heartbeat.on(Ko.pulse,async()=>{await this.checkPending()}),this.events.on(sr.created,async r=>{const s=sr.created;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:r}),await this.persist()}),this.events.on(sr.deleted,async r=>{const s=sr.deleted;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:r}),await this.persist()})}),this.relayer=t,this.logger=Tn(n,this.name),this.clientId=""}get context(){return Yn(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}get hasAnyTopics(){return this.topicMap.topics.length>0||this.pending.size>0||this.cached.length>0||this.subscriptions.size>0}hasSubscription(t,n){let r=!1;try{r=this.getSubscription(t).topic===n}catch{}return r}reset(){this.cached=[],this.initialized=!0}onDisable(){this.values.length>0&&(this.cached=this.values),this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(t,n){const r=this.topicMap.get(t);await Promise.all(r.map(async s=>await this.unsubscribeById(t,s,n)))}async unsubscribeById(t,n,r){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:t,id:n,opts:r}});try{const s=ld(r);await this.restartToComplete({topic:t,id:n,relay:s}),await this.rpcUnsubscribe(t,n,s);const a=vt("USER_DISCONNECTED",`${this.name}, ${t}`);await this.onUnsubscribe(t,n,a),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:t,id:n,opts:r}})}catch(s){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(s),s}}async rpcSubscribe(t,n,r){var s;(!r||r?.transportType===mt.relay)&&await this.restartToComplete({topic:t,id:t,relay:n});const a={method:Ql(n.protocol).subscribe,params:{topic:t}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:a});const l=(s=r?.internal)==null?void 0:s.throwOnFailedPublish;try{const u=await this.getSubscriptionId(t);if(r?.transportType===mt.link_mode)return setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(a).catch(p=>this.logger.warn(p))},we.toMiliseconds(we.ONE_SECOND)),u;const d=new Promise(async p=>{const y=b=>{b.topic===t&&(this.events.removeListener(sr.created,y),p(b.id))};this.events.on(sr.created,y);try{const b=await Ps(new Promise((w,v)=>{this.relayer.request(a).catch(E=>{this.logger.warn(E,E?.message),v(E)}).then(w)}),this.initialSubscribeTimeout,`Subscribing to ${t} failed, please try again`);this.events.removeListener(sr.created,y),p(b)}catch{}}),h=await Ps(d,this.subscribeTimeout,`Subscribing to ${t} failed, please try again`);if(!h&&l)throw new Error(`Subscribing to ${t} failed, please try again`);return h?u:null}catch(u){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(Qt.connection_stalled),l)throw u}return null}async rpcBatchSubscribe(t){if(!t.length)return;const n=t[0].relay,r={method:Ql(n.protocol).batchSubscribe,params:{topics:t.map(s=>s.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});try{await await Ps(new Promise(s=>{this.relayer.request(r).catch(a=>this.logger.warn(a)).then(s)}),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{this.relayer.events.emit(Qt.connection_stalled)}}async rpcBatchFetchMessages(t){if(!t.length)return;const n=t[0].relay,r={method:Ql(n.protocol).batchFetchMessages,params:{topics:t.map(a=>a.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});let s;try{s=await await Ps(new Promise((a,l)=>{this.relayer.request(r).catch(u=>{this.logger.warn(u),l(u)}).then(a)}),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(Qt.connection_stalled)}return s}rpcUnsubscribe(t,n,r){const s={method:Ql(r.protocol).unsubscribe,params:{topic:t,id:n}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s}),this.relayer.request(s)}onSubscribe(t,n){this.setSubscription(t,_m(Gl({},n),{id:t})),this.pending.delete(n.topic)}onBatchSubscribe(t){t.length&&t.forEach(n=>{this.setSubscription(n.id,Gl({},n)),this.pending.delete(n.topic)})}async onUnsubscribe(t,n,r){this.events.removeAllListeners(n),this.hasSubscription(n,t)&&this.deleteSubscription(n,r),await this.relayer.messages.del(t)}async setRelayerSubscriptions(t){await this.relayer.core.storage.setItem(this.storageKey,t)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(t,n){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:t,subscription:n}),this.addSubscription(t,n)}addSubscription(t,n){this.subscriptions.set(t,Gl({},n)),this.topicMap.set(n.topic,t),this.events.emit(sr.created,n)}getSubscription(t){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:t});const n=this.subscriptions.get(t);if(!n){const{message:r}=be("NO_MATCHING_KEY",`${this.name}: ${t}`);throw new Error(r)}return n}deleteSubscription(t,n){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:t,reason:n});const r=this.getSubscription(t);this.subscriptions.delete(t),this.topicMap.delete(r.topic,t),this.events.emit(sr.deleted,_m(Gl({},r),{reason:n}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(sr.sync)}async onRestart(){if(this.cached.length){const t=[...this.cached],n=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<n;r++){const s=t.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(s)}}this.events.emit(sr.resubscribed)}async restore(){try{const t=await this.getRelayerSubscriptions();if(typeof t>"u"||!t.length)return;if(this.subscriptions.size){const{message:n}=be("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(n)}this.cached=t,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(t){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(t)}}async batchSubscribe(t){t.length&&(await this.rpcBatchSubscribe(t),this.onBatchSubscribe(await Promise.all(t.map(async n=>_m(Gl({},n),{id:await this.getSubscriptionId(n.topic)})))))}async batchFetchMessages(t){if(!t.length)return;this.logger.trace(`Fetching batch messages for ${t.length} subscriptions`);const n=await this.rpcBatchFetchMessages(t);n&&n.messages&&(await sj(we.toMiliseconds(we.ONE_SECOND)),await this.relayer.handleBatchMessageEvents(n.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){const{message:t}=be("NOT_INITIALIZED",this.name);throw new Error(t)}}async restartToComplete(t){!this.relayer.connected&&!this.relayer.connecting&&(this.cached.push(t),await this.relayer.transportOpen())}async getClientId(){return this.clientId||(this.clientId=await this.relayer.core.crypto.getClientId()),this.clientId}async getSubscriptionId(t){return ai(t+await this.getClientId())}}var EY=Object.defineProperty,xA=Object.getOwnPropertySymbols,_Y=Object.prototype.hasOwnProperty,SY=Object.prototype.propertyIsEnumerable,N0=(e,t,n)=>t in e?EY(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,TA=(e,t)=>{for(var n in t||(t={}))_Y.call(t,n)&&N0(e,n,t[n]);if(xA)for(var n of xA(t))SY.call(t,n)&&N0(e,n,t[n]);return e},Ve=(e,t,n)=>N0(e,typeof t!="symbol"?t+"":t,n);class AY extends lV{constructor(t){super(t),Ve(this,"protocol","wc"),Ve(this,"version",2),Ve(this,"core"),Ve(this,"logger"),Ve(this,"events",new Vn.EventEmitter),Ve(this,"provider"),Ve(this,"messages"),Ve(this,"subscriber"),Ve(this,"publisher"),Ve(this,"name",eG),Ve(this,"transportExplicitlyClosed",!1),Ve(this,"initialized",!1),Ve(this,"connectionAttemptInProgress",!1),Ve(this,"relayUrl"),Ve(this,"projectId"),Ve(this,"packageName"),Ve(this,"bundleId"),Ve(this,"hasExperiencedNetworkDisruption",!1),Ve(this,"pingTimeout"),Ve(this,"heartBeatTimeout",we.toMiliseconds(we.THIRTY_SECONDS+we.FIVE_SECONDS)),Ve(this,"reconnectTimeout"),Ve(this,"connectPromise"),Ve(this,"reconnectInProgress",!1),Ve(this,"requestsInFlight",[]),Ve(this,"connectTimeout",we.toMiliseconds(we.ONE_SECOND*15)),Ve(this,"request",async n=>{var r,s;this.logger.debug("Publishing Request Payload");const a=n.id||Io().toString();await this.toEstablishConnection();try{this.logger.trace({id:a,method:n.method,topic:(r=n.params)==null?void 0:r.topic},"relayer.request - publishing...");const l=`${a}:${((s=n.params)==null?void 0:s.tag)||""}`;this.requestsInFlight.push(l);const u=await this.provider.request(n);return this.requestsInFlight=this.requestsInFlight.filter(d=>d!==l),u}catch(l){throw this.logger.debug(`Failed to Publish Request: ${a}`),l}}),Ve(this,"resetPingTimeout",()=>{sd()&&(clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var n,r,s,a;try{this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),(a=(s=(r=(n=this.provider)==null?void 0:n.connection)==null?void 0:r.socket)==null?void 0:s.terminate)==null||a.call(s)}catch(l){this.logger.warn(l,l?.message)}},this.heartBeatTimeout))}),Ve(this,"onPayloadHandler",n=>{this.onProviderPayload(n),this.resetPingTimeout()}),Ve(this,"onConnectHandler",()=>{this.logger.warn({},"Relayer connected "),this.startPingTimeout(),this.events.emit(Qt.connect)}),Ve(this,"onDisconnectHandler",()=>{this.logger.warn({},"Relayer disconnected "),this.requestsInFlight=[],this.onProviderDisconnect()}),Ve(this,"onProviderErrorHandler",n=>{this.logger.fatal(`Fatal socket error: ${n.message}`),this.events.emit(Qt.error,n),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()}),Ve(this,"registerProviderListeners",()=>{this.provider.on(Er.payload,this.onPayloadHandler),this.provider.on(Er.connect,this.onConnectHandler),this.provider.on(Er.disconnect,this.onDisconnectHandler),this.provider.on(Er.error,this.onProviderErrorHandler)}),this.core=t.core,this.logger=typeof t.logger<"u"&&typeof t.logger!="string"?Tn(t.logger,this.name):qu(Gd({level:t.logger||JV})),this.messages=new sY(this.logger,t.core),this.subscriber=new vY(this,this.logger),this.publisher=new fY(this,this.logger),this.relayUrl=t?.relayUrl||zT,this.projectId=t.projectId,H9()?this.packageName=J_():F9()&&(this.bundleId=J_()),this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.transportOpen().catch(t=>this.logger.warn(t,t?.message))}get context(){return Yn(this.logger)}get connected(){var t,n,r;return((r=(n=(t=this.provider)==null?void 0:t.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===1||!1}get connecting(){var t,n,r;return((r=(n=(t=this.provider)==null?void 0:t.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===0||this.connectPromise!==void 0||!1}async publish(t,n,r){this.isInitialized(),await this.publisher.publish(t,n,r),await this.recordMessageEvent({topic:t,message:n,publishedAt:Date.now(),transportType:mt.relay},Vh.outbound)}async subscribe(t,n){var r,s,a;this.isInitialized(),(!(n!=null&&n.transportType)||n?.transportType==="relay")&&await this.toEstablishConnection();const l=typeof((r=n?.internal)==null?void 0:r.throwOnFailedPublish)>"u"?!0:(s=n?.internal)==null?void 0:s.throwOnFailedPublish;let u=((a=this.subscriber.topicMap.get(t))==null?void 0:a[0])||"",d;const h=p=>{p.topic===t&&(this.subscriber.off(sr.created,h),d())};return await Promise.all([new Promise(p=>{d=p,this.subscriber.on(sr.created,h)}),new Promise(async(p,y)=>{u=await this.subscriber.subscribe(t,TA({internal:{throwOnFailedPublish:l}},n)).catch(b=>{l&&y(b)})||u,p()})]),u}async unsubscribe(t,n){this.isInitialized(),await this.subscriber.unsubscribe(t,n)}on(t,n){this.events.on(t,n)}once(t,n){this.events.once(t,n)}off(t,n){this.events.off(t,n)}removeListener(t,n){this.events.removeListener(t,n)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await Ps(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(t){if(!this.subscriber.hasAnyTopics){this.logger.warn("Starting WS connection skipped because the client has no topics to work with.");return}if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise(async(n,r)=>{await this.connect(t).then(n).catch(r).finally(()=>{this.connectPromise=void 0})}),await this.connectPromise),!this.connected)throw new Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}async restartTransport(t){this.logger.debug({},"Restarting transport..."),!this.connectionAttemptInProgress&&(this.relayUrl=t||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await HS())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(t){if(t?.length===0){this.logger.trace("Batch message events is empty. Ignoring...");return}const n=t.sort((r,s)=>r.publishedAt-s.publishedAt);this.logger.debug(`Batch of ${n.length} message events sorted`);for(const r of n)try{await this.onMessageEvent(r)}catch(s){this.logger.warn(s,"Error while processing batch message event: "+s?.message)}this.logger.trace(`Batch of ${n.length} message events processed`)}async onLinkMessageEvent(t,n){const{topic:r}=t;if(!n.sessionExists){const s=qt(we.FIVE_MINUTES),a={topic:r,expiry:s,relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(r,a)}this.events.emit(Qt.message,t),await this.recordMessageEvent(t,Vh.inbound)}async connect(t){await this.confirmOnlineStateOrThrow(),t&&t!==this.relayUrl&&(this.relayUrl=t,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let n=1;for(;n<6;){try{if(this.transportExplicitlyClosed)break;this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${n}...`),await this.createProvider(),await new Promise(async(r,s)=>{const a=()=>{s(new Error("Connection interrupted while trying to connect"))};this.provider.once(Er.disconnect,a),await Ps(new Promise((l,u)=>{this.provider.connect().then(l).catch(u)}),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(l=>{s(l)}).finally(()=>{this.provider.off(Er.disconnect,a),clearTimeout(this.reconnectTimeout)}),await new Promise(async(l,u)=>{const d=()=>{s(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(Er.disconnect,d),await this.subscriber.start().then(l).catch(u).finally(()=>{this.provider.off(Er.disconnect,d)})}),this.hasExperiencedNetworkDisruption=!1,r()})}catch(r){await this.subscriber.stop();const s=r;this.logger.warn({},s.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${n}`);break}await new Promise(r=>setTimeout(r,we.toMiliseconds(n*1))),n++}}startPingTimeout(){var t,n,r,s,a;if(sd())try{(n=(t=this.provider)==null?void 0:t.connection)!=null&&n.socket&&((a=(s=(r=this.provider)==null?void 0:r.connection)==null?void 0:s.socket)==null||a.on("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(l){this.logger.warn(l,l?.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const t=await this.core.crypto.signJWT(this.relayUrl);this.provider=new Ir(new qV(W9({sdkVersion:O0,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:t,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(t,n){const{topic:r,message:s}=t;await this.messages.set(r,s,n)}async shouldIgnoreMessageEvent(t){const{topic:n,message:r}=t;if(!r||r.length===0)return this.logger.warn(`Ignoring invalid/empty message: ${r}`),!0;if(!await this.subscriber.isKnownTopic(n))return this.logger.warn(`Ignoring message for unknown topic ${n}`),!0;const s=this.messages.has(n,r);return s&&this.logger.warn(`Ignoring duplicate message: ${r}`),s}async onProviderPayload(t){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:t}),Hb(t)){if(!t.method.endsWith(tG))return;const n=t.params,{topic:r,message:s,publishedAt:a,attestation:l}=n.data,u={topic:r,message:s,publishedAt:a,transportType:mt.relay,attestation:l};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(TA({type:"event",event:n.id},u)),this.events.emit(n.id,u),await this.acknowledgePayload(t),await this.onMessageEvent(u)}else Wd(t)&&this.events.emit(Qt.message_ack,t)}async onMessageEvent(t){await this.shouldIgnoreMessageEvent(t)||(await this.recordMessageEvent(t,Vh.inbound),this.events.emit(Qt.message,t))}async acknowledgePayload(t){const n=Kd(t.id,!0);await this.provider.connection.send(n)}unregisterProviderListeners(){this.provider.off(Er.payload,this.onPayloadHandler),this.provider.off(Er.connect,this.onConnectHandler),this.provider.off(Er.disconnect,this.onDisconnectHandler),this.provider.off(Er.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let t=await HS();PH(async n=>{t!==n&&(t=n,n?await this.transportOpen().catch(r=>this.logger.error(r,r?.message)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))}),this.core.heartbeat.on(Ko.pulse,async()=>{if(!this.transportExplicitlyClosed&&!this.connected&&LH())try{await this.confirmOnlineStateOrThrow(),await this.transportOpen()}catch(n){this.logger.warn(n,n?.message)}})}async onProviderDisconnect(){clearTimeout(this.pingTimeout),this.events.emit(Qt.disconnect),this.connectionAttemptInProgress=!1,!this.reconnectInProgress&&(this.reconnectInProgress=!0,await this.subscriber.stop(),this.subscriber.hasAnyTopics&&(this.transportExplicitlyClosed||(this.reconnectTimeout=setTimeout(async()=>{await this.transportOpen().catch(t=>this.logger.error(t,t?.message)),this.reconnectTimeout=void 0,this.reconnectInProgress=!1},we.toMiliseconds(nG)))))}isInitialized(){if(!this.initialized){const{message:t}=be("NOT_INITIALIZED",this.name);throw new Error(t)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectPromise){await this.connectPromise;return}await this.connect()}}}function RY(e,t){return e===t||Number.isNaN(e)&&Number.isNaN(t)}function DA(e){return Object.getOwnPropertySymbols(e).filter(t=>Object.prototype.propertyIsEnumerable.call(e,t))}function IA(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const OY="[object RegExp]",xY="[object String]",TY="[object Number]",DY="[object Boolean]",CA="[object Arguments]",IY="[object Symbol]",CY="[object Date]",NY="[object Map]",UY="[object Set]",BY="[object Array]",$Y="[object Function]",PY="[object ArrayBuffer]",Sm="[object Object]",kY="[object Error]",MY="[object DataView]",LY="[object Uint8Array]",jY="[object Uint8ClampedArray]",zY="[object Uint16Array]",qY="[object Uint32Array]",HY="[object BigUint64Array]",FY="[object Int8Array]",VY="[object Int16Array]",GY="[object Int32Array]",KY="[object BigInt64Array]",YY="[object Float32Array]",WY="[object Float64Array]";function XY(){}function NA(e){if(!e||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);return t===null||t===Object.prototype||Object.getPrototypeOf(t)===null?Object.prototype.toString.call(e)==="[object Object]":!1}function ZY(e,t,n){return Jl(e,t,void 0,void 0,void 0,void 0,n)}function Jl(e,t,n,r,s,a,l){const u=l(e,t,n,r,s,a);if(u!==void 0)return u;if(typeof e==typeof t)switch(typeof e){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return e===t;case"number":return e===t||Object.is(e,t);case"function":return e===t;case"object":return uu(e,t,a,l)}return uu(e,t,a,l)}function uu(e,t,n,r){if(Object.is(e,t))return!0;let s=IA(e),a=IA(t);if(s===CA&&(s=Sm),a===CA&&(a=Sm),s!==a)return!1;switch(s){case xY:return e.toString()===t.toString();case TY:{const d=e.valueOf(),h=t.valueOf();return RY(d,h)}case DY:case CY:case IY:return Object.is(e.valueOf(),t.valueOf());case OY:return e.source===t.source&&e.flags===t.flags;case $Y:return e===t}n=n??new Map;const l=n.get(e),u=n.get(t);if(l!=null&&u!=null)return l===t;n.set(e,t),n.set(t,e);try{switch(s){case NY:{if(e.size!==t.size)return!1;for(const[d,h]of e.entries())if(!t.has(d)||!Jl(h,t.get(d),d,e,t,n,r))return!1;return!0}case UY:{if(e.size!==t.size)return!1;const d=Array.from(e.values()),h=Array.from(t.values());for(let p=0;p<d.length;p++){const y=d[p],b=h.findIndex(w=>Jl(y,w,void 0,e,t,n,r));if(b===-1)return!1;h.splice(b,1)}return!0}case BY:case LY:case jY:case zY:case qY:case HY:case FY:case VY:case GY:case KY:case YY:case WY:{if(typeof Buffer<"u"&&Buffer.isBuffer(e)!==Buffer.isBuffer(t)||e.length!==t.length)return!1;for(let d=0;d<e.length;d++)if(!Jl(e[d],t[d],d,e,t,n,r))return!1;return!0}case PY:return e.byteLength!==t.byteLength?!1:uu(new Uint8Array(e),new Uint8Array(t),n,r);case MY:return e.byteLength!==t.byteLength||e.byteOffset!==t.byteOffset?!1:uu(new Uint8Array(e),new Uint8Array(t),n,r);case kY:return e.name===t.name&&e.message===t.message;case Sm:{if(!(uu(e.constructor,t.constructor,n,r)||NA(e)&&NA(t)))return!1;const d=[...Object.keys(e),...DA(e)],h=[...Object.keys(t),...DA(t)];if(d.length!==h.length)return!1;for(let p=0;p<d.length;p++){const y=d[p],b=e[y];if(!Object.hasOwn(t,y))return!1;const w=t[y];if(!Jl(b,w,y,e,t,n,r))return!1}return!0}default:return!1}}finally{n.delete(e),n.delete(t)}}function QY(e,t){return ZY(e,t,XY)}var JY=Object.defineProperty,UA=Object.getOwnPropertySymbols,eW=Object.prototype.hasOwnProperty,tW=Object.prototype.propertyIsEnumerable,U0=(e,t,n)=>t in e?JY(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,BA=(e,t)=>{for(var n in t||(t={}))eW.call(t,n)&&U0(e,n,t[n]);if(UA)for(var n of UA(t))tW.call(t,n)&&U0(e,n,t[n]);return e},Pn=(e,t,n)=>U0(e,typeof t!="symbol"?t+"":t,n);class Wo extends uV{constructor(t,n,r,s=gi,a=void 0){super(t,n,r,s),this.core=t,this.logger=n,this.name=r,Pn(this,"map",new Map),Pn(this,"version",rG),Pn(this,"cached",[]),Pn(this,"initialized",!1),Pn(this,"getKey"),Pn(this,"storagePrefix",gi),Pn(this,"recentlyDeleted",[]),Pn(this,"recentlyDeletedLimit",200),Pn(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(l=>{this.getKey&&l!==null&&!cn(l)?this.map.set(this.getKey(l),l):dH(l)?this.map.set(l.id,l):pH(l)&&this.map.set(l.topic,l)}),this.cached=[],this.initialized=!0)}),Pn(this,"set",async(l,u)=>{this.isInitialized(),this.map.has(l)?await this.update(l,u):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:l,value:u}),this.map.set(l,u),await this.persist())}),Pn(this,"get",l=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:l}),this.getData(l))),Pn(this,"getAll",l=>(this.isInitialized(),l?this.values.filter(u=>Object.keys(l).every(d=>QY(u[d],l[d]))):this.values)),Pn(this,"update",async(l,u)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:l,update:u});const d=BA(BA({},this.getData(l)),u);this.map.set(l,d),await this.persist()}),Pn(this,"delete",async(l,u)=>{this.isInitialized(),this.map.has(l)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:l,reason:u}),this.map.delete(l),this.addToRecentlyDeleted(l),await this.persist())}),this.logger=Tn(n,this.name),this.storagePrefix=s,this.getKey=a}get context(){return Yn(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(t){this.recentlyDeleted.push(t),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(t){await this.core.storage.setItem(this.storageKey,t)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(t){const n=this.map.get(t);if(!n){if(this.recentlyDeleted.includes(t)){const{message:s}=be("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${t}`);throw this.logger.error(s),new Error(s)}const{message:r}=be("NO_MATCHING_KEY",`${this.name}: ${t}`);throw this.logger.error(r),new Error(r)}return n}async persist(){await this.setDataStore(this.values)}async restore(){try{const t=await this.getDataStore();if(typeof t>"u"||!t.length)return;if(this.map.size){const{message:n}=be("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=t,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(t){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(t)}}isInitialized(){if(!this.initialized){const{message:t}=be("NOT_INITIALIZED",this.name);throw new Error(t)}}}var nW=Object.defineProperty,rW=(e,t,n)=>t in e?nW(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Le=(e,t,n)=>rW(e,typeof t!="symbol"?t+"":t,n);class iW{constructor(t,n){this.core=t,this.logger=n,Le(this,"name",aG),Le(this,"version",cG),Le(this,"events",new bd),Le(this,"pairings"),Le(this,"initialized",!1),Le(this,"storagePrefix",gi),Le(this,"ignoredPayloadTypes",[Ki]),Le(this,"registeredMethods",[]),Le(this,"init",async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))}),Le(this,"register",({methods:r})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...r])]}),Le(this,"create",async r=>{this.isInitialized();const s=v0(),a=await this.core.crypto.setSymKey(s),l=qt(we.FIVE_MINUTES),u={protocol:jT},d={topic:a,expiry:l,relay:u,active:!1,methods:r?.methods},h=BS({protocol:this.core.protocol,version:this.core.version,topic:a,symKey:s,relay:u,expiryTimestamp:l,methods:r?.methods});return this.events.emit(Ao.create,d),this.core.expirer.set(a,l),await this.pairings.set(a,d),await this.core.relayer.subscribe(a,{transportType:r?.transportType}),{topic:a,uri:h}}),Le(this,"pair",async r=>{this.isInitialized();const s=this.core.eventClient.createEvent({properties:{topic:r?.uri,trace:[ri.pairing_started]}});this.isValidPair(r,s);const{topic:a,symKey:l,relay:u,expiryTimestamp:d,methods:h}=US(r.uri);s.props.properties.topic=a,s.addTrace(ri.pairing_uri_validation_success),s.addTrace(ri.pairing_uri_not_expired);let p;if(this.pairings.keys.includes(a)){if(p=this.pairings.get(a),s.addTrace(ri.existing_pairing),p.active)throw s.setError(zi.active_pairing_already_exists),new Error(`Pairing already exists: ${a}. Please try again with a new connection URI.`);s.addTrace(ri.pairing_not_expired)}const y=d||qt(we.FIVE_MINUTES),b={topic:a,relay:u,expiry:y,active:!1,methods:h};this.core.expirer.set(a,y),await this.pairings.set(a,b),s.addTrace(ri.store_new_pairing),r.activatePairing&&await this.activate({topic:a}),this.events.emit(Ao.create,b),s.addTrace(ri.emit_inactive_pairing),this.core.crypto.keychain.has(a)||await this.core.crypto.setSymKey(l,a),s.addTrace(ri.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{s.setError(zi.no_internet_connection)}try{await this.core.relayer.subscribe(a,{relay:u})}catch(w){throw s.setError(zi.subscribe_pairing_topic_failure),w}return s.addTrace(ri.subscribe_pairing_topic_success),b}),Le(this,"activate",async({topic:r})=>{this.isInitialized();const s=qt(we.FIVE_MINUTES);this.core.expirer.set(r,s),await this.pairings.update(r,{active:!0,expiry:s})}),Le(this,"ping",async r=>{this.isInitialized(),await this.isValidPing(r),this.logger.warn("ping() is deprecated and will be removed in the next major release.");const{topic:s}=r;if(this.pairings.keys.includes(s)){const a=await this.sendRequest(s,"wc_pairingPing",{}),{done:l,resolve:u,reject:d}=Eo();this.events.once(We("pairing_ping",a),({error:h})=>{h?d(h):u()}),await l()}}),Le(this,"updateExpiry",async({topic:r,expiry:s})=>{this.isInitialized(),await this.pairings.update(r,{expiry:s})}),Le(this,"updateMetadata",async({topic:r,metadata:s})=>{this.isInitialized(),await this.pairings.update(r,{peerMetadata:s})}),Le(this,"getPairings",()=>(this.isInitialized(),this.pairings.values)),Le(this,"disconnect",async r=>{this.isInitialized(),await this.isValidDisconnect(r);const{topic:s}=r;this.pairings.keys.includes(s)&&(await this.sendRequest(s,"wc_pairingDelete",vt("USER_DISCONNECTED")),await this.deletePairing(s))}),Le(this,"formatUriFromPairing",r=>{this.isInitialized();const{topic:s,relay:a,expiry:l,methods:u}=r,d=this.core.crypto.keychain.get(s);return BS({protocol:this.core.protocol,version:this.core.version,topic:s,symKey:d,relay:a,expiryTimestamp:l,methods:u})}),Le(this,"sendRequest",async(r,s,a)=>{const l=ks(s,a),u=await this.core.crypto.encode(r,l),d=Fl[s].req;return this.core.history.set(r,l),this.core.relayer.publish(r,u,d),l.id}),Le(this,"sendResult",async(r,s,a)=>{const l=Kd(r,a),u=await this.core.crypto.encode(s,l),d=(await this.core.history.get(s,r)).request.method,h=Fl[d].res;await this.core.relayer.publish(s,u,h),await this.core.history.resolve(l)}),Le(this,"sendError",async(r,s,a)=>{const l=Yd(r,a),u=await this.core.crypto.encode(s,l),d=(await this.core.history.get(s,r)).request.method,h=Fl[d]?Fl[d].res:Fl.unregistered_method.res;await this.core.relayer.publish(s,u,h),await this.core.history.resolve(l)}),Le(this,"deletePairing",async(r,s)=>{await this.core.relayer.unsubscribe(r),await Promise.all([this.pairings.delete(r,vt("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(r),s?Promise.resolve():this.core.expirer.del(r)])}),Le(this,"cleanup",async()=>{const r=this.pairings.getAll().filter(s=>Cs(s.expiry));await Promise.all(r.map(s=>this.deletePairing(s.topic)))}),Le(this,"onRelayEventRequest",async r=>{const{topic:s,payload:a}=r;switch(a.method){case"wc_pairingPing":return await this.onPairingPingRequest(s,a);case"wc_pairingDelete":return await this.onPairingDeleteRequest(s,a);default:return await this.onUnknownRpcMethodRequest(s,a)}}),Le(this,"onRelayEventResponse",async r=>{const{topic:s,payload:a}=r,l=(await this.core.history.get(s,a.id)).request.method;switch(l){case"wc_pairingPing":return this.onPairingPingResponse(s,a);default:return this.onUnknownRpcMethodResponse(l)}}),Le(this,"onPairingPingRequest",async(r,s)=>{const{id:a}=s;try{this.isValidPing({topic:r}),await this.sendResult(a,r,!0),this.events.emit(Ao.ping,{id:a,topic:r})}catch(l){await this.sendError(a,r,l),this.logger.error(l)}}),Le(this,"onPairingPingResponse",(r,s)=>{const{id:a}=s;setTimeout(()=>{si(s)?this.events.emit(We("pairing_ping",a),{}):Rr(s)&&this.events.emit(We("pairing_ping",a),{error:s.error})},500)}),Le(this,"onPairingDeleteRequest",async(r,s)=>{const{id:a}=s;try{this.isValidDisconnect({topic:r}),await this.deletePairing(r),this.events.emit(Ao.delete,{id:a,topic:r})}catch(l){await this.sendError(a,r,l),this.logger.error(l)}}),Le(this,"onUnknownRpcMethodRequest",async(r,s)=>{const{id:a,method:l}=s;try{if(this.registeredMethods.includes(l))return;const u=vt("WC_METHOD_UNSUPPORTED",l);await this.sendError(a,r,u),this.logger.error(u)}catch(u){await this.sendError(a,r,u),this.logger.error(u)}}),Le(this,"onUnknownRpcMethodResponse",r=>{this.registeredMethods.includes(r)||this.logger.error(vt("WC_METHOD_UNSUPPORTED",r))}),Le(this,"isValidPair",(r,s)=>{var a;if(!Ln(r)){const{message:u}=be("MISSING_OR_INVALID",`pair() params: ${r}`);throw s.setError(zi.malformed_pairing_uri),new Error(u)}if(!hH(r.uri)){const{message:u}=be("MISSING_OR_INVALID",`pair() uri: ${r.uri}`);throw s.setError(zi.malformed_pairing_uri),new Error(u)}const l=US(r?.uri);if(!((a=l?.relay)!=null&&a.protocol)){const{message:u}=be("MISSING_OR_INVALID","pair() uri#relay-protocol");throw s.setError(zi.malformed_pairing_uri),new Error(u)}if(!(l!=null&&l.symKey)){const{message:u}=be("MISSING_OR_INVALID","pair() uri#symKey");throw s.setError(zi.malformed_pairing_uri),new Error(u)}if(l!=null&&l.expiryTimestamp&&we.toMiliseconds(l?.expiryTimestamp)<Date.now()){s.setError(zi.pairing_expired);const{message:u}=be("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(u)}}),Le(this,"isValidPing",async r=>{if(!Ln(r)){const{message:a}=be("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(a)}const{topic:s}=r;await this.isValidPairingTopic(s)}),Le(this,"isValidDisconnect",async r=>{if(!Ln(r)){const{message:a}=be("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(a)}const{topic:s}=r;await this.isValidPairingTopic(s)}),Le(this,"isValidPairingTopic",async r=>{if(!Bt(r,!1)){const{message:s}=be("MISSING_OR_INVALID",`pairing topic should be a string: ${r}`);throw new Error(s)}if(!this.pairings.keys.includes(r)){const{message:s}=be("NO_MATCHING_KEY",`pairing topic doesn't exist: ${r}`);throw new Error(s)}if(Cs(this.pairings.get(r).expiry)){await this.deletePairing(r);const{message:s}=be("EXPIRED",`pairing topic: ${r}`);throw new Error(s)}}),this.core=t,this.logger=Tn(n,this.name),this.pairings=new Wo(this.core,this.logger,this.name,this.storagePrefix)}get context(){return Yn(this.logger)}isInitialized(){if(!this.initialized){const{message:t}=be("NOT_INITIALIZED",this.name);throw new Error(t)}}registerRelayerEvents(){this.core.relayer.on(Qt.message,async t=>{const{topic:n,message:r,transportType:s}=t;if(this.pairings.keys.includes(n)&&s!==mt.link_mode&&!this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(r)))try{const a=await this.core.crypto.decode(n,r);Hb(a)?(this.core.history.set(n,a),await this.onRelayEventRequest({topic:n,payload:a})):Wd(a)&&(await this.core.history.resolve(a),await this.onRelayEventResponse({topic:n,payload:a}),this.core.history.delete(n,a.id)),await this.core.relayer.messages.ack(n,r)}catch(a){this.logger.error(a)}})}registerExpirerEvents(){this.core.expirer.on(Ar.expired,async t=>{const{topic:n}=Ox(t.target);n&&this.pairings.keys.includes(n)&&(await this.deletePairing(n,!0),this.events.emit(Ao.expire,{topic:n}))})}}var sW=Object.defineProperty,oW=(e,t,n)=>t in e?sW(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,on=(e,t,n)=>oW(e,typeof t!="symbol"?t+"":t,n);class aW extends oV{constructor(t,n){super(t,n),this.core=t,this.logger=n,on(this,"records",new Map),on(this,"events",new Vn.EventEmitter),on(this,"name",lG),on(this,"version",uG),on(this,"cached",[]),on(this,"initialized",!1),on(this,"storagePrefix",gi),on(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.records.set(r.id,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),on(this,"set",(r,s,a)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:r,request:s,chainId:a}),this.records.has(s.id))return;const l={id:s.id,topic:r,request:{method:s.method,params:s.params||null},chainId:a,expiry:qt(we.THIRTY_DAYS)};this.records.set(l.id,l),this.persist(),this.events.emit(Pr.created,l)}),on(this,"resolve",async r=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:r}),!this.records.has(r.id))return;const s=await this.getRecord(r.id);typeof s.response>"u"&&(s.response=Rr(r)?{error:r.error}:{result:r.result},this.records.set(s.id,s),this.persist(),this.events.emit(Pr.updated,s))}),on(this,"get",async(r,s)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:r,id:s}),await this.getRecord(s))),on(this,"delete",(r,s)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:s}),this.values.forEach(a=>{if(a.topic===r){if(typeof s<"u"&&a.id!==s)return;this.records.delete(a.id),this.events.emit(Pr.deleted,a)}}),this.persist()}),on(this,"exists",async(r,s)=>(this.isInitialized(),this.records.has(s)?(await this.getRecord(s)).topic===r:!1)),on(this,"on",(r,s)=>{this.events.on(r,s)}),on(this,"once",(r,s)=>{this.events.once(r,s)}),on(this,"off",(r,s)=>{this.events.off(r,s)}),on(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.logger=Tn(n,this.name)}get context(){return Yn(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const t=[];return this.values.forEach(n=>{if(typeof n.response<"u")return;const r={topic:n.topic,request:ks(n.request.method,n.request.params,n.id),chainId:n.chainId};return t.push(r)}),t}async setJsonRpcRecords(t){await this.core.storage.setItem(this.storageKey,t)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(t){this.isInitialized();const n=this.records.get(t);if(!n){const{message:r}=be("NO_MATCHING_KEY",`${this.name}: ${t}`);throw new Error(r)}return n}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(Pr.sync)}async restore(){try{const t=await this.getJsonRpcRecords();if(typeof t>"u"||!t.length)return;if(this.records.size){const{message:n}=be("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=t,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(t){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(t)}}registerEventListeners(){this.events.on(Pr.created,t=>{const n=Pr.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:t})}),this.events.on(Pr.updated,t=>{const n=Pr.updated;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:t})}),this.events.on(Pr.deleted,t=>{const n=Pr.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:t})}),this.core.heartbeat.on(Ko.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let t=!1;this.records.forEach(n=>{we.toMiliseconds(n.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${n.id}`),this.records.delete(n.id),this.events.emit(Pr.deleted,n,!1),t=!0)}),t&&this.persist()}catch(t){this.logger.warn(t)}}isInitialized(){if(!this.initialized){const{message:t}=be("NOT_INITIALIZED",this.name);throw new Error(t)}}}var cW=Object.defineProperty,lW=(e,t,n)=>t in e?cW(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,vn=(e,t,n)=>lW(e,typeof t!="symbol"?t+"":t,n);class uW extends hV{constructor(t,n){super(t,n),this.core=t,this.logger=n,vn(this,"expirations",new Map),vn(this,"events",new Vn.EventEmitter),vn(this,"name",fG),vn(this,"version",hG),vn(this,"cached",[]),vn(this,"initialized",!1),vn(this,"storagePrefix",gi),vn(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.expirations.set(r.target,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),vn(this,"has",r=>{try{const s=this.formatTarget(r);return typeof this.getExpiration(s)<"u"}catch{return!1}}),vn(this,"set",(r,s)=>{this.isInitialized();const a=this.formatTarget(r),l={target:a,expiry:s};this.expirations.set(a,l),this.checkExpiry(a,l),this.events.emit(Ar.created,{target:a,expiration:l})}),vn(this,"get",r=>{this.isInitialized();const s=this.formatTarget(r);return this.getExpiration(s)}),vn(this,"del",r=>{if(this.isInitialized(),this.has(r)){const s=this.formatTarget(r),a=this.getExpiration(s);this.expirations.delete(s),this.events.emit(Ar.deleted,{target:s,expiration:a})}}),vn(this,"on",(r,s)=>{this.events.on(r,s)}),vn(this,"once",(r,s)=>{this.events.once(r,s)}),vn(this,"off",(r,s)=>{this.events.off(r,s)}),vn(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.logger=Tn(n,this.name)}get context(){return Yn(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(t){if(typeof t=="string")return X9(t);if(typeof t=="number")return Z9(t);const{message:n}=be("UNKNOWN_TYPE",`Target type: ${typeof t}`);throw new Error(n)}async setExpirations(t){await this.core.storage.setItem(this.storageKey,t)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(Ar.sync)}async restore(){try{const t=await this.getExpirations();if(typeof t>"u"||!t.length)return;if(this.expirations.size){const{message:n}=be("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=t,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(t){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(t)}}getExpiration(t){const n=this.expirations.get(t);if(!n){const{message:r}=be("NO_MATCHING_KEY",`${this.name}: ${t}`);throw this.logger.warn(r),new Error(r)}return n}checkExpiry(t,n){const{expiry:r}=n;we.toMiliseconds(r)-Date.now()<=0&&this.expire(t,n)}expire(t,n){this.expirations.delete(t),this.events.emit(Ar.expired,{target:t,expiration:n})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((t,n)=>this.checkExpiry(n,t))}registerEventListeners(){this.core.heartbeat.on(Ko.pulse,()=>this.checkExpirations()),this.events.on(Ar.created,t=>{const n=Ar.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:t}),this.persist()}),this.events.on(Ar.expired,t=>{const n=Ar.expired;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:t}),this.persist()}),this.events.on(Ar.deleted,t=>{const n=Ar.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:t}),this.persist()})}isInitialized(){if(!this.initialized){const{message:t}=be("NOT_INITIALIZED",this.name);throw new Error(t)}}}var fW=Object.defineProperty,hW=(e,t,n)=>t in e?fW(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ut=(e,t,n)=>hW(e,typeof t!="symbol"?t+"":t,n);class dW extends dV{constructor(t,n,r){super(t,n,r),this.core=t,this.logger=n,this.store=r,Ut(this,"name",dG),Ut(this,"abortController"),Ut(this,"isDevEnv"),Ut(this,"verifyUrlV3",gG),Ut(this,"storagePrefix",gi),Ut(this,"version",LT),Ut(this,"publicKey"),Ut(this,"fetchPromise"),Ut(this,"init",async()=>{var s;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&we.toMiliseconds((s=this.publicKey)==null?void 0:s.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))}),Ut(this,"register",async s=>{if(!Oc()||this.isDevEnv)return;const a=window.location.origin,{id:l,decryptedId:u}=s,d=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${a}&id=${l}&decryptedId=${u}`;try{const h=Xi.getDocument(),p=this.startAbortTimer(we.ONE_SECOND*5),y=await new Promise((b,w)=>{const v=()=>{window.removeEventListener("message",_),h.body.removeChild(E),w("attestation aborted")};this.abortController.signal.addEventListener("abort",v);const E=h.createElement("iframe");E.src=d,E.style.display="none",E.addEventListener("error",v,{signal:this.abortController.signal});const _=R=>{if(R.data&&typeof R.data=="string")try{const D=JSON.parse(R.data);if(D.type==="verify_attestation"){if(a0(D.attestation).payload.id!==l)return;clearInterval(p),h.body.removeChild(E),this.abortController.signal.removeEventListener("abort",v),window.removeEventListener("message",_),b(D.attestation===null?"":D.attestation)}}catch(D){this.logger.warn(D)}};h.body.appendChild(E),window.addEventListener("message",_,{signal:this.abortController.signal})});return this.logger.debug("jwt attestation",y),y}catch(h){this.logger.warn(h)}return""}),Ut(this,"resolve",async s=>{if(this.isDevEnv)return"";const{attestationId:a,hash:l,encryptedId:u}=s;if(a===""){this.logger.debug("resolve: attestationId is empty, skipping");return}if(a){if(a0(a).payload.id!==u)return;const h=await this.isValidJwtAttestation(a);if(h){if(!h.isVerified){this.logger.warn("resolve: jwt attestation: origin url not verified");return}return h}}if(!l)return;const d=this.getVerifyUrl(s?.verifyUrl);return this.fetchAttestation(l,d)}),Ut(this,"fetchAttestation",async(s,a)=>{this.logger.debug(`resolving attestation: ${s} from url: ${a}`);const l=this.startAbortTimer(we.ONE_SECOND*5),u=await fetch(`${a}/attestation/${s}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(l),u.status===200?await u.json():void 0}),Ut(this,"getVerifyUrl",s=>{let a=s||lu;return yG.includes(a)||(this.logger.info(`verify url: ${a}, not included in trusted list, assigning default: ${lu}`),a=lu),a}),Ut(this,"fetchPublicKey",async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const s=this.startAbortTimer(we.FIVE_SECONDS),a=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(s),await a.json()}catch(s){this.logger.warn(s)}}),Ut(this,"persistPublicKey",async s=>{this.logger.debug("persisting public key to local storage",s),await this.store.setItem(this.storeKey,s),this.publicKey=s}),Ut(this,"removePublicKey",async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0}),Ut(this,"isValidJwtAttestation",async s=>{const a=await this.getPublicKey();try{if(a)return this.validateAttestation(s,a)}catch(u){this.logger.error(u),this.logger.warn("error validating attestation")}const l=await this.fetchAndPersistPublicKey();try{if(l)return this.validateAttestation(s,l)}catch(u){this.logger.error(u),this.logger.warn("error validating attestation")}}),Ut(this,"getPublicKey",async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey()),Ut(this,"fetchAndPersistPublicKey",async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async a=>{const l=await this.fetchPublicKey();l&&(await this.persistPublicKey(l),a(l))});const s=await this.fetchPromise;return this.fetchPromise=void 0,s}),Ut(this,"validateAttestation",(s,a)=>{const l=Vq(s,a.publicKey),u={hasExpired:we.toMiliseconds(l.exp)<Date.now(),payload:l};if(u.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:u.payload.origin,isScam:u.payload.isScam,isVerified:u.payload.isVerified}}),this.logger=Tn(n,this.name),this.abortController=new AbortController,this.isDevEnv=Sb(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return Yn(this.logger)}startAbortTimer(t){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),we.toMiliseconds(t))}}var pW=Object.defineProperty,gW=(e,t,n)=>t in e?pW(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,$A=(e,t,n)=>gW(e,typeof t!="symbol"?t+"":t,n);class yW extends pV{constructor(t,n){super(t,n),this.projectId=t,this.logger=n,$A(this,"context",mG),$A(this,"registerDeviceToken",async r=>{const{clientId:s,token:a,notificationType:l,enableEncrypted:u=!1}=r,d=`${bG}/${this.projectId}/clients`;await fetch(d,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:s,type:l,token:a,always_raw:u})})}),this.logger=Tn(n,this.context)}}var mW=Object.defineProperty,PA=Object.getOwnPropertySymbols,bW=Object.prototype.hasOwnProperty,wW=Object.prototype.propertyIsEnumerable,B0=(e,t,n)=>t in e?mW(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Kl=(e,t)=>{for(var n in t||(t={}))bW.call(t,n)&&B0(e,n,t[n]);if(PA)for(var n of PA(t))wW.call(t,n)&&B0(e,n,t[n]);return e},Wt=(e,t,n)=>B0(e,typeof t!="symbol"?t+"":t,n);class vW extends gV{constructor(t,n,r=!0){super(t,n,r),this.core=t,this.logger=n,Wt(this,"context",vG),Wt(this,"storagePrefix",gi),Wt(this,"storageVersion",wG),Wt(this,"events",new Map),Wt(this,"shouldPersist",!1),Wt(this,"init",async()=>{if(!Sb())try{const s={eventId:tS(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:Ax(this.core.relayer.protocol,this.core.relayer.version,O0)}}};await this.sendEvent([s])}catch(s){this.logger.warn(s)}}),Wt(this,"createEvent",s=>{const{event:a="ERROR",type:l="",properties:{topic:u,trace:d}}=s,h=tS(),p=this.core.projectId||"",y=Date.now(),b=Kl({eventId:h,timestamp:y,props:{event:a,type:l,properties:{topic:u,trace:d}},bundleId:p,domain:this.getAppDomain()},this.setMethods(h));return this.telemetryEnabled&&(this.events.set(h,b),this.shouldPersist=!0),b}),Wt(this,"getEvent",s=>{const{eventId:a,topic:l}=s;if(a)return this.events.get(a);const u=Array.from(this.events.values()).find(d=>d.props.properties.topic===l);if(u)return Kl(Kl({},u),this.setMethods(u.eventId))}),Wt(this,"deleteEvent",s=>{const{eventId:a}=s;this.events.delete(a),this.shouldPersist=!0}),Wt(this,"setEventListeners",()=>{this.core.heartbeat.on(Ko.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(s=>{we.fromMiliseconds(Date.now())-we.fromMiliseconds(s.timestamp)>EG&&(this.events.delete(s.eventId),this.shouldPersist=!0)})})}),Wt(this,"setMethods",s=>({addTrace:a=>this.addTrace(s,a),setError:a=>this.setError(s,a)})),Wt(this,"addTrace",(s,a)=>{const l=this.events.get(s);l&&(l.props.properties.trace.push(a),this.events.set(s,l),this.shouldPersist=!0)}),Wt(this,"setError",(s,a)=>{const l=this.events.get(s);l&&(l.props.type=a,l.timestamp=Date.now(),this.events.set(s,l),this.shouldPersist=!0)}),Wt(this,"persist",async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1}),Wt(this,"restore",async()=>{try{const s=await this.core.storage.getItem(this.storageKey)||[];if(!s.length)return;s.forEach(a=>{this.events.set(a.eventId,Kl(Kl({},a),this.setMethods(a.eventId)))})}catch(s){this.logger.warn(s)}}),Wt(this,"submit",async()=>{if(!this.telemetryEnabled||this.events.size===0)return;const s=[];for(const[a,l]of this.events)l.props.type&&s.push(l);if(s.length!==0)try{if((await this.sendEvent(s)).ok)for(const a of s)this.events.delete(a.eventId),this.shouldPersist=!0}catch(a){this.logger.warn(a)}}),Wt(this,"sendEvent",async s=>{const a=this.getAppDomain()?"":"&sp=desktop";return await fetch(`${_G}?projectId=${this.core.projectId}&st=events_sdk&sv=js-${O0}${a}`,{method:"POST",body:JSON.stringify(s)})}),Wt(this,"getAppDomain",()=>Sx().url),this.logger=Tn(n,this.context),this.telemetryEnabled=r,r?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}var EW=Object.defineProperty,kA=Object.getOwnPropertySymbols,_W=Object.prototype.hasOwnProperty,SW=Object.prototype.propertyIsEnumerable,$0=(e,t,n)=>t in e?EW(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,MA=(e,t)=>{for(var n in t||(t={}))_W.call(t,n)&&$0(e,n,t[n]);if(kA)for(var n of kA(t))SW.call(t,n)&&$0(e,n,t[n]);return e},pt=(e,t,n)=>$0(e,typeof t!="symbol"?t+"":t,n);let AW=class eD extends nV{constructor(t){var n;super(t),pt(this,"protocol",MT),pt(this,"version",LT),pt(this,"name",R0),pt(this,"relayUrl"),pt(this,"projectId"),pt(this,"customStoragePrefix"),pt(this,"events",new Vn.EventEmitter),pt(this,"logger"),pt(this,"heartbeat"),pt(this,"relayer"),pt(this,"crypto"),pt(this,"storage"),pt(this,"history"),pt(this,"expirer"),pt(this,"pairing"),pt(this,"verify"),pt(this,"echoClient"),pt(this,"linkModeSupportedApps"),pt(this,"eventClient"),pt(this,"initialized",!1),pt(this,"logChunkController"),pt(this,"on",(u,d)=>this.events.on(u,d)),pt(this,"once",(u,d)=>this.events.once(u,d)),pt(this,"off",(u,d)=>this.events.off(u,d)),pt(this,"removeListener",(u,d)=>this.events.removeListener(u,d)),pt(this,"dispatchEnvelope",({topic:u,message:d,sessionExists:h})=>{if(!u||!d)return;const p={topic:u,message:d,publishedAt:Date.now(),transportType:mt.link_mode};this.relayer.onLinkMessageEvent(p,{sessionExists:h})});const r=this.getGlobalCore(t?.customStoragePrefix);if(r)try{return this.customStoragePrefix=r.customStoragePrefix,this.logger=r.logger,this.heartbeat=r.heartbeat,this.crypto=r.crypto,this.history=r.history,this.expirer=r.expirer,this.storage=r.storage,this.relayer=r.relayer,this.pairing=r.pairing,this.verify=r.verify,this.echoClient=r.echoClient,this.linkModeSupportedApps=r.linkModeSupportedApps,this.eventClient=r.eventClient,this.initialized=r.initialized,this.logChunkController=r.logChunkController,r}catch(u){console.warn("Failed to copy global core",u)}this.projectId=t?.projectId,this.relayUrl=t?.relayUrl||zT,this.customStoragePrefix=t!=null&&t.customStoragePrefix?`:${t.customStoragePrefix}`:"";const s=Gd({level:typeof t?.logger=="string"&&t.logger?t.logger:FV.logger,name:R0}),{logger:a,chunkLoggerController:l}=JF({opts:s,maxSizeInBytes:t?.maxLogBlobSizeInBytes,loggerOverride:t?.logger});this.logChunkController=l,(n=this.logChunkController)!=null&&n.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var u,d;(u=this.logChunkController)!=null&&u.downloadLogsBlobInBrowser&&((d=this.logChunkController)==null||d.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=Tn(a,this.name),this.heartbeat=new nF,this.crypto=new ZK(this,this.logger,t?.keychain),this.history=new aW(this,this.logger),this.expirer=new uW(this,this.logger),this.storage=t!=null&&t.storage?t.storage:new PF(MA(MA({},VV),t?.storageOptions)),this.relayer=new AY({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new iW(this,this.logger),this.verify=new dW(this,this.logger,this.storage),this.echoClient=new yW(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new vW(this,this.logger,t?.telemetryEnabled),this.setGlobalCore(this)}static async init(t){const n=new eD(t);await n.initialize();const r=await n.crypto.getClientId();return await n.storage.setItem(iG,r),n}get context(){return Yn(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var t;return(t=this.logChunkController)==null?void 0:t.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(t){this.linkModeSupportedApps.includes(t)||(this.linkModeSupportedApps.push(t),await this.storage.setItem(mA,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem(mA)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(t){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,t),this.logger.error(t.message),t}}getGlobalCore(t=""){try{if(this.isGlobalCoreDisabled())return;const n=`_walletConnectCore_${t}`,r=`${n}_count`;return globalThis[r]=(globalThis[r]||0)+1,globalThis[r]>1&&console.warn(`WalletConnect Core is already initialized. This is probably a mistake and can lead to unexpected behavior. Init() was called ${globalThis[r]} times.`),globalThis[n]}catch(n){console.warn("Failed to get global WalletConnect core",n);return}}setGlobalCore(t){var n;try{if(this.isGlobalCoreDisabled())return;const r=`_walletConnectCore_${((n=t.opts)==null?void 0:n.customStoragePrefix)||""}`;globalThis[r]=t}catch(r){console.warn("Failed to set global WalletConnect core",r)}}isGlobalCoreDisabled(){try{return typeof process<"u"&&HV.DISABLE_GLOBAL_CORE==="true"}catch{return!0}}};const RW=AW,tD="wc",nD=2,rD="client",Fb=`${tD}@${nD}:${rD}:`,Am={name:rD,logger:"error"},LA="WALLETCONNECT_DEEPLINK_CHOICE",OW="proposal",jA="Proposal expired",xW="session",Ga=we.SEVEN_DAYS,TW="engine",Xt={wc_sessionPropose:{req:{ttl:we.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:we.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:we.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:we.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:we.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:we.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:we.ONE_DAY,prompt:!1,tag:1104},res:{ttl:we.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:we.ONE_DAY,prompt:!1,tag:1106},res:{ttl:we.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:we.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:we.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:we.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:we.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:we.ONE_DAY,prompt:!1,tag:1112},res:{ttl:we.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:we.ONE_DAY,prompt:!1,tag:1114},res:{ttl:we.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:we.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:we.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:we.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:we.FIVE_MINUTES,prompt:!1,tag:1119}}},Rm={min:we.FIVE_MINUTES,max:we.SEVEN_DAYS},ti={idle:"IDLE",active:"ACTIVE"},DW={eth_sendTransaction:{key:""},eth_sendRawTransaction:{key:""},wallet_sendCalls:{key:""},solana_signTransaction:{key:"signature"},solana_signAllTransactions:{key:"transactions"},solana_signAndSendTransaction:{key:"signature"},sui_signAndExecuteTransaction:{key:"digest"},sui_signTransaction:{key:""},hedera_signAndExecuteTransaction:{key:"transactionId"},hedera_executeTransaction:{key:"transactionId"},near_signTransaction:{key:""},near_signTransactions:{key:""},tron_signTransaction:{key:"txID"},xrpl_signTransaction:{key:""},xrpl_signTransactionFor:{key:""},algo_signTxn:{key:""},sendTransfer:{key:"txid"},stacks_stxTransfer:{key:"txId"},polkadot_signTransaction:{key:""},cosmos_signDirect:{key:""}},IW="request",CW=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],NW="wc",UW="auth",BW="authKeys",$W="pairingTopics",PW="requests",Zd=`${NW}@${1.5}:${UW}:`,Gh=`${Zd}:PUB_KEY`;var kW=Object.defineProperty,MW=Object.defineProperties,LW=Object.getOwnPropertyDescriptors,zA=Object.getOwnPropertySymbols,jW=Object.prototype.hasOwnProperty,zW=Object.prototype.propertyIsEnumerable,P0=(e,t,n)=>t in e?kW(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,yt=(e,t)=>{for(var n in t||(t={}))jW.call(t,n)&&P0(e,n,t[n]);if(zA)for(var n of zA(t))zW.call(t,n)&&P0(e,n,t[n]);return e},kn=(e,t)=>MW(e,LW(t)),me=(e,t,n)=>P0(e,typeof t!="symbol"?t+"":t,n);class qW extends wV{constructor(t){super(t),me(this,"name",TW),me(this,"events",new bd),me(this,"initialized",!1),me(this,"requestQueue",{state:ti.idle,queue:[]}),me(this,"sessionRequestQueue",{state:ti.idle,queue:[]}),me(this,"emittedSessionRequests",new oj({limit:500})),me(this,"requestQueueDelay",we.ONE_SECOND),me(this,"expectedPairingMethodMap",new Map),me(this,"recentlyDeletedMap",new Map),me(this,"recentlyDeletedLimit",200),me(this,"relayMessageCache",[]),me(this,"pendingSessions",new Map),me(this,"init",async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(Xt)}),this.initialized=!0,setTimeout(async()=>{await this.processPendingMessageEvents(),this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},we.toMiliseconds(this.requestQueueDelay)))}),me(this,"connect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();const r=kn(yt({},n),{requiredNamespaces:n.requiredNamespaces||{},optionalNamespaces:n.optionalNamespaces||{}});await this.isValidConnect(r),r.optionalNamespaces=aH(r.requiredNamespaces,r.optionalNamespaces),r.requiredNamespaces={};const{pairingTopic:s,requiredNamespaces:a,optionalNamespaces:l,sessionProperties:u,scopedProperties:d,relays:h}=r;let p=s,y,b=!1;try{if(p){const k=this.client.core.pairing.pairings.get(p);this.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),b=k.active}}catch(k){throw this.client.logger.error(`connect() -> pairing.get(${p}) failed`),k}if(!p||!b){const{topic:k,uri:q}=await this.client.core.pairing.create();p=k,y=q}if(!p){const{message:k}=be("NO_MATCHING_KEY",`connect() pairing topic: ${p}`);throw new Error(k)}const w=await this.client.core.crypto.generateKeyPair(),v=Xt.wc_sessionPropose.req.ttl||we.FIVE_MINUTES,E=qt(v),_=kn(yt(yt({requiredNamespaces:a,optionalNamespaces:l,relays:h??[{protocol:jT}],proposer:{publicKey:w,metadata:this.client.metadata},expiryTimestamp:E,pairingTopic:p},u&&{sessionProperties:u}),d&&{scopedProperties:d}),{id:ii()}),R=We("session_connect",_.id),{reject:D,resolve:I,done:$}=Eo(v,jA),U=({id:k})=>{k===_.id&&(this.client.events.off("proposal_expire",U),this.pendingSessions.delete(_.id),this.events.emit(R,{error:{message:jA,code:0}}))};return this.client.events.on("proposal_expire",U),this.events.once(R,({error:k,session:q})=>{this.client.events.off("proposal_expire",U),k?D(k):q&&I(q)}),await this.sendRequest({topic:p,method:"wc_sessionPropose",params:_,throwOnFailedPublish:!0,clientRpcId:_.id}),await this.setProposal(_.id,_),{uri:y,approval:$}}),me(this,"pair",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(n)}catch(r){throw this.client.logger.error("pair() failed"),r}}),me(this,"approve",async n=>{var r,s,a;const l=this.client.core.eventClient.createEvent({properties:{topic:(r=n?.id)==null?void 0:r.toString(),trace:[kr.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(P){throw l.setError(ho.no_internet_connection),P}try{await this.isValidProposalId(n?.id)}catch(P){throw this.client.logger.error(`approve() -> proposal.get(${n?.id}) failed`),l.setError(ho.proposal_not_found),P}try{await this.isValidApprove(n)}catch(P){throw this.client.logger.error("approve() -> isValidApprove() failed"),l.setError(ho.session_approve_namespace_validation_failure),P}const{id:u,relayProtocol:d,namespaces:h,sessionProperties:p,scopedProperties:y,sessionConfig:b}=n,w=this.client.proposal.get(u);this.client.core.eventClient.deleteEvent({eventId:l.eventId});const{pairingTopic:v,proposer:E,requiredNamespaces:_,optionalNamespaces:R}=w;let D=(s=this.client.core.eventClient)==null?void 0:s.getEvent({topic:v});D||(D=(a=this.client.core.eventClient)==null?void 0:a.createEvent({type:kr.session_approve_started,properties:{topic:v,trace:[kr.session_approve_started,kr.session_namespaces_validation_success]}}));const I=await this.client.core.crypto.generateKeyPair(),$=E.publicKey,U=await this.client.core.crypto.generateSharedKey(I,$),k=yt(yt(yt({relay:{protocol:d??"irn"},namespaces:h,controller:{publicKey:I,metadata:this.client.metadata},expiry:qt(Ga)},p&&{sessionProperties:p}),y&&{scopedProperties:y}),b&&{sessionConfig:b}),q=mt.relay;D.addTrace(kr.subscribing_session_topic);try{await this.client.core.relayer.subscribe(U,{transportType:q})}catch(P){throw D.setError(ho.subscribe_session_topic_failure),P}D.addTrace(kr.subscribe_session_topic_success);const H=kn(yt({},k),{topic:U,requiredNamespaces:_,optionalNamespaces:R,pairingTopic:v,acknowledged:!1,self:k.controller,peer:{publicKey:E.publicKey,metadata:E.metadata},controller:I,transportType:mt.relay});await this.client.session.set(U,H),D.addTrace(kr.store_session);try{D.addTrace(kr.publishing_session_settle),await this.sendRequest({topic:U,method:"wc_sessionSettle",params:k,throwOnFailedPublish:!0}).catch(P=>{throw D?.setError(ho.session_settle_publish_failure),P}),D.addTrace(kr.session_settle_publish_success),D.addTrace(kr.publishing_session_approve),await this.sendResult({id:u,topic:v,result:{relay:{protocol:d??"irn"},responderPublicKey:I},throwOnFailedPublish:!0}).catch(P=>{throw D?.setError(ho.session_approve_publish_failure),P}),D.addTrace(kr.session_approve_publish_success)}catch(P){throw this.client.logger.error(P),this.client.session.delete(U,vt("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(U),P}return this.client.core.eventClient.deleteEvent({eventId:D.eventId}),await this.client.core.pairing.updateMetadata({topic:v,metadata:E.metadata}),await this.deleteProposal(u),await this.client.core.pairing.activate({topic:v}),await this.setExpiry(U,qt(Ga)),{topic:U,acknowledged:()=>Promise.resolve(this.client.session.get(U))}}),me(this,"reject",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(n)}catch(l){throw this.client.logger.error("reject() -> isValidReject() failed"),l}const{id:r,reason:s}=n;let a;try{a=this.client.proposal.get(r).pairingTopic}catch(l){throw this.client.logger.error(`reject() -> proposal.get(${r}) failed`),l}a&&await this.sendError({id:r,topic:a,error:s,rpcOpts:Xt.wc_sessionPropose.reject}),await this.deleteProposal(r)}),me(this,"update",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(n)}catch(y){throw this.client.logger.error("update() -> isValidUpdate() failed"),y}const{topic:r,namespaces:s}=n,{done:a,resolve:l,reject:u}=Eo(),d=ii(),h=Io().toString(),p=this.client.session.get(r).namespaces;return this.events.once(We("session_update",d),({error:y})=>{y?u(y):l()}),await this.client.session.update(r,{namespaces:s}),await this.sendRequest({topic:r,method:"wc_sessionUpdate",params:{namespaces:s},throwOnFailedPublish:!0,clientRpcId:d,relayRpcId:h}).catch(y=>{this.client.logger.error(y),this.client.session.update(r,{namespaces:p}),u(y)}),{acknowledged:a}}),me(this,"extend",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(n)}catch(d){throw this.client.logger.error("extend() -> isValidExtend() failed"),d}const{topic:r}=n,s=ii(),{done:a,resolve:l,reject:u}=Eo();return this.events.once(We("session_extend",s),({error:d})=>{d?u(d):l()}),await this.setExpiry(r,qt(Ga)),this.sendRequest({topic:r,method:"wc_sessionExtend",params:{},clientRpcId:s,throwOnFailedPublish:!0}).catch(d=>{u(d)}),{acknowledged:a}}),me(this,"request",async n=>{this.isInitialized();try{await this.isValidRequest(n)}catch(_){throw this.client.logger.error("request() -> isValidRequest() failed"),_}const{chainId:r,request:s,topic:a,expiry:l=Xt.wc_sessionRequest.req.ttl}=n,u=this.client.session.get(a);u?.transportType===mt.relay&&await this.confirmOnlineStateOrThrow();const d=ii(),h=Io().toString(),{done:p,resolve:y,reject:b}=Eo(l,"Request expired. Please try again.");this.events.once(We("session_request",d),({error:_,result:R})=>{_?b(_):y(R)});const w="wc_sessionRequest",v=this.getAppLinkIfEnabled(u.peer.metadata,u.transportType);if(v)return await this.sendRequest({clientRpcId:d,relayRpcId:h,topic:a,method:w,params:{request:kn(yt({},s),{expiryTimestamp:qt(l)}),chainId:r},expiry:l,throwOnFailedPublish:!0,appLink:v}).catch(_=>b(_)),this.client.events.emit("session_request_sent",{topic:a,request:s,chainId:r,id:d}),await p();const E={request:kn(yt({},s),{expiryTimestamp:qt(l)}),chainId:r};return await Promise.all([new Promise(async _=>{await this.sendRequest({clientRpcId:d,relayRpcId:h,topic:a,method:w,params:E,expiry:l,throwOnFailedPublish:!0,tvf:this.getTVFParams(d,E)}).catch(R=>b(R)),this.client.events.emit("session_request_sent",{topic:a,request:s,chainId:r,id:d}),_()}),new Promise(async _=>{var R;if(!((R=u.sessionConfig)!=null&&R.disableDeepLink)){const D=await tj(this.client.core.storage,LA);await Q9({id:d,topic:a,wcDeepLink:D})}_()}),p()]).then(_=>_[2])}),me(this,"respond",async n=>{this.isInitialized(),await this.isValidRespond(n);const{topic:r,response:s}=n,{id:a}=s,l=this.client.session.get(r);l.transportType===mt.relay&&await this.confirmOnlineStateOrThrow();const u=this.getAppLinkIfEnabled(l.peer.metadata,l.transportType);si(s)?await this.sendResult({id:a,topic:r,result:s.result,throwOnFailedPublish:!0,appLink:u}):Rr(s)&&await this.sendError({id:a,topic:r,error:s.error,appLink:u}),this.cleanupAfterResponse(n)}),me(this,"ping",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(n)}catch(s){throw this.client.logger.error("ping() -> isValidPing() failed"),s}const{topic:r}=n;if(this.client.session.keys.includes(r)){const s=ii(),a=Io().toString(),{done:l,resolve:u,reject:d}=Eo();this.events.once(We("session_ping",s),({error:h})=>{h?d(h):u()}),await Promise.all([this.sendRequest({topic:r,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:s,relayRpcId:a}),l()])}else this.client.core.pairing.pairings.keys.includes(r)&&(this.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),await this.client.core.pairing.ping({topic:r}))}),me(this,"emit",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(n);const{topic:r,event:s,chainId:a}=n,l=Io().toString(),u=ii();await this.sendRequest({topic:r,method:"wc_sessionEvent",params:{event:s,chainId:a},throwOnFailedPublish:!0,relayRpcId:l,clientRpcId:u})}),me(this,"disconnect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(n);const{topic:r}=n;if(this.client.session.keys.includes(r))await this.sendRequest({topic:r,method:"wc_sessionDelete",params:vt("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:r,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(r))await this.client.core.pairing.disconnect({topic:r});else{const{message:s}=be("MISMATCHED_TOPIC",`Session or pairing topic not found: ${r}`);throw new Error(s)}}),me(this,"find",n=>(this.isInitialized(),this.client.session.getAll().filter(r=>uH(r,n)))),me(this,"getPendingSessionRequests",()=>this.client.pendingRequest.getAll()),me(this,"authenticate",async(n,r)=>{var s;this.isInitialized(),this.isValidAuthenticate(n);const a=r&&this.client.core.linkModeSupportedApps.includes(r)&&((s=this.client.metadata.redirect)==null?void 0:s.linkMode),l=a?mt.link_mode:mt.relay;l===mt.relay&&await this.confirmOnlineStateOrThrow();const{chains:u,statement:d="",uri:h,domain:p,nonce:y,type:b,exp:w,nbf:v,methods:E=[],expiry:_}=n,R=[...n.resources||[]],{topic:D,uri:I}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:l});this.client.logger.info({message:"Generated new pairing",pairing:{topic:D,uri:I}});const $=await this.client.core.crypto.generateKeyPair(),U=jh($);if(await Promise.all([this.client.auth.authKeys.set(Gh,{responseTopic:U,publicKey:$}),this.client.auth.pairingTopics.set(U,{topic:U,pairingTopic:D})]),await this.client.core.relayer.subscribe(U,{transportType:l}),this.client.logger.info(`sending request to new pairing topic: ${D}`),E.length>0){const{namespace:Y}=dc(u[0]);let C=mz(Y,"request",E);Lh(R)&&(C=wz(C,R.pop())),R.push(C)}const k=_&&_>Xt.wc_sessionAuthenticate.req.ttl?_:Xt.wc_sessionAuthenticate.req.ttl,q={authPayload:{type:b??"caip122",chains:u,statement:d,aud:h,domain:p,version:"1",nonce:y,iat:new Date().toISOString(),exp:w,nbf:v,resources:R},requester:{publicKey:$,metadata:this.client.metadata},expiryTimestamp:qt(k)},H={eip155:{chains:u,methods:[...new Set(["personal_sign",...E])],events:["chainChanged","accountsChanged"]}},P={requiredNamespaces:{},optionalNamespaces:H,relays:[{protocol:"irn"}],pairingTopic:D,proposer:{publicKey:$,metadata:this.client.metadata},expiryTimestamp:qt(Xt.wc_sessionPropose.req.ttl),id:ii()},{done:V,resolve:G,reject:K}=Eo(k,"Request expired"),ce=ii(),ne=We("session_connect",P.id),T=We("session_request",ce),O=async({error:Y,session:C})=>{this.events.off(T,M),Y?K(Y):C&&G({session:C})},M=async Y=>{var C,z,J;if(await this.deletePendingAuthRequest(ce,{message:"fulfilled",code:0}),Y.error){const xe=vt("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return Y.error.code===xe.code?void 0:(this.events.off(ne,O),K(Y.error.message))}await this.deleteProposal(P.id),this.events.off(ne,O);const{cacaos:se,responder:re}=Y.result,ge=[],ye=[];for(const xe of se){await hS({cacao:xe,projectId:this.client.core.projectId})||(this.client.logger.error(xe,"Signature verification failed"),K(vt("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:nt}=xe,bt=Lh(nt.resources),Dn=[f0(nt.iss)],_n=od(nt.iss);if(bt){const hn=dS(bt),Fs=pS(bt);ge.push(...hn),Dn.push(...Fs)}for(const hn of Dn)ye.push(`${hn}:${_n}`)}const De=await this.client.core.crypto.generateSharedKey($,re.publicKey);let _e;ge.length>0&&(_e={topic:De,acknowledged:!0,self:{publicKey:$,metadata:this.client.metadata},peer:re,controller:re.publicKey,expiry:qt(Ga),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:D,namespaces:MS([...new Set(ge)],[...new Set(ye)]),transportType:l},await this.client.core.relayer.subscribe(De,{transportType:l}),await this.client.session.set(De,_e),D&&await this.client.core.pairing.updateMetadata({topic:D,metadata:re.metadata}),_e=this.client.session.get(De)),(C=this.client.metadata.redirect)!=null&&C.linkMode&&(z=re.metadata.redirect)!=null&&z.linkMode&&(J=re.metadata.redirect)!=null&&J.universal&&r&&(this.client.core.addLinkModeSupportedApp(re.metadata.redirect.universal),this.client.session.update(De,{transportType:mt.link_mode})),G({auths:se,session:_e})};this.events.once(ne,O),this.events.once(T,M);let F;try{if(a){const Y=ks("wc_sessionAuthenticate",q,ce);this.client.core.history.set(D,Y);const C=await this.client.core.crypto.encode("",Y,{type:ju,encoding:$s});F=wh(r,D,C)}else await Promise.all([this.sendRequest({topic:D,method:"wc_sessionAuthenticate",params:q,expiry:n.expiry,throwOnFailedPublish:!0,clientRpcId:ce}),this.sendRequest({topic:D,method:"wc_sessionPropose",params:P,expiry:Xt.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:P.id})])}catch(Y){throw this.events.off(ne,O),this.events.off(T,M),Y}return await this.setProposal(P.id,P),await this.setAuthRequest(ce,{request:kn(yt({},q),{verifyContext:{}}),pairingTopic:D,transportType:l}),{uri:F??I,response:V}}),me(this,"approveSessionAuthenticate",async n=>{const{id:r,auths:s}=n,a=this.client.core.eventClient.createEvent({properties:{topic:r.toString(),trace:[po.authenticated_session_approve_started]}});try{this.isInitialized()}catch(_){throw a.setError(Vl.no_internet_connection),_}const l=this.getPendingAuthRequest(r);if(!l)throw a.setError(Vl.authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${r}`);const u=l.transportType||mt.relay;u===mt.relay&&await this.confirmOnlineStateOrThrow();const d=l.requester.publicKey,h=await this.client.core.crypto.generateKeyPair(),p=jh(d),y={type:Ki,receiverPublicKey:d,senderPublicKey:h},b=[],w=[];for(const _ of s){if(!await hS({cacao:_,projectId:this.client.core.projectId})){a.setError(Vl.invalid_cacao);const U=vt("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:r,topic:p,error:U,encodeOpts:y}),new Error(U.message)}a.addTrace(po.cacaos_verified);const{p:R}=_,D=Lh(R.resources),I=[f0(R.iss)],$=od(R.iss);if(D){const U=dS(D),k=pS(D);b.push(...U),I.push(...k)}for(const U of I)w.push(`${U}:${$}`)}const v=await this.client.core.crypto.generateSharedKey(h,d);a.addTrace(po.create_authenticated_session_topic);let E;if(b?.length>0){E={topic:v,acknowledged:!0,self:{publicKey:h,metadata:this.client.metadata},peer:{publicKey:d,metadata:l.requester.metadata},controller:d,expiry:qt(Ga),authentication:s,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:l.pairingTopic,namespaces:MS([...new Set(b)],[...new Set(w)]),transportType:u},a.addTrace(po.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(v,{transportType:u})}catch(_){throw a.setError(Vl.subscribe_authenticated_session_topic_failure),_}a.addTrace(po.subscribe_authenticated_session_topic_success),await this.client.session.set(v,E),a.addTrace(po.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:l.pairingTopic,metadata:l.requester.metadata})}a.addTrace(po.publishing_authenticated_session_approve);try{await this.sendResult({topic:p,id:r,result:{cacaos:s,responder:{publicKey:h,metadata:this.client.metadata}},encodeOpts:y,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(l.requester.metadata,u)})}catch(_){throw a.setError(Vl.authenticated_session_approve_publish_failure),_}return await this.client.auth.requests.delete(r,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:l.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:a.eventId}),{session:E}}),me(this,"rejectSessionAuthenticate",async n=>{this.isInitialized();const{id:r,reason:s}=n,a=this.getPendingAuthRequest(r);if(!a)throw new Error(`Could not find pending auth request with id ${r}`);a.transportType===mt.relay&&await this.confirmOnlineStateOrThrow();const l=a.requester.publicKey,u=await this.client.core.crypto.generateKeyPair(),d=jh(l),h={type:Ki,receiverPublicKey:l,senderPublicKey:u};await this.sendError({id:r,topic:d,error:s,encodeOpts:h,rpcOpts:Xt.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(a.requester.metadata,a.transportType)}),await this.client.auth.requests.delete(r,{message:"rejected",code:0}),await this.deleteProposal(r)}),me(this,"formatAuthMessage",n=>{this.isInitialized();const{request:r,iss:s}=n;return zx(r,s)}),me(this,"processRelayMessageCache",()=>{setTimeout(async()=>{if(this.relayMessageCache.length!==0)for(;this.relayMessageCache.length>0;)try{const n=this.relayMessageCache.shift();n&&await this.onRelayMessage(n)}catch(n){this.client.logger.error(n)}},50)}),me(this,"cleanupDuplicatePairings",async n=>{if(n.pairingTopic)try{const r=this.client.core.pairing.pairings.get(n.pairingTopic),s=this.client.core.pairing.pairings.getAll().filter(a=>{var l,u;return((l=a.peerMetadata)==null?void 0:l.url)&&((u=a.peerMetadata)==null?void 0:u.url)===n.peer.metadata.url&&a.topic&&a.topic!==r.topic});if(s.length===0)return;this.client.logger.info(`Cleaning up ${s.length} duplicate pairing(s)`),await Promise.all(s.map(a=>this.client.core.pairing.disconnect({topic:a.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(r){this.client.logger.error(r)}}),me(this,"deleteSession",async n=>{var r;const{topic:s,expirerHasDeleted:a=!1,emitEvent:l=!0,id:u=0}=n,{self:d}=this.client.session.get(s);await this.client.core.relayer.unsubscribe(s),await this.client.session.delete(s,vt("USER_DISCONNECTED")),this.addToRecentlyDeleted(s,"session"),this.client.core.crypto.keychain.has(d.publicKey)&&await this.client.core.crypto.deleteKeyPair(d.publicKey),this.client.core.crypto.keychain.has(s)&&await this.client.core.crypto.deleteSymKey(s),a||this.client.core.expirer.del(s),this.client.core.storage.removeItem(LA).catch(h=>this.client.logger.warn(h)),this.getPendingSessionRequests().forEach(h=>{h.topic===s&&this.deletePendingSessionRequest(h.id,vt("USER_DISCONNECTED"))}),s===((r=this.sessionRequestQueue.queue[0])==null?void 0:r.topic)&&(this.sessionRequestQueue.state=ti.idle),l&&this.client.events.emit("session_delete",{id:u,topic:s})}),me(this,"deleteProposal",async(n,r)=>{if(r)try{const s=this.client.proposal.get(n);this.client.core.eventClient.getEvent({topic:s.pairingTopic})?.setError(ho.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(n,vt("USER_DISCONNECTED")),r?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"proposal")}),me(this,"deletePendingSessionRequest",async(n,r,s=!1)=>{await Promise.all([this.client.pendingRequest.delete(n,r),s?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(a=>a.id!==n),s&&(this.sessionRequestQueue.state=ti.idle,this.client.events.emit("session_request_expire",{id:n}))}),me(this,"deletePendingAuthRequest",async(n,r,s=!1)=>{await Promise.all([this.client.auth.requests.delete(n,r),s?Promise.resolve():this.client.core.expirer.del(n)])}),me(this,"setExpiry",async(n,r)=>{this.client.session.keys.includes(n)&&(this.client.core.expirer.set(n,r),await this.client.session.update(n,{expiry:r}))}),me(this,"setProposal",async(n,r)=>{this.client.core.expirer.set(n,qt(Xt.wc_sessionPropose.req.ttl)),await this.client.proposal.set(n,r)}),me(this,"setAuthRequest",async(n,r)=>{const{request:s,pairingTopic:a,transportType:l=mt.relay}=r;this.client.core.expirer.set(n,s.expiryTimestamp),await this.client.auth.requests.set(n,{authPayload:s.authPayload,requester:s.requester,expiryTimestamp:s.expiryTimestamp,id:n,pairingTopic:a,verifyContext:s.verifyContext,transportType:l})}),me(this,"setPendingSessionRequest",async n=>{const{id:r,topic:s,params:a,verifyContext:l}=n,u=a.request.expiryTimestamp||qt(Xt.wc_sessionRequest.req.ttl);this.client.core.expirer.set(r,u),await this.client.pendingRequest.set(r,{id:r,topic:s,params:a,verifyContext:l})}),me(this,"sendRequest",async n=>{const{topic:r,method:s,params:a,expiry:l,relayRpcId:u,clientRpcId:d,throwOnFailedPublish:h,appLink:p,tvf:y}=n,b=ks(s,a,d);let w;const v=!!p;try{const R=v?$s:qr;w=await this.client.core.crypto.encode(r,b,{encoding:R})}catch(R){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${r} failed`),R}let E;if(CW.includes(s)){const R=ai(JSON.stringify(b)),D=ai(w);E=await this.client.core.verify.register({id:D,decryptedId:R})}const _=Xt[s].req;if(_.attestation=E,l&&(_.ttl=l),u&&(_.id=u),this.client.core.history.set(r,b),v){const R=wh(p,r,w);await global.Linking.openURL(R,this.client.name)}else{const R=Xt[s].req;l&&(R.ttl=l),u&&(R.id=u),R.tvf=kn(yt({},y),{correlationId:b.id}),h?(R.internal=kn(yt({},R.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(r,w,R)):this.client.core.relayer.publish(r,w,R).catch(D=>this.client.logger.error(D))}return b.id}),me(this,"sendResult",async n=>{const{id:r,topic:s,result:a,throwOnFailedPublish:l,encodeOpts:u,appLink:d}=n,h=Kd(r,a);let p;const y=d&&typeof(global==null?void 0:global.Linking)<"u";try{const v=y?$s:qr;p=await this.client.core.crypto.encode(s,h,kn(yt({},u||{}),{encoding:v}))}catch(v){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${s} failed`),v}let b,w;try{b=await this.client.core.history.get(s,r);const v=b.request;try{w=this.getTVFParams(r,v.params,a)}catch(E){this.client.logger.warn(`sendResult() -> getTVFParams() failed: ${E?.message}`)}}catch(v){throw this.client.logger.error(`sendResult() -> history.get(${s}, ${r}) failed`),v}if(y){const v=wh(d,s,p);await global.Linking.openURL(v,this.client.name)}else{const v=b.request.method,E=Xt[v].res;E.tvf=kn(yt({},w),{correlationId:r}),l?(E.internal=kn(yt({},E.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(s,p,E)):this.client.core.relayer.publish(s,p,E).catch(_=>this.client.logger.error(_))}await this.client.core.history.resolve(h)}),me(this,"sendError",async n=>{const{id:r,topic:s,error:a,encodeOpts:l,rpcOpts:u,appLink:d}=n,h=Yd(r,a);let p;const y=d&&typeof(global==null?void 0:global.Linking)<"u";try{const w=y?$s:qr;p=await this.client.core.crypto.encode(s,h,kn(yt({},l||{}),{encoding:w}))}catch(w){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${s} failed`),w}let b;try{b=await this.client.core.history.get(s,r)}catch(w){throw this.client.logger.error(`sendError() -> history.get(${s}, ${r}) failed`),w}if(y){const w=wh(d,s,p);await global.Linking.openURL(w,this.client.name)}else{const w=b.request.method,v=u||Xt[w].res;this.client.core.relayer.publish(s,p,v)}await this.client.core.history.resolve(h)}),me(this,"cleanup",async()=>{const n=[],r=[];this.client.session.getAll().forEach(s=>{let a=!1;Cs(s.expiry)&&(a=!0),this.client.core.crypto.keychain.has(s.topic)||(a=!0),a&&n.push(s.topic)}),this.client.proposal.getAll().forEach(s=>{Cs(s.expiryTimestamp)&&r.push(s.id)}),await Promise.all([...n.map(s=>this.deleteSession({topic:s})),...r.map(s=>this.deleteProposal(s))])}),me(this,"onProviderMessageEvent",async n=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(n):await this.onRelayMessage(n)}),me(this,"onRelayEventRequest",async n=>{this.requestQueue.queue.push(n),await this.processRequestsQueue()}),me(this,"processRequestsQueue",async()=>{if(this.requestQueue.state===ti.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=ti.active;const n=this.requestQueue.queue.shift();if(n)try{await this.processRequest(n)}catch(r){this.client.logger.warn(r)}}this.requestQueue.state=ti.idle}),me(this,"processRequest",async n=>{const{topic:r,payload:s,attestation:a,transportType:l,encryptedId:u}=n,d=s.method;if(!this.shouldIgnorePairingRequest({topic:r,requestMethod:d}))switch(d){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:r,payload:s,attestation:a,encryptedId:u});case"wc_sessionSettle":return await this.onSessionSettleRequest(r,s);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(r,s);case"wc_sessionExtend":return await this.onSessionExtendRequest(r,s);case"wc_sessionPing":return await this.onSessionPingRequest(r,s);case"wc_sessionDelete":return await this.onSessionDeleteRequest(r,s);case"wc_sessionRequest":return await this.onSessionRequest({topic:r,payload:s,attestation:a,encryptedId:u,transportType:l});case"wc_sessionEvent":return await this.onSessionEventRequest(r,s);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:r,payload:s,attestation:a,encryptedId:u,transportType:l});default:return this.client.logger.info(`Unsupported request method ${d}`)}}),me(this,"onRelayEventResponse",async n=>{const{topic:r,payload:s,transportType:a}=n,l=(await this.client.core.history.get(r,s.id)).request.method;switch(l){case"wc_sessionPropose":return this.onSessionProposeResponse(r,s,a);case"wc_sessionSettle":return this.onSessionSettleResponse(r,s);case"wc_sessionUpdate":return this.onSessionUpdateResponse(r,s);case"wc_sessionExtend":return this.onSessionExtendResponse(r,s);case"wc_sessionPing":return this.onSessionPingResponse(r,s);case"wc_sessionRequest":return this.onSessionRequestResponse(r,s);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(r,s);default:return this.client.logger.info(`Unsupported response method ${l}`)}}),me(this,"onRelayEventUnknownPayload",n=>{const{topic:r}=n,{message:s}=be("MISSING_OR_INVALID",`Decoded payload on topic ${r} is not identifiable as a JSON-RPC request or a response.`);throw new Error(s)}),me(this,"shouldIgnorePairingRequest",n=>{const{topic:r,requestMethod:s}=n,a=this.expectedPairingMethodMap.get(r);return!a||a.includes(s)?!1:!!(a.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)}),me(this,"onSessionProposeRequest",async n=>{const{topic:r,payload:s,attestation:a,encryptedId:l}=n,{params:u,id:d}=s;try{const h=this.client.core.eventClient.getEvent({topic:r});this.client.events.listenerCount("session_proposal")===0&&(console.warn("No listener for session_proposal event"),h?.setError(zi.proposal_listener_not_found)),this.isValidConnect(yt({},s.params));const p=u.expiryTimestamp||qt(Xt.wc_sessionPropose.req.ttl),y=yt({id:d,pairingTopic:r,expiryTimestamp:p,attestation:a,encryptedId:l},u);await this.setProposal(d,y);const b=await this.getVerifyContext({attestationId:a,hash:ai(JSON.stringify(s)),encryptedId:l,metadata:y.proposer.metadata});h?.addTrace(ri.emit_session_proposal),this.client.events.emit("session_proposal",{id:d,params:y,verifyContext:b})}catch(h){await this.sendError({id:d,topic:r,error:h,rpcOpts:Xt.wc_sessionPropose.autoReject}),this.client.logger.error(h)}}),me(this,"onSessionProposeResponse",async(n,r,s)=>{const{id:a}=r;if(si(r)){const{result:l}=r;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:l});const u=this.client.proposal.get(a);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:u});const d=u.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:d});const h=l.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:h});const p=await this.client.core.crypto.generateSharedKey(d,h);this.pendingSessions.set(a,{sessionTopic:p,pairingTopic:n,proposalId:a,publicKey:d});const y=await this.client.core.relayer.subscribe(p,{transportType:s});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:y}),await this.client.core.pairing.activate({topic:n})}else if(Rr(r)){await this.deleteProposal(a);const l=We("session_connect",a);if(this.events.listenerCount(l)===0)throw new Error(`emitting ${l} without any listeners, 954`);this.events.emit(l,{error:r.error})}}),me(this,"onSessionSettleRequest",async(n,r)=>{const{id:s,params:a}=r;try{this.isValidSessionSettleRequest(a);const{relay:l,controller:u,expiry:d,namespaces:h,sessionProperties:p,scopedProperties:y,sessionConfig:b}=r.params,w=[...this.pendingSessions.values()].find(_=>_.sessionTopic===n);if(!w)return this.client.logger.error(`Pending session not found for topic ${n}`);const v=this.client.proposal.get(w.proposalId),E=kn(yt(yt(yt({topic:n,relay:l,expiry:d,namespaces:h,acknowledged:!0,pairingTopic:w.pairingTopic,requiredNamespaces:v.requiredNamespaces,optionalNamespaces:v.optionalNamespaces,controller:u.publicKey,self:{publicKey:w.publicKey,metadata:this.client.metadata},peer:{publicKey:u.publicKey,metadata:u.metadata}},p&&{sessionProperties:p}),y&&{scopedProperties:y}),b&&{sessionConfig:b}),{transportType:mt.relay});await this.client.session.set(E.topic,E),await this.setExpiry(E.topic,E.expiry),await this.client.core.pairing.updateMetadata({topic:w.pairingTopic,metadata:E.peer.metadata}),this.client.events.emit("session_connect",{session:E}),this.events.emit(We("session_connect",w.proposalId),{session:E}),this.pendingSessions.delete(w.proposalId),this.deleteProposal(w.proposalId,!1),this.cleanupDuplicatePairings(E),await this.sendResult({id:r.id,topic:n,result:!0})}catch(l){await this.sendError({id:s,topic:n,error:l}),this.client.logger.error(l)}}),me(this,"onSessionSettleResponse",async(n,r)=>{const{id:s}=r;si(r)?(await this.client.session.update(n,{acknowledged:!0}),this.events.emit(We("session_approve",s),{})):Rr(r)&&(await this.client.session.delete(n,vt("USER_DISCONNECTED")),this.events.emit(We("session_approve",s),{error:r.error}))}),me(this,"onSessionUpdateRequest",async(n,r)=>{const{params:s,id:a}=r;try{const l=`${n}_session_update`,u=Hl.get(l);if(u&&this.isRequestOutOfSync(u,a)){this.client.logger.warn(`Discarding out of sync request - ${a}`),this.sendError({id:a,topic:n,error:vt("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(yt({topic:n},s));try{Hl.set(l,a),await this.client.session.update(n,{namespaces:s.namespaces}),await this.sendResult({id:a,topic:n,result:!0})}catch(d){throw Hl.delete(l),d}this.client.events.emit("session_update",{id:a,topic:n,params:s})}catch(l){await this.sendError({id:a,topic:n,error:l}),this.client.logger.error(l)}}),me(this,"isRequestOutOfSync",(n,r)=>r.toString().slice(0,-3)<n.toString().slice(0,-3)),me(this,"onSessionUpdateResponse",(n,r)=>{const{id:s}=r,a=We("session_update",s);if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners`);si(r)?this.events.emit(We("session_update",s),{}):Rr(r)&&this.events.emit(We("session_update",s),{error:r.error})}),me(this,"onSessionExtendRequest",async(n,r)=>{const{id:s}=r;try{this.isValidExtend({topic:n}),await this.setExpiry(n,qt(Ga)),await this.sendResult({id:s,topic:n,result:!0}),this.client.events.emit("session_extend",{id:s,topic:n})}catch(a){await this.sendError({id:s,topic:n,error:a}),this.client.logger.error(a)}}),me(this,"onSessionExtendResponse",(n,r)=>{const{id:s}=r,a=We("session_extend",s);if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners`);si(r)?this.events.emit(We("session_extend",s),{}):Rr(r)&&this.events.emit(We("session_extend",s),{error:r.error})}),me(this,"onSessionPingRequest",async(n,r)=>{const{id:s}=r;try{this.isValidPing({topic:n}),await this.sendResult({id:s,topic:n,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:s,topic:n})}catch(a){await this.sendError({id:s,topic:n,error:a}),this.client.logger.error(a)}}),me(this,"onSessionPingResponse",(n,r)=>{const{id:s}=r,a=We("session_ping",s);setTimeout(()=>{if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners 2176`);si(r)?this.events.emit(We("session_ping",s),{}):Rr(r)&&this.events.emit(We("session_ping",s),{error:r.error})},500)}),me(this,"onSessionDeleteRequest",async(n,r)=>{const{id:s}=r;try{this.isValidDisconnect({topic:n,reason:r.params}),Promise.all([new Promise(a=>{this.client.core.relayer.once(Qt.publish,async()=>{a(await this.deleteSession({topic:n,id:s}))})}),this.sendResult({id:s,topic:n,result:!0}),this.cleanupPendingSentRequestsForTopic({topic:n,error:vt("USER_DISCONNECTED")})]).catch(a=>this.client.logger.error(a))}catch(a){this.client.logger.error(a)}}),me(this,"onSessionRequest",async n=>{var r,s,a;const{topic:l,payload:u,attestation:d,encryptedId:h,transportType:p}=n,{id:y,params:b}=u;try{await this.isValidRequest(yt({topic:l},b));const w=this.client.session.get(l),v=await this.getVerifyContext({attestationId:d,hash:ai(JSON.stringify(ks("wc_sessionRequest",b,y))),encryptedId:h,metadata:w.peer.metadata,transportType:p}),E={id:y,topic:l,params:b,verifyContext:v};await this.setPendingSessionRequest(E),p===mt.link_mode&&(r=w.peer.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp((s=w.peer.metadata.redirect)==null?void 0:s.universal),(a=this.client.signConfig)!=null&&a.disableRequestQueue?this.emitSessionRequest(E):(this.addSessionRequestToSessionRequestQueue(E),this.processSessionRequestQueue())}catch(w){await this.sendError({id:y,topic:l,error:w}),this.client.logger.error(w)}}),me(this,"onSessionRequestResponse",(n,r)=>{const{id:s}=r,a=We("session_request",s);if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners`);si(r)?this.events.emit(We("session_request",s),{result:r.result}):Rr(r)&&this.events.emit(We("session_request",s),{error:r.error})}),me(this,"onSessionEventRequest",async(n,r)=>{const{id:s,params:a}=r;try{const l=`${n}_session_event_${a.event.name}`,u=Hl.get(l);if(u&&this.isRequestOutOfSync(u,s)){this.client.logger.info(`Discarding out of sync request - ${s}`);return}this.isValidEmit(yt({topic:n},a)),this.client.events.emit("session_event",{id:s,topic:n,params:a}),Hl.set(l,s)}catch(l){await this.sendError({id:s,topic:n,error:l}),this.client.logger.error(l)}}),me(this,"onSessionAuthenticateResponse",(n,r)=>{const{id:s}=r;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:n,payload:r}),si(r)?this.events.emit(We("session_request",s),{result:r.result}):Rr(r)&&this.events.emit(We("session_request",s),{error:r.error})}),me(this,"onSessionAuthenticateRequest",async n=>{var r;const{topic:s,payload:a,attestation:l,encryptedId:u,transportType:d}=n;try{const{requester:h,authPayload:p,expiryTimestamp:y}=a.params,b=await this.getVerifyContext({attestationId:l,hash:ai(JSON.stringify(a)),encryptedId:u,metadata:h.metadata,transportType:d}),w={requester:h,pairingTopic:s,id:a.id,authPayload:p,verifyContext:b,expiryTimestamp:y};await this.setAuthRequest(a.id,{request:w,pairingTopic:s,transportType:d}),d===mt.link_mode&&(r=h.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp(h.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:s,params:a.params,id:a.id,verifyContext:b})}catch(h){this.client.logger.error(h);const p=a.params.requester.publicKey,y=await this.client.core.crypto.generateKeyPair(),b=this.getAppLinkIfEnabled(a.params.requester.metadata,d),w={type:Ki,receiverPublicKey:p,senderPublicKey:y};await this.sendError({id:a.id,topic:s,error:h,encodeOpts:w,rpcOpts:Xt.wc_sessionAuthenticate.autoReject,appLink:b})}}),me(this,"addSessionRequestToSessionRequestQueue",n=>{this.sessionRequestQueue.queue.push(n)}),me(this,"cleanupAfterResponse",n=>{this.deletePendingSessionRequest(n.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=ti.idle,this.processSessionRequestQueue()},we.toMiliseconds(this.requestQueueDelay))}),me(this,"cleanupPendingSentRequestsForTopic",({topic:n,error:r})=>{const s=this.client.core.history.pending;s.length>0&&s.filter(a=>a.topic===n&&a.request.method==="wc_sessionRequest").forEach(a=>{const l=a.request.id,u=We("session_request",l);if(this.events.listenerCount(u)===0)throw new Error(`emitting ${u} without any listeners`);this.events.emit(We("session_request",a.request.id),{error:r})})}),me(this,"processSessionRequestQueue",()=>{if(this.sessionRequestQueue.state===ti.active){this.client.logger.info("session request queue is already active.");return}const n=this.sessionRequestQueue.queue[0];if(!n){this.client.logger.info("session request queue is empty.");return}try{this.emitSessionRequest(n)}catch(r){this.client.logger.error(r)}}),me(this,"emitSessionRequest",n=>{if(this.emittedSessionRequests.has(n.id)){this.client.logger.warn({id:n.id},`Skipping emitting \`session_request\` event for duplicate request. id: ${n.id}`);return}this.sessionRequestQueue.state=ti.active,this.emittedSessionRequests.add(n.id),this.client.events.emit("session_request",n)}),me(this,"onPairingCreated",n=>{if(n.methods&&this.expectedPairingMethodMap.set(n.topic,n.methods),n.active)return;const r=this.client.proposal.getAll().find(s=>s.pairingTopic===n.topic);r&&this.onSessionProposeRequest({topic:n.topic,payload:ks("wc_sessionPropose",kn(yt({},r),{requiredNamespaces:r.requiredNamespaces,optionalNamespaces:r.optionalNamespaces,relays:r.relays,proposer:r.proposer,sessionProperties:r.sessionProperties,scopedProperties:r.scopedProperties}),r.id),attestation:r.attestation,encryptedId:r.encryptedId})}),me(this,"isValidConnect",async n=>{if(!Ln(n)){const{message:h}=be("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(n)}`);throw new Error(h)}const{pairingTopic:r,requiredNamespaces:s,optionalNamespaces:a,sessionProperties:l,scopedProperties:u,relays:d}=n;if(cn(r)||await this.isValidPairingTopic(r),!_H(d)){const{message:h}=be("MISSING_OR_INVALID",`connect() relays: ${d}`);throw new Error(h)}if(!cn(s)&&fi(s)!==0){const h="requiredNamespaces are deprecated and are automatically assigned to optionalNamespaces";["fatal","error","silent"].includes(this.client.logger.level)?console.warn(h):this.client.logger.warn(h),this.validateNamespaces(s,"requiredNamespaces")}if(!cn(a)&&fi(a)!==0&&this.validateNamespaces(a,"optionalNamespaces"),cn(l)||this.validateSessionProps(l,"sessionProperties"),!cn(u)){this.validateSessionProps(u,"scopedProperties");const h=Object.keys(s||{}).concat(Object.keys(a||{}));if(!Object.keys(u).every(p=>h.includes(p.split(":")[0])))throw new Error(`Scoped properties must be a subset of required/optional namespaces, received: ${JSON.stringify(u)}, required/optional namespaces: ${JSON.stringify(h)}`)}}),me(this,"validateNamespaces",(n,r)=>{const s=EH(n,"connect()",r);if(s)throw new Error(s.message)}),me(this,"isValidApprove",async n=>{if(!Ln(n))throw new Error(be("MISSING_OR_INVALID",`approve() params: ${n}`).message);const{id:r,namespaces:s,relayProtocol:a,sessionProperties:l,scopedProperties:u}=n;this.checkRecentlyDeleted(r),await this.isValidProposalId(r);const d=this.client.proposal.get(r),h=dm(s,"approve()");if(h)throw new Error(h.message);const p=zS(d.requiredNamespaces,s,"approve()");if(p)throw new Error(p.message);if(!Bt(a,!0)){const{message:y}=be("MISSING_OR_INVALID",`approve() relayProtocol: ${a}`);throw new Error(y)}if(cn(l)||this.validateSessionProps(l,"sessionProperties"),!cn(u)){this.validateSessionProps(u,"scopedProperties");const y=new Set(Object.keys(s));if(!Object.keys(u).every(b=>y.has(b.split(":")[0])))throw new Error(`Scoped properties must be a subset of approved namespaces, received: ${JSON.stringify(u)}, approved namespaces: ${Array.from(y).join(", ")}`)}}),me(this,"isValidReject",async n=>{if(!Ln(n)){const{message:a}=be("MISSING_OR_INVALID",`reject() params: ${n}`);throw new Error(a)}const{id:r,reason:s}=n;if(this.checkRecentlyDeleted(r),await this.isValidProposalId(r),!AH(s)){const{message:a}=be("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(s)}`);throw new Error(a)}}),me(this,"isValidSessionSettleRequest",n=>{if(!Ln(n)){const{message:h}=be("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${n}`);throw new Error(h)}const{relay:r,controller:s,namespaces:a,expiry:l}=n;if(!bT(r)){const{message:h}=be("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(h)}const u=gH(s,"onSessionSettleRequest()");if(u)throw new Error(u.message);const d=dm(a,"onSessionSettleRequest()");if(d)throw new Error(d.message);if(Cs(l)){const{message:h}=be("EXPIRED","onSessionSettleRequest()");throw new Error(h)}}),me(this,"isValidUpdate",async n=>{if(!Ln(n)){const{message:d}=be("MISSING_OR_INVALID",`update() params: ${n}`);throw new Error(d)}const{topic:r,namespaces:s}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const a=this.client.session.get(r),l=dm(s,"update()");if(l)throw new Error(l.message);const u=zS(a.requiredNamespaces,s,"update()");if(u)throw new Error(u.message)}),me(this,"isValidExtend",async n=>{if(!Ln(n)){const{message:s}=be("MISSING_OR_INVALID",`extend() params: ${n}`);throw new Error(s)}const{topic:r}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r)}),me(this,"isValidRequest",async n=>{if(!Ln(n)){const{message:d}=be("MISSING_OR_INVALID",`request() params: ${n}`);throw new Error(d)}const{topic:r,request:s,chainId:a,expiry:l}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const{namespaces:u}=this.client.session.get(r);if(!jS(u,a)){const{message:d}=be("MISSING_OR_INVALID",`request() chainId: ${a}`);throw new Error(d)}if(!RH(s)){const{message:d}=be("MISSING_OR_INVALID",`request() ${JSON.stringify(s)}`);throw new Error(d)}if(!TH(u,a,s.method)){const{message:d}=be("MISSING_OR_INVALID",`request() method: ${s.method}`);throw new Error(d)}if(l&&!NH(l,Rm)){const{message:d}=be("MISSING_OR_INVALID",`request() expiry: ${l}. Expiry must be a number (in seconds) between ${Rm.min} and ${Rm.max}`);throw new Error(d)}}),me(this,"isValidRespond",async n=>{var r;if(!Ln(n)){const{message:l}=be("MISSING_OR_INVALID",`respond() params: ${n}`);throw new Error(l)}const{topic:s,response:a}=n;try{await this.isValidSessionTopic(s)}catch(l){throw(r=n?.response)!=null&&r.id&&this.cleanupAfterResponse(n),l}if(!OH(a)){const{message:l}=be("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(a)}`);throw new Error(l)}}),me(this,"isValidPing",async n=>{if(!Ln(n)){const{message:s}=be("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(s)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),me(this,"isValidEmit",async n=>{if(!Ln(n)){const{message:u}=be("MISSING_OR_INVALID",`emit() params: ${n}`);throw new Error(u)}const{topic:r,event:s,chainId:a}=n;await this.isValidSessionTopic(r);const{namespaces:l}=this.client.session.get(r);if(!jS(l,a)){const{message:u}=be("MISSING_OR_INVALID",`emit() chainId: ${a}`);throw new Error(u)}if(!xH(s)){const{message:u}=be("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(u)}if(!DH(l,a,s.name)){const{message:u}=be("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(u)}}),me(this,"isValidDisconnect",async n=>{if(!Ln(n)){const{message:s}=be("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(s)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),me(this,"isValidAuthenticate",n=>{const{chains:r,uri:s,domain:a,nonce:l}=n;if(!Array.isArray(r)||r.length===0)throw new Error("chains is required and must be a non-empty array");if(!Bt(s,!1))throw new Error("uri is required parameter");if(!Bt(a,!1))throw new Error("domain is required parameter");if(!Bt(l,!1))throw new Error("nonce is required parameter");if([...new Set(r.map(d=>dc(d).namespace))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:u}=dc(r[0]);if(u!=="eip155")throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")}),me(this,"getVerifyContext",async n=>{const{attestationId:r,hash:s,encryptedId:a,metadata:l,transportType:u}=n,d={verified:{verifyUrl:l.verifyUrl||lu,validation:"UNKNOWN",origin:l.url||""}};try{if(u===mt.link_mode){const p=this.getAppLinkIfEnabled(l,u);return d.verified.validation=p&&new URL(p).origin===new URL(l.url).origin?"VALID":"INVALID",d}const h=await this.client.core.verify.resolve({attestationId:r,hash:s,encryptedId:a,verifyUrl:l.verifyUrl});h&&(d.verified.origin=h.origin,d.verified.isScam=h.isScam,d.verified.validation=h.origin===new URL(l.url).origin?"VALID":"INVALID")}catch(h){this.client.logger.warn(h)}return this.client.logger.debug(`Verify context: ${JSON.stringify(d)}`),d}),me(this,"validateSessionProps",(n,r)=>{Object.values(n).forEach((s,a)=>{if(s==null){const{message:l}=be("MISSING_OR_INVALID",`${r} must contain an existing value for each key. Received: ${s} for key ${Object.keys(n)[a]}`);throw new Error(l)}})}),me(this,"getPendingAuthRequest",n=>{const r=this.client.auth.requests.get(n);return typeof r=="object"?r:void 0}),me(this,"addToRecentlyDeleted",(n,r)=>{if(this.recentlyDeletedMap.set(n,r),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let s=0;const a=this.recentlyDeletedLimit/2;for(const l of this.recentlyDeletedMap.keys()){if(s++>=a)break;this.recentlyDeletedMap.delete(l)}}}),me(this,"checkRecentlyDeleted",n=>{const r=this.recentlyDeletedMap.get(n);if(r){const{message:s}=be("MISSING_OR_INVALID",`Record was recently deleted - ${r}: ${n}`);throw new Error(s)}}),me(this,"isLinkModeEnabled",(n,r)=>{var s,a,l,u,d,h,p,y,b;return!n||r!==mt.link_mode?!1:((a=(s=this.client.metadata)==null?void 0:s.redirect)==null?void 0:a.linkMode)===!0&&((u=(l=this.client.metadata)==null?void 0:l.redirect)==null?void 0:u.universal)!==void 0&&((h=(d=this.client.metadata)==null?void 0:d.redirect)==null?void 0:h.universal)!==""&&((p=n?.redirect)==null?void 0:p.universal)!==void 0&&((y=n?.redirect)==null?void 0:y.universal)!==""&&((b=n?.redirect)==null?void 0:b.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(n.redirect.universal)&&typeof(global==null?void 0:global.Linking)<"u"}),me(this,"getAppLinkIfEnabled",(n,r)=>{var s;return this.isLinkModeEnabled(n,r)?(s=n?.redirect)==null?void 0:s.universal:void 0}),me(this,"handleLinkModeMessage",({url:n})=>{if(!n||!n.includes("wc_ev")||!n.includes("topic"))return;const r=eS(n,"topic")||"",s=decodeURIComponent(eS(n,"wc_ev")||""),a=this.client.session.keys.includes(r);a&&this.client.session.update(r,{transportType:mt.link_mode}),this.client.core.dispatchEnvelope({topic:r,message:s,sessionExists:a})}),me(this,"registerLinkModeListeners",async()=>{var n;if(Sb()||Hs()&&(n=this.client.metadata.redirect)!=null&&n.linkMode){const r=global==null?void 0:global.Linking;if(typeof r<"u"){r.addEventListener("url",this.handleLinkModeMessage,this.client.name);const s=await r.getInitialURL();s&&setTimeout(()=>{this.handleLinkModeMessage({url:s})},50)}}}),me(this,"getTVFParams",(n,r,s)=>{var a,l,u;if(!((a=r.request)!=null&&a.method))return{};const d={correlationId:n,rpcMethods:[r.request.method],chainId:r.chainId};try{const h=this.extractTxHashesFromResult(r.request,s);d.txHashes=h,d.contractAddresses=this.isValidContractData(r.request.params)?[(u=(l=r.request.params)==null?void 0:l[0])==null?void 0:u.to]:[]}catch(h){this.client.logger.warn("Error getting TVF params",h)}return d}),me(this,"isValidContractData",n=>{var r;if(!n)return!1;try{const s=n?.data||((r=n?.[0])==null?void 0:r.data);if(!s.startsWith("0x"))return!1;const a=s.slice(2);return/^[0-9a-fA-F]*$/.test(a)?a.length%2===0:!1}catch{}return!1}),me(this,"extractTxHashesFromResult",(n,r)=>{var s;try{if(!r)return[];const a=n.method,l=DW[a];if(a==="sui_signTransaction")return[tz(r.transactionBytes)];if(a==="near_signTransaction")return[cS(r)];if(a==="near_signTransactions")return r.map(d=>cS(d));if(a==="xrpl_signTransactionFor"||a==="xrpl_signTransaction")return[(s=r.tx_json)==null?void 0:s.hash];if(a==="polkadot_signTransaction")return[KH({transaction:n.params.transactionPayload,signature:r.signature})];if(a==="algo_signTxn")return Yi(r)?r.map(d=>lS(d)):[lS(r)];if(a==="cosmos_signDirect")return[rz(r)];if(typeof r=="string")return[r];const u=r[l.key];if(Yi(u))return a==="solana_signAllTransactions"?u.map(d=>ez(d)):u;if(typeof u=="string")return[u]}catch(a){this.client.logger.warn("Error extracting tx hashes from result",a)}return[]})}async processPendingMessageEvents(){try{const t=this.client.session.keys,n=this.client.core.relayer.messages.getWithoutAck(t);for(const[r,s]of Object.entries(n))for(const a of s)try{await this.onProviderMessageEvent({topic:r,message:a,publishedAt:Date.now()})}catch{this.client.logger.warn(`Error processing pending message event for topic: ${r}, message: ${a}`)}}catch(t){this.client.logger.warn("processPendingMessageEvents failed",t)}}isInitialized(){if(!this.initialized){const{message:t}=be("NOT_INITIALIZED",this.name);throw new Error(t)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(Qt.message,t=>{this.onProviderMessageEvent(t)})}async onRelayMessage(t){const{topic:n,message:r,attestation:s,transportType:a}=t,{publicKey:l}=this.client.auth.authKeys.keys.includes(Gh)?this.client.auth.authKeys.get(Gh):{publicKey:void 0};try{const u=await this.client.core.crypto.decode(n,r,{receiverPublicKey:l,encoding:a===mt.link_mode?$s:qr});Hb(u)?(this.client.core.history.set(n,u),await this.onRelayEventRequest({topic:n,payload:u,attestation:s,transportType:a,encryptedId:ai(r)})):Wd(u)?(await this.client.core.history.resolve(u),await this.onRelayEventResponse({topic:n,payload:u,transportType:a}),this.client.core.history.delete(n,u.id)):await this.onRelayEventUnknownPayload({topic:n,payload:u,transportType:a}),await this.client.core.relayer.messages.ack(n,r)}catch(u){this.client.logger.error(u)}}registerExpirerEvents(){this.client.core.expirer.on(Ar.expired,async t=>{const{topic:n,id:r}=Ox(t.target);if(r&&this.client.pendingRequest.keys.includes(r))return await this.deletePendingSessionRequest(r,be("EXPIRED"),!0);if(r&&this.client.auth.requests.keys.includes(r))return await this.deletePendingAuthRequest(r,be("EXPIRED"),!0);n?this.client.session.keys.includes(n)&&(await this.deleteSession({topic:n,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:n})):r&&(await this.deleteProposal(r,!0),this.client.events.emit("proposal_expire",{id:r}))})}registerPairingEvents(){this.client.core.pairing.events.on(Ao.create,t=>this.onPairingCreated(t)),this.client.core.pairing.events.on(Ao.delete,t=>{this.addToRecentlyDeleted(t.topic,"pairing")})}isValidPairingTopic(t){if(!Bt(t,!1)){const{message:n}=be("MISSING_OR_INVALID",`pairing topic should be a string: ${t}`);throw new Error(n)}if(!this.client.core.pairing.pairings.keys.includes(t)){const{message:n}=be("NO_MATCHING_KEY",`pairing topic doesn't exist: ${t}`);throw new Error(n)}if(Cs(this.client.core.pairing.pairings.get(t).expiry)){const{message:n}=be("EXPIRED",`pairing topic: ${t}`);throw new Error(n)}}async isValidSessionTopic(t){if(!Bt(t,!1)){const{message:n}=be("MISSING_OR_INVALID",`session topic should be a string: ${t}`);throw new Error(n)}if(this.checkRecentlyDeleted(t),!this.client.session.keys.includes(t)){const{message:n}=be("NO_MATCHING_KEY",`session topic doesn't exist: ${t}`);throw new Error(n)}if(Cs(this.client.session.get(t).expiry)){await this.deleteSession({topic:t});const{message:n}=be("EXPIRED",`session topic: ${t}`);throw new Error(n)}if(!this.client.core.crypto.keychain.has(t)){const{message:n}=be("MISSING_OR_INVALID",`session topic does not exist in keychain: ${t}`);throw await this.deleteSession({topic:t}),new Error(n)}}async isValidSessionOrPairingTopic(t){if(this.checkRecentlyDeleted(t),this.client.session.keys.includes(t))await this.isValidSessionTopic(t);else if(this.client.core.pairing.pairings.keys.includes(t))this.isValidPairingTopic(t);else if(Bt(t,!1)){const{message:n}=be("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${t}`);throw new Error(n)}else{const{message:n}=be("MISSING_OR_INVALID",`session or pairing topic should be a string: ${t}`);throw new Error(n)}}async isValidProposalId(t){if(!SH(t)){const{message:n}=be("MISSING_OR_INVALID",`proposal id should be a number: ${t}`);throw new Error(n)}if(!this.client.proposal.keys.includes(t)){const{message:n}=be("NO_MATCHING_KEY",`proposal id doesn't exist: ${t}`);throw new Error(n)}if(Cs(this.client.proposal.get(t).expiryTimestamp)){await this.deleteProposal(t);const{message:n}=be("EXPIRED",`proposal id: ${t}`);throw new Error(n)}}}class HW extends Wo{constructor(t,n){super(t,n,OW,Fb),this.core=t,this.logger=n}}let FW=class extends Wo{constructor(t,n){super(t,n,xW,Fb),this.core=t,this.logger=n}};class VW extends Wo{constructor(t,n){super(t,n,IW,Fb,r=>r.id),this.core=t,this.logger=n}}class GW extends Wo{constructor(t,n){super(t,n,BW,Zd,()=>Gh),this.core=t,this.logger=n}}class KW extends Wo{constructor(t,n){super(t,n,$W,Zd),this.core=t,this.logger=n}}class YW extends Wo{constructor(t,n){super(t,n,PW,Zd,r=>r.id),this.core=t,this.logger=n}}var WW=Object.defineProperty,XW=(e,t,n)=>t in e?WW(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Om=(e,t,n)=>XW(e,typeof t!="symbol"?t+"":t,n);class ZW{constructor(t,n){this.core=t,this.logger=n,Om(this,"authKeys"),Om(this,"pairingTopics"),Om(this,"requests"),this.authKeys=new GW(this.core,this.logger),this.pairingTopics=new KW(this.core,this.logger),this.requests=new YW(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}var QW=Object.defineProperty,JW=(e,t,n)=>t in e?QW(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,je=(e,t,n)=>JW(e,typeof t!="symbol"?t+"":t,n);let eX=class iD extends bV{constructor(t){super(t),je(this,"protocol",tD),je(this,"version",nD),je(this,"name",Am.name),je(this,"metadata"),je(this,"core"),je(this,"logger"),je(this,"events",new Vn.EventEmitter),je(this,"engine"),je(this,"session"),je(this,"proposal"),je(this,"pendingRequest"),je(this,"auth"),je(this,"signConfig"),je(this,"on",(r,s)=>this.events.on(r,s)),je(this,"once",(r,s)=>this.events.once(r,s)),je(this,"off",(r,s)=>this.events.off(r,s)),je(this,"removeListener",(r,s)=>this.events.removeListener(r,s)),je(this,"removeAllListeners",r=>this.events.removeAllListeners(r)),je(this,"connect",async r=>{try{return await this.engine.connect(r)}catch(s){throw this.logger.error(s.message),s}}),je(this,"pair",async r=>{try{return await this.engine.pair(r)}catch(s){throw this.logger.error(s.message),s}}),je(this,"approve",async r=>{try{return await this.engine.approve(r)}catch(s){throw this.logger.error(s.message),s}}),je(this,"reject",async r=>{try{return await this.engine.reject(r)}catch(s){throw this.logger.error(s.message),s}}),je(this,"update",async r=>{try{return await this.engine.update(r)}catch(s){throw this.logger.error(s.message),s}}),je(this,"extend",async r=>{try{return await this.engine.extend(r)}catch(s){throw this.logger.error(s.message),s}}),je(this,"request",async r=>{try{return await this.engine.request(r)}catch(s){throw this.logger.error(s.message),s}}),je(this,"respond",async r=>{try{return await this.engine.respond(r)}catch(s){throw this.logger.error(s.message),s}}),je(this,"ping",async r=>{try{return await this.engine.ping(r)}catch(s){throw this.logger.error(s.message),s}}),je(this,"emit",async r=>{try{return await this.engine.emit(r)}catch(s){throw this.logger.error(s.message),s}}),je(this,"disconnect",async r=>{try{return await this.engine.disconnect(r)}catch(s){throw this.logger.error(s.message),s}}),je(this,"find",r=>{try{return this.engine.find(r)}catch(s){throw this.logger.error(s.message),s}}),je(this,"getPendingSessionRequests",()=>{try{return this.engine.getPendingSessionRequests()}catch(r){throw this.logger.error(r.message),r}}),je(this,"authenticate",async(r,s)=>{try{return await this.engine.authenticate(r,s)}catch(a){throw this.logger.error(a.message),a}}),je(this,"formatAuthMessage",r=>{try{return this.engine.formatAuthMessage(r)}catch(s){throw this.logger.error(s.message),s}}),je(this,"approveSessionAuthenticate",async r=>{try{return await this.engine.approveSessionAuthenticate(r)}catch(s){throw this.logger.error(s.message),s}}),je(this,"rejectSessionAuthenticate",async r=>{try{return await this.engine.rejectSessionAuthenticate(r)}catch(s){throw this.logger.error(s.message),s}}),this.name=t?.name||Am.name,this.metadata=G9(t?.metadata),this.signConfig=t?.signConfig;const n=typeof t?.logger<"u"&&typeof t?.logger!="string"?t.logger:qu(Gd({level:t?.logger||Am.logger}));this.core=t?.core||new RW(t),this.logger=Tn(n,this.name),this.session=new FW(this.core,this.logger),this.proposal=new HW(this.core,this.logger),this.pendingRequest=new VW(this.core,this.logger),this.engine=new qW(this),this.auth=new ZW(this.core,this.logger)}static async init(t){const n=new iD(t);return await n.initialize(),n}get context(){return Yn(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success")}catch(t){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(t.message),t}}};var Ah={exports:{}},qA;function tX(){return qA||(qA=1,function(e,t){var n=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof qn<"u"&&qn,r=function(){function a(){this.fetch=!1,this.DOMException=n.DOMException}return a.prototype=n,new a}();(function(a){(function(l){var u=typeof a<"u"&&a||typeof self<"u"&&self||typeof qn<"u"&&qn||{},d={searchParams:"URLSearchParams"in u,iterable:"Symbol"in u&&"iterator"in Symbol,blob:"FileReader"in u&&"Blob"in u&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in u,arrayBuffer:"ArrayBuffer"in u};function h(T){return T&&DataView.prototype.isPrototypeOf(T)}if(d.arrayBuffer)var p=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],y=ArrayBuffer.isView||function(T){return T&&p.indexOf(Object.prototype.toString.call(T))>-1};function b(T){if(typeof T!="string"&&(T=String(T)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(T)||T==="")throw new TypeError('Invalid character in header field name: "'+T+'"');return T.toLowerCase()}function w(T){return typeof T!="string"&&(T=String(T)),T}function v(T){var O={next:function(){var M=T.shift();return{done:M===void 0,value:M}}};return d.iterable&&(O[Symbol.iterator]=function(){return O}),O}function E(T){this.map={},T instanceof E?T.forEach(function(O,M){this.append(M,O)},this):Array.isArray(T)?T.forEach(function(O){if(O.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+O.length);this.append(O[0],O[1])},this):T&&Object.getOwnPropertyNames(T).forEach(function(O){this.append(O,T[O])},this)}E.prototype.append=function(T,O){T=b(T),O=w(O);var M=this.map[T];this.map[T]=M?M+", "+O:O},E.prototype.delete=function(T){delete this.map[b(T)]},E.prototype.get=function(T){return T=b(T),this.has(T)?this.map[T]:null},E.prototype.has=function(T){return this.map.hasOwnProperty(b(T))},E.prototype.set=function(T,O){this.map[b(T)]=w(O)},E.prototype.forEach=function(T,O){for(var M in this.map)this.map.hasOwnProperty(M)&&T.call(O,this.map[M],M,this)},E.prototype.keys=function(){var T=[];return this.forEach(function(O,M){T.push(M)}),v(T)},E.prototype.values=function(){var T=[];return this.forEach(function(O){T.push(O)}),v(T)},E.prototype.entries=function(){var T=[];return this.forEach(function(O,M){T.push([M,O])}),v(T)},d.iterable&&(E.prototype[Symbol.iterator]=E.prototype.entries);function _(T){if(!T._noBody){if(T.bodyUsed)return Promise.reject(new TypeError("Already read"));T.bodyUsed=!0}}function R(T){return new Promise(function(O,M){T.onload=function(){O(T.result)},T.onerror=function(){M(T.error)}})}function D(T){var O=new FileReader,M=R(O);return O.readAsArrayBuffer(T),M}function I(T){var O=new FileReader,M=R(O),F=/charset=([A-Za-z0-9_-]+)/.exec(T.type),Y=F?F[1]:"utf-8";return O.readAsText(T,Y),M}function $(T){for(var O=new Uint8Array(T),M=new Array(O.length),F=0;F<O.length;F++)M[F]=String.fromCharCode(O[F]);return M.join("")}function U(T){if(T.slice)return T.slice(0);var O=new Uint8Array(T.byteLength);return O.set(new Uint8Array(T)),O.buffer}function k(){return this.bodyUsed=!1,this._initBody=function(T){this.bodyUsed=this.bodyUsed,this._bodyInit=T,T?typeof T=="string"?this._bodyText=T:d.blob&&Blob.prototype.isPrototypeOf(T)?this._bodyBlob=T:d.formData&&FormData.prototype.isPrototypeOf(T)?this._bodyFormData=T:d.searchParams&&URLSearchParams.prototype.isPrototypeOf(T)?this._bodyText=T.toString():d.arrayBuffer&&d.blob&&h(T)?(this._bodyArrayBuffer=U(T.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):d.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(T)||y(T))?this._bodyArrayBuffer=U(T):this._bodyText=T=Object.prototype.toString.call(T):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof T=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):d.searchParams&&URLSearchParams.prototype.isPrototypeOf(T)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},d.blob&&(this.blob=function(){var T=_(this);if(T)return T;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var T=_(this);return T||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(d.blob)return this.blob().then(D);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var T=_(this);if(T)return T;if(this._bodyBlob)return I(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve($(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},d.formData&&(this.formData=function(){return this.text().then(V)}),this.json=function(){return this.text().then(JSON.parse)},this}var q=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function H(T){var O=T.toUpperCase();return q.indexOf(O)>-1?O:T}function P(T,O){if(!(this instanceof P))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');O=O||{};var M=O.body;if(T instanceof P){if(T.bodyUsed)throw new TypeError("Already read");this.url=T.url,this.credentials=T.credentials,O.headers||(this.headers=new E(T.headers)),this.method=T.method,this.mode=T.mode,this.signal=T.signal,!M&&T._bodyInit!=null&&(M=T._bodyInit,T.bodyUsed=!0)}else this.url=String(T);if(this.credentials=O.credentials||this.credentials||"same-origin",(O.headers||!this.headers)&&(this.headers=new E(O.headers)),this.method=H(O.method||this.method||"GET"),this.mode=O.mode||this.mode||null,this.signal=O.signal||this.signal||function(){if("AbortController"in u){var C=new AbortController;return C.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&M)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(M),(this.method==="GET"||this.method==="HEAD")&&(O.cache==="no-store"||O.cache==="no-cache")){var F=/([?&])_=[^&]*/;if(F.test(this.url))this.url=this.url.replace(F,"$1_="+new Date().getTime());else{var Y=/\?/;this.url+=(Y.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}P.prototype.clone=function(){return new P(this,{body:this._bodyInit})};function V(T){var O=new FormData;return T.trim().split("&").forEach(function(M){if(M){var F=M.split("="),Y=F.shift().replace(/\+/g," "),C=F.join("=").replace(/\+/g," ");O.append(decodeURIComponent(Y),decodeURIComponent(C))}}),O}function G(T){var O=new E,M=T.replace(/\r?\n[\t ]+/g," ");return M.split("\r").map(function(F){return F.indexOf(`
`)===0?F.substr(1,F.length):F}).forEach(function(F){var Y=F.split(":"),C=Y.shift().trim();if(C){var z=Y.join(":").trim();try{O.append(C,z)}catch(J){console.warn("Response "+J.message)}}}),O}k.call(P.prototype);function K(T,O){if(!(this instanceof K))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(O||(O={}),this.type="default",this.status=O.status===void 0?200:O.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=O.statusText===void 0?"":""+O.statusText,this.headers=new E(O.headers),this.url=O.url||"",this._initBody(T)}k.call(K.prototype),K.prototype.clone=function(){return new K(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new E(this.headers),url:this.url})},K.error=function(){var T=new K(null,{status:200,statusText:""});return T.ok=!1,T.status=0,T.type="error",T};var ce=[301,302,303,307,308];K.redirect=function(T,O){if(ce.indexOf(O)===-1)throw new RangeError("Invalid status code");return new K(null,{status:O,headers:{location:T}})},l.DOMException=u.DOMException;try{new l.DOMException}catch{l.DOMException=function(O,M){this.message=O,this.name=M;var F=Error(O);this.stack=F.stack},l.DOMException.prototype=Object.create(Error.prototype),l.DOMException.prototype.constructor=l.DOMException}function ne(T,O){return new Promise(function(M,F){var Y=new P(T,O);if(Y.signal&&Y.signal.aborted)return F(new l.DOMException("Aborted","AbortError"));var C=new XMLHttpRequest;function z(){C.abort()}C.onload=function(){var re={statusText:C.statusText,headers:G(C.getAllResponseHeaders()||"")};Y.url.indexOf("file://")===0&&(C.status<200||C.status>599)?re.status=200:re.status=C.status,re.url="responseURL"in C?C.responseURL:re.headers.get("X-Request-URL");var ge="response"in C?C.response:C.responseText;setTimeout(function(){M(new K(ge,re))},0)},C.onerror=function(){setTimeout(function(){F(new TypeError("Network request failed"))},0)},C.ontimeout=function(){setTimeout(function(){F(new TypeError("Network request timed out"))},0)},C.onabort=function(){setTimeout(function(){F(new l.DOMException("Aborted","AbortError"))},0)};function J(re){try{return re===""&&u.location.href?u.location.href:re}catch{return re}}if(C.open(Y.method,J(Y.url),!0),Y.credentials==="include"?C.withCredentials=!0:Y.credentials==="omit"&&(C.withCredentials=!1),"responseType"in C&&(d.blob?C.responseType="blob":d.arrayBuffer&&(C.responseType="arraybuffer")),O&&typeof O.headers=="object"&&!(O.headers instanceof E||u.Headers&&O.headers instanceof u.Headers)){var se=[];Object.getOwnPropertyNames(O.headers).forEach(function(re){se.push(b(re)),C.setRequestHeader(re,w(O.headers[re]))}),Y.headers.forEach(function(re,ge){se.indexOf(ge)===-1&&C.setRequestHeader(ge,re)})}else Y.headers.forEach(function(re,ge){C.setRequestHeader(ge,re)});Y.signal&&(Y.signal.addEventListener("abort",z),C.onreadystatechange=function(){C.readyState===4&&Y.signal.removeEventListener("abort",z)}),C.send(typeof Y._bodyInit>"u"?null:Y._bodyInit)})}return ne.polyfill=!0,u.fetch||(u.fetch=ne,u.Headers=E,u.Request=P,u.Response=K),l.Headers=E,l.Request=P,l.Response=K,l.fetch=ne,Object.defineProperty(l,"__esModule",{value:!0}),l})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var s=n.fetch?n:r;t=s.fetch,t.default=s.fetch,t.fetch=s.fetch,t.Headers=s.Headers,t.Request=s.Request,t.Response=s.Response,e.exports=t}(Ah,Ah.exports)),Ah.exports}var nX=tX();const HA=pd(nX);var rX=Object.defineProperty,iX=Object.defineProperties,sX=Object.getOwnPropertyDescriptors,FA=Object.getOwnPropertySymbols,oX=Object.prototype.hasOwnProperty,aX=Object.prototype.propertyIsEnumerable,VA=(e,t,n)=>t in e?rX(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,GA=(e,t)=>{for(var n in t||(t={}))oX.call(t,n)&&VA(e,n,t[n]);if(FA)for(var n of FA(t))aX.call(t,n)&&VA(e,n,t[n]);return e},KA=(e,t)=>iX(e,sX(t));const cX={Accept:"application/json","Content-Type":"application/json"},lX="POST",YA={headers:cX,method:lX},WA=10;let Vr=class{constructor(t,n=!1){if(this.url=t,this.disableProviderPing=n,this.events=new Vn.EventEmitter,this.isAvailable=!1,this.registering=!1,!fA(t))throw new Error(`Provided URL is not compatible with HTTP connection: ${t}`);this.url=t,this.disableProviderPing=n}get connected(){return this.isAvailable}get connecting(){return this.registering}on(t,n){this.events.on(t,n)}once(t,n){this.events.once(t,n)}off(t,n){this.events.off(t,n)}removeListener(t,n){this.events.removeListener(t,n)}async open(t=this.url){await this.register(t)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(t){this.isAvailable||await this.register();try{const n=Zi(t),r=await(await HA(this.url,KA(GA({},YA),{body:n}))).json();this.onPayload({data:r})}catch(n){this.onError(t.id,n)}}async register(t=this.url){if(!fA(t))throw new Error(`Provided URL is not compatible with HTTP connection: ${t}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((r,s)=>{this.events.once("register_error",a=>{this.resetMaxListeners(),s(a)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return s(new Error("HTTP connection is missing or invalid"));r()})})}this.url=t,this.registering=!0;try{if(!this.disableProviderPing){const n=Zi({id:1,jsonrpc:"2.0",method:"test",params:[]});await HA(t,KA(GA({},YA),{body:n}))}this.onOpen()}catch(n){const r=this.parseError(n);throw this.events.emit("register_error",r),this.onClose(),r}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(t){if(typeof t.data>"u")return;const n=typeof t.data=="string"?Po(t.data):t.data;this.events.emit("payload",n)}onError(t,n){const r=this.parseError(n),s=r.message||r.toString(),a=Yd(t,s);this.events.emit("payload",a)}parseError(t,n=this.url){return $T(t,n,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>WA&&this.events.setMaxListeners(WA)}};const XA="error",uX="wss://relay.walletconnect.org",fX="wc",hX="universal_provider",Rh=`${fX}@2:${hX}:`,sD="https://rpc.walletconnect.org/v1/",ac="generic",dX=`${sD}bundler`,Cr={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};function Vb(e){return e==null||typeof e!="object"&&typeof e!="function"}function oD(e){return Object.getOwnPropertySymbols(e).filter(t=>Object.prototype.propertyIsEnumerable.call(e,t))}function aD(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const pX="[object RegExp]",cD="[object String]",lD="[object Number]",uD="[object Boolean]",fD="[object Arguments]",gX="[object Symbol]",yX="[object Date]",mX="[object Map]",bX="[object Set]",wX="[object Array]",vX="[object ArrayBuffer]",EX="[object Object]",_X="[object DataView]",SX="[object Uint8Array]",AX="[object Uint8ClampedArray]",RX="[object Uint16Array]",OX="[object Uint32Array]",xX="[object Int8Array]",TX="[object Int16Array]",DX="[object Int32Array]",IX="[object Float32Array]",CX="[object Float64Array]";function Gb(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function NX(e,t){return lc(e,void 0,e,new Map,t)}function lc(e,t,n,r=new Map,s=void 0){const a=s?.(e,t,n,r);if(a!=null)return a;if(Vb(e))return e;if(r.has(e))return r.get(e);if(Array.isArray(e)){const l=new Array(e.length);r.set(e,l);for(let u=0;u<e.length;u++)l[u]=lc(e[u],u,n,r,s);return Object.hasOwn(e,"index")&&(l.index=e.index),Object.hasOwn(e,"input")&&(l.input=e.input),l}if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp){const l=new RegExp(e.source,e.flags);return l.lastIndex=e.lastIndex,l}if(e instanceof Map){const l=new Map;r.set(e,l);for(const[u,d]of e)l.set(u,lc(d,u,n,r,s));return l}if(e instanceof Set){const l=new Set;r.set(e,l);for(const u of e)l.add(lc(u,void 0,n,r,s));return l}if(typeof Buffer<"u"&&Buffer.isBuffer(e))return e.subarray();if(Gb(e)){const l=new(Object.getPrototypeOf(e)).constructor(e.length);r.set(e,l);for(let u=0;u<e.length;u++)l[u]=lc(e[u],u,n,r,s);return l}if(e instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&e instanceof SharedArrayBuffer)return e.slice(0);if(e instanceof DataView){const l=new DataView(e.buffer.slice(0),e.byteOffset,e.byteLength);return r.set(e,l),Ro(l,e,n,r,s),l}if(typeof File<"u"&&e instanceof File){const l=new File([e],e.name,{type:e.type});return r.set(e,l),Ro(l,e,n,r,s),l}if(e instanceof Blob){const l=new Blob([e],{type:e.type});return r.set(e,l),Ro(l,e,n,r,s),l}if(e instanceof Error){const l=new e.constructor;return r.set(e,l),l.message=e.message,l.name=e.name,l.stack=e.stack,l.cause=e.cause,Ro(l,e,n,r,s),l}if(typeof e=="object"&&UX(e)){const l=Object.create(Object.getPrototypeOf(e));return r.set(e,l),Ro(l,e,n,r,s),l}return e}function Ro(e,t,n=e,r,s){const a=[...Object.keys(t),...oD(t)];for(let l=0;l<a.length;l++){const u=a[l],d=Object.getOwnPropertyDescriptor(e,u);(d==null||d.writable)&&(e[u]=lc(t[u],u,n,r,s))}}function UX(e){switch(aD(e)){case fD:case wX:case vX:case _X:case uD:case yX:case IX:case CX:case xX:case TX:case DX:case mX:case lD:case EX:case pX:case bX:case cD:case gX:case SX:case AX:case RX:case OX:return!0;default:return!1}}function BX(e,t){return NX(e,(n,r,s,a)=>{if(typeof e=="object")switch(Object.prototype.toString.call(e)){case lD:case cD:case uD:{const l=new e.constructor(e?.valueOf());return Ro(l,e),l}case fD:{const l={};return Ro(l,e),l.length=e.length,l[Symbol.iterator]=e[Symbol.iterator],l}default:return}})}function ZA(e){return BX(e)}function QA(e){return e!==null&&typeof e=="object"&&aD(e)==="[object Arguments]"}function JA(e){return typeof e=="object"&&e!==null}function $X(){}function PX(e){return Gb(e)}function kX(e){if(typeof e!="object"||e==null)return!1;if(Object.getPrototypeOf(e)===null)return!0;if(Object.prototype.toString.call(e)!=="[object Object]"){const n=e[Symbol.toStringTag];return n==null||!Object.getOwnPropertyDescriptor(e,Symbol.toStringTag)?.writable?!1:e.toString()===`[object ${n}]`}let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function MX(e){if(Vb(e))return e;if(Array.isArray(e)||Gb(e)||e instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&e instanceof SharedArrayBuffer)return e.slice(0);const t=Object.getPrototypeOf(e),n=t.constructor;if(e instanceof Date||e instanceof Map||e instanceof Set)return new n(e);if(e instanceof RegExp){const r=new n(e);return r.lastIndex=e.lastIndex,r}if(e instanceof DataView)return new n(e.buffer.slice(0));if(e instanceof Error){const r=new n(e.message);return r.stack=e.stack,r.name=e.name,r.cause=e.cause,r}if(typeof File<"u"&&e instanceof File)return new n([e],e.name,{type:e.type,lastModified:e.lastModified});if(typeof e=="object"){const r=Object.create(t);return Object.assign(r,e)}return e}function LX(e,...t){const n=t.slice(0,-1),r=t[t.length-1];let s=e;for(let a=0;a<n.length;a++){const l=n[a];s=k0(s,l,r,new Map)}return s}function k0(e,t,n,r){if(Vb(e)&&(e=Object(e)),t==null||typeof t!="object")return e;if(r.has(t))return MX(r.get(t));if(r.set(t,e),Array.isArray(t)){t=t.slice();for(let a=0;a<t.length;a++)t[a]=t[a]??void 0}const s=[...Object.keys(t),...oD(t)];for(let a=0;a<s.length;a++){const l=s[a];let u=t[l],d=e[l];if(QA(u)&&(u={...u}),QA(d)&&(d={...d}),typeof Buffer<"u"&&Buffer.isBuffer(u)&&(u=ZA(u)),Array.isArray(u))if(typeof d=="object"&&d!=null){const p=[],y=Reflect.ownKeys(d);for(let b=0;b<y.length;b++){const w=y[b];p[w]=d[w]}d=p}else d=[];const h=n(d,u,l,e,t,r);h!=null?e[l]=h:Array.isArray(u)||JA(d)&&JA(u)?e[l]=k0(d,u,n,r):d==null&&kX(u)?e[l]=k0({},u,n,r):d==null&&PX(u)?e[l]=ZA(u):(d===void 0||u!==void 0)&&(e[l]=u)}return e}function jX(e,...t){return LX(e,...t,$X)}var zX=Object.defineProperty,qX=Object.defineProperties,HX=Object.getOwnPropertyDescriptors,eR=Object.getOwnPropertySymbols,FX=Object.prototype.hasOwnProperty,VX=Object.prototype.propertyIsEnumerable,tR=(e,t,n)=>t in e?zX(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Oh=(e,t)=>{for(var n in t||(t={}))FX.call(t,n)&&tR(e,n,t[n]);if(eR)for(var n of eR(t))VX.call(t,n)&&tR(e,n,t[n]);return e},GX=(e,t)=>qX(e,HX(t));function ur(e,t,n){var r;const s=dc(e);return((r=t.rpcMap)==null?void 0:r[s.reference])||`${sD}?chainId=${s.namespace}:${s.reference}&projectId=${n}`}function Xo(e){return e.includes(":")?e.split(":")[1]:e}function hD(e){return e.map(t=>`${t.split(":")[0]}:${t.split(":")[1]}`)}function KX(e,t){const n=Object.keys(t.namespaces).filter(s=>s.includes(e));if(!n.length)return[];const r=[];return n.forEach(s=>{const a=t.namespaces[s].accounts;r.push(...a)}),r}function xh(e={},t={}){const n=nR(e),r=nR(t);return jX(n,r)}function nR(e){var t,n,r,s,a;const l={};if(!fi(e))return l;for(const[u,d]of Object.entries(e)){const h=qd(u)?[u]:d.chains,p=d.methods||[],y=d.events||[],b=d.rpcMap||{},w=cc(u);l[w]=GX(Oh(Oh({},l[w]),d),{chains:ui(h,(t=l[w])==null?void 0:t.chains),methods:ui(p,(n=l[w])==null?void 0:n.methods),events:ui(y,(r=l[w])==null?void 0:r.events)}),(fi(b)||fi(((s=l[w])==null?void 0:s.rpcMap)||{}))&&(l[w].rpcMap=Oh(Oh({},b),(a=l[w])==null?void 0:a.rpcMap))}return l}function rR(e){return e.includes(":")?e.split(":")[2]:e}function iR(e){const t={};for(const[n,r]of Object.entries(e)){const s=r.methods||[],a=r.events||[],l=r.accounts||[],u=qd(n)?[n]:r.chains?r.chains:hD(r.accounts);t[n]={chains:u,methods:s,events:a,accounts:l}}return t}function xm(e){return typeof e=="number"?e:e.includes("0x")?parseInt(e,16):(e=e.includes(":")?e.split(":")[1]:e,isNaN(Number(e))?e:Number(e))}const dD={},Ge=e=>dD[e],Tm=(e,t)=>{dD[e]=t};var YX=Object.defineProperty,sR=Object.getOwnPropertySymbols,WX=Object.prototype.hasOwnProperty,XX=Object.prototype.propertyIsEnumerable,oR=(e,t,n)=>t in e?YX(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,aR=(e,t)=>{for(var n in t||(t={}))WX.call(t,n)&&oR(e,n,t[n]);if(sR)for(var n of sR(t))XX.call(t,n)&&oR(e,n,t[n]);return e};const cR="eip155",ZX=["atomic","flow-control","paymasterService","sessionKeys","auxiliaryFunds"],QX=e=>e&&e.startsWith("0x")?BigInt(e).toString(10):e,Dm=e=>e&&e.startsWith("0x")?e:`0x${BigInt(e).toString(16)}`,lR=e=>Object.keys(e).filter(t=>ZX.includes(t)).reduce((t,n)=>(t[n]=e[n],t),{}),JX=(e,t,n)=>{const{sessionProperties:r={},scopedProperties:s={}}=e,a={};if(!fi(s)&&!fi(r))return;const l=lR(r);for(const u of n){const d=QX(u);if(!d)continue;a[Dm(d)]=l;const h=s?.[`${cR}:${d}`];if(h){const p=h?.[`${cR}:${d}:${t}`];a[Dm(d)]=aR(aR({},a[Dm(d)]),lR(p||h))}}for(const[u,d]of Object.entries(a))Object.keys(d).length===0&&delete a[u];return Object.keys(a).length>0?a:void 0};var eZ=Object.defineProperty,tZ=(e,t,n)=>t in e?eZ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ka=(e,t,n)=>tZ(e,typeof t!="symbol"?t+"":t,n);class nZ{constructor(t){Ka(this,"name","polkadot"),Ka(this,"client"),Ka(this,"httpProviders"),Ka(this,"events"),Ka(this,"namespace"),Ka(this,"chainId"),this.namespace=t.namespace,this.events=Ge("events"),this.client=Ge("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,n){this.httpProviders[t]||this.setHttpProvider(t,n),this.chainId=t,this.events.emit(Cr.DEFAULT_CHAIN_CHANGED,`${this.name}:${t}`)}getAccounts(){const t=this.namespace.accounts;return t?t.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(n=>{var r;const s=Xo(n);t[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,n=this.httpProviders[t];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return n}setHttpProvider(t,n){const r=this.createHttpProvider(t,n);r&&(this.httpProviders[t]=r)}createHttpProvider(t,n){const r=n||ur(t,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${t}`);return new Ir(new Vr(r,Ge("disableProviderPing")))}}var rZ=Object.defineProperty,iZ=Object.defineProperties,sZ=Object.getOwnPropertyDescriptors,uR=Object.getOwnPropertySymbols,oZ=Object.prototype.hasOwnProperty,aZ=Object.prototype.propertyIsEnumerable,M0=(e,t,n)=>t in e?rZ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,fR=(e,t)=>{for(var n in t||(t={}))oZ.call(t,n)&&M0(e,n,t[n]);if(uR)for(var n of uR(t))aZ.call(t,n)&&M0(e,n,t[n]);return e},hR=(e,t)=>iZ(e,sZ(t)),Ya=(e,t,n)=>M0(e,typeof t!="symbol"?t+"":t,n);class cZ{constructor(t){Ya(this,"name","eip155"),Ya(this,"client"),Ya(this,"chainId"),Ya(this,"namespace"),Ya(this,"httpProviders"),Ya(this,"events"),this.namespace=t.namespace,this.events=Ge("events"),this.client=Ge("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(t){switch(t.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(t);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(t);case"wallet_getCallsStatus":return await this.getCallStatus(t)}return this.namespace.methods.includes(t.request.method)?await this.client.request(t):this.getHttpProvider().request(t.request)}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}setDefaultChain(t,n){this.httpProviders[t]||this.setHttpProvider(parseInt(t),n),this.chainId=parseInt(t),this.events.emit(Cr.DEFAULT_CHAIN_CHANGED,`${this.name}:${t}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}createHttpProvider(t,n){const r=n||ur(`${this.name}:${t}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${t}`);return new Ir(new Vr(r,Ge("disableProviderPing")))}setHttpProvider(t,n){const r=this.createHttpProvider(t,n);r&&(this.httpProviders[t]=r)}createHttpProviders(){const t={};return this.namespace.chains.forEach(n=>{var r;const s=parseInt(Xo(n));t[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),t}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}getHttpProvider(){const t=this.chainId,n=this.httpProviders[t];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return n}async handleSwitchChain(t){var n,r;let s=t.request.params?(n=t.request.params[0])==null?void 0:n.chainId:"0x0";s=s.startsWith("0x")?s:`0x${s}`;const a=parseInt(s,16);if(this.isChainApproved(a))this.setDefaultChain(`${a}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:t.topic,request:{method:t.request.method,params:[{chainId:s}]},chainId:(r=this.namespace.chains)==null?void 0:r[0]}),this.setDefaultChain(`${a}`);else throw new Error(`Failed to switch to chain 'eip155:${a}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(t){return this.namespace.chains.includes(`${this.name}:${t}`)}async getCapabilities(t){var n,r,s,a,l;const u=(r=(n=t.request)==null?void 0:n.params)==null?void 0:r[0],d=((a=(s=t.request)==null?void 0:s.params)==null?void 0:a[1])||[];if(!u)throw new Error("Missing address parameter in `wallet_getCapabilities` request");const h=this.client.session.get(t.topic),p=((l=h?.sessionProperties)==null?void 0:l.capabilities)||{},y=`${u}${d.join(",")}`,b=p?.[y];if(b)return b;let w;try{w=JX(h,u,d)}catch(E){console.warn("Failed to extract capabilities from session",E)}if(w)return w;const v=await this.client.request(t);try{await this.client.session.update(t.topic,{sessionProperties:hR(fR({},h.sessionProperties||{}),{capabilities:hR(fR({},p||{}),{[y]:v})})})}catch(E){console.warn("Failed to update session with capabilities",E)}return v}async getCallStatus(t){var n,r;const s=this.client.session.get(t.topic),a=(n=s.sessionProperties)==null?void 0:n.bundler_name;if(a){const u=this.getBundlerUrl(t.chainId,a);try{return await this.getUserOperationReceipt(u,t)}catch(d){console.warn("Failed to fetch call status from bundler",d,u)}}const l=(r=s.sessionProperties)==null?void 0:r.bundler_url;if(l)try{return await this.getUserOperationReceipt(l,t)}catch(u){console.warn("Failed to fetch call status from custom bundler",u,l)}if(this.namespace.methods.includes(t.request.method))return await this.client.request(t);throw new Error("Fetching call status not approved by the wallet.")}async getUserOperationReceipt(t,n){var r;const s=new URL(t),a=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ks("eth_getUserOperationReceipt",[(r=n.request.params)==null?void 0:r[0]]))});if(!a.ok)throw new Error(`Failed to fetch user operation receipt - ${a.status}`);return await a.json()}getBundlerUrl(t,n){return`${dX}?projectId=${this.client.core.projectId}&chainId=${t}&bundler=${n}`}}var lZ=Object.defineProperty,uZ=(e,t,n)=>t in e?lZ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Wa=(e,t,n)=>uZ(e,typeof t!="symbol"?t+"":t,n);class fZ{constructor(t){Wa(this,"name","solana"),Wa(this,"client"),Wa(this,"httpProviders"),Wa(this,"events"),Wa(this,"namespace"),Wa(this,"chainId"),this.namespace=t.namespace,this.events=Ge("events"),this.client=Ge("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,n){this.httpProviders[t]||this.setHttpProvider(t,n),this.chainId=t,this.events.emit(Cr.DEFAULT_CHAIN_CHANGED,`${this.name}:${t}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(n=>{var r;const s=Xo(n);t[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,n=this.httpProviders[t];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return n}setHttpProvider(t,n){const r=this.createHttpProvider(t,n);r&&(this.httpProviders[t]=r)}createHttpProvider(t,n){const r=n||ur(t,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${t}`);return new Ir(new Vr(r,Ge("disableProviderPing")))}}var hZ=Object.defineProperty,dZ=(e,t,n)=>t in e?hZ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Xa=(e,t,n)=>dZ(e,typeof t!="symbol"?t+"":t,n);class pZ{constructor(t){Xa(this,"name","cosmos"),Xa(this,"client"),Xa(this,"httpProviders"),Xa(this,"events"),Xa(this,"namespace"),Xa(this,"chainId"),this.namespace=t.namespace,this.events=Ge("events"),this.client=Ge("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,n){this.httpProviders[t]||this.setHttpProvider(t,n),this.chainId=t,this.events.emit(Cr.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(n=>{var r;const s=Xo(n);t[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,n=this.httpProviders[t];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return n}setHttpProvider(t,n){const r=this.createHttpProvider(t,n);r&&(this.httpProviders[t]=r)}createHttpProvider(t,n){const r=n||ur(t,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${t}`);return new Ir(new Vr(r,Ge("disableProviderPing")))}}var gZ=Object.defineProperty,yZ=(e,t,n)=>t in e?gZ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Za=(e,t,n)=>yZ(e,typeof t!="symbol"?t+"":t,n);class mZ{constructor(t){Za(this,"name","algorand"),Za(this,"client"),Za(this,"httpProviders"),Za(this,"events"),Za(this,"namespace"),Za(this,"chainId"),this.namespace=t.namespace,this.events=Ge("events"),this.client=Ge("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,n){if(!this.httpProviders[t]){const r=n||ur(`${this.name}:${t}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${t}`);this.setHttpProvider(t,r)}this.chainId=t,this.events.emit(Cr.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(n=>{var r;t[n]=this.createHttpProvider(n,(r=this.namespace.rpcMap)==null?void 0:r[n])}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,n=this.httpProviders[t];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return n}setHttpProvider(t,n){const r=this.createHttpProvider(t,n);r&&(this.httpProviders[t]=r)}createHttpProvider(t,n){const r=n||ur(t,this.namespace,this.client.core.projectId);return typeof r>"u"?void 0:new Ir(new Vr(r,Ge("disableProviderPing")))}}var bZ=Object.defineProperty,wZ=(e,t,n)=>t in e?bZ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Qa=(e,t,n)=>wZ(e,typeof t!="symbol"?t+"":t,n);class vZ{constructor(t){Qa(this,"name","cip34"),Qa(this,"client"),Qa(this,"httpProviders"),Qa(this,"events"),Qa(this,"namespace"),Qa(this,"chainId"),this.namespace=t.namespace,this.events=Ge("events"),this.client=Ge("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,n){this.httpProviders[t]||this.setHttpProvider(t,n),this.chainId=t,this.events.emit(Cr.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(n=>{const r=this.getCardanoRPCUrl(n),s=Xo(n);t[s]=this.createHttpProvider(s,r)}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,n=this.httpProviders[t];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return n}getCardanoRPCUrl(t){const n=this.namespace.rpcMap;if(n)return n[t]}setHttpProvider(t,n){const r=this.createHttpProvider(t,n);r&&(this.httpProviders[t]=r)}createHttpProvider(t,n){const r=n||this.getCardanoRPCUrl(t);if(!r)throw new Error(`No RPC url provided for chainId: ${t}`);return new Ir(new Vr(r,Ge("disableProviderPing")))}}var EZ=Object.defineProperty,_Z=(e,t,n)=>t in e?EZ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ja=(e,t,n)=>_Z(e,typeof t!="symbol"?t+"":t,n);class SZ{constructor(t){Ja(this,"name","elrond"),Ja(this,"client"),Ja(this,"httpProviders"),Ja(this,"events"),Ja(this,"namespace"),Ja(this,"chainId"),this.namespace=t.namespace,this.events=Ge("events"),this.client=Ge("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,n){this.httpProviders[t]||this.setHttpProvider(t,n),this.chainId=t,this.events.emit(Cr.DEFAULT_CHAIN_CHANGED,`${this.name}:${t}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(n=>{var r;const s=Xo(n);t[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,n=this.httpProviders[t];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return n}setHttpProvider(t,n){const r=this.createHttpProvider(t,n);r&&(this.httpProviders[t]=r)}createHttpProvider(t,n){const r=n||ur(t,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${t}`);return new Ir(new Vr(r,Ge("disableProviderPing")))}}var AZ=Object.defineProperty,RZ=(e,t,n)=>t in e?AZ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ec=(e,t,n)=>RZ(e,typeof t!="symbol"?t+"":t,n);class OZ{constructor(t){ec(this,"name","multiversx"),ec(this,"client"),ec(this,"httpProviders"),ec(this,"events"),ec(this,"namespace"),ec(this,"chainId"),this.namespace=t.namespace,this.events=Ge("events"),this.client=Ge("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,n){this.httpProviders[t]||this.setHttpProvider(t,n),this.chainId=t,this.events.emit(Cr.DEFAULT_CHAIN_CHANGED,`${this.name}:${t}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(n=>{var r;const s=Xo(n);t[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,n=this.httpProviders[t];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return n}setHttpProvider(t,n){const r=this.createHttpProvider(t,n);r&&(this.httpProviders[t]=r)}createHttpProvider(t,n){const r=n||ur(t,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${t}`);return new Ir(new Vr(r,Ge("disableProviderPing")))}}var xZ=Object.defineProperty,TZ=(e,t,n)=>t in e?xZ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,tc=(e,t,n)=>TZ(e,typeof t!="symbol"?t+"":t,n);class DZ{constructor(t){tc(this,"name","near"),tc(this,"client"),tc(this,"httpProviders"),tc(this,"events"),tc(this,"namespace"),tc(this,"chainId"),this.namespace=t.namespace,this.events=Ge("events"),this.client=Ge("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,n){if(this.chainId=t,!this.httpProviders[t]){const r=n||ur(`${this.name}:${t}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${t}`);this.setHttpProvider(t,r)}this.events.emit(Cr.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const t=this.namespace.accounts;return t?t.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(n=>{var r;t[n]=this.createHttpProvider(n,(r=this.namespace.rpcMap)==null?void 0:r[n])}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,n=this.httpProviders[t];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return n}setHttpProvider(t,n){const r=this.createHttpProvider(t,n);r&&(this.httpProviders[t]=r)}createHttpProvider(t,n){const r=n||ur(t,this.namespace);return typeof r>"u"?void 0:new Ir(new Vr(r,Ge("disableProviderPing")))}}var IZ=Object.defineProperty,CZ=(e,t,n)=>t in e?IZ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,nc=(e,t,n)=>CZ(e,typeof t!="symbol"?t+"":t,n);class NZ{constructor(t){nc(this,"name","tezos"),nc(this,"client"),nc(this,"httpProviders"),nc(this,"events"),nc(this,"namespace"),nc(this,"chainId"),this.namespace=t.namespace,this.events=Ge("events"),this.client=Ge("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,n){if(this.chainId=t,!this.httpProviders[t]){const r=n||ur(`${this.name}:${t}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${t}`);this.setHttpProvider(t,r)}this.events.emit(Cr.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const t=this.namespace.accounts;return t?t.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(n=>{t[n]=this.createHttpProvider(n)}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,n=this.httpProviders[t];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return n}setHttpProvider(t,n){const r=this.createHttpProvider(t,n);r&&(this.httpProviders[t]=r)}createHttpProvider(t,n){const r=n||ur(t,this.namespace);return typeof r>"u"?void 0:new Ir(new Vr(r))}}var UZ=Object.defineProperty,BZ=(e,t,n)=>t in e?UZ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,rc=(e,t,n)=>BZ(e,typeof t!="symbol"?t+"":t,n);class $Z{constructor(t){rc(this,"name",ac),rc(this,"client"),rc(this,"httpProviders"),rc(this,"events"),rc(this,"namespace"),rc(this,"chainId"),this.namespace=t.namespace,this.events=Ge("events"),this.client=Ge("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(t.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(t.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(t.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(t.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider(t.chainId).request(t.request)}setDefaultChain(t,n){this.httpProviders[t]||this.setHttpProvider(t,n),this.chainId=t,this.events.emit(Cr.DEFAULT_CHAIN_CHANGED,`${this.name}:${t}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){var t,n;const r={};return(n=(t=this.namespace)==null?void 0:t.accounts)==null||n.forEach(s=>{const a=dc(s);r[`${a.namespace}:${a.reference}`]=this.createHttpProvider(s)}),r}getHttpProvider(t){const n=this.httpProviders[t];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return n}setHttpProvider(t,n){const r=this.createHttpProvider(t,n);r&&(this.httpProviders[t]=r)}createHttpProvider(t,n){const r=n||ur(t,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${t}`);return new Ir(new Vr(r,Ge("disableProviderPing")))}}var PZ=Object.defineProperty,kZ=Object.defineProperties,MZ=Object.getOwnPropertyDescriptors,dR=Object.getOwnPropertySymbols,LZ=Object.prototype.hasOwnProperty,jZ=Object.prototype.propertyIsEnumerable,L0=(e,t,n)=>t in e?PZ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Th=(e,t)=>{for(var n in t||(t={}))LZ.call(t,n)&&L0(e,n,t[n]);if(dR)for(var n of dR(t))jZ.call(t,n)&&L0(e,n,t[n]);return e},Im=(e,t)=>kZ(e,MZ(t)),_r=(e,t,n)=>L0(e,typeof t!="symbol"?t+"":t,n);class Kb{constructor(t){_r(this,"client"),_r(this,"namespaces"),_r(this,"optionalNamespaces"),_r(this,"sessionProperties"),_r(this,"scopedProperties"),_r(this,"events",new bd),_r(this,"rpcProviders",{}),_r(this,"session"),_r(this,"providerOpts"),_r(this,"logger"),_r(this,"uri"),_r(this,"disableProviderPing",!1),this.providerOpts=t,this.logger=typeof t?.logger<"u"&&typeof t?.logger!="string"?t.logger:qu(Gd({level:t?.logger||XA})),this.disableProviderPing=t?.disableProviderPing||!1}static async init(t){const n=new Kb(t);return await n.initialize(),n}async request(t,n,r){const[s,a]=this.validateChain(n);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(s).request({request:Th({},t),chainId:`${s}:${a}`,topic:this.session.topic,expiry:r})}sendAsync(t,n,r,s){const a=new Date().getTime();this.request(t,r,s).then(l=>n(null,Kd(a,l))).catch(l=>n(l,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties}),await this.requestAccounts()}async disconnect(){var t;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(t=this.session)==null?void 0:t.topic,reason:vt("USER_DISCONNECTED")}),await this.cleanup()}async connect(t){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(t),await this.cleanupPendingPairings(),!t.skipPairing)return await this.pair(t.pairingTopic)}async authenticate(t,n){if(!this.client)throw new Error("Sign Client not initialized");this.setNamespaces(t),await this.cleanupPendingPairings();const{uri:r,response:s}=await this.client.authenticate(t,n);r&&(this.uri=r,this.events.emit("display_uri",r));const a=await s();if(this.session=a.session,this.session){const l=iR(this.session.namespaces);this.namespaces=xh(this.namespaces,l),await this.persist("namespaces",this.namespaces),this.onConnect()}return a}on(t,n){this.events.on(t,n)}once(t,n){this.events.once(t,n)}removeListener(t,n){this.events.removeListener(t,n)}off(t,n){this.events.off(t,n)}get isWalletConnect(){return!0}async pair(t){const{uri:n,approval:r}=await this.client.connect({pairingTopic:t,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties});n&&(this.uri=n,this.events.emit("display_uri",n));const s=await r();this.session=s;const a=iR(s.namespaces);return this.namespaces=xh(this.namespaces,a),await this.persist("namespaces",this.namespaces),await this.persist("optionalNamespaces",this.optionalNamespaces),this.onConnect(),this.session}setDefaultChain(t,n){try{if(!this.session)return;const[r,s]=this.validateChain(t),a=this.getProvider(r);a.name===ac?a.setDefaultChain(`${r}:${s}`,n):a.setDefaultChain(s,n)}catch(r){if(!/Please call connect/.test(r.message))throw r}}async cleanupPendingPairings(t={}){this.logger.info("Cleaning up inactive pairings...");const n=this.client.pairing.getAll();if(Yi(n)){for(const r of n)t.deletePairings?this.client.core.expirer.set(r.topic,0):await this.client.core.relayer.subscriber.unsubscribe(r.topic);this.logger.info(`Inactive pairings cleared: ${n.length}`)}}abortPairingAttempt(){this.logger.warn("abortPairingAttempt is deprecated. This is now a no-op.")}async checkStorage(){this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.session&&this.createProviders()}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){var t,n;if(this.client=this.providerOpts.client||await eX.init({core:this.providerOpts.core,logger:this.providerOpts.logger||XA,relayUrl:this.providerOpts.relayUrl||uX,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.providerOpts.session)try{this.session=this.client.session.get(this.providerOpts.session.topic)}catch(r){throw this.logger.error("Failed to get session",r),new Error(`The provided session: ${(n=(t=this.providerOpts)==null?void 0:t.session)==null?void 0:n.topic} doesn't exist in the Sign client`)}else{const r=this.client.session.getAll();this.session=r[0]}this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const t=[...new Set(Object.keys(this.session.namespaces).map(n=>cc(n)))];Tm("client",this.client),Tm("events",this.events),Tm("disableProviderPing",this.disableProviderPing),t.forEach(n=>{if(!this.session)return;const r=KX(n,this.session),s=hD(r),a=xh(this.namespaces,this.optionalNamespaces),l=Im(Th({},a[n]),{accounts:r,chains:s});switch(n){case"eip155":this.rpcProviders[n]=new cZ({namespace:l});break;case"algorand":this.rpcProviders[n]=new mZ({namespace:l});break;case"solana":this.rpcProviders[n]=new fZ({namespace:l});break;case"cosmos":this.rpcProviders[n]=new pZ({namespace:l});break;case"polkadot":this.rpcProviders[n]=new nZ({namespace:l});break;case"cip34":this.rpcProviders[n]=new vZ({namespace:l});break;case"elrond":this.rpcProviders[n]=new SZ({namespace:l});break;case"multiversx":this.rpcProviders[n]=new OZ({namespace:l});break;case"near":this.rpcProviders[n]=new DZ({namespace:l});break;case"tezos":this.rpcProviders[n]=new NZ({namespace:l});break;default:this.rpcProviders[ac]?this.rpcProviders[ac].updateNamespace(l):this.rpcProviders[ac]=new $Z({namespace:l})}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",t=>{var n;const{topic:r}=t;r===((n=this.session)==null?void 0:n.topic)&&this.events.emit("session_ping",t)}),this.client.on("session_event",t=>{var n;const{params:r,topic:s}=t;if(s!==((n=this.session)==null?void 0:n.topic))return;const{event:a}=r;if(a.name==="accountsChanged"){const l=a.data;l&&Yi(l)&&this.events.emit("accountsChanged",l.map(rR))}else if(a.name==="chainChanged"){const l=r.chainId,u=r.event.data,d=cc(l),h=xm(l)!==xm(u)?`${d}:${xm(u)}`:l;this.onChainChanged(h)}else this.events.emit(a.name,a.data);this.events.emit("session_event",t)}),this.client.on("session_update",({topic:t,params:n})=>{var r,s;if(t!==((r=this.session)==null?void 0:r.topic))return;const{namespaces:a}=n,l=(s=this.client)==null?void 0:s.session.get(t);this.session=Im(Th({},l),{namespaces:a}),this.onSessionUpdate(),this.events.emit("session_update",{topic:t,params:n})}),this.client.on("session_delete",async t=>{var n;t.topic===((n=this.session)==null?void 0:n.topic)&&(await this.cleanup(),this.events.emit("session_delete",t),this.events.emit("disconnect",Im(Th({},vt("USER_DISCONNECTED")),{data:t.topic})))}),this.on(Cr.DEFAULT_CHAIN_CHANGED,t=>{this.onChainChanged(t,!0)})}getProvider(t){return this.rpcProviders[t]||this.rpcProviders[ac]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(t=>{var n;this.getProvider(t).updateNamespace((n=this.session)==null?void 0:n.namespaces[t])})}setNamespaces(t){const{namespaces:n={},optionalNamespaces:r={},sessionProperties:s,scopedProperties:a}=t;this.optionalNamespaces=xh(n,r),this.sessionProperties=s,this.scopedProperties=a}validateChain(t){const[n,r]=t?.split(":")||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[n,r];if(n&&!Object.keys(this.namespaces||{}).map(l=>cc(l)).includes(n))throw new Error(`Namespace '${n}' is not configured. Please call connect() first with namespace config.`);if(n&&r)return[n,r];const s=cc(Object.keys(this.namespaces)[0]),a=this.rpcProviders[s].getDefaultChain();return[s,a]}async requestAccounts(){const[t]=this.validateChain();return await this.getProvider(t).requestAccounts()}async onChainChanged(t,n=!1){if(!this.namespaces)return;const[r,s]=this.validateChain(t);if(!s)return;this.updateNamespaceChain(r,s),this.events.emit("chainChanged",s);const a=this.getProvider(r).getDefaultChain();n||this.getProvider(r).setDefaultChain(s),this.emitAccountsChangedOnChainChange({namespace:r,previousChainId:a,newChainId:t}),await this.persist("namespaces",this.namespaces)}emitAccountsChangedOnChainChange({namespace:t,previousChainId:n,newChainId:r}){var s,a;try{if(n===r)return;const l=(a=(s=this.session)==null?void 0:s.namespaces[t])==null?void 0:a.accounts;if(!l)return;const u=l.filter(d=>d.includes(`${r}:`)).map(rR);if(!Yi(u))return;this.events.emit("accountsChanged",u)}catch(l){this.logger.warn("Failed to emit accountsChanged on chain change",l)}}updateNamespaceChain(t,n){if(!this.namespaces)return;const r=this.namespaces[t]?t:`${t}:${n}`,s={chains:[],methods:[],events:[],defaultChain:n};this.namespaces[r]?this.namespaces[r]&&(this.namespaces[r].defaultChain=n):this.namespaces[r]=s}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,await this.deleteFromStore("namespaces"),await this.deleteFromStore("optionalNamespaces"),await this.deleteFromStore("sessionProperties"),this.session=void 0,await this.cleanupPendingPairings({deletePairings:!0}),await this.cleanupStorage()}async persist(t,n){var r;const s=((r=this.session)==null?void 0:r.topic)||"";await this.client.core.storage.setItem(`${Rh}/${t}${s}`,n)}async getFromStore(t){var n;const r=((n=this.session)==null?void 0:n.topic)||"";return await this.client.core.storage.getItem(`${Rh}/${t}${r}`)}async deleteFromStore(t){var n;const r=((n=this.session)==null?void 0:n.topic)||"";await this.client.core.storage.removeItem(`${Rh}/${t}${r}`)}async cleanupStorage(){var t;try{if(((t=this.client)==null?void 0:t.session.length)>0)return;const n=await this.client.core.storage.getKeys();for(const r of n)r.startsWith(Rh)&&await this.client.core.storage.removeItem(r)}catch(n){this.logger.warn("Failed to cleanup storage",n)}}}const zZ=Kb;let li=function(e){return e.FLOW_AUTHN="flow_authn",e.FLOW_PRE_AUTHZ="flow_pre_authz",e.FLOW_AUTHZ="flow_authz",e.FLOW_USER_SIGN="flow_user_sign",e}({}),pD=function(e){return e.SESSION_REQUEST="session_proposal",e.SIGNING_REQUEST="signing_request",e}({});const gD="fcl-plugin-service-walletconnect",yD="WC/RPC",qZ="pre-authz";function HZ(){return typeof navigator<"u"&&/android/i.test(navigator.userAgent)}function FZ(){return typeof navigator<"u"&&/iPhone|iPod/.test(navigator.userAgent)}function VZ(){return typeof navigator<"u"&&/iPad/.test(navigator.userAgent)}function GZ(){return FZ()||VZ()}function Ru(){return HZ()||GZ()}function Yb(e){if(e.startsWith("http")){const t=document.createElement("a");t.href=e,t.target="_blank",t.rel="noreferrer noopener",t.click()}else window.open(e,"_blank")}function KZ(e){let{service:t,user:n}=e;return!(!Ru()||t.endpoint===li.FLOW_AUTHN||t.endpoint===li.FLOW_AUTHZ&&n?.services?.find(r=>r.method===yD&&r.type===qZ))}function YZ(e){if(!e)return;const t=new Image;t.src=e}async function mD(e){let{provider:t,existingPairing:n}=e;const r=await Ho(),s={flow:{methods:[li.FLOW_AUTHN,li.FLOW_PRE_AUTHZ,li.FLOW_AUTHZ,li.FLOW_USER_SIGN],chains:[`flow:${r}`],events:["chainChanged","accountsChanged"]}};let a;const l=new Promise((d,h)=>{const p=y=>{d(y)};t.on("display_uri",p),a=()=>{t.removeListener("display_uri",p),h(new Error("WalletConnect Session Request aborted"))}}),u=t.connect({pairingTopic:n?.topic,namespaces:s}).finally(()=>{a()});return{uri:await l,approval:()=>u}}const bD=async e=>{let{method:t,body:n,session:r,provider:s,isExternal:a,abortSignal:l,disableNotifications:u}=e;const[d,h,p]=WZ(r),y=JSON.stringify({...n,addr:h,address:p}),b=await Promise.race([s.client.request({request:{method:t,params:[y]},chainId:d,topic:s.session?.topic}),new Promise((w,v)=>{l?.aborted&&v(new Error("WalletConnect Request aborted")),l?.addEventListener("abort",()=>{v(new Error("WalletConnect Request aborted"))})})]);if(!(typeof b!="object"||b==null))switch(b.status){case"APPROVED":let w=function(v){return v.method==="WC/RPC"?{...v,params:{...v.params,...a?{externalProvider:r.topic}:{},...u?{disableNotifications:u}:{}}}:v};if(t===li.FLOW_AUTHN){const v=(b?.data?.services??[]).map(w);return{...b.data?b.data:{},services:v}}return t===li.FLOW_PRE_AUTHZ?{...b.data,...b.data?.proposer?{proposer:w(b.data.proposer)}:{},payer:[...b.data?.payer?.map(w)],authorization:[...b.data?.authorization?.map(w)]}:b.data;case"DECLINED":throw new Error(`Declined: ${b.reason||"No reason supplied"}`);case"REDIRECT":return b.data;default:throw new Error("Declined: No reason supplied")}};function WZ(e){const[t,n,r]=Object.values(e.namespaces).map(l=>l.accounts).flat().filter(l=>l.startsWith("flow:"))[0].split(":");return[`${t}:${n}`,r,r]}var XZ='*,:after,:before{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgba(59,130,246,.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }::backdrop{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgba(59,130,246,.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }/*! tailwindcss v3.4.14 | MIT License | https://tailwindcss.com*/*,:after,:before{border:0 solid #e5e7eb;box-sizing:border-box}:after,:before{--tw-content:""}:host,html{-webkit-text-size-adjust:100%;font-feature-settings:normal;-webkit-tap-highlight-color:transparent;font-family:ui-sans-serif,system-ui,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;font-variation-settings:normal;line-height:1.5;-moz-tab-size:4;tab-size:4}body{line-height:inherit;margin:0}hr{border-top-width:1px;color:inherit;height:0}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,pre,samp{font-feature-settings:normal;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-size:1em;font-variation-settings:normal}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{border-collapse:collapse;border-color:inherit;text-indent:0}button,input,optgroup,select,textarea{font-feature-settings:inherit;color:inherit;font-family:inherit;font-size:100%;font-variation-settings:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;margin:0;padding:0}button,select{text-transform:none}button,input:where([type=button]),input:where([type=reset]),input:where([type=submit]){-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dd,dl,figure,h1,h2,h3,h4,h5,h6,hr,p,pre{margin:0}fieldset{margin:0}fieldset,legend{padding:0}menu,ol,ul{list-style:none;margin:0;padding:0}dialog{padding:0}textarea{resize:vertical}input::placeholder,textarea::placeholder{color:#9ca3af;opacity:1}[role=button],button{cursor:pointer}:disabled{cursor:default}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{height:auto;max-width:100%}[hidden]:where(:not([hidden=until-found])){display:none}.container{width:100%}@media (min-width:640px){.container{max-width:640px}}@media (min-width:768px){.container{max-width:768px}}@media (min-width:1024px){.container{max-width:1024px}}@media (min-width:1280px){.container{max-width:1280px}}@media (min-width:1536px){.container{max-width:1536px}}.sr-only{clip:rect(0,0,0,0);border-width:0;height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;white-space:nowrap;width:1px}.fixed{position:fixed}.bottom-3{bottom:.75rem}.left-3{left:.75rem}.right-3{right:.75rem}.z-\\[2147483647\\]{z-index:2147483647}.mx-auto{margin-left:auto;margin-right:auto}.ml-2{margin-left:.5rem}.ml-3{margin-left:.75rem}.mt-1{margin-top:.25rem}.flex{display:flex}.inline-flex{display:inline-flex}.h-10{height:2.5rem}.h-5{height:1.25rem}.w-10{width:2.5rem}.w-5{width:1.25rem}.max-w-sm{max-width:24rem}.grow{flex-grow:1}@keyframes slideUp{0%{transform:translateY(100%)}to{transform:translateY(0)}}.animate-slideUp{animation:slideUp .2s ease-out forwards}.self-start{align-self:flex-start}.self-center{align-self:center}.overflow-hidden{overflow:hidden}.rounded-full{border-radius:9999px}.rounded-lg{border-radius:.5rem}.rounded-md{border-radius:.375rem}.border{border-width:1px}.border-gray-200{--tw-border-opacity:1;border-color:rgb(229 231 235/var(--tw-border-opacity))}.border-transparent{border-color:transparent}.bg-transparent{background-color:transparent}.bg-white{--tw-bg-opacity:1;background-color:rgb(255 255 255/var(--tw-bg-opacity))}.p-0{padding:0}.p-2{padding:.5rem}.p-4{padding:1rem}.text-sm{font-size:.875rem;line-height:1.25rem}.font-medium{font-weight:500}.text-gray-400{--tw-text-opacity:1;color:rgb(156 163 175/var(--tw-text-opacity))}.text-gray-500{--tw-text-opacity:1;color:rgb(107 114 128/var(--tw-text-opacity))}.text-gray-900{--tw-text-opacity:1;color:rgb(17 24 39/var(--tw-text-opacity))}.shadow-lg{--tw-shadow:0 10px 15px -3px rgba(0,0,0,.1),0 4px 6px -4px rgba(0,0,0,.1);--tw-shadow-colored:0 10px 15px -3px var(--tw-shadow-color),0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.filter{filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.hover\\:text-gray-500:hover{--tw-text-opacity:1;color:rgb(107 114 128/var(--tw-text-opacity))}.focus\\:border-transparent:focus{border-color:transparent}.focus\\:ring-0:focus{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow,0 0 #0000)}.dark\\:border-gray-600:is(.dark *){--tw-border-opacity:1;border-color:rgb(75 85 99/var(--tw-border-opacity))}.dark\\:bg-gray-700:is(.dark *){--tw-bg-opacity:1;background-color:rgb(55 65 81/var(--tw-bg-opacity))}.dark\\:text-gray-100:is(.dark *){--tw-text-opacity:1;color:rgb(243 244 246/var(--tw-text-opacity))}.dark\\:text-gray-200:is(.dark *){--tw-text-opacity:1;color:rgb(229 231 235/var(--tw-text-opacity))}.dark\\:text-gray-300:is(.dark *){--tw-text-opacity:1;color:rgb(209 213 219/var(--tw-text-opacity))}.dark\\:hover\\:text-gray-300:hover:is(.dark *){--tw-text-opacity:1;color:rgb(209 213 219/var(--tw-text-opacity))}@media (min-width:768px){.md\\:bottom-4{bottom:1rem}.md\\:left-auto{left:auto}.md\\:right-4{right:1rem}.md\\:self-start{align-self:flex-start}}';function ZZ(e){let{title:t,message:n,icon:r,onClick:s,onDismiss:a,animate:l}=e;return ni("div",{className:`fixed bottom-3 left-3 right-3 mx-auto z-[2147483647] flex max-w-sm
        overflow-hidden rounded-lg border border-gray-200 bg-white p-4 shadow-lg
        md:bottom-4 md:left-auto md:right-4 dark:bg-gray-700 dark:border-gray-600
        ${l?"animate-slideUp":""}`,role:"alert",onClick:u=>{s&&(u.stopPropagation(),s?.())},children:[r&&ni("img",{className:"h-10 w-10 self-center rounded-md md:self-start",src:r,alt:t}),ni("div",{className:"ml-3 grow",children:[ni("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:t}),ni("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-300",children:n})]}),ni("button",{className:`ml-2 inline-flex rounded-full text-gray-400 hover:text-gray-500 focus:ring-0
          dark:text-gray-200 dark:hover:text-gray-300 ${Ru()?"self-center p-2":"self-start p-0 bg-transparent border-transparent focus:border-transparent"}`,onClick:u=>{u.stopPropagation(),a?.()},children:[ni("span",{className:"sr-only",children:"Close"}),ni("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:ni("path",{fillRule:"evenodd",d:"M14.354 5.646a.5.5 0 00-.708 0L10 9.293 5.354 4.646a.5.5 0 00-.708.708L9.293 10l-4.647 4.646a.5.5 0 00.708.708L10 10.707l4.646 4.647a.5.5 0 00.708-.708L10.707 10l4.647-4.646a.5.5 0 000-.708z"})})]})]})}let Yl=null,QZ=0,ic=null;function JZ(){const e=document.createElement("div"),t=e.attachShadow({mode:"open"}),n=document.createElement("div");t.appendChild(n),document.body.appendChild(e);const r=document.createElement("style");r.textContent=XZ,t.appendChild(r);const s=window.matchMedia("(prefers-color-scheme: dark)"),a=()=>{n.classList.toggle("dark",s.matches)};return s.addEventListener("change",a),a(),n}function eQ(e){let{title:t,message:n,icon:r,onClick:s,onDismiss:a,debounceDelay:l=0}=e;Yl||(Yl=JZ());const u=!ic;ic&&(clearTimeout(ic),ic=null),YS(ni(ZZ,{title:t,message:n,icon:r,onClick:s,onDismiss:()=>{a?.(),d()},animate:u},QZ++),Yl);function d(){Yl&&YS(null,Yl)}return{dismiss:()=>{ic=setTimeout(()=>{ic=null,d()},l)}}}var tQ="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 384 512'%3e%3c!--!Font Awesome Free 6.7.1 by %40fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons%2c Inc.--%3e%3cpath d='M16 64C16 28.7 44.7 0 80 0L304 0c35.3 0 64 28.7 64 64l0 384c0 35.3-28.7 64-64 64L80 512c-35.3 0-64-28.7-64-64L16 64zM224 448a32 32 0 1 0 -64 0 32 32 0 1 0 64 0zM304 64L80 64l0 320 224 0 0-320z'/%3e%3c/svg%3e";function nQ(e){const t=new Set;let n=e;return{subscribe:l=>(t.add(l),()=>{t.delete(l)}),setState:l=>{n=l,t.forEach(u=>u(n))},getState:()=>n}}let Dh=nQ({});const rQ=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{wcRequestHook:null,pairingModalOverride:null,disableNotifications:!1};return{name:gD,f_type:"ServicePlugin",type:"discovery-service",serviceStrategy:{method:yD,exec:iQ(e,t,gO(()=>import("./index-B0khHK_t.js").then(n=>n.i),[]).then(n=>n.WalletConnectModal))},services:[]}},iQ=(e,t,n)=>async r=>{let{service:s,body:a,opts:l,abortSignal:u,user:d}=r;YZ(s.provider?.icon);const{wcRequestHook:h,pairingModalOverride:p,disableNotifications:y}=t,b=s.params?.disableNotifications??y,w=await aQ({provider:e,externalProviderOrTopic:s.params?.externalProvider});fe(!!w,"WalletConnect is not initialized");const{provider:v,isExternal:E}=w;let _=v.session??null,R;const D=s.endpoint,I=k(s);if(_?.topic&&_?.topic===s.params?.externalProvider&&D===li.FLOW_AUTHN)return d;_==null&&(_=await new Promise((q,H)=>{function P(){H("Declined: Externally Halted")}sQ(n)({service:s,onClose:P,appLink:I,provider:v,method:D,pairing:R,wcRequestHook:h,pairingModalOverride:p,abortSignal:u}).then(q,H)})),h&&h instanceof Function&&h({type:pD.SIGNING_REQUEST,method:D,service:s,session:_??null,pairing:null,uri:null}),KZ({service:s,user:d})&&Yb(I);const $=_?.sessionProperties?.["fclWc.disableNotificationsOnMobile"]==="true",U=!b&&!$?oQ({user:d,service:s}):null;return await bD({method:D,body:a,session:_,provider:v,abortSignal:u,isExternal:E,disableNotifications:s.params?.disableNotifications}).finally(()=>U?.dismiss());function k(q){let{uid:H}=q;return H&&/^(ftp|http|https):\/\/[^ "]+$/.test(H)||qe({title:"WalletConnect Service Warning",message:`service.uid should be a valid universal link url. Found: ${H}`,level:ft.warn}),H}};function sQ(e){return async t=>{let{service:n,onClose:r,appLink:s,provider:a,method:l,pairing:u,wcRequestHook:d,pairingModalOverride:h,abortSignal:p}=t;const y=a.providerOpts.projectId;fe(!!y,"Cannot establish connection, WalletConnect projectId is undefined");let b=null,w=null;try{const{uri:v,approval:E}=await mD({provider:a,existingPairing:u});if(d&&d instanceof Function&&d({type:pD.SESSION_REQUEST,method:l,service:n,session:null,pairing:u??null,uri:v??null}),Ru()){const R=new URLSearchParams({uri:v}).toString();let D=u==null?s+"?"+R:s;Yb(D)}else if(!u)if(h)h(v,r);else{w=new(await e)({projectId:y}),w.openModal({uri:v,onClose:r});const R=w.subscribeModal(D=>{D.open===!1&&(r?.(),R())})}const _=await Promise.race([E(),new Promise((R,D)=>{p?.aborted&&D(new Error("Session request aborted")),p?.addEventListener("abort",()=>{D(new Error("Session request aborted"))})})]);if(_==null)throw new Error("Session request failed");return _}catch(v){throw v instanceof Error&&qe({title:`${v.name} Error establishing WalletConnect session`,message:`
          ${v.message}
          uri: ${b}
        `,level:ft.error}),r(),v}finally{w?.closeModal()}}}function oQ(e){let{service:t,user:n}=e;const s=n?.services?.find(a=>a.type==="authn")?.provider||t.provider;return eQ({title:s?.name||"Mobile Wallet",message:Ru()?"Tap to view request in app":"Pending request on your mobile device",icon:s?.icon||tQ,onClick:Ru()&&t.uid?()=>Yb(t.uid):void 0,debounceDelay:t.type==="pre-authz"?500:0})}async function aQ(e){let{provider:t,externalProviderOrTopic:n}=e;if(!n){const a=await t;return a?{provider:a,isExternal:!1}:null}if(typeof n!="string"){const a=n.session?.topic;if(!a)throw new Error("Cannot resolve provider: UniversalProvider is not initialized");return Dh.setState({[a]:n}),{provider:n,isExternal:!0}}const r=n;if(r){let a=Dh.getState()[r];if(!a){let l,u;a=await new Promise((d,h)=>{l=Dh.subscribe(()=>{const p=Dh.getState()[r];p&&d(p)}),u=setTimeout(()=>{h(new Error(`Provider for external topic ${r} not found after 5 seconds`))},5e3)}).finally(()=>{clearTimeout(u),l()})}return{provider:a,isExternal:!0}}const s=await t;return s?{provider:s,isExternal:!1}:null}const cQ="wss://relay.walletconnect.com",lQ="debug";let eu=Promise.resolve(null);const uQ=async e=>{let{projectId:t,metadata:n}=e;fe(t!=null,"FCL Wallet Connect Error: WalletConnect projectId is required");try{return zZ.init({logger:lQ,relayUrl:cQ,projectId:t,metadata:n})}catch(r){throw r instanceof Error&&qe({title:`${r.name} fcl-wc Init Client`,message:r.message,level:ft.error}),r}},fQ=e=>{const{FclWcServicePlugin:t,providerPromise:n}=hQ(e);return T$.authn.update(),{FclWcServicePlugin:t,providerPromise:n}},hQ=e=>{if(typeof window>"u")throw new Error("FCL Wallet Connect Plugin can only be initialized in the browser");return eu=eu.catch(()=>null).then(n=>n||uQ({projectId:e.projectId,metadata:e.metadata})).catch(n=>{throw qe({title:"WalletConnect Client Initialization Error",message:n.message?n.message:n,level:ft.error}),n}),{FclWcServicePlugin:rQ(eu,e),providerPromise:eu}};async function wD(){return eu.then(e=>{if(!e)throw new Error("WalletConnect client not initialized");return e})}const vD="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",dQ=vD.length;function Wb(){let e="",t=32;for(;t--;)e+=vD[Math.random()*dQ|0];return e}const pQ=globalThis.AbortController||require("abort-controller");function gQ(e){const t=new pQ;return e?.aborted&&t.abort(),e?.addEventListener("abort",()=>t.abort()),t}let Cm=function(e){return e.NOTIFY_QRCODE_CONNECTING="notifyQrCodeConnecting",e.NOTIFY_QRCODE_CONNECTED="notifyQrCodeConnected",e.NOTIFY_QRCODE_ERROR="notifyQrCodeError",e}({}),pR=function(e){return e.REQUEST_WALLETCONNECT_QRCODE="requestWalletConnectQrCode",e.EXEC_SERVICE="execService",e}({});const gR="APPROVED",yQ=e=>{let{onExecResult:t,execStrategyOpts:n,execStrategyArgs:r,abortSignal:s}=e;return async a=>{let{service:l}=a;try{const u=await Td({...n,service:l,config:n.config,abortSignal:s},...r.slice(1));if((pi(u)?.status||gR)===gR)return t(u),null;throw new Error(u?.reason||"Service was declined")}catch(u){throw new Error(u?.message||"Service execution failed")}}},mQ=e=>{let{rpc:t,onExecResult:n,authnBody:r,abortSignal:s}=e;const a=bQ({rpc:t,authnBody:r});return async l=>{if(s.aborted)throw new Error("Handler has been terminated");const u=await wD(),{uri:d,approval:h}=await mD({provider:u});return a({uri:d,approval:h,onExecResult:n}),{uri:d}}};function bQ(e){let{rpc:t,authnBody:n}=e;return r=>{let{uri:s,approval:a,onExecResult:l}=r;setTimeout(async()=>{try{const u=await wD(),d=await a();t.notify(Cm.NOTIFY_QRCODE_CONNECTING,{uri:s});const h=await bD({method:li.FLOW_AUTHN,body:n,session:d,provider:u});t.notify(Cm.NOTIFY_QRCODE_CONNECTED,{uri:s}),l(h)}catch(u){t.notify(Cm.NOTIFY_QRCODE_ERROR,{uri:s,error:u?.message})}},0)}}function wQ(e){let{onExecResult:t,body:n,opts:r,args:s,abortSignal:a}=e;const l=new fP({notifications:[]});return l.on(pR.REQUEST_WALLETCONNECT_QRCODE,mQ({rpc:l,onExecResult:t,authnBody:n,abortSignal:a})),l.on(pR.EXEC_SERVICE,yQ({onExecResult:t,execStrategyOpts:r,execStrategyArgs:s,abortSignal:a})),{connect:l.connect.bind(l),receive:l.receive.bind(l)}}async function vQ(e){let{customRpc:t,opts:n,args:r,abortSignal:s}=e;const a={...n.config,client:{...n.config.client,discoveryRpcEnabled:!0}};return Td({...n,config:a,customRpc:t,abortSignal:s},...r.slice(1))}const yR="authn";async function EQ(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const[r]=t,{body:s,abortSignal:a,service:l}=r;if(l?.type!==yR)return console.error(`ERROR: Invalid service type for FCL Discovery execStrategyHook, expected "${yR}" but got "${l?.type}"`),Td(...t);const u=gQ(a);let d;const h=new Promise(async(p,y)=>{const b=wQ({onExecResult:p,body:s,opts:r,args:t,abortSignal:u.signal});d=vQ({customRpc:b,opts:r,args:t,abortSignal:u.signal}).then(p,y)});return await h.catch(()=>{}),await Promise.race([new Promise(p=>setTimeout(p,1e3)),d]).catch(()=>{}),u.abort(),h}const Ih="FCL_IFRAME",_Q=`
  position:fixed;
  top: 0px;
  right: 0px;
  bottom: 0px;
  left: 0px;
  height: 100%;
  width: 100vw;
  display:block;
  background:rgba(0,0,0,0.25);
  z-index: 2147483647;
  box-sizing: border-box;
  color-scheme: light;
`;function ED(e){fe(!document.getElementById(Ih),"Attempt at triggering multiple Frames",{src:e});const t=document.createElement("iframe");t.src=e,t.id=Ih,t.allow="usb *; hid *; clipboard-write",t.frameBorder="0",t.style.cssText=_Q,document.body.append(t);const n=()=>{document.getElementById(Ih)&&document.getElementById(Ih).remove()};return[t.contentWindow,n]}const SQ="FCL_POP";let Lr=null,mR=null;function AQ(e,t,n,r,s){const a=n.top.outerHeight/2+n.top.screenY-s/2,l=n.top.outerWidth/2+n.top.screenX-r/2,u=n.open(e,t,`toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width=${r}, height=${s}, top=${a}, left=${l}`);if(!u)throw new Error("Popup failed to open (was it blocked by a popup blocker?)");return u}function _D(e){return Lr==null||Lr?.closed?Lr=AQ(e,SQ,window,640,770):(mR!==e&&Lr.location.replace(e),Lr.focus()),mR=e,[Lr,()=>{Lr&&!Lr.closed&&Lr.close(),Lr=null}]}let Sr=null,bR=null;function SD(e){if(Sr==null||Sr?.closed){if(Sr=window.open(e,"_blank"),!Sr)throw new Error("Tab failed to open (was it blocked by the browser?)")}else bR!==e&&Sr.location.replace(e),Sr.focus();return bR=e,[Sr,()=>{Sr&&!Sr.closed&&Sr.close(),Sr=null}]}const RQ=()=>({"discovery.wallet.method.default":"IFRAME/RPC"}),go=()=>{};function OQ(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null)return{send:go,close:go};const n=t.onClose||go,r=t.onMessage||go,s=t.onReady||go,a=t.onResponse||go,l=t.onCustomRpc||go;let u,d;const h=Id({close:p,send:y,onReady:s,onResponse:a,onMessage:r,onCustomRpc:l,getSource:()=>u});return window.addEventListener("message",h),[u,d]=ED(Nu(e)),{send:y,close:p};function p(){try{window.removeEventListener("message",h),d(),n()}catch(b){console.error("Frame Close Error",b)}}function y(b){try{u.postMessage(JSON.parse(JSON.stringify(b||{})),"*")}catch(w){console.error("Frame Send Error",b,w)}}}const Lo="1.19.0";function xQ(e){let{service:t,body:n,config:r,customRpc:s,abortSignal:a,opts:l}=e;return new Promise((u,d)=>{const h=Wb(),p=l.includeOlderJsonRpcCall,{close:y}=OQ(t,{async onReady(b,w){let{send:v}=w;try{v({type:"FCL:VIEW:READY:RESPONSE",fclVersion:Lo,body:n,service:{params:t.params,data:t.data,type:t.type},config:r}),v({fclVersion:Lo,type:"FCL:FRAME:READY:RESPONSE",body:n,service:{params:t.params,data:t.data,type:t.type},config:r,deprecated:{message:"FCL:FRAME:READY:RESPONSE is deprecated and replaced with type: FCL:VIEW:READY:RESPONSE"}}),p&&v({jsonrpc:"2.0",id:h,method:"fcl:sign",params:[n,t.params],deprecated:{message:"jsonrpc is deprecated and replaced with type: FCL:VIEW:READY:RESPONSE"}}),s?.connect({send:E=>{v({type:"FCL:VIEW:CUSTOM_RPC",payload:E})}})}catch(E){throw E}},onResponse(b,w){let{close:v}=w;try{if(typeof b.data!="object")return;const E=pi(b.data);switch(E.status){case"APPROVED":u(E.data),v();break;case"DECLINED":d(`Declined: ${E.reason||"No reason supplied"}`),v();break;case"REDIRECT":u(E),v();break;default:d("Declined: No reason supplied"),v();break}}catch(E){throw console.error("execIframeRPC onResponse error",E),E}},onMessage(b,w){let{close:v}=w;try{if(typeof b.data!="object"||b.data.jsonrpc!=="2.0"||b.data.id!==h)return;const E=pi(b.data.result);switch(E.status){case"APPROVED":u(E.data),v();break;case"DECLINED":d(`Declined: ${E.reason||"No reason supplied"}`),v();break;case"REDIRECT":u(E),v();break;default:d("Declined: No reason supplied"),v();break}}catch(E){throw console.error("execIframeRPC onMessage error",E),E}},onClose(){d("Declined: Externally Halted")},onCustomRpc(b){s?.receive(b)}});a&&(a.aborted&&(d("Declined: Aborted"),y()),a.addEventListener("abort",()=>{d("Declined: Aborted"),y()}))})}const yo=()=>{};function TQ(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null)return{send:yo,close:yo};const n=t.onClose||yo,r=t.onMessage||yo,s=t.onReady||yo,a=t.onResponse||yo,l=t.onCustomRpc||yo;let u,d;const h=Id({close:y,send:b,onReady:s,onResponse:a,onMessage:r,onCustomRpc:l,getSource:()=>u});window.addEventListener("message",h),[u,d]=_D(Nu(e));const p=setInterval(function(){u&&u.closed&&y()},500);return{send:b,close:y};function y(){try{window.removeEventListener("message",h),clearInterval(p),d(),n()}catch(w){console.error("Popup Close Error",w)}}function b(w){try{u.postMessage(JSON.parse(JSON.stringify(w||{})),"*")}catch(v){console.error("Popup Send Error",w,v)}}}function DQ(e){let{service:t,body:n,config:r,abortSignal:s,customRpc:a,opts:l}=e;return new Promise((u,d)=>{const h=Wb(),{redir:p,includeOlderJsonRpcCall:y}=l,{close:b}=TQ(t,{customRpc:a,async onReady(w,v){let{send:E}=v;try{E({fclVersion:Lo,type:"FCL:VIEW:READY:RESPONSE",body:n,service:{params:t.params,data:t.data,type:t.type},config:r}),E({fclVersion:Lo,type:"FCL:FRAME:READY:RESPONSE",body:n,service:{params:t.params,data:t.data,type:t.type},config:r,deprecated:{message:"FCL:FRAME:READY:RESPONSE is deprecated and replaced with type: FCL:VIEW:READY:RESPONSE"}}),y&&E({jsonrpc:"2.0",id:h,method:"fcl:sign",params:[n,t.params]}),a?.connect({send:_=>{E({type:"FCL:VIEW:CUSTOM_RPC",payload:_})}})}catch(_){throw _}},onResponse(w,v){let{close:E}=v;try{if(typeof w.data!="object")return;const _=pi(w.data);switch(_.status){case"APPROVED":u(_.data),!p&&E();break;case"DECLINED":d(`Declined: ${_.reason||"No reason supplied"}`),E();break;case"REDIRECT":u(_),E();break;default:d("Declined: No reason supplied"),E();break}}catch(_){throw console.error("execPopRPC onResponse error",_),_}},onMessage(w,v){let{close:E}=v;try{if(typeof w.data!="object"||w.data.jsonrpc!=="2.0"||w.data.id!==h)return;const _=pi(w.data.result);switch(_.status){case"APPROVED":u(_.data),!p&&E();break;case"DECLINED":d(`Declined: ${_.reason||"No reason supplied"}`),E();break;case"REDIRECT":u(_),E();break;default:d("Declined: No reason supplied"),E();break}}catch(_){throw console.error("execPopRPC onMessage error",_),_}},onClose(){d("Declined: Externally Halted")},onCustomRpc(w){a?.receive(w)}});s&&(s.aborted&&(d("Declined: Aborted"),b()),s.addEventListener("abort",()=>{d("Declined: Aborted"),b()}))})}const mo=()=>{};function IQ(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null)return{send:mo,close:mo};const n=t.onClose||mo,r=t.onMessage||mo,s=t.onReady||mo,a=t.onResponse||mo,l=t.onCustomRpc||mo;let u,d;const h=Id({close:y,send:b,onReady:s,onResponse:a,onMessage:r,onCustomRpc:l,getSource:()=>u});window.addEventListener("message",h),[u,d]=SD(Nu(e));const p=setInterval(function(){u&&u.closed&&y()},500);return{send:b,close:y};function y(){try{window.removeEventListener("message",h),clearInterval(p),d(),n()}catch(w){console.error("Tab Close Error",w)}}function b(w){try{u.postMessage(JSON.parse(JSON.stringify(w||{})),"*")}catch(v){console.error("Tab Send Error",w,v)}}}function CQ(e){let{service:t,body:n,config:r,abortSignal:s,customRpc:a,opts:l}=e;return new Promise((u,d)=>{const h=Wb(),{redir:p,includeOlderJsonRpcCall:y}=l,{close:b}=IQ(t,{customRpc:a,async onReady(w,v){let{send:E}=v;try{E({fclVersion:Lo,type:"FCL:VIEW:READY:RESPONSE",body:n,service:{params:t.params,data:t.data,type:t.type},config:r}),E({fclVersion:Lo,type:"FCL:FRAME:READY:RESPONSE",body:n,service:{params:t.params,data:t.data,type:t.type},config:r,deprecated:{message:"FCL:FRAME:READY:RESPONSE is deprecated and replaced with type: FCL:VIEW:READY:RESPONSE"}}),y&&E({jsonrpc:"2.0",id:h,method:"fcl:sign",params:[n,t.params]}),a?.connect({send:_=>{E({type:"FCL:VIEW:CUSTOM_RPC",payload:_})}})}catch(_){throw _}},onResponse(w,v){let{close:E}=v;try{if(typeof w.data!="object")return;const _=pi(w.data);switch(_.status){case"APPROVED":u(_.data),!p&&E();break;case"DECLINED":d(`Declined: ${_.reason||"No reason supplied"}`),E();break;case"REDIRECT":u(_),E();break;default:d("Declined: No reason supplied"),E();break}}catch(_){throw console.error("execPopRPC onResponse error",_),_}},onMessage(w,v){let{close:E}=v;try{if(typeof w.data!="object"||w.data.jsonrpc!=="2.0"||w.data.id!==h)return;const _=pi(w.data.result);switch(_.status){case"APPROVED":u(_.data),!p&&E();break;case"DECLINED":d(`Declined: ${_.reason||"No reason supplied"}`),E();break;case"REDIRECT":u(_),E();break;default:d("Declined: No reason supplied"),E();break}}catch(_){throw console.error("execPopRPC onMessage error",_),_}},onClose(){d("Declined: Externally Halted")},onCustomRpc(w){a?.receive(w)}});s&&(s.aborted&&(b(),d("Declined: Aborted")),s.addEventListener("abort",()=>{b(),d("Declined: Aborted")}))})}const bo=()=>{};function NQ(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null)return{send:bo,close:bo};const n=t.onClose||bo,r=t.onMessage||bo,s=t.onReady||bo,a=t.onResponse||bo,l=t.onCustomRpc||bo,u=Id({close:d,send:h,onReady:s,onResponse:a,onMessage:r,onCustomRpc:l});return window.addEventListener("message",u),h({service:e}),{send:h,close:d};function d(){try{window.removeEventListener("message",u),n()}catch(p){console.error("Ext Close Error",p)}}function h(p){try{window&&window.postMessage(JSON.parse(JSON.stringify(p||{})),"*")}catch(y){console.error("Ext Send Error",p,y)}}}function UQ(e){let{service:t,body:n,config:r,abortSignal:s,customRpc:a,opts:l}=e;return new Promise((u,d)=>{const{close:h}=NQ(t,{async onReady(p,y){let{send:b}=y;try{b({fclVersion:Lo,type:"FCL:VIEW:READY:RESPONSE",body:n,service:{params:t.params,data:t.data,type:t.type},config:r}),a?.connect({send:w=>{b({type:"FCL:VIEW:CUSTOM_RPC",body:w})}})}catch(w){throw w}},onResponse(p,y){let{close:b}=y;try{if(typeof p.data!="object")return;const w=pi(p.data);switch(w.status){case"APPROVED":u(w.data),b();break;case"DECLINED":d(`Declined: ${w.reason||"No reason supplied"}`),b();break;case"REDIRECT":u(w),b();break;default:d("Declined: No reason supplied"),b();break}}catch(w){throw console.error("execExtRPC onResponse error",w),w}},onClose(){d("Declined: Externally Halted")},onCustomRpc(p){a?.receive(p)}});s&&(s.aborted&&(h(),d("Declined: Aborted")),s.addEventListener("abort",()=>{h(),d("Declined: Aborted")}))})}const wR=()=>{throw new Error("Strategy util has not been implemented on this platform")},BQ={"VIEW/IFRAME":ED,"VIEW/POP":_D,"VIEW/TAB":SD,"VIEW/MOBILE_BROWSER":wR,"VIEW/DEEPLINK":wR};async function vR(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{serviceEndpoint:()=>{}};const{serviceEndpoint:n}=t;try{return BQ[e.method](n(e),t)}catch(r){throw console.error("execLocal({service, opts = {}})",r,{service:e,opts:t}),r}}const $Q={[cr["HTTP/RPC"]]:Z2(vR),[cr["HTTP/POST"]]:Z2(vR),[cr["IFRAME/RPC"]]:xQ,[cr["POP/RPC"]]:DQ,[cr["TAB/RPC"]]:CQ,[cr["EXT/RPC"]]:UQ},PQ=()=>typeof window>"u",kQ=e=>{if(e==null)return null;try{return JSON.parse(e)}catch{return null}},MQ={can:!PQ()&&!!window.localStorage,get:async e=>kQ(localStorage.getItem(e)),put:async(e,t)=>localStorage.setItem(e,JSON.stringify(t))},LQ=typeof window>"u",jQ=e=>{const t=e["app.detail.title"],n=e["app.detail.icon"],r=e["app.detail.description"],s=e["app.detail.url"];return{name:t??document.title,description:r??"",url:s??window.location.origin,icons:n?[n]:[]}};function zQ(){if(LQ)return;let e=null,t=!1;Ae.subscribe(async n=>{const r={"walletconnect.projectId":n["walletconnect.projectId"],"walletconnect.disableNotifications":n["walletconnect.disableNotifications"],"app.detail.title":n["app.detail.title"],"app.detail.icon":n["app.detail.icon"],"app.detail.description":n["app.detail.description"],"app.detail.url":n["app.detail.url"]},s=r["walletconnect.projectId"],a=r["walletconnect.disableNotifications"],l=e;if(e=JSON.stringify(r,null,2),t){l!==e&&console.warn(`FCL WalletConnect Plugin has been already loaded with different configuration. It is not possible to change the configuration after the plugin has been loaded.

Previous configuration:
${l}

Current configuration:
${e}`);return}if(!!!s)return;if(fe(!!s,"FCL Configuration value for 'walletconnect.projectId' is required"),K2.getPlugins().has(gD)){t||console.warn("It seems like the FCL WalletConnect plugins has been already loaded manually. This is no longer necessary, please see the documentation for more information."),t=!0;return}t=!0;const{FclWcServicePlugin:d}=fQ({projectId:s,metadata:jQ(r),disableNotifications:a});K2.add([d])})}const qQ={execStrategy:EQ},Vi=dO({platform:"web",discovery:qQ,getStorageProvider:async()=>await Ae.get("fcl.storage")||MQ}),HQ=aP(Vi),FQ=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Vi().authenticate(e)},VQ=()=>Vi().unauthenticate();Vi().authorization;Ae(RQ());oO({coreStrategies:$Q});zQ();Ae().put("app.detail.title","MVP on Flow").put("app.detail.icon","/favicon.png").put("accessNode.api","https://rest-mainnet.onflow.org").put("discovery.wallet","https://fcl-discovery.onflow.org/authn").put("flow.network","mainnet");function GQ(){const[e,t]=le.useState({loggedIn:null});le.useEffect(()=>{Vi().subscribe(t)},[]);const n=()=>{FQ()},r=()=>{VQ()};return Q.jsxs(Q.Fragment,{children:[Q.jsx("nav",{className:"navbar navbar-expand-lg",children:Q.jsxs("div",{className:"container-fluid",children:[Q.jsx(vo,{className:"navbar-brand d-flex align-items-center",to:"/",children:Q.jsx("img",{src:"/favicon.png",alt:"MVP on Flow Logo",height:"40",className:"me-2"})}),Q.jsx("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNav",children:Q.jsx("span",{className:"navbar-toggler-icon"})}),Q.jsxs("div",{className:"collapse navbar-collapse",id:"navbarNav",children:[Q.jsxs("ul",{className:"navbar-nav me-auto mb-2 mb-lg-0",children:[Q.jsx("li",{className:"nav-item",children:Q.jsx(vo,{className:"nav-link",to:"/",children:"Home"})}),Q.jsx("li",{className:"nav-item",children:Q.jsx(vo,{className:"nav-link",to:"/swapfest",children:"Swapfest"})}),Q.jsx("li",{className:"nav-item",children:Q.jsx(vo,{className:"nav-link",to:"/treasury",children:"Treasury"})}),Q.jsx("li",{className:"nav-item",children:Q.jsx(vo,{className:"nav-link",to:"/vote",children:"Vote"})}),Q.jsx("li",{className:"nav-item",children:Q.jsx(vo,{className:"nav-link",to:"/fastbreak",children:"Fastbreak"})})]}),Q.jsx("div",{className:"d-flex align-items-center",children:e.loggedIn?Q.jsxs(Q.Fragment,{children:[Q.jsx("span",{className:"wallet-address me-2",children:e.addr}),Q.jsx("button",{className:"btn btn-outline-light btn-sm",onClick:r,children:"Disconnect"})]}):Q.jsx("button",{className:"btn btn-light btn-sm",onClick:n,children:"Connect Wallet"})})]})]})}),Q.jsx("div",{className:"container-fluid mt-4 flex-grow-1",children:Q.jsx(LC,{})}),Q.jsxs("div",{className:"footer mt-auto",children:[Q.jsx("p",{children:"This is a fan project and is not affiliated with NBA TopShot, Nikola Joki, or any official organization."}),Q.jsxs("div",{className:"d-flex justify-content-center align-items-center gap-3 mt-2",children:[Q.jsx("a",{href:"https://discord.gg/3p3ff9PHqW",target:"_blank","aria-label":"Discord",children:Q.jsx("i",{className:"bi bi-discord",style:{fontSize:"1.5rem"}})}),Q.jsx("a",{href:"https://x.com/petjokicshorses",target:"_blank","aria-label":"Twitter",children:Q.jsx("i",{className:"bi bi-twitter-x",style:{fontSize:"1.5rem"}})})]})]})]})}function KQ(){return Q.jsxs(Q.Fragment,{children:[Q.jsxs("div",{className:"hero",children:[Q.jsx("h1",{children:" MVP on Flow - Pet Jokic's Horses "}),Q.jsxs("p",{children:["MVP on Flow, also known as ",Q.jsx("strong",{children:"Pet Jokic's horses"}),", is a ",Q.jsx("strong",{children:"fan-powered project"})," celebrating Nikola Jokic and his NBA TopShot moments on the Flow blockchain."]}),Q.jsx("p",{children:"Join our Discord community for Jokic-themed fun, prediction contests, raffles, giveaways, and more!"}),Q.jsxs("p",{children:["Earn and use ",Q.jsx("strong",{children:"$MVP"})," tokens in community games, swap them for Jokic moments, trade them on Flow exchanges or stake them to earn rewards. Whether you're a collector or a fan, there's something for everyone."]}),Q.jsxs("a",{href:"https://discord.gg/3p3ff9PHqW",target:"_blank",rel:"noopener noreferrer",className:"btn btn-discord",children:[Q.jsx("i",{className:"bi bi-discord"})," Join Our Discord"]})]}),Q.jsx("div",{className:"card shadow mb-4",children:Q.jsxs("div",{className:"card-body",children:[Q.jsx("h2",{className:"card-title text-center mb-3",children:" $MVP Tokenomics"}),Q.jsx("p",{className:"card-text text-center",children:"Learn how $MVP works: swap Jokic moments, earn rewards, and power community events."}),Q.jsx("div",{className:"text-center mt-3",children:Q.jsx("img",{src:"/images/Tokenomics.png",alt:"MVP Tokenomics",className:"img-fluid rounded shadow"})})]})})]})}function YQ(){const[e,t]=le.useState(0),[n,r]=le.useState([]);return le.useEffect(()=>{fetch("https://pjh-gzerbpd3gecjhab5.westus-01.azurewebsites.net/api/leaderboard").then(s=>s.json()).then(s=>{t(s.prize_pool),r(s.leaderboard)})},[]),Q.jsx("div",{className:"container",children:Q.jsx("div",{className:"card shadow mb-4",children:Q.jsxs("div",{className:"card-body",children:[Q.jsx("h2",{className:"mb-4 text-center",children:" $MVP Swap Fest July 1st - 11th "}),Q.jsx("div",{className:"text-center mb-4",children:Q.jsx("img",{src:"/images/1-11-07-25.png",alt:"Swap Fest Rules",className:"img-fluid rounded shadow"})}),Q.jsxs("p",{className:"text-center text-muted mb-3",children:["Prize Pool: ",e," points"]}),Q.jsx("div",{className:"table-responsive",children:Q.jsxs("table",{className:"table table-striped table-bordered table-hover",children:[Q.jsx("thead",{children:Q.jsxs("tr",{children:[Q.jsx("th",{children:"#"}),Q.jsx("th",{children:"TopShot Username"}),Q.jsx("th",{children:"Points"}),Q.jsx("th",{children:"Prize"})]})}),Q.jsx("tbody",{children:n.map((s,a)=>Q.jsxs("tr",{children:[Q.jsx("td",{children:a+1}),Q.jsx("td",{children:s.username}),Q.jsx("td",{children:s.points}),Q.jsx("td",{children:s.prize})]},a))})]})})]})})})}function WQ(){const[e,t]=le.useState(null);return le.useEffect(()=>{fetch("https://pjh-gzerbpd3gecjhab5.westus-01.azurewebsites.net/api/treasury").then(n=>n.json()).then(n=>t(n))},[]),e?Q.jsx("div",{className:"container",children:Q.jsx("div",{className:"card shadow mb-4",children:Q.jsxs("div",{className:"card-body",children:[Q.jsx("h2",{className:"mb-3 text-center",children:" $MVP Treasury Overview"}),Q.jsx("p",{className:"text-center text-muted mb-2",children:"See the current state of the treasury and the $MVP token economy."}),Q.jsxs("p",{className:"text-center text-muted mb-4",children:["Last Updated: ",e.last_updated]}),Q.jsxs("div",{className:"row",children:[Q.jsx("div",{className:"col-md-6 mb-3",children:Q.jsx("div",{className:"card bg-light h-100",children:Q.jsxs("div",{className:"card-body",children:[Q.jsx("h5",{className:"fw-bold mb-3",children:" Tokens in the Wild"}),Q.jsx("p",{className:"display-6",children:e.tokens_in_wild}),Q.jsx("p",{className:"text-muted",children:"Total $MVP tokens released into circulation, not owned by the treasury."})]})})}),Q.jsx("div",{className:"col-md-6 mb-3",children:Q.jsx("div",{className:"card bg-light h-100",children:Q.jsxs("div",{className:"card-body",children:[Q.jsx("h5",{className:"fw-bold mb-3",children:" Treasury Holdings"}),Q.jsxs("ul",{className:"list-group list-group-flush",children:[Q.jsxs("li",{className:"list-group-item",children:["Common Moments: ",Q.jsx("strong",{children:e.common_count})]}),Q.jsxs("li",{className:"list-group-item",children:["Rare Moments: ",Q.jsx("strong",{children:e.rare_count})]}),Q.jsxs("li",{className:"list-group-item",children:["Top Shot Debut: ",Q.jsx("strong",{children:e.tsd_count})]}),Q.jsxs("li",{className:"list-group-item",children:["Legendary Moments: ",Q.jsx("strong",{children:e.lego_count})]})]})]})})}),Q.jsx("div",{className:"col-md-6 mb-3",children:Q.jsx("div",{className:"card bg-light h-100",children:Q.jsxs("div",{className:"card-body",children:[Q.jsx("h5",{className:"fw-bold mb-3",children:" Backed Supply"}),Q.jsx("p",{className:"display-6",children:e.backed_supply}),Q.jsxs("p",{className:"text-muted",children:["Calculated as:",Q.jsx("br",{}),"2x Common + 100x Rare + 500x TSD + 2000x Legendary"]})]})})}),Q.jsx("div",{className:"col-md-6 mb-3",children:Q.jsx("div",{className:"card bg-light h-100",children:Q.jsxs("div",{className:"card-body",children:[Q.jsx("h5",{className:"fw-bold mb-3",children:" Treasury Surplus"}),Q.jsx("p",{className:"display-6",children:e.surplus}),Q.jsx("p",{className:"text-muted",children:"Backed Supply minus Tokens in the Wild."})]})})})]})]})})}):Q.jsx("div",{className:"container",children:Q.jsx("p",{children:"Loading..."})})}function XQ(){const[e,t]=le.useState(!1),n=le.useRef(null),r=le.useRef(null),s=()=>{t(!0)},a=l=>{const u=Math.floor(Math.random()*200)-100,d=Math.floor(Math.random()*200)-100;l.current.style.transform=`translate(${u}px, ${d}px)`};return Q.jsx("div",{className:"container",children:Q.jsx("div",{className:"card shadow mb-4",children:Q.jsxs("div",{className:"card-body text-center",children:[Q.jsx("h2",{className:"mb-4",children:"Who is the only real $MVP of the past 5 seasons in the NBA?"}),Q.jsx("p",{className:"text-muted mb-4",children:"Result of this vote will decide which player's moments the project will collect in the following period."}),e?Q.jsxs("div",{id:"result-section",className:"mt-4",children:[Q.jsx("h3",{className:"mb-3",children:" Voting Results:"}),Q.jsxs("div",{className:"list-group w-50 mx-auto",children:[Q.jsxs("div",{className:"list-group-item d-flex justify-content-between",children:[Q.jsx("span",{children:"Joki"}),Q.jsx("span",{children:"100%"})]}),Q.jsxs("div",{className:"list-group-item d-flex justify-content-between",children:[Q.jsx("span",{children:"Embiid"}),Q.jsx("span",{children:"0%"})]}),Q.jsxs("div",{className:"list-group-item d-flex justify-content-between",children:[Q.jsx("span",{children:"SGA"}),Q.jsx("span",{children:"0%"})]})]})]}):Q.jsxs("div",{id:"vote-section",children:[Q.jsx("button",{className:"btn btn-success btn-lg mb-3",onClick:s,children:"Joki"}),Q.jsx("button",{ref:n,className:"btn btn-outline-secondary btn-lg mb-3",onMouseEnter:()=>a(n),children:"Embiid"}),Q.jsx("button",{ref:r,className:"btn btn-outline-secondary btn-lg mb-3",onMouseEnter:()=>a(r),children:"SGA"})]})]})})})}function ZQ(){const[e,t]=le.useState({loggedIn:null}),[n,r]=le.useState(""),[s,a]=le.useState(!1),[l,u]=le.useState([]),[d,h]=le.useState(null),[p,y]=le.useState(""),b="0x2459710b1d10aed0";le.useEffect(()=>{Vi().subscribe(t),w()},[]);const w=async()=>{try{const R=await(await fetch("/api/fastbreak/contests")).json();u(R),R.length>0&&h(R[0])}catch(_){console.error("Failed to load contests",_)}},v=_=>{const R=parseInt(_.target.value),D=l.find(I=>I.id===R);h(D)},E=async()=>{if(!e.loggedIn){r(" Please connect your wallet first.");return}if(!d){r(" Please select a contest.");return}if(!p.trim()){r(" Please enter your TopShot username.");return}try{a(!0),r("Waiting for wallet approval...");const _=await HQ({cadence:`
          import FungibleToken from 0xf233dcee88fe0abe
          import StorageRent from 0x707adbad1428c624
          import PetJokicsHorses from 0x6fd2465f3a22e34c

          transaction(amount: UFix64, recipient: Address) {
              let sentVault: @{FungibleToken.Vault}

              prepare(signer: auth(Storage, BorrowValue) &Account) {
                  let vaultRef = signer.storage.borrow<auth(FungibleToken.Withdraw) &PetJokicsHorses.Vault>(
                      from: /storage/PetJokicsHorsesVault
                  ) ?? panic("Could not borrow reference to the owner's Vault!")
                  self.sentVault <- vaultRef.withdraw(amount: amount)
              }

              execute {
                  let recipientAccount = getAccount(recipient)
                  let receiverRef = recipientAccount.capabilities.borrow<&{FungibleToken.Vault}>(
                      /public/PetJokicsHorsesReceiver
                  )!
                  receiverRef.deposit(from: <-self.sentVault)
                  StorageRent.tryRefill(recipient)
              }
          }
        `,args:(R,D)=>[R(String(d.buy_in_amount),D.UFix64),R(b,D.Address)],proposer:Vi().authorization,payer:Vi().authorization,authorizations:[Vi().authorization],limit:100});r(` Transaction submitted! ID: ${_}`),await Vo(_).onceSealed(),r(" Transaction Sealed! Registering your entry..."),await fetch(`/api/fastbreak/contest/${d.id}/entries`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({topshotUsernamePrediction:p,userWalletAddress:e.addr})}),r(" Entry submitted! Thank you for joining."),a(!1),y("")}catch(_){console.error(_),a(!1),r(` Error: ${_.message}`)}};return Q.jsxs("div",{className:"container",children:[Q.jsx("div",{className:"card shadow mb-4",children:Q.jsxs("div",{className:"card-body",children:[Q.jsx("h2",{className:"mb-4 text-center",children:"Fastbreak Contest Buy-In"}),e.loggedIn?Q.jsxs(Q.Fragment,{children:[Q.jsxs("p",{className:"text-muted text-center",children:["Connected as: ",Q.jsx("strong",{children:e.addr})]}),Q.jsxs("div",{className:"mb-3",children:[Q.jsx("label",{children:"Select Contest"}),Q.jsx("select",{className:"form-select",onChange:v,value:d?.id||"",children:l.map(_=>Q.jsxs("option",{value:_.id,children:[_.display_name||_.fastbreak_id,` (Buy-in: ${_.buy_in_amount} ${_.buy_in_currency})`]},_.id))})]}),Q.jsxs("div",{className:"mb-3",children:[Q.jsx("label",{children:"TopShot Username Prediction"}),Q.jsx("input",{type:"text",className:"form-control",value:p,onChange:_=>y(_.target.value),placeholder:"Enter Topshot username of your champion"})]}),Q.jsx("button",{className:"btn btn-primary btn-lg w-100",onClick:E,disabled:s,children:s?"Processing...":`Buy In for ${d?.buy_in_amount||""} ${d?.buy_in_currency||""}`})]}):Q.jsx("p",{className:"text-muted text-center",children:"Please connect your wallet using the top-right button."}),n&&Q.jsx("div",{className:"mt-3 text-center",children:Q.jsx("p",{children:n})})]})}),Q.jsx("div",{className:"card shadow mb-4",children:Q.jsxs("div",{className:"card-body",children:[Q.jsx("h3",{className:"card-title mb-3 text-center",children:"Fastbreak horse race"}),Q.jsx("p",{className:"mt-3 text-center",children:"Pick the top-ranked NBA Top Shot user in the NBA Fastbreak. Buy in, submit your pick before lock, and if your horse is the fastest, i.e. ranks better than everyone else's pick, you win the pot!"})]})})]})}function QQ(){return Q.jsx(fN,{children:Q.jsx(zC,{children:Q.jsxs(wo,{path:"/",element:Q.jsx(GQ,{}),children:[Q.jsx(wo,{index:!0,element:Q.jsx(KQ,{})}),Q.jsx(wo,{path:"swapfest",element:Q.jsx(YQ,{})}),Q.jsx(wo,{path:"treasury",element:Q.jsx(WQ,{})}),Q.jsx(wo,{path:"vote",element:Q.jsx(XQ,{})}),Q.jsx(wo,{path:"fastbreak",element:Q.jsx(ZQ,{})})]})})})}G8.createRoot(document.getElementById("root")).render(Q.jsx(le.StrictMode,{children:Q.jsx(QQ,{})}));export{C5 as H,gO as _,b_ as a,wu as b,nJ as c,R5 as d,OO as e,N5 as f,tJ as g,Qh as h,sJ as i,iJ as j,pd as k,rJ as r,xO as t};
