(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();var Fn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Qs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function $8(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var n=function r(){var s=!1;try{s=this instanceof r}catch{}return s?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var s=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return e[r]}})}),n}var km={exports:{}},Fl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var P2;function U8(){if(P2)return Fl;P2=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,s,a){var c=null;if(a!==void 0&&(c=""+a),s.key!==void 0&&(c=""+s.key),"key"in s){a={};for(var u in s)u!=="key"&&(a[u]=s[u])}else a=s;return s=a.ref,{$$typeof:e,type:r,key:c,ref:s!==void 0?s:null,props:a}}return Fl.Fragment=t,Fl.jsx=n,Fl.jsxs=n,Fl}var k2;function B8(){return k2||(k2=1,km.exports=U8()),km.exports}var j=B8(),Mm={exports:{}},Ne={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var M2;function P8(){if(M2)return Ne;M2=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),m=Symbol.iterator;function y(C){return C===null||typeof C!="object"?null:(C=m&&C[m]||C["@@iterator"],typeof C=="function"?C:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,E={};function S(C,V,ee){this.props=C,this.context=V,this.refs=E,this.updater=ee||v}S.prototype.isReactComponent={},S.prototype.setState=function(C,V){if(typeof C!="object"&&typeof C!="function"&&C!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,C,V,"setState")},S.prototype.forceUpdate=function(C){this.updater.enqueueForceUpdate(this,C,"forceUpdate")};function A(){}A.prototype=S.prototype;function I(C,V,ee){this.props=C,this.context=V,this.refs=E,this.updater=ee||v}var D=I.prototype=new A;D.constructor=I,w(D,S.prototype),D.isPureReactComponent=!0;var B=Array.isArray,$={H:null,A:null,T:null,S:null,V:null},N=Object.prototype.hasOwnProperty;function q(C,V,ee,se,te,pe){return ee=pe.ref,{$$typeof:e,type:C,key:V,ref:ee!==void 0?ee:null,props:pe}}function H(C,V){return q(C.type,V,void 0,void 0,void 0,C.props)}function k(C){return typeof C=="object"&&C!==null&&C.$$typeof===e}function K(C){var V={"=":"=0",":":"=2"};return"$"+C.replace(/[=:]/g,function(ee){return V[ee]})}var Y=/\/+/g;function W(C,V){return typeof C=="object"&&C!==null&&C.key!=null?K(""+C.key):V.toString(36)}function le(){}function re(C){switch(C.status){case"fulfilled":return C.value;case"rejected":throw C.reason;default:switch(typeof C.status=="string"?C.then(le,le):(C.status="pending",C.then(function(V){C.status==="pending"&&(C.status="fulfilled",C.value=V)},function(V){C.status==="pending"&&(C.status="rejected",C.reason=V)})),C.status){case"fulfilled":return C.value;case"rejected":throw C.reason}}throw C}function O(C,V,ee,se,te){var pe=typeof C;(pe==="undefined"||pe==="boolean")&&(C=null);var me=!1;if(C===null)me=!0;else switch(pe){case"bigint":case"string":case"number":me=!0;break;case"object":switch(C.$$typeof){case e:case t:me=!0;break;case p:return me=C._init,O(me(C._payload),V,ee,se,te)}}if(me)return te=te(C),me=se===""?"."+W(C,0):se,B(te)?(ee="",me!=null&&(ee=me.replace(Y,"$&/")+"/"),O(te,V,ee,"",function(xe){return xe})):te!=null&&(k(te)&&(te=H(te,ee+(te.key==null||C&&C.key===te.key?"":(""+te.key).replace(Y,"$&/")+"/")+me)),V.push(te)),1;me=0;var Te=se===""?".":se+":";if(B(C))for(var Ee=0;Ee<C.length;Ee++)se=C[Ee],pe=Te+W(se,Ee),me+=O(se,V,ee,pe,te);else if(Ee=y(C),typeof Ee=="function")for(C=Ee.call(C),Ee=0;!(se=C.next()).done;)se=se.value,pe=Te+W(se,Ee++),me+=O(se,V,ee,pe,te);else if(pe==="object"){if(typeof C.then=="function")return O(re(C),V,ee,se,te);throw V=String(C),Error("Objects are not valid as a React child (found: "+(V==="[object Object]"?"object with keys {"+Object.keys(C).join(", ")+"}":V)+"). If you meant to render a collection of children, use an array instead.")}return me}function R(C,V,ee){if(C==null)return C;var se=[],te=0;return O(C,se,"","",function(pe){return V.call(ee,pe,te++)}),se}function M(C){if(C._status===-1){var V=C._result;V=V(),V.then(function(ee){(C._status===0||C._status===-1)&&(C._status=1,C._result=ee)},function(ee){(C._status===0||C._status===-1)&&(C._status=2,C._result=ee)}),C._status===-1&&(C._status=0,C._result=V)}if(C._status===1)return C._result.default;throw C._result}var F=typeof reportError=="function"?reportError:function(C){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var V=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof C=="object"&&C!==null&&typeof C.message=="string"?String(C.message):String(C),error:C});if(!window.dispatchEvent(V))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",C);return}console.error(C)};function X(){}return Ne.Children={map:R,forEach:function(C,V,ee){R(C,function(){V.apply(this,arguments)},ee)},count:function(C){var V=0;return R(C,function(){V++}),V},toArray:function(C){return R(C,function(V){return V})||[]},only:function(C){if(!k(C))throw Error("React.Children.only expected to receive a single React element child.");return C}},Ne.Component=S,Ne.Fragment=n,Ne.Profiler=s,Ne.PureComponent=I,Ne.StrictMode=r,Ne.Suspense=d,Ne.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=$,Ne.__COMPILER_RUNTIME={__proto__:null,c:function(C){return $.H.useMemoCache(C)}},Ne.cache=function(C){return function(){return C.apply(null,arguments)}},Ne.cloneElement=function(C,V,ee){if(C==null)throw Error("The argument must be a React element, but you passed "+C+".");var se=w({},C.props),te=C.key,pe=void 0;if(V!=null)for(me in V.ref!==void 0&&(pe=void 0),V.key!==void 0&&(te=""+V.key),V)!N.call(V,me)||me==="key"||me==="__self"||me==="__source"||me==="ref"&&V.ref===void 0||(se[me]=V[me]);var me=arguments.length-2;if(me===1)se.children=ee;else if(1<me){for(var Te=Array(me),Ee=0;Ee<me;Ee++)Te[Ee]=arguments[Ee+2];se.children=Te}return q(C.type,te,void 0,void 0,pe,se)},Ne.createContext=function(C){return C={$$typeof:c,_currentValue:C,_currentValue2:C,_threadCount:0,Provider:null,Consumer:null},C.Provider=C,C.Consumer={$$typeof:a,_context:C},C},Ne.createElement=function(C,V,ee){var se,te={},pe=null;if(V!=null)for(se in V.key!==void 0&&(pe=""+V.key),V)N.call(V,se)&&se!=="key"&&se!=="__self"&&se!=="__source"&&(te[se]=V[se]);var me=arguments.length-2;if(me===1)te.children=ee;else if(1<me){for(var Te=Array(me),Ee=0;Ee<me;Ee++)Te[Ee]=arguments[Ee+2];te.children=Te}if(C&&C.defaultProps)for(se in me=C.defaultProps,me)te[se]===void 0&&(te[se]=me[se]);return q(C,pe,void 0,void 0,null,te)},Ne.createRef=function(){return{current:null}},Ne.forwardRef=function(C){return{$$typeof:u,render:C}},Ne.isValidElement=k,Ne.lazy=function(C){return{$$typeof:p,_payload:{_status:-1,_result:C},_init:M}},Ne.memo=function(C,V){return{$$typeof:h,type:C,compare:V===void 0?null:V}},Ne.startTransition=function(C){var V=$.T,ee={};$.T=ee;try{var se=C(),te=$.S;te!==null&&te(ee,se),typeof se=="object"&&se!==null&&typeof se.then=="function"&&se.then(X,F)}catch(pe){F(pe)}finally{$.T=V}},Ne.unstable_useCacheRefresh=function(){return $.H.useCacheRefresh()},Ne.use=function(C){return $.H.use(C)},Ne.useActionState=function(C,V,ee){return $.H.useActionState(C,V,ee)},Ne.useCallback=function(C,V){return $.H.useCallback(C,V)},Ne.useContext=function(C){return $.H.useContext(C)},Ne.useDebugValue=function(){},Ne.useDeferredValue=function(C,V){return $.H.useDeferredValue(C,V)},Ne.useEffect=function(C,V,ee){var se=$.H;if(typeof ee=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return se.useEffect(C,V)},Ne.useId=function(){return $.H.useId()},Ne.useImperativeHandle=function(C,V,ee){return $.H.useImperativeHandle(C,V,ee)},Ne.useInsertionEffect=function(C,V){return $.H.useInsertionEffect(C,V)},Ne.useLayoutEffect=function(C,V){return $.H.useLayoutEffect(C,V)},Ne.useMemo=function(C,V){return $.H.useMemo(C,V)},Ne.useOptimistic=function(C,V){return $.H.useOptimistic(C,V)},Ne.useReducer=function(C,V,ee){return $.H.useReducer(C,V,ee)},Ne.useRef=function(C){return $.H.useRef(C)},Ne.useState=function(C){return $.H.useState(C)},Ne.useSyncExternalStore=function(C,V,ee){return $.H.useSyncExternalStore(C,V,ee)},Ne.useTransition=function(){return $.H.useTransition()},Ne.version="19.1.0",Ne}var L2;function Ib(){return L2||(L2=1,Mm.exports=P8()),Mm.exports}var z=Ib();const Xi=Qs(z);var Lm={exports:{}},Vl={},jm={exports:{}},zm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var j2;function k8(){return j2||(j2=1,function(e){function t(R,M){var F=R.length;R.push(M);e:for(;0<F;){var X=F-1>>>1,C=R[X];if(0<s(C,M))R[X]=M,R[F]=C,F=X;else break e}}function n(R){return R.length===0?null:R[0]}function r(R){if(R.length===0)return null;var M=R[0],F=R.pop();if(F!==M){R[0]=F;e:for(var X=0,C=R.length,V=C>>>1;X<V;){var ee=2*(X+1)-1,se=R[ee],te=ee+1,pe=R[te];if(0>s(se,F))te<C&&0>s(pe,se)?(R[X]=pe,R[te]=F,X=te):(R[X]=se,R[ee]=F,X=ee);else if(te<C&&0>s(pe,F))R[X]=pe,R[te]=F,X=te;else break e}}return M}function s(R,M){var F=R.sortIndex-M.sortIndex;return F!==0?F:R.id-M.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var c=Date,u=c.now();e.unstable_now=function(){return c.now()-u}}var d=[],h=[],p=1,m=null,y=3,v=!1,w=!1,E=!1,S=!1,A=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;function B(R){for(var M=n(h);M!==null;){if(M.callback===null)r(h);else if(M.startTime<=R)r(h),M.sortIndex=M.expirationTime,t(d,M);else break;M=n(h)}}function $(R){if(E=!1,B(R),!w)if(n(d)!==null)w=!0,N||(N=!0,W());else{var M=n(h);M!==null&&O($,M.startTime-R)}}var N=!1,q=-1,H=5,k=-1;function K(){return S?!0:!(e.unstable_now()-k<H)}function Y(){if(S=!1,N){var R=e.unstable_now();k=R;var M=!0;try{e:{w=!1,E&&(E=!1,I(q),q=-1),v=!0;var F=y;try{t:{for(B(R),m=n(d);m!==null&&!(m.expirationTime>R&&K());){var X=m.callback;if(typeof X=="function"){m.callback=null,y=m.priorityLevel;var C=X(m.expirationTime<=R);if(R=e.unstable_now(),typeof C=="function"){m.callback=C,B(R),M=!0;break t}m===n(d)&&r(d),B(R)}else r(d);m=n(d)}if(m!==null)M=!0;else{var V=n(h);V!==null&&O($,V.startTime-R),M=!1}}break e}finally{m=null,y=F,v=!1}M=void 0}}finally{M?W():N=!1}}}var W;if(typeof D=="function")W=function(){D(Y)};else if(typeof MessageChannel<"u"){var le=new MessageChannel,re=le.port2;le.port1.onmessage=Y,W=function(){re.postMessage(null)}}else W=function(){A(Y,0)};function O(R,M){q=A(function(){R(e.unstable_now())},M)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(R){R.callback=null},e.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<R?Math.floor(1e3/R):5},e.unstable_getCurrentPriorityLevel=function(){return y},e.unstable_next=function(R){switch(y){case 1:case 2:case 3:var M=3;break;default:M=y}var F=y;y=M;try{return R()}finally{y=F}},e.unstable_requestPaint=function(){S=!0},e.unstable_runWithPriority=function(R,M){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var F=y;y=R;try{return M()}finally{y=F}},e.unstable_scheduleCallback=function(R,M,F){var X=e.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?X+F:X):F=X,R){case 1:var C=-1;break;case 2:C=250;break;case 5:C=1073741823;break;case 4:C=1e4;break;default:C=5e3}return C=F+C,R={id:p++,callback:M,priorityLevel:R,startTime:F,expirationTime:C,sortIndex:-1},F>X?(R.sortIndex=F,t(h,R),n(d)===null&&R===n(h)&&(E?(I(q),q=-1):E=!0,O($,F-X))):(R.sortIndex=C,t(d,R),w||v||(w=!0,N||(N=!0,W()))),R},e.unstable_shouldYield=K,e.unstable_wrapCallback=function(R){var M=y;return function(){var F=y;y=M;try{return R.apply(this,arguments)}finally{y=F}}}}(zm)),zm}var z2;function M8(){return z2||(z2=1,jm.exports=k8()),jm.exports}var qm={exports:{}},vn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var q2;function L8(){if(q2)return vn;q2=1;var e=Ib();function t(d){var h="https://react.dev/errors/"+d;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)h+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+d+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},s=Symbol.for("react.portal");function a(d,h,p){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:m==null?null:""+m,children:d,containerInfo:h,implementation:p}}var c=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(d,h){if(d==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return vn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,vn.createPortal=function(d,h){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(t(299));return a(d,h,null,p)},vn.flushSync=function(d){var h=c.T,p=r.p;try{if(c.T=null,r.p=2,d)return d()}finally{c.T=h,r.p=p,r.d.f()}},vn.preconnect=function(d,h){typeof d=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,r.d.C(d,h))},vn.prefetchDNS=function(d){typeof d=="string"&&r.d.D(d)},vn.preinit=function(d,h){if(typeof d=="string"&&h&&typeof h.as=="string"){var p=h.as,m=u(p,h.crossOrigin),y=typeof h.integrity=="string"?h.integrity:void 0,v=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;p==="style"?r.d.S(d,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:m,integrity:y,fetchPriority:v}):p==="script"&&r.d.X(d,{crossOrigin:m,integrity:y,fetchPriority:v,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},vn.preinitModule=function(d,h){if(typeof d=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var p=u(h.as,h.crossOrigin);r.d.M(d,{crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&r.d.M(d)},vn.preload=function(d,h){if(typeof d=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var p=h.as,m=u(p,h.crossOrigin);r.d.L(d,p,{crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},vn.preloadModule=function(d,h){if(typeof d=="string")if(h){var p=u(h.as,h.crossOrigin);r.d.m(d,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else r.d.m(d)},vn.requestFormReset=function(d){r.d.r(d)},vn.unstable_batchedUpdates=function(d,h){return d(h)},vn.useFormState=function(d,h,p){return c.H.useFormState(d,h,p)},vn.useFormStatus=function(){return c.H.useHostTransitionStatus()},vn.version="19.1.0",vn}var H2;function UR(){if(H2)return qm.exports;H2=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),qm.exports=L8(),qm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F2;function j8(){if(F2)return Vl;F2=1;var e=M8(),t=Ib(),n=UR();function r(i){var o="https://react.dev/errors/"+i;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)o+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function a(i){var o=i,l=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,(o.flags&4098)!==0&&(l=o.return),i=o.return;while(i)}return o.tag===3?l:null}function c(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function u(i){if(a(i)!==i)throw Error(r(188))}function d(i){var o=i.alternate;if(!o){if(o=a(i),o===null)throw Error(r(188));return o!==i?null:i}for(var l=i,f=o;;){var g=l.return;if(g===null)break;var b=g.alternate;if(b===null){if(f=g.return,f!==null){l=f;continue}break}if(g.child===b.child){for(b=g.child;b;){if(b===l)return u(g),i;if(b===f)return u(g),o;b=b.sibling}throw Error(r(188))}if(l.return!==f.return)l=g,f=b;else{for(var T=!1,P=g.child;P;){if(P===l){T=!0,l=g,f=b;break}if(P===f){T=!0,f=g,l=b;break}P=P.sibling}if(!T){for(P=b.child;P;){if(P===l){T=!0,l=b,f=g;break}if(P===f){T=!0,f=b,l=g;break}P=P.sibling}if(!T)throw Error(r(189))}}if(l.alternate!==f)throw Error(r(190))}if(l.tag!==3)throw Error(r(188));return l.stateNode.current===l?i:o}function h(i){var o=i.tag;if(o===5||o===26||o===27||o===6)return i;for(i=i.child;i!==null;){if(o=h(i),o!==null)return o;i=i.sibling}return null}var p=Object.assign,m=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),v=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),A=Symbol.for("react.provider"),I=Symbol.for("react.consumer"),D=Symbol.for("react.context"),B=Symbol.for("react.forward_ref"),$=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),q=Symbol.for("react.memo"),H=Symbol.for("react.lazy"),k=Symbol.for("react.activity"),K=Symbol.for("react.memo_cache_sentinel"),Y=Symbol.iterator;function W(i){return i===null||typeof i!="object"?null:(i=Y&&i[Y]||i["@@iterator"],typeof i=="function"?i:null)}var le=Symbol.for("react.client.reference");function re(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===le?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case w:return"Fragment";case S:return"Profiler";case E:return"StrictMode";case $:return"Suspense";case N:return"SuspenseList";case k:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case v:return"Portal";case D:return(i.displayName||"Context")+".Provider";case I:return(i._context.displayName||"Context")+".Consumer";case B:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case q:return o=i.displayName||null,o!==null?o:re(i.type)||"Memo";case H:o=i._payload,i=i._init;try{return re(i(o))}catch{}}return null}var O=Array.isArray,R=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,M=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,F={pending:!1,data:null,method:null,action:null},X=[],C=-1;function V(i){return{current:i}}function ee(i){0>C||(i.current=X[C],X[C]=null,C--)}function se(i,o){C++,X[C]=i.current,i.current=o}var te=V(null),pe=V(null),me=V(null),Te=V(null);function Ee(i,o){switch(se(me,o),se(pe,i),se(te,null),o.nodeType){case 9:case 11:i=(i=o.documentElement)&&(i=i.namespaceURI)?u2(i):0;break;default:if(i=o.tagName,o=o.namespaceURI)o=u2(o),i=f2(o,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}ee(te),se(te,i)}function xe(){ee(te),ee(pe),ee(me)}function He(i){i.memoizedState!==null&&se(Te,i);var o=te.current,l=f2(o,i.type);o!==l&&(se(pe,i),se(te,l))}function pt(i){pe.current===i&&(ee(te),ee(pe)),Te.current===i&&(ee(Te),Ll._currentValue=F)}var on=Object.prototype.hasOwnProperty,qt=e.unstable_scheduleCallback,Dt=e.unstable_cancelCallback,Ze=e.unstable_shouldYield,cs=e.unstable_requestPaint,$t=e.unstable_now,Yc=e.unstable_getCurrentPriorityLevel,no=e.unstable_ImmediatePriority,ls=e.unstable_UserBlockingPriority,Qn=e.unstable_NormalPriority,Rn=e.unstable_LowPriority,Si=e.unstable_IdlePriority,la=e.log,Jn=e.unstable_setDisableYieldValue,Xr=null,U=null;function _(i){if(typeof la=="function"&&Jn(i),U&&typeof U.setStrictMode=="function")try{U.setStrictMode(Xr,i)}catch{}}var x=Math.clz32?Math.clz32:ce,L=Math.log,Q=Math.LN2;function ce(i){return i>>>=0,i===0?32:31-(L(i)/Q|0)|0}var de=256,Ce=4194304;function We(i){var o=i&42;if(o!==0)return o;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function Qe(i,o,l){var f=i.pendingLanes;if(f===0)return 0;var g=0,b=i.suspendedLanes,T=i.pingedLanes;i=i.warmLanes;var P=f&134217727;return P!==0?(f=P&~b,f!==0?g=We(f):(T&=P,T!==0?g=We(T):l||(l=P&~i,l!==0&&(g=We(l))))):(P=f&~b,P!==0?g=We(P):T!==0?g=We(T):l||(l=f&~i,l!==0&&(g=We(l)))),g===0?0:o!==0&&o!==g&&(o&b)===0&&(b=g&-g,l=o&-o,b>=l||b===32&&(l&4194048)!==0)?o:g}function it(i,o){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&o)===0}function Je(i,o){switch(i){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Kw(){var i=de;return de<<=1,(de&4194048)===0&&(de=256),i}function Yw(){var i=Ce;return Ce<<=1,(Ce&62914560)===0&&(Ce=4194304),i}function Rp(i){for(var o=[],l=0;31>l;l++)o.push(i);return o}function Wc(i,o){i.pendingLanes|=o,o!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function EC(i,o,l,f,g,b){var T=i.pendingLanes;i.pendingLanes=l,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=l,i.entangledLanes&=l,i.errorRecoveryDisabledLanes&=l,i.shellSuspendCounter=0;var P=i.entanglements,G=i.expirationTimes,ie=i.hiddenUpdates;for(l=T&~l;0<l;){var ue=31-x(l),ge=1<<ue;P[ue]=0,G[ue]=-1;var oe=ie[ue];if(oe!==null)for(ie[ue]=null,ue=0;ue<oe.length;ue++){var ae=oe[ue];ae!==null&&(ae.lane&=-536870913)}l&=~ge}f!==0&&Ww(i,f,0),b!==0&&g===0&&i.tag!==0&&(i.suspendedLanes|=b&~(T&~o))}function Ww(i,o,l){i.pendingLanes|=o,i.suspendedLanes&=~o;var f=31-x(o);i.entangledLanes|=o,i.entanglements[f]=i.entanglements[f]|1073741824|l&4194090}function Xw(i,o){var l=i.entangledLanes|=o;for(i=i.entanglements;l;){var f=31-x(l),g=1<<f;g&o|i[f]&o&&(i[f]|=o),l&=~g}}function Op(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Tp(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function Zw(){var i=M.p;return i!==0?i:(i=window.event,i===void 0?32:I2(i.type))}function SC(i,o){var l=M.p;try{return M.p=i,o()}finally{M.p=l}}var us=Math.random().toString(36).slice(2),bn="__reactFiber$"+us,Nn="__reactProps$"+us,ua="__reactContainer$"+us,Dp="__reactEvents$"+us,_C="__reactListeners$"+us,AC="__reactHandles$"+us,Qw="__reactResources$"+us,Xc="__reactMarker$"+us;function Ip(i){delete i[bn],delete i[Nn],delete i[Dp],delete i[_C],delete i[AC]}function fa(i){var o=i[bn];if(o)return o;for(var l=i.parentNode;l;){if(o=l[ua]||l[bn]){if(l=o.alternate,o.child!==null||l!==null&&l.child!==null)for(i=g2(i);i!==null;){if(l=i[bn])return l;i=g2(i)}return o}i=l,l=i.parentNode}return null}function da(i){if(i=i[bn]||i[ua]){var o=i.tag;if(o===5||o===6||o===13||o===26||o===27||o===3)return i}return null}function Zc(i){var o=i.tag;if(o===5||o===26||o===27||o===6)return i.stateNode;throw Error(r(33))}function ha(i){var o=i[Qw];return o||(o=i[Qw]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function Wt(i){i[Xc]=!0}var Jw=new Set,ev={};function ro(i,o){pa(i,o),pa(i+"Capture",o)}function pa(i,o){for(ev[i]=o,i=0;i<o.length;i++)Jw.add(o[i])}var xC=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),tv={},nv={};function RC(i){return on.call(nv,i)?!0:on.call(tv,i)?!1:xC.test(i)?nv[i]=!0:(tv[i]=!0,!1)}function df(i,o,l){if(RC(o))if(l===null)i.removeAttribute(o);else{switch(typeof l){case"undefined":case"function":case"symbol":i.removeAttribute(o);return;case"boolean":var f=o.toLowerCase().slice(0,5);if(f!=="data-"&&f!=="aria-"){i.removeAttribute(o);return}}i.setAttribute(o,""+l)}}function hf(i,o,l){if(l===null)i.removeAttribute(o);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(o);return}i.setAttribute(o,""+l)}}function _i(i,o,l,f){if(f===null)i.removeAttribute(l);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(l);return}i.setAttributeNS(o,l,""+f)}}var Cp,rv;function ga(i){if(Cp===void 0)try{throw Error()}catch(l){var o=l.stack.trim().match(/\n( *(at )?)/);Cp=o&&o[1]||"",rv=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Cp+i+rv}var Np=!1;function $p(i,o){if(!i||Np)return"";Np=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var f={DetermineComponentFrameRoot:function(){try{if(o){var ge=function(){throw Error()};if(Object.defineProperty(ge.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ge,[])}catch(ae){var oe=ae}Reflect.construct(i,[],ge)}else{try{ge.call()}catch(ae){oe=ae}i.call(ge.prototype)}}else{try{throw Error()}catch(ae){oe=ae}(ge=i())&&typeof ge.catch=="function"&&ge.catch(function(){})}}catch(ae){if(ae&&oe&&typeof ae.stack=="string")return[ae.stack,oe.stack]}return[null,null]}};f.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(f.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(f.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var b=f.DetermineComponentFrameRoot(),T=b[0],P=b[1];if(T&&P){var G=T.split(`
`),ie=P.split(`
`);for(g=f=0;f<G.length&&!G[f].includes("DetermineComponentFrameRoot");)f++;for(;g<ie.length&&!ie[g].includes("DetermineComponentFrameRoot");)g++;if(f===G.length||g===ie.length)for(f=G.length-1,g=ie.length-1;1<=f&&0<=g&&G[f]!==ie[g];)g--;for(;1<=f&&0<=g;f--,g--)if(G[f]!==ie[g]){if(f!==1||g!==1)do if(f--,g--,0>g||G[f]!==ie[g]){var ue=`
`+G[f].replace(" at new "," at ");return i.displayName&&ue.includes("<anonymous>")&&(ue=ue.replace("<anonymous>",i.displayName)),ue}while(1<=f&&0<=g);break}}}finally{Np=!1,Error.prepareStackTrace=l}return(l=i?i.displayName||i.name:"")?ga(l):""}function OC(i){switch(i.tag){case 26:case 27:case 5:return ga(i.type);case 16:return ga("Lazy");case 13:return ga("Suspense");case 19:return ga("SuspenseList");case 0:case 15:return $p(i.type,!1);case 11:return $p(i.type.render,!1);case 1:return $p(i.type,!0);case 31:return ga("Activity");default:return""}}function iv(i){try{var o="";do o+=OC(i),i=i.return;while(i);return o}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}function gr(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function sv(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function TC(i){var o=sv(i)?"checked":"value",l=Object.getOwnPropertyDescriptor(i.constructor.prototype,o),f=""+i[o];if(!i.hasOwnProperty(o)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var g=l.get,b=l.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return g.call(this)},set:function(T){f=""+T,b.call(this,T)}}),Object.defineProperty(i,o,{enumerable:l.enumerable}),{getValue:function(){return f},setValue:function(T){f=""+T},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function pf(i){i._valueTracker||(i._valueTracker=TC(i))}function ov(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var l=o.getValue(),f="";return i&&(f=sv(i)?i.checked?"true":"false":i.value),i=f,i!==l?(o.setValue(i),!0):!1}function gf(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var DC=/[\n"\\]/g;function mr(i){return i.replace(DC,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function Up(i,o,l,f,g,b,T,P){i.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?i.type=T:i.removeAttribute("type"),o!=null?T==="number"?(o===0&&i.value===""||i.value!=o)&&(i.value=""+gr(o)):i.value!==""+gr(o)&&(i.value=""+gr(o)):T!=="submit"&&T!=="reset"||i.removeAttribute("value"),o!=null?Bp(i,T,gr(o)):l!=null?Bp(i,T,gr(l)):f!=null&&i.removeAttribute("value"),g==null&&b!=null&&(i.defaultChecked=!!b),g!=null&&(i.checked=g&&typeof g!="function"&&typeof g!="symbol"),P!=null&&typeof P!="function"&&typeof P!="symbol"&&typeof P!="boolean"?i.name=""+gr(P):i.removeAttribute("name")}function av(i,o,l,f,g,b,T,P){if(b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(i.type=b),o!=null||l!=null){if(!(b!=="submit"&&b!=="reset"||o!=null))return;l=l!=null?""+gr(l):"",o=o!=null?""+gr(o):l,P||o===i.value||(i.value=o),i.defaultValue=o}f=f??g,f=typeof f!="function"&&typeof f!="symbol"&&!!f,i.checked=P?i.checked:!!f,i.defaultChecked=!!f,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(i.name=T)}function Bp(i,o,l){o==="number"&&gf(i.ownerDocument)===i||i.defaultValue===""+l||(i.defaultValue=""+l)}function ma(i,o,l,f){if(i=i.options,o){o={};for(var g=0;g<l.length;g++)o["$"+l[g]]=!0;for(l=0;l<i.length;l++)g=o.hasOwnProperty("$"+i[l].value),i[l].selected!==g&&(i[l].selected=g),g&&f&&(i[l].defaultSelected=!0)}else{for(l=""+gr(l),o=null,g=0;g<i.length;g++){if(i[g].value===l){i[g].selected=!0,f&&(i[g].defaultSelected=!0);return}o!==null||i[g].disabled||(o=i[g])}o!==null&&(o.selected=!0)}}function cv(i,o,l){if(o!=null&&(o=""+gr(o),o!==i.value&&(i.value=o),l==null)){i.defaultValue!==o&&(i.defaultValue=o);return}i.defaultValue=l!=null?""+gr(l):""}function lv(i,o,l,f){if(o==null){if(f!=null){if(l!=null)throw Error(r(92));if(O(f)){if(1<f.length)throw Error(r(93));f=f[0]}l=f}l==null&&(l=""),o=l}l=gr(o),i.defaultValue=l,f=i.textContent,f===l&&f!==""&&f!==null&&(i.value=f)}function ya(i,o){if(o){var l=i.firstChild;if(l&&l===i.lastChild&&l.nodeType===3){l.nodeValue=o;return}}i.textContent=o}var IC=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function uv(i,o,l){var f=o.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?f?i.setProperty(o,""):o==="float"?i.cssFloat="":i[o]="":f?i.setProperty(o,l):typeof l!="number"||l===0||IC.has(o)?o==="float"?i.cssFloat=l:i[o]=(""+l).trim():i[o]=l+"px"}function fv(i,o,l){if(o!=null&&typeof o!="object")throw Error(r(62));if(i=i.style,l!=null){for(var f in l)!l.hasOwnProperty(f)||o!=null&&o.hasOwnProperty(f)||(f.indexOf("--")===0?i.setProperty(f,""):f==="float"?i.cssFloat="":i[f]="");for(var g in o)f=o[g],o.hasOwnProperty(g)&&l[g]!==f&&uv(i,g,f)}else for(var b in o)o.hasOwnProperty(b)&&uv(i,b,o[b])}function Pp(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var CC=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),NC=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function mf(i){return NC.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}var kp=null;function Mp(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var ba=null,wa=null;function dv(i){var o=da(i);if(o&&(i=o.stateNode)){var l=i[Nn]||null;e:switch(i=o.stateNode,o.type){case"input":if(Up(i,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),o=l.name,l.type==="radio"&&o!=null){for(l=i;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+mr(""+o)+'"][type="radio"]'),o=0;o<l.length;o++){var f=l[o];if(f!==i&&f.form===i.form){var g=f[Nn]||null;if(!g)throw Error(r(90));Up(f,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(o=0;o<l.length;o++)f=l[o],f.form===i.form&&ov(f)}break e;case"textarea":cv(i,l.value,l.defaultValue);break e;case"select":o=l.value,o!=null&&ma(i,!!l.multiple,o,!1)}}}var Lp=!1;function hv(i,o,l){if(Lp)return i(o,l);Lp=!0;try{var f=i(o);return f}finally{if(Lp=!1,(ba!==null||wa!==null)&&(td(),ba&&(o=ba,i=wa,wa=ba=null,dv(o),i)))for(o=0;o<i.length;o++)dv(i[o])}}function Qc(i,o){var l=i.stateNode;if(l===null)return null;var f=l[Nn]||null;if(f===null)return null;l=f[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(i=i.type,f=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!f;break e;default:i=!1}if(i)return null;if(l&&typeof l!="function")throw Error(r(231,o,typeof l));return l}var Ai=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),jp=!1;if(Ai)try{var Jc={};Object.defineProperty(Jc,"passive",{get:function(){jp=!0}}),window.addEventListener("test",Jc,Jc),window.removeEventListener("test",Jc,Jc)}catch{jp=!1}var fs=null,zp=null,yf=null;function pv(){if(yf)return yf;var i,o=zp,l=o.length,f,g="value"in fs?fs.value:fs.textContent,b=g.length;for(i=0;i<l&&o[i]===g[i];i++);var T=l-i;for(f=1;f<=T&&o[l-f]===g[b-f];f++);return yf=g.slice(i,1<f?1-f:void 0)}function bf(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function wf(){return!0}function gv(){return!1}function $n(i){function o(l,f,g,b,T){this._reactName=l,this._targetInst=g,this.type=f,this.nativeEvent=b,this.target=T,this.currentTarget=null;for(var P in i)i.hasOwnProperty(P)&&(l=i[P],this[P]=l?l(b):b[P]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?wf:gv,this.isPropagationStopped=gv,this}return p(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=wf)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=wf)},persist:function(){},isPersistent:wf}),o}var io={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},vf=$n(io),el=p({},io,{view:0,detail:0}),$C=$n(el),qp,Hp,tl,Ef=p({},el,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Vp,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==tl&&(tl&&i.type==="mousemove"?(qp=i.screenX-tl.screenX,Hp=i.screenY-tl.screenY):Hp=qp=0,tl=i),qp)},movementY:function(i){return"movementY"in i?i.movementY:Hp}}),mv=$n(Ef),UC=p({},Ef,{dataTransfer:0}),BC=$n(UC),PC=p({},el,{relatedTarget:0}),Fp=$n(PC),kC=p({},io,{animationName:0,elapsedTime:0,pseudoElement:0}),MC=$n(kC),LC=p({},io,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),jC=$n(LC),zC=p({},io,{data:0}),yv=$n(zC),qC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},HC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},FC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function VC(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=FC[i])?!!o[i]:!1}function Vp(){return VC}var GC=p({},el,{key:function(i){if(i.key){var o=qC[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=bf(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?HC[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Vp,charCode:function(i){return i.type==="keypress"?bf(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?bf(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),KC=$n(GC),YC=p({},Ef,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),bv=$n(YC),WC=p({},el,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Vp}),XC=$n(WC),ZC=p({},io,{propertyName:0,elapsedTime:0,pseudoElement:0}),QC=$n(ZC),JC=p({},Ef,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),eN=$n(JC),tN=p({},io,{newState:0,oldState:0}),nN=$n(tN),rN=[9,13,27,32],Gp=Ai&&"CompositionEvent"in window,nl=null;Ai&&"documentMode"in document&&(nl=document.documentMode);var iN=Ai&&"TextEvent"in window&&!nl,wv=Ai&&(!Gp||nl&&8<nl&&11>=nl),vv=" ",Ev=!1;function Sv(i,o){switch(i){case"keyup":return rN.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _v(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var va=!1;function sN(i,o){switch(i){case"compositionend":return _v(o);case"keypress":return o.which!==32?null:(Ev=!0,vv);case"textInput":return i=o.data,i===vv&&Ev?null:i;default:return null}}function oN(i,o){if(va)return i==="compositionend"||!Gp&&Sv(i,o)?(i=pv(),yf=zp=fs=null,va=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return wv&&o.locale!=="ko"?null:o.data;default:return null}}var aN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Av(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!aN[i.type]:o==="textarea"}function xv(i,o,l,f){ba?wa?wa.push(f):wa=[f]:ba=f,o=ad(o,"onChange"),0<o.length&&(l=new vf("onChange","change",null,l,f),i.push({event:l,listeners:o}))}var rl=null,il=null;function cN(i){s2(i,0)}function Sf(i){var o=Zc(i);if(ov(o))return i}function Rv(i,o){if(i==="change")return o}var Ov=!1;if(Ai){var Kp;if(Ai){var Yp="oninput"in document;if(!Yp){var Tv=document.createElement("div");Tv.setAttribute("oninput","return;"),Yp=typeof Tv.oninput=="function"}Kp=Yp}else Kp=!1;Ov=Kp&&(!document.documentMode||9<document.documentMode)}function Dv(){rl&&(rl.detachEvent("onpropertychange",Iv),il=rl=null)}function Iv(i){if(i.propertyName==="value"&&Sf(il)){var o=[];xv(o,il,i,Mp(i)),hv(cN,o)}}function lN(i,o,l){i==="focusin"?(Dv(),rl=o,il=l,rl.attachEvent("onpropertychange",Iv)):i==="focusout"&&Dv()}function uN(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Sf(il)}function fN(i,o){if(i==="click")return Sf(o)}function dN(i,o){if(i==="input"||i==="change")return Sf(o)}function hN(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var er=typeof Object.is=="function"?Object.is:hN;function sl(i,o){if(er(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var l=Object.keys(i),f=Object.keys(o);if(l.length!==f.length)return!1;for(f=0;f<l.length;f++){var g=l[f];if(!on.call(o,g)||!er(i[g],o[g]))return!1}return!0}function Cv(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Nv(i,o){var l=Cv(i);i=0;for(var f;l;){if(l.nodeType===3){if(f=i+l.textContent.length,i<=o&&f>=o)return{node:l,offset:o-i};i=f}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Cv(l)}}function $v(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?$v(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function Uv(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var o=gf(i.document);o instanceof i.HTMLIFrameElement;){try{var l=typeof o.contentWindow.location.href=="string"}catch{l=!1}if(l)i=o.contentWindow;else break;o=gf(i.document)}return o}function Wp(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}var pN=Ai&&"documentMode"in document&&11>=document.documentMode,Ea=null,Xp=null,ol=null,Zp=!1;function Bv(i,o,l){var f=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Zp||Ea==null||Ea!==gf(f)||(f=Ea,"selectionStart"in f&&Wp(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),ol&&sl(ol,f)||(ol=f,f=ad(Xp,"onSelect"),0<f.length&&(o=new vf("onSelect","select",null,o,l),i.push({event:o,listeners:f}),o.target=Ea)))}function so(i,o){var l={};return l[i.toLowerCase()]=o.toLowerCase(),l["Webkit"+i]="webkit"+o,l["Moz"+i]="moz"+o,l}var Sa={animationend:so("Animation","AnimationEnd"),animationiteration:so("Animation","AnimationIteration"),animationstart:so("Animation","AnimationStart"),transitionrun:so("Transition","TransitionRun"),transitionstart:so("Transition","TransitionStart"),transitioncancel:so("Transition","TransitionCancel"),transitionend:so("Transition","TransitionEnd")},Qp={},Pv={};Ai&&(Pv=document.createElement("div").style,"AnimationEvent"in window||(delete Sa.animationend.animation,delete Sa.animationiteration.animation,delete Sa.animationstart.animation),"TransitionEvent"in window||delete Sa.transitionend.transition);function oo(i){if(Qp[i])return Qp[i];if(!Sa[i])return i;var o=Sa[i],l;for(l in o)if(o.hasOwnProperty(l)&&l in Pv)return Qp[i]=o[l];return i}var kv=oo("animationend"),Mv=oo("animationiteration"),Lv=oo("animationstart"),gN=oo("transitionrun"),mN=oo("transitionstart"),yN=oo("transitioncancel"),jv=oo("transitionend"),zv=new Map,Jp="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Jp.push("scrollEnd");function Br(i,o){zv.set(i,o),ro(o,[i])}var qv=new WeakMap;function yr(i,o){if(typeof i=="object"&&i!==null){var l=qv.get(i);return l!==void 0?l:(o={value:i,source:o,stack:iv(o)},qv.set(i,o),o)}return{value:i,source:o,stack:iv(o)}}var br=[],_a=0,eg=0;function _f(){for(var i=_a,o=eg=_a=0;o<i;){var l=br[o];br[o++]=null;var f=br[o];br[o++]=null;var g=br[o];br[o++]=null;var b=br[o];if(br[o++]=null,f!==null&&g!==null){var T=f.pending;T===null?g.next=g:(g.next=T.next,T.next=g),f.pending=g}b!==0&&Hv(l,g,b)}}function Af(i,o,l,f){br[_a++]=i,br[_a++]=o,br[_a++]=l,br[_a++]=f,eg|=f,i.lanes|=f,i=i.alternate,i!==null&&(i.lanes|=f)}function tg(i,o,l,f){return Af(i,o,l,f),xf(i)}function Aa(i,o){return Af(i,null,null,o),xf(i)}function Hv(i,o,l){i.lanes|=l;var f=i.alternate;f!==null&&(f.lanes|=l);for(var g=!1,b=i.return;b!==null;)b.childLanes|=l,f=b.alternate,f!==null&&(f.childLanes|=l),b.tag===22&&(i=b.stateNode,i===null||i._visibility&1||(g=!0)),i=b,b=b.return;return i.tag===3?(b=i.stateNode,g&&o!==null&&(g=31-x(l),i=b.hiddenUpdates,f=i[g],f===null?i[g]=[o]:f.push(o),o.lane=l|536870912),b):null}function xf(i){if(50<Cl)throw Cl=0,am=null,Error(r(185));for(var o=i.return;o!==null;)i=o,o=i.return;return i.tag===3?i.stateNode:null}var xa={};function bN(i,o,l,f){this.tag=i,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function tr(i,o,l,f){return new bN(i,o,l,f)}function ng(i){return i=i.prototype,!(!i||!i.isReactComponent)}function xi(i,o){var l=i.alternate;return l===null?(l=tr(i.tag,o,i.key,i.mode),l.elementType=i.elementType,l.type=i.type,l.stateNode=i.stateNode,l.alternate=i,i.alternate=l):(l.pendingProps=o,l.type=i.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=i.flags&65011712,l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,o=i.dependencies,l.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},l.sibling=i.sibling,l.index=i.index,l.ref=i.ref,l.refCleanup=i.refCleanup,l}function Fv(i,o){i.flags&=65011714;var l=i.alternate;return l===null?(i.childLanes=0,i.lanes=o,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,o=l.dependencies,i.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),i}function Rf(i,o,l,f,g,b){var T=0;if(f=i,typeof i=="function")ng(i)&&(T=1);else if(typeof i=="string")T=v8(i,l,te.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case k:return i=tr(31,l,o,g),i.elementType=k,i.lanes=b,i;case w:return ao(l.children,g,b,o);case E:T=8,g|=24;break;case S:return i=tr(12,l,o,g|2),i.elementType=S,i.lanes=b,i;case $:return i=tr(13,l,o,g),i.elementType=$,i.lanes=b,i;case N:return i=tr(19,l,o,g),i.elementType=N,i.lanes=b,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case A:case D:T=10;break e;case I:T=9;break e;case B:T=11;break e;case q:T=14;break e;case H:T=16,f=null;break e}T=29,l=Error(r(130,i===null?"null":typeof i,"")),f=null}return o=tr(T,l,o,g),o.elementType=i,o.type=f,o.lanes=b,o}function ao(i,o,l,f){return i=tr(7,i,f,o),i.lanes=l,i}function rg(i,o,l){return i=tr(6,i,null,o),i.lanes=l,i}function ig(i,o,l){return o=tr(4,i.children!==null?i.children:[],i.key,o),o.lanes=l,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}var Ra=[],Oa=0,Of=null,Tf=0,wr=[],vr=0,co=null,Ri=1,Oi="";function lo(i,o){Ra[Oa++]=Tf,Ra[Oa++]=Of,Of=i,Tf=o}function Vv(i,o,l){wr[vr++]=Ri,wr[vr++]=Oi,wr[vr++]=co,co=i;var f=Ri;i=Oi;var g=32-x(f)-1;f&=~(1<<g),l+=1;var b=32-x(o)+g;if(30<b){var T=g-g%5;b=(f&(1<<T)-1).toString(32),f>>=T,g-=T,Ri=1<<32-x(o)+g|l<<g|f,Oi=b+i}else Ri=1<<b|l<<g|f,Oi=i}function sg(i){i.return!==null&&(lo(i,1),Vv(i,1,0))}function og(i){for(;i===Of;)Of=Ra[--Oa],Ra[Oa]=null,Tf=Ra[--Oa],Ra[Oa]=null;for(;i===co;)co=wr[--vr],wr[vr]=null,Oi=wr[--vr],wr[vr]=null,Ri=wr[--vr],wr[vr]=null}var On=null,At=null,Ye=!1,uo=null,Zr=!1,ag=Error(r(519));function fo(i){var o=Error(r(418,""));throw ll(yr(o,i)),ag}function Gv(i){var o=i.stateNode,l=i.type,f=i.memoizedProps;switch(o[bn]=i,o[Nn]=f,l){case"dialog":ke("cancel",o),ke("close",o);break;case"iframe":case"object":case"embed":ke("load",o);break;case"video":case"audio":for(l=0;l<$l.length;l++)ke($l[l],o);break;case"source":ke("error",o);break;case"img":case"image":case"link":ke("error",o),ke("load",o);break;case"details":ke("toggle",o);break;case"input":ke("invalid",o),av(o,f.value,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name,!0),pf(o);break;case"select":ke("invalid",o);break;case"textarea":ke("invalid",o),lv(o,f.value,f.defaultValue,f.children),pf(o)}l=f.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||o.textContent===""+l||f.suppressHydrationWarning===!0||l2(o.textContent,l)?(f.popover!=null&&(ke("beforetoggle",o),ke("toggle",o)),f.onScroll!=null&&ke("scroll",o),f.onScrollEnd!=null&&ke("scrollend",o),f.onClick!=null&&(o.onclick=cd),o=!0):o=!1,o||fo(i)}function Kv(i){for(On=i.return;On;)switch(On.tag){case 5:case 13:Zr=!1;return;case 27:case 3:Zr=!0;return;default:On=On.return}}function al(i){if(i!==On)return!1;if(!Ye)return Kv(i),Ye=!0,!1;var o=i.tag,l;if((l=o!==3&&o!==27)&&((l=o===5)&&(l=i.type,l=!(l!=="form"&&l!=="button")||_m(i.type,i.memoizedProps)),l=!l),l&&At&&fo(i),Kv(i),o===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));e:{for(i=i.nextSibling,o=0;i;){if(i.nodeType===8)if(l=i.data,l==="/$"){if(o===0){At=kr(i.nextSibling);break e}o--}else l!=="$"&&l!=="$!"&&l!=="$?"||o++;i=i.nextSibling}At=null}}else o===27?(o=At,Os(i.type)?(i=Om,Om=null,At=i):At=o):At=On?kr(i.stateNode.nextSibling):null;return!0}function cl(){At=On=null,Ye=!1}function Yv(){var i=uo;return i!==null&&(Pn===null?Pn=i:Pn.push.apply(Pn,i),uo=null),i}function ll(i){uo===null?uo=[i]:uo.push(i)}var cg=V(null),ho=null,Ti=null;function ds(i,o,l){se(cg,o._currentValue),o._currentValue=l}function Di(i){i._currentValue=cg.current,ee(cg)}function lg(i,o,l){for(;i!==null;){var f=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,f!==null&&(f.childLanes|=o)):f!==null&&(f.childLanes&o)!==o&&(f.childLanes|=o),i===l)break;i=i.return}}function ug(i,o,l,f){var g=i.child;for(g!==null&&(g.return=i);g!==null;){var b=g.dependencies;if(b!==null){var T=g.child;b=b.firstContext;e:for(;b!==null;){var P=b;b=g;for(var G=0;G<o.length;G++)if(P.context===o[G]){b.lanes|=l,P=b.alternate,P!==null&&(P.lanes|=l),lg(b.return,l,i),f||(T=null);break e}b=P.next}}else if(g.tag===18){if(T=g.return,T===null)throw Error(r(341));T.lanes|=l,b=T.alternate,b!==null&&(b.lanes|=l),lg(T,l,i),T=null}else T=g.child;if(T!==null)T.return=g;else for(T=g;T!==null;){if(T===i){T=null;break}if(g=T.sibling,g!==null){g.return=T.return,T=g;break}T=T.return}g=T}}function ul(i,o,l,f){i=null;for(var g=o,b=!1;g!==null;){if(!b){if((g.flags&524288)!==0)b=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var T=g.alternate;if(T===null)throw Error(r(387));if(T=T.memoizedProps,T!==null){var P=g.type;er(g.pendingProps.value,T.value)||(i!==null?i.push(P):i=[P])}}else if(g===Te.current){if(T=g.alternate,T===null)throw Error(r(387));T.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(i!==null?i.push(Ll):i=[Ll])}g=g.return}i!==null&&ug(o,i,l,f),o.flags|=262144}function Df(i){for(i=i.firstContext;i!==null;){if(!er(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function po(i){ho=i,Ti=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function wn(i){return Wv(ho,i)}function If(i,o){return ho===null&&po(i),Wv(i,o)}function Wv(i,o){var l=o._currentValue;if(o={context:o,memoizedValue:l,next:null},Ti===null){if(i===null)throw Error(r(308));Ti=o,i.dependencies={lanes:0,firstContext:o},i.flags|=524288}else Ti=Ti.next=o;return l}var wN=typeof AbortController<"u"?AbortController:function(){var i=[],o=this.signal={aborted:!1,addEventListener:function(l,f){i.push(f)}};this.abort=function(){o.aborted=!0,i.forEach(function(l){return l()})}},vN=e.unstable_scheduleCallback,EN=e.unstable_NormalPriority,Ht={$$typeof:D,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function fg(){return{controller:new wN,data:new Map,refCount:0}}function fl(i){i.refCount--,i.refCount===0&&vN(EN,function(){i.controller.abort()})}var dl=null,dg=0,Ta=0,Da=null;function SN(i,o){if(dl===null){var l=dl=[];dg=0,Ta=pm(),Da={status:"pending",value:void 0,then:function(f){l.push(f)}}}return dg++,o.then(Xv,Xv),o}function Xv(){if(--dg===0&&dl!==null){Da!==null&&(Da.status="fulfilled");var i=dl;dl=null,Ta=0,Da=null;for(var o=0;o<i.length;o++)(0,i[o])()}}function _N(i,o){var l=[],f={status:"pending",value:null,reason:null,then:function(g){l.push(g)}};return i.then(function(){f.status="fulfilled",f.value=o;for(var g=0;g<l.length;g++)(0,l[g])(o)},function(g){for(f.status="rejected",f.reason=g,g=0;g<l.length;g++)(0,l[g])(void 0)}),f}var Zv=R.S;R.S=function(i,o){typeof o=="object"&&o!==null&&typeof o.then=="function"&&SN(i,o),Zv!==null&&Zv(i,o)};var go=V(null);function hg(){var i=go.current;return i!==null?i:gt.pooledCache}function Cf(i,o){o===null?se(go,go.current):se(go,o.pool)}function Qv(){var i=hg();return i===null?null:{parent:Ht._currentValue,pool:i}}var hl=Error(r(460)),Jv=Error(r(474)),Nf=Error(r(542)),pg={then:function(){}};function e1(i){return i=i.status,i==="fulfilled"||i==="rejected"}function $f(){}function t1(i,o,l){switch(l=i[l],l===void 0?i.push(o):l!==o&&(o.then($f,$f),o=l),o.status){case"fulfilled":return o.value;case"rejected":throw i=o.reason,r1(i),i;default:if(typeof o.status=="string")o.then($f,$f);else{if(i=gt,i!==null&&100<i.shellSuspendCounter)throw Error(r(482));i=o,i.status="pending",i.then(function(f){if(o.status==="pending"){var g=o;g.status="fulfilled",g.value=f}},function(f){if(o.status==="pending"){var g=o;g.status="rejected",g.reason=f}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw i=o.reason,r1(i),i}throw pl=o,hl}}var pl=null;function n1(){if(pl===null)throw Error(r(459));var i=pl;return pl=null,i}function r1(i){if(i===hl||i===Nf)throw Error(r(483))}var hs=!1;function gg(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function mg(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function ps(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function gs(i,o,l){var f=i.updateQueue;if(f===null)return null;if(f=f.shared,(et&2)!==0){var g=f.pending;return g===null?o.next=o:(o.next=g.next,g.next=o),f.pending=o,o=xf(i),Hv(i,null,l),o}return Af(i,f,o,l),xf(i)}function gl(i,o,l){if(o=o.updateQueue,o!==null&&(o=o.shared,(l&4194048)!==0)){var f=o.lanes;f&=i.pendingLanes,l|=f,o.lanes=l,Xw(i,l)}}function yg(i,o){var l=i.updateQueue,f=i.alternate;if(f!==null&&(f=f.updateQueue,l===f)){var g=null,b=null;if(l=l.firstBaseUpdate,l!==null){do{var T={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};b===null?g=b=T:b=b.next=T,l=l.next}while(l!==null);b===null?g=b=o:b=b.next=o}else g=b=o;l={baseState:f.baseState,firstBaseUpdate:g,lastBaseUpdate:b,shared:f.shared,callbacks:f.callbacks},i.updateQueue=l;return}i=l.lastBaseUpdate,i===null?l.firstBaseUpdate=o:i.next=o,l.lastBaseUpdate=o}var bg=!1;function ml(){if(bg){var i=Da;if(i!==null)throw i}}function yl(i,o,l,f){bg=!1;var g=i.updateQueue;hs=!1;var b=g.firstBaseUpdate,T=g.lastBaseUpdate,P=g.shared.pending;if(P!==null){g.shared.pending=null;var G=P,ie=G.next;G.next=null,T===null?b=ie:T.next=ie,T=G;var ue=i.alternate;ue!==null&&(ue=ue.updateQueue,P=ue.lastBaseUpdate,P!==T&&(P===null?ue.firstBaseUpdate=ie:P.next=ie,ue.lastBaseUpdate=G))}if(b!==null){var ge=g.baseState;T=0,ue=ie=G=null,P=b;do{var oe=P.lane&-536870913,ae=oe!==P.lane;if(ae?(ze&oe)===oe:(f&oe)===oe){oe!==0&&oe===Ta&&(bg=!0),ue!==null&&(ue=ue.next={lane:0,tag:P.tag,payload:P.payload,callback:null,next:null});e:{var De=i,Re=P;oe=o;var at=l;switch(Re.tag){case 1:if(De=Re.payload,typeof De=="function"){ge=De.call(at,ge,oe);break e}ge=De;break e;case 3:De.flags=De.flags&-65537|128;case 0:if(De=Re.payload,oe=typeof De=="function"?De.call(at,ge,oe):De,oe==null)break e;ge=p({},ge,oe);break e;case 2:hs=!0}}oe=P.callback,oe!==null&&(i.flags|=64,ae&&(i.flags|=8192),ae=g.callbacks,ae===null?g.callbacks=[oe]:ae.push(oe))}else ae={lane:oe,tag:P.tag,payload:P.payload,callback:P.callback,next:null},ue===null?(ie=ue=ae,G=ge):ue=ue.next=ae,T|=oe;if(P=P.next,P===null){if(P=g.shared.pending,P===null)break;ae=P,P=ae.next,ae.next=null,g.lastBaseUpdate=ae,g.shared.pending=null}}while(!0);ue===null&&(G=ge),g.baseState=G,g.firstBaseUpdate=ie,g.lastBaseUpdate=ue,b===null&&(g.shared.lanes=0),_s|=T,i.lanes=T,i.memoizedState=ge}}function i1(i,o){if(typeof i!="function")throw Error(r(191,i));i.call(o)}function s1(i,o){var l=i.callbacks;if(l!==null)for(i.callbacks=null,i=0;i<l.length;i++)i1(l[i],o)}var Ia=V(null),Uf=V(0);function o1(i,o){i=Pi,se(Uf,i),se(Ia,o),Pi=i|o.baseLanes}function wg(){se(Uf,Pi),se(Ia,Ia.current)}function vg(){Pi=Uf.current,ee(Ia),ee(Uf)}var ms=0,Ue=null,st=null,Ut=null,Bf=!1,Ca=!1,mo=!1,Pf=0,bl=0,Na=null,AN=0;function It(){throw Error(r(321))}function Eg(i,o){if(o===null)return!1;for(var l=0;l<o.length&&l<i.length;l++)if(!er(i[l],o[l]))return!1;return!0}function Sg(i,o,l,f,g,b){return ms=b,Ue=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,R.H=i===null||i.memoizedState===null?H1:F1,mo=!1,b=l(f,g),mo=!1,Ca&&(b=c1(o,l,f,g)),a1(i),b}function a1(i){R.H=qf;var o=st!==null&&st.next!==null;if(ms=0,Ut=st=Ue=null,Bf=!1,bl=0,Na=null,o)throw Error(r(300));i===null||Xt||(i=i.dependencies,i!==null&&Df(i)&&(Xt=!0))}function c1(i,o,l,f){Ue=i;var g=0;do{if(Ca&&(Na=null),bl=0,Ca=!1,25<=g)throw Error(r(301));if(g+=1,Ut=st=null,i.updateQueue!=null){var b=i.updateQueue;b.lastEffect=null,b.events=null,b.stores=null,b.memoCache!=null&&(b.memoCache.index=0)}R.H=CN,b=o(l,f)}while(Ca);return b}function xN(){var i=R.H,o=i.useState()[0];return o=typeof o.then=="function"?wl(o):o,i=i.useState()[0],(st!==null?st.memoizedState:null)!==i&&(Ue.flags|=1024),o}function _g(){var i=Pf!==0;return Pf=0,i}function Ag(i,o,l){o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~l}function xg(i){if(Bf){for(i=i.memoizedState;i!==null;){var o=i.queue;o!==null&&(o.pending=null),i=i.next}Bf=!1}ms=0,Ut=st=Ue=null,Ca=!1,bl=Pf=0,Na=null}function Un(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ut===null?Ue.memoizedState=Ut=i:Ut=Ut.next=i,Ut}function Bt(){if(st===null){var i=Ue.alternate;i=i!==null?i.memoizedState:null}else i=st.next;var o=Ut===null?Ue.memoizedState:Ut.next;if(o!==null)Ut=o,st=i;else{if(i===null)throw Ue.alternate===null?Error(r(467)):Error(r(310));st=i,i={memoizedState:st.memoizedState,baseState:st.baseState,baseQueue:st.baseQueue,queue:st.queue,next:null},Ut===null?Ue.memoizedState=Ut=i:Ut=Ut.next=i}return Ut}function Rg(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function wl(i){var o=bl;return bl+=1,Na===null&&(Na=[]),i=t1(Na,i,o),o=Ue,(Ut===null?o.memoizedState:Ut.next)===null&&(o=o.alternate,R.H=o===null||o.memoizedState===null?H1:F1),i}function kf(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return wl(i);if(i.$$typeof===D)return wn(i)}throw Error(r(438,String(i)))}function Og(i){var o=null,l=Ue.updateQueue;if(l!==null&&(o=l.memoCache),o==null){var f=Ue.alternate;f!==null&&(f=f.updateQueue,f!==null&&(f=f.memoCache,f!=null&&(o={data:f.data.map(function(g){return g.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),l===null&&(l=Rg(),Ue.updateQueue=l),l.memoCache=o,l=o.data[o.index],l===void 0)for(l=o.data[o.index]=Array(i),f=0;f<i;f++)l[f]=K;return o.index++,l}function Ii(i,o){return typeof o=="function"?o(i):o}function Mf(i){var o=Bt();return Tg(o,st,i)}function Tg(i,o,l){var f=i.queue;if(f===null)throw Error(r(311));f.lastRenderedReducer=l;var g=i.baseQueue,b=f.pending;if(b!==null){if(g!==null){var T=g.next;g.next=b.next,b.next=T}o.baseQueue=g=b,f.pending=null}if(b=i.baseState,g===null)i.memoizedState=b;else{o=g.next;var P=T=null,G=null,ie=o,ue=!1;do{var ge=ie.lane&-536870913;if(ge!==ie.lane?(ze&ge)===ge:(ms&ge)===ge){var oe=ie.revertLane;if(oe===0)G!==null&&(G=G.next={lane:0,revertLane:0,action:ie.action,hasEagerState:ie.hasEagerState,eagerState:ie.eagerState,next:null}),ge===Ta&&(ue=!0);else if((ms&oe)===oe){ie=ie.next,oe===Ta&&(ue=!0);continue}else ge={lane:0,revertLane:ie.revertLane,action:ie.action,hasEagerState:ie.hasEagerState,eagerState:ie.eagerState,next:null},G===null?(P=G=ge,T=b):G=G.next=ge,Ue.lanes|=oe,_s|=oe;ge=ie.action,mo&&l(b,ge),b=ie.hasEagerState?ie.eagerState:l(b,ge)}else oe={lane:ge,revertLane:ie.revertLane,action:ie.action,hasEagerState:ie.hasEagerState,eagerState:ie.eagerState,next:null},G===null?(P=G=oe,T=b):G=G.next=oe,Ue.lanes|=ge,_s|=ge;ie=ie.next}while(ie!==null&&ie!==o);if(G===null?T=b:G.next=P,!er(b,i.memoizedState)&&(Xt=!0,ue&&(l=Da,l!==null)))throw l;i.memoizedState=b,i.baseState=T,i.baseQueue=G,f.lastRenderedState=b}return g===null&&(f.lanes=0),[i.memoizedState,f.dispatch]}function Dg(i){var o=Bt(),l=o.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=i;var f=l.dispatch,g=l.pending,b=o.memoizedState;if(g!==null){l.pending=null;var T=g=g.next;do b=i(b,T.action),T=T.next;while(T!==g);er(b,o.memoizedState)||(Xt=!0),o.memoizedState=b,o.baseQueue===null&&(o.baseState=b),l.lastRenderedState=b}return[b,f]}function l1(i,o,l){var f=Ue,g=Bt(),b=Ye;if(b){if(l===void 0)throw Error(r(407));l=l()}else l=o();var T=!er((st||g).memoizedState,l);T&&(g.memoizedState=l,Xt=!0),g=g.queue;var P=d1.bind(null,f,g,i);if(vl(2048,8,P,[i]),g.getSnapshot!==o||T||Ut!==null&&Ut.memoizedState.tag&1){if(f.flags|=2048,$a(9,Lf(),f1.bind(null,f,g,l,o),null),gt===null)throw Error(r(349));b||(ms&124)!==0||u1(f,o,l)}return l}function u1(i,o,l){i.flags|=16384,i={getSnapshot:o,value:l},o=Ue.updateQueue,o===null?(o=Rg(),Ue.updateQueue=o,o.stores=[i]):(l=o.stores,l===null?o.stores=[i]:l.push(i))}function f1(i,o,l,f){o.value=l,o.getSnapshot=f,h1(o)&&p1(i)}function d1(i,o,l){return l(function(){h1(o)&&p1(i)})}function h1(i){var o=i.getSnapshot;i=i.value;try{var l=o();return!er(i,l)}catch{return!0}}function p1(i){var o=Aa(i,2);o!==null&&or(o,i,2)}function Ig(i){var o=Un();if(typeof i=="function"){var l=i;if(i=l(),mo){_(!0);try{l()}finally{_(!1)}}}return o.memoizedState=o.baseState=i,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ii,lastRenderedState:i},o}function g1(i,o,l,f){return i.baseState=l,Tg(i,st,typeof f=="function"?f:Ii)}function RN(i,o,l,f,g){if(zf(i))throw Error(r(485));if(i=o.action,i!==null){var b={payload:g,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){b.listeners.push(T)}};R.T!==null?l(!0):b.isTransition=!1,f(b),l=o.pending,l===null?(b.next=o.pending=b,m1(o,b)):(b.next=l.next,o.pending=l.next=b)}}function m1(i,o){var l=o.action,f=o.payload,g=i.state;if(o.isTransition){var b=R.T,T={};R.T=T;try{var P=l(g,f),G=R.S;G!==null&&G(T,P),y1(i,o,P)}catch(ie){Cg(i,o,ie)}finally{R.T=b}}else try{b=l(g,f),y1(i,o,b)}catch(ie){Cg(i,o,ie)}}function y1(i,o,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(f){b1(i,o,f)},function(f){return Cg(i,o,f)}):b1(i,o,l)}function b1(i,o,l){o.status="fulfilled",o.value=l,w1(o),i.state=l,o=i.pending,o!==null&&(l=o.next,l===o?i.pending=null:(l=l.next,o.next=l,m1(i,l)))}function Cg(i,o,l){var f=i.pending;if(i.pending=null,f!==null){f=f.next;do o.status="rejected",o.reason=l,w1(o),o=o.next;while(o!==f)}i.action=null}function w1(i){i=i.listeners;for(var o=0;o<i.length;o++)(0,i[o])()}function v1(i,o){return o}function E1(i,o){if(Ye){var l=gt.formState;if(l!==null){e:{var f=Ue;if(Ye){if(At){t:{for(var g=At,b=Zr;g.nodeType!==8;){if(!b){g=null;break t}if(g=kr(g.nextSibling),g===null){g=null;break t}}b=g.data,g=b==="F!"||b==="F"?g:null}if(g){At=kr(g.nextSibling),f=g.data==="F!";break e}}fo(f)}f=!1}f&&(o=l[0])}}return l=Un(),l.memoizedState=l.baseState=o,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:v1,lastRenderedState:o},l.queue=f,l=j1.bind(null,Ue,f),f.dispatch=l,f=Ig(!1),b=Pg.bind(null,Ue,!1,f.queue),f=Un(),g={state:o,dispatch:null,action:i,pending:null},f.queue=g,l=RN.bind(null,Ue,g,b,l),g.dispatch=l,f.memoizedState=i,[o,l,!1]}function S1(i){var o=Bt();return _1(o,st,i)}function _1(i,o,l){if(o=Tg(i,o,v1)[0],i=Mf(Ii)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var f=wl(o)}catch(T){throw T===hl?Nf:T}else f=o;o=Bt();var g=o.queue,b=g.dispatch;return l!==o.memoizedState&&(Ue.flags|=2048,$a(9,Lf(),ON.bind(null,g,l),null)),[f,b,i]}function ON(i,o){i.action=o}function A1(i){var o=Bt(),l=st;if(l!==null)return _1(o,l,i);Bt(),o=o.memoizedState,l=Bt();var f=l.queue.dispatch;return l.memoizedState=i,[o,f,!1]}function $a(i,o,l,f){return i={tag:i,create:l,deps:f,inst:o,next:null},o=Ue.updateQueue,o===null&&(o=Rg(),Ue.updateQueue=o),l=o.lastEffect,l===null?o.lastEffect=i.next=i:(f=l.next,l.next=i,i.next=f,o.lastEffect=i),i}function Lf(){return{destroy:void 0,resource:void 0}}function x1(){return Bt().memoizedState}function jf(i,o,l,f){var g=Un();f=f===void 0?null:f,Ue.flags|=i,g.memoizedState=$a(1|o,Lf(),l,f)}function vl(i,o,l,f){var g=Bt();f=f===void 0?null:f;var b=g.memoizedState.inst;st!==null&&f!==null&&Eg(f,st.memoizedState.deps)?g.memoizedState=$a(o,b,l,f):(Ue.flags|=i,g.memoizedState=$a(1|o,b,l,f))}function R1(i,o){jf(8390656,8,i,o)}function O1(i,o){vl(2048,8,i,o)}function T1(i,o){return vl(4,2,i,o)}function D1(i,o){return vl(4,4,i,o)}function I1(i,o){if(typeof o=="function"){i=i();var l=o(i);return function(){typeof l=="function"?l():o(null)}}if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function C1(i,o,l){l=l!=null?l.concat([i]):null,vl(4,4,I1.bind(null,o,i),l)}function Ng(){}function N1(i,o){var l=Bt();o=o===void 0?null:o;var f=l.memoizedState;return o!==null&&Eg(o,f[1])?f[0]:(l.memoizedState=[i,o],i)}function $1(i,o){var l=Bt();o=o===void 0?null:o;var f=l.memoizedState;if(o!==null&&Eg(o,f[1]))return f[0];if(f=i(),mo){_(!0);try{i()}finally{_(!1)}}return l.memoizedState=[f,o],f}function $g(i,o,l){return l===void 0||(ms&1073741824)!==0?i.memoizedState=o:(i.memoizedState=l,i=PE(),Ue.lanes|=i,_s|=i,l)}function U1(i,o,l,f){return er(l,o)?l:Ia.current!==null?(i=$g(i,l,f),er(i,o)||(Xt=!0),i):(ms&42)===0?(Xt=!0,i.memoizedState=l):(i=PE(),Ue.lanes|=i,_s|=i,o)}function B1(i,o,l,f,g){var b=M.p;M.p=b!==0&&8>b?b:8;var T=R.T,P={};R.T=P,Pg(i,!1,o,l);try{var G=g(),ie=R.S;if(ie!==null&&ie(P,G),G!==null&&typeof G=="object"&&typeof G.then=="function"){var ue=_N(G,f);El(i,o,ue,sr(i))}else El(i,o,f,sr(i))}catch(ge){El(i,o,{then:function(){},status:"rejected",reason:ge},sr())}finally{M.p=b,R.T=T}}function TN(){}function Ug(i,o,l,f){if(i.tag!==5)throw Error(r(476));var g=P1(i).queue;B1(i,g,o,F,l===null?TN:function(){return k1(i),l(f)})}function P1(i){var o=i.memoizedState;if(o!==null)return o;o={memoizedState:F,baseState:F,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ii,lastRenderedState:F},next:null};var l={};return o.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ii,lastRenderedState:l},next:null},i.memoizedState=o,i=i.alternate,i!==null&&(i.memoizedState=o),o}function k1(i){var o=P1(i).next.queue;El(i,o,{},sr())}function Bg(){return wn(Ll)}function M1(){return Bt().memoizedState}function L1(){return Bt().memoizedState}function DN(i){for(var o=i.return;o!==null;){switch(o.tag){case 24:case 3:var l=sr();i=ps(l);var f=gs(o,i,l);f!==null&&(or(f,o,l),gl(f,o,l)),o={cache:fg()},i.payload=o;return}o=o.return}}function IN(i,o,l){var f=sr();l={lane:f,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null},zf(i)?z1(o,l):(l=tg(i,o,l,f),l!==null&&(or(l,i,f),q1(l,o,f)))}function j1(i,o,l){var f=sr();El(i,o,l,f)}function El(i,o,l,f){var g={lane:f,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null};if(zf(i))z1(o,g);else{var b=i.alternate;if(i.lanes===0&&(b===null||b.lanes===0)&&(b=o.lastRenderedReducer,b!==null))try{var T=o.lastRenderedState,P=b(T,l);if(g.hasEagerState=!0,g.eagerState=P,er(P,T))return Af(i,o,g,0),gt===null&&_f(),!1}catch{}finally{}if(l=tg(i,o,g,f),l!==null)return or(l,i,f),q1(l,o,f),!0}return!1}function Pg(i,o,l,f){if(f={lane:2,revertLane:pm(),action:f,hasEagerState:!1,eagerState:null,next:null},zf(i)){if(o)throw Error(r(479))}else o=tg(i,l,f,2),o!==null&&or(o,i,2)}function zf(i){var o=i.alternate;return i===Ue||o!==null&&o===Ue}function z1(i,o){Ca=Bf=!0;var l=i.pending;l===null?o.next=o:(o.next=l.next,l.next=o),i.pending=o}function q1(i,o,l){if((l&4194048)!==0){var f=o.lanes;f&=i.pendingLanes,l|=f,o.lanes=l,Xw(i,l)}}var qf={readContext:wn,use:kf,useCallback:It,useContext:It,useEffect:It,useImperativeHandle:It,useLayoutEffect:It,useInsertionEffect:It,useMemo:It,useReducer:It,useRef:It,useState:It,useDebugValue:It,useDeferredValue:It,useTransition:It,useSyncExternalStore:It,useId:It,useHostTransitionStatus:It,useFormState:It,useActionState:It,useOptimistic:It,useMemoCache:It,useCacheRefresh:It},H1={readContext:wn,use:kf,useCallback:function(i,o){return Un().memoizedState=[i,o===void 0?null:o],i},useContext:wn,useEffect:R1,useImperativeHandle:function(i,o,l){l=l!=null?l.concat([i]):null,jf(4194308,4,I1.bind(null,o,i),l)},useLayoutEffect:function(i,o){return jf(4194308,4,i,o)},useInsertionEffect:function(i,o){jf(4,2,i,o)},useMemo:function(i,o){var l=Un();o=o===void 0?null:o;var f=i();if(mo){_(!0);try{i()}finally{_(!1)}}return l.memoizedState=[f,o],f},useReducer:function(i,o,l){var f=Un();if(l!==void 0){var g=l(o);if(mo){_(!0);try{l(o)}finally{_(!1)}}}else g=o;return f.memoizedState=f.baseState=g,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:g},f.queue=i,i=i.dispatch=IN.bind(null,Ue,i),[f.memoizedState,i]},useRef:function(i){var o=Un();return i={current:i},o.memoizedState=i},useState:function(i){i=Ig(i);var o=i.queue,l=j1.bind(null,Ue,o);return o.dispatch=l,[i.memoizedState,l]},useDebugValue:Ng,useDeferredValue:function(i,o){var l=Un();return $g(l,i,o)},useTransition:function(){var i=Ig(!1);return i=B1.bind(null,Ue,i.queue,!0,!1),Un().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,o,l){var f=Ue,g=Un();if(Ye){if(l===void 0)throw Error(r(407));l=l()}else{if(l=o(),gt===null)throw Error(r(349));(ze&124)!==0||u1(f,o,l)}g.memoizedState=l;var b={value:l,getSnapshot:o};return g.queue=b,R1(d1.bind(null,f,b,i),[i]),f.flags|=2048,$a(9,Lf(),f1.bind(null,f,b,l,o),null),l},useId:function(){var i=Un(),o=gt.identifierPrefix;if(Ye){var l=Oi,f=Ri;l=(f&~(1<<32-x(f)-1)).toString(32)+l,o=""+o+"R"+l,l=Pf++,0<l&&(o+="H"+l.toString(32)),o+=""}else l=AN++,o=""+o+"r"+l.toString(32)+"";return i.memoizedState=o},useHostTransitionStatus:Bg,useFormState:E1,useActionState:E1,useOptimistic:function(i){var o=Un();o.memoizedState=o.baseState=i;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=l,o=Pg.bind(null,Ue,!0,l),l.dispatch=o,[i,o]},useMemoCache:Og,useCacheRefresh:function(){return Un().memoizedState=DN.bind(null,Ue)}},F1={readContext:wn,use:kf,useCallback:N1,useContext:wn,useEffect:O1,useImperativeHandle:C1,useInsertionEffect:T1,useLayoutEffect:D1,useMemo:$1,useReducer:Mf,useRef:x1,useState:function(){return Mf(Ii)},useDebugValue:Ng,useDeferredValue:function(i,o){var l=Bt();return U1(l,st.memoizedState,i,o)},useTransition:function(){var i=Mf(Ii)[0],o=Bt().memoizedState;return[typeof i=="boolean"?i:wl(i),o]},useSyncExternalStore:l1,useId:M1,useHostTransitionStatus:Bg,useFormState:S1,useActionState:S1,useOptimistic:function(i,o){var l=Bt();return g1(l,st,i,o)},useMemoCache:Og,useCacheRefresh:L1},CN={readContext:wn,use:kf,useCallback:N1,useContext:wn,useEffect:O1,useImperativeHandle:C1,useInsertionEffect:T1,useLayoutEffect:D1,useMemo:$1,useReducer:Dg,useRef:x1,useState:function(){return Dg(Ii)},useDebugValue:Ng,useDeferredValue:function(i,o){var l=Bt();return st===null?$g(l,i,o):U1(l,st.memoizedState,i,o)},useTransition:function(){var i=Dg(Ii)[0],o=Bt().memoizedState;return[typeof i=="boolean"?i:wl(i),o]},useSyncExternalStore:l1,useId:M1,useHostTransitionStatus:Bg,useFormState:A1,useActionState:A1,useOptimistic:function(i,o){var l=Bt();return st!==null?g1(l,st,i,o):(l.baseState=i,[i,l.queue.dispatch])},useMemoCache:Og,useCacheRefresh:L1},Ua=null,Sl=0;function Hf(i){var o=Sl;return Sl+=1,Ua===null&&(Ua=[]),t1(Ua,i,o)}function _l(i,o){o=o.props.ref,i.ref=o!==void 0?o:null}function Ff(i,o){throw o.$$typeof===m?Error(r(525)):(i=Object.prototype.toString.call(o),Error(r(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i)))}function V1(i){var o=i._init;return o(i._payload)}function G1(i){function o(J,Z){if(i){var ne=J.deletions;ne===null?(J.deletions=[Z],J.flags|=16):ne.push(Z)}}function l(J,Z){if(!i)return null;for(;Z!==null;)o(J,Z),Z=Z.sibling;return null}function f(J){for(var Z=new Map;J!==null;)J.key!==null?Z.set(J.key,J):Z.set(J.index,J),J=J.sibling;return Z}function g(J,Z){return J=xi(J,Z),J.index=0,J.sibling=null,J}function b(J,Z,ne){return J.index=ne,i?(ne=J.alternate,ne!==null?(ne=ne.index,ne<Z?(J.flags|=67108866,Z):ne):(J.flags|=67108866,Z)):(J.flags|=1048576,Z)}function T(J){return i&&J.alternate===null&&(J.flags|=67108866),J}function P(J,Z,ne,he){return Z===null||Z.tag!==6?(Z=rg(ne,J.mode,he),Z.return=J,Z):(Z=g(Z,ne),Z.return=J,Z)}function G(J,Z,ne,he){var Se=ne.type;return Se===w?ue(J,Z,ne.props.children,he,ne.key):Z!==null&&(Z.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===H&&V1(Se)===Z.type)?(Z=g(Z,ne.props),_l(Z,ne),Z.return=J,Z):(Z=Rf(ne.type,ne.key,ne.props,null,J.mode,he),_l(Z,ne),Z.return=J,Z)}function ie(J,Z,ne,he){return Z===null||Z.tag!==4||Z.stateNode.containerInfo!==ne.containerInfo||Z.stateNode.implementation!==ne.implementation?(Z=ig(ne,J.mode,he),Z.return=J,Z):(Z=g(Z,ne.children||[]),Z.return=J,Z)}function ue(J,Z,ne,he,Se){return Z===null||Z.tag!==7?(Z=ao(ne,J.mode,he,Se),Z.return=J,Z):(Z=g(Z,ne),Z.return=J,Z)}function ge(J,Z,ne){if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return Z=rg(""+Z,J.mode,ne),Z.return=J,Z;if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case y:return ne=Rf(Z.type,Z.key,Z.props,null,J.mode,ne),_l(ne,Z),ne.return=J,ne;case v:return Z=ig(Z,J.mode,ne),Z.return=J,Z;case H:var he=Z._init;return Z=he(Z._payload),ge(J,Z,ne)}if(O(Z)||W(Z))return Z=ao(Z,J.mode,ne,null),Z.return=J,Z;if(typeof Z.then=="function")return ge(J,Hf(Z),ne);if(Z.$$typeof===D)return ge(J,If(J,Z),ne);Ff(J,Z)}return null}function oe(J,Z,ne,he){var Se=Z!==null?Z.key:null;if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return Se!==null?null:P(J,Z,""+ne,he);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case y:return ne.key===Se?G(J,Z,ne,he):null;case v:return ne.key===Se?ie(J,Z,ne,he):null;case H:return Se=ne._init,ne=Se(ne._payload),oe(J,Z,ne,he)}if(O(ne)||W(ne))return Se!==null?null:ue(J,Z,ne,he,null);if(typeof ne.then=="function")return oe(J,Z,Hf(ne),he);if(ne.$$typeof===D)return oe(J,Z,If(J,ne),he);Ff(J,ne)}return null}function ae(J,Z,ne,he,Se){if(typeof he=="string"&&he!==""||typeof he=="number"||typeof he=="bigint")return J=J.get(ne)||null,P(Z,J,""+he,Se);if(typeof he=="object"&&he!==null){switch(he.$$typeof){case y:return J=J.get(he.key===null?ne:he.key)||null,G(Z,J,he,Se);case v:return J=J.get(he.key===null?ne:he.key)||null,ie(Z,J,he,Se);case H:var Be=he._init;return he=Be(he._payload),ae(J,Z,ne,he,Se)}if(O(he)||W(he))return J=J.get(ne)||null,ue(Z,J,he,Se,null);if(typeof he.then=="function")return ae(J,Z,ne,Hf(he),Se);if(he.$$typeof===D)return ae(J,Z,ne,If(Z,he),Se);Ff(Z,he)}return null}function De(J,Z,ne,he){for(var Se=null,Be=null,_e=Z,Oe=Z=0,Qt=null;_e!==null&&Oe<ne.length;Oe++){_e.index>Oe?(Qt=_e,_e=null):Qt=_e.sibling;var Fe=oe(J,_e,ne[Oe],he);if(Fe===null){_e===null&&(_e=Qt);break}i&&_e&&Fe.alternate===null&&o(J,_e),Z=b(Fe,Z,Oe),Be===null?Se=Fe:Be.sibling=Fe,Be=Fe,_e=Qt}if(Oe===ne.length)return l(J,_e),Ye&&lo(J,Oe),Se;if(_e===null){for(;Oe<ne.length;Oe++)_e=ge(J,ne[Oe],he),_e!==null&&(Z=b(_e,Z,Oe),Be===null?Se=_e:Be.sibling=_e,Be=_e);return Ye&&lo(J,Oe),Se}for(_e=f(_e);Oe<ne.length;Oe++)Qt=ae(_e,J,Oe,ne[Oe],he),Qt!==null&&(i&&Qt.alternate!==null&&_e.delete(Qt.key===null?Oe:Qt.key),Z=b(Qt,Z,Oe),Be===null?Se=Qt:Be.sibling=Qt,Be=Qt);return i&&_e.forEach(function(Ns){return o(J,Ns)}),Ye&&lo(J,Oe),Se}function Re(J,Z,ne,he){if(ne==null)throw Error(r(151));for(var Se=null,Be=null,_e=Z,Oe=Z=0,Qt=null,Fe=ne.next();_e!==null&&!Fe.done;Oe++,Fe=ne.next()){_e.index>Oe?(Qt=_e,_e=null):Qt=_e.sibling;var Ns=oe(J,_e,Fe.value,he);if(Ns===null){_e===null&&(_e=Qt);break}i&&_e&&Ns.alternate===null&&o(J,_e),Z=b(Ns,Z,Oe),Be===null?Se=Ns:Be.sibling=Ns,Be=Ns,_e=Qt}if(Fe.done)return l(J,_e),Ye&&lo(J,Oe),Se;if(_e===null){for(;!Fe.done;Oe++,Fe=ne.next())Fe=ge(J,Fe.value,he),Fe!==null&&(Z=b(Fe,Z,Oe),Be===null?Se=Fe:Be.sibling=Fe,Be=Fe);return Ye&&lo(J,Oe),Se}for(_e=f(_e);!Fe.done;Oe++,Fe=ne.next())Fe=ae(_e,J,Oe,Fe.value,he),Fe!==null&&(i&&Fe.alternate!==null&&_e.delete(Fe.key===null?Oe:Fe.key),Z=b(Fe,Z,Oe),Be===null?Se=Fe:Be.sibling=Fe,Be=Fe);return i&&_e.forEach(function(N8){return o(J,N8)}),Ye&&lo(J,Oe),Se}function at(J,Z,ne,he){if(typeof ne=="object"&&ne!==null&&ne.type===w&&ne.key===null&&(ne=ne.props.children),typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case y:e:{for(var Se=ne.key;Z!==null;){if(Z.key===Se){if(Se=ne.type,Se===w){if(Z.tag===7){l(J,Z.sibling),he=g(Z,ne.props.children),he.return=J,J=he;break e}}else if(Z.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===H&&V1(Se)===Z.type){l(J,Z.sibling),he=g(Z,ne.props),_l(he,ne),he.return=J,J=he;break e}l(J,Z);break}else o(J,Z);Z=Z.sibling}ne.type===w?(he=ao(ne.props.children,J.mode,he,ne.key),he.return=J,J=he):(he=Rf(ne.type,ne.key,ne.props,null,J.mode,he),_l(he,ne),he.return=J,J=he)}return T(J);case v:e:{for(Se=ne.key;Z!==null;){if(Z.key===Se)if(Z.tag===4&&Z.stateNode.containerInfo===ne.containerInfo&&Z.stateNode.implementation===ne.implementation){l(J,Z.sibling),he=g(Z,ne.children||[]),he.return=J,J=he;break e}else{l(J,Z);break}else o(J,Z);Z=Z.sibling}he=ig(ne,J.mode,he),he.return=J,J=he}return T(J);case H:return Se=ne._init,ne=Se(ne._payload),at(J,Z,ne,he)}if(O(ne))return De(J,Z,ne,he);if(W(ne)){if(Se=W(ne),typeof Se!="function")throw Error(r(150));return ne=Se.call(ne),Re(J,Z,ne,he)}if(typeof ne.then=="function")return at(J,Z,Hf(ne),he);if(ne.$$typeof===D)return at(J,Z,If(J,ne),he);Ff(J,ne)}return typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint"?(ne=""+ne,Z!==null&&Z.tag===6?(l(J,Z.sibling),he=g(Z,ne),he.return=J,J=he):(l(J,Z),he=rg(ne,J.mode,he),he.return=J,J=he),T(J)):l(J,Z)}return function(J,Z,ne,he){try{Sl=0;var Se=at(J,Z,ne,he);return Ua=null,Se}catch(_e){if(_e===hl||_e===Nf)throw _e;var Be=tr(29,_e,null,J.mode);return Be.lanes=he,Be.return=J,Be}finally{}}}var Ba=G1(!0),K1=G1(!1),Er=V(null),Qr=null;function ys(i){var o=i.alternate;se(Ft,Ft.current&1),se(Er,i),Qr===null&&(o===null||Ia.current!==null||o.memoizedState!==null)&&(Qr=i)}function Y1(i){if(i.tag===22){if(se(Ft,Ft.current),se(Er,i),Qr===null){var o=i.alternate;o!==null&&o.memoizedState!==null&&(Qr=i)}}else bs()}function bs(){se(Ft,Ft.current),se(Er,Er.current)}function Ci(i){ee(Er),Qr===i&&(Qr=null),ee(Ft)}var Ft=V(0);function Vf(i){for(var o=i;o!==null;){if(o.tag===13){var l=o.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||Rm(l)))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}function kg(i,o,l,f){o=i.memoizedState,l=l(f,o),l=l==null?o:p({},o,l),i.memoizedState=l,i.lanes===0&&(i.updateQueue.baseState=l)}var Mg={enqueueSetState:function(i,o,l){i=i._reactInternals;var f=sr(),g=ps(f);g.payload=o,l!=null&&(g.callback=l),o=gs(i,g,f),o!==null&&(or(o,i,f),gl(o,i,f))},enqueueReplaceState:function(i,o,l){i=i._reactInternals;var f=sr(),g=ps(f);g.tag=1,g.payload=o,l!=null&&(g.callback=l),o=gs(i,g,f),o!==null&&(or(o,i,f),gl(o,i,f))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var l=sr(),f=ps(l);f.tag=2,o!=null&&(f.callback=o),o=gs(i,f,l),o!==null&&(or(o,i,l),gl(o,i,l))}};function W1(i,o,l,f,g,b,T){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(f,b,T):o.prototype&&o.prototype.isPureReactComponent?!sl(l,f)||!sl(g,b):!0}function X1(i,o,l,f){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(l,f),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(l,f),o.state!==i&&Mg.enqueueReplaceState(o,o.state,null)}function yo(i,o){var l=o;if("ref"in o){l={};for(var f in o)f!=="ref"&&(l[f]=o[f])}if(i=i.defaultProps){l===o&&(l=p({},l));for(var g in i)l[g]===void 0&&(l[g]=i[g])}return l}var Gf=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)};function Z1(i){Gf(i)}function Q1(i){console.error(i)}function J1(i){Gf(i)}function Kf(i,o){try{var l=i.onUncaughtError;l(o.value,{componentStack:o.stack})}catch(f){setTimeout(function(){throw f})}}function eE(i,o,l){try{var f=i.onCaughtError;f(l.value,{componentStack:l.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function Lg(i,o,l){return l=ps(l),l.tag=3,l.payload={element:null},l.callback=function(){Kf(i,o)},l}function tE(i){return i=ps(i),i.tag=3,i}function nE(i,o,l,f){var g=l.type.getDerivedStateFromError;if(typeof g=="function"){var b=f.value;i.payload=function(){return g(b)},i.callback=function(){eE(o,l,f)}}var T=l.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(i.callback=function(){eE(o,l,f),typeof g!="function"&&(As===null?As=new Set([this]):As.add(this));var P=f.stack;this.componentDidCatch(f.value,{componentStack:P!==null?P:""})})}function NN(i,o,l,f,g){if(l.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){if(o=l.alternate,o!==null&&ul(o,l,g,!0),l=Er.current,l!==null){switch(l.tag){case 13:return Qr===null?lm():l.alternate===null&&xt===0&&(xt=3),l.flags&=-257,l.flags|=65536,l.lanes=g,f===pg?l.flags|=16384:(o=l.updateQueue,o===null?l.updateQueue=new Set([f]):o.add(f),fm(i,f,g)),!1;case 22:return l.flags|=65536,f===pg?l.flags|=16384:(o=l.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([f])},l.updateQueue=o):(l=o.retryQueue,l===null?o.retryQueue=new Set([f]):l.add(f)),fm(i,f,g)),!1}throw Error(r(435,l.tag))}return fm(i,f,g),lm(),!1}if(Ye)return o=Er.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=g,f!==ag&&(i=Error(r(422),{cause:f}),ll(yr(i,l)))):(f!==ag&&(o=Error(r(423),{cause:f}),ll(yr(o,l))),i=i.current.alternate,i.flags|=65536,g&=-g,i.lanes|=g,f=yr(f,l),g=Lg(i.stateNode,f,g),yg(i,g),xt!==4&&(xt=2)),!1;var b=Error(r(520),{cause:f});if(b=yr(b,l),Il===null?Il=[b]:Il.push(b),xt!==4&&(xt=2),o===null)return!0;f=yr(f,l),l=o;do{switch(l.tag){case 3:return l.flags|=65536,i=g&-g,l.lanes|=i,i=Lg(l.stateNode,f,i),yg(l,i),!1;case 1:if(o=l.type,b=l.stateNode,(l.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(As===null||!As.has(b))))return l.flags|=65536,g&=-g,l.lanes|=g,g=tE(g),nE(g,i,l,f),yg(l,g),!1}l=l.return}while(l!==null);return!1}var rE=Error(r(461)),Xt=!1;function an(i,o,l,f){o.child=i===null?K1(o,null,l,f):Ba(o,i.child,l,f)}function iE(i,o,l,f,g){l=l.render;var b=o.ref;if("ref"in f){var T={};for(var P in f)P!=="ref"&&(T[P]=f[P])}else T=f;return po(o),f=Sg(i,o,l,T,b,g),P=_g(),i!==null&&!Xt?(Ag(i,o,g),Ni(i,o,g)):(Ye&&P&&sg(o),o.flags|=1,an(i,o,f,g),o.child)}function sE(i,o,l,f,g){if(i===null){var b=l.type;return typeof b=="function"&&!ng(b)&&b.defaultProps===void 0&&l.compare===null?(o.tag=15,o.type=b,oE(i,o,b,f,g)):(i=Rf(l.type,null,f,o,o.mode,g),i.ref=o.ref,i.return=o,o.child=i)}if(b=i.child,!Kg(i,g)){var T=b.memoizedProps;if(l=l.compare,l=l!==null?l:sl,l(T,f)&&i.ref===o.ref)return Ni(i,o,g)}return o.flags|=1,i=xi(b,f),i.ref=o.ref,i.return=o,o.child=i}function oE(i,o,l,f,g){if(i!==null){var b=i.memoizedProps;if(sl(b,f)&&i.ref===o.ref)if(Xt=!1,o.pendingProps=f=b,Kg(i,g))(i.flags&131072)!==0&&(Xt=!0);else return o.lanes=i.lanes,Ni(i,o,g)}return jg(i,o,l,f,g)}function aE(i,o,l){var f=o.pendingProps,g=f.children,b=i!==null?i.memoizedState:null;if(f.mode==="hidden"){if((o.flags&128)!==0){if(f=b!==null?b.baseLanes|l:l,i!==null){for(g=o.child=i.child,b=0;g!==null;)b=b|g.lanes|g.childLanes,g=g.sibling;o.childLanes=b&~f}else o.childLanes=0,o.child=null;return cE(i,o,f,l)}if((l&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},i!==null&&Cf(o,b!==null?b.cachePool:null),b!==null?o1(o,b):wg(),Y1(o);else return o.lanes=o.childLanes=536870912,cE(i,o,b!==null?b.baseLanes|l:l,l)}else b!==null?(Cf(o,b.cachePool),o1(o,b),bs(),o.memoizedState=null):(i!==null&&Cf(o,null),wg(),bs());return an(i,o,g,l),o.child}function cE(i,o,l,f){var g=hg();return g=g===null?null:{parent:Ht._currentValue,pool:g},o.memoizedState={baseLanes:l,cachePool:g},i!==null&&Cf(o,null),wg(),Y1(o),i!==null&&ul(i,o,f,!0),null}function Yf(i,o){var l=o.ref;if(l===null)i!==null&&i.ref!==null&&(o.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(r(284));(i===null||i.ref!==l)&&(o.flags|=4194816)}}function jg(i,o,l,f,g){return po(o),l=Sg(i,o,l,f,void 0,g),f=_g(),i!==null&&!Xt?(Ag(i,o,g),Ni(i,o,g)):(Ye&&f&&sg(o),o.flags|=1,an(i,o,l,g),o.child)}function lE(i,o,l,f,g,b){return po(o),o.updateQueue=null,l=c1(o,f,l,g),a1(i),f=_g(),i!==null&&!Xt?(Ag(i,o,b),Ni(i,o,b)):(Ye&&f&&sg(o),o.flags|=1,an(i,o,l,b),o.child)}function uE(i,o,l,f,g){if(po(o),o.stateNode===null){var b=xa,T=l.contextType;typeof T=="object"&&T!==null&&(b=wn(T)),b=new l(f,b),o.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,b.updater=Mg,o.stateNode=b,b._reactInternals=o,b=o.stateNode,b.props=f,b.state=o.memoizedState,b.refs={},gg(o),T=l.contextType,b.context=typeof T=="object"&&T!==null?wn(T):xa,b.state=o.memoizedState,T=l.getDerivedStateFromProps,typeof T=="function"&&(kg(o,l,T,f),b.state=o.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(T=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),T!==b.state&&Mg.enqueueReplaceState(b,b.state,null),yl(o,f,b,g),ml(),b.state=o.memoizedState),typeof b.componentDidMount=="function"&&(o.flags|=4194308),f=!0}else if(i===null){b=o.stateNode;var P=o.memoizedProps,G=yo(l,P);b.props=G;var ie=b.context,ue=l.contextType;T=xa,typeof ue=="object"&&ue!==null&&(T=wn(ue));var ge=l.getDerivedStateFromProps;ue=typeof ge=="function"||typeof b.getSnapshotBeforeUpdate=="function",P=o.pendingProps!==P,ue||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(P||ie!==T)&&X1(o,b,f,T),hs=!1;var oe=o.memoizedState;b.state=oe,yl(o,f,b,g),ml(),ie=o.memoizedState,P||oe!==ie||hs?(typeof ge=="function"&&(kg(o,l,ge,f),ie=o.memoizedState),(G=hs||W1(o,l,G,f,oe,ie,T))?(ue||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(o.flags|=4194308)):(typeof b.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=f,o.memoizedState=ie),b.props=f,b.state=ie,b.context=T,f=G):(typeof b.componentDidMount=="function"&&(o.flags|=4194308),f=!1)}else{b=o.stateNode,mg(i,o),T=o.memoizedProps,ue=yo(l,T),b.props=ue,ge=o.pendingProps,oe=b.context,ie=l.contextType,G=xa,typeof ie=="object"&&ie!==null&&(G=wn(ie)),P=l.getDerivedStateFromProps,(ie=typeof P=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(T!==ge||oe!==G)&&X1(o,b,f,G),hs=!1,oe=o.memoizedState,b.state=oe,yl(o,f,b,g),ml();var ae=o.memoizedState;T!==ge||oe!==ae||hs||i!==null&&i.dependencies!==null&&Df(i.dependencies)?(typeof P=="function"&&(kg(o,l,P,f),ae=o.memoizedState),(ue=hs||W1(o,l,ue,f,oe,ae,G)||i!==null&&i.dependencies!==null&&Df(i.dependencies))?(ie||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(f,ae,G),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(f,ae,G)),typeof b.componentDidUpdate=="function"&&(o.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof b.componentDidUpdate!="function"||T===i.memoizedProps&&oe===i.memoizedState||(o.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||T===i.memoizedProps&&oe===i.memoizedState||(o.flags|=1024),o.memoizedProps=f,o.memoizedState=ae),b.props=f,b.state=ae,b.context=G,f=ue):(typeof b.componentDidUpdate!="function"||T===i.memoizedProps&&oe===i.memoizedState||(o.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||T===i.memoizedProps&&oe===i.memoizedState||(o.flags|=1024),f=!1)}return b=f,Yf(i,o),f=(o.flags&128)!==0,b||f?(b=o.stateNode,l=f&&typeof l.getDerivedStateFromError!="function"?null:b.render(),o.flags|=1,i!==null&&f?(o.child=Ba(o,i.child,null,g),o.child=Ba(o,null,l,g)):an(i,o,l,g),o.memoizedState=b.state,i=o.child):i=Ni(i,o,g),i}function fE(i,o,l,f){return cl(),o.flags|=256,an(i,o,l,f),o.child}var zg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function qg(i){return{baseLanes:i,cachePool:Qv()}}function Hg(i,o,l){return i=i!==null?i.childLanes&~l:0,o&&(i|=Sr),i}function dE(i,o,l){var f=o.pendingProps,g=!1,b=(o.flags&128)!==0,T;if((T=b)||(T=i!==null&&i.memoizedState===null?!1:(Ft.current&2)!==0),T&&(g=!0,o.flags&=-129),T=(o.flags&32)!==0,o.flags&=-33,i===null){if(Ye){if(g?ys(o):bs(),Ye){var P=At,G;if(G=P){e:{for(G=P,P=Zr;G.nodeType!==8;){if(!P){P=null;break e}if(G=kr(G.nextSibling),G===null){P=null;break e}}P=G}P!==null?(o.memoizedState={dehydrated:P,treeContext:co!==null?{id:Ri,overflow:Oi}:null,retryLane:536870912,hydrationErrors:null},G=tr(18,null,null,0),G.stateNode=P,G.return=o,o.child=G,On=o,At=null,G=!0):G=!1}G||fo(o)}if(P=o.memoizedState,P!==null&&(P=P.dehydrated,P!==null))return Rm(P)?o.lanes=32:o.lanes=536870912,null;Ci(o)}return P=f.children,f=f.fallback,g?(bs(),g=o.mode,P=Wf({mode:"hidden",children:P},g),f=ao(f,g,l,null),P.return=o,f.return=o,P.sibling=f,o.child=P,g=o.child,g.memoizedState=qg(l),g.childLanes=Hg(i,T,l),o.memoizedState=zg,f):(ys(o),Fg(o,P))}if(G=i.memoizedState,G!==null&&(P=G.dehydrated,P!==null)){if(b)o.flags&256?(ys(o),o.flags&=-257,o=Vg(i,o,l)):o.memoizedState!==null?(bs(),o.child=i.child,o.flags|=128,o=null):(bs(),g=f.fallback,P=o.mode,f=Wf({mode:"visible",children:f.children},P),g=ao(g,P,l,null),g.flags|=2,f.return=o,g.return=o,f.sibling=g,o.child=f,Ba(o,i.child,null,l),f=o.child,f.memoizedState=qg(l),f.childLanes=Hg(i,T,l),o.memoizedState=zg,o=g);else if(ys(o),Rm(P)){if(T=P.nextSibling&&P.nextSibling.dataset,T)var ie=T.dgst;T=ie,f=Error(r(419)),f.stack="",f.digest=T,ll({value:f,source:null,stack:null}),o=Vg(i,o,l)}else if(Xt||ul(i,o,l,!1),T=(l&i.childLanes)!==0,Xt||T){if(T=gt,T!==null&&(f=l&-l,f=(f&42)!==0?1:Op(f),f=(f&(T.suspendedLanes|l))!==0?0:f,f!==0&&f!==G.retryLane))throw G.retryLane=f,Aa(i,f),or(T,i,f),rE;P.data==="$?"||lm(),o=Vg(i,o,l)}else P.data==="$?"?(o.flags|=192,o.child=i.child,o=null):(i=G.treeContext,At=kr(P.nextSibling),On=o,Ye=!0,uo=null,Zr=!1,i!==null&&(wr[vr++]=Ri,wr[vr++]=Oi,wr[vr++]=co,Ri=i.id,Oi=i.overflow,co=o),o=Fg(o,f.children),o.flags|=4096);return o}return g?(bs(),g=f.fallback,P=o.mode,G=i.child,ie=G.sibling,f=xi(G,{mode:"hidden",children:f.children}),f.subtreeFlags=G.subtreeFlags&65011712,ie!==null?g=xi(ie,g):(g=ao(g,P,l,null),g.flags|=2),g.return=o,f.return=o,f.sibling=g,o.child=f,f=g,g=o.child,P=i.child.memoizedState,P===null?P=qg(l):(G=P.cachePool,G!==null?(ie=Ht._currentValue,G=G.parent!==ie?{parent:ie,pool:ie}:G):G=Qv(),P={baseLanes:P.baseLanes|l,cachePool:G}),g.memoizedState=P,g.childLanes=Hg(i,T,l),o.memoizedState=zg,f):(ys(o),l=i.child,i=l.sibling,l=xi(l,{mode:"visible",children:f.children}),l.return=o,l.sibling=null,i!==null&&(T=o.deletions,T===null?(o.deletions=[i],o.flags|=16):T.push(i)),o.child=l,o.memoizedState=null,l)}function Fg(i,o){return o=Wf({mode:"visible",children:o},i.mode),o.return=i,i.child=o}function Wf(i,o){return i=tr(22,i,null,o),i.lanes=0,i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},i}function Vg(i,o,l){return Ba(o,i.child,null,l),i=Fg(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function hE(i,o,l){i.lanes|=o;var f=i.alternate;f!==null&&(f.lanes|=o),lg(i.return,o,l)}function Gg(i,o,l,f,g){var b=i.memoizedState;b===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:f,tail:l,tailMode:g}:(b.isBackwards=o,b.rendering=null,b.renderingStartTime=0,b.last=f,b.tail=l,b.tailMode=g)}function pE(i,o,l){var f=o.pendingProps,g=f.revealOrder,b=f.tail;if(an(i,o,f.children,l),f=Ft.current,(f&2)!==0)f=f&1|2,o.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&hE(i,l,o);else if(i.tag===19)hE(i,l,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}f&=1}switch(se(Ft,f),g){case"forwards":for(l=o.child,g=null;l!==null;)i=l.alternate,i!==null&&Vf(i)===null&&(g=l),l=l.sibling;l=g,l===null?(g=o.child,o.child=null):(g=l.sibling,l.sibling=null),Gg(o,!1,g,l,b);break;case"backwards":for(l=null,g=o.child,o.child=null;g!==null;){if(i=g.alternate,i!==null&&Vf(i)===null){o.child=g;break}i=g.sibling,g.sibling=l,l=g,g=i}Gg(o,!0,l,null,b);break;case"together":Gg(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function Ni(i,o,l){if(i!==null&&(o.dependencies=i.dependencies),_s|=o.lanes,(l&o.childLanes)===0)if(i!==null){if(ul(i,o,l,!1),(l&o.childLanes)===0)return null}else return null;if(i!==null&&o.child!==i.child)throw Error(r(153));if(o.child!==null){for(i=o.child,l=xi(i,i.pendingProps),o.child=l,l.return=o;i.sibling!==null;)i=i.sibling,l=l.sibling=xi(i,i.pendingProps),l.return=o;l.sibling=null}return o.child}function Kg(i,o){return(i.lanes&o)!==0?!0:(i=i.dependencies,!!(i!==null&&Df(i)))}function $N(i,o,l){switch(o.tag){case 3:Ee(o,o.stateNode.containerInfo),ds(o,Ht,i.memoizedState.cache),cl();break;case 27:case 5:He(o);break;case 4:Ee(o,o.stateNode.containerInfo);break;case 10:ds(o,o.type,o.memoizedProps.value);break;case 13:var f=o.memoizedState;if(f!==null)return f.dehydrated!==null?(ys(o),o.flags|=128,null):(l&o.child.childLanes)!==0?dE(i,o,l):(ys(o),i=Ni(i,o,l),i!==null?i.sibling:null);ys(o);break;case 19:var g=(i.flags&128)!==0;if(f=(l&o.childLanes)!==0,f||(ul(i,o,l,!1),f=(l&o.childLanes)!==0),g){if(f)return pE(i,o,l);o.flags|=128}if(g=o.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),se(Ft,Ft.current),f)break;return null;case 22:case 23:return o.lanes=0,aE(i,o,l);case 24:ds(o,Ht,i.memoizedState.cache)}return Ni(i,o,l)}function gE(i,o,l){if(i!==null)if(i.memoizedProps!==o.pendingProps)Xt=!0;else{if(!Kg(i,l)&&(o.flags&128)===0)return Xt=!1,$N(i,o,l);Xt=(i.flags&131072)!==0}else Xt=!1,Ye&&(o.flags&1048576)!==0&&Vv(o,Tf,o.index);switch(o.lanes=0,o.tag){case 16:e:{i=o.pendingProps;var f=o.elementType,g=f._init;if(f=g(f._payload),o.type=f,typeof f=="function")ng(f)?(i=yo(f,i),o.tag=1,o=uE(null,o,f,i,l)):(o.tag=0,o=jg(null,o,f,i,l));else{if(f!=null){if(g=f.$$typeof,g===B){o.tag=11,o=iE(null,o,f,i,l);break e}else if(g===q){o.tag=14,o=sE(null,o,f,i,l);break e}}throw o=re(f)||f,Error(r(306,o,""))}}return o;case 0:return jg(i,o,o.type,o.pendingProps,l);case 1:return f=o.type,g=yo(f,o.pendingProps),uE(i,o,f,g,l);case 3:e:{if(Ee(o,o.stateNode.containerInfo),i===null)throw Error(r(387));f=o.pendingProps;var b=o.memoizedState;g=b.element,mg(i,o),yl(o,f,null,l);var T=o.memoizedState;if(f=T.cache,ds(o,Ht,f),f!==b.cache&&ug(o,[Ht],l,!0),ml(),f=T.element,b.isDehydrated)if(b={element:f,isDehydrated:!1,cache:T.cache},o.updateQueue.baseState=b,o.memoizedState=b,o.flags&256){o=fE(i,o,f,l);break e}else if(f!==g){g=yr(Error(r(424)),o),ll(g),o=fE(i,o,f,l);break e}else{switch(i=o.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(At=kr(i.firstChild),On=o,Ye=!0,uo=null,Zr=!0,l=K1(o,null,f,l),o.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(cl(),f===g){o=Ni(i,o,l);break e}an(i,o,f,l)}o=o.child}return o;case 26:return Yf(i,o),i===null?(l=w2(o.type,null,o.pendingProps,null))?o.memoizedState=l:Ye||(l=o.type,i=o.pendingProps,f=ld(me.current).createElement(l),f[bn]=o,f[Nn]=i,ln(f,l,i),Wt(f),o.stateNode=f):o.memoizedState=w2(o.type,i.memoizedProps,o.pendingProps,i.memoizedState),null;case 27:return He(o),i===null&&Ye&&(f=o.stateNode=m2(o.type,o.pendingProps,me.current),On=o,Zr=!0,g=At,Os(o.type)?(Om=g,At=kr(f.firstChild)):At=g),an(i,o,o.pendingProps.children,l),Yf(i,o),i===null&&(o.flags|=4194304),o.child;case 5:return i===null&&Ye&&((g=f=At)&&(f=a8(f,o.type,o.pendingProps,Zr),f!==null?(o.stateNode=f,On=o,At=kr(f.firstChild),Zr=!1,g=!0):g=!1),g||fo(o)),He(o),g=o.type,b=o.pendingProps,T=i!==null?i.memoizedProps:null,f=b.children,_m(g,b)?f=null:T!==null&&_m(g,T)&&(o.flags|=32),o.memoizedState!==null&&(g=Sg(i,o,xN,null,null,l),Ll._currentValue=g),Yf(i,o),an(i,o,f,l),o.child;case 6:return i===null&&Ye&&((i=l=At)&&(l=c8(l,o.pendingProps,Zr),l!==null?(o.stateNode=l,On=o,At=null,i=!0):i=!1),i||fo(o)),null;case 13:return dE(i,o,l);case 4:return Ee(o,o.stateNode.containerInfo),f=o.pendingProps,i===null?o.child=Ba(o,null,f,l):an(i,o,f,l),o.child;case 11:return iE(i,o,o.type,o.pendingProps,l);case 7:return an(i,o,o.pendingProps,l),o.child;case 8:return an(i,o,o.pendingProps.children,l),o.child;case 12:return an(i,o,o.pendingProps.children,l),o.child;case 10:return f=o.pendingProps,ds(o,o.type,f.value),an(i,o,f.children,l),o.child;case 9:return g=o.type._context,f=o.pendingProps.children,po(o),g=wn(g),f=f(g),o.flags|=1,an(i,o,f,l),o.child;case 14:return sE(i,o,o.type,o.pendingProps,l);case 15:return oE(i,o,o.type,o.pendingProps,l);case 19:return pE(i,o,l);case 31:return f=o.pendingProps,l=o.mode,f={mode:f.mode,children:f.children},i===null?(l=Wf(f,l),l.ref=o.ref,o.child=l,l.return=o,o=l):(l=xi(i.child,f),l.ref=o.ref,o.child=l,l.return=o,o=l),o;case 22:return aE(i,o,l);case 24:return po(o),f=wn(Ht),i===null?(g=hg(),g===null&&(g=gt,b=fg(),g.pooledCache=b,b.refCount++,b!==null&&(g.pooledCacheLanes|=l),g=b),o.memoizedState={parent:f,cache:g},gg(o),ds(o,Ht,g)):((i.lanes&l)!==0&&(mg(i,o),yl(o,null,null,l),ml()),g=i.memoizedState,b=o.memoizedState,g.parent!==f?(g={parent:f,cache:f},o.memoizedState=g,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=g),ds(o,Ht,f)):(f=b.cache,ds(o,Ht,f),f!==g.cache&&ug(o,[Ht],l,!0))),an(i,o,o.pendingProps.children,l),o.child;case 29:throw o.pendingProps}throw Error(r(156,o.tag))}function $i(i){i.flags|=4}function mE(i,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!A2(o)){if(o=Er.current,o!==null&&((ze&4194048)===ze?Qr!==null:(ze&62914560)!==ze&&(ze&536870912)===0||o!==Qr))throw pl=pg,Jv;i.flags|=8192}}function Xf(i,o){o!==null&&(i.flags|=4),i.flags&16384&&(o=i.tag!==22?Yw():536870912,i.lanes|=o,La|=o)}function Al(i,o){if(!Ye)switch(i.tailMode){case"hidden":o=i.tail;for(var l=null;o!==null;)o.alternate!==null&&(l=o),o=o.sibling;l===null?i.tail=null:l.sibling=null;break;case"collapsed":l=i.tail;for(var f=null;l!==null;)l.alternate!==null&&(f=l),l=l.sibling;f===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:f.sibling=null}}function St(i){var o=i.alternate!==null&&i.alternate.child===i.child,l=0,f=0;if(o)for(var g=i.child;g!==null;)l|=g.lanes|g.childLanes,f|=g.subtreeFlags&65011712,f|=g.flags&65011712,g.return=i,g=g.sibling;else for(g=i.child;g!==null;)l|=g.lanes|g.childLanes,f|=g.subtreeFlags,f|=g.flags,g.return=i,g=g.sibling;return i.subtreeFlags|=f,i.childLanes=l,o}function UN(i,o,l){var f=o.pendingProps;switch(og(o),o.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return St(o),null;case 1:return St(o),null;case 3:return l=o.stateNode,f=null,i!==null&&(f=i.memoizedState.cache),o.memoizedState.cache!==f&&(o.flags|=2048),Di(Ht),xe(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(i===null||i.child===null)&&(al(o)?$i(o):i===null||i.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Yv())),St(o),null;case 26:return l=o.memoizedState,i===null?($i(o),l!==null?(St(o),mE(o,l)):(St(o),o.flags&=-16777217)):l?l!==i.memoizedState?($i(o),St(o),mE(o,l)):(St(o),o.flags&=-16777217):(i.memoizedProps!==f&&$i(o),St(o),o.flags&=-16777217),null;case 27:pt(o),l=me.current;var g=o.type;if(i!==null&&o.stateNode!=null)i.memoizedProps!==f&&$i(o);else{if(!f){if(o.stateNode===null)throw Error(r(166));return St(o),null}i=te.current,al(o)?Gv(o):(i=m2(g,f,l),o.stateNode=i,$i(o))}return St(o),null;case 5:if(pt(o),l=o.type,i!==null&&o.stateNode!=null)i.memoizedProps!==f&&$i(o);else{if(!f){if(o.stateNode===null)throw Error(r(166));return St(o),null}if(i=te.current,al(o))Gv(o);else{switch(g=ld(me.current),i){case 1:i=g.createElementNS("http://www.w3.org/2000/svg",l);break;case 2:i=g.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;default:switch(l){case"svg":i=g.createElementNS("http://www.w3.org/2000/svg",l);break;case"math":i=g.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;case"script":i=g.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof f.is=="string"?g.createElement("select",{is:f.is}):g.createElement("select"),f.multiple?i.multiple=!0:f.size&&(i.size=f.size);break;default:i=typeof f.is=="string"?g.createElement(l,{is:f.is}):g.createElement(l)}}i[bn]=o,i[Nn]=f;e:for(g=o.child;g!==null;){if(g.tag===5||g.tag===6)i.appendChild(g.stateNode);else if(g.tag!==4&&g.tag!==27&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===o)break e;for(;g.sibling===null;){if(g.return===null||g.return===o)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}o.stateNode=i;e:switch(ln(i,l,f),l){case"button":case"input":case"select":case"textarea":i=!!f.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&$i(o)}}return St(o),o.flags&=-16777217,null;case 6:if(i&&o.stateNode!=null)i.memoizedProps!==f&&$i(o);else{if(typeof f!="string"&&o.stateNode===null)throw Error(r(166));if(i=me.current,al(o)){if(i=o.stateNode,l=o.memoizedProps,f=null,g=On,g!==null)switch(g.tag){case 27:case 5:f=g.memoizedProps}i[bn]=o,i=!!(i.nodeValue===l||f!==null&&f.suppressHydrationWarning===!0||l2(i.nodeValue,l)),i||fo(o)}else i=ld(i).createTextNode(f),i[bn]=o,o.stateNode=i}return St(o),null;case 13:if(f=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(g=al(o),f!==null&&f.dehydrated!==null){if(i===null){if(!g)throw Error(r(318));if(g=o.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(r(317));g[bn]=o}else cl(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;St(o),g=!1}else g=Yv(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=g),g=!0;if(!g)return o.flags&256?(Ci(o),o):(Ci(o),null)}if(Ci(o),(o.flags&128)!==0)return o.lanes=l,o;if(l=f!==null,i=i!==null&&i.memoizedState!==null,l){f=o.child,g=null,f.alternate!==null&&f.alternate.memoizedState!==null&&f.alternate.memoizedState.cachePool!==null&&(g=f.alternate.memoizedState.cachePool.pool);var b=null;f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(b=f.memoizedState.cachePool.pool),b!==g&&(f.flags|=2048)}return l!==i&&l&&(o.child.flags|=8192),Xf(o,o.updateQueue),St(o),null;case 4:return xe(),i===null&&bm(o.stateNode.containerInfo),St(o),null;case 10:return Di(o.type),St(o),null;case 19:if(ee(Ft),g=o.memoizedState,g===null)return St(o),null;if(f=(o.flags&128)!==0,b=g.rendering,b===null)if(f)Al(g,!1);else{if(xt!==0||i!==null&&(i.flags&128)!==0)for(i=o.child;i!==null;){if(b=Vf(i),b!==null){for(o.flags|=128,Al(g,!1),i=b.updateQueue,o.updateQueue=i,Xf(o,i),o.subtreeFlags=0,i=l,l=o.child;l!==null;)Fv(l,i),l=l.sibling;return se(Ft,Ft.current&1|2),o.child}i=i.sibling}g.tail!==null&&$t()>Jf&&(o.flags|=128,f=!0,Al(g,!1),o.lanes=4194304)}else{if(!f)if(i=Vf(b),i!==null){if(o.flags|=128,f=!0,i=i.updateQueue,o.updateQueue=i,Xf(o,i),Al(g,!0),g.tail===null&&g.tailMode==="hidden"&&!b.alternate&&!Ye)return St(o),null}else 2*$t()-g.renderingStartTime>Jf&&l!==536870912&&(o.flags|=128,f=!0,Al(g,!1),o.lanes=4194304);g.isBackwards?(b.sibling=o.child,o.child=b):(i=g.last,i!==null?i.sibling=b:o.child=b,g.last=b)}return g.tail!==null?(o=g.tail,g.rendering=o,g.tail=o.sibling,g.renderingStartTime=$t(),o.sibling=null,i=Ft.current,se(Ft,f?i&1|2:i&1),o):(St(o),null);case 22:case 23:return Ci(o),vg(),f=o.memoizedState!==null,i!==null?i.memoizedState!==null!==f&&(o.flags|=8192):f&&(o.flags|=8192),f?(l&536870912)!==0&&(o.flags&128)===0&&(St(o),o.subtreeFlags&6&&(o.flags|=8192)):St(o),l=o.updateQueue,l!==null&&Xf(o,l.retryQueue),l=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),f=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(f=o.memoizedState.cachePool.pool),f!==l&&(o.flags|=2048),i!==null&&ee(go),null;case 24:return l=null,i!==null&&(l=i.memoizedState.cache),o.memoizedState.cache!==l&&(o.flags|=2048),Di(Ht),St(o),null;case 25:return null;case 30:return null}throw Error(r(156,o.tag))}function BN(i,o){switch(og(o),o.tag){case 1:return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return Di(Ht),xe(),i=o.flags,(i&65536)!==0&&(i&128)===0?(o.flags=i&-65537|128,o):null;case 26:case 27:case 5:return pt(o),null;case 13:if(Ci(o),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(r(340));cl()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return ee(Ft),null;case 4:return xe(),null;case 10:return Di(o.type),null;case 22:case 23:return Ci(o),vg(),i!==null&&ee(go),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 24:return Di(Ht),null;case 25:return null;default:return null}}function yE(i,o){switch(og(o),o.tag){case 3:Di(Ht),xe();break;case 26:case 27:case 5:pt(o);break;case 4:xe();break;case 13:Ci(o);break;case 19:ee(Ft);break;case 10:Di(o.type);break;case 22:case 23:Ci(o),vg(),i!==null&&ee(go);break;case 24:Di(Ht)}}function xl(i,o){try{var l=o.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var g=f.next;l=g;do{if((l.tag&i)===i){f=void 0;var b=l.create,T=l.inst;f=b(),T.destroy=f}l=l.next}while(l!==g)}}catch(P){ct(o,o.return,P)}}function ws(i,o,l){try{var f=o.updateQueue,g=f!==null?f.lastEffect:null;if(g!==null){var b=g.next;f=b;do{if((f.tag&i)===i){var T=f.inst,P=T.destroy;if(P!==void 0){T.destroy=void 0,g=o;var G=l,ie=P;try{ie()}catch(ue){ct(g,G,ue)}}}f=f.next}while(f!==b)}}catch(ue){ct(o,o.return,ue)}}function bE(i){var o=i.updateQueue;if(o!==null){var l=i.stateNode;try{s1(o,l)}catch(f){ct(i,i.return,f)}}}function wE(i,o,l){l.props=yo(i.type,i.memoizedProps),l.state=i.memoizedState;try{l.componentWillUnmount()}catch(f){ct(i,o,f)}}function Rl(i,o){try{var l=i.ref;if(l!==null){switch(i.tag){case 26:case 27:case 5:var f=i.stateNode;break;case 30:f=i.stateNode;break;default:f=i.stateNode}typeof l=="function"?i.refCleanup=l(f):l.current=f}}catch(g){ct(i,o,g)}}function Jr(i,o){var l=i.ref,f=i.refCleanup;if(l!==null)if(typeof f=="function")try{f()}catch(g){ct(i,o,g)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(g){ct(i,o,g)}else l.current=null}function vE(i){var o=i.type,l=i.memoizedProps,f=i.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":l.autoFocus&&f.focus();break e;case"img":l.src?f.src=l.src:l.srcSet&&(f.srcset=l.srcSet)}}catch(g){ct(i,i.return,g)}}function Yg(i,o,l){try{var f=i.stateNode;n8(f,i.type,l,o),f[Nn]=o}catch(g){ct(i,i.return,g)}}function EE(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Os(i.type)||i.tag===4}function Wg(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||EE(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Os(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Xg(i,o,l){var f=i.tag;if(f===5||f===6)i=i.stateNode,o?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(i,o):(o=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,o.appendChild(i),l=l._reactRootContainer,l!=null||o.onclick!==null||(o.onclick=cd));else if(f!==4&&(f===27&&Os(i.type)&&(l=i.stateNode,o=null),i=i.child,i!==null))for(Xg(i,o,l),i=i.sibling;i!==null;)Xg(i,o,l),i=i.sibling}function Zf(i,o,l){var f=i.tag;if(f===5||f===6)i=i.stateNode,o?l.insertBefore(i,o):l.appendChild(i);else if(f!==4&&(f===27&&Os(i.type)&&(l=i.stateNode),i=i.child,i!==null))for(Zf(i,o,l),i=i.sibling;i!==null;)Zf(i,o,l),i=i.sibling}function SE(i){var o=i.stateNode,l=i.memoizedProps;try{for(var f=i.type,g=o.attributes;g.length;)o.removeAttributeNode(g[0]);ln(o,f,l),o[bn]=i,o[Nn]=l}catch(b){ct(i,i.return,b)}}var Ui=!1,Ct=!1,Zg=!1,_E=typeof WeakSet=="function"?WeakSet:Set,Zt=null;function PN(i,o){if(i=i.containerInfo,Em=gd,i=Uv(i),Wp(i)){if("selectionStart"in i)var l={start:i.selectionStart,end:i.selectionEnd};else e:{l=(l=i.ownerDocument)&&l.defaultView||window;var f=l.getSelection&&l.getSelection();if(f&&f.rangeCount!==0){l=f.anchorNode;var g=f.anchorOffset,b=f.focusNode;f=f.focusOffset;try{l.nodeType,b.nodeType}catch{l=null;break e}var T=0,P=-1,G=-1,ie=0,ue=0,ge=i,oe=null;t:for(;;){for(var ae;ge!==l||g!==0&&ge.nodeType!==3||(P=T+g),ge!==b||f!==0&&ge.nodeType!==3||(G=T+f),ge.nodeType===3&&(T+=ge.nodeValue.length),(ae=ge.firstChild)!==null;)oe=ge,ge=ae;for(;;){if(ge===i)break t;if(oe===l&&++ie===g&&(P=T),oe===b&&++ue===f&&(G=T),(ae=ge.nextSibling)!==null)break;ge=oe,oe=ge.parentNode}ge=ae}l=P===-1||G===-1?null:{start:P,end:G}}else l=null}l=l||{start:0,end:0}}else l=null;for(Sm={focusedElem:i,selectionRange:l},gd=!1,Zt=o;Zt!==null;)if(o=Zt,i=o.child,(o.subtreeFlags&1024)!==0&&i!==null)i.return=o,Zt=i;else for(;Zt!==null;){switch(o=Zt,b=o.alternate,i=o.flags,o.tag){case 0:break;case 11:case 15:break;case 1:if((i&1024)!==0&&b!==null){i=void 0,l=o,g=b.memoizedProps,b=b.memoizedState,f=l.stateNode;try{var De=yo(l.type,g,l.elementType===l.type);i=f.getSnapshotBeforeUpdate(De,b),f.__reactInternalSnapshotBeforeUpdate=i}catch(Re){ct(l,l.return,Re)}}break;case 3:if((i&1024)!==0){if(i=o.stateNode.containerInfo,l=i.nodeType,l===9)xm(i);else if(l===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":xm(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(r(163))}if(i=o.sibling,i!==null){i.return=o.return,Zt=i;break}Zt=o.return}}function AE(i,o,l){var f=l.flags;switch(l.tag){case 0:case 11:case 15:vs(i,l),f&4&&xl(5,l);break;case 1:if(vs(i,l),f&4)if(i=l.stateNode,o===null)try{i.componentDidMount()}catch(T){ct(l,l.return,T)}else{var g=yo(l.type,o.memoizedProps);o=o.memoizedState;try{i.componentDidUpdate(g,o,i.__reactInternalSnapshotBeforeUpdate)}catch(T){ct(l,l.return,T)}}f&64&&bE(l),f&512&&Rl(l,l.return);break;case 3:if(vs(i,l),f&64&&(i=l.updateQueue,i!==null)){if(o=null,l.child!==null)switch(l.child.tag){case 27:case 5:o=l.child.stateNode;break;case 1:o=l.child.stateNode}try{s1(i,o)}catch(T){ct(l,l.return,T)}}break;case 27:o===null&&f&4&&SE(l);case 26:case 5:vs(i,l),o===null&&f&4&&vE(l),f&512&&Rl(l,l.return);break;case 12:vs(i,l);break;case 13:vs(i,l),f&4&&OE(i,l),f&64&&(i=l.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(l=VN.bind(null,l),l8(i,l))));break;case 22:if(f=l.memoizedState!==null||Ui,!f){o=o!==null&&o.memoizedState!==null||Ct,g=Ui;var b=Ct;Ui=f,(Ct=o)&&!b?Es(i,l,(l.subtreeFlags&8772)!==0):vs(i,l),Ui=g,Ct=b}break;case 30:break;default:vs(i,l)}}function xE(i){var o=i.alternate;o!==null&&(i.alternate=null,xE(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&Ip(o)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var vt=null,Bn=!1;function Bi(i,o,l){for(l=l.child;l!==null;)RE(i,o,l),l=l.sibling}function RE(i,o,l){if(U&&typeof U.onCommitFiberUnmount=="function")try{U.onCommitFiberUnmount(Xr,l)}catch{}switch(l.tag){case 26:Ct||Jr(l,o),Bi(i,o,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:Ct||Jr(l,o);var f=vt,g=Bn;Os(l.type)&&(vt=l.stateNode,Bn=!1),Bi(i,o,l),Bl(l.stateNode),vt=f,Bn=g;break;case 5:Ct||Jr(l,o);case 6:if(f=vt,g=Bn,vt=null,Bi(i,o,l),vt=f,Bn=g,vt!==null)if(Bn)try{(vt.nodeType===9?vt.body:vt.nodeName==="HTML"?vt.ownerDocument.body:vt).removeChild(l.stateNode)}catch(b){ct(l,o,b)}else try{vt.removeChild(l.stateNode)}catch(b){ct(l,o,b)}break;case 18:vt!==null&&(Bn?(i=vt,p2(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,l.stateNode),Hl(i)):p2(vt,l.stateNode));break;case 4:f=vt,g=Bn,vt=l.stateNode.containerInfo,Bn=!0,Bi(i,o,l),vt=f,Bn=g;break;case 0:case 11:case 14:case 15:Ct||ws(2,l,o),Ct||ws(4,l,o),Bi(i,o,l);break;case 1:Ct||(Jr(l,o),f=l.stateNode,typeof f.componentWillUnmount=="function"&&wE(l,o,f)),Bi(i,o,l);break;case 21:Bi(i,o,l);break;case 22:Ct=(f=Ct)||l.memoizedState!==null,Bi(i,o,l),Ct=f;break;default:Bi(i,o,l)}}function OE(i,o){if(o.memoizedState===null&&(i=o.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Hl(i)}catch(l){ct(o,o.return,l)}}function kN(i){switch(i.tag){case 13:case 19:var o=i.stateNode;return o===null&&(o=i.stateNode=new _E),o;case 22:return i=i.stateNode,o=i._retryCache,o===null&&(o=i._retryCache=new _E),o;default:throw Error(r(435,i.tag))}}function Qg(i,o){var l=kN(i);o.forEach(function(f){var g=GN.bind(null,i,f);l.has(f)||(l.add(f),f.then(g,g))})}function nr(i,o){var l=o.deletions;if(l!==null)for(var f=0;f<l.length;f++){var g=l[f],b=i,T=o,P=T;e:for(;P!==null;){switch(P.tag){case 27:if(Os(P.type)){vt=P.stateNode,Bn=!1;break e}break;case 5:vt=P.stateNode,Bn=!1;break e;case 3:case 4:vt=P.stateNode.containerInfo,Bn=!0;break e}P=P.return}if(vt===null)throw Error(r(160));RE(b,T,g),vt=null,Bn=!1,b=g.alternate,b!==null&&(b.return=null),g.return=null}if(o.subtreeFlags&13878)for(o=o.child;o!==null;)TE(o,i),o=o.sibling}var Pr=null;function TE(i,o){var l=i.alternate,f=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:nr(o,i),rr(i),f&4&&(ws(3,i,i.return),xl(3,i),ws(5,i,i.return));break;case 1:nr(o,i),rr(i),f&512&&(Ct||l===null||Jr(l,l.return)),f&64&&Ui&&(i=i.updateQueue,i!==null&&(f=i.callbacks,f!==null&&(l=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=l===null?f:l.concat(f))));break;case 26:var g=Pr;if(nr(o,i),rr(i),f&512&&(Ct||l===null||Jr(l,l.return)),f&4){var b=l!==null?l.memoizedState:null;if(f=i.memoizedState,l===null)if(f===null)if(i.stateNode===null){e:{f=i.type,l=i.memoizedProps,g=g.ownerDocument||g;t:switch(f){case"title":b=g.getElementsByTagName("title")[0],(!b||b[Xc]||b[bn]||b.namespaceURI==="http://www.w3.org/2000/svg"||b.hasAttribute("itemprop"))&&(b=g.createElement(f),g.head.insertBefore(b,g.querySelector("head > title"))),ln(b,f,l),b[bn]=i,Wt(b),f=b;break e;case"link":var T=S2("link","href",g).get(f+(l.href||""));if(T){for(var P=0;P<T.length;P++)if(b=T[P],b.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&b.getAttribute("rel")===(l.rel==null?null:l.rel)&&b.getAttribute("title")===(l.title==null?null:l.title)&&b.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){T.splice(P,1);break t}}b=g.createElement(f),ln(b,f,l),g.head.appendChild(b);break;case"meta":if(T=S2("meta","content",g).get(f+(l.content||""))){for(P=0;P<T.length;P++)if(b=T[P],b.getAttribute("content")===(l.content==null?null:""+l.content)&&b.getAttribute("name")===(l.name==null?null:l.name)&&b.getAttribute("property")===(l.property==null?null:l.property)&&b.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&b.getAttribute("charset")===(l.charSet==null?null:l.charSet)){T.splice(P,1);break t}}b=g.createElement(f),ln(b,f,l),g.head.appendChild(b);break;default:throw Error(r(468,f))}b[bn]=i,Wt(b),f=b}i.stateNode=f}else _2(g,i.type,i.stateNode);else i.stateNode=E2(g,f,i.memoizedProps);else b!==f?(b===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):b.count--,f===null?_2(g,i.type,i.stateNode):E2(g,f,i.memoizedProps)):f===null&&i.stateNode!==null&&Yg(i,i.memoizedProps,l.memoizedProps)}break;case 27:nr(o,i),rr(i),f&512&&(Ct||l===null||Jr(l,l.return)),l!==null&&f&4&&Yg(i,i.memoizedProps,l.memoizedProps);break;case 5:if(nr(o,i),rr(i),f&512&&(Ct||l===null||Jr(l,l.return)),i.flags&32){g=i.stateNode;try{ya(g,"")}catch(ae){ct(i,i.return,ae)}}f&4&&i.stateNode!=null&&(g=i.memoizedProps,Yg(i,g,l!==null?l.memoizedProps:g)),f&1024&&(Zg=!0);break;case 6:if(nr(o,i),rr(i),f&4){if(i.stateNode===null)throw Error(r(162));f=i.memoizedProps,l=i.stateNode;try{l.nodeValue=f}catch(ae){ct(i,i.return,ae)}}break;case 3:if(dd=null,g=Pr,Pr=ud(o.containerInfo),nr(o,i),Pr=g,rr(i),f&4&&l!==null&&l.memoizedState.isDehydrated)try{Hl(o.containerInfo)}catch(ae){ct(i,i.return,ae)}Zg&&(Zg=!1,DE(i));break;case 4:f=Pr,Pr=ud(i.stateNode.containerInfo),nr(o,i),rr(i),Pr=f;break;case 12:nr(o,i),rr(i);break;case 13:nr(o,i),rr(i),i.child.flags&8192&&i.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(im=$t()),f&4&&(f=i.updateQueue,f!==null&&(i.updateQueue=null,Qg(i,f)));break;case 22:g=i.memoizedState!==null;var G=l!==null&&l.memoizedState!==null,ie=Ui,ue=Ct;if(Ui=ie||g,Ct=ue||G,nr(o,i),Ct=ue,Ui=ie,rr(i),f&8192)e:for(o=i.stateNode,o._visibility=g?o._visibility&-2:o._visibility|1,g&&(l===null||G||Ui||Ct||bo(i)),l=null,o=i;;){if(o.tag===5||o.tag===26){if(l===null){G=l=o;try{if(b=G.stateNode,g)T=b.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{P=G.stateNode;var ge=G.memoizedProps.style,oe=ge!=null&&ge.hasOwnProperty("display")?ge.display:null;P.style.display=oe==null||typeof oe=="boolean"?"":(""+oe).trim()}}catch(ae){ct(G,G.return,ae)}}}else if(o.tag===6){if(l===null){G=o;try{G.stateNode.nodeValue=g?"":G.memoizedProps}catch(ae){ct(G,G.return,ae)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===i)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break e;for(;o.sibling===null;){if(o.return===null||o.return===i)break e;l===o&&(l=null),o=o.return}l===o&&(l=null),o.sibling.return=o.return,o=o.sibling}f&4&&(f=i.updateQueue,f!==null&&(l=f.retryQueue,l!==null&&(f.retryQueue=null,Qg(i,l))));break;case 19:nr(o,i),rr(i),f&4&&(f=i.updateQueue,f!==null&&(i.updateQueue=null,Qg(i,f)));break;case 30:break;case 21:break;default:nr(o,i),rr(i)}}function rr(i){var o=i.flags;if(o&2){try{for(var l,f=i.return;f!==null;){if(EE(f)){l=f;break}f=f.return}if(l==null)throw Error(r(160));switch(l.tag){case 27:var g=l.stateNode,b=Wg(i);Zf(i,b,g);break;case 5:var T=l.stateNode;l.flags&32&&(ya(T,""),l.flags&=-33);var P=Wg(i);Zf(i,P,T);break;case 3:case 4:var G=l.stateNode.containerInfo,ie=Wg(i);Xg(i,ie,G);break;default:throw Error(r(161))}}catch(ue){ct(i,i.return,ue)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function DE(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var o=i;DE(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),i=i.sibling}}function vs(i,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)AE(i,o.alternate,o),o=o.sibling}function bo(i){for(i=i.child;i!==null;){var o=i;switch(o.tag){case 0:case 11:case 14:case 15:ws(4,o,o.return),bo(o);break;case 1:Jr(o,o.return);var l=o.stateNode;typeof l.componentWillUnmount=="function"&&wE(o,o.return,l),bo(o);break;case 27:Bl(o.stateNode);case 26:case 5:Jr(o,o.return),bo(o);break;case 22:o.memoizedState===null&&bo(o);break;case 30:bo(o);break;default:bo(o)}i=i.sibling}}function Es(i,o,l){for(l=l&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var f=o.alternate,g=i,b=o,T=b.flags;switch(b.tag){case 0:case 11:case 15:Es(g,b,l),xl(4,b);break;case 1:if(Es(g,b,l),f=b,g=f.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(ie){ct(f,f.return,ie)}if(f=b,g=f.updateQueue,g!==null){var P=f.stateNode;try{var G=g.shared.hiddenCallbacks;if(G!==null)for(g.shared.hiddenCallbacks=null,g=0;g<G.length;g++)i1(G[g],P)}catch(ie){ct(f,f.return,ie)}}l&&T&64&&bE(b),Rl(b,b.return);break;case 27:SE(b);case 26:case 5:Es(g,b,l),l&&f===null&&T&4&&vE(b),Rl(b,b.return);break;case 12:Es(g,b,l);break;case 13:Es(g,b,l),l&&T&4&&OE(g,b);break;case 22:b.memoizedState===null&&Es(g,b,l),Rl(b,b.return);break;case 30:break;default:Es(g,b,l)}o=o.sibling}}function Jg(i,o){var l=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),i=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(i=o.memoizedState.cachePool.pool),i!==l&&(i!=null&&i.refCount++,l!=null&&fl(l))}function em(i,o){i=null,o.alternate!==null&&(i=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==i&&(o.refCount++,i!=null&&fl(i))}function ei(i,o,l,f){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)IE(i,o,l,f),o=o.sibling}function IE(i,o,l,f){var g=o.flags;switch(o.tag){case 0:case 11:case 15:ei(i,o,l,f),g&2048&&xl(9,o);break;case 1:ei(i,o,l,f);break;case 3:ei(i,o,l,f),g&2048&&(i=null,o.alternate!==null&&(i=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==i&&(o.refCount++,i!=null&&fl(i)));break;case 12:if(g&2048){ei(i,o,l,f),i=o.stateNode;try{var b=o.memoizedProps,T=b.id,P=b.onPostCommit;typeof P=="function"&&P(T,o.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(G){ct(o,o.return,G)}}else ei(i,o,l,f);break;case 13:ei(i,o,l,f);break;case 23:break;case 22:b=o.stateNode,T=o.alternate,o.memoizedState!==null?b._visibility&2?ei(i,o,l,f):Ol(i,o):b._visibility&2?ei(i,o,l,f):(b._visibility|=2,Pa(i,o,l,f,(o.subtreeFlags&10256)!==0)),g&2048&&Jg(T,o);break;case 24:ei(i,o,l,f),g&2048&&em(o.alternate,o);break;default:ei(i,o,l,f)}}function Pa(i,o,l,f,g){for(g=g&&(o.subtreeFlags&10256)!==0,o=o.child;o!==null;){var b=i,T=o,P=l,G=f,ie=T.flags;switch(T.tag){case 0:case 11:case 15:Pa(b,T,P,G,g),xl(8,T);break;case 23:break;case 22:var ue=T.stateNode;T.memoizedState!==null?ue._visibility&2?Pa(b,T,P,G,g):Ol(b,T):(ue._visibility|=2,Pa(b,T,P,G,g)),g&&ie&2048&&Jg(T.alternate,T);break;case 24:Pa(b,T,P,G,g),g&&ie&2048&&em(T.alternate,T);break;default:Pa(b,T,P,G,g)}o=o.sibling}}function Ol(i,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var l=i,f=o,g=f.flags;switch(f.tag){case 22:Ol(l,f),g&2048&&Jg(f.alternate,f);break;case 24:Ol(l,f),g&2048&&em(f.alternate,f);break;default:Ol(l,f)}o=o.sibling}}var Tl=8192;function ka(i){if(i.subtreeFlags&Tl)for(i=i.child;i!==null;)CE(i),i=i.sibling}function CE(i){switch(i.tag){case 26:ka(i),i.flags&Tl&&i.memoizedState!==null&&S8(Pr,i.memoizedState,i.memoizedProps);break;case 5:ka(i);break;case 3:case 4:var o=Pr;Pr=ud(i.stateNode.containerInfo),ka(i),Pr=o;break;case 22:i.memoizedState===null&&(o=i.alternate,o!==null&&o.memoizedState!==null?(o=Tl,Tl=16777216,ka(i),Tl=o):ka(i));break;default:ka(i)}}function NE(i){var o=i.alternate;if(o!==null&&(i=o.child,i!==null)){o.child=null;do o=i.sibling,i.sibling=null,i=o;while(i!==null)}}function Dl(i){var o=i.deletions;if((i.flags&16)!==0){if(o!==null)for(var l=0;l<o.length;l++){var f=o[l];Zt=f,UE(f,i)}NE(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)$E(i),i=i.sibling}function $E(i){switch(i.tag){case 0:case 11:case 15:Dl(i),i.flags&2048&&ws(9,i,i.return);break;case 3:Dl(i);break;case 12:Dl(i);break;case 22:var o=i.stateNode;i.memoizedState!==null&&o._visibility&2&&(i.return===null||i.return.tag!==13)?(o._visibility&=-3,Qf(i)):Dl(i);break;default:Dl(i)}}function Qf(i){var o=i.deletions;if((i.flags&16)!==0){if(o!==null)for(var l=0;l<o.length;l++){var f=o[l];Zt=f,UE(f,i)}NE(i)}for(i=i.child;i!==null;){switch(o=i,o.tag){case 0:case 11:case 15:ws(8,o,o.return),Qf(o);break;case 22:l=o.stateNode,l._visibility&2&&(l._visibility&=-3,Qf(o));break;default:Qf(o)}i=i.sibling}}function UE(i,o){for(;Zt!==null;){var l=Zt;switch(l.tag){case 0:case 11:case 15:ws(8,l,o);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var f=l.memoizedState.cachePool.pool;f!=null&&f.refCount++}break;case 24:fl(l.memoizedState.cache)}if(f=l.child,f!==null)f.return=l,Zt=f;else e:for(l=i;Zt!==null;){f=Zt;var g=f.sibling,b=f.return;if(xE(f),f===l){Zt=null;break e}if(g!==null){g.return=b,Zt=g;break e}Zt=b}}}var MN={getCacheForType:function(i){var o=wn(Ht),l=o.data.get(i);return l===void 0&&(l=i(),o.data.set(i,l)),l}},LN=typeof WeakMap=="function"?WeakMap:Map,et=0,gt=null,Pe=null,ze=0,tt=0,ir=null,Ss=!1,Ma=!1,tm=!1,Pi=0,xt=0,_s=0,wo=0,nm=0,Sr=0,La=0,Il=null,Pn=null,rm=!1,im=0,Jf=1/0,ed=null,As=null,cn=0,xs=null,ja=null,za=0,sm=0,om=null,BE=null,Cl=0,am=null;function sr(){if((et&2)!==0&&ze!==0)return ze&-ze;if(R.T!==null){var i=Ta;return i!==0?i:pm()}return Zw()}function PE(){Sr===0&&(Sr=(ze&536870912)===0||Ye?Kw():536870912);var i=Er.current;return i!==null&&(i.flags|=32),Sr}function or(i,o,l){(i===gt&&(tt===2||tt===9)||i.cancelPendingCommit!==null)&&(qa(i,0),Rs(i,ze,Sr,!1)),Wc(i,l),((et&2)===0||i!==gt)&&(i===gt&&((et&2)===0&&(wo|=l),xt===4&&Rs(i,ze,Sr,!1)),ti(i))}function kE(i,o,l){if((et&6)!==0)throw Error(r(327));var f=!l&&(o&124)===0&&(o&i.expiredLanes)===0||it(i,o),g=f?qN(i,o):um(i,o,!0),b=f;do{if(g===0){Ma&&!f&&Rs(i,o,0,!1);break}else{if(l=i.current.alternate,b&&!jN(l)){g=um(i,o,!1),b=!1;continue}if(g===2){if(b=o,i.errorRecoveryDisabledLanes&b)var T=0;else T=i.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){o=T;e:{var P=i;g=Il;var G=P.current.memoizedState.isDehydrated;if(G&&(qa(P,T).flags|=256),T=um(P,T,!1),T!==2){if(tm&&!G){P.errorRecoveryDisabledLanes|=b,wo|=b,g=4;break e}b=Pn,Pn=g,b!==null&&(Pn===null?Pn=b:Pn.push.apply(Pn,b))}g=T}if(b=!1,g!==2)continue}}if(g===1){qa(i,0),Rs(i,o,0,!0);break}e:{switch(f=i,b=g,b){case 0:case 1:throw Error(r(345));case 4:if((o&4194048)!==o)break;case 6:Rs(f,o,Sr,!Ss);break e;case 2:Pn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((o&62914560)===o&&(g=im+300-$t(),10<g)){if(Rs(f,o,Sr,!Ss),Qe(f,0,!0)!==0)break e;f.timeoutHandle=d2(ME.bind(null,f,l,Pn,ed,rm,o,Sr,wo,La,Ss,b,2,-0,0),g);break e}ME(f,l,Pn,ed,rm,o,Sr,wo,La,Ss,b,0,-0,0)}}break}while(!0);ti(i)}function ME(i,o,l,f,g,b,T,P,G,ie,ue,ge,oe,ae){if(i.timeoutHandle=-1,ge=o.subtreeFlags,(ge&8192||(ge&16785408)===16785408)&&(Ml={stylesheets:null,count:0,unsuspend:E8},CE(o),ge=_8(),ge!==null)){i.cancelPendingCommit=ge(VE.bind(null,i,o,b,l,f,g,T,P,G,ue,1,oe,ae)),Rs(i,b,T,!ie);return}VE(i,o,b,l,f,g,T,P,G)}function jN(i){for(var o=i;;){var l=o.tag;if((l===0||l===11||l===15)&&o.flags&16384&&(l=o.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var f=0;f<l.length;f++){var g=l[f],b=g.getSnapshot;g=g.value;try{if(!er(b(),g))return!1}catch{return!1}}if(l=o.child,o.subtreeFlags&16384&&l!==null)l.return=o,o=l;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Rs(i,o,l,f){o&=~nm,o&=~wo,i.suspendedLanes|=o,i.pingedLanes&=~o,f&&(i.warmLanes|=o),f=i.expirationTimes;for(var g=o;0<g;){var b=31-x(g),T=1<<b;f[b]=-1,g&=~T}l!==0&&Ww(i,l,o)}function td(){return(et&6)===0?(Nl(0),!1):!0}function cm(){if(Pe!==null){if(tt===0)var i=Pe.return;else i=Pe,Ti=ho=null,xg(i),Ua=null,Sl=0,i=Pe;for(;i!==null;)yE(i.alternate,i),i=i.return;Pe=null}}function qa(i,o){var l=i.timeoutHandle;l!==-1&&(i.timeoutHandle=-1,i8(l)),l=i.cancelPendingCommit,l!==null&&(i.cancelPendingCommit=null,l()),cm(),gt=i,Pe=l=xi(i.current,null),ze=o,tt=0,ir=null,Ss=!1,Ma=it(i,o),tm=!1,La=Sr=nm=wo=_s=xt=0,Pn=Il=null,rm=!1,(o&8)!==0&&(o|=o&32);var f=i.entangledLanes;if(f!==0)for(i=i.entanglements,f&=o;0<f;){var g=31-x(f),b=1<<g;o|=i[g],f&=~b}return Pi=o,_f(),l}function LE(i,o){Ue=null,R.H=qf,o===hl||o===Nf?(o=n1(),tt=3):o===Jv?(o=n1(),tt=4):tt=o===rE?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,ir=o,Pe===null&&(xt=1,Kf(i,yr(o,i.current)))}function jE(){var i=R.H;return R.H=qf,i===null?qf:i}function zE(){var i=R.A;return R.A=MN,i}function lm(){xt=4,Ss||(ze&4194048)!==ze&&Er.current!==null||(Ma=!0),(_s&134217727)===0&&(wo&134217727)===0||gt===null||Rs(gt,ze,Sr,!1)}function um(i,o,l){var f=et;et|=2;var g=jE(),b=zE();(gt!==i||ze!==o)&&(ed=null,qa(i,o)),o=!1;var T=xt;e:do try{if(tt!==0&&Pe!==null){var P=Pe,G=ir;switch(tt){case 8:cm(),T=6;break e;case 3:case 2:case 9:case 6:Er.current===null&&(o=!0);var ie=tt;if(tt=0,ir=null,Ha(i,P,G,ie),l&&Ma){T=0;break e}break;default:ie=tt,tt=0,ir=null,Ha(i,P,G,ie)}}zN(),T=xt;break}catch(ue){LE(i,ue)}while(!0);return o&&i.shellSuspendCounter++,Ti=ho=null,et=f,R.H=g,R.A=b,Pe===null&&(gt=null,ze=0,_f()),T}function zN(){for(;Pe!==null;)qE(Pe)}function qN(i,o){var l=et;et|=2;var f=jE(),g=zE();gt!==i||ze!==o?(ed=null,Jf=$t()+500,qa(i,o)):Ma=it(i,o);e:do try{if(tt!==0&&Pe!==null){o=Pe;var b=ir;t:switch(tt){case 1:tt=0,ir=null,Ha(i,o,b,1);break;case 2:case 9:if(e1(b)){tt=0,ir=null,HE(o);break}o=function(){tt!==2&&tt!==9||gt!==i||(tt=7),ti(i)},b.then(o,o);break e;case 3:tt=7;break e;case 4:tt=5;break e;case 7:e1(b)?(tt=0,ir=null,HE(o)):(tt=0,ir=null,Ha(i,o,b,7));break;case 5:var T=null;switch(Pe.tag){case 26:T=Pe.memoizedState;case 5:case 27:var P=Pe;if(!T||A2(T)){tt=0,ir=null;var G=P.sibling;if(G!==null)Pe=G;else{var ie=P.return;ie!==null?(Pe=ie,nd(ie)):Pe=null}break t}}tt=0,ir=null,Ha(i,o,b,5);break;case 6:tt=0,ir=null,Ha(i,o,b,6);break;case 8:cm(),xt=6;break e;default:throw Error(r(462))}}HN();break}catch(ue){LE(i,ue)}while(!0);return Ti=ho=null,R.H=f,R.A=g,et=l,Pe!==null?0:(gt=null,ze=0,_f(),xt)}function HN(){for(;Pe!==null&&!Ze();)qE(Pe)}function qE(i){var o=gE(i.alternate,i,Pi);i.memoizedProps=i.pendingProps,o===null?nd(i):Pe=o}function HE(i){var o=i,l=o.alternate;switch(o.tag){case 15:case 0:o=lE(l,o,o.pendingProps,o.type,void 0,ze);break;case 11:o=lE(l,o,o.pendingProps,o.type.render,o.ref,ze);break;case 5:xg(o);default:yE(l,o),o=Pe=Fv(o,Pi),o=gE(l,o,Pi)}i.memoizedProps=i.pendingProps,o===null?nd(i):Pe=o}function Ha(i,o,l,f){Ti=ho=null,xg(o),Ua=null,Sl=0;var g=o.return;try{if(NN(i,g,o,l,ze)){xt=1,Kf(i,yr(l,i.current)),Pe=null;return}}catch(b){if(g!==null)throw Pe=g,b;xt=1,Kf(i,yr(l,i.current)),Pe=null;return}o.flags&32768?(Ye||f===1?i=!0:Ma||(ze&536870912)!==0?i=!1:(Ss=i=!0,(f===2||f===9||f===3||f===6)&&(f=Er.current,f!==null&&f.tag===13&&(f.flags|=16384))),FE(o,i)):nd(o)}function nd(i){var o=i;do{if((o.flags&32768)!==0){FE(o,Ss);return}i=o.return;var l=UN(o.alternate,o,Pi);if(l!==null){Pe=l;return}if(o=o.sibling,o!==null){Pe=o;return}Pe=o=i}while(o!==null);xt===0&&(xt=5)}function FE(i,o){do{var l=BN(i.alternate,i);if(l!==null){l.flags&=32767,Pe=l;return}if(l=i.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!o&&(i=i.sibling,i!==null)){Pe=i;return}Pe=i=l}while(i!==null);xt=6,Pe=null}function VE(i,o,l,f,g,b,T,P,G){i.cancelPendingCommit=null;do rd();while(cn!==0);if((et&6)!==0)throw Error(r(327));if(o!==null){if(o===i.current)throw Error(r(177));if(b=o.lanes|o.childLanes,b|=eg,EC(i,l,b,T,P,G),i===gt&&(Pe=gt=null,ze=0),ja=o,xs=i,za=l,sm=b,om=g,BE=f,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,KN(Qn,function(){return XE(),null})):(i.callbackNode=null,i.callbackPriority=0),f=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||f){f=R.T,R.T=null,g=M.p,M.p=2,T=et,et|=4;try{PN(i,o,l)}finally{et=T,M.p=g,R.T=f}}cn=1,GE(),KE(),YE()}}function GE(){if(cn===1){cn=0;var i=xs,o=ja,l=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||l){l=R.T,R.T=null;var f=M.p;M.p=2;var g=et;et|=4;try{TE(o,i);var b=Sm,T=Uv(i.containerInfo),P=b.focusedElem,G=b.selectionRange;if(T!==P&&P&&P.ownerDocument&&$v(P.ownerDocument.documentElement,P)){if(G!==null&&Wp(P)){var ie=G.start,ue=G.end;if(ue===void 0&&(ue=ie),"selectionStart"in P)P.selectionStart=ie,P.selectionEnd=Math.min(ue,P.value.length);else{var ge=P.ownerDocument||document,oe=ge&&ge.defaultView||window;if(oe.getSelection){var ae=oe.getSelection(),De=P.textContent.length,Re=Math.min(G.start,De),at=G.end===void 0?Re:Math.min(G.end,De);!ae.extend&&Re>at&&(T=at,at=Re,Re=T);var J=Nv(P,Re),Z=Nv(P,at);if(J&&Z&&(ae.rangeCount!==1||ae.anchorNode!==J.node||ae.anchorOffset!==J.offset||ae.focusNode!==Z.node||ae.focusOffset!==Z.offset)){var ne=ge.createRange();ne.setStart(J.node,J.offset),ae.removeAllRanges(),Re>at?(ae.addRange(ne),ae.extend(Z.node,Z.offset)):(ne.setEnd(Z.node,Z.offset),ae.addRange(ne))}}}}for(ge=[],ae=P;ae=ae.parentNode;)ae.nodeType===1&&ge.push({element:ae,left:ae.scrollLeft,top:ae.scrollTop});for(typeof P.focus=="function"&&P.focus(),P=0;P<ge.length;P++){var he=ge[P];he.element.scrollLeft=he.left,he.element.scrollTop=he.top}}gd=!!Em,Sm=Em=null}finally{et=g,M.p=f,R.T=l}}i.current=o,cn=2}}function KE(){if(cn===2){cn=0;var i=xs,o=ja,l=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||l){l=R.T,R.T=null;var f=M.p;M.p=2;var g=et;et|=4;try{AE(i,o.alternate,o)}finally{et=g,M.p=f,R.T=l}}cn=3}}function YE(){if(cn===4||cn===3){cn=0,cs();var i=xs,o=ja,l=za,f=BE;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?cn=5:(cn=0,ja=xs=null,WE(i,i.pendingLanes));var g=i.pendingLanes;if(g===0&&(As=null),Tp(l),o=o.stateNode,U&&typeof U.onCommitFiberRoot=="function")try{U.onCommitFiberRoot(Xr,o,void 0,(o.current.flags&128)===128)}catch{}if(f!==null){o=R.T,g=M.p,M.p=2,R.T=null;try{for(var b=i.onRecoverableError,T=0;T<f.length;T++){var P=f[T];b(P.value,{componentStack:P.stack})}}finally{R.T=o,M.p=g}}(za&3)!==0&&rd(),ti(i),g=i.pendingLanes,(l&4194090)!==0&&(g&42)!==0?i===am?Cl++:(Cl=0,am=i):Cl=0,Nl(0)}}function WE(i,o){(i.pooledCacheLanes&=o)===0&&(o=i.pooledCache,o!=null&&(i.pooledCache=null,fl(o)))}function rd(i){return GE(),KE(),YE(),XE()}function XE(){if(cn!==5)return!1;var i=xs,o=sm;sm=0;var l=Tp(za),f=R.T,g=M.p;try{M.p=32>l?32:l,R.T=null,l=om,om=null;var b=xs,T=za;if(cn=0,ja=xs=null,za=0,(et&6)!==0)throw Error(r(331));var P=et;if(et|=4,$E(b.current),IE(b,b.current,T,l),et=P,Nl(0,!1),U&&typeof U.onPostCommitFiberRoot=="function")try{U.onPostCommitFiberRoot(Xr,b)}catch{}return!0}finally{M.p=g,R.T=f,WE(i,o)}}function ZE(i,o,l){o=yr(l,o),o=Lg(i.stateNode,o,2),i=gs(i,o,2),i!==null&&(Wc(i,2),ti(i))}function ct(i,o,l){if(i.tag===3)ZE(i,i,l);else for(;o!==null;){if(o.tag===3){ZE(o,i,l);break}else if(o.tag===1){var f=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(As===null||!As.has(f))){i=yr(l,i),l=tE(2),f=gs(o,l,2),f!==null&&(nE(l,f,o,i),Wc(f,2),ti(f));break}}o=o.return}}function fm(i,o,l){var f=i.pingCache;if(f===null){f=i.pingCache=new LN;var g=new Set;f.set(o,g)}else g=f.get(o),g===void 0&&(g=new Set,f.set(o,g));g.has(l)||(tm=!0,g.add(l),i=FN.bind(null,i,o,l),o.then(i,i))}function FN(i,o,l){var f=i.pingCache;f!==null&&f.delete(o),i.pingedLanes|=i.suspendedLanes&l,i.warmLanes&=~l,gt===i&&(ze&l)===l&&(xt===4||xt===3&&(ze&62914560)===ze&&300>$t()-im?(et&2)===0&&qa(i,0):nm|=l,La===ze&&(La=0)),ti(i)}function QE(i,o){o===0&&(o=Yw()),i=Aa(i,o),i!==null&&(Wc(i,o),ti(i))}function VN(i){var o=i.memoizedState,l=0;o!==null&&(l=o.retryLane),QE(i,l)}function GN(i,o){var l=0;switch(i.tag){case 13:var f=i.stateNode,g=i.memoizedState;g!==null&&(l=g.retryLane);break;case 19:f=i.stateNode;break;case 22:f=i.stateNode._retryCache;break;default:throw Error(r(314))}f!==null&&f.delete(o),QE(i,l)}function KN(i,o){return qt(i,o)}var id=null,Fa=null,dm=!1,sd=!1,hm=!1,vo=0;function ti(i){i!==Fa&&i.next===null&&(Fa===null?id=Fa=i:Fa=Fa.next=i),sd=!0,dm||(dm=!0,WN())}function Nl(i,o){if(!hm&&sd){hm=!0;do for(var l=!1,f=id;f!==null;){if(i!==0){var g=f.pendingLanes;if(g===0)var b=0;else{var T=f.suspendedLanes,P=f.pingedLanes;b=(1<<31-x(42|i)+1)-1,b&=g&~(T&~P),b=b&201326741?b&201326741|1:b?b|2:0}b!==0&&(l=!0,n2(f,b))}else b=ze,b=Qe(f,f===gt?b:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),(b&3)===0||it(f,b)||(l=!0,n2(f,b));f=f.next}while(l);hm=!1}}function YN(){JE()}function JE(){sd=dm=!1;var i=0;vo!==0&&(r8()&&(i=vo),vo=0);for(var o=$t(),l=null,f=id;f!==null;){var g=f.next,b=e2(f,o);b===0?(f.next=null,l===null?id=g:l.next=g,g===null&&(Fa=l)):(l=f,(i!==0||(b&3)!==0)&&(sd=!0)),f=g}Nl(i)}function e2(i,o){for(var l=i.suspendedLanes,f=i.pingedLanes,g=i.expirationTimes,b=i.pendingLanes&-62914561;0<b;){var T=31-x(b),P=1<<T,G=g[T];G===-1?((P&l)===0||(P&f)!==0)&&(g[T]=Je(P,o)):G<=o&&(i.expiredLanes|=P),b&=~P}if(o=gt,l=ze,l=Qe(i,i===o?l:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),f=i.callbackNode,l===0||i===o&&(tt===2||tt===9)||i.cancelPendingCommit!==null)return f!==null&&f!==null&&Dt(f),i.callbackNode=null,i.callbackPriority=0;if((l&3)===0||it(i,l)){if(o=l&-l,o===i.callbackPriority)return o;switch(f!==null&&Dt(f),Tp(l)){case 2:case 8:l=ls;break;case 32:l=Qn;break;case 268435456:l=Si;break;default:l=Qn}return f=t2.bind(null,i),l=qt(l,f),i.callbackPriority=o,i.callbackNode=l,o}return f!==null&&f!==null&&Dt(f),i.callbackPriority=2,i.callbackNode=null,2}function t2(i,o){if(cn!==0&&cn!==5)return i.callbackNode=null,i.callbackPriority=0,null;var l=i.callbackNode;if(rd()&&i.callbackNode!==l)return null;var f=ze;return f=Qe(i,i===gt?f:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),f===0?null:(kE(i,f,o),e2(i,$t()),i.callbackNode!=null&&i.callbackNode===l?t2.bind(null,i):null)}function n2(i,o){if(rd())return null;kE(i,o,!0)}function WN(){s8(function(){(et&6)!==0?qt(no,YN):JE()})}function pm(){return vo===0&&(vo=Kw()),vo}function r2(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:mf(""+i)}function i2(i,o){var l=o.ownerDocument.createElement("input");return l.name=o.name,l.value=o.value,i.id&&l.setAttribute("form",i.id),o.parentNode.insertBefore(l,o),i=new FormData(i),l.parentNode.removeChild(l),i}function XN(i,o,l,f,g){if(o==="submit"&&l&&l.stateNode===g){var b=r2((g[Nn]||null).action),T=f.submitter;T&&(o=(o=T[Nn]||null)?r2(o.formAction):T.getAttribute("formAction"),o!==null&&(b=o,T=null));var P=new vf("action","action",null,f,g);i.push({event:P,listeners:[{instance:null,listener:function(){if(f.defaultPrevented){if(vo!==0){var G=T?i2(g,T):new FormData(g);Ug(l,{pending:!0,data:G,method:g.method,action:b},null,G)}}else typeof b=="function"&&(P.preventDefault(),G=T?i2(g,T):new FormData(g),Ug(l,{pending:!0,data:G,method:g.method,action:b},b,G))},currentTarget:g}]})}}for(var gm=0;gm<Jp.length;gm++){var mm=Jp[gm],ZN=mm.toLowerCase(),QN=mm[0].toUpperCase()+mm.slice(1);Br(ZN,"on"+QN)}Br(kv,"onAnimationEnd"),Br(Mv,"onAnimationIteration"),Br(Lv,"onAnimationStart"),Br("dblclick","onDoubleClick"),Br("focusin","onFocus"),Br("focusout","onBlur"),Br(gN,"onTransitionRun"),Br(mN,"onTransitionStart"),Br(yN,"onTransitionCancel"),Br(jv,"onTransitionEnd"),pa("onMouseEnter",["mouseout","mouseover"]),pa("onMouseLeave",["mouseout","mouseover"]),pa("onPointerEnter",["pointerout","pointerover"]),pa("onPointerLeave",["pointerout","pointerover"]),ro("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ro("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ro("onBeforeInput",["compositionend","keypress","textInput","paste"]),ro("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ro("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ro("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $l="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),JN=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat($l));function s2(i,o){o=(o&4)!==0;for(var l=0;l<i.length;l++){var f=i[l],g=f.event;f=f.listeners;e:{var b=void 0;if(o)for(var T=f.length-1;0<=T;T--){var P=f[T],G=P.instance,ie=P.currentTarget;if(P=P.listener,G!==b&&g.isPropagationStopped())break e;b=P,g.currentTarget=ie;try{b(g)}catch(ue){Gf(ue)}g.currentTarget=null,b=G}else for(T=0;T<f.length;T++){if(P=f[T],G=P.instance,ie=P.currentTarget,P=P.listener,G!==b&&g.isPropagationStopped())break e;b=P,g.currentTarget=ie;try{b(g)}catch(ue){Gf(ue)}g.currentTarget=null,b=G}}}}function ke(i,o){var l=o[Dp];l===void 0&&(l=o[Dp]=new Set);var f=i+"__bubble";l.has(f)||(o2(o,i,2,!1),l.add(f))}function ym(i,o,l){var f=0;o&&(f|=4),o2(l,i,f,o)}var od="_reactListening"+Math.random().toString(36).slice(2);function bm(i){if(!i[od]){i[od]=!0,Jw.forEach(function(l){l!=="selectionchange"&&(JN.has(l)||ym(l,!1,i),ym(l,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[od]||(o[od]=!0,ym("selectionchange",!1,o))}}function o2(i,o,l,f){switch(I2(o)){case 2:var g=R8;break;case 8:g=O8;break;default:g=Nm}l=g.bind(null,o,l,i),g=void 0,!jp||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(g=!0),f?g!==void 0?i.addEventListener(o,l,{capture:!0,passive:g}):i.addEventListener(o,l,!0):g!==void 0?i.addEventListener(o,l,{passive:g}):i.addEventListener(o,l,!1)}function wm(i,o,l,f,g){var b=f;if((o&1)===0&&(o&2)===0&&f!==null)e:for(;;){if(f===null)return;var T=f.tag;if(T===3||T===4){var P=f.stateNode.containerInfo;if(P===g)break;if(T===4)for(T=f.return;T!==null;){var G=T.tag;if((G===3||G===4)&&T.stateNode.containerInfo===g)return;T=T.return}for(;P!==null;){if(T=fa(P),T===null)return;if(G=T.tag,G===5||G===6||G===26||G===27){f=b=T;continue e}P=P.parentNode}}f=f.return}hv(function(){var ie=b,ue=Mp(l),ge=[];e:{var oe=zv.get(i);if(oe!==void 0){var ae=vf,De=i;switch(i){case"keypress":if(bf(l)===0)break e;case"keydown":case"keyup":ae=KC;break;case"focusin":De="focus",ae=Fp;break;case"focusout":De="blur",ae=Fp;break;case"beforeblur":case"afterblur":ae=Fp;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ae=mv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ae=BC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ae=XC;break;case kv:case Mv:case Lv:ae=MC;break;case jv:ae=QC;break;case"scroll":case"scrollend":ae=$C;break;case"wheel":ae=eN;break;case"copy":case"cut":case"paste":ae=jC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ae=bv;break;case"toggle":case"beforetoggle":ae=nN}var Re=(o&4)!==0,at=!Re&&(i==="scroll"||i==="scrollend"),J=Re?oe!==null?oe+"Capture":null:oe;Re=[];for(var Z=ie,ne;Z!==null;){var he=Z;if(ne=he.stateNode,he=he.tag,he!==5&&he!==26&&he!==27||ne===null||J===null||(he=Qc(Z,J),he!=null&&Re.push(Ul(Z,he,ne))),at)break;Z=Z.return}0<Re.length&&(oe=new ae(oe,De,null,l,ue),ge.push({event:oe,listeners:Re}))}}if((o&7)===0){e:{if(oe=i==="mouseover"||i==="pointerover",ae=i==="mouseout"||i==="pointerout",oe&&l!==kp&&(De=l.relatedTarget||l.fromElement)&&(fa(De)||De[ua]))break e;if((ae||oe)&&(oe=ue.window===ue?ue:(oe=ue.ownerDocument)?oe.defaultView||oe.parentWindow:window,ae?(De=l.relatedTarget||l.toElement,ae=ie,De=De?fa(De):null,De!==null&&(at=a(De),Re=De.tag,De!==at||Re!==5&&Re!==27&&Re!==6)&&(De=null)):(ae=null,De=ie),ae!==De)){if(Re=mv,he="onMouseLeave",J="onMouseEnter",Z="mouse",(i==="pointerout"||i==="pointerover")&&(Re=bv,he="onPointerLeave",J="onPointerEnter",Z="pointer"),at=ae==null?oe:Zc(ae),ne=De==null?oe:Zc(De),oe=new Re(he,Z+"leave",ae,l,ue),oe.target=at,oe.relatedTarget=ne,he=null,fa(ue)===ie&&(Re=new Re(J,Z+"enter",De,l,ue),Re.target=ne,Re.relatedTarget=at,he=Re),at=he,ae&&De)t:{for(Re=ae,J=De,Z=0,ne=Re;ne;ne=Va(ne))Z++;for(ne=0,he=J;he;he=Va(he))ne++;for(;0<Z-ne;)Re=Va(Re),Z--;for(;0<ne-Z;)J=Va(J),ne--;for(;Z--;){if(Re===J||J!==null&&Re===J.alternate)break t;Re=Va(Re),J=Va(J)}Re=null}else Re=null;ae!==null&&a2(ge,oe,ae,Re,!1),De!==null&&at!==null&&a2(ge,at,De,Re,!0)}}e:{if(oe=ie?Zc(ie):window,ae=oe.nodeName&&oe.nodeName.toLowerCase(),ae==="select"||ae==="input"&&oe.type==="file")var Se=Rv;else if(Av(oe))if(Ov)Se=dN;else{Se=uN;var Be=lN}else ae=oe.nodeName,!ae||ae.toLowerCase()!=="input"||oe.type!=="checkbox"&&oe.type!=="radio"?ie&&Pp(ie.elementType)&&(Se=Rv):Se=fN;if(Se&&(Se=Se(i,ie))){xv(ge,Se,l,ue);break e}Be&&Be(i,oe,ie),i==="focusout"&&ie&&oe.type==="number"&&ie.memoizedProps.value!=null&&Bp(oe,"number",oe.value)}switch(Be=ie?Zc(ie):window,i){case"focusin":(Av(Be)||Be.contentEditable==="true")&&(Ea=Be,Xp=ie,ol=null);break;case"focusout":ol=Xp=Ea=null;break;case"mousedown":Zp=!0;break;case"contextmenu":case"mouseup":case"dragend":Zp=!1,Bv(ge,l,ue);break;case"selectionchange":if(pN)break;case"keydown":case"keyup":Bv(ge,l,ue)}var _e;if(Gp)e:{switch(i){case"compositionstart":var Oe="onCompositionStart";break e;case"compositionend":Oe="onCompositionEnd";break e;case"compositionupdate":Oe="onCompositionUpdate";break e}Oe=void 0}else va?Sv(i,l)&&(Oe="onCompositionEnd"):i==="keydown"&&l.keyCode===229&&(Oe="onCompositionStart");Oe&&(wv&&l.locale!=="ko"&&(va||Oe!=="onCompositionStart"?Oe==="onCompositionEnd"&&va&&(_e=pv()):(fs=ue,zp="value"in fs?fs.value:fs.textContent,va=!0)),Be=ad(ie,Oe),0<Be.length&&(Oe=new yv(Oe,i,null,l,ue),ge.push({event:Oe,listeners:Be}),_e?Oe.data=_e:(_e=_v(l),_e!==null&&(Oe.data=_e)))),(_e=iN?sN(i,l):oN(i,l))&&(Oe=ad(ie,"onBeforeInput"),0<Oe.length&&(Be=new yv("onBeforeInput","beforeinput",null,l,ue),ge.push({event:Be,listeners:Oe}),Be.data=_e)),XN(ge,i,ie,l,ue)}s2(ge,o)})}function Ul(i,o,l){return{instance:i,listener:o,currentTarget:l}}function ad(i,o){for(var l=o+"Capture",f=[];i!==null;){var g=i,b=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||b===null||(g=Qc(i,l),g!=null&&f.unshift(Ul(i,g,b)),g=Qc(i,o),g!=null&&f.push(Ul(i,g,b))),i.tag===3)return f;i=i.return}return[]}function Va(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function a2(i,o,l,f,g){for(var b=o._reactName,T=[];l!==null&&l!==f;){var P=l,G=P.alternate,ie=P.stateNode;if(P=P.tag,G!==null&&G===f)break;P!==5&&P!==26&&P!==27||ie===null||(G=ie,g?(ie=Qc(l,b),ie!=null&&T.unshift(Ul(l,ie,G))):g||(ie=Qc(l,b),ie!=null&&T.push(Ul(l,ie,G)))),l=l.return}T.length!==0&&i.push({event:o,listeners:T})}var e8=/\r\n?/g,t8=/\u0000|\uFFFD/g;function c2(i){return(typeof i=="string"?i:""+i).replace(e8,`
`).replace(t8,"")}function l2(i,o){return o=c2(o),c2(i)===o}function cd(){}function ot(i,o,l,f,g,b){switch(l){case"children":typeof f=="string"?o==="body"||o==="textarea"&&f===""||ya(i,f):(typeof f=="number"||typeof f=="bigint")&&o!=="body"&&ya(i,""+f);break;case"className":hf(i,"class",f);break;case"tabIndex":hf(i,"tabindex",f);break;case"dir":case"role":case"viewBox":case"width":case"height":hf(i,l,f);break;case"style":fv(i,f,b);break;case"data":if(o!=="object"){hf(i,"data",f);break}case"src":case"href":if(f===""&&(o!=="a"||l!=="href")){i.removeAttribute(l);break}if(f==null||typeof f=="function"||typeof f=="symbol"||typeof f=="boolean"){i.removeAttribute(l);break}f=mf(""+f),i.setAttribute(l,f);break;case"action":case"formAction":if(typeof f=="function"){i.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof b=="function"&&(l==="formAction"?(o!=="input"&&ot(i,o,"name",g.name,g,null),ot(i,o,"formEncType",g.formEncType,g,null),ot(i,o,"formMethod",g.formMethod,g,null),ot(i,o,"formTarget",g.formTarget,g,null)):(ot(i,o,"encType",g.encType,g,null),ot(i,o,"method",g.method,g,null),ot(i,o,"target",g.target,g,null)));if(f==null||typeof f=="symbol"||typeof f=="boolean"){i.removeAttribute(l);break}f=mf(""+f),i.setAttribute(l,f);break;case"onClick":f!=null&&(i.onclick=cd);break;case"onScroll":f!=null&&ke("scroll",i);break;case"onScrollEnd":f!=null&&ke("scrollend",i);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(r(61));if(l=f.__html,l!=null){if(g.children!=null)throw Error(r(60));i.innerHTML=l}}break;case"multiple":i.multiple=f&&typeof f!="function"&&typeof f!="symbol";break;case"muted":i.muted=f&&typeof f!="function"&&typeof f!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(f==null||typeof f=="function"||typeof f=="boolean"||typeof f=="symbol"){i.removeAttribute("xlink:href");break}l=mf(""+f),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":f!=null&&typeof f!="function"&&typeof f!="symbol"?i.setAttribute(l,""+f):i.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":f&&typeof f!="function"&&typeof f!="symbol"?i.setAttribute(l,""):i.removeAttribute(l);break;case"capture":case"download":f===!0?i.setAttribute(l,""):f!==!1&&f!=null&&typeof f!="function"&&typeof f!="symbol"?i.setAttribute(l,f):i.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":f!=null&&typeof f!="function"&&typeof f!="symbol"&&!isNaN(f)&&1<=f?i.setAttribute(l,f):i.removeAttribute(l);break;case"rowSpan":case"start":f==null||typeof f=="function"||typeof f=="symbol"||isNaN(f)?i.removeAttribute(l):i.setAttribute(l,f);break;case"popover":ke("beforetoggle",i),ke("toggle",i),df(i,"popover",f);break;case"xlinkActuate":_i(i,"http://www.w3.org/1999/xlink","xlink:actuate",f);break;case"xlinkArcrole":_i(i,"http://www.w3.org/1999/xlink","xlink:arcrole",f);break;case"xlinkRole":_i(i,"http://www.w3.org/1999/xlink","xlink:role",f);break;case"xlinkShow":_i(i,"http://www.w3.org/1999/xlink","xlink:show",f);break;case"xlinkTitle":_i(i,"http://www.w3.org/1999/xlink","xlink:title",f);break;case"xlinkType":_i(i,"http://www.w3.org/1999/xlink","xlink:type",f);break;case"xmlBase":_i(i,"http://www.w3.org/XML/1998/namespace","xml:base",f);break;case"xmlLang":_i(i,"http://www.w3.org/XML/1998/namespace","xml:lang",f);break;case"xmlSpace":_i(i,"http://www.w3.org/XML/1998/namespace","xml:space",f);break;case"is":df(i,"is",f);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=CC.get(l)||l,df(i,l,f))}}function vm(i,o,l,f,g,b){switch(l){case"style":fv(i,f,b);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(r(61));if(l=f.__html,l!=null){if(g.children!=null)throw Error(r(60));i.innerHTML=l}}break;case"children":typeof f=="string"?ya(i,f):(typeof f=="number"||typeof f=="bigint")&&ya(i,""+f);break;case"onScroll":f!=null&&ke("scroll",i);break;case"onScrollEnd":f!=null&&ke("scrollend",i);break;case"onClick":f!=null&&(i.onclick=cd);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ev.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(g=l.endsWith("Capture"),o=l.slice(2,g?l.length-7:void 0),b=i[Nn]||null,b=b!=null?b[l]:null,typeof b=="function"&&i.removeEventListener(o,b,g),typeof f=="function")){typeof b!="function"&&b!==null&&(l in i?i[l]=null:i.hasAttribute(l)&&i.removeAttribute(l)),i.addEventListener(o,f,g);break e}l in i?i[l]=f:f===!0?i.setAttribute(l,""):df(i,l,f)}}}function ln(i,o,l){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ke("error",i),ke("load",i);var f=!1,g=!1,b;for(b in l)if(l.hasOwnProperty(b)){var T=l[b];if(T!=null)switch(b){case"src":f=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,o));default:ot(i,o,b,T,l,null)}}g&&ot(i,o,"srcSet",l.srcSet,l,null),f&&ot(i,o,"src",l.src,l,null);return;case"input":ke("invalid",i);var P=b=T=g=null,G=null,ie=null;for(f in l)if(l.hasOwnProperty(f)){var ue=l[f];if(ue!=null)switch(f){case"name":g=ue;break;case"type":T=ue;break;case"checked":G=ue;break;case"defaultChecked":ie=ue;break;case"value":b=ue;break;case"defaultValue":P=ue;break;case"children":case"dangerouslySetInnerHTML":if(ue!=null)throw Error(r(137,o));break;default:ot(i,o,f,ue,l,null)}}av(i,b,P,G,ie,T,g,!1),pf(i);return;case"select":ke("invalid",i),f=T=b=null;for(g in l)if(l.hasOwnProperty(g)&&(P=l[g],P!=null))switch(g){case"value":b=P;break;case"defaultValue":T=P;break;case"multiple":f=P;default:ot(i,o,g,P,l,null)}o=b,l=T,i.multiple=!!f,o!=null?ma(i,!!f,o,!1):l!=null&&ma(i,!!f,l,!0);return;case"textarea":ke("invalid",i),b=g=f=null;for(T in l)if(l.hasOwnProperty(T)&&(P=l[T],P!=null))switch(T){case"value":f=P;break;case"defaultValue":g=P;break;case"children":b=P;break;case"dangerouslySetInnerHTML":if(P!=null)throw Error(r(91));break;default:ot(i,o,T,P,l,null)}lv(i,f,g,b),pf(i);return;case"option":for(G in l)if(l.hasOwnProperty(G)&&(f=l[G],f!=null))switch(G){case"selected":i.selected=f&&typeof f!="function"&&typeof f!="symbol";break;default:ot(i,o,G,f,l,null)}return;case"dialog":ke("beforetoggle",i),ke("toggle",i),ke("cancel",i),ke("close",i);break;case"iframe":case"object":ke("load",i);break;case"video":case"audio":for(f=0;f<$l.length;f++)ke($l[f],i);break;case"image":ke("error",i),ke("load",i);break;case"details":ke("toggle",i);break;case"embed":case"source":case"link":ke("error",i),ke("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ie in l)if(l.hasOwnProperty(ie)&&(f=l[ie],f!=null))switch(ie){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,o));default:ot(i,o,ie,f,l,null)}return;default:if(Pp(o)){for(ue in l)l.hasOwnProperty(ue)&&(f=l[ue],f!==void 0&&vm(i,o,ue,f,l,void 0));return}}for(P in l)l.hasOwnProperty(P)&&(f=l[P],f!=null&&ot(i,o,P,f,l,null))}function n8(i,o,l,f){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,b=null,T=null,P=null,G=null,ie=null,ue=null;for(ae in l){var ge=l[ae];if(l.hasOwnProperty(ae)&&ge!=null)switch(ae){case"checked":break;case"value":break;case"defaultValue":G=ge;default:f.hasOwnProperty(ae)||ot(i,o,ae,null,f,ge)}}for(var oe in f){var ae=f[oe];if(ge=l[oe],f.hasOwnProperty(oe)&&(ae!=null||ge!=null))switch(oe){case"type":b=ae;break;case"name":g=ae;break;case"checked":ie=ae;break;case"defaultChecked":ue=ae;break;case"value":T=ae;break;case"defaultValue":P=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(r(137,o));break;default:ae!==ge&&ot(i,o,oe,ae,f,ge)}}Up(i,T,P,G,ie,ue,b,g);return;case"select":ae=T=P=oe=null;for(b in l)if(G=l[b],l.hasOwnProperty(b)&&G!=null)switch(b){case"value":break;case"multiple":ae=G;default:f.hasOwnProperty(b)||ot(i,o,b,null,f,G)}for(g in f)if(b=f[g],G=l[g],f.hasOwnProperty(g)&&(b!=null||G!=null))switch(g){case"value":oe=b;break;case"defaultValue":P=b;break;case"multiple":T=b;default:b!==G&&ot(i,o,g,b,f,G)}o=P,l=T,f=ae,oe!=null?ma(i,!!l,oe,!1):!!f!=!!l&&(o!=null?ma(i,!!l,o,!0):ma(i,!!l,l?[]:"",!1));return;case"textarea":ae=oe=null;for(P in l)if(g=l[P],l.hasOwnProperty(P)&&g!=null&&!f.hasOwnProperty(P))switch(P){case"value":break;case"children":break;default:ot(i,o,P,null,f,g)}for(T in f)if(g=f[T],b=l[T],f.hasOwnProperty(T)&&(g!=null||b!=null))switch(T){case"value":oe=g;break;case"defaultValue":ae=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(r(91));break;default:g!==b&&ot(i,o,T,g,f,b)}cv(i,oe,ae);return;case"option":for(var De in l)if(oe=l[De],l.hasOwnProperty(De)&&oe!=null&&!f.hasOwnProperty(De))switch(De){case"selected":i.selected=!1;break;default:ot(i,o,De,null,f,oe)}for(G in f)if(oe=f[G],ae=l[G],f.hasOwnProperty(G)&&oe!==ae&&(oe!=null||ae!=null))switch(G){case"selected":i.selected=oe&&typeof oe!="function"&&typeof oe!="symbol";break;default:ot(i,o,G,oe,f,ae)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Re in l)oe=l[Re],l.hasOwnProperty(Re)&&oe!=null&&!f.hasOwnProperty(Re)&&ot(i,o,Re,null,f,oe);for(ie in f)if(oe=f[ie],ae=l[ie],f.hasOwnProperty(ie)&&oe!==ae&&(oe!=null||ae!=null))switch(ie){case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(r(137,o));break;default:ot(i,o,ie,oe,f,ae)}return;default:if(Pp(o)){for(var at in l)oe=l[at],l.hasOwnProperty(at)&&oe!==void 0&&!f.hasOwnProperty(at)&&vm(i,o,at,void 0,f,oe);for(ue in f)oe=f[ue],ae=l[ue],!f.hasOwnProperty(ue)||oe===ae||oe===void 0&&ae===void 0||vm(i,o,ue,oe,f,ae);return}}for(var J in l)oe=l[J],l.hasOwnProperty(J)&&oe!=null&&!f.hasOwnProperty(J)&&ot(i,o,J,null,f,oe);for(ge in f)oe=f[ge],ae=l[ge],!f.hasOwnProperty(ge)||oe===ae||oe==null&&ae==null||ot(i,o,ge,oe,f,ae)}var Em=null,Sm=null;function ld(i){return i.nodeType===9?i:i.ownerDocument}function u2(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function f2(i,o){if(i===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&o==="foreignObject"?0:i}function _m(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Am=null;function r8(){var i=window.event;return i&&i.type==="popstate"?i===Am?!1:(Am=i,!0):(Am=null,!1)}var d2=typeof setTimeout=="function"?setTimeout:void 0,i8=typeof clearTimeout=="function"?clearTimeout:void 0,h2=typeof Promise=="function"?Promise:void 0,s8=typeof queueMicrotask=="function"?queueMicrotask:typeof h2<"u"?function(i){return h2.resolve(null).then(i).catch(o8)}:d2;function o8(i){setTimeout(function(){throw i})}function Os(i){return i==="head"}function p2(i,o){var l=o,f=0,g=0;do{var b=l.nextSibling;if(i.removeChild(l),b&&b.nodeType===8)if(l=b.data,l==="/$"){if(0<f&&8>f){l=f;var T=i.ownerDocument;if(l&1&&Bl(T.documentElement),l&2&&Bl(T.body),l&4)for(l=T.head,Bl(l),T=l.firstChild;T;){var P=T.nextSibling,G=T.nodeName;T[Xc]||G==="SCRIPT"||G==="STYLE"||G==="LINK"&&T.rel.toLowerCase()==="stylesheet"||l.removeChild(T),T=P}}if(g===0){i.removeChild(b),Hl(o);return}g--}else l==="$"||l==="$?"||l==="$!"?g++:f=l.charCodeAt(0)-48;else f=0;l=b}while(l);Hl(o)}function xm(i){var o=i.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var l=o;switch(o=o.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":xm(l),Ip(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}i.removeChild(l)}}function a8(i,o,l,f){for(;i.nodeType===1;){var g=l;if(i.nodeName.toLowerCase()!==o.toLowerCase()){if(!f&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(f){if(!i[Xc])switch(o){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(b=i.getAttribute("rel"),b==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(b!==g.rel||i.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||i.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||i.getAttribute("title")!==(g.title==null?null:g.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(b=i.getAttribute("src"),(b!==(g.src==null?null:g.src)||i.getAttribute("type")!==(g.type==null?null:g.type)||i.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&b&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(o==="input"&&i.type==="hidden"){var b=g.name==null?null:""+g.name;if(g.type==="hidden"&&i.getAttribute("name")===b)return i}else return i;if(i=kr(i.nextSibling),i===null)break}return null}function c8(i,o,l){if(o==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!l||(i=kr(i.nextSibling),i===null))return null;return i}function Rm(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState==="complete"}function l8(i,o){var l=i.ownerDocument;if(i.data!=="$?"||l.readyState==="complete")o();else{var f=function(){o(),l.removeEventListener("DOMContentLoaded",f)};l.addEventListener("DOMContentLoaded",f),i._reactRetry=f}}function kr(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?"||o==="F!"||o==="F")break;if(o==="/$")return null}}return i}var Om=null;function g2(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var l=i.data;if(l==="$"||l==="$!"||l==="$?"){if(o===0)return i;o--}else l==="/$"&&o++}i=i.previousSibling}return null}function m2(i,o,l){switch(o=ld(l),i){case"html":if(i=o.documentElement,!i)throw Error(r(452));return i;case"head":if(i=o.head,!i)throw Error(r(453));return i;case"body":if(i=o.body,!i)throw Error(r(454));return i;default:throw Error(r(451))}}function Bl(i){for(var o=i.attributes;o.length;)i.removeAttributeNode(o[0]);Ip(i)}var _r=new Map,y2=new Set;function ud(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var ki=M.d;M.d={f:u8,r:f8,D:d8,C:h8,L:p8,m:g8,X:y8,S:m8,M:b8};function u8(){var i=ki.f(),o=td();return i||o}function f8(i){var o=da(i);o!==null&&o.tag===5&&o.type==="form"?k1(o):ki.r(i)}var Ga=typeof document>"u"?null:document;function b2(i,o,l){var f=Ga;if(f&&typeof o=="string"&&o){var g=mr(o);g='link[rel="'+i+'"][href="'+g+'"]',typeof l=="string"&&(g+='[crossorigin="'+l+'"]'),y2.has(g)||(y2.add(g),i={rel:i,crossOrigin:l,href:o},f.querySelector(g)===null&&(o=f.createElement("link"),ln(o,"link",i),Wt(o),f.head.appendChild(o)))}}function d8(i){ki.D(i),b2("dns-prefetch",i,null)}function h8(i,o){ki.C(i,o),b2("preconnect",i,o)}function p8(i,o,l){ki.L(i,o,l);var f=Ga;if(f&&i&&o){var g='link[rel="preload"][as="'+mr(o)+'"]';o==="image"&&l&&l.imageSrcSet?(g+='[imagesrcset="'+mr(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(g+='[imagesizes="'+mr(l.imageSizes)+'"]')):g+='[href="'+mr(i)+'"]';var b=g;switch(o){case"style":b=Ka(i);break;case"script":b=Ya(i)}_r.has(b)||(i=p({rel:"preload",href:o==="image"&&l&&l.imageSrcSet?void 0:i,as:o},l),_r.set(b,i),f.querySelector(g)!==null||o==="style"&&f.querySelector(Pl(b))||o==="script"&&f.querySelector(kl(b))||(o=f.createElement("link"),ln(o,"link",i),Wt(o),f.head.appendChild(o)))}}function g8(i,o){ki.m(i,o);var l=Ga;if(l&&i){var f=o&&typeof o.as=="string"?o.as:"script",g='link[rel="modulepreload"][as="'+mr(f)+'"][href="'+mr(i)+'"]',b=g;switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":b=Ya(i)}if(!_r.has(b)&&(i=p({rel:"modulepreload",href:i},o),_r.set(b,i),l.querySelector(g)===null)){switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(kl(b)))return}f=l.createElement("link"),ln(f,"link",i),Wt(f),l.head.appendChild(f)}}}function m8(i,o,l){ki.S(i,o,l);var f=Ga;if(f&&i){var g=ha(f).hoistableStyles,b=Ka(i);o=o||"default";var T=g.get(b);if(!T){var P={loading:0,preload:null};if(T=f.querySelector(Pl(b)))P.loading=5;else{i=p({rel:"stylesheet",href:i,"data-precedence":o},l),(l=_r.get(b))&&Tm(i,l);var G=T=f.createElement("link");Wt(G),ln(G,"link",i),G._p=new Promise(function(ie,ue){G.onload=ie,G.onerror=ue}),G.addEventListener("load",function(){P.loading|=1}),G.addEventListener("error",function(){P.loading|=2}),P.loading|=4,fd(T,o,f)}T={type:"stylesheet",instance:T,count:1,state:P},g.set(b,T)}}}function y8(i,o){ki.X(i,o);var l=Ga;if(l&&i){var f=ha(l).hoistableScripts,g=Ya(i),b=f.get(g);b||(b=l.querySelector(kl(g)),b||(i=p({src:i,async:!0},o),(o=_r.get(g))&&Dm(i,o),b=l.createElement("script"),Wt(b),ln(b,"link",i),l.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},f.set(g,b))}}function b8(i,o){ki.M(i,o);var l=Ga;if(l&&i){var f=ha(l).hoistableScripts,g=Ya(i),b=f.get(g);b||(b=l.querySelector(kl(g)),b||(i=p({src:i,async:!0,type:"module"},o),(o=_r.get(g))&&Dm(i,o),b=l.createElement("script"),Wt(b),ln(b,"link",i),l.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},f.set(g,b))}}function w2(i,o,l,f){var g=(g=me.current)?ud(g):null;if(!g)throw Error(r(446));switch(i){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(o=Ka(l.href),l=ha(g).hoistableStyles,f=l.get(o),f||(f={type:"style",instance:null,count:0,state:null},l.set(o,f)),f):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){i=Ka(l.href);var b=ha(g).hoistableStyles,T=b.get(i);if(T||(g=g.ownerDocument||g,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},b.set(i,T),(b=g.querySelector(Pl(i)))&&!b._p&&(T.instance=b,T.state.loading=5),_r.has(i)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},_r.set(i,l),b||w8(g,i,l,T.state))),o&&f===null)throw Error(r(528,""));return T}if(o&&f!==null)throw Error(r(529,""));return null;case"script":return o=l.async,l=l.src,typeof l=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=Ya(l),l=ha(g).hoistableScripts,f=l.get(o),f||(f={type:"script",instance:null,count:0,state:null},l.set(o,f)),f):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,i))}}function Ka(i){return'href="'+mr(i)+'"'}function Pl(i){return'link[rel="stylesheet"]['+i+"]"}function v2(i){return p({},i,{"data-precedence":i.precedence,precedence:null})}function w8(i,o,l,f){i.querySelector('link[rel="preload"][as="style"]['+o+"]")?f.loading=1:(o=i.createElement("link"),f.preload=o,o.addEventListener("load",function(){return f.loading|=1}),o.addEventListener("error",function(){return f.loading|=2}),ln(o,"link",l),Wt(o),i.head.appendChild(o))}function Ya(i){return'[src="'+mr(i)+'"]'}function kl(i){return"script[async]"+i}function E2(i,o,l){if(o.count++,o.instance===null)switch(o.type){case"style":var f=i.querySelector('style[data-href~="'+mr(l.href)+'"]');if(f)return o.instance=f,Wt(f),f;var g=p({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return f=(i.ownerDocument||i).createElement("style"),Wt(f),ln(f,"style",g),fd(f,l.precedence,i),o.instance=f;case"stylesheet":g=Ka(l.href);var b=i.querySelector(Pl(g));if(b)return o.state.loading|=4,o.instance=b,Wt(b),b;f=v2(l),(g=_r.get(g))&&Tm(f,g),b=(i.ownerDocument||i).createElement("link"),Wt(b);var T=b;return T._p=new Promise(function(P,G){T.onload=P,T.onerror=G}),ln(b,"link",f),o.state.loading|=4,fd(b,l.precedence,i),o.instance=b;case"script":return b=Ya(l.src),(g=i.querySelector(kl(b)))?(o.instance=g,Wt(g),g):(f=l,(g=_r.get(b))&&(f=p({},l),Dm(f,g)),i=i.ownerDocument||i,g=i.createElement("script"),Wt(g),ln(g,"link",f),i.head.appendChild(g),o.instance=g);case"void":return null;default:throw Error(r(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(f=o.instance,o.state.loading|=4,fd(f,l.precedence,i));return o.instance}function fd(i,o,l){for(var f=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=f.length?f[f.length-1]:null,b=g,T=0;T<f.length;T++){var P=f[T];if(P.dataset.precedence===o)b=P;else if(b!==g)break}b?b.parentNode.insertBefore(i,b.nextSibling):(o=l.nodeType===9?l.head:l,o.insertBefore(i,o.firstChild))}function Tm(i,o){i.crossOrigin==null&&(i.crossOrigin=o.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=o.referrerPolicy),i.title==null&&(i.title=o.title)}function Dm(i,o){i.crossOrigin==null&&(i.crossOrigin=o.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=o.referrerPolicy),i.integrity==null&&(i.integrity=o.integrity)}var dd=null;function S2(i,o,l){if(dd===null){var f=new Map,g=dd=new Map;g.set(l,f)}else g=dd,f=g.get(l),f||(f=new Map,g.set(l,f));if(f.has(i))return f;for(f.set(i,null),l=l.getElementsByTagName(i),g=0;g<l.length;g++){var b=l[g];if(!(b[Xc]||b[bn]||i==="link"&&b.getAttribute("rel")==="stylesheet")&&b.namespaceURI!=="http://www.w3.org/2000/svg"){var T=b.getAttribute(o)||"";T=i+T;var P=f.get(T);P?P.push(b):f.set(T,[b])}}return f}function _2(i,o,l){i=i.ownerDocument||i,i.head.insertBefore(l,o==="title"?i.querySelector("head > title"):null)}function v8(i,o,l){if(l===1||o.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return i=o.disabled,typeof o.precedence=="string"&&i==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function A2(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}var Ml=null;function E8(){}function S8(i,o,l){if(Ml===null)throw Error(r(475));var f=Ml;if(o.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var g=Ka(l.href),b=i.querySelector(Pl(g));if(b){i=b._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(f.count++,f=hd.bind(f),i.then(f,f)),o.state.loading|=4,o.instance=b,Wt(b);return}b=i.ownerDocument||i,l=v2(l),(g=_r.get(g))&&Tm(l,g),b=b.createElement("link"),Wt(b);var T=b;T._p=new Promise(function(P,G){T.onload=P,T.onerror=G}),ln(b,"link",l),o.instance=b}f.stylesheets===null&&(f.stylesheets=new Map),f.stylesheets.set(o,i),(i=o.state.preload)&&(o.state.loading&3)===0&&(f.count++,o=hd.bind(f),i.addEventListener("load",o),i.addEventListener("error",o))}}function _8(){if(Ml===null)throw Error(r(475));var i=Ml;return i.stylesheets&&i.count===0&&Im(i,i.stylesheets),0<i.count?function(o){var l=setTimeout(function(){if(i.stylesheets&&Im(i,i.stylesheets),i.unsuspend){var f=i.unsuspend;i.unsuspend=null,f()}},6e4);return i.unsuspend=o,function(){i.unsuspend=null,clearTimeout(l)}}:null}function hd(){if(this.count--,this.count===0){if(this.stylesheets)Im(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var pd=null;function Im(i,o){i.stylesheets=null,i.unsuspend!==null&&(i.count++,pd=new Map,o.forEach(A8,i),pd=null,hd.call(i))}function A8(i,o){if(!(o.state.loading&4)){var l=pd.get(i);if(l)var f=l.get(null);else{l=new Map,pd.set(i,l);for(var g=i.querySelectorAll("link[data-precedence],style[data-precedence]"),b=0;b<g.length;b++){var T=g[b];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(l.set(T.dataset.precedence,T),f=T)}f&&l.set(null,f)}g=o.instance,T=g.getAttribute("data-precedence"),b=l.get(T)||f,b===f&&l.set(null,g),l.set(T,g),this.count++,f=hd.bind(this),g.addEventListener("load",f),g.addEventListener("error",f),b?b.parentNode.insertBefore(g,b.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(g,i.firstChild)),o.state.loading|=4}}var Ll={$$typeof:D,Provider:null,Consumer:null,_currentValue:F,_currentValue2:F,_threadCount:0};function x8(i,o,l,f,g,b,T,P){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Rp(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Rp(0),this.hiddenUpdates=Rp(null),this.identifierPrefix=f,this.onUncaughtError=g,this.onCaughtError=b,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=P,this.incompleteTransitions=new Map}function x2(i,o,l,f,g,b,T,P,G,ie,ue,ge){return i=new x8(i,o,l,T,P,G,ie,ge),o=1,b===!0&&(o|=24),b=tr(3,null,null,o),i.current=b,b.stateNode=i,o=fg(),o.refCount++,i.pooledCache=o,o.refCount++,b.memoizedState={element:f,isDehydrated:l,cache:o},gg(b),i}function R2(i){return i?(i=xa,i):xa}function O2(i,o,l,f,g,b){g=R2(g),f.context===null?f.context=g:f.pendingContext=g,f=ps(o),f.payload={element:l},b=b===void 0?null:b,b!==null&&(f.callback=b),l=gs(i,f,o),l!==null&&(or(l,i,o),gl(l,i,o))}function T2(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var l=i.retryLane;i.retryLane=l!==0&&l<o?l:o}}function Cm(i,o){T2(i,o),(i=i.alternate)&&T2(i,o)}function D2(i){if(i.tag===13){var o=Aa(i,67108864);o!==null&&or(o,i,67108864),Cm(i,67108864)}}var gd=!0;function R8(i,o,l,f){var g=R.T;R.T=null;var b=M.p;try{M.p=2,Nm(i,o,l,f)}finally{M.p=b,R.T=g}}function O8(i,o,l,f){var g=R.T;R.T=null;var b=M.p;try{M.p=8,Nm(i,o,l,f)}finally{M.p=b,R.T=g}}function Nm(i,o,l,f){if(gd){var g=$m(f);if(g===null)wm(i,o,f,md,l),C2(i,f);else if(D8(g,i,o,l,f))f.stopPropagation();else if(C2(i,f),o&4&&-1<T8.indexOf(i)){for(;g!==null;){var b=da(g);if(b!==null)switch(b.tag){case 3:if(b=b.stateNode,b.current.memoizedState.isDehydrated){var T=We(b.pendingLanes);if(T!==0){var P=b;for(P.pendingLanes|=2,P.entangledLanes|=2;T;){var G=1<<31-x(T);P.entanglements[1]|=G,T&=~G}ti(b),(et&6)===0&&(Jf=$t()+500,Nl(0))}}break;case 13:P=Aa(b,2),P!==null&&or(P,b,2),td(),Cm(b,2)}if(b=$m(f),b===null&&wm(i,o,f,md,l),b===g)break;g=b}g!==null&&f.stopPropagation()}else wm(i,o,f,null,l)}}function $m(i){return i=Mp(i),Um(i)}var md=null;function Um(i){if(md=null,i=fa(i),i!==null){var o=a(i);if(o===null)i=null;else{var l=o.tag;if(l===13){if(i=c(o),i!==null)return i;i=null}else if(l===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null)}}return md=i,null}function I2(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Yc()){case no:return 2;case ls:return 8;case Qn:case Rn:return 32;case Si:return 268435456;default:return 32}default:return 32}}var Bm=!1,Ts=null,Ds=null,Is=null,jl=new Map,zl=new Map,Cs=[],T8="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function C2(i,o){switch(i){case"focusin":case"focusout":Ts=null;break;case"dragenter":case"dragleave":Ds=null;break;case"mouseover":case"mouseout":Is=null;break;case"pointerover":case"pointerout":jl.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":zl.delete(o.pointerId)}}function ql(i,o,l,f,g,b){return i===null||i.nativeEvent!==b?(i={blockedOn:o,domEventName:l,eventSystemFlags:f,nativeEvent:b,targetContainers:[g]},o!==null&&(o=da(o),o!==null&&D2(o)),i):(i.eventSystemFlags|=f,o=i.targetContainers,g!==null&&o.indexOf(g)===-1&&o.push(g),i)}function D8(i,o,l,f,g){switch(o){case"focusin":return Ts=ql(Ts,i,o,l,f,g),!0;case"dragenter":return Ds=ql(Ds,i,o,l,f,g),!0;case"mouseover":return Is=ql(Is,i,o,l,f,g),!0;case"pointerover":var b=g.pointerId;return jl.set(b,ql(jl.get(b)||null,i,o,l,f,g)),!0;case"gotpointercapture":return b=g.pointerId,zl.set(b,ql(zl.get(b)||null,i,o,l,f,g)),!0}return!1}function N2(i){var o=fa(i.target);if(o!==null){var l=a(o);if(l!==null){if(o=l.tag,o===13){if(o=c(l),o!==null){i.blockedOn=o,SC(i.priority,function(){if(l.tag===13){var f=sr();f=Op(f);var g=Aa(l,f);g!==null&&or(g,l,f),Cm(l,f)}});return}}else if(o===3&&l.stateNode.current.memoizedState.isDehydrated){i.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}i.blockedOn=null}function yd(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var l=$m(i.nativeEvent);if(l===null){l=i.nativeEvent;var f=new l.constructor(l.type,l);kp=f,l.target.dispatchEvent(f),kp=null}else return o=da(l),o!==null&&D2(o),i.blockedOn=l,!1;o.shift()}return!0}function $2(i,o,l){yd(i)&&l.delete(o)}function I8(){Bm=!1,Ts!==null&&yd(Ts)&&(Ts=null),Ds!==null&&yd(Ds)&&(Ds=null),Is!==null&&yd(Is)&&(Is=null),jl.forEach($2),zl.forEach($2)}function bd(i,o){i.blockedOn===o&&(i.blockedOn=null,Bm||(Bm=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,I8)))}var wd=null;function U2(i){wd!==i&&(wd=i,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){wd===i&&(wd=null);for(var o=0;o<i.length;o+=3){var l=i[o],f=i[o+1],g=i[o+2];if(typeof f!="function"){if(Um(f||l)===null)continue;break}var b=da(l);b!==null&&(i.splice(o,3),o-=3,Ug(b,{pending:!0,data:g,method:l.method,action:f},f,g))}}))}function Hl(i){function o(G){return bd(G,i)}Ts!==null&&bd(Ts,i),Ds!==null&&bd(Ds,i),Is!==null&&bd(Is,i),jl.forEach(o),zl.forEach(o);for(var l=0;l<Cs.length;l++){var f=Cs[l];f.blockedOn===i&&(f.blockedOn=null)}for(;0<Cs.length&&(l=Cs[0],l.blockedOn===null);)N2(l),l.blockedOn===null&&Cs.shift();if(l=(i.ownerDocument||i).$$reactFormReplay,l!=null)for(f=0;f<l.length;f+=3){var g=l[f],b=l[f+1],T=g[Nn]||null;if(typeof b=="function")T||U2(l);else if(T){var P=null;if(b&&b.hasAttribute("formAction")){if(g=b,T=b[Nn]||null)P=T.formAction;else if(Um(g)!==null)continue}else P=T.action;typeof P=="function"?l[f+1]=P:(l.splice(f,3),f-=3),U2(l)}}}function Pm(i){this._internalRoot=i}vd.prototype.render=Pm.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(r(409));var l=o.current,f=sr();O2(l,f,i,o,null,null)},vd.prototype.unmount=Pm.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;O2(i.current,2,null,i,null,null),td(),o[ua]=null}};function vd(i){this._internalRoot=i}vd.prototype.unstable_scheduleHydration=function(i){if(i){var o=Zw();i={blockedOn:null,target:i,priority:o};for(var l=0;l<Cs.length&&o!==0&&o<Cs[l].priority;l++);Cs.splice(l,0,i),l===0&&N2(i)}};var B2=t.version;if(B2!=="19.1.0")throw Error(r(527,B2,"19.1.0"));M.findDOMNode=function(i){var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(r(188)):(i=Object.keys(i).join(","),Error(r(268,i)));return i=d(o),i=i!==null?h(i):null,i=i===null?null:i.stateNode,i};var C8={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:R,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ed=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ed.isDisabled&&Ed.supportsFiber)try{Xr=Ed.inject(C8),U=Ed}catch{}}return Vl.createRoot=function(i,o){if(!s(i))throw Error(r(299));var l=!1,f="",g=Z1,b=Q1,T=J1,P=null;return o!=null&&(o.unstable_strictMode===!0&&(l=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(g=o.onUncaughtError),o.onCaughtError!==void 0&&(b=o.onCaughtError),o.onRecoverableError!==void 0&&(T=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(P=o.unstable_transitionCallbacks)),o=x2(i,1,!1,null,null,l,f,g,b,T,P,null),i[ua]=o.current,bm(i),new Pm(o)},Vl.hydrateRoot=function(i,o,l){if(!s(i))throw Error(r(299));var f=!1,g="",b=Z1,T=Q1,P=J1,G=null,ie=null;return l!=null&&(l.unstable_strictMode===!0&&(f=!0),l.identifierPrefix!==void 0&&(g=l.identifierPrefix),l.onUncaughtError!==void 0&&(b=l.onUncaughtError),l.onCaughtError!==void 0&&(T=l.onCaughtError),l.onRecoverableError!==void 0&&(P=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(G=l.unstable_transitionCallbacks),l.formState!==void 0&&(ie=l.formState)),o=x2(i,1,!0,o,l??null,f,g,b,T,P,G,ie),o.context=R2(null),l=o.current,f=sr(),f=Op(f),g=ps(f),g.callback=null,gs(l,g,f),l=f,o.current.lanes=l,Wc(o,l),ti(o),i[ua]=o.current,bm(i),new vd(o)},Vl.version="19.1.0",Vl}var V2;function z8(){if(V2)return Lm.exports;V2=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Lm.exports=j8(),Lm.exports}var q8=z8(),Gl={},G2;function H8(){if(G2)return Gl;G2=1,Object.defineProperty(Gl,"__esModule",{value:!0}),Gl.parse=c,Gl.serialize=h;const e=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,t=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,s=Object.prototype.toString,a=(()=>{const y=function(){};return y.prototype=Object.create(null),y})();function c(y,v){const w=new a,E=y.length;if(E<2)return w;const S=v?.decode||p;let A=0;do{const I=y.indexOf("=",A);if(I===-1)break;const D=y.indexOf(";",A),B=D===-1?E:D;if(I>B){A=y.lastIndexOf(";",I-1)+1;continue}const $=u(y,A,I),N=d(y,I,$),q=y.slice($,N);if(w[q]===void 0){let H=u(y,I+1,B),k=d(y,B,H);const K=S(y.slice(H,k));w[q]=K}A=B+1}while(A<E);return w}function u(y,v,w){do{const E=y.charCodeAt(v);if(E!==32&&E!==9)return v}while(++v<w);return w}function d(y,v,w){for(;v>w;){const E=y.charCodeAt(--v);if(E!==32&&E!==9)return v+1}return w}function h(y,v,w){const E=w?.encode||encodeURIComponent;if(!e.test(y))throw new TypeError(`argument name is invalid: ${y}`);const S=E(v);if(!t.test(S))throw new TypeError(`argument val is invalid: ${v}`);let A=y+"="+S;if(!w)return A;if(w.maxAge!==void 0){if(!Number.isInteger(w.maxAge))throw new TypeError(`option maxAge is invalid: ${w.maxAge}`);A+="; Max-Age="+w.maxAge}if(w.domain){if(!n.test(w.domain))throw new TypeError(`option domain is invalid: ${w.domain}`);A+="; Domain="+w.domain}if(w.path){if(!r.test(w.path))throw new TypeError(`option path is invalid: ${w.path}`);A+="; Path="+w.path}if(w.expires){if(!m(w.expires)||!Number.isFinite(w.expires.valueOf()))throw new TypeError(`option expires is invalid: ${w.expires}`);A+="; Expires="+w.expires.toUTCString()}if(w.httpOnly&&(A+="; HttpOnly"),w.secure&&(A+="; Secure"),w.partitioned&&(A+="; Partitioned"),w.priority)switch(typeof w.priority=="string"?w.priority.toLowerCase():void 0){case"low":A+="; Priority=Low";break;case"medium":A+="; Priority=Medium";break;case"high":A+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${w.priority}`)}if(w.sameSite)switch(typeof w.sameSite=="string"?w.sameSite.toLowerCase():w.sameSite){case!0:case"strict":A+="; SameSite=Strict";break;case"lax":A+="; SameSite=Lax";break;case"none":A+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${w.sameSite}`)}return A}function p(y){if(y.indexOf("%")===-1)return y;try{return decodeURIComponent(y)}catch{return y}}function m(y){return s.call(y)==="[object Date]"}return Gl}H8();var K2="popstate";function F8(e={}){function t(r,s){let{pathname:a,search:c,hash:u}=r.location;return m0("",{pathname:a,search:c,hash:u},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Iu(s)}return G8(t,n,null,e)}function _t(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function mi(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function V8(){return Math.random().toString(36).substring(2,10)}function Y2(e,t){return{usr:e.state,key:e.key,idx:t}}function m0(e,t,n=null,r){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Uc(t):t,state:n,key:t&&t.key||r||V8()}}function Iu({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Uc(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function G8(e,t,n,r={}){let{window:s=document.defaultView,v5Compat:a=!1}=r,c=s.history,u="POP",d=null,h=p();h==null&&(h=0,c.replaceState({...c.state,idx:h},""));function p(){return(c.state||{idx:null}).idx}function m(){u="POP";let S=p(),A=S==null?null:S-h;h=S,d&&d({action:u,location:E.location,delta:A})}function y(S,A){u="PUSH";let I=m0(E.location,S,A);h=p()+1;let D=Y2(I,h),B=E.createHref(I);try{c.pushState(D,"",B)}catch($){if($ instanceof DOMException&&$.name==="DataCloneError")throw $;s.location.assign(B)}a&&d&&d({action:u,location:E.location,delta:1})}function v(S,A){u="REPLACE";let I=m0(E.location,S,A);h=p();let D=Y2(I,h),B=E.createHref(I);c.replaceState(D,"",B),a&&d&&d({action:u,location:E.location,delta:0})}function w(S){return K8(S)}let E={get action(){return u},get location(){return e(s,c)},listen(S){if(d)throw new Error("A history only accepts one active listener");return s.addEventListener(K2,m),d=S,()=>{s.removeEventListener(K2,m),d=null}},createHref(S){return t(s,S)},createURL:w,encodeLocation(S){let A=w(S);return{pathname:A.pathname,search:A.search,hash:A.hash}},push:y,replace:v,go(S){return c.go(S)}};return E}function K8(e,t=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),_t(n,"No window.location.(origin|href) available to create URL");let r=typeof e=="string"?e:Iu(e);return r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function BR(e,t,n="/"){return Y8(e,t,n,!1)}function Y8(e,t,n,r){let s=typeof t=="string"?Uc(t):t,a=rs(s.pathname||"/",n);if(a==null)return null;let c=PR(e);W8(c);let u=null;for(let d=0;u==null&&d<c.length;++d){let h=o4(a);u=i4(c[d],h,r)}return u}function PR(e,t=[],n=[],r=""){let s=(a,c,u)=>{let d={relativePath:u===void 0?a.path||"":u,caseSensitive:a.caseSensitive===!0,childrenIndex:c,route:a};d.relativePath.startsWith("/")&&(_t(d.relativePath.startsWith(r),`Absolute route path "${d.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(r.length));let h=Ji([r,d.relativePath]),p=n.concat(d);a.children&&a.children.length>0&&(_t(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${h}".`),PR(a.children,t,p,h)),!(a.path==null&&!a.index)&&t.push({path:h,score:n4(h,a.index),routesMeta:p})};return e.forEach((a,c)=>{if(a.path===""||!a.path?.includes("?"))s(a,c);else for(let u of kR(a.path))s(a,c,u)}),t}function kR(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,s=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return s?[a,""]:[a];let c=kR(r.join("/")),u=[];return u.push(...c.map(d=>d===""?a:[a,d].join("/"))),s&&u.push(...c),u.map(d=>e.startsWith("/")&&d===""?"/":d)}function W8(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:r4(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var X8=/^:[\w-]+$/,Z8=3,Q8=2,J8=1,e4=10,t4=-2,W2=e=>e==="*";function n4(e,t){let n=e.split("/"),r=n.length;return n.some(W2)&&(r+=t4),t&&(r+=Q8),n.filter(s=>!W2(s)).reduce((s,a)=>s+(X8.test(a)?Z8:a===""?J8:e4),r)}function r4(e,t){return e.length===t.length&&e.slice(0,-1).every((r,s)=>r===t[s])?e[e.length-1]-t[t.length-1]:0}function i4(e,t,n=!1){let{routesMeta:r}=e,s={},a="/",c=[];for(let u=0;u<r.length;++u){let d=r[u],h=u===r.length-1,p=a==="/"?t:t.slice(a.length)||"/",m=gh({path:d.relativePath,caseSensitive:d.caseSensitive,end:h},p),y=d.route;if(!m&&h&&n&&!r[r.length-1].route.index&&(m=gh({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},p)),!m)return null;Object.assign(s,m.params),c.push({params:s,pathname:Ji([a,m.pathname]),pathnameBase:u4(Ji([a,m.pathnameBase])),route:y}),m.pathnameBase!=="/"&&(a=Ji([a,m.pathnameBase]))}return c}function gh(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=s4(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let a=s[0],c=a.replace(/(.)\/+$/,"$1"),u=s.slice(1);return{params:r.reduce((h,{paramName:p,isOptional:m},y)=>{if(p==="*"){let w=u[y]||"";c=a.slice(0,a.length-w.length).replace(/(.)\/+$/,"$1")}const v=u[y];return m&&!v?h[p]=void 0:h[p]=(v||"").replace(/%2F/g,"/"),h},{}),pathname:a,pathnameBase:c,pattern:e}}function s4(e,t=!1,n=!0){mi(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,u,d)=>(r.push({paramName:u,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),r]}function o4(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return mi(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function rs(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function a4(e,t="/"){let{pathname:n,search:r="",hash:s=""}=typeof e=="string"?Uc(e):e;return{pathname:n?n.startsWith("/")?n:c4(n,t):t,search:f4(r),hash:d4(s)}}function c4(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Hm(e,t,n,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function l4(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function MR(e){let t=l4(e);return t.map((n,r)=>r===t.length-1?n.pathname:n.pathnameBase)}function LR(e,t,n,r=!1){let s;typeof e=="string"?s=Uc(e):(s={...e},_t(!s.pathname||!s.pathname.includes("?"),Hm("?","pathname","search",s)),_t(!s.pathname||!s.pathname.includes("#"),Hm("#","pathname","hash",s)),_t(!s.search||!s.search.includes("#"),Hm("#","search","hash",s)));let a=e===""||s.pathname==="",c=a?"/":s.pathname,u;if(c==null)u=n;else{let m=t.length-1;if(!r&&c.startsWith("..")){let y=c.split("/");for(;y[0]==="..";)y.shift(),m-=1;s.pathname=y.join("/")}u=m>=0?t[m]:"/"}let d=a4(s,u),h=c&&c!=="/"&&c.endsWith("/"),p=(a||c===".")&&n.endsWith("/");return!d.pathname.endsWith("/")&&(h||p)&&(d.pathname+="/"),d}var Ji=e=>e.join("/").replace(/\/\/+/g,"/"),u4=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),f4=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,d4=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function h4(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var jR=["POST","PUT","PATCH","DELETE"];new Set(jR);var p4=["GET",...jR];new Set(p4);var Bc=z.createContext(null);Bc.displayName="DataRouter";var Mh=z.createContext(null);Mh.displayName="DataRouterState";var zR=z.createContext({isTransitioning:!1});zR.displayName="ViewTransition";var g4=z.createContext(new Map);g4.displayName="Fetchers";var m4=z.createContext(null);m4.displayName="Await";var vi=z.createContext(null);vi.displayName="Navigation";var Gu=z.createContext(null);Gu.displayName="Location";var Ei=z.createContext({outlet:null,matches:[],isDataRoute:!1});Ei.displayName="Route";var Cb=z.createContext(null);Cb.displayName="RouteError";function y4(e,{relative:t}={}){_t(Ku(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=z.useContext(vi),{hash:s,pathname:a,search:c}=Yu(e,{relative:t}),u=a;return n!=="/"&&(u=a==="/"?n:Ji([n,a])),r.createHref({pathname:u,search:c,hash:s})}function Ku(){return z.useContext(Gu)!=null}function Qo(){return _t(Ku(),"useLocation() may be used only in the context of a <Router> component."),z.useContext(Gu).location}var qR="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function HR(e){z.useContext(vi).static||z.useLayoutEffect(e)}function b4(){let{isDataRoute:e}=z.useContext(Ei);return e?$4():w4()}function w4(){_t(Ku(),"useNavigate() may be used only in the context of a <Router> component.");let e=z.useContext(Bc),{basename:t,navigator:n}=z.useContext(vi),{matches:r}=z.useContext(Ei),{pathname:s}=Qo(),a=JSON.stringify(MR(r)),c=z.useRef(!1);return HR(()=>{c.current=!0}),z.useCallback((d,h={})=>{if(mi(c.current,qR),!c.current)return;if(typeof d=="number"){n.go(d);return}let p=LR(d,JSON.parse(a),s,h.relative==="path");e==null&&t!=="/"&&(p.pathname=p.pathname==="/"?t:Ji([t,p.pathname])),(h.replace?n.replace:n.push)(p,h.state,h)},[t,n,a,s,e])}var v4=z.createContext(null);function E4(e){let t=z.useContext(Ei).outlet;return t&&z.createElement(v4.Provider,{value:e},t)}function Yu(e,{relative:t}={}){let{matches:n}=z.useContext(Ei),{pathname:r}=Qo(),s=JSON.stringify(MR(n));return z.useMemo(()=>LR(e,JSON.parse(s),r,t==="path"),[e,s,r,t])}function S4(e,t){return FR(e,t)}function FR(e,t,n,r){_t(Ku(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=z.useContext(vi),{matches:a}=z.useContext(Ei),c=a[a.length-1],u=c?c.params:{},d=c?c.pathname:"/",h=c?c.pathnameBase:"/",p=c&&c.route;{let A=p&&p.path||"";VR(d,!p||A.endsWith("*")||A.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${A}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${A}"> to <Route path="${A==="/"?"*":`${A}/*`}">.`)}let m=Qo(),y;if(t){let A=typeof t=="string"?Uc(t):t;_t(h==="/"||A.pathname?.startsWith(h),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${A.pathname}" was given in the \`location\` prop.`),y=A}else y=m;let v=y.pathname||"/",w=v;if(h!=="/"){let A=h.replace(/^\//,"").split("/");w="/"+v.replace(/^\//,"").split("/").slice(A.length).join("/")}let E=BR(e,{pathname:w});mi(p||E!=null,`No routes matched location "${y.pathname}${y.search}${y.hash}" `),mi(E==null||E[E.length-1].route.element!==void 0||E[E.length-1].route.Component!==void 0||E[E.length-1].route.lazy!==void 0,`Matched leaf route at location "${y.pathname}${y.search}${y.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let S=O4(E&&E.map(A=>Object.assign({},A,{params:Object.assign({},u,A.params),pathname:Ji([h,s.encodeLocation?s.encodeLocation(A.pathname).pathname:A.pathname]),pathnameBase:A.pathnameBase==="/"?h:Ji([h,s.encodeLocation?s.encodeLocation(A.pathnameBase).pathname:A.pathnameBase])})),a,n,r);return t&&S?z.createElement(Gu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...y},navigationType:"POP"}},S):S}function _4(){let e=N4(),t=h4(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},c=null;return console.error("Error handled by React Router default ErrorBoundary:",e),c=z.createElement(z.Fragment,null,z.createElement("p",null," Hey developer "),z.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",z.createElement("code",{style:a},"ErrorBoundary")," or"," ",z.createElement("code",{style:a},"errorElement")," prop on your route.")),z.createElement(z.Fragment,null,z.createElement("h2",null,"Unexpected Application Error!"),z.createElement("h3",{style:{fontStyle:"italic"}},t),n?z.createElement("pre",{style:s},n):null,c)}var A4=z.createElement(_4,null),x4=class extends z.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?z.createElement(Ei.Provider,{value:this.props.routeContext},z.createElement(Cb.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function R4({routeContext:e,match:t,children:n}){let r=z.useContext(Bc);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),z.createElement(Ei.Provider,{value:e},n)}function O4(e,t=[],n=null,r=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let s=e,a=n?.errors;if(a!=null){let d=s.findIndex(h=>h.route.id&&a?.[h.route.id]!==void 0);_t(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),s=s.slice(0,Math.min(s.length,d+1))}let c=!1,u=-1;if(n)for(let d=0;d<s.length;d++){let h=s[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=d),h.route.id){let{loaderData:p,errors:m}=n,y=h.route.loader&&!p.hasOwnProperty(h.route.id)&&(!m||m[h.route.id]===void 0);if(h.route.lazy||y){c=!0,u>=0?s=s.slice(0,u+1):s=[s[0]];break}}}return s.reduceRight((d,h,p)=>{let m,y=!1,v=null,w=null;n&&(m=a&&h.route.id?a[h.route.id]:void 0,v=h.route.errorElement||A4,c&&(u<0&&p===0?(VR("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),y=!0,w=null):u===p&&(y=!0,w=h.route.hydrateFallbackElement||null)));let E=t.concat(s.slice(0,p+1)),S=()=>{let A;return m?A=v:y?A=w:h.route.Component?A=z.createElement(h.route.Component,null):h.route.element?A=h.route.element:A=d,z.createElement(R4,{match:h,routeContext:{outlet:d,matches:E,isDataRoute:n!=null},children:A})};return n&&(h.route.ErrorBoundary||h.route.errorElement||p===0)?z.createElement(x4,{location:n.location,revalidation:n.revalidation,component:v,error:m,children:S(),routeContext:{outlet:null,matches:E,isDataRoute:!0}}):S()},null)}function Nb(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function T4(e){let t=z.useContext(Bc);return _t(t,Nb(e)),t}function D4(e){let t=z.useContext(Mh);return _t(t,Nb(e)),t}function I4(e){let t=z.useContext(Ei);return _t(t,Nb(e)),t}function $b(e){let t=I4(e),n=t.matches[t.matches.length-1];return _t(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function C4(){return $b("useRouteId")}function N4(){let e=z.useContext(Cb),t=D4("useRouteError"),n=$b("useRouteError");return e!==void 0?e:t.errors?.[n]}function $4(){let{router:e}=T4("useNavigate"),t=$b("useNavigate"),n=z.useRef(!1);return HR(()=>{n.current=!0}),z.useCallback(async(s,a={})=>{mi(n.current,qR),n.current&&(typeof s=="number"?e.navigate(s):await e.navigate(s,{fromRouteId:t,...a}))},[e,t])}var X2={};function VR(e,t,n){!t&&!X2[e]&&(X2[e]=!0,mi(!1,n))}z.memo(U4);function U4({routes:e,future:t,state:n}){return FR(e,void 0,n,t)}function B4(e){return E4(e.context)}function Io(e){_t(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function P4({basename:e="/",children:t=null,location:n,navigationType:r="POP",navigator:s,static:a=!1}){_t(!Ku(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=e.replace(/^\/*/,"/"),u=z.useMemo(()=>({basename:c,navigator:s,static:a,future:{}}),[c,s,a]);typeof n=="string"&&(n=Uc(n));let{pathname:d="/",search:h="",hash:p="",state:m=null,key:y="default"}=n,v=z.useMemo(()=>{let w=rs(d,c);return w==null?null:{location:{pathname:w,search:h,hash:p,state:m,key:y},navigationType:r}},[c,d,h,p,m,y,r]);return mi(v!=null,`<Router basename="${c}"> is not able to match the URL "${d}${h}${p}" because it does not start with the basename, so the <Router> won't render anything.`),v==null?null:z.createElement(vi.Provider,{value:u},z.createElement(Gu.Provider,{children:t,value:v}))}function k4({children:e,location:t}){return S4(y0(e),t)}function y0(e,t=[]){let n=[];return z.Children.forEach(e,(r,s)=>{if(!z.isValidElement(r))return;let a=[...t,s];if(r.type===z.Fragment){n.push.apply(n,y0(r.props.children,a));return}_t(r.type===Io,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),_t(!r.props.index||!r.props.children,"An index route cannot have child routes.");let c={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(c.children=y0(r.props.children,a)),n.push(c)}),n}var Jd="get",eh="application/x-www-form-urlencoded";function Lh(e){return e!=null&&typeof e.tagName=="string"}function M4(e){return Lh(e)&&e.tagName.toLowerCase()==="button"}function L4(e){return Lh(e)&&e.tagName.toLowerCase()==="form"}function j4(e){return Lh(e)&&e.tagName.toLowerCase()==="input"}function z4(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function q4(e,t){return e.button===0&&(!t||t==="_self")&&!z4(e)}var Sd=null;function H4(){if(Sd===null)try{new FormData(document.createElement("form"),0),Sd=!1}catch{Sd=!0}return Sd}var F4=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Fm(e){return e!=null&&!F4.has(e)?(mi(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${eh}"`),null):e}function V4(e,t){let n,r,s,a,c;if(L4(e)){let u=e.getAttribute("action");r=u?rs(u,t):null,n=e.getAttribute("method")||Jd,s=Fm(e.getAttribute("enctype"))||eh,a=new FormData(e)}else if(M4(e)||j4(e)&&(e.type==="submit"||e.type==="image")){let u=e.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=e.getAttribute("formaction")||u.getAttribute("action");if(r=d?rs(d,t):null,n=e.getAttribute("formmethod")||u.getAttribute("method")||Jd,s=Fm(e.getAttribute("formenctype"))||Fm(u.getAttribute("enctype"))||eh,a=new FormData(u,e),!H4()){let{name:h,type:p,value:m}=e;if(p==="image"){let y=h?`${h}.`:"";a.append(`${y}x`,"0"),a.append(`${y}y`,"0")}else h&&a.append(h,m)}}else{if(Lh(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Jd,r=null,s=eh,c=e}return a&&s==="text/plain"&&(c=a,a=void 0),{action:r,method:n.toLowerCase(),encType:s,formData:a,body:c}}function Ub(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}async function G4(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function K4(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function Y4(e,t,n){let r=await Promise.all(e.map(async s=>{let a=t.routes[s.route.id];if(a){let c=await G4(a,n);return c.links?c.links():[]}return[]}));return Q4(r.flat(1).filter(K4).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function Z2(e,t,n,r,s,a){let c=(d,h)=>n[h]?d.route.id!==n[h].route.id:!0,u=(d,h)=>n[h].pathname!==d.pathname||n[h].route.path?.endsWith("*")&&n[h].params["*"]!==d.params["*"];return a==="assets"?t.filter((d,h)=>c(d,h)||u(d,h)):a==="data"?t.filter((d,h)=>{let p=r.routes[d.route.id];if(!p||!p.hasLoader)return!1;if(c(d,h)||u(d,h))return!0;if(d.route.shouldRevalidate){let m=d.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof m=="boolean")return m}return!0}):[]}function W4(e,t,{includeHydrateFallback:n}={}){return X4(e.map(r=>{let s=t.routes[r.route.id];if(!s)return[];let a=[s.module];return s.clientActionModule&&(a=a.concat(s.clientActionModule)),s.clientLoaderModule&&(a=a.concat(s.clientLoaderModule)),n&&s.hydrateFallbackModule&&(a=a.concat(s.hydrateFallbackModule)),s.imports&&(a=a.concat(s.imports)),a}).flat(1))}function X4(e){return[...new Set(e)]}function Z4(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}function Q4(e,t){let n=new Set;return new Set(t),e.reduce((r,s)=>{let a=JSON.stringify(Z4(s));return n.has(a)||(n.add(a),r.push({key:a,link:s})),r},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var J4=new Set([100,101,204,205]);function e6(e,t){let n=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return n.pathname==="/"?n.pathname="_root.data":t&&rs(n.pathname,t)==="/"?n.pathname=`${t.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function GR(){let e=z.useContext(Bc);return Ub(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function t6(){let e=z.useContext(Mh);return Ub(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var Bb=z.createContext(void 0);Bb.displayName="FrameworkContext";function KR(){let e=z.useContext(Bb);return Ub(e,"You must render this element inside a <HydratedRouter> element"),e}function n6(e,t){let n=z.useContext(Bb),[r,s]=z.useState(!1),[a,c]=z.useState(!1),{onFocus:u,onBlur:d,onMouseEnter:h,onMouseLeave:p,onTouchStart:m}=t,y=z.useRef(null);z.useEffect(()=>{if(e==="render"&&c(!0),e==="viewport"){let E=A=>{A.forEach(I=>{c(I.isIntersecting)})},S=new IntersectionObserver(E,{threshold:.5});return y.current&&S.observe(y.current),()=>{S.disconnect()}}},[e]),z.useEffect(()=>{if(r){let E=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(E)}}},[r]);let v=()=>{s(!0)},w=()=>{s(!1),c(!1)};return n?e!=="intent"?[a,y,{}]:[a,y,{onFocus:Kl(u,v),onBlur:Kl(d,w),onMouseEnter:Kl(h,v),onMouseLeave:Kl(p,w),onTouchStart:Kl(m,v)}]:[!1,y,{}]}function Kl(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function r6({page:e,...t}){let{router:n}=GR(),r=z.useMemo(()=>BR(n.routes,e,n.basename),[n.routes,e,n.basename]);return r?z.createElement(s6,{page:e,matches:r,...t}):null}function i6(e){let{manifest:t,routeModules:n}=KR(),[r,s]=z.useState([]);return z.useEffect(()=>{let a=!1;return Y4(e,t,n).then(c=>{a||s(c)}),()=>{a=!0}},[e,t,n]),r}function s6({page:e,matches:t,...n}){let r=Qo(),{manifest:s,routeModules:a}=KR(),{basename:c}=GR(),{loaderData:u,matches:d}=t6(),h=z.useMemo(()=>Z2(e,t,d,s,r,"data"),[e,t,d,s,r]),p=z.useMemo(()=>Z2(e,t,d,s,r,"assets"),[e,t,d,s,r]),m=z.useMemo(()=>{if(e===r.pathname+r.search+r.hash)return[];let w=new Set,E=!1;if(t.forEach(A=>{let I=s.routes[A.route.id];!I||!I.hasLoader||(!h.some(D=>D.route.id===A.route.id)&&A.route.id in u&&a[A.route.id]?.shouldRevalidate||I.hasClientLoader?E=!0:w.add(A.route.id))}),w.size===0)return[];let S=e6(e,c);return E&&w.size>0&&S.searchParams.set("_routes",t.filter(A=>w.has(A.route.id)).map(A=>A.route.id).join(",")),[S.pathname+S.search]},[c,u,r,s,h,t,e,a]),y=z.useMemo(()=>W4(p,s),[p,s]),v=i6(p);return z.createElement(z.Fragment,null,m.map(w=>z.createElement("link",{key:w,rel:"prefetch",as:"fetch",href:w,...n})),y.map(w=>z.createElement("link",{key:w,rel:"modulepreload",href:w,...n})),v.map(({key:w,link:E})=>z.createElement("link",{key:w,...E})))}function o6(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var YR=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{YR&&(window.__reactRouterVersion="7.6.3")}catch{}function a6({basename:e,children:t,window:n}){let r=z.useRef();r.current==null&&(r.current=F8({window:n,v5Compat:!0}));let s=r.current,[a,c]=z.useState({action:s.action,location:s.location}),u=z.useCallback(d=>{z.startTransition(()=>c(d))},[c]);return z.useLayoutEffect(()=>s.listen(u),[s,u]),z.createElement(P4,{basename:e,children:t,location:a.location,navigationType:a.action,navigator:s})}var WR=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,XR=z.forwardRef(function({onClick:t,discover:n="render",prefetch:r="none",relative:s,reloadDocument:a,replace:c,state:u,target:d,to:h,preventScrollReset:p,viewTransition:m,...y},v){let{basename:w}=z.useContext(vi),E=typeof h=="string"&&WR.test(h),S,A=!1;if(typeof h=="string"&&E&&(S=h,YR))try{let k=new URL(window.location.href),K=h.startsWith("//")?new URL(k.protocol+h):new URL(h),Y=rs(K.pathname,w);K.origin===k.origin&&Y!=null?h=Y+K.search+K.hash:A=!0}catch{mi(!1,`<Link to="${h}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let I=y4(h,{relative:s}),[D,B,$]=n6(r,y),N=u6(h,{replace:c,state:u,target:d,preventScrollReset:p,relative:s,viewTransition:m});function q(k){t&&t(k),k.defaultPrevented||N(k)}let H=z.createElement("a",{...y,...$,href:S||I,onClick:A||a?t:q,ref:o6(v,B),target:d,"data-discover":!E&&n==="render"?"true":void 0});return D&&!E?z.createElement(z.Fragment,null,H,z.createElement(r6,{page:I})):H});XR.displayName="Link";var Co=z.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:r="",end:s=!1,style:a,to:c,viewTransition:u,children:d,...h},p){let m=Yu(c,{relative:h.relative}),y=Qo(),v=z.useContext(Mh),{navigator:w,basename:E}=z.useContext(vi),S=v!=null&&g6(m)&&u===!0,A=w.encodeLocation?w.encodeLocation(m).pathname:m.pathname,I=y.pathname,D=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;n||(I=I.toLowerCase(),D=D?D.toLowerCase():null,A=A.toLowerCase()),D&&E&&(D=rs(D,E)||D);const B=A!=="/"&&A.endsWith("/")?A.length-1:A.length;let $=I===A||!s&&I.startsWith(A)&&I.charAt(B)==="/",N=D!=null&&(D===A||!s&&D.startsWith(A)&&D.charAt(A.length)==="/"),q={isActive:$,isPending:N,isTransitioning:S},H=$?t:void 0,k;typeof r=="function"?k=r(q):k=[r,$?"active":null,N?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let K=typeof a=="function"?a(q):a;return z.createElement(XR,{...h,"aria-current":H,className:k,ref:p,style:K,to:c,viewTransition:u},typeof d=="function"?d(q):d)});Co.displayName="NavLink";var c6=z.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:r,replace:s,state:a,method:c=Jd,action:u,onSubmit:d,relative:h,preventScrollReset:p,viewTransition:m,...y},v)=>{let w=h6(),E=p6(u,{relative:h}),S=c.toLowerCase()==="get"?"get":"post",A=typeof u=="string"&&WR.test(u),I=D=>{if(d&&d(D),D.defaultPrevented)return;D.preventDefault();let B=D.nativeEvent.submitter,$=B?.getAttribute("formmethod")||c;w(B||D.currentTarget,{fetcherKey:t,method:$,navigate:n,replace:s,state:a,relative:h,preventScrollReset:p,viewTransition:m})};return z.createElement("form",{ref:v,method:S,action:E,onSubmit:r?d:I,...y,"data-discover":!A&&e==="render"?"true":void 0})});c6.displayName="Form";function l6(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ZR(e){let t=z.useContext(Bc);return _t(t,l6(e)),t}function u6(e,{target:t,replace:n,state:r,preventScrollReset:s,relative:a,viewTransition:c}={}){let u=b4(),d=Qo(),h=Yu(e,{relative:a});return z.useCallback(p=>{if(q4(p,t)){p.preventDefault();let m=n!==void 0?n:Iu(d)===Iu(h);u(e,{replace:m,state:r,preventScrollReset:s,relative:a,viewTransition:c})}},[d,u,h,n,r,t,e,s,a,c])}var f6=0,d6=()=>`__${String(++f6)}__`;function h6(){let{router:e}=ZR("useSubmit"),{basename:t}=z.useContext(vi),n=C4();return z.useCallback(async(r,s={})=>{let{action:a,method:c,encType:u,formData:d,body:h}=V4(r,t);if(s.navigate===!1){let p=s.fetcherKey||d6();await e.fetch(p,n,s.action||a,{preventScrollReset:s.preventScrollReset,formData:d,body:h,formMethod:s.method||c,formEncType:s.encType||u,flushSync:s.flushSync})}else await e.navigate(s.action||a,{preventScrollReset:s.preventScrollReset,formData:d,body:h,formMethod:s.method||c,formEncType:s.encType||u,replace:s.replace,state:s.state,fromRouteId:n,flushSync:s.flushSync,viewTransition:s.viewTransition})},[e,t,n])}function p6(e,{relative:t}={}){let{basename:n}=z.useContext(vi),r=z.useContext(Ei);_t(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),a={...Yu(e||".",{relative:t})},c=Qo();if(e==null){a.search=c.search;let u=new URLSearchParams(a.search),d=u.getAll("index");if(d.some(p=>p==="")){u.delete("index"),d.filter(m=>m).forEach(m=>u.append("index",m));let p=u.toString();a.search=p?`?${p}`:""}}return(!e||e===".")&&s.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(a.pathname=a.pathname==="/"?n:Ji([n,a.pathname])),Iu(a)}function g6(e,t={}){let n=z.useContext(zR);_t(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=ZR("useViewTransitionState"),s=Yu(e,{relative:t.relative});if(!n.isTransitioning)return!1;let a=rs(n.currentLocation.pathname,r)||n.currentLocation.pathname,c=rs(n.nextLocation.pathname,r)||n.nextLocation.pathname;return gh(s.pathname,c)!=null||gh(s.pathname,a)!=null}[...J4];var m6=UR();const _c=Qs(m6);let QR=null;const y6=e=>{QR=e};let dt=function(e){return e[e.debug=5]="debug",e[e.info=4]="info",e[e.log=3]="log",e[e.warn=2]="warn",e[e.error=1]="error",e}({});const b6=e=>{const{title:t,message:n}=e;return[`
    %c${t}
    ============================

    ${n}

    ============================
    `.replace(/\n[^\S\r\n]+/g,`
`).trim(),"font-weight:bold;font-family:monospace;"]},qe=async e=>{const{title:t,message:n,level:r,always:s}=e,a=await QR?.()?.get("logger.level")??dt.warn;if(!s&&a<r)return;const c=b6({title:t,message:n});switch(r){case dt.debug:console.debug(...c);break;case dt.info:console.info(...c);break;case dt.warn:console.warn(...c);break;case dt.error:console.error(...c);break;default:console.log(...c)}};qe.deprecate=e=>{const{pkg:t,subject:n,transition:r,level:s=dt.warn,message:a="",callback:c=null}=e,u=h=>h.charAt(0).toUpperCase()+h.slice(1),d=()=>qe({title:`${t?t+" ":""}Deprecation Notice`,message:`
      ${n?`${u(n)} is deprecated and will cease to work in future releases${t?" of "+t:""}.`:""}${a?`
`+a:""}${r?`
You can learn more (including a guide on common transition paths) here: ${r}`:""}
    `.trim(),level:s});return typeof c=="function"?async function(){return await d(),await c(...arguments)}:d()};function fe(e,t){if(!e){const a=new Error(`INVARIANT ${t}`);a.stack=a.stack?.split(`
`)?.filter(c=>!/at invariant/.test(c))?.join(`
`);for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];throw console.error(`

---

`,a,`

`,...r,`

---

`),a}}let _d;const w6=new Uint8Array(16);function v6(){if(!_d&&(_d=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!_d))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return _d(w6)}const hn=[];for(let e=0;e<256;++e)hn.push((e+256).toString(16).slice(1));function E6(e,t=0){return hn[e[t+0]]+hn[e[t+1]]+hn[e[t+2]]+hn[e[t+3]]+"-"+hn[e[t+4]]+hn[e[t+5]]+"-"+hn[e[t+6]]+hn[e[t+7]]+"-"+hn[e[t+8]]+hn[e[t+9]]+"-"+hn[e[t+10]]+hn[e[t+11]]+hn[e[t+12]]+hn[e[t+13]]+hn[e[t+14]]+hn[e[t+15]]}const S6=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Q2={randomUUID:S6};function Pb(e,t,n){if(Q2.randomUUID&&!e)return Q2.randomUUID();e=e||{};const r=e.random||(e.rng||v6)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,E6(r)}var rt=function(e){return e.UNKNOWN="UNKNOWN",e.SCRIPT="SCRIPT",e.TRANSACTION="TRANSACTION",e.GET_TRANSACTION_STATUS="GET_TRANSACTION_STATUS",e.GET_ACCOUNT="GET_ACCOUNT",e.GET_EVENTS="GET_EVENTS",e.PING="PING",e.GET_TRANSACTION="GET_TRANSACTION",e.GET_BLOCK="GET_BLOCK",e.GET_BLOCK_HEADER="GET_BLOCK_HEADER",e.GET_COLLECTION="GET_COLLECTION",e.GET_NETWORK_PARAMETERS="GET_NETWORK_PARAMETERS",e.SUBSCRIBE_EVENTS="SUBSCRIBE_EVENTS",e.GET_NODE_VERSION_INFO="GET_NODE_VERSION_INFO",e}({}),Wu=function(e){return e.BAD="BAD",e.OK="OK",e}({}),Cu=function(e){return e.AUTHORIZER="authorizer",e.PAYER="payer",e.PROPOSER="proposer",e}({}),jh=function(e){return e.ARGUMENT="ARGUMENT",e.ACCOUNT="ACCOUNT",e}({}),J2=function(e){return e[e.UNKNOWN_ERROR=-1]="UNKNOWN_ERROR",e[e.TX_VALIDATION_ERROR=1e3]="TX_VALIDATION_ERROR",e[e.INVALID_TX_BYTE_SIZE_ERROR=1001]="INVALID_TX_BYTE_SIZE_ERROR",e[e.INVALID_REFERENCE_BLOCK_ERROR=1002]="INVALID_REFERENCE_BLOCK_ERROR",e[e.EXPIRED_TRANSACTION_ERROR=1003]="EXPIRED_TRANSACTION_ERROR",e[e.INVALID_SCRIPT_ERROR=1004]="INVALID_SCRIPT_ERROR",e[e.INVALID_GAS_LIMIT_ERROR=1005]="INVALID_GAS_LIMIT_ERROR",e[e.INVALID_PROPOSAL_SIGNATURE_ERROR=1006]="INVALID_PROPOSAL_SIGNATURE_ERROR",e[e.INVALID_PROPOSAL_SEQ_NUMBER_ERROR=1007]="INVALID_PROPOSAL_SEQ_NUMBER_ERROR",e[e.INVALID_PAYLOAD_SIGNATURE_ERROR=1008]="INVALID_PAYLOAD_SIGNATURE_ERROR",e[e.INVALID_ENVELOPE_SIGNATURE_ERROR=1009]="INVALID_ENVELOPE_SIGNATURE_ERROR",e[e.FVM_INTERNAL_ERROR=1050]="FVM_INTERNAL_ERROR",e[e.VALUE_ERROR=1051]="VALUE_ERROR",e[e.INVALID_ARGUMENT_ERROR=1052]="INVALID_ARGUMENT_ERROR",e[e.INVALID_ADDRESS_ERROR=1053]="INVALID_ADDRESS_ERROR",e[e.INVALID_LOCATION_ERROR=1054]="INVALID_LOCATION_ERROR",e[e.ACCOUNT_AUTHORIZATION_ERROR=1055]="ACCOUNT_AUTHORIZATION_ERROR",e[e.OPERATION_AUTHORIZATION_ERROR=1056]="OPERATION_AUTHORIZATION_ERROR",e[e.OPERATION_NOT_SUPPORTED_ERROR=1057]="OPERATION_NOT_SUPPORTED_ERROR",e[e.BLOCK_HEIGHT_OUT_OF_RANGE_ERROR=1058]="BLOCK_HEIGHT_OUT_OF_RANGE_ERROR",e[e.EXECUTION_ERROR=1100]="EXECUTION_ERROR",e[e.CADENCE_RUNTIME_ERROR=1101]="CADENCE_RUNTIME_ERROR",e[e.ENCODING_UNSUPPORTED_VALUE=1102]="ENCODING_UNSUPPORTED_VALUE",e[e.STORAGE_CAPACITY_EXCEEDED=1103]="STORAGE_CAPACITY_EXCEEDED",e[e.GAS_LIMIT_EXCEEDED_ERROR=1104]="GAS_LIMIT_EXCEEDED_ERROR",e[e.EVENT_LIMIT_EXCEEDED_ERROR=1105]="EVENT_LIMIT_EXCEEDED_ERROR",e[e.LEDGER_INTERACTION_LIMIT_EXCEEDED_ERROR=1106]="LEDGER_INTERACTION_LIMIT_EXCEEDED_ERROR",e[e.STATE_KEY_SIZE_LIMIT_ERROR=1107]="STATE_KEY_SIZE_LIMIT_ERROR",e[e.STATE_VALUE_SIZE_LIMIT_ERROR=1108]="STATE_VALUE_SIZE_LIMIT_ERROR",e[e.TRANSACTION_FEE_DEDUCTION_FAILED_ERROR=1109]="TRANSACTION_FEE_DEDUCTION_FAILED_ERROR",e[e.COMPUTATION_LIMIT_EXCEEDED_ERROR=1110]="COMPUTATION_LIMIT_EXCEEDED_ERROR",e[e.MEMORY_LIMIT_EXCEEDED_ERROR=1111]="MEMORY_LIMIT_EXCEEDED_ERROR",e[e.COULD_NOT_DECODE_EXECUTION_PARAMETER_FROM_STATE=1112]="COULD_NOT_DECODE_EXECUTION_PARAMETER_FROM_STATE",e[e.SCRIPT_EXECUTION_TIMED_OUT_ERROR=1113]="SCRIPT_EXECUTION_TIMED_OUT_ERROR",e[e.SCRIPT_EXECUTION_CANCELLED_ERROR=1114]="SCRIPT_EXECUTION_CANCELLED_ERROR",e[e.EVENT_ENCODING_ERROR=1115]="EVENT_ENCODING_ERROR",e[e.INVALID_INTERNAL_STATE_ACCESS_ERROR=1116]="INVALID_INTERNAL_STATE_ACCESS_ERROR",e[e.INSUFFICIENT_PAYER_BALANCE=1118]="INSUFFICIENT_PAYER_BALANCE",e[e.ACCOUNT_ERROR=1200]="ACCOUNT_ERROR",e[e.ACCOUNT_NOT_FOUND_ERROR=1201]="ACCOUNT_NOT_FOUND_ERROR",e[e.ACCOUNT_PUBLIC_KEY_NOT_FOUND_ERROR=1202]="ACCOUNT_PUBLIC_KEY_NOT_FOUND_ERROR",e[e.ACCOUNT_ALREADY_EXISTS_ERROR=1203]="ACCOUNT_ALREADY_EXISTS_ERROR",e[e.FROZEN_ACCOUNT_ERROR=1204]="FROZEN_ACCOUNT_ERROR",e[e.ACCOUNT_STORAGE_NOT_INITIALIZED_ERROR=1205]="ACCOUNT_STORAGE_NOT_INITIALIZED_ERROR",e[e.ACCOUNT_PUBLIC_KEY_LIMIT_ERROR=1206]="ACCOUNT_PUBLIC_KEY_LIMIT_ERROR",e[e.CONTRACT_ERROR=1250]="CONTRACT_ERROR",e[e.CONTRACT_NOT_FOUND_ERROR=1251]="CONTRACT_NOT_FOUND_ERROR",e[e.CONTRACT_NAMES_NOT_FOUND_ERROR=1252]="CONTRACT_NAMES_NOT_FOUND_ERROR",e[e.EVM_EXECUTION_ERROR=1300]="EVM_EXECUTION_ERROR",e}({}),Jo=function(e){return e.BLOCKS="blocks",e.BLOCK_HEADERS="block_headers",e.BLOCK_DIGESTS="block_digests",e.ACCOUNT_STATUSES="account_statuses",e.TRANSACTION_STATUSES="transaction_statuses",e.EVENTS="events",e}({}),_6=function(e){return e[e.UNKNOWN=0]="UNKNOWN",e[e.PENDING=1]="PENDING",e[e.FINALIZED=2]="FINALIZED",e[e.EXECUTED=3]="EXECUTED",e[e.SEALED=4]="SEALED",e[e.EXPIRED=5]="EXPIRED",e}({});const A6=()=>{const e=[];let t;return{async deliver(n){e.push(n),t&&(t(e.shift()),t=void 0)},receive(){return new Promise(function(r){const s=e.shift();if(s)return r(s);t=r})}}};let eS;const x6=e=>(eS||(eS=Promise.resolve())).then(e).catch(t=>setTimeout(()=>{throw t},0)),Nu="INIT",Pc="SUBSCRIBE",Ho="UNSUBSCRIBE",b0="UPDATED",JR="SNAPSHOT",w0="EXIT",tS="TERMINATE",th=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||typeof window=="object"&&window.window===window&&window||{FCL_REGISTRY:null};th.FCL_REGISTRY=th.FCL_REGISTRY==null?{}:th.FCL_REGISTRY;const ft=th.FCL_REGISTRY;let Vm=0;const R6=5e3;function Yt(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{expectReply:!1};return new Promise((s,a)=>{const c=r.expectReply||!1,u=r.timeout!=null?r.timeout:R6;c&&u&&setTimeout(()=>a(new Error(`Timeout: ${u}ms passed without a response.`)),u);const d={to:e,from:r.from,tag:t,data:n,timeout:u,reply:s,reject:a};try{ft[e]&&ft[e].mailbox.deliver(d),c||s(!0)}catch(h){console.error("FCL.Actor -- Could Not Deliver Message",d,ft[e],h),a(h)}})}const O6=e=>{delete ft[e]},T6=e=>async t=>{typeof e[Nu]=="function"&&await e[Nu](t);e:for(;;){const n=await t.receive();try{if(n.tag===w0){typeof e[tS]=="function"&&await e[tS](t,n,n.data||{});break e}await e[n.tag]?.(t,n,n.data||{})}catch(r){console.error(`${t.self()} Error`,n,r)}finally{continue e}}},D6=e=>{if(e==null){for(;ft[String(Vm)];)Vm++;return String(Vm)}return String(e)},ea=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;const n=D6(t);if(ft[n]!=null)return n;ft[n]={addr:n,mailbox:A6(),subs:new Set,kvs:{},error:null};const r=I6(n);let s;return typeof e=="object"?s=T6(e):s=e,x6(async()=>{await s(r),O6(n)}),n},I6=e=>({self:()=>e,receive:()=>ft[e].mailbox.receive(),send:function(t,n,r){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};if(t!=null)return s.from=e,Yt(t,n,r,s)},sendSelf:function(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};ft[e]&&Yt(e,t,n,r)},broadcast:function(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};r.from=e;for(const s of ft[e].subs)Yt(s,t,n,r)},subscribe:t=>t!=null&&ft[e].subs.add(t),unsubscribe:t=>t!=null&&ft[e].subs.delete(t),subscriberCount:()=>ft[e].subs.size,hasSubs:()=>!!ft[e].subs.size,put:(t,n)=>{t!=null&&(ft[e].kvs[t]=n)},get:function(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;const r=ft[e].kvs[t];return r??n},delete:t=>{delete ft[e].kvs[t]},update:(t,n)=>{t!=null&&(ft[e].kvs[t]=n(ft[e].kvs[t]))},keys:()=>Object.keys(ft[e].kvs),all:()=>ft[e].kvs,where:t=>Object.keys(ft[e].kvs).reduce((n,r)=>t.test(r)?{...n,[r]:ft[e].kvs[r]}:n,{}),merge:function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.keys(t).forEach(n=>ft[e].kvs[n]=t[n])},fatalError:t=>{ft[e].error=t;for(const n of ft[e].subs)Yt(n,b0)}});function kb(e,t,n){t(e);const r=ea(async s=>{for(s.send(e,Pc);;){const a=await s.receive(),c=ft[e].error;if(a.tag===w0){s.send(e,Ho);return}if(c){n(null,c),s.send(e,Ho);return}n(a.data,null)}});return()=>Yt(r,w0)}function eO(e,t){return t(e),Yt(e,JR,null,{expectReply:!0,timeout:0})}const Gm=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r=>t.reduce((s,a)=>a(s),r)},C6=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r=>t.reduce((s,a)=>({...s,...a(r)}),{})},Km=e=>e&&typeof e=="object"&&!Array.isArray(e),v0=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(!n.length)return e;const s=n.shift();if(Km(e)&&Km(s))for(const a in s)Km(s[a])?(e[a]||Object.assign(e,{[a]:{}}),v0(e[a],s[a])):Object.assign(e,{[a]:s[a]});return v0(e,...n)},N6=e=>Array.isArray(e)?v0({},...e):e,$6=e=>e.contracts?e.contracts:{},U6=e=>e.dependencies?e.dependencies:{},B6=e=>t=>Object.entries(t).reduce((n,r)=>{let[s,a]=r;const c=a?.aliases?.[e];return c&&(n[s]=c),n},{}),P6=e=>t=>Object.entries(t).reduce((n,r)=>{let[s,a]=r;const c=a?.aliases?.[e];return c&&(n[s]=c),n},{}),k6=e=>t=>{let{deployments:n={},accounts:r={}}=t;const s=n?.[e];return s?Object.entries(s).reduce((a,c)=>{let[u,d]=c;const h=r[u]?.address;return h?d.reduce((p,m)=>({...p,[m]:h}),{}):a},{}):{}},M6=(e,t)=>Gm(N6,C6(k6(t),Gm($6,B6(t)),Gm(U6,P6(t))))(e),L6=e=>typeof e!="string"?!1:/^[0-9A-Fa-f]+$/.test(e),nS=e=>Object.entries(e?.accounts??[]).reduce((t,n)=>{let[,r]=n;return t?!0:r&&Object.prototype.hasOwnProperty.call(r,"key")&&L6(r?.key)},!1),j6=e=>Array.isArray(e)?e.some(nS):nS(e),z6=e=>{const t=e?.toLowerCase()==="local"?"emulator":e?.toLowerCase();if(t==="emulator"||t==="testnet"||t==="mainnet"||t==="previewnet")return t;throw new Error(`Invalid network "${e}". Must be one of "emulator", "local", "testnet", or "mainnet"`)};y6(Ae);const yi="config",tO="PUT_CONFIG",nO="GET_CONFIG",rO="GET_ALL_CONFIG",iO="UPDATE_CONFIG",sO="DELETE_CONFIG",oO="CLEAR_CONFIG",aO="WHERE_CONFIG",Yl="CONFIG/UPDATED",cO=e=>e,lO={[tO]:(e,t,n)=>{let{key:r,value:s}=n;if(r==null)throw new Error("Missing 'key' for config/put.");e.put(r,s),e.broadcast(Yl,{...e.all()})},[nO]:(e,t,n)=>{let{key:r,fallback:s}=n;if(r==null)throw new Error("Missing 'key' for config/get");t.reply(e.get(r,s))},[rO]:(e,t)=>{t.reply({...e.all()})},[iO]:(e,t,n)=>{let{key:r,fn:s}=n;if(r==null)throw new Error("Missing 'key' for config/update");e.update(r,s||cO),e.broadcast(Yl,{...e.all()})},[sO]:(e,t,n)=>{let{key:r}=n;if(r==null)throw new Error("Missing 'key' for config/delete");e.delete(r),e.broadcast(Yl,{...e.all()})},[oO]:e=>{const t=Object.keys(e.all());for(const n of t)e.delete(n);e.broadcast(Yl,{...e.all()})},[aO]:(e,t,n)=>{let{pattern:r}=n;if(r==null)throw new Error("Missing 'pattern' for config/where");t.reply(e.where(r))},[Pc]:(e,t)=>{e.subscribe(t.from),e.send(t.from,Yl,{...e.all()})},[Ho]:(e,t)=>{e.unsubscribe(t.from)}};ea(lO,yi);function $u(e,t){return Yt(yi,tO,{key:e,value:t}),Ae()}function Rc(e,t){return Yt(yi,nO,{key:e,fallback:t},{expectReply:!0,timeout:10})}async function Mb(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;if(!e.length)return t;const[n,...r]=e,s=await Rc(n);return s??Mb(r,t)}function mh(){return Yt(yi,rO,null,{expectReply:!0,timeout:10})}function uO(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:cO;return Yt(yi,iO,{key:e,fn:t}),Ae()}function fO(e){return Yt(yi,sO,{key:e}),Ae()}function dO(e){return Yt(yi,aO,{pattern:e},{expectReply:!0,timeout:10})}function hO(e){return kb(yi,()=>ea(lO,yi),e)}async function q6(){await Yt(yi,oO)}async function H6(e){return q6().then(()=>Ae(e))}async function pO(e){let{ignoreConflicts:t=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=await Rc("flow.network"),r=z6(n),{flowJSON:s}=e;if(fe(!!s,"config.load -- 'flowJSON' must be defined"),fe(!!r,'Flow Network Required -- In order for FCL to load your contracts please define "flow.network" to "emulator", "local", "testnet", or "mainnet" in your config. See more here: https://developers.flow.com/tools/fcl-js/reference/configure-fcl'),j6(s)){const a=r==="emulator";qe({title:"Private Keys Detected",message:"Private keys should be stored in a separate flow.json file for security. See more here: https://developers.flow.com/tools/flow-cli/security",level:a?dt.warn:dt.error}),fe(a,"Private keys should be stored in a separate flow.json file for security. See more here: https://developers.flow.com/tools/flow-cli/security")}for(const[a,c]of Object.entries(M6(s,r))){const u=`0x${a}`,d=await Rc(u);d&&d!==c&&!t?qe({title:"Contract Placeholder Conflict Detected",message:"A generated contract placeholder from config.load conflicts with a placeholder you've set manually in config have the same name.",level:dt.warn}):$u(u,c);const h=`system.contracts.${a}`,p=await Rc(h);p&&p!==c&&!t?qe({title:"Contract Placeholder Conflict Detected",message:"A generated contract placeholder from config.load conflicts with a placeholder you've set manually in config have the same name.",level:dt.warn}):$u(h,c)}}function Ae(e){return e!=null&&typeof e=="object"&&Object.keys(e).map(t=>$u(t,e[t])),{put:$u,get:Rc,all:mh,first:Mb,update:uO,delete:fO,where:dO,subscribe:hO,overload:gO,load:pO}}Ae.put=$u;Ae.get=Rc;Ae.all=mh;Ae.first=Mb;Ae.update=uO;Ae.delete=fO;Ae.where=dO;Ae.subscribe=hO;Ae.overload=gO;Ae.load=pO;async function gO(e,t){const n=await mh();try{return Ae(e),await t(await mh())}finally{await H6(n)}}var Ym={},Wl={},rS;function F6(){if(rS)return Wl;rS=1,Wl.byteLength=u,Wl.toByteArray=h,Wl.fromByteArray=y;for(var e=[],t=[],n=typeof Uint8Array<"u"?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,a=r.length;s<a;++s)e[s]=r[s],t[r.charCodeAt(s)]=s;t[45]=62,t[95]=63;function c(v){var w=v.length;if(w%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var E=v.indexOf("=");E===-1&&(E=w);var S=E===w?0:4-E%4;return[E,S]}function u(v){var w=c(v),E=w[0],S=w[1];return(E+S)*3/4-S}function d(v,w,E){return(w+E)*3/4-E}function h(v){var w,E=c(v),S=E[0],A=E[1],I=new n(d(v,S,A)),D=0,B=A>0?S-4:S,$;for($=0;$<B;$+=4)w=t[v.charCodeAt($)]<<18|t[v.charCodeAt($+1)]<<12|t[v.charCodeAt($+2)]<<6|t[v.charCodeAt($+3)],I[D++]=w>>16&255,I[D++]=w>>8&255,I[D++]=w&255;return A===2&&(w=t[v.charCodeAt($)]<<2|t[v.charCodeAt($+1)]>>4,I[D++]=w&255),A===1&&(w=t[v.charCodeAt($)]<<10|t[v.charCodeAt($+1)]<<4|t[v.charCodeAt($+2)]>>2,I[D++]=w>>8&255,I[D++]=w&255),I}function p(v){return e[v>>18&63]+e[v>>12&63]+e[v>>6&63]+e[v&63]}function m(v,w,E){for(var S,A=[],I=w;I<E;I+=3)S=(v[I]<<16&16711680)+(v[I+1]<<8&65280)+(v[I+2]&255),A.push(p(S));return A.join("")}function y(v){for(var w,E=v.length,S=E%3,A=[],I=16383,D=0,B=E-S;D<B;D+=I)A.push(m(v,D,D+I>B?B:D+I));return S===1?(w=v[E-1],A.push(e[w>>2]+e[w<<4&63]+"==")):S===2&&(w=(v[E-2]<<8)+v[E-1],A.push(e[w>>10]+e[w>>4&63]+e[w<<2&63]+"=")),A.join("")}return Wl}var Ad={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var iS;function V6(){return iS||(iS=1,Ad.read=function(e,t,n,r,s){var a,c,u=s*8-r-1,d=(1<<u)-1,h=d>>1,p=-7,m=n?s-1:0,y=n?-1:1,v=e[t+m];for(m+=y,a=v&(1<<-p)-1,v>>=-p,p+=u;p>0;a=a*256+e[t+m],m+=y,p-=8);for(c=a&(1<<-p)-1,a>>=-p,p+=r;p>0;c=c*256+e[t+m],m+=y,p-=8);if(a===0)a=1-h;else{if(a===d)return c?NaN:(v?-1:1)*(1/0);c=c+Math.pow(2,r),a=a-h}return(v?-1:1)*c*Math.pow(2,a-r)},Ad.write=function(e,t,n,r,s,a){var c,u,d,h=a*8-s-1,p=(1<<h)-1,m=p>>1,y=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,v=r?0:a-1,w=r?1:-1,E=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(u=isNaN(t)?1:0,c=p):(c=Math.floor(Math.log(t)/Math.LN2),t*(d=Math.pow(2,-c))<1&&(c--,d*=2),c+m>=1?t+=y/d:t+=y*Math.pow(2,1-m),t*d>=2&&(c++,d/=2),c+m>=p?(u=0,c=p):c+m>=1?(u=(t*d-1)*Math.pow(2,s),c=c+m):(u=t*Math.pow(2,m-1)*Math.pow(2,s),c=0));s>=8;e[n+v]=u&255,v+=w,u/=256,s-=8);for(c=c<<s|u,h+=s;h>0;e[n+v]=c&255,v+=w,c/=256,h-=8);e[n+v-w]|=E*128}),Ad}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var sS;function Lb(){return sS||(sS=1,function(e){const t=F6(),n=V6(),r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=u,e.SlowBuffer=I,e.INSPECT_MAX_BYTES=50;const s=2147483647;e.kMaxLength=s,u.TYPED_ARRAY_SUPPORT=a(),!u.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function a(){try{const U=new Uint8Array(1),_={foo:function(){return 42}};return Object.setPrototypeOf(_,Uint8Array.prototype),Object.setPrototypeOf(U,_),U.foo()===42}catch{return!1}}Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}});function c(U){if(U>s)throw new RangeError('The value "'+U+'" is invalid for option "size"');const _=new Uint8Array(U);return Object.setPrototypeOf(_,u.prototype),_}function u(U,_,x){if(typeof U=="number"){if(typeof _=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return m(U)}return d(U,_,x)}u.poolSize=8192;function d(U,_,x){if(typeof U=="string")return y(U,_);if(ArrayBuffer.isView(U))return w(U);if(U==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof U);if(Rn(U,ArrayBuffer)||U&&Rn(U.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Rn(U,SharedArrayBuffer)||U&&Rn(U.buffer,SharedArrayBuffer)))return E(U,_,x);if(typeof U=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const L=U.valueOf&&U.valueOf();if(L!=null&&L!==U)return u.from(L,_,x);const Q=S(U);if(Q)return Q;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof U[Symbol.toPrimitive]=="function")return u.from(U[Symbol.toPrimitive]("string"),_,x);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof U)}u.from=function(U,_,x){return d(U,_,x)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array);function h(U){if(typeof U!="number")throw new TypeError('"size" argument must be of type number');if(U<0)throw new RangeError('The value "'+U+'" is invalid for option "size"')}function p(U,_,x){return h(U),U<=0?c(U):_!==void 0?typeof x=="string"?c(U).fill(_,x):c(U).fill(_):c(U)}u.alloc=function(U,_,x){return p(U,_,x)};function m(U){return h(U),c(U<0?0:A(U)|0)}u.allocUnsafe=function(U){return m(U)},u.allocUnsafeSlow=function(U){return m(U)};function y(U,_){if((typeof _!="string"||_==="")&&(_="utf8"),!u.isEncoding(_))throw new TypeError("Unknown encoding: "+_);const x=D(U,_)|0;let L=c(x);const Q=L.write(U,_);return Q!==x&&(L=L.slice(0,Q)),L}function v(U){const _=U.length<0?0:A(U.length)|0,x=c(_);for(let L=0;L<_;L+=1)x[L]=U[L]&255;return x}function w(U){if(Rn(U,Uint8Array)){const _=new Uint8Array(U);return E(_.buffer,_.byteOffset,_.byteLength)}return v(U)}function E(U,_,x){if(_<0||U.byteLength<_)throw new RangeError('"offset" is outside of buffer bounds');if(U.byteLength<_+(x||0))throw new RangeError('"length" is outside of buffer bounds');let L;return _===void 0&&x===void 0?L=new Uint8Array(U):x===void 0?L=new Uint8Array(U,_):L=new Uint8Array(U,_,x),Object.setPrototypeOf(L,u.prototype),L}function S(U){if(u.isBuffer(U)){const _=A(U.length)|0,x=c(_);return x.length===0||U.copy(x,0,0,_),x}if(U.length!==void 0)return typeof U.length!="number"||Si(U.length)?c(0):v(U);if(U.type==="Buffer"&&Array.isArray(U.data))return v(U.data)}function A(U){if(U>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return U|0}function I(U){return+U!=U&&(U=0),u.alloc(+U)}u.isBuffer=function(_){return _!=null&&_._isBuffer===!0&&_!==u.prototype},u.compare=function(_,x){if(Rn(_,Uint8Array)&&(_=u.from(_,_.offset,_.byteLength)),Rn(x,Uint8Array)&&(x=u.from(x,x.offset,x.byteLength)),!u.isBuffer(_)||!u.isBuffer(x))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(_===x)return 0;let L=_.length,Q=x.length;for(let ce=0,de=Math.min(L,Q);ce<de;++ce)if(_[ce]!==x[ce]){L=_[ce],Q=x[ce];break}return L<Q?-1:Q<L?1:0},u.isEncoding=function(_){switch(String(_).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(_,x){if(!Array.isArray(_))throw new TypeError('"list" argument must be an Array of Buffers');if(_.length===0)return u.alloc(0);let L;if(x===void 0)for(x=0,L=0;L<_.length;++L)x+=_[L].length;const Q=u.allocUnsafe(x);let ce=0;for(L=0;L<_.length;++L){let de=_[L];if(Rn(de,Uint8Array))ce+de.length>Q.length?(u.isBuffer(de)||(de=u.from(de)),de.copy(Q,ce)):Uint8Array.prototype.set.call(Q,de,ce);else if(u.isBuffer(de))de.copy(Q,ce);else throw new TypeError('"list" argument must be an Array of Buffers');ce+=de.length}return Q};function D(U,_){if(u.isBuffer(U))return U.length;if(ArrayBuffer.isView(U)||Rn(U,ArrayBuffer))return U.byteLength;if(typeof U!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof U);const x=U.length,L=arguments.length>2&&arguments[2]===!0;if(!L&&x===0)return 0;let Q=!1;for(;;)switch(_){case"ascii":case"latin1":case"binary":return x;case"utf8":case"utf-8":return $t(U).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x*2;case"hex":return x>>>1;case"base64":return ls(U).length;default:if(Q)return L?-1:$t(U).length;_=(""+_).toLowerCase(),Q=!0}}u.byteLength=D;function B(U,_,x){let L=!1;if((_===void 0||_<0)&&(_=0),_>this.length||((x===void 0||x>this.length)&&(x=this.length),x<=0)||(x>>>=0,_>>>=0,x<=_))return"";for(U||(U="utf8");;)switch(U){case"hex":return X(this,_,x);case"utf8":case"utf-8":return re(this,_,x);case"ascii":return M(this,_,x);case"latin1":case"binary":return F(this,_,x);case"base64":return le(this,_,x);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,_,x);default:if(L)throw new TypeError("Unknown encoding: "+U);U=(U+"").toLowerCase(),L=!0}}u.prototype._isBuffer=!0;function $(U,_,x){const L=U[_];U[_]=U[x],U[x]=L}u.prototype.swap16=function(){const _=this.length;if(_%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let x=0;x<_;x+=2)$(this,x,x+1);return this},u.prototype.swap32=function(){const _=this.length;if(_%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let x=0;x<_;x+=4)$(this,x,x+3),$(this,x+1,x+2);return this},u.prototype.swap64=function(){const _=this.length;if(_%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let x=0;x<_;x+=8)$(this,x,x+7),$(this,x+1,x+6),$(this,x+2,x+5),$(this,x+3,x+4);return this},u.prototype.toString=function(){const _=this.length;return _===0?"":arguments.length===0?re(this,0,_):B.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(_){if(!u.isBuffer(_))throw new TypeError("Argument must be a Buffer");return this===_?!0:u.compare(this,_)===0},u.prototype.inspect=function(){let _="";const x=e.INSPECT_MAX_BYTES;return _=this.toString("hex",0,x).replace(/(.{2})/g,"$1 ").trim(),this.length>x&&(_+=" ... "),"<Buffer "+_+">"},r&&(u.prototype[r]=u.prototype.inspect),u.prototype.compare=function(_,x,L,Q,ce){if(Rn(_,Uint8Array)&&(_=u.from(_,_.offset,_.byteLength)),!u.isBuffer(_))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof _);if(x===void 0&&(x=0),L===void 0&&(L=_?_.length:0),Q===void 0&&(Q=0),ce===void 0&&(ce=this.length),x<0||L>_.length||Q<0||ce>this.length)throw new RangeError("out of range index");if(Q>=ce&&x>=L)return 0;if(Q>=ce)return-1;if(x>=L)return 1;if(x>>>=0,L>>>=0,Q>>>=0,ce>>>=0,this===_)return 0;let de=ce-Q,Ce=L-x;const We=Math.min(de,Ce),Qe=this.slice(Q,ce),it=_.slice(x,L);for(let Je=0;Je<We;++Je)if(Qe[Je]!==it[Je]){de=Qe[Je],Ce=it[Je];break}return de<Ce?-1:Ce<de?1:0};function N(U,_,x,L,Q){if(U.length===0)return-1;if(typeof x=="string"?(L=x,x=0):x>2147483647?x=2147483647:x<-2147483648&&(x=-2147483648),x=+x,Si(x)&&(x=Q?0:U.length-1),x<0&&(x=U.length+x),x>=U.length){if(Q)return-1;x=U.length-1}else if(x<0)if(Q)x=0;else return-1;if(typeof _=="string"&&(_=u.from(_,L)),u.isBuffer(_))return _.length===0?-1:q(U,_,x,L,Q);if(typeof _=="number")return _=_&255,typeof Uint8Array.prototype.indexOf=="function"?Q?Uint8Array.prototype.indexOf.call(U,_,x):Uint8Array.prototype.lastIndexOf.call(U,_,x):q(U,[_],x,L,Q);throw new TypeError("val must be string, number or Buffer")}function q(U,_,x,L,Q){let ce=1,de=U.length,Ce=_.length;if(L!==void 0&&(L=String(L).toLowerCase(),L==="ucs2"||L==="ucs-2"||L==="utf16le"||L==="utf-16le")){if(U.length<2||_.length<2)return-1;ce=2,de/=2,Ce/=2,x/=2}function We(it,Je){return ce===1?it[Je]:it.readUInt16BE(Je*ce)}let Qe;if(Q){let it=-1;for(Qe=x;Qe<de;Qe++)if(We(U,Qe)===We(_,it===-1?0:Qe-it)){if(it===-1&&(it=Qe),Qe-it+1===Ce)return it*ce}else it!==-1&&(Qe-=Qe-it),it=-1}else for(x+Ce>de&&(x=de-Ce),Qe=x;Qe>=0;Qe--){let it=!0;for(let Je=0;Je<Ce;Je++)if(We(U,Qe+Je)!==We(_,Je)){it=!1;break}if(it)return Qe}return-1}u.prototype.includes=function(_,x,L){return this.indexOf(_,x,L)!==-1},u.prototype.indexOf=function(_,x,L){return N(this,_,x,L,!0)},u.prototype.lastIndexOf=function(_,x,L){return N(this,_,x,L,!1)};function H(U,_,x,L){x=Number(x)||0;const Q=U.length-x;L?(L=Number(L),L>Q&&(L=Q)):L=Q;const ce=_.length;L>ce/2&&(L=ce/2);let de;for(de=0;de<L;++de){const Ce=parseInt(_.substr(de*2,2),16);if(Si(Ce))return de;U[x+de]=Ce}return de}function k(U,_,x,L){return Qn($t(_,U.length-x),U,x,L)}function K(U,_,x,L){return Qn(Yc(_),U,x,L)}function Y(U,_,x,L){return Qn(ls(_),U,x,L)}function W(U,_,x,L){return Qn(no(_,U.length-x),U,x,L)}u.prototype.write=function(_,x,L,Q){if(x===void 0)Q="utf8",L=this.length,x=0;else if(L===void 0&&typeof x=="string")Q=x,L=this.length,x=0;else if(isFinite(x))x=x>>>0,isFinite(L)?(L=L>>>0,Q===void 0&&(Q="utf8")):(Q=L,L=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const ce=this.length-x;if((L===void 0||L>ce)&&(L=ce),_.length>0&&(L<0||x<0)||x>this.length)throw new RangeError("Attempt to write outside buffer bounds");Q||(Q="utf8");let de=!1;for(;;)switch(Q){case"hex":return H(this,_,x,L);case"utf8":case"utf-8":return k(this,_,x,L);case"ascii":case"latin1":case"binary":return K(this,_,x,L);case"base64":return Y(this,_,x,L);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return W(this,_,x,L);default:if(de)throw new TypeError("Unknown encoding: "+Q);Q=(""+Q).toLowerCase(),de=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function le(U,_,x){return _===0&&x===U.length?t.fromByteArray(U):t.fromByteArray(U.slice(_,x))}function re(U,_,x){x=Math.min(U.length,x);const L=[];let Q=_;for(;Q<x;){const ce=U[Q];let de=null,Ce=ce>239?4:ce>223?3:ce>191?2:1;if(Q+Ce<=x){let We,Qe,it,Je;switch(Ce){case 1:ce<128&&(de=ce);break;case 2:We=U[Q+1],(We&192)===128&&(Je=(ce&31)<<6|We&63,Je>127&&(de=Je));break;case 3:We=U[Q+1],Qe=U[Q+2],(We&192)===128&&(Qe&192)===128&&(Je=(ce&15)<<12|(We&63)<<6|Qe&63,Je>2047&&(Je<55296||Je>57343)&&(de=Je));break;case 4:We=U[Q+1],Qe=U[Q+2],it=U[Q+3],(We&192)===128&&(Qe&192)===128&&(it&192)===128&&(Je=(ce&15)<<18|(We&63)<<12|(Qe&63)<<6|it&63,Je>65535&&Je<1114112&&(de=Je))}}de===null?(de=65533,Ce=1):de>65535&&(de-=65536,L.push(de>>>10&1023|55296),de=56320|de&1023),L.push(de),Q+=Ce}return R(L)}const O=4096;function R(U){const _=U.length;if(_<=O)return String.fromCharCode.apply(String,U);let x="",L=0;for(;L<_;)x+=String.fromCharCode.apply(String,U.slice(L,L+=O));return x}function M(U,_,x){let L="";x=Math.min(U.length,x);for(let Q=_;Q<x;++Q)L+=String.fromCharCode(U[Q]&127);return L}function F(U,_,x){let L="";x=Math.min(U.length,x);for(let Q=_;Q<x;++Q)L+=String.fromCharCode(U[Q]);return L}function X(U,_,x){const L=U.length;(!_||_<0)&&(_=0),(!x||x<0||x>L)&&(x=L);let Q="";for(let ce=_;ce<x;++ce)Q+=la[U[ce]];return Q}function C(U,_,x){const L=U.slice(_,x);let Q="";for(let ce=0;ce<L.length-1;ce+=2)Q+=String.fromCharCode(L[ce]+L[ce+1]*256);return Q}u.prototype.slice=function(_,x){const L=this.length;_=~~_,x=x===void 0?L:~~x,_<0?(_+=L,_<0&&(_=0)):_>L&&(_=L),x<0?(x+=L,x<0&&(x=0)):x>L&&(x=L),x<_&&(x=_);const Q=this.subarray(_,x);return Object.setPrototypeOf(Q,u.prototype),Q};function V(U,_,x){if(U%1!==0||U<0)throw new RangeError("offset is not uint");if(U+_>x)throw new RangeError("Trying to access beyond buffer length")}u.prototype.readUintLE=u.prototype.readUIntLE=function(_,x,L){_=_>>>0,x=x>>>0,L||V(_,x,this.length);let Q=this[_],ce=1,de=0;for(;++de<x&&(ce*=256);)Q+=this[_+de]*ce;return Q},u.prototype.readUintBE=u.prototype.readUIntBE=function(_,x,L){_=_>>>0,x=x>>>0,L||V(_,x,this.length);let Q=this[_+--x],ce=1;for(;x>0&&(ce*=256);)Q+=this[_+--x]*ce;return Q},u.prototype.readUint8=u.prototype.readUInt8=function(_,x){return _=_>>>0,x||V(_,1,this.length),this[_]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(_,x){return _=_>>>0,x||V(_,2,this.length),this[_]|this[_+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(_,x){return _=_>>>0,x||V(_,2,this.length),this[_]<<8|this[_+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(_,x){return _=_>>>0,x||V(_,4,this.length),(this[_]|this[_+1]<<8|this[_+2]<<16)+this[_+3]*16777216},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(_,x){return _=_>>>0,x||V(_,4,this.length),this[_]*16777216+(this[_+1]<<16|this[_+2]<<8|this[_+3])},u.prototype.readBigUInt64LE=Jn(function(_){_=_>>>0,qt(_,"offset");const x=this[_],L=this[_+7];(x===void 0||L===void 0)&&Dt(_,this.length-8);const Q=x+this[++_]*2**8+this[++_]*2**16+this[++_]*2**24,ce=this[++_]+this[++_]*2**8+this[++_]*2**16+L*2**24;return BigInt(Q)+(BigInt(ce)<<BigInt(32))}),u.prototype.readBigUInt64BE=Jn(function(_){_=_>>>0,qt(_,"offset");const x=this[_],L=this[_+7];(x===void 0||L===void 0)&&Dt(_,this.length-8);const Q=x*2**24+this[++_]*2**16+this[++_]*2**8+this[++_],ce=this[++_]*2**24+this[++_]*2**16+this[++_]*2**8+L;return(BigInt(Q)<<BigInt(32))+BigInt(ce)}),u.prototype.readIntLE=function(_,x,L){_=_>>>0,x=x>>>0,L||V(_,x,this.length);let Q=this[_],ce=1,de=0;for(;++de<x&&(ce*=256);)Q+=this[_+de]*ce;return ce*=128,Q>=ce&&(Q-=Math.pow(2,8*x)),Q},u.prototype.readIntBE=function(_,x,L){_=_>>>0,x=x>>>0,L||V(_,x,this.length);let Q=x,ce=1,de=this[_+--Q];for(;Q>0&&(ce*=256);)de+=this[_+--Q]*ce;return ce*=128,de>=ce&&(de-=Math.pow(2,8*x)),de},u.prototype.readInt8=function(_,x){return _=_>>>0,x||V(_,1,this.length),this[_]&128?(255-this[_]+1)*-1:this[_]},u.prototype.readInt16LE=function(_,x){_=_>>>0,x||V(_,2,this.length);const L=this[_]|this[_+1]<<8;return L&32768?L|4294901760:L},u.prototype.readInt16BE=function(_,x){_=_>>>0,x||V(_,2,this.length);const L=this[_+1]|this[_]<<8;return L&32768?L|4294901760:L},u.prototype.readInt32LE=function(_,x){return _=_>>>0,x||V(_,4,this.length),this[_]|this[_+1]<<8|this[_+2]<<16|this[_+3]<<24},u.prototype.readInt32BE=function(_,x){return _=_>>>0,x||V(_,4,this.length),this[_]<<24|this[_+1]<<16|this[_+2]<<8|this[_+3]},u.prototype.readBigInt64LE=Jn(function(_){_=_>>>0,qt(_,"offset");const x=this[_],L=this[_+7];(x===void 0||L===void 0)&&Dt(_,this.length-8);const Q=this[_+4]+this[_+5]*2**8+this[_+6]*2**16+(L<<24);return(BigInt(Q)<<BigInt(32))+BigInt(x+this[++_]*2**8+this[++_]*2**16+this[++_]*2**24)}),u.prototype.readBigInt64BE=Jn(function(_){_=_>>>0,qt(_,"offset");const x=this[_],L=this[_+7];(x===void 0||L===void 0)&&Dt(_,this.length-8);const Q=(x<<24)+this[++_]*2**16+this[++_]*2**8+this[++_];return(BigInt(Q)<<BigInt(32))+BigInt(this[++_]*2**24+this[++_]*2**16+this[++_]*2**8+L)}),u.prototype.readFloatLE=function(_,x){return _=_>>>0,x||V(_,4,this.length),n.read(this,_,!0,23,4)},u.prototype.readFloatBE=function(_,x){return _=_>>>0,x||V(_,4,this.length),n.read(this,_,!1,23,4)},u.prototype.readDoubleLE=function(_,x){return _=_>>>0,x||V(_,8,this.length),n.read(this,_,!0,52,8)},u.prototype.readDoubleBE=function(_,x){return _=_>>>0,x||V(_,8,this.length),n.read(this,_,!1,52,8)};function ee(U,_,x,L,Q,ce){if(!u.isBuffer(U))throw new TypeError('"buffer" argument must be a Buffer instance');if(_>Q||_<ce)throw new RangeError('"value" argument is out of bounds');if(x+L>U.length)throw new RangeError("Index out of range")}u.prototype.writeUintLE=u.prototype.writeUIntLE=function(_,x,L,Q){if(_=+_,x=x>>>0,L=L>>>0,!Q){const Ce=Math.pow(2,8*L)-1;ee(this,_,x,L,Ce,0)}let ce=1,de=0;for(this[x]=_&255;++de<L&&(ce*=256);)this[x+de]=_/ce&255;return x+L},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(_,x,L,Q){if(_=+_,x=x>>>0,L=L>>>0,!Q){const Ce=Math.pow(2,8*L)-1;ee(this,_,x,L,Ce,0)}let ce=L-1,de=1;for(this[x+ce]=_&255;--ce>=0&&(de*=256);)this[x+ce]=_/de&255;return x+L},u.prototype.writeUint8=u.prototype.writeUInt8=function(_,x,L){return _=+_,x=x>>>0,L||ee(this,_,x,1,255,0),this[x]=_&255,x+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(_,x,L){return _=+_,x=x>>>0,L||ee(this,_,x,2,65535,0),this[x]=_&255,this[x+1]=_>>>8,x+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(_,x,L){return _=+_,x=x>>>0,L||ee(this,_,x,2,65535,0),this[x]=_>>>8,this[x+1]=_&255,x+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(_,x,L){return _=+_,x=x>>>0,L||ee(this,_,x,4,4294967295,0),this[x+3]=_>>>24,this[x+2]=_>>>16,this[x+1]=_>>>8,this[x]=_&255,x+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(_,x,L){return _=+_,x=x>>>0,L||ee(this,_,x,4,4294967295,0),this[x]=_>>>24,this[x+1]=_>>>16,this[x+2]=_>>>8,this[x+3]=_&255,x+4};function se(U,_,x,L,Q){on(_,L,Q,U,x,7);let ce=Number(_&BigInt(4294967295));U[x++]=ce,ce=ce>>8,U[x++]=ce,ce=ce>>8,U[x++]=ce,ce=ce>>8,U[x++]=ce;let de=Number(_>>BigInt(32)&BigInt(4294967295));return U[x++]=de,de=de>>8,U[x++]=de,de=de>>8,U[x++]=de,de=de>>8,U[x++]=de,x}function te(U,_,x,L,Q){on(_,L,Q,U,x,7);let ce=Number(_&BigInt(4294967295));U[x+7]=ce,ce=ce>>8,U[x+6]=ce,ce=ce>>8,U[x+5]=ce,ce=ce>>8,U[x+4]=ce;let de=Number(_>>BigInt(32)&BigInt(4294967295));return U[x+3]=de,de=de>>8,U[x+2]=de,de=de>>8,U[x+1]=de,de=de>>8,U[x]=de,x+8}u.prototype.writeBigUInt64LE=Jn(function(_,x=0){return se(this,_,x,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeBigUInt64BE=Jn(function(_,x=0){return te(this,_,x,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeIntLE=function(_,x,L,Q){if(_=+_,x=x>>>0,!Q){const We=Math.pow(2,8*L-1);ee(this,_,x,L,We-1,-We)}let ce=0,de=1,Ce=0;for(this[x]=_&255;++ce<L&&(de*=256);)_<0&&Ce===0&&this[x+ce-1]!==0&&(Ce=1),this[x+ce]=(_/de>>0)-Ce&255;return x+L},u.prototype.writeIntBE=function(_,x,L,Q){if(_=+_,x=x>>>0,!Q){const We=Math.pow(2,8*L-1);ee(this,_,x,L,We-1,-We)}let ce=L-1,de=1,Ce=0;for(this[x+ce]=_&255;--ce>=0&&(de*=256);)_<0&&Ce===0&&this[x+ce+1]!==0&&(Ce=1),this[x+ce]=(_/de>>0)-Ce&255;return x+L},u.prototype.writeInt8=function(_,x,L){return _=+_,x=x>>>0,L||ee(this,_,x,1,127,-128),_<0&&(_=255+_+1),this[x]=_&255,x+1},u.prototype.writeInt16LE=function(_,x,L){return _=+_,x=x>>>0,L||ee(this,_,x,2,32767,-32768),this[x]=_&255,this[x+1]=_>>>8,x+2},u.prototype.writeInt16BE=function(_,x,L){return _=+_,x=x>>>0,L||ee(this,_,x,2,32767,-32768),this[x]=_>>>8,this[x+1]=_&255,x+2},u.prototype.writeInt32LE=function(_,x,L){return _=+_,x=x>>>0,L||ee(this,_,x,4,2147483647,-2147483648),this[x]=_&255,this[x+1]=_>>>8,this[x+2]=_>>>16,this[x+3]=_>>>24,x+4},u.prototype.writeInt32BE=function(_,x,L){return _=+_,x=x>>>0,L||ee(this,_,x,4,2147483647,-2147483648),_<0&&(_=4294967295+_+1),this[x]=_>>>24,this[x+1]=_>>>16,this[x+2]=_>>>8,this[x+3]=_&255,x+4},u.prototype.writeBigInt64LE=Jn(function(_,x=0){return se(this,_,x,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),u.prototype.writeBigInt64BE=Jn(function(_,x=0){return te(this,_,x,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function pe(U,_,x,L,Q,ce){if(x+L>U.length)throw new RangeError("Index out of range");if(x<0)throw new RangeError("Index out of range")}function me(U,_,x,L,Q){return _=+_,x=x>>>0,Q||pe(U,_,x,4),n.write(U,_,x,L,23,4),x+4}u.prototype.writeFloatLE=function(_,x,L){return me(this,_,x,!0,L)},u.prototype.writeFloatBE=function(_,x,L){return me(this,_,x,!1,L)};function Te(U,_,x,L,Q){return _=+_,x=x>>>0,Q||pe(U,_,x,8),n.write(U,_,x,L,52,8),x+8}u.prototype.writeDoubleLE=function(_,x,L){return Te(this,_,x,!0,L)},u.prototype.writeDoubleBE=function(_,x,L){return Te(this,_,x,!1,L)},u.prototype.copy=function(_,x,L,Q){if(!u.isBuffer(_))throw new TypeError("argument should be a Buffer");if(L||(L=0),!Q&&Q!==0&&(Q=this.length),x>=_.length&&(x=_.length),x||(x=0),Q>0&&Q<L&&(Q=L),Q===L||_.length===0||this.length===0)return 0;if(x<0)throw new RangeError("targetStart out of bounds");if(L<0||L>=this.length)throw new RangeError("Index out of range");if(Q<0)throw new RangeError("sourceEnd out of bounds");Q>this.length&&(Q=this.length),_.length-x<Q-L&&(Q=_.length-x+L);const ce=Q-L;return this===_&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(x,L,Q):Uint8Array.prototype.set.call(_,this.subarray(L,Q),x),ce},u.prototype.fill=function(_,x,L,Q){if(typeof _=="string"){if(typeof x=="string"?(Q=x,x=0,L=this.length):typeof L=="string"&&(Q=L,L=this.length),Q!==void 0&&typeof Q!="string")throw new TypeError("encoding must be a string");if(typeof Q=="string"&&!u.isEncoding(Q))throw new TypeError("Unknown encoding: "+Q);if(_.length===1){const de=_.charCodeAt(0);(Q==="utf8"&&de<128||Q==="latin1")&&(_=de)}}else typeof _=="number"?_=_&255:typeof _=="boolean"&&(_=Number(_));if(x<0||this.length<x||this.length<L)throw new RangeError("Out of range index");if(L<=x)return this;x=x>>>0,L=L===void 0?this.length:L>>>0,_||(_=0);let ce;if(typeof _=="number")for(ce=x;ce<L;++ce)this[ce]=_;else{const de=u.isBuffer(_)?_:u.from(_,Q),Ce=de.length;if(Ce===0)throw new TypeError('The value "'+_+'" is invalid for argument "value"');for(ce=0;ce<L-x;++ce)this[ce+x]=de[ce%Ce]}return this};const Ee={};function xe(U,_,x){Ee[U]=class extends x{constructor(){super(),Object.defineProperty(this,"message",{value:_.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${U}]`,this.stack,delete this.name}get code(){return U}set code(Q){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Q,writable:!0})}toString(){return`${this.name} [${U}]: ${this.message}`}}}xe("ERR_BUFFER_OUT_OF_BOUNDS",function(U){return U?`${U} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),xe("ERR_INVALID_ARG_TYPE",function(U,_){return`The "${U}" argument must be of type number. Received type ${typeof _}`},TypeError),xe("ERR_OUT_OF_RANGE",function(U,_,x){let L=`The value of "${U}" is out of range.`,Q=x;return Number.isInteger(x)&&Math.abs(x)>2**32?Q=He(String(x)):typeof x=="bigint"&&(Q=String(x),(x>BigInt(2)**BigInt(32)||x<-(BigInt(2)**BigInt(32)))&&(Q=He(Q)),Q+="n"),L+=` It must be ${_}. Received ${Q}`,L},RangeError);function He(U){let _="",x=U.length;const L=U[0]==="-"?1:0;for(;x>=L+4;x-=3)_=`_${U.slice(x-3,x)}${_}`;return`${U.slice(0,x)}${_}`}function pt(U,_,x){qt(_,"offset"),(U[_]===void 0||U[_+x]===void 0)&&Dt(_,U.length-(x+1))}function on(U,_,x,L,Q,ce){if(U>x||U<_){const de=typeof _=="bigint"?"n":"";let Ce;throw _===0||_===BigInt(0)?Ce=`>= 0${de} and < 2${de} ** ${(ce+1)*8}${de}`:Ce=`>= -(2${de} ** ${(ce+1)*8-1}${de}) and < 2 ** ${(ce+1)*8-1}${de}`,new Ee.ERR_OUT_OF_RANGE("value",Ce,U)}pt(L,Q,ce)}function qt(U,_){if(typeof U!="number")throw new Ee.ERR_INVALID_ARG_TYPE(_,"number",U)}function Dt(U,_,x){throw Math.floor(U)!==U?(qt(U,x),new Ee.ERR_OUT_OF_RANGE("offset","an integer",U)):_<0?new Ee.ERR_BUFFER_OUT_OF_BOUNDS:new Ee.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${_}`,U)}const Ze=/[^+/0-9A-Za-z-_]/g;function cs(U){if(U=U.split("=")[0],U=U.trim().replace(Ze,""),U.length<2)return"";for(;U.length%4!==0;)U=U+"=";return U}function $t(U,_){_=_||1/0;let x;const L=U.length;let Q=null;const ce=[];for(let de=0;de<L;++de){if(x=U.charCodeAt(de),x>55295&&x<57344){if(!Q){if(x>56319){(_-=3)>-1&&ce.push(239,191,189);continue}else if(de+1===L){(_-=3)>-1&&ce.push(239,191,189);continue}Q=x;continue}if(x<56320){(_-=3)>-1&&ce.push(239,191,189),Q=x;continue}x=(Q-55296<<10|x-56320)+65536}else Q&&(_-=3)>-1&&ce.push(239,191,189);if(Q=null,x<128){if((_-=1)<0)break;ce.push(x)}else if(x<2048){if((_-=2)<0)break;ce.push(x>>6|192,x&63|128)}else if(x<65536){if((_-=3)<0)break;ce.push(x>>12|224,x>>6&63|128,x&63|128)}else if(x<1114112){if((_-=4)<0)break;ce.push(x>>18|240,x>>12&63|128,x>>6&63|128,x&63|128)}else throw new Error("Invalid code point")}return ce}function Yc(U){const _=[];for(let x=0;x<U.length;++x)_.push(U.charCodeAt(x)&255);return _}function no(U,_){let x,L,Q;const ce=[];for(let de=0;de<U.length&&!((_-=2)<0);++de)x=U.charCodeAt(de),L=x>>8,Q=x%256,ce.push(Q),ce.push(L);return ce}function ls(U){return t.toByteArray(cs(U))}function Qn(U,_,x,L){let Q;for(Q=0;Q<L&&!(Q+x>=_.length||Q>=U.length);++Q)_[Q+x]=U[Q];return Q}function Rn(U,_){return U instanceof _||U!=null&&U.constructor!=null&&U.constructor.name!=null&&U.constructor.name===_.name}function Si(U){return U!==U}const la=function(){const U="0123456789abcdef",_=new Array(256);for(let x=0;x<16;++x){const L=x*16;for(let Q=0;Q<16;++Q)_[L+Q]=U[x]+U[Q]}return _}();function Jn(U){return typeof BigInt>"u"?Xr:U}function Xr(){throw new Error("BigInt not supported")}}(Ym)),Ym}var Ot=Lb();function jb(e){if(Array.isArray(e)){const t=[];for(let r=0;r<e.length;r++)t.push(jb(e[r]));const n=Ot.Buffer.concat(t);return Ot.Buffer.concat([oS(n.length,192),n])}else{const t=W6(e);return t.length===1&&t[0]<128?t:Ot.Buffer.concat([oS(t.length,128),t])}}function oS(e,t){if(e<56)return Ot.Buffer.from([e+t]);{const n=E0(e),r=n.length/2,s=E0(t+55+r);return Ot.Buffer.from(s+n,"hex")}}function mO(e){return e.slice(0,2)==="0x"}function G6(e){return typeof e!="string"?e:mO(e)?e.slice(2):e}function E0(e){if(e<0)throw new Error("Invalid integer as argument, must be unsigned!");const t=e.toString(16);return t.length%2?"0"+t:t}function K6(e){return e.length%2?"0"+e:e}function Y6(e){const t=E0(e);return Ot.Buffer.from(t,"hex")}function W6(e){if(!Ot.Buffer.isBuffer(e)){if(typeof e=="string")return mO(e)?Ot.Buffer.from(K6(G6(e)),"hex"):Ot.Buffer.from(e);if(typeof e=="number")return e?Y6(e):Ot.Buffer.from([]);if(e==null)return Ot.Buffer.from([]);if(e instanceof Uint8Array)return Ot.Buffer.from(e);throw new Error("invalid type")}return e}var xd={exports:{}},aS;function X6(){return aS||(aS=1,function(e,t){var n=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof Fn<"u"&&Fn,r=function(){function a(){this.fetch=!1,this.DOMException=n.DOMException}return a.prototype=n,new a}();(function(a){(function(c){var u=typeof a<"u"&&a||typeof self<"u"&&self||typeof Fn<"u"&&Fn||{},d={searchParams:"URLSearchParams"in u,iterable:"Symbol"in u&&"iterator"in Symbol,blob:"FileReader"in u&&"Blob"in u&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in u,arrayBuffer:"ArrayBuffer"in u};function h(O){return O&&DataView.prototype.isPrototypeOf(O)}if(d.arrayBuffer)var p=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],m=ArrayBuffer.isView||function(O){return O&&p.indexOf(Object.prototype.toString.call(O))>-1};function y(O){if(typeof O!="string"&&(O=String(O)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(O)||O==="")throw new TypeError('Invalid character in header field name: "'+O+'"');return O.toLowerCase()}function v(O){return typeof O!="string"&&(O=String(O)),O}function w(O){var R={next:function(){var M=O.shift();return{done:M===void 0,value:M}}};return d.iterable&&(R[Symbol.iterator]=function(){return R}),R}function E(O){this.map={},O instanceof E?O.forEach(function(R,M){this.append(M,R)},this):Array.isArray(O)?O.forEach(function(R){if(R.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+R.length);this.append(R[0],R[1])},this):O&&Object.getOwnPropertyNames(O).forEach(function(R){this.append(R,O[R])},this)}E.prototype.append=function(O,R){O=y(O),R=v(R);var M=this.map[O];this.map[O]=M?M+", "+R:R},E.prototype.delete=function(O){delete this.map[y(O)]},E.prototype.get=function(O){return O=y(O),this.has(O)?this.map[O]:null},E.prototype.has=function(O){return this.map.hasOwnProperty(y(O))},E.prototype.set=function(O,R){this.map[y(O)]=v(R)},E.prototype.forEach=function(O,R){for(var M in this.map)this.map.hasOwnProperty(M)&&O.call(R,this.map[M],M,this)},E.prototype.keys=function(){var O=[];return this.forEach(function(R,M){O.push(M)}),w(O)},E.prototype.values=function(){var O=[];return this.forEach(function(R){O.push(R)}),w(O)},E.prototype.entries=function(){var O=[];return this.forEach(function(R,M){O.push([M,R])}),w(O)},d.iterable&&(E.prototype[Symbol.iterator]=E.prototype.entries);function S(O){if(!O._noBody){if(O.bodyUsed)return Promise.reject(new TypeError("Already read"));O.bodyUsed=!0}}function A(O){return new Promise(function(R,M){O.onload=function(){R(O.result)},O.onerror=function(){M(O.error)}})}function I(O){var R=new FileReader,M=A(R);return R.readAsArrayBuffer(O),M}function D(O){var R=new FileReader,M=A(R),F=/charset=([A-Za-z0-9_-]+)/.exec(O.type),X=F?F[1]:"utf-8";return R.readAsText(O,X),M}function B(O){for(var R=new Uint8Array(O),M=new Array(R.length),F=0;F<R.length;F++)M[F]=String.fromCharCode(R[F]);return M.join("")}function $(O){if(O.slice)return O.slice(0);var R=new Uint8Array(O.byteLength);return R.set(new Uint8Array(O)),R.buffer}function N(){return this.bodyUsed=!1,this._initBody=function(O){this.bodyUsed=this.bodyUsed,this._bodyInit=O,O?typeof O=="string"?this._bodyText=O:d.blob&&Blob.prototype.isPrototypeOf(O)?this._bodyBlob=O:d.formData&&FormData.prototype.isPrototypeOf(O)?this._bodyFormData=O:d.searchParams&&URLSearchParams.prototype.isPrototypeOf(O)?this._bodyText=O.toString():d.arrayBuffer&&d.blob&&h(O)?(this._bodyArrayBuffer=$(O.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):d.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(O)||m(O))?this._bodyArrayBuffer=$(O):this._bodyText=O=Object.prototype.toString.call(O):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof O=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):d.searchParams&&URLSearchParams.prototype.isPrototypeOf(O)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},d.blob&&(this.blob=function(){var O=S(this);if(O)return O;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var O=S(this);return O||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(d.blob)return this.blob().then(I);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var O=S(this);if(O)return O;if(this._bodyBlob)return D(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(B(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},d.formData&&(this.formData=function(){return this.text().then(K)}),this.json=function(){return this.text().then(JSON.parse)},this}var q=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function H(O){var R=O.toUpperCase();return q.indexOf(R)>-1?R:O}function k(O,R){if(!(this instanceof k))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');R=R||{};var M=R.body;if(O instanceof k){if(O.bodyUsed)throw new TypeError("Already read");this.url=O.url,this.credentials=O.credentials,R.headers||(this.headers=new E(O.headers)),this.method=O.method,this.mode=O.mode,this.signal=O.signal,!M&&O._bodyInit!=null&&(M=O._bodyInit,O.bodyUsed=!0)}else this.url=String(O);if(this.credentials=R.credentials||this.credentials||"same-origin",(R.headers||!this.headers)&&(this.headers=new E(R.headers)),this.method=H(R.method||this.method||"GET"),this.mode=R.mode||this.mode||null,this.signal=R.signal||this.signal||function(){if("AbortController"in u){var C=new AbortController;return C.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&M)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(M),(this.method==="GET"||this.method==="HEAD")&&(R.cache==="no-store"||R.cache==="no-cache")){var F=/([?&])_=[^&]*/;if(F.test(this.url))this.url=this.url.replace(F,"$1_="+new Date().getTime());else{var X=/\?/;this.url+=(X.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}k.prototype.clone=function(){return new k(this,{body:this._bodyInit})};function K(O){var R=new FormData;return O.trim().split("&").forEach(function(M){if(M){var F=M.split("="),X=F.shift().replace(/\+/g," "),C=F.join("=").replace(/\+/g," ");R.append(decodeURIComponent(X),decodeURIComponent(C))}}),R}function Y(O){var R=new E,M=O.replace(/\r?\n[\t ]+/g," ");return M.split("\r").map(function(F){return F.indexOf(`
`)===0?F.substr(1,F.length):F}).forEach(function(F){var X=F.split(":"),C=X.shift().trim();if(C){var V=X.join(":").trim();try{R.append(C,V)}catch(ee){console.warn("Response "+ee.message)}}}),R}N.call(k.prototype);function W(O,R){if(!(this instanceof W))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(R||(R={}),this.type="default",this.status=R.status===void 0?200:R.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=R.statusText===void 0?"":""+R.statusText,this.headers=new E(R.headers),this.url=R.url||"",this._initBody(O)}N.call(W.prototype),W.prototype.clone=function(){return new W(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new E(this.headers),url:this.url})},W.error=function(){var O=new W(null,{status:200,statusText:""});return O.ok=!1,O.status=0,O.type="error",O};var le=[301,302,303,307,308];W.redirect=function(O,R){if(le.indexOf(R)===-1)throw new RangeError("Invalid status code");return new W(null,{status:R,headers:{location:O}})},c.DOMException=u.DOMException;try{new c.DOMException}catch{c.DOMException=function(R,M){this.message=R,this.name=M;var F=Error(R);this.stack=F.stack},c.DOMException.prototype=Object.create(Error.prototype),c.DOMException.prototype.constructor=c.DOMException}function re(O,R){return new Promise(function(M,F){var X=new k(O,R);if(X.signal&&X.signal.aborted)return F(new c.DOMException("Aborted","AbortError"));var C=new XMLHttpRequest;function V(){C.abort()}C.onload=function(){var te={statusText:C.statusText,headers:Y(C.getAllResponseHeaders()||"")};X.url.indexOf("file://")===0&&(C.status<200||C.status>599)?te.status=200:te.status=C.status,te.url="responseURL"in C?C.responseURL:te.headers.get("X-Request-URL");var pe="response"in C?C.response:C.responseText;setTimeout(function(){M(new W(pe,te))},0)},C.onerror=function(){setTimeout(function(){F(new TypeError("Network request failed"))},0)},C.ontimeout=function(){setTimeout(function(){F(new TypeError("Network request timed out"))},0)},C.onabort=function(){setTimeout(function(){F(new c.DOMException("Aborted","AbortError"))},0)};function ee(te){try{return te===""&&u.location.href?u.location.href:te}catch{return te}}if(C.open(X.method,ee(X.url),!0),X.credentials==="include"?C.withCredentials=!0:X.credentials==="omit"&&(C.withCredentials=!1),"responseType"in C&&(d.blob?C.responseType="blob":d.arrayBuffer&&(C.responseType="arraybuffer")),R&&typeof R.headers=="object"&&!(R.headers instanceof E||u.Headers&&R.headers instanceof u.Headers)){var se=[];Object.getOwnPropertyNames(R.headers).forEach(function(te){se.push(y(te)),C.setRequestHeader(te,v(R.headers[te]))}),X.headers.forEach(function(te,pe){se.indexOf(pe)===-1&&C.setRequestHeader(pe,te)})}else X.headers.forEach(function(te,pe){C.setRequestHeader(pe,te)});X.signal&&(X.signal.addEventListener("abort",V),C.onreadystatechange=function(){C.readyState===4&&X.signal.removeEventListener("abort",V)}),C.send(typeof X._bodyInit>"u"?null:X._bodyInit)})}return re.polyfill=!0,u.fetch||(u.fetch=re,u.Headers=E,u.Request=k,u.Response=W),c.Headers=E,c.Request=k,c.Response=W,c.fetch=re,c})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var s=n.fetch?n:r;t=s.fetch,t.default=s.fetch,t.fetch=s.fetch,t.Headers=s.Headers,t.Request=s.Request,t.Response=s.Response,e.exports=t}(xd,xd.exports)),xd.exports}var Z6=X6();const yO=Qs(Z6);function Mt(e){return e==null?null:e.replace(/^0x/,"").replace(/^Fx/,"")}function Tn(e){return e==null?null:"0x"+Mt(e)}var Rd={exports:{}},cS;function Q6(){if(cS)return Rd.exports;cS=1;var e=typeof Reflect=="object"?Reflect:null,t=e&&typeof e.apply=="function"?e.apply:function($,N,q){return Function.prototype.apply.call($,N,q)},n;e&&typeof e.ownKeys=="function"?n=e.ownKeys:Object.getOwnPropertySymbols?n=function($){return Object.getOwnPropertyNames($).concat(Object.getOwnPropertySymbols($))}:n=function($){return Object.getOwnPropertyNames($)};function r(B){console&&console.warn&&console.warn(B)}var s=Number.isNaN||function($){return $!==$};function a(){a.init.call(this)}Rd.exports=a,Rd.exports.once=A,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var c=10;function u(B){if(typeof B!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof B)}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return c},set:function(B){if(typeof B!="number"||B<0||s(B))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+B+".");c=B}}),a.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function($){if(typeof $!="number"||$<0||s($))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+$+".");return this._maxListeners=$,this};function d(B){return B._maxListeners===void 0?a.defaultMaxListeners:B._maxListeners}a.prototype.getMaxListeners=function(){return d(this)},a.prototype.emit=function($){for(var N=[],q=1;q<arguments.length;q++)N.push(arguments[q]);var H=$==="error",k=this._events;if(k!==void 0)H=H&&k.error===void 0;else if(!H)return!1;if(H){var K;if(N.length>0&&(K=N[0]),K instanceof Error)throw K;var Y=new Error("Unhandled error."+(K?" ("+K.message+")":""));throw Y.context=K,Y}var W=k[$];if(W===void 0)return!1;if(typeof W=="function")t(W,this,N);else for(var le=W.length,re=w(W,le),q=0;q<le;++q)t(re[q],this,N);return!0};function h(B,$,N,q){var H,k,K;if(u(N),k=B._events,k===void 0?(k=B._events=Object.create(null),B._eventsCount=0):(k.newListener!==void 0&&(B.emit("newListener",$,N.listener?N.listener:N),k=B._events),K=k[$]),K===void 0)K=k[$]=N,++B._eventsCount;else if(typeof K=="function"?K=k[$]=q?[N,K]:[K,N]:q?K.unshift(N):K.push(N),H=d(B),H>0&&K.length>H&&!K.warned){K.warned=!0;var Y=new Error("Possible EventEmitter memory leak detected. "+K.length+" "+String($)+" listeners added. Use emitter.setMaxListeners() to increase limit");Y.name="MaxListenersExceededWarning",Y.emitter=B,Y.type=$,Y.count=K.length,r(Y)}return B}a.prototype.addListener=function($,N){return h(this,$,N,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function($,N){return h(this,$,N,!0)};function p(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function m(B,$,N){var q={fired:!1,wrapFn:void 0,target:B,type:$,listener:N},H=p.bind(q);return H.listener=N,q.wrapFn=H,H}a.prototype.once=function($,N){return u(N),this.on($,m(this,$,N)),this},a.prototype.prependOnceListener=function($,N){return u(N),this.prependListener($,m(this,$,N)),this},a.prototype.removeListener=function($,N){var q,H,k,K,Y;if(u(N),H=this._events,H===void 0)return this;if(q=H[$],q===void 0)return this;if(q===N||q.listener===N)--this._eventsCount===0?this._events=Object.create(null):(delete H[$],H.removeListener&&this.emit("removeListener",$,q.listener||N));else if(typeof q!="function"){for(k=-1,K=q.length-1;K>=0;K--)if(q[K]===N||q[K].listener===N){Y=q[K].listener,k=K;break}if(k<0)return this;k===0?q.shift():E(q,k),q.length===1&&(H[$]=q[0]),H.removeListener!==void 0&&this.emit("removeListener",$,Y||N)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function($){var N,q,H;if(q=this._events,q===void 0)return this;if(q.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):q[$]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete q[$]),this;if(arguments.length===0){var k=Object.keys(q),K;for(H=0;H<k.length;++H)K=k[H],K!=="removeListener"&&this.removeAllListeners(K);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(N=q[$],typeof N=="function")this.removeListener($,N);else if(N!==void 0)for(H=N.length-1;H>=0;H--)this.removeListener($,N[H]);return this};function y(B,$,N){var q=B._events;if(q===void 0)return[];var H=q[$];return H===void 0?[]:typeof H=="function"?N?[H.listener||H]:[H]:N?S(H):w(H,H.length)}a.prototype.listeners=function($){return y(this,$,!0)},a.prototype.rawListeners=function($){return y(this,$,!1)},a.listenerCount=function(B,$){return typeof B.listenerCount=="function"?B.listenerCount($):v.call(B,$)},a.prototype.listenerCount=v;function v(B){var $=this._events;if($!==void 0){var N=$[B];if(typeof N=="function")return 1;if(N!==void 0)return N.length}return 0}a.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]};function w(B,$){for(var N=new Array($),q=0;q<$;++q)N[q]=B[q];return N}function E(B,$){for(;$+1<B.length;$++)B[$]=B[$+1];B.pop()}function S(B){for(var $=new Array(B.length),N=0;N<$.length;++N)$[N]=B[N].listener||B[N];return $}function A(B,$){return new Promise(function(N,q){function H(K){B.removeListener($,k),q(K)}function k(){typeof B.removeListener=="function"&&B.removeListener("error",H),N([].slice.call(arguments))}D(B,$,k,{once:!0}),$!=="error"&&I(B,H,{once:!0})})}function I(B,$,N){typeof B.on=="function"&&D(B,"error",$,N)}function D(B,$,N,q){if(typeof B.on=="function")q.once?B.once($,N):B.on($,N);else if(typeof B.addEventListener=="function")B.addEventListener($,function H(k){q.once&&B.removeEventListener($,H),N(k)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof B)}return Rd.exports}var Kn=Q6();const zh=Qs(Kn);var vc=null;typeof WebSocket<"u"?vc=WebSocket:typeof MozWebSocket<"u"?vc=MozWebSocket:typeof global<"u"?vc=global.WebSocket||global.MozWebSocket:typeof window<"u"?vc=window.WebSocket||window.MozWebSocket:typeof self<"u"&&(vc=self.WebSocket||self.MozWebSocket);const J6=vc;function bO(e){try{return JSON.parse(e)}catch{return null}}function wO(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}const e$=globalThis.AbortController||require("abort-controller");class nh extends Error{constructor(t){let{error:n,hostname:r,path:s,method:a,requestBody:c,responseBody:u,responseStatusText:d,statusCode:h}=t;const p=`
      HTTP Request Error: An error occurred when interacting with the Access API.
      ${n?`error=${n}`:""}
      ${r?`hostname=${r}`:""}
      ${s?`path=${s}`:""}
      ${a?`method=${a}`:""}
      ${c?`requestBody=${c}`:""}
      ${u?`responseBody=${u}`:""}
      ${d?`responseStatusText=${d}`:""}
      ${h?`statusCode=${h}`:""}
    `;super(p),this.name="HTTP Request Error",this.statusCode=h,this.errorMessage=n}}async function Lt(e){let{hostname:t,path:n,method:r,body:s,headers:a,retryLimit:c=5,retryIntervalMs:u=1e3,timeoutLimit:d=3e4,enableRequestLogging:h=!0}=e;const p=s?JSON.stringify(s):null;function m(){const v=new e$,w=setTimeout(()=>{v.abort()},d);return yO(wO(t,n).toString(),{method:r,body:p,headers:a,signal:v.signal}).then(async E=>{if(E.ok)return E.json();const S=await E.text().catch(()=>null),A=bO(S);throw new nh({error:A?.message,hostname:t,path:n,method:r,requestBody:p,responseBody:S,responseStatusText:E.statusText,statusCode:E.status})}).catch(async E=>{throw E instanceof nh||E.name==="AbortError"?E:(h&&await qe({title:"Access Node Error",message:`The provided access node ${t} does not appear to be a valid REST/HTTP access node.
  Please verify that you are not unintentionally using a GRPC access node.
  See more here: https://docs.onflow.org/fcl/reference/sdk-guidelines/#connect`,level:dt.error}),new nh({error:E?.message,hostname:t,path:n,method:r,requestBody:p}))}).finally(()=>{clearTimeout(w)})}async function y(){let v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;try{return await m()}catch(w){const E=[408,429,500,502,503,504];if(w.name==="AbortError"||E.includes(w.statusCode))return await new Promise((S,A)=>{v<c?(h&&console.warn(`Access node unavailable, retrying in ${u} ms...`),setTimeout(()=>{S(y(v+1))},u)):A(w)});throw w}}return await y()}async function t$(e,t,n){const s=await(n.httpRequest||Lt)({hostname:n.node,path:`/v1/scripts?block_id=${e.block.id}`,method:"POST",body:{script:t.Buffer.from(e.message.cadence).toString("base64"),arguments:e.message.arguments.map(a=>t.Buffer.from(JSON.stringify(e.arguments[a].asArgument)).toString("base64"))}});return zb(e,t,s)}async function n$(e,t,n){const s=await(n.httpRequest||Lt)({hostname:n.node,path:`/v1/scripts?block_height=${e.block.height}`,method:"POST",body:{script:t.Buffer.from(e.message.cadence).toString("base64"),arguments:e.message.arguments.map(a=>t.Buffer.from(JSON.stringify(e.arguments[a].asArgument)).toString("base64"))}});return zb(e,t,s)}async function r$(e,t,n){const s=await(n.httpRequest||Lt)({hostname:n.node,path:`/v1/scripts?block_height=${e.block.isSealed?"sealed":"final"}`,method:"POST",body:{script:t.Buffer.from(e.message.cadence).toString("base64"),arguments:e.message.arguments.map(a=>t.Buffer.from(JSON.stringify(e.arguments[a].asArgument)).toString("base64"))}});return zb(e,t,s)}function zb(e,t,n){let r=t.response();return r.tag=e.tag,r.encodedData=JSON.parse(t.Buffer.from(n,"base64").toString()),r}async function i$(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return fe(n.node,"SDK Send Execute Script Error: opts.node must be defined."),fe(t.response,"SDK Send Execute Script Error: context.response must be defined."),fe(t.Buffer,"SDK Send Execute Script Error: context.Buffer must be defined."),e=await e,e.block.id?await t$(e,t,n):e.block.height?await n$(e,t,n):await r$(e,t,n)}const s$={SHA2_256:1,SHA2_384:2,SHA3_256:3,SHA3_384:4,KMAC128_BLS_BLS12_381:5},o$={ECDSA_P256:1,ECDSA_secp256k1:2,BLS_BLS12_381:3};async function a$(e,t,n){const s=await(n.httpRequest||Lt)({hostname:n.node,path:`/v1/accounts/${e.account.addr}?block_height=${e.block.height}&expand=contracts,keys`,method:"GET",body:null});return vO(e,t,s)}async function c$(e,t,n){const s=await(n.httpRequest||Lt)({hostname:n.node,path:`/v1/accounts/${e.account.addr}?block_height=${e.block.isSealed?"sealed":"final"}&expand=contracts,keys`,method:"GET",body:null});return vO(e,t,s)}function vO(e,t,n){let r=t.response();r.tag=e.tag;const s=a=>{const c={};if(!a)return c;for(let u of Object.keys(a))c[u]=t.Buffer.from(a[u],"base64").toString();return c};return r.account={address:n.address,balance:Number(n.balance),code:"",contracts:s(n.contracts),keys:n.keys?.map(a=>({index:Number(a.index),publicKey:a.public_key.replace(/^0x/,""),signAlgo:o$[a.signing_algorithm],signAlgoString:a.signing_algorithm,hashAlgo:s$[a.hashing_algorithm],hashAlgoString:a.hashing_algorithm,sequenceNumber:Number(a.sequence_number),weight:Number(a.weight),revoked:a.revoked}))??[]},r}async function l$(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return fe(n.node,"SDK Send Get Account Error: opts.node must be defined."),fe(t.response,"SDK Send Get Account Error: context.response must be defined."),fe(t.Buffer,"SDK Send Get Account Error: context.Buffer must be defined."),e=await e,e.block.height!==null?await a$(e,t,n):await c$(e,t,n)}async function u$(e,t,n){const s=await(n.httpRequest||Lt)({hostname:n.node,path:`/v1/blocks/${e.block.id}`,method:"GET",body:null});return qb(e,t,s)}async function f$(e,t,n){const s=await(n.httpRequest||Lt)({hostname:n.node,path:`/v1/blocks?height=${e.block.height}`,method:"GET",body:null});return qb(e,t,s)}async function d$(e,t,n){const r=n.httpRequest||Lt,s=e.block?.isSealed?"sealed":"final",a=await r({hostname:n.node,path:`/v1/blocks?height=${s}`,method:"GET",body:null});return qb(e,t,a)}function qb(e,t,n){const r=n.length?n[0]:null,s=t.response();return s.tag=e.tag,s.blockHeader={id:r.header.id,parentId:r.header.parent_id,height:Number(r.header.height),timestamp:r.header.timestamp},s}async function h$(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};fe(n.node,"SDK Send Get Block Header Error: opts.node must be defined."),fe(t.response,"SDK Send Get Block Header Error: context.response must be defined."),e=await e;const r=e.block.id!==null,s=e.block.height!==null;return r?await u$(e,t,n):s?await f$(e,t,n):await d$(e,t,n)}async function p$(e,t,n){const s=await(n.httpRequest||Lt)({hostname:n.node,path:`/v1/blocks/${e.block.id}?expand=payload`,method:"GET",body:null});return Hb(e,t,s)}async function g$(e,t,n){const s=await(n.httpRequest||Lt)({hostname:n.node,path:`/v1/blocks?height=${e.block.height}&expand=payload`,method:"GET",body:null});return Hb(e,t,s)}async function m$(e,t,n){const r=n.httpRequest||Lt,s=e.block?.isSealed?"sealed":"final",a=await r({hostname:n.node,path:`/v1/blocks?height=${s}&expand=payload`,method:"GET",body:null});return Hb(e,t,a)}function Hb(e,t,n){const r=n.length?n[0]:null,s=t.response();return s.tag=e.tag,s.block={id:r.header.id,parentId:r.header.parent_id,height:Number(r.header.height),timestamp:r.header.timestamp,parentVoterSignature:r.header.parent_voter_signature,collectionGuarantees:r.payload.collection_guarantees.map(a=>({collectionId:a.collection_id,signerIds:a.signer_ids})),blockSeals:r.payload.block_seals.map(a=>({blockId:a.block_id,executionReceiptId:a.result_id}))},s}async function y$(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};fe(n.node,"SDK Send Get Block Error: opts.node must be defined."),fe(t.response,"SDK Send Get Block Error: context.response must be defined."),e=await e;const r=e.block.id!==null,s=e.block.height!==null;return r?await p$(e,t,n):s?await g$(e,t,n):await m$(e,t,n)}async function b$(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};fe(n.node,"SDK Send Get Collection Error: opts.node must be defined."),fe(t.response,"SDK Send Get Collection Error: context.response must be defined.");const s=await(n.httpRequest||Lt)({hostname:n.node,path:`/v1/collections/${e.collection.id}?expand=transactions`,method:"GET",body:null}),a=t.response();return a.tag=e.tag,a.collection={id:s.id,transactionIds:s.transactions.map(c=>c.id)},a}async function w$(e,t,n){const s=await(n.httpRequest||Lt)({hostname:n.node,path:`/v1/events?type=${e.events.eventType}&start_height=${e.events.start}&end_height=${e.events.end}`,method:"GET",body:null});return EO(e,t,s)}async function v$(e,t,n){const s=await(n.httpRequest||Lt)({hostname:n.node,path:`/v1/events?type=${e.events.eventType}&block_ids=${e.events.blockIds.join(",")}`,method:"GET",body:null});return EO(e,t,s)}function EO(e,t,n){let r=t.response();return r.tag=e.tag,r.events=[],n.forEach(s=>s.events?s.events.forEach(a=>r.events.push({blockId:s.block_id,blockHeight:Number(s.block_height),blockTimestamp:s.block_timestamp,type:a.type,transactionId:a.transaction_id,transactionIndex:Number(a.transaction_index),eventIndex:Number(a.event_index),payload:JSON.parse(t.Buffer.from(a.payload,"base64").toString())})):null),r}async function E$(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};fe(n.node,"SDK Send Get Events Error: opts.node must be defined."),fe(t.response,"SDK Send Get Events Error: context.response must be defined."),fe(t.Buffer,"SDK Send Get Events Error: context.Buffer must be defined."),e=await e;const r=e.events.start!==null,s=Array.isArray(e.events.blockIds)&&e.events.blockIds.length>0;return fe(r||s,"SendGetEventsError: Unable to determine which get events request to send. Either a block height range, or block IDs must be specified."),r?await w$(e,t,n):await v$(e,t,n)}async function S$(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};fe(n.node,"SDK Send Get Transaction Error: opts.node must be defined."),fe(t.response,"SDK Send Get Transaction Error: context.response must be defined."),fe(t.Buffer,"SDK Send Get Transaction Error: context.Buffer must be defined.");const r=n.httpRequest||Lt;e=await e;const s=await r({hostname:n.node,path:`/v1/transactions/${e.transaction.id}`,method:"GET",body:null}),a=h=>({address:h.address,keyId:Number(h.key_index),sequenceNumber:Number(h.sequence_number)}),c=h=>({address:h.address,keyId:Number(h.key_index),signature:h.signature}),u=h=>JSON.parse(t.Buffer.from(h,"base64").toString());let d=t.response();return d.tag=e.tag,d.transaction={script:t.Buffer.from(s.script,"base64").toString(),args:[...s.arguments.map(u)],referenceBlockId:s.reference_block_id,gasLimit:Number(s.gas_limit),payer:s.payer,proposalKey:s.proposal_key?a(s.proposal_key):s.proposal_key,authorizers:s.authorizers,payloadSignatures:[...s.payload_signatures.map(c)],envelopeSignatures:[...s.envelope_signatures.map(c)]},d}const _$={UNKNOWN:0,PENDING:1,FINALIZED:2,EXECUTED:3,SEALED:4,EXPIRED:5};async function A$(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};fe(n.node,"SDK Send Get Transaction Status Error: opts.node must be defined."),fe(t.response,"SDK Send Get Transaction Status Error: context.response must be defined."),fe(t.Buffer,"SDK Send Get Transaction Status Error: context.Buffer must be defined.");const r=n.httpRequest||Lt;e=await e;const s=await r({hostname:n.node,path:`/v1/transaction_results/${e.transaction.id}`,method:"GET",body:null});let a=t.response();return a.tag=e.tag,a.transactionStatus={blockId:s.block_id,status:_$[s.status.toUpperCase()]||"",statusString:s.status.toUpperCase(),statusCode:s.status_code,errorMessage:s.error_message,events:s.events.map(c=>({type:c.type,transactionId:c.transaction_id,transactionIndex:Number(c.transaction_index),eventIndex:Number(c.event_index),payload:JSON.parse(t.Buffer.from(c.payload,"base64").toString())}))},a}async function x$(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};fe(!!n.node,"SDK Send Ping Error: opts.node must be defined."),fe(!!t.response,"SDK Send Ping Error: context.response must be defined."),await(n.httpRequest||Lt)({hostname:n.node,path:"/v1/blocks?height=sealed",method:"GET",body:null});let s=typeof t?.response=="function"?t.response():{};return s.tag=e.tag,s}const R$=e=>`${withPrefix(e.addr)}-${e.keyId}`;async function O$(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};fe(n.node,"SDK Send Transaction Error: opts.node must be defined."),fe(t.response,"SDK Send Transaction Error: context.response must be defined."),fe(t.Buffer,"SDK Send Transaction Error: context.Buffer must be defined.");const r=n.httpRequest||Lt;e=await e;let s=[];for(let p of Object.values(e.accounts))try{if(!p.role.payer&&p.signature!=null){const m={address:Mt(p.addr),key_index:String(p.keyId),signature:t.Buffer.from(p.signature,"hex").toString("base64")};s.find(y=>y.address===m.address&&y.key_index===m.key_index&&y.signature===m.signature)||s.push(m)}}catch(m){throw console.error("SDK HTTP Send Error: Trouble applying payload signature",{acct:p,ix:e}),m}let a={};for(let p of Object.values(e.accounts))try{if(p.role.payer&&p.signature!=null){let m=p.tempId||R$(p);a[m]=a[m]||{address:Mt(p.addr),key_index:String(p.keyId),signature:t.Buffer.from(p.signature,"hex").toString("base64")}}}catch(m){throw console.error("SDK HTTP Send Error: Trouble applying envelope signature",{acct:p,ix:e}),m}a=Object.values(a);var c=Date.now();const u=await r({hostname:n.node,path:"/v1/transactions",method:"POST",body:{script:t.Buffer.from(e.message.cadence).toString("base64"),arguments:[...e.message.arguments.map(p=>t.Buffer.from(JSON.stringify(e.arguments[p].asArgument)).toString("base64"))],reference_block_id:e.message.refBlock?e.message.refBlock:null,gas_limit:String(e.message.computeLimit),payer:Mt(e.accounts[Array.isArray(e.payer)?e.payer[0]:e.payer].addr),proposal_key:{address:Mt(e.accounts[e.proposer].addr),key_index:String(e.accounts[e.proposer].keyId),sequence_number:String(e.accounts[e.proposer].sequenceNum)},authorizers:e.authorizations.map(p=>e.accounts[p].addr).reduce((p,m)=>p.find(y=>y===m)?p:[...p,m],[]).map(Mt),payload_signatures:s,envelope_signatures:a}});var d=Date.now();let h=t.response();return h.tag=e.tag,h.transactionId=u.id,typeof window<"u"&&typeof CustomEvent<"u"&&window.dispatchEvent(new CustomEvent("FLOW::TX",{detail:{txId:h.transactionId,delta:d-c}})),h}async function T$(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};fe(n.node,"SDK Send Get Network Parameters Error: opts.node must be defined."),fe(t.response,"SDK Send Get Network Parameters Error: context.response must be defined.");const r=n.httpRequest||Lt;e=await e;const s=await r({hostname:n.node,path:"/v1/network/parameters",method:"GET",body:null,enableRequestLogging:n.enableRequestLogging??!0});let a=t.response();return a.tag=e.tag,a.networkParameters={chainId:s.chain_id},a}async function D$(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};fe(n.node,"SDK Send Get Node Version Info Error: opts.node must be defined."),fe(t.response,"SDK Send Get Node Verison Info Error: context.response must be defined.");const r=n.httpRequest||Lt;e=await e;const s=await r({hostname:n.node,path:"/v1/node_version_info",method:"GET"});let a=t.response();return a.tag=e.tag,a.nodeVersionInfo={semver:s.semver,commit:s.commit,sporkId:s.spork_id,protocolVersion:parseInt(s.protocol_version),sporkRootBlockHeight:parseInt(s.spork_root_block_height),nodeRootBlockHeight:parseInt(s.node_root_block_height)},a}const SO=J6;class lS extends Error{constructor(t){let{code:n,reason:r,message:s,wasClean:a}=t;const c=`
      connectWs: connection closed with error${s?`: ${s}`:""}
      ${n?`code: ${n}`:""}
      ${r?`reason: ${r}`:""}
      ${a?`wasClean: ${a}`:""}
    `;super(c),this.name="WebsocketError",this.code=n,this.reason=r,this.wasClean=!1}}function I$(e){let{hostname:t,path:n,params:r,getParams:s,retryLimit:a=5,retryIntervalMs:c=1e3}=e;if(s&&r)throw new Error("connectWs: cannot specify both params and getParams");let u=new Kn.EventEmitter,d=0;const h=s||(()=>r);let p=()=>{};return function m(){let y=!1,v=!1;const w=C$(t,n,h()),E=new SO(w);E.onmessage=function(S){const A=bO(S.data);A?u.emit("data",A):(u.emit("error",new lS({message:"invalid JSON data"})),this.close())},E.onclose=function(S){if(y){u.emit("close"),u.removeAllListeners();return}v?setTimeout(m,c):d<a?(d++,setTimeout(m,c)):(u.emit("error",new lS({wasClean:S.wasClean,code:S.code,reason:S.reason,message:"failed to connect"})),setTimeout(()=>{u.emit("close"),u.removeAllListeners()}))},E.onopen=function(){v=!0,d=0},p=()=>{y=!0,E.close()}}(),{on(m,y){return u.on(m,y),this},off(m,y){return u.off(m,y),this},close(){p()}}}function C$(e,t,n){const r=new URL(t||"",e);return r.protocol==="https:"?r.protocol="wss:":r.protocol==="http:"&&(r.protocol="ws:"),Object.entries(n||{}).forEach(s=>{let[a,c]=s;if(c){let u;Array.isArray(c)?u=c.join(","):u=c.toString(),r.searchParams.append(a,u)}}),r.toString()}function N$(e,t,n){const r=t.response();return r.tag=e.tag,r.events=n.Events?.length>0?n.Events.map(s=>({blockId:n.BlockID,blockHeight:Number(n.Height),blockTimestamp:n.BlockTimestamp,type:s.Type,transactionId:s.TransactionID,transactionIndex:Number(s.TransactionIndex),eventIndex:Number(s.EventIndex),payload:JSON.parse(t.Buffer.from(s.Payload,"base64").toString())})):null,r.heartbeat={blockId:n.BlockID,blockHeight:Number(n.Height),blockTimestamp:n.BlockTimestamp},r}function $$(e,t,n){const r=t.response();return r.tag=e.tag,r.streamConnection=n,r}async function U$(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};fe(n.node,"SDK Send Get Events Error: opts.node must be defined."),fe(t.response,"SDK Send Get Events Error: context.response must be defined."),fe(t.Buffer,"SDK Send Get Events Error: context.Buffer must be defined.");const r=await e,s=n.connectWs||I$,a=new Kn.EventEmitter;let c=null;const u=s({hostname:n.node,path:"/v1/subscribe_events",getParams:()=>{const h={event_types:r.subscribeEvents?.eventTypes,addresses:r.subscribeEvents?.addresses,contracts:r.subscribeEvents?.contracts,heartbeat_interval:r.subscribeEvents?.heartbeatInterval};return c?h.start_height=c+1:(h.start_block_id=r.subscribeEvents?.startBlockId,h.start_height=r.subscribeEvents?.startHeight),h}});return u.on("data",h=>{const p=N$(r,t,h);c=p.heartbeat.blockHeight,a.emit("data",p)}),u.on("error",h=>{a.emit("error",h)}),u.on("close",()=>{a.emit("close")}),$$(r,t,{on(h,p){return a.on(h,p),this},off(h,p){return a.off(h,p),this},close(){u.close()}})}const Fb=async function(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};switch(fe(!!n?.node,'SDK Send Error: Either opts.node or "accessNode.api" in config must be defined.'),fe(!!t.ix,"SDK Send Error: context.ix must be defined."),e=await e,!0){case t.ix.isTransaction(e):return n.sendTransaction?n.sendTransaction(e,t,n):O$(e,t,n);case t.ix.isGetTransactionStatus(e):return n.sendGetTransactionStatus?n.sendGetTransactionStatus(e,t,n):A$(e,t,n);case t.ix.isGetTransaction(e):return n.sendGetTransaction?n.sendGetTransaction(e,t,n):S$(e,t,n);case t.ix.isScript(e):return n.sendExecuteScript?n.sendExecuteScript(e,t,n):i$(e,t,n);case t.ix.isGetAccount(e):return n.sendGetAccount?n.sendGetAccount(e,t,n):l$(e,t,n);case t.ix.isGetEvents(e):return n.sendGetEvents?n.sendGetEvents(e,t,n):E$(e,t,n);case t.ix.isSubscribeEvents?.(e):return n.connectSubscribeEvents?n.connectSubscribeEvents(e,t,n):U$(e,t,n);case t.ix.isGetBlock(e):return n.sendGetBlock?n.sendGetBlock(e,t,n):y$(e,t,n);case t.ix.isGetBlockHeader(e):return n.sendGetBlockHeader?n.sendGetBlockHeader(e,t,n):h$(e,t,n);case t.ix.isGetCollection(e):return n.sendGetCollection?n.sendGetCollection(e,t,n):b$(e,t,n);case t.ix.isPing(e):return n.sendPing?n.sendPing(e,t,n):x$(e,t,n);case t.ix.isGetNetworkParameters(e):return n.sendGetNetworkParameters?n.sendGetNetworkParameters(e,t,n):T$(e,t,n);case t.ix.isGetNodeVersionInfo?.(e):return n.sendGetNodeVersionInfo?n.sendGetNodeVersionInfo(e,t,n):D$(e,t,n);default:return e}};let uS=function(e){return e.LIST_SUBSCRIPTIONS="list_subscriptions",e.SUBSCRIBE="subscribe",e.UNSUBSCRIBE="unsubscribe",e}({});class vu extends Error{constructor(t,n){super(n),this.name="SocketError",this.code=t}static fromMessage(t){return new vu(t.code,t.message)}}const B$=1;class P${counter=0;socket=null;subscriptions=[];reconnectAttempts=0;connectPromise=null;closeConnection=null;constructor(t,n){this.config={...n,reconnectOptions:{initialReconnectDelay:500,reconnectAttempts:5,maxReconnectDelay:5e3,...n.reconnectOptions}},this.handlers=t}subscribe(t){const n=this._subscribe(t);return{unsubscribe:()=>{n.then(r=>r&&this.unsubscribe(r))}}}async _subscribe(t){const r=this.getHandler(t.topic).createSubscriber(t.args,t.onData,t.onError);let s=null;try{await this.connect(),s={id:String(this.counter++),topic:t.topic,subscriber:r},this.subscriptions.push(s);const a=await this.sendSubscribe(s);if(a.error)throw new Error(`Failed to subscribe to topic ${s.topic}`,{cause:vu.fromMessage(a.error)})}catch(a){return r.onError(a instanceof Error?a:new Error(String(a))),s&&this.unsubscribe(s.id),null}return s.id}unsubscribe(t){const n=this.subscriptions.find(r=>r.id===t);if(n){if(this.subscriptions=this.subscriptions.filter(r=>r.id!==t),this.subscriptions.length===0){this.closeConnection?.();return}this.sendUnsubscribe(n).catch(r=>{console.error(`Error while unsubscribing from topic: ${r}`)})}}async connect(){return this.connectPromise?this.connectPromise:(this.connectPromise=new Promise((t,n)=>{if(this.socket?.readyState===B$){t();return}this.socket=new SO(this.config.node);const r=c=>{const u=JSON.parse(c.data);if("action"in u&&u.error){const h=this.subscriptions.find(p=>p.id===u.subscription_id);h&&(h.subscriber.onError(new Error(`Failed to subscribe to topic ${h.topic}: ${u.error.message}`)),this.subscriptions=this.subscriptions.filter(p=>p.id!==u.subscription_id));return}const d=this.subscriptions.find(h=>h.id===u.subscription_id);d&&!("action"in u)&&u.subscription_id===d.id&&d.subscriber.onData(u.payload)},s=()=>{this.handleSocketError(new Error("WebSocket closed")).then(()=>{t()}).catch(c=>{n(c)})},a=()=>{t()};this.socket.addEventListener("message",r),this.socket.addEventListener("close",s),this.socket.addEventListener("open",a),this.closeConnection=()=>{this.socket?.removeEventListener("message",r),this.socket?.removeEventListener("close",s),this.socket?.removeEventListener("open",a),this.socket?.close(),this.socket=null,this.closeConnection=null,this.connectPromise=null}}),this.connectPromise)}async handleSocketError(t){if(this.closeConnection?.(),++this.reconnectAttempts>=this.config.reconnectOptions.reconnectAttempts)throw qe({level:dt.error,title:"WebSocket Error",message:`Failed to reconnect to the server after ${this.reconnectAttempts+1} attempts: ${t}`}),this.subscriptions.forEach(n=>{n.subscriber.onError(new Error(`Failed to reconnect to the server after ${this.reconnectAttempts+1} attempts: ${t}`))}),this.subscriptions=[],this.reconnectAttempts=0,t;qe({level:dt.warn,title:"WebSocket Error",message:`WebSocket error, reconnecting in ${this.backoffInterval}ms: ${t}`}),await new Promise(n=>setTimeout(n,this.backoffInterval)),await this.connect(),await Promise.all(this.subscriptions.map(async n=>{await this.sendSubscribe(n).catch(r=>{n.subscriber.onError(new Error(`Failed to restore subscription: ${r}`)),this.subscriptions=this.subscriptions.filter(s=>s.id!==n.id)})})),this.reconnectAttempts=0}async sendSubscribe(t){const n={action:uS.SUBSCRIBE,topic:t.topic,arguments:t.subscriber.getConnectionArgs(),subscription_id:String(t.id)},r=await this.request(n);if(r.error)throw new Error(`Failed to subscribe to topic ${t.topic}`,{cause:vu.fromMessage(r.error)});return r}async sendUnsubscribe(t){const n={action:uS.UNSUBSCRIBE,subscription_id:t.id};this.socket?.send(JSON.stringify(n));const r=await this.request(n);if(r.error)throw new Error(`Failed to unsubscribe from topic ${t.topic}`,{cause:vu.fromMessage(r.error)});return r}async request(t){let n=()=>{};return await new Promise((r,s)=>{if(!this.socket){s(new Error("WebSocket is not connected"));return}n=()=>{this.socket?.removeEventListener("error",a),this.socket?.removeEventListener("message",u),this.socket?.removeEventListener("close",c)},this.socket.addEventListener("error",a),this.socket.addEventListener("message",u),this.socket.addEventListener("close",c),this.socket.send(JSON.stringify(t));function a(d){s(new Error(`WebSocket error: ${d}`))}function c(){s(new Error("WebSocket closed"))}function u(d){const h=JSON.parse(d.data);h.subscription_id===t.subscription_id&&r(h)}}).finally(()=>{n()})}getHandler(t){const n=this.handlers.find(r=>r.topic===t);if(!n)throw new Error(`No handler found for topic ${t}`);return n}get backoffInterval(){return Math.min(this.config.reconnectOptions.maxReconnectDelay,this.config.reconnectOptions.initialReconnectDelay*2**this.reconnectAttempts)}}const k$={topic:Jo.BLOCKS,createSubscriber:(e,t,n)=>{let r={...e};return{onData(s){const a={block:{id:s.header.id,parentId:s.header.parent_id,height:Number(s.header.height),timestamp:s.header.timestamp,parentVoterSignature:s.header.parent_voter_signature,collectionGuarantees:s.payload.collection_guarantees.map(c=>({collectionId:c.collection_id,signerIds:c.signer_indices})),blockSeals:s.payload.block_seals.map(c=>({blockId:c.block_id,executionReceiptId:c.result_id}))}};r={blockStatus:r.blockStatus,startBlockHeight:Number(BigInt(s.header.height)+BigInt(1))},t(a)},onError(s){n(s)},getConnectionArgs(){let s={block_status:r.blockStatus};return"startBlockHeight"in r&&r.startBlockHeight?{...s,start_block_height:String(r.startBlockHeight)}:"startBlockId"in r&&r.startBlockId?{...s,start_block_id:r.startBlockId}:s}}}},M$={topic:Jo.BLOCK_HEADERS,createSubscriber:(e,t,n)=>{let r={...e};return{onData(s){const a={blockHeader:{id:s.id,parentId:s.parent_id,height:Number(s.height),timestamp:s.timestamp,parentVoterSignature:s.parent_voter_signature}};r={blockStatus:r.blockStatus,startBlockHeight:Number(BigInt(s.height)+BigInt(1))},t(a)},onError(s){n(s)},getConnectionArgs(){let s={block_status:r.blockStatus};return"startBlockHeight"in r&&r.startBlockHeight?{...s,start_block_height:r.startBlockHeight}:"startBlockId"in r&&r.startBlockId?{...s,start_block_id:r.startBlockId}:s}}}},L$={topic:Jo.BLOCK_DIGESTS,createSubscriber:(e,t,n)=>{let r={...e};return{onData(s){const a={blockDigest:{id:s.block_id,height:Number(s.height),timestamp:s.timestamp}};r={blockStatus:r.blockStatus,startBlockId:String(BigInt(s.height)+BigInt(1))},t(a)},onError(s){n(s)},getConnectionArgs(){let s={block_status:r.blockStatus};return"startBlockHeight"in r&&r.startBlockHeight?{...s,start_block_height:r.startBlockHeight}:"startBlockId"in r&&r.startBlockId?{...s,start_block_id:r.startBlockId}:s}}}},j$={topic:Jo.ACCOUNT_STATUSES,createSubscriber:(e,t,n)=>{let r={...e};return{onData(s){const a=[];for(const[c,u]of Object.entries(s.account_events)){for(const d of u){const h={accountStatusEvent:{accountAddress:c,blockId:s.block_id,blockHeight:Number(s.height),type:d.type,transactionId:d.transaction_id,transactionIndex:Number(d.transaction_index),eventIndex:Number(d.event_index),payload:JSON.parse(Buffer.from(d.payload,"base64").toString())}};a.push(h)}a.sort((d,h)=>{const p=d.accountStatusEvent.transactionIndex-h.accountStatusEvent.transactionIndex;return p!==0?p:d.accountStatusEvent.eventIndex-h.accountStatusEvent.eventIndex});for(const d of a)t(d);r={...r,startBlockHeight:Number(BigInt(s.height)+BigInt(1)),startBlockId:void 0}}},onError(s){n(s)},getConnectionArgs(){let s={event_types:r.eventTypes,addresses:r.addresses,account_addresses:r.accountAddresses};return"startBlockHeight"in r&&r.startBlockHeight?{...s,start_block_height:r.startBlockHeight}:"startBlockId"in r&&r.startBlockId?{...s,start_block_id:r.startBlockId}:s}}}},z$={UNKNOWN:0,PENDING:1,FINALIZED:2,EXECUTED:3,SEALED:4,EXPIRED:5},q$={topic:Jo.TRANSACTION_STATUSES,createSubscriber:(e,t,n)=>{let r={...e};return{onData(s){const a={transactionStatus:{blockId:s.transaction_result.block_id,status:z$[s.transaction_result.status.toUpperCase()],statusString:s.transaction_result.status.toUpperCase(),statusCode:s.transaction_result.status_code,errorMessage:s.transaction_result.error_message,events:s.transaction_result.events.map(c=>({type:c.type,transactionId:c.transaction_id,transactionIndex:Number(c.transaction_index),eventIndex:Number(c.event_index),payload:JSON.parse(Ot.Buffer.from(c.payload,"base64").toString())}))}};t(a)},onError(s){n(s)},getConnectionArgs(){return{tx_id:r.transactionId}}}}},H$={topic:Jo.EVENTS,createSubscriber:(e,t,n)=>{let r={...e};return{onData(s){for(const a of s.events){const c={event:{blockId:s.block_id,blockHeight:Number(s.block_height),blockTimestamp:s.block_timestamp,type:a.type,transactionId:a.transaction_id,transactionIndex:Number(a.transaction_index),eventIndex:Number(a.event_index),payload:JSON.parse(Buffer.from(a.payload,"base64").toString())}};t(c)}r={...r,startHeight:Number(BigInt(s.block_height)+BigInt(1)),startBlockId:void 0}},onError(s){n(s)},getConnectionArgs(){let s={event_types:r.eventTypes,addresses:r.addresses,contracts:r.contracts};return"startBlockHeight"in r&&r.startBlockHeight?{...s,start_block_height:r.startBlockHeight}:"startBlockId"in r&&r.startBlockId?{...s,start_block_id:r.startBlockId}:s}}}},F$=[k$,M$,L$,j$,q$,H$];let fS=new Map;function V$(e,t){let{topic:n,args:r,onData:s,onError:a}=e;const c=G$(t.node),u=fS.get(c)||new P$(F$,{node:c});return fS.set(c,u),u.subscribe({topic:n,args:r,onData:s,onError:a})}function G$(e){const t=new URL(wO(e,"/v1/ws"));return t.protocol==="https:"?t.protocol="wss:":t.protocol==="http:"&&(t.protocol="ws:"),t.toString()}const K$={send:Fb,subscribe:V$};var Wm={},Xm={},Zm={},Qm={},Jm,dS;function Vb(){if(dS)return Jm;dS=1;var e=function(n,r){return function(s,a){var c=a*2,u=r*2;s[c]=n[u],s[c+1]=n[u+1]}};return Jm=e,Jm}var hS;function Y$(){return hS||(hS=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=n(Vb());function n(a){return a&&a.__esModule?a:{default:a}}var r=function(c){for(var u=c.A,d=c.C,h=0;h<25;h+=5){for(var p=0;p<5;p++)(0,t.default)(u,h+p)(d,p);for(var m=0;m<5;m++){var y=(h+m)*2,v=(m+1)%5*2,w=(m+2)%5*2;u[y]^=~d[v]&d[w],u[y+1]^=~d[v+1]&d[w+1]}}},s=r;e.default=s}(Qm)),Qm}var ey={},ty={},pS;function W$(){return pS||(pS=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=new Uint32Array([0,1,0,32898,2147483648,32906,2147483648,2147516416,0,32907,0,2147483649,2147483648,2147516545,2147483648,32777,0,138,0,136,0,2147516425,0,2147483658,0,2147516555,2147483648,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,0,32778,2147483648,2147483658,2147483648,2147516545,2147483648,32896,0,2147483649,2147483648,2147516424]),n=t;e.default=n}(ty)),ty}var gS;function X$(){return gS||(gS=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=n(W$());function n(a){return a&&a.__esModule?a:{default:a}}var r=function(c){var u=c.A,d=c.roundIndex,h=d*2;u[0]^=t.default[h],u[1]^=t.default[h+1]},s=r;e.default=s}(ey)),ey}var ny={},ry={},mS;function Z$(){return mS||(mS=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=[10,7,11,17,18,3,5,16,8,21,24,4,15,23,19,13,12,2,20,14,22,9,6,1],n=t;e.default=n}(ry)),ry}var iy={},yS;function Q$(){return yS||(yS=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=[1,3,6,10,15,21,28,36,45,55,2,14,27,41,56,8,25,43,62,18,39,61,20,44],n=t;e.default=n}(iy)),iy}var bS;function J$(){return bS||(bS=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=s(Z$()),n=s(Q$()),r=s(Vb());function s(u){return u&&u.__esModule?u:{default:u}}var a=function(d){var h=d.A,p=d.C,m=d.W;(0,r.default)(h,1)(m,0);for(var y=0,v=0,w=0,E=32,S=0;S<24;S++){var A=t.default[S],I=n.default[S];(0,r.default)(h,A)(p,0),y=m[0],v=m[1],E=32-I,w=I<32?0:1,m[w]=y<<I|v>>>E,m[(w+1)%2]=v<<I|y>>>E,(0,r.default)(m,0)(h,A),(0,r.default)(p,0)(m,0)}},c=a;e.default=c}(ny)),ny}var sy={},wS;function eU(){return wS||(wS=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=n(Vb());function n(a){return a&&a.__esModule?a:{default:a}}var r=function(c){for(var u=c.A,d=c.C,h=c.D,p=c.W,m=0,y=0,v=0;v<5;v++){var w=v*2,E=(v+5)*2,S=(v+10)*2,A=(v+15)*2,I=(v+20)*2;d[w]=u[w]^u[E]^u[S]^u[A]^u[I],d[w+1]=u[w+1]^u[E+1]^u[S+1]^u[A+1]^u[I+1]}for(var D=0;D<5;D++){(0,t.default)(d,(D+1)%5)(p,0),m=p[0],y=p[1],p[0]=m<<1|y>>>31,p[1]=y<<1|m>>>31,h[D*2]=d[(D+4)%5*2]^p[0],h[D*2+1]=d[(D+4)%5*2+1]^p[1];for(var B=0;B<25;B+=5)u[(B+D)*2]^=h[D*2],u[(B+D)*2+1]^=h[D*2+1]}},s=r;e.default=s}(sy)),sy}var vS;function tU(){return vS||(vS=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=a(Y$()),n=a(X$()),r=a(J$()),s=a(eU());function a(d){return d&&d.__esModule?d:{default:d}}var c=function(){var h=new Uint32Array(10),p=new Uint32Array(10),m=new Uint32Array(2);return function(y){for(var v=0;v<24;v++)(0,s.default)({A:y,C:h,D:p,W:m}),(0,r.default)({A:y,C:h,W:m}),(0,t.default)({A:y,C:h}),(0,n.default)({A:y,roundIndex:v});h.fill(0),p.fill(0),m.fill(0)}},u=c;e.default=u}(Zm)),Zm}var ES;function nU(){return ES||(ES=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Lb(),n=r(tU());function r(d){return d&&d.__esModule?d:{default:d}}var s=function(h,p){for(var m=0;m<h.length;m+=8){var y=m/4;p[y]^=h[m+7]<<24|h[m+6]<<16|h[m+5]<<8|h[m+4],p[y+1]^=h[m+3]<<24|h[m+2]<<16|h[m+1]<<8|h[m]}return p},a=function(h,p){for(var m=0;m<p.length;m+=8){var y=m/4;p[m]=h[y+1],p[m+1]=h[y+1]>>>8,p[m+2]=h[y+1]>>>16,p[m+3]=h[y+1]>>>24,p[m+4]=h[y],p[m+5]=h[y]>>>8,p[m+6]=h[y]>>>16,p[m+7]=h[y]>>>24}return p},c=function(h){var p=this,m=h.capacity,y=h.padding,v=(0,n.default)(),w=200,E=m/8,S=w-m/4,A=0,I=new Uint32Array(w/4),D=t.Buffer.allocUnsafe(S);return this.absorb=function(B){for(var $=0;$<B.length;$++)D[A]=B[$],A+=1,A>=S&&(s(D,I),v(I),A=0);return p},this.squeeze=function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},$={buffer:B.buffer||t.Buffer.allocUnsafe(E),padding:B.padding||y,queue:t.Buffer.allocUnsafe(D.length),state:new Uint32Array(I.length)};D.copy($.queue);for(var N=0;N<I.length;N++)$.state[N]=I[N];$.queue.fill(0,A),$.queue[A]|=$.padding,$.queue[S-1]|=128,s($.queue,$.state);for(var q=0;q<$.buffer.length;q+=S)v($.state),a($.state,$.buffer.slice(q,q+S));return $.buffer},this.reset=function(){return D.fill(0),I.fill(0),A=0,p},this},u=c;e.default=u}(Xm)),Xm}var SS;function rU(){return SS||(SS=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.SHAKE=e.SHA3Hash=e.SHA3=e.Keccak=void 0;var t=Lb(),n=r(nU());function r(p){return p&&p.__esModule?p:{default:p}}var s=function(m){var y=m.allowedSizes,v=m.defaultSize,w=m.padding;return function E(){var S=this,A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:v;if(!this||this.constructor!==E)return new E(A);if(y&&!y.includes(A))throw new Error("Unsupported hash length");var I=new n.default({capacity:A});return this.update=function(D){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"utf8";if(t.Buffer.isBuffer(D))return I.absorb(D),S;if(typeof D=="string")return S.update(t.Buffer.from(D,B));throw new TypeError("Not a string or buffer")},this.digest=function(){var D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"binary",B=typeof D=="string"?{format:D}:D,$=I.squeeze({buffer:B.buffer,padding:B.padding||w});return B.format&&B.format!=="binary"?$.toString(B.format):$},this.reset=function(){return I.reset(),S},this}},a=s({allowedSizes:[224,256,384,512],defaultSize:512,padding:1});e.Keccak=a;var c=s({allowedSizes:[224,256,384,512],defaultSize:512,padding:6});e.SHA3=c;var u=s({allowedSizes:[128,256],defaultSize:256,padding:31});e.SHAKE=u;var d=a;e.SHA3Hash=d,c.SHA3Hash=d;var h=c;e.default=h}(Wm)),Wm}rU();function _O(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];if(!e.length&&!t.length||!e.length)return n;if(!t.length)return n.push(...e),n;const[r,...s]=e,[a,...c]=t;return r!==void 0&&n.push(r),a!==void 0&&n.push(a),_O(s,c,n)}function AO(e){return function(t){return typeof t=="function"?(qe.deprecate({pkg:"FCL/SDK",subject:"Interopolation of functions into template literals",transition:"https://github.com/onflow/flow-js-sdk/blob/master/packages/sdk/TRANSITIONS.md#0001-deprecate-params"}),AO(e)(t(e))):String(t)}}function xO(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return typeof e=="string"?()=>e:typeof e=="function"?e:s=>_O([...e],n.map(AO(s))).join("").trim()}const Me=(e,t,n)=>({label:e,asArgument:t,asInjection:r=>(qe.deprecate({pkg:"@onflow/types",subject:`Passing in ${e} as value for ${e}`,message:`Going forward, use ${e} as value for ${e}.`}),n(r))}),Fo=e=>Array.isArray(e),Js=e=>typeof e=="object",RO=e=>e==null,iU=e=>typeof e=="boolean",Tt=e=>typeof e=="number",jt=e=>Number.isInteger(e),ht=e=>typeof e=="string",Ie=e=>{throw new Error("Type Error: "+e)},zt=e=>{qe.deprecate({pkg:"@onflow/types",subject:`Passing in Number as value for ${e}`,message:`Going forward, use String as value for ${e}.`,transition:"https://github.com/onflow/flow-js-sdk/blob/master/packages/types/WARNINGS.md#0002-[U]Int*-and-Word*-as-Number"})};let _S=!1;const sU={label:"Identity",asArgument:e=>(_S||(qe.deprecate({pkg:"@onflow/types",subject:"Identity",message:"Identity type is deprecated and will be removed in v2.0.0.  Please remove it from your code."}),_S=!0),e),asInjection:e=>e},oU=Me("UInt",e=>Tt(e)&&jt(e)?(zt("UInt"),{type:"UInt",value:e.toString()}):ht(e)?{type:"UInt",value:e}:Ie("Expected Positive Integer for type Unsigned Int"),e=>e),aU=Me("Int",e=>Tt(e)&&jt(e)?(zt("Int"),{type:"Int",value:e.toString()}):ht(e)?{type:"Int",value:e}:Ie("Expected Integer for type Int"),e=>e),cU=Me("UInt8",e=>Tt(e)&&jt(e)?(zt("UInt8"),{type:"UInt8",value:e.toString()}):ht(e)?{type:"UInt8",value:e}:Ie("Expected integer for UInt8"),e=>e),lU=Me("Int8",e=>Tt(e)&&jt(e)?(zt("Int8"),{type:"Int8",value:e.toString()}):ht(e)?{type:"Int8",value:e}:Ie("Expected positive integer for Int8"),e=>e),uU=Me("UInt16",e=>Tt(e)&&jt(e)?(zt("UInt16"),{type:"UInt16",value:e.toString()}):ht(e)?{type:"UInt16",value:e}:Ie("Expected integer for UInt16"),e=>e),fU=Me("Int16",e=>Tt(e)&&jt(e)?(zt("Int16"),{type:"Int16",value:e.toString()}):ht(e)?{type:"Int16",value:e}:Ie("Expected positive integer for Int16"),e=>e),dU=Me("UInt32",e=>Tt(e)&&jt(e)?(zt("UInt32"),{type:"UInt32",value:e.toString()}):ht(e)?{type:"UInt32",value:e}:Ie("Expected integer for UInt32"),e=>e),hU=Me("Int32",e=>Tt(e)&&jt(e)?(zt("Int32"),{type:"Int32",value:e.toString()}):ht(e)?{type:"Int32",value:e}:Ie("Expected positive integer for Int32"),e=>e),pU=Me("UInt64",e=>Tt(e)&&jt(e)?(zt("UInt64"),{type:"UInt64",value:e.toString()}):ht(e)?{type:"UInt64",value:e}:Ie("Expected integer for UInt64"),e=>e),gU=Me("Int64",e=>Tt(e)&&jt(e)?(zt("Int64"),{type:"Int64",value:e.toString()}):ht(e)?{type:"Int64",value:e}:Ie("Expected positive integer for Int64"),e=>e),mU=Me("UInt128",e=>Tt(e)&&jt(e)?(zt("UInt128"),{type:"UInt128",value:e.toString()}):ht(e)?{type:"UInt128",value:e}:Ie("Expected integer for UInt128"),e=>e),yU=Me("Int128",e=>Tt(e)&&jt(e)?(zt("Int128"),{type:"Int128",value:e.toString()}):ht(e)?{type:"Int128",value:e}:Ie("Expected positive integer for Int128"),e=>e),bU=Me("UInt256",e=>Tt(e)&&jt(e)?(zt("UInt256"),{type:"UInt256",value:e.toString()}):ht(e)?{type:"UInt256",value:e}:Ie("Expected integer for UInt256"),e=>e),wU=Me("Int256",e=>Tt(e)&&jt(e)?(zt("Int256"),{type:"Int256",value:e.toString()}):ht(e)?{type:"Int256",value:e}:Ie("Expected integer for Int256"),e=>e),vU=Me("Word8",e=>Tt(e)&&jt(e)?(zt("Word8"),{type:"Word8",value:e.toString()}):ht(e)?{type:"Word8",value:e}:Ie("Expected positive number for Word8"),e=>e),EU=Me("Word16",e=>Tt(e)&&jt(e)?(zt("Word16"),{type:"Word16",value:e.toString()}):ht(e)?{type:"Word16",value:e}:Ie("Expected positive number for Word16"),e=>e),SU=Me("Word32",e=>Tt(e)&&jt(e)?(zt("Word32"),{type:"Word32",value:e.toString()}):ht(e)?{type:"Word32",value:e}:Ie("Expected positive number for Word32"),e=>e),_U=Me("Word64",e=>Tt(e)&&jt(e)?(zt("Word64"),{type:"Word64",value:e.toString()}):ht(e)?{type:"Word64",value:e}:Ie("Expected positive number for Word64"),e=>e),AU=Me("Word128",e=>Tt(e)&&jt(e)?(zt("Word128"),{type:"Word128",value:e.toString()}):ht(e)?{type:"Word128",value:e}:Ie("Expected positive number for Word128"),e=>e),xU=Me("Word256",e=>Tt(e)&&jt(e)?(zt("Word256"),{type:"Word256",value:e.toString()}):ht(e)?{type:"Word256",value:e}:Ie("Expected positive number for Word256"),e=>e),OO=()=>{qe.deprecate({subject:"Passing in Numbers as values for Fix64 and UFix64 types",pkg:"@onflow/types",transition:"https://github.com/onflow/flow-js-sdk/blob/master/packages/types/WARNINGS.md#0001-[U]Fix64-as-Number"})},RU=Me("UFix64",e=>{if(ht(e)){const t=e.split(".");return t.length!==2?Ie(`Expected one decimal but found ${t.length} in the [U]Fix64 value. Find out more about [U]Fix64 types here: https://docs.onflow.org/cadence/json-cadence-spec/#fixed-point-numbers`):t[1].length==0||t[1].length>8?Ie(`Expected at least one digit, and at most 8 digits following the decimal of the [U]Fix64 value but found ${t[1].length} digits. Find out more about [U]Fix64 types here: https://docs.onflow.org/cadence/json-cadence-spec/#fixed-point-numbers`):(t[1]=t[1].padEnd(8,"0"),e=t.join("."),{type:"UFix64",value:e})}else if(Tt(e))return OO(),{type:"UFix64",value:e.toString()};return Ie("Expected String for UFix64")},e=>e),OU=Me("Fix64",e=>{if(ht(e)){const t=e.split(".");return t.length!==2?Ie(`Expected one decimal but found ${t.length} in the [U]Fix64 value. Find out more about [U]Fix64 types here: https://docs.onflow.org/cadence/json-cadence-spec/#fixed-point-numbers`):t[1].length==0||t[1].length>8?Ie(`Expected at least one digit, and at most 8 digits following the decimal of the [U]Fix64 value but found ${t[1].length} digits. Find out more about [U]Fix64 types here: https://docs.onflow.org/cadence/json-cadence-spec/#fixed-point-numbers`):(t[1]=t[1].padEnd(8,"0"),e=t.join("."),{type:"Fix64",value:e})}else if(Tt(e))return OO(),{type:"Fix64",value:e.toString()};return Ie("Expected String for Fix64")},e=>e),TU=Me("String",e=>ht(e)?{type:"String",value:e}:Ie("Expected String for type String"),e=>e),DU=Me("Character",e=>ht(e)?{type:"Character",value:e}:Ie("Expected Character for type Character"),e=>e),IU=Me("Bool",e=>iU(e)?{type:"Bool",value:e}:Ie("Expected Boolean for type Bool"),e=>e),TO=Me("Address",e=>ht(e)?{type:"Address",value:e}:Ie("Expected Address for type Address"),e=>e),CU=Me("Void",e=>!e||RO(e)?{type:"Void",value:null}:Ie("Expected Void for type Void"),e=>e),NU=e=>Me("Optional",t=>({type:"Optional",value:RO(t)?null:e.asArgument(t)}),t=>t),$U=Me("Reference",e=>Js(e)?{type:"Reference",value:e}:Ie("Expected Object for type Reference"),e=>e),AS=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Me("Array",t=>({type:"Array",value:Fo(e)?e.map((n,r)=>n.asArgument(t[r])):t.map(n=>e.asArgument(n))}),t=>t)},UU=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Me("Dictionary",t=>{const n=Fo(t),r=Fo(e);return Js(t)?{type:"Dictionary",value:r&&n?e.map((s,a)=>({key:s.key.asArgument(t[a].key),value:s.value.asArgument(t[a].value)})):n&&!r?t.map(s=>({key:e.key.asArgument(s.key),value:e.value.asArgument(s.value)})):!n&&!r?[{key:e.key.asArgument(t.key),value:e.value.asArgument(t.value)}]:Ie("Invalid arguments for Dictionary.")}:Ie("Expected Object for type Dictionary")},t=>t)},BU=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return Me("Event",n=>Js(n)?{type:"Event",value:{id:e,fields:Fo(t)?t.map((r,s)=>({name:n.fields[s].name,value:r.value.asArgument(n.fields[s].value)})):n.fields.map(r=>({name:r.name,value:t.value.asArgument(r.value)}))}}:Ie("Expected Object for type Event"),n=>n)},PU=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return Me("Resource",n=>Js(n)?{type:"Resource",value:{id:e,fields:Fo(t)?t.map((r,s)=>({name:n.fields[s].name,value:r.value.asArgument(n.fields[s].value)})):n.fields.map(r=>({name:r.name,value:t.value.asArgument(r.value)}))}}:Ie("Expected Object for type Resource"),n=>n)},kU=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return Me("Struct",n=>Js(n)?{type:"Struct",value:{id:e,fields:Fo(t)?t.map((r,s)=>({name:n.fields[s].name,value:r.value.asArgument(n.fields[s].value)})):n.fields.map(r=>({name:r.name,value:t.value.asArgument(r.value)}))}}:Ie("Expected Object for type Struct"),n=>n)},MU=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return Me("Enum",n=>Js(n)?{type:"Enum",value:{id:e,fields:Fo(t)?t.map((r,s)=>({name:n.fields[s].name,value:r.value.asArgument(n.fields[s].value)})):n.fields.map(r=>({name:r.name,value:t.value.asArgument(r.value)}))}}:Ie("Expected Object for type Enum"),n=>n)},LU=Me("Path",e=>Js(e)?ht(e.domain)?e.domain==="storage"||e.domain==="private"||e.domain==="public"?ht(e.identifier)?{type:"Path",value:{domain:e.domain,identifier:e.identifier}}:Ie(`Expected a string for the Path identifier but found ${e.identifier}. Find out more about the Path type here: https://docs.onflow.org/cadence/json-cadence-spec/#path`):Ie(`Expected either "storage", "private" or "public" as the Path domain but found ${e.domain}. Find out more about the Path type here: https://docs.onflow.org/cadence/json-cadence-spec/#path`):Ie(`Expected a string for the Path domain but found ${e.domain}. Find out more about the Path type here: https://docs.onflow.org/cadence/json-cadence-spec/#path`):Ie("Expected Object for type Path"),e=>e),jU=e=>Me("InclusiveRange",t=>{if(Js(t)){const{start:n,end:r,step:s}=t;return{type:"InclusiveRange",value:{start:e.asArgument(n),end:e.asArgument(r),step:e.asArgument(s)}}}return Ie("Expected Object for type InclusiveRange")},t=>t),zU=Object.freeze(Object.defineProperty({__proto__:null,Address:TO,Array:AS,Bool:IU,Character:DU,Dictionary:UU,Enum:MU,Event:BU,Fix64:OU,Identity:sU,InclusiveRange:jU,Int:aU,Int128:yU,Int16:fU,Int256:wU,Int32:hU,Int64:gU,Int8:lU,Optional:NU,Path:LU,Reference:$U,Resource:PU,String:TU,Struct:kU,UFix64:RU,UInt:oU,UInt128:mU,UInt16:uU,UInt256:bU,UInt32:dU,UInt64:pU,UInt8:cU,Void:CU,Word128:AU,Word16:EU,Word256:xU,Word32:SU,Word64:_U,Word8:vU,_Array:AS},Symbol.toStringTag,{value:"Module"})),qU=`{
  "kind":"${jh.ACCOUNT}",
  "tempId":null,
  "addr":null,
  "keyId":null,
  "sequenceNum":null,
  "signature":null,
  "signingFunction":null,
  "resolve":null,
  "role": {
    "proposer":false,
    "authorizer":false,
    "payer":false,
    "param":false
  }
}`,HU=`{
  "kind":"${jh.ARGUMENT}",
  "tempId":null,
  "value":null,
  "asArgument":null,
  "xform":null,
  "resolve": null,
  "resolveArgument": null
}`,DO=`{
  "tag":"${rt.UNKNOWN}",
  "assigns":{},
  "status":"${Wu.OK}",
  "reason":null,
  "accounts":{},
  "params":{},
  "arguments":{},
  "message": {
    "cadence":null,
    "refBlock":null,
    "computeLimit":null,
    "proposer":null,
    "payer":null,
    "authorizations":[],
    "params":[],
    "arguments":[]
  },
  "proposer":null,
  "authorizations":[],
  "payer":[],
  "events": {
    "eventType":null,
    "start":null,
    "end":null,
    "blockIds":[]
  },
  "subscribeEvents": {
    "startBlockId":null,
    "startHeight":null,
    "eventTypes":null,
    "addresses":null,
    "contracts":null,
    "heartbeatInterval":null
  },
  "transaction": {
    "id":null
  },
  "block": {
    "id":null,
    "height":null,
    "isSealed":null
  },
  "account": {
    "addr":null
  },
  "collection": {
    "id":null
  }
}`,IO=new Set(Object.keys(JSON.parse(DO))),qh=()=>JSON.parse(DO),FU=()=>(qe.deprecate({pkg:"FCL/SDK",message:"The interaction been deprecated from the Flow JS-SDK/FCL. use initInteraction instead",transition:"https://github.com/onflow/flow-js-sdk/blob/master/packages/sdk/TRANSITIONS.md#0010-deprecate-interaction",level:dt.warn}),qh()),CO=e=>typeof e=="number",NO=e=>Array.isArray(e),$O=e=>e!==null&&typeof e=="object",Gb=e=>e==null,Ic=e=>typeof e=="function",UO=e=>{if(!$O(e)||Gb(e)||CO(e))return!1;for(let t of IO)if(!e.hasOwnProperty(t))return!1;return!0},pr=e=>(e.status=Wu.OK,e),Kb=(e,t)=>(e.status=Wu.BAD,e.reason=t,e),Yn=e=>t=>(t.tag=e,pr(t)),xS=e=>e.keyId==null?e:(fe(!isNaN(parseInt(e.keyId.toString())),"account.keyId must be an integer"),{...e,keyId:parseInt(e.keyId.toString())}),BO=()=>JSON.parse(qU),Hh=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return n=>{fe(typeof e=="function"||typeof e=="object","prepAccount must be passed an authorization function or an account object"),fe(t.role!=null,"Account must have a role");const r=BO(),s=t.role,a=Pb();let c={...e};e.authorization&&Ic(e.authorization)&&(c={resolve:e.authorization}),!e.authorization&&Ic(e)&&(c={resolve:e});const u=c.resolve;return u&&(c.resolve=function(d){for(var h=arguments.length,p=new Array(h>1?h-1:0),m=1;m<h;m++)p[m-1]=arguments[m];return[u,xS].reduce(async(y,v)=>v(await y,...p),d)}),c=xS(c),n.accounts[a]={...r,tempId:a,...c,role:{...r.role,...typeof e.role=="object"?e.role:{},...s?{[s]:!0}:{}}},s===Cu.AUTHORIZER?n.authorizations.push(a):s===Cu.PAYER?n.payer.push(a):s&&(n[s]=a),n}},PO=e=>t=>{let n=Pb();return t.message.arguments.push(n),t.arguments[n]=JSON.parse(HU),t.arguments[n].tempId=n,t.arguments[n].value=e.value,t.arguments[n].asArgument=e.asArgument,t.arguments[n].xform=e.xform,t.arguments[n].resolve=e.resolve,t.arguments[n].resolveArgument=Ic(e.resolveArgument)?e.resolveArgument.bind(e):e.resolveArgument,pr(t)},VU=Yn(rt.UNKNOWN),kO=Yn(rt.SCRIPT),MO=Yn(rt.TRANSACTION),LO=Yn(rt.GET_TRANSACTION_STATUS),GU=Yn(rt.GET_TRANSACTION),jO=Yn(rt.GET_ACCOUNT),KU=Yn(rt.GET_EVENTS),YU=Yn(rt.PING),zO=Yn(rt.GET_BLOCK),WU=Yn(rt.GET_BLOCK_HEADER),XU=Yn(rt.GET_COLLECTION),qO=Yn(rt.GET_NETWORK_PARAMETERS),ZU=Yn(rt.SUBSCRIBE_EVENTS),QU=Yn(rt.GET_NODE_VERSION_INFO),Wn=e=>t=>t.tag===e,HO=Wn(rt.UNKNOWN),Yb=Wn(rt.SCRIPT),eo=Wn(rt.TRANSACTION),JU=Wn(rt.GET_TRANSACTION_STATUS),eB=Wn(rt.GET_TRANSACTION),tB=Wn(rt.GET_ACCOUNT),nB=Wn(rt.GET_EVENTS),rB=Wn(rt.PING),iB=Wn(rt.GET_BLOCK),sB=Wn(rt.GET_BLOCK_HEADER),oB=Wn(rt.GET_COLLECTION),aB=Wn(rt.GET_NETWORK_PARAMETERS),cB=Wn(rt.GET_NODE_VERSION_INFO),lB=Wn(rt.SUBSCRIBE_EVENTS),uB=e=>e.status===Wu.OK,FO=e=>e.status===Wu.BAD,fB=e=>e.reason,dB=e=>e.kind===jh.ACCOUNT,hB=e=>e.kind===jh.ARGUMENT,pB=e=>{for(let t of Object.keys(e))if(!IO.has(t))throw new Error(`"${t}" is an invalid root level Interaction property.`);return e},rh=async function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];try{if(e=pB(await e),FO(e))throw new Error(`Interaction Error: ${e.reason}`);if(!t.length)return e;const[n,...r]=t,s=await n;if(Ic(s))return rh(s(e),r);if(Gb(s)||!s)return rh(e,r);if(UO(s))return rh(s,r);throw new Error("Invalid Interaction Composition")}catch(n){throw n}};function xn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const[r,s]=t;return NO(r)?u=>xn(u,r):rh(r,s)}const gB=function(e){return e},Fh=function(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;return e.assigns[t]==null?n:e.assigns[t]},Wb=(e,t)=>n=>(n.assigns[e]=t,pr(n)),VO=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:gB;return n=>(n.assigns[e]=t(n.assigns[e],n),pr(n))},mB=e=>t=>(delete t.assigns[e],pr(t));var Xb=Object.freeze({__proto__:null,Bad:Kb,Ok:pr,destroy:mB,get:Fh,initAccount:BO,initInteraction:qh,interaction:FU,isAccount:dB,isArgument:hB,isArray:NO,isBad:FO,isFn:Ic,isGetAccount:tB,isGetBlock:iB,isGetBlockHeader:sB,isGetCollection:oB,isGetEvents:nB,isGetNetworkParameters:aB,isGetNodeVersionInfo:cB,isGetTransaction:eB,isGetTransactionStatus:JU,isInteraction:UO,isNull:Gb,isNumber:CO,isObj:$O,isOk:uB,isPing:rB,isScript:Yb,isSubscribeEvents:lB,isTransaction:eo,isUnknown:HO,makeArgument:PO,makeGetAccount:jO,makeGetBlock:zO,makeGetBlockHeader:WU,makeGetCollection:XU,makeGetEvents:KU,makeGetNetworkParameters:qO,makeGetNodeVerionInfo:QU,makeGetTransaction:GU,makeGetTransactionStatus:LO,makePing:YU,makeScript:kO,makeSubscribeEvents:ZU,makeTransaction:MO,makeUnknown:VU,pipe:xn,prepAccount:Hh,put:Wb,update:VO,why:fB});function GO(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return xn(qh(),e)}const yB={tag:null,transaction:null,transactionStatus:null,transactionId:null,encodedData:null,events:null,event:null,accountStatusEvent:null,account:null,block:null,blockHeader:null,blockDigest:null,latestBlock:null,collection:null,networkParameters:null,streamConnection:null,heartbeat:null,nodeVersionInfo:null},Zb=()=>({...yB});function bB(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return xn([zO,t=>(t.block.isSealed=e,pr(t))])}function wB(e){return xn([jO,t=>(t.account.addr=Mt(e),pr(t))])}const vB=(e,t,n)=>{const r=new zh;let s=EB();e.on("data",async c=>{const u=Object.keys(c).filter(h=>c[h]!=null&&h!=="tag");let d=Promise.all(u.map(async h=>{const p={[h]:c[h]},m=await t(p,n);return{channel:h,message:m}}));s.push(async()=>{(await d).forEach(p=>{let{channel:m,message:y}=p;r.emit(m,y)})})});function a(c){e.on(c,u=>{s.push(async()=>{r.emit(c,u)})})}return a("close"),a("error"),{on(c,u){return r.on(c,u),this},off(c,u){return r.off(c,u),this},close:()=>{e.close()}}};function EB(){let e=[],t=!1;async function n(){if(!t){for(t=!0;e.length>0;)await e.shift()?.();t=!1}}return{push:r=>{e.push(r),n()}}}const SB=()=>{qe.deprecate({pkg:"@onflow/decode",subject:"Operating upon data of the latestBlock field of the response object",transition:"https://github.com/onflow/flow-js-sdk/blob/master/packages/decode/WARNINGS.md#0001-Deprecating-latestBlock-field"})},nt=async e=>e,_B=async()=>null,AB=async e=>e.staticType,xB=async(e,t,n)=>e?await Vo(e,t,n):null,RB=async(e,t,n)=>await Promise.all(e.map(r=>new Promise(async s=>s(await Vo(r,t,[...n,r.type]))))),OB=async(e,t,n)=>await e.reduce(async(r,s)=>(r=await r,r[await Vo(s.key,t,[...n,s.key])]=await Vo(s.value,t,[...n,s.key]),r),Promise.resolve({})),Od=async(e,t,n)=>{const r=await e.fields.reduce(async(a,c)=>(a=await a,a[c.name]=await Vo(c.value,t,[...n,c.name]),a),Promise.resolve({})),s=e.id&&KO(t,e.id);return s?await s(r):r},TB=async(e,t,n)=>{const r=["start","end","step"];return await Object.keys(e).reduce(async(a,c)=>(a=await a,r.includes(c)&&(a[c]=await Vo(e[c],t,[...n,c])),a),Promise.resolve({}))},RS={UInt:nt,Int:nt,UInt8:nt,Int8:nt,UInt16:nt,Int16:nt,UInt32:nt,Int32:nt,UInt64:nt,Int64:nt,UInt128:nt,Int128:nt,UInt256:nt,Int256:nt,Word8:nt,Word16:nt,Word32:nt,Word64:nt,Word128:nt,Word256:nt,UFix64:nt,Fix64:nt,String:nt,Character:nt,Bool:nt,Address:nt,Void:_B,Optional:xB,Reference:nt,Array:RB,Dictionary:OB,Event:Od,Resource:Od,Struct:Od,Enum:Od,Type:AB,Path:nt,Capability:nt,InclusiveRange:TB},KO=(e,t)=>{const n=Object.keys(e).find(r=>/^\/.*\/$/.test(r)?new RegExp(r.substring(1,r.length-1)).test(t):r===t);return t&&n&&e[n]},Vo=async(e,t,n)=>{let r=KO(t,e.type);if(!r)throw new Error(`Undefined Decoder Error: ${e.type}@${n.join(".")}`);return await r(e.value,t,n)},Xl=async function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];const s={...Object.keys(RS).filter(a=>!Object.keys(t).find(c=>new RegExp(c).test(a))).reduce((a,c)=>(a[c]=RS[c],a),t),...t};return Vo(e,s,n)},Xu=async function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e.encodedData)return Xl(e.encodedData,t);if(e.transactionStatus)return{...e.transactionStatus,events:await Promise.all(e.transactionStatus.events.map(async function(r){return{type:r.type,transactionId:r.transactionId,transactionIndex:r.transactionIndex,eventIndex:r.eventIndex,data:await Xl(r.payload,t)}}))};if(e.transaction)return e.transaction;if(e.events)return await Promise.all(e.events.map(async function(r){return{blockId:r.blockId,blockHeight:r.blockHeight,blockTimestamp:r.blockTimestamp,type:r.type,transactionId:r.transactionId,transactionIndex:r.transactionIndex,eventIndex:r.eventIndex,data:await Xl(r.payload,t)}}));if(e.event){const{payload:n,...r}=e.event;return{...r,data:await Xl(n,t)}}else if(e.accountStatusEvent){const{payload:n,...r}=e.accountStatusEvent;return{...r,data:await Xl(n,t)}}else{if(e.account)return e.account;if(e.block)return e.block;if(e.blockHeader)return e.blockHeader;if(e.blockDigest)return e.blockDigest;if(e.latestBlock)return SB(),e.latestBlock;if(e.transactionId)return e.transactionId;if(e.collection)return e.collection;if(e.networkParameters){const n=/^flow-/,r=e.networkParameters.chainId;let s;return r==="flow-emulator"?s="local":n.test(r)?s=r.replace(n,""):s=r,{chainId:s}}else{if(e.streamConnection)return vB(e.streamConnection,Xu,t);if(e.heartbeat)return e.heartbeat;if(e.nodeVersionInfo)return e.nodeVersionInfo}}return null},OS=e=>typeof e=="function",TS=e=>typeof e=="string",DB=()=>/\b(0x\w+)\b/g;function DS(e){return DB().test(e)}const YO=()=>/import\s+"(\w+)"/g;function IS(e){return YO().test(e)}function IB(e){return e.matchAll(YO())}async function CB(e){if(!eo(e)&&!Yb(e))return e;var t=Fh(e,"ix.cadence");if(fe(OS(t)||TS(t),"Cadence needs to be a function or a string."),OS(t)&&(t=await t({})),fe(TS(t),"Cadence needs to be a string at this point."),fe(!DS(t)||!IS(t),"Both account identifier and contract identifier syntax not simultaneously supported."),DS(t)&&(t=await Ae().where(/^0x/).then(n=>Object.entries(n).reduce((r,s)=>{let[a,c]=s;const u=new RegExp("(\\b"+a+"\\b)","g");return r.replace(u,c)},t))),IS(t))for(const[n,r]of IB(t)){const s=await Ae().get(`system.contracts.${r}`);s?t=t.replace(n,`import ${r} from ${Tn(s)}`):qe({title:"Contract Placeholder not found",message:`Cannot find a value for contract placeholder ${r}. Please add to your flow.json or explicitly add it to the config 'contracts.*' namespace.`,level:dt.warn})}return e.message.cadence=t,e}const S0=e=>typeof e=="function";function NB(e){if(fe(typeof e.xform!=null,`No type specified for argument: ${e.value}`),S0(e.xform))return e.xform(e.value);if(S0(e.xform.asArgument))return e.xform.asArgument(e.value);fe(!1,"Invalid Argument",e)}async function WO(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:3;if(fe(t>0,`Argument Resolve Recursion Limit Exceeded for Arg: ${e.tempId}`),S0(e.resolveArgument)){const n=await e.resolveArgument();return WO(n,t-1)}else return e}async function $B(e){if(eo(e)||Yb(e))for(let[t,n]of Object.entries(e.arguments)){const r=await WO(n);e.arguments[t].asArgument=NB(r)}return e}const UB=e=>ZO(QO(JO(e))),BB=e=>ZO(QO(qB(e))),PB=(e,t)=>Ot.Buffer.from(e.padEnd(t*2,"0"),"hex"),XO=(e,t)=>Ot.Buffer.from(e.padStart(t*2,"0"),"hex"),kB=PB(Ot.Buffer.from("FLOW-V0.0-transaction").toString("hex"),32).toString("hex"),ZO=e=>kB+e,oy=e=>XO(e,8),MB=e=>XO(e,32),LB=e=>Ot.Buffer.from(JSON.stringify(e),"utf8"),jB=e=>Ot.Buffer.from(e,"utf8"),zB=e=>Ot.Buffer.from(e,"hex"),QO=e=>jb(e).toString("hex"),JO=e=>(VB(e),[jB(e.cadence||""),e.arguments.map(LB),MB(e.refBlock||""),e.computeLimit,oy(Mt(e.proposalKey.address||"")),e.proposalKey.keyId,e.proposalKey.sequenceNum,oy(Mt(e.payer)),e.authorizers.map(t=>oy(Mt(t)))]),qB=e=>(GB(e),[JO(e),HB(e)]),HB=e=>{const t=FB(e);return e.payloadSigs?.map(n=>({signerIndex:t.get(Mt(n.address))||"",keyId:n.keyId,sig:n.sig})).sort((n,r)=>n.signerIndex>r.signerIndex?1:n.signerIndex<r.signerIndex?-1:n.keyId>r.keyId?1:n.keyId<r.keyId?-1:0).map(n=>[n.signerIndex,n.keyId,zB(n.sig)])},FB=e=>{const t=new Map;let n=0;const r=s=>{t.has(s)||(t.set(s,n),n++)};return e.proposalKey.address&&r(e.proposalKey.address),r(e.payer),e.authorizers.forEach(r),t},VB=e=>{KB.forEach(t=>bh(e,t)),YB.forEach(t=>bh(e.proposalKey,t,"proposalKey"))},GB=e=>{WB.forEach(t=>bh(e,t)),e.payloadSigs?.forEach((t,n)=>{XB.forEach(r=>bh(t,r,"payloadSigs",n))})},yh=e=>typeof e=="number",Oc=e=>typeof e=="string",eT=e=>e!==null&&typeof e=="object",_0=e=>eT(e)&&e instanceof Array,KB=[{name:"cadence",check:Oc},{name:"arguments",check:_0},{name:"refBlock",check:Oc,defaultVal:"0"},{name:"computeLimit",check:yh},{name:"proposalKey",check:eT},{name:"payer",check:Oc},{name:"authorizers",check:_0}],YB=[{name:"address",check:Oc},{name:"keyId",check:yh},{name:"sequenceNum",check:yh}],WB=[{name:"payloadSigs",check:_0}],XB=[{name:"address",check:Oc},{name:"keyId",check:yh},{name:"sig",check:Oc}],bh=(e,t,n,r)=>{const{name:s,check:a,defaultVal:c}=t;if(e[s]==null&&c!=null&&(e[s]=c),e[s]==null)throw ZB(s,n,r);if(!a(e[s]))throw QB(s,n,r)},tT=(e,t,n)=>t?n==null?`${t}.${e}`:`${t}.${n}.${e}`:e,ZB=(e,t,n)=>new Error(`Missing field ${tT(e,t,n)}`),QB=(e,t,n)=>new Error(`Invalid field ${tT(e,t,n)}`);function nT(e){let t=new Set(e.authorizations);return e.proposer&&t.add(e.proposer),Array.isArray(e.payer)?e.payer.forEach(n=>t.delete(n)):t.delete(e.payer),Array.from(t)}function rT(e){let t=new Set(Array.isArray(e.payer)?e.payer:[e.payer]);return Array.from(t)}const Qb=e=>{const t=()=>e.authorizations.map(c=>Tn(e.accounts[c].addr)).reduce((c,u)=>c.find(d=>d===u)?c:[...c,u],[]),n=()=>nT(e).map(a=>({address:Tn(e.accounts[a].addr),keyId:e.accounts[a].keyId,sig:e.accounts[a].signature})),r=()=>rT(e).map(a=>({address:Tn(e.accounts[a].addr),keyId:e.accounts[a].keyId,sig:e.accounts[a].signature})),s=e.proposer?{address:Tn(e.accounts[e.proposer].addr),keyId:e.accounts[e.proposer].keyId,sequenceNum:e.accounts[e.proposer].sequenceNum}:{};return{cadence:e.message.cadence,refBlock:e.message.refBlock||null,computeLimit:e.message.computeLimit,arguments:e.message.arguments.map(a=>e.arguments[a].asArgument),proposalKey:s,payer:Tn(e.accounts[Array.isArray(e.payer)?e.payer[0]:e.payer].addr),authorizers:t(),payloadSigs:n(),envelopeSigs:r()}},ui=5,JB=e=>`${Tn(e.addr)}-${e.keyId}`,eP=e=>e&&(Object.prototype.toString.call(e)==="[object Function]"||typeof e=="function"||e instanceof Function),tP=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.join("-")};var ur=function(e){return e.PAYER="payer",e.PROPOSER="proposer",e.AUTHORIZATIONS="authorizations",e}(ur||{});function nP(){const e=" ",n=[];return[function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;n.push(Array(s*4).fill(e).join("-")+r)},function(){return n.reduce((r,s)=>r+`
`+s)}]}function Jb(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:3;return t<=0||!Array.isArray(e)?e:Jb(e.flatMap(n=>n),t-1)}function rP(e,t){try{return{f_type:"PreSignable",f_vsn:"1.0.1",roles:e.role,cadence:t.message.cadence,args:t.message.arguments.map(n=>t.arguments[n].asArgument),data:{},interaction:t,voucher:Qb(t)}}catch(n){throw console.error("buildPreSignable",n),n}}async function iP(e,t){const n=Array.isArray(e.payer)?e.payer:[e.payer],r=Array.isArray(e.authorizations)?e.authorizations:[e.authorizations],s=e.proposer===null?[]:Array.isArray(e.proposer)?e.proposer:[e.proposer],a=Object.keys(e.accounts),c=[...new Set(n.concat(r,s))];for(const u of a)c.find(d=>d===u)||delete e.accounts[u]}function CS(e,t){typeof t.addr=="string"&&(typeof t.keyId=="number"||typeof t.keyId=="string")?t.tempId=JB(t):t.tempId=t.tempId||Pb();const n=e.accounts[t.tempId]||t;return e.accounts[t.tempId]||(e.accounts[t.tempId]=t),e.accounts[t.tempId].role.proposer=n.role.proposer||t.role.proposer,e.accounts[t.tempId].role.payer=n.role.payer||t.role.payer,e.accounts[t.tempId].role.authorizer=n.role.authorizer||t.role.authorizer,e.accounts[t.tempId]}function sP(e){const t=Jb(e),n=new Set;return t.map(s=>{const a=tP(s.tempId,s.role.payer,s.role.proposer,s.role.authorizer,s.role.param);return n.has(a)?null:(n.add(a),s)}).filter(s=>s!==null)}async function oP(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:ui,{debugLogger:r}=arguments.length>3?arguments[3]:void 0;if(n<=0)throw new Error(`recurseResolveAccount Error: Depth limit (${ui}) reached. Ensure your authorization functions resolve to an account after ${ui} resolves.`);let s=e.accounts[t];if(!s)return[[],!1];if(r(`account: ${s.tempId}`,Math.max(ui-n,0)),s?.resolve)if(eP(s?.resolve)){r(`account: ${s.tempId} -- cache MISS`,Math.max(ui-n,0));const{resolve:a,...c}=s;let u=await a(c,rP(c,e));u=Array.isArray(u)?u:[u];let d=Jb(u);return d=d.map(h=>CS(e,h)),s.resolve=d.map(h=>h.tempId),s=CS(e,s),[d.map(h=>h.tempId),!0]}else return r(`account: ${s.tempId} -- cache HIT`,Math.max(ui-n,0)),[s.resolve,!1];return[s.tempId?[s.tempId]:[],!1]}const hu=e=>e===null?[]:Array.isArray(e)?e:[e];async function aP(e,t,n){for(let r of Object.values(ur))if(r===ur.AUTHORIZATIONS||r===ur.PAYER)e[r]=hu(e[r]).reduce((s,a)=>a===t?s.concat(...n.filter(c=>r===ur.PAYER&&c.role.payer||r===ur.AUTHORIZATIONS&&c.role.authorizer).map(c=>c.tempId)):s.concat(a),[]);else if(r===ur.PROPOSER){const s=n.filter(a=>a.role.proposer);if(s.length>1)throw new Error("replaceRoles Error: Multiple proposer keys were resolved, but only one is allowed");e[r]=s[0]?.tempId??e[r]}}async function cP(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:ui,{debugLogger:r}=arguments.length>3?arguments[3]:void 0;fe(e&&typeof e=="object","resolveAccountType Error: ix not defined");let s=new Set;for(let c of t){let u=e.accounts[c];fe(!!u,"resolveAccountType Error: account not found");const[d,h]=await oP(e,c,n,{debugLogger:r});if(h){const p=d.map(y=>e.accounts[y]),m=sP(p);m.forEach(y=>s.add(y.tempId)),aP(e,c,m)}}let a;for(const c of e[ur.PAYER]){let u=e.accounts[c];if(!a)a=u.addr;else if(a!==u.addr)throw new Error("resolveAccountType Error: payers from different accounts detected")}return s}async function lP(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(eo(e)){Array.isArray(e.payer)||qe.deprecate({pkg:"FCL",subject:'"ix.payer" must be an array. Support for ix.payer as a singular',message:"See changelog for more info."});let[n,r]=nP();try{let s=ui,a=new Set([...hu(e[ur.PAYER]),...hu(e[ur.PROPOSER]),...hu(e[ur.AUTHORIZATIONS])]);for(;a.size>0;){if(s<=0)throw new Error(`resolveAccounts Error: Depth limit (${ui}) reached. Ensure your authorization functions resolve to an account after ${ui} resolves.`);a=await cP(e,a,s,{debugLogger:n}),s--}await iP(e,{debugLogger:n});for(const c of Object.values(ur))fe(hu(e[c]).length>0||c===ur.AUTHORIZATIONS,`resolveAccountType Error: no accounts for role "${c}" found`);t.enableDebug&&console.debug(r())}catch(s){throw console.error(`=== SAD PANDA ===

`,s,`

=== SAD PANDA ===`),s}}return e}async function uP(e){if(eo(e))try{let t=nT(e);const n=UB($S(e));await Promise.all(t.map(NS(e,n)));let r=rT(e);const s=BB({...$S(e),payloadSigs:t.map(a=>({address:e.accounts[a].addr||"",keyId:e.accounts[a].keyId||0,sig:e.accounts[a].signature||""}))});await Promise.all(r.map(NS(e,s)))}catch(t){throw console.error("Signatures",t,{ix:e}),t}return e}function NS(e,t){return async function(r){const s=e.accounts[r];if(s.signature!=null&&s.signature!==void 0)return;const{signature:a}=await s.signingFunction(fP(s,t,e));e.accounts[r].signature=a}}function fP(e,t,n){try{return{f_type:"Signable",f_vsn:"1.0.1",message:t,addr:Mt(e.addr),keyId:e.keyId,roles:e.role,cadence:n.message.cadence,args:n.message.arguments.map(r=>n.arguments[r].asArgument),data:{},interaction:n,voucher:Qb(n)}}catch(r){throw console.error("buildSignable",r),r}}function $S(e){const t=Mt((Array.isArray(e.payer)?e.accounts[e.payer[0]]:e.accounts[e.payer]).addr||""),n=e.proposer?{address:Mt(e.accounts[e.proposer].addr)||"",keyId:e.accounts[e.proposer].keyId||0,sequenceNum:e.accounts[e.proposer].sequenceNum||0}:{};return{cadence:e.message.cadence,refBlock:e.message.refBlock,computeLimit:e.message.computeLimit,arguments:e.message.arguments.map(r=>e.arguments[r].asArgument),proposalKey:n,payer:t,authorizers:e.authorizations.map(r=>Mt(e.accounts[r].addr)||"").reduce((r,s)=>r.find(a=>a===s)?r:[...r,s],[])}}async function dP(e){const t=Fh(e,"ix.validators",[]);return xn(e,t.map(n=>r=>n(r,{Ok:pr,Bad:Kb})))}async function hP(e){for(let t of Object.keys(e.accounts))e.accounts[t].addr=Mt(e.accounts[t].addr);return e}async function pP(e){const t=Fh(e,"ix.voucher-intercept");return Ic(t)&&await t(Qb(e)),e}const gP=100;async function mP(e){return eo(e)&&(e.message.computeLimit=e.message.computeLimit||await Ae.get("fcl.limit"),e.message.computeLimit||(qe.deprecate({pkg:"FCL/SDK",subject:"The built-in default compute limit (DEFAULT_COMPUTE_LIMIT=10)",transition:"https://github.com/onflow/flow-js-sdk/blob/master/packages/sdk/TRANSITIONS.md#0009-deprecate-default-compute-limit"}),e.message.computeLimit=gP)),e}const yP=e=>e,Wa=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:yP;return async n=>{const r=a=>[`
Accounts:`,{proposer:a.proposer,authorizations:a.authorizations,payer:a.payer},`

Details:`,a.accounts].filter(Boolean),s=function(){for(var a=arguments.length,c=new Array(a),u=0;u<a;u++)c[u]=arguments[u];console.log(`debug[${e}] ---
`,...c,`


---`)};return await Ae.get(`debug.${e}`)&&await t(n,s,r),n}},bP=xn([CB,Wa("cadence",(e,t)=>t(e.message.cadence)),mP,Wa("compute limit",(e,t)=>t(e.message.computeLimit)),$B,Wa("arguments",(e,t)=>t(e.message.arguments,e.message)),lP,Wa("accounts",(e,t,n)=>t(...n(e))),wP,vP,uP,Wa("signatures",(e,t,n)=>t(...n(e))),hP,dP,pP,Wa("resolved",(e,t)=>t(e))]);async function wP(e){if(eo(e)&&e.message.refBlock==null){const t=await Ae().get("accessNode.api"),n=await Ae.first(["sdk.transport","sdk.send"],Fb);fe(n,"Required value for sdk.transport is not defined in config. See: https://github.com/onflow/fcl-js/blob/master/packages/sdk/CHANGELOG.md#0057-alpha1----2022-01-21"),e.message.refBlock=(await n(GO([bB()]),{config:Ae,response:Zb,Buffer:Ot.Buffer,ix:Xb},{node:t}).then(Xu)).id}return e}async function vP(e){if(eo(e)){var t=Object.values(e.accounts).find(n=>n.role.proposer);if(fe(t!==void 0,"Transactions require a proposer"),t&&t.sequenceNum==null){const n=await Ae().get("accessNode.api"),r=await Ae.first(["sdk.transport","sdk.send"],Fb);fe(r,"Required value for sdk.transport is not defined in config. See: https://github.com/onflow/fcl-js/blob/master/packages/sdk/CHANGELOG.md#0057-alpha1----2022-01-21"),e.accounts[t.tempId].sequenceNum=await r(await GO([wB(t.addr)]),{config:Ae,response:Zb,Buffer:Ot.Buffer,ix:Xb},{node:n}).then(Xu).then(s=>s.keys).then(s=>s.find(a=>a.index===t.keyId)).then(s=>s.sequenceNumber)}}return e}function iT(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(t.length>1){const[s,a]=t;return iT((c,u)=>{let{Ok:d,Bad:h}=u;return s?d(c):h(c,a)})}const[r]=t;return s=>r(s,{Ok:pr,Bad:Kb})}class sT extends Error{constructor(){super("The current transport does not support subscriptions.  If you have provided a custom transport (e.g. via `sdk.transport` configuration), ensure that it implements the subscribe method."),this.name="SubscriptionsNotSupportedError"}}async function oT(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};fe(e.send==null||e.transport==null,'SDK Transport Error: Cannot provide both "transport" and legacy "send" options.');const t=e.transport||e.send||await Ae().first(["sdk.transport","sdk.send"],K$);return EP(t)?t:{send:t,subscribe:()=>{throw new sT}}}function EP(e){return e.send!==void 0&&e.subscribe!==void 0&&typeof e.send=="function"&&typeof e.subscribe=="function"}const Vh=async function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=await oT(t),r=n.send.bind(n);iT(r,"Required value for sdk.transport is not defined in config. See: https://github.com/onflow/fcl-js/blob/master/packages/sdk/CHANGELOG.md#0057-alpha1----2022-01-21");const s=await Ae.first(["sdk.resolve"],t.resolve||bP);return t.node=t.node||await Ae().get("accessNode.api"),Array.isArray(e)&&(e=xn(qh(),e)),r(await s(e),{config:Ae,response:Zb,ix:Xb,Buffer:Ot.Buffer},t)};function SP(e){let{topic:t,args:n,onData:r,onError:s}=e,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};async function c(){let d,h;try{d=await oT(a),h=a?.node||await Ae().get("accessNode.api"),fe(!!h,'SDK Send Error: Either opts.node or "accessNode.api" in config must be defined.')}catch(p){s(p instanceof Error?p:new Error(String(p)));return}return d.subscribe({topic:t,args:n,onData:r,onError:s},{node:h,...a})}let u=c();return{unsubscribe:()=>{u.then(d=>d?.unsubscribe?.())}}}function _P(e){let{topic:t,args:n,onData:r,onError:s}=e,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const c=SP({topic:t,args:n,onData:u=>{Xu(u).then(r).catch(d=>{s(new Error(`Failed to decode response: ${d.message}`)),c?.unsubscribe?.()})},onError:s},a);return c}async function Gh(e){const t=await Ae().where(/^decoder\./),n=Object.entries(t).map(r=>{let[s,a]=r;return s=`/${s.replace(/^decoder\./,"")}$/`,[s,a]});return Xu(e,Object.fromEntries(n))}function AP(e){return VO("ix.validators",t=>Array.isArray(t)?[...t,e]:[e])}function xP(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return xn([t=>(t.block.isSealed=e,t),AP(t=>{if(t.block.id)throw new Error("Unable to specify both block finality and block id.");if(t.block.height)throw new Error("Unable to specify both block finality and block height.");return t})])}function RP(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return xn(e.map(t=>Hh(t,{role:Cu.AUTHORIZER})))}function OP(e){return xn([LO,t=>(t.transaction.id=e,pr(t))])}function TP(){return xn([qO,e=>pr(e)])}function aT(e){return t=>(t.message.computeLimit=e,t)}function cT(e){return xn(e.map(PO))}function lT(e,t){return{value:e,xform:t}}function DP(e){return Hh(e,{role:Cu.PROPOSER})}function IP(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Array.isArray(e)||(e=[e]),xn(e.map(t=>Hh(t,{role:Cu.PAYER})))}function CP(){return xn([kO,Wb("ix.cadence",xO(...arguments))])}const NP=[],$P=null;function UP(){return xn([MO,Wb("ix.cadence",xO(...arguments)),e=>(e.message.refBlock=e.message.refBlock||$P,e.authorizations=e.authorizations||NP,pr(e))])}var ih={exports:{}},BP=ih.exports,US;function PP(){return US||(US=1,function(e,t){(function(n,r){e.exports=r()})(BP,function(){return n={418:function(s,a){(function(c,u){for(var d in u)c[d]=u[d]})(a,function(c){var u={};function d(h){if(u[h])return u[h].exports;var p=u[h]={i:h,l:!1,exports:{}};return c[h].call(p.exports,p,p.exports,d),p.l=!0,p.exports}return d.m=c,d.c=u,d.i=function(h){return h},d.d=function(h,p,m){d.o(h,p)||Object.defineProperty(h,p,{configurable:!1,enumerable:!0,get:m})},d.n=function(h){var p=h&&h.__esModule?function(){return h.default}:function(){return h};return d.d(p,"a",p),p},d.o=function(h,p){return Object.prototype.hasOwnProperty.call(h,p)},d.p="",d(d.s=1)}([function(c,u,d){Object.defineProperty(u,"__esModule",{value:!0});var h=d(3),p=function(){function m(y,v){y===void 0&&(y={}),v===void 0&&(v={splitValues:!1});var w,E=this;this.headersMap={},y&&(typeof Headers<"u"&&y instanceof Headers?h.getHeaderKeys(y).forEach(function(S){h.getHeaderValues(y,S).forEach(function(A){v.splitValues?E.append(S,h.splitHeaderValue(A)):E.append(S,A)})}):typeof(w=y)=="object"&&typeof w.headersMap=="object"&&typeof w.forEach=="function"?y.forEach(function(S,A){E.append(S,A)}):typeof Map<"u"&&y instanceof Map?y.forEach(function(S,A){E.append(A,S)}):typeof y=="string"?this.appendFromString(y):typeof y=="object"&&Object.getOwnPropertyNames(y).forEach(function(S){var A=y[S];Array.isArray(A)?A.forEach(function(I){E.append(S,I)}):E.append(S,A)}))}return m.prototype.appendFromString=function(y){for(var v=y.split(`\r
`),w=0;w<v.length;w++){var E=v[w],S=E.indexOf(":");if(S>0){var A=E.substring(0,S).trim(),I=E.substring(S+1).trim();this.append(A,I)}}},m.prototype.delete=function(y,v){var w=h.normalizeName(y);if(v===void 0)delete this.headersMap[w];else{var E=this.headersMap[w];if(E){var S=E.indexOf(v);S>=0&&E.splice(S,1),E.length===0&&delete this.headersMap[w]}}},m.prototype.append=function(y,v){var w=this,E=h.normalizeName(y);Array.isArray(this.headersMap[E])||(this.headersMap[E]=[]),Array.isArray(v)?v.forEach(function(S){w.headersMap[E].push(h.normalizeValue(S))}):this.headersMap[E].push(h.normalizeValue(v))},m.prototype.set=function(y,v){var w=h.normalizeName(y);if(Array.isArray(v)){var E=[];v.forEach(function(S){E.push(h.normalizeValue(S))}),this.headersMap[w]=E}else this.headersMap[w]=[h.normalizeValue(v)]},m.prototype.has=function(y,v){var w=this.headersMap[h.normalizeName(y)];if(!Array.isArray(w))return!1;if(v!==void 0){var E=h.normalizeValue(v);return w.indexOf(E)>=0}return!0},m.prototype.get=function(y){var v=this.headersMap[h.normalizeName(y)];return v!==void 0?v.concat():[]},m.prototype.forEach=function(y){var v=this;Object.getOwnPropertyNames(this.headersMap).forEach(function(w){y(w,v.headersMap[w])},this)},m.prototype.toHeaders=function(){if(typeof Headers<"u"){var y=new Headers;return this.forEach(function(v,w){w.forEach(function(E){y.append(v,E)})}),y}throw new Error("Headers class is not defined")},m}();u.BrowserHeaders=p},function(c,u,d){Object.defineProperty(u,"__esModule",{value:!0});var h=d(0);u.BrowserHeaders=h.BrowserHeaders},function(c,u,d){Object.defineProperty(u,"__esModule",{value:!0}),u.iterateHeaders=function(h,p){for(var m=h[Symbol.iterator](),y=m.next();!y.done;)p(y.value[0]),y=m.next()},u.iterateHeadersKeys=function(h,p){for(var m=h.keys(),y=m.next();!y.done;)p(y.value),y=m.next()}},function(c,u,d){Object.defineProperty(u,"__esModule",{value:!0});var h=d(2);u.normalizeName=function(p){if(typeof p!="string"&&(p=String(p)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(p))throw new TypeError("Invalid character in header field name");return p.toLowerCase()},u.normalizeValue=function(p){return typeof p!="string"&&(p=String(p)),p},u.getHeaderValues=function(p,m){var y=p;if(y instanceof Headers&&y.getAll)return y.getAll(m);var v=y.get(m);return v&&typeof v=="string"?[v]:v},u.getHeaderKeys=function(p){var m=p,y={},v=[];return m.keys?h.iterateHeadersKeys(m,function(w){y[w]||(y[w]=!0,v.push(w))}):m.forEach?m.forEach(function(w,E){y[E]||(y[E]=!0,v.push(E))}):h.iterateHeaders(m,function(w){var E=w[0];y[E]||(y[E]=!0,v.push(E))}),v},u.splitHeaderValue=function(p){var m=[];return p.split(", ").forEach(function(y){y.split(",").forEach(function(v){m.push(v)})}),m}}]))},617:function(s,a,c){Object.defineProperty(a,"__esModule",{value:!0}),a.ChunkParser=a.ChunkType=a.encodeASCII=a.decodeASCII=void 0;var u,d=c(65);function h(S){return(A=S)===9||A===10||A===13||S>=32&&S<=126;var A}function p(S){for(var A=0;A!==S.length;++A)if(!h(S[A]))throw new Error("Metadata is not valid (printable) ASCII");return String.fromCharCode.apply(String,Array.prototype.slice.call(S))}function m(S){return(128&S.getUint8(0))==128}function y(S){return S.getUint32(1,!1)}function v(S,A,I){return S.byteLength-A>=I}function w(S,A,I){if(S.slice)return S.slice(A,I);var D=S.length;I!==void 0&&(D=I);for(var B=new Uint8Array(D-A),$=0,N=A;N<D;N++)B[$++]=S[N];return B}a.decodeASCII=p,a.encodeASCII=function(S){for(var A=new Uint8Array(S.length),I=0;I!==S.length;++I){var D=S.charCodeAt(I);if(!h(D))throw new Error("Metadata contains invalid ASCII");A[I]=D}return A},function(S){S[S.MESSAGE=1]="MESSAGE",S[S.TRAILERS=2]="TRAILERS"}(u=a.ChunkType||(a.ChunkType={}));var E=function(){function S(){this.buffer=null,this.position=0}return S.prototype.parse=function(A,I){if(A.length===0&&I)return[];var D,B=[];if(this.buffer==null)this.buffer=A,this.position=0;else if(this.position===this.buffer.byteLength)this.buffer=A,this.position=0;else{var $=this.buffer.byteLength-this.position,N=new Uint8Array($+A.byteLength),q=w(this.buffer,this.position);N.set(q,0);var H=new Uint8Array(A);N.set(H,$),this.buffer=N,this.position=0}for(;;){if(!v(this.buffer,this.position,5))return B;var k=w(this.buffer,this.position,this.position+5),K=new DataView(k.buffer,k.byteOffset,k.byteLength),Y=y(K);if(!v(this.buffer,this.position,5+Y))return B;var W=w(this.buffer,this.position+5,this.position+5+Y);if(this.position+=5+Y,m(K))return B.push({chunkType:u.TRAILERS,trailers:(D=W,new d.Metadata(p(D)))}),B;B.push({chunkType:u.MESSAGE,data:W})}},S}();a.ChunkParser=E},8:function(s,a){var c;Object.defineProperty(a,"__esModule",{value:!0}),a.httpStatusToCode=a.Code=void 0,function(u){u[u.OK=0]="OK",u[u.Canceled=1]="Canceled",u[u.Unknown=2]="Unknown",u[u.InvalidArgument=3]="InvalidArgument",u[u.DeadlineExceeded=4]="DeadlineExceeded",u[u.NotFound=5]="NotFound",u[u.AlreadyExists=6]="AlreadyExists",u[u.PermissionDenied=7]="PermissionDenied",u[u.ResourceExhausted=8]="ResourceExhausted",u[u.FailedPrecondition=9]="FailedPrecondition",u[u.Aborted=10]="Aborted",u[u.OutOfRange=11]="OutOfRange",u[u.Unimplemented=12]="Unimplemented",u[u.Internal=13]="Internal",u[u.Unavailable=14]="Unavailable",u[u.DataLoss=15]="DataLoss",u[u.Unauthenticated=16]="Unauthenticated"}(c=a.Code||(a.Code={})),a.httpStatusToCode=function(u){switch(u){case 0:return c.Internal;case 200:return c.OK;case 400:return c.InvalidArgument;case 401:return c.Unauthenticated;case 403:return c.PermissionDenied;case 404:return c.NotFound;case 409:return c.Aborted;case 412:return c.FailedPrecondition;case 429:return c.ResourceExhausted;case 499:return c.Canceled;case 500:return c.Unknown;case 501:return c.Unimplemented;case 503:return c.Unavailable;case 504:return c.DeadlineExceeded;default:return c.Unknown}}},934:function(s,a,c){Object.defineProperty(a,"__esModule",{value:!0}),a.client=void 0;var u=c(65),d=c(617),h=c(8),p=c(346),m=c(57),y=c(882);a.client=function(E,S){return new v(E,S)};var v=function(){function E(S,A){this.started=!1,this.sentFirstMessage=!1,this.completed=!1,this.closed=!1,this.finishedSending=!1,this.onHeadersCallbacks=[],this.onMessageCallbacks=[],this.onEndCallbacks=[],this.parser=new d.ChunkParser,this.methodDefinition=S,this.props=A,this.createTransport()}return E.prototype.createTransport=function(){var S=this.props.host+"/"+this.methodDefinition.service.serviceName+"/"+this.methodDefinition.methodName,A={methodDefinition:this.methodDefinition,debug:this.props.debug||!1,url:S,onHeaders:this.onTransportHeaders.bind(this),onChunk:this.onTransportChunk.bind(this),onEnd:this.onTransportEnd.bind(this)};this.props.transport?this.transport=this.props.transport(A):this.transport=m.makeDefaultTransport(A)},E.prototype.onTransportHeaders=function(S,A){if(this.props.debug&&p.debug("onHeaders",S,A),this.closed)this.props.debug&&p.debug("grpc.onHeaders received after request was closed - ignoring");else if(A!==0){this.responseHeaders=S,this.props.debug&&p.debug("onHeaders.responseHeaders",JSON.stringify(this.responseHeaders,null,2));var I=w(S);this.props.debug&&p.debug("onHeaders.gRPCStatus",I);var D=I&&I>=0?I:h.httpStatusToCode(A);this.props.debug&&p.debug("onHeaders.code",D);var B=S.get("grpc-message")||[];if(this.props.debug&&p.debug("onHeaders.gRPCMessage",B),this.rawOnHeaders(S),D!==h.Code.OK){var $=this.decodeGRPCStatus(B[0]);this.rawOnError(D,$,S)}}},E.prototype.onTransportChunk=function(S){var A=this;if(this.closed)this.props.debug&&p.debug("grpc.onChunk received after request was closed - ignoring");else{var I=[];try{I=this.parser.parse(S)}catch(D){return this.props.debug&&p.debug("onChunk.parsing error",D,D.message),void this.rawOnError(h.Code.Internal,"parsing error: "+D.message)}I.forEach(function(D){if(D.chunkType===d.ChunkType.MESSAGE){var B=A.methodDefinition.responseType.deserializeBinary(D.data);A.rawOnMessage(B)}else D.chunkType===d.ChunkType.TRAILERS&&(A.responseHeaders?(A.responseTrailers=new u.Metadata(D.trailers),A.props.debug&&p.debug("onChunk.trailers",A.responseTrailers)):(A.responseHeaders=new u.Metadata(D.trailers),A.rawOnHeaders(A.responseHeaders)))})}},E.prototype.onTransportEnd=function(){if(this.props.debug&&p.debug("grpc.onEnd"),this.closed)this.props.debug&&p.debug("grpc.onEnd received after request was closed - ignoring");else if(this.responseTrailers!==void 0){var S=w(this.responseTrailers);if(S!==null){var A=this.responseTrailers.get("grpc-message"),I=this.decodeGRPCStatus(A[0]);this.rawOnEnd(S,I,this.responseTrailers)}else this.rawOnError(h.Code.Internal,"Response closed without grpc-status (Trailers provided)")}else{if(this.responseHeaders===void 0)return void this.rawOnError(h.Code.Unknown,"Response closed without headers");var D=w(this.responseHeaders),B=this.responseHeaders.get("grpc-message");if(this.props.debug&&p.debug("grpc.headers only response ",D,B),D===null)return void this.rawOnEnd(h.Code.Unknown,"Response closed without grpc-status (Headers only)",this.responseHeaders);var $=this.decodeGRPCStatus(B[0]);this.rawOnEnd(D,$,this.responseHeaders)}},E.prototype.decodeGRPCStatus=function(S){if(!S)return"";try{return decodeURIComponent(S)}catch{return S}},E.prototype.rawOnEnd=function(S,A,I){var D=this;this.props.debug&&p.debug("rawOnEnd",S,A,I),this.completed||(this.completed=!0,this.onEndCallbacks.forEach(function(B){if(!D.closed)try{B(S,A,I)}catch($){setTimeout(function(){throw $},0)}}))},E.prototype.rawOnHeaders=function(S){this.props.debug&&p.debug("rawOnHeaders",S),this.completed||this.onHeadersCallbacks.forEach(function(A){try{A(S)}catch(I){setTimeout(function(){throw I},0)}})},E.prototype.rawOnError=function(S,A,I){var D=this;I===void 0&&(I=new u.Metadata),this.props.debug&&p.debug("rawOnError",S,A),this.completed||(this.completed=!0,this.onEndCallbacks.forEach(function(B){if(!D.closed)try{B(S,A,I)}catch($){setTimeout(function(){throw $},0)}}))},E.prototype.rawOnMessage=function(S){var A=this;this.props.debug&&p.debug("rawOnMessage",S.toObject()),this.completed||this.closed||this.onMessageCallbacks.forEach(function(I){if(!A.closed)try{I(S)}catch(D){setTimeout(function(){throw D},0)}})},E.prototype.onHeaders=function(S){this.onHeadersCallbacks.push(S)},E.prototype.onMessage=function(S){this.onMessageCallbacks.push(S)},E.prototype.onEnd=function(S){this.onEndCallbacks.push(S)},E.prototype.start=function(S){if(this.started)throw new Error("Client already started - cannot .start()");this.started=!0;var A=new u.Metadata(S||{});A.set("content-type","application/grpc-web+proto"),A.set("x-grpc-web","1"),this.transport.start(A)},E.prototype.send=function(S){if(!this.started)throw new Error("Client not started - .start() must be called before .send()");if(this.closed)throw new Error("Client already closed - cannot .send()");if(this.finishedSending)throw new Error("Client already finished sending - cannot .send()");if(!this.methodDefinition.requestStream&&this.sentFirstMessage)throw new Error("Message already sent for non-client-streaming method - cannot .send()");this.sentFirstMessage=!0;var A=y.frameRequest(S);this.transport.sendMessage(A)},E.prototype.finishSend=function(){if(!this.started)throw new Error("Client not started - .finishSend() must be called before .close()");if(this.closed)throw new Error("Client already closed - cannot .send()");if(this.finishedSending)throw new Error("Client already finished sending - cannot .finishSend()");this.finishedSending=!0,this.transport.finishSend()},E.prototype.close=function(){if(!this.started)throw new Error("Client not started - .start() must be called before .close()");if(this.closed)throw new Error("Client already closed - cannot .close()");this.closed=!0,this.props.debug&&p.debug("request.abort aborting request"),this.transport.cancel()},E}();function w(E){var S=E.get("grpc-status")||[];if(S.length>0)try{var A=S[0];return parseInt(A,10)}catch{return null}return null}},346:function(s,a){Object.defineProperty(a,"__esModule",{value:!0}),a.debug=void 0,a.debug=function(){for(var c=[],u=0;u<arguments.length;u++)c[u]=arguments[u];console.debug?console.debug.apply(null,c):console.log.apply(null,c)}},607:function(s,a,c){Object.defineProperty(a,"__esModule",{value:!0}),a.grpc=void 0;var u,d=c(418),h=c(57),p=c(229),m=c(540),y=c(210),v=c(859),w=c(8),E=c(938),S=c(35),A=c(934);(u=a.grpc||(a.grpc={})).setDefaultTransport=h.setDefaultTransportFactory,u.CrossBrowserHttpTransport=v.CrossBrowserHttpTransport,u.FetchReadableStreamTransport=p.FetchReadableStreamTransport,u.XhrTransport=y.XhrTransport,u.WebsocketTransport=m.WebsocketTransport,u.Code=w.Code,u.Metadata=d.BrowserHeaders,u.client=function(I,D){return A.client(I,D)},u.invoke=E.invoke,u.unary=S.unary},938:function(s,a,c){Object.defineProperty(a,"__esModule",{value:!0}),a.invoke=void 0;var u=c(934);a.invoke=function(d,h){if(d.requestStream)throw new Error(".invoke cannot be used with client-streaming methods. Use .client instead.");var p=u.client(d,{host:h.host,transport:h.transport,debug:h.debug});return h.onHeaders&&p.onHeaders(h.onHeaders),h.onMessage&&p.onMessage(h.onMessage),h.onEnd&&p.onEnd(h.onEnd),p.start(h.metadata),p.send(h.request),p.finishSend(),{close:function(){p.close()}}}},65:function(s,a,c){Object.defineProperty(a,"__esModule",{value:!0}),a.Metadata=void 0;var u=c(418);Object.defineProperty(a,"Metadata",{enumerable:!0,get:function(){return u.BrowserHeaders}})},57:function(s,a,c){Object.defineProperty(a,"__esModule",{value:!0}),a.makeDefaultTransport=a.setDefaultTransportFactory=void 0;var u=c(859),d=function(h){return u.CrossBrowserHttpTransport({withCredentials:!1})(h)};a.setDefaultTransportFactory=function(h){d=h},a.makeDefaultTransport=function(h){return d(h)}},229:function(s,a,c){var u=this&&this.__assign||function(){return(u=Object.assign||function(m){for(var y,v=1,w=arguments.length;v<w;v++)for(var E in y=arguments[v])Object.prototype.hasOwnProperty.call(y,E)&&(m[E]=y[E]);return m}).apply(this,arguments)};Object.defineProperty(a,"__esModule",{value:!0}),a.detectFetchSupport=a.FetchReadableStreamTransport=void 0;var d=c(65),h=c(346);a.FetchReadableStreamTransport=function(m){return function(y){return function(v,w){return v.debug&&h.debug("fetchRequest",v),new p(v,w)}(y,m)}};var p=function(){function m(y,v){this.cancelled=!1,this.controller=self.AbortController&&new AbortController,this.options=y,this.init=v}return m.prototype.pump=function(y,v){var w=this;if(this.reader=y,this.cancelled)return this.options.debug&&h.debug("Fetch.pump.cancel at first pump"),void this.reader.cancel().catch(function(E){w.options.debug&&h.debug("Fetch.pump.reader.cancel exception",E)});this.reader.read().then(function(E){if(E.done)return w.options.onEnd(),v;w.options.onChunk(E.value),w.pump(w.reader,v)}).catch(function(E){w.cancelled?w.options.debug&&h.debug("Fetch.catch - request cancelled"):(w.cancelled=!0,w.options.debug&&h.debug("Fetch.catch",E.message),w.options.onEnd(E))})},m.prototype.send=function(y){var v=this;fetch(this.options.url,u(u({},this.init),{headers:this.metadata.toHeaders(),method:"POST",body:y,signal:this.controller&&this.controller.signal})).then(function(w){if(v.options.debug&&h.debug("Fetch.response",w),v.options.onHeaders(new d.Metadata(w.headers),w.status),!w.body)return w;v.pump(w.body.getReader(),w)}).catch(function(w){v.cancelled?v.options.debug&&h.debug("Fetch.catch - request cancelled"):(v.cancelled=!0,v.options.debug&&h.debug("Fetch.catch",w.message),v.options.onEnd(w))})},m.prototype.sendMessage=function(y){this.send(y)},m.prototype.finishSend=function(){},m.prototype.start=function(y){this.metadata=y},m.prototype.cancel=function(){var y=this;this.cancelled?this.options.debug&&h.debug("Fetch.cancel already cancelled"):(this.cancelled=!0,this.controller?(this.options.debug&&h.debug("Fetch.cancel.controller.abort"),this.controller.abort()):this.options.debug&&h.debug("Fetch.cancel.missing abort controller"),this.reader?(this.options.debug&&h.debug("Fetch.cancel.reader.cancel"),this.reader.cancel().catch(function(v){y.options.debug&&h.debug("Fetch.cancel.reader.cancel exception",v)})):this.options.debug&&h.debug("Fetch.cancel before reader"))},m}();a.detectFetchSupport=function(){return typeof Response<"u"&&Response.prototype.hasOwnProperty("body")&&typeof Headers=="function"}},859:function(s,a,c){Object.defineProperty(a,"__esModule",{value:!0}),a.CrossBrowserHttpTransport=void 0;var u=c(229),d=c(210);a.CrossBrowserHttpTransport=function(h){if(u.detectFetchSupport()){var p={credentials:h.withCredentials?"include":"same-origin"};return u.FetchReadableStreamTransport(p)}return d.XhrTransport({withCredentials:h.withCredentials})}},210:function(s,a,c){var u,d=this&&this.__extends||(u=function(S,A){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,D){I.__proto__=D}||function(I,D){for(var B in D)Object.prototype.hasOwnProperty.call(D,B)&&(I[B]=D[B])})(S,A)},function(S,A){function I(){this.constructor=S}u(S,A),S.prototype=A===null?Object.create(A):(I.prototype=A.prototype,new I)});Object.defineProperty(a,"__esModule",{value:!0}),a.stringToArrayBuffer=a.MozChunkedArrayBufferXHR=a.XHR=a.XhrTransport=void 0;var h=c(65),p=c(346),m=c(849);a.XhrTransport=function(S){return function(A){if(m.detectMozXHRSupport())return new v(A,S);if(m.detectXHROverrideMimeTypeSupport())return new y(A,S);throw new Error("This environment's XHR implementation cannot support binary transfer.")}};var y=function(){function S(A,I){this.options=A,this.init=I}return S.prototype.onProgressEvent=function(){this.options.debug&&p.debug("XHR.onProgressEvent.length: ",this.xhr.response.length);var A=this.xhr.response.substr(this.index);this.index=this.xhr.response.length;var I=E(A);this.options.onChunk(I)},S.prototype.onLoadEvent=function(){this.options.debug&&p.debug("XHR.onLoadEvent"),this.options.onEnd()},S.prototype.onStateChange=function(){this.options.debug&&p.debug("XHR.onStateChange",this.xhr.readyState),this.xhr.readyState===XMLHttpRequest.HEADERS_RECEIVED&&this.options.onHeaders(new h.Metadata(this.xhr.getAllResponseHeaders()),this.xhr.status)},S.prototype.sendMessage=function(A){this.xhr.send(A)},S.prototype.finishSend=function(){},S.prototype.start=function(A){var I=this;this.metadata=A;var D=new XMLHttpRequest;this.xhr=D,D.open("POST",this.options.url),this.configureXhr(),this.metadata.forEach(function(B,$){D.setRequestHeader(B,$.join(", "))}),D.withCredentials=!!this.init.withCredentials,D.addEventListener("readystatechange",this.onStateChange.bind(this)),D.addEventListener("progress",this.onProgressEvent.bind(this)),D.addEventListener("loadend",this.onLoadEvent.bind(this)),D.addEventListener("error",function(B){I.options.debug&&p.debug("XHR.error",B),I.options.onEnd(B.error)})},S.prototype.configureXhr=function(){this.xhr.responseType="text",this.xhr.overrideMimeType("text/plain; charset=x-user-defined")},S.prototype.cancel=function(){this.options.debug&&p.debug("XHR.abort"),this.xhr.abort()},S}();a.XHR=y;var v=function(S){function A(){return S!==null&&S.apply(this,arguments)||this}return d(A,S),A.prototype.configureXhr=function(){this.options.debug&&p.debug("MozXHR.configureXhr: setting responseType to 'moz-chunked-arraybuffer'"),this.xhr.responseType="moz-chunked-arraybuffer"},A.prototype.onProgressEvent=function(){var I=this.xhr.response;this.options.debug&&p.debug("MozXHR.onProgressEvent: ",new Uint8Array(I)),this.options.onChunk(new Uint8Array(I))},A}(y);function w(S,A){var I=S.charCodeAt(A);if(I>=55296&&I<=56319){var D=S.charCodeAt(A+1);D>=56320&&D<=57343&&(I=65536+(I-55296<<10)+(D-56320))}return I}function E(S){for(var A=new Uint8Array(S.length),I=0,D=0;D<S.length;D++){var B=String.prototype.codePointAt?S.codePointAt(D):w(S,D);A[I++]=255&B}return A}a.MozChunkedArrayBufferXHR=v,a.stringToArrayBuffer=E},849:function(s,a){var c;function u(){if(c!==void 0)return c;if(XMLHttpRequest){c=new XMLHttpRequest;try{c.open("GET","https://localhost")}catch{}}return c}function d(h){var p=u();if(!p)return!1;try{return p.responseType=h,p.responseType===h}catch{}return!1}Object.defineProperty(a,"__esModule",{value:!0}),a.detectXHROverrideMimeTypeSupport=a.detectMozXHRSupport=a.xhrSupportsResponseType=void 0,a.xhrSupportsResponseType=d,a.detectMozXHRSupport=function(){return typeof XMLHttpRequest<"u"&&d("moz-chunked-arraybuffer")},a.detectXHROverrideMimeTypeSupport=function(){return typeof XMLHttpRequest<"u"&&XMLHttpRequest.prototype.hasOwnProperty("overrideMimeType")}},540:function(s,a,c){Object.defineProperty(a,"__esModule",{value:!0}),a.WebsocketTransport=void 0;var u,d=c(346),h=c(617);(function(m){m[m.FINISH_SEND=1]="FINISH_SEND"})(u||(u={}));var p=new Uint8Array([1]);a.WebsocketTransport=function(){return function(m){return function(y){y.debug&&d.debug("websocketRequest",y);var v,w=function(A){if(A.substr(0,8)==="https://")return"wss://"+A.substr(8);if(A.substr(0,7)==="http://")return"ws://"+A.substr(7);throw new Error("Websocket transport constructed with non-https:// or http:// host.")}(y.url),E=[];function S(A){if(A===u.FINISH_SEND)v.send(p);else{var I=A,D=new Int8Array(I.byteLength+1);D.set(new Uint8Array([0])),D.set(I,1),v.send(D)}}return{sendMessage:function(A){v&&v.readyState!==v.CONNECTING?S(A):E.push(A)},finishSend:function(){v&&v.readyState!==v.CONNECTING?S(u.FINISH_SEND):E.push(u.FINISH_SEND)},start:function(A){(v=new WebSocket(w,["grpc-websockets"])).binaryType="arraybuffer",v.onopen=function(){var I;y.debug&&d.debug("websocketRequest.onopen"),v.send((I="",A.forEach(function(D,B){I+=D+": "+B.join(", ")+`\r
`}),h.encodeASCII(I))),E.forEach(function(D){S(D)})},v.onclose=function(I){y.debug&&d.debug("websocketRequest.onclose",I),y.onEnd()},v.onerror=function(I){y.debug&&d.debug("websocketRequest.onerror",I)},v.onmessage=function(I){y.onChunk(new Uint8Array(I.data))}},cancel:function(){y.debug&&d.debug("websocket.abort"),v.close()}}}(m)}}},35:function(s,a,c){Object.defineProperty(a,"__esModule",{value:!0}),a.unary=void 0;var u=c(65),d=c(934);a.unary=function(h,p){if(h.responseStream)throw new Error(".unary cannot be used with server-streaming methods. Use .invoke or .client instead.");if(h.requestStream)throw new Error(".unary cannot be used with client-streaming methods. Use .client instead.");var m=null,y=null,v=d.client(h,{host:p.host,transport:p.transport,debug:p.debug});return v.onHeaders(function(w){m=w}),v.onMessage(function(w){y=w}),v.onEnd(function(w,E,S){p.onEnd({status:w,statusMessage:E,headers:m||new u.Metadata,message:y,trailers:S})}),v.start(p.metadata),v.send(p.request),v.finishSend(),{close:function(){v.close()}}}},882:function(s,a){Object.defineProperty(a,"__esModule",{value:!0}),a.frameRequest=void 0,a.frameRequest=function(c){var u=c.serializeBinary(),d=new ArrayBuffer(u.byteLength+5);return new DataView(d,1,4).setUint32(0,u.length,!1),new Uint8Array(d,5).set(u),new Uint8Array(d)}}},r={},function s(a){if(r[a])return r[a].exports;var c=r[a]={exports:{}};return n[a].call(c.exports,c,c.exports,s),c.exports}(607);var n,r})}(ih)),ih.exports}var kP=PP(),BS=/^[0-9]+$/,MP=function(t,n){var r=BS.test(t),s=BS.test(n);return r&&s&&(t=+t,n=+n),t===n?0:r&&!s?-1:s&&!r?1:t<n?-1:1},PS=/^(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)(?:-((?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$/,LP=function(t,n){if(typeof t!="string"||typeof n!="string")throw new Error("Invalid input");var r=t.match(PS),s=n.match(PS);if(!r||!s)throw new Error("Invalid input");for(var a=1;a<=3;a++){if(parseInt(r[a])>parseInt(s[a]))return 1;if(parseInt(r[a])<parseInt(s[a]))return-1}if(r[4]&&s[4])for(var c=(r[4]||"").split("."),u=(s[4]||"").split("."),d=0;d<Math.max(c.length,u.length);d++){if(c[d]===void 0)return-1;if(u[d]===void 0)return 1;var h=MP(c[d],u[d]);if(h!==0)return h}return 0};const ew="1.20.0",Kh=e=>t=>typeof t===e,Ki=e=>e!=null,jP=Kh("object"),Tc=Kh("string"),uT=Kh("function"),zP=Kh("number");function fT(e){return uT(e)?e(lT,zU):[]}async function dT(e,t){fe(Ki(t),`${e}(opts) -- opts is required`),fe(jP(t),`${e}(opts) -- opts must be an object`),fe(!(t.cadence&&t.template),`${e}({ template, cadence }) -- cannot pass both cadence and template`),fe(Ki(t.cadence||t?.template),`${e}({ cadence }) -- cadence is required`),fe(Tc(t.cadence)||t?.template,`${e}({ cadence }) -- cadence must be a string`),fe(await Ae().get("accessNode.api"),`${e}(opts) -- Required value for "accessNode.api" not defined in config. See: https://github.com/onflow/flow-js-sdk/blob/master/packages/fcl/src/exec/query.md#configuration`)}async function qP(e){return dT("mutate",e)}async function HP(e){return dT("query",e)}async function kS(e){let{url:t}=e;fe(typeof t<"u","retrieve({ url }) -- url must be defined");let n;try{n=await yO(t)}catch{throw new Error("httpDocumentResolver Error: Failed to retrieve document.")}return n.ok?await n.json():null}const MS=new Map([["http",kS],["https",kS]]);async function FP(e){let{url:t}=e;fe(typeof t<"u","retrieve({ url }) -- url must be defined"),fe(typeof t=="string","retrieve({ url }) -- url must be a string");const n=await Ae().where(/^document\.resolver\./);Object.keys(n).map(u=>{const d=n[u],h=u.replace(/^document\.resolver\./,"");MS.set(h,d)});const r=/^(.*):\/\/([A-Za-z0-9\-\.]+)(:[0-9]+)?(.*)$/.exec(t);fe(r,"Failed to parse URL");const s=r[1];fe(r,"Failed to parse URL protocol");const a=MS.get(s);return fe(a,`No resolver found for protcol=${s}`),await a({url:t})}async function VP(e){let{network:t,template:n}=e;return fe(n.f_version==="1.0.0","deriveCadenceByNetwork100({ template }) -- template must be version 1.0.0"),Object.keys(n?.data?.dependencies).map(s=>{const a=Object.values(n?.data?.dependencies?.[s]);fe(a!==void 0,`deriveCadenceByNetwork100 -- Could not find contracts for dependency placeholder: ${s}`),fe(a.length>0,`deriveCadenceByNetwork100 -- Could not find contracts for dependency placeholder: ${s}`);const u=a[0]?.[t];return fe(u,`deriveCadenceByNetwork100 -- Could not find ${t} network information for dependency: ${s}`),[s,u?.address]}).reduce((s,a)=>{let[c,u]=a;const d=new RegExp("(\\b"+c+"\\b)","g");return s.replace(d,u)},n.data.cadence)}function GP(e){let{cadence:t,networkDependencies:n}=e;return Object.keys(n).reduce((r,s)=>{const a=n[s],c=new RegExp(`import "\\b${s}\\b"`,"g");return r.replace(c,`import ${s} from ${a}`)},t)}async function KP(e){let{network:t,template:n}=e;fe(n.f_version==="1.1.0","deriveCadenceByNetwork110({ template }) -- template must be version 1.0.0");const r={};return n?.data?.dependencies.forEach(s=>{s.contracts.forEach(a=>{const c=a.contract;a.networks.forEach(u=>{u.network===t&&(r[c]=u.address)}),fe(r[c]!==void 0,`deriveCadenceByNetwork110 -- Could not find contracts Network Address: ${t} ${c}`)})}),fe(Object.keys(r).length===n?.data?.dependencies.length,`deriveCadenceByNetwork110 -- Could not find contracts for import dependencies: ${r}`),fe(Object.keys(r).length===Object.values(r).length,`deriveCadenceByNetwork110 -- Could not find all addresses for network ${t} dependencies:  ${r}`),fe(n?.data?.cadence?.body,`no cadence found -- Could not replace import dependencies: ${r}`),GP({cadence:n?.data?.cadence?.body,networkDependencies:r})}async function YP(e){let{network:t,template:n}=e;switch(fe(t!=null,"deriveCadenceByNetwork({ network }) -- network must be defined"),fe(typeof t=="string","deriveCadenceByNetwork({ network }) -- network must be a string"),fe(n!=null,"deriveCadenceByNetwork({ template }) -- template must be defined"),fe(typeof n=="object","deriveCadenceByNetwork({ template }) -- template must be an object"),fe(n.f_type==="InteractionTemplate","deriveCadenceByNetwork({ template }) -- template must be an InteractionTemplate"),n.f_version){case"1.1.0":return await KP({network:t,template:n});case"1.0.0":return await VP({network:t,template:n});default:throw new Error("deriveCadenceByNetwork Error: Unsupported template version")}}async function WP(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(await Vh([TP()],e).then(Gh)).chainId}let Xa={},LS=!1;async function ta(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=await Ae.get("flow.network"),n=await Ae.get("env");n&&!LS&&(qe.deprecate({pkg:"FCL",subject:'Using the "env" configuration key for specifying the flow network',message:"Configuring to specify flow network is no longer required",transition:"https://github.com/onflow/flow-js-sdk/blob/master/packages/fcl/TRANSITIONS.md#0001-deprecate-env-config-key"}),LS=!0);const r=e.node||await Ae.get("accessNode.api");if(!r){if(t)return t;if(n)return n;throw new Error('Either the "accessNode.api" config key or opts.node must be set')}if(Xa[r])try{return await Xa[r]}catch{}Xa[r]||(Xa[r]=WP(e).catch(s=>{throw Xa[r]=null,s}));try{return await Xa[r]}catch(s){if(t)return t;if(n)return n;throw new Error(`Error getting chainId from access node - are you using the correct access node endpoint.  If running locally, is your emulator up-to-date? ${s.message}`)}}function XP(){return Ae.subscribe(()=>{ta({enableRequestLogging:!1}).catch(()=>{})})}async function hT(e){Tc(e?.template)&&(e.template=await FP({url:e?.template}));const t=e.cadence||await YP({template:e.template,network:await ta(e)});return e.cadence=t,e}async function ZP(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return await HP(e),e=await hT(e),Vh([CP(e.cadence),cT(fT(e.args||[])),xP(e.isSealed??!1),e.limit&&typeof e.limit=="number"&&aT(e.limit)])}async function QP(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return ZP(e).then(Gh)}const fr={"HTTP/RPC":"HTTP/RPC","HTTP/POST":"HTTP/POST","IFRAME/RPC":"IFRAME/RPC","POP/RPC":"POP/RPC","TAB/RPC":"TAB/RPC","EXT/RPC":"EXT/RPC","DEEPLINK/RPC":"DEEPLINK/RPC"},JP=globalThis.URL;let tw=class extends JP{constructor(t,n){for(var r=arguments.length,s=new Array(r>2?r-2:0),a=2;a<r;a++)s[a-2]=arguments[a];super(t,n,...s)}};const kc={f_type:"Service",f_vsn:"1.0.0"},pT={f_type:"Identity",f_vsn:"1.0.0"},e5={f_type:"USER",f_vsn:"1.0.0"},t5={f_type:"PollingResponse",f_vsn:"1.0.0"},n5={f_type:"CompositeSignature",f_vsn:"1.0.0"},r5="USER_SIGNATURE",i5=e=>{if(e.appIdentifier){const{appIdentifier:t,address:n,nonce:r,signatures:s}=e;return fe(Tc(t),"verifyAccountProof({ appIdentifier }) -- appIdentifier must be a string"),fe(Tc(n)&&Mt(n).length===16,"verifyAccountProof({ address }) -- address must be a valid address"),fe(/^[0-9a-f]+$/i.test(r),"nonce must be a hex string"),fe(Array.isArray(s)&&s.every((a,c,u)=>a.f_type==="CompositeSignature"),"Must include an Array of CompositeSignatures to verify"),fe(s.map(a=>a.addr).every((a,c,u)=>a===u[0]),"User signatures to be verified must be from a single account address"),!0}else{const{message:t,address:n,compSigs:r}=e;return fe(/^[0-9a-f]+$/i.test(t),"Signed message must be a hex string"),fe(Tc(n)&&Mt(n).length===16,"verifyUserSignatures({ address }) -- address must be a valid address"),fe(Array.isArray(r)&&r.every((s,a,c)=>s.f_type==="CompositeSignature"),"Must include an Array of CompositeSignatures to verify"),fe(r.map(s=>s.addr).every((s,a,c)=>s===c[0]),"User signatures to be verified must be from a single account address"),!0}},s5=async(e,t)=>{const n="verifyUserSignatures";let r=await ta(t);const s={testnet:"0x74daa6f9c7ef24b1",mainnet:"0xb4b82a1c9d21d284",previewnet:"0x40b5b8b2ce81ea4a"},a=t.fclCryptoContract||s[r];return fe(a,`${n}({ fclCryptoContract }) -- FCLCrypto contract address is unknown for network: ${r}. Please manually specify the FCLCrypto contract address.`),`
      import FCLCrypto from ${a}

      access(all) fun main(
          address: Address, 
          message: String, 
          keyIndices: [Int], 
          signatures: [String]
      ): Bool {
        return FCLCrypto.${n}(address: address, message: message, keyIndices: keyIndices, signatures: signatures)
      }
    `};async function o5(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const r=Tn(t[0].addr);i5({message:e,address:r,compSigs:t});let s=[],a=[];for(const c of t)s.push(c.signature),a.push(c.keyId.toString());return QP({cadence:await s5(r5,n),args:(c,u)=>[c(r,u.Address),c(e,u.String),c(a,u.Array(u.Int)),c(s,u.Array(u.String))]})}qe.deprecate({pkg:"FCL",subject:"fcl.verifyUserSignatures()",message:"Please use fcl.AppUtils.verifyUserSignatures()",callback:function(t,n){return o5(t,n)}});const a5=/\[Error Code: (\d+)\]/;class Yh extends Error{constructor(t,n){super(t),this.code=n,this.type=J2[n]}static fromErrorMessage(t){const n=t.match(a5),r=n?parseInt(n[1],10):void 0;return new Yh(t,r||J2.UNKNOWN_ERROR)}}async function jS(e){return Object.fromEntries(Object.entries(await Ae().where(e)).map(t=>{let[n,r]=t;return[n.replace(e,""),r]}))}const gT=e=>e.status===5,Ws=e=>e.status>=4,Wh=e=>e.status>=3,Xh=e=>e.status>=2,mT=e=>e.status>=1,c5=e=>e.status>=0,yT=(e,t)=>{if(e===t)return!0;if(typeof e!="object"||typeof t!="object"||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!yT(e[n],t[n]))return!1;return!0},A0=(e,t)=>!yT(e,t),wh=e=>{if(typeof e=="object"&&(e=e.transactionId),e==null)throw new Error("transactionId required");return e},bT=/^[0-9a-fA-F]{64}$/,ay="POLL",zS="TIMEOUT",l5=async e=>Vh([OP(e)]).then(Gh),u5=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return{[Nu]:async t=>{setTimeout(()=>t.sendSelf(zS),e.txNotFoundTimeout),t.sendSelf(ay)},[Pc]:(t,n)=>{t.subscribe(n.from),t.send(n.from,b0,t.all())},[Ho]:(t,n)=>{t.unsubscribe(n.from)},[JR]:async(t,n)=>{n.reply(t.all())},[zS]:async t=>{Object.keys(t.all()).length===0&&t.fatalError(new Error(`TX status polling failed: no transaction was found within timeout interval (${e.txNotFoundTimeout}ms)`))},[ay]:async t=>{const n=()=>setTimeout(()=>t.sendSelf(ay),e.pollRate);let r;const s=t.all();try{r=await l5(t.self())}catch(a){const c=a instanceof nh&&a.statusCode===404,u=a.code===kP.grpc.Code.NotFound;return c||u?n():t.fatalError(a)}Ws(r)||n(),A0(s,r)&&t.broadcast(b0,r),t.merge(r)}}},qS=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return t=>ea(u5(e),wh(t))};function na(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{txNotFoundTimeout:12500,pollRate:1e3};if(!bT.test(wh(e)))throw new Error("Invalid transactionId");function n(){return eO(e,qS(t))}function r(a){return kb(wh(e),qS(t),a)}function s(a){return function(){const d=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}).suppress||!1;return new Promise((h,p)=>{const m=r((y,v)=>{if((v||y.statusCode)&&!d){if(v!=null)p(v),m();else if(y.statusCode===1){const w=Yh.fromErrorMessage(y.errorMessage);p(w),m()}return}a(y)&&(h(y),m())})})}}return{snapshot:n,subscribe:r,onceFinalized:s(Xh),onceExecuted:s(Wh),onceSealed:s(Ws)}}na.isUnknown=c5;na.isPending=mT;na.isFinalized=Xh;na.isExecuted=Wh;na.isSealed=Ws;na.isExpired=gT;const f5="local",HS=new Map;function ra(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{txNotFoundTimeout:12500,pollRate:1e3};if(!bT.test(wh(e)))throw new Error("Invalid transactionId");function n(){let c=HS.get(e);return c||(c=d5(e,t),HS.set(e,c)),c}function r(){return Promise.resolve(n().value)}function s(c,u){const d=n(),{unsubscribe:h}=d.subscribe(c,u);return()=>h()}function a(c){return function(){const h=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{suppress:!1}).suppress||!1;return new Promise((p,m)=>{const y=s(v=>{if(v.statusCode===1){const w=Yh.fromErrorMessage(v.errorMessage);m(w),y()}else c(v)&&(p(v),y())},v=>{h||(m(v),y())})})}}return{snapshot:r,subscribe:s,onceFinalized:a(Xh),onceExecuted:a(Wh),onceSealed:a(Ws)}}ra.isUnknown=HO;ra.isPending=mT;ra.isFinalized=Xh;ra.isExecuted=Wh;ra.isSealed=Ws;ra.isExpired=gT;function d5(e,t){const n=new Set;let r={blockId:"",status:_6.UNKNOWN,statusCode:0,errorMessage:"",events:[],statusString:""};s().catch(d);async function s(){await ta()===f5?(console.warn("Events are not supported on the Flow emulator, falling back to legacy polling."),c()):a()}function a(){const h=_P({topic:Jo.TRANSACTION_STATUSES,args:{transactionId:e},onData:p=>{A0(r,p)&&(r=p,u(p)),Ws(p)&&new Promise(m=>setTimeout(m,0)).then(()=>{Ws(p)&&h.unsubscribe()})},onError:p=>{p instanceof sT?(console.warn("Failed to subscribe to transaction status updates using real-time streaming (are you using the deprecated GRPC transport?), falling back to polling."),c()):d(p)}})}function c(){const h=na(e,t).subscribe((p,m)=>{m?d(m):p&&A0(r,p)&&(r=p,u(p),Ws(p)&&new Promise(y=>setTimeout(y,0)).then(()=>{h()}))})}function u(h){for(const p of n)try{p.onData(h)}catch(m){console.error("Error in transaction observer",m)}}function d(h){for(const p of n)try{p.onError(h)}catch(m){console.error("Error in transaction observer",m)}}return{subscribe(h,p){const m={onData:h,onError:p||(()=>{})};return n.add(m),h(r),{unsubscribe:()=>n.delete(m)}},get value(){return r}}}const Za=()=>{throw new Error("Platform specific Core Strategies are not initialized")},h5={[fr["EXT/RPC"]]:Za,[fr["HTTP/POST"]]:Za,[fr["IFRAME/RPC"]]:Za,[fr["POP/RPC"]]:Za,[fr["TAB/RPC"]]:Za,[fr["EXT/RPC"]]:Za},p5=["ServicePlugin"],g5=["discovery-service"],m5=e=>{const{services:t=[],serviceStrategy:n}=e;fe(Array.isArray(t),"Services must be an array");for(const r of t)fe(Ki(r.f_type)&&r.f_type==="Service","Service is required"),fe(Ki(r.type)&&r.type==="authn",`Service must be type authn. Received ${r.type}`),fe(r.method in fr||n.method===r.method,`Service method ${r.method} is not supported`);return fe(Ki(n),"Service strategy is required"),fe(Ki(n.method)&&Tc(n.method),"Service strategy method is required"),fe(Ki(n.exec)&&uT(n.exec),"Service strategy exec function is required"),{discoveryServices:t,serviceStrategy:n}},y5=e=>{let{coreStrategies:t}=e,n=new Set,r=new Map(Object.entries(t));const s=h=>{if(fe(g5.includes(h.type),`Service Plugin type ${h.type} is not supported`),h.type==="discovery-service"){const{discoveryServices:p,serviceStrategy:m}=m5(h);a(p),r.has(m.method)?qe({title:"Add Service Plugin",message:`Service strategy for ${m.method} already exists`,level:dt.warn}):r.set(m.method,m.exec)}},a=h=>n=new Set([...h]);return Object.freeze({add:s,getServices:()=>[...n],getStrategy:h=>r.get(h),getStrategies:()=>[...r.keys()]})},b5=e=>{let t;fe(!!e,"No plugins supplied"),Array.isArray(e)?t=[...e]:t=[e];for(const n of t)fe(Ki(n.name),"Plugin name is required"),fe(Ki(n.f_type),"Plugin f_type is required"),fe(p5.includes(n.f_type),`Plugin type ${n.f_type} is not supported`);return t},w5=()=>{const e=new Map;return Object.freeze({add:r=>{const s=b5(r);for(const a of s)e.set(a.name,a),a.f_type==="ServicePlugin"&&Uu.add(a)},getPlugins:()=>e})};let Uu;const wT=()=>typeof Uu<"u",vT=e=>{let{coreStrategies:t}=e;if(wT())return Uu;const n=y5({coreStrategies:t});return Uu=n,n},Zu=()=>wT()?Uu:(console.warn("Registry is not initalized, it will be initialized with stub core strategies"),vT({coreStrategies:h5})),x0=w5(),ET=async()=>[...window?.fcl_extensions||[],...Zu().getServices()];async function v5(e){const t=await Ae.get("discovery.authn.include",[]),n=await Ae.get("discovery.authn.exclude",[]),r=await Ae.get("discovery.features.suggested",[]),s=await Ae.first(["discovery.wallet.method","discovery.wallet.method.default"]),a=e?.method?e.method:s,c=e?.endpoint??await Ae.first(["discovery.wallet","challenge.handshake"]);return fe(c,`
    If no service is passed to "authenticate," then "discovery.wallet" must be defined in fcl config.
    See: "https://docs.onflow.org/fcl/reference/api/#setting-configuration-values"
    `),{...e,type:"authn",endpoint:c,method:a,discoveryAuthnInclude:t,discoveryAuthnExclude:n,discoveryFeaturesSuggested:r}}async function E5(e){let{types:t}=e;const n=await Ae.get("discovery.authn.endpoint");fe(!!n,'"discovery.authn.endpoint" in config must be defined.');const r=await Ae.get("discovery.authn.include",[]),s=await Ae.get("discovery.authn.exclude",[]),a=new tw(n);return fetch(a,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:t,fclVersion:ew,include:r,exclude:s,features:{suggested:await Ae.get("discovery.features.suggested",[])},clientServices:await ET(),supportedStrategies:Zu().getStrategies(),userAgent:window?.navigator?.userAgent,network:await ta()})}).then(c=>c.json())}const di={AUTHN:"authn",RESULTS:"results",SNAPSHOT:"SNAPSHOT",UPDATED:"UPDATED",UPDATE_RESULTS:"UPDATE_RESULTS"},S5=(e,t)=>{e&&console.warn(`
      %cFCL Warning
      ============================
      ${t}
      For more info, please see the docs: https://docs.onflow.org/fcl/
      ============================
      `,"font-weight:bold;font-family:monospace;")},R0=async()=>{try{const e=await E5({types:[di.AUTHN]});Yt(di.AUTHN,di.UPDATE_RESULTS,{results:e})}catch(e){qe({title:`${e.name} Error fetching Discovery API services.`,message:e.message,level:dt.error})}},_5={[Nu]:async e=>{S5(typeof window>"u",'"fcl.discovery" is only available in the browser.'),document.readyState==="complete"?R0():window.addEventListener("load",()=>{R0()})},[di.UPDATE_RESULTS]:(e,t,n)=>{e.merge(n),e.broadcast(di.UPDATED,{...e.all()})},[Pc]:(e,t)=>{e.subscribe(t.from),e.send(t.from,di.UPDATED,{...e.all()})},[Ho]:(e,t)=>e.unsubscribe(t.from),[di.SNAPSHOT]:async(e,t)=>t.reply({...e.all()})},FS=()=>ea(_5,di.AUTHN),A5={subscribe:e=>kb(di.AUTHN,FS,e),snapshot:()=>eO(di.AUTHN,FS),update:()=>{document.readyState==="complete"&&R0()}},ST={authn:A5};async function x5(e,t){if(e==null||t==null)return[];const n=new tw(e);n.searchParams.append("code",t);const r=await fetch(n,{method:"GET",headers:{"Content-Type":"application/json"}}).then(a=>a.json());if(Array.isArray(r))return r;const s=[];if(Array.isArray(r.authorizations))for(let a of r.authorizations)s.push({type:"authz",keyId:r.keyId,...a});return r.provider!=null&&s.push({type:"authn",id:"wallet-provider#authn",...r.provider}),s}function R5(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return[...e,...t]}function O5(e){if(e==null)return null;if(!e.f_vsn)return{...kc,type:e.type,uid:e.id,endpoint:e.authn,id:e.pid,provider:{address:Tn(e.addr),name:e.name,icon:e.icon}};switch(e.f_vsn){case"1.0.0":return e;default:return null}}function T5(e){if(e==null)return null;if(!e.f_vsn)return{...kc,type:e.type,uid:e.id,endpoint:e.endpoint,method:e.method,identity:{...pT,address:Tn(e.addr),keyId:e.keyId},params:e.params,data:e.data};switch(e.f_vsn){case"1.0.0":return e;default:return null}}function D5(e){if(e==null)return null;if(!e.f_vsn)return{...kc,type:e.type,uid:e.id,endpoint:e.endpoint,method:e.method,identity:{...pT,address:Tn(e.addr),keyId:e.keyId},params:e.params,data:e.data};switch(e.f_vsn){case"1.0.0":return e;default:return null}}function _T(e){if(e==null)return null;if(!e.f_vsn)return{old:e,...kc,type:"frame",endpoint:e.endpoint,params:e.params||{},data:e.data||{}};switch(e.f_vsn){case"1.0.0":return e;default:return null}}function AT(e){if(e==null)return null;if(!e.f_vsn)return{...kc,type:"back-channel-rpc",endpoint:e.endpoint,method:e.method,params:e.params||{},data:e.data||{}};switch(e.f_vsn){case"1.0.0":return e;default:return null}}function I5(e){if(e==null)return null;switch(e.f_vsn){case"1.0.0":return e;default:return null}}function C5(e){if(e==null)return null;if(!e.f_vsn)throw new Error("Invalid user-signature service");switch(e.f_vsn){case"1.0.0":return e;default:return null}}function xT(e){if(e==null)return null;if(e.method==null&&(e={...e,type:"local-view",method:"VIEW/IFRAME"}),!e.f_vsn)return{...kc,type:e.type||"local-view",method:e.method,endpoint:e.endpoint,data:e.data||{},params:e.params||{}};switch(e.f_vsn){case"1.0.0":return e;default:return null}}function N5(e){if(e==null)return null;if(!e.f_vsn)throw new Error("FCL Normalizer Error: Invalid account-proof service");switch(e.f_vsn){case"1.0.0":return e;default:return null}}function $5(e){if(e==null)return null;if(!e.f_vsn)throw new Error("Invalid authn-refresh service");switch(e.f_vsn){case"1.0.0":return e;default:return null}}function U5(e,t){return e.map(n=>P5(n,t)).filter(Boolean)}const B5={"back-channel-rpc":AT,"pre-authz":D5,authz:T5,authn:O5,frame:_T,"open-id":I5,"user-signature":C5,"local-view":xT,"account-proof":N5,"authn-refresh":$5};function P5(e,t){try{var n=B5[e.type](e,t);return n}catch(r){return console.error(`Unrecognized FCL Service Type [${e.type}]`,e,r),e}}function Bu(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return e.reduce((n,r)=>r.type===t&&(!n||LP(r.f_vsn,n.f_vsn)>0)?r:n,null)}function k5(e){return jb([e.provider?.address||e.provider?.name||"UNSPECIFIED",e.id]).toString("hex")}function M5(e){return e.addr=e.addr?Tn(e.addr):null,e.paddr=e.paddr?Tn(e.paddr):null,e}async function VS(e){e=M5(e);var t=U5(R5(e.services||[],await x5(e.hks,e.code)));const n=Bu(t,"authn");return{...e5,addr:Tn(e.addr),cid:k5(n),loggedIn:!0,services:t,expiresAt:e.expires}}const L5="WC/RPC",j5=typeof window>"u";function z5(){if(j5)return;Zu().getStrategies().includes(L5)||qe({title:"FCL WalletConnect Service Plugin",level:dt.error,message:"All dApps are expected to register for a WalletConnect projectId & add this to their FCL configuration.  If you do not do so, users will be unable to use certain wallets to interact with your dApp.  See https://developers.flow.com/tools/clients/fcl-js/configure-fcl for more information."})}const q5=globalThis.AbortController||require("abort-controller"),Zh=async e=>{let{service:t,body:n,config:r,abortSignal:s,customRpc:a,user:c,opts:u}=e;return Zu().getStrategy(t.method)({service:t,body:n,config:r,abortSignal:s,customRpc:a,opts:u,user:c})};async function Go(e){let{service:t,msg:n={},config:r={},opts:s={},platform:a,abortSignal:c=new q5().signal,execStrategy:u,user:d}=e;z5(),n.data=t.data;const h={services:await jS(/^service\./),app:await jS(/^app\.detail\./),client:{...r.client,platform:a,fclVersion:ew,fclLibrary:"https://github.com/onflow/fcl-js",hostname:window?.location?.hostname??null,network:await ta(s)}};try{const p=await(u||Zh)({service:t,body:n,config:h,opts:s,user:d,abortSignal:c});return p.status==="REDIRECT"?(fe(t.type===p.data.type,"Cannot shift recursive service type in execService"),await Go({service:p.data,msg:n,config:h,opts:s,abortSignal:c,platform:a,user:d})):p}catch(p){throw qe({title:`Error on execService ${t?.type}`,message:p,level:dt.error}),p}}function O0(e){if(e==null)return null;if(!e.f_vsn)return{...n5,addr:Mt(e.addr||e.address),signature:e.signature||e.sig,keyId:e.keyId};switch(e.f_vsn){case"1.0.0":return e;default:return null}}const H5=e=>typeof e=="function",Yr="CURRENT_USER",cy="CURRENT_USER/UPDATED",RT="SNAPSHOT",T0="SET_CURRENT_USER",OT="DEL_CURRENT_USER",D0=`{
  "f_type": "User",
  "f_vsn": "1.0.0",
  "addr":null,
  "cid":null,
  "loggedIn":null,
  "expiresAt":null,
  "services":[]
}`,F5=async e=>{const t=JSON.parse(D0),n=await e.get(Yr);return n!=null&&t.f_vsn!==n.f_vsn?(e.removeItem(Yr),t):n||t},V5=e=>{const t=async()=>e.getStorageProvider?await e.getStorageProvider():await Ae.first(["fcl.storage","fcl.storage.default"]);return{[Nu]:async n=>{typeof window>"u"&&console.warn(`
        %cFCL Warning
        ============================
        "currentUser" is only available in the browser.
        For more info, please see the docs: https://docs.onflow.org/fcl/
        ============================
        `,"font-weight:bold;font-family:monospace;"),n.merge(JSON.parse(D0));const r=await t();if(r.can){const s=await F5(r);G5(s)&&n.merge(s)}},[Pc]:(n,r)=>{n.subscribe(r.from),n.send(r.from,cy,{...n.all()})},[Ho]:(n,r)=>{n.unsubscribe(r.from)},[RT]:async(n,r)=>{r.reply({...n.all()})},[T0]:async(n,r,s)=>{n.merge(s);const a=await t();a.can&&a.put(Yr,n.all()),n.broadcast(cy,{...n.all()})},[OT]:async(n,r)=>{n.merge(JSON.parse(D0));const s=await t();s.can&&s.put(Yr,n.all()),n.broadcast(cy,{...n.all()})}}},Mc=e=>ea(V5(e),Yr);function G5(e){return e.expiresAt==null||e.expiresAt===0||e.expiresAt>Date.now()}async function K5(){let e=await Ae.get("fcl.accountProof.resolver");if(e==null)return;if(!H5(e)){qe({title:"Account Proof Data Resolver must be a function",message:`Check fcl.accountProof.resolver configuration.
                Expected: fcl.accountProof.resolver: async () => { ... }
                Received: fcl.accountProof.resolver: ${typeof e}
                `,level:dt.warn});return}const t={...await e()},n=window?.location?.origin;return t.appIdentifier?n&&(qe.deprecate({pkg:"FCL",subject:"appIdentifier in fcl.accountProof.resolver",message:"Manually set app identifiers in the account proof resolver function are now deprecated.  These are now automatically set to the application origin URL by FCL",transition:"https://github.com/onflow/flow-js-sdk/blob/master/packages/fcl/TRANSITIONS.md#0002-deprecate-appIdentifier-field-in-account-proof-resolver"}),fe(typeof t.appIdentifier=="string","appIdentifier must be a string")):(fe(n,"The appIdentifier (origin) could not be inferred from the window.location.origin.  Please set the appIdentifier manually in the fcl.accountProof.resolver function."),t.appIdentifier=n),fe(/^[0-9a-f]+$/i.test(t.nonce),"Nonce must be a hex string"),t}const Y5=async e=>{let{discoveryAuthnInclude:t,discoveryAuthnExclude:n,discoveryFeaturesSuggested:r}=e;return{client:{discoveryAuthnInclude:t,discoveryAuthnExclude:n,discoveryFeaturesSuggested:r,clientServices:await ET(),supportedStrategies:Zu().getStrategies()}}},Qh=e=>async function(){let{service:t,redir:n=!1,forceReauth:r=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(t&&!t?.provider?.is_installed&&t?.provider?.requires_install){window.location.href=t?.provider?.install_link;return}return new Promise(async(s,a)=>{Mc(e);const c={redir:n},u=await sh(e)(),d=Bu(u.services,"authn-refresh");let h;if(u.loggedIn&&!r)if(d)try{const p=await Go({service:d,msg:h,opts:c,platform:e.platform,user:u});Yt(Yr,T0,await VS(p))}catch(p){qe({title:`${p.name} Could not refresh wallet authentication.`,message:p.message,level:dt.error})}finally{return s(await sh(e)())}else return s(u);try{h=await K5()}catch(p){return qe({title:`${p.name} On Authentication: Could not resolve account proof data.`,message:p.message,level:dt.error}),a(p)}try{const p=await v5(t),m=await Go({service:p,msg:h,config:await Y5(p),opts:c,platform:e.platform,execStrategy:e.discovery?.execStrategy,user:u});Yt(Yr,T0,await VS(m))}catch(p){qe({title:`${p} On Authentication`,message:p,level:dt.error})}finally{s(await sh(e)())}})};function W5(e){return function(){Mc(e),Yt(Yr,OT)}}const X5=e=>({f_type:"PreAuthzResponse",f_vsn:"1.0.0",proposer:(e||{}).proposer,payer:(e||{}).payer||[],authorization:(e||{}).authorization||[]}),Z5=e=>(t,n)=>{let{user:r}=n;const s=X5(t),a=[];s.proposer!=null&&a.push(["PROPOSER",s.proposer]);for(let u of s.payer||[])a.push(["PAYER",u]);for(let u of s.authorization||[])a.push(["AUTHORIZER",u]);var c=a.map(u=>{let[d,h]=u;return{tempId:[h.identity.address,h.identity.keyId].join("|"),addr:h.identity.address,keyId:h.identity.keyId,signingFunction(p){return Go({service:h,msg:p,platform:e.platform,user:r})},role:{proposer:d==="PROPOSER",payer:d==="PAYER",authorizer:d==="AUTHORIZER"}}});return c},Q5=e=>async t=>(Mc(e),{...t,tempId:"CURRENT_USER",async resolve(n,r){const s=await Qh(e)({redir:!0}),a=Bu(s.services,"authz"),c=Bu(s.services,"pre-authz");if(c)return Z5(e)(await Go({service:c,msg:r,platform:e.platform,user:s}),{user:s});if(a)return{...n,tempId:"CURRENT_USER",resolve:null,addr:Mt(a.identity.address),keyId:a.identity.keyId,sequenceNum:null,signature:null,async signingFunction(u){return O0(await Go({service:a,msg:u,opts:{includeOlderJsonRpcCall:!0},platform:e.platform,user:s}))}};throw new Error("No Authz or PreAuthz Service configured for CURRENT_USER")}});function J5(e){return function(n){Mc(e);const r="@EXIT",s=ea(async a=>{for(a.send(Yr,Pc);;){const c=await a.receive();if(c.tag===r){a.send(Yr,Ho);return}n(c.data)}});return()=>Yt(s,r)}}function sh(e){return function(){return Mc(e),Yt(Yr,RT,null,{expectReply:!0,timeout:0})}}const ek=e=>async()=>{const{addr:t}=await Qh(e)();return lT(Tn(t),TO)},tk=e=>(fe(/^[0-9a-f]+$/i.test(e),"Message must be a hex string"),{message:e}),nk=e=>async t=>{Mc(e);const n=await Qh(e)({redir:!0}),r=Bu(n.services,"user-signature");fe(r,"Current user must have authorized a signing service.");try{const s=await Go({service:r,msg:tk(t),platform:e.platform,user:n});return Array.isArray(s)?s.map(a=>O0(a)):[O0(s)]}catch(s){return s}},TT=e=>{const t={authenticate:Qh(e),unauthenticate:W5(e),authorization:Q5(e),signUserMessage:nk(e),subscribe:J5(e),snapshot:sh(e),resolveArgument:ek(e)};return Object.assign(()=>({...t}),{...t})},rk=e=>async function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};var r;try{await qP(n),n=await hT(n);const s=typeof e=="function"?e:TT(e),a=await Ae().get("fcl.authz",s().authorization);return r=Vh([UP(n.cadence),cT(fT(n.args||[])),n.limit&&zP(n.limit)&&aT(n.limit),DP(n.proposer||n.authz||a),IP(n.payer||n.authz||a),RP(n.authorizations||[n.authz||a])]).then(Gh),r}catch(s){throw s}};function Qu(e){const t=new tw(e.endpoint);if(window?.location?.origin&&t.searchParams.append("l6n",window.location.origin),e.params!=null)for(let[n,r]of Object.entries(e.params||{}))t.searchParams.append(n,r);return t}function DT(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=t.method||"POST",r=n==="GET"?void 0:JSON.stringify(t.data||e.data||{});return fetch(Qu(e),{method:n,headers:{...e.headers||{},...t.headers||{},"Content-Type":"application/json"},body:r}).then(s=>s.json())}function bi(e){if(e==null)return null;if(!e.f_vsn)return{...t5,status:e.status??"APPROVED",reason:e.reason??null,data:e.compositeSignature||e.data||{...e},updates:AT(e.authorizationUpdates),local:_T((e.local||[])[0])};switch(e.f_vsn){case"1.0.0":return e;default:return null}}const GS={"HTTP/GET":"GET","HTTP/POST":"POST"},ik=e=>(fe(GS[e.method],"Invalid Service Method for type back-channel-rpc",{service:e}),GS[e.method]);async function I0(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:()=>!0;if(fe(e,"Missing Polling Service",{service:e}),!t())throw new Error("Externally Halted");let r;try{if(typeof document<"u"&&document.visibilityState==="hidden")return await new Promise(s=>setTimeout(s,500)),I0(e,t);r=await DT(e,{method:ik(e)}).then(bi)}catch(s){throw s}switch(r.status){case"APPROVED":return r.data;case"DECLINED":throw new Error(`Declined: ${r.reason||"No reason supplied."}`);default:return await new Promise(s=>setTimeout(s,500)),I0(r.updates,t)}}const KS=e=>async t=>{let{service:n,body:r,config:s,opts:a}=t;const c=await DT(n,{data:{fclVersion:ew,service:{params:n.params,data:n.data,type:n.type},config:s,...r}}).then(bi);if(c.status==="APPROVED")return c.data;if(c.status==="DECLINED")throw new Error(`Declined: ${c.reason||"No reason supplied."}`);if(c.status==="REDIRECT")return c;if(c.status==="PENDING"){var u=!0,d=!0;const[h,p]=await e(xT(c.local),{serviceEndpoint:Qu,onClose:()=>d=!1}),m=()=>{try{p(),d=!1}catch(v){console.error("Frame Close Error",v)}},y=()=>{const v=u;return u=d,v};return I0(c.updates,y).then(v=>(m(),v)).catch(v=>{throw console.error(v),m(),v})}else throw console.error("Auto Decline: Invalid Response",{service:n,resp:c}),new Error("Auto Decline: Invalid Response")},Td="FCL:VIEW:CLOSE",ly="FCL:VIEW:READY",uy="FCL:VIEW:RESPONSE",sk="FCL:VIEW:CUSTOM_RPC",Rt=e=>typeof e=="string"&&e.toLowerCase(),ok=new Set(["monetizationstart","monetizationpending","monetizationprogress","monetizationstop"]),Eo=(e,t)=>console.warn("DEPRECATION NOTICE",`Received ${e}, please use ${t} for this and future versions of FCL`),Jh=e=>{let{close:t,send:n,onReady:r,onResponse:s,onMessage:a,onCustomRpc:c,getSource:u}=e,d;return h=>{try{d=u?.()||d}catch{d=null}try{if(typeof h.data!="object"||ok.has(h.data.type)||d!=null&&h.source!==d)return;Rt(h.data.type)===Rt(Td)&&t(),Rt(h.data.type)===Rt(ly)&&(r(h,{send:n,close:t}),d||=h.source),Rt(h.data.type)===Rt(uy)&&s(h,{send:n,close:t}),Rt(h.data.type)===Rt(sk)&&c(h.data.payload,{send:n,close:t}),a(h,{send:n,close:t}),Rt(h.data.type)===Rt("FCL:FRAME:READY")&&(Eo(h.data.type,ly),r(h,{send:n,close:t}),d||=h.source),Rt(h.data.type)===Rt("FCL:FRAME:RESPONSE")&&(Eo(h.data.type,uy),s(h,{send:n,close:t})),Rt(h.data.type)===Rt("FCL:FRAME:CLOSE")&&(Eo(h.data.type,Td),t()),Rt(h.data.type)===Rt("FCL::CHALLENGE::RESPONSE")&&(Eo(h.data.type,uy),s(h,{send:n,close:t})),Rt(h.data.type)===Rt("FCL::AUTHZ_READY")&&(Eo(h.data.type,ly),r(h,{send:n,close:t}),d||=h.source),Rt(h.data.type)===Rt("FCL::CHALLENGE::CANCEL")&&(Eo(h.data.type,Td),t()),Rt(h.data.type)===Rt("FCL::CANCEL")&&(Eo(h.data.type,Td),t())}catch(p){console.error("Frame Callback Error",p),t()}}};XP();let YS=function(e){return e[e.INVALID_REQUEST=-32600]="INVALID_REQUEST",e[e.METHOD_NOT_FOUND=-32601]="METHOD_NOT_FOUND",e[e.INVALID_PARAMS=-32602]="INVALID_PARAMS",e[e.INTERNAL_ERROR=-32603]="INTERNAL_ERROR",e[e.PARSE_ERROR=-32700]="PARSE_ERROR",e}({});class WS extends Error{constructor(t,n,r){super(n),this.code=t,this.message=n,this.data=r}}var C0=function(e){return e.HELLO="rpc_hello",e}(C0||{});class ak{id=0;setSend=()=>{};_send=new Promise(t=>{this.setSend=t});peerInfo=new Promise((t,n)=>{this.resolvePeerInfo=t,this.rejectPeerInfo=n});enabledNotifications=[];requestHandlers={};subscriptions={};messageListeners=[];constructor(t){let{notifications:n}=t;this.enabledNotifications=n||[],this.on(C0.HELLO,r=>(this.resolvePeerInfo(r),this.ownInfo()))}connect(t){let{send:n}=t;this.setSend(n),this.requestWithoutConnection(C0.HELLO,this.ownInfo()).then(r=>{this.resolvePeerInfo(r)}).catch(this.rejectPeerInfo)}ownInfo(){return{requests:Object.keys(this.requestHandlers),notifications:this.enabledNotifications}}async send(t){return(await this._send)(t)}receive(t){t?.jsonrpc==="2.0"&&("method"in t&&("id"in t?this.handleRequest(t):this.handleNotification(t)),this.messageListeners.forEach(n=>n(t)))}async handleRequest(t){const n=this.requestHandlers[t.method];if(n)try{const r=await n(t.params);this.send({jsonrpc:"2.0",id:t.id,result:r})}catch(r){r instanceof WS?this.send({jsonrpc:"2.0",id:t.id,error:{code:r.code,message:r.message,data:r.data}}):this.send({jsonrpc:"2.0",id:t.id,error:{code:YS.INTERNAL_ERROR,message:r?.message}})}else this.send({jsonrpc:"2.0",id:t.id,error:{code:YS.METHOD_NOT_FOUND,message:`Method not found: ${t.method}`}})}handleNotification(t){this.subscriptions[t.method]&&this.subscriptions[t.method].forEach(n=>n(t.params))}onMessage(t){return this.messageListeners.push(t),()=>{this.messageListeners=this.messageListeners.filter(n=>n!==t)}}async notify(t,n){await this.onceConnected(),this.send({jsonrpc:"2.0",method:t,params:n})}async request(t,n){return await this.onceConnected(),this.requestWithoutConnection(t,n)}async requestWithoutConnection(t,n){const r=this.id++;let s=()=>{};const a=new Promise((c,u)=>{s=this.onMessage(d=>{if(d.id===r&&("result"in d||"error"in d)){if(d.error){const h=new WS(d.error.code,d.error.message,d.error.data);u(h)}c(d.result)}})}).finally(s);return this.send({jsonrpc:"2.0",method:t,params:n,id:r}),a}on(t,n){this.requestHandlers[t]=n}subscribe(t,n){this.subscriptions[t]=this.subscriptions[t]||new Set,this.subscriptions[t].add(n)}unsubscribe(t,n){this.subscriptions[t]?.delete(n)}async onceConnected(){return this.peerInfo.then(()=>{})}async getAvailableRequests(){return this.peerInfo.then(t=>t.requests)}async getAvailableNotifications(){return this.peerInfo.then(t=>t.notifications)}}const ck="modulepreload",lk=function(e){return"/"+e},XS={},IT=function(t,n,r){let s=Promise.resolve();if(n&&n.length>0){let d=function(h){return Promise.all(h.map(p=>Promise.resolve(p).then(m=>({status:"fulfilled",value:m}),m=>({status:"rejected",reason:m}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),u=c?.nonce||c?.getAttribute("nonce");s=d(n.map(h=>{if(h=lk(h),h in XS)return;XS[h]=!0;const p=h.endsWith(".css"),m=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${m}`))return;const y=document.createElement("link");if(y.rel=p?"stylesheet":ck,p||(y.as="script"),y.crossOrigin="",y.href=h,u&&y.setAttribute("nonce",u),document.head.appendChild(y),p)return new Promise((v,w)=>{y.addEventListener("load",v),y.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${h}`)))})}))}function a(c){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=c,window.dispatchEvent(u),!u.defaultPrevented)throw c}return s.then(c=>{for(const u of c||[])u.status==="rejected"&&a(u.reason);return t().catch(a)})};var ZS=function(e,t,n){if(n||arguments.length===2)for(var r=0,s=t.length,a;r<s;r++)(a||!(r in t))&&(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))},uk=function(){function e(t,n,r){this.name=t,this.version=n,this.os=r,this.type="browser"}return e}(),fk=function(){function e(t){this.version=t,this.type="node",this.name="node",this.os=process.platform}return e}(),dk=function(){function e(t,n,r,s){this.name=t,this.version=n,this.os=r,this.bot=s,this.type="bot-device"}return e}(),hk=function(){function e(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return e}(),pk=function(){function e(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return e}(),gk=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,mk=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,QS=3,yk=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",gk]],JS=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function bk(e){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new pk:typeof navigator<"u"?vk(navigator.userAgent):Sk()}function wk(e){return e!==""&&yk.reduce(function(t,n){var r=n[0],s=n[1];if(t)return t;var a=s.exec(e);return!!a&&[r,a]},!1)}function vk(e){var t=wk(e);if(!t)return null;var n=t[0],r=t[1];if(n==="searchbot")return new hk;var s=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);s?s.length<QS&&(s=ZS(ZS([],s,!0),_k(QS-s.length),!0)):s=[];var a=s.join("."),c=Ek(e),u=mk.exec(e);return u&&u[1]?new dk(n,a,c,u[1]):new uk(n,a,c)}function Ek(e){for(var t=0,n=JS.length;t<n;t++){var r=JS[t],s=r[0],a=r[1],c=a.exec(e);if(c)return s}return null}function Sk(){var e=typeof process<"u"&&process.version;return e?new fk(process.version.slice(1)):null}function _k(e){for(var t=[],n=0;n<e;n++)t.push("0");return t}var fy={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var N0=function(e,t){return N0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)r.hasOwnProperty(s)&&(n[s]=r[s])},N0(e,t)};function Ak(e,t){N0(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var $0=function(){return $0=Object.assign||function(t){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},$0.apply(this,arguments)};function xk(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n}function Rk(e,t,n,r){var s=arguments.length,a=s<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(e,t,n,r);else for(var u=e.length-1;u>=0;u--)(c=e[u])&&(a=(s<3?c(a):s>3?c(t,n,a):c(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a}function Ok(e,t){return function(n,r){t(n,r,e)}}function Tk(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function Dk(e,t,n,r){function s(a){return a instanceof n?a:new n(function(c){c(a)})}return new(n||(n=Promise))(function(a,c){function u(p){try{h(r.next(p))}catch(m){c(m)}}function d(p){try{h(r.throw(p))}catch(m){c(m)}}function h(p){p.done?a(p.value):s(p.value).then(u,d)}h((r=r.apply(e,t||[])).next())})}function Ik(e,t){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,s,a,c;return c={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function u(h){return function(p){return d([h,p])}}function d(h){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(a=h[0]&2?s.return:h[0]?s.throw||((a=s.return)&&a.call(s),0):s.next)&&!(a=a.call(s,h[1])).done)return a;switch(s=0,a&&(h=[h[0]&2,a.value]),h[0]){case 0:case 1:a=h;break;case 4:return n.label++,{value:h[1],done:!1};case 5:n.label++,s=h[1],h=[0];continue;case 7:h=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(h[0]===6||h[0]===2)){n=0;continue}if(h[0]===3&&(!a||h[1]>a[0]&&h[1]<a[3])){n.label=h[1];break}if(h[0]===6&&n.label<a[1]){n.label=a[1],a=h;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(h);break}a[2]&&n.ops.pop(),n.trys.pop();continue}h=t.call(e,n)}catch(p){h=[6,p],s=0}finally{r=a=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}}function Ck(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}function Nk(e,t){for(var n in e)n!=="default"&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function U0(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function CT(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),s,a=[],c;try{for(;(t===void 0||t-- >0)&&!(s=r.next()).done;)a.push(s.value)}catch(u){c={error:u}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(c)throw c.error}}return a}function $k(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(CT(arguments[t]));return e}function Uk(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),s=0,t=0;t<n;t++)for(var a=arguments[t],c=0,u=a.length;c<u;c++,s++)r[s]=a[c];return r}function Pu(e){return this instanceof Pu?(this.v=e,this):new Pu(e)}function Bk(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),s,a=[];return s={},c("next"),c("throw"),c("return"),s[Symbol.asyncIterator]=function(){return this},s;function c(y){r[y]&&(s[y]=function(v){return new Promise(function(w,E){a.push([y,v,w,E])>1||u(y,v)})})}function u(y,v){try{d(r[y](v))}catch(w){m(a[0][3],w)}}function d(y){y.value instanceof Pu?Promise.resolve(y.value.v).then(h,p):m(a[0][2],y)}function h(y){u("next",y)}function p(y){u("throw",y)}function m(y,v){y(v),a.shift(),a.length&&u(a[0][0],a[0][1])}}function Pk(e){var t,n;return t={},r("next"),r("throw",function(s){throw s}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(s,a){t[s]=e[s]?function(c){return(n=!n)?{value:Pu(e[s](c)),done:s==="return"}:a?a(c):c}:a}}function kk(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof U0=="function"?U0(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(a){n[a]=e[a]&&function(c){return new Promise(function(u,d){c=e[a](c),s(u,d,c.done,c.value)})}}function s(a,c,u,d){Promise.resolve(d).then(function(h){a({value:h,done:u})},c)}}function Mk(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function Lk(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function jk(e){return e&&e.__esModule?e:{default:e}}function zk(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function qk(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n}const Hk=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return $0},__asyncDelegator:Pk,__asyncGenerator:Bk,__asyncValues:kk,__await:Pu,__awaiter:Dk,__classPrivateFieldGet:zk,__classPrivateFieldSet:qk,__createBinding:Ck,__decorate:Rk,__exportStar:Nk,__extends:Ak,__generator:Ik,__importDefault:jk,__importStar:Lk,__makeTemplateObject:Mk,__metadata:Tk,__param:Ok,__read:CT,__rest:xk,__spread:$k,__spreadArrays:Uk,__values:U0},Symbol.toStringTag,{value:"Module"})),Ju=$8(Hk);var dy={},Zl={},e_;function Fk(){if(e_)return Zl;e_=1,Object.defineProperty(Zl,"__esModule",{value:!0}),Zl.delay=void 0;function e(t){return new Promise(n=>{setTimeout(()=>{n(!0)},t)})}return Zl.delay=e,Zl}var So={},hy={},_o={},t_;function Vk(){return t_||(t_=1,Object.defineProperty(_o,"__esModule",{value:!0}),_o.ONE_THOUSAND=_o.ONE_HUNDRED=void 0,_o.ONE_HUNDRED=100,_o.ONE_THOUSAND=1e3),_o}var py={},n_;function Gk(){return n_||(n_=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ONE_YEAR=e.FOUR_WEEKS=e.THREE_WEEKS=e.TWO_WEEKS=e.ONE_WEEK=e.THIRTY_DAYS=e.SEVEN_DAYS=e.FIVE_DAYS=e.THREE_DAYS=e.ONE_DAY=e.TWENTY_FOUR_HOURS=e.TWELVE_HOURS=e.SIX_HOURS=e.THREE_HOURS=e.ONE_HOUR=e.SIXTY_MINUTES=e.THIRTY_MINUTES=e.TEN_MINUTES=e.FIVE_MINUTES=e.ONE_MINUTE=e.SIXTY_SECONDS=e.THIRTY_SECONDS=e.TEN_SECONDS=e.FIVE_SECONDS=e.ONE_SECOND=void 0,e.ONE_SECOND=1,e.FIVE_SECONDS=5,e.TEN_SECONDS=10,e.THIRTY_SECONDS=30,e.SIXTY_SECONDS=60,e.ONE_MINUTE=e.SIXTY_SECONDS,e.FIVE_MINUTES=e.ONE_MINUTE*5,e.TEN_MINUTES=e.ONE_MINUTE*10,e.THIRTY_MINUTES=e.ONE_MINUTE*30,e.SIXTY_MINUTES=e.ONE_MINUTE*60,e.ONE_HOUR=e.SIXTY_MINUTES,e.THREE_HOURS=e.ONE_HOUR*3,e.SIX_HOURS=e.ONE_HOUR*6,e.TWELVE_HOURS=e.ONE_HOUR*12,e.TWENTY_FOUR_HOURS=e.ONE_HOUR*24,e.ONE_DAY=e.TWENTY_FOUR_HOURS,e.THREE_DAYS=e.ONE_DAY*3,e.FIVE_DAYS=e.ONE_DAY*5,e.SEVEN_DAYS=e.ONE_DAY*7,e.THIRTY_DAYS=e.ONE_DAY*30,e.ONE_WEEK=e.SEVEN_DAYS,e.TWO_WEEKS=e.ONE_WEEK*2,e.THREE_WEEKS=e.ONE_WEEK*3,e.FOUR_WEEKS=e.ONE_WEEK*4,e.ONE_YEAR=e.ONE_DAY*365}(py)),py}var r_;function NT(){return r_||(r_=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});const t=Ju;t.__exportStar(Vk(),e),t.__exportStar(Gk(),e)}(hy)),hy}var i_;function Kk(){if(i_)return So;i_=1,Object.defineProperty(So,"__esModule",{value:!0}),So.fromMiliseconds=So.toMiliseconds=void 0;const e=NT();function t(r){return r*e.ONE_THOUSAND}So.toMiliseconds=t;function n(r){return Math.floor(r/e.ONE_THOUSAND)}return So.fromMiliseconds=n,So}var s_;function Yk(){return s_||(s_=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});const t=Ju;t.__exportStar(Fk(),e),t.__exportStar(Kk(),e)}(dy)),dy}var Qa={},o_;function Wk(){if(o_)return Qa;o_=1,Object.defineProperty(Qa,"__esModule",{value:!0}),Qa.Watch=void 0;class e{constructor(){this.timestamps=new Map}start(n){if(this.timestamps.has(n))throw new Error(`Watch already started for label: ${n}`);this.timestamps.set(n,{started:Date.now()})}stop(n){const r=this.get(n);if(typeof r.elapsed<"u")throw new Error(`Watch already stopped for label: ${n}`);const s=Date.now()-r.started;this.timestamps.set(n,{started:r.started,elapsed:s})}get(n){const r=this.timestamps.get(n);if(typeof r>"u")throw new Error(`No timestamp found for label: ${n}`);return r}elapsed(n){const r=this.get(n);return r.elapsed||Date.now()-r.started}}return Qa.Watch=e,Qa.default=e,Qa}var gy={},Ql={},a_;function Xk(){if(a_)return Ql;a_=1,Object.defineProperty(Ql,"__esModule",{value:!0}),Ql.IWatch=void 0;class e{}return Ql.IWatch=e,Ql}var c_;function Zk(){return c_||(c_=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Ju.__exportStar(Xk(),e)}(gy)),gy}var l_;function Qk(){return l_||(l_=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});const t=Ju;t.__exportStar(Yk(),e),t.__exportStar(Wk(),e),t.__exportStar(Zk(),e),t.__exportStar(NT(),e)}(fy)),fy}var we=Qk(),lt={},u_;function $T(){if(u_)return lt;u_=1,Object.defineProperty(lt,"__esModule",{value:!0}),lt.getLocalStorage=lt.getLocalStorageOrThrow=lt.getCrypto=lt.getCryptoOrThrow=lt.getLocation=lt.getLocationOrThrow=lt.getNavigator=lt.getNavigatorOrThrow=lt.getDocument=lt.getDocumentOrThrow=lt.getFromWindowOrThrow=lt.getFromWindow=void 0;function e(y){let v;return typeof window<"u"&&typeof window[y]<"u"&&(v=window[y]),v}lt.getFromWindow=e;function t(y){const v=e(y);if(!v)throw new Error(`${y} is not defined in Window`);return v}lt.getFromWindowOrThrow=t;function n(){return t("document")}lt.getDocumentOrThrow=n;function r(){return e("document")}lt.getDocument=r;function s(){return t("navigator")}lt.getNavigatorOrThrow=s;function a(){return e("navigator")}lt.getNavigator=a;function c(){return t("location")}lt.getLocationOrThrow=c;function u(){return e("location")}lt.getLocation=u;function d(){return t("crypto")}lt.getCryptoOrThrow=d;function h(){return e("crypto")}lt.getCrypto=h;function p(){return t("localStorage")}lt.getLocalStorageOrThrow=p;function m(){return e("localStorage")}return lt.getLocalStorage=m,lt}var is=$T(),Jl={},f_;function Jk(){if(f_)return Jl;f_=1,Object.defineProperty(Jl,"__esModule",{value:!0}),Jl.getWindowMetadata=void 0;const e=$T();function t(){let n,r;try{n=e.getDocumentOrThrow(),r=e.getLocationOrThrow()}catch{return null}function s(){const v=n.getElementsByTagName("link"),w=[];for(let E=0;E<v.length;E++){const S=v[E],A=S.getAttribute("rel");if(A&&A.toLowerCase().indexOf("icon")>-1){const I=S.getAttribute("href");if(I)if(I.toLowerCase().indexOf("https:")===-1&&I.toLowerCase().indexOf("http:")===-1&&I.indexOf("//")!==0){let D=r.protocol+"//"+r.host;if(I.indexOf("/")===0)D+=I;else{const B=r.pathname.split("/");B.pop();const $=B.join("/");D+=$+"/"+I}w.push(D)}else if(I.indexOf("//")===0){const D=r.protocol+I;w.push(D)}else w.push(I)}}return w}function a(...v){const w=n.getElementsByTagName("meta");for(let E=0;E<w.length;E++){const S=w[E],A=["itemprop","property","name"].map(I=>S.getAttribute(I)).filter(I=>I?v.includes(I):!1);if(A.length&&A){const I=S.getAttribute("content");if(I)return I}}return""}function c(){let v=a("name","og:site_name","og:title","twitter:title");return v||(v=n.title),v}function u(){return a("description","og:description","twitter:description","keywords")}const d=c(),h=u(),p=r.origin,m=s();return{description:h,url:p,icons:m,name:d}}return Jl.getWindowMetadata=t,Jl}var eM=Jk();function ku(e,{strict:t=!0}={}){return!e||typeof e!="string"?!1:t?/^0x[0-9a-fA-F]*$/.test(e):e.startsWith("0x")}function B0(e){return ku(e,{strict:!1})?Math.ceil((e.length-2)/2):e.length}const UT="2.31.0";let my={getDocsUrl:({docsBaseUrl:e,docsPath:t="",docsSlug:n})=>t?`${e??"https://viem.sh"}${t}${n?`#${n}`:""}`:void 0,version:`viem@${UT}`};class Ko extends Error{constructor(t,n={}){const r=n.cause instanceof Ko?n.cause.details:n.cause?.message?n.cause.message:n.details,s=n.cause instanceof Ko&&n.cause.docsPath||n.docsPath,a=my.getDocsUrl?.({...n,docsPath:s}),c=[t||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...a?[`Docs: ${a}`]:[],...r?[`Details: ${r}`]:[],...my.version?[`Version: ${my.version}`]:[]].join(`
`);super(c,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=t,this.version=UT}walk(t){return BT(this,t)}}function BT(e,t){return t?.(e)?e:e&&typeof e=="object"&&"cause"in e&&e.cause!==void 0?BT(e.cause,t):t?null:e}class PT extends Ko{constructor({size:t,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${t}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}}function Lc(e,{dir:t,size:n=32}={}){return typeof e=="string"?tM(e,{dir:t,size:n}):nM(e,{dir:t,size:n})}function tM(e,{dir:t,size:n=32}={}){if(n===null)return e;const r=e.replace("0x","");if(r.length>n*2)throw new PT({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[t==="right"?"padEnd":"padStart"](n*2,"0")}`}function nM(e,{dir:t,size:n=32}={}){if(n===null)return e;if(e.length>n)throw new PT({size:e.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let s=0;s<n;s++){const a=t==="right";r[a?s:n-s-1]=e[a?s:e.length-s-1]}return r}class rM extends Ko{constructor({max:t,min:n,signed:r,size:s,value:a}){super(`Number "${a}" is not in safe ${s?`${s*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${t?`(${n} to ${t})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}}class iM extends Ko{constructor({givenSize:t,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${t} bytes.`,{name:"SizeOverflowError"})}}function jc(e,{size:t}){if(B0(e)>t)throw new iM({givenSize:B0(e),maxSize:t})}function P0(e,t={}){const{signed:n}=t;t.size&&jc(e,{size:t.size});const r=BigInt(e);if(!n)return r;const s=(e.length-2)/2,a=(1n<<BigInt(s)*8n-1n)-1n;return r<=a?r:r-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function sM(e,t={}){return Number(P0(e,t))}const oM=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function k0(e,t={}){return typeof e=="number"||typeof e=="bigint"?MT(e,t):typeof e=="string"?lM(e,t):typeof e=="boolean"?aM(e,t):kT(e,t)}function aM(e,t={}){const n=`0x${Number(e)}`;return typeof t.size=="number"?(jc(n,{size:t.size}),Lc(n,{size:t.size})):n}function kT(e,t={}){let n="";for(let s=0;s<e.length;s++)n+=oM[e[s]];const r=`0x${n}`;return typeof t.size=="number"?(jc(r,{size:t.size}),Lc(r,{dir:"right",size:t.size})):r}function MT(e,t={}){const{signed:n,size:r}=t,s=BigInt(e);let a;r?n?a=(1n<<BigInt(r)*8n-1n)-1n:a=2n**(BigInt(r)*8n)-1n:typeof e=="number"&&(a=BigInt(Number.MAX_SAFE_INTEGER));const c=typeof a=="bigint"&&n?-a-1n:0;if(a&&s>a||s<c){const d=typeof e=="bigint"?"n":"";throw new rM({max:a?`${a}${d}`:void 0,min:`${c}${d}`,signed:n,size:r,value:`${e}${d}`})}const u=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?Lc(u,{size:r}):u}const cM=new TextEncoder;function lM(e,t={}){const n=cM.encode(e);return kT(n,t)}const uM=new TextEncoder;function fM(e,t={}){return typeof e=="number"||typeof e=="bigint"?hM(e,t):typeof e=="boolean"?dM(e,t):ku(e)?LT(e,t):jT(e,t)}function dM(e,t={}){const n=new Uint8Array(1);return n[0]=Number(e),typeof t.size=="number"?(jc(n,{size:t.size}),Lc(n,{size:t.size})):n}const Mi={zero:48,nine:57,A:65,F:70,a:97,f:102};function d_(e){if(e>=Mi.zero&&e<=Mi.nine)return e-Mi.zero;if(e>=Mi.A&&e<=Mi.F)return e-(Mi.A-10);if(e>=Mi.a&&e<=Mi.f)return e-(Mi.a-10)}function LT(e,t={}){let n=e;t.size&&(jc(n,{size:t.size}),n=Lc(n,{dir:"right",size:t.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const s=r.length/2,a=new Uint8Array(s);for(let c=0,u=0;c<s;c++){const d=d_(r.charCodeAt(u++)),h=d_(r.charCodeAt(u++));if(d===void 0||h===void 0)throw new Ko(`Invalid byte sequence ("${r[u-2]}${r[u-1]}" in "${r}").`);a[c]=d*16+h}return a}function hM(e,t){const n=MT(e,t);return LT(n)}function jT(e,t={}){const n=uM.encode(e);return typeof t.size=="number"?(jc(n,{size:t.size}),Lc(n,{dir:"right",size:t.size})):n}const Dd=BigInt(2**32-1),h_=BigInt(32);function pM(e,t=!1){return t?{h:Number(e&Dd),l:Number(e>>h_&Dd)}:{h:Number(e>>h_&Dd)|0,l:Number(e&Dd)|0}}function gM(e,t=!1){const n=e.length;let r=new Uint32Array(n),s=new Uint32Array(n);for(let a=0;a<n;a++){const{h:c,l:u}=pM(e[a],t);[r[a],s[a]]=[c,u]}return[r,s]}const mM=(e,t,n)=>e<<n|t>>>32-n,yM=(e,t,n)=>t<<n|e>>>32-n,bM=(e,t,n)=>t<<n-32|e>>>64-n,wM=(e,t,n)=>e<<n-32|t>>>64-n,Ja=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function vM(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function vh(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function Mu(e,...t){if(!vM(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function kne(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");vh(e.outputLen),vh(e.blockLen)}function p_(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function EM(e,t){Mu(e);const n=t.outputLen;if(e.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function SM(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))}function zT(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}function Mne(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function Lne(e,t){return e<<32-t|e>>>t}const _M=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function AM(e){return e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255}function xM(e){for(let t=0;t<e.length;t++)e[t]=AM(e[t]);return e}const g_=_M?e=>e:xM;function RM(e){if(typeof e!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(e))}function qT(e){return typeof e=="string"&&(e=RM(e)),Mu(e),e}function jne(...e){let t=0;for(let r=0;r<e.length;r++){const s=e[r];Mu(s),t+=s.length}const n=new Uint8Array(t);for(let r=0,s=0;r<e.length;r++){const a=e[r];n.set(a,s),s+=a.length}return n}class OM{}function TM(e){const t=r=>e().update(qT(r)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function zne(e=32){if(Ja&&typeof Ja.getRandomValues=="function")return Ja.getRandomValues(new Uint8Array(e));if(Ja&&typeof Ja.randomBytes=="function")return Uint8Array.from(Ja.randomBytes(e));throw new Error("crypto.getRandomValues must be defined")}const DM=BigInt(0),eu=BigInt(1),IM=BigInt(2),CM=BigInt(7),NM=BigInt(256),$M=BigInt(113),HT=[],FT=[],VT=[];for(let e=0,t=eu,n=1,r=0;e<24;e++){[n,r]=[r,(2*n+3*r)%5],HT.push(2*(5*r+n)),FT.push((e+1)*(e+2)/2%64);let s=DM;for(let a=0;a<7;a++)t=(t<<eu^(t>>CM)*$M)%NM,t&IM&&(s^=eu<<(eu<<BigInt(a))-eu);VT.push(s)}const GT=gM(VT,!0),UM=GT[0],BM=GT[1],m_=(e,t,n)=>n>32?bM(e,t,n):mM(e,t,n),y_=(e,t,n)=>n>32?wM(e,t,n):yM(e,t,n);function PM(e,t=24){const n=new Uint32Array(10);for(let r=24-t;r<24;r++){for(let c=0;c<10;c++)n[c]=e[c]^e[c+10]^e[c+20]^e[c+30]^e[c+40];for(let c=0;c<10;c+=2){const u=(c+8)%10,d=(c+2)%10,h=n[d],p=n[d+1],m=m_(h,p,1)^n[u],y=y_(h,p,1)^n[u+1];for(let v=0;v<50;v+=10)e[c+v]^=m,e[c+v+1]^=y}let s=e[2],a=e[3];for(let c=0;c<24;c++){const u=FT[c],d=m_(s,a,u),h=y_(s,a,u),p=HT[c];s=e[p],a=e[p+1],e[p]=d,e[p+1]=h}for(let c=0;c<50;c+=10){for(let u=0;u<10;u++)n[u]=e[c+u];for(let u=0;u<10;u++)e[c+u]^=~n[(u+2)%10]&n[(u+4)%10]}e[0]^=UM[r],e[1]^=BM[r]}zT(n)}class nw extends OM{constructor(t,n,r,s=!1,a=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=t,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=a,vh(r),!(0<t&&t<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=SM(this.state)}clone(){return this._cloneInto()}keccak(){g_(this.state32),PM(this.state32,this.rounds),g_(this.state32),this.posOut=0,this.pos=0}update(t){p_(this),t=qT(t),Mu(t);const{blockLen:n,state:r}=this,s=t.length;for(let a=0;a<s;){const c=Math.min(n-this.pos,s-a);for(let u=0;u<c;u++)r[this.pos++]^=t[a++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:n,pos:r,blockLen:s}=this;t[r]^=n,(n&128)!==0&&r===s-1&&this.keccak(),t[s-1]^=128,this.keccak()}writeInto(t){p_(this,!1),Mu(t),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,a=t.length;s<a;){this.posOut>=r&&this.keccak();const c=Math.min(r-this.posOut,a-s);t.set(n.subarray(this.posOut,this.posOut+c),s),this.posOut+=c,s+=c}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return vh(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(EM(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,zT(this.state)}_cloneInto(t){const{blockLen:n,suffix:r,outputLen:s,rounds:a,enableXOF:c}=this;return t||(t=new nw(n,r,s,c,a)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=a,t.suffix=r,t.outputLen=s,t.enableXOF=c,t.destroyed=this.destroyed,t}}const kM=(e,t,n)=>TM(()=>new nw(t,e,n)),MM=kM(1,136,256/8);function KT(e,t){const n=t||"hex",r=MM(ku(e,{strict:!1})?fM(e):e);return n==="bytes"?r:k0(r)}class LM extends Map{constructor(t){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=t}get(t){const n=super.get(t);return super.has(t)&&n!==void 0&&(this.delete(t),super.set(t,n)),n}set(t,n){if(super.set(t,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}}const yy=new LM(8192);function jM(e,t){if(yy.has(`${e}.${t}`))return yy.get(`${e}.${t}`);const n=e.substring(2).toLowerCase(),r=KT(jT(n),"bytes"),s=n.split("");for(let c=0;c<40;c+=2)r[c>>1]>>4>=8&&s[c]&&(s[c]=s[c].toUpperCase()),(r[c>>1]&15)>=8&&s[c+1]&&(s[c+1]=s[c+1].toUpperCase());const a=`0x${s.join("")}`;return yy.set(`${e}.${t}`,a),a}function zM(e){const t=KT(`0x${e.substring(4)}`).substring(26);return jM(`0x${t}`)}async function qM({hash:e,signature:t}){const n=ku(e)?e:k0(e),{secp256k1:r}=await IT(async()=>{const{secp256k1:c}=await import("./secp256k1-bt5JpEPs.js");return{secp256k1:c}},[]);return`0x${(()=>{if(typeof t=="object"&&"r"in t&&"s"in t){const{r:h,s:p,v:m,yParity:y}=t,v=Number(y??m),w=b_(v);return new r.Signature(P0(h),P0(p)).addRecoveryBit(w)}const c=ku(t)?t:k0(t);if(B0(c)!==65)throw new Error("invalid signature length");const u=sM(`0x${c.slice(130)}`),d=b_(u);return r.Signature.fromCompact(c.substring(2,130)).addRecoveryBit(d)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function b_(e){if(e===0||e===1)return e;if(e===27)return 0;if(e===28)return 1;throw new Error("Invalid yParityOrV value")}async function HM({hash:e,signature:t}){return zM(await qM({hash:e,signature:t}))}function FM(e){if(e.length>=255)throw new TypeError("Alphabet too long");const t=new Uint8Array(256);for(let h=0;h<t.length;h++)t[h]=255;for(let h=0;h<e.length;h++){const p=e.charAt(h),m=p.charCodeAt(0);if(t[m]!==255)throw new TypeError(p+" is ambiguous");t[m]=h}const n=e.length,r=e.charAt(0),s=Math.log(n)/Math.log(256),a=Math.log(256)/Math.log(n);function c(h){if(h instanceof Uint8Array||(ArrayBuffer.isView(h)?h=new Uint8Array(h.buffer,h.byteOffset,h.byteLength):Array.isArray(h)&&(h=Uint8Array.from(h))),!(h instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(h.length===0)return"";let p=0,m=0,y=0;const v=h.length;for(;y!==v&&h[y]===0;)y++,p++;const w=(v-y)*a+1>>>0,E=new Uint8Array(w);for(;y!==v;){let I=h[y],D=0;for(let B=w-1;(I!==0||D<m)&&B!==-1;B--,D++)I+=256*E[B]>>>0,E[B]=I%n>>>0,I=I/n>>>0;if(I!==0)throw new Error("Non-zero carry");m=D,y++}let S=w-m;for(;S!==w&&E[S]===0;)S++;let A=r.repeat(p);for(;S<w;++S)A+=e.charAt(E[S]);return A}function u(h){if(typeof h!="string")throw new TypeError("Expected String");if(h.length===0)return new Uint8Array;let p=0,m=0,y=0;for(;h[p]===r;)m++,p++;const v=(h.length-p)*s+1>>>0,w=new Uint8Array(v);for(;p<h.length;){const I=h.charCodeAt(p);if(I>255)return;let D=t[I];if(D===255)return;let B=0;for(let $=v-1;(D!==0||B<y)&&$!==-1;$--,B++)D+=n*w[$]>>>0,w[$]=D%256>>>0,D=D/256>>>0;if(D!==0)throw new Error("Non-zero carry");y=B,p++}let E=v-y;for(;E!==v&&w[E]===0;)E++;const S=new Uint8Array(m+(v-E));let A=m;for(;E!==v;)S[A++]=w[E++];return S}function d(h){const p=u(h);if(p)return p;throw new Error("Non-base"+n+" character")}return{encode:c,decodeUnsafe:u,decode:d}}var VM="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const ef=FM(VM);function GM(e){const t=e.length;let n=0,r=0;for(;r<t;){let s=e.charCodeAt(r++);if((s&4294967168)===0){n++;continue}else if((s&4294965248)===0)n+=2;else{if(s>=55296&&s<=56319&&r<t){const a=e.charCodeAt(r);(a&64512)===56320&&(++r,s=((s&1023)<<10)+(a&1023)+65536)}(s&4294901760)===0?n+=3:n+=4}}return n}function KM(e,t,n){const r=e.length;let s=n,a=0;for(;a<r;){let c=e.charCodeAt(a++);if((c&4294967168)===0){t[s++]=c;continue}else if((c&4294965248)===0)t[s++]=c>>6&31|192;else{if(c>=55296&&c<=56319&&a<r){const u=e.charCodeAt(a);(u&64512)===56320&&(++a,c=((c&1023)<<10)+(u&1023)+65536)}(c&4294901760)===0?(t[s++]=c>>12&15|224,t[s++]=c>>6&63|128):(t[s++]=c>>18&7|240,t[s++]=c>>12&63|128,t[s++]=c>>6&63|128)}t[s++]=c&63|128}}const YM=new TextEncoder,WM=50;function XM(e,t,n){YM.encodeInto(e,t.subarray(n))}function ZM(e,t,n){e.length>WM?XM(e,t,n):KM(e,t,n)}const QM=4096;function YT(e,t,n){let r=t;const s=r+n,a=[];let c="";for(;r<s;){const u=e[r++];if((u&128)===0)a.push(u);else if((u&224)===192){const d=e[r++]&63;a.push((u&31)<<6|d)}else if((u&240)===224){const d=e[r++]&63,h=e[r++]&63;a.push((u&31)<<12|d<<6|h)}else if((u&248)===240){const d=e[r++]&63,h=e[r++]&63,p=e[r++]&63;let m=(u&7)<<18|d<<12|h<<6|p;m>65535&&(m-=65536,a.push(m>>>10&1023|55296),m=56320|m&1023),a.push(m)}else a.push(u);a.length>=QM&&(c+=String.fromCharCode(...a),a.length=0)}return a.length>0&&(c+=String.fromCharCode(...a)),c}const JM=new TextDecoder,eL=200;function tL(e,t,n){const r=e.subarray(t,t+n);return JM.decode(r)}function nL(e,t,n){return n>eL?tL(e,t,n):YT(e,t,n)}class Id{constructor(t,n){this.type=t,this.data=n}}class lr extends Error{constructor(t){super(t);const n=Object.create(lr.prototype);Object.setPrototypeOf(this,n),Object.defineProperty(this,"name",{configurable:!0,enumerable:!1,value:lr.name})}}const tu=4294967295;function rL(e,t,n){const r=n/4294967296,s=n;e.setUint32(t,r),e.setUint32(t+4,s)}function WT(e,t,n){const r=Math.floor(n/4294967296),s=n;e.setUint32(t,r),e.setUint32(t+4,s)}function XT(e,t){const n=e.getInt32(t),r=e.getUint32(t+4);return n*4294967296+r}function iL(e,t){const n=e.getUint32(t),r=e.getUint32(t+4);return n*4294967296+r}const sL=-1,oL=4294967296-1,aL=17179869184-1;function cL({sec:e,nsec:t}){if(e>=0&&t>=0&&e<=aL)if(t===0&&e<=oL){const n=new Uint8Array(4);return new DataView(n.buffer).setUint32(0,e),n}else{const n=e/4294967296,r=e&4294967295,s=new Uint8Array(8),a=new DataView(s.buffer);return a.setUint32(0,t<<2|n&3),a.setUint32(4,r),s}else{const n=new Uint8Array(12),r=new DataView(n.buffer);return r.setUint32(0,t),WT(r,4,e),n}}function lL(e){const t=e.getTime(),n=Math.floor(t/1e3),r=(t-n*1e3)*1e6,s=Math.floor(r/1e9);return{sec:n+s,nsec:r-s*1e9}}function uL(e){if(e instanceof Date){const t=lL(e);return cL(t)}else return null}function fL(e){const t=new DataView(e.buffer,e.byteOffset,e.byteLength);switch(e.byteLength){case 4:return{sec:t.getUint32(0),nsec:0};case 8:{const n=t.getUint32(0),r=t.getUint32(4),s=(n&3)*4294967296+r,a=n>>>2;return{sec:s,nsec:a}}case 12:{const n=XT(t,4),r=t.getUint32(0);return{sec:n,nsec:r}}default:throw new lr(`Unrecognized data size for timestamp (expected 4, 8, or 12): ${e.length}`)}}function dL(e){const t=fL(e);return new Date(t.sec*1e3+t.nsec/1e6)}const hL={type:sL,encode:uL,decode:dL};class Eh{constructor(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(hL)}register({type:t,encode:n,decode:r}){if(t>=0)this.encoders[t]=n,this.decoders[t]=r;else{const s=-1-t;this.builtInEncoders[s]=n,this.builtInDecoders[s]=r}}tryToEncode(t,n){for(let r=0;r<this.builtInEncoders.length;r++){const s=this.builtInEncoders[r];if(s!=null){const a=s(t,n);if(a!=null){const c=-1-r;return new Id(c,a)}}}for(let r=0;r<this.encoders.length;r++){const s=this.encoders[r];if(s!=null){const a=s(t,n);if(a!=null){const c=r;return new Id(c,a)}}}return t instanceof Id?t:null}decode(t,n,r){const s=n<0?this.builtInDecoders[-1-n]:this.decoders[n];return s?s(t,n,r):new Id(n,t)}}Eh.defaultCodec=new Eh;function pL(e){return e instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&e instanceof SharedArrayBuffer}function M0(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):pL(e)?new Uint8Array(e):Uint8Array.from(e)}const gL=100,mL=2048;let yL=class ZT{constructor(t){this.entered=!1,this.extensionCodec=t?.extensionCodec??Eh.defaultCodec,this.context=t?.context,this.useBigInt64=t?.useBigInt64??!1,this.maxDepth=t?.maxDepth??gL,this.initialBufferSize=t?.initialBufferSize??mL,this.sortKeys=t?.sortKeys??!1,this.forceFloat32=t?.forceFloat32??!1,this.ignoreUndefined=t?.ignoreUndefined??!1,this.forceIntegerToFloat=t?.forceIntegerToFloat??!1,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}clone(){return new ZT({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,maxDepth:this.maxDepth,initialBufferSize:this.initialBufferSize,sortKeys:this.sortKeys,forceFloat32:this.forceFloat32,ignoreUndefined:this.ignoreUndefined,forceIntegerToFloat:this.forceIntegerToFloat})}reinitializeState(){this.pos=0}encodeSharedRef(t){if(this.entered)return this.clone().encodeSharedRef(t);try{return this.entered=!0,this.reinitializeState(),this.doEncode(t,1),this.bytes.subarray(0,this.pos)}finally{this.entered=!1}}encode(t){if(this.entered)return this.clone().encode(t);try{return this.entered=!0,this.reinitializeState(),this.doEncode(t,1),this.bytes.slice(0,this.pos)}finally{this.entered=!1}}doEncode(t,n){if(n>this.maxDepth)throw new Error(`Too deep objects in depth ${n}`);t==null?this.encodeNil():typeof t=="boolean"?this.encodeBoolean(t):typeof t=="number"?this.forceIntegerToFloat?this.encodeNumberAsFloat(t):this.encodeNumber(t):typeof t=="string"?this.encodeString(t):this.useBigInt64&&typeof t=="bigint"?this.encodeBigInt64(t):this.encodeObject(t,n)}ensureBufferSizeToWrite(t){const n=this.pos+t;this.view.byteLength<n&&this.resizeBuffer(n*2)}resizeBuffer(t){const n=new ArrayBuffer(t),r=new Uint8Array(n),s=new DataView(n);r.set(this.bytes),this.view=s,this.bytes=r}encodeNil(){this.writeU8(192)}encodeBoolean(t){t===!1?this.writeU8(194):this.writeU8(195)}encodeNumber(t){!this.forceIntegerToFloat&&Number.isSafeInteger(t)?t>=0?t<128?this.writeU8(t):t<256?(this.writeU8(204),this.writeU8(t)):t<65536?(this.writeU8(205),this.writeU16(t)):t<4294967296?(this.writeU8(206),this.writeU32(t)):this.useBigInt64?this.encodeNumberAsFloat(t):(this.writeU8(207),this.writeU64(t)):t>=-32?this.writeU8(224|t+32):t>=-128?(this.writeU8(208),this.writeI8(t)):t>=-32768?(this.writeU8(209),this.writeI16(t)):t>=-2147483648?(this.writeU8(210),this.writeI32(t)):this.useBigInt64?this.encodeNumberAsFloat(t):(this.writeU8(211),this.writeI64(t)):this.encodeNumberAsFloat(t)}encodeNumberAsFloat(t){this.forceFloat32?(this.writeU8(202),this.writeF32(t)):(this.writeU8(203),this.writeF64(t))}encodeBigInt64(t){t>=BigInt(0)?(this.writeU8(207),this.writeBigUint64(t)):(this.writeU8(211),this.writeBigInt64(t))}writeStringHeader(t){if(t<32)this.writeU8(160+t);else if(t<256)this.writeU8(217),this.writeU8(t);else if(t<65536)this.writeU8(218),this.writeU16(t);else if(t<4294967296)this.writeU8(219),this.writeU32(t);else throw new Error(`Too long string: ${t} bytes in UTF-8`)}encodeString(t){const r=GM(t);this.ensureBufferSizeToWrite(5+r),this.writeStringHeader(r),ZM(t,this.bytes,this.pos),this.pos+=r}encodeObject(t,n){const r=this.extensionCodec.tryToEncode(t,this.context);if(r!=null)this.encodeExtension(r);else if(Array.isArray(t))this.encodeArray(t,n);else if(ArrayBuffer.isView(t))this.encodeBinary(t);else if(typeof t=="object")this.encodeMap(t,n);else throw new Error(`Unrecognized object: ${Object.prototype.toString.apply(t)}`)}encodeBinary(t){const n=t.byteLength;if(n<256)this.writeU8(196),this.writeU8(n);else if(n<65536)this.writeU8(197),this.writeU16(n);else if(n<4294967296)this.writeU8(198),this.writeU32(n);else throw new Error(`Too large binary: ${n}`);const r=M0(t);this.writeU8a(r)}encodeArray(t,n){const r=t.length;if(r<16)this.writeU8(144+r);else if(r<65536)this.writeU8(220),this.writeU16(r);else if(r<4294967296)this.writeU8(221),this.writeU32(r);else throw new Error(`Too large array: ${r}`);for(const s of t)this.doEncode(s,n+1)}countWithoutUndefined(t,n){let r=0;for(const s of n)t[s]!==void 0&&r++;return r}encodeMap(t,n){const r=Object.keys(t);this.sortKeys&&r.sort();const s=this.ignoreUndefined?this.countWithoutUndefined(t,r):r.length;if(s<16)this.writeU8(128+s);else if(s<65536)this.writeU8(222),this.writeU16(s);else if(s<4294967296)this.writeU8(223),this.writeU32(s);else throw new Error(`Too large map object: ${s}`);for(const a of r){const c=t[a];this.ignoreUndefined&&c===void 0||(this.encodeString(a),this.doEncode(c,n+1))}}encodeExtension(t){if(typeof t.data=="function"){const r=t.data(this.pos+6),s=r.length;if(s>=4294967296)throw new Error(`Too large extension object: ${s}`);this.writeU8(201),this.writeU32(s),this.writeI8(t.type),this.writeU8a(r);return}const n=t.data.length;if(n===1)this.writeU8(212);else if(n===2)this.writeU8(213);else if(n===4)this.writeU8(214);else if(n===8)this.writeU8(215);else if(n===16)this.writeU8(216);else if(n<256)this.writeU8(199),this.writeU8(n);else if(n<65536)this.writeU8(200),this.writeU16(n);else if(n<4294967296)this.writeU8(201),this.writeU32(n);else throw new Error(`Too large extension object: ${n}`);this.writeI8(t.type),this.writeU8a(t.data)}writeU8(t){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,t),this.pos++}writeU8a(t){const n=t.length;this.ensureBufferSizeToWrite(n),this.bytes.set(t,this.pos),this.pos+=n}writeI8(t){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,t),this.pos++}writeU16(t){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,t),this.pos+=2}writeI16(t){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,t),this.pos+=2}writeU32(t){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,t),this.pos+=4}writeI32(t){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,t),this.pos+=4}writeF32(t){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,t),this.pos+=4}writeF64(t){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,t),this.pos+=8}writeU64(t){this.ensureBufferSizeToWrite(8),rL(this.view,this.pos,t),this.pos+=8}writeI64(t){this.ensureBufferSizeToWrite(8),WT(this.view,this.pos,t),this.pos+=8}writeBigUint64(t){this.ensureBufferSizeToWrite(8),this.view.setBigUint64(this.pos,t),this.pos+=8}writeBigInt64(t){this.ensureBufferSizeToWrite(8),this.view.setBigInt64(this.pos,t),this.pos+=8}};function bL(e,t){return new yL(t).encodeSharedRef(e)}function by(e){return`${e<0?"-":""}0x${Math.abs(e).toString(16).padStart(2,"0")}`}const wL=16,vL=16;class EL{constructor(t=wL,n=vL){this.hit=0,this.miss=0,this.maxKeyLength=t,this.maxLengthPerKey=n,this.caches=[];for(let r=0;r<this.maxKeyLength;r++)this.caches.push([])}canBeCached(t){return t>0&&t<=this.maxKeyLength}find(t,n,r){const s=this.caches[r-1];e:for(const a of s){const c=a.bytes;for(let u=0;u<r;u++)if(c[u]!==t[n+u])continue e;return a.str}return null}store(t,n){const r=this.caches[t.length-1],s={bytes:t,str:n};r.length>=this.maxLengthPerKey?r[Math.random()*r.length|0]=s:r.push(s)}decode(t,n,r){const s=this.find(t,n,r);if(s!=null)return this.hit++,s;this.miss++;const a=YT(t,n,r),c=Uint8Array.prototype.slice.call(t,n,n+r);return this.store(c,a),a}}const L0="array",Eu="map_key",QT="map_value",SL=e=>{if(typeof e=="string"||typeof e=="number")return e;throw new lr("The type of key must be string or number but "+typeof e)};class _L{constructor(){this.stack=[],this.stackHeadPosition=-1}get length(){return this.stackHeadPosition+1}top(){return this.stack[this.stackHeadPosition]}pushArrayState(t){const n=this.getUninitializedStateFromPool();n.type=L0,n.position=0,n.size=t,n.array=new Array(t)}pushMapState(t){const n=this.getUninitializedStateFromPool();n.type=Eu,n.readCount=0,n.size=t,n.map={}}getUninitializedStateFromPool(){if(this.stackHeadPosition++,this.stackHeadPosition===this.stack.length){const t={type:void 0,size:0,array:void 0,position:0,readCount:0,map:void 0,key:null};this.stack.push(t)}return this.stack[this.stackHeadPosition]}release(t){if(this.stack[this.stackHeadPosition]!==t)throw new Error("Invalid stack state. Released state is not on top of the stack.");if(t.type===L0){const r=t;r.size=0,r.array=void 0,r.position=0,r.type=void 0}if(t.type===Eu||t.type===QT){const r=t;r.size=0,r.map=void 0,r.readCount=0,r.type=void 0}this.stackHeadPosition--}reset(){this.stack.length=0,this.stackHeadPosition=-1}}const nu=-1,rw=new DataView(new ArrayBuffer(0)),AL=new Uint8Array(rw.buffer);try{rw.getInt8(0)}catch(e){if(!(e instanceof RangeError))throw new Error("This module is not supported in the current JavaScript engine because DataView does not throw RangeError on out-of-bounds access")}const w_=new RangeError("Insufficient data"),xL=new EL;let RL=class JT{constructor(t){this.totalPos=0,this.pos=0,this.view=rw,this.bytes=AL,this.headByte=nu,this.stack=new _L,this.entered=!1,this.extensionCodec=t?.extensionCodec??Eh.defaultCodec,this.context=t?.context,this.useBigInt64=t?.useBigInt64??!1,this.rawStrings=t?.rawStrings??!1,this.maxStrLength=t?.maxStrLength??tu,this.maxBinLength=t?.maxBinLength??tu,this.maxArrayLength=t?.maxArrayLength??tu,this.maxMapLength=t?.maxMapLength??tu,this.maxExtLength=t?.maxExtLength??tu,this.keyDecoder=t?.keyDecoder!==void 0?t.keyDecoder:xL,this.mapKeyConverter=t?.mapKeyConverter??SL}clone(){return new JT({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,rawStrings:this.rawStrings,maxStrLength:this.maxStrLength,maxBinLength:this.maxBinLength,maxArrayLength:this.maxArrayLength,maxMapLength:this.maxMapLength,maxExtLength:this.maxExtLength,keyDecoder:this.keyDecoder})}reinitializeState(){this.totalPos=0,this.headByte=nu,this.stack.reset()}setBuffer(t){const n=M0(t);this.bytes=n,this.view=new DataView(n.buffer,n.byteOffset,n.byteLength),this.pos=0}appendBuffer(t){if(this.headByte===nu&&!this.hasRemaining(1))this.setBuffer(t);else{const n=this.bytes.subarray(this.pos),r=M0(t),s=new Uint8Array(n.length+r.length);s.set(n),s.set(r,n.length),this.setBuffer(s)}}hasRemaining(t){return this.view.byteLength-this.pos>=t}createExtraByteError(t){const{view:n,pos:r}=this;return new RangeError(`Extra ${n.byteLength-r} of ${n.byteLength} byte(s) found at buffer[${t}]`)}decode(t){if(this.entered)return this.clone().decode(t);try{this.entered=!0,this.reinitializeState(),this.setBuffer(t);const n=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return n}finally{this.entered=!1}}*decodeMulti(t){if(this.entered){yield*this.clone().decodeMulti(t);return}try{for(this.entered=!0,this.reinitializeState(),this.setBuffer(t);this.hasRemaining(1);)yield this.doDecodeSync()}finally{this.entered=!1}}async decodeAsync(t){if(this.entered)return this.clone().decodeAsync(t);try{this.entered=!0;let n=!1,r;for await(const u of t){if(n)throw this.entered=!1,this.createExtraByteError(this.totalPos);this.appendBuffer(u);try{r=this.doDecodeSync(),n=!0}catch(d){if(!(d instanceof RangeError))throw d}this.totalPos+=this.pos}if(n){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return r}const{headByte:s,pos:a,totalPos:c}=this;throw new RangeError(`Insufficient data in parsing ${by(s)} at ${c} (${a} in the current buffer)`)}finally{this.entered=!1}}decodeArrayStream(t){return this.decodeMultiAsync(t,!0)}decodeStream(t){return this.decodeMultiAsync(t,!1)}async*decodeMultiAsync(t,n){if(this.entered){yield*this.clone().decodeMultiAsync(t,n);return}try{this.entered=!0;let r=n,s=-1;for await(const a of t){if(n&&s===0)throw this.createExtraByteError(this.totalPos);this.appendBuffer(a),r&&(s=this.readArraySize(),r=!1,this.complete());try{for(;yield this.doDecodeSync(),--s!==0;);}catch(c){if(!(c instanceof RangeError))throw c}this.totalPos+=this.pos}}finally{this.entered=!1}}doDecodeSync(){e:for(;;){const t=this.readHeadByte();let n;if(t>=224)n=t-256;else if(t<192)if(t<128)n=t;else if(t<144){const s=t-128;if(s!==0){this.pushMapState(s),this.complete();continue e}else n={}}else if(t<160){const s=t-144;if(s!==0){this.pushArrayState(s),this.complete();continue e}else n=[]}else{const s=t-160;n=this.decodeString(s,0)}else if(t===192)n=null;else if(t===194)n=!1;else if(t===195)n=!0;else if(t===202)n=this.readF32();else if(t===203)n=this.readF64();else if(t===204)n=this.readU8();else if(t===205)n=this.readU16();else if(t===206)n=this.readU32();else if(t===207)this.useBigInt64?n=this.readU64AsBigInt():n=this.readU64();else if(t===208)n=this.readI8();else if(t===209)n=this.readI16();else if(t===210)n=this.readI32();else if(t===211)this.useBigInt64?n=this.readI64AsBigInt():n=this.readI64();else if(t===217){const s=this.lookU8();n=this.decodeString(s,1)}else if(t===218){const s=this.lookU16();n=this.decodeString(s,2)}else if(t===219){const s=this.lookU32();n=this.decodeString(s,4)}else if(t===220){const s=this.readU16();if(s!==0){this.pushArrayState(s),this.complete();continue e}else n=[]}else if(t===221){const s=this.readU32();if(s!==0){this.pushArrayState(s),this.complete();continue e}else n=[]}else if(t===222){const s=this.readU16();if(s!==0){this.pushMapState(s),this.complete();continue e}else n={}}else if(t===223){const s=this.readU32();if(s!==0){this.pushMapState(s),this.complete();continue e}else n={}}else if(t===196){const s=this.lookU8();n=this.decodeBinary(s,1)}else if(t===197){const s=this.lookU16();n=this.decodeBinary(s,2)}else if(t===198){const s=this.lookU32();n=this.decodeBinary(s,4)}else if(t===212)n=this.decodeExtension(1,0);else if(t===213)n=this.decodeExtension(2,0);else if(t===214)n=this.decodeExtension(4,0);else if(t===215)n=this.decodeExtension(8,0);else if(t===216)n=this.decodeExtension(16,0);else if(t===199){const s=this.lookU8();n=this.decodeExtension(s,1)}else if(t===200){const s=this.lookU16();n=this.decodeExtension(s,2)}else if(t===201){const s=this.lookU32();n=this.decodeExtension(s,4)}else throw new lr(`Unrecognized type byte: ${by(t)}`);this.complete();const r=this.stack;for(;r.length>0;){const s=r.top();if(s.type===L0)if(s.array[s.position]=n,s.position++,s.position===s.size)n=s.array,r.release(s);else continue e;else if(s.type===Eu){if(n==="__proto__")throw new lr("The key __proto__ is not allowed");s.key=this.mapKeyConverter(n),s.type=QT;continue e}else if(s.map[s.key]=n,s.readCount++,s.readCount===s.size)n=s.map,r.release(s);else{s.key=null,s.type=Eu;continue e}}return n}}readHeadByte(){return this.headByte===nu&&(this.headByte=this.readU8()),this.headByte}complete(){this.headByte=nu}readArraySize(){const t=this.readHeadByte();switch(t){case 220:return this.readU16();case 221:return this.readU32();default:{if(t<160)return t-144;throw new lr(`Unrecognized array type byte: ${by(t)}`)}}}pushMapState(t){if(t>this.maxMapLength)throw new lr(`Max length exceeded: map length (${t}) > maxMapLengthLength (${this.maxMapLength})`);this.stack.pushMapState(t)}pushArrayState(t){if(t>this.maxArrayLength)throw new lr(`Max length exceeded: array length (${t}) > maxArrayLength (${this.maxArrayLength})`);this.stack.pushArrayState(t)}decodeString(t,n){return!this.rawStrings||this.stateIsMapKey()?this.decodeUtf8String(t,n):this.decodeBinary(t,n)}decodeUtf8String(t,n){if(t>this.maxStrLength)throw new lr(`Max length exceeded: UTF-8 byte length (${t}) > maxStrLength (${this.maxStrLength})`);if(this.bytes.byteLength<this.pos+n+t)throw w_;const r=this.pos+n;let s;return this.stateIsMapKey()&&this.keyDecoder?.canBeCached(t)?s=this.keyDecoder.decode(this.bytes,r,t):s=nL(this.bytes,r,t),this.pos+=n+t,s}stateIsMapKey(){return this.stack.length>0?this.stack.top().type===Eu:!1}decodeBinary(t,n){if(t>this.maxBinLength)throw new lr(`Max length exceeded: bin length (${t}) > maxBinLength (${this.maxBinLength})`);if(!this.hasRemaining(t+n))throw w_;const r=this.pos+n,s=this.bytes.subarray(r,r+t);return this.pos+=n+t,s}decodeExtension(t,n){if(t>this.maxExtLength)throw new lr(`Max length exceeded: ext length (${t}) > maxExtLength (${this.maxExtLength})`);const r=this.view.getInt8(this.pos+n),s=this.decodeBinary(t,n+1);return this.extensionCodec.decode(s,r,this.context)}lookU8(){return this.view.getUint8(this.pos)}lookU16(){return this.view.getUint16(this.pos)}lookU32(){return this.view.getUint32(this.pos)}readU8(){const t=this.view.getUint8(this.pos);return this.pos++,t}readI8(){const t=this.view.getInt8(this.pos);return this.pos++,t}readU16(){const t=this.view.getUint16(this.pos);return this.pos+=2,t}readI16(){const t=this.view.getInt16(this.pos);return this.pos+=2,t}readU32(){const t=this.view.getUint32(this.pos);return this.pos+=4,t}readI32(){const t=this.view.getInt32(this.pos);return this.pos+=4,t}readU64(){const t=iL(this.view,this.pos);return this.pos+=8,t}readI64(){const t=XT(this.view,this.pos);return this.pos+=8,t}readU64AsBigInt(){const t=this.view.getBigUint64(this.pos);return this.pos+=8,t}readI64AsBigInt(){const t=this.view.getBigInt64(this.pos);return this.pos+=8,t}readF32(){const t=this.view.getFloat32(this.pos);return this.pos+=4,t}readF64(){const t=this.view.getFloat64(this.pos);return this.pos+=8,t}};function OL(e,t){return new RL(t).decode(e)}/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */function TL(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function e3(e,t){return Array.isArray(t)?t.length===0?!0:e?t.every(n=>typeof n=="string"):t.every(n=>Number.isSafeInteger(n)):!1}function Sh(e,t){if(typeof t!="string")throw new Error(`${e}: string expected`);return!0}function iw(e){if(!Number.isSafeInteger(e))throw new Error(`invalid integer: ${e}`)}function j0(e){if(!Array.isArray(e))throw new Error("array expected")}function _h(e,t){if(!e3(!0,t))throw new Error(`${e}: array of strings expected`)}function DL(e,t){if(!e3(!1,t))throw new Error(`${e}: array of numbers expected`)}function IL(...e){const t=a=>a,n=(a,c)=>u=>a(c(u)),r=e.map(a=>a.encode).reduceRight(n,t),s=e.map(a=>a.decode).reduce(n,t);return{encode:r,decode:s}}function CL(e){const t=typeof e=="string"?e.split(""):e,n=t.length;_h("alphabet",t);const r=new Map(t.map((s,a)=>[s,a]));return{encode:s=>(j0(s),s.map(a=>{if(!Number.isSafeInteger(a)||a<0||a>=n)throw new Error(`alphabet.encode: digit index outside alphabet "${a}". Allowed: ${e}`);return t[a]})),decode:s=>(j0(s),s.map(a=>{Sh("alphabet.decode",a);const c=r.get(a);if(c===void 0)throw new Error(`Unknown letter: "${a}". Allowed: ${e}`);return c}))}}function NL(e=""){return Sh("join",e),{encode:t=>(_h("join.decode",t),t.join(e)),decode:t=>(Sh("join.decode",t),t.split(e))}}function $L(e,t="="){return iw(e),Sh("padding",t),{encode(n){for(_h("padding.encode",n);n.length*e%8;)n.push(t);return n},decode(n){_h("padding.decode",n);let r=n.length;if(r*e%8)throw new Error("padding: invalid, string should have whole number of bytes");for(;r>0&&n[r-1]===t;r--)if((r-1)*e%8===0)throw new Error("padding: invalid, string has too much padding");return n.slice(0,r)}}}const t3=(e,t)=>t===0?e:t3(t,e%t),Ah=(e,t)=>e+(t-t3(e,t)),wy=(()=>{let e=[];for(let t=0;t<40;t++)e.push(2**t);return e})();function v_(e,t,n,r){if(j0(e),t<=0||t>32)throw new Error(`convertRadix2: wrong from=${t}`);if(n<=0||n>32)throw new Error(`convertRadix2: wrong to=${n}`);if(Ah(t,n)>32)throw new Error(`convertRadix2: carry overflow from=${t} to=${n} carryBits=${Ah(t,n)}`);let s=0,a=0;const c=wy[t],u=wy[n]-1,d=[];for(const h of e){if(iw(h),h>=c)throw new Error(`convertRadix2: invalid data word=${h} from=${t}`);if(s=s<<t|h,a+t>32)throw new Error(`convertRadix2: carry overflow pos=${a} from=${t}`);for(a+=t;a>=n;a-=n)d.push((s>>a-n&u)>>>0);const p=wy[a];if(p===void 0)throw new Error("invalid carry");s&=p-1}if(s=s<<n-a&u,!r&&a>=t)throw new Error("Excess padding");if(!r&&s>0)throw new Error(`Non-zero padding: ${s}`);return r&&a>0&&d.push(s>>>0),d}function UL(e,t=!1){if(iw(e),e<=0||e>32)throw new Error("radix2: bits should be in (0..32]");if(Ah(8,e)>32||Ah(e,8)>32)throw new Error("radix2: carry overflow");return{encode:n=>{if(!TL(n))throw new Error("radix2.encode input should be Uint8Array");return v_(Array.from(n),8,e,!t)},decode:n=>(DL("radix2.decode",n),Uint8Array.from(v_(n,e,8,t)))}}const BL=IL(UL(5),CL("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),$L(5),NL("")),PL=e=>JSON.stringify(e,(t,n)=>typeof n=="bigint"?n.toString()+"n":n),kL=e=>{const t=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,n=e.replace(t,'$1"$2n"$3');return JSON.parse(n,(r,s)=>typeof s=="string"&&s.match(/^\d+n$/)?BigInt(s.substring(0,s.length-1)):s)};function Yo(e){if(typeof e!="string")throw new Error(`Cannot safe json parse value of type ${typeof e}`);try{return kL(e)}catch{return e}}function ss(e){return typeof e=="string"?e:PL(e)||""}function ML(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function n3(e,...t){if(!ML(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function E_(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function LL(e,t){n3(e);const n=t.outputLen;if(e.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const ec=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const vy=e=>new DataView(e.buffer,e.byteOffset,e.byteLength);function jL(e){if(typeof e!="string")throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array(new TextEncoder().encode(e))}function r3(e){return typeof e=="string"&&(e=jL(e)),n3(e),e}let zL=class{clone(){return this._cloneInto()}};function qL(e){const t=r=>e().update(r3(r)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function i3(e=32){if(ec&&typeof ec.getRandomValues=="function")return ec.getRandomValues(new Uint8Array(e));if(ec&&typeof ec.randomBytes=="function")return ec.randomBytes(e);throw new Error("crypto.getRandomValues must be defined")}function HL(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const s=BigInt(32),a=BigInt(4294967295),c=Number(n>>s&a),u=Number(n&a),d=r?4:0,h=r?0:4;e.setUint32(t+d,c,r),e.setUint32(t+h,u,r)}let FL=class extends zL{constructor(t,n,r,s){super(),this.blockLen=t,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=vy(this.buffer)}update(t){E_(this);const{view:n,buffer:r,blockLen:s}=this;t=r3(t);const a=t.length;for(let c=0;c<a;){const u=Math.min(s-this.pos,a-c);if(u===s){const d=vy(t);for(;s<=a-c;c+=s)this.process(d,c);continue}r.set(t.subarray(c,c+u),this.pos),this.pos+=u,c+=u,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){E_(this),LL(t,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:a}=this;let{pos:c}=this;n[c++]=128,this.buffer.subarray(c).fill(0),this.padOffset>s-c&&(this.process(r,0),c=0);for(let m=c;m<s;m++)n[m]=0;HL(r,s-8,BigInt(this.length*8),a),this.process(r,0);const u=vy(t),d=this.outputLen;if(d%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const h=d/4,p=this.get();if(h>p.length)throw new Error("_sha2: outputLen bigger than state");for(let m=0;m<h;m++)u.setUint32(4*m,p[m],a)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:a,destroyed:c,pos:u}=this;return t.length=s,t.pos=u,t.finished=a,t.destroyed=c,s%n&&t.buffer.set(r),t}};const Cd=BigInt(2**32-1),z0=BigInt(32);function s3(e,t=!1){return t?{h:Number(e&Cd),l:Number(e>>z0&Cd)}:{h:Number(e>>z0&Cd)|0,l:Number(e&Cd)|0}}function VL(e,t=!1){let n=new Uint32Array(e.length),r=new Uint32Array(e.length);for(let s=0;s<e.length;s++){const{h:a,l:c}=s3(e[s],t);[n[s],r[s]]=[a,c]}return[n,r]}const GL=(e,t)=>BigInt(e>>>0)<<z0|BigInt(t>>>0),KL=(e,t,n)=>e>>>n,YL=(e,t,n)=>e<<32-n|t>>>n,WL=(e,t,n)=>e>>>n|t<<32-n,XL=(e,t,n)=>e<<32-n|t>>>n,ZL=(e,t,n)=>e<<64-n|t>>>n-32,QL=(e,t,n)=>e>>>n-32|t<<64-n,JL=(e,t)=>t,ej=(e,t)=>e,tj=(e,t,n)=>e<<n|t>>>32-n,nj=(e,t,n)=>t<<n|e>>>32-n,rj=(e,t,n)=>t<<n-32|e>>>64-n,ij=(e,t,n)=>e<<n-32|t>>>64-n;function sj(e,t,n,r){const s=(t>>>0)+(r>>>0);return{h:e+n+(s/2**32|0)|0,l:s|0}}const oj=(e,t,n)=>(e>>>0)+(t>>>0)+(n>>>0),aj=(e,t,n,r)=>t+n+r+(e/2**32|0)|0,cj=(e,t,n,r)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0),lj=(e,t,n,r,s)=>t+n+r+s+(e/2**32|0)|0,uj=(e,t,n,r,s)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0)+(s>>>0),fj=(e,t,n,r,s,a)=>t+n+r+s+a+(e/2**32|0)|0,$e={fromBig:s3,split:VL,toBig:GL,shrSH:KL,shrSL:YL,rotrSH:WL,rotrSL:XL,rotrBH:ZL,rotrBL:QL,rotr32H:JL,rotr32L:ej,rotlSH:tj,rotlSL:nj,rotlBH:rj,rotlBL:ij,add:sj,add3L:oj,add3H:aj,add4L:cj,add4H:lj,add5H:fj,add5L:uj},[dj,hj]=$e.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),$s=new Uint32Array(80),Us=new Uint32Array(80);let pj=class extends FL{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:t,Al:n,Bh:r,Bl:s,Ch:a,Cl:c,Dh:u,Dl:d,Eh:h,El:p,Fh:m,Fl:y,Gh:v,Gl:w,Hh:E,Hl:S}=this;return[t,n,r,s,a,c,u,d,h,p,m,y,v,w,E,S]}set(t,n,r,s,a,c,u,d,h,p,m,y,v,w,E,S){this.Ah=t|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=a|0,this.Cl=c|0,this.Dh=u|0,this.Dl=d|0,this.Eh=h|0,this.El=p|0,this.Fh=m|0,this.Fl=y|0,this.Gh=v|0,this.Gl=w|0,this.Hh=E|0,this.Hl=S|0}process(t,n){for(let D=0;D<16;D++,n+=4)$s[D]=t.getUint32(n),Us[D]=t.getUint32(n+=4);for(let D=16;D<80;D++){const B=$s[D-15]|0,$=Us[D-15]|0,N=$e.rotrSH(B,$,1)^$e.rotrSH(B,$,8)^$e.shrSH(B,$,7),q=$e.rotrSL(B,$,1)^$e.rotrSL(B,$,8)^$e.shrSL(B,$,7),H=$s[D-2]|0,k=Us[D-2]|0,K=$e.rotrSH(H,k,19)^$e.rotrBH(H,k,61)^$e.shrSH(H,k,6),Y=$e.rotrSL(H,k,19)^$e.rotrBL(H,k,61)^$e.shrSL(H,k,6),W=$e.add4L(q,Y,Us[D-7],Us[D-16]),le=$e.add4H(W,N,K,$s[D-7],$s[D-16]);$s[D]=le|0,Us[D]=W|0}let{Ah:r,Al:s,Bh:a,Bl:c,Ch:u,Cl:d,Dh:h,Dl:p,Eh:m,El:y,Fh:v,Fl:w,Gh:E,Gl:S,Hh:A,Hl:I}=this;for(let D=0;D<80;D++){const B=$e.rotrSH(m,y,14)^$e.rotrSH(m,y,18)^$e.rotrBH(m,y,41),$=$e.rotrSL(m,y,14)^$e.rotrSL(m,y,18)^$e.rotrBL(m,y,41),N=m&v^~m&E,q=y&w^~y&S,H=$e.add5L(I,$,q,hj[D],Us[D]),k=$e.add5H(H,A,B,N,dj[D],$s[D]),K=H|0,Y=$e.rotrSH(r,s,28)^$e.rotrBH(r,s,34)^$e.rotrBH(r,s,39),W=$e.rotrSL(r,s,28)^$e.rotrBL(r,s,34)^$e.rotrBL(r,s,39),le=r&a^r&u^a&u,re=s&c^s&d^c&d;A=E|0,I=S|0,E=v|0,S=w|0,v=m|0,w=y|0,{h:m,l:y}=$e.add(h|0,p|0,k|0,K|0),h=u|0,p=d|0,u=a|0,d=c|0,a=r|0,c=s|0;const O=$e.add3L(K,W,re);r=$e.add3H(O,k,Y,le),s=O|0}({h:r,l:s}=$e.add(this.Ah|0,this.Al|0,r|0,s|0)),{h:a,l:c}=$e.add(this.Bh|0,this.Bl|0,a|0,c|0),{h:u,l:d}=$e.add(this.Ch|0,this.Cl|0,u|0,d|0),{h,l:p}=$e.add(this.Dh|0,this.Dl|0,h|0,p|0),{h:m,l:y}=$e.add(this.Eh|0,this.El|0,m|0,y|0),{h:v,l:w}=$e.add(this.Fh|0,this.Fl|0,v|0,w|0),{h:E,l:S}=$e.add(this.Gh|0,this.Gl|0,E|0,S|0),{h:A,l:I}=$e.add(this.Hh|0,this.Hl|0,A|0,I|0),this.set(r,s,a,c,u,d,h,p,m,y,v,w,E,S,A,I)}roundClean(){$s.fill(0),Us.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};const gj=qL(()=>new pj);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const sw=BigInt(0),o3=BigInt(1),mj=BigInt(2);function ow(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function aw(e){if(!ow(e))throw new Error("Uint8Array expected")}function Ey(e,t){if(typeof t!="boolean")throw new Error(e+" boolean expected, got "+t)}const yj=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function cw(e){aw(e);let t="";for(let n=0;n<e.length;n++)t+=yj[e[n]];return t}function a3(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return e===""?sw:BigInt("0x"+e)}const Li={_0:48,_9:57,A:65,F:70,a:97,f:102};function S_(e){if(e>=Li._0&&e<=Li._9)return e-Li._0;if(e>=Li.A&&e<=Li.F)return e-(Li.A-10);if(e>=Li.a&&e<=Li.f)return e-(Li.a-10)}function c3(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);const t=e.length,n=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(n);for(let s=0,a=0;s<n;s++,a+=2){const c=S_(e.charCodeAt(a)),u=S_(e.charCodeAt(a+1));if(c===void 0||u===void 0){const d=e[a]+e[a+1];throw new Error('hex string expected, got non-hex character "'+d+'" at index '+a)}r[s]=c*16+u}return r}function bj(e){return a3(cw(e))}function oh(e){return aw(e),a3(cw(Uint8Array.from(e).reverse()))}function l3(e,t){return c3(e.toString(16).padStart(t*2,"0"))}function q0(e,t){return l3(e,t).reverse()}function ji(e,t,n){let r;if(typeof t=="string")try{r=c3(t)}catch(a){throw new Error(e+" must be hex string or Uint8Array, cause: "+a)}else if(ow(t))r=Uint8Array.from(t);else throw new Error(e+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(e+" of length "+n+" expected, got "+s);return r}function __(...e){let t=0;for(let r=0;r<e.length;r++){const s=e[r];aw(s),t+=s.length}const n=new Uint8Array(t);for(let r=0,s=0;r<e.length;r++){const a=e[r];n.set(a,s),s+=a.length}return n}const Sy=e=>typeof e=="bigint"&&sw<=e;function wj(e,t,n){return Sy(e)&&Sy(t)&&Sy(n)&&t<=e&&e<n}function ru(e,t,n,r){if(!wj(t,n,r))throw new Error("expected valid "+e+": "+n+" <= n < "+r+", got "+t)}function vj(e){let t;for(t=0;e>sw;e>>=o3,t+=1);return t}const Ej=e=>(mj<<BigInt(e-1))-o3,Sj={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",stringOrUint8Array:e=>typeof e=="string"||ow(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function lw(e,t,n={}){const r=(s,a,c)=>{const u=Sj[a];if(typeof u!="function")throw new Error("invalid validator function");const d=e[s];if(!(c&&d===void 0)&&!u(d,e))throw new Error("param "+String(s)+" is invalid. Expected "+a+", got "+d)};for(const[s,a]of Object.entries(t))r(s,a,!1);for(const[s,a]of Object.entries(n))r(s,a,!0);return e}function A_(e){const t=new WeakMap;return(n,...r)=>{const s=t.get(n);if(s!==void 0)return s;const a=e(n,...r);return t.set(n,a),a}}const rn=BigInt(0),Nt=BigInt(1),Uo=BigInt(2),_j=BigInt(3),H0=BigInt(4),x_=BigInt(5),R_=BigInt(8);function Kt(e,t){const n=e%t;return n>=rn?n:t+n}function Aj(e,t,n){if(t<rn)throw new Error("invalid exponent, negatives unsupported");if(n<=rn)throw new Error("invalid modulus");if(n===Nt)return rn;let r=Nt;for(;t>rn;)t&Nt&&(r=r*e%n),e=e*e%n,t>>=Nt;return r}function ni(e,t,n){let r=e;for(;t-- >rn;)r*=r,r%=n;return r}function O_(e,t){if(e===rn)throw new Error("invert: expected non-zero number");if(t<=rn)throw new Error("invert: expected positive modulus, got "+t);let n=Kt(e,t),r=t,s=rn,a=Nt;for(;n!==rn;){const c=r/n,u=r%n,d=s-a*c;r=n,n=u,s=a,a=d}if(r!==Nt)throw new Error("invert: does not exist");return Kt(s,t)}function xj(e){const t=(e-Nt)/Uo;let n,r,s;for(n=e-Nt,r=0;n%Uo===rn;n/=Uo,r++);for(s=Uo;s<e&&Aj(s,t,e)!==e-Nt;s++)if(s>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const c=(e+Nt)/H0;return function(u,d){const h=u.pow(d,c);if(!u.eql(u.sqr(h),d))throw new Error("Cannot find square root");return h}}const a=(n+Nt)/Uo;return function(c,u){if(c.pow(u,t)===c.neg(c.ONE))throw new Error("Cannot find square root");let d=r,h=c.pow(c.mul(c.ONE,s),n),p=c.pow(u,a),m=c.pow(u,n);for(;!c.eql(m,c.ONE);){if(c.eql(m,c.ZERO))return c.ZERO;let y=1;for(let w=c.sqr(m);y<d&&!c.eql(w,c.ONE);y++)w=c.sqr(w);const v=c.pow(h,Nt<<BigInt(d-y-1));h=c.sqr(v),p=c.mul(p,v),m=c.mul(m,h),d=y}return p}}function Rj(e){if(e%H0===_j){const t=(e+Nt)/H0;return function(n,r){const s=n.pow(r,t);if(!n.eql(n.sqr(s),r))throw new Error("Cannot find square root");return s}}if(e%R_===x_){const t=(e-x_)/R_;return function(n,r){const s=n.mul(r,Uo),a=n.pow(s,t),c=n.mul(r,a),u=n.mul(n.mul(c,Uo),a),d=n.mul(c,n.sub(u,n.ONE));if(!n.eql(n.sqr(d),r))throw new Error("Cannot find square root");return d}}return xj(e)}const Oj=(e,t)=>(Kt(e,t)&Nt)===Nt,Tj=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Dj(e){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=Tj.reduce((r,s)=>(r[s]="function",r),t);return lw(e,n)}function Ij(e,t,n){if(n<rn)throw new Error("invalid exponent, negatives unsupported");if(n===rn)return e.ONE;if(n===Nt)return t;let r=e.ONE,s=t;for(;n>rn;)n&Nt&&(r=e.mul(r,s)),s=e.sqr(s),n>>=Nt;return r}function Cj(e,t){const n=new Array(t.length),r=t.reduce((a,c,u)=>e.is0(c)?a:(n[u]=a,e.mul(a,c)),e.ONE),s=e.inv(r);return t.reduceRight((a,c,u)=>e.is0(c)?a:(n[u]=e.mul(a,n[u]),e.mul(a,c)),s),n}function u3(e,t){const n=t!==void 0?t:e.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function f3(e,t,n=!1,r={}){if(e<=rn)throw new Error("invalid field: expected ORDER > 0, got "+e);const{nBitLength:s,nByteLength:a}=u3(e,t);if(a>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let c;const u=Object.freeze({ORDER:e,isLE:n,BITS:s,BYTES:a,MASK:Ej(s),ZERO:rn,ONE:Nt,create:d=>Kt(d,e),isValid:d=>{if(typeof d!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof d);return rn<=d&&d<e},is0:d=>d===rn,isOdd:d=>(d&Nt)===Nt,neg:d=>Kt(-d,e),eql:(d,h)=>d===h,sqr:d=>Kt(d*d,e),add:(d,h)=>Kt(d+h,e),sub:(d,h)=>Kt(d-h,e),mul:(d,h)=>Kt(d*h,e),pow:(d,h)=>Ij(u,d,h),div:(d,h)=>Kt(d*O_(h,e),e),sqrN:d=>d*d,addN:(d,h)=>d+h,subN:(d,h)=>d-h,mulN:(d,h)=>d*h,inv:d=>O_(d,e),sqrt:r.sqrt||(d=>(c||(c=Rj(e)),c(u,d))),invertBatch:d=>Cj(u,d),cmov:(d,h,p)=>p?h:d,toBytes:d=>n?q0(d,a):l3(d,a),fromBytes:d=>{if(d.length!==a)throw new Error("Field.fromBytes: expected "+a+" bytes, got "+d.length);return n?oh(d):bj(d)}});return Object.freeze(u)}const T_=BigInt(0),Nd=BigInt(1);function _y(e,t){const n=t.negate();return e?n:t}function d3(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+e)}function Ay(e,t){d3(e,t);const n=Math.ceil(t/e)+1,r=2**(e-1);return{windows:n,windowSize:r}}function Nj(e,t){if(!Array.isArray(e))throw new Error("array expected");e.forEach((n,r)=>{if(!(n instanceof t))throw new Error("invalid point at index "+r)})}function $j(e,t){if(!Array.isArray(e))throw new Error("array of scalars expected");e.forEach((n,r)=>{if(!t.isValid(n))throw new Error("invalid scalar at index "+r)})}const xy=new WeakMap,h3=new WeakMap;function Ry(e){return h3.get(e)||1}function Uj(e,t){return{constTimeNegate:_y,hasPrecomputes(n){return Ry(n)!==1},unsafeLadder(n,r,s=e.ZERO){let a=n;for(;r>T_;)r&Nd&&(s=s.add(a)),a=a.double(),r>>=Nd;return s},precomputeWindow(n,r){const{windows:s,windowSize:a}=Ay(r,t),c=[];let u=n,d=u;for(let h=0;h<s;h++){d=u,c.push(d);for(let p=1;p<a;p++)d=d.add(u),c.push(d);u=d.double()}return c},wNAF(n,r,s){const{windows:a,windowSize:c}=Ay(n,t);let u=e.ZERO,d=e.BASE;const h=BigInt(2**n-1),p=2**n,m=BigInt(n);for(let y=0;y<a;y++){const v=y*c;let w=Number(s&h);s>>=m,w>c&&(w-=p,s+=Nd);const E=v,S=v+Math.abs(w)-1,A=y%2!==0,I=w<0;w===0?d=d.add(_y(A,r[E])):u=u.add(_y(I,r[S]))}return{p:u,f:d}},wNAFUnsafe(n,r,s,a=e.ZERO){const{windows:c,windowSize:u}=Ay(n,t),d=BigInt(2**n-1),h=2**n,p=BigInt(n);for(let m=0;m<c;m++){const y=m*u;if(s===T_)break;let v=Number(s&d);if(s>>=p,v>u&&(v-=h,s+=Nd),v===0)continue;let w=r[y+Math.abs(v)-1];v<0&&(w=w.negate()),a=a.add(w)}return a},getPrecomputes(n,r,s){let a=xy.get(r);return a||(a=this.precomputeWindow(r,n),n!==1&&xy.set(r,s(a))),a},wNAFCached(n,r,s){const a=Ry(n);return this.wNAF(a,this.getPrecomputes(a,n,s),r)},wNAFCachedUnsafe(n,r,s,a){const c=Ry(n);return c===1?this.unsafeLadder(n,r,a):this.wNAFUnsafe(c,this.getPrecomputes(c,n,s),r,a)},setWindowSize(n,r){d3(r,t),h3.set(n,r),xy.delete(n)}}}function Bj(e,t,n,r){if(Nj(n,e),$j(r,t),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const s=e.ZERO,a=vj(BigInt(n.length)),c=a>12?a-3:a>4?a-2:a?2:1,u=(1<<c)-1,d=new Array(u+1).fill(s),h=Math.floor((t.BITS-1)/c)*c;let p=s;for(let m=h;m>=0;m-=c){d.fill(s);for(let v=0;v<r.length;v++){const w=r[v],E=Number(w>>BigInt(m)&BigInt(u));d[E]=d[E].add(n[v])}let y=s;for(let v=d.length-1,w=s;v>0;v--)w=w.add(d[v]),y=y.add(w);if(p=p.add(y),m!==0)for(let v=0;v<c;v++)p=p.double()}return p}function Pj(e){return Dj(e.Fp),lw(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...u3(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}const Mr=BigInt(0),kn=BigInt(1),$d=BigInt(2),kj=BigInt(8),Mj={zip215:!0};function Lj(e){const t=Pj(e);return lw(e,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...t})}function jj(e){const t=Lj(e),{Fp:n,n:r,prehash:s,hash:a,randomBytes:c,nByteLength:u,h:d}=t,h=$d<<BigInt(u*8)-kn,p=n.create,m=f3(t.n,t.nBitLength),y=t.uvRatio||((O,R)=>{try{return{isValid:!0,value:n.sqrt(O*n.inv(R))}}catch{return{isValid:!1,value:Mr}}}),v=t.adjustScalarBytes||(O=>O),w=t.domain||((O,R,M)=>{if(Ey("phflag",M),R.length||M)throw new Error("Contexts/pre-hash are not supported");return O});function E(O,R){ru("coordinate "+O,R,Mr,h)}function S(O){if(!(O instanceof D))throw new Error("ExtendedPoint expected")}const A=A_((O,R)=>{const{ex:M,ey:F,ez:X}=O,C=O.is0();R==null&&(R=C?kj:n.inv(X));const V=p(M*R),ee=p(F*R),se=p(X*R);if(C)return{x:Mr,y:kn};if(se!==kn)throw new Error("invZ was invalid");return{x:V,y:ee}}),I=A_(O=>{const{a:R,d:M}=t;if(O.is0())throw new Error("bad point: ZERO");const{ex:F,ey:X,ez:C,et:V}=O,ee=p(F*F),se=p(X*X),te=p(C*C),pe=p(te*te),me=p(ee*R),Te=p(te*p(me+se)),Ee=p(pe+p(M*p(ee*se)));if(Te!==Ee)throw new Error("bad point: equation left != right (1)");const xe=p(F*X),He=p(C*V);if(xe!==He)throw new Error("bad point: equation left != right (2)");return!0});class D{constructor(R,M,F,X){this.ex=R,this.ey=M,this.ez=F,this.et=X,E("x",R),E("y",M),E("z",F),E("t",X),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(R){if(R instanceof D)throw new Error("extended point not allowed");const{x:M,y:F}=R||{};return E("x",M),E("y",F),new D(M,F,kn,p(M*F))}static normalizeZ(R){const M=n.invertBatch(R.map(F=>F.ez));return R.map((F,X)=>F.toAffine(M[X])).map(D.fromAffine)}static msm(R,M){return Bj(D,m,R,M)}_setWindowSize(R){N.setWindowSize(this,R)}assertValidity(){I(this)}equals(R){S(R);const{ex:M,ey:F,ez:X}=this,{ex:C,ey:V,ez:ee}=R,se=p(M*ee),te=p(C*X),pe=p(F*ee),me=p(V*X);return se===te&&pe===me}is0(){return this.equals(D.ZERO)}negate(){return new D(p(-this.ex),this.ey,this.ez,p(-this.et))}double(){const{a:R}=t,{ex:M,ey:F,ez:X}=this,C=p(M*M),V=p(F*F),ee=p($d*p(X*X)),se=p(R*C),te=M+F,pe=p(p(te*te)-C-V),me=se+V,Te=me-ee,Ee=se-V,xe=p(pe*Te),He=p(me*Ee),pt=p(pe*Ee),on=p(Te*me);return new D(xe,He,on,pt)}add(R){S(R);const{a:M,d:F}=t,{ex:X,ey:C,ez:V,et:ee}=this,{ex:se,ey:te,ez:pe,et:me}=R;if(M===BigInt(-1)){const no=p((C-X)*(te+se)),ls=p((C+X)*(te-se)),Qn=p(ls-no);if(Qn===Mr)return this.double();const Rn=p(V*$d*me),Si=p(ee*$d*pe),la=Si+Rn,Jn=ls+no,Xr=Si-Rn,U=p(la*Qn),_=p(Jn*Xr),x=p(la*Xr),L=p(Qn*Jn);return new D(U,_,L,x)}const Te=p(X*se),Ee=p(C*te),xe=p(ee*F*me),He=p(V*pe),pt=p((X+C)*(se+te)-Te-Ee),on=He-xe,qt=He+xe,Dt=p(Ee-M*Te),Ze=p(pt*on),cs=p(qt*Dt),$t=p(pt*Dt),Yc=p(on*qt);return new D(Ze,cs,Yc,$t)}subtract(R){return this.add(R.negate())}wNAF(R){return N.wNAFCached(this,R,D.normalizeZ)}multiply(R){const M=R;ru("scalar",M,kn,r);const{p:F,f:X}=this.wNAF(M);return D.normalizeZ([F,X])[0]}multiplyUnsafe(R,M=D.ZERO){const F=R;return ru("scalar",F,Mr,r),F===Mr?$:this.is0()||F===kn?this:N.wNAFCachedUnsafe(this,F,D.normalizeZ,M)}isSmallOrder(){return this.multiplyUnsafe(d).is0()}isTorsionFree(){return N.unsafeLadder(this,r).is0()}toAffine(R){return A(this,R)}clearCofactor(){const{h:R}=t;return R===kn?this:this.multiplyUnsafe(R)}static fromHex(R,M=!1){const{d:F,a:X}=t,C=n.BYTES;R=ji("pointHex",R,C),Ey("zip215",M);const V=R.slice(),ee=R[C-1];V[C-1]=ee&-129;const se=oh(V),te=M?h:n.ORDER;ru("pointHex.y",se,Mr,te);const pe=p(se*se),me=p(pe-kn),Te=p(F*pe-X);let{isValid:Ee,value:xe}=y(me,Te);if(!Ee)throw new Error("Point.fromHex: invalid y coordinate");const He=(xe&kn)===kn,pt=(ee&128)!==0;if(!M&&xe===Mr&&pt)throw new Error("Point.fromHex: x=0 and x_0=1");return pt!==He&&(xe=p(-xe)),D.fromAffine({x:xe,y:se})}static fromPrivateKey(R){return k(R).point}toRawBytes(){const{x:R,y:M}=this.toAffine(),F=q0(M,n.BYTES);return F[F.length-1]|=R&kn?128:0,F}toHex(){return cw(this.toRawBytes())}}D.BASE=new D(t.Gx,t.Gy,kn,p(t.Gx*t.Gy)),D.ZERO=new D(Mr,kn,kn,Mr);const{BASE:B,ZERO:$}=D,N=Uj(D,u*8);function q(O){return Kt(O,r)}function H(O){return q(oh(O))}function k(O){const R=n.BYTES;O=ji("private key",O,R);const M=ji("hashed private key",a(O),2*R),F=v(M.slice(0,R)),X=M.slice(R,2*R),C=H(F),V=B.multiply(C),ee=V.toRawBytes();return{head:F,prefix:X,scalar:C,point:V,pointBytes:ee}}function K(O){return k(O).pointBytes}function Y(O=new Uint8Array,...R){const M=__(...R);return H(a(w(M,ji("context",O),!!s)))}function W(O,R,M={}){O=ji("message",O),s&&(O=s(O));const{prefix:F,scalar:X,pointBytes:C}=k(R),V=Y(M.context,F,O),ee=B.multiply(V).toRawBytes(),se=Y(M.context,ee,C,O),te=q(V+se*X);ru("signature.s",te,Mr,r);const pe=__(ee,q0(te,n.BYTES));return ji("result",pe,n.BYTES*2)}const le=Mj;function re(O,R,M,F=le){const{context:X,zip215:C}=F,V=n.BYTES;O=ji("signature",O,2*V),R=ji("message",R),M=ji("publicKey",M,V),C!==void 0&&Ey("zip215",C),s&&(R=s(R));const ee=oh(O.slice(V,2*V));let se,te,pe;try{se=D.fromHex(M,C),te=D.fromHex(O.slice(0,V),C),pe=B.multiplyUnsafe(ee)}catch{return!1}if(!C&&se.isSmallOrder())return!1;const me=Y(X,te.toRawBytes(),se.toRawBytes(),R);return te.add(se.multiplyUnsafe(me)).subtract(pe).clearCofactor().equals(D.ZERO)}return B._setWindowSize(8),{CURVE:t,getPublicKey:K,sign:W,verify:re,ExtendedPoint:D,utils:{getExtendedPublicKey:k,randomPrivateKey:()=>c(n.BYTES),precompute(O=8,R=D.BASE){return R._setWindowSize(O),R.multiply(BigInt(3)),R}}}}BigInt(0),BigInt(1);const uw=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),D_=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const zj=BigInt(1),I_=BigInt(2);BigInt(3);const qj=BigInt(5),Hj=BigInt(8);function Fj(e){const t=BigInt(10),n=BigInt(20),r=BigInt(40),s=BigInt(80),a=uw,c=e*e%a*e%a,u=ni(c,I_,a)*c%a,d=ni(u,zj,a)*e%a,h=ni(d,qj,a)*d%a,p=ni(h,t,a)*h%a,m=ni(p,n,a)*p%a,y=ni(m,r,a)*m%a,v=ni(y,s,a)*y%a,w=ni(v,s,a)*y%a,E=ni(w,t,a)*h%a;return{pow_p_5_8:ni(E,I_,a)*e%a,b2:c}}function Vj(e){return e[0]&=248,e[31]&=127,e[31]|=64,e}function Gj(e,t){const n=uw,r=Kt(t*t*t,n),s=Kt(r*r*t,n),a=Fj(e*s).pow_p_5_8;let c=Kt(e*r*a,n);const u=Kt(t*c*c,n),d=c,h=Kt(c*D_,n),p=u===e,m=u===Kt(-e,n),y=u===Kt(-e*D_,n);return p&&(c=d),(m||y)&&(c=h),Oj(c,n)&&(c=Kt(-c,n)),{isValid:p||m,value:c}}const Kj=f3(uw,void 0,!0),Yj={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:Kj,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:Hj,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:gj,randomBytes:i3,adjustScalarBytes:Vj,uvRatio:Gj},p3=jj(Yj),Wj="EdDSA",Xj="JWT",xh=".",ep="base64url",g3="utf8",m3="utf8",Zj=":",Qj="did",Jj="key",C_="base58btc",e9="z",t9="K36",n9=32;function fw(e){return globalThis.Buffer!=null?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}function y3(e=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?fw(globalThis.Buffer.allocUnsafe(e)):new Uint8Array(e)}function b3(e,t){t||(t=e.reduce((s,a)=>s+a.length,0));const n=y3(t);let r=0;for(const s of e)n.set(s,r),r+=s.length;return fw(n)}function r9(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<e.length;s++){var a=e.charAt(s),c=a.charCodeAt(0);if(n[c]!==255)throw new TypeError(a+" is ambiguous");n[c]=s}var u=e.length,d=e.charAt(0),h=Math.log(u)/Math.log(256),p=Math.log(256)/Math.log(u);function m(w){if(w instanceof Uint8Array||(ArrayBuffer.isView(w)?w=new Uint8Array(w.buffer,w.byteOffset,w.byteLength):Array.isArray(w)&&(w=Uint8Array.from(w))),!(w instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(w.length===0)return"";for(var E=0,S=0,A=0,I=w.length;A!==I&&w[A]===0;)A++,E++;for(var D=(I-A)*p+1>>>0,B=new Uint8Array(D);A!==I;){for(var $=w[A],N=0,q=D-1;($!==0||N<S)&&q!==-1;q--,N++)$+=256*B[q]>>>0,B[q]=$%u>>>0,$=$/u>>>0;if($!==0)throw new Error("Non-zero carry");S=N,A++}for(var H=D-S;H!==D&&B[H]===0;)H++;for(var k=d.repeat(E);H<D;++H)k+=e.charAt(B[H]);return k}function y(w){if(typeof w!="string")throw new TypeError("Expected String");if(w.length===0)return new Uint8Array;var E=0;if(w[E]!==" "){for(var S=0,A=0;w[E]===d;)S++,E++;for(var I=(w.length-E)*h+1>>>0,D=new Uint8Array(I);w[E];){var B=n[w.charCodeAt(E)];if(B===255)return;for(var $=0,N=I-1;(B!==0||$<A)&&N!==-1;N--,$++)B+=u*D[N]>>>0,D[N]=B%256>>>0,B=B/256>>>0;if(B!==0)throw new Error("Non-zero carry");A=$,E++}if(w[E]!==" "){for(var q=I-A;q!==I&&D[q]===0;)q++;for(var H=new Uint8Array(S+(I-q)),k=S;q!==I;)H[k++]=D[q++];return H}}}function v(w){var E=y(w);if(E)return E;throw new Error(`Non-${t} character`)}return{encode:m,decodeUnsafe:y,decode:v}}var i9=r9,s9=i9;const w3=e=>{if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")},o9=e=>new TextEncoder().encode(e),a9=e=>new TextDecoder().decode(e);let c9=class{constructor(t,n,r){this.name=t,this.prefix=n,this.baseEncode=r}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}},l9=class{constructor(t,n,r){if(this.name=t,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return v3(this,t)}},u9=class{constructor(t){this.decoders=t}or(t){return v3(this,t)}decode(t){const n=t[0],r=this.decoders[n];if(r)return r.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const v3=(e,t)=>new u9({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});let f9=class{constructor(t,n,r,s){this.name=t,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new c9(t,n,r),this.decoder=new l9(t,n,s)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}};const tp=({name:e,prefix:t,encode:n,decode:r})=>new f9(e,t,n,r),tf=({prefix:e,name:t,alphabet:n})=>{const{encode:r,decode:s}=s9(n,t);return tp({prefix:e,name:t,encode:r,decode:a=>w3(s(a))})},d9=(e,t,n,r)=>{const s={};for(let p=0;p<t.length;++p)s[t[p]]=p;let a=e.length;for(;e[a-1]==="=";)--a;const c=new Uint8Array(a*n/8|0);let u=0,d=0,h=0;for(let p=0;p<a;++p){const m=s[e[p]];if(m===void 0)throw new SyntaxError(`Non-${r} character`);d=d<<n|m,u+=n,u>=8&&(u-=8,c[h++]=255&d>>u)}if(u>=n||255&d<<8-u)throw new SyntaxError("Unexpected end of data");return c},h9=(e,t,n)=>{const r=t[t.length-1]==="=",s=(1<<n)-1;let a="",c=0,u=0;for(let d=0;d<e.length;++d)for(u=u<<8|e[d],c+=8;c>n;)c-=n,a+=t[s&u>>c];if(c&&(a+=t[s&u<<n-c]),r)for(;a.length*n&7;)a+="=";return a},gn=({name:e,prefix:t,bitsPerChar:n,alphabet:r})=>tp({prefix:t,name:e,encode(s){return h9(s,r,n)},decode(s){return d9(s,r,n,e)}}),p9=tp({prefix:"\0",name:"identity",encode:e=>a9(e),decode:e=>o9(e)});var g9=Object.freeze({__proto__:null,identity:p9});const m9=gn({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var y9=Object.freeze({__proto__:null,base2:m9});const b9=gn({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var w9=Object.freeze({__proto__:null,base8:b9});const v9=tf({prefix:"9",name:"base10",alphabet:"0123456789"});var E9=Object.freeze({__proto__:null,base10:v9});const S9=gn({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),_9=gn({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var A9=Object.freeze({__proto__:null,base16:S9,base16upper:_9});const x9=gn({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),R9=gn({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),O9=gn({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),T9=gn({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),D9=gn({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),I9=gn({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),C9=gn({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),N9=gn({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),$9=gn({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var U9=Object.freeze({__proto__:null,base32:x9,base32upper:R9,base32pad:O9,base32padupper:T9,base32hex:D9,base32hexupper:I9,base32hexpad:C9,base32hexpadupper:N9,base32z:$9});const B9=tf({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),P9=tf({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var k9=Object.freeze({__proto__:null,base36:B9,base36upper:P9});const M9=tf({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),L9=tf({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var j9=Object.freeze({__proto__:null,base58btc:M9,base58flickr:L9});const z9=gn({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),q9=gn({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),H9=gn({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),F9=gn({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var V9=Object.freeze({__proto__:null,base64:z9,base64pad:q9,base64url:H9,base64urlpad:F9});const E3=Array.from(""),G9=E3.reduce((e,t,n)=>(e[n]=t,e),[]),K9=E3.reduce((e,t,n)=>(e[t.codePointAt(0)]=n,e),[]);function Y9(e){return e.reduce((t,n)=>(t+=G9[n],t),"")}function W9(e){const t=[];for(const n of e){const r=K9[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);t.push(r)}return new Uint8Array(t)}const X9=tp({prefix:"",name:"base256emoji",encode:Y9,decode:W9});var Z9=Object.freeze({__proto__:null,base256emoji:X9}),Q9=S3,N_=128,J9=-128,e7=Math.pow(2,31);function S3(e,t,n){t=t||[],n=n||0;for(var r=n;e>=e7;)t[n++]=e&255|N_,e/=128;for(;e&J9;)t[n++]=e&255|N_,e>>>=7;return t[n]=e|0,S3.bytes=n-r+1,t}var t7=F0,n7=128,$_=127;function F0(e,r){var n=0,r=r||0,s=0,a=r,c,u=e.length;do{if(a>=u)throw F0.bytes=0,new RangeError("Could not decode varint");c=e[a++],n+=s<28?(c&$_)<<s:(c&$_)*Math.pow(2,s),s+=7}while(c>=n7);return F0.bytes=a-r,n}var r7=Math.pow(2,7),i7=Math.pow(2,14),s7=Math.pow(2,21),o7=Math.pow(2,28),a7=Math.pow(2,35),c7=Math.pow(2,42),l7=Math.pow(2,49),u7=Math.pow(2,56),f7=Math.pow(2,63),d7=function(e){return e<r7?1:e<i7?2:e<s7?3:e<o7?4:e<a7?5:e<c7?6:e<l7?7:e<u7?8:e<f7?9:10},h7={encode:Q9,decode:t7,encodingLength:d7},_3=h7;const U_=(e,t,n=0)=>(_3.encode(e,t,n),t),B_=e=>_3.encodingLength(e),V0=(e,t)=>{const n=t.byteLength,r=B_(e),s=r+B_(n),a=new Uint8Array(s+n);return U_(e,a,0),U_(n,a,r),a.set(t,s),new p7(e,n,t,a)};let p7=class{constructor(t,n,r,s){this.code=t,this.size=n,this.digest=r,this.bytes=s}};const A3=({name:e,code:t,encode:n})=>new g7(e,t,n);let g7=class{constructor(t,n,r){this.name=t,this.code=n,this.encode=r}digest(t){if(t instanceof Uint8Array){const n=this.encode(t);return n instanceof Uint8Array?V0(this.code,n):n.then(r=>V0(this.code,r))}else throw Error("Unknown type, must be binary type")}};const x3=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),m7=A3({name:"sha2-256",code:18,encode:x3("SHA-256")}),y7=A3({name:"sha2-512",code:19,encode:x3("SHA-512")});var b7=Object.freeze({__proto__:null,sha256:m7,sha512:y7});const R3=0,w7="identity",O3=w3,v7=e=>V0(R3,O3(e)),E7={code:R3,name:w7,encode:O3,digest:v7};var S7=Object.freeze({__proto__:null,identity:E7});new TextEncoder,new TextDecoder;const P_={...g9,...y9,...w9,...E9,...A9,...U9,...k9,...j9,...V9,...Z9};({...b7,...S7});function T3(e,t,n,r){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:n},decoder:{decode:r}}}const k_=T3("utf8","u",e=>"u"+new TextDecoder("utf8").decode(e),e=>new TextEncoder().encode(e.substring(1))),Oy=T3("ascii","a",e=>{let t="a";for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t},e=>{e=e.substring(1);const t=y3(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}),D3={utf8:k_,"utf-8":k_,hex:P_.base16,latin1:Oy,ascii:Oy,binary:Oy,...P_};function np(e,t="utf8"){const n=D3[t];if(!n)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8"):n.encoder.encode(e).substring(1)}function zc(e,t="utf8"){const n=D3[t];if(!n)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?fw(globalThis.Buffer.from(e,"utf-8")):n.decoder.decode(`${n.prefix}${e}`)}function M_(e){return Yo(np(zc(e,ep),g3))}function Rh(e){return np(zc(ss(e),g3),ep)}function I3(e){const t=zc(t9,C_),n=e9+np(b3([t,e]),C_);return[Qj,Jj,n].join(Zj)}function _7(e){return np(e,ep)}function A7(e){return zc(e,ep)}function x7(e){return zc([Rh(e.header),Rh(e.payload)].join(xh),m3)}function R7(e){return[Rh(e.header),Rh(e.payload),_7(e.signature)].join(xh)}function G0(e){const t=e.split(xh),n=M_(t[0]),r=M_(t[1]),s=A7(t[2]),a=zc(t.slice(0,2).join(xh),m3);return{header:n,payload:r,signature:s,data:a}}function L_(e=i3(n9)){const t=p3.getPublicKey(e);return{secretKey:b3([e,t]),publicKey:t}}async function O7(e,t,n,r,s=we.fromMiliseconds(Date.now())){const a={alg:Wj,typ:Xj},c=I3(r.publicKey),u=s+n,d={iss:c,sub:e,aud:t,iat:s,exp:u},h=x7({header:a,payload:d}),p=p3.sign(h,r.secretKey.slice(0,32));return R7({header:a,payload:d,signature:p})}function dw(e){return globalThis.Buffer!=null?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}function C3(e=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?dw(globalThis.Buffer.allocUnsafe(e)):new Uint8Array(e)}function Su(e,t){t||(t=e.reduce((s,a)=>s+a.length,0));const n=C3(t);let r=0;for(const s of e)n.set(s,r),r+=s.length;return dw(n)}function T7(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<e.length;s++){var a=e.charAt(s),c=a.charCodeAt(0);if(n[c]!==255)throw new TypeError(a+" is ambiguous");n[c]=s}var u=e.length,d=e.charAt(0),h=Math.log(u)/Math.log(256),p=Math.log(256)/Math.log(u);function m(w){if(w instanceof Uint8Array||(ArrayBuffer.isView(w)?w=new Uint8Array(w.buffer,w.byteOffset,w.byteLength):Array.isArray(w)&&(w=Uint8Array.from(w))),!(w instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(w.length===0)return"";for(var E=0,S=0,A=0,I=w.length;A!==I&&w[A]===0;)A++,E++;for(var D=(I-A)*p+1>>>0,B=new Uint8Array(D);A!==I;){for(var $=w[A],N=0,q=D-1;($!==0||N<S)&&q!==-1;q--,N++)$+=256*B[q]>>>0,B[q]=$%u>>>0,$=$/u>>>0;if($!==0)throw new Error("Non-zero carry");S=N,A++}for(var H=D-S;H!==D&&B[H]===0;)H++;for(var k=d.repeat(E);H<D;++H)k+=e.charAt(B[H]);return k}function y(w){if(typeof w!="string")throw new TypeError("Expected String");if(w.length===0)return new Uint8Array;var E=0;if(w[E]!==" "){for(var S=0,A=0;w[E]===d;)S++,E++;for(var I=(w.length-E)*h+1>>>0,D=new Uint8Array(I);w[E];){var B=n[w.charCodeAt(E)];if(B===255)return;for(var $=0,N=I-1;(B!==0||$<A)&&N!==-1;N--,$++)B+=u*D[N]>>>0,D[N]=B%256>>>0,B=B/256>>>0;if(B!==0)throw new Error("Non-zero carry");A=$,E++}if(w[E]!==" "){for(var q=I-A;q!==I&&D[q]===0;)q++;for(var H=new Uint8Array(S+(I-q)),k=S;q!==I;)H[k++]=D[q++];return H}}}function v(w){var E=y(w);if(E)return E;throw new Error(`Non-${t} character`)}return{encode:m,decodeUnsafe:y,decode:v}}var D7=T7,I7=D7;const C7=e=>{if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")},N7=e=>new TextEncoder().encode(e),$7=e=>new TextDecoder().decode(e);class U7{constructor(t,n,r){this.name=t,this.prefix=n,this.baseEncode=r}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}}class B7{constructor(t,n,r){if(this.name=t,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return N3(this,t)}}class P7{constructor(t){this.decoders=t}or(t){return N3(this,t)}decode(t){const n=t[0],r=this.decoders[n];if(r)return r.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const N3=(e,t)=>new P7({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class k7{constructor(t,n,r,s){this.name=t,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new U7(t,n,r),this.decoder=new B7(t,n,s)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}}const rp=({name:e,prefix:t,encode:n,decode:r})=>new k7(e,t,n,r),nf=({prefix:e,name:t,alphabet:n})=>{const{encode:r,decode:s}=I7(n,t);return rp({prefix:e,name:t,encode:r,decode:a=>C7(s(a))})},M7=(e,t,n,r)=>{const s={};for(let p=0;p<t.length;++p)s[t[p]]=p;let a=e.length;for(;e[a-1]==="=";)--a;const c=new Uint8Array(a*n/8|0);let u=0,d=0,h=0;for(let p=0;p<a;++p){const m=s[e[p]];if(m===void 0)throw new SyntaxError(`Non-${r} character`);d=d<<n|m,u+=n,u>=8&&(u-=8,c[h++]=255&d>>u)}if(u>=n||255&d<<8-u)throw new SyntaxError("Unexpected end of data");return c},L7=(e,t,n)=>{const r=t[t.length-1]==="=",s=(1<<n)-1;let a="",c=0,u=0;for(let d=0;d<e.length;++d)for(u=u<<8|e[d],c+=8;c>n;)c-=n,a+=t[s&u>>c];if(c&&(a+=t[s&u<<n-c]),r)for(;a.length*n&7;)a+="=";return a},mn=({name:e,prefix:t,bitsPerChar:n,alphabet:r})=>rp({prefix:t,name:e,encode(s){return L7(s,r,n)},decode(s){return M7(s,r,n,e)}}),j7=rp({prefix:"\0",name:"identity",encode:e=>$7(e),decode:e=>N7(e)}),z7=Object.freeze(Object.defineProperty({__proto__:null,identity:j7},Symbol.toStringTag,{value:"Module"})),q7=mn({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),H7=Object.freeze(Object.defineProperty({__proto__:null,base2:q7},Symbol.toStringTag,{value:"Module"})),F7=mn({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),V7=Object.freeze(Object.defineProperty({__proto__:null,base8:F7},Symbol.toStringTag,{value:"Module"})),G7=nf({prefix:"9",name:"base10",alphabet:"0123456789"}),K7=Object.freeze(Object.defineProperty({__proto__:null,base10:G7},Symbol.toStringTag,{value:"Module"})),Y7=mn({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),W7=mn({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),X7=Object.freeze(Object.defineProperty({__proto__:null,base16:Y7,base16upper:W7},Symbol.toStringTag,{value:"Module"})),Z7=mn({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Q7=mn({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),J7=mn({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),ez=mn({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),tz=mn({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),nz=mn({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),rz=mn({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),iz=mn({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),sz=mn({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),oz=Object.freeze(Object.defineProperty({__proto__:null,base32:Z7,base32hex:tz,base32hexpad:rz,base32hexpadupper:iz,base32hexupper:nz,base32pad:J7,base32padupper:ez,base32upper:Q7,base32z:sz},Symbol.toStringTag,{value:"Module"})),az=nf({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),cz=nf({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),lz=Object.freeze(Object.defineProperty({__proto__:null,base36:az,base36upper:cz},Symbol.toStringTag,{value:"Module"})),uz=nf({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),fz=nf({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),dz=Object.freeze(Object.defineProperty({__proto__:null,base58btc:uz,base58flickr:fz},Symbol.toStringTag,{value:"Module"})),hz=mn({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),pz=mn({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),gz=mn({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),mz=mn({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),yz=Object.freeze(Object.defineProperty({__proto__:null,base64:hz,base64pad:pz,base64url:gz,base64urlpad:mz},Symbol.toStringTag,{value:"Module"})),$3=Array.from(""),bz=$3.reduce((e,t,n)=>(e[n]=t,e),[]),wz=$3.reduce((e,t,n)=>(e[t.codePointAt(0)]=n,e),[]);function vz(e){return e.reduce((t,n)=>(t+=bz[n],t),"")}function Ez(e){const t=[];for(const n of e){const r=wz[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);t.push(r)}return new Uint8Array(t)}const Sz=rp({prefix:"",name:"base256emoji",encode:vz,decode:Ez}),_z=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:Sz},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const j_={...z7,...H7,...V7,...K7,...X7,...oz,...lz,...dz,...yz,..._z};function U3(e,t,n,r){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:n},decoder:{decode:r}}}const z_=U3("utf8","u",e=>"u"+new TextDecoder("utf8").decode(e),e=>new TextEncoder().encode(e.substring(1))),Ty=U3("ascii","a",e=>{let t="a";for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t},e=>{e=e.substring(1);const t=C3(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}),B3={utf8:z_,"utf-8":z_,hex:j_.base16,latin1:Ty,ascii:Ty,binary:Ty,...j_};function Ir(e,t="utf8"){const n=B3[t];if(!n)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?dw(globalThis.Buffer.from(e,"utf-8")):n.decoder.decode(`${n.prefix}${e}`)}function Gn(e,t="utf8"){const n=B3[t];if(!n)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8"):n.encoder.encode(e).substring(1)}const Az={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}};var Dy,q_;function P3(){if(q_)return Dy;q_=1;const e="Input must be an string, Buffer or Uint8Array";function t(c){let u;if(c instanceof Uint8Array)u=c;else if(typeof c=="string")u=new TextEncoder().encode(c);else throw new Error(e);return u}function n(c){return Array.prototype.map.call(c,function(u){return(u<16?"0":"")+u.toString(16)}).join("")}function r(c){return(4294967296+c).toString(16).substring(1)}function s(c,u,d){let h=`
`+c+" = ";for(let p=0;p<u.length;p+=2){if(d===32)h+=r(u[p]).toUpperCase(),h+=" ",h+=r(u[p+1]).toUpperCase();else if(d===64)h+=r(u[p+1]).toUpperCase(),h+=r(u[p]).toUpperCase();else throw new Error("Invalid size "+d);p%6===4?h+=`
`+new Array(c.length+4).join(" "):p<u.length-2&&(h+=" ")}console.log(h)}function a(c,u,d){let h=new Date().getTime();const p=new Uint8Array(u);for(let y=0;y<u;y++)p[y]=y%256;const m=new Date().getTime();console.log("Generated random input in "+(m-h)+"ms"),h=m;for(let y=0;y<d;y++){const v=c(p),w=new Date().getTime(),E=w-h;h=w,console.log("Hashed in "+E+"ms: "+v.substring(0,20)+"..."),console.log(Math.round(u/(1<<20)/(E/1e3)*100)/100+" MB PER SECOND")}}return Dy={normalizeInput:t,toHex:n,debugPrint:s,testSpeed:a},Dy}var Iy,H_;function xz(){if(H_)return Iy;H_=1;const e=P3();function t(A,I,D){const B=A[I]+A[D];let $=A[I+1]+A[D+1];B>=4294967296&&$++,A[I]=B,A[I+1]=$}function n(A,I,D,B){let $=A[I]+D;D<0&&($+=4294967296);let N=A[I+1]+B;$>=4294967296&&N++,A[I]=$,A[I+1]=N}function r(A,I){return A[I]^A[I+1]<<8^A[I+2]<<16^A[I+3]<<24}function s(A,I,D,B,$,N){const q=h[$],H=h[$+1],k=h[N],K=h[N+1];t(d,A,I),n(d,A,q,H);let Y=d[B]^d[A],W=d[B+1]^d[A+1];d[B]=W,d[B+1]=Y,t(d,D,B),Y=d[I]^d[D],W=d[I+1]^d[D+1],d[I]=Y>>>24^W<<8,d[I+1]=W>>>24^Y<<8,t(d,A,I),n(d,A,k,K),Y=d[B]^d[A],W=d[B+1]^d[A+1],d[B]=Y>>>16^W<<16,d[B+1]=W>>>16^Y<<16,t(d,D,B),Y=d[I]^d[D],W=d[I+1]^d[D+1],d[I]=W>>>31^Y<<1,d[I+1]=Y>>>31^W<<1}const a=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),c=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3],u=new Uint8Array(c.map(function(A){return A*2})),d=new Uint32Array(32),h=new Uint32Array(32);function p(A,I){let D=0;for(D=0;D<16;D++)d[D]=A.h[D],d[D+16]=a[D];for(d[24]=d[24]^A.t,d[25]=d[25]^A.t/4294967296,I&&(d[28]=~d[28],d[29]=~d[29]),D=0;D<32;D++)h[D]=r(A.b,4*D);for(D=0;D<12;D++)s(0,8,16,24,u[D*16+0],u[D*16+1]),s(2,10,18,26,u[D*16+2],u[D*16+3]),s(4,12,20,28,u[D*16+4],u[D*16+5]),s(6,14,22,30,u[D*16+6],u[D*16+7]),s(0,10,20,30,u[D*16+8],u[D*16+9]),s(2,12,22,24,u[D*16+10],u[D*16+11]),s(4,14,16,26,u[D*16+12],u[D*16+13]),s(6,8,18,28,u[D*16+14],u[D*16+15]);for(D=0;D<16;D++)A.h[D]=A.h[D]^d[D]^d[D+16]}const m=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);function y(A,I,D,B){if(A===0||A>64)throw new Error("Illegal output length, expected 0 < length <= 64");if(I&&I.length>64)throw new Error("Illegal key, expected Uint8Array with 0 < length <= 64");if(D&&D.length!==16)throw new Error("Illegal salt, expected Uint8Array with length is 16");if(B&&B.length!==16)throw new Error("Illegal personal, expected Uint8Array with length is 16");const $={b:new Uint8Array(128),h:new Uint32Array(16),t:0,c:0,outlen:A};m.fill(0),m[0]=A,I&&(m[1]=I.length),m[2]=1,m[3]=1,D&&m.set(D,32),B&&m.set(B,48);for(let N=0;N<16;N++)$.h[N]=a[N]^r(m,N*4);return I&&(v($,I),$.c=128),$}function v(A,I){for(let D=0;D<I.length;D++)A.c===128&&(A.t+=A.c,p(A,!1),A.c=0),A.b[A.c++]=I[D]}function w(A){for(A.t+=A.c;A.c<128;)A.b[A.c++]=0;p(A,!0);const I=new Uint8Array(A.outlen);for(let D=0;D<A.outlen;D++)I[D]=A.h[D>>2]>>8*(D&3);return I}function E(A,I,D,B,$){D=D||64,A=e.normalizeInput(A),B&&(B=e.normalizeInput(B)),$&&($=e.normalizeInput($));const N=y(D,I,B,$);return v(N,A),w(N)}function S(A,I,D,B,$){const N=E(A,I,D,B,$);return e.toHex(N)}return Iy={blake2b:E,blake2bHex:S,blake2bInit:y,blake2bUpdate:v,blake2bFinal:w},Iy}var Cy,F_;function Rz(){if(F_)return Cy;F_=1;const e=P3();function t(w,E){return w[E]^w[E+1]<<8^w[E+2]<<16^w[E+3]<<24}function n(w,E,S,A,I,D){c[w]=c[w]+c[E]+I,c[A]=r(c[A]^c[w],16),c[S]=c[S]+c[A],c[E]=r(c[E]^c[S],12),c[w]=c[w]+c[E]+D,c[A]=r(c[A]^c[w],8),c[S]=c[S]+c[A],c[E]=r(c[E]^c[S],7)}function r(w,E){return w>>>E^w<<32-E}const s=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),a=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0]),c=new Uint32Array(16),u=new Uint32Array(16);function d(w,E){let S=0;for(S=0;S<8;S++)c[S]=w.h[S],c[S+8]=s[S];for(c[12]^=w.t,c[13]^=w.t/4294967296,E&&(c[14]=~c[14]),S=0;S<16;S++)u[S]=t(w.b,4*S);for(S=0;S<10;S++)n(0,4,8,12,u[a[S*16+0]],u[a[S*16+1]]),n(1,5,9,13,u[a[S*16+2]],u[a[S*16+3]]),n(2,6,10,14,u[a[S*16+4]],u[a[S*16+5]]),n(3,7,11,15,u[a[S*16+6]],u[a[S*16+7]]),n(0,5,10,15,u[a[S*16+8]],u[a[S*16+9]]),n(1,6,11,12,u[a[S*16+10]],u[a[S*16+11]]),n(2,7,8,13,u[a[S*16+12]],u[a[S*16+13]]),n(3,4,9,14,u[a[S*16+14]],u[a[S*16+15]]);for(S=0;S<8;S++)w.h[S]^=c[S]^c[S+8]}function h(w,E){if(!(w>0&&w<=32))throw new Error("Incorrect output length, should be in [1, 32]");const S=E?E.length:0;if(E&&!(S>0&&S<=32))throw new Error("Incorrect key length, should be in [1, 32]");const A={h:new Uint32Array(s),b:new Uint8Array(64),c:0,t:0,outlen:w};return A.h[0]^=16842752^S<<8^w,S>0&&(p(A,E),A.c=64),A}function p(w,E){for(let S=0;S<E.length;S++)w.c===64&&(w.t+=w.c,d(w,!1),w.c=0),w.b[w.c++]=E[S]}function m(w){for(w.t+=w.c;w.c<64;)w.b[w.c++]=0;d(w,!0);const E=new Uint8Array(w.outlen);for(let S=0;S<w.outlen;S++)E[S]=w.h[S>>2]>>8*(S&3)&255;return E}function y(w,E,S){S=S||32,w=e.normalizeInput(w);const A=h(S,E);return p(A,w),m(A)}function v(w,E,S){const A=y(w,E,S);return e.toHex(A)}return Cy={blake2s:y,blake2sHex:v,blake2sInit:h,blake2sUpdate:p,blake2sFinal:m},Cy}var Ny,V_;function Oz(){if(V_)return Ny;V_=1;const e=xz(),t=Rz();return Ny={blake2b:e.blake2b,blake2bHex:e.blake2bHex,blake2bInit:e.blake2bInit,blake2bUpdate:e.blake2bUpdate,blake2bFinal:e.blake2bFinal,blake2s:t.blake2s,blake2sHex:t.blake2sHex,blake2sInit:t.blake2sInit,blake2sUpdate:t.blake2sUpdate,blake2sFinal:t.blake2sFinal},Ny}var Tz=Oz(),Dz={};const Iz=":";function Dc(e){const[t,n]=e.split(Iz);return{namespace:t,reference:n}}function k3(e,t){return e.includes(":")?[e]:t.chains||[]}var Cz=Object.defineProperty,Nz=Object.defineProperties,$z=Object.getOwnPropertyDescriptors,G_=Object.getOwnPropertySymbols,Uz=Object.prototype.hasOwnProperty,Bz=Object.prototype.propertyIsEnumerable,K0=(e,t,n)=>t in e?Cz(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,K_=(e,t)=>{for(var n in t||(t={}))Uz.call(t,n)&&K0(e,n,t[n]);if(G_)for(var n of G_(t))Bz.call(t,n)&&K0(e,n,t[n]);return e},Pz=(e,t)=>Nz(e,$z(t)),Y_=(e,t,n)=>K0(e,typeof t!="symbol"?t+"":t,n);const kz="ReactNative",dr={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},Mz="js";function Oh(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function to(){return!is.getDocument()&&!!is.getNavigator()&&navigator.product===kz}function Lz(){return to()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="android"}function jz(){return to()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="ios"}function qc(){return!Oh()&&!!is.getNavigator()&&!!is.getDocument()}function rf(){return to()?dr.reactNative:Oh()?dr.node:qc()?dr.browser:dr.unknown}function W_(){var e;try{return to()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(e=global.Application)==null?void 0:e.applicationId:void 0}catch{return}}function zz(e,t){const n=new URLSearchParams(e);for(const r of Object.keys(t).sort())if(t.hasOwnProperty(r)){const s=t[r];s!==void 0&&n.set(r,s)}return n.toString()}function qz(e){var t,n;const r=M3();try{return e!=null&&e.url&&r.url&&new URL(e.url).host!==new URL(r.url).host&&(console.warn(`The configured WalletConnect 'metadata.url':${e.url} differs from the actual page url:${r.url}. This is probably unintended and can lead to issues.`),e.url=r.url),(t=e?.icons)!=null&&t.length&&e.icons.length>0&&(e.icons=e.icons.filter(s=>s!=="")),Pz(K_(K_({},r),e),{url:e?.url||r.url,name:e?.name||r.name,description:e?.description||r.description,icons:(n=e?.icons)!=null&&n.length&&e.icons.length>0?e.icons:r.icons})}catch(s){return console.warn("Error populating app metadata",s),e||r}}function M3(){return eM.getWindowMetadata()||{name:"",description:"",url:"",icons:[""]}}function Hz(){if(rf()===dr.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:n,Version:r}=global.Platform;return[n,r].join("-")}const e=bk();if(e===null)return"unknown";const t=e.os?e.os.replace(" ","").toLowerCase():"unknown";return e.type==="browser"?[t,e.name,e.version].join("-"):[t,e.version].join("-")}function Fz(){var e;const t=rf();return t===dr.browser?[t,((e=is.getLocation())==null?void 0:e.host)||"unknown"].join(":"):t}function L3(e,t,n){const r=Hz(),s=Fz();return[[e,t].join("-"),[Mz,n].join("-"),r,s].join("/")}function Vz({protocol:e,version:t,relayUrl:n,sdkVersion:r,auth:s,projectId:a,useOnCloseEvent:c,bundleId:u,packageName:d}){const h=n.split("?"),p=L3(e,t,r),m={auth:s,ua:p,projectId:a,useOnCloseEvent:c,packageName:d||void 0,bundleId:u||void 0},y=zz(h[1]||"",m);return h[0]+"?"+y}function Mo(e,t){return e.filter(n=>t.includes(n)).length===e.length}function Y0(e){return Object.fromEntries(e.entries())}function W0(e){return new Map(Object.entries(e))}function No(e=we.FIVE_MINUTES,t){const n=we.toMiliseconds(e||we.FIVE_MINUTES);let r,s,a,c;return{resolve:u=>{a&&r&&(clearTimeout(a),r(u),c=Promise.resolve(u))},reject:u=>{a&&s&&(clearTimeout(a),s(u))},done:()=>new Promise((u,d)=>{if(c)return u(c);a=setTimeout(()=>{const h=new Error(t);c=Promise.reject(h),d(h)},n),r=u,s=d})}}function Ks(e,t,n){return new Promise(async(r,s)=>{const a=setTimeout(()=>s(new Error(n)),t);try{const c=await e;r(c)}catch(c){s(c)}clearTimeout(a)})}function j3(e,t){if(typeof t=="string"&&t.startsWith(`${e}:`))return t;if(e.toLowerCase()==="topic"){if(typeof t!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${t}`}else if(e.toLowerCase()==="id"){if(typeof t!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${t}`}throw new Error(`Unknown expirer target type: ${e}`)}function Gz(e){return j3("topic",e)}function Kz(e){return j3("id",e)}function z3(e){const[t,n]=e.split(":"),r={id:void 0,topic:void 0};if(t==="topic"&&typeof n=="string")r.topic=n;else if(t==="id"&&Number.isInteger(Number(n)))r.id=Number(n);else throw new Error(`Invalid target, expected id:number or topic:string, got ${t}:${n}`);return r}function Gt(e,t){return we.fromMiliseconds(Date.now()+we.toMiliseconds(e))}function zs(e){return Date.now()>=we.toMiliseconds(e)}function Xe(e,t){return`${e}${t?`:${t}`:""}`}function pi(e=[],t=[]){return[...new Set([...e,...t])]}async function Yz({id:e,topic:t,wcDeepLink:n}){var r;try{if(!n)return;const s=typeof n=="string"?JSON.parse(n):n,a=s?.href;if(typeof a!="string")return;const c=Wz(a,e,t),u=rf();if(u===dr.browser){if(!((r=is.getDocument())!=null&&r.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}Xz(c)}else u===dr.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(c)}catch(s){console.error(s)}}function Wz(e,t,n){const r=`requestId=${t}&sessionTopic=${n}`;e.endsWith("/")&&(e=e.slice(0,-1));let s=`${e}`;if(e.startsWith("https://t.me")){const a=e.includes("?")?"&startapp=":"?startapp=";s=`${s}${a}${eq(r,!0)}`}else s=`${s}/wc?${r}`;return s}function Xz(e){let t="_self";Jz()?t="_top":(Qz()||e.startsWith("https://")||e.startsWith("http://"))&&(t="_blank"),window.open(e,t,"noreferrer noopener")}async function Zz(e,t){let n="";try{if(qc()&&(n=localStorage.getItem(t),n))return n;n=await e.getItem(t)}catch(r){console.error(r)}return n}function X_(e,t){if(!e.includes(t))return null;const n=e.split(/([&,?,=])/),r=n.indexOf(t);return n[r+2]}function Z_(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})}function hw(){return typeof process<"u"&&Dz.IS_VITEST==="true"}function Qz(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function Jz(){try{return window.self!==window.top}catch{return!1}}function eq(e,t=!1){const n=Buffer.from(e).toString("base64");return t?n.replace(/[=]/g,""):n}function q3(e){return Buffer.from(e,"base64").toString("utf-8")}function tq(e){return new Promise(t=>setTimeout(t,e))}let nq=class{constructor({limit:t}){Y_(this,"limit"),Y_(this,"set"),this.limit=t,this.set=new Set}add(t){if(!this.set.has(t)){if(this.set.size>=this.limit){const n=this.set.values().next().value;n&&this.set.delete(n)}this.set.add(t)}}has(t){return this.set.has(t)}};const Ud=BigInt(2**32-1),Q_=BigInt(32);function H3(e,t=!1){return t?{h:Number(e&Ud),l:Number(e>>Q_&Ud)}:{h:Number(e>>Q_&Ud)|0,l:Number(e&Ud)|0}}function F3(e,t=!1){const n=e.length;let r=new Uint32Array(n),s=new Uint32Array(n);for(let a=0;a<n;a++){const{h:c,l:u}=H3(e[a],t);[r[a],s[a]]=[c,u]}return[r,s]}const J_=(e,t,n)=>e>>>n,eA=(e,t,n)=>e<<32-n|t>>>n,qs=(e,t,n)=>e>>>n|t<<32-n,Hs=(e,t,n)=>e<<32-n|t>>>n,pu=(e,t,n)=>e<<64-n|t>>>n-32,gu=(e,t,n)=>e>>>n-32|t<<64-n,rq=(e,t)=>t,iq=(e,t)=>e,sq=(e,t,n)=>e<<n|t>>>32-n,oq=(e,t,n)=>t<<n|e>>>32-n,aq=(e,t,n)=>t<<n-32|e>>>64-n,cq=(e,t,n)=>e<<n-32|t>>>64-n;function Fr(e,t,n,r){const s=(t>>>0)+(r>>>0);return{h:e+n+(s/2**32|0)|0,l:s|0}}const pw=(e,t,n)=>(e>>>0)+(t>>>0)+(n>>>0),gw=(e,t,n,r)=>t+n+r+(e/2**32|0)|0,lq=(e,t,n,r)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0),uq=(e,t,n,r,s)=>t+n+r+s+(e/2**32|0)|0,fq=(e,t,n,r,s)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0)+(s>>>0),dq=(e,t,n,r,s,a)=>t+n+r+s+a+(e/2**32|0)|0,tc=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function mw(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function os(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function Cr(e,...t){if(!mw(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function yw(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");os(e.outputLen),os(e.blockLen)}function Zs(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function bw(e,t){Cr(e);const n=t.outputLen;if(e.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function Lu(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))}function Nr(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}function $y(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function ri(e,t){return e<<32-t|e>>>t}const V3=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function G3(e){return e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255}const Fi=V3?e=>e:e=>G3(e);function hq(e){for(let t=0;t<e.length;t++)e[t]=G3(e[t]);return e}const Fs=V3?e=>e:hq,K3=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",pq=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function ju(e){if(Cr(e),K3)return e.toHex();let t="";for(let n=0;n<e.length;n++)t+=pq[e[n]];return t}const zi={_0:48,_9:57,A:65,F:70,a:97,f:102};function tA(e){if(e>=zi._0&&e<=zi._9)return e-zi._0;if(e>=zi.A&&e<=zi.F)return e-(zi.A-10);if(e>=zi.a&&e<=zi.f)return e-(zi.a-10)}function ww(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);if(K3)return Uint8Array.fromHex(e);const t=e.length,n=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(n);for(let s=0,a=0;s<n;s++,a+=2){const c=tA(e.charCodeAt(a)),u=tA(e.charCodeAt(a+1));if(c===void 0||u===void 0){const d=e[a]+e[a+1];throw new Error('hex string expected, got non-hex character "'+d+'" at index '+a)}r[s]=c*16+u}return r}function gq(e){if(typeof e!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(e))}function Kr(e){return typeof e=="string"&&(e=gq(e)),Cr(e),e}function Lo(...e){let t=0;for(let r=0;r<e.length;r++){const s=e[r];Cr(s),t+=s.length}const n=new Uint8Array(t);for(let r=0,s=0;r<e.length;r++){const a=e[r];n.set(a,s),s+=a.length}return n}let ip=class{};function sf(e){const t=r=>e().update(Kr(r)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function mq(e){const t=(r,s)=>e(s).update(Kr(r)).digest(),n=e({});return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=r=>e(r),t}function Hc(e=32){if(tc&&typeof tc.getRandomValues=="function")return tc.getRandomValues(new Uint8Array(e));if(tc&&typeof tc.randomBytes=="function")return Uint8Array.from(tc.randomBytes(e));throw new Error("crypto.getRandomValues must be defined")}const yq=BigInt(0),iu=BigInt(1),bq=BigInt(2),wq=BigInt(7),vq=BigInt(256),Eq=BigInt(113),Y3=[],W3=[],X3=[];for(let e=0,t=iu,n=1,r=0;e<24;e++){[n,r]=[r,(2*n+3*r)%5],Y3.push(2*(5*r+n)),W3.push((e+1)*(e+2)/2%64);let s=yq;for(let a=0;a<7;a++)t=(t<<iu^(t>>wq)*Eq)%vq,t&bq&&(s^=iu<<(iu<<BigInt(a))-iu);X3.push(s)}const Z3=F3(X3,!0),Sq=Z3[0],_q=Z3[1],nA=(e,t,n)=>n>32?aq(e,t,n):sq(e,t,n),rA=(e,t,n)=>n>32?cq(e,t,n):oq(e,t,n);function Aq(e,t=24){const n=new Uint32Array(10);for(let r=24-t;r<24;r++){for(let c=0;c<10;c++)n[c]=e[c]^e[c+10]^e[c+20]^e[c+30]^e[c+40];for(let c=0;c<10;c+=2){const u=(c+8)%10,d=(c+2)%10,h=n[d],p=n[d+1],m=nA(h,p,1)^n[u],y=rA(h,p,1)^n[u+1];for(let v=0;v<50;v+=10)e[c+v]^=m,e[c+v+1]^=y}let s=e[2],a=e[3];for(let c=0;c<24;c++){const u=W3[c],d=nA(s,a,u),h=rA(s,a,u),p=Y3[c];s=e[p],a=e[p+1],e[p]=d,e[p+1]=h}for(let c=0;c<50;c+=10){for(let u=0;u<10;u++)n[u]=e[c+u];for(let u=0;u<10;u++)e[c+u]^=~n[(u+2)%10]&n[(u+4)%10]}e[0]^=Sq[r],e[1]^=_q[r]}Nr(n)}let xq=class Q3 extends ip{constructor(t,n,r,s=!1,a=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=t,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=a,os(r),!(0<t&&t<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=Lu(this.state)}clone(){return this._cloneInto()}keccak(){Fs(this.state32),Aq(this.state32,this.rounds),Fs(this.state32),this.posOut=0,this.pos=0}update(t){Zs(this),t=Kr(t),Cr(t);const{blockLen:n,state:r}=this,s=t.length;for(let a=0;a<s;){const c=Math.min(n-this.pos,s-a);for(let u=0;u<c;u++)r[this.pos++]^=t[a++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:n,pos:r,blockLen:s}=this;t[r]^=n,(n&128)!==0&&r===s-1&&this.keccak(),t[s-1]^=128,this.keccak()}writeInto(t){Zs(this,!1),Cr(t),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,a=t.length;s<a;){this.posOut>=r&&this.keccak();const c=Math.min(r-this.posOut,a-s);t.set(n.subarray(this.posOut,this.posOut+c),s),this.posOut+=c,s+=c}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return os(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(bw(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,Nr(this.state)}_cloneInto(t){const{blockLen:n,suffix:r,outputLen:s,rounds:a,enableXOF:c}=this;return t||(t=new Q3(n,r,s,c,a)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=a,t.suffix=r,t.outputLen=s,t.enableXOF=c,t.destroyed=this.destroyed,t}};const Rq=(e,t,n)=>sf(()=>new xq(t,e,n)),Oq=Rq(1,136,256/8);function Tq(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const s=BigInt(32),a=BigInt(4294967295),c=Number(n>>s&a),u=Number(n&a),d=r?4:0,h=r?0:4;e.setUint32(t+d,c,r),e.setUint32(t+h,u,r)}function Dq(e,t,n){return e&t^~e&n}function Iq(e,t,n){return e&t^e&n^t&n}let J3=class extends ip{constructor(t,n,r,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=t,this.outputLen=n,this.padOffset=r,this.isLE=s,this.buffer=new Uint8Array(t),this.view=$y(this.buffer)}update(t){Zs(this),t=Kr(t),Cr(t);const{view:n,buffer:r,blockLen:s}=this,a=t.length;for(let c=0;c<a;){const u=Math.min(s-this.pos,a-c);if(u===s){const d=$y(t);for(;s<=a-c;c+=s)this.process(d,c);continue}r.set(t.subarray(c,c+u),this.pos),this.pos+=u,c+=u,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Zs(this),bw(t,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:a}=this;let{pos:c}=this;n[c++]=128,Nr(this.buffer.subarray(c)),this.padOffset>s-c&&(this.process(r,0),c=0);for(let m=c;m<s;m++)n[m]=0;Tq(r,s-8,BigInt(this.length*8),a),this.process(r,0);const u=$y(t),d=this.outputLen;if(d%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const h=d/4,p=this.get();if(h>p.length)throw new Error("_sha2: outputLen bigger than state");for(let m=0;m<h;m++)u.setUint32(4*m,p[m],a)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:a,destroyed:c,pos:u}=this;return t.destroyed=c,t.finished=a,t.length=s,t.pos=u,s%n&&t.buffer.set(r),t}clone(){return this._cloneInto()}};const Bs=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),En=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),Sn=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),Cq=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Ps=new Uint32Array(64);let Nq=class extends J3{constructor(t=32){super(64,t,8,!1),this.A=Bs[0]|0,this.B=Bs[1]|0,this.C=Bs[2]|0,this.D=Bs[3]|0,this.E=Bs[4]|0,this.F=Bs[5]|0,this.G=Bs[6]|0,this.H=Bs[7]|0}get(){const{A:t,B:n,C:r,D:s,E:a,F:c,G:u,H:d}=this;return[t,n,r,s,a,c,u,d]}set(t,n,r,s,a,c,u,d){this.A=t|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=a|0,this.F=c|0,this.G=u|0,this.H=d|0}process(t,n){for(let m=0;m<16;m++,n+=4)Ps[m]=t.getUint32(n,!1);for(let m=16;m<64;m++){const y=Ps[m-15],v=Ps[m-2],w=ri(y,7)^ri(y,18)^y>>>3,E=ri(v,17)^ri(v,19)^v>>>10;Ps[m]=E+Ps[m-7]+w+Ps[m-16]|0}let{A:r,B:s,C:a,D:c,E:u,F:d,G:h,H:p}=this;for(let m=0;m<64;m++){const y=ri(u,6)^ri(u,11)^ri(u,25),v=p+y+Dq(u,d,h)+Cq[m]+Ps[m]|0,w=(ri(r,2)^ri(r,13)^ri(r,22))+Iq(r,s,a)|0;p=h,h=d,d=u,u=c+v|0,c=a,a=s,s=r,r=v+w|0}r=r+this.A|0,s=s+this.B|0,a=a+this.C|0,c=c+this.D|0,u=u+this.E|0,d=d+this.F|0,h=h+this.G|0,p=p+this.H|0,this.set(r,s,a,c,u,d,h,p)}roundClean(){Nr(Ps)}destroy(){this.set(0,0,0,0,0,0,0,0),Nr(this.buffer)}};const eD=F3(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),$q=eD[0],Uq=eD[1],ks=new Uint32Array(80),Ms=new Uint32Array(80);let vw=class extends J3{constructor(t=64){super(128,t,16,!1),this.Ah=Sn[0]|0,this.Al=Sn[1]|0,this.Bh=Sn[2]|0,this.Bl=Sn[3]|0,this.Ch=Sn[4]|0,this.Cl=Sn[5]|0,this.Dh=Sn[6]|0,this.Dl=Sn[7]|0,this.Eh=Sn[8]|0,this.El=Sn[9]|0,this.Fh=Sn[10]|0,this.Fl=Sn[11]|0,this.Gh=Sn[12]|0,this.Gl=Sn[13]|0,this.Hh=Sn[14]|0,this.Hl=Sn[15]|0}get(){const{Ah:t,Al:n,Bh:r,Bl:s,Ch:a,Cl:c,Dh:u,Dl:d,Eh:h,El:p,Fh:m,Fl:y,Gh:v,Gl:w,Hh:E,Hl:S}=this;return[t,n,r,s,a,c,u,d,h,p,m,y,v,w,E,S]}set(t,n,r,s,a,c,u,d,h,p,m,y,v,w,E,S){this.Ah=t|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=a|0,this.Cl=c|0,this.Dh=u|0,this.Dl=d|0,this.Eh=h|0,this.El=p|0,this.Fh=m|0,this.Fl=y|0,this.Gh=v|0,this.Gl=w|0,this.Hh=E|0,this.Hl=S|0}process(t,n){for(let D=0;D<16;D++,n+=4)ks[D]=t.getUint32(n),Ms[D]=t.getUint32(n+=4);for(let D=16;D<80;D++){const B=ks[D-15]|0,$=Ms[D-15]|0,N=qs(B,$,1)^qs(B,$,8)^J_(B,$,7),q=Hs(B,$,1)^Hs(B,$,8)^eA(B,$,7),H=ks[D-2]|0,k=Ms[D-2]|0,K=qs(H,k,19)^pu(H,k,61)^J_(H,k,6),Y=Hs(H,k,19)^gu(H,k,61)^eA(H,k,6),W=lq(q,Y,Ms[D-7],Ms[D-16]),le=uq(W,N,K,ks[D-7],ks[D-16]);ks[D]=le|0,Ms[D]=W|0}let{Ah:r,Al:s,Bh:a,Bl:c,Ch:u,Cl:d,Dh:h,Dl:p,Eh:m,El:y,Fh:v,Fl:w,Gh:E,Gl:S,Hh:A,Hl:I}=this;for(let D=0;D<80;D++){const B=qs(m,y,14)^qs(m,y,18)^pu(m,y,41),$=Hs(m,y,14)^Hs(m,y,18)^gu(m,y,41),N=m&v^~m&E,q=y&w^~y&S,H=fq(I,$,q,Uq[D],Ms[D]),k=dq(H,A,B,N,$q[D],ks[D]),K=H|0,Y=qs(r,s,28)^pu(r,s,34)^pu(r,s,39),W=Hs(r,s,28)^gu(r,s,34)^gu(r,s,39),le=r&a^r&u^a&u,re=s&c^s&d^c&d;A=E|0,I=S|0,E=v|0,S=w|0,v=m|0,w=y|0,{h:m,l:y}=Fr(h|0,p|0,k|0,K|0),h=u|0,p=d|0,u=a|0,d=c|0,a=r|0,c=s|0;const O=pw(K,W,re);r=gw(O,k,Y,le),s=O|0}({h:r,l:s}=Fr(this.Ah|0,this.Al|0,r|0,s|0)),{h:a,l:c}=Fr(this.Bh|0,this.Bl|0,a|0,c|0),{h:u,l:d}=Fr(this.Ch|0,this.Cl|0,u|0,d|0),{h,l:p}=Fr(this.Dh|0,this.Dl|0,h|0,p|0),{h:m,l:y}=Fr(this.Eh|0,this.El|0,m|0,y|0),{h:v,l:w}=Fr(this.Fh|0,this.Fl|0,v|0,w|0),{h:E,l:S}=Fr(this.Gh|0,this.Gl|0,E|0,S|0),{h:A,l:I}=Fr(this.Hh|0,this.Hl|0,A|0,I|0),this.set(r,s,a,c,u,d,h,p,m,y,v,w,E,S,A,I)}roundClean(){Nr(ks,Ms)}destroy(){Nr(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}},Bq=class extends vw{constructor(){super(48),this.Ah=En[0]|0,this.Al=En[1]|0,this.Bh=En[2]|0,this.Bl=En[3]|0,this.Ch=En[4]|0,this.Cl=En[5]|0,this.Dh=En[6]|0,this.Dl=En[7]|0,this.Eh=En[8]|0,this.El=En[9]|0,this.Fh=En[10]|0,this.Fl=En[11]|0,this.Gh=En[12]|0,this.Gl=En[13]|0,this.Hh=En[14]|0,this.Hl=En[15]|0}};const _n=Uint32Array.from([573645204,4230739756,2673172387,3360449730,596883563,1867755857,2520282905,1497426621,2519219938,2827943907,3193839141,1401305490,721525244,746961066,246885852,2177182882]);class Pq extends vw{constructor(){super(32),this.Ah=_n[0]|0,this.Al=_n[1]|0,this.Bh=_n[2]|0,this.Bl=_n[3]|0,this.Ch=_n[4]|0,this.Cl=_n[5]|0,this.Dh=_n[6]|0,this.Dl=_n[7]|0,this.Eh=_n[8]|0,this.El=_n[9]|0,this.Fh=_n[10]|0,this.Fl=_n[11]|0,this.Gh=_n[12]|0,this.Gl=_n[13]|0,this.Hh=_n[14]|0,this.Hl=_n[15]|0}}const sp=sf(()=>new Nq),kq=sf(()=>new vw),Mq=sf(()=>new Bq),Lq=sf(()=>new Pq),jq=Uint8Array.from([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9]),Vt=Uint32Array.from([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),ve=new Uint32Array(32);function Ls(e,t,n,r,s,a){const c=s[a],u=s[a+1];let d=ve[2*e],h=ve[2*e+1],p=ve[2*t],m=ve[2*t+1],y=ve[2*n],v=ve[2*n+1],w=ve[2*r],E=ve[2*r+1],S=pw(d,p,c);h=gw(S,h,m,u),d=S|0,{Dh:E,Dl:w}={Dh:E^h,Dl:w^d},{Dh:E,Dl:w}={Dh:rq(E,w),Dl:iq(E)},{h:v,l:y}=Fr(v,y,E,w),{Bh:m,Bl:p}={Bh:m^v,Bl:p^y},{Bh:m,Bl:p}={Bh:qs(m,p,24),Bl:Hs(m,p,24)},ve[2*e]=d,ve[2*e+1]=h,ve[2*t]=p,ve[2*t+1]=m,ve[2*n]=y,ve[2*n+1]=v,ve[2*r]=w,ve[2*r+1]=E}function js(e,t,n,r,s,a){const c=s[a],u=s[a+1];let d=ve[2*e],h=ve[2*e+1],p=ve[2*t],m=ve[2*t+1],y=ve[2*n],v=ve[2*n+1],w=ve[2*r],E=ve[2*r+1],S=pw(d,p,c);h=gw(S,h,m,u),d=S|0,{Dh:E,Dl:w}={Dh:E^h,Dl:w^d},{Dh:E,Dl:w}={Dh:qs(E,w,16),Dl:Hs(E,w,16)},{h:v,l:y}=Fr(v,y,E,w),{Bh:m,Bl:p}={Bh:m^v,Bl:p^y},{Bh:m,Bl:p}={Bh:pu(m,p,63),Bl:gu(m,p,63)},ve[2*e]=d,ve[2*e+1]=h,ve[2*t]=p,ve[2*t+1]=m,ve[2*n]=y,ve[2*n+1]=v,ve[2*r]=w,ve[2*r+1]=E}function zq(e,t={},n,r,s){if(os(n),e<0||e>n)throw new Error("outputLen bigger than keyLen");const{key:a,salt:c,personalization:u}=t;if(a!==void 0&&(a.length<1||a.length>n))throw new Error("key length must be undefined or 1.."+n);if(c!==void 0&&c.length!==r)throw new Error("salt must be undefined or "+r);if(u!==void 0&&u.length!==s)throw new Error("personalization must be undefined or "+s)}class qq extends ip{constructor(t,n){super(),this.finished=!1,this.destroyed=!1,this.length=0,this.pos=0,os(t),os(n),this.blockLen=t,this.outputLen=n,this.buffer=new Uint8Array(t),this.buffer32=Lu(this.buffer)}update(t){Zs(this),t=Kr(t),Cr(t);const{blockLen:n,buffer:r,buffer32:s}=this,a=t.length,c=t.byteOffset,u=t.buffer;for(let d=0;d<a;){this.pos===n&&(Fs(s),this.compress(s,0,!1),Fs(s),this.pos=0);const h=Math.min(n-this.pos,a-d),p=c+d;if(h===n&&!(p%4)&&d+h<a){const m=new Uint32Array(u,p,Math.floor((a-d)/4));Fs(m);for(let y=0;d+n<a;y+=s.length,d+=n)this.length+=n,this.compress(m,y,!1);Fs(m);continue}r.set(t.subarray(d,d+h),this.pos),this.pos+=h,this.length+=h,d+=h}return this}digestInto(t){Zs(this),bw(t,this);const{pos:n,buffer32:r}=this;this.finished=!0,Nr(this.buffer.subarray(n)),Fs(r),this.compress(r,0,!0),Fs(r);const s=Lu(t);this.get().forEach((a,c)=>s[c]=Fi(a))}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){const{buffer:n,length:r,finished:s,destroyed:a,outputLen:c,pos:u}=this;return t||(t=new this.constructor({dkLen:c})),t.set(...this.get()),t.buffer.set(n),t.destroyed=a,t.finished=s,t.length=r,t.pos=u,t.outputLen=c,t}clone(){return this._cloneInto()}}class Hq extends qq{constructor(t={}){const n=t.dkLen===void 0?64:t.dkLen;super(128,n),this.v0l=Vt[0]|0,this.v0h=Vt[1]|0,this.v1l=Vt[2]|0,this.v1h=Vt[3]|0,this.v2l=Vt[4]|0,this.v2h=Vt[5]|0,this.v3l=Vt[6]|0,this.v3h=Vt[7]|0,this.v4l=Vt[8]|0,this.v4h=Vt[9]|0,this.v5l=Vt[10]|0,this.v5h=Vt[11]|0,this.v6l=Vt[12]|0,this.v6h=Vt[13]|0,this.v7l=Vt[14]|0,this.v7h=Vt[15]|0,zq(n,t,64,16,16);let{key:r,personalization:s,salt:a}=t,c=0;if(r!==void 0&&(r=Kr(r),c=r.length),this.v0l^=this.outputLen|c<<8|65536|1<<24,a!==void 0){a=Kr(a);const u=Lu(a);this.v4l^=Fi(u[0]),this.v4h^=Fi(u[1]),this.v5l^=Fi(u[2]),this.v5h^=Fi(u[3])}if(s!==void 0){s=Kr(s);const u=Lu(s);this.v6l^=Fi(u[0]),this.v6h^=Fi(u[1]),this.v7l^=Fi(u[2]),this.v7h^=Fi(u[3])}if(r!==void 0){const u=new Uint8Array(this.blockLen);u.set(r),this.update(u)}}get(){let{v0l:t,v0h:n,v1l:r,v1h:s,v2l:a,v2h:c,v3l:u,v3h:d,v4l:h,v4h:p,v5l:m,v5h:y,v6l:v,v6h:w,v7l:E,v7h:S}=this;return[t,n,r,s,a,c,u,d,h,p,m,y,v,w,E,S]}set(t,n,r,s,a,c,u,d,h,p,m,y,v,w,E,S){this.v0l=t|0,this.v0h=n|0,this.v1l=r|0,this.v1h=s|0,this.v2l=a|0,this.v2h=c|0,this.v3l=u|0,this.v3h=d|0,this.v4l=h|0,this.v4h=p|0,this.v5l=m|0,this.v5h=y|0,this.v6l=v|0,this.v6h=w|0,this.v7l=E|0,this.v7h=S|0}compress(t,n,r){this.get().forEach((d,h)=>ve[h]=d),ve.set(Vt,16);let{h:s,l:a}=H3(BigInt(this.length));ve[24]=Vt[8]^a,ve[25]=Vt[9]^s,r&&(ve[28]=~ve[28],ve[29]=~ve[29]);let c=0;const u=jq;for(let d=0;d<12;d++)Ls(0,4,8,12,t,n+2*u[c++]),js(0,4,8,12,t,n+2*u[c++]),Ls(1,5,9,13,t,n+2*u[c++]),js(1,5,9,13,t,n+2*u[c++]),Ls(2,6,10,14,t,n+2*u[c++]),js(2,6,10,14,t,n+2*u[c++]),Ls(3,7,11,15,t,n+2*u[c++]),js(3,7,11,15,t,n+2*u[c++]),Ls(0,5,10,15,t,n+2*u[c++]),js(0,5,10,15,t,n+2*u[c++]),Ls(1,6,11,12,t,n+2*u[c++]),js(1,6,11,12,t,n+2*u[c++]),Ls(2,7,8,13,t,n+2*u[c++]),js(2,7,8,13,t,n+2*u[c++]),Ls(3,4,9,14,t,n+2*u[c++]),js(3,4,9,14,t,n+2*u[c++]);this.v0l^=ve[0]^ve[16],this.v0h^=ve[1]^ve[17],this.v1l^=ve[2]^ve[18],this.v1h^=ve[3]^ve[19],this.v2l^=ve[4]^ve[20],this.v2h^=ve[5]^ve[21],this.v3l^=ve[6]^ve[22],this.v3h^=ve[7]^ve[23],this.v4l^=ve[8]^ve[24],this.v4h^=ve[9]^ve[25],this.v5l^=ve[10]^ve[26],this.v5h^=ve[11]^ve[27],this.v6l^=ve[12]^ve[28],this.v6h^=ve[13]^ve[29],this.v7l^=ve[14]^ve[30],this.v7h^=ve[15]^ve[31],Nr(ve)}destroy(){this.destroyed=!0,Nr(this.buffer32),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const Fq=mq(e=>new Hq(e)),Vq="https://rpc.walletconnect.org/v1";function tD(e){const t=`Ethereum Signed Message:
${e.length}`,n=new TextEncoder().encode(t+e);return"0x"+Buffer.from(Oq(n)).toString("hex")}async function Gq(e,t,n,r,s,a){switch(n.t){case"eip191":return await Kq(e,t,n.s);case"eip1271":return await Yq(e,t,n.s,r,s,a);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${n.t}`)}}async function Kq(e,t,n){return(await HM({hash:tD(t),signature:n})).toLowerCase()===e.toLowerCase()}async function Yq(e,t,n,r,s,a){const c=Dc(r);if(!c.namespace||!c.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${r}`);try{const u="0x1626ba7e",d="0000000000000000000000000000000000000000000000000000000000000040",h=n.substring(2),p=(h.length/2).toString(16).padStart(64,"0"),m=(t.startsWith("0x")?t:tD(t)).substring(2),y=u+m+d+p+h,v=await fetch(`${a||Vq}/?chainId=${r}&projectId=${s}`,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({id:Wq(),jsonrpc:"2.0",method:"eth_call",params:[{to:e,data:y},"latest"]})}),{result:w}=await v.json();return w?w.slice(0,u.length).toLowerCase()===u.toLowerCase():!1}catch(u){return console.error("isValidEip1271Signature: ",u),!1}}function Wq(){return Date.now()+Math.floor(Math.random()*1e3)}function Xq(e){const t=atob(e),n=new Uint8Array(t.length);for(let c=0;c<t.length;c++)n[c]=t.charCodeAt(c);const r=n[0];if(r===0)throw new Error("No signatures found");const s=1+r*64;if(n.length<s)throw new Error("Transaction data too short for claimed signature count");if(n.length<100)throw new Error("Transaction too short");const a=Buffer.from(e,"base64").slice(1,65);return ef.encode(a)}function Zq(e){const t=new Uint8Array(Buffer.from(e,"base64")),n=Array.from("TransactionData::").map(a=>a.charCodeAt(0)),r=new Uint8Array(n.length+t.length);r.set(n),r.set(t,n.length);const s=Fq(r,{dkLen:32});return ef.encode(s)}function iA(e){const t=new Uint8Array(sp(Qq(e)));return ef.encode(t)}function Qq(e){if(e instanceof Uint8Array)return e;if(Array.isArray(e))return new Uint8Array(e);if(typeof e=="object"&&e!=null&&e.data)return new Uint8Array(Object.values(e.data));if(typeof e=="object"&&e)return new Uint8Array(Object.values(e));throw new Error("getNearUint8ArrayFromBytes: Unexpected result type from bytes array")}function sA(e){const t=Buffer.from(e,"base64"),n=OL(t).txn;if(!n)throw new Error("Invalid signed transaction: missing 'txn' field");const r=bL(n),s=Buffer.from("TX"),a=Buffer.concat([s,Buffer.from(r)]),c=Lq(a);return BL.encode(c).replace(/=+$/,"")}function Uy(e){const t=[];let n=BigInt(e);for(;n>=BigInt(128);)t.push(Number(n&BigInt(127)|BigInt(128))),n>>=BigInt(7);return t.push(Number(n)),Buffer.from(t)}function Jq(e){const t=Buffer.from(e.signed.bodyBytes,"base64"),n=Buffer.from(e.signed.authInfoBytes,"base64"),r=Buffer.from(e.signature.signature,"base64"),s=[];s.push(Buffer.from([10])),s.push(Uy(t.length)),s.push(t),s.push(Buffer.from([18])),s.push(Uy(n.length)),s.push(n),s.push(Buffer.from([26])),s.push(Uy(r.length)),s.push(r);const a=Buffer.concat(s),c=sp(a);return Buffer.from(c).toString("hex").toUpperCase()}var eH=Object.defineProperty,tH=Object.defineProperties,nH=Object.getOwnPropertyDescriptors,oA=Object.getOwnPropertySymbols,rH=Object.prototype.hasOwnProperty,iH=Object.prototype.propertyIsEnumerable,aA=(e,t,n)=>t in e?eH(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,sH=(e,t)=>{for(var n in t||(t={}))rH.call(t,n)&&aA(e,n,t[n]);if(oA)for(var n of oA(t))iH.call(t,n)&&aA(e,n,t[n]);return e},oH=(e,t)=>tH(e,nH(t));const aH="did:pkh:",Ew=e=>e?.split(":"),cH=e=>{const t=e&&Ew(e);if(t)return e.includes(aH)?t[3]:t[1]},X0=e=>{const t=e&&Ew(e);if(t)return t[2]+":"+t[3]},Th=e=>{const t=e&&Ew(e);if(t)return t.pop()};async function cA(e){const{cacao:t,projectId:n}=e,{s:r,p:s}=t,a=nD(s,s.iss),c=Th(s.iss);return await Gq(c,a,r,X0(s.iss),n)}const nD=(e,t)=>{const n=`${e.domain} wants you to sign in with your Ethereum account:`,r=Th(t);if(!e.aud&&!e.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let s=e.statement||void 0;const a=`URI: ${e.aud||e.uri}`,c=`Version: ${e.version}`,u=`Chain ID: ${cH(t)}`,d=`Nonce: ${e.nonce}`,h=`Issued At: ${e.iat}`,p=e.exp?`Expiration Time: ${e.exp}`:void 0,m=e.nbf?`Not Before: ${e.nbf}`:void 0,y=e.requestId?`Request ID: ${e.requestId}`:void 0,v=e.resources?`Resources:${e.resources.map(E=>`
- ${E}`).join("")}`:void 0,w=ah(e.resources);if(w){const E=zu(w);s=yH(s,E)}return[n,r,"",s,"",a,c,u,d,h,p,m,y,v].filter(E=>E!=null).join(`
`)};function lH(e){return Buffer.from(JSON.stringify(e)).toString("base64")}function uH(e){return JSON.parse(Buffer.from(e,"base64").toString("utf-8"))}function Wo(e){if(!e)throw new Error("No recap provided, value is undefined");if(!e.att)throw new Error("No `att` property found");const t=Object.keys(e.att);if(!(t!=null&&t.length))throw new Error("No resources found in `att` property");t.forEach(n=>{const r=e.att[n];if(Array.isArray(r))throw new Error(`Resource must be an object: ${n}`);if(typeof r!="object")throw new Error(`Resource must be an object: ${n}`);if(!Object.keys(r).length)throw new Error(`Resource object is empty: ${n}`);Object.keys(r).forEach(s=>{const a=r[s];if(!Array.isArray(a))throw new Error(`Ability limits ${s} must be an array of objects, found: ${a}`);if(!a.length)throw new Error(`Value of ${s} is empty array, must be an array with objects`);a.forEach(c=>{if(typeof c!="object")throw new Error(`Ability limits (${s}) must be an array of objects, found: ${c}`)})})})}function fH(e,t,n,r={}){return n?.sort((s,a)=>s.localeCompare(a)),{att:{[e]:dH(t,n,r)}}}function dH(e,t,n={}){t=t?.sort((s,a)=>s.localeCompare(a));const r=t.map(s=>({[`${e}/${s}`]:[n]}));return Object.assign({},...r)}function rD(e){return Wo(e),`urn:recap:${lH(e).replace(/=/g,"")}`}function zu(e){const t=uH(e.replace("urn:recap:",""));return Wo(t),t}function hH(e,t,n){const r=fH(e,t,n);return rD(r)}function pH(e){return e&&e.includes("urn:recap:")}function gH(e,t){const n=zu(e),r=zu(t),s=mH(n,r);return rD(s)}function mH(e,t){Wo(e),Wo(t);const n=Object.keys(e.att).concat(Object.keys(t.att)).sort((s,a)=>s.localeCompare(a)),r={att:{}};return n.forEach(s=>{var a,c;Object.keys(((a=e.att)==null?void 0:a[s])||{}).concat(Object.keys(((c=t.att)==null?void 0:c[s])||{})).sort((u,d)=>u.localeCompare(d)).forEach(u=>{var d,h;r.att[s]=oH(sH({},r.att[s]),{[u]:((d=e.att[s])==null?void 0:d[u])||((h=t.att[s])==null?void 0:h[u])})})}),r}function yH(e="",t){Wo(t);const n="I further authorize the stated URI to perform the following actions on my behalf: ";if(e.includes(n))return e;const r=[];let s=0;Object.keys(t.att).forEach(u=>{const d=Object.keys(t.att[u]).map(m=>({ability:m.split("/")[0],action:m.split("/")[1]}));d.sort((m,y)=>m.action.localeCompare(y.action));const h={};d.forEach(m=>{h[m.ability]||(h[m.ability]=[]),h[m.ability].push(m.action)});const p=Object.keys(h).map(m=>(s++,`(${s}) '${m}': '${h[m].join("', '")}' for '${u}'.`));r.push(p.join(", ").replace(".,","."))});const a=r.join(" "),c=`${n}${a}`;return`${e?e+" ":""}${c}`}function lA(e){var t;const n=zu(e);Wo(n);const r=(t=n.att)==null?void 0:t.eip155;return r?Object.keys(r).map(s=>s.split("/")[1]):[]}function uA(e){const t=zu(e);Wo(t);const n=[];return Object.values(t.att).forEach(r=>{Object.values(r).forEach(s=>{var a;(a=s?.[0])!=null&&a.chains&&n.push(s[0].chains)})}),[...new Set(n.flat())]}function ah(e){if(!e)return;const t=e?.[e.length-1];return pH(t)?t:void 0}/*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) */function iD(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function Z0(e){if(typeof e!="boolean")throw new Error(`boolean expected, not ${e}`)}function By(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function Hn(e,...t){if(!iD(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function fA(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function bH(e,t){Hn(e);const n=t.outputLen;if(e.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function Xs(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))}function Cc(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}function wH(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}const vH=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function EH(e){if(typeof e!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(e))}function Q0(e){if(typeof e=="string")e=EH(e);else if(iD(e))e=J0(e);else throw new Error("Uint8Array expected, got "+typeof e);return e}function SH(e,t){if(t==null||typeof t!="object")throw new Error("options must be defined");return Object.assign(e,t)}function _H(e,t){if(e.length!==t.length)return!1;let n=0;for(let r=0;r<e.length;r++)n|=e[r]^t[r];return n===0}const AH=(e,t)=>{function n(r,...s){if(Hn(r),!vH)throw new Error("Non little-endian hardware is not yet supported");if(e.nonceLength!==void 0){const h=s[0];if(!h)throw new Error("nonce / iv required");e.varSizeNonce?Hn(h):Hn(h,e.nonceLength)}const a=e.tagLength;a&&s[1]!==void 0&&Hn(s[1]);const c=t(r,...s),u=(h,p)=>{if(p!==void 0){if(h!==2)throw new Error("cipher output not supported");Hn(p)}};let d=!1;return{encrypt(h,p){if(d)throw new Error("cannot encrypt() twice with same key + nonce");return d=!0,Hn(h),u(c.encrypt.length,p),c.encrypt(h,p)},decrypt(h,p){if(Hn(h),a&&h.length<a)throw new Error("invalid ciphertext length: smaller than tagLength="+a);return u(c.decrypt.length,p),c.decrypt(h,p)}}}return Object.assign(n,e),n};function dA(e,t,n=!0){if(t===void 0)return new Uint8Array(e);if(t.length!==e)throw new Error("invalid output length, expected "+e+", got: "+t.length);if(n&&!RH(t))throw new Error("invalid output, must be aligned");return t}function hA(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const s=BigInt(32),a=BigInt(4294967295),c=Number(n>>s&a),u=Number(n&a);e.setUint32(t+4,c,r),e.setUint32(t+0,u,r)}function xH(e,t,n){Z0(n);const r=new Uint8Array(16),s=wH(r);return hA(s,0,BigInt(t),n),hA(s,8,BigInt(e),n),r}function RH(e){return e.byteOffset%4===0}function J0(e){return Uint8Array.from(e)}const sD=e=>Uint8Array.from(e.split("").map(t=>t.charCodeAt(0))),OH=sD("expand 16-byte k"),TH=sD("expand 32-byte k"),DH=Xs(OH),IH=Xs(TH);function Ve(e,t){return e<<t|e>>>32-t}function eb(e){return e.byteOffset%4===0}const Bd=64,CH=16,oD=2**32-1,pA=new Uint32Array;function NH(e,t,n,r,s,a,c,u){const d=s.length,h=new Uint8Array(Bd),p=Xs(h),m=eb(s)&&eb(a),y=m?Xs(s):pA,v=m?Xs(a):pA;for(let w=0;w<d;c++){if(e(t,n,r,p,c,u),c>=oD)throw new Error("arx: counter overflow");const E=Math.min(Bd,d-w);if(m&&E===Bd){const S=w/4;if(w%4!==0)throw new Error("arx: invalid block position");for(let A=0,I;A<CH;A++)I=S+A,v[I]=y[I]^p[A];w+=Bd;continue}for(let S=0,A;S<E;S++)A=w+S,a[A]=s[A]^h[S];w+=E}}function $H(e,t){const{allowShortKeys:n,extendNonceFn:r,counterLength:s,counterRight:a,rounds:c}=SH({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},t);if(typeof e!="function")throw new Error("core must be a function");return By(s),By(c),Z0(a),Z0(n),(u,d,h,p,m=0)=>{Hn(u),Hn(d),Hn(h);const y=h.length;if(p===void 0&&(p=new Uint8Array(y)),Hn(p),By(m),m<0||m>=oD)throw new Error("arx: counter overflow");if(p.length<y)throw new Error(`arx: output (${p.length}) is shorter than data (${y})`);const v=[];let w=u.length,E,S;if(w===32)v.push(E=J0(u)),S=IH;else if(w===16&&n)E=new Uint8Array(32),E.set(u),E.set(u,16),S=DH,v.push(E);else throw new Error(`arx: invalid 32-byte key, got length=${w}`);eb(d)||v.push(d=J0(d));const A=Xs(E);if(r){if(d.length!==24)throw new Error("arx: extended nonce must be 24 bytes");r(S,A,Xs(d.subarray(0,16)),A),d=d.subarray(16)}const I=16-s;if(I!==d.length)throw new Error(`arx: nonce must be ${I} or 16 bytes`);if(I!==12){const B=new Uint8Array(12);B.set(d,a?0:12-d.length),d=B,v.push(d)}const D=Xs(d);return NH(e,S,A,D,h,p,m,c),Cc(...v),p}}const un=(e,t)=>e[t++]&255|(e[t++]&255)<<8;class UH{constructor(t){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,t=Q0(t),Hn(t,32);const n=un(t,0),r=un(t,2),s=un(t,4),a=un(t,6),c=un(t,8),u=un(t,10),d=un(t,12),h=un(t,14);this.r[0]=n&8191,this.r[1]=(n>>>13|r<<3)&8191,this.r[2]=(r>>>10|s<<6)&7939,this.r[3]=(s>>>7|a<<9)&8191,this.r[4]=(a>>>4|c<<12)&255,this.r[5]=c>>>1&8190,this.r[6]=(c>>>14|u<<2)&8191,this.r[7]=(u>>>11|d<<5)&8065,this.r[8]=(d>>>8|h<<8)&8191,this.r[9]=h>>>5&127;for(let p=0;p<8;p++)this.pad[p]=un(t,16+2*p)}process(t,n,r=!1){const s=r?0:2048,{h:a,r:c}=this,u=c[0],d=c[1],h=c[2],p=c[3],m=c[4],y=c[5],v=c[6],w=c[7],E=c[8],S=c[9],A=un(t,n+0),I=un(t,n+2),D=un(t,n+4),B=un(t,n+6),$=un(t,n+8),N=un(t,n+10),q=un(t,n+12),H=un(t,n+14);let k=a[0]+(A&8191),K=a[1]+((A>>>13|I<<3)&8191),Y=a[2]+((I>>>10|D<<6)&8191),W=a[3]+((D>>>7|B<<9)&8191),le=a[4]+((B>>>4|$<<12)&8191),re=a[5]+($>>>1&8191),O=a[6]+(($>>>14|N<<2)&8191),R=a[7]+((N>>>11|q<<5)&8191),M=a[8]+((q>>>8|H<<8)&8191),F=a[9]+(H>>>5|s),X=0,C=X+k*u+K*(5*S)+Y*(5*E)+W*(5*w)+le*(5*v);X=C>>>13,C&=8191,C+=re*(5*y)+O*(5*m)+R*(5*p)+M*(5*h)+F*(5*d),X+=C>>>13,C&=8191;let V=X+k*d+K*u+Y*(5*S)+W*(5*E)+le*(5*w);X=V>>>13,V&=8191,V+=re*(5*v)+O*(5*y)+R*(5*m)+M*(5*p)+F*(5*h),X+=V>>>13,V&=8191;let ee=X+k*h+K*d+Y*u+W*(5*S)+le*(5*E);X=ee>>>13,ee&=8191,ee+=re*(5*w)+O*(5*v)+R*(5*y)+M*(5*m)+F*(5*p),X+=ee>>>13,ee&=8191;let se=X+k*p+K*h+Y*d+W*u+le*(5*S);X=se>>>13,se&=8191,se+=re*(5*E)+O*(5*w)+R*(5*v)+M*(5*y)+F*(5*m),X+=se>>>13,se&=8191;let te=X+k*m+K*p+Y*h+W*d+le*u;X=te>>>13,te&=8191,te+=re*(5*S)+O*(5*E)+R*(5*w)+M*(5*v)+F*(5*y),X+=te>>>13,te&=8191;let pe=X+k*y+K*m+Y*p+W*h+le*d;X=pe>>>13,pe&=8191,pe+=re*u+O*(5*S)+R*(5*E)+M*(5*w)+F*(5*v),X+=pe>>>13,pe&=8191;let me=X+k*v+K*y+Y*m+W*p+le*h;X=me>>>13,me&=8191,me+=re*d+O*u+R*(5*S)+M*(5*E)+F*(5*w),X+=me>>>13,me&=8191;let Te=X+k*w+K*v+Y*y+W*m+le*p;X=Te>>>13,Te&=8191,Te+=re*h+O*d+R*u+M*(5*S)+F*(5*E),X+=Te>>>13,Te&=8191;let Ee=X+k*E+K*w+Y*v+W*y+le*m;X=Ee>>>13,Ee&=8191,Ee+=re*p+O*h+R*d+M*u+F*(5*S),X+=Ee>>>13,Ee&=8191;let xe=X+k*S+K*E+Y*w+W*v+le*y;X=xe>>>13,xe&=8191,xe+=re*m+O*p+R*h+M*d+F*u,X+=xe>>>13,xe&=8191,X=(X<<2)+X|0,X=X+C|0,C=X&8191,X=X>>>13,V+=X,a[0]=C,a[1]=V,a[2]=ee,a[3]=se,a[4]=te,a[5]=pe,a[6]=me,a[7]=Te,a[8]=Ee,a[9]=xe}finalize(){const{h:t,pad:n}=this,r=new Uint16Array(10);let s=t[1]>>>13;t[1]&=8191;for(let u=2;u<10;u++)t[u]+=s,s=t[u]>>>13,t[u]&=8191;t[0]+=s*5,s=t[0]>>>13,t[0]&=8191,t[1]+=s,s=t[1]>>>13,t[1]&=8191,t[2]+=s,r[0]=t[0]+5,s=r[0]>>>13,r[0]&=8191;for(let u=1;u<10;u++)r[u]=t[u]+s,s=r[u]>>>13,r[u]&=8191;r[9]-=8192;let a=(s^1)-1;for(let u=0;u<10;u++)r[u]&=a;a=~a;for(let u=0;u<10;u++)t[u]=t[u]&a|r[u];t[0]=(t[0]|t[1]<<13)&65535,t[1]=(t[1]>>>3|t[2]<<10)&65535,t[2]=(t[2]>>>6|t[3]<<7)&65535,t[3]=(t[3]>>>9|t[4]<<4)&65535,t[4]=(t[4]>>>12|t[5]<<1|t[6]<<14)&65535,t[5]=(t[6]>>>2|t[7]<<11)&65535,t[6]=(t[7]>>>5|t[8]<<8)&65535,t[7]=(t[8]>>>8|t[9]<<5)&65535;let c=t[0]+n[0];t[0]=c&65535;for(let u=1;u<8;u++)c=(t[u]+n[u]|0)+(c>>>16)|0,t[u]=c&65535;Cc(r)}update(t){fA(this),t=Q0(t),Hn(t);const{buffer:n,blockLen:r}=this,s=t.length;for(let a=0;a<s;){const c=Math.min(r-this.pos,s-a);if(c===r){for(;r<=s-a;a+=r)this.process(t,a);continue}n.set(t.subarray(a,a+c),this.pos),this.pos+=c,a+=c,this.pos===r&&(this.process(n,0,!1),this.pos=0)}return this}destroy(){Cc(this.h,this.r,this.buffer,this.pad)}digestInto(t){fA(this),bH(t,this),this.finished=!0;const{buffer:n,h:r}=this;let{pos:s}=this;if(s){for(n[s++]=1;s<16;s++)n[s]=0;this.process(n,0,!0)}this.finalize();let a=0;for(let c=0;c<8;c++)t[a++]=r[c]>>>0,t[a++]=r[c]>>>8;return t}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}}function BH(e){const t=(r,s)=>e(s).update(Q0(r)).digest(),n=e(new Uint8Array(32));return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=r=>e(r),t}const PH=BH(e=>new UH(e));function kH(e,t,n,r,s,a=20){let c=e[0],u=e[1],d=e[2],h=e[3],p=t[0],m=t[1],y=t[2],v=t[3],w=t[4],E=t[5],S=t[6],A=t[7],I=s,D=n[0],B=n[1],$=n[2],N=c,q=u,H=d,k=h,K=p,Y=m,W=y,le=v,re=w,O=E,R=S,M=A,F=I,X=D,C=B,V=$;for(let se=0;se<a;se+=2)N=N+K|0,F=Ve(F^N,16),re=re+F|0,K=Ve(K^re,12),N=N+K|0,F=Ve(F^N,8),re=re+F|0,K=Ve(K^re,7),q=q+Y|0,X=Ve(X^q,16),O=O+X|0,Y=Ve(Y^O,12),q=q+Y|0,X=Ve(X^q,8),O=O+X|0,Y=Ve(Y^O,7),H=H+W|0,C=Ve(C^H,16),R=R+C|0,W=Ve(W^R,12),H=H+W|0,C=Ve(C^H,8),R=R+C|0,W=Ve(W^R,7),k=k+le|0,V=Ve(V^k,16),M=M+V|0,le=Ve(le^M,12),k=k+le|0,V=Ve(V^k,8),M=M+V|0,le=Ve(le^M,7),N=N+Y|0,V=Ve(V^N,16),R=R+V|0,Y=Ve(Y^R,12),N=N+Y|0,V=Ve(V^N,8),R=R+V|0,Y=Ve(Y^R,7),q=q+W|0,F=Ve(F^q,16),M=M+F|0,W=Ve(W^M,12),q=q+W|0,F=Ve(F^q,8),M=M+F|0,W=Ve(W^M,7),H=H+le|0,X=Ve(X^H,16),re=re+X|0,le=Ve(le^re,12),H=H+le|0,X=Ve(X^H,8),re=re+X|0,le=Ve(le^re,7),k=k+K|0,C=Ve(C^k,16),O=O+C|0,K=Ve(K^O,12),k=k+K|0,C=Ve(C^k,8),O=O+C|0,K=Ve(K^O,7);let ee=0;r[ee++]=c+N|0,r[ee++]=u+q|0,r[ee++]=d+H|0,r[ee++]=h+k|0,r[ee++]=p+K|0,r[ee++]=m+Y|0,r[ee++]=y+W|0,r[ee++]=v+le|0,r[ee++]=w+re|0,r[ee++]=E+O|0,r[ee++]=S+R|0,r[ee++]=A+M|0,r[ee++]=I+F|0,r[ee++]=D+X|0,r[ee++]=B+C|0,r[ee++]=$+V|0}const MH=$H(kH,{counterRight:!1,counterLength:4,allowShortKeys:!1}),LH=new Uint8Array(16),gA=(e,t)=>{e.update(t);const n=t.length%16;n&&e.update(LH.subarray(n))},jH=new Uint8Array(32);function mA(e,t,n,r,s){const a=e(t,n,jH),c=PH.create(a);s&&gA(c,s),gA(c,r);const u=xH(r.length,s?s.length:0,!0);c.update(u);const d=c.digest();return Cc(a,u),d}const zH=e=>(t,n,r)=>({encrypt(s,a){const c=s.length;a=dA(c+16,a,!1),a.set(s);const u=a.subarray(0,-16);e(t,n,u,u,1);const d=mA(e,t,n,u,r);return a.set(d,c),Cc(d),a},decrypt(s,a){a=dA(s.length-16,a,!1);const c=s.subarray(0,-16),u=s.subarray(-16),d=mA(e,t,n,c,r);if(!_H(u,d))throw new Error("invalid tag");return a.set(s.subarray(0,-16)),e(t,n,a,a,1),Cc(d),a}}),aD=AH({blockSize:64,nonceLength:12,tagLength:16},zH(MH));let cD=class extends ip{constructor(t,n){super(),this.finished=!1,this.destroyed=!1,yw(t);const r=Kr(n);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,a=new Uint8Array(s);a.set(r.length>s?t.create().update(r).digest():r);for(let c=0;c<a.length;c++)a[c]^=54;this.iHash.update(a),this.oHash=t.create();for(let c=0;c<a.length;c++)a[c]^=106;this.oHash.update(a),Nr(a)}update(t){return Zs(this),this.iHash.update(t),this}digestInto(t){Zs(this),Cr(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:a,blockLen:c,outputLen:u}=this;return t=t,t.finished=s,t.destroyed=a,t.blockLen=c,t.outputLen=u,t.oHash=n._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const op=(e,t,n)=>new cD(e,t).update(n).digest();op.create=(e,t)=>new cD(e,t);function qH(e,t,n){return yw(e),n===void 0&&(n=new Uint8Array(e.outputLen)),op(e,Kr(n),Kr(t))}const Py=Uint8Array.from([0]),yA=Uint8Array.of();function HH(e,t,n,r=32){yw(e),os(r);const s=e.outputLen;if(r>255*s)throw new Error("Length should be <= 255*HashLen");const a=Math.ceil(r/s);n===void 0&&(n=yA);const c=new Uint8Array(a*s),u=op.create(e,t),d=u._cloneInto(),h=new Uint8Array(u.outputLen);for(let p=0;p<a;p++)Py[0]=p+1,d.update(p===0?yA:h).update(n).update(Py).digestInto(h),c.set(h,s*p),u._cloneInto(d);return u.destroy(),d.destroy(),Nr(h,Py),c.slice(0,r)}const FH=(e,t,n,r,s)=>HH(e,qH(e,t,n),r,s),ap=sp,Sw=BigInt(0),tb=BigInt(1);function Dh(e,t){if(typeof t!="boolean")throw new Error(e+" boolean expected, got "+t)}function Pd(e){const t=e.toString(16);return t.length&1?"0"+t:t}function lD(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return e===""?Sw:BigInt("0x"+e)}function cp(e){return lD(ju(e))}function Ih(e){return Cr(e),lD(ju(Uint8Array.from(e).reverse()))}function _w(e,t){return ww(e.toString(16).padStart(t*2,"0"))}function Aw(e,t){return _w(e,t).reverse()}function qn(e,t,n){let r;if(typeof t=="string")try{r=ww(t)}catch(a){throw new Error(e+" must be hex string or Uint8Array, cause: "+a)}else if(mw(t))r=Uint8Array.from(t);else throw new Error(e+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(e+" of length "+n+" expected, got "+s);return r}const ky=e=>typeof e=="bigint"&&Sw<=e;function VH(e,t,n){return ky(e)&&ky(t)&&ky(n)&&t<=e&&e<n}function nb(e,t,n,r){if(!VH(t,n,r))throw new Error("expected valid "+e+": "+n+" <= n < "+r+", got "+t)}function GH(e){let t;for(t=0;e>Sw;e>>=tb,t+=1);return t}const lp=e=>(tb<<BigInt(e))-tb;function KH(e,t,n){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");const r=y=>new Uint8Array(y),s=y=>Uint8Array.of(y);let a=r(e),c=r(e),u=0;const d=()=>{a.fill(1),c.fill(0),u=0},h=(...y)=>n(c,a,...y),p=(y=r(0))=>{c=h(s(0),y),a=h(),y.length!==0&&(c=h(s(1),y),a=h())},m=()=>{if(u++>=1e3)throw new Error("drbg: tried 1000 values");let y=0;const v=[];for(;y<t;){a=h();const w=a.slice();v.push(w),y+=a.length}return Lo(...v)};return(y,v)=>{d(),p(y);let w;for(;!(w=v(m()));)p();return d(),w}}function up(e,t,n={}){if(!e||typeof e!="object")throw new Error("expected valid options object");function r(s,a,c){const u=e[s];if(c&&u===void 0)return;const d=typeof u;if(d!==a||u===null)throw new Error(`param "${s}" is invalid: expected ${a}, got ${d}`)}Object.entries(t).forEach(([s,a])=>r(s,a,!1)),Object.entries(n).forEach(([s,a])=>r(s,a,!0))}function bA(e){const t=new WeakMap;return(n,...r)=>{const s=t.get(n);if(s!==void 0)return s;const a=e(n,...r);return t.set(n,a),a}}const Vn=BigInt(0),Dn=BigInt(1),jo=BigInt(2),YH=BigInt(3),uD=BigInt(4),fD=BigInt(5),dD=BigInt(8);function Dr(e,t){const n=e%t;return n>=Vn?n:t+n}function Hr(e,t,n){let r=e;for(;t-- >Vn;)r*=r,r%=n;return r}function wA(e,t){if(e===Vn)throw new Error("invert: expected non-zero number");if(t<=Vn)throw new Error("invert: expected positive modulus, got "+t);let n=Dr(e,t),r=t,s=Vn,a=Dn;for(;n!==Vn;){const c=r/n,u=r%n,d=s-a*c;r=n,n=u,s=a,a=d}if(r!==Dn)throw new Error("invert: does not exist");return Dr(s,t)}function hD(e,t){const n=(e.ORDER+Dn)/uD,r=e.pow(t,n);if(!e.eql(e.sqr(r),t))throw new Error("Cannot find square root");return r}function WH(e,t){const n=(e.ORDER-fD)/dD,r=e.mul(t,jo),s=e.pow(r,n),a=e.mul(t,s),c=e.mul(e.mul(a,jo),s),u=e.mul(a,e.sub(c,e.ONE));if(!e.eql(e.sqr(u),t))throw new Error("Cannot find square root");return u}function XH(e){if(e<BigInt(3))throw new Error("sqrt is not defined for small field");let t=e-Dn,n=0;for(;t%jo===Vn;)t/=jo,n++;let r=jo;const s=Fc(e);for(;vA(s,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return hD;let a=s.pow(r,t);const c=(t+Dn)/jo;return function(u,d){if(u.is0(d))return d;if(vA(u,d)!==1)throw new Error("Cannot find square root");let h=n,p=u.mul(u.ONE,a),m=u.pow(d,t),y=u.pow(d,c);for(;!u.eql(m,u.ONE);){if(u.is0(m))return u.ZERO;let v=1,w=u.sqr(m);for(;!u.eql(w,u.ONE);)if(v++,w=u.sqr(w),v===h)throw new Error("Cannot find square root");const E=Dn<<BigInt(h-v-1),S=u.pow(p,E);h=v,p=u.sqr(S),m=u.mul(m,p),y=u.mul(y,S)}return y}}function ZH(e){return e%uD===YH?hD:e%dD===fD?WH:XH(e)}const QH=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function JH(e){const t={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},n=QH.reduce((r,s)=>(r[s]="function",r),t);return up(e,n),e}function eF(e,t,n){if(n<Vn)throw new Error("invalid exponent, negatives unsupported");if(n===Vn)return e.ONE;if(n===Dn)return t;let r=e.ONE,s=t;for(;n>Vn;)n&Dn&&(r=e.mul(r,s)),s=e.sqr(s),n>>=Dn;return r}function pD(e,t,n=!1){const r=new Array(t.length).fill(n?e.ZERO:void 0),s=t.reduce((c,u,d)=>e.is0(u)?c:(r[d]=c,e.mul(c,u)),e.ONE),a=e.inv(s);return t.reduceRight((c,u,d)=>e.is0(u)?c:(r[d]=e.mul(c,r[d]),e.mul(c,u)),a),r}function vA(e,t){const n=(e.ORDER-Dn)/jo,r=e.pow(t,n),s=e.eql(r,e.ONE),a=e.eql(r,e.ZERO),c=e.eql(r,e.neg(e.ONE));if(!s&&!a&&!c)throw new Error("invalid Legendre symbol result");return s?1:a?0:-1}function tF(e,t){t!==void 0&&os(t);const n=t!==void 0?t:e.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function Fc(e,t,n=!1,r={}){if(e<=Vn)throw new Error("invalid field: expected ORDER > 0, got "+e);let s,a;if(typeof t=="object"&&t!=null){if(r.sqrt||n)throw new Error("cannot specify opts in two arguments");const p=t;p.BITS&&(s=p.BITS),p.sqrt&&(a=p.sqrt),typeof p.isLE=="boolean"&&(n=p.isLE)}else typeof t=="number"&&(s=t),r.sqrt&&(a=r.sqrt);const{nBitLength:c,nByteLength:u}=tF(e,s);if(u>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let d;const h=Object.freeze({ORDER:e,isLE:n,BITS:c,BYTES:u,MASK:lp(c),ZERO:Vn,ONE:Dn,create:p=>Dr(p,e),isValid:p=>{if(typeof p!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof p);return Vn<=p&&p<e},is0:p=>p===Vn,isValidNot0:p=>!h.is0(p)&&h.isValid(p),isOdd:p=>(p&Dn)===Dn,neg:p=>Dr(-p,e),eql:(p,m)=>p===m,sqr:p=>Dr(p*p,e),add:(p,m)=>Dr(p+m,e),sub:(p,m)=>Dr(p-m,e),mul:(p,m)=>Dr(p*m,e),pow:(p,m)=>eF(h,p,m),div:(p,m)=>Dr(p*wA(m,e),e),sqrN:p=>p*p,addN:(p,m)=>p+m,subN:(p,m)=>p-m,mulN:(p,m)=>p*m,inv:p=>wA(p,e),sqrt:a||(p=>(d||(d=ZH(e)),d(h,p))),toBytes:p=>n?Aw(p,u):_w(p,u),fromBytes:p=>{if(p.length!==u)throw new Error("Field.fromBytes: expected "+u+" bytes, got "+p.length);return n?Ih(p):cp(p)},invertBatch:p=>pD(h,p),cmov:(p,m,y)=>y?m:p});return Object.freeze(h)}function gD(e){if(typeof e!="bigint")throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function mD(e){const t=gD(e);return t+Math.ceil(t/2)}function nF(e,t,n=!1){const r=e.length,s=gD(t),a=mD(t);if(r<16||r<a||r>1024)throw new Error("expected "+a+"-1024 bytes of input, got "+r);const c=n?Ih(e):cp(e),u=Dr(c,t-Dn)+Dn;return n?Aw(u,s):_w(u,s)}const Nc=BigInt(0),zo=BigInt(1);function _u(e,t){const n=t.negate();return e?n:t}function rF(e,t,n){const r=a=>a.pz,s=pD(e.Fp,n.map(r));return n.map((a,c)=>a.toAffine(s[c])).map(e.fromAffine)}function yD(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+e)}function My(e,t){yD(e,t);const n=Math.ceil(t/e)+1,r=2**(e-1),s=2**e,a=lp(e),c=BigInt(e);return{windows:n,windowSize:r,mask:a,maxNumber:s,shiftBy:c}}function EA(e,t,n){const{windowSize:r,mask:s,maxNumber:a,shiftBy:c}=n;let u=Number(e&s),d=e>>c;u>r&&(u-=a,d+=zo);const h=t*r,p=h+Math.abs(u)-1,m=u===0,y=u<0,v=t%2!==0;return{nextN:d,offset:p,isZero:m,isNeg:y,isNegF:v,offsetF:h}}function iF(e,t){if(!Array.isArray(e))throw new Error("array expected");e.forEach((n,r)=>{if(!(n instanceof t))throw new Error("invalid point at index "+r)})}function sF(e,t){if(!Array.isArray(e))throw new Error("array of scalars expected");e.forEach((n,r)=>{if(!t.isValid(n))throw new Error("invalid scalar at index "+r)})}const Ly=new WeakMap,bD=new WeakMap;function jy(e){return bD.get(e)||1}function SA(e){if(e!==Nc)throw new Error("invalid wNAF")}function oF(e,t){return{constTimeNegate:_u,hasPrecomputes(n){return jy(n)!==1},unsafeLadder(n,r,s=e.ZERO){let a=n;for(;r>Nc;)r&zo&&(s=s.add(a)),a=a.double(),r>>=zo;return s},precomputeWindow(n,r){const{windows:s,windowSize:a}=My(r,t),c=[];let u=n,d=u;for(let h=0;h<s;h++){d=u,c.push(d);for(let p=1;p<a;p++)d=d.add(u),c.push(d);u=d.double()}return c},wNAF(n,r,s){let a=e.ZERO,c=e.BASE;const u=My(n,t);for(let d=0;d<u.windows;d++){const{nextN:h,offset:p,isZero:m,isNeg:y,isNegF:v,offsetF:w}=EA(s,d,u);s=h,m?c=c.add(_u(v,r[w])):a=a.add(_u(y,r[p]))}return SA(s),{p:a,f:c}},wNAFUnsafe(n,r,s,a=e.ZERO){const c=My(n,t);for(let u=0;u<c.windows&&s!==Nc;u++){const{nextN:d,offset:h,isZero:p,isNeg:m}=EA(s,u,c);if(s=d,!p){const y=r[h];a=a.add(m?y.negate():y)}}return SA(s),a},getPrecomputes(n,r,s){let a=Ly.get(r);return a||(a=this.precomputeWindow(r,n),n!==1&&(typeof s=="function"&&(a=s(a)),Ly.set(r,a))),a},wNAFCached(n,r,s){const a=jy(n);return this.wNAF(a,this.getPrecomputes(a,n,s),r)},wNAFCachedUnsafe(n,r,s,a){const c=jy(n);return c===1?this.unsafeLadder(n,r,a):this.wNAFUnsafe(c,this.getPrecomputes(c,n,s),r,a)},setWindowSize(n,r){yD(r,t),bD.set(n,r),Ly.delete(n)}}}function aF(e,t,n,r){let s=t,a=e.ZERO,c=e.ZERO;for(;n>Nc||r>Nc;)n&zo&&(a=a.add(s)),r&zo&&(c=c.add(s)),s=s.double(),n>>=zo,r>>=zo;return{p1:a,p2:c}}function cF(e,t,n,r){iF(n,e),sF(r,t);const s=n.length,a=r.length;if(s!==a)throw new Error("arrays of points and scalars must have equal length");const c=e.ZERO,u=GH(BigInt(s));let d=1;u>12?d=u-3:u>4?d=u-2:u>0&&(d=2);const h=lp(d),p=new Array(Number(h)+1).fill(c),m=Math.floor((t.BITS-1)/d)*d;let y=c;for(let v=m;v>=0;v-=d){p.fill(c);for(let E=0;E<a;E++){const S=r[E],A=Number(S>>BigInt(v)&h);p[A]=p[A].add(n[E])}let w=c;for(let E=p.length-1,S=c;E>0;E--)S=S.add(p[E]),w=w.add(S);if(y=y.add(w),v!==0)for(let E=0;E<d;E++)y=y.double()}return y}function _A(e,t){if(t){if(t.ORDER!==e)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return JH(t),t}else return Fc(e)}function lF(e,t,n={}){if(!t||typeof t!="object")throw new Error(`expected valid ${e} CURVE object`);for(const c of["p","n","h"]){const u=t[c];if(!(typeof u=="bigint"&&u>Nc))throw new Error(`CURVE.${c} must be positive bigint`)}const r=_A(t.p,n.Fp),s=_A(t.n,n.Fn),a=["Gx","Gy","a","b"];for(const c of a)if(!r.isValid(t[c]))throw new Error(`CURVE.${c} must be valid field element of CURVE.Fp`);return{Fp:r,Fn:s}}BigInt(0),BigInt(1),BigInt(2),BigInt(8);const su=BigInt(0),nc=BigInt(1),kd=BigInt(2);function uF(e){return up(e,{adjustScalarBytes:"function",powPminus2:"function"}),Object.freeze({...e})}function fF(e){const t=uF(e),{P:n,type:r,adjustScalarBytes:s,powPminus2:a,randomBytes:c}=t,u=r==="x25519";if(!u&&r!=="x448")throw new Error("invalid type");const d=c||Hc,h=u?255:448,p=u?32:56,m=BigInt(u?9:5),y=BigInt(u?121665:39081),v=u?kd**BigInt(254):kd**BigInt(447),w=u?BigInt(8)*kd**BigInt(251)-nc:BigInt(4)*kd**BigInt(445)-nc,E=v+w+nc,S=k=>Dr(k,n),A=I(m);function I(k){return Aw(S(k),p)}function D(k){const K=qn("u coordinate",k,p);return u&&(K[31]&=127),S(Ih(K))}function B(k){return Ih(s(qn("scalar",k,p)))}function $(k,K){const Y=H(D(K),B(k));if(Y===su)throw new Error("invalid private or public key received");return I(Y)}function N(k){return $(k,A)}function q(k,K,Y){const W=S(k*(K-Y));return K=S(K-W),Y=S(Y+W),{x_2:K,x_3:Y}}function H(k,K){nb("u",k,su,n),nb("scalar",K,v,E);const Y=K,W=k;let le=nc,re=su,O=k,R=nc,M=su;for(let X=BigInt(h-1);X>=su;X--){const C=Y>>X&nc;M^=C,{x_2:le,x_3:O}=q(M,le,O),{x_2:re,x_3:R}=q(M,re,R),M=C;const V=le+re,ee=S(V*V),se=le-re,te=S(se*se),pe=ee-te,me=O+R,Te=O-R,Ee=S(Te*V),xe=S(me*se),He=Ee+xe,pt=Ee-xe;O=S(He*He),R=S(W*S(pt*pt)),le=S(ee*te),re=S(pe*(ee+S(y*pe)))}({x_2:le,x_3:O}=q(M,le,O)),{x_2:re,x_3:R}=q(M,re,R);const F=a(re);return S(le*F)}return{scalarMult:$,scalarMultBase:N,getSharedSecret:(k,K)=>$(k,K),getPublicKey:k=>N(k),utils:{randomPrivateKey:()=>d(p)},GuBytes:A.slice()}}BigInt(0);const dF=BigInt(1),AA=BigInt(2),hF=BigInt(3),pF=BigInt(5);BigInt(8);const wD={p:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function gF(e){const t=BigInt(10),n=BigInt(20),r=BigInt(40),s=BigInt(80),a=wD.p,c=e*e%a*e%a,u=Hr(c,AA,a)*c%a,d=Hr(u,dF,a)*e%a,h=Hr(d,pF,a)*d%a,p=Hr(h,t,a)*h%a,m=Hr(p,n,a)*p%a,y=Hr(m,r,a)*m%a,v=Hr(y,s,a)*y%a,w=Hr(v,s,a)*y%a,E=Hr(w,t,a)*h%a;return{pow_p_5_8:Hr(E,AA,a)*e%a,b2:c}}function mF(e){return e[0]&=248,e[31]&=127,e[31]|=64,e}const rb=(()=>{const e=wD.p;return fF({P:e,type:"x25519",powPminus2:t=>{const{pow_p_5_8:n,b2:r}=gF(t);return Dr(Hr(n,hF,e)*r,e)},adjustScalarBytes:mF})})();function xA(e){e.lowS!==void 0&&Dh("lowS",e.lowS),e.prehash!==void 0&&Dh("prehash",e.prehash)}class yF extends Error{constructor(t=""){super(t)}}const Gi={Err:yF,_tlv:{encode:(e,t)=>{const{Err:n}=Gi;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(t.length&1)throw new n("tlv.encode: unpadded data");const r=t.length/2,s=Pd(r);if(s.length/2&128)throw new n("tlv.encode: long form length too big");const a=r>127?Pd(s.length/2|128):"";return Pd(e)+a+s+t},decode(e,t){const{Err:n}=Gi;let r=0;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(t.length<2||t[r++]!==e)throw new n("tlv.decode: wrong tlv");const s=t[r++],a=!!(s&128);let c=0;if(!a)c=s;else{const d=s&127;if(!d)throw new n("tlv.decode(long): indefinite length not supported");if(d>4)throw new n("tlv.decode(long): byte length is too big");const h=t.subarray(r,r+d);if(h.length!==d)throw new n("tlv.decode: length bytes not complete");if(h[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const p of h)c=c<<8|p;if(r+=d,c<128)throw new n("tlv.decode(long): not minimal encoding")}const u=t.subarray(r,r+c);if(u.length!==c)throw new n("tlv.decode: wrong value length");return{v:u,l:t.subarray(r+c)}}},_int:{encode(e){const{Err:t}=Gi;if(e<Au)throw new t("integer: negative integers are not allowed");let n=Pd(e);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new t("unexpected DER parsing assertion: unpadded hex");return n},decode(e){const{Err:t}=Gi;if(e[0]&128)throw new t("invalid signature integer: negative");if(e[0]===0&&!(e[1]&128))throw new t("invalid signature integer: unnecessary leading zero");return cp(e)}},toSig(e){const{Err:t,_int:n,_tlv:r}=Gi,s=qn("signature",e),{v:a,l:c}=r.decode(48,s);if(c.length)throw new t("invalid signature: left bytes after parsing");const{v:u,l:d}=r.decode(2,a),{v:h,l:p}=r.decode(2,d);if(p.length)throw new t("invalid signature: left bytes after parsing");return{r:n.decode(u),s:n.decode(h)}},hexFromSig(e){const{_tlv:t,_int:n}=Gi,r=t.encode(2,n.encode(e.r)),s=t.encode(2,n.encode(e.s)),a=r+s;return t.encode(48,a)}},Au=BigInt(0),xu=BigInt(1),bF=BigInt(2),Md=BigInt(3),wF=BigInt(4);function vF(e,t,n){function r(s){const a=e.sqr(s),c=e.mul(a,s);return e.add(e.add(c,e.mul(s,t)),n)}return r}function vD(e,t,n){const{BYTES:r}=e;function s(a){let c;if(typeof a=="bigint")c=a;else{let u=qn("private key",a);if(t){if(!t.includes(u.length*2))throw new Error("invalid private key");const d=new Uint8Array(r);d.set(u,d.length-u.length),u=d}try{c=e.fromBytes(u)}catch{throw new Error(`invalid private key: expected ui8a of size ${r}, got ${typeof a}`)}}if(n&&(c=e.create(c)),!e.isValidNot0(c))throw new Error("invalid private key: out of range [1..N-1]");return c}return s}function EF(e,t={}){const{Fp:n,Fn:r}=lF("weierstrass",e,t),{h:s,n:a}=e;up(t,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:c}=t;if(c&&(!n.is0(e.a)||typeof c.beta!="bigint"||typeof c.splitScalar!="function"))throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function');function u(){if(!n.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function d(H,k,K){const{x:Y,y:W}=k.toAffine(),le=n.toBytes(Y);if(Dh("isCompressed",K),K){u();const re=!n.isOdd(W);return Lo(ED(re),le)}else return Lo(Uint8Array.of(4),le,n.toBytes(W))}function h(H){Cr(H);const k=n.BYTES,K=k+1,Y=2*k+1,W=H.length,le=H[0],re=H.subarray(1);if(W===K&&(le===2||le===3)){const O=n.fromBytes(re);if(!n.isValid(O))throw new Error("bad point: is not on curve, wrong x");const R=y(O);let M;try{M=n.sqrt(R)}catch(X){const C=X instanceof Error?": "+X.message:"";throw new Error("bad point: is not on curve, sqrt error"+C)}u();const F=n.isOdd(M);return(le&1)===1!==F&&(M=n.neg(M)),{x:O,y:M}}else if(W===Y&&le===4){const O=n.fromBytes(re.subarray(k*0,k*1)),R=n.fromBytes(re.subarray(k*1,k*2));if(!v(O,R))throw new Error("bad point: is not on curve");return{x:O,y:R}}else throw new Error(`bad point: got length ${W}, expected compressed=${K} or uncompressed=${Y}`)}const p=t.toBytes||d,m=t.fromBytes||h,y=vF(n,e.a,e.b);function v(H,k){const K=n.sqr(k),Y=y(H);return n.eql(K,Y)}if(!v(e.Gx,e.Gy))throw new Error("bad curve params: generator point");const w=n.mul(n.pow(e.a,Md),wF),E=n.mul(n.sqr(e.b),BigInt(27));if(n.is0(n.add(w,E)))throw new Error("bad curve params: a or b");function S(H,k,K=!1){if(!n.isValid(k)||K&&n.is0(k))throw new Error(`bad point coordinate ${H}`);return k}function A(H){if(!(H instanceof $))throw new Error("ProjectivePoint expected")}const I=bA((H,k)=>{const{px:K,py:Y,pz:W}=H;if(n.eql(W,n.ONE))return{x:K,y:Y};const le=H.is0();k==null&&(k=le?n.ONE:n.inv(W));const re=n.mul(K,k),O=n.mul(Y,k),R=n.mul(W,k);if(le)return{x:n.ZERO,y:n.ZERO};if(!n.eql(R,n.ONE))throw new Error("invZ was invalid");return{x:re,y:O}}),D=bA(H=>{if(H.is0()){if(t.allowInfinityPoint&&!n.is0(H.py))return;throw new Error("bad point: ZERO")}const{x:k,y:K}=H.toAffine();if(!n.isValid(k)||!n.isValid(K))throw new Error("bad point: x or y not field elements");if(!v(k,K))throw new Error("bad point: equation left != right");if(!H.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function B(H,k,K,Y,W){return K=new $(n.mul(K.px,H),K.py,K.pz),k=_u(Y,k),K=_u(W,K),k.add(K)}class ${constructor(k,K,Y){this.px=S("x",k),this.py=S("y",K,!0),this.pz=S("z",Y),Object.freeze(this)}static fromAffine(k){const{x:K,y:Y}=k||{};if(!k||!n.isValid(K)||!n.isValid(Y))throw new Error("invalid affine point");if(k instanceof $)throw new Error("projective point not allowed");return n.is0(K)&&n.is0(Y)?$.ZERO:new $(K,Y,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(k){return rF($,"pz",k)}static fromBytes(k){return Cr(k),$.fromHex(k)}static fromHex(k){const K=$.fromAffine(m(qn("pointHex",k)));return K.assertValidity(),K}static fromPrivateKey(k){const K=vD(r,t.allowedPrivateKeyLengths,t.wrapPrivateKey);return $.BASE.multiply(K(k))}static msm(k,K){return cF($,r,k,K)}precompute(k=8,K=!0){return q.setWindowSize(this,k),K||this.multiply(Md),this}_setWindowSize(k){this.precompute(k)}assertValidity(){D(this)}hasEvenY(){const{y:k}=this.toAffine();if(!n.isOdd)throw new Error("Field doesn't support isOdd");return!n.isOdd(k)}equals(k){A(k);const{px:K,py:Y,pz:W}=this,{px:le,py:re,pz:O}=k,R=n.eql(n.mul(K,O),n.mul(le,W)),M=n.eql(n.mul(Y,O),n.mul(re,W));return R&&M}negate(){return new $(this.px,n.neg(this.py),this.pz)}double(){const{a:k,b:K}=e,Y=n.mul(K,Md),{px:W,py:le,pz:re}=this;let O=n.ZERO,R=n.ZERO,M=n.ZERO,F=n.mul(W,W),X=n.mul(le,le),C=n.mul(re,re),V=n.mul(W,le);return V=n.add(V,V),M=n.mul(W,re),M=n.add(M,M),O=n.mul(k,M),R=n.mul(Y,C),R=n.add(O,R),O=n.sub(X,R),R=n.add(X,R),R=n.mul(O,R),O=n.mul(V,O),M=n.mul(Y,M),C=n.mul(k,C),V=n.sub(F,C),V=n.mul(k,V),V=n.add(V,M),M=n.add(F,F),F=n.add(M,F),F=n.add(F,C),F=n.mul(F,V),R=n.add(R,F),C=n.mul(le,re),C=n.add(C,C),F=n.mul(C,V),O=n.sub(O,F),M=n.mul(C,X),M=n.add(M,M),M=n.add(M,M),new $(O,R,M)}add(k){A(k);const{px:K,py:Y,pz:W}=this,{px:le,py:re,pz:O}=k;let R=n.ZERO,M=n.ZERO,F=n.ZERO;const X=e.a,C=n.mul(e.b,Md);let V=n.mul(K,le),ee=n.mul(Y,re),se=n.mul(W,O),te=n.add(K,Y),pe=n.add(le,re);te=n.mul(te,pe),pe=n.add(V,ee),te=n.sub(te,pe),pe=n.add(K,W);let me=n.add(le,O);return pe=n.mul(pe,me),me=n.add(V,se),pe=n.sub(pe,me),me=n.add(Y,W),R=n.add(re,O),me=n.mul(me,R),R=n.add(ee,se),me=n.sub(me,R),F=n.mul(X,pe),R=n.mul(C,se),F=n.add(R,F),R=n.sub(ee,F),F=n.add(ee,F),M=n.mul(R,F),ee=n.add(V,V),ee=n.add(ee,V),se=n.mul(X,se),pe=n.mul(C,pe),ee=n.add(ee,se),se=n.sub(V,se),se=n.mul(X,se),pe=n.add(pe,se),V=n.mul(ee,pe),M=n.add(M,V),V=n.mul(me,pe),R=n.mul(te,R),R=n.sub(R,V),V=n.mul(te,ee),F=n.mul(me,F),F=n.add(F,V),new $(R,M,F)}subtract(k){return this.add(k.negate())}is0(){return this.equals($.ZERO)}multiply(k){const{endo:K}=t;if(!r.isValidNot0(k))throw new Error("invalid scalar: out of range");let Y,W;const le=re=>q.wNAFCached(this,re,$.normalizeZ);if(K){const{k1neg:re,k1:O,k2neg:R,k2:M}=K.splitScalar(k),{p:F,f:X}=le(O),{p:C,f:V}=le(M);W=X.add(V),Y=B(K.beta,F,C,re,R)}else{const{p:re,f:O}=le(k);Y=re,W=O}return $.normalizeZ([Y,W])[0]}multiplyUnsafe(k){const{endo:K}=t,Y=this;if(!r.isValid(k))throw new Error("invalid scalar: out of range");if(k===Au||Y.is0())return $.ZERO;if(k===xu)return Y;if(q.hasPrecomputes(this))return this.multiply(k);if(K){const{k1neg:W,k1:le,k2neg:re,k2:O}=K.splitScalar(k),{p1:R,p2:M}=aF($,Y,le,O);return B(K.beta,R,M,W,re)}else return q.wNAFCachedUnsafe(Y,k)}multiplyAndAddUnsafe(k,K,Y){const W=this.multiplyUnsafe(K).add(k.multiplyUnsafe(Y));return W.is0()?void 0:W}toAffine(k){return I(this,k)}isTorsionFree(){const{isTorsionFree:k}=t;return s===xu?!0:k?k($,this):q.wNAFCachedUnsafe(this,a).is0()}clearCofactor(){const{clearCofactor:k}=t;return s===xu?this:k?k($,this):this.multiplyUnsafe(s)}toBytes(k=!0){return Dh("isCompressed",k),this.assertValidity(),p($,this,k)}toRawBytes(k=!0){return this.toBytes(k)}toHex(k=!0){return ju(this.toBytes(k))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}$.BASE=new $(e.Gx,e.Gy,n.ONE),$.ZERO=new $(n.ZERO,n.ONE,n.ZERO),$.Fp=n,$.Fn=r;const N=r.BITS,q=oF($,t.endo?Math.ceil(N/2):N);return $}function ED(e){return Uint8Array.of(e?2:3)}function SF(e,t,n={}){up(t,{hash:"function"},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const r=t.randomBytes||Hc,s=t.hmac||((Y,...W)=>op(t.hash,Y,Lo(...W))),{Fp:a,Fn:c}=e,{ORDER:u,BITS:d}=c;function h(Y){const W=u>>xu;return Y>W}function p(Y){return h(Y)?c.neg(Y):Y}function m(Y,W){if(!c.isValidNot0(W))throw new Error(`invalid signature ${Y}: out of range 1..CURVE.n`)}class y{constructor(W,le,re){m("r",W),m("s",le),this.r=W,this.s=le,re!=null&&(this.recovery=re),Object.freeze(this)}static fromCompact(W){const le=c.BYTES,re=qn("compactSignature",W,le*2);return new y(c.fromBytes(re.subarray(0,le)),c.fromBytes(re.subarray(le,le*2)))}static fromDER(W){const{r:le,s:re}=Gi.toSig(qn("DER",W));return new y(le,re)}assertValidity(){}addRecoveryBit(W){return new y(this.r,this.s,W)}recoverPublicKey(W){const le=a.ORDER,{r:re,s:O,recovery:R}=this;if(R==null||![0,1,2,3].includes(R))throw new Error("recovery id invalid");if(u*bF<le&&R>1)throw new Error("recovery id is ambiguous for h>1 curve");const M=R===2||R===3?re+u:re;if(!a.isValid(M))throw new Error("recovery id 2 or 3 invalid");const F=a.toBytes(M),X=e.fromHex(Lo(ED((R&1)===0),F)),C=c.inv(M),V=D(qn("msgHash",W)),ee=c.create(-V*C),se=c.create(O*C),te=e.BASE.multiplyUnsafe(ee).add(X.multiplyUnsafe(se));if(te.is0())throw new Error("point at infinify");return te.assertValidity(),te}hasHighS(){return h(this.s)}normalizeS(){return this.hasHighS()?new y(this.r,c.neg(this.s),this.recovery):this}toBytes(W){if(W==="compact")return Lo(c.toBytes(this.r),c.toBytes(this.s));if(W==="der")return ww(Gi.hexFromSig(this));throw new Error("invalid format")}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return ju(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return ju(this.toBytes("compact"))}}const v=vD(c,n.allowedPrivateKeyLengths,n.wrapPrivateKey),w={isValidPrivateKey(Y){try{return v(Y),!0}catch{return!1}},normPrivateKeyToScalar:v,randomPrivateKey:()=>{const Y=u;return nF(r(mD(Y)),Y)},precompute(Y=8,W=e.BASE){return W.precompute(Y,!1)}};function E(Y,W=!0){return e.fromPrivateKey(Y).toBytes(W)}function S(Y){if(typeof Y=="bigint")return!1;if(Y instanceof e)return!0;const W=qn("key",Y).length,le=a.BYTES,re=le+1,O=2*le+1;if(!(n.allowedPrivateKeyLengths||c.BYTES===re))return W===re||W===O}function A(Y,W,le=!0){if(S(Y)===!0)throw new Error("first arg must be private key");if(S(W)===!1)throw new Error("second arg must be public key");return e.fromHex(W).multiply(v(Y)).toBytes(le)}const I=t.bits2int||function(Y){if(Y.length>8192)throw new Error("input is too large");const W=cp(Y),le=Y.length*8-d;return le>0?W>>BigInt(le):W},D=t.bits2int_modN||function(Y){return c.create(I(Y))},B=lp(d);function $(Y){return nb("num < 2^"+d,Y,Au,B),c.toBytes(Y)}function N(Y,W,le=q){if(["recovered","canonical"].some(te=>te in le))throw new Error("sign() legacy options not supported");const{hash:re}=t;let{lowS:O,prehash:R,extraEntropy:M}=le;O==null&&(O=!0),Y=qn("msgHash",Y),xA(le),R&&(Y=qn("prehashed msgHash",re(Y)));const F=D(Y),X=v(W),C=[$(X),$(F)];if(M!=null&&M!==!1){const te=M===!0?r(a.BYTES):M;C.push(qn("extraEntropy",te))}const V=Lo(...C),ee=F;function se(te){const pe=I(te);if(!c.isValidNot0(pe))return;const me=c.inv(pe),Te=e.BASE.multiply(pe).toAffine(),Ee=c.create(Te.x);if(Ee===Au)return;const xe=c.create(me*c.create(ee+Ee*X));if(xe===Au)return;let He=(Te.x===Ee?0:2)|Number(Te.y&xu),pt=xe;return O&&h(xe)&&(pt=p(xe),He^=1),new y(Ee,pt,He)}return{seed:V,k2sig:se}}const q={lowS:t.lowS,prehash:!1},H={lowS:t.lowS,prehash:!1};function k(Y,W,le=q){const{seed:re,k2sig:O}=N(Y,W,le);return KH(t.hash.outputLen,c.BYTES,s)(re,O)}e.BASE.precompute(8);function K(Y,W,le,re=H){const O=Y;W=qn("msgHash",W),le=qn("publicKey",le),xA(re);const{lowS:R,prehash:M,format:F}=re;if("strict"in re)throw new Error("options.strict was renamed to lowS");if(F!==void 0&&!["compact","der","js"].includes(F))throw new Error('format must be "compact", "der" or "js"');const X=typeof O=="string"||mw(O),C=!X&&!F&&typeof O=="object"&&O!==null&&typeof O.r=="bigint"&&typeof O.s=="bigint";if(!X&&!C)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let V,ee;try{if(C)if(F===void 0||F==="js")V=new y(O.r,O.s);else throw new Error("invalid format");if(X){try{F!=="compact"&&(V=y.fromDER(O))}catch(He){if(!(He instanceof Gi.Err))throw He}!V&&F!=="der"&&(V=y.fromCompact(O))}ee=e.fromHex(le)}catch{return!1}if(!V||R&&V.hasHighS())return!1;M&&(W=t.hash(W));const{r:se,s:te}=V,pe=D(W),me=c.inv(te),Te=c.create(pe*me),Ee=c.create(se*me),xe=e.BASE.multiplyUnsafe(Te).add(ee.multiplyUnsafe(Ee));return xe.is0()?!1:c.create(xe.x)===se}return Object.freeze({getPublicKey:E,getSharedSecret:A,sign:k,verify:K,utils:w,Point:e,Signature:y})}function _F(e){const t={a:e.a,b:e.b,p:e.Fp.ORDER,n:e.n,h:e.h,Gx:e.Gx,Gy:e.Gy},n=e.Fp,r=Fc(t.n,e.nBitLength),s={Fp:n,Fn:r,allowedPrivateKeyLengths:e.allowedPrivateKeyLengths,allowInfinityPoint:e.allowInfinityPoint,endo:e.endo,wrapPrivateKey:e.wrapPrivateKey,isTorsionFree:e.isTorsionFree,clearCofactor:e.clearCofactor,fromBytes:e.fromBytes,toBytes:e.toBytes};return{CURVE:t,curveOpts:s}}function AF(e){const{CURVE:t,curveOpts:n}=_F(e),r={hash:e.hash,hmac:e.hmac,randomBytes:e.randomBytes,lowS:e.lowS,bits2int:e.bits2int,bits2int_modN:e.bits2int_modN};return{CURVE:t,curveOpts:n,ecdsaOpts:r}}function xF(e,t){return Object.assign({},t,{ProjectivePoint:t.Point,CURVE:e})}function RF(e){const{CURVE:t,curveOpts:n,ecdsaOpts:r}=AF(e),s=EF(t,n),a=SF(s,r,n);return xF(e,a)}function ib(e,t){const n=r=>RF({...e,hash:r});return{...n(t),create:n}}const SD={p:BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff"),n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),h:BigInt(1),a:BigInt("0xffffffff00000001000000000000000000000000fffffffffffffffffffffffc"),b:BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5")},_D={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000ffffffff"),n:BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffc7634d81f4372ddf581a0db248b0a77aecec196accc52973"),h:BigInt(1),a:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000fffffffc"),b:BigInt("0xb3312fa7e23ee7e4988e056be3f82d19181d9c6efe8141120314088f5013875ac656398d8a2ed19d2a85c8edd3ec2aef"),Gx:BigInt("0xaa87ca22be8b05378eb1c71ef320ad746e1d3b628ba79b9859f741e082542a385502f25dbf55296c3a545e3872760ab7"),Gy:BigInt("0x3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f")},AD={p:BigInt("0x1ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),n:BigInt("0x01fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffa51868783bf2f966b7fcc0148f709a5d03bb5c9b8899c47aebb6fb71e91386409"),h:BigInt(1),a:BigInt("0x1fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc"),b:BigInt("0x0051953eb9618e1c9a1f929a21a0b68540eea2da725b99b315f3b8b489918ef109e156193951ec7e937b1652c0bd3bb1bf073573df883d2c34f1ef451fd46b503f00"),Gx:BigInt("0x00c6858e06b70404e9cd9e3ecb662395b4429c648139053fb521f828af606b4d3dbaa14b5e77efe75928fe1dc127a2ffa8de3348b3c1856a429bf97e7e31c2e5bd66"),Gy:BigInt("0x011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650")},OF=Fc(SD.p),TF=Fc(_D.p),DF=Fc(AD.p),IF=ib({...SD,Fp:OF,lowS:!1},sp);ib({..._D,Fp:TF,lowS:!1},Mq),ib({...AD,Fp:DF,lowS:!1,allowedPrivateKeyLengths:[130,131,132]},kq);const CF=IF,xD="base10",In="base16",Gr="base64pad",Gs="base64url",of="utf8",RD=0,es=1,af=2,NF=0,RA=1,Ru=12,xw=32;function $F(){const e=rb.utils.randomPrivateKey(),t=rb.getPublicKey(e);return{privateKey:Gn(e,In),publicKey:Gn(t,In)}}function sb(){const e=Hc(xw);return Gn(e,In)}function UF(e,t){const n=rb.getSharedSecret(Ir(e,In),Ir(t,In)),r=FH(ap,n,void 0,void 0,xw);return Gn(r,In)}function ch(e){const t=ap(Ir(e,In));return Gn(t,In)}function fi(e){const t=ap(Ir(e,of));return Gn(t,In)}function OD(e){return Ir(`${e}`,xD)}function Xo(e){return Number(Gn(e,xD))}function TD(e){return e.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function DD(e){const t=e.replace(/-/g,"+").replace(/_/g,"/"),n=(4-t.length%4)%4;return t+"=".repeat(n)}function BF(e){const t=OD(typeof e.type<"u"?e.type:RD);if(Xo(t)===es&&typeof e.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const n=typeof e.senderPublicKey<"u"?Ir(e.senderPublicKey,In):void 0,r=typeof e.iv<"u"?Ir(e.iv,In):Hc(Ru),s=Ir(e.symKey,In),a=aD(s,r).encrypt(Ir(e.message,of)),c=ID({type:t,sealed:a,iv:r,senderPublicKey:n});return e.encoding===Gs?TD(c):c}function PF(e){const t=Ir(e.symKey,In),{sealed:n,iv:r}=qu({encoded:e.encoded,encoding:e.encoding}),s=aD(t,r).decrypt(n);if(s===null)throw new Error("Failed to decrypt");return Gn(s,of)}function kF(e,t){const n=OD(af),r=Hc(Ru),s=Ir(e,of),a=ID({type:n,sealed:s,iv:r});return t===Gs?TD(a):a}function MF(e,t){const{sealed:n}=qu({encoded:e,encoding:t});return Gn(n,of)}function ID(e){if(Xo(e.type)===af)return Gn(Su([e.type,e.sealed]),Gr);if(Xo(e.type)===es){if(typeof e.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return Gn(Su([e.type,e.senderPublicKey,e.iv,e.sealed]),Gr)}return Gn(Su([e.type,e.iv,e.sealed]),Gr)}function qu(e){const t=(e.encoding||Gr)===Gs?DD(e.encoded):e.encoded,n=Ir(t,Gr),r=n.slice(NF,RA),s=RA;if(Xo(r)===es){const d=s+xw,h=d+Ru,p=n.slice(s,d),m=n.slice(d,h),y=n.slice(h);return{type:r,sealed:y,iv:m,senderPublicKey:p}}if(Xo(r)===af){const d=n.slice(s),h=Hc(Ru);return{type:r,sealed:d,iv:h}}const a=s+Ru,c=n.slice(s,a),u=n.slice(a);return{type:r,sealed:u,iv:c}}function LF(e,t){const n=qu({encoded:e,encoding:t?.encoding});return CD({type:Xo(n.type),senderPublicKey:typeof n.senderPublicKey<"u"?Gn(n.senderPublicKey,In):void 0,receiverPublicKey:t?.receiverPublicKey})}function CD(e){const t=e?.type||RD;if(t===es){if(typeof e?.senderPublicKey>"u")throw new Error("missing sender public key");if(typeof e?.receiverPublicKey>"u")throw new Error("missing receiver public key")}return{type:t,senderPublicKey:e?.senderPublicKey,receiverPublicKey:e?.receiverPublicKey}}function OA(e){return e.type===es&&typeof e.senderPublicKey=="string"&&typeof e.receiverPublicKey=="string"}function TA(e){return e.type===af}function jF(e){const t=Buffer.from(e.x,"base64"),n=Buffer.from(e.y,"base64");return Su([new Uint8Array([4]),t,n])}function zF(e,t){const[n,r,s]=e.split("."),a=Buffer.from(DD(s),"base64");if(a.length!==64)throw new Error("Invalid signature length");const c=a.slice(0,32),u=a.slice(32,64),d=`${n}.${r}`,h=ap(d),p=jF(t);if(!CF.verify(Su([c,u]),h,p))throw new Error("Invalid signature");return G0(e).payload}const qF="irn";function Ch(e){return e?.relay||{protocol:qF}}function mu(e){const t=Az[e];if(typeof t>"u")throw new Error(`Relay Protocol not supported: ${e}`);return t}function HF(e,t="-"){const n={},r="relay"+t;return Object.keys(e).forEach(s=>{if(s.startsWith(r)){const a=s.replace(r,""),c=e[s];n[a]=c}}),n}function DA(e){if(!e.includes("wc:")){const h=q3(e);h!=null&&h.includes("wc:")&&(e=h)}e=e.includes("wc://")?e.replace("wc://",""):e,e=e.includes("wc:")?e.replace("wc:",""):e;const t=e.indexOf(":"),n=e.indexOf("?")!==-1?e.indexOf("?"):void 0,r=e.substring(0,t),s=e.substring(t+1,n).split("@"),a=typeof n<"u"?e.substring(n):"",c=new URLSearchParams(a),u={};c.forEach((h,p)=>{u[p]=h});const d=typeof u.methods=="string"?u.methods.split(","):void 0;return{protocol:r,topic:FF(s[0]),version:parseInt(s[1],10),symKey:u.symKey,relay:HF(u),methods:d,expiryTimestamp:u.expiryTimestamp?parseInt(u.expiryTimestamp,10):void 0}}function FF(e){return e.startsWith("//")?e.substring(2):e}function VF(e,t="-"){const n="relay",r={};return Object.keys(e).forEach(s=>{const a=s,c=n+t+a;e[a]&&(r[c]=e[a])}),r}function IA(e){const t=new URLSearchParams,n=VF(e.relay);Object.keys(n).sort().forEach(s=>{t.set(s,n[s])}),t.set("symKey",e.symKey),e.expiryTimestamp&&t.set("expiryTimestamp",e.expiryTimestamp.toString()),e.methods&&t.set("methods",e.methods.join(","));const r=t.toString();return`${e.protocol}:${e.topic}@${e.version}?${r}`}function Ld(e,t,n){return`${e}?wc_ev=${n}&topic=${t}`}var GF=Object.defineProperty,KF=Object.defineProperties,YF=Object.getOwnPropertyDescriptors,CA=Object.getOwnPropertySymbols,WF=Object.prototype.hasOwnProperty,XF=Object.prototype.propertyIsEnumerable,NA=(e,t,n)=>t in e?GF(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ZF=(e,t)=>{for(var n in t||(t={}))WF.call(t,n)&&NA(e,n,t[n]);if(CA)for(var n of CA(t))XF.call(t,n)&&NA(e,n,t[n]);return e},QF=(e,t)=>KF(e,YF(t));function Vc(e){const t=[];return e.forEach(n=>{const[r,s]=n.split(":");t.push(`${r}:${s}`)}),t}function JF(e){const t=[];return Object.values(e).forEach(n=>{t.push(...Vc(n.accounts))}),t}function eV(e,t){const n=[];return Object.values(e).forEach(r=>{Vc(r.accounts).includes(t)&&n.push(...r.methods)}),n}function tV(e,t){const n=[];return Object.values(e).forEach(r=>{Vc(r.accounts).includes(t)&&n.push(...r.events)}),n}function fp(e){return e.includes(":")}function Ac(e){return fp(e)?e.split(":")[0]:e}function $A(e){var t,n,r;const s={};if(!gi(e))return s;for(const[a,c]of Object.entries(e)){const u=fp(a)?[a]:c.chains,d=c.methods||[],h=c.events||[],p=Ac(a);s[p]=QF(ZF({},s[p]),{chains:pi(u,(t=s[p])==null?void 0:t.chains),methods:pi(d,(n=s[p])==null?void 0:n.methods),events:pi(h,(r=s[p])==null?void 0:r.events)})}return s}function nV(e){const t={};return e?.forEach(n=>{var r;const[s,a]=n.split(":");t[s]||(t[s]={accounts:[],chains:[],events:[],methods:[]}),t[s].accounts.push(n),(r=t[s].chains)==null||r.push(`${s}:${a}`)}),t}function UA(e,t){t=t.map(r=>r.replace("did:pkh:",""));const n=nV(t);for(const[r,s]of Object.entries(n))s.methods?s.methods=pi(s.methods,e):s.methods=e,s.events=["chainChanged","accountsChanged"];return n}function rV(e,t){var n,r,s,a,c,u;const d=$A(e),h=$A(t),p={},m=Object.keys(d).concat(Object.keys(h));for(const y of m)p[y]={chains:pi((n=d[y])==null?void 0:n.chains,(r=h[y])==null?void 0:r.chains),methods:pi((s=d[y])==null?void 0:s.methods,(a=h[y])==null?void 0:a.methods),events:pi((c=d[y])==null?void 0:c.events,(u=h[y])==null?void 0:u.events)};return p}const iV={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},sV={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function be(e,t){const{message:n,code:r}=sV[e];return{message:t?`${n} ${t}`:n,code:r}}function Et(e,t){const{message:n,code:r}=iV[e];return{message:t?`${n} ${t}`:n,code:r}}function ts(e,t){return!!Array.isArray(e)}function gi(e){return Object.getPrototypeOf(e)===Object.prototype&&Object.keys(e).length}function pn(e){return typeof e>"u"}function kt(e,t){return t&&pn(e)?!0:typeof e=="string"&&!!e.trim().length}function Rw(e,t){return t&&pn(e)?!0:typeof e=="number"&&!isNaN(e)}function oV(e,t){const{requiredNamespaces:n}=t,r=Object.keys(e.namespaces),s=Object.keys(n);let a=!0;return Mo(s,r)?(r.forEach(c=>{const{accounts:u,methods:d,events:h}=e.namespaces[c],p=Vc(u),m=n[c];(!Mo(k3(c,m),p)||!Mo(m.methods,d)||!Mo(m.events,h))&&(a=!1)}),a):!1}function Nh(e){return kt(e,!1)&&e.includes(":")?e.split(":").length===2:!1}function aV(e){if(kt(e,!1)&&e.includes(":")){const t=e.split(":");if(t.length===3){const n=t[0]+":"+t[1];return!!t[2]&&Nh(n)}}return!1}function cV(e){function t(n){try{return typeof new URL(n)<"u"}catch{return!1}}try{if(kt(e,!1)){if(t(e))return!0;const n=q3(e);return t(n)}}catch{}return!1}function lV(e){var t;return(t=e?.proposer)==null?void 0:t.publicKey}function uV(e){return e?.topic}function fV(e,t){let n=null;return kt(e?.publicKey,!1)||(n=be("MISSING_OR_INVALID",`${t} controller public key should be a string`)),n}function BA(e){let t=!0;return ts(e)?e.length&&(t=e.every(n=>kt(n,!1))):t=!1,t}function dV(e,t,n){let r=null;return ts(t)&&t.length?t.forEach(s=>{r||Nh(s)||(r=Et("UNSUPPORTED_CHAINS",`${n}, chain ${s} should be a string and conform to "namespace:chainId" format`))}):Nh(e)||(r=Et("UNSUPPORTED_CHAINS",`${n}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),r}function hV(e,t,n){let r=null;return Object.entries(e).forEach(([s,a])=>{if(r)return;const c=dV(s,k3(s,a),`${t} ${n}`);c&&(r=c)}),r}function pV(e,t){let n=null;return ts(e)?e.forEach(r=>{n||aV(r)||(n=Et("UNSUPPORTED_ACCOUNTS",`${t}, account ${r} should be a string and conform to "namespace:chainId:address" format`))}):n=Et("UNSUPPORTED_ACCOUNTS",`${t}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),n}function gV(e,t){let n=null;return Object.values(e).forEach(r=>{if(n)return;const s=pV(r?.accounts,`${t} namespace`);s&&(n=s)}),n}function mV(e,t){let n=null;return BA(e?.methods)?BA(e?.events)||(n=Et("UNSUPPORTED_EVENTS",`${t}, events should be an array of strings or empty array for no events`)):n=Et("UNSUPPORTED_METHODS",`${t}, methods should be an array of strings or empty array for no methods`),n}function ND(e,t){let n=null;return Object.values(e).forEach(r=>{if(n)return;const s=mV(r,`${t}, namespace`);s&&(n=s)}),n}function yV(e,t,n){let r=null;if(e&&gi(e)){const s=ND(e,t);s&&(r=s);const a=hV(e,t,n);a&&(r=a)}else r=be("MISSING_OR_INVALID",`${t}, ${n} should be an object with data`);return r}function zy(e,t){let n=null;if(e&&gi(e)){const r=ND(e,t);r&&(n=r);const s=gV(e,t);s&&(n=s)}else n=be("MISSING_OR_INVALID",`${t}, namespaces should be an object with data`);return n}function $D(e){return kt(e.protocol,!0)}function bV(e,t){let n=!1;return e?e&&ts(e)&&e.length&&e.forEach(r=>{n=$D(r)}):n=!0,n}function wV(e){return typeof e=="number"}function zn(e){return typeof e<"u"&&typeof e!==null}function vV(e){return!(!e||typeof e!="object"||!e.code||!Rw(e.code,!1)||!e.message||!kt(e.message,!1))}function EV(e){return!(pn(e)||!kt(e.method,!1))}function SV(e){return!(pn(e)||pn(e.result)&&pn(e.error)||!Rw(e.id,!1)||!kt(e.jsonrpc,!1))}function _V(e){return!(pn(e)||!kt(e.name,!1))}function PA(e,t){return!(!Nh(t)||!JF(e).includes(t))}function AV(e,t,n){return kt(n,!1)?eV(e,t).includes(n):!1}function xV(e,t,n){return kt(n,!1)?tV(e,t).includes(n):!1}function kA(e,t,n){let r=null;const s=RV(e),a=OV(t),c=Object.keys(s),u=Object.keys(a),d=MA(Object.keys(e)),h=MA(Object.keys(t)),p=d.filter(m=>!h.includes(m));return p.length&&(r=be("NON_CONFORMING_NAMESPACES",`${n} namespaces keys don't satisfy requiredNamespaces.
      Required: ${p.toString()}
      Received: ${Object.keys(t).toString()}`)),Mo(c,u)||(r=be("NON_CONFORMING_NAMESPACES",`${n} namespaces chains don't satisfy required namespaces.
      Required: ${c.toString()}
      Approved: ${u.toString()}`)),Object.keys(t).forEach(m=>{if(!m.includes(":")||r)return;const y=Vc(t[m].accounts);y.includes(m)||(r=be("NON_CONFORMING_NAMESPACES",`${n} namespaces accounts don't satisfy namespace accounts for ${m}
        Required: ${m}
        Approved: ${y.toString()}`))}),c.forEach(m=>{r||(Mo(s[m].methods,a[m].methods)?Mo(s[m].events,a[m].events)||(r=be("NON_CONFORMING_NAMESPACES",`${n} namespaces events don't satisfy namespace events for ${m}`)):r=be("NON_CONFORMING_NAMESPACES",`${n} namespaces methods don't satisfy namespace methods for ${m}`))}),r}function RV(e){const t={};return Object.keys(e).forEach(n=>{var r;n.includes(":")?t[n]=e[n]:(r=e[n].chains)==null||r.forEach(s=>{t[s]={methods:e[n].methods,events:e[n].events}})}),t}function MA(e){return[...new Set(e.map(t=>t.includes(":")?t.split(":")[0]:t))]}function OV(e){const t={};return Object.keys(e).forEach(n=>{n.includes(":")?t[n]=e[n]:Vc(e[n].accounts)?.forEach(s=>{t[s]={accounts:e[n].accounts.filter(a=>a.includes(`${s}:`)),methods:e[n].methods,events:e[n].events}})}),t}function TV(e,t){return Rw(e,!1)&&e<=t.max&&e>=t.min}function LA(){const e=rf();return new Promise(t=>{switch(e){case dr.browser:t(DV());break;case dr.reactNative:t(IV());break;case dr.node:t(CV());break;default:t(!0)}})}function DV(){return qc()&&navigator?.onLine}async function IV(){return to()&&typeof global<"u"&&global!=null&&global.NetInfo?(await(global==null?void 0:global.NetInfo.fetch()))?.isConnected:!0}function CV(){return!0}function NV(e){switch(rf()){case dr.browser:$V(e);break;case dr.reactNative:UV(e);break}}function $V(e){!to()&&qc()&&(window.addEventListener("online",()=>e(!0)),window.addEventListener("offline",()=>e(!1)))}function UV(e){to()&&typeof global<"u"&&global!=null&&global.NetInfo&&global?.NetInfo.addEventListener(t=>e(t?.isConnected))}function BV(){var e;return qc()&&is.getDocument()?((e=is.getDocument())==null?void 0:e.visibilityState)==="visible":!0}const qy={};class ou{static get(t){return qy[t]}static set(t,n){qy[t]=n}static delete(t){delete qy[t]}}function PV(e){const t=ef.decode(e);if(t.length<33)throw new Error("Too short to contain a public key");return t.slice(1,33)}function kV({publicKey:e,signature:t,payload:n}){var r;const s=ob(n.method),a=128|parseInt(((r=n.version)==null?void 0:r.toString())||"4"),c=jV(n.address),u=n.era==="00"?new Uint8Array([0]):ob(n.era);if(u.length!==1&&u.length!==2)throw new Error("Invalid era length");const d=parseInt(n.nonce,16),h=new Uint8Array([d&255,d>>8&255]),p=BigInt(`0x${LV(n.tip)}`),m=qV(p),y=new Uint8Array([0,...e,c,...t,...u,...h,...m,...s]),v=zV(y.length+1);return new Uint8Array([...v,a,...y])}function MV(e){const t=ob(e),n=Tz.blake2b(t,void 0,32);return"0x"+Buffer.from(n).toString("hex")}function ob(e){return new Uint8Array(e.replace(/^0x/,"").match(/.{1,2}/g).map(t=>parseInt(t,16)))}function LV(e){return e.startsWith("0x")?e.slice(2):e}function jV(e){const t=ef.decode(e)[0];return t===42?0:t===60?2:1}function zV(e){if(e<64)return new Uint8Array([e<<2]);if(e<16384){const t=e<<2|1;return new Uint8Array([t&255,t>>8&255])}else if(e<1<<30){const t=e<<2|2;return new Uint8Array([t&255,t>>8&255,t>>16&255,t>>24&255])}else throw new Error("Compact encoding > 2^30 not supported")}function qV(e){if(e<BigInt(1)<<BigInt(6))return new Uint8Array([Number(e<<BigInt(2))]);if(e<BigInt(1)<<BigInt(14)){const t=e<<BigInt(2)|BigInt(1);return new Uint8Array([Number(t&BigInt(255)),Number(t>>BigInt(8)&BigInt(255))])}else if(e<BigInt(1)<<BigInt(30)){const t=e<<BigInt(2)|BigInt(2);return new Uint8Array([Number(t&BigInt(255)),Number(t>>BigInt(8)&BigInt(255)),Number(t>>BigInt(16)&BigInt(255)),Number(t>>BigInt(24)&BigInt(255))])}else throw new Error("BigInt compact encoding not supported > 2^30")}function HV(e){const t=Uint8Array.from(Buffer.from(e.signature,"hex")),n=PV(e.transaction.address),r=kV({publicKey:n,signature:t,payload:e.transaction}),s=Buffer.from(r).toString("hex");return MV(s)}var dp,yt,UD,Bo,jA,BD,PD,kD,Ow,ab,cb,Hu={},MD=[],FV=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,hp=Array.isArray;function Zi(e,t){for(var n in t)e[n]=t[n];return e}function Tw(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function VV(e,t,n){var r,s,a,c={};for(a in t)a=="key"?r=t[a]:a=="ref"?s=t[a]:c[a]=t[a];if(arguments.length>2&&(c.children=arguments.length>3?dp.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(a in e.defaultProps)c[a]===void 0&&(c[a]=e.defaultProps[a]);return lh(e,c,r,s,null)}function lh(e,t,n,r,s){var a={type:e,props:t,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:s??++UD,__i:-1,__u:0};return s==null&&yt.vnode!=null&&yt.vnode(a),a}function pp(e){return e.children}function uh(e,t){this.props=e,this.context=t}function $c(e,t){if(t==null)return e.__?$c(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?$c(e):null}function LD(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return LD(e)}}function zA(e){(!e.__d&&(e.__d=!0)&&Bo.push(e)&&!$h.__r++||jA!=yt.debounceRendering)&&((jA=yt.debounceRendering)||BD)($h)}function $h(){for(var e,t,n,r,s,a,c,u=1;Bo.length;)Bo.length>u&&Bo.sort(PD),e=Bo.shift(),u=Bo.length,e.__d&&(n=void 0,s=(r=(t=e).__v).__e,a=[],c=[],t.__P&&((n=Zi({},r)).__v=r.__v+1,yt.vnode&&yt.vnode(n),Dw(t.__P,n,r,t.__n,t.__P.namespaceURI,32&r.__u?[s]:null,a,s??$c(r),!!(32&r.__u),c),n.__v=r.__v,n.__.__k[n.__i]=n,qD(a,n,c),n.__e!=s&&LD(n)));$h.__r=0}function jD(e,t,n,r,s,a,c,u,d,h,p){var m,y,v,w,E,S,A=r&&r.__k||MD,I=t.length;for(d=GV(n,t,A,d,I),m=0;m<I;m++)(v=n.__k[m])!=null&&(y=v.__i==-1?Hu:A[v.__i]||Hu,v.__i=m,S=Dw(e,v,y,s,a,c,u,d,h,p),w=v.__e,v.ref&&y.ref!=v.ref&&(y.ref&&Iw(y.ref,null,v),p.push(v.ref,v.__c||w,v)),E==null&&w!=null&&(E=w),4&v.__u||y.__k===v.__k?d=zD(v,d,e):typeof v.type=="function"&&S!==void 0?d=S:w&&(d=w.nextSibling),v.__u&=-7);return n.__e=E,d}function GV(e,t,n,r,s){var a,c,u,d,h,p=n.length,m=p,y=0;for(e.__k=new Array(s),a=0;a<s;a++)(c=t[a])!=null&&typeof c!="boolean"&&typeof c!="function"?(d=a+y,(c=e.__k[a]=typeof c=="string"||typeof c=="number"||typeof c=="bigint"||c.constructor==String?lh(null,c,null,null,null):hp(c)?lh(pp,{children:c},null,null,null):c.constructor==null&&c.__b>0?lh(c.type,c.props,c.key,c.ref?c.ref:null,c.__v):c).__=e,c.__b=e.__b+1,u=null,(h=c.__i=KV(c,n,d,m))!=-1&&(m--,(u=n[h])&&(u.__u|=2)),u==null||u.__v==null?(h==-1&&(s>p?y--:s<p&&y++),typeof c.type!="function"&&(c.__u|=4)):h!=d&&(h==d-1?y--:h==d+1?y++:(h>d?y--:y++,c.__u|=4))):e.__k[a]=null;if(m)for(a=0;a<p;a++)(u=n[a])!=null&&(2&u.__u)==0&&(u.__e==r&&(r=$c(u)),FD(u,u));return r}function zD(e,t,n){var r,s;if(typeof e.type=="function"){for(r=e.__k,s=0;r&&s<r.length;s++)r[s]&&(r[s].__=e,t=zD(r[s],t,n));return t}e.__e!=t&&(t&&e.type&&!n.contains(t)&&(t=$c(e)),n.insertBefore(e.__e,t||null),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType==8);return t}function KV(e,t,n,r){var s,a,c=e.key,u=e.type,d=t[n];if(d===null&&e.key==null||d&&c==d.key&&u==d.type&&(2&d.__u)==0)return n;if(r>(d!=null&&(2&d.__u)==0?1:0))for(s=n-1,a=n+1;s>=0||a<t.length;){if(s>=0){if((d=t[s])&&(2&d.__u)==0&&c==d.key&&u==d.type)return s;s--}if(a<t.length){if((d=t[a])&&(2&d.__u)==0&&c==d.key&&u==d.type)return a;a++}}return-1}function qA(e,t,n){t[0]=="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||FV.test(t)?n:n+"px"}function jd(e,t,n,r,s){var a,c;e:if(t=="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof r=="string"&&(e.style.cssText=r=""),r)for(t in r)n&&t in n||qA(e.style,t,"");if(n)for(t in n)r&&n[t]==r[t]||qA(e.style,t,n[t])}else if(t[0]=="o"&&t[1]=="n")a=t!=(t=t.replace(kD,"$1")),c=t.toLowerCase(),t=c in e||t=="onFocusOut"||t=="onFocusIn"?c.slice(2):t.slice(2),e.l||(e.l={}),e.l[t+a]=n,n?r?n.u=r.u:(n.u=Ow,e.addEventListener(t,a?cb:ab,a)):e.removeEventListener(t,a?cb:ab,a);else{if(s=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&n==1?"":n))}}function HA(e){return function(t){if(this.l){var n=this.l[t.type+e];if(t.t==null)t.t=Ow++;else if(t.t<n.u)return;return n(yt.event?yt.event(t):t)}}}function Dw(e,t,n,r,s,a,c,u,d,h){var p,m,y,v,w,E,S,A,I,D,B,$,N,q,H,k,K,Y=t.type;if(t.constructor!=null)return null;128&n.__u&&(d=!!(32&n.__u),a=[u=t.__e=n.__e]),(p=yt.__b)&&p(t);e:if(typeof Y=="function")try{if(A=t.props,I="prototype"in Y&&Y.prototype.render,D=(p=Y.contextType)&&r[p.__c],B=p?D?D.props.value:p.__:r,n.__c?S=(m=t.__c=n.__c).__=m.__E:(I?t.__c=m=new Y(A,B):(t.__c=m=new uh(A,B),m.constructor=Y,m.render=WV),D&&D.sub(m),m.props=A,m.state||(m.state={}),m.context=B,m.__n=r,y=m.__d=!0,m.__h=[],m._sb=[]),I&&m.__s==null&&(m.__s=m.state),I&&Y.getDerivedStateFromProps!=null&&(m.__s==m.state&&(m.__s=Zi({},m.__s)),Zi(m.__s,Y.getDerivedStateFromProps(A,m.__s))),v=m.props,w=m.state,m.__v=t,y)I&&Y.getDerivedStateFromProps==null&&m.componentWillMount!=null&&m.componentWillMount(),I&&m.componentDidMount!=null&&m.__h.push(m.componentDidMount);else{if(I&&Y.getDerivedStateFromProps==null&&A!==v&&m.componentWillReceiveProps!=null&&m.componentWillReceiveProps(A,B),!m.__e&&m.shouldComponentUpdate!=null&&m.shouldComponentUpdate(A,m.__s,B)===!1||t.__v==n.__v){for(t.__v!=n.__v&&(m.props=A,m.state=m.__s,m.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.some(function(W){W&&(W.__=t)}),$=0;$<m._sb.length;$++)m.__h.push(m._sb[$]);m._sb=[],m.__h.length&&c.push(m);break e}m.componentWillUpdate!=null&&m.componentWillUpdate(A,m.__s,B),I&&m.componentDidUpdate!=null&&m.__h.push(function(){m.componentDidUpdate(v,w,E)})}if(m.context=B,m.props=A,m.__P=e,m.__e=!1,N=yt.__r,q=0,I){for(m.state=m.__s,m.__d=!1,N&&N(t),p=m.render(m.props,m.state,m.context),H=0;H<m._sb.length;H++)m.__h.push(m._sb[H]);m._sb=[]}else do m.__d=!1,N&&N(t),p=m.render(m.props,m.state,m.context),m.state=m.__s;while(m.__d&&++q<25);m.state=m.__s,m.getChildContext!=null&&(r=Zi(Zi({},r),m.getChildContext())),I&&!y&&m.getSnapshotBeforeUpdate!=null&&(E=m.getSnapshotBeforeUpdate(v,w)),k=p,p!=null&&p.type===pp&&p.key==null&&(k=HD(p.props.children)),u=jD(e,hp(k)?k:[k],t,n,r,s,a,c,u,d,h),m.base=t.__e,t.__u&=-161,m.__h.length&&c.push(m),S&&(m.__E=m.__=null)}catch(W){if(t.__v=null,d||a!=null)if(W.then){for(t.__u|=d?160:128;u&&u.nodeType==8&&u.nextSibling;)u=u.nextSibling;a[a.indexOf(u)]=null,t.__e=u}else for(K=a.length;K--;)Tw(a[K]);else t.__e=n.__e,t.__k=n.__k;yt.__e(W,t,n)}else a==null&&t.__v==n.__v?(t.__k=n.__k,t.__e=n.__e):u=t.__e=YV(n.__e,t,n,r,s,a,c,d,h);return(p=yt.diffed)&&p(t),128&t.__u?void 0:u}function qD(e,t,n){for(var r=0;r<n.length;r++)Iw(n[r],n[++r],n[++r]);yt.__c&&yt.__c(t,e),e.some(function(s){try{e=s.__h,s.__h=[],e.some(function(a){a.call(s)})}catch(a){yt.__e(a,s.__v)}})}function HD(e){return typeof e!="object"||e==null||e.__b&&e.__b>0?e:hp(e)?e.map(HD):Zi({},e)}function YV(e,t,n,r,s,a,c,u,d){var h,p,m,y,v,w,E,S=n.props,A=t.props,I=t.type;if(I=="svg"?s="http://www.w3.org/2000/svg":I=="math"?s="http://www.w3.org/1998/Math/MathML":s||(s="http://www.w3.org/1999/xhtml"),a!=null){for(h=0;h<a.length;h++)if((v=a[h])&&"setAttribute"in v==!!I&&(I?v.localName==I:v.nodeType==3)){e=v,a[h]=null;break}}if(e==null){if(I==null)return document.createTextNode(A);e=document.createElementNS(s,I,A.is&&A),u&&(yt.__m&&yt.__m(t,a),u=!1),a=null}if(I==null)S===A||u&&e.data==A||(e.data=A);else{if(a=a&&dp.call(e.childNodes),S=n.props||Hu,!u&&a!=null)for(S={},h=0;h<e.attributes.length;h++)S[(v=e.attributes[h]).name]=v.value;for(h in S)if(v=S[h],h!="children"){if(h=="dangerouslySetInnerHTML")m=v;else if(!(h in A)){if(h=="value"&&"defaultValue"in A||h=="checked"&&"defaultChecked"in A)continue;jd(e,h,null,v,s)}}for(h in A)v=A[h],h=="children"?y=v:h=="dangerouslySetInnerHTML"?p=v:h=="value"?w=v:h=="checked"?E=v:u&&typeof v!="function"||S[h]===v||jd(e,h,v,S[h],s);if(p)u||m&&(p.__html==m.__html||p.__html==e.innerHTML)||(e.innerHTML=p.__html),t.__k=[];else if(m&&(e.innerHTML=""),jD(t.type=="template"?e.content:e,hp(y)?y:[y],t,n,r,I=="foreignObject"?"http://www.w3.org/1999/xhtml":s,a,c,a?a[0]:n.__k&&$c(n,0),u,d),a!=null)for(h=a.length;h--;)Tw(a[h]);u||(h="value",I=="progress"&&w==null?e.removeAttribute("value"):w!=null&&(w!==e[h]||I=="progress"&&!w||I=="option"&&w!=S[h])&&jd(e,h,w,S[h],s),h="checked",E!=null&&E!=e[h]&&jd(e,h,E,S[h],s))}return e}function Iw(e,t,n){try{if(typeof e=="function"){var r=typeof e.__u=="function";r&&e.__u(),r&&t==null||(e.__u=e(t))}else e.current=t}catch(s){yt.__e(s,n)}}function FD(e,t,n){var r,s;if(yt.unmount&&yt.unmount(e),(r=e.ref)&&(r.current&&r.current!=e.__e||Iw(r,null,t)),(r=e.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(a){yt.__e(a,t)}r.base=r.__P=null}if(r=e.__k)for(s=0;s<r.length;s++)r[s]&&FD(r[s],t,n||typeof e.type!="function");n||Tw(e.__e),e.__c=e.__=e.__e=void 0}function WV(e,t,n){return this.constructor(e,n)}function FA(e,t,n){var r,s,a,c;t==document&&(t=document.documentElement),yt.__&&yt.__(e,t),s=(r=!1)?null:t.__k,a=[],c=[],Dw(t,e=t.__k=VV(pp,null,[e]),s||Hu,Hu,t.namespaceURI,s?null:t.firstChild?dp.call(t.childNodes):null,a,s?s.__e:t.firstChild,r,c),qD(a,e,c)}dp=MD.slice,yt={__e:function(e,t,n,r){for(var s,a,c;t=t.__;)if((s=t.__c)&&!s.__)try{if((a=s.constructor)&&a.getDerivedStateFromError!=null&&(s.setState(a.getDerivedStateFromError(e)),c=s.__d),s.componentDidCatch!=null&&(s.componentDidCatch(e,r||{}),c=s.__d),c)return s.__E=s}catch(u){e=u}throw e}},UD=0,uh.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=Zi({},this.state),typeof e=="function"&&(e=e(Zi({},n),this.props)),e&&Zi(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),zA(this))},uh.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),zA(this))},uh.prototype.render=pp,Bo=[],BD=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,PD=function(e,t){return e.__v.__b-t.__v.__b},$h.__r=0,kD=/(PointerCapture)$|Capture$/i,Ow=0,ab=HA(!1),cb=HA(!0);var XV=0;function oi(e,t,n,r,s,a){t||(t={});var c,u,d=t;if("ref"in d)for(u in d={},t)u=="ref"?c=t[u]:d[u]=t[u];var h={type:e,props:d,key:n,ref:c,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--XV,__i:-1,__u:0,__source:s,__self:a};if(typeof e=="function"&&(c=e.defaultProps))for(u in c)d[u]===void 0&&(d[u]=c[u]);return yt.vnode&&yt.vnode(h),h}class ia{}let ZV=class extends ia{constructor(t){super()}};const VA=we.FIVE_SECONDS,sa={pulse:"heartbeat_pulse"};let QV=class VD extends ZV{constructor(t){super(t),this.events=new Kn.EventEmitter,this.interval=VA,this.interval=t?.interval||VA}static async init(t){const n=new VD(t);return await n.init(),n}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(t,n){this.events.on(t,n)}once(t,n){this.events.once(t,n)}off(t,n){this.events.off(t,n)}removeListener(t,n){this.events.removeListener(t,n)}async initialize(){this.intervalRef=setInterval(()=>this.pulse(),we.toMiliseconds(this.interval))}pulse(){this.events.emit(sa.pulse)}};const JV=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,eG=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,tG=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function nG(e,t){if(e==="__proto__"||e==="constructor"&&t&&typeof t=="object"&&"prototype"in t){rG(e);return}return t}function rG(e){console.warn(`[destr] Dropping "${e}" key to prevent prototype pollution.`)}function zd(e,t={}){if(typeof e!="string")return e;if(e[0]==='"'&&e[e.length-1]==='"'&&e.indexOf("\\")===-1)return e.slice(1,-1);const n=e.trim();if(n.length<=9)switch(n.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!tG.test(e)){if(t.strict)throw new SyntaxError("[destr] Invalid JSON");return e}try{if(JV.test(e)||eG.test(e)){if(t.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(e,nG)}return JSON.parse(e)}catch(r){if(t.strict)throw r;return e}}function iG(e){return!e||typeof e.then!="function"?Promise.resolve(e):e}function tn(e,...t){try{return iG(e(...t))}catch(n){return Promise.reject(n)}}function sG(e){const t=typeof e;return e===null||t!=="object"&&t!=="function"}function oG(e){const t=Object.getPrototypeOf(e);return!t||t.isPrototypeOf(Object)}function fh(e){if(sG(e))return String(e);if(oG(e)||Array.isArray(e))return JSON.stringify(e);if(typeof e.toJSON=="function")return fh(e.toJSON());throw new Error("[unstorage] Cannot stringify value!")}const lb="base64:";function aG(e){return typeof e=="string"?e:lb+uG(e)}function cG(e){return typeof e!="string"||!e.startsWith(lb)?e:lG(e.slice(lb.length))}function lG(e){return globalThis.Buffer?Buffer.from(e,"base64"):Uint8Array.from(globalThis.atob(e),t=>t.codePointAt(0))}function uG(e){return globalThis.Buffer?Buffer.from(e).toString("base64"):globalThis.btoa(String.fromCodePoint(...e))}function jn(e){return e&&e.split("?")[0]?.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,"")||""}function fG(...e){return jn(e.join(":"))}function qd(e){return e=jn(e),e?e+":":""}function dG(e,t){if(t===void 0)return!0;let n=0,r=e.indexOf(":");for(;r>-1;)n++,r=e.indexOf(":",r+1);return n<=t}function hG(e,t){return t?e.startsWith(t)&&e[e.length-1]!=="$":e[e.length-1]!=="$"}const pG="memory",gG=()=>{const e=new Map;return{name:pG,getInstance:()=>e,hasItem(t){return e.has(t)},getItem(t){return e.get(t)??null},getItemRaw(t){return e.get(t)??null},setItem(t,n){e.set(t,n)},setItemRaw(t,n){e.set(t,n)},removeItem(t){e.delete(t)},getKeys(){return[...e.keys()]},clear(){e.clear()},dispose(){e.clear()}}};function mG(e={}){const t={mounts:{"":e.driver||gG()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},n=h=>{for(const p of t.mountpoints)if(h.startsWith(p))return{base:p,relativeKey:h.slice(p.length),driver:t.mounts[p]};return{base:"",relativeKey:h,driver:t.mounts[""]}},r=(h,p)=>t.mountpoints.filter(m=>m.startsWith(h)||p&&h.startsWith(m)).map(m=>({relativeBase:h.length>m.length?h.slice(m.length):void 0,mountpoint:m,driver:t.mounts[m]})),s=(h,p)=>{if(t.watching){p=jn(p);for(const m of t.watchListeners)m(h,p)}},a=async()=>{if(!t.watching){t.watching=!0;for(const h in t.mounts)t.unwatch[h]=await GA(t.mounts[h],s,h)}},c=async()=>{if(t.watching){for(const h in t.unwatch)await t.unwatch[h]();t.unwatch={},t.watching=!1}},u=(h,p,m)=>{const y=new Map,v=w=>{let E=y.get(w.base);return E||(E={driver:w.driver,base:w.base,items:[]},y.set(w.base,E)),E};for(const w of h){const E=typeof w=="string",S=jn(E?w:w.key),A=E?void 0:w.value,I=E||!w.options?p:{...p,...w.options},D=n(S);v(D).items.push({key:S,value:A,relativeKey:D.relativeKey,options:I})}return Promise.all([...y.values()].map(w=>m(w))).then(w=>w.flat())},d={hasItem(h,p={}){h=jn(h);const{relativeKey:m,driver:y}=n(h);return tn(y.hasItem,m,p)},getItem(h,p={}){h=jn(h);const{relativeKey:m,driver:y}=n(h);return tn(y.getItem,m,p).then(v=>zd(v))},getItems(h,p={}){return u(h,p,m=>m.driver.getItems?tn(m.driver.getItems,m.items.map(y=>({key:y.relativeKey,options:y.options})),p).then(y=>y.map(v=>({key:fG(m.base,v.key),value:zd(v.value)}))):Promise.all(m.items.map(y=>tn(m.driver.getItem,y.relativeKey,y.options).then(v=>({key:y.key,value:zd(v)})))))},getItemRaw(h,p={}){h=jn(h);const{relativeKey:m,driver:y}=n(h);return y.getItemRaw?tn(y.getItemRaw,m,p):tn(y.getItem,m,p).then(v=>cG(v))},async setItem(h,p,m={}){if(p===void 0)return d.removeItem(h);h=jn(h);const{relativeKey:y,driver:v}=n(h);v.setItem&&(await tn(v.setItem,y,fh(p),m),v.watch||s("update",h))},async setItems(h,p){await u(h,p,async m=>{if(m.driver.setItems)return tn(m.driver.setItems,m.items.map(y=>({key:y.relativeKey,value:fh(y.value),options:y.options})),p);m.driver.setItem&&await Promise.all(m.items.map(y=>tn(m.driver.setItem,y.relativeKey,fh(y.value),y.options)))})},async setItemRaw(h,p,m={}){if(p===void 0)return d.removeItem(h,m);h=jn(h);const{relativeKey:y,driver:v}=n(h);if(v.setItemRaw)await tn(v.setItemRaw,y,p,m);else if(v.setItem)await tn(v.setItem,y,aG(p),m);else return;v.watch||s("update",h)},async removeItem(h,p={}){typeof p=="boolean"&&(p={removeMeta:p}),h=jn(h);const{relativeKey:m,driver:y}=n(h);y.removeItem&&(await tn(y.removeItem,m,p),(p.removeMeta||p.removeMata)&&await tn(y.removeItem,m+"$",p),y.watch||s("remove",h))},async getMeta(h,p={}){typeof p=="boolean"&&(p={nativeOnly:p}),h=jn(h);const{relativeKey:m,driver:y}=n(h),v=Object.create(null);if(y.getMeta&&Object.assign(v,await tn(y.getMeta,m,p)),!p.nativeOnly){const w=await tn(y.getItem,m+"$",p).then(E=>zd(E));w&&typeof w=="object"&&(typeof w.atime=="string"&&(w.atime=new Date(w.atime)),typeof w.mtime=="string"&&(w.mtime=new Date(w.mtime)),Object.assign(v,w))}return v},setMeta(h,p,m={}){return this.setItem(h+"$",p,m)},removeMeta(h,p={}){return this.removeItem(h+"$",p)},async getKeys(h,p={}){h=qd(h);const m=r(h,!0);let y=[];const v=[];let w=!0;for(const S of m){S.driver.flags?.maxDepth||(w=!1);const A=await tn(S.driver.getKeys,S.relativeBase,p);for(const I of A){const D=S.mountpoint+jn(I);y.some(B=>D.startsWith(B))||v.push(D)}y=[S.mountpoint,...y.filter(I=>!I.startsWith(S.mountpoint))]}const E=p.maxDepth!==void 0&&!w;return v.filter(S=>(!E||dG(S,p.maxDepth))&&hG(S,h))},async clear(h,p={}){h=qd(h),await Promise.all(r(h,!1).map(async m=>{if(m.driver.clear)return tn(m.driver.clear,m.relativeBase,p);if(m.driver.removeItem){const y=await m.driver.getKeys(m.relativeBase||"",p);return Promise.all(y.map(v=>m.driver.removeItem(v,p)))}}))},async dispose(){await Promise.all(Object.values(t.mounts).map(h=>KA(h)))},async watch(h){return await a(),t.watchListeners.push(h),async()=>{t.watchListeners=t.watchListeners.filter(p=>p!==h),t.watchListeners.length===0&&await c()}},async unwatch(){t.watchListeners=[],await c()},mount(h,p){if(h=qd(h),h&&t.mounts[h])throw new Error(`already mounted at ${h}`);return h&&(t.mountpoints.push(h),t.mountpoints.sort((m,y)=>y.length-m.length)),t.mounts[h]=p,t.watching&&Promise.resolve(GA(p,s,h)).then(m=>{t.unwatch[h]=m}).catch(console.error),d},async unmount(h,p=!0){h=qd(h),!(!h||!t.mounts[h])&&(t.watching&&h in t.unwatch&&(t.unwatch[h]?.(),delete t.unwatch[h]),p&&await KA(t.mounts[h]),t.mountpoints=t.mountpoints.filter(m=>m!==h),delete t.mounts[h])},getMount(h=""){h=jn(h)+":";const p=n(h);return{driver:p.driver,base:p.base}},getMounts(h="",p={}){return h=jn(h),r(h,p.parents).map(y=>({driver:y.driver,base:y.mountpoint}))},keys:(h,p={})=>d.getKeys(h,p),get:(h,p={})=>d.getItem(h,p),set:(h,p,m={})=>d.setItem(h,p,m),has:(h,p={})=>d.hasItem(h,p),del:(h,p={})=>d.removeItem(h,p),remove:(h,p={})=>d.removeItem(h,p)};return d}function GA(e,t,n){return e.watch?e.watch((r,s)=>t(r,n+s)):()=>{}}async function KA(e){typeof e.dispose=="function"&&await tn(e.dispose)}function oa(e){return new Promise((t,n)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>n(e.error)})}function GD(e,t){let n;const r=()=>{if(n)return n;const s=indexedDB.open(e);return s.onupgradeneeded=()=>s.result.createObjectStore(t),n=oa(s),n.then(a=>{a.onclose=()=>n=void 0},()=>{}),n};return(s,a)=>r().then(c=>a(c.transaction(t,s).objectStore(t)))}let Hy;function cf(){return Hy||(Hy=GD("keyval-store","keyval")),Hy}function YA(e,t=cf()){return t("readonly",n=>oa(n.get(e)))}function yG(e,t,n=cf()){return n("readwrite",r=>(r.put(t,e),oa(r.transaction)))}function bG(e,t=cf()){return t("readwrite",n=>(n.delete(e),oa(n.transaction)))}function wG(e=cf()){return e("readwrite",t=>(t.clear(),oa(t.transaction)))}function vG(e,t){return e.openCursor().onsuccess=function(){this.result&&(t(this.result),this.result.continue())},oa(e.transaction)}function EG(e=cf()){return e("readonly",t=>{if(t.getAllKeys)return oa(t.getAllKeys());const n=[];return vG(t,r=>n.push(r.key)).then(()=>n)})}const SG="idb-keyval";var _G=(e={})=>{const t=e.base&&e.base.length>0?`${e.base}:`:"",n=s=>t+s;let r;return e.dbName&&e.storeName&&(r=GD(e.dbName,e.storeName)),{name:SG,options:e,async hasItem(s){return!(typeof await YA(n(s),r)>"u")},async getItem(s){return await YA(n(s),r)??null},setItem(s,a){return yG(n(s),a,r)},removeItem(s){return bG(n(s),r)},getKeys(){return EG(r)},clear(){return wG(r)}}};const AG="WALLET_CONNECT_V2_INDEXED_DB",xG="keyvaluestorage";let RG=class{constructor(){this.indexedDb=mG({driver:_G({dbName:AG,storeName:xG})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(t=>[t.key,t.value])}async getItem(t){const n=await this.indexedDb.getItem(t);if(n!==null)return n}async setItem(t,n){await this.indexedDb.setItem(t,ss(n))}async removeItem(t){await this.indexedDb.removeItem(t)}};var Fy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},dh={exports:{}};(function(){let e;function t(){}e=t,e.prototype.getItem=function(n){return this.hasOwnProperty(n)?String(this[n]):null},e.prototype.setItem=function(n,r){this[n]=String(r)},e.prototype.removeItem=function(n){delete this[n]},e.prototype.clear=function(){const n=this;Object.keys(n).forEach(function(r){n[r]=void 0,delete n[r]})},e.prototype.key=function(n){return n=n||0,Object.keys(this)[n]},e.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof Fy<"u"&&Fy.localStorage?dh.exports=Fy.localStorage:typeof window<"u"&&window.localStorage?dh.exports=window.localStorage:dh.exports=new t})();function OG(e){var t;return[e[0],Yo((t=e[1])!=null?t:"")]}let TG=class{constructor(){this.localStorage=dh.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(OG)}async getItem(t){const n=this.localStorage.getItem(t);if(n!==null)return Yo(n)}async setItem(t,n){this.localStorage.setItem(t,ss(n))}async removeItem(t){this.localStorage.removeItem(t)}};const DG="wc_storage_version",WA=1,IG=async(e,t,n)=>{const r=DG,s=await t.getItem(r);if(s&&s>=WA){n(t);return}const a=await e.getKeys();if(!a.length){n(t);return}const c=[];for(;a.length;){const u=a.shift();if(!u)continue;const d=u.toLowerCase();if(d.includes("wc@")||d.includes("walletconnect")||d.includes("wc_")||d.includes("wallet_connect")){const h=await e.getItem(u);await t.setItem(u,h),c.push(u)}}await t.setItem(r,WA),n(t),CG(e,c)},CG=async(e,t)=>{t.length&&t.forEach(async n=>{await e.removeItem(n)})};let NG=class{constructor(){this.initialized=!1,this.setInitialized=n=>{this.storage=n,this.initialized=!0};const t=new TG;this.storage=t;try{const n=new RG;IG(t,n,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(t){return await this.initialize(),this.storage.getItem(t)}async setItem(t,n){return await this.initialize(),this.storage.setItem(t,n)}async removeItem(t){return await this.initialize(),this.storage.removeItem(t)}async initialize(){this.initialized||await new Promise(t=>{const n=setInterval(()=>{this.initialized&&(clearInterval(n),t())},20)})}};var Vy,XA;function $G(){if(XA)return Vy;XA=1;function e(n){try{return JSON.stringify(n)}catch{return'"[Circular]"'}}Vy=t;function t(n,r,s){var a=s&&s.stringify||e,c=1;if(typeof n=="object"&&n!==null){var u=r.length+c;if(u===1)return n;var d=new Array(u);d[0]=a(n);for(var h=1;h<u;h++)d[h]=a(r[h]);return d.join(" ")}if(typeof n!="string")return n;var p=r.length;if(p===0)return n;for(var m="",y=1-c,v=-1,w=n&&n.length||0,E=0;E<w;){if(n.charCodeAt(E)===37&&E+1<w){switch(v=v>-1?v:0,n.charCodeAt(E+1)){case 100:case 102:if(y>=p||r[y]==null)break;v<E&&(m+=n.slice(v,E)),m+=Number(r[y]),v=E+2,E++;break;case 105:if(y>=p||r[y]==null)break;v<E&&(m+=n.slice(v,E)),m+=Math.floor(Number(r[y])),v=E+2,E++;break;case 79:case 111:case 106:if(y>=p||r[y]===void 0)break;v<E&&(m+=n.slice(v,E));var S=typeof r[y];if(S==="string"){m+="'"+r[y]+"'",v=E+2,E++;break}if(S==="function"){m+=r[y].name||"<anonymous>",v=E+2,E++;break}m+=a(r[y]),v=E+2,E++;break;case 115:if(y>=p)break;v<E&&(m+=n.slice(v,E)),m+=String(r[y]),v=E+2,E++;break;case 37:v<E&&(m+=n.slice(v,E)),m+="%",v=E+2,E++,y--;break}++y}++E}return v===-1?n:(v<w&&(m+=n.slice(v)),m)}return Vy}var Gy,ZA;function UG(){if(ZA)return Gy;ZA=1;const e=$G();Gy=s;const t=$().console||{},n={mapHttpRequest:w,mapHttpResponse:w,wrapRequestSerializer:E,wrapResponseSerializer:E,wrapErrorSerializer:E,req:w,res:w,err:y};function r(N,q){return Array.isArray(N)?N.filter(function(k){return k!=="!stdSerializers.err"}):N===!0?Object.keys(q):!1}function s(N){N=N||{},N.browser=N.browser||{};const q=N.browser.transmit;if(q&&typeof q.send!="function")throw Error("pino: transmit option must have a send function");const H=N.browser.write||t;N.browser.write&&(N.browser.asObject=!0);const k=N.serializers||{},K=r(N.browser.serialize,k);let Y=N.browser.serialize;Array.isArray(N.browser.serialize)&&N.browser.serialize.indexOf("!stdSerializers.err")>-1&&(Y=!1);const W=["error","fatal","warn","info","debug","trace"];typeof H=="function"&&(H.error=H.fatal=H.warn=H.info=H.debug=H.trace=H),N.enabled===!1&&(N.level="silent");const le=N.level||"info",re=Object.create(H);re.log||(re.log=S),Object.defineProperty(re,"levelVal",{get:R}),Object.defineProperty(re,"level",{get:M,set:F});const O={transmit:q,serialize:K,asObject:N.browser.asObject,levels:W,timestamp:v(N)};re.levels=s.levels,re.level=le,re.setMaxListeners=re.getMaxListeners=re.emit=re.addListener=re.on=re.prependListener=re.once=re.prependOnceListener=re.removeListener=re.removeAllListeners=re.listeners=re.listenerCount=re.eventNames=re.write=re.flush=S,re.serializers=k,re._serialize=K,re._stdErrSerialize=Y,re.child=X,q&&(re._logEvent=m());function R(){return this.level==="silent"?1/0:this.levels.values[this.level]}function M(){return this._level}function F(C){if(C!=="silent"&&!this.levels.values[C])throw Error("unknown level "+C);this._level=C,a(O,re,"error","log"),a(O,re,"fatal","error"),a(O,re,"warn","error"),a(O,re,"info","log"),a(O,re,"debug","log"),a(O,re,"trace","log")}function X(C,V){if(!C)throw new Error("missing bindings for child Pino");V=V||{},K&&C.serializers&&(V.serializers=C.serializers);const ee=V.serializers;if(K&&ee){var se=Object.assign({},k,ee),te=N.browser.serialize===!0?Object.keys(se):K;delete C.serializers,d([C],te,se,this._stdErrSerialize)}function pe(me){this._childLevel=(me._childLevel|0)+1,this.error=h(me,C,"error"),this.fatal=h(me,C,"fatal"),this.warn=h(me,C,"warn"),this.info=h(me,C,"info"),this.debug=h(me,C,"debug"),this.trace=h(me,C,"trace"),se&&(this.serializers=se,this._serialize=te),q&&(this._logEvent=m([].concat(me._logEvent.bindings,C)))}return pe.prototype=this,new pe(this)}return re}s.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},s.stdSerializers=n,s.stdTimeFunctions=Object.assign({},{nullTime:A,epochTime:I,unixTime:D,isoTime:B});function a(N,q,H,k){const K=Object.getPrototypeOf(q);q[H]=q.levelVal>q.levels.values[H]?S:K[H]?K[H]:t[H]||t[k]||S,c(N,q,H)}function c(N,q,H){!N.transmit&&q[H]===S||(q[H]=function(k){return function(){const Y=N.timestamp(),W=new Array(arguments.length),le=Object.getPrototypeOf&&Object.getPrototypeOf(this)===t?t:this;for(var re=0;re<W.length;re++)W[re]=arguments[re];if(N.serialize&&!N.asObject&&d(W,this._serialize,this.serializers,this._stdErrSerialize),N.asObject?k.call(le,u(this,H,W,Y)):k.apply(le,W),N.transmit){const O=N.transmit.level||q.level,R=s.levels.values[O],M=s.levels.values[H];if(M<R)return;p(this,{ts:Y,methodLevel:H,methodValue:M,transmitValue:s.levels.values[N.transmit.level||q.level],send:N.transmit.send,val:q.levelVal},W)}}}(q[H]))}function u(N,q,H,k){N._serialize&&d(H,N._serialize,N.serializers,N._stdErrSerialize);const K=H.slice();let Y=K[0];const W={};k&&(W.time=k),W.level=s.levels.values[q];let le=(N._childLevel|0)+1;if(le<1&&(le=1),Y!==null&&typeof Y=="object"){for(;le--&&typeof K[0]=="object";)Object.assign(W,K.shift());Y=K.length?e(K.shift(),K):void 0}else typeof Y=="string"&&(Y=e(K.shift(),K));return Y!==void 0&&(W.msg=Y),W}function d(N,q,H,k){for(const K in N)if(k&&N[K]instanceof Error)N[K]=s.stdSerializers.err(N[K]);else if(typeof N[K]=="object"&&!Array.isArray(N[K]))for(const Y in N[K])q&&q.indexOf(Y)>-1&&Y in H&&(N[K][Y]=H[Y](N[K][Y]))}function h(N,q,H){return function(){const k=new Array(1+arguments.length);k[0]=q;for(var K=1;K<k.length;K++)k[K]=arguments[K-1];return N[H].apply(this,k)}}function p(N,q,H){const k=q.send,K=q.ts,Y=q.methodLevel,W=q.methodValue,le=q.val,re=N._logEvent.bindings;d(H,N._serialize||Object.keys(N.serializers),N.serializers,N._stdErrSerialize===void 0?!0:N._stdErrSerialize),N._logEvent.ts=K,N._logEvent.messages=H.filter(function(O){return re.indexOf(O)===-1}),N._logEvent.level.label=Y,N._logEvent.level.value=W,k(Y,N._logEvent,le),N._logEvent=m(re)}function m(N){return{ts:0,messages:[],bindings:N||[],level:{label:"",value:0}}}function y(N){const q={type:N.constructor.name,msg:N.message,stack:N.stack};for(const H in N)q[H]===void 0&&(q[H]=N[H]);return q}function v(N){return typeof N.timestamp=="function"?N.timestamp:N.timestamp===!1?A:I}function w(){return{}}function E(N){return N}function S(){}function A(){return!1}function I(){return Date.now()}function D(){return Math.round(Date.now()/1e3)}function B(){return new Date(Date.now()).toISOString()}function $(){function N(q){return typeof q<"u"&&q}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return N(self)||N(window)||N(this)||{}}}return Gy}var Ec=UG();const lf=Qs(Ec),BG={level:"info"},uf="custom_context",Cw=1e3*1024;let PG=class{constructor(t){this.nodeValue=t,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}},QA=class{constructor(t){this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=t,this.sizeInBytes=0}append(t){const n=new PG(t);if(n.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${t} with size ${n.size}`);for(;this.size+n.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=n),this.tail=n):(this.head=n,this.tail=n),this.lengthInNodes++,this.sizeInBytes+=n.size}shift(){if(!this.head)return;const t=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=t.size}toArray(){const t=[];let n=this.head;for(;n!==null;)t.push(n.value),n=n.next;return t}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let t=this.head;return{next:()=>{if(!t)return{done:!0,value:null};const n=t.value;return t=t.next,{done:!1,value:n}}}}},KD=class{constructor(t,n=Cw){this.level=t??"error",this.levelValue=Ec.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=n,this.logs=new QA(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(t,n){n===Ec.levels.values.error?console.error(t):n===Ec.levels.values.warn?console.warn(t):n===Ec.levels.values.debug?console.debug(t):n===Ec.levels.values.trace?console.trace(t):console.log(t)}appendToLogs(t){this.logs.append(ss({timestamp:new Date().toISOString(),log:t}));const n=typeof t=="string"?JSON.parse(t).level:t.level;n>=this.levelValue&&this.forwardToConsole(t,n)}getLogs(){return this.logs}clearLogs(){this.logs=new QA(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(t){const n=this.getLogArray();return n.push(ss({extraMetadata:t})),new Blob(n,{type:"application/json"})}},kG=class{constructor(t,n=Cw){this.baseChunkLogger=new KD(t,n)}write(t){this.baseChunkLogger.appendToLogs(t)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(t){return this.baseChunkLogger.logsToBlob(t)}downloadLogsBlobInBrowser(t){const n=URL.createObjectURL(this.logsToBlob(t)),r=document.createElement("a");r.href=n,r.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)}},MG=class{constructor(t,n=Cw){this.baseChunkLogger=new KD(t,n)}write(t){this.baseChunkLogger.appendToLogs(t)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(t){return this.baseChunkLogger.logsToBlob(t)}};var LG=Object.defineProperty,jG=Object.defineProperties,zG=Object.getOwnPropertyDescriptors,JA=Object.getOwnPropertySymbols,qG=Object.prototype.hasOwnProperty,HG=Object.prototype.propertyIsEnumerable,ex=(e,t,n)=>t in e?LG(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Uh=(e,t)=>{for(var n in t||(t={}))qG.call(t,n)&&ex(e,n,t[n]);if(JA)for(var n of JA(t))HG.call(t,n)&&ex(e,n,t[n]);return e},Bh=(e,t)=>jG(e,zG(t));function gp(e){return Bh(Uh({},e),{level:e?.level||BG.level})}function FG(e,t=uf){return e[t]||""}function VG(e,t,n=uf){return e[n]=t,e}function Xn(e,t=uf){let n="";return typeof e.bindings>"u"?n=FG(e,t):n=e.bindings().context||"",n}function GG(e,t,n=uf){const r=Xn(e,n);return r.trim()?`${r}/${t}`:t}function Cn(e,t,n=uf){const r=GG(e,t,n),s=e.child({context:r});return VG(s,r,n)}function KG(e){var t,n;const r=new kG((t=e.opts)==null?void 0:t.level,e.maxSizeInBytes);return{logger:lf(Bh(Uh({},e.opts),{level:"trace",browser:Bh(Uh({},(n=e.opts)==null?void 0:n.browser),{write:s=>r.write(s)})})),chunkLoggerController:r}}function YG(e){var t;const n=new MG((t=e.opts)==null?void 0:t.level,e.maxSizeInBytes);return{logger:lf(Bh(Uh({},e.opts),{level:"trace"}),n),chunkLoggerController:n}}function WG(e){return typeof e.loggerOverride<"u"&&typeof e.loggerOverride!="string"?{logger:e.loggerOverride,chunkLoggerController:null}:typeof window<"u"?KG(e):YG(e)}var XG=Object.defineProperty,ZG=(e,t,n)=>t in e?XG(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,tx=(e,t,n)=>ZG(e,typeof t!="symbol"?t+"":t,n);let QG=class extends ia{constructor(t){super(),this.opts=t,tx(this,"protocol","wc"),tx(this,"version",2)}};var JG=Object.defineProperty,eK=(e,t,n)=>t in e?JG(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,tK=(e,t,n)=>eK(e,t+"",n);let nK=class extends ia{constructor(t,n){super(),this.core=t,this.logger=n,tK(this,"records",new Map)}},rK=class{constructor(t,n){this.logger=t,this.core=n}};class iK extends ia{constructor(t,n){super(),this.relayer=t,this.logger=n}}let sK=class extends ia{constructor(t){super()}},oK=class{constructor(t,n,r,s){this.core=t,this.logger=n,this.name=r}},aK=class extends ia{constructor(t,n){super(),this.relayer=t,this.logger=n}},cK=class extends ia{constructor(t,n){super(),this.core=t,this.logger=n}},lK=class{constructor(t,n,r){this.core=t,this.logger=n,this.store=r}},uK=class{constructor(t,n){this.projectId=t,this.logger=n}},fK=class{constructor(t,n,r){this.core=t,this.logger=n,this.telemetryEnabled=r}};var dK=Object.defineProperty,hK=(e,t,n)=>t in e?dK(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,nx=(e,t,n)=>hK(e,typeof t!="symbol"?t+"":t,n);class pK{constructor(t){this.opts=t,nx(this,"protocol","wc"),nx(this,"version",2)}}let gK=class{constructor(t){this.client=t}};const mK="PARSE_ERROR",yK="INVALID_REQUEST",bK="METHOD_NOT_FOUND",wK="INVALID_PARAMS",YD="INTERNAL_ERROR",Nw="SERVER_ERROR",vK=[-32700,-32600,-32601,-32602,-32603],Ou={[mK]:{code:-32700,message:"Parse error"},[yK]:{code:-32600,message:"Invalid Request"},[bK]:{code:-32601,message:"Method not found"},[wK]:{code:-32602,message:"Invalid params"},[YD]:{code:-32603,message:"Internal error"},[Nw]:{code:-32e3,message:"Server error"}},WD=Nw;function EK(e){return vK.includes(e)}function rx(e){return Object.keys(Ou).includes(e)?Ou[e]:Ou[WD]}function SK(e){const t=Object.values(Ou).find(n=>n.code===e);return t||Ou[WD]}function XD(e,t,n){return e.message.includes("getaddrinfo ENOTFOUND")||e.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${n} RPC url at ${t}`):e}var Ky={},qi={},ix;function _K(){if(ix)return qi;ix=1,Object.defineProperty(qi,"__esModule",{value:!0}),qi.isBrowserCryptoAvailable=qi.getSubtleCrypto=qi.getBrowerCrypto=void 0;function e(){return Fn?.crypto||Fn?.msCrypto||{}}qi.getBrowerCrypto=e;function t(){const r=e();return r.subtle||r.webkitSubtle}qi.getSubtleCrypto=t;function n(){return!!e()&&!!t()}return qi.isBrowserCryptoAvailable=n,qi}var Hi={},sx;function AK(){if(sx)return Hi;sx=1,Object.defineProperty(Hi,"__esModule",{value:!0}),Hi.isBrowser=Hi.isNode=Hi.isReactNative=void 0;function e(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}Hi.isReactNative=e;function t(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}Hi.isNode=t;function n(){return!e()&&!t()}return Hi.isBrowser=n,Hi}var ox;function xK(){return ox||(ox=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});const t=Ju;t.__exportStar(_K(),e),t.__exportStar(AK(),e)}(Ky)),Ky}var RK=xK();function ci(e=3){const t=Date.now()*Math.pow(10,e),n=Math.floor(Math.random()*Math.pow(10,e));return t+n}function qo(e=6){return BigInt(ci(e))}function Ys(e,t,n){return{id:n||ci(),jsonrpc:"2.0",method:e,params:t}}function mp(e,t){return{id:e,jsonrpc:"2.0",result:t}}function yp(e,t,n){return{id:e,jsonrpc:"2.0",error:OK(t)}}function OK(e,t){return typeof e>"u"?rx(YD):(typeof e=="string"&&(e=Object.assign(Object.assign({},rx(Nw)),{message:e})),EK(e.code)&&(e=SK(e.code)),e)}class TK{}class DK extends TK{constructor(){super()}}class IK extends DK{constructor(t){super()}}const CK="^https?:",NK="^wss?:";function $K(e){const t=e.match(new RegExp(/^\w+:/,"gi"));if(!(!t||!t.length))return t[0]}function ZD(e,t){const n=$K(e);return typeof n>"u"?!1:new RegExp(t).test(n)}function ax(e){return ZD(e,CK)}function cx(e){return ZD(e,NK)}function UK(e){return new RegExp("wss?://localhost(:d{2,5})?").test(e)}function QD(e){return typeof e=="object"&&"id"in e&&"jsonrpc"in e&&e.jsonrpc==="2.0"}function $w(e){return QD(e)&&"method"in e}function bp(e){return QD(e)&&(li(e)||Tr(e))}function li(e){return"result"in e}function Tr(e){return"error"in e}let $r=class extends IK{constructor(t){super(t),this.events=new Kn.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(t),this.connection.connected&&this.registerEventListeners()}async connect(t=this.connection){await this.open(t)}async disconnect(){await this.close()}on(t,n){this.events.on(t,n)}once(t,n){this.events.once(t,n)}off(t,n){this.events.off(t,n)}removeListener(t,n){this.events.removeListener(t,n)}async request(t,n){return this.requestStrict(Ys(t.method,t.params||[],t.id||qo().toString()),n)}async requestStrict(t,n){return new Promise(async(r,s)=>{if(!this.connection.connected)try{await this.open()}catch(a){s(a)}this.events.on(`${t.id}`,a=>{Tr(a)?s(a.error):r(a.result)});try{await this.connection.send(t,n)}catch(a){s(a)}})}setConnection(t=this.connection){return t}onPayload(t){this.events.emit("payload",t),bp(t)?this.events.emit(`${t.id}`,t):this.events.emit("message",{type:t.method,data:t.params})}onClose(t){t&&t.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${t.code} ${t.reason?`(${t.reason})`:""}`)),this.events.emit("disconnect")}async open(t=this.connection){this.connection===t&&this.connection.connected||(this.connection.connected&&this.close(),typeof t=="string"&&(await this.connection.open(t),t=this.connection),this.connection=this.setConnection(t),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",t=>this.onPayload(t)),this.connection.on("close",t=>this.onClose(t)),this.connection.on("error",t=>this.events.emit("error",t)),this.connection.on("register_error",t=>this.onClose()),this.hasRegisteredEventListeners=!0)}};const BK=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),PK=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",lx=e=>e.split("?")[0],ux=10,kK=BK();let MK=class{constructor(t){if(this.url=t,this.events=new Kn.EventEmitter,this.registering=!1,!cx(t))throw new Error(`Provided URL is not compatible with WebSocket connection: ${t}`);this.url=t}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(t,n){this.events.on(t,n)}once(t,n){this.events.once(t,n)}off(t,n){this.events.off(t,n)}removeListener(t,n){this.events.removeListener(t,n)}async open(t=this.url){await this.register(t)}async close(){return new Promise((t,n)=>{if(typeof this.socket>"u"){n(new Error("Connection already closed"));return}this.socket.onclose=r=>{this.onClose(r),t()},this.socket.close()})}async send(t){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(ss(t))}catch(n){this.onError(t.id,n)}}register(t=this.url){if(!cx(t))throw new Error(`Provided URL is not compatible with WebSocket connection: ${t}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((r,s)=>{this.events.once("register_error",a=>{this.resetMaxListeners(),s(a)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return s(new Error("WebSocket connection is missing or invalid"));r(this.socket)})})}return this.url=t,this.registering=!0,new Promise((n,r)=>{const s=RK.isReactNative()?void 0:{rejectUnauthorized:!UK(t)},a=new kK(t,[],s);PK()?a.onerror=c=>{const u=c;r(this.emitError(u.error))}:a.on("error",c=>{r(this.emitError(c))}),a.onopen=()=>{this.onOpen(a),n(a)}})}onOpen(t){t.onmessage=n=>this.onPayload(n),t.onclose=n=>this.onClose(n),this.socket=t,this.registering=!1,this.events.emit("open")}onClose(t){this.socket=void 0,this.registering=!1,this.events.emit("close",t)}onPayload(t){if(typeof t.data>"u")return;const n=typeof t.data=="string"?Yo(t.data):t.data;this.events.emit("payload",n)}onError(t,n){const r=this.parseError(n),s=r.message||r.toString(),a=yp(t,s);this.events.emit("payload",a)}parseError(t,n=this.url){return XD(t,lx(n),"WS")}resetMaxListeners(){this.events.getMaxListeners()>ux&&this.events.setMaxListeners(ux)}emitError(t){const n=this.parseError(new Error(t?.message||`WebSocket connection failed for host: ${lx(this.url)}`));return this.events.emit("register_error",n),n}};var LK={};const JD="wc",eI=2,ub="core",wi=`${JD}@2:${ub}:`,jK={logger:"error"},zK={database:":memory:"},qK="crypto",fx="client_ed25519_seed",HK=we.ONE_DAY,FK="keychain",VK="0.3",GK="messages",KK="0.3",dx=we.SIX_HOURS,YK="publisher",tI="irn",WK="error",nI="wss://relay.walletconnect.org",XK="relayer",nn={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},ZK="_subscription",Ar={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},QK=.1,fb="2.21.4",wt={link_mode:"link_mode",relay:"relay"},hh={inbound:"inbound",outbound:"outbound"},JK="0.3",eY="WALLETCONNECT_CLIENT_ID",hx="WALLETCONNECT_LINK_MODE_APPS",cr={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},tY="subscription",nY="0.3",rY="pairing",iY="0.3",au={wc_pairingDelete:{req:{ttl:we.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:we.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:we.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:we.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:we.ONE_DAY,prompt:!1,tag:0},res:{ttl:we.ONE_DAY,prompt:!1,tag:0}}},Po={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},Lr={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},sY="history",oY="0.3",aY="expirer",Or={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},cY="0.3",lY="verify-api",uY="https://verify.walletconnect.com",rI="https://verify.walletconnect.org",Tu=rI,fY=`${Tu}/v3`,dY=[uY,rI],hY="echo",pY="https://echo.walletconnect.com",ai={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal",subscribing_to_pairing_topic:"subscribing_to_pairing_topic"},Vi={no_wss_connection:"no_wss_connection",no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_expired:"proposal_expired",proposal_listener_not_found:"proposal_listener_not_found"},jr={session_approve_started:"session_approve_started",proposal_not_expired:"proposal_not_expired",session_namespaces_validation_success:"session_namespaces_validation_success",create_session_topic:"create_session_topic",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success"},Ao={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found"},xo={authenticated_session_approve_started:"authenticated_session_approve_started",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve"},cu={no_internet_connection:"no_internet_connection",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"},gY=.1,mY="event-client",yY=86400,bY="https://pulse.walletconnect.org/batch";function wY(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<e.length;s++){var a=e.charAt(s),c=a.charCodeAt(0);if(n[c]!==255)throw new TypeError(a+" is ambiguous");n[c]=s}var u=e.length,d=e.charAt(0),h=Math.log(u)/Math.log(256),p=Math.log(256)/Math.log(u);function m(w){if(w instanceof Uint8Array||(ArrayBuffer.isView(w)?w=new Uint8Array(w.buffer,w.byteOffset,w.byteLength):Array.isArray(w)&&(w=Uint8Array.from(w))),!(w instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(w.length===0)return"";for(var E=0,S=0,A=0,I=w.length;A!==I&&w[A]===0;)A++,E++;for(var D=(I-A)*p+1>>>0,B=new Uint8Array(D);A!==I;){for(var $=w[A],N=0,q=D-1;($!==0||N<S)&&q!==-1;q--,N++)$+=256*B[q]>>>0,B[q]=$%u>>>0,$=$/u>>>0;if($!==0)throw new Error("Non-zero carry");S=N,A++}for(var H=D-S;H!==D&&B[H]===0;)H++;for(var k=d.repeat(E);H<D;++H)k+=e.charAt(B[H]);return k}function y(w){if(typeof w!="string")throw new TypeError("Expected String");if(w.length===0)return new Uint8Array;var E=0;if(w[E]!==" "){for(var S=0,A=0;w[E]===d;)S++,E++;for(var I=(w.length-E)*h+1>>>0,D=new Uint8Array(I);w[E];){var B=n[w.charCodeAt(E)];if(B===255)return;for(var $=0,N=I-1;(B!==0||$<A)&&N!==-1;N--,$++)B+=u*D[N]>>>0,D[N]=B%256>>>0,B=B/256>>>0;if(B!==0)throw new Error("Non-zero carry");A=$,E++}if(w[E]!==" "){for(var q=I-A;q!==I&&D[q]===0;)q++;for(var H=new Uint8Array(S+(I-q)),k=S;q!==I;)H[k++]=D[q++];return H}}}function v(w){var E=y(w);if(E)return E;throw new Error(`Non-${t} character`)}return{encode:m,decodeUnsafe:y,decode:v}}var vY=wY,EY=vY;const iI=e=>{if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")},SY=e=>new TextEncoder().encode(e),_Y=e=>new TextDecoder().decode(e);class AY{constructor(t,n,r){this.name=t,this.prefix=n,this.baseEncode=r}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}}class xY{constructor(t,n,r){if(this.name=t,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return sI(this,t)}}class RY{constructor(t){this.decoders=t}or(t){return sI(this,t)}decode(t){const n=t[0],r=this.decoders[n];if(r)return r.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const sI=(e,t)=>new RY({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class OY{constructor(t,n,r,s){this.name=t,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new AY(t,n,r),this.decoder=new xY(t,n,s)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}}const wp=({name:e,prefix:t,encode:n,decode:r})=>new OY(e,t,n,r),ff=({prefix:e,name:t,alphabet:n})=>{const{encode:r,decode:s}=EY(n,t);return wp({prefix:e,name:t,encode:r,decode:a=>iI(s(a))})},TY=(e,t,n,r)=>{const s={};for(let p=0;p<t.length;++p)s[t[p]]=p;let a=e.length;for(;e[a-1]==="=";)--a;const c=new Uint8Array(a*n/8|0);let u=0,d=0,h=0;for(let p=0;p<a;++p){const m=s[e[p]];if(m===void 0)throw new SyntaxError(`Non-${r} character`);d=d<<n|m,u+=n,u>=8&&(u-=8,c[h++]=255&d>>u)}if(u>=n||255&d<<8-u)throw new SyntaxError("Unexpected end of data");return c},DY=(e,t,n)=>{const r=t[t.length-1]==="=",s=(1<<n)-1;let a="",c=0,u=0;for(let d=0;d<e.length;++d)for(u=u<<8|e[d],c+=8;c>n;)c-=n,a+=t[s&u>>c];if(c&&(a+=t[s&u<<n-c]),r)for(;a.length*n&7;)a+="=";return a},yn=({name:e,prefix:t,bitsPerChar:n,alphabet:r})=>wp({prefix:t,name:e,encode(s){return DY(s,r,n)},decode(s){return TY(s,r,n,e)}}),IY=wp({prefix:"\0",name:"identity",encode:e=>_Y(e),decode:e=>SY(e)});var CY=Object.freeze({__proto__:null,identity:IY});const NY=yn({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var $Y=Object.freeze({__proto__:null,base2:NY});const UY=yn({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var BY=Object.freeze({__proto__:null,base8:UY});const PY=ff({prefix:"9",name:"base10",alphabet:"0123456789"});var kY=Object.freeze({__proto__:null,base10:PY});const MY=yn({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),LY=yn({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var jY=Object.freeze({__proto__:null,base16:MY,base16upper:LY});const zY=yn({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),qY=yn({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),HY=yn({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),FY=yn({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),VY=yn({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),GY=yn({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),KY=yn({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),YY=yn({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),WY=yn({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var XY=Object.freeze({__proto__:null,base32:zY,base32upper:qY,base32pad:HY,base32padupper:FY,base32hex:VY,base32hexupper:GY,base32hexpad:KY,base32hexpadupper:YY,base32z:WY});const ZY=ff({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),QY=ff({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var JY=Object.freeze({__proto__:null,base36:ZY,base36upper:QY});const eW=ff({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),tW=ff({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var nW=Object.freeze({__proto__:null,base58btc:eW,base58flickr:tW});const rW=yn({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),iW=yn({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),sW=yn({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),oW=yn({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var aW=Object.freeze({__proto__:null,base64:rW,base64pad:iW,base64url:sW,base64urlpad:oW});const oI=Array.from(""),cW=oI.reduce((e,t,n)=>(e[n]=t,e),[]),lW=oI.reduce((e,t,n)=>(e[t.codePointAt(0)]=n,e),[]);function uW(e){return e.reduce((t,n)=>(t+=cW[n],t),"")}function fW(e){const t=[];for(const n of e){const r=lW[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);t.push(r)}return new Uint8Array(t)}const dW=wp({prefix:"",name:"base256emoji",encode:uW,decode:fW});var hW=Object.freeze({__proto__:null,base256emoji:dW}),pW=aI,px=128,gW=-128,mW=Math.pow(2,31);function aI(e,t,n){t=t||[],n=n||0;for(var r=n;e>=mW;)t[n++]=e&255|px,e/=128;for(;e&gW;)t[n++]=e&255|px,e>>>=7;return t[n]=e|0,aI.bytes=n-r+1,t}var yW=db,bW=128,gx=127;function db(e,r){var n=0,r=r||0,s=0,a=r,c,u=e.length;do{if(a>=u)throw db.bytes=0,new RangeError("Could not decode varint");c=e[a++],n+=s<28?(c&gx)<<s:(c&gx)*Math.pow(2,s),s+=7}while(c>=bW);return db.bytes=a-r,n}var wW=Math.pow(2,7),vW=Math.pow(2,14),EW=Math.pow(2,21),SW=Math.pow(2,28),_W=Math.pow(2,35),AW=Math.pow(2,42),xW=Math.pow(2,49),RW=Math.pow(2,56),OW=Math.pow(2,63),TW=function(e){return e<wW?1:e<vW?2:e<EW?3:e<SW?4:e<_W?5:e<AW?6:e<xW?7:e<RW?8:e<OW?9:10},DW={encode:pW,decode:yW,encodingLength:TW},cI=DW;const mx=(e,t,n=0)=>(cI.encode(e,t,n),t),yx=e=>cI.encodingLength(e),hb=(e,t)=>{const n=t.byteLength,r=yx(e),s=r+yx(n),a=new Uint8Array(s+n);return mx(e,a,0),mx(n,a,r),a.set(t,s),new IW(e,n,t,a)};class IW{constructor(t,n,r,s){this.code=t,this.size=n,this.digest=r,this.bytes=s}}const lI=({name:e,code:t,encode:n})=>new CW(e,t,n);class CW{constructor(t,n,r){this.name=t,this.code=n,this.encode=r}digest(t){if(t instanceof Uint8Array){const n=this.encode(t);return n instanceof Uint8Array?hb(this.code,n):n.then(r=>hb(this.code,r))}else throw Error("Unknown type, must be binary type")}}const uI=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),NW=lI({name:"sha2-256",code:18,encode:uI("SHA-256")}),$W=lI({name:"sha2-512",code:19,encode:uI("SHA-512")});var UW=Object.freeze({__proto__:null,sha256:NW,sha512:$W});const fI=0,BW="identity",dI=iI,PW=e=>hb(fI,dI(e)),kW={code:fI,name:BW,encode:dI,digest:PW};var MW=Object.freeze({__proto__:null,identity:kW});new TextEncoder,new TextDecoder;const bx={...CY,...$Y,...BY,...kY,...jY,...XY,...JY,...nW,...aW,...hW};({...UW,...MW});function hI(e){return globalThis.Buffer!=null?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}function LW(e=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?hI(globalThis.Buffer.allocUnsafe(e)):new Uint8Array(e)}function pI(e,t,n,r){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:n},decoder:{decode:r}}}const wx=pI("utf8","u",e=>"u"+new TextDecoder("utf8").decode(e),e=>new TextEncoder().encode(e.substring(1))),Yy=pI("ascii","a",e=>{let t="a";for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t},e=>{e=e.substring(1);const t=LW(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}),jW={utf8:wx,"utf-8":wx,hex:bx.base16,latin1:Yy,ascii:Yy,binary:Yy,...bx};function zW(e,t="utf8"){const n=jW[t];if(!n)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?hI(globalThis.Buffer.from(e,"utf-8")):n.decoder.decode(`${n.prefix}${e}`)}var qW=Object.defineProperty,HW=(e,t,n)=>t in e?qW(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ii=(e,t,n)=>HW(e,typeof t!="symbol"?t+"":t,n);class FW{constructor(t,n){this.core=t,this.logger=n,ii(this,"keychain",new Map),ii(this,"name",FK),ii(this,"version",VK),ii(this,"initialized",!1),ii(this,"storagePrefix",wi),ii(this,"init",async()=>{if(!this.initialized){const r=await this.getKeyChain();typeof r<"u"&&(this.keychain=r),this.initialized=!0}}),ii(this,"has",r=>(this.isInitialized(),this.keychain.has(r))),ii(this,"set",async(r,s)=>{this.isInitialized(),this.keychain.set(r,s),await this.persist()}),ii(this,"get",r=>{this.isInitialized();const s=this.keychain.get(r);if(typeof s>"u"){const{message:a}=be("NO_MATCHING_KEY",`${this.name}: ${r}`);throw new Error(a)}return s}),ii(this,"del",async r=>{this.isInitialized(),this.keychain.delete(r),await this.persist()}),this.core=t,this.logger=Cn(n,this.name)}get context(){return Xn(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(t){await this.core.storage.setItem(this.storageKey,Y0(t))}async getKeyChain(){const t=await this.core.storage.getItem(this.storageKey);return typeof t<"u"?W0(t):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:t}=be("NOT_INITIALIZED",this.name);throw new Error(t)}}}var VW=Object.defineProperty,GW=(e,t,n)=>t in e?VW(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,fn=(e,t,n)=>GW(e,typeof t!="symbol"?t+"":t,n);class KW{constructor(t,n,r){this.core=t,this.logger=n,fn(this,"name",qK),fn(this,"keychain"),fn(this,"randomSessionIdentifier",sb()),fn(this,"initialized",!1),fn(this,"init",async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)}),fn(this,"hasKeys",s=>(this.isInitialized(),this.keychain.has(s))),fn(this,"getClientId",async()=>{this.isInitialized();const s=await this.getClientSeed(),a=L_(s);return I3(a.publicKey)}),fn(this,"generateKeyPair",()=>{this.isInitialized();const s=$F();return this.setPrivateKey(s.publicKey,s.privateKey)}),fn(this,"signJWT",async s=>{this.isInitialized();const a=await this.getClientSeed(),c=L_(a),u=this.randomSessionIdentifier;return await O7(u,s,HK,c)}),fn(this,"generateSharedKey",(s,a,c)=>{this.isInitialized();const u=this.getPrivateKey(s),d=UF(u,a);return this.setSymKey(d,c)}),fn(this,"setSymKey",async(s,a)=>{this.isInitialized();const c=a||ch(s);return await this.keychain.set(c,s),c}),fn(this,"deleteKeyPair",async s=>{this.isInitialized(),await this.keychain.del(s)}),fn(this,"deleteSymKey",async s=>{this.isInitialized(),await this.keychain.del(s)}),fn(this,"encode",async(s,a,c)=>{this.isInitialized();const u=CD(c),d=ss(a);if(TA(u))return kF(d,c?.encoding);if(OA(u)){const y=u.senderPublicKey,v=u.receiverPublicKey;s=await this.generateSharedKey(y,v)}const h=this.getSymKey(s),{type:p,senderPublicKey:m}=u;return BF({type:p,symKey:h,message:d,senderPublicKey:m,encoding:c?.encoding})}),fn(this,"decode",async(s,a,c)=>{this.isInitialized();const u=LF(a,c);if(TA(u)){const d=MF(a,c?.encoding);return Yo(d)}if(OA(u)){const d=u.receiverPublicKey,h=u.senderPublicKey;s=await this.generateSharedKey(d,h)}try{const d=this.getSymKey(s),h=PF({symKey:d,encoded:a,encoding:c?.encoding});return Yo(h)}catch(d){this.logger.error(`Failed to decode message from topic: '${s}', clientId: '${await this.getClientId()}'`),this.logger.error(d)}}),fn(this,"getPayloadType",(s,a=Gr)=>{const c=qu({encoded:s,encoding:a});return Xo(c.type)}),fn(this,"getPayloadSenderPublicKey",(s,a=Gr)=>{const c=qu({encoded:s,encoding:a});return c.senderPublicKey?Gn(c.senderPublicKey,In):void 0}),this.core=t,this.logger=Cn(n,this.name),this.keychain=r||new FW(this.core,this.logger)}get context(){return Xn(this.logger)}async setPrivateKey(t,n){return await this.keychain.set(t,n),t}getPrivateKey(t){return this.keychain.get(t)}async getClientSeed(){let t="";try{t=this.keychain.get(fx)}catch{t=sb(),await this.keychain.set(fx,t)}return zW(t,"base16")}getSymKey(t){return this.keychain.get(t)}isInitialized(){if(!this.initialized){const{message:t}=be("NOT_INITIALIZED",this.name);throw new Error(t)}}}var YW=Object.defineProperty,WW=Object.defineProperties,XW=Object.getOwnPropertyDescriptors,vx=Object.getOwnPropertySymbols,ZW=Object.prototype.hasOwnProperty,QW=Object.prototype.propertyIsEnumerable,pb=(e,t,n)=>t in e?YW(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,JW=(e,t)=>{for(var n in t||(t={}))ZW.call(t,n)&&pb(e,n,t[n]);if(vx)for(var n of vx(t))QW.call(t,n)&&pb(e,n,t[n]);return e},eX=(e,t)=>WW(e,XW(t)),ar=(e,t,n)=>pb(e,typeof t!="symbol"?t+"":t,n);class tX extends rK{constructor(t,n){super(t,n),this.logger=t,this.core=n,ar(this,"messages",new Map),ar(this,"messagesWithoutClientAck",new Map),ar(this,"name",GK),ar(this,"version",KK),ar(this,"initialized",!1),ar(this,"storagePrefix",wi),ar(this,"init",async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const r=await this.getRelayerMessages();typeof r<"u"&&(this.messages=r);const s=await this.getRelayerMessagesWithoutClientAck();typeof s<"u"&&(this.messagesWithoutClientAck=s),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(r){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(r)}finally{this.initialized=!0}}}),ar(this,"set",async(r,s,a)=>{this.isInitialized();const c=fi(s);let u=this.messages.get(r);if(typeof u>"u"&&(u={}),typeof u[c]<"u")return c;if(u[c]=s,this.messages.set(r,u),a===hh.inbound){const d=this.messagesWithoutClientAck.get(r)||{};this.messagesWithoutClientAck.set(r,eX(JW({},d),{[c]:s}))}return await this.persist(),c}),ar(this,"get",r=>{this.isInitialized();let s=this.messages.get(r);return typeof s>"u"&&(s={}),s}),ar(this,"getWithoutAck",r=>{this.isInitialized();const s={};for(const a of r){const c=this.messagesWithoutClientAck.get(a)||{};s[a]=Object.values(c)}return s}),ar(this,"has",(r,s)=>{this.isInitialized();const a=this.get(r),c=fi(s);return typeof a[c]<"u"}),ar(this,"ack",async(r,s)=>{this.isInitialized();const a=this.messagesWithoutClientAck.get(r);if(typeof a>"u")return;const c=fi(s);delete a[c],Object.keys(a).length===0?this.messagesWithoutClientAck.delete(r):this.messagesWithoutClientAck.set(r,a),await this.persist()}),ar(this,"del",async r=>{this.isInitialized(),this.messages.delete(r),this.messagesWithoutClientAck.delete(r),await this.persist()}),this.logger=Cn(t,this.name),this.core=n}get context(){return Xn(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get storageKeyWithoutClientAck(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name+"_withoutClientAck"}async setRelayerMessages(t){await this.core.storage.setItem(this.storageKey,Y0(t))}async setRelayerMessagesWithoutClientAck(t){await this.core.storage.setItem(this.storageKeyWithoutClientAck,Y0(t))}async getRelayerMessages(){const t=await this.core.storage.getItem(this.storageKey);return typeof t<"u"?W0(t):void 0}async getRelayerMessagesWithoutClientAck(){const t=await this.core.storage.getItem(this.storageKeyWithoutClientAck);return typeof t<"u"?W0(t):void 0}async persist(){await this.setRelayerMessages(this.messages),await this.setRelayerMessagesWithoutClientAck(this.messagesWithoutClientAck)}isInitialized(){if(!this.initialized){const{message:t}=be("NOT_INITIALIZED",this.name);throw new Error(t)}}}var nX=Object.defineProperty,rX=Object.defineProperties,iX=Object.getOwnPropertyDescriptors,Ex=Object.getOwnPropertySymbols,sX=Object.prototype.hasOwnProperty,oX=Object.prototype.propertyIsEnumerable,gb=(e,t,n)=>t in e?nX(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Hd=(e,t)=>{for(var n in t||(t={}))sX.call(t,n)&&gb(e,n,t[n]);if(Ex)for(var n of Ex(t))oX.call(t,n)&&gb(e,n,t[n]);return e},Wy=(e,t)=>rX(e,iX(t)),zr=(e,t,n)=>gb(e,typeof t!="symbol"?t+"":t,n);class aX extends iK{constructor(t,n){super(t,n),this.relayer=t,this.logger=n,zr(this,"events",new Kn.EventEmitter),zr(this,"name",YK),zr(this,"queue",new Map),zr(this,"publishTimeout",we.toMiliseconds(we.ONE_MINUTE)),zr(this,"initialPublishTimeout",we.toMiliseconds(we.ONE_SECOND*15)),zr(this,"needsTransportRestart",!1),zr(this,"publish",async(r,s,a)=>{var c;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:r,message:s,opts:a}});const u=a?.ttl||dx,d=Ch(a),h=a?.prompt||!1,p=a?.tag||0,m=a?.id||qo().toString(),y={topic:r,message:s,opts:{ttl:u,relay:d,prompt:h,tag:p,id:m,attestation:a?.attestation,tvf:a?.tvf}},v=`Failed to publish payload, please try again. id:${m} tag:${p}`;try{const w=new Promise(async E=>{const S=({id:I})=>{y.opts.id===I&&(this.removeRequestFromQueue(I),this.relayer.events.removeListener(nn.publish,S),E(y))};this.relayer.events.on(nn.publish,S);const A=Ks(new Promise((I,D)=>{this.rpcPublish({topic:r,message:s,ttl:u,prompt:h,tag:p,id:m,attestation:a?.attestation,tvf:a?.tvf}).then(I).catch(B=>{this.logger.warn(B,B?.message),D(B)})}),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${m} tag:${p}`);try{await A,this.events.removeListener(nn.publish,S)}catch(I){this.queue.set(m,Wy(Hd({},y),{attempt:1})),this.logger.warn(I,I?.message)}});this.logger.trace({type:"method",method:"publish",params:{id:m,topic:r,message:s,opts:a}}),await Ks(w,this.publishTimeout,v)}catch(w){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(w),(c=a?.internal)!=null&&c.throwOnFailedPublish)throw w}finally{this.queue.delete(m)}}),zr(this,"on",(r,s)=>{this.events.on(r,s)}),zr(this,"once",(r,s)=>{this.events.once(r,s)}),zr(this,"off",(r,s)=>{this.events.off(r,s)}),zr(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.relayer=t,this.logger=Cn(n,this.name),this.registerEventListeners()}get context(){return Xn(this.logger)}async rpcPublish(t){var n,r,s,a;const{topic:c,message:u,ttl:d=dx,prompt:h,tag:p,id:m,attestation:y,tvf:v}=t,w={method:mu(Ch().protocol).publish,params:Hd({topic:c,message:u,ttl:d,prompt:h,tag:p,attestation:y},v),id:m};pn((n=w.params)==null?void 0:n.prompt)&&((r=w.params)==null||delete r.prompt),pn((s=w.params)==null?void 0:s.tag)&&((a=w.params)==null||delete a.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:w});const E=await this.relayer.request(w);return this.relayer.events.emit(nn.publish,t),this.logger.debug("Successfully Published Payload"),E}removeRequestFromQueue(t){this.queue.delete(t)}checkQueue(){this.queue.forEach(async(t,n)=>{const r=t.attempt+1;this.queue.set(n,Wy(Hd({},t),{attempt:r}));const{topic:s,message:a,opts:c,attestation:u}=t;this.logger.warn({},`Publisher: queue->publishing: ${t.opts.id}, tag: ${t.opts.tag}, attempt: ${r}`),await this.rpcPublish(Wy(Hd({},t),{topic:s,message:a,ttl:c.ttl,prompt:c.prompt,tag:c.tag,id:c.id,attestation:u,tvf:c.tvf})),this.logger.warn({},`Publisher: queue->published: ${t.opts.id}`)})}registerEventListeners(){this.relayer.core.heartbeat.on(sa.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(nn.connection_stalled);return}this.checkQueue()}),this.relayer.on(nn.message_ack,t=>{this.removeRequestFromQueue(t.id.toString())})}}var cX=Object.defineProperty,lX=(e,t,n)=>t in e?cX(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,rc=(e,t,n)=>lX(e,typeof t!="symbol"?t+"":t,n);class uX{constructor(){rc(this,"map",new Map),rc(this,"set",(t,n)=>{const r=this.get(t);this.exists(t,n)||this.map.set(t,[...r,n])}),rc(this,"get",t=>this.map.get(t)||[]),rc(this,"exists",(t,n)=>this.get(t).includes(n)),rc(this,"delete",(t,n)=>{if(typeof n>"u"){this.map.delete(t);return}if(!this.map.has(t))return;const r=this.get(t);if(!this.exists(t,n))return;const s=r.filter(a=>a!==n);if(!s.length){this.map.delete(t);return}this.map.set(t,s)}),rc(this,"clear",()=>{this.map.clear()})}get topics(){return Array.from(this.map.keys())}}var fX=Object.defineProperty,dX=Object.defineProperties,hX=Object.getOwnPropertyDescriptors,Sx=Object.getOwnPropertySymbols,pX=Object.prototype.hasOwnProperty,gX=Object.prototype.propertyIsEnumerable,mb=(e,t,n)=>t in e?fX(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,lu=(e,t)=>{for(var n in t||(t={}))pX.call(t,n)&&mb(e,n,t[n]);if(Sx)for(var n of Sx(t))gX.call(t,n)&&mb(e,n,t[n]);return e},Xy=(e,t)=>dX(e,hX(t)),ut=(e,t,n)=>mb(e,typeof t!="symbol"?t+"":t,n);class mX extends aK{constructor(t,n){super(t,n),this.relayer=t,this.logger=n,ut(this,"subscriptions",new Map),ut(this,"topicMap",new uX),ut(this,"events",new Kn.EventEmitter),ut(this,"name",tY),ut(this,"version",nY),ut(this,"pending",new Map),ut(this,"cached",[]),ut(this,"initialized",!1),ut(this,"storagePrefix",wi),ut(this,"subscribeTimeout",we.toMiliseconds(we.ONE_MINUTE)),ut(this,"initialSubscribeTimeout",we.toMiliseconds(we.ONE_SECOND*15)),ut(this,"clientId"),ut(this,"batchSubscribeTopicsLimit",500),ut(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),await this.restore()),this.initialized=!0}),ut(this,"subscribe",async(r,s)=>{this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:s}});try{const a=Ch(s),c={topic:r,relay:a,transportType:s?.transportType};this.pending.set(r,c);const u=await this.rpcSubscribe(r,a,s);return typeof u=="string"&&(this.onSubscribe(u,c),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:s}})),u}catch(a){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(a),a}}),ut(this,"unsubscribe",async(r,s)=>{this.isInitialized(),typeof s?.id<"u"?await this.unsubscribeById(r,s.id,s):await this.unsubscribeByTopic(r,s)}),ut(this,"isSubscribed",r=>new Promise(s=>{s(this.topicMap.topics.includes(r))})),ut(this,"isKnownTopic",r=>new Promise(s=>{s(this.topicMap.topics.includes(r)||this.pending.has(r)||this.cached.some(a=>a.topic===r))})),ut(this,"on",(r,s)=>{this.events.on(r,s)}),ut(this,"once",(r,s)=>{this.events.once(r,s)}),ut(this,"off",(r,s)=>{this.events.off(r,s)}),ut(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),ut(this,"start",async()=>{await this.onConnect()}),ut(this,"stop",async()=>{await this.onDisconnect()}),ut(this,"restart",async()=>{await this.restore(),await this.onRestart()}),ut(this,"checkPending",async()=>{if(this.pending.size===0&&(!this.initialized||!this.relayer.connected))return;const r=[];this.pending.forEach(s=>{r.push(s)}),await this.batchSubscribe(r)}),ut(this,"registerEventListeners",()=>{this.relayer.core.heartbeat.on(sa.pulse,async()=>{await this.checkPending()}),this.events.on(cr.created,async r=>{const s=cr.created;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:r}),await this.persist()}),this.events.on(cr.deleted,async r=>{const s=cr.deleted;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:r}),await this.persist()})}),this.relayer=t,this.logger=Cn(n,this.name),this.clientId=""}get context(){return Xn(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}get hasAnyTopics(){return this.topicMap.topics.length>0||this.pending.size>0||this.cached.length>0||this.subscriptions.size>0}hasSubscription(t,n){let r=!1;try{r=this.getSubscription(t).topic===n}catch{}return r}reset(){this.cached=[],this.initialized=!0}onDisable(){this.values.length>0&&(this.cached=this.values),this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(t,n){const r=this.topicMap.get(t);await Promise.all(r.map(async s=>await this.unsubscribeById(t,s,n)))}async unsubscribeById(t,n,r){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:t,id:n,opts:r}});try{const s=Ch(r);await this.restartToComplete({topic:t,id:n,relay:s}),await this.rpcUnsubscribe(t,n,s);const a=Et("USER_DISCONNECTED",`${this.name}, ${t}`);await this.onUnsubscribe(t,n,a),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:t,id:n,opts:r}})}catch(s){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(s),s}}async rpcSubscribe(t,n,r){var s;(!r||r?.transportType===wt.relay)&&await this.restartToComplete({topic:t,id:t,relay:n});const a={method:mu(n.protocol).subscribe,params:{topic:t}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:a});const c=(s=r?.internal)==null?void 0:s.throwOnFailedPublish;try{const u=await this.getSubscriptionId(t);if(r?.transportType===wt.link_mode)return setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(a).catch(p=>this.logger.warn(p))},we.toMiliseconds(we.ONE_SECOND)),u;const d=new Promise(async p=>{const m=y=>{y.topic===t&&(this.events.removeListener(cr.created,m),p(y.id))};this.events.on(cr.created,m);try{const y=await Ks(new Promise((v,w)=>{this.relayer.request(a).catch(E=>{this.logger.warn(E,E?.message),w(E)}).then(v)}),this.initialSubscribeTimeout,`Subscribing to ${t} failed, please try again`);this.events.removeListener(cr.created,m),p(y)}catch{}}),h=await Ks(d,this.subscribeTimeout,`Subscribing to ${t} failed, please try again`);if(!h&&c)throw new Error(`Subscribing to ${t} failed, please try again`);return h?u:null}catch(u){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(nn.connection_stalled),c)throw u}return null}async rpcBatchSubscribe(t){if(!t.length)return;const n=t[0].relay,r={method:mu(n.protocol).batchSubscribe,params:{topics:t.map(s=>s.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});try{await await Ks(new Promise(s=>{this.relayer.request(r).catch(a=>this.logger.warn(a)).then(s)}),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{this.relayer.events.emit(nn.connection_stalled)}}async rpcBatchFetchMessages(t){if(!t.length)return;const n=t[0].relay,r={method:mu(n.protocol).batchFetchMessages,params:{topics:t.map(a=>a.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});let s;try{s=await await Ks(new Promise((a,c)=>{this.relayer.request(r).catch(u=>{this.logger.warn(u),c(u)}).then(a)}),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(nn.connection_stalled)}return s}rpcUnsubscribe(t,n,r){const s={method:mu(r.protocol).unsubscribe,params:{topic:t,id:n}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s}),this.relayer.request(s)}onSubscribe(t,n){this.setSubscription(t,Xy(lu({},n),{id:t})),this.pending.delete(n.topic)}onBatchSubscribe(t){t.length&&t.forEach(n=>{this.setSubscription(n.id,lu({},n)),this.pending.delete(n.topic)})}async onUnsubscribe(t,n,r){this.events.removeAllListeners(n),this.hasSubscription(n,t)&&this.deleteSubscription(n,r),await this.relayer.messages.del(t)}async setRelayerSubscriptions(t){await this.relayer.core.storage.setItem(this.storageKey,t)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(t,n){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:t,subscription:n}),this.addSubscription(t,n)}addSubscription(t,n){this.subscriptions.set(t,lu({},n)),this.topicMap.set(n.topic,t),this.events.emit(cr.created,n)}getSubscription(t){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:t});const n=this.subscriptions.get(t);if(!n){const{message:r}=be("NO_MATCHING_KEY",`${this.name}: ${t}`);throw new Error(r)}return n}deleteSubscription(t,n){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:t,reason:n});const r=this.getSubscription(t);this.subscriptions.delete(t),this.topicMap.delete(r.topic,t),this.events.emit(cr.deleted,Xy(lu({},r),{reason:n}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(cr.sync)}async onRestart(){if(this.cached.length){const t=[...this.cached],n=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<n;r++){const s=t.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(s)}}this.events.emit(cr.resubscribed)}async restore(){try{const t=await this.getRelayerSubscriptions();if(typeof t>"u"||!t.length)return;if(this.subscriptions.size){const{message:n}=be("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(n)}this.cached=t,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(t){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(t)}}async batchSubscribe(t){t.length&&(await this.rpcBatchSubscribe(t),this.onBatchSubscribe(await Promise.all(t.map(async n=>Xy(lu({},n),{id:await this.getSubscriptionId(n.topic)})))))}async batchFetchMessages(t){if(!t.length)return;this.logger.trace(`Fetching batch messages for ${t.length} subscriptions`);const n=await this.rpcBatchFetchMessages(t);n&&n.messages&&(await tq(we.toMiliseconds(we.ONE_SECOND)),await this.relayer.handleBatchMessageEvents(n.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){const{message:t}=be("NOT_INITIALIZED",this.name);throw new Error(t)}}async restartToComplete(t){!this.relayer.connected&&!this.relayer.connecting&&(this.cached.push(t),await this.relayer.transportOpen())}async getClientId(){return this.clientId||(this.clientId=await this.relayer.core.crypto.getClientId()),this.clientId}async getSubscriptionId(t){return fi(t+await this.getClientId())}}var yX=Object.defineProperty,_x=Object.getOwnPropertySymbols,bX=Object.prototype.hasOwnProperty,wX=Object.prototype.propertyIsEnumerable,yb=(e,t,n)=>t in e?yX(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ax=(e,t)=>{for(var n in t||(t={}))bX.call(t,n)&&yb(e,n,t[n]);if(_x)for(var n of _x(t))wX.call(t,n)&&yb(e,n,t[n]);return e},Ge=(e,t,n)=>yb(e,typeof t!="symbol"?t+"":t,n);class vX extends sK{constructor(t){super(t),Ge(this,"protocol","wc"),Ge(this,"version",2),Ge(this,"core"),Ge(this,"logger"),Ge(this,"events",new Kn.EventEmitter),Ge(this,"provider"),Ge(this,"messages"),Ge(this,"subscriber"),Ge(this,"publisher"),Ge(this,"name",XK),Ge(this,"transportExplicitlyClosed",!1),Ge(this,"initialized",!1),Ge(this,"connectionAttemptInProgress",!1),Ge(this,"relayUrl"),Ge(this,"projectId"),Ge(this,"packageName"),Ge(this,"bundleId"),Ge(this,"hasExperiencedNetworkDisruption",!1),Ge(this,"pingTimeout"),Ge(this,"heartBeatTimeout",we.toMiliseconds(we.THIRTY_SECONDS+we.FIVE_SECONDS)),Ge(this,"reconnectTimeout"),Ge(this,"connectPromise"),Ge(this,"reconnectInProgress",!1),Ge(this,"requestsInFlight",[]),Ge(this,"connectTimeout",we.toMiliseconds(we.ONE_SECOND*15)),Ge(this,"request",async n=>{var r,s;this.logger.debug("Publishing Request Payload");const a=n.id||qo().toString();await this.toEstablishConnection();try{this.logger.trace({id:a,method:n.method,topic:(r=n.params)==null?void 0:r.topic},"relayer.request - publishing...");const c=`${a}:${((s=n.params)==null?void 0:s.tag)||""}`;this.requestsInFlight.push(c);const u=await this.provider.request(n);return this.requestsInFlight=this.requestsInFlight.filter(d=>d!==c),u}catch(c){throw this.logger.debug(`Failed to Publish Request: ${a}`),c}}),Ge(this,"resetPingTimeout",()=>{Oh()&&(clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var n,r,s,a;try{this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),(a=(s=(r=(n=this.provider)==null?void 0:n.connection)==null?void 0:r.socket)==null?void 0:s.terminate)==null||a.call(s)}catch(c){this.logger.warn(c,c?.message)}},this.heartBeatTimeout))}),Ge(this,"onPayloadHandler",n=>{this.onProviderPayload(n),this.resetPingTimeout()}),Ge(this,"onConnectHandler",()=>{this.logger.warn({},"Relayer connected "),this.startPingTimeout(),this.events.emit(nn.connect)}),Ge(this,"onDisconnectHandler",()=>{this.logger.warn({},"Relayer disconnected "),this.requestsInFlight=[],this.onProviderDisconnect()}),Ge(this,"onProviderErrorHandler",n=>{this.logger.fatal(`Fatal socket error: ${n.message}`),this.events.emit(nn.error,n),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()}),Ge(this,"registerProviderListeners",()=>{this.provider.on(Ar.payload,this.onPayloadHandler),this.provider.on(Ar.connect,this.onConnectHandler),this.provider.on(Ar.disconnect,this.onDisconnectHandler),this.provider.on(Ar.error,this.onProviderErrorHandler)}),this.core=t.core,this.logger=typeof t.logger<"u"&&typeof t.logger!="string"?Cn(t.logger,this.name):lf(gp({level:t.logger||WK})),this.messages=new tX(this.logger,t.core),this.subscriber=new mX(this,this.logger),this.publisher=new aX(this,this.logger),this.relayUrl=t?.relayUrl||nI,this.projectId=t.projectId,Lz()?this.packageName=W_():jz()&&(this.bundleId=W_()),this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.transportOpen().catch(t=>this.logger.warn(t,t?.message))}get context(){return Xn(this.logger)}get connected(){var t,n,r;return((r=(n=(t=this.provider)==null?void 0:t.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===1||!1}get connecting(){var t,n,r;return((r=(n=(t=this.provider)==null?void 0:t.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===0||this.connectPromise!==void 0||!1}async publish(t,n,r){this.isInitialized(),await this.publisher.publish(t,n,r),await this.recordMessageEvent({topic:t,message:n,publishedAt:Date.now(),transportType:wt.relay},hh.outbound)}async subscribe(t,n){var r,s,a;this.isInitialized(),(!(n!=null&&n.transportType)||n?.transportType==="relay")&&await this.toEstablishConnection();const c=typeof((r=n?.internal)==null?void 0:r.throwOnFailedPublish)>"u"?!0:(s=n?.internal)==null?void 0:s.throwOnFailedPublish;let u=((a=this.subscriber.topicMap.get(t))==null?void 0:a[0])||"",d;const h=p=>{p.topic===t&&(this.subscriber.off(cr.created,h),d())};return await Promise.all([new Promise(p=>{d=p,this.subscriber.on(cr.created,h)}),new Promise(async(p,m)=>{u=await this.subscriber.subscribe(t,Ax({internal:{throwOnFailedPublish:c}},n)).catch(y=>{c&&m(y)})||u,p()})]),u}async unsubscribe(t,n){this.isInitialized(),await this.subscriber.unsubscribe(t,n)}on(t,n){this.events.on(t,n)}once(t,n){this.events.once(t,n)}off(t,n){this.events.off(t,n)}removeListener(t,n){this.events.removeListener(t,n)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await Ks(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(t){if(!this.subscriber.hasAnyTopics){this.logger.warn("Starting WS connection skipped because the client has no topics to work with.");return}if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise(async(n,r)=>{await this.connect(t).then(n).catch(r).finally(()=>{this.connectPromise=void 0})}),await this.connectPromise),!this.connected)throw new Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}async restartTransport(t){this.logger.debug({},"Restarting transport..."),!this.connectionAttemptInProgress&&(this.relayUrl=t||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await LA())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(t){if(t?.length===0){this.logger.trace("Batch message events is empty. Ignoring...");return}const n=t.sort((r,s)=>r.publishedAt-s.publishedAt);this.logger.debug(`Batch of ${n.length} message events sorted`);for(const r of n)try{await this.onMessageEvent(r)}catch(s){this.logger.warn(s,"Error while processing batch message event: "+s?.message)}this.logger.trace(`Batch of ${n.length} message events processed`)}async onLinkMessageEvent(t,n){const{topic:r}=t;if(!n.sessionExists){const s=Gt(we.FIVE_MINUTES),a={topic:r,expiry:s,relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(r,a)}this.events.emit(nn.message,t),await this.recordMessageEvent(t,hh.inbound)}async connect(t){await this.confirmOnlineStateOrThrow(),t&&t!==this.relayUrl&&(this.relayUrl=t,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let n=1;for(;n<6;){try{if(this.transportExplicitlyClosed)break;this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${n}...`),await this.createProvider(),await new Promise(async(r,s)=>{const a=()=>{s(new Error("Connection interrupted while trying to connect"))};this.provider.once(Ar.disconnect,a),await Ks(new Promise((c,u)=>{this.provider.connect().then(c).catch(u)}),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(c=>{s(c)}).finally(()=>{this.provider.off(Ar.disconnect,a),clearTimeout(this.reconnectTimeout)}),await new Promise(async(c,u)=>{const d=()=>{s(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(Ar.disconnect,d),await this.subscriber.start().then(c).catch(u).finally(()=>{this.provider.off(Ar.disconnect,d)})}),this.hasExperiencedNetworkDisruption=!1,r()})}catch(r){await this.subscriber.stop();const s=r;this.logger.warn({},s.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${n}`);break}await new Promise(r=>setTimeout(r,we.toMiliseconds(n*1))),n++}}startPingTimeout(){var t,n,r,s,a;if(Oh())try{(n=(t=this.provider)==null?void 0:t.connection)!=null&&n.socket&&((a=(s=(r=this.provider)==null?void 0:r.connection)==null?void 0:s.socket)==null||a.on("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(c){this.logger.warn(c,c?.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const t=await this.core.crypto.signJWT(this.relayUrl);this.provider=new $r(new MK(Vz({sdkVersion:fb,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:t,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(t,n){const{topic:r,message:s}=t;await this.messages.set(r,s,n)}async shouldIgnoreMessageEvent(t){const{topic:n,message:r}=t;if(!r||r.length===0)return this.logger.warn(`Ignoring invalid/empty message: ${r}`),!0;if(!await this.subscriber.isKnownTopic(n))return this.logger.warn(`Ignoring message for unknown topic ${n}`),!0;const s=this.messages.has(n,r);return s&&this.logger.warn(`Ignoring duplicate message: ${r}`),s}async onProviderPayload(t){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:t}),$w(t)){if(!t.method.endsWith(ZK))return;const n=t.params,{topic:r,message:s,publishedAt:a,attestation:c}=n.data,u={topic:r,message:s,publishedAt:a,transportType:wt.relay,attestation:c};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(Ax({type:"event",event:n.id},u)),this.events.emit(n.id,u),await this.acknowledgePayload(t),await this.onMessageEvent(u)}else bp(t)&&this.events.emit(nn.message_ack,t)}async onMessageEvent(t){await this.shouldIgnoreMessageEvent(t)||(await this.recordMessageEvent(t,hh.inbound),this.events.emit(nn.message,t))}async acknowledgePayload(t){const n=mp(t.id,!0);await this.provider.connection.send(n)}unregisterProviderListeners(){this.provider.off(Ar.payload,this.onPayloadHandler),this.provider.off(Ar.connect,this.onConnectHandler),this.provider.off(Ar.disconnect,this.onDisconnectHandler),this.provider.off(Ar.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let t=await LA();NV(async n=>{t!==n&&(t=n,n?await this.transportOpen().catch(r=>this.logger.error(r,r?.message)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))}),this.core.heartbeat.on(sa.pulse,async()=>{if(!this.transportExplicitlyClosed&&!this.connected&&BV())try{await this.confirmOnlineStateOrThrow(),await this.transportOpen()}catch(n){this.logger.warn(n,n?.message)}})}async onProviderDisconnect(){clearTimeout(this.pingTimeout),this.events.emit(nn.disconnect),this.connectionAttemptInProgress=!1,!this.reconnectInProgress&&(this.reconnectInProgress=!0,await this.subscriber.stop(),this.subscriber.hasAnyTopics&&(this.transportExplicitlyClosed||(this.reconnectTimeout=setTimeout(async()=>{await this.transportOpen().catch(t=>this.logger.error(t,t?.message)),this.reconnectTimeout=void 0,this.reconnectInProgress=!1},we.toMiliseconds(QK)))))}isInitialized(){if(!this.initialized){const{message:t}=be("NOT_INITIALIZED",this.name);throw new Error(t)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectPromise){await this.connectPromise;return}await this.connect()}}}function EX(e,t){return e===t||Number.isNaN(e)&&Number.isNaN(t)}function xx(e){return Object.getOwnPropertySymbols(e).filter(t=>Object.prototype.propertyIsEnumerable.call(e,t))}function Rx(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const SX="[object RegExp]",_X="[object String]",AX="[object Number]",xX="[object Boolean]",Ox="[object Arguments]",RX="[object Symbol]",OX="[object Date]",TX="[object Map]",DX="[object Set]",IX="[object Array]",CX="[object Function]",NX="[object ArrayBuffer]",Zy="[object Object]",$X="[object Error]",UX="[object DataView]",BX="[object Uint8Array]",PX="[object Uint8ClampedArray]",kX="[object Uint16Array]",MX="[object Uint32Array]",LX="[object BigUint64Array]",jX="[object Int8Array]",zX="[object Int16Array]",qX="[object Int32Array]",HX="[object BigInt64Array]",FX="[object Float32Array]",VX="[object Float64Array]";function GX(){}function Tx(e){if(!e||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);return t===null||t===Object.prototype||Object.getPrototypeOf(t)===null?Object.prototype.toString.call(e)==="[object Object]":!1}function KX(e,t,n){return yu(e,t,void 0,void 0,void 0,void 0,n)}function yu(e,t,n,r,s,a,c){const u=c(e,t,n,r,s,a);if(u!==void 0)return u;if(typeof e==typeof t)switch(typeof e){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return e===t;case"number":return e===t||Object.is(e,t);case"function":return e===t;case"object":return Du(e,t,a,c)}return Du(e,t,a,c)}function Du(e,t,n,r){if(Object.is(e,t))return!0;let s=Rx(e),a=Rx(t);if(s===Ox&&(s=Zy),a===Ox&&(a=Zy),s!==a)return!1;switch(s){case _X:return e.toString()===t.toString();case AX:{const d=e.valueOf(),h=t.valueOf();return EX(d,h)}case xX:case OX:case RX:return Object.is(e.valueOf(),t.valueOf());case SX:return e.source===t.source&&e.flags===t.flags;case CX:return e===t}n=n??new Map;const c=n.get(e),u=n.get(t);if(c!=null&&u!=null)return c===t;n.set(e,t),n.set(t,e);try{switch(s){case TX:{if(e.size!==t.size)return!1;for(const[d,h]of e.entries())if(!t.has(d)||!yu(h,t.get(d),d,e,t,n,r))return!1;return!0}case DX:{if(e.size!==t.size)return!1;const d=Array.from(e.values()),h=Array.from(t.values());for(let p=0;p<d.length;p++){const m=d[p],y=h.findIndex(v=>yu(m,v,void 0,e,t,n,r));if(y===-1)return!1;h.splice(y,1)}return!0}case IX:case BX:case PX:case kX:case MX:case LX:case jX:case zX:case qX:case HX:case FX:case VX:{if(typeof Buffer<"u"&&Buffer.isBuffer(e)!==Buffer.isBuffer(t)||e.length!==t.length)return!1;for(let d=0;d<e.length;d++)if(!yu(e[d],t[d],d,e,t,n,r))return!1;return!0}case NX:return e.byteLength!==t.byteLength?!1:Du(new Uint8Array(e),new Uint8Array(t),n,r);case UX:return e.byteLength!==t.byteLength||e.byteOffset!==t.byteOffset?!1:Du(new Uint8Array(e),new Uint8Array(t),n,r);case $X:return e.name===t.name&&e.message===t.message;case Zy:{if(!(Du(e.constructor,t.constructor,n,r)||Tx(e)&&Tx(t)))return!1;const d=[...Object.keys(e),...xx(e)],h=[...Object.keys(t),...xx(t)];if(d.length!==h.length)return!1;for(let p=0;p<d.length;p++){const m=d[p],y=e[m];if(!Object.hasOwn(t,m))return!1;const v=t[m];if(!yu(y,v,m,e,t,n,r))return!1}return!0}default:return!1}}finally{n.delete(e),n.delete(t)}}function YX(e,t){return KX(e,t,GX)}var WX=Object.defineProperty,Dx=Object.getOwnPropertySymbols,XX=Object.prototype.hasOwnProperty,ZX=Object.prototype.propertyIsEnumerable,bb=(e,t,n)=>t in e?WX(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ix=(e,t)=>{for(var n in t||(t={}))XX.call(t,n)&&bb(e,n,t[n]);if(Dx)for(var n of Dx(t))ZX.call(t,n)&&bb(e,n,t[n]);return e},Mn=(e,t,n)=>bb(e,typeof t!="symbol"?t+"":t,n);class aa extends oK{constructor(t,n,r,s=wi,a=void 0){super(t,n,r,s),this.core=t,this.logger=n,this.name=r,Mn(this,"map",new Map),Mn(this,"version",JK),Mn(this,"cached",[]),Mn(this,"initialized",!1),Mn(this,"getKey"),Mn(this,"storagePrefix",wi),Mn(this,"recentlyDeleted",[]),Mn(this,"recentlyDeletedLimit",200),Mn(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(c=>{this.getKey&&c!==null&&!pn(c)?this.map.set(this.getKey(c),c):lV(c)?this.map.set(c.id,c):uV(c)&&this.map.set(c.topic,c)}),this.cached=[],this.initialized=!0)}),Mn(this,"set",async(c,u)=>{this.isInitialized(),this.map.has(c)?await this.update(c,u):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:c,value:u}),this.map.set(c,u),await this.persist())}),Mn(this,"get",c=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:c}),this.getData(c))),Mn(this,"getAll",c=>(this.isInitialized(),c?this.values.filter(u=>Object.keys(c).every(d=>YX(u[d],c[d]))):this.values)),Mn(this,"update",async(c,u)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:c,update:u});const d=Ix(Ix({},this.getData(c)),u);this.map.set(c,d),await this.persist()}),Mn(this,"delete",async(c,u)=>{this.isInitialized(),this.map.has(c)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:c,reason:u}),this.map.delete(c),this.addToRecentlyDeleted(c),await this.persist())}),this.logger=Cn(n,this.name),this.storagePrefix=s,this.getKey=a}get context(){return Xn(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(t){this.recentlyDeleted.push(t),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(t){await this.core.storage.setItem(this.storageKey,t)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(t){const n=this.map.get(t);if(!n){if(this.recentlyDeleted.includes(t)){const{message:s}=be("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${t}`);throw this.logger.error(s),new Error(s)}const{message:r}=be("NO_MATCHING_KEY",`${this.name}: ${t}`);throw this.logger.error(r),new Error(r)}return n}async persist(){await this.setDataStore(this.values)}async restore(){try{const t=await this.getDataStore();if(typeof t>"u"||!t.length)return;if(this.map.size){const{message:n}=be("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=t,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(t){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(t)}}isInitialized(){if(!this.initialized){const{message:t}=be("NOT_INITIALIZED",this.name);throw new Error(t)}}}var QX=Object.defineProperty,JX=(e,t,n)=>t in e?QX(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Le=(e,t,n)=>JX(e,typeof t!="symbol"?t+"":t,n);class eZ{constructor(t,n){this.core=t,this.logger=n,Le(this,"name",rY),Le(this,"version",iY),Le(this,"events",new zh),Le(this,"pairings"),Le(this,"initialized",!1),Le(this,"storagePrefix",wi),Le(this,"ignoredPayloadTypes",[es]),Le(this,"registeredMethods",[]),Le(this,"init",async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))}),Le(this,"register",({methods:r})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...r])]}),Le(this,"create",async r=>{this.isInitialized();const s=sb(),a=await this.core.crypto.setSymKey(s),c=Gt(we.FIVE_MINUTES),u={protocol:tI},d={topic:a,expiry:c,relay:u,active:!1,methods:r?.methods},h=IA({protocol:this.core.protocol,version:this.core.version,topic:a,symKey:s,relay:u,expiryTimestamp:c,methods:r?.methods});return this.events.emit(Po.create,d),this.core.expirer.set(a,c),await this.pairings.set(a,d),await this.core.relayer.subscribe(a,{transportType:r?.transportType}),{topic:a,uri:h}}),Le(this,"pair",async r=>{this.isInitialized();const s=this.core.eventClient.createEvent({properties:{topic:r?.uri,trace:[ai.pairing_started]}});this.isValidPair(r,s);const{topic:a,symKey:c,relay:u,expiryTimestamp:d,methods:h}=DA(r.uri);s.props.properties.topic=a,s.addTrace(ai.pairing_uri_validation_success),s.addTrace(ai.pairing_uri_not_expired);let p;if(this.pairings.keys.includes(a)){if(p=this.pairings.get(a),s.addTrace(ai.existing_pairing),p.active)throw s.setError(Vi.active_pairing_already_exists),new Error(`Pairing already exists: ${a}. Please try again with a new connection URI.`);s.addTrace(ai.pairing_not_expired)}const m=d||Gt(we.FIVE_MINUTES),y={topic:a,relay:u,expiry:m,active:!1,methods:h};this.core.expirer.set(a,m),await this.pairings.set(a,y),s.addTrace(ai.store_new_pairing),r.activatePairing&&await this.activate({topic:a}),this.events.emit(Po.create,y),s.addTrace(ai.emit_inactive_pairing),this.core.crypto.keychain.has(a)||await this.core.crypto.setSymKey(c,a),s.addTrace(ai.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{s.setError(Vi.no_internet_connection)}try{await this.core.relayer.subscribe(a,{relay:u})}catch(v){throw s.setError(Vi.subscribe_pairing_topic_failure),v}return s.addTrace(ai.subscribe_pairing_topic_success),y}),Le(this,"activate",async({topic:r})=>{this.isInitialized();const s=Gt(we.FIVE_MINUTES);this.core.expirer.set(r,s),await this.pairings.update(r,{active:!0,expiry:s})}),Le(this,"ping",async r=>{this.isInitialized(),await this.isValidPing(r),this.logger.warn("ping() is deprecated and will be removed in the next major release.");const{topic:s}=r;if(this.pairings.keys.includes(s)){const a=await this.sendRequest(s,"wc_pairingPing",{}),{done:c,resolve:u,reject:d}=No();this.events.once(Xe("pairing_ping",a),({error:h})=>{h?d(h):u()}),await c()}}),Le(this,"updateExpiry",async({topic:r,expiry:s})=>{this.isInitialized(),await this.pairings.update(r,{expiry:s})}),Le(this,"updateMetadata",async({topic:r,metadata:s})=>{this.isInitialized(),await this.pairings.update(r,{peerMetadata:s})}),Le(this,"getPairings",()=>(this.isInitialized(),this.pairings.values)),Le(this,"disconnect",async r=>{this.isInitialized(),await this.isValidDisconnect(r);const{topic:s}=r;this.pairings.keys.includes(s)&&(await this.sendRequest(s,"wc_pairingDelete",Et("USER_DISCONNECTED")),await this.deletePairing(s))}),Le(this,"formatUriFromPairing",r=>{this.isInitialized();const{topic:s,relay:a,expiry:c,methods:u}=r,d=this.core.crypto.keychain.get(s);return IA({protocol:this.core.protocol,version:this.core.version,topic:s,symKey:d,relay:a,expiryTimestamp:c,methods:u})}),Le(this,"sendRequest",async(r,s,a)=>{const c=Ys(s,a),u=await this.core.crypto.encode(r,c),d=au[s].req;return this.core.history.set(r,c),this.core.relayer.publish(r,u,d),c.id}),Le(this,"sendResult",async(r,s,a)=>{const c=mp(r,a),u=await this.core.crypto.encode(s,c),d=(await this.core.history.get(s,r)).request.method,h=au[d].res;await this.core.relayer.publish(s,u,h),await this.core.history.resolve(c)}),Le(this,"sendError",async(r,s,a)=>{const c=yp(r,a),u=await this.core.crypto.encode(s,c),d=(await this.core.history.get(s,r)).request.method,h=au[d]?au[d].res:au.unregistered_method.res;await this.core.relayer.publish(s,u,h),await this.core.history.resolve(c)}),Le(this,"deletePairing",async(r,s)=>{await this.core.relayer.unsubscribe(r),await Promise.all([this.pairings.delete(r,Et("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(r),s?Promise.resolve():this.core.expirer.del(r)])}),Le(this,"cleanup",async()=>{const r=this.pairings.getAll().filter(s=>zs(s.expiry));await Promise.all(r.map(s=>this.deletePairing(s.topic)))}),Le(this,"onRelayEventRequest",async r=>{const{topic:s,payload:a}=r;switch(a.method){case"wc_pairingPing":return await this.onPairingPingRequest(s,a);case"wc_pairingDelete":return await this.onPairingDeleteRequest(s,a);default:return await this.onUnknownRpcMethodRequest(s,a)}}),Le(this,"onRelayEventResponse",async r=>{const{topic:s,payload:a}=r,c=(await this.core.history.get(s,a.id)).request.method;switch(c){case"wc_pairingPing":return this.onPairingPingResponse(s,a);default:return this.onUnknownRpcMethodResponse(c)}}),Le(this,"onPairingPingRequest",async(r,s)=>{const{id:a}=s;try{this.isValidPing({topic:r}),await this.sendResult(a,r,!0),this.events.emit(Po.ping,{id:a,topic:r})}catch(c){await this.sendError(a,r,c),this.logger.error(c)}}),Le(this,"onPairingPingResponse",(r,s)=>{const{id:a}=s;setTimeout(()=>{li(s)?this.events.emit(Xe("pairing_ping",a),{}):Tr(s)&&this.events.emit(Xe("pairing_ping",a),{error:s.error})},500)}),Le(this,"onPairingDeleteRequest",async(r,s)=>{const{id:a}=s;try{this.isValidDisconnect({topic:r}),await this.deletePairing(r),this.events.emit(Po.delete,{id:a,topic:r})}catch(c){await this.sendError(a,r,c),this.logger.error(c)}}),Le(this,"onUnknownRpcMethodRequest",async(r,s)=>{const{id:a,method:c}=s;try{if(this.registeredMethods.includes(c))return;const u=Et("WC_METHOD_UNSUPPORTED",c);await this.sendError(a,r,u),this.logger.error(u)}catch(u){await this.sendError(a,r,u),this.logger.error(u)}}),Le(this,"onUnknownRpcMethodResponse",r=>{this.registeredMethods.includes(r)||this.logger.error(Et("WC_METHOD_UNSUPPORTED",r))}),Le(this,"isValidPair",(r,s)=>{var a;if(!zn(r)){const{message:u}=be("MISSING_OR_INVALID",`pair() params: ${r}`);throw s.setError(Vi.malformed_pairing_uri),new Error(u)}if(!cV(r.uri)){const{message:u}=be("MISSING_OR_INVALID",`pair() uri: ${r.uri}`);throw s.setError(Vi.malformed_pairing_uri),new Error(u)}const c=DA(r?.uri);if(!((a=c?.relay)!=null&&a.protocol)){const{message:u}=be("MISSING_OR_INVALID","pair() uri#relay-protocol");throw s.setError(Vi.malformed_pairing_uri),new Error(u)}if(!(c!=null&&c.symKey)){const{message:u}=be("MISSING_OR_INVALID","pair() uri#symKey");throw s.setError(Vi.malformed_pairing_uri),new Error(u)}if(c!=null&&c.expiryTimestamp&&we.toMiliseconds(c?.expiryTimestamp)<Date.now()){s.setError(Vi.pairing_expired);const{message:u}=be("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(u)}}),Le(this,"isValidPing",async r=>{if(!zn(r)){const{message:a}=be("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(a)}const{topic:s}=r;await this.isValidPairingTopic(s)}),Le(this,"isValidDisconnect",async r=>{if(!zn(r)){const{message:a}=be("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(a)}const{topic:s}=r;await this.isValidPairingTopic(s)}),Le(this,"isValidPairingTopic",async r=>{if(!kt(r,!1)){const{message:s}=be("MISSING_OR_INVALID",`pairing topic should be a string: ${r}`);throw new Error(s)}if(!this.pairings.keys.includes(r)){const{message:s}=be("NO_MATCHING_KEY",`pairing topic doesn't exist: ${r}`);throw new Error(s)}if(zs(this.pairings.get(r).expiry)){await this.deletePairing(r);const{message:s}=be("EXPIRED",`pairing topic: ${r}`);throw new Error(s)}}),this.core=t,this.logger=Cn(n,this.name),this.pairings=new aa(this.core,this.logger,this.name,this.storagePrefix)}get context(){return Xn(this.logger)}isInitialized(){if(!this.initialized){const{message:t}=be("NOT_INITIALIZED",this.name);throw new Error(t)}}registerRelayerEvents(){this.core.relayer.on(nn.message,async t=>{const{topic:n,message:r,transportType:s}=t;if(this.pairings.keys.includes(n)&&s!==wt.link_mode&&!this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(r)))try{const a=await this.core.crypto.decode(n,r);$w(a)?(this.core.history.set(n,a),await this.onRelayEventRequest({topic:n,payload:a})):bp(a)&&(await this.core.history.resolve(a),await this.onRelayEventResponse({topic:n,payload:a}),this.core.history.delete(n,a.id)),await this.core.relayer.messages.ack(n,r)}catch(a){this.logger.error(a)}})}registerExpirerEvents(){this.core.expirer.on(Or.expired,async t=>{const{topic:n}=z3(t.target);n&&this.pairings.keys.includes(n)&&(await this.deletePairing(n,!0),this.events.emit(Po.expire,{topic:n}))})}}var tZ=Object.defineProperty,nZ=(e,t,n)=>t in e?tZ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,dn=(e,t,n)=>nZ(e,typeof t!="symbol"?t+"":t,n);class rZ extends nK{constructor(t,n){super(t,n),this.core=t,this.logger=n,dn(this,"records",new Map),dn(this,"events",new Kn.EventEmitter),dn(this,"name",sY),dn(this,"version",oY),dn(this,"cached",[]),dn(this,"initialized",!1),dn(this,"storagePrefix",wi),dn(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.records.set(r.id,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),dn(this,"set",(r,s,a)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:r,request:s,chainId:a}),this.records.has(s.id))return;const c={id:s.id,topic:r,request:{method:s.method,params:s.params||null},chainId:a,expiry:Gt(we.THIRTY_DAYS)};this.records.set(c.id,c),this.persist(),this.events.emit(Lr.created,c)}),dn(this,"resolve",async r=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:r}),!this.records.has(r.id))return;const s=await this.getRecord(r.id);typeof s.response>"u"&&(s.response=Tr(r)?{error:r.error}:{result:r.result},this.records.set(s.id,s),this.persist(),this.events.emit(Lr.updated,s))}),dn(this,"get",async(r,s)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:r,id:s}),await this.getRecord(s))),dn(this,"delete",(r,s)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:s}),this.values.forEach(a=>{if(a.topic===r){if(typeof s<"u"&&a.id!==s)return;this.records.delete(a.id),this.events.emit(Lr.deleted,a)}}),this.persist()}),dn(this,"exists",async(r,s)=>(this.isInitialized(),this.records.has(s)?(await this.getRecord(s)).topic===r:!1)),dn(this,"on",(r,s)=>{this.events.on(r,s)}),dn(this,"once",(r,s)=>{this.events.once(r,s)}),dn(this,"off",(r,s)=>{this.events.off(r,s)}),dn(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.logger=Cn(n,this.name)}get context(){return Xn(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const t=[];return this.values.forEach(n=>{if(typeof n.response<"u")return;const r={topic:n.topic,request:Ys(n.request.method,n.request.params,n.id),chainId:n.chainId};return t.push(r)}),t}async setJsonRpcRecords(t){await this.core.storage.setItem(this.storageKey,t)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(t){this.isInitialized();const n=this.records.get(t);if(!n){const{message:r}=be("NO_MATCHING_KEY",`${this.name}: ${t}`);throw new Error(r)}return n}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(Lr.sync)}async restore(){try{const t=await this.getJsonRpcRecords();if(typeof t>"u"||!t.length)return;if(this.records.size){const{message:n}=be("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=t,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(t){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(t)}}registerEventListeners(){this.events.on(Lr.created,t=>{const n=Lr.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:t})}),this.events.on(Lr.updated,t=>{const n=Lr.updated;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:t})}),this.events.on(Lr.deleted,t=>{const n=Lr.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:t})}),this.core.heartbeat.on(sa.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let t=!1;this.records.forEach(n=>{we.toMiliseconds(n.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${n.id}`),this.records.delete(n.id),this.events.emit(Lr.deleted,n,!1),t=!0)}),t&&this.persist()}catch(t){this.logger.warn(t)}}isInitialized(){if(!this.initialized){const{message:t}=be("NOT_INITIALIZED",this.name);throw new Error(t)}}}var iZ=Object.defineProperty,sZ=(e,t,n)=>t in e?iZ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,An=(e,t,n)=>sZ(e,typeof t!="symbol"?t+"":t,n);class oZ extends cK{constructor(t,n){super(t,n),this.core=t,this.logger=n,An(this,"expirations",new Map),An(this,"events",new Kn.EventEmitter),An(this,"name",aY),An(this,"version",cY),An(this,"cached",[]),An(this,"initialized",!1),An(this,"storagePrefix",wi),An(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.expirations.set(r.target,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),An(this,"has",r=>{try{const s=this.formatTarget(r);return typeof this.getExpiration(s)<"u"}catch{return!1}}),An(this,"set",(r,s)=>{this.isInitialized();const a=this.formatTarget(r),c={target:a,expiry:s};this.expirations.set(a,c),this.checkExpiry(a,c),this.events.emit(Or.created,{target:a,expiration:c})}),An(this,"get",r=>{this.isInitialized();const s=this.formatTarget(r);return this.getExpiration(s)}),An(this,"del",r=>{if(this.isInitialized(),this.has(r)){const s=this.formatTarget(r),a=this.getExpiration(s);this.expirations.delete(s),this.events.emit(Or.deleted,{target:s,expiration:a})}}),An(this,"on",(r,s)=>{this.events.on(r,s)}),An(this,"once",(r,s)=>{this.events.once(r,s)}),An(this,"off",(r,s)=>{this.events.off(r,s)}),An(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.logger=Cn(n,this.name)}get context(){return Xn(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(t){if(typeof t=="string")return Gz(t);if(typeof t=="number")return Kz(t);const{message:n}=be("UNKNOWN_TYPE",`Target type: ${typeof t}`);throw new Error(n)}async setExpirations(t){await this.core.storage.setItem(this.storageKey,t)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(Or.sync)}async restore(){try{const t=await this.getExpirations();if(typeof t>"u"||!t.length)return;if(this.expirations.size){const{message:n}=be("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=t,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(t){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(t)}}getExpiration(t){const n=this.expirations.get(t);if(!n){const{message:r}=be("NO_MATCHING_KEY",`${this.name}: ${t}`);throw this.logger.warn(r),new Error(r)}return n}checkExpiry(t,n){const{expiry:r}=n;we.toMiliseconds(r)-Date.now()<=0&&this.expire(t,n)}expire(t,n){this.expirations.delete(t),this.events.emit(Or.expired,{target:t,expiration:n})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((t,n)=>this.checkExpiry(n,t))}registerEventListeners(){this.core.heartbeat.on(sa.pulse,()=>this.checkExpirations()),this.events.on(Or.created,t=>{const n=Or.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:t}),this.persist()}),this.events.on(Or.expired,t=>{const n=Or.expired;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:t}),this.persist()}),this.events.on(Or.deleted,t=>{const n=Or.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:t}),this.persist()})}isInitialized(){if(!this.initialized){const{message:t}=be("NOT_INITIALIZED",this.name);throw new Error(t)}}}var aZ=Object.defineProperty,cZ=(e,t,n)=>t in e?aZ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Pt=(e,t,n)=>cZ(e,typeof t!="symbol"?t+"":t,n);class lZ extends lK{constructor(t,n,r){super(t,n,r),this.core=t,this.logger=n,this.store=r,Pt(this,"name",lY),Pt(this,"abortController"),Pt(this,"isDevEnv"),Pt(this,"verifyUrlV3",fY),Pt(this,"storagePrefix",wi),Pt(this,"version",eI),Pt(this,"publicKey"),Pt(this,"fetchPromise"),Pt(this,"init",async()=>{var s;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&we.toMiliseconds((s=this.publicKey)==null?void 0:s.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))}),Pt(this,"register",async s=>{if(!qc()||this.isDevEnv)return;const a=window.location.origin,{id:c,decryptedId:u}=s,d=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${a}&id=${c}&decryptedId=${u}`;try{const h=is.getDocument(),p=this.startAbortTimer(we.ONE_SECOND*5),m=await new Promise((y,v)=>{const w=()=>{window.removeEventListener("message",S),h.body.removeChild(E),v("attestation aborted")};this.abortController.signal.addEventListener("abort",w);const E=h.createElement("iframe");E.src=d,E.style.display="none",E.addEventListener("error",w,{signal:this.abortController.signal});const S=A=>{if(A.data&&typeof A.data=="string")try{const I=JSON.parse(A.data);if(I.type==="verify_attestation"){if(G0(I.attestation).payload.id!==c)return;clearInterval(p),h.body.removeChild(E),this.abortController.signal.removeEventListener("abort",w),window.removeEventListener("message",S),y(I.attestation===null?"":I.attestation)}}catch(I){this.logger.warn(I)}};h.body.appendChild(E),window.addEventListener("message",S,{signal:this.abortController.signal})});return this.logger.debug("jwt attestation",m),m}catch(h){this.logger.warn(h)}return""}),Pt(this,"resolve",async s=>{if(this.isDevEnv)return"";const{attestationId:a,hash:c,encryptedId:u}=s;if(a===""){this.logger.debug("resolve: attestationId is empty, skipping");return}if(a){if(G0(a).payload.id!==u)return;const h=await this.isValidJwtAttestation(a);if(h){if(!h.isVerified){this.logger.warn("resolve: jwt attestation: origin url not verified");return}return h}}if(!c)return;const d=this.getVerifyUrl(s?.verifyUrl);return this.fetchAttestation(c,d)}),Pt(this,"fetchAttestation",async(s,a)=>{this.logger.debug(`resolving attestation: ${s} from url: ${a}`);const c=this.startAbortTimer(we.ONE_SECOND*5),u=await fetch(`${a}/attestation/${s}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(c),u.status===200?await u.json():void 0}),Pt(this,"getVerifyUrl",s=>{let a=s||Tu;return dY.includes(a)||(this.logger.info(`verify url: ${a}, not included in trusted list, assigning default: ${Tu}`),a=Tu),a}),Pt(this,"fetchPublicKey",async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const s=this.startAbortTimer(we.FIVE_SECONDS),a=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(s),await a.json()}catch(s){this.logger.warn(s)}}),Pt(this,"persistPublicKey",async s=>{this.logger.debug("persisting public key to local storage",s),await this.store.setItem(this.storeKey,s),this.publicKey=s}),Pt(this,"removePublicKey",async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0}),Pt(this,"isValidJwtAttestation",async s=>{const a=await this.getPublicKey();try{if(a)return this.validateAttestation(s,a)}catch(u){this.logger.error(u),this.logger.warn("error validating attestation")}const c=await this.fetchAndPersistPublicKey();try{if(c)return this.validateAttestation(s,c)}catch(u){this.logger.error(u),this.logger.warn("error validating attestation")}}),Pt(this,"getPublicKey",async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey()),Pt(this,"fetchAndPersistPublicKey",async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async a=>{const c=await this.fetchPublicKey();c&&(await this.persistPublicKey(c),a(c))});const s=await this.fetchPromise;return this.fetchPromise=void 0,s}),Pt(this,"validateAttestation",(s,a)=>{const c=zF(s,a.publicKey),u={hasExpired:we.toMiliseconds(c.exp)<Date.now(),payload:c};if(u.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:u.payload.origin,isScam:u.payload.isScam,isVerified:u.payload.isVerified}}),this.logger=Cn(n,this.name),this.abortController=new AbortController,this.isDevEnv=hw(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return Xn(this.logger)}startAbortTimer(t){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),we.toMiliseconds(t))}}var uZ=Object.defineProperty,fZ=(e,t,n)=>t in e?uZ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Cx=(e,t,n)=>fZ(e,typeof t!="symbol"?t+"":t,n);class dZ extends uK{constructor(t,n){super(t,n),this.projectId=t,this.logger=n,Cx(this,"context",hY),Cx(this,"registerDeviceToken",async r=>{const{clientId:s,token:a,notificationType:c,enableEncrypted:u=!1}=r,d=`${pY}/${this.projectId}/clients`;await fetch(d,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:s,type:c,token:a,always_raw:u})})}),this.logger=Cn(n,this.context)}}var hZ=Object.defineProperty,Nx=Object.getOwnPropertySymbols,pZ=Object.prototype.hasOwnProperty,gZ=Object.prototype.propertyIsEnumerable,wb=(e,t,n)=>t in e?hZ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,uu=(e,t)=>{for(var n in t||(t={}))pZ.call(t,n)&&wb(e,n,t[n]);if(Nx)for(var n of Nx(t))gZ.call(t,n)&&wb(e,n,t[n]);return e},Jt=(e,t,n)=>wb(e,typeof t!="symbol"?t+"":t,n);class mZ extends fK{constructor(t,n,r=!0){super(t,n,r),this.core=t,this.logger=n,Jt(this,"context",mY),Jt(this,"storagePrefix",wi),Jt(this,"storageVersion",gY),Jt(this,"events",new Map),Jt(this,"shouldPersist",!1),Jt(this,"init",async()=>{if(!hw())try{const s={eventId:Z_(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:L3(this.core.relayer.protocol,this.core.relayer.version,fb)}}};await this.sendEvent([s])}catch(s){this.logger.warn(s)}}),Jt(this,"createEvent",s=>{const{event:a="ERROR",type:c="",properties:{topic:u,trace:d}}=s,h=Z_(),p=this.core.projectId||"",m=Date.now(),y=uu({eventId:h,timestamp:m,props:{event:a,type:c,properties:{topic:u,trace:d}},bundleId:p,domain:this.getAppDomain()},this.setMethods(h));return this.telemetryEnabled&&(this.events.set(h,y),this.shouldPersist=!0),y}),Jt(this,"getEvent",s=>{const{eventId:a,topic:c}=s;if(a)return this.events.get(a);const u=Array.from(this.events.values()).find(d=>d.props.properties.topic===c);if(u)return uu(uu({},u),this.setMethods(u.eventId))}),Jt(this,"deleteEvent",s=>{const{eventId:a}=s;this.events.delete(a),this.shouldPersist=!0}),Jt(this,"setEventListeners",()=>{this.core.heartbeat.on(sa.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(s=>{we.fromMiliseconds(Date.now())-we.fromMiliseconds(s.timestamp)>yY&&(this.events.delete(s.eventId),this.shouldPersist=!0)})})}),Jt(this,"setMethods",s=>({addTrace:a=>this.addTrace(s,a),setError:a=>this.setError(s,a)})),Jt(this,"addTrace",(s,a)=>{const c=this.events.get(s);c&&(c.props.properties.trace.push(a),this.events.set(s,c),this.shouldPersist=!0)}),Jt(this,"setError",(s,a)=>{const c=this.events.get(s);c&&(c.props.type=a,c.timestamp=Date.now(),this.events.set(s,c),this.shouldPersist=!0)}),Jt(this,"persist",async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1}),Jt(this,"restore",async()=>{try{const s=await this.core.storage.getItem(this.storageKey)||[];if(!s.length)return;s.forEach(a=>{this.events.set(a.eventId,uu(uu({},a),this.setMethods(a.eventId)))})}catch(s){this.logger.warn(s)}}),Jt(this,"submit",async()=>{if(!this.telemetryEnabled||this.events.size===0)return;const s=[];for(const[a,c]of this.events)c.props.type&&s.push(c);if(s.length!==0)try{if((await this.sendEvent(s)).ok)for(const a of s)this.events.delete(a.eventId),this.shouldPersist=!0}catch(a){this.logger.warn(a)}}),Jt(this,"sendEvent",async s=>{const a=this.getAppDomain()?"":"&sp=desktop";return await fetch(`${bY}?projectId=${this.core.projectId}&st=events_sdk&sv=js-${fb}${a}`,{method:"POST",body:JSON.stringify(s)})}),Jt(this,"getAppDomain",()=>M3().url),this.logger=Cn(n,this.context),this.telemetryEnabled=r,r?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}var yZ=Object.defineProperty,$x=Object.getOwnPropertySymbols,bZ=Object.prototype.hasOwnProperty,wZ=Object.prototype.propertyIsEnumerable,vb=(e,t,n)=>t in e?yZ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ux=(e,t)=>{for(var n in t||(t={}))bZ.call(t,n)&&vb(e,n,t[n]);if($x)for(var n of $x(t))wZ.call(t,n)&&vb(e,n,t[n]);return e},mt=(e,t,n)=>vb(e,typeof t!="symbol"?t+"":t,n);let vZ=class gI extends QG{constructor(t){var n;super(t),mt(this,"protocol",JD),mt(this,"version",eI),mt(this,"name",ub),mt(this,"relayUrl"),mt(this,"projectId"),mt(this,"customStoragePrefix"),mt(this,"events",new Kn.EventEmitter),mt(this,"logger"),mt(this,"heartbeat"),mt(this,"relayer"),mt(this,"crypto"),mt(this,"storage"),mt(this,"history"),mt(this,"expirer"),mt(this,"pairing"),mt(this,"verify"),mt(this,"echoClient"),mt(this,"linkModeSupportedApps"),mt(this,"eventClient"),mt(this,"initialized",!1),mt(this,"logChunkController"),mt(this,"on",(u,d)=>this.events.on(u,d)),mt(this,"once",(u,d)=>this.events.once(u,d)),mt(this,"off",(u,d)=>this.events.off(u,d)),mt(this,"removeListener",(u,d)=>this.events.removeListener(u,d)),mt(this,"dispatchEnvelope",({topic:u,message:d,sessionExists:h})=>{if(!u||!d)return;const p={topic:u,message:d,publishedAt:Date.now(),transportType:wt.link_mode};this.relayer.onLinkMessageEvent(p,{sessionExists:h})});const r=this.getGlobalCore(t?.customStoragePrefix);if(r)try{return this.customStoragePrefix=r.customStoragePrefix,this.logger=r.logger,this.heartbeat=r.heartbeat,this.crypto=r.crypto,this.history=r.history,this.expirer=r.expirer,this.storage=r.storage,this.relayer=r.relayer,this.pairing=r.pairing,this.verify=r.verify,this.echoClient=r.echoClient,this.linkModeSupportedApps=r.linkModeSupportedApps,this.eventClient=r.eventClient,this.initialized=r.initialized,this.logChunkController=r.logChunkController,r}catch(u){console.warn("Failed to copy global core",u)}this.projectId=t?.projectId,this.relayUrl=t?.relayUrl||nI,this.customStoragePrefix=t!=null&&t.customStoragePrefix?`:${t.customStoragePrefix}`:"";const s=gp({level:typeof t?.logger=="string"&&t.logger?t.logger:jK.logger,name:ub}),{logger:a,chunkLoggerController:c}=WG({opts:s,maxSizeInBytes:t?.maxLogBlobSizeInBytes,loggerOverride:t?.logger});this.logChunkController=c,(n=this.logChunkController)!=null&&n.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var u,d;(u=this.logChunkController)!=null&&u.downloadLogsBlobInBrowser&&((d=this.logChunkController)==null||d.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=Cn(a,this.name),this.heartbeat=new QV,this.crypto=new KW(this,this.logger,t?.keychain),this.history=new rZ(this,this.logger),this.expirer=new oZ(this,this.logger),this.storage=t!=null&&t.storage?t.storage:new NG(Ux(Ux({},zK),t?.storageOptions)),this.relayer=new vX({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new eZ(this,this.logger),this.verify=new lZ(this,this.logger,this.storage),this.echoClient=new dZ(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new mZ(this,this.logger,t?.telemetryEnabled),this.setGlobalCore(this)}static async init(t){const n=new gI(t);await n.initialize();const r=await n.crypto.getClientId();return await n.storage.setItem(eY,r),n}get context(){return Xn(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var t;return(t=this.logChunkController)==null?void 0:t.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(t){this.linkModeSupportedApps.includes(t)||(this.linkModeSupportedApps.push(t),await this.storage.setItem(hx,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem(hx)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(t){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,t),this.logger.error(t.message),t}}getGlobalCore(t=""){try{if(this.isGlobalCoreDisabled())return;const n=`_walletConnectCore_${t}`,r=`${n}_count`;return globalThis[r]=(globalThis[r]||0)+1,globalThis[r]>1&&console.warn(`WalletConnect Core is already initialized. This is probably a mistake and can lead to unexpected behavior. Init() was called ${globalThis[r]} times.`),globalThis[n]}catch(n){console.warn("Failed to get global WalletConnect core",n);return}}setGlobalCore(t){var n;try{if(this.isGlobalCoreDisabled())return;const r=`_walletConnectCore_${((n=t.opts)==null?void 0:n.customStoragePrefix)||""}`;globalThis[r]=t}catch(r){console.warn("Failed to set global WalletConnect core",r)}}isGlobalCoreDisabled(){try{return typeof process<"u"&&LK.DISABLE_GLOBAL_CORE==="true"}catch{return!0}}};const EZ=vZ,mI="wc",yI=2,bI="client",Uw=`${mI}@${yI}:${bI}:`,Qy={name:bI,logger:"error"},Bx="WALLETCONNECT_DEEPLINK_CHOICE",SZ="proposal",Px="Proposal expired",_Z="session",ic=we.SEVEN_DAYS,AZ="engine",en={wc_sessionPropose:{req:{ttl:we.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:we.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:we.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:we.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:we.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:we.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:we.ONE_DAY,prompt:!1,tag:1104},res:{ttl:we.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:we.ONE_DAY,prompt:!1,tag:1106},res:{ttl:we.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:we.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:we.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:we.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:we.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:we.ONE_DAY,prompt:!1,tag:1112},res:{ttl:we.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:we.ONE_DAY,prompt:!1,tag:1114},res:{ttl:we.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:we.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:we.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:we.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:we.FIVE_MINUTES,prompt:!1,tag:1119}}},Jy={min:we.FIVE_MINUTES,max:we.SEVEN_DAYS},si={idle:"IDLE",active:"ACTIVE"},xZ={eth_sendTransaction:{key:""},eth_sendRawTransaction:{key:""},wallet_sendCalls:{key:""},solana_signTransaction:{key:"signature"},solana_signAllTransactions:{key:"transactions"},solana_signAndSendTransaction:{key:"signature"},sui_signAndExecuteTransaction:{key:"digest"},sui_signTransaction:{key:""},hedera_signAndExecuteTransaction:{key:"transactionId"},hedera_executeTransaction:{key:"transactionId"},near_signTransaction:{key:""},near_signTransactions:{key:""},tron_signTransaction:{key:"txID"},xrpl_signTransaction:{key:""},xrpl_signTransactionFor:{key:""},algo_signTxn:{key:""},sendTransfer:{key:"txid"},stacks_stxTransfer:{key:"txId"},polkadot_signTransaction:{key:""},cosmos_signDirect:{key:""}},RZ="request",OZ=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],TZ="wc",DZ="auth",IZ="authKeys",CZ="pairingTopics",NZ="requests",vp=`${TZ}@${1.5}:${DZ}:`,ph=`${vp}:PUB_KEY`;var $Z=Object.defineProperty,UZ=Object.defineProperties,BZ=Object.getOwnPropertyDescriptors,kx=Object.getOwnPropertySymbols,PZ=Object.prototype.hasOwnProperty,kZ=Object.prototype.propertyIsEnumerable,Eb=(e,t,n)=>t in e?$Z(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,bt=(e,t)=>{for(var n in t||(t={}))PZ.call(t,n)&&Eb(e,n,t[n]);if(kx)for(var n of kx(t))kZ.call(t,n)&&Eb(e,n,t[n]);return e},Ln=(e,t)=>UZ(e,BZ(t)),ye=(e,t,n)=>Eb(e,typeof t!="symbol"?t+"":t,n);class MZ extends gK{constructor(t){super(t),ye(this,"name",AZ),ye(this,"events",new zh),ye(this,"initialized",!1),ye(this,"requestQueue",{state:si.idle,queue:[]}),ye(this,"sessionRequestQueue",{state:si.idle,queue:[]}),ye(this,"emittedSessionRequests",new nq({limit:500})),ye(this,"requestQueueDelay",we.ONE_SECOND),ye(this,"expectedPairingMethodMap",new Map),ye(this,"recentlyDeletedMap",new Map),ye(this,"recentlyDeletedLimit",200),ye(this,"relayMessageCache",[]),ye(this,"pendingSessions",new Map),ye(this,"init",async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(en)}),this.initialized=!0,setTimeout(async()=>{await this.processPendingMessageEvents(),this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},we.toMiliseconds(this.requestQueueDelay)))}),ye(this,"connect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();const r=Ln(bt({},n),{requiredNamespaces:n.requiredNamespaces||{},optionalNamespaces:n.optionalNamespaces||{}});await this.isValidConnect(r),r.optionalNamespaces=rV(r.requiredNamespaces,r.optionalNamespaces),r.requiredNamespaces={};const{pairingTopic:s,requiredNamespaces:a,optionalNamespaces:c,sessionProperties:u,scopedProperties:d,relays:h}=r;let p=s,m,y=!1;try{if(p){const N=this.client.core.pairing.pairings.get(p);this.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),y=N.active}}catch(N){throw this.client.logger.error(`connect() -> pairing.get(${p}) failed`),N}if(!p||!y){const{topic:N,uri:q}=await this.client.core.pairing.create();p=N,m=q}if(!p){const{message:N}=be("NO_MATCHING_KEY",`connect() pairing topic: ${p}`);throw new Error(N)}const v=await this.client.core.crypto.generateKeyPair(),w=en.wc_sessionPropose.req.ttl||we.FIVE_MINUTES,E=Gt(w),S=Ln(bt(bt({requiredNamespaces:a,optionalNamespaces:c,relays:h??[{protocol:tI}],proposer:{publicKey:v,metadata:this.client.metadata},expiryTimestamp:E,pairingTopic:p},u&&{sessionProperties:u}),d&&{scopedProperties:d}),{id:ci()}),A=Xe("session_connect",S.id),{reject:I,resolve:D,done:B}=No(w,Px),$=({id:N})=>{N===S.id&&(this.client.events.off("proposal_expire",$),this.pendingSessions.delete(S.id),this.events.emit(A,{error:{message:Px,code:0}}))};return this.client.events.on("proposal_expire",$),this.events.once(A,({error:N,session:q})=>{this.client.events.off("proposal_expire",$),N?I(N):q&&D(q)}),await this.sendRequest({topic:p,method:"wc_sessionPropose",params:S,throwOnFailedPublish:!0,clientRpcId:S.id}),await this.setProposal(S.id,S),{uri:m,approval:B}}),ye(this,"pair",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(n)}catch(r){throw this.client.logger.error("pair() failed"),r}}),ye(this,"approve",async n=>{var r,s,a;const c=this.client.core.eventClient.createEvent({properties:{topic:(r=n?.id)==null?void 0:r.toString(),trace:[jr.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(k){throw c.setError(Ao.no_internet_connection),k}try{await this.isValidProposalId(n?.id)}catch(k){throw this.client.logger.error(`approve() -> proposal.get(${n?.id}) failed`),c.setError(Ao.proposal_not_found),k}try{await this.isValidApprove(n)}catch(k){throw this.client.logger.error("approve() -> isValidApprove() failed"),c.setError(Ao.session_approve_namespace_validation_failure),k}const{id:u,relayProtocol:d,namespaces:h,sessionProperties:p,scopedProperties:m,sessionConfig:y}=n,v=this.client.proposal.get(u);this.client.core.eventClient.deleteEvent({eventId:c.eventId});const{pairingTopic:w,proposer:E,requiredNamespaces:S,optionalNamespaces:A}=v;let I=(s=this.client.core.eventClient)==null?void 0:s.getEvent({topic:w});I||(I=(a=this.client.core.eventClient)==null?void 0:a.createEvent({type:jr.session_approve_started,properties:{topic:w,trace:[jr.session_approve_started,jr.session_namespaces_validation_success]}}));const D=await this.client.core.crypto.generateKeyPair(),B=E.publicKey,$=await this.client.core.crypto.generateSharedKey(D,B),N=bt(bt(bt({relay:{protocol:d??"irn"},namespaces:h,controller:{publicKey:D,metadata:this.client.metadata},expiry:Gt(ic)},p&&{sessionProperties:p}),m&&{scopedProperties:m}),y&&{sessionConfig:y}),q=wt.relay;I.addTrace(jr.subscribing_session_topic);try{await this.client.core.relayer.subscribe($,{transportType:q})}catch(k){throw I.setError(Ao.subscribe_session_topic_failure),k}I.addTrace(jr.subscribe_session_topic_success);const H=Ln(bt({},N),{topic:$,requiredNamespaces:S,optionalNamespaces:A,pairingTopic:w,acknowledged:!1,self:N.controller,peer:{publicKey:E.publicKey,metadata:E.metadata},controller:D,transportType:wt.relay});await this.client.session.set($,H),I.addTrace(jr.store_session);try{I.addTrace(jr.publishing_session_settle),await this.sendRequest({topic:$,method:"wc_sessionSettle",params:N,throwOnFailedPublish:!0}).catch(k=>{throw I?.setError(Ao.session_settle_publish_failure),k}),I.addTrace(jr.session_settle_publish_success),I.addTrace(jr.publishing_session_approve),await this.sendResult({id:u,topic:w,result:{relay:{protocol:d??"irn"},responderPublicKey:D},throwOnFailedPublish:!0}).catch(k=>{throw I?.setError(Ao.session_approve_publish_failure),k}),I.addTrace(jr.session_approve_publish_success)}catch(k){throw this.client.logger.error(k),this.client.session.delete($,Et("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe($),k}return this.client.core.eventClient.deleteEvent({eventId:I.eventId}),await this.client.core.pairing.updateMetadata({topic:w,metadata:E.metadata}),await this.deleteProposal(u),await this.client.core.pairing.activate({topic:w}),await this.setExpiry($,Gt(ic)),{topic:$,acknowledged:()=>Promise.resolve(this.client.session.get($))}}),ye(this,"reject",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(n)}catch(c){throw this.client.logger.error("reject() -> isValidReject() failed"),c}const{id:r,reason:s}=n;let a;try{a=this.client.proposal.get(r).pairingTopic}catch(c){throw this.client.logger.error(`reject() -> proposal.get(${r}) failed`),c}a&&await this.sendError({id:r,topic:a,error:s,rpcOpts:en.wc_sessionPropose.reject}),await this.deleteProposal(r)}),ye(this,"update",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(n)}catch(m){throw this.client.logger.error("update() -> isValidUpdate() failed"),m}const{topic:r,namespaces:s}=n,{done:a,resolve:c,reject:u}=No(),d=ci(),h=qo().toString(),p=this.client.session.get(r).namespaces;return this.events.once(Xe("session_update",d),({error:m})=>{m?u(m):c()}),await this.client.session.update(r,{namespaces:s}),await this.sendRequest({topic:r,method:"wc_sessionUpdate",params:{namespaces:s},throwOnFailedPublish:!0,clientRpcId:d,relayRpcId:h}).catch(m=>{this.client.logger.error(m),this.client.session.update(r,{namespaces:p}),u(m)}),{acknowledged:a}}),ye(this,"extend",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(n)}catch(d){throw this.client.logger.error("extend() -> isValidExtend() failed"),d}const{topic:r}=n,s=ci(),{done:a,resolve:c,reject:u}=No();return this.events.once(Xe("session_extend",s),({error:d})=>{d?u(d):c()}),await this.setExpiry(r,Gt(ic)),this.sendRequest({topic:r,method:"wc_sessionExtend",params:{},clientRpcId:s,throwOnFailedPublish:!0}).catch(d=>{u(d)}),{acknowledged:a}}),ye(this,"request",async n=>{this.isInitialized();try{await this.isValidRequest(n)}catch(S){throw this.client.logger.error("request() -> isValidRequest() failed"),S}const{chainId:r,request:s,topic:a,expiry:c=en.wc_sessionRequest.req.ttl}=n,u=this.client.session.get(a);u?.transportType===wt.relay&&await this.confirmOnlineStateOrThrow();const d=ci(),h=qo().toString(),{done:p,resolve:m,reject:y}=No(c,"Request expired. Please try again.");this.events.once(Xe("session_request",d),({error:S,result:A})=>{S?y(S):m(A)});const v="wc_sessionRequest",w=this.getAppLinkIfEnabled(u.peer.metadata,u.transportType);if(w)return await this.sendRequest({clientRpcId:d,relayRpcId:h,topic:a,method:v,params:{request:Ln(bt({},s),{expiryTimestamp:Gt(c)}),chainId:r},expiry:c,throwOnFailedPublish:!0,appLink:w}).catch(S=>y(S)),this.client.events.emit("session_request_sent",{topic:a,request:s,chainId:r,id:d}),await p();const E={request:Ln(bt({},s),{expiryTimestamp:Gt(c)}),chainId:r};return await Promise.all([new Promise(async S=>{await this.sendRequest({clientRpcId:d,relayRpcId:h,topic:a,method:v,params:E,expiry:c,throwOnFailedPublish:!0,tvf:this.getTVFParams(d,E)}).catch(A=>y(A)),this.client.events.emit("session_request_sent",{topic:a,request:s,chainId:r,id:d}),S()}),new Promise(async S=>{var A;if(!((A=u.sessionConfig)!=null&&A.disableDeepLink)){const I=await Zz(this.client.core.storage,Bx);await Yz({id:d,topic:a,wcDeepLink:I})}S()}),p()]).then(S=>S[2])}),ye(this,"respond",async n=>{this.isInitialized(),await this.isValidRespond(n);const{topic:r,response:s}=n,{id:a}=s,c=this.client.session.get(r);c.transportType===wt.relay&&await this.confirmOnlineStateOrThrow();const u=this.getAppLinkIfEnabled(c.peer.metadata,c.transportType);li(s)?await this.sendResult({id:a,topic:r,result:s.result,throwOnFailedPublish:!0,appLink:u}):Tr(s)&&await this.sendError({id:a,topic:r,error:s.error,appLink:u}),this.cleanupAfterResponse(n)}),ye(this,"ping",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(n)}catch(s){throw this.client.logger.error("ping() -> isValidPing() failed"),s}const{topic:r}=n;if(this.client.session.keys.includes(r)){const s=ci(),a=qo().toString(),{done:c,resolve:u,reject:d}=No();this.events.once(Xe("session_ping",s),({error:h})=>{h?d(h):u()}),await Promise.all([this.sendRequest({topic:r,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:s,relayRpcId:a}),c()])}else this.client.core.pairing.pairings.keys.includes(r)&&(this.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),await this.client.core.pairing.ping({topic:r}))}),ye(this,"emit",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(n);const{topic:r,event:s,chainId:a}=n,c=qo().toString(),u=ci();await this.sendRequest({topic:r,method:"wc_sessionEvent",params:{event:s,chainId:a},throwOnFailedPublish:!0,relayRpcId:c,clientRpcId:u})}),ye(this,"disconnect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(n);const{topic:r}=n;if(this.client.session.keys.includes(r))await this.sendRequest({topic:r,method:"wc_sessionDelete",params:Et("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:r,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(r))await this.client.core.pairing.disconnect({topic:r});else{const{message:s}=be("MISMATCHED_TOPIC",`Session or pairing topic not found: ${r}`);throw new Error(s)}}),ye(this,"find",n=>(this.isInitialized(),this.client.session.getAll().filter(r=>oV(r,n)))),ye(this,"getPendingSessionRequests",()=>this.client.pendingRequest.getAll()),ye(this,"authenticate",async(n,r)=>{var s;this.isInitialized(),this.isValidAuthenticate(n);const a=r&&this.client.core.linkModeSupportedApps.includes(r)&&((s=this.client.metadata.redirect)==null?void 0:s.linkMode),c=a?wt.link_mode:wt.relay;c===wt.relay&&await this.confirmOnlineStateOrThrow();const{chains:u,statement:d="",uri:h,domain:p,nonce:m,type:y,exp:v,nbf:w,methods:E=[],expiry:S}=n,A=[...n.resources||[]],{topic:I,uri:D}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:c});this.client.logger.info({message:"Generated new pairing",pairing:{topic:I,uri:D}});const B=await this.client.core.crypto.generateKeyPair(),$=ch(B);if(await Promise.all([this.client.auth.authKeys.set(ph,{responseTopic:$,publicKey:B}),this.client.auth.pairingTopics.set($,{topic:$,pairingTopic:I})]),await this.client.core.relayer.subscribe($,{transportType:c}),this.client.logger.info(`sending request to new pairing topic: ${I}`),E.length>0){const{namespace:X}=Dc(u[0]);let C=hH(X,"request",E);ah(A)&&(C=gH(C,A.pop())),A.push(C)}const N=S&&S>en.wc_sessionAuthenticate.req.ttl?S:en.wc_sessionAuthenticate.req.ttl,q={authPayload:{type:y??"caip122",chains:u,statement:d,aud:h,domain:p,version:"1",nonce:m,iat:new Date().toISOString(),exp:v,nbf:w,resources:A},requester:{publicKey:B,metadata:this.client.metadata},expiryTimestamp:Gt(N)},H={eip155:{chains:u,methods:[...new Set(["personal_sign",...E])],events:["chainChanged","accountsChanged"]}},k={requiredNamespaces:{},optionalNamespaces:H,relays:[{protocol:"irn"}],pairingTopic:I,proposer:{publicKey:B,metadata:this.client.metadata},expiryTimestamp:Gt(en.wc_sessionPropose.req.ttl),id:ci()},{done:K,resolve:Y,reject:W}=No(N,"Request expired"),le=ci(),re=Xe("session_connect",k.id),O=Xe("session_request",le),R=async({error:X,session:C})=>{this.events.off(O,M),X?W(X):C&&Y({session:C})},M=async X=>{var C,V,ee;if(await this.deletePendingAuthRequest(le,{message:"fulfilled",code:0}),X.error){const xe=Et("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return X.error.code===xe.code?void 0:(this.events.off(re,R),W(X.error.message))}await this.deleteProposal(k.id),this.events.off(re,R);const{cacaos:se,responder:te}=X.result,pe=[],me=[];for(const xe of se){await cA({cacao:xe,projectId:this.client.core.projectId})||(this.client.logger.error(xe,"Signature verification failed"),W(Et("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:He}=xe,pt=ah(He.resources),on=[X0(He.iss)],qt=Th(He.iss);if(pt){const Dt=lA(pt),Ze=uA(pt);pe.push(...Dt),on.push(...Ze)}for(const Dt of on)me.push(`${Dt}:${qt}`)}const Te=await this.client.core.crypto.generateSharedKey(B,te.publicKey);let Ee;pe.length>0&&(Ee={topic:Te,acknowledged:!0,self:{publicKey:B,metadata:this.client.metadata},peer:te,controller:te.publicKey,expiry:Gt(ic),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:I,namespaces:UA([...new Set(pe)],[...new Set(me)]),transportType:c},await this.client.core.relayer.subscribe(Te,{transportType:c}),await this.client.session.set(Te,Ee),I&&await this.client.core.pairing.updateMetadata({topic:I,metadata:te.metadata}),Ee=this.client.session.get(Te)),(C=this.client.metadata.redirect)!=null&&C.linkMode&&(V=te.metadata.redirect)!=null&&V.linkMode&&(ee=te.metadata.redirect)!=null&&ee.universal&&r&&(this.client.core.addLinkModeSupportedApp(te.metadata.redirect.universal),this.client.session.update(Te,{transportType:wt.link_mode})),Y({auths:se,session:Ee})};this.events.once(re,R),this.events.once(O,M);let F;try{if(a){const X=Ys("wc_sessionAuthenticate",q,le);this.client.core.history.set(I,X);const C=await this.client.core.crypto.encode("",X,{type:af,encoding:Gs});F=Ld(r,I,C)}else await Promise.all([this.sendRequest({topic:I,method:"wc_sessionAuthenticate",params:q,expiry:n.expiry,throwOnFailedPublish:!0,clientRpcId:le}),this.sendRequest({topic:I,method:"wc_sessionPropose",params:k,expiry:en.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:k.id})])}catch(X){throw this.events.off(re,R),this.events.off(O,M),X}return await this.setProposal(k.id,k),await this.setAuthRequest(le,{request:Ln(bt({},q),{verifyContext:{}}),pairingTopic:I,transportType:c}),{uri:F??D,response:K}}),ye(this,"approveSessionAuthenticate",async n=>{const{id:r,auths:s}=n,a=this.client.core.eventClient.createEvent({properties:{topic:r.toString(),trace:[xo.authenticated_session_approve_started]}});try{this.isInitialized()}catch(S){throw a.setError(cu.no_internet_connection),S}const c=this.getPendingAuthRequest(r);if(!c)throw a.setError(cu.authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${r}`);const u=c.transportType||wt.relay;u===wt.relay&&await this.confirmOnlineStateOrThrow();const d=c.requester.publicKey,h=await this.client.core.crypto.generateKeyPair(),p=ch(d),m={type:es,receiverPublicKey:d,senderPublicKey:h},y=[],v=[];for(const S of s){if(!await cA({cacao:S,projectId:this.client.core.projectId})){a.setError(cu.invalid_cacao);const $=Et("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:r,topic:p,error:$,encodeOpts:m}),new Error($.message)}a.addTrace(xo.cacaos_verified);const{p:A}=S,I=ah(A.resources),D=[X0(A.iss)],B=Th(A.iss);if(I){const $=lA(I),N=uA(I);y.push(...$),D.push(...N)}for(const $ of D)v.push(`${$}:${B}`)}const w=await this.client.core.crypto.generateSharedKey(h,d);a.addTrace(xo.create_authenticated_session_topic);let E;if(y?.length>0){E={topic:w,acknowledged:!0,self:{publicKey:h,metadata:this.client.metadata},peer:{publicKey:d,metadata:c.requester.metadata},controller:d,expiry:Gt(ic),authentication:s,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:c.pairingTopic,namespaces:UA([...new Set(y)],[...new Set(v)]),transportType:u},a.addTrace(xo.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(w,{transportType:u})}catch(S){throw a.setError(cu.subscribe_authenticated_session_topic_failure),S}a.addTrace(xo.subscribe_authenticated_session_topic_success),await this.client.session.set(w,E),a.addTrace(xo.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:c.pairingTopic,metadata:c.requester.metadata})}a.addTrace(xo.publishing_authenticated_session_approve);try{await this.sendResult({topic:p,id:r,result:{cacaos:s,responder:{publicKey:h,metadata:this.client.metadata}},encodeOpts:m,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(c.requester.metadata,u)})}catch(S){throw a.setError(cu.authenticated_session_approve_publish_failure),S}return await this.client.auth.requests.delete(r,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:c.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:a.eventId}),{session:E}}),ye(this,"rejectSessionAuthenticate",async n=>{this.isInitialized();const{id:r,reason:s}=n,a=this.getPendingAuthRequest(r);if(!a)throw new Error(`Could not find pending auth request with id ${r}`);a.transportType===wt.relay&&await this.confirmOnlineStateOrThrow();const c=a.requester.publicKey,u=await this.client.core.crypto.generateKeyPair(),d=ch(c),h={type:es,receiverPublicKey:c,senderPublicKey:u};await this.sendError({id:r,topic:d,error:s,encodeOpts:h,rpcOpts:en.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(a.requester.metadata,a.transportType)}),await this.client.auth.requests.delete(r,{message:"rejected",code:0}),await this.deleteProposal(r)}),ye(this,"formatAuthMessage",n=>{this.isInitialized();const{request:r,iss:s}=n;return nD(r,s)}),ye(this,"processRelayMessageCache",()=>{setTimeout(async()=>{if(this.relayMessageCache.length!==0)for(;this.relayMessageCache.length>0;)try{const n=this.relayMessageCache.shift();n&&await this.onRelayMessage(n)}catch(n){this.client.logger.error(n)}},50)}),ye(this,"cleanupDuplicatePairings",async n=>{if(n.pairingTopic)try{const r=this.client.core.pairing.pairings.get(n.pairingTopic),s=this.client.core.pairing.pairings.getAll().filter(a=>{var c,u;return((c=a.peerMetadata)==null?void 0:c.url)&&((u=a.peerMetadata)==null?void 0:u.url)===n.peer.metadata.url&&a.topic&&a.topic!==r.topic});if(s.length===0)return;this.client.logger.info(`Cleaning up ${s.length} duplicate pairing(s)`),await Promise.all(s.map(a=>this.client.core.pairing.disconnect({topic:a.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(r){this.client.logger.error(r)}}),ye(this,"deleteSession",async n=>{var r;const{topic:s,expirerHasDeleted:a=!1,emitEvent:c=!0,id:u=0}=n,{self:d}=this.client.session.get(s);await this.client.core.relayer.unsubscribe(s),await this.client.session.delete(s,Et("USER_DISCONNECTED")),this.addToRecentlyDeleted(s,"session"),this.client.core.crypto.keychain.has(d.publicKey)&&await this.client.core.crypto.deleteKeyPair(d.publicKey),this.client.core.crypto.keychain.has(s)&&await this.client.core.crypto.deleteSymKey(s),a||this.client.core.expirer.del(s),this.client.core.storage.removeItem(Bx).catch(h=>this.client.logger.warn(h)),this.getPendingSessionRequests().forEach(h=>{h.topic===s&&this.deletePendingSessionRequest(h.id,Et("USER_DISCONNECTED"))}),s===((r=this.sessionRequestQueue.queue[0])==null?void 0:r.topic)&&(this.sessionRequestQueue.state=si.idle),c&&this.client.events.emit("session_delete",{id:u,topic:s})}),ye(this,"deleteProposal",async(n,r)=>{if(r)try{const s=this.client.proposal.get(n);this.client.core.eventClient.getEvent({topic:s.pairingTopic})?.setError(Ao.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(n,Et("USER_DISCONNECTED")),r?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"proposal")}),ye(this,"deletePendingSessionRequest",async(n,r,s=!1)=>{await Promise.all([this.client.pendingRequest.delete(n,r),s?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(a=>a.id!==n),s&&(this.sessionRequestQueue.state=si.idle,this.client.events.emit("session_request_expire",{id:n}))}),ye(this,"deletePendingAuthRequest",async(n,r,s=!1)=>{await Promise.all([this.client.auth.requests.delete(n,r),s?Promise.resolve():this.client.core.expirer.del(n)])}),ye(this,"setExpiry",async(n,r)=>{this.client.session.keys.includes(n)&&(this.client.core.expirer.set(n,r),await this.client.session.update(n,{expiry:r}))}),ye(this,"setProposal",async(n,r)=>{this.client.core.expirer.set(n,Gt(en.wc_sessionPropose.req.ttl)),await this.client.proposal.set(n,r)}),ye(this,"setAuthRequest",async(n,r)=>{const{request:s,pairingTopic:a,transportType:c=wt.relay}=r;this.client.core.expirer.set(n,s.expiryTimestamp),await this.client.auth.requests.set(n,{authPayload:s.authPayload,requester:s.requester,expiryTimestamp:s.expiryTimestamp,id:n,pairingTopic:a,verifyContext:s.verifyContext,transportType:c})}),ye(this,"setPendingSessionRequest",async n=>{const{id:r,topic:s,params:a,verifyContext:c}=n,u=a.request.expiryTimestamp||Gt(en.wc_sessionRequest.req.ttl);this.client.core.expirer.set(r,u),await this.client.pendingRequest.set(r,{id:r,topic:s,params:a,verifyContext:c})}),ye(this,"sendRequest",async n=>{const{topic:r,method:s,params:a,expiry:c,relayRpcId:u,clientRpcId:d,throwOnFailedPublish:h,appLink:p,tvf:m}=n,y=Ys(s,a,d);let v;const w=!!p;try{const A=w?Gs:Gr;v=await this.client.core.crypto.encode(r,y,{encoding:A})}catch(A){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${r} failed`),A}let E;if(OZ.includes(s)){const A=fi(JSON.stringify(y)),I=fi(v);E=await this.client.core.verify.register({id:I,decryptedId:A})}const S=en[s].req;if(S.attestation=E,c&&(S.ttl=c),u&&(S.id=u),this.client.core.history.set(r,y),w){const A=Ld(p,r,v);await global.Linking.openURL(A,this.client.name)}else{const A=en[s].req;c&&(A.ttl=c),u&&(A.id=u),A.tvf=Ln(bt({},m),{correlationId:y.id}),h?(A.internal=Ln(bt({},A.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(r,v,A)):this.client.core.relayer.publish(r,v,A).catch(I=>this.client.logger.error(I))}return y.id}),ye(this,"sendResult",async n=>{const{id:r,topic:s,result:a,throwOnFailedPublish:c,encodeOpts:u,appLink:d}=n,h=mp(r,a);let p;const m=d&&typeof(global==null?void 0:global.Linking)<"u";try{const w=m?Gs:Gr;p=await this.client.core.crypto.encode(s,h,Ln(bt({},u||{}),{encoding:w}))}catch(w){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${s} failed`),w}let y,v;try{y=await this.client.core.history.get(s,r);const w=y.request;try{v=this.getTVFParams(r,w.params,a)}catch(E){this.client.logger.warn(`sendResult() -> getTVFParams() failed: ${E?.message}`)}}catch(w){throw this.client.logger.error(`sendResult() -> history.get(${s}, ${r}) failed`),w}if(m){const w=Ld(d,s,p);await global.Linking.openURL(w,this.client.name)}else{const w=y.request.method,E=en[w].res;E.tvf=Ln(bt({},v),{correlationId:r}),c?(E.internal=Ln(bt({},E.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(s,p,E)):this.client.core.relayer.publish(s,p,E).catch(S=>this.client.logger.error(S))}await this.client.core.history.resolve(h)}),ye(this,"sendError",async n=>{const{id:r,topic:s,error:a,encodeOpts:c,rpcOpts:u,appLink:d}=n,h=yp(r,a);let p;const m=d&&typeof(global==null?void 0:global.Linking)<"u";try{const v=m?Gs:Gr;p=await this.client.core.crypto.encode(s,h,Ln(bt({},c||{}),{encoding:v}))}catch(v){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${s} failed`),v}let y;try{y=await this.client.core.history.get(s,r)}catch(v){throw this.client.logger.error(`sendError() -> history.get(${s}, ${r}) failed`),v}if(m){const v=Ld(d,s,p);await global.Linking.openURL(v,this.client.name)}else{const v=y.request.method,w=u||en[v].res;this.client.core.relayer.publish(s,p,w)}await this.client.core.history.resolve(h)}),ye(this,"cleanup",async()=>{const n=[],r=[];this.client.session.getAll().forEach(s=>{let a=!1;zs(s.expiry)&&(a=!0),this.client.core.crypto.keychain.has(s.topic)||(a=!0),a&&n.push(s.topic)}),this.client.proposal.getAll().forEach(s=>{zs(s.expiryTimestamp)&&r.push(s.id)}),await Promise.all([...n.map(s=>this.deleteSession({topic:s})),...r.map(s=>this.deleteProposal(s))])}),ye(this,"onProviderMessageEvent",async n=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(n):await this.onRelayMessage(n)}),ye(this,"onRelayEventRequest",async n=>{this.requestQueue.queue.push(n),await this.processRequestsQueue()}),ye(this,"processRequestsQueue",async()=>{if(this.requestQueue.state===si.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=si.active;const n=this.requestQueue.queue.shift();if(n)try{await this.processRequest(n)}catch(r){this.client.logger.warn(r)}}this.requestQueue.state=si.idle}),ye(this,"processRequest",async n=>{const{topic:r,payload:s,attestation:a,transportType:c,encryptedId:u}=n,d=s.method;if(!this.shouldIgnorePairingRequest({topic:r,requestMethod:d}))switch(d){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:r,payload:s,attestation:a,encryptedId:u});case"wc_sessionSettle":return await this.onSessionSettleRequest(r,s);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(r,s);case"wc_sessionExtend":return await this.onSessionExtendRequest(r,s);case"wc_sessionPing":return await this.onSessionPingRequest(r,s);case"wc_sessionDelete":return await this.onSessionDeleteRequest(r,s);case"wc_sessionRequest":return await this.onSessionRequest({topic:r,payload:s,attestation:a,encryptedId:u,transportType:c});case"wc_sessionEvent":return await this.onSessionEventRequest(r,s);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:r,payload:s,attestation:a,encryptedId:u,transportType:c});default:return this.client.logger.info(`Unsupported request method ${d}`)}}),ye(this,"onRelayEventResponse",async n=>{const{topic:r,payload:s,transportType:a}=n,c=(await this.client.core.history.get(r,s.id)).request.method;switch(c){case"wc_sessionPropose":return this.onSessionProposeResponse(r,s,a);case"wc_sessionSettle":return this.onSessionSettleResponse(r,s);case"wc_sessionUpdate":return this.onSessionUpdateResponse(r,s);case"wc_sessionExtend":return this.onSessionExtendResponse(r,s);case"wc_sessionPing":return this.onSessionPingResponse(r,s);case"wc_sessionRequest":return this.onSessionRequestResponse(r,s);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(r,s);default:return this.client.logger.info(`Unsupported response method ${c}`)}}),ye(this,"onRelayEventUnknownPayload",n=>{const{topic:r}=n,{message:s}=be("MISSING_OR_INVALID",`Decoded payload on topic ${r} is not identifiable as a JSON-RPC request or a response.`);throw new Error(s)}),ye(this,"shouldIgnorePairingRequest",n=>{const{topic:r,requestMethod:s}=n,a=this.expectedPairingMethodMap.get(r);return!a||a.includes(s)?!1:!!(a.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)}),ye(this,"onSessionProposeRequest",async n=>{const{topic:r,payload:s,attestation:a,encryptedId:c}=n,{params:u,id:d}=s;try{const h=this.client.core.eventClient.getEvent({topic:r});this.client.events.listenerCount("session_proposal")===0&&(console.warn("No listener for session_proposal event"),h?.setError(Vi.proposal_listener_not_found)),this.isValidConnect(bt({},s.params));const p=u.expiryTimestamp||Gt(en.wc_sessionPropose.req.ttl),m=bt({id:d,pairingTopic:r,expiryTimestamp:p,attestation:a,encryptedId:c},u);await this.setProposal(d,m);const y=await this.getVerifyContext({attestationId:a,hash:fi(JSON.stringify(s)),encryptedId:c,metadata:m.proposer.metadata});h?.addTrace(ai.emit_session_proposal),this.client.events.emit("session_proposal",{id:d,params:m,verifyContext:y})}catch(h){await this.sendError({id:d,topic:r,error:h,rpcOpts:en.wc_sessionPropose.autoReject}),this.client.logger.error(h)}}),ye(this,"onSessionProposeResponse",async(n,r,s)=>{const{id:a}=r;if(li(r)){const{result:c}=r;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:c});const u=this.client.proposal.get(a);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:u});const d=u.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:d});const h=c.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:h});const p=await this.client.core.crypto.generateSharedKey(d,h);this.pendingSessions.set(a,{sessionTopic:p,pairingTopic:n,proposalId:a,publicKey:d});const m=await this.client.core.relayer.subscribe(p,{transportType:s});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:m}),await this.client.core.pairing.activate({topic:n})}else if(Tr(r)){await this.deleteProposal(a);const c=Xe("session_connect",a);if(this.events.listenerCount(c)===0)throw new Error(`emitting ${c} without any listeners, 954`);this.events.emit(c,{error:r.error})}}),ye(this,"onSessionSettleRequest",async(n,r)=>{const{id:s,params:a}=r;try{this.isValidSessionSettleRequest(a);const{relay:c,controller:u,expiry:d,namespaces:h,sessionProperties:p,scopedProperties:m,sessionConfig:y}=r.params,v=[...this.pendingSessions.values()].find(S=>S.sessionTopic===n);if(!v)return this.client.logger.error(`Pending session not found for topic ${n}`);const w=this.client.proposal.get(v.proposalId),E=Ln(bt(bt(bt({topic:n,relay:c,expiry:d,namespaces:h,acknowledged:!0,pairingTopic:v.pairingTopic,requiredNamespaces:w.requiredNamespaces,optionalNamespaces:w.optionalNamespaces,controller:u.publicKey,self:{publicKey:v.publicKey,metadata:this.client.metadata},peer:{publicKey:u.publicKey,metadata:u.metadata}},p&&{sessionProperties:p}),m&&{scopedProperties:m}),y&&{sessionConfig:y}),{transportType:wt.relay});await this.client.session.set(E.topic,E),await this.setExpiry(E.topic,E.expiry),await this.client.core.pairing.updateMetadata({topic:v.pairingTopic,metadata:E.peer.metadata}),this.client.events.emit("session_connect",{session:E}),this.events.emit(Xe("session_connect",v.proposalId),{session:E}),this.pendingSessions.delete(v.proposalId),this.deleteProposal(v.proposalId,!1),this.cleanupDuplicatePairings(E),await this.sendResult({id:r.id,topic:n,result:!0})}catch(c){await this.sendError({id:s,topic:n,error:c}),this.client.logger.error(c)}}),ye(this,"onSessionSettleResponse",async(n,r)=>{const{id:s}=r;li(r)?(await this.client.session.update(n,{acknowledged:!0}),this.events.emit(Xe("session_approve",s),{})):Tr(r)&&(await this.client.session.delete(n,Et("USER_DISCONNECTED")),this.events.emit(Xe("session_approve",s),{error:r.error}))}),ye(this,"onSessionUpdateRequest",async(n,r)=>{const{params:s,id:a}=r;try{const c=`${n}_session_update`,u=ou.get(c);if(u&&this.isRequestOutOfSync(u,a)){this.client.logger.warn(`Discarding out of sync request - ${a}`),this.sendError({id:a,topic:n,error:Et("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(bt({topic:n},s));try{ou.set(c,a),await this.client.session.update(n,{namespaces:s.namespaces}),await this.sendResult({id:a,topic:n,result:!0})}catch(d){throw ou.delete(c),d}this.client.events.emit("session_update",{id:a,topic:n,params:s})}catch(c){await this.sendError({id:a,topic:n,error:c}),this.client.logger.error(c)}}),ye(this,"isRequestOutOfSync",(n,r)=>r.toString().slice(0,-3)<n.toString().slice(0,-3)),ye(this,"onSessionUpdateResponse",(n,r)=>{const{id:s}=r,a=Xe("session_update",s);if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners`);li(r)?this.events.emit(Xe("session_update",s),{}):Tr(r)&&this.events.emit(Xe("session_update",s),{error:r.error})}),ye(this,"onSessionExtendRequest",async(n,r)=>{const{id:s}=r;try{this.isValidExtend({topic:n}),await this.setExpiry(n,Gt(ic)),await this.sendResult({id:s,topic:n,result:!0}),this.client.events.emit("session_extend",{id:s,topic:n})}catch(a){await this.sendError({id:s,topic:n,error:a}),this.client.logger.error(a)}}),ye(this,"onSessionExtendResponse",(n,r)=>{const{id:s}=r,a=Xe("session_extend",s);if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners`);li(r)?this.events.emit(Xe("session_extend",s),{}):Tr(r)&&this.events.emit(Xe("session_extend",s),{error:r.error})}),ye(this,"onSessionPingRequest",async(n,r)=>{const{id:s}=r;try{this.isValidPing({topic:n}),await this.sendResult({id:s,topic:n,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:s,topic:n})}catch(a){await this.sendError({id:s,topic:n,error:a}),this.client.logger.error(a)}}),ye(this,"onSessionPingResponse",(n,r)=>{const{id:s}=r,a=Xe("session_ping",s);setTimeout(()=>{if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners 2176`);li(r)?this.events.emit(Xe("session_ping",s),{}):Tr(r)&&this.events.emit(Xe("session_ping",s),{error:r.error})},500)}),ye(this,"onSessionDeleteRequest",async(n,r)=>{const{id:s}=r;try{this.isValidDisconnect({topic:n,reason:r.params}),Promise.all([new Promise(a=>{this.client.core.relayer.once(nn.publish,async()=>{a(await this.deleteSession({topic:n,id:s}))})}),this.sendResult({id:s,topic:n,result:!0}),this.cleanupPendingSentRequestsForTopic({topic:n,error:Et("USER_DISCONNECTED")})]).catch(a=>this.client.logger.error(a))}catch(a){this.client.logger.error(a)}}),ye(this,"onSessionRequest",async n=>{var r,s,a;const{topic:c,payload:u,attestation:d,encryptedId:h,transportType:p}=n,{id:m,params:y}=u;try{await this.isValidRequest(bt({topic:c},y));const v=this.client.session.get(c),w=await this.getVerifyContext({attestationId:d,hash:fi(JSON.stringify(Ys("wc_sessionRequest",y,m))),encryptedId:h,metadata:v.peer.metadata,transportType:p}),E={id:m,topic:c,params:y,verifyContext:w};await this.setPendingSessionRequest(E),p===wt.link_mode&&(r=v.peer.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp((s=v.peer.metadata.redirect)==null?void 0:s.universal),(a=this.client.signConfig)!=null&&a.disableRequestQueue?this.emitSessionRequest(E):(this.addSessionRequestToSessionRequestQueue(E),this.processSessionRequestQueue())}catch(v){await this.sendError({id:m,topic:c,error:v}),this.client.logger.error(v)}}),ye(this,"onSessionRequestResponse",(n,r)=>{const{id:s}=r,a=Xe("session_request",s);if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners`);li(r)?this.events.emit(Xe("session_request",s),{result:r.result}):Tr(r)&&this.events.emit(Xe("session_request",s),{error:r.error})}),ye(this,"onSessionEventRequest",async(n,r)=>{const{id:s,params:a}=r;try{const c=`${n}_session_event_${a.event.name}`,u=ou.get(c);if(u&&this.isRequestOutOfSync(u,s)){this.client.logger.info(`Discarding out of sync request - ${s}`);return}this.isValidEmit(bt({topic:n},a)),this.client.events.emit("session_event",{id:s,topic:n,params:a}),ou.set(c,s)}catch(c){await this.sendError({id:s,topic:n,error:c}),this.client.logger.error(c)}}),ye(this,"onSessionAuthenticateResponse",(n,r)=>{const{id:s}=r;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:n,payload:r}),li(r)?this.events.emit(Xe("session_request",s),{result:r.result}):Tr(r)&&this.events.emit(Xe("session_request",s),{error:r.error})}),ye(this,"onSessionAuthenticateRequest",async n=>{var r;const{topic:s,payload:a,attestation:c,encryptedId:u,transportType:d}=n;try{const{requester:h,authPayload:p,expiryTimestamp:m}=a.params,y=await this.getVerifyContext({attestationId:c,hash:fi(JSON.stringify(a)),encryptedId:u,metadata:h.metadata,transportType:d}),v={requester:h,pairingTopic:s,id:a.id,authPayload:p,verifyContext:y,expiryTimestamp:m};await this.setAuthRequest(a.id,{request:v,pairingTopic:s,transportType:d}),d===wt.link_mode&&(r=h.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp(h.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:s,params:a.params,id:a.id,verifyContext:y})}catch(h){this.client.logger.error(h);const p=a.params.requester.publicKey,m=await this.client.core.crypto.generateKeyPair(),y=this.getAppLinkIfEnabled(a.params.requester.metadata,d),v={type:es,receiverPublicKey:p,senderPublicKey:m};await this.sendError({id:a.id,topic:s,error:h,encodeOpts:v,rpcOpts:en.wc_sessionAuthenticate.autoReject,appLink:y})}}),ye(this,"addSessionRequestToSessionRequestQueue",n=>{this.sessionRequestQueue.queue.push(n)}),ye(this,"cleanupAfterResponse",n=>{this.deletePendingSessionRequest(n.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=si.idle,this.processSessionRequestQueue()},we.toMiliseconds(this.requestQueueDelay))}),ye(this,"cleanupPendingSentRequestsForTopic",({topic:n,error:r})=>{const s=this.client.core.history.pending;s.length>0&&s.filter(a=>a.topic===n&&a.request.method==="wc_sessionRequest").forEach(a=>{const c=a.request.id,u=Xe("session_request",c);if(this.events.listenerCount(u)===0)throw new Error(`emitting ${u} without any listeners`);this.events.emit(Xe("session_request",a.request.id),{error:r})})}),ye(this,"processSessionRequestQueue",()=>{if(this.sessionRequestQueue.state===si.active){this.client.logger.info("session request queue is already active.");return}const n=this.sessionRequestQueue.queue[0];if(!n){this.client.logger.info("session request queue is empty.");return}try{this.emitSessionRequest(n)}catch(r){this.client.logger.error(r)}}),ye(this,"emitSessionRequest",n=>{if(this.emittedSessionRequests.has(n.id)){this.client.logger.warn({id:n.id},`Skipping emitting \`session_request\` event for duplicate request. id: ${n.id}`);return}this.sessionRequestQueue.state=si.active,this.emittedSessionRequests.add(n.id),this.client.events.emit("session_request",n)}),ye(this,"onPairingCreated",n=>{if(n.methods&&this.expectedPairingMethodMap.set(n.topic,n.methods),n.active)return;const r=this.client.proposal.getAll().find(s=>s.pairingTopic===n.topic);r&&this.onSessionProposeRequest({topic:n.topic,payload:Ys("wc_sessionPropose",Ln(bt({},r),{requiredNamespaces:r.requiredNamespaces,optionalNamespaces:r.optionalNamespaces,relays:r.relays,proposer:r.proposer,sessionProperties:r.sessionProperties,scopedProperties:r.scopedProperties}),r.id),attestation:r.attestation,encryptedId:r.encryptedId})}),ye(this,"isValidConnect",async n=>{if(!zn(n)){const{message:h}=be("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(n)}`);throw new Error(h)}const{pairingTopic:r,requiredNamespaces:s,optionalNamespaces:a,sessionProperties:c,scopedProperties:u,relays:d}=n;if(pn(r)||await this.isValidPairingTopic(r),!bV(d)){const{message:h}=be("MISSING_OR_INVALID",`connect() relays: ${d}`);throw new Error(h)}if(!pn(s)&&gi(s)!==0){const h="requiredNamespaces are deprecated and are automatically assigned to optionalNamespaces";["fatal","error","silent"].includes(this.client.logger.level)?console.warn(h):this.client.logger.warn(h),this.validateNamespaces(s,"requiredNamespaces")}if(!pn(a)&&gi(a)!==0&&this.validateNamespaces(a,"optionalNamespaces"),pn(c)||this.validateSessionProps(c,"sessionProperties"),!pn(u)){this.validateSessionProps(u,"scopedProperties");const h=Object.keys(s||{}).concat(Object.keys(a||{}));if(!Object.keys(u).every(p=>h.includes(p.split(":")[0])))throw new Error(`Scoped properties must be a subset of required/optional namespaces, received: ${JSON.stringify(u)}, required/optional namespaces: ${JSON.stringify(h)}`)}}),ye(this,"validateNamespaces",(n,r)=>{const s=yV(n,"connect()",r);if(s)throw new Error(s.message)}),ye(this,"isValidApprove",async n=>{if(!zn(n))throw new Error(be("MISSING_OR_INVALID",`approve() params: ${n}`).message);const{id:r,namespaces:s,relayProtocol:a,sessionProperties:c,scopedProperties:u}=n;this.checkRecentlyDeleted(r),await this.isValidProposalId(r);const d=this.client.proposal.get(r),h=zy(s,"approve()");if(h)throw new Error(h.message);const p=kA(d.requiredNamespaces,s,"approve()");if(p)throw new Error(p.message);if(!kt(a,!0)){const{message:m}=be("MISSING_OR_INVALID",`approve() relayProtocol: ${a}`);throw new Error(m)}if(pn(c)||this.validateSessionProps(c,"sessionProperties"),!pn(u)){this.validateSessionProps(u,"scopedProperties");const m=new Set(Object.keys(s));if(!Object.keys(u).every(y=>m.has(y.split(":")[0])))throw new Error(`Scoped properties must be a subset of approved namespaces, received: ${JSON.stringify(u)}, approved namespaces: ${Array.from(m).join(", ")}`)}}),ye(this,"isValidReject",async n=>{if(!zn(n)){const{message:a}=be("MISSING_OR_INVALID",`reject() params: ${n}`);throw new Error(a)}const{id:r,reason:s}=n;if(this.checkRecentlyDeleted(r),await this.isValidProposalId(r),!vV(s)){const{message:a}=be("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(s)}`);throw new Error(a)}}),ye(this,"isValidSessionSettleRequest",n=>{if(!zn(n)){const{message:h}=be("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${n}`);throw new Error(h)}const{relay:r,controller:s,namespaces:a,expiry:c}=n;if(!$D(r)){const{message:h}=be("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(h)}const u=fV(s,"onSessionSettleRequest()");if(u)throw new Error(u.message);const d=zy(a,"onSessionSettleRequest()");if(d)throw new Error(d.message);if(zs(c)){const{message:h}=be("EXPIRED","onSessionSettleRequest()");throw new Error(h)}}),ye(this,"isValidUpdate",async n=>{if(!zn(n)){const{message:d}=be("MISSING_OR_INVALID",`update() params: ${n}`);throw new Error(d)}const{topic:r,namespaces:s}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const a=this.client.session.get(r),c=zy(s,"update()");if(c)throw new Error(c.message);const u=kA(a.requiredNamespaces,s,"update()");if(u)throw new Error(u.message)}),ye(this,"isValidExtend",async n=>{if(!zn(n)){const{message:s}=be("MISSING_OR_INVALID",`extend() params: ${n}`);throw new Error(s)}const{topic:r}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r)}),ye(this,"isValidRequest",async n=>{if(!zn(n)){const{message:d}=be("MISSING_OR_INVALID",`request() params: ${n}`);throw new Error(d)}const{topic:r,request:s,chainId:a,expiry:c}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const{namespaces:u}=this.client.session.get(r);if(!PA(u,a)){const{message:d}=be("MISSING_OR_INVALID",`request() chainId: ${a}`);throw new Error(d)}if(!EV(s)){const{message:d}=be("MISSING_OR_INVALID",`request() ${JSON.stringify(s)}`);throw new Error(d)}if(!AV(u,a,s.method)){const{message:d}=be("MISSING_OR_INVALID",`request() method: ${s.method}`);throw new Error(d)}if(c&&!TV(c,Jy)){const{message:d}=be("MISSING_OR_INVALID",`request() expiry: ${c}. Expiry must be a number (in seconds) between ${Jy.min} and ${Jy.max}`);throw new Error(d)}}),ye(this,"isValidRespond",async n=>{var r;if(!zn(n)){const{message:c}=be("MISSING_OR_INVALID",`respond() params: ${n}`);throw new Error(c)}const{topic:s,response:a}=n;try{await this.isValidSessionTopic(s)}catch(c){throw(r=n?.response)!=null&&r.id&&this.cleanupAfterResponse(n),c}if(!SV(a)){const{message:c}=be("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(a)}`);throw new Error(c)}}),ye(this,"isValidPing",async n=>{if(!zn(n)){const{message:s}=be("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(s)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),ye(this,"isValidEmit",async n=>{if(!zn(n)){const{message:u}=be("MISSING_OR_INVALID",`emit() params: ${n}`);throw new Error(u)}const{topic:r,event:s,chainId:a}=n;await this.isValidSessionTopic(r);const{namespaces:c}=this.client.session.get(r);if(!PA(c,a)){const{message:u}=be("MISSING_OR_INVALID",`emit() chainId: ${a}`);throw new Error(u)}if(!_V(s)){const{message:u}=be("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(u)}if(!xV(c,a,s.name)){const{message:u}=be("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(u)}}),ye(this,"isValidDisconnect",async n=>{if(!zn(n)){const{message:s}=be("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(s)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),ye(this,"isValidAuthenticate",n=>{const{chains:r,uri:s,domain:a,nonce:c}=n;if(!Array.isArray(r)||r.length===0)throw new Error("chains is required and must be a non-empty array");if(!kt(s,!1))throw new Error("uri is required parameter");if(!kt(a,!1))throw new Error("domain is required parameter");if(!kt(c,!1))throw new Error("nonce is required parameter");if([...new Set(r.map(d=>Dc(d).namespace))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:u}=Dc(r[0]);if(u!=="eip155")throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")}),ye(this,"getVerifyContext",async n=>{const{attestationId:r,hash:s,encryptedId:a,metadata:c,transportType:u}=n,d={verified:{verifyUrl:c.verifyUrl||Tu,validation:"UNKNOWN",origin:c.url||""}};try{if(u===wt.link_mode){const p=this.getAppLinkIfEnabled(c,u);return d.verified.validation=p&&new URL(p).origin===new URL(c.url).origin?"VALID":"INVALID",d}const h=await this.client.core.verify.resolve({attestationId:r,hash:s,encryptedId:a,verifyUrl:c.verifyUrl});h&&(d.verified.origin=h.origin,d.verified.isScam=h.isScam,d.verified.validation=h.origin===new URL(c.url).origin?"VALID":"INVALID")}catch(h){this.client.logger.warn(h)}return this.client.logger.debug(`Verify context: ${JSON.stringify(d)}`),d}),ye(this,"validateSessionProps",(n,r)=>{Object.values(n).forEach((s,a)=>{if(s==null){const{message:c}=be("MISSING_OR_INVALID",`${r} must contain an existing value for each key. Received: ${s} for key ${Object.keys(n)[a]}`);throw new Error(c)}})}),ye(this,"getPendingAuthRequest",n=>{const r=this.client.auth.requests.get(n);return typeof r=="object"?r:void 0}),ye(this,"addToRecentlyDeleted",(n,r)=>{if(this.recentlyDeletedMap.set(n,r),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let s=0;const a=this.recentlyDeletedLimit/2;for(const c of this.recentlyDeletedMap.keys()){if(s++>=a)break;this.recentlyDeletedMap.delete(c)}}}),ye(this,"checkRecentlyDeleted",n=>{const r=this.recentlyDeletedMap.get(n);if(r){const{message:s}=be("MISSING_OR_INVALID",`Record was recently deleted - ${r}: ${n}`);throw new Error(s)}}),ye(this,"isLinkModeEnabled",(n,r)=>{var s,a,c,u,d,h,p,m,y;return!n||r!==wt.link_mode?!1:((a=(s=this.client.metadata)==null?void 0:s.redirect)==null?void 0:a.linkMode)===!0&&((u=(c=this.client.metadata)==null?void 0:c.redirect)==null?void 0:u.universal)!==void 0&&((h=(d=this.client.metadata)==null?void 0:d.redirect)==null?void 0:h.universal)!==""&&((p=n?.redirect)==null?void 0:p.universal)!==void 0&&((m=n?.redirect)==null?void 0:m.universal)!==""&&((y=n?.redirect)==null?void 0:y.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(n.redirect.universal)&&typeof(global==null?void 0:global.Linking)<"u"}),ye(this,"getAppLinkIfEnabled",(n,r)=>{var s;return this.isLinkModeEnabled(n,r)?(s=n?.redirect)==null?void 0:s.universal:void 0}),ye(this,"handleLinkModeMessage",({url:n})=>{if(!n||!n.includes("wc_ev")||!n.includes("topic"))return;const r=X_(n,"topic")||"",s=decodeURIComponent(X_(n,"wc_ev")||""),a=this.client.session.keys.includes(r);a&&this.client.session.update(r,{transportType:wt.link_mode}),this.client.core.dispatchEnvelope({topic:r,message:s,sessionExists:a})}),ye(this,"registerLinkModeListeners",async()=>{var n;if(hw()||to()&&(n=this.client.metadata.redirect)!=null&&n.linkMode){const r=global==null?void 0:global.Linking;if(typeof r<"u"){r.addEventListener("url",this.handleLinkModeMessage,this.client.name);const s=await r.getInitialURL();s&&setTimeout(()=>{this.handleLinkModeMessage({url:s})},50)}}}),ye(this,"getTVFParams",(n,r,s)=>{var a,c,u;if(!((a=r.request)!=null&&a.method))return{};const d={correlationId:n,rpcMethods:[r.request.method],chainId:r.chainId};try{const h=this.extractTxHashesFromResult(r.request,s);d.txHashes=h,d.contractAddresses=this.isValidContractData(r.request.params)?[(u=(c=r.request.params)==null?void 0:c[0])==null?void 0:u.to]:[]}catch(h){this.client.logger.warn("Error getting TVF params",h)}return d}),ye(this,"isValidContractData",n=>{var r;if(!n)return!1;try{const s=n?.data||((r=n?.[0])==null?void 0:r.data);if(!s.startsWith("0x"))return!1;const a=s.slice(2);return/^[0-9a-fA-F]*$/.test(a)?a.length%2===0:!1}catch{}return!1}),ye(this,"extractTxHashesFromResult",(n,r)=>{var s;try{if(!r)return[];const a=n.method,c=xZ[a];if(a==="sui_signTransaction")return[Zq(r.transactionBytes)];if(a==="near_signTransaction")return[iA(r)];if(a==="near_signTransactions")return r.map(d=>iA(d));if(a==="xrpl_signTransactionFor"||a==="xrpl_signTransaction")return[(s=r.tx_json)==null?void 0:s.hash];if(a==="polkadot_signTransaction")return[HV({transaction:n.params.transactionPayload,signature:r.signature})];if(a==="algo_signTxn")return ts(r)?r.map(d=>sA(d)):[sA(r)];if(a==="cosmos_signDirect")return[Jq(r)];if(typeof r=="string")return[r];const u=r[c.key];if(ts(u))return a==="solana_signAllTransactions"?u.map(d=>Xq(d)):u;if(typeof u=="string")return[u]}catch(a){this.client.logger.warn("Error extracting tx hashes from result",a)}return[]})}async processPendingMessageEvents(){try{const t=this.client.session.keys,n=this.client.core.relayer.messages.getWithoutAck(t);for(const[r,s]of Object.entries(n))for(const a of s)try{await this.onProviderMessageEvent({topic:r,message:a,publishedAt:Date.now()})}catch{this.client.logger.warn(`Error processing pending message event for topic: ${r}, message: ${a}`)}}catch(t){this.client.logger.warn("processPendingMessageEvents failed",t)}}isInitialized(){if(!this.initialized){const{message:t}=be("NOT_INITIALIZED",this.name);throw new Error(t)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(nn.message,t=>{this.onProviderMessageEvent(t)})}async onRelayMessage(t){const{topic:n,message:r,attestation:s,transportType:a}=t,{publicKey:c}=this.client.auth.authKeys.keys.includes(ph)?this.client.auth.authKeys.get(ph):{publicKey:void 0};try{const u=await this.client.core.crypto.decode(n,r,{receiverPublicKey:c,encoding:a===wt.link_mode?Gs:Gr});$w(u)?(this.client.core.history.set(n,u),await this.onRelayEventRequest({topic:n,payload:u,attestation:s,transportType:a,encryptedId:fi(r)})):bp(u)?(await this.client.core.history.resolve(u),await this.onRelayEventResponse({topic:n,payload:u,transportType:a}),this.client.core.history.delete(n,u.id)):await this.onRelayEventUnknownPayload({topic:n,payload:u,transportType:a}),await this.client.core.relayer.messages.ack(n,r)}catch(u){this.client.logger.error(u)}}registerExpirerEvents(){this.client.core.expirer.on(Or.expired,async t=>{const{topic:n,id:r}=z3(t.target);if(r&&this.client.pendingRequest.keys.includes(r))return await this.deletePendingSessionRequest(r,be("EXPIRED"),!0);if(r&&this.client.auth.requests.keys.includes(r))return await this.deletePendingAuthRequest(r,be("EXPIRED"),!0);n?this.client.session.keys.includes(n)&&(await this.deleteSession({topic:n,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:n})):r&&(await this.deleteProposal(r,!0),this.client.events.emit("proposal_expire",{id:r}))})}registerPairingEvents(){this.client.core.pairing.events.on(Po.create,t=>this.onPairingCreated(t)),this.client.core.pairing.events.on(Po.delete,t=>{this.addToRecentlyDeleted(t.topic,"pairing")})}isValidPairingTopic(t){if(!kt(t,!1)){const{message:n}=be("MISSING_OR_INVALID",`pairing topic should be a string: ${t}`);throw new Error(n)}if(!this.client.core.pairing.pairings.keys.includes(t)){const{message:n}=be("NO_MATCHING_KEY",`pairing topic doesn't exist: ${t}`);throw new Error(n)}if(zs(this.client.core.pairing.pairings.get(t).expiry)){const{message:n}=be("EXPIRED",`pairing topic: ${t}`);throw new Error(n)}}async isValidSessionTopic(t){if(!kt(t,!1)){const{message:n}=be("MISSING_OR_INVALID",`session topic should be a string: ${t}`);throw new Error(n)}if(this.checkRecentlyDeleted(t),!this.client.session.keys.includes(t)){const{message:n}=be("NO_MATCHING_KEY",`session topic doesn't exist: ${t}`);throw new Error(n)}if(zs(this.client.session.get(t).expiry)){await this.deleteSession({topic:t});const{message:n}=be("EXPIRED",`session topic: ${t}`);throw new Error(n)}if(!this.client.core.crypto.keychain.has(t)){const{message:n}=be("MISSING_OR_INVALID",`session topic does not exist in keychain: ${t}`);throw await this.deleteSession({topic:t}),new Error(n)}}async isValidSessionOrPairingTopic(t){if(this.checkRecentlyDeleted(t),this.client.session.keys.includes(t))await this.isValidSessionTopic(t);else if(this.client.core.pairing.pairings.keys.includes(t))this.isValidPairingTopic(t);else if(kt(t,!1)){const{message:n}=be("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${t}`);throw new Error(n)}else{const{message:n}=be("MISSING_OR_INVALID",`session or pairing topic should be a string: ${t}`);throw new Error(n)}}async isValidProposalId(t){if(!wV(t)){const{message:n}=be("MISSING_OR_INVALID",`proposal id should be a number: ${t}`);throw new Error(n)}if(!this.client.proposal.keys.includes(t)){const{message:n}=be("NO_MATCHING_KEY",`proposal id doesn't exist: ${t}`);throw new Error(n)}if(zs(this.client.proposal.get(t).expiryTimestamp)){await this.deleteProposal(t);const{message:n}=be("EXPIRED",`proposal id: ${t}`);throw new Error(n)}}}class LZ extends aa{constructor(t,n){super(t,n,SZ,Uw),this.core=t,this.logger=n}}let jZ=class extends aa{constructor(t,n){super(t,n,_Z,Uw),this.core=t,this.logger=n}};class zZ extends aa{constructor(t,n){super(t,n,RZ,Uw,r=>r.id),this.core=t,this.logger=n}}class qZ extends aa{constructor(t,n){super(t,n,IZ,vp,()=>ph),this.core=t,this.logger=n}}class HZ extends aa{constructor(t,n){super(t,n,CZ,vp),this.core=t,this.logger=n}}class FZ extends aa{constructor(t,n){super(t,n,NZ,vp,r=>r.id),this.core=t,this.logger=n}}var VZ=Object.defineProperty,GZ=(e,t,n)=>t in e?VZ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,e0=(e,t,n)=>GZ(e,typeof t!="symbol"?t+"":t,n);class KZ{constructor(t,n){this.core=t,this.logger=n,e0(this,"authKeys"),e0(this,"pairingTopics"),e0(this,"requests"),this.authKeys=new qZ(this.core,this.logger),this.pairingTopics=new HZ(this.core,this.logger),this.requests=new FZ(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}var YZ=Object.defineProperty,WZ=(e,t,n)=>t in e?YZ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,je=(e,t,n)=>WZ(e,typeof t!="symbol"?t+"":t,n);let XZ=class wI extends pK{constructor(t){super(t),je(this,"protocol",mI),je(this,"version",yI),je(this,"name",Qy.name),je(this,"metadata"),je(this,"core"),je(this,"logger"),je(this,"events",new Kn.EventEmitter),je(this,"engine"),je(this,"session"),je(this,"proposal"),je(this,"pendingRequest"),je(this,"auth"),je(this,"signConfig"),je(this,"on",(r,s)=>this.events.on(r,s)),je(this,"once",(r,s)=>this.events.once(r,s)),je(this,"off",(r,s)=>this.events.off(r,s)),je(this,"removeListener",(r,s)=>this.events.removeListener(r,s)),je(this,"removeAllListeners",r=>this.events.removeAllListeners(r)),je(this,"connect",async r=>{try{return await this.engine.connect(r)}catch(s){throw this.logger.error(s.message),s}}),je(this,"pair",async r=>{try{return await this.engine.pair(r)}catch(s){throw this.logger.error(s.message),s}}),je(this,"approve",async r=>{try{return await this.engine.approve(r)}catch(s){throw this.logger.error(s.message),s}}),je(this,"reject",async r=>{try{return await this.engine.reject(r)}catch(s){throw this.logger.error(s.message),s}}),je(this,"update",async r=>{try{return await this.engine.update(r)}catch(s){throw this.logger.error(s.message),s}}),je(this,"extend",async r=>{try{return await this.engine.extend(r)}catch(s){throw this.logger.error(s.message),s}}),je(this,"request",async r=>{try{return await this.engine.request(r)}catch(s){throw this.logger.error(s.message),s}}),je(this,"respond",async r=>{try{return await this.engine.respond(r)}catch(s){throw this.logger.error(s.message),s}}),je(this,"ping",async r=>{try{return await this.engine.ping(r)}catch(s){throw this.logger.error(s.message),s}}),je(this,"emit",async r=>{try{return await this.engine.emit(r)}catch(s){throw this.logger.error(s.message),s}}),je(this,"disconnect",async r=>{try{return await this.engine.disconnect(r)}catch(s){throw this.logger.error(s.message),s}}),je(this,"find",r=>{try{return this.engine.find(r)}catch(s){throw this.logger.error(s.message),s}}),je(this,"getPendingSessionRequests",()=>{try{return this.engine.getPendingSessionRequests()}catch(r){throw this.logger.error(r.message),r}}),je(this,"authenticate",async(r,s)=>{try{return await this.engine.authenticate(r,s)}catch(a){throw this.logger.error(a.message),a}}),je(this,"formatAuthMessage",r=>{try{return this.engine.formatAuthMessage(r)}catch(s){throw this.logger.error(s.message),s}}),je(this,"approveSessionAuthenticate",async r=>{try{return await this.engine.approveSessionAuthenticate(r)}catch(s){throw this.logger.error(s.message),s}}),je(this,"rejectSessionAuthenticate",async r=>{try{return await this.engine.rejectSessionAuthenticate(r)}catch(s){throw this.logger.error(s.message),s}}),this.name=t?.name||Qy.name,this.metadata=qz(t?.metadata),this.signConfig=t?.signConfig;const n=typeof t?.logger<"u"&&typeof t?.logger!="string"?t.logger:lf(gp({level:t?.logger||Qy.logger}));this.core=t?.core||new EZ(t),this.logger=Cn(n,this.name),this.session=new jZ(this.core,this.logger),this.proposal=new LZ(this.core,this.logger),this.pendingRequest=new zZ(this.core,this.logger),this.engine=new MZ(this),this.auth=new KZ(this.core,this.logger)}static async init(t){const n=new wI(t);return await n.initialize(),n}get context(){return Xn(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success")}catch(t){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(t.message),t}}};var Fd={exports:{}},Mx;function ZZ(){return Mx||(Mx=1,function(e,t){var n=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof Fn<"u"&&Fn,r=function(){function a(){this.fetch=!1,this.DOMException=n.DOMException}return a.prototype=n,new a}();(function(a){(function(c){var u=typeof a<"u"&&a||typeof self<"u"&&self||typeof Fn<"u"&&Fn||{},d={searchParams:"URLSearchParams"in u,iterable:"Symbol"in u&&"iterator"in Symbol,blob:"FileReader"in u&&"Blob"in u&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in u,arrayBuffer:"ArrayBuffer"in u};function h(O){return O&&DataView.prototype.isPrototypeOf(O)}if(d.arrayBuffer)var p=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],m=ArrayBuffer.isView||function(O){return O&&p.indexOf(Object.prototype.toString.call(O))>-1};function y(O){if(typeof O!="string"&&(O=String(O)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(O)||O==="")throw new TypeError('Invalid character in header field name: "'+O+'"');return O.toLowerCase()}function v(O){return typeof O!="string"&&(O=String(O)),O}function w(O){var R={next:function(){var M=O.shift();return{done:M===void 0,value:M}}};return d.iterable&&(R[Symbol.iterator]=function(){return R}),R}function E(O){this.map={},O instanceof E?O.forEach(function(R,M){this.append(M,R)},this):Array.isArray(O)?O.forEach(function(R){if(R.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+R.length);this.append(R[0],R[1])},this):O&&Object.getOwnPropertyNames(O).forEach(function(R){this.append(R,O[R])},this)}E.prototype.append=function(O,R){O=y(O),R=v(R);var M=this.map[O];this.map[O]=M?M+", "+R:R},E.prototype.delete=function(O){delete this.map[y(O)]},E.prototype.get=function(O){return O=y(O),this.has(O)?this.map[O]:null},E.prototype.has=function(O){return this.map.hasOwnProperty(y(O))},E.prototype.set=function(O,R){this.map[y(O)]=v(R)},E.prototype.forEach=function(O,R){for(var M in this.map)this.map.hasOwnProperty(M)&&O.call(R,this.map[M],M,this)},E.prototype.keys=function(){var O=[];return this.forEach(function(R,M){O.push(M)}),w(O)},E.prototype.values=function(){var O=[];return this.forEach(function(R){O.push(R)}),w(O)},E.prototype.entries=function(){var O=[];return this.forEach(function(R,M){O.push([M,R])}),w(O)},d.iterable&&(E.prototype[Symbol.iterator]=E.prototype.entries);function S(O){if(!O._noBody){if(O.bodyUsed)return Promise.reject(new TypeError("Already read"));O.bodyUsed=!0}}function A(O){return new Promise(function(R,M){O.onload=function(){R(O.result)},O.onerror=function(){M(O.error)}})}function I(O){var R=new FileReader,M=A(R);return R.readAsArrayBuffer(O),M}function D(O){var R=new FileReader,M=A(R),F=/charset=([A-Za-z0-9_-]+)/.exec(O.type),X=F?F[1]:"utf-8";return R.readAsText(O,X),M}function B(O){for(var R=new Uint8Array(O),M=new Array(R.length),F=0;F<R.length;F++)M[F]=String.fromCharCode(R[F]);return M.join("")}function $(O){if(O.slice)return O.slice(0);var R=new Uint8Array(O.byteLength);return R.set(new Uint8Array(O)),R.buffer}function N(){return this.bodyUsed=!1,this._initBody=function(O){this.bodyUsed=this.bodyUsed,this._bodyInit=O,O?typeof O=="string"?this._bodyText=O:d.blob&&Blob.prototype.isPrototypeOf(O)?this._bodyBlob=O:d.formData&&FormData.prototype.isPrototypeOf(O)?this._bodyFormData=O:d.searchParams&&URLSearchParams.prototype.isPrototypeOf(O)?this._bodyText=O.toString():d.arrayBuffer&&d.blob&&h(O)?(this._bodyArrayBuffer=$(O.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):d.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(O)||m(O))?this._bodyArrayBuffer=$(O):this._bodyText=O=Object.prototype.toString.call(O):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof O=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):d.searchParams&&URLSearchParams.prototype.isPrototypeOf(O)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},d.blob&&(this.blob=function(){var O=S(this);if(O)return O;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var O=S(this);return O||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(d.blob)return this.blob().then(I);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var O=S(this);if(O)return O;if(this._bodyBlob)return D(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(B(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},d.formData&&(this.formData=function(){return this.text().then(K)}),this.json=function(){return this.text().then(JSON.parse)},this}var q=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function H(O){var R=O.toUpperCase();return q.indexOf(R)>-1?R:O}function k(O,R){if(!(this instanceof k))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');R=R||{};var M=R.body;if(O instanceof k){if(O.bodyUsed)throw new TypeError("Already read");this.url=O.url,this.credentials=O.credentials,R.headers||(this.headers=new E(O.headers)),this.method=O.method,this.mode=O.mode,this.signal=O.signal,!M&&O._bodyInit!=null&&(M=O._bodyInit,O.bodyUsed=!0)}else this.url=String(O);if(this.credentials=R.credentials||this.credentials||"same-origin",(R.headers||!this.headers)&&(this.headers=new E(R.headers)),this.method=H(R.method||this.method||"GET"),this.mode=R.mode||this.mode||null,this.signal=R.signal||this.signal||function(){if("AbortController"in u){var C=new AbortController;return C.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&M)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(M),(this.method==="GET"||this.method==="HEAD")&&(R.cache==="no-store"||R.cache==="no-cache")){var F=/([?&])_=[^&]*/;if(F.test(this.url))this.url=this.url.replace(F,"$1_="+new Date().getTime());else{var X=/\?/;this.url+=(X.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}k.prototype.clone=function(){return new k(this,{body:this._bodyInit})};function K(O){var R=new FormData;return O.trim().split("&").forEach(function(M){if(M){var F=M.split("="),X=F.shift().replace(/\+/g," "),C=F.join("=").replace(/\+/g," ");R.append(decodeURIComponent(X),decodeURIComponent(C))}}),R}function Y(O){var R=new E,M=O.replace(/\r?\n[\t ]+/g," ");return M.split("\r").map(function(F){return F.indexOf(`
`)===0?F.substr(1,F.length):F}).forEach(function(F){var X=F.split(":"),C=X.shift().trim();if(C){var V=X.join(":").trim();try{R.append(C,V)}catch(ee){console.warn("Response "+ee.message)}}}),R}N.call(k.prototype);function W(O,R){if(!(this instanceof W))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(R||(R={}),this.type="default",this.status=R.status===void 0?200:R.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=R.statusText===void 0?"":""+R.statusText,this.headers=new E(R.headers),this.url=R.url||"",this._initBody(O)}N.call(W.prototype),W.prototype.clone=function(){return new W(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new E(this.headers),url:this.url})},W.error=function(){var O=new W(null,{status:200,statusText:""});return O.ok=!1,O.status=0,O.type="error",O};var le=[301,302,303,307,308];W.redirect=function(O,R){if(le.indexOf(R)===-1)throw new RangeError("Invalid status code");return new W(null,{status:R,headers:{location:O}})},c.DOMException=u.DOMException;try{new c.DOMException}catch{c.DOMException=function(R,M){this.message=R,this.name=M;var F=Error(R);this.stack=F.stack},c.DOMException.prototype=Object.create(Error.prototype),c.DOMException.prototype.constructor=c.DOMException}function re(O,R){return new Promise(function(M,F){var X=new k(O,R);if(X.signal&&X.signal.aborted)return F(new c.DOMException("Aborted","AbortError"));var C=new XMLHttpRequest;function V(){C.abort()}C.onload=function(){var te={statusText:C.statusText,headers:Y(C.getAllResponseHeaders()||"")};X.url.indexOf("file://")===0&&(C.status<200||C.status>599)?te.status=200:te.status=C.status,te.url="responseURL"in C?C.responseURL:te.headers.get("X-Request-URL");var pe="response"in C?C.response:C.responseText;setTimeout(function(){M(new W(pe,te))},0)},C.onerror=function(){setTimeout(function(){F(new TypeError("Network request failed"))},0)},C.ontimeout=function(){setTimeout(function(){F(new TypeError("Network request timed out"))},0)},C.onabort=function(){setTimeout(function(){F(new c.DOMException("Aborted","AbortError"))},0)};function ee(te){try{return te===""&&u.location.href?u.location.href:te}catch{return te}}if(C.open(X.method,ee(X.url),!0),X.credentials==="include"?C.withCredentials=!0:X.credentials==="omit"&&(C.withCredentials=!1),"responseType"in C&&(d.blob?C.responseType="blob":d.arrayBuffer&&(C.responseType="arraybuffer")),R&&typeof R.headers=="object"&&!(R.headers instanceof E||u.Headers&&R.headers instanceof u.Headers)){var se=[];Object.getOwnPropertyNames(R.headers).forEach(function(te){se.push(y(te)),C.setRequestHeader(te,v(R.headers[te]))}),X.headers.forEach(function(te,pe){se.indexOf(pe)===-1&&C.setRequestHeader(pe,te)})}else X.headers.forEach(function(te,pe){C.setRequestHeader(pe,te)});X.signal&&(X.signal.addEventListener("abort",V),C.onreadystatechange=function(){C.readyState===4&&X.signal.removeEventListener("abort",V)}),C.send(typeof X._bodyInit>"u"?null:X._bodyInit)})}return re.polyfill=!0,u.fetch||(u.fetch=re,u.Headers=E,u.Request=k,u.Response=W),c.Headers=E,c.Request=k,c.Response=W,c.fetch=re,Object.defineProperty(c,"__esModule",{value:!0}),c})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var s=n.fetch?n:r;t=s.fetch,t.default=s.fetch,t.fetch=s.fetch,t.Headers=s.Headers,t.Request=s.Request,t.Response=s.Response,e.exports=t}(Fd,Fd.exports)),Fd.exports}var QZ=ZZ();const Lx=Qs(QZ);var JZ=Object.defineProperty,eQ=Object.defineProperties,tQ=Object.getOwnPropertyDescriptors,jx=Object.getOwnPropertySymbols,nQ=Object.prototype.hasOwnProperty,rQ=Object.prototype.propertyIsEnumerable,zx=(e,t,n)=>t in e?JZ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,qx=(e,t)=>{for(var n in t||(t={}))nQ.call(t,n)&&zx(e,n,t[n]);if(jx)for(var n of jx(t))rQ.call(t,n)&&zx(e,n,t[n]);return e},Hx=(e,t)=>eQ(e,tQ(t));const iQ={Accept:"application/json","Content-Type":"application/json"},sQ="POST",Fx={headers:iQ,method:sQ},Vx=10;let Wr=class{constructor(t,n=!1){if(this.url=t,this.disableProviderPing=n,this.events=new Kn.EventEmitter,this.isAvailable=!1,this.registering=!1,!ax(t))throw new Error(`Provided URL is not compatible with HTTP connection: ${t}`);this.url=t,this.disableProviderPing=n}get connected(){return this.isAvailable}get connecting(){return this.registering}on(t,n){this.events.on(t,n)}once(t,n){this.events.once(t,n)}off(t,n){this.events.off(t,n)}removeListener(t,n){this.events.removeListener(t,n)}async open(t=this.url){await this.register(t)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(t){this.isAvailable||await this.register();try{const n=ss(t),r=await(await Lx(this.url,Hx(qx({},Fx),{body:n}))).json();this.onPayload({data:r})}catch(n){this.onError(t.id,n)}}async register(t=this.url){if(!ax(t))throw new Error(`Provided URL is not compatible with HTTP connection: ${t}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((r,s)=>{this.events.once("register_error",a=>{this.resetMaxListeners(),s(a)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return s(new Error("HTTP connection is missing or invalid"));r()})})}this.url=t,this.registering=!0;try{if(!this.disableProviderPing){const n=ss({id:1,jsonrpc:"2.0",method:"test",params:[]});await Lx(t,Hx(qx({},Fx),{body:n}))}this.onOpen()}catch(n){const r=this.parseError(n);throw this.events.emit("register_error",r),this.onClose(),r}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(t){if(typeof t.data>"u")return;const n=typeof t.data=="string"?Yo(t.data):t.data;this.events.emit("payload",n)}onError(t,n){const r=this.parseError(n),s=r.message||r.toString(),a=yp(t,s);this.events.emit("payload",a)}parseError(t,n=this.url){return XD(t,n,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>Vx&&this.events.setMaxListeners(Vx)}};const Gx="error",oQ="wss://relay.walletconnect.org",aQ="wc",cQ="universal_provider",Vd=`${aQ}@2:${cQ}:`,vI="https://rpc.walletconnect.org/v1/",Sc="generic",lQ=`${vI}bundler`,Ur={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};function Bw(e){return e==null||typeof e!="object"&&typeof e!="function"}function EI(e){return Object.getOwnPropertySymbols(e).filter(t=>Object.prototype.propertyIsEnumerable.call(e,t))}function SI(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const uQ="[object RegExp]",_I="[object String]",AI="[object Number]",xI="[object Boolean]",RI="[object Arguments]",fQ="[object Symbol]",dQ="[object Date]",hQ="[object Map]",pQ="[object Set]",gQ="[object Array]",mQ="[object ArrayBuffer]",yQ="[object Object]",bQ="[object DataView]",wQ="[object Uint8Array]",vQ="[object Uint8ClampedArray]",EQ="[object Uint16Array]",SQ="[object Uint32Array]",_Q="[object Int8Array]",AQ="[object Int16Array]",xQ="[object Int32Array]",RQ="[object Float32Array]",OQ="[object Float64Array]";function Pw(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function TQ(e,t){return xc(e,void 0,e,new Map,t)}function xc(e,t,n,r=new Map,s=void 0){const a=s?.(e,t,n,r);if(a!=null)return a;if(Bw(e))return e;if(r.has(e))return r.get(e);if(Array.isArray(e)){const c=new Array(e.length);r.set(e,c);for(let u=0;u<e.length;u++)c[u]=xc(e[u],u,n,r,s);return Object.hasOwn(e,"index")&&(c.index=e.index),Object.hasOwn(e,"input")&&(c.input=e.input),c}if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp){const c=new RegExp(e.source,e.flags);return c.lastIndex=e.lastIndex,c}if(e instanceof Map){const c=new Map;r.set(e,c);for(const[u,d]of e)c.set(u,xc(d,u,n,r,s));return c}if(e instanceof Set){const c=new Set;r.set(e,c);for(const u of e)c.add(xc(u,void 0,n,r,s));return c}if(typeof Buffer<"u"&&Buffer.isBuffer(e))return e.subarray();if(Pw(e)){const c=new(Object.getPrototypeOf(e)).constructor(e.length);r.set(e,c);for(let u=0;u<e.length;u++)c[u]=xc(e[u],u,n,r,s);return c}if(e instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&e instanceof SharedArrayBuffer)return e.slice(0);if(e instanceof DataView){const c=new DataView(e.buffer.slice(0),e.byteOffset,e.byteLength);return r.set(e,c),ko(c,e,n,r,s),c}if(typeof File<"u"&&e instanceof File){const c=new File([e],e.name,{type:e.type});return r.set(e,c),ko(c,e,n,r,s),c}if(e instanceof Blob){const c=new Blob([e],{type:e.type});return r.set(e,c),ko(c,e,n,r,s),c}if(e instanceof Error){const c=new e.constructor;return r.set(e,c),c.message=e.message,c.name=e.name,c.stack=e.stack,c.cause=e.cause,ko(c,e,n,r,s),c}if(typeof e=="object"&&DQ(e)){const c=Object.create(Object.getPrototypeOf(e));return r.set(e,c),ko(c,e,n,r,s),c}return e}function ko(e,t,n=e,r,s){const a=[...Object.keys(t),...EI(t)];for(let c=0;c<a.length;c++){const u=a[c],d=Object.getOwnPropertyDescriptor(e,u);(d==null||d.writable)&&(e[u]=xc(t[u],u,n,r,s))}}function DQ(e){switch(SI(e)){case RI:case gQ:case mQ:case bQ:case xI:case dQ:case RQ:case OQ:case _Q:case AQ:case xQ:case hQ:case AI:case yQ:case uQ:case pQ:case _I:case fQ:case wQ:case vQ:case EQ:case SQ:return!0;default:return!1}}function IQ(e,t){return TQ(e,(n,r,s,a)=>{if(typeof e=="object")switch(Object.prototype.toString.call(e)){case AI:case _I:case xI:{const c=new e.constructor(e?.valueOf());return ko(c,e),c}case RI:{const c={};return ko(c,e),c.length=e.length,c[Symbol.iterator]=e[Symbol.iterator],c}default:return}})}function Kx(e){return IQ(e)}function Yx(e){return e!==null&&typeof e=="object"&&SI(e)==="[object Arguments]"}function Wx(e){return typeof e=="object"&&e!==null}function CQ(){}function NQ(e){return Pw(e)}function $Q(e){if(typeof e!="object"||e==null)return!1;if(Object.getPrototypeOf(e)===null)return!0;if(Object.prototype.toString.call(e)!=="[object Object]"){const n=e[Symbol.toStringTag];return n==null||!Object.getOwnPropertyDescriptor(e,Symbol.toStringTag)?.writable?!1:e.toString()===`[object ${n}]`}let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function UQ(e){if(Bw(e))return e;if(Array.isArray(e)||Pw(e)||e instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&e instanceof SharedArrayBuffer)return e.slice(0);const t=Object.getPrototypeOf(e),n=t.constructor;if(e instanceof Date||e instanceof Map||e instanceof Set)return new n(e);if(e instanceof RegExp){const r=new n(e);return r.lastIndex=e.lastIndex,r}if(e instanceof DataView)return new n(e.buffer.slice(0));if(e instanceof Error){const r=new n(e.message);return r.stack=e.stack,r.name=e.name,r.cause=e.cause,r}if(typeof File<"u"&&e instanceof File)return new n([e],e.name,{type:e.type,lastModified:e.lastModified});if(typeof e=="object"){const r=Object.create(t);return Object.assign(r,e)}return e}function BQ(e,...t){const n=t.slice(0,-1),r=t[t.length-1];let s=e;for(let a=0;a<n.length;a++){const c=n[a];s=Sb(s,c,r,new Map)}return s}function Sb(e,t,n,r){if(Bw(e)&&(e=Object(e)),t==null||typeof t!="object")return e;if(r.has(t))return UQ(r.get(t));if(r.set(t,e),Array.isArray(t)){t=t.slice();for(let a=0;a<t.length;a++)t[a]=t[a]??void 0}const s=[...Object.keys(t),...EI(t)];for(let a=0;a<s.length;a++){const c=s[a];let u=t[c],d=e[c];if(Yx(u)&&(u={...u}),Yx(d)&&(d={...d}),typeof Buffer<"u"&&Buffer.isBuffer(u)&&(u=Kx(u)),Array.isArray(u))if(typeof d=="object"&&d!=null){const p=[],m=Reflect.ownKeys(d);for(let y=0;y<m.length;y++){const v=m[y];p[v]=d[v]}d=p}else d=[];const h=n(d,u,c,e,t,r);h!=null?e[c]=h:Array.isArray(u)||Wx(d)&&Wx(u)?e[c]=Sb(d,u,n,r):d==null&&$Q(u)?e[c]=Sb({},u,n,r):d==null&&NQ(u)?e[c]=Kx(u):(d===void 0||u!==void 0)&&(e[c]=u)}return e}function PQ(e,...t){return BQ(e,...t,CQ)}var kQ=Object.defineProperty,MQ=Object.defineProperties,LQ=Object.getOwnPropertyDescriptors,Xx=Object.getOwnPropertySymbols,jQ=Object.prototype.hasOwnProperty,zQ=Object.prototype.propertyIsEnumerable,Zx=(e,t,n)=>t in e?kQ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Gd=(e,t)=>{for(var n in t||(t={}))jQ.call(t,n)&&Zx(e,n,t[n]);if(Xx)for(var n of Xx(t))zQ.call(t,n)&&Zx(e,n,t[n]);return e},qQ=(e,t)=>MQ(e,LQ(t));function hr(e,t,n){var r;const s=Dc(e);return((r=t.rpcMap)==null?void 0:r[s.reference])||`${vI}?chainId=${s.namespace}:${s.reference}&projectId=${n}`}function ca(e){return e.includes(":")?e.split(":")[1]:e}function OI(e){return e.map(t=>`${t.split(":")[0]}:${t.split(":")[1]}`)}function HQ(e,t){const n=Object.keys(t.namespaces).filter(s=>s.includes(e));if(!n.length)return[];const r=[];return n.forEach(s=>{const a=t.namespaces[s].accounts;r.push(...a)}),r}function Kd(e={},t={}){const n=Qx(e),r=Qx(t);return PQ(n,r)}function Qx(e){var t,n,r,s,a;const c={};if(!gi(e))return c;for(const[u,d]of Object.entries(e)){const h=fp(u)?[u]:d.chains,p=d.methods||[],m=d.events||[],y=d.rpcMap||{},v=Ac(u);c[v]=qQ(Gd(Gd({},c[v]),d),{chains:pi(h,(t=c[v])==null?void 0:t.chains),methods:pi(p,(n=c[v])==null?void 0:n.methods),events:pi(m,(r=c[v])==null?void 0:r.events)}),(gi(y)||gi(((s=c[v])==null?void 0:s.rpcMap)||{}))&&(c[v].rpcMap=Gd(Gd({},y),(a=c[v])==null?void 0:a.rpcMap))}return c}function Jx(e){return e.includes(":")?e.split(":")[2]:e}function eR(e){const t={};for(const[n,r]of Object.entries(e)){const s=r.methods||[],a=r.events||[],c=r.accounts||[],u=fp(n)?[n]:r.chains?r.chains:OI(r.accounts);t[n]={chains:u,methods:s,events:a,accounts:c}}return t}function t0(e){return typeof e=="number"?e:e.includes("0x")?parseInt(e,16):(e=e.includes(":")?e.split(":")[1]:e,isNaN(Number(e))?e:Number(e))}const TI={},Ke=e=>TI[e],n0=(e,t)=>{TI[e]=t};var FQ=Object.defineProperty,tR=Object.getOwnPropertySymbols,VQ=Object.prototype.hasOwnProperty,GQ=Object.prototype.propertyIsEnumerable,nR=(e,t,n)=>t in e?FQ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,rR=(e,t)=>{for(var n in t||(t={}))VQ.call(t,n)&&nR(e,n,t[n]);if(tR)for(var n of tR(t))GQ.call(t,n)&&nR(e,n,t[n]);return e};const iR="eip155",KQ=["atomic","flow-control","paymasterService","sessionKeys","auxiliaryFunds"],YQ=e=>e&&e.startsWith("0x")?BigInt(e).toString(10):e,r0=e=>e&&e.startsWith("0x")?e:`0x${BigInt(e).toString(16)}`,sR=e=>Object.keys(e).filter(t=>KQ.includes(t)).reduce((t,n)=>(t[n]=e[n],t),{}),WQ=(e,t,n)=>{const{sessionProperties:r={},scopedProperties:s={}}=e,a={};if(!gi(s)&&!gi(r))return;const c=sR(r);for(const u of n){const d=YQ(u);if(!d)continue;a[r0(d)]=c;const h=s?.[`${iR}:${d}`];if(h){const p=h?.[`${iR}:${d}:${t}`];a[r0(d)]=rR(rR({},a[r0(d)]),sR(p||h))}}for(const[u,d]of Object.entries(a))Object.keys(d).length===0&&delete a[u];return Object.keys(a).length>0?a:void 0};var XQ=Object.defineProperty,ZQ=(e,t,n)=>t in e?XQ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,sc=(e,t,n)=>ZQ(e,typeof t!="symbol"?t+"":t,n);class QQ{constructor(t){sc(this,"name","polkadot"),sc(this,"client"),sc(this,"httpProviders"),sc(this,"events"),sc(this,"namespace"),sc(this,"chainId"),this.namespace=t.namespace,this.events=Ke("events"),this.client=Ke("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,n){this.httpProviders[t]||this.setHttpProvider(t,n),this.chainId=t,this.events.emit(Ur.DEFAULT_CHAIN_CHANGED,`${this.name}:${t}`)}getAccounts(){const t=this.namespace.accounts;return t?t.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(n=>{var r;const s=ca(n);t[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,n=this.httpProviders[t];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return n}setHttpProvider(t,n){const r=this.createHttpProvider(t,n);r&&(this.httpProviders[t]=r)}createHttpProvider(t,n){const r=n||hr(t,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${t}`);return new $r(new Wr(r,Ke("disableProviderPing")))}}var JQ=Object.defineProperty,eJ=Object.defineProperties,tJ=Object.getOwnPropertyDescriptors,oR=Object.getOwnPropertySymbols,nJ=Object.prototype.hasOwnProperty,rJ=Object.prototype.propertyIsEnumerable,_b=(e,t,n)=>t in e?JQ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,aR=(e,t)=>{for(var n in t||(t={}))nJ.call(t,n)&&_b(e,n,t[n]);if(oR)for(var n of oR(t))rJ.call(t,n)&&_b(e,n,t[n]);return e},cR=(e,t)=>eJ(e,tJ(t)),oc=(e,t,n)=>_b(e,typeof t!="symbol"?t+"":t,n);class iJ{constructor(t){oc(this,"name","eip155"),oc(this,"client"),oc(this,"chainId"),oc(this,"namespace"),oc(this,"httpProviders"),oc(this,"events"),this.namespace=t.namespace,this.events=Ke("events"),this.client=Ke("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(t){switch(t.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(t);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(t);case"wallet_getCallsStatus":return await this.getCallStatus(t)}return this.namespace.methods.includes(t.request.method)?await this.client.request(t):this.getHttpProvider().request(t.request)}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}setDefaultChain(t,n){this.httpProviders[t]||this.setHttpProvider(parseInt(t),n),this.chainId=parseInt(t),this.events.emit(Ur.DEFAULT_CHAIN_CHANGED,`${this.name}:${t}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}createHttpProvider(t,n){const r=n||hr(`${this.name}:${t}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${t}`);return new $r(new Wr(r,Ke("disableProviderPing")))}setHttpProvider(t,n){const r=this.createHttpProvider(t,n);r&&(this.httpProviders[t]=r)}createHttpProviders(){const t={};return this.namespace.chains.forEach(n=>{var r;const s=parseInt(ca(n));t[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),t}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}getHttpProvider(){const t=this.chainId,n=this.httpProviders[t];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return n}async handleSwitchChain(t){var n,r;let s=t.request.params?(n=t.request.params[0])==null?void 0:n.chainId:"0x0";s=s.startsWith("0x")?s:`0x${s}`;const a=parseInt(s,16);if(this.isChainApproved(a))this.setDefaultChain(`${a}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:t.topic,request:{method:t.request.method,params:[{chainId:s}]},chainId:(r=this.namespace.chains)==null?void 0:r[0]}),this.setDefaultChain(`${a}`);else throw new Error(`Failed to switch to chain 'eip155:${a}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(t){return this.namespace.chains.includes(`${this.name}:${t}`)}async getCapabilities(t){var n,r,s,a,c;const u=(r=(n=t.request)==null?void 0:n.params)==null?void 0:r[0],d=((a=(s=t.request)==null?void 0:s.params)==null?void 0:a[1])||[];if(!u)throw new Error("Missing address parameter in `wallet_getCapabilities` request");const h=this.client.session.get(t.topic),p=((c=h?.sessionProperties)==null?void 0:c.capabilities)||{},m=`${u}${d.join(",")}`,y=p?.[m];if(y)return y;let v;try{v=WQ(h,u,d)}catch(E){console.warn("Failed to extract capabilities from session",E)}if(v)return v;const w=await this.client.request(t);try{await this.client.session.update(t.topic,{sessionProperties:cR(aR({},h.sessionProperties||{}),{capabilities:cR(aR({},p||{}),{[m]:w})})})}catch(E){console.warn("Failed to update session with capabilities",E)}return w}async getCallStatus(t){var n,r;const s=this.client.session.get(t.topic),a=(n=s.sessionProperties)==null?void 0:n.bundler_name;if(a){const u=this.getBundlerUrl(t.chainId,a);try{return await this.getUserOperationReceipt(u,t)}catch(d){console.warn("Failed to fetch call status from bundler",d,u)}}const c=(r=s.sessionProperties)==null?void 0:r.bundler_url;if(c)try{return await this.getUserOperationReceipt(c,t)}catch(u){console.warn("Failed to fetch call status from custom bundler",u,c)}if(this.namespace.methods.includes(t.request.method))return await this.client.request(t);throw new Error("Fetching call status not approved by the wallet.")}async getUserOperationReceipt(t,n){var r;const s=new URL(t),a=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Ys("eth_getUserOperationReceipt",[(r=n.request.params)==null?void 0:r[0]]))});if(!a.ok)throw new Error(`Failed to fetch user operation receipt - ${a.status}`);return await a.json()}getBundlerUrl(t,n){return`${lQ}?projectId=${this.client.core.projectId}&chainId=${t}&bundler=${n}`}}var sJ=Object.defineProperty,oJ=(e,t,n)=>t in e?sJ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ac=(e,t,n)=>oJ(e,typeof t!="symbol"?t+"":t,n);class aJ{constructor(t){ac(this,"name","solana"),ac(this,"client"),ac(this,"httpProviders"),ac(this,"events"),ac(this,"namespace"),ac(this,"chainId"),this.namespace=t.namespace,this.events=Ke("events"),this.client=Ke("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,n){this.httpProviders[t]||this.setHttpProvider(t,n),this.chainId=t,this.events.emit(Ur.DEFAULT_CHAIN_CHANGED,`${this.name}:${t}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(n=>{var r;const s=ca(n);t[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,n=this.httpProviders[t];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return n}setHttpProvider(t,n){const r=this.createHttpProvider(t,n);r&&(this.httpProviders[t]=r)}createHttpProvider(t,n){const r=n||hr(t,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${t}`);return new $r(new Wr(r,Ke("disableProviderPing")))}}var cJ=Object.defineProperty,lJ=(e,t,n)=>t in e?cJ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,cc=(e,t,n)=>lJ(e,typeof t!="symbol"?t+"":t,n);class uJ{constructor(t){cc(this,"name","cosmos"),cc(this,"client"),cc(this,"httpProviders"),cc(this,"events"),cc(this,"namespace"),cc(this,"chainId"),this.namespace=t.namespace,this.events=Ke("events"),this.client=Ke("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,n){this.httpProviders[t]||this.setHttpProvider(t,n),this.chainId=t,this.events.emit(Ur.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(n=>{var r;const s=ca(n);t[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,n=this.httpProviders[t];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return n}setHttpProvider(t,n){const r=this.createHttpProvider(t,n);r&&(this.httpProviders[t]=r)}createHttpProvider(t,n){const r=n||hr(t,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${t}`);return new $r(new Wr(r,Ke("disableProviderPing")))}}var fJ=Object.defineProperty,dJ=(e,t,n)=>t in e?fJ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,lc=(e,t,n)=>dJ(e,typeof t!="symbol"?t+"":t,n);class hJ{constructor(t){lc(this,"name","algorand"),lc(this,"client"),lc(this,"httpProviders"),lc(this,"events"),lc(this,"namespace"),lc(this,"chainId"),this.namespace=t.namespace,this.events=Ke("events"),this.client=Ke("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,n){if(!this.httpProviders[t]){const r=n||hr(`${this.name}:${t}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${t}`);this.setHttpProvider(t,r)}this.chainId=t,this.events.emit(Ur.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(n=>{var r;t[n]=this.createHttpProvider(n,(r=this.namespace.rpcMap)==null?void 0:r[n])}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,n=this.httpProviders[t];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return n}setHttpProvider(t,n){const r=this.createHttpProvider(t,n);r&&(this.httpProviders[t]=r)}createHttpProvider(t,n){const r=n||hr(t,this.namespace,this.client.core.projectId);return typeof r>"u"?void 0:new $r(new Wr(r,Ke("disableProviderPing")))}}var pJ=Object.defineProperty,gJ=(e,t,n)=>t in e?pJ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,uc=(e,t,n)=>gJ(e,typeof t!="symbol"?t+"":t,n);class mJ{constructor(t){uc(this,"name","cip34"),uc(this,"client"),uc(this,"httpProviders"),uc(this,"events"),uc(this,"namespace"),uc(this,"chainId"),this.namespace=t.namespace,this.events=Ke("events"),this.client=Ke("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,n){this.httpProviders[t]||this.setHttpProvider(t,n),this.chainId=t,this.events.emit(Ur.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(n=>{const r=this.getCardanoRPCUrl(n),s=ca(n);t[s]=this.createHttpProvider(s,r)}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,n=this.httpProviders[t];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return n}getCardanoRPCUrl(t){const n=this.namespace.rpcMap;if(n)return n[t]}setHttpProvider(t,n){const r=this.createHttpProvider(t,n);r&&(this.httpProviders[t]=r)}createHttpProvider(t,n){const r=n||this.getCardanoRPCUrl(t);if(!r)throw new Error(`No RPC url provided for chainId: ${t}`);return new $r(new Wr(r,Ke("disableProviderPing")))}}var yJ=Object.defineProperty,bJ=(e,t,n)=>t in e?yJ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,fc=(e,t,n)=>bJ(e,typeof t!="symbol"?t+"":t,n);class wJ{constructor(t){fc(this,"name","elrond"),fc(this,"client"),fc(this,"httpProviders"),fc(this,"events"),fc(this,"namespace"),fc(this,"chainId"),this.namespace=t.namespace,this.events=Ke("events"),this.client=Ke("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,n){this.httpProviders[t]||this.setHttpProvider(t,n),this.chainId=t,this.events.emit(Ur.DEFAULT_CHAIN_CHANGED,`${this.name}:${t}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(n=>{var r;const s=ca(n);t[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,n=this.httpProviders[t];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return n}setHttpProvider(t,n){const r=this.createHttpProvider(t,n);r&&(this.httpProviders[t]=r)}createHttpProvider(t,n){const r=n||hr(t,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${t}`);return new $r(new Wr(r,Ke("disableProviderPing")))}}var vJ=Object.defineProperty,EJ=(e,t,n)=>t in e?vJ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,dc=(e,t,n)=>EJ(e,typeof t!="symbol"?t+"":t,n);class SJ{constructor(t){dc(this,"name","multiversx"),dc(this,"client"),dc(this,"httpProviders"),dc(this,"events"),dc(this,"namespace"),dc(this,"chainId"),this.namespace=t.namespace,this.events=Ke("events"),this.client=Ke("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,n){this.httpProviders[t]||this.setHttpProvider(t,n),this.chainId=t,this.events.emit(Ur.DEFAULT_CHAIN_CHANGED,`${this.name}:${t}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(n=>{var r;const s=ca(n);t[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,n=this.httpProviders[t];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return n}setHttpProvider(t,n){const r=this.createHttpProvider(t,n);r&&(this.httpProviders[t]=r)}createHttpProvider(t,n){const r=n||hr(t,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${t}`);return new $r(new Wr(r,Ke("disableProviderPing")))}}var _J=Object.defineProperty,AJ=(e,t,n)=>t in e?_J(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,hc=(e,t,n)=>AJ(e,typeof t!="symbol"?t+"":t,n);class xJ{constructor(t){hc(this,"name","near"),hc(this,"client"),hc(this,"httpProviders"),hc(this,"events"),hc(this,"namespace"),hc(this,"chainId"),this.namespace=t.namespace,this.events=Ke("events"),this.client=Ke("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,n){if(this.chainId=t,!this.httpProviders[t]){const r=n||hr(`${this.name}:${t}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${t}`);this.setHttpProvider(t,r)}this.events.emit(Ur.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const t=this.namespace.accounts;return t?t.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(n=>{var r;t[n]=this.createHttpProvider(n,(r=this.namespace.rpcMap)==null?void 0:r[n])}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,n=this.httpProviders[t];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return n}setHttpProvider(t,n){const r=this.createHttpProvider(t,n);r&&(this.httpProviders[t]=r)}createHttpProvider(t,n){const r=n||hr(t,this.namespace);return typeof r>"u"?void 0:new $r(new Wr(r,Ke("disableProviderPing")))}}var RJ=Object.defineProperty,OJ=(e,t,n)=>t in e?RJ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,pc=(e,t,n)=>OJ(e,typeof t!="symbol"?t+"":t,n);class TJ{constructor(t){pc(this,"name","tezos"),pc(this,"client"),pc(this,"httpProviders"),pc(this,"events"),pc(this,"namespace"),pc(this,"chainId"),this.namespace=t.namespace,this.events=Ke("events"),this.client=Ke("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,n){if(this.chainId=t,!this.httpProviders[t]){const r=n||hr(`${this.name}:${t}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${t}`);this.setHttpProvider(t,r)}this.events.emit(Ur.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const t=this.namespace.accounts;return t?t.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(n=>{t[n]=this.createHttpProvider(n)}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,n=this.httpProviders[t];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return n}setHttpProvider(t,n){const r=this.createHttpProvider(t,n);r&&(this.httpProviders[t]=r)}createHttpProvider(t,n){const r=n||hr(t,this.namespace);return typeof r>"u"?void 0:new $r(new Wr(r))}}var DJ=Object.defineProperty,IJ=(e,t,n)=>t in e?DJ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,gc=(e,t,n)=>IJ(e,typeof t!="symbol"?t+"":t,n);class CJ{constructor(t){gc(this,"name",Sc),gc(this,"client"),gc(this,"httpProviders"),gc(this,"events"),gc(this,"namespace"),gc(this,"chainId"),this.namespace=t.namespace,this.events=Ke("events"),this.client=Ke("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(t.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(t.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(t.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(t.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider(t.chainId).request(t.request)}setDefaultChain(t,n){this.httpProviders[t]||this.setHttpProvider(t,n),this.chainId=t,this.events.emit(Ur.DEFAULT_CHAIN_CHANGED,`${this.name}:${t}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){var t,n;const r={};return(n=(t=this.namespace)==null?void 0:t.accounts)==null||n.forEach(s=>{const a=Dc(s);r[`${a.namespace}:${a.reference}`]=this.createHttpProvider(s)}),r}getHttpProvider(t){const n=this.httpProviders[t];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return n}setHttpProvider(t,n){const r=this.createHttpProvider(t,n);r&&(this.httpProviders[t]=r)}createHttpProvider(t,n){const r=n||hr(t,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${t}`);return new $r(new Wr(r,Ke("disableProviderPing")))}}var NJ=Object.defineProperty,$J=Object.defineProperties,UJ=Object.getOwnPropertyDescriptors,lR=Object.getOwnPropertySymbols,BJ=Object.prototype.hasOwnProperty,PJ=Object.prototype.propertyIsEnumerable,Ab=(e,t,n)=>t in e?NJ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Yd=(e,t)=>{for(var n in t||(t={}))BJ.call(t,n)&&Ab(e,n,t[n]);if(lR)for(var n of lR(t))PJ.call(t,n)&&Ab(e,n,t[n]);return e},i0=(e,t)=>$J(e,UJ(t)),xr=(e,t,n)=>Ab(e,typeof t!="symbol"?t+"":t,n);class kw{constructor(t){xr(this,"client"),xr(this,"namespaces"),xr(this,"optionalNamespaces"),xr(this,"sessionProperties"),xr(this,"scopedProperties"),xr(this,"events",new zh),xr(this,"rpcProviders",{}),xr(this,"session"),xr(this,"providerOpts"),xr(this,"logger"),xr(this,"uri"),xr(this,"disableProviderPing",!1),this.providerOpts=t,this.logger=typeof t?.logger<"u"&&typeof t?.logger!="string"?t.logger:lf(gp({level:t?.logger||Gx})),this.disableProviderPing=t?.disableProviderPing||!1}static async init(t){const n=new kw(t);return await n.initialize(),n}async request(t,n,r){const[s,a]=this.validateChain(n);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(s).request({request:Yd({},t),chainId:`${s}:${a}`,topic:this.session.topic,expiry:r})}sendAsync(t,n,r,s){const a=new Date().getTime();this.request(t,r,s).then(c=>n(null,mp(a,c))).catch(c=>n(c,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties}),await this.requestAccounts()}async disconnect(){var t;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(t=this.session)==null?void 0:t.topic,reason:Et("USER_DISCONNECTED")}),await this.cleanup()}async connect(t){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(t),await this.cleanupPendingPairings(),!t.skipPairing)return await this.pair(t.pairingTopic)}async authenticate(t,n){if(!this.client)throw new Error("Sign Client not initialized");this.setNamespaces(t),await this.cleanupPendingPairings();const{uri:r,response:s}=await this.client.authenticate(t,n);r&&(this.uri=r,this.events.emit("display_uri",r));const a=await s();if(this.session=a.session,this.session){const c=eR(this.session.namespaces);this.namespaces=Kd(this.namespaces,c),await this.persist("namespaces",this.namespaces),this.onConnect()}return a}on(t,n){this.events.on(t,n)}once(t,n){this.events.once(t,n)}removeListener(t,n){this.events.removeListener(t,n)}off(t,n){this.events.off(t,n)}get isWalletConnect(){return!0}async pair(t){const{uri:n,approval:r}=await this.client.connect({pairingTopic:t,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties});n&&(this.uri=n,this.events.emit("display_uri",n));const s=await r();this.session=s;const a=eR(s.namespaces);return this.namespaces=Kd(this.namespaces,a),await this.persist("namespaces",this.namespaces),await this.persist("optionalNamespaces",this.optionalNamespaces),this.onConnect(),this.session}setDefaultChain(t,n){try{if(!this.session)return;const[r,s]=this.validateChain(t),a=this.getProvider(r);a.name===Sc?a.setDefaultChain(`${r}:${s}`,n):a.setDefaultChain(s,n)}catch(r){if(!/Please call connect/.test(r.message))throw r}}async cleanupPendingPairings(t={}){this.logger.info("Cleaning up inactive pairings...");const n=this.client.pairing.getAll();if(ts(n)){for(const r of n)t.deletePairings?this.client.core.expirer.set(r.topic,0):await this.client.core.relayer.subscriber.unsubscribe(r.topic);this.logger.info(`Inactive pairings cleared: ${n.length}`)}}abortPairingAttempt(){this.logger.warn("abortPairingAttempt is deprecated. This is now a no-op.")}async checkStorage(){this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.session&&this.createProviders()}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){var t,n;if(this.client=this.providerOpts.client||await XZ.init({core:this.providerOpts.core,logger:this.providerOpts.logger||Gx,relayUrl:this.providerOpts.relayUrl||oQ,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.providerOpts.session)try{this.session=this.client.session.get(this.providerOpts.session.topic)}catch(r){throw this.logger.error("Failed to get session",r),new Error(`The provided session: ${(n=(t=this.providerOpts)==null?void 0:t.session)==null?void 0:n.topic} doesn't exist in the Sign client`)}else{const r=this.client.session.getAll();this.session=r[0]}this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const t=[...new Set(Object.keys(this.session.namespaces).map(n=>Ac(n)))];n0("client",this.client),n0("events",this.events),n0("disableProviderPing",this.disableProviderPing),t.forEach(n=>{if(!this.session)return;const r=HQ(n,this.session),s=OI(r),a=Kd(this.namespaces,this.optionalNamespaces),c=i0(Yd({},a[n]),{accounts:r,chains:s});switch(n){case"eip155":this.rpcProviders[n]=new iJ({namespace:c});break;case"algorand":this.rpcProviders[n]=new hJ({namespace:c});break;case"solana":this.rpcProviders[n]=new aJ({namespace:c});break;case"cosmos":this.rpcProviders[n]=new uJ({namespace:c});break;case"polkadot":this.rpcProviders[n]=new QQ({namespace:c});break;case"cip34":this.rpcProviders[n]=new mJ({namespace:c});break;case"elrond":this.rpcProviders[n]=new wJ({namespace:c});break;case"multiversx":this.rpcProviders[n]=new SJ({namespace:c});break;case"near":this.rpcProviders[n]=new xJ({namespace:c});break;case"tezos":this.rpcProviders[n]=new TJ({namespace:c});break;default:this.rpcProviders[Sc]?this.rpcProviders[Sc].updateNamespace(c):this.rpcProviders[Sc]=new CJ({namespace:c})}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",t=>{var n;const{topic:r}=t;r===((n=this.session)==null?void 0:n.topic)&&this.events.emit("session_ping",t)}),this.client.on("session_event",t=>{var n;const{params:r,topic:s}=t;if(s!==((n=this.session)==null?void 0:n.topic))return;const{event:a}=r;if(a.name==="accountsChanged"){const c=a.data;c&&ts(c)&&this.events.emit("accountsChanged",c.map(Jx))}else if(a.name==="chainChanged"){const c=r.chainId,u=r.event.data,d=Ac(c),h=t0(c)!==t0(u)?`${d}:${t0(u)}`:c;this.onChainChanged(h)}else this.events.emit(a.name,a.data);this.events.emit("session_event",t)}),this.client.on("session_update",({topic:t,params:n})=>{var r,s;if(t!==((r=this.session)==null?void 0:r.topic))return;const{namespaces:a}=n,c=(s=this.client)==null?void 0:s.session.get(t);this.session=i0(Yd({},c),{namespaces:a}),this.onSessionUpdate(),this.events.emit("session_update",{topic:t,params:n})}),this.client.on("session_delete",async t=>{var n;t.topic===((n=this.session)==null?void 0:n.topic)&&(await this.cleanup(),this.events.emit("session_delete",t),this.events.emit("disconnect",i0(Yd({},Et("USER_DISCONNECTED")),{data:t.topic})))}),this.on(Ur.DEFAULT_CHAIN_CHANGED,t=>{this.onChainChanged(t,!0)})}getProvider(t){return this.rpcProviders[t]||this.rpcProviders[Sc]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(t=>{var n;this.getProvider(t).updateNamespace((n=this.session)==null?void 0:n.namespaces[t])})}setNamespaces(t){const{namespaces:n={},optionalNamespaces:r={},sessionProperties:s,scopedProperties:a}=t;this.optionalNamespaces=Kd(n,r),this.sessionProperties=s,this.scopedProperties=a}validateChain(t){const[n,r]=t?.split(":")||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[n,r];if(n&&!Object.keys(this.namespaces||{}).map(c=>Ac(c)).includes(n))throw new Error(`Namespace '${n}' is not configured. Please call connect() first with namespace config.`);if(n&&r)return[n,r];const s=Ac(Object.keys(this.namespaces)[0]),a=this.rpcProviders[s].getDefaultChain();return[s,a]}async requestAccounts(){const[t]=this.validateChain();return await this.getProvider(t).requestAccounts()}async onChainChanged(t,n=!1){if(!this.namespaces)return;const[r,s]=this.validateChain(t);if(!s)return;this.updateNamespaceChain(r,s),this.events.emit("chainChanged",s);const a=this.getProvider(r).getDefaultChain();n||this.getProvider(r).setDefaultChain(s),this.emitAccountsChangedOnChainChange({namespace:r,previousChainId:a,newChainId:t}),await this.persist("namespaces",this.namespaces)}emitAccountsChangedOnChainChange({namespace:t,previousChainId:n,newChainId:r}){var s,a;try{if(n===r)return;const c=(a=(s=this.session)==null?void 0:s.namespaces[t])==null?void 0:a.accounts;if(!c)return;const u=c.filter(d=>d.includes(`${r}:`)).map(Jx);if(!ts(u))return;this.events.emit("accountsChanged",u)}catch(c){this.logger.warn("Failed to emit accountsChanged on chain change",c)}}updateNamespaceChain(t,n){if(!this.namespaces)return;const r=this.namespaces[t]?t:`${t}:${n}`,s={chains:[],methods:[],events:[],defaultChain:n};this.namespaces[r]?this.namespaces[r]&&(this.namespaces[r].defaultChain=n):this.namespaces[r]=s}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,await this.deleteFromStore("namespaces"),await this.deleteFromStore("optionalNamespaces"),await this.deleteFromStore("sessionProperties"),this.session=void 0,await this.cleanupPendingPairings({deletePairings:!0}),await this.cleanupStorage()}async persist(t,n){var r;const s=((r=this.session)==null?void 0:r.topic)||"";await this.client.core.storage.setItem(`${Vd}/${t}${s}`,n)}async getFromStore(t){var n;const r=((n=this.session)==null?void 0:n.topic)||"";return await this.client.core.storage.getItem(`${Vd}/${t}${r}`)}async deleteFromStore(t){var n;const r=((n=this.session)==null?void 0:n.topic)||"";await this.client.core.storage.removeItem(`${Vd}/${t}${r}`)}async cleanupStorage(){var t;try{if(((t=this.client)==null?void 0:t.session.length)>0)return;const n=await this.client.core.storage.getKeys();for(const r of n)r.startsWith(Vd)&&await this.client.core.storage.removeItem(r)}catch(n){this.logger.warn("Failed to cleanup storage",n)}}}const kJ=kw;let hi=function(e){return e.FLOW_AUTHN="flow_authn",e.FLOW_PRE_AUTHZ="flow_pre_authz",e.FLOW_AUTHZ="flow_authz",e.FLOW_USER_SIGN="flow_user_sign",e}({}),DI=function(e){return e.SESSION_REQUEST="session_proposal",e.SIGNING_REQUEST="signing_request",e}({});const II="fcl-plugin-service-walletconnect",CI="WC/RPC",MJ="pre-authz";function LJ(){return typeof navigator<"u"&&/android/i.test(navigator.userAgent)}function jJ(){return typeof navigator<"u"&&/iPhone|iPod/.test(navigator.userAgent)}function zJ(){return typeof navigator<"u"&&/iPad/.test(navigator.userAgent)}function qJ(){return jJ()||zJ()}function Fu(){return LJ()||qJ()}function Mw(e){if(e.startsWith("http")){const t=document.createElement("a");t.href=e,t.target="_blank",t.rel="noreferrer noopener",t.click()}else window.open(e,"_blank")}function HJ(e){let{service:t,user:n}=e;return!(!Fu()||t.endpoint===hi.FLOW_AUTHN||t.endpoint===hi.FLOW_AUTHZ&&n?.services?.find(r=>r.method===CI&&r.type===MJ))}function FJ(e){if(!e)return;const t=new Image;t.src=e}async function NI(e){let{provider:t,existingPairing:n}=e;const r=await ta(),s={flow:{methods:[hi.FLOW_AUTHN,hi.FLOW_PRE_AUTHZ,hi.FLOW_AUTHZ,hi.FLOW_USER_SIGN],chains:[`flow:${r}`],events:["chainChanged","accountsChanged"]}};let a;const c=new Promise((d,h)=>{const p=m=>{d(m)};t.on("display_uri",p),a=()=>{t.removeListener("display_uri",p),h(new Error("WalletConnect Session Request aborted"))}}),u=t.connect({pairingTopic:n?.topic,namespaces:s}).finally(()=>{a()});return{uri:await c,approval:()=>u}}const $I=async e=>{let{method:t,body:n,session:r,provider:s,isExternal:a,abortSignal:c,disableNotifications:u}=e;const[d,h,p]=VJ(r),m=JSON.stringify({...n,addr:h,address:p}),y=await Promise.race([s.client.request({request:{method:t,params:[m]},chainId:d,topic:s.session?.topic}),new Promise((v,w)=>{c?.aborted&&w(new Error("WalletConnect Request aborted")),c?.addEventListener("abort",()=>{w(new Error("WalletConnect Request aborted"))})})]);if(!(typeof y!="object"||y==null))switch(y.status){case"APPROVED":let v=function(w){return w.method==="WC/RPC"?{...w,params:{...w.params,...a?{externalProvider:r.topic}:{},...u?{disableNotifications:u}:{}}}:w};if(t===hi.FLOW_AUTHN){const w=(y?.data?.services??[]).map(v);return{...y.data?y.data:{},services:w}}return t===hi.FLOW_PRE_AUTHZ?{...y.data,...y.data?.proposer?{proposer:v(y.data.proposer)}:{},payer:[...y.data?.payer?.map(v)],authorization:[...y.data?.authorization?.map(v)]}:y.data;case"DECLINED":throw new Error(`Declined: ${y.reason||"No reason supplied"}`);case"REDIRECT":return y.data;default:throw new Error("Declined: No reason supplied")}};function VJ(e){const[t,n,r]=Object.values(e.namespaces).map(c=>c.accounts).flat().filter(c=>c.startsWith("flow:"))[0].split(":");return[`${t}:${n}`,r,r]}var GJ='*,:after,:before{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgba(59,130,246,.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }::backdrop{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgba(59,130,246,.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }/*! tailwindcss v3.4.14 | MIT License | https://tailwindcss.com*/*,:after,:before{border:0 solid #e5e7eb;box-sizing:border-box}:after,:before{--tw-content:""}:host,html{-webkit-text-size-adjust:100%;font-feature-settings:normal;-webkit-tap-highlight-color:transparent;font-family:ui-sans-serif,system-ui,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;font-variation-settings:normal;line-height:1.5;-moz-tab-size:4;tab-size:4}body{line-height:inherit;margin:0}hr{border-top-width:1px;color:inherit;height:0}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,pre,samp{font-feature-settings:normal;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-size:1em;font-variation-settings:normal}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{border-collapse:collapse;border-color:inherit;text-indent:0}button,input,optgroup,select,textarea{font-feature-settings:inherit;color:inherit;font-family:inherit;font-size:100%;font-variation-settings:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;margin:0;padding:0}button,select{text-transform:none}button,input:where([type=button]),input:where([type=reset]),input:where([type=submit]){-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dd,dl,figure,h1,h2,h3,h4,h5,h6,hr,p,pre{margin:0}fieldset{margin:0}fieldset,legend{padding:0}menu,ol,ul{list-style:none;margin:0;padding:0}dialog{padding:0}textarea{resize:vertical}input::placeholder,textarea::placeholder{color:#9ca3af;opacity:1}[role=button],button{cursor:pointer}:disabled{cursor:default}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{height:auto;max-width:100%}[hidden]:where(:not([hidden=until-found])){display:none}.container{width:100%}@media (min-width:640px){.container{max-width:640px}}@media (min-width:768px){.container{max-width:768px}}@media (min-width:1024px){.container{max-width:1024px}}@media (min-width:1280px){.container{max-width:1280px}}@media (min-width:1536px){.container{max-width:1536px}}.sr-only{clip:rect(0,0,0,0);border-width:0;height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;white-space:nowrap;width:1px}.fixed{position:fixed}.bottom-3{bottom:.75rem}.left-3{left:.75rem}.right-3{right:.75rem}.z-\\[2147483647\\]{z-index:2147483647}.mx-auto{margin-left:auto;margin-right:auto}.ml-2{margin-left:.5rem}.ml-3{margin-left:.75rem}.mt-1{margin-top:.25rem}.flex{display:flex}.inline-flex{display:inline-flex}.h-10{height:2.5rem}.h-5{height:1.25rem}.w-10{width:2.5rem}.w-5{width:1.25rem}.max-w-sm{max-width:24rem}.grow{flex-grow:1}@keyframes slideUp{0%{transform:translateY(100%)}to{transform:translateY(0)}}.animate-slideUp{animation:slideUp .2s ease-out forwards}.self-start{align-self:flex-start}.self-center{align-self:center}.overflow-hidden{overflow:hidden}.rounded-full{border-radius:9999px}.rounded-lg{border-radius:.5rem}.rounded-md{border-radius:.375rem}.border{border-width:1px}.border-gray-200{--tw-border-opacity:1;border-color:rgb(229 231 235/var(--tw-border-opacity))}.border-transparent{border-color:transparent}.bg-transparent{background-color:transparent}.bg-white{--tw-bg-opacity:1;background-color:rgb(255 255 255/var(--tw-bg-opacity))}.p-0{padding:0}.p-2{padding:.5rem}.p-4{padding:1rem}.text-sm{font-size:.875rem;line-height:1.25rem}.font-medium{font-weight:500}.text-gray-400{--tw-text-opacity:1;color:rgb(156 163 175/var(--tw-text-opacity))}.text-gray-500{--tw-text-opacity:1;color:rgb(107 114 128/var(--tw-text-opacity))}.text-gray-900{--tw-text-opacity:1;color:rgb(17 24 39/var(--tw-text-opacity))}.shadow-lg{--tw-shadow:0 10px 15px -3px rgba(0,0,0,.1),0 4px 6px -4px rgba(0,0,0,.1);--tw-shadow-colored:0 10px 15px -3px var(--tw-shadow-color),0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.filter{filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.hover\\:text-gray-500:hover{--tw-text-opacity:1;color:rgb(107 114 128/var(--tw-text-opacity))}.focus\\:border-transparent:focus{border-color:transparent}.focus\\:ring-0:focus{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow,0 0 #0000)}.dark\\:border-gray-600:is(.dark *){--tw-border-opacity:1;border-color:rgb(75 85 99/var(--tw-border-opacity))}.dark\\:bg-gray-700:is(.dark *){--tw-bg-opacity:1;background-color:rgb(55 65 81/var(--tw-bg-opacity))}.dark\\:text-gray-100:is(.dark *){--tw-text-opacity:1;color:rgb(243 244 246/var(--tw-text-opacity))}.dark\\:text-gray-200:is(.dark *){--tw-text-opacity:1;color:rgb(229 231 235/var(--tw-text-opacity))}.dark\\:text-gray-300:is(.dark *){--tw-text-opacity:1;color:rgb(209 213 219/var(--tw-text-opacity))}.dark\\:hover\\:text-gray-300:hover:is(.dark *){--tw-text-opacity:1;color:rgb(209 213 219/var(--tw-text-opacity))}@media (min-width:768px){.md\\:bottom-4{bottom:1rem}.md\\:left-auto{left:auto}.md\\:right-4{right:1rem}.md\\:self-start{align-self:flex-start}}';function KJ(e){let{title:t,message:n,icon:r,onClick:s,onDismiss:a,animate:c}=e;return oi("div",{className:`fixed bottom-3 left-3 right-3 mx-auto z-[2147483647] flex max-w-sm
        overflow-hidden rounded-lg border border-gray-200 bg-white p-4 shadow-lg
        md:bottom-4 md:left-auto md:right-4 dark:bg-gray-700 dark:border-gray-600
        ${c?"animate-slideUp":""}`,role:"alert",onClick:u=>{s&&(u.stopPropagation(),s?.())},children:[r&&oi("img",{className:"h-10 w-10 self-center rounded-md md:self-start",src:r,alt:t}),oi("div",{className:"ml-3 grow",children:[oi("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:t}),oi("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-300",children:n})]}),oi("button",{className:`ml-2 inline-flex rounded-full text-gray-400 hover:text-gray-500 focus:ring-0
          dark:text-gray-200 dark:hover:text-gray-300 ${Fu()?"self-center p-2":"self-start p-0 bg-transparent border-transparent focus:border-transparent"}`,onClick:u=>{u.stopPropagation(),a?.()},children:[oi("span",{className:"sr-only",children:"Close"}),oi("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:oi("path",{fillRule:"evenodd",d:"M14.354 5.646a.5.5 0 00-.708 0L10 9.293 5.354 4.646a.5.5 0 00-.708.708L9.293 10l-4.647 4.646a.5.5 0 00.708.708L10 10.707l4.646 4.647a.5.5 0 00.708-.708L10.707 10l4.647-4.646a.5.5 0 000-.708z"})})]})]})}let fu=null,YJ=0,mc=null;function WJ(){const e=document.createElement("div"),t=e.attachShadow({mode:"open"}),n=document.createElement("div");t.appendChild(n),document.body.appendChild(e);const r=document.createElement("style");r.textContent=GJ,t.appendChild(r);const s=window.matchMedia("(prefers-color-scheme: dark)"),a=()=>{n.classList.toggle("dark",s.matches)};return s.addEventListener("change",a),a(),n}function XJ(e){let{title:t,message:n,icon:r,onClick:s,onDismiss:a,debounceDelay:c=0}=e;fu||(fu=WJ());const u=!mc;mc&&(clearTimeout(mc),mc=null),FA(oi(KJ,{title:t,message:n,icon:r,onClick:s,onDismiss:()=>{a?.(),d()},animate:u},YJ++),fu);function d(){fu&&FA(null,fu)}return{dismiss:()=>{mc=setTimeout(()=>{mc=null,d()},c)}}}var ZJ="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 384 512'%3e%3c!--!Font Awesome Free 6.7.1 by %40fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons%2c Inc.--%3e%3cpath d='M16 64C16 28.7 44.7 0 80 0L304 0c35.3 0 64 28.7 64 64l0 384c0 35.3-28.7 64-64 64L80 512c-35.3 0-64-28.7-64-64L16 64zM224 448a32 32 0 1 0 -64 0 32 32 0 1 0 64 0zM304 64L80 64l0 320 224 0 0-320z'/%3e%3c/svg%3e";function QJ(e){const t=new Set;let n=e;return{subscribe:c=>(t.add(c),()=>{t.delete(c)}),setState:c=>{n=c,t.forEach(u=>u(n))},getState:()=>n}}let Wd=QJ({});const JJ=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{wcRequestHook:null,pairingModalOverride:null,disableNotifications:!1};return{name:II,f_type:"ServicePlugin",type:"discovery-service",serviceStrategy:{method:CI,exec:eee(e,t,IT(()=>import("./index-SKZGLYYO.js").then(n=>n.i),[]).then(n=>n.WalletConnectModal))},services:[]}},eee=(e,t,n)=>async r=>{let{service:s,body:a,opts:c,abortSignal:u,user:d}=r;FJ(s.provider?.icon);const{wcRequestHook:h,pairingModalOverride:p,disableNotifications:m}=t,y=s.params?.disableNotifications??m,v=await ree({provider:e,externalProviderOrTopic:s.params?.externalProvider});fe(!!v,"WalletConnect is not initialized");const{provider:w,isExternal:E}=v;let S=w.session??null,A;const I=s.endpoint,D=N(s);if(S?.topic&&S?.topic===s.params?.externalProvider&&I===hi.FLOW_AUTHN)return d;S==null&&(S=await new Promise((q,H)=>{function k(){H("Declined: Externally Halted")}tee(n)({service:s,onClose:k,appLink:D,provider:w,method:I,pairing:A,wcRequestHook:h,pairingModalOverride:p,abortSignal:u}).then(q,H)})),h&&h instanceof Function&&h({type:DI.SIGNING_REQUEST,method:I,service:s,session:S??null,pairing:null,uri:null}),HJ({service:s,user:d})&&Mw(D);const B=S?.sessionProperties?.["fclWc.disableNotificationsOnMobile"]==="true",$=!y&&!B?nee({user:d,service:s}):null;return await $I({method:I,body:a,session:S,provider:w,abortSignal:u,isExternal:E,disableNotifications:s.params?.disableNotifications}).finally(()=>$?.dismiss());function N(q){let{uid:H}=q;return H&&/^(ftp|http|https):\/\/[^ "]+$/.test(H)||qe({title:"WalletConnect Service Warning",message:`service.uid should be a valid universal link url. Found: ${H}`,level:dt.warn}),H}};function tee(e){return async t=>{let{service:n,onClose:r,appLink:s,provider:a,method:c,pairing:u,wcRequestHook:d,pairingModalOverride:h,abortSignal:p}=t;const m=a.providerOpts.projectId;fe(!!m,"Cannot establish connection, WalletConnect projectId is undefined");let y=null,v=null;try{const{uri:w,approval:E}=await NI({provider:a,existingPairing:u});if(d&&d instanceof Function&&d({type:DI.SESSION_REQUEST,method:c,service:n,session:null,pairing:u??null,uri:w??null}),Fu()){const A=new URLSearchParams({uri:w}).toString();let I=u==null?s+"?"+A:s;Mw(I)}else if(!u)if(h)h(w,r);else{v=new(await e)({projectId:m}),v.openModal({uri:w,onClose:r});const A=v.subscribeModal(I=>{I.open===!1&&(r?.(),A())})}const S=await Promise.race([E(),new Promise((A,I)=>{p?.aborted&&I(new Error("Session request aborted")),p?.addEventListener("abort",()=>{I(new Error("Session request aborted"))})})]);if(S==null)throw new Error("Session request failed");return S}catch(w){throw w instanceof Error&&qe({title:`${w.name} Error establishing WalletConnect session`,message:`
          ${w.message}
          uri: ${y}
        `,level:dt.error}),r(),w}finally{v?.closeModal()}}}function nee(e){let{service:t,user:n}=e;const s=n?.services?.find(a=>a.type==="authn")?.provider||t.provider;return XJ({title:s?.name||"Mobile Wallet",message:Fu()?"Tap to view request in app":"Pending request on your mobile device",icon:s?.icon||ZJ,onClick:Fu()&&t.uid?()=>Mw(t.uid):void 0,debounceDelay:t.type==="pre-authz"?500:0})}async function ree(e){let{provider:t,externalProviderOrTopic:n}=e;if(!n){const a=await t;return a?{provider:a,isExternal:!1}:null}if(typeof n!="string"){const a=n.session?.topic;if(!a)throw new Error("Cannot resolve provider: UniversalProvider is not initialized");return Wd.setState({[a]:n}),{provider:n,isExternal:!0}}const r=n;if(r){let a=Wd.getState()[r];if(!a){let c,u;a=await new Promise((d,h)=>{c=Wd.subscribe(()=>{const p=Wd.getState()[r];p&&d(p)}),u=setTimeout(()=>{h(new Error(`Provider for external topic ${r} not found after 5 seconds`))},5e3)}).finally(()=>{clearTimeout(u),c()})}return{provider:a,isExternal:!0}}const s=await t;return s?{provider:s,isExternal:!1}:null}const iee="wss://relay.walletconnect.com",see="debug";let bu=Promise.resolve(null);const oee=async e=>{let{projectId:t,metadata:n}=e;fe(t!=null,"FCL Wallet Connect Error: WalletConnect projectId is required");try{return kJ.init({logger:see,relayUrl:iee,projectId:t,metadata:n})}catch(r){throw r instanceof Error&&qe({title:`${r.name} fcl-wc Init Client`,message:r.message,level:dt.error}),r}},UI=e=>{const{FclWcServicePlugin:t,providerPromise:n}=cee(e);return ST.authn.update(),{FclWcServicePlugin:t,providerPromise:n}},aee=async e=>{const{FclWcServicePlugin:t,providerPromise:n}=UI(e),r=await n;return ST.authn.update(),{FclWcServicePlugin:t,client:r}},cee=e=>{if(typeof window>"u")throw new Error("FCL Wallet Connect Plugin can only be initialized in the browser");return bu=bu.catch(()=>null).then(n=>n||oee({projectId:e.projectId,metadata:e.metadata})).catch(n=>{throw qe({title:"WalletConnect Client Initialization Error",message:n.message?n.message:n,level:dt.error}),n}),{FclWcServicePlugin:JJ(bu,e),providerPromise:bu}};async function BI(){return bu.then(e=>{if(!e)throw new Error("WalletConnect client not initialized");return e})}const PI="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",lee=PI.length;function Lw(){let e="",t=32;for(;t--;)e+=PI[Math.random()*lee|0];return e}const uee=globalThis.AbortController||require("abort-controller");function fee(e){const t=new uee;return e?.aborted&&t.abort(),e?.addEventListener("abort",()=>t.abort()),t}let s0=function(e){return e.NOTIFY_QRCODE_CONNECTING="notifyQrCodeConnecting",e.NOTIFY_QRCODE_CONNECTED="notifyQrCodeConnected",e.NOTIFY_QRCODE_ERROR="notifyQrCodeError",e}({}),uR=function(e){return e.REQUEST_WALLETCONNECT_QRCODE="requestWalletConnectQrCode",e.EXEC_SERVICE="execService",e}({});const fR="APPROVED",dee=e=>{let{onExecResult:t,execStrategyOpts:n,execStrategyArgs:r,abortSignal:s}=e;return async a=>{let{service:c}=a;try{const u=await Zh({...n,service:c,config:n.config,abortSignal:s},...r.slice(1));if((bi(u)?.status||fR)===fR)return t(u),null;throw new Error(u?.reason||"Service was declined")}catch(u){throw new Error(u?.message||"Service execution failed")}}},hee=e=>{let{rpc:t,onExecResult:n,authnBody:r,abortSignal:s}=e;const a=pee({rpc:t,authnBody:r});return async c=>{if(s.aborted)throw new Error("Handler has been terminated");const u=await BI(),{uri:d,approval:h}=await NI({provider:u});return a({uri:d,approval:h,onExecResult:n}),{uri:d}}};function pee(e){let{rpc:t,authnBody:n}=e;return r=>{let{uri:s,approval:a,onExecResult:c}=r;setTimeout(async()=>{try{const u=await BI(),d=await a();t.notify(s0.NOTIFY_QRCODE_CONNECTING,{uri:s});const h=await $I({method:hi.FLOW_AUTHN,body:n,session:d,provider:u});t.notify(s0.NOTIFY_QRCODE_CONNECTED,{uri:s}),c(h)}catch(u){t.notify(s0.NOTIFY_QRCODE_ERROR,{uri:s,error:u?.message})}},0)}}function gee(e){let{onExecResult:t,body:n,opts:r,args:s,abortSignal:a}=e;const c=new ak({notifications:[]});return c.on(uR.REQUEST_WALLETCONNECT_QRCODE,hee({rpc:c,onExecResult:t,authnBody:n,abortSignal:a})),c.on(uR.EXEC_SERVICE,dee({onExecResult:t,execStrategyOpts:r,execStrategyArgs:s,abortSignal:a})),{connect:c.connect.bind(c),receive:c.receive.bind(c)}}async function mee(e){let{customRpc:t,opts:n,args:r,abortSignal:s}=e;const a={...n.config,client:{...n.config.client,discoveryRpcEnabled:!0}};return Zh({...n,config:a,customRpc:t,abortSignal:s},...r.slice(1))}const dR="authn";async function yee(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const[r]=t,{body:s,abortSignal:a,service:c}=r;if(c?.type!==dR)return console.error(`ERROR: Invalid service type for FCL Discovery execStrategyHook, expected "${dR}" but got "${c?.type}"`),Zh(...t);const u=fee(a);let d;const h=new Promise(async(p,m)=>{const y=gee({onExecResult:p,body:s,opts:r,args:t,abortSignal:u.signal});d=mee({customRpc:y,opts:r,args:t,abortSignal:u.signal}).then(p,m)});return await h.catch(()=>{}),await Promise.race([new Promise(p=>setTimeout(p,1e3)),d]).catch(()=>{}),u.abort(),h}const Xd="FCL_IFRAME",bee=`
  position:fixed;
  top: 0px;
  right: 0px;
  bottom: 0px;
  left: 0px;
  height: 100%;
  width: 100vw;
  display:block;
  background:rgba(0,0,0,0.25);
  z-index: 2147483647;
  box-sizing: border-box;
  color-scheme: light;
`;function kI(e){fe(!document.getElementById(Xd),"Attempt at triggering multiple Frames",{src:e});const t=document.createElement("iframe");t.src=e,t.id=Xd,t.allow="usb *; hid *; clipboard-write",t.frameBorder="0",t.style.cssText=bee,document.body.append(t);const n=()=>{document.getElementById(Xd)&&document.getElementById(Xd).remove()};return[t.contentWindow,n]}const wee="FCL_POP";let qr=null,hR=null;function vee(e,t,n,r,s){const a=n.top.outerHeight/2+n.top.screenY-s/2,c=n.top.outerWidth/2+n.top.screenX-r/2,u=n.open(e,t,`toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width=${r}, height=${s}, top=${a}, left=${c}`);if(!u)throw new Error("Popup failed to open (was it blocked by a popup blocker?)");return u}function MI(e){return qr==null||qr?.closed?qr=vee(e,wee,window,640,770):(hR!==e&&qr.location.replace(e),qr.focus()),hR=e,[qr,()=>{qr&&!qr.closed&&qr.close(),qr=null}]}let Rr=null,pR=null;function LI(e){if(Rr==null||Rr?.closed){if(Rr=window.open(e,"_blank"),!Rr)throw new Error("Tab failed to open (was it blocked by the browser?)")}else pR!==e&&Rr.location.replace(e),Rr.focus();return pR=e,[Rr,()=>{Rr&&!Rr.closed&&Rr.close(),Rr=null}]}const Eee=()=>({"discovery.wallet.method.default":"IFRAME/RPC"}),Ro=()=>{};function See(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null)return{send:Ro,close:Ro};const n=t.onClose||Ro,r=t.onMessage||Ro,s=t.onReady||Ro,a=t.onResponse||Ro,c=t.onCustomRpc||Ro;let u,d;const h=Jh({close:p,send:m,onReady:s,onResponse:a,onMessage:r,onCustomRpc:c,getSource:()=>u});return window.addEventListener("message",h),[u,d]=kI(Qu(e)),{send:m,close:p};function p(){try{window.removeEventListener("message",h),d(),n()}catch(y){console.error("Frame Close Error",y)}}function m(y){try{u.postMessage(JSON.parse(JSON.stringify(y||{})),"*")}catch(v){console.error("Frame Send Error",y,v)}}}const Zo="1.19.0";function _ee(e){let{service:t,body:n,config:r,customRpc:s,abortSignal:a,opts:c}=e;return new Promise((u,d)=>{const h=Lw(),p=c.includeOlderJsonRpcCall,{close:m}=See(t,{async onReady(y,v){let{send:w}=v;try{w({type:"FCL:VIEW:READY:RESPONSE",fclVersion:Zo,body:n,service:{params:t.params,data:t.data,type:t.type},config:r}),w({fclVersion:Zo,type:"FCL:FRAME:READY:RESPONSE",body:n,service:{params:t.params,data:t.data,type:t.type},config:r,deprecated:{message:"FCL:FRAME:READY:RESPONSE is deprecated and replaced with type: FCL:VIEW:READY:RESPONSE"}}),p&&w({jsonrpc:"2.0",id:h,method:"fcl:sign",params:[n,t.params],deprecated:{message:"jsonrpc is deprecated and replaced with type: FCL:VIEW:READY:RESPONSE"}}),s?.connect({send:E=>{w({type:"FCL:VIEW:CUSTOM_RPC",payload:E})}})}catch(E){throw E}},onResponse(y,v){let{close:w}=v;try{if(typeof y.data!="object")return;const E=bi(y.data);switch(E.status){case"APPROVED":u(E.data),w();break;case"DECLINED":d(`Declined: ${E.reason||"No reason supplied"}`),w();break;case"REDIRECT":u(E),w();break;default:d("Declined: No reason supplied"),w();break}}catch(E){throw console.error("execIframeRPC onResponse error",E),E}},onMessage(y,v){let{close:w}=v;try{if(typeof y.data!="object"||y.data.jsonrpc!=="2.0"||y.data.id!==h)return;const E=bi(y.data.result);switch(E.status){case"APPROVED":u(E.data),w();break;case"DECLINED":d(`Declined: ${E.reason||"No reason supplied"}`),w();break;case"REDIRECT":u(E),w();break;default:d("Declined: No reason supplied"),w();break}}catch(E){throw console.error("execIframeRPC onMessage error",E),E}},onClose(){d("Declined: Externally Halted")},onCustomRpc(y){s?.receive(y)}});a&&(a.aborted&&(d("Declined: Aborted"),m()),a.addEventListener("abort",()=>{d("Declined: Aborted"),m()}))})}const Oo=()=>{};function Aee(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null)return{send:Oo,close:Oo};const n=t.onClose||Oo,r=t.onMessage||Oo,s=t.onReady||Oo,a=t.onResponse||Oo,c=t.onCustomRpc||Oo;let u,d;const h=Jh({close:m,send:y,onReady:s,onResponse:a,onMessage:r,onCustomRpc:c,getSource:()=>u});window.addEventListener("message",h),[u,d]=MI(Qu(e));const p=setInterval(function(){u&&u.closed&&m()},500);return{send:y,close:m};function m(){try{window.removeEventListener("message",h),clearInterval(p),d(),n()}catch(v){console.error("Popup Close Error",v)}}function y(v){try{u.postMessage(JSON.parse(JSON.stringify(v||{})),"*")}catch(w){console.error("Popup Send Error",v,w)}}}function xee(e){let{service:t,body:n,config:r,abortSignal:s,customRpc:a,opts:c}=e;return new Promise((u,d)=>{const h=Lw(),{redir:p,includeOlderJsonRpcCall:m}=c,{close:y}=Aee(t,{customRpc:a,async onReady(v,w){let{send:E}=w;try{E({fclVersion:Zo,type:"FCL:VIEW:READY:RESPONSE",body:n,service:{params:t.params,data:t.data,type:t.type},config:r}),E({fclVersion:Zo,type:"FCL:FRAME:READY:RESPONSE",body:n,service:{params:t.params,data:t.data,type:t.type},config:r,deprecated:{message:"FCL:FRAME:READY:RESPONSE is deprecated and replaced with type: FCL:VIEW:READY:RESPONSE"}}),m&&E({jsonrpc:"2.0",id:h,method:"fcl:sign",params:[n,t.params]}),a?.connect({send:S=>{E({type:"FCL:VIEW:CUSTOM_RPC",payload:S})}})}catch(S){throw S}},onResponse(v,w){let{close:E}=w;try{if(typeof v.data!="object")return;const S=bi(v.data);switch(S.status){case"APPROVED":u(S.data),!p&&E();break;case"DECLINED":d(`Declined: ${S.reason||"No reason supplied"}`),E();break;case"REDIRECT":u(S),E();break;default:d("Declined: No reason supplied"),E();break}}catch(S){throw console.error("execPopRPC onResponse error",S),S}},onMessage(v,w){let{close:E}=w;try{if(typeof v.data!="object"||v.data.jsonrpc!=="2.0"||v.data.id!==h)return;const S=bi(v.data.result);switch(S.status){case"APPROVED":u(S.data),!p&&E();break;case"DECLINED":d(`Declined: ${S.reason||"No reason supplied"}`),E();break;case"REDIRECT":u(S),E();break;default:d("Declined: No reason supplied"),E();break}}catch(S){throw console.error("execPopRPC onMessage error",S),S}},onClose(){d("Declined: Externally Halted")},onCustomRpc(v){a?.receive(v)}});s&&(s.aborted&&(d("Declined: Aborted"),y()),s.addEventListener("abort",()=>{d("Declined: Aborted"),y()}))})}const To=()=>{};function Ree(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null)return{send:To,close:To};const n=t.onClose||To,r=t.onMessage||To,s=t.onReady||To,a=t.onResponse||To,c=t.onCustomRpc||To;let u,d;const h=Jh({close:m,send:y,onReady:s,onResponse:a,onMessage:r,onCustomRpc:c,getSource:()=>u});window.addEventListener("message",h),[u,d]=LI(Qu(e));const p=setInterval(function(){u&&u.closed&&m()},500);return{send:y,close:m};function m(){try{window.removeEventListener("message",h),clearInterval(p),d(),n()}catch(v){console.error("Tab Close Error",v)}}function y(v){try{u.postMessage(JSON.parse(JSON.stringify(v||{})),"*")}catch(w){console.error("Tab Send Error",v,w)}}}function Oee(e){let{service:t,body:n,config:r,abortSignal:s,customRpc:a,opts:c}=e;return new Promise((u,d)=>{const h=Lw(),{redir:p,includeOlderJsonRpcCall:m}=c,{close:y}=Ree(t,{customRpc:a,async onReady(v,w){let{send:E}=w;try{E({fclVersion:Zo,type:"FCL:VIEW:READY:RESPONSE",body:n,service:{params:t.params,data:t.data,type:t.type},config:r}),E({fclVersion:Zo,type:"FCL:FRAME:READY:RESPONSE",body:n,service:{params:t.params,data:t.data,type:t.type},config:r,deprecated:{message:"FCL:FRAME:READY:RESPONSE is deprecated and replaced with type: FCL:VIEW:READY:RESPONSE"}}),m&&E({jsonrpc:"2.0",id:h,method:"fcl:sign",params:[n,t.params]}),a?.connect({send:S=>{E({type:"FCL:VIEW:CUSTOM_RPC",payload:S})}})}catch(S){throw S}},onResponse(v,w){let{close:E}=w;try{if(typeof v.data!="object")return;const S=bi(v.data);switch(S.status){case"APPROVED":u(S.data),!p&&E();break;case"DECLINED":d(`Declined: ${S.reason||"No reason supplied"}`),E();break;case"REDIRECT":u(S),E();break;default:d("Declined: No reason supplied"),E();break}}catch(S){throw console.error("execPopRPC onResponse error",S),S}},onMessage(v,w){let{close:E}=w;try{if(typeof v.data!="object"||v.data.jsonrpc!=="2.0"||v.data.id!==h)return;const S=bi(v.data.result);switch(S.status){case"APPROVED":u(S.data),!p&&E();break;case"DECLINED":d(`Declined: ${S.reason||"No reason supplied"}`),E();break;case"REDIRECT":u(S),E();break;default:d("Declined: No reason supplied"),E();break}}catch(S){throw console.error("execPopRPC onMessage error",S),S}},onClose(){d("Declined: Externally Halted")},onCustomRpc(v){a?.receive(v)}});s&&(s.aborted&&(y(),d("Declined: Aborted")),s.addEventListener("abort",()=>{y(),d("Declined: Aborted")}))})}const Do=()=>{};function Tee(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null)return{send:Do,close:Do};const n=t.onClose||Do,r=t.onMessage||Do,s=t.onReady||Do,a=t.onResponse||Do,c=t.onCustomRpc||Do,u=Jh({close:d,send:h,onReady:s,onResponse:a,onMessage:r,onCustomRpc:c});return window.addEventListener("message",u),h({service:e}),{send:h,close:d};function d(){try{window.removeEventListener("message",u),n()}catch(p){console.error("Ext Close Error",p)}}function h(p){try{window&&window.postMessage(JSON.parse(JSON.stringify(p||{})),"*")}catch(m){console.error("Ext Send Error",p,m)}}}function Dee(e){let{service:t,body:n,config:r,abortSignal:s,customRpc:a,opts:c}=e;return new Promise((u,d)=>{const{close:h}=Tee(t,{async onReady(p,m){let{send:y}=m;try{y({fclVersion:Zo,type:"FCL:VIEW:READY:RESPONSE",body:n,service:{params:t.params,data:t.data,type:t.type},config:r}),a?.connect({send:v=>{y({type:"FCL:VIEW:CUSTOM_RPC",body:v})}})}catch(v){throw v}},onResponse(p,m){let{close:y}=m;try{if(typeof p.data!="object")return;const v=bi(p.data);switch(v.status){case"APPROVED":u(v.data),y();break;case"DECLINED":d(`Declined: ${v.reason||"No reason supplied"}`),y();break;case"REDIRECT":u(v),y();break;default:d("Declined: No reason supplied"),y();break}}catch(v){throw console.error("execExtRPC onResponse error",v),v}},onClose(){d("Declined: Externally Halted")},onCustomRpc(p){a?.receive(p)}});s&&(s.aborted&&(h(),d("Declined: Aborted")),s.addEventListener("abort",()=>{h(),d("Declined: Aborted")}))})}const gR=()=>{throw new Error("Strategy util has not been implemented on this platform")},Iee={"VIEW/IFRAME":kI,"VIEW/POP":MI,"VIEW/TAB":LI,"VIEW/MOBILE_BROWSER":gR,"VIEW/DEEPLINK":gR};async function mR(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{serviceEndpoint:()=>{}};const{serviceEndpoint:n}=t;try{return Iee[e.method](n(e),t)}catch(r){throw console.error("execLocal({service, opts = {}})",r,{service:e,opts:t}),r}}const Cee={[fr["HTTP/RPC"]]:KS(mR),[fr["HTTP/POST"]]:KS(mR),[fr["IFRAME/RPC"]]:_ee,[fr["POP/RPC"]]:xee,[fr["TAB/RPC"]]:Oee,[fr["EXT/RPC"]]:Dee},Nee=()=>typeof window>"u",$ee=e=>{if(e==null)return null;try{return JSON.parse(e)}catch{return null}},Uee={can:!Nee()&&!!window.localStorage,get:async e=>$ee(localStorage.getItem(e)),put:async(e,t)=>localStorage.setItem(e,JSON.stringify(t))},Bee=typeof window>"u",Pee=e=>{const t=e["app.detail.title"],n=e["app.detail.icon"],r=e["app.detail.description"],s=e["app.detail.url"];return{name:t??document.title,description:r??"",url:s??window.location.origin,icons:n?[n]:[]}};function kee(){if(Bee)return;let e=null,t=!1;Ae.subscribe(async n=>{const r={"walletconnect.projectId":n["walletconnect.projectId"],"walletconnect.disableNotifications":n["walletconnect.disableNotifications"],"app.detail.title":n["app.detail.title"],"app.detail.icon":n["app.detail.icon"],"app.detail.description":n["app.detail.description"],"app.detail.url":n["app.detail.url"]},s=r["walletconnect.projectId"],a=r["walletconnect.disableNotifications"],c=e;if(e=JSON.stringify(r,null,2),t){c!==e&&console.warn(`FCL WalletConnect Plugin has been already loaded with different configuration. It is not possible to change the configuration after the plugin has been loaded.

Previous configuration:
${c}

Current configuration:
${e}`);return}if(!!!s)return;if(fe(!!s,"FCL Configuration value for 'walletconnect.projectId' is required"),x0.getPlugins().has(II)){t||console.warn("It seems like the FCL WalletConnect plugins has been already loaded manually. This is no longer necessary, please see the documentation for more information."),t=!0;return}t=!0;const{FclWcServicePlugin:d}=UI({projectId:s,metadata:Pee(r),disableNotifications:a});x0.add([d])})}const Mee={execStrategy:yee},Qi=TT({platform:"web",discovery:Mee,getStorageProvider:async()=>await Ae.get("fcl.storage")||Uee}),Lee=rk(Qi),jee=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Qi().authenticate(e)},zee=()=>Qi().unauthenticate();Qi().authorization;Ae(Eee());vT({coreStrategies:Cee});kee();const qee="56fce212e878d76623e53be15ab998c5";Ae().put("app.detail.title","MVP on Flow").put("app.detail.icon","https://mvponflow.cc/favicon.png").put("accessNode.api","https://rest-mainnet.onflow.org").put("discovery.wallet","https://fcl-discovery.onflow.org/authn").put("flow.network","mainnet").put("discovery.authn.include",["0x33f75ff0b830dcec"]).put("discovery.authn.exclude",["0x95b85a9ef4daabb1","0x55ad22f01ef568a1"]);aee({projectId:qee,metadata:{name:"MVP on Flow",description:"Fan-powered Jokic project",url:"https://mvponflow.cc",icons:["https://mvponflow.cc/favicon.png"]}}).then(({FclWcServicePlugin:e})=>{x0.add(e)});var o0={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var yR;function Hee(){return yR||(yR=1,function(e){(function(){var t={}.hasOwnProperty;function n(){for(var a="",c=0;c<arguments.length;c++){var u=arguments[c];u&&(a=s(a,r(u)))}return a}function r(a){if(typeof a=="string"||typeof a=="number")return a;if(typeof a!="object")return"";if(Array.isArray(a))return n.apply(null,a);if(a.toString!==Object.prototype.toString&&!a.toString.toString().includes("[native code]"))return a.toString();var c="";for(var u in a)t.call(a,u)&&a[u]&&(c=s(c,u));return c}function s(a,c){return c?a?a+" "+c:a+c:a}e.exports?(n.default=n,e.exports=n):window.classNames=n})()}(o0)),o0.exports}var Fee=Hee();const sn=Qs(Fee);function xb(){return xb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xb.apply(null,arguments)}function jI(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function bR(e){return"default"+e.charAt(0).toUpperCase()+e.substr(1)}function Vee(e){var t=Gee(e,"string");return typeof t=="symbol"?t:String(t)}function Gee(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Kee(e,t,n){var r=z.useRef(e!==void 0),s=z.useState(t),a=s[0],c=s[1],u=e!==void 0,d=r.current;return r.current=u,!u&&d&&a!==t&&c(t),[u?e:a,z.useCallback(function(h){for(var p=arguments.length,m=new Array(p>1?p-1:0),y=1;y<p;y++)m[y-1]=arguments[y];n&&n.apply(void 0,[h].concat(m)),c(h)},[n])]}function zI(e,t){return Object.keys(t).reduce(function(n,r){var s,a=n,c=a[bR(r)],u=a[r],d=jI(a,[bR(r),r].map(Vee)),h=t[r],p=Kee(u,c,e[h]),m=p[0],y=p[1];return xb({},d,(s={},s[r]=m,s[h]=y,s))},e)}function Rb(e,t){return Rb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},Rb(e,t)}function Yee(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Rb(e,t)}const Wee=["xxl","xl","lg","md","sm","xs"],Xee="xs",qI=z.createContext({prefixes:{},breakpoints:Wee,minBreakpoint:Xee}),{Consumer:Tre,Provider:Dre}=qI;function Zn(e,t){const{prefixes:n}=z.useContext(qI);return e||n[t]||t}function jw(e){return e&&e.ownerDocument||document}function Zee(e){var t=jw(e);return t&&t.defaultView||window}function Qee(e,t){return Zee(e).getComputedStyle(e,t)}var Jee=/([A-Z])/g;function ete(e){return e.replace(Jee,"-$1").toLowerCase()}var tte=/^ms-/;function Zd(e){return ete(e).replace(tte,"-ms-")}var nte=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function rte(e){return!!(e&&nte.test(e))}function ns(e,t){var n="",r="";if(typeof t=="string")return e.style.getPropertyValue(Zd(t))||Qee(e).getPropertyValue(Zd(t));Object.keys(t).forEach(function(s){var a=t[s];!a&&a!==0?e.style.removeProperty(Zd(s)):rte(s)?r+=s+"("+a+") ":n+=Zd(s)+": "+a+";"}),r&&(n+="transform: "+r+";"),e.style.cssText+=";"+n}var a0={exports:{}},c0,wR;function ite(){if(wR)return c0;wR=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return c0=e,c0}var l0,vR;function ste(){if(vR)return l0;vR=1;var e=ite();function t(){}function n(){}return n.resetWarningCache=t,l0=function(){function r(c,u,d,h,p,m){if(m!==e){var y=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw y.name="Invariant Violation",y}}r.isRequired=r;function s(){return r}var a={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:s,element:r,elementType:r,instanceOf:s,node:r,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:n,resetWarningCache:t};return a.PropTypes=a,a},l0}var ER;function ote(){return ER||(ER=1,a0.exports=ste()()),a0.exports}var ate=ote();const u0=Qs(ate),SR={disabled:!1},HI=Xi.createContext(null);var cte=function(t){return t.scrollTop},wu="unmounted",Vs="exited",Vr="entering",Yi="entered",Vu="exiting",as=function(e){Yee(t,e);function t(r,s){var a;a=e.call(this,r,s)||this;var c=s,u=c&&!c.isMounting?r.enter:r.appear,d;return a.appearStatus=null,r.in?u?(d=Vs,a.appearStatus=Vr):d=Yi:r.unmountOnExit||r.mountOnEnter?d=wu:d=Vs,a.state={status:d},a.nextCallback=null,a}t.getDerivedStateFromProps=function(s,a){var c=s.in;return c&&a.status===wu?{status:Vs}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(s){var a=null;if(s!==this.props){var c=this.state.status;this.props.in?c!==Vr&&c!==Yi&&(a=Vr):(c===Vr||c===Yi)&&(a=Vu)}this.updateStatus(!1,a)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var s=this.props.timeout,a,c,u;return a=c=u=s,s!=null&&typeof s!="number"&&(a=s.exit,c=s.enter,u=s.appear!==void 0?s.appear:c),{exit:a,enter:c,appear:u}},n.updateStatus=function(s,a){if(s===void 0&&(s=!1),a!==null)if(this.cancelNextCallback(),a===Vr){if(this.props.unmountOnExit||this.props.mountOnEnter){var c=this.props.nodeRef?this.props.nodeRef.current:_c.findDOMNode(this);c&&cte(c)}this.performEnter(s)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Vs&&this.setState({status:wu})},n.performEnter=function(s){var a=this,c=this.props.enter,u=this.context?this.context.isMounting:s,d=this.props.nodeRef?[u]:[_c.findDOMNode(this),u],h=d[0],p=d[1],m=this.getTimeouts(),y=u?m.appear:m.enter;if(!s&&!c||SR.disabled){this.safeSetState({status:Yi},function(){a.props.onEntered(h)});return}this.props.onEnter(h,p),this.safeSetState({status:Vr},function(){a.props.onEntering(h,p),a.onTransitionEnd(y,function(){a.safeSetState({status:Yi},function(){a.props.onEntered(h,p)})})})},n.performExit=function(){var s=this,a=this.props.exit,c=this.getTimeouts(),u=this.props.nodeRef?void 0:_c.findDOMNode(this);if(!a||SR.disabled){this.safeSetState({status:Vs},function(){s.props.onExited(u)});return}this.props.onExit(u),this.safeSetState({status:Vu},function(){s.props.onExiting(u),s.onTransitionEnd(c.exit,function(){s.safeSetState({status:Vs},function(){s.props.onExited(u)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(s,a){a=this.setNextCallback(a),this.setState(s,a)},n.setNextCallback=function(s){var a=this,c=!0;return this.nextCallback=function(u){c&&(c=!1,a.nextCallback=null,s(u))},this.nextCallback.cancel=function(){c=!1},this.nextCallback},n.onTransitionEnd=function(s,a){this.setNextCallback(a);var c=this.props.nodeRef?this.props.nodeRef.current:_c.findDOMNode(this),u=s==null&&!this.props.addEndListener;if(!c||u){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var d=this.props.nodeRef?[this.nextCallback]:[c,this.nextCallback],h=d[0],p=d[1];this.props.addEndListener(h,p)}s!=null&&setTimeout(this.nextCallback,s)},n.render=function(){var s=this.state.status;if(s===wu)return null;var a=this.props,c=a.children;a.in,a.mountOnEnter,a.unmountOnExit,a.appear,a.enter,a.exit,a.timeout,a.addEndListener,a.onEnter,a.onEntering,a.onEntered,a.onExit,a.onExiting,a.onExited,a.nodeRef;var u=jI(a,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return Xi.createElement(HI.Provider,{value:null},typeof c=="function"?c(s,u):Xi.cloneElement(Xi.Children.only(c),u))},t}(Xi.Component);as.contextType=HI;as.propTypes={};function yc(){}as.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:yc,onEntering:yc,onEntered:yc,onExit:yc,onExiting:yc,onExited:yc};as.UNMOUNTED=wu;as.EXITED=Vs;as.ENTERING=Vr;as.ENTERED=Yi;as.EXITING=Vu;function lte(e){return e.code==="Escape"||e.keyCode===27}function ute(){const e=z.version.split(".");return{major:+e[0],minor:+e[1],patch:+e[2]}}function Gc(e){if(!e||typeof e=="function")return null;const{major:t}=ute();return t>=19?e.props.ref:e.ref}const Ep=!!(typeof window<"u"&&window.document&&window.document.createElement);var Ob=!1,Tb=!1;try{var f0={get passive(){return Ob=!0},get once(){return Tb=Ob=!0}};Ep&&(window.addEventListener("test",f0,f0),window.removeEventListener("test",f0,!0))}catch{}function fte(e,t,n,r){if(r&&typeof r!="boolean"&&!Tb){var s=r.once,a=r.capture,c=n;!Tb&&s&&(c=n.__once||function u(d){this.removeEventListener(t,u,a),n.call(this,d)},n.__once=c),e.addEventListener(t,c,Ob?r:a)}e.addEventListener(t,n,r)}function dte(e,t,n,r){var s=r&&typeof r!="boolean"?r.capture:r;e.removeEventListener(t,n,s),n.__once&&e.removeEventListener(t,n.__once,s)}function Ph(e,t,n,r){return fte(e,t,n,r),function(){dte(e,t,n,r)}}function hte(e,t,n,r){if(r===void 0&&(r=!0),e){var s=document.createEvent("HTMLEvents");s.initEvent(t,n,r),e.dispatchEvent(s)}}function pte(e){var t=ns(e,"transitionDuration")||"",n=t.indexOf("ms")===-1?1e3:1;return parseFloat(t)*n}function gte(e,t,n){n===void 0&&(n=5);var r=!1,s=setTimeout(function(){r||hte(e,"transitionend",!0)},t+n),a=Ph(e,"transitionend",function(){r=!0},{once:!0});return function(){clearTimeout(s),a()}}function mte(e,t,n,r){n==null&&(n=pte(e)||0);var s=gte(e,n,r),a=Ph(e,"transitionend",t);return function(){s(),a()}}function _R(e,t){const n=ns(e,t)||"",r=n.indexOf("ms")===-1?1e3:1;return parseFloat(n)*r}function zw(e,t){const n=_R(e,"transitionDuration"),r=_R(e,"transitionDelay"),s=mte(e,a=>{a.target===e&&(s(),t(a))},n+r)}function du(...e){return e.filter(t=>t!=null).reduce((t,n)=>{if(typeof n!="function")throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return t===null?n:function(...s){t.apply(this,s),n.apply(this,s)}},null)}function FI(e){e.offsetHeight}const AR=e=>!e||typeof e=="function"?e:t=>{e.current=t};function yte(e,t){const n=AR(e),r=AR(t);return s=>{n&&n(s),r&&r(s)}}function bte(e,t){return z.useMemo(()=>yte(e,t),[e,t])}function wte(e){return e&&"setState"in e?_c.findDOMNode(e):e??null}const Sp=Xi.forwardRef(({onEnter:e,onEntering:t,onEntered:n,onExit:r,onExiting:s,onExited:a,addEndListener:c,children:u,childRef:d,...h},p)=>{const m=z.useRef(null),y=bte(m,d),v=N=>{y(wte(N))},w=N=>q=>{N&&m.current&&N(m.current,q)},E=z.useCallback(w(e),[e]),S=z.useCallback(w(t),[t]),A=z.useCallback(w(n),[n]),I=z.useCallback(w(r),[r]),D=z.useCallback(w(s),[s]),B=z.useCallback(w(a),[a]),$=z.useCallback(w(c),[c]);return j.jsx(as,{ref:p,...h,onEnter:E,onEntered:A,onEntering:S,onExit:I,onExited:B,onExiting:D,addEndListener:$,nodeRef:m,children:typeof u=="function"?(N,q)=>u(N,{...q,ref:v}):Xi.cloneElement(u,{ref:v})})});Sp.displayName="TransitionWrapper";const vte={height:["marginTop","marginBottom"],width:["marginLeft","marginRight"]};function Ete(e,t){const n=`offset${e[0].toUpperCase()}${e.slice(1)}`,r=t[n],s=vte[e];return r+parseInt(ns(t,s[0]),10)+parseInt(ns(t,s[1]),10)}const Ste={[Vs]:"collapse",[Vu]:"collapsing",[Vr]:"collapsing",[Yi]:"collapse show"},VI=Xi.forwardRef(({onEnter:e,onEntering:t,onEntered:n,onExit:r,onExiting:s,className:a,children:c,dimension:u="height",in:d=!1,timeout:h=300,mountOnEnter:p=!1,unmountOnExit:m=!1,appear:y=!1,getDimensionValue:v=Ete,...w},E)=>{const S=typeof u=="function"?u():u,A=z.useMemo(()=>du(N=>{N.style[S]="0"},e),[S,e]),I=z.useMemo(()=>du(N=>{const q=`scroll${S[0].toUpperCase()}${S.slice(1)}`;N.style[S]=`${N[q]}px`},t),[S,t]),D=z.useMemo(()=>du(N=>{N.style[S]=null},n),[S,n]),B=z.useMemo(()=>du(N=>{N.style[S]=`${v(S,N)}px`,FI(N)},r),[r,v,S]),$=z.useMemo(()=>du(N=>{N.style[S]=null},s),[S,s]);return j.jsx(Sp,{ref:E,addEndListener:zw,...w,"aria-expanded":w.role?d:null,onEnter:A,onEntering:I,onEntered:D,onExit:B,onExiting:$,childRef:Gc(c),in:d,timeout:h,mountOnEnter:p,unmountOnExit:m,appear:y,children:(N,q)=>Xi.cloneElement(c,{...q,className:sn(a,c.props.className,Ste[N],S==="width"&&"collapse-horizontal")})})});VI.displayName="Collapse";function _te(e){const t=z.useRef(e);return z.useEffect(()=>{t.current=e},[e]),t}function _p(e){const t=_te(e);return z.useCallback(function(...n){return t.current&&t.current(...n)},[t])}const Ate=e=>z.forwardRef((t,n)=>j.jsx("div",{...t,ref:n,className:sn(t.className,e)}));function xte(e){const t=z.useRef(e);return z.useEffect(()=>{t.current=e},[e]),t}function Wi(e){const t=xte(e);return z.useCallback(function(...n){return t.current&&t.current(...n)},[t])}function Rte(){const e=z.useRef(!0),t=z.useRef(()=>e.current);return z.useEffect(()=>(e.current=!0,()=>{e.current=!1}),[]),t.current}function Ote(e){const t=z.useRef(null);return z.useEffect(()=>{t.current=e}),t.current}const Tte=typeof global<"u"&&global.navigator&&global.navigator.product==="ReactNative",Dte=typeof document<"u",xR=Dte||Tte?z.useLayoutEffect:z.useEffect,Ite=["as","disabled"];function Cte(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Nte(e){return!e||e.trim()==="#"}function GI({tagName:e,disabled:t,href:n,target:r,rel:s,role:a,onClick:c,tabIndex:u=0,type:d}){e||(n!=null||r!=null||s!=null?e="a":e="button");const h={tagName:e};if(e==="button")return[{type:d||"button",disabled:t},h];const p=y=>{if((t||e==="a"&&Nte(n))&&y.preventDefault(),t){y.stopPropagation();return}c?.(y)},m=y=>{y.key===" "&&(y.preventDefault(),p(y))};return e==="a"&&(n||(n="#"),t&&(n=void 0)),[{role:a??"button",disabled:void 0,tabIndex:t?void 0:u,href:n,target:e==="a"?r:void 0,"aria-disabled":t||void 0,rel:e==="a"?s:void 0,onClick:p,onKeyDown:m},h]}const KI=z.forwardRef((e,t)=>{let{as:n,disabled:r}=e,s=Cte(e,Ite);const[a,{tagName:c}]=GI(Object.assign({tagName:n,disabled:r},s));return j.jsx(c,Object.assign({},s,a,{ref:t}))});KI.displayName="Button";const $te=["onKeyDown"];function Ute(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Bte(e){return!e||e.trim()==="#"}const YI=z.forwardRef((e,t)=>{let{onKeyDown:n}=e,r=Ute(e,$te);const[s]=GI(Object.assign({tagName:"a"},r)),a=Wi(c=>{s.onKeyDown(c),n?.(c)});return Bte(r.href)||r.role==="button"?j.jsx("a",Object.assign({ref:t},r,s,{onKeyDown:a})):j.jsx("a",Object.assign({ref:t},r,{onKeyDown:n}))});YI.displayName="Anchor";const Pte={[Vr]:"show",[Yi]:"show"},WI=z.forwardRef(({className:e,children:t,transitionClasses:n={},onEnter:r,...s},a)=>{const c={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,...s},u=z.useCallback((d,h)=>{FI(d),r?.(d,h)},[r]);return j.jsx(Sp,{ref:a,addEndListener:zw,...c,onEnter:u,childRef:Gc(t),children:(d,h)=>z.cloneElement(t,{...h,className:sn("fade",e,t.props.className,Pte[d],n[d])})})});WI.displayName="Fade";const kte={"aria-label":u0.string,onClick:u0.func,variant:u0.oneOf(["white"])},qw=z.forwardRef(({className:e,variant:t,"aria-label":n="Close",...r},s)=>j.jsx("button",{ref:s,type:"button",className:sn("btn-close",t&&`btn-close-${t}`,e),"aria-label":n,...r}));qw.displayName="CloseButton";qw.propTypes=kte;const XI=z.createContext(null);XI.displayName="CardHeaderContext";const ZI=z.forwardRef(({bsPrefix:e,fluid:t=!1,as:n="div",className:r,...s},a)=>{const c=Zn(e,"container"),u=typeof t=="string"?`-${t}`:"-fluid";return j.jsx(n,{ref:a,...s,className:sn(r,t?`${c}${u}`:c)})});ZI.displayName="Container";var Mte=Function.prototype.bind.call(Function.prototype.call,[].slice);function $o(e,t){return Mte(e.querySelectorAll(t))}function Lte(){const[,e]=z.useReducer(t=>t+1,0);return e}function RR(e,t){if(e.contains)return e.contains(t);if(e.compareDocumentPosition)return e===t||!!(e.compareDocumentPosition(t)&16)}const kh=z.createContext(null),Hw=(e,t=null)=>e!=null?String(e):t||null,Fw=z.createContext(null);Fw.displayName="NavContext";const jte="data-rr-ui-",zte="rrUi";function Ap(e){return`${jte}${e}`}function qte(e){return`${zte}${e}`}const QI=z.createContext(Ep?window:void 0);QI.Provider;function Vw(){return z.useContext(QI)}const Hte=typeof global<"u"&&global.navigator&&global.navigator.product==="ReactNative",Fte=typeof document<"u",Vte=Fte||Hte?z.useLayoutEffect:z.useEffect,Kc=z.createContext(null);Kc.displayName="NavbarContext";const OR=e=>!e||typeof e=="function"?e:t=>{e.current=t};function Gte(e,t){const n=OR(e),r=OR(t);return s=>{n&&n(s),r&&r(s)}}function xp(e,t){return z.useMemo(()=>Gte(e,t),[e,t])}const JI=z.createContext(null),Kte=["as","active","eventKey"];function Yte(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function eC({key:e,onClick:t,active:n,id:r,role:s,disabled:a}){const c=z.useContext(kh),u=z.useContext(Fw),d=z.useContext(JI);let h=n;const p={role:s};if(u){!s&&u.role==="tablist"&&(p.role="tab");const m=u.getControllerId(e??null),y=u.getControlledId(e??null);p[Ap("event-key")]=e,p.id=m||r,h=n==null&&e!=null?u.activeKey===e:n,(h||!(d!=null&&d.unmountOnExit)&&!(d!=null&&d.mountOnEnter))&&(p["aria-controls"]=y)}return p.role==="tab"&&(p["aria-selected"]=h,h||(p.tabIndex=-1),a&&(p.tabIndex=-1,p["aria-disabled"]=!0)),p.onClick=Wi(m=>{a||(t?.(m),e!=null&&c&&!m.isPropagationStopped()&&c(e,m))}),[p,{isActive:h}]}const tC=z.forwardRef((e,t)=>{let{as:n=KI,active:r,eventKey:s}=e,a=Yte(e,Kte);const[c,u]=eC(Object.assign({key:Hw(s,a.href),active:r},a));return c[Ap("active")]=u.isActive,j.jsx(n,Object.assign({},a,c,{ref:t}))});tC.displayName="NavItem";const Wte=["as","onSelect","activeKey","role","onKeyDown"];function Xte(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}const TR=()=>{},DR=Ap("event-key"),nC=z.forwardRef((e,t)=>{let{as:n="div",onSelect:r,activeKey:s,role:a,onKeyDown:c}=e,u=Xte(e,Wte);const d=Lte(),h=z.useRef(!1),p=z.useContext(kh),m=z.useContext(JI);let y,v;m&&(a=a||"tablist",s=m.activeKey,y=m.getControlledId,v=m.getControllerId);const w=z.useRef(null),E=D=>{const B=w.current;if(!B)return null;const $=$o(B,`[${DR}]:not([aria-disabled=true])`),N=B.querySelector("[aria-selected=true]");if(!N||N!==document.activeElement)return null;const q=$.indexOf(N);if(q===-1)return null;let H=q+D;return H>=$.length&&(H=0),H<0&&(H=$.length-1),$[H]},S=(D,B)=>{D!=null&&(r?.(D,B),p?.(D,B))},A=D=>{if(c?.(D),!m)return;let B;switch(D.key){case"ArrowLeft":case"ArrowUp":B=E(-1);break;case"ArrowRight":case"ArrowDown":B=E(1);break;default:return}B&&(D.preventDefault(),S(B.dataset[qte("EventKey")]||null,D),h.current=!0,d())};z.useEffect(()=>{if(w.current&&h.current){const D=w.current.querySelector(`[${DR}][aria-selected=true]`);D?.focus()}h.current=!1});const I=xp(t,w);return j.jsx(kh.Provider,{value:S,children:j.jsx(Fw.Provider,{value:{role:a,activeKey:Hw(s),getControlledId:y||TR,getControllerId:v||TR},children:j.jsx(n,Object.assign({},u,{onKeyDown:A,ref:I,role:a}))})})});nC.displayName="Nav";const Zte=Object.assign(nC,{Item:tC});function d0(e){e===void 0&&(e=jw());try{var t=e.activeElement;return!t||!t.nodeName?null:t}catch{return e.body}}function Qte(e){const t=z.useRef(e);return t.current=e,t}function Jte(e){const t=Qte(e);z.useEffect(()=>()=>t.current(),[])}function ene(e=document){const t=e.defaultView;return Math.abs(t.innerWidth-e.documentElement.clientWidth)}const IR=Ap("modal-open");class Gw{constructor({ownerDocument:t,handleContainerOverflow:n=!0,isRTL:r=!1}={}){this.handleContainerOverflow=n,this.isRTL=r,this.modals=[],this.ownerDocument=t}getScrollbarWidth(){return ene(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(t){}removeModalAttributes(t){}setContainerStyle(t){const n={overflow:"hidden"},r=this.isRTL?"paddingLeft":"paddingRight",s=this.getElement();t.style={overflow:s.style.overflow,[r]:s.style[r]},t.scrollBarWidth&&(n[r]=`${parseInt(ns(s,r)||"0",10)+t.scrollBarWidth}px`),s.setAttribute(IR,""),ns(s,n)}reset(){[...this.modals].forEach(t=>this.remove(t))}removeContainerStyle(t){const n=this.getElement();n.removeAttribute(IR),Object.assign(n.style,t.style)}add(t){let n=this.modals.indexOf(t);return n!==-1||(n=this.modals.length,this.modals.push(t),this.setModalAttributes(t),n!==0)||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),n}remove(t){const n=this.modals.indexOf(t);n!==-1&&(this.modals.splice(n,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(t))}isTopModal(t){return!!this.modals.length&&this.modals[this.modals.length-1]===t}}const h0=(e,t)=>Ep?e==null?(t||jw()).body:(typeof e=="function"&&(e=e()),e&&"current"in e&&(e=e.current),e&&("nodeType"in e||e.getBoundingClientRect)?e:null):null;function tne(e,t){const n=Vw(),[r,s]=z.useState(()=>h0(e,n?.document));if(!r){const a=h0(e);a&&s(a)}return z.useEffect(()=>{},[t,r]),z.useEffect(()=>{const a=h0(e);a!==r&&s(a)},[e,r]),r}function nne({children:e,in:t,onExited:n,mountOnEnter:r,unmountOnExit:s}){const a=z.useRef(null),c=z.useRef(t),u=Wi(n);z.useEffect(()=>{t?c.current=!0:u(a.current)},[t,u]);const d=xp(a,Gc(e)),h=z.cloneElement(e,{ref:d});return t?h:s||!c.current&&r?null:h}const rne=["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children"];function ine(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function sne(e){let{onEnter:t,onEntering:n,onEntered:r,onExit:s,onExiting:a,onExited:c,addEndListener:u,children:d}=e,h=ine(e,rne);const p=z.useRef(null),m=xp(p,Gc(d)),y=B=>$=>{B&&p.current&&B(p.current,$)},v=z.useCallback(y(t),[t]),w=z.useCallback(y(n),[n]),E=z.useCallback(y(r),[r]),S=z.useCallback(y(s),[s]),A=z.useCallback(y(a),[a]),I=z.useCallback(y(c),[c]),D=z.useCallback(y(u),[u]);return Object.assign({},h,{nodeRef:p},t&&{onEnter:v},n&&{onEntering:w},r&&{onEntered:E},s&&{onExit:S},a&&{onExiting:A},c&&{onExited:I},u&&{addEndListener:D},{children:typeof d=="function"?(B,$)=>d(B,Object.assign({},$,{ref:m})):z.cloneElement(d,{ref:m})})}const one=["component"];function ane(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}const cne=z.forwardRef((e,t)=>{let{component:n}=e,r=ane(e,one);const s=sne(r);return j.jsx(n,Object.assign({ref:t},s))});function lne({in:e,onTransition:t}){const n=z.useRef(null),r=z.useRef(!0),s=Wi(t);return xR(()=>{if(!n.current)return;let a=!1;return s({in:e,element:n.current,initial:r.current,isStale:()=>a}),()=>{a=!0}},[e,s]),xR(()=>(r.current=!1,()=>{r.current=!0}),[]),n}function une({children:e,in:t,onExited:n,onEntered:r,transition:s}){const[a,c]=z.useState(!t);t&&a&&c(!1);const u=lne({in:!!t,onTransition:h=>{const p=()=>{h.isStale()||(h.in?r?.(h.element,h.initial):(c(!0),n?.(h.element)))};Promise.resolve(s(h)).then(p,m=>{throw h.in||c(!0),m})}}),d=xp(u,Gc(e));return a&&!t?null:z.cloneElement(e,{ref:d})}function CR(e,t,n){return e?j.jsx(cne,Object.assign({},n,{component:e})):t?j.jsx(une,Object.assign({},n,{transition:t})):j.jsx(nne,Object.assign({},n))}const fne=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];function dne(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}let p0;function hne(e){return p0||(p0=new Gw({ownerDocument:e?.document})),p0}function pne(e){const t=Vw(),n=e||hne(t),r=z.useRef({dialog:null,backdrop:null});return Object.assign(r.current,{add:()=>n.add(r.current),remove:()=>n.remove(r.current),isTopModal:()=>n.isTopModal(r.current),setDialogRef:z.useCallback(s=>{r.current.dialog=s},[]),setBackdropRef:z.useCallback(s=>{r.current.backdrop=s},[])})}const rC=z.forwardRef((e,t)=>{let{show:n=!1,role:r="dialog",className:s,style:a,children:c,backdrop:u=!0,keyboard:d=!0,onBackdropClick:h,onEscapeKeyDown:p,transition:m,runTransition:y,backdropTransition:v,runBackdropTransition:w,autoFocus:E=!0,enforceFocus:S=!0,restoreFocus:A=!0,restoreFocusOptions:I,renderDialog:D,renderBackdrop:B=Ze=>j.jsx("div",Object.assign({},Ze)),manager:$,container:N,onShow:q,onHide:H=()=>{},onExit:k,onExited:K,onExiting:Y,onEnter:W,onEntering:le,onEntered:re}=e,O=dne(e,fne);const R=Vw(),M=tne(N),F=pne($),X=Rte(),C=Ote(n),[V,ee]=z.useState(!n),se=z.useRef(null);z.useImperativeHandle(t,()=>F,[F]),Ep&&!C&&n&&(se.current=d0(R?.document)),n&&V&&ee(!1);const te=Wi(()=>{if(F.add(),He.current=Ph(document,"keydown",Ee),xe.current=Ph(document,"focus",()=>setTimeout(me),!0),q&&q(),E){var Ze,cs;const $t=d0((Ze=(cs=F.dialog)==null?void 0:cs.ownerDocument)!=null?Ze:R?.document);F.dialog&&$t&&!RR(F.dialog,$t)&&(se.current=$t,F.dialog.focus())}}),pe=Wi(()=>{if(F.remove(),He.current==null||He.current(),xe.current==null||xe.current(),A){var Ze;(Ze=se.current)==null||Ze.focus==null||Ze.focus(I),se.current=null}});z.useEffect(()=>{!n||!M||te()},[n,M,te]),z.useEffect(()=>{V&&pe()},[V,pe]),Jte(()=>{pe()});const me=Wi(()=>{if(!S||!X()||!F.isTopModal())return;const Ze=d0(R?.document);F.dialog&&Ze&&!RR(F.dialog,Ze)&&F.dialog.focus()}),Te=Wi(Ze=>{Ze.target===Ze.currentTarget&&(h?.(Ze),u===!0&&H())}),Ee=Wi(Ze=>{d&&lte(Ze)&&F.isTopModal()&&(p?.(Ze),Ze.defaultPrevented||H())}),xe=z.useRef(),He=z.useRef(),pt=(...Ze)=>{ee(!0),K?.(...Ze)};if(!M)return null;const on=Object.assign({role:r,ref:F.setDialogRef,"aria-modal":r==="dialog"?!0:void 0},O,{style:a,className:s,tabIndex:-1});let qt=D?D(on):j.jsx("div",Object.assign({},on,{children:z.cloneElement(c,{role:"document"})}));qt=CR(m,y,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!n,onExit:k,onExiting:Y,onExited:pt,onEnter:W,onEntering:le,onEntered:re,children:qt});let Dt=null;return u&&(Dt=B({ref:F.setBackdropRef,onClick:Te}),Dt=CR(v,w,{in:!!n,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:Dt})),j.jsx(j.Fragment,{children:_c.createPortal(j.jsxs(j.Fragment,{children:[Dt,qt]}),M)})});rC.displayName="Modal";const gne=Object.assign(rC,{Manager:Gw});function mne(e,t){return e.classList?e.classList.contains(t):(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")!==-1}function yne(e,t){e.classList?e.classList.add(t):mne(e,t)||(typeof e.className=="string"?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))}function NR(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function bne(e,t){e.classList?e.classList.remove(t):typeof e.className=="string"?e.className=NR(e.className,t):e.setAttribute("class",NR(e.className&&e.className.baseVal||"",t))}const bc={FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",STICKY_CONTENT:".sticky-top",NAVBAR_TOGGLER:".navbar-toggler"};class iC extends Gw{adjustAndStore(t,n,r){const s=n.style[t];n.dataset[t]=s,ns(n,{[t]:`${parseFloat(ns(n,t))+r}px`})}restore(t,n){const r=n.dataset[t];r!==void 0&&(delete n.dataset[t],ns(n,{[t]:r}))}setContainerStyle(t){super.setContainerStyle(t);const n=this.getElement();if(yne(n,"modal-open"),!t.scrollBarWidth)return;const r=this.isRTL?"paddingLeft":"paddingRight",s=this.isRTL?"marginLeft":"marginRight";$o(n,bc.FIXED_CONTENT).forEach(a=>this.adjustAndStore(r,a,t.scrollBarWidth)),$o(n,bc.STICKY_CONTENT).forEach(a=>this.adjustAndStore(s,a,-t.scrollBarWidth)),$o(n,bc.NAVBAR_TOGGLER).forEach(a=>this.adjustAndStore(s,a,t.scrollBarWidth))}removeContainerStyle(t){super.removeContainerStyle(t);const n=this.getElement();bne(n,"modal-open");const r=this.isRTL?"paddingLeft":"paddingRight",s=this.isRTL?"marginLeft":"marginRight";$o(n,bc.FIXED_CONTENT).forEach(a=>this.restore(r,a)),$o(n,bc.STICKY_CONTENT).forEach(a=>this.restore(s,a)),$o(n,bc.NAVBAR_TOGGLER).forEach(a=>this.restore(s,a))}}let g0;function wne(e){return g0||(g0=new iC(e)),g0}const sC=z.createContext({onHide(){}}),oC=z.forwardRef(({closeLabel:e="Close",closeVariant:t,closeButton:n=!1,onHide:r,children:s,...a},c)=>{const u=z.useContext(sC),d=_p(()=>{u?.onHide(),r?.()});return j.jsxs("div",{ref:c,...a,children:[s,n&&j.jsx(qw,{"aria-label":e,variant:t,onClick:d})]})});oC.displayName="AbstractModalHeader";const aC=z.forwardRef(({className:e,bsPrefix:t,as:n="div",...r},s)=>(t=Zn(t,"nav-item"),j.jsx(n,{ref:s,className:sn(e,t),...r})));aC.displayName="NavItem";const cC=z.forwardRef(({bsPrefix:e,className:t,as:n=YI,active:r,eventKey:s,disabled:a=!1,...c},u)=>{e=Zn(e,"nav-link");const[d,h]=eC({key:Hw(s,c.href),active:r,disabled:a,...c});return j.jsx(n,{...c,...d,ref:u,disabled:a,className:sn(t,e,a&&"disabled",h.isActive&&"active")})});cC.displayName="NavLink";const lC=z.forwardRef((e,t)=>{const{as:n="div",bsPrefix:r,variant:s,fill:a=!1,justify:c=!1,navbar:u,navbarScroll:d,className:h,activeKey:p,...m}=zI(e,{activeKey:"onSelect"}),y=Zn(r,"nav");let v,w,E=!1;const S=z.useContext(Kc),A=z.useContext(XI);return S?(v=S.bsPrefix,E=u??!0):A&&({cardHeaderBsPrefix:w}=A),j.jsx(Zte,{as:n,ref:t,activeKey:p,className:sn(h,{[y]:!E,[`${v}-nav`]:E,[`${v}-nav-scroll`]:E&&d,[`${w}-${s}`]:!!w,[`${y}-${s}`]:!!s,[`${y}-fill`]:a,[`${y}-justified`]:c}),...m})});lC.displayName="Nav";const wc=Object.assign(lC,{Item:aC,Link:cC}),uC=z.forwardRef(({bsPrefix:e,className:t,as:n,...r},s)=>{e=Zn(e,"navbar-brand");const a=n||(r.href?"a":"span");return j.jsx(a,{...r,ref:s,className:sn(t,e)})});uC.displayName="NavbarBrand";const fC=z.forwardRef(({children:e,bsPrefix:t,...n},r)=>{t=Zn(t,"navbar-collapse");const s=z.useContext(Kc);return j.jsx(VI,{in:!!(s&&s.expanded),...n,children:j.jsx("div",{ref:r,className:t,children:e})})});fC.displayName="NavbarCollapse";const dC=z.forwardRef(({bsPrefix:e,className:t,children:n,label:r="Toggle navigation",as:s="button",onClick:a,...c},u)=>{e=Zn(e,"navbar-toggler");const{onToggle:d,expanded:h}=z.useContext(Kc)||{},p=_p(m=>{a&&a(m),d&&d()});return s==="button"&&(c.type="button"),j.jsx(s,{...c,ref:u,onClick:p,"aria-label":r,className:sn(t,e,!h&&"collapsed"),children:n||j.jsx("span",{className:`${e}-icon`})})});dC.displayName="NavbarToggle";const Db=new WeakMap,$R=(e,t)=>{if(!e||!t)return;const n=Db.get(t)||new Map;Db.set(t,n);let r=n.get(e);return r||(r=t.matchMedia(e),r.refCount=0,n.set(r.media,r)),r};function vne(e,t=typeof window>"u"?void 0:window){const n=$R(e,t),[r,s]=z.useState(()=>n?n.matches:!1);return Vte(()=>{let a=$R(e,t);if(!a)return s(!1);let c=Db.get(t);const u=()=>{s(a.matches)};return a.refCount++,a.addListener(u),u(),()=>{a.removeListener(u),a.refCount--,a.refCount<=0&&c?.delete(a.media),a=void 0}},[e]),r}function Ene(e){const t=Object.keys(e);function n(u,d){return u===d?d:u?`${u} and ${d}`:d}function r(u){return t[Math.min(t.indexOf(u)+1,t.length-1)]}function s(u){const d=r(u);let h=e[d];return typeof h=="number"?h=`${h-.2}px`:h=`calc(${h} - 0.2px)`,`(max-width: ${h})`}function a(u){let d=e[u];return typeof d=="number"&&(d=`${d}px`),`(min-width: ${d})`}function c(u,d,h){let p;typeof u=="object"?(p=u,h=d,d=!0):(d=d||!0,p={[u]:d});let m=z.useMemo(()=>Object.entries(p).reduce((y,[v,w])=>((w==="up"||w===!0)&&(y=n(y,a(v))),(w==="down"||w===!0)&&(y=n(y,s(v))),y),""),[JSON.stringify(p)]);return vne(m,h)}return c}const Sne=Ene({xs:0,sm:576,md:768,lg:992,xl:1200,xxl:1400}),hC=z.forwardRef(({className:e,bsPrefix:t,as:n="div",...r},s)=>(t=Zn(t,"offcanvas-body"),j.jsx(n,{ref:s,className:sn(e,t),...r})));hC.displayName="OffcanvasBody";const _ne={[Vr]:"show",[Yi]:"show"},pC=z.forwardRef(({bsPrefix:e,className:t,children:n,in:r=!1,mountOnEnter:s=!1,unmountOnExit:a=!1,appear:c=!1,...u},d)=>(e=Zn(e,"offcanvas"),j.jsx(Sp,{ref:d,addEndListener:zw,in:r,mountOnEnter:s,unmountOnExit:a,appear:c,...u,childRef:Gc(n),children:(h,p)=>z.cloneElement(n,{...p,className:sn(t,n.props.className,(h===Vr||h===Vu)&&`${e}-toggling`,_ne[h])})})));pC.displayName="OffcanvasToggling";const gC=z.forwardRef(({bsPrefix:e,className:t,closeLabel:n="Close",closeButton:r=!1,...s},a)=>(e=Zn(e,"offcanvas-header"),j.jsx(oC,{ref:a,...s,className:sn(t,e),closeLabel:n,closeButton:r})));gC.displayName="OffcanvasHeader";const Ane=Ate("h5"),mC=z.forwardRef(({className:e,bsPrefix:t,as:n=Ane,...r},s)=>(t=Zn(t,"offcanvas-title"),j.jsx(n,{ref:s,className:sn(e,t),...r})));mC.displayName="OffcanvasTitle";function xne(e){return j.jsx(pC,{...e})}function Rne(e){return j.jsx(WI,{...e})}const yC=z.forwardRef(({bsPrefix:e,className:t,children:n,"aria-labelledby":r,placement:s="start",responsive:a,show:c=!1,backdrop:u=!0,keyboard:d=!0,scroll:h=!1,onEscapeKeyDown:p,onShow:m,onHide:y,container:v,autoFocus:w=!0,enforceFocus:E=!0,restoreFocus:S=!0,restoreFocusOptions:A,onEntered:I,onExit:D,onExiting:B,onEnter:$,onEntering:N,onExited:q,backdropClassName:H,manager:k,renderStaticNode:K=!1,...Y},W)=>{const le=z.useRef();e=Zn(e,"offcanvas");const[re,O]=z.useState(!1),R=_p(y),M=Sne(a||"xs","up");z.useEffect(()=>{O(a?c&&!M:c)},[c,a,M]);const F=z.useMemo(()=>({onHide:R}),[R]);function X(){return k||(h?(le.current||(le.current=new iC({handleContainerOverflow:!1})),le.current):wne())}const C=(te,...pe)=>{te&&(te.style.visibility="visible"),$?.(te,...pe)},V=(te,...pe)=>{te&&(te.style.visibility=""),q?.(...pe)},ee=z.useCallback(te=>j.jsx("div",{...te,className:sn(`${e}-backdrop`,H)}),[H,e]),se=te=>j.jsx("div",{...te,...Y,className:sn(t,a?`${e}-${a}`:e,`${e}-${s}`),"aria-labelledby":r,children:n});return j.jsxs(j.Fragment,{children:[!re&&(a||K)&&se({}),j.jsx(sC.Provider,{value:F,children:j.jsx(gne,{show:re,ref:W,backdrop:u,container:v,keyboard:d,autoFocus:w,enforceFocus:E&&!h,restoreFocus:S,restoreFocusOptions:A,onEscapeKeyDown:p,onShow:m,onHide:R,onEnter:C,onEntering:N,onEntered:I,onExit:D,onExiting:B,onExited:V,manager:X(),transition:xne,backdropTransition:Rne,renderBackdrop:ee,renderDialog:se})})]})});yC.displayName="Offcanvas";const One=Object.assign(yC,{Body:hC,Header:gC,Title:mC}),bC=z.forwardRef(({onHide:e,...t},n)=>{const r=z.useContext(Kc),s=_p(()=>{r==null||r.onToggle==null||r.onToggle(),e?.()});return j.jsx(One,{ref:n,show:!!(r!=null&&r.expanded),...t,renderStaticNode:!0,onHide:s})});bC.displayName="NavbarOffcanvas";const wC=z.forwardRef(({className:e,bsPrefix:t,as:n="span",...r},s)=>(t=Zn(t,"navbar-text"),j.jsx(n,{ref:s,className:sn(e,t),...r})));wC.displayName="NavbarText";const vC=z.forwardRef((e,t)=>{const{bsPrefix:n,expand:r=!0,variant:s="light",bg:a,fixed:c,sticky:u,className:d,as:h="nav",expanded:p,onToggle:m,onSelect:y,collapseOnSelect:v=!1,...w}=zI(e,{expanded:"onToggle"}),E=Zn(n,"navbar"),S=z.useCallback((...D)=>{y?.(...D),v&&p&&m?.(!1)},[y,v,p,m]);w.role===void 0&&h!=="nav"&&(w.role="navigation");let A=`${E}-expand`;typeof r=="string"&&(A=`${A}-${r}`);const I=z.useMemo(()=>({onToggle:()=>m?.(!p),bsPrefix:E,expanded:!!p,expand:r}),[E,p,r,m]);return j.jsx(Kc.Provider,{value:I,children:j.jsx(kh.Provider,{value:S,children:j.jsx(h,{ref:t,...w,className:sn(d,E,r&&A,s&&`${E}-${s}`,a&&`bg-${a}`,u&&`sticky-${u}`,c&&`fixed-${c}`)})})})});vC.displayName="Navbar";const Qd=Object.assign(vC,{Brand:uC,Collapse:fC,Offcanvas:bC,Text:wC,Toggle:dC});function Tne(){const[e,t]=z.useState({loggedIn:null});z.useEffect(()=>{Qi().subscribe(t)},[]);const n=()=>{jee()},r=()=>{zee()};return j.jsxs(j.Fragment,{children:[j.jsx(Qd,{expand:"lg",className:"navbar mb-3",children:j.jsxs(ZI,{fluid:!0,children:[j.jsx(Qd.Brand,{as:Co,to:"/",children:j.jsx("img",{src:"/favicon.png",alt:"MVP on Flow Logo",height:"40",className:"me-2"})}),j.jsx(Qd.Toggle,{"aria-controls":"navbarNav"}),j.jsxs(Qd.Collapse,{id:"navbarNav",children:[j.jsxs(wc,{className:"me-auto mb-2 mb-lg-0",children:[j.jsx(wc.Link,{as:Co,to:"/",children:"Home"}),j.jsx(wc.Link,{as:Co,to:"/swapfest",children:"Swapfest"}),j.jsx(wc.Link,{as:Co,to:"/treasury",children:"Treasury"}),j.jsx(wc.Link,{as:Co,to:"/vote",children:"Vote"}),j.jsx(wc.Link,{as:Co,to:"/fastbreak",children:"Fastbreak"})]}),j.jsx("div",{className:"d-flex align-items-center",children:e.loggedIn?j.jsxs(j.Fragment,{children:[j.jsx("span",{className:"wallet-address me-2",children:e.addr}),j.jsx("button",{className:"btn-wallet",onClick:r,children:"Disconnect"})]}):j.jsx("button",{className:"btn-wallet",onClick:n,children:"Connect Wallet"})})]})]})}),j.jsx("div",{className:"container-fluid mt-4 flex-grow-1",children:j.jsx(B4,{})}),j.jsxs("div",{className:"footer mt-auto",children:[j.jsx("p",{children:"This is a fan project and is not affiliated with NBA TopShot, Nikola Joki, or any official organization."}),j.jsxs("div",{className:"d-flex justify-content-center align-items-center gap-3 mt-2",children:[j.jsx("a",{href:"https://discord.gg/3p3ff9PHqW",target:"_blank","aria-label":"Discord",rel:"noreferrer",children:j.jsx("i",{className:"bi bi-discord",style:{fontSize:"1.5rem"}})}),j.jsx("a",{href:"https://x.com/petjokicshorses",target:"_blank","aria-label":"Twitter",rel:"noreferrer",children:j.jsx("i",{className:"bi bi-twitter-x",style:{fontSize:"1.5rem"}})})]})]})]})}function Dne(){return j.jsxs(j.Fragment,{children:[j.jsxs("div",{className:"hero",children:[j.jsx("h1",{children:" MVP on Flow - Pet Jokic's Horses "}),j.jsxs("p",{children:["MVP on Flow, also known as ",j.jsx("strong",{children:"Pet Jokic's horses"}),", is a ",j.jsx("strong",{children:"fan-powered project"})," celebrating Nikola Jokic and his NBA TopShot moments on the Flow blockchain."]}),j.jsx("p",{children:"Join our Discord community for Jokic-themed fun, prediction contests, raffles, giveaways, and more!"}),j.jsxs("p",{children:["Earn and use ",j.jsx("strong",{children:"$MVP"})," tokens in community games, swap them for Jokic moments, trade them on Flow exchanges or stake them to earn rewards. Whether you're a collector or a fan, there's something for everyone."]}),j.jsxs("a",{href:"https://discord.gg/3p3ff9PHqW",target:"_blank",rel:"noopener noreferrer",className:"btn btn-discord",children:[j.jsx("i",{className:"bi bi-discord"})," Join Our Discord"]})]}),j.jsx("div",{className:"card shadow mb-4",children:j.jsxs("div",{className:"card-body",children:[j.jsx("h2",{className:"card-title text-center mb-3",children:" $MVP Tokenomics"}),j.jsx("p",{className:"card-text text-center",children:"Learn how $MVP works: swap Jokic moments, earn rewards, and power community events."}),j.jsx("div",{className:"text-center mt-3",children:j.jsx("img",{src:"/images/Tokenomics.png",alt:"MVP Tokenomics",className:"img-fluid rounded shadow"})})]})})]})}function Ine(){const[e,t]=z.useState(0),[n,r]=z.useState([]);return z.useEffect(()=>{fetch("https://pjh-gzerbpd3gecjhab5.westus-01.azurewebsites.net/api/leaderboard").then(s=>s.json()).then(s=>{t(s.prize_pool),r(s.leaderboard)})},[]),j.jsx("div",{className:"container",children:j.jsx("div",{className:"card shadow mb-4",children:j.jsxs("div",{className:"card-body",children:[j.jsx("h2",{className:"mb-4 text-center",children:" $MVP Swap Fest July 1st - 11th "}),j.jsx("div",{className:"text-center mb-4",children:j.jsx("img",{src:"/images/1-11-07-25.png",alt:"Swap Fest Rules",className:"img-fluid rounded shadow"})}),j.jsxs("p",{className:"text-center mb-3",children:["Prize Pool: ",e," points"]}),j.jsx("div",{className:"table-responsive",children:j.jsxs("table",{className:"mvp-table",children:[j.jsx("thead",{children:j.jsxs("tr",{children:[j.jsx("th",{children:"#"}),j.jsx("th",{children:"TopShot Username"}),j.jsx("th",{children:"Points"}),j.jsx("th",{children:"Prize"})]})}),j.jsx("tbody",{children:n.map((s,a)=>j.jsxs("tr",{children:[j.jsx("td",{children:a+1}),j.jsx("td",{children:s.username}),j.jsx("td",{children:s.points}),j.jsx("td",{children:s.prize})]},a))})]})})]})})})}function Cne(){const[e,t]=z.useState(null);return z.useEffect(()=>{fetch("https://pjh-gzerbpd3gecjhab5.westus-01.azurewebsites.net/api/treasury").then(n=>n.json()).then(n=>t(n))},[]),e?j.jsx("div",{className:"container",children:j.jsx("div",{className:"card shadow mb-4",children:j.jsxs("div",{className:"card-body",children:[j.jsx("h2",{className:"mb-3 text-center",children:" $MVP Treasury Overview"}),j.jsx("p",{className:"text-center mb-2",children:"See the current state of the treasury and the $MVP token economy."}),j.jsxs("p",{className:"text-center mb-4",children:["Last Updated: ",e.last_updated]}),j.jsxs("div",{className:"row",children:[j.jsx("div",{className:"col-md-6 mb-3",children:j.jsx("div",{className:"card treasury-card h-100",children:j.jsxs("div",{className:"card-body",children:[j.jsx("h5",{className:"fw-bold mb-3",children:" Tokens in the Wild"}),j.jsx("p",{className:"display-6",children:e.tokens_in_wild}),j.jsx("p",{children:"Total $MVP tokens released into circulation, not owned by the treasury."})]})})}),j.jsx("div",{className:"col-md-6 mb-3",children:j.jsx("div",{className:"card treasury-card h-100",children:j.jsxs("div",{className:"card-body",children:[j.jsx("h5",{className:"fw-bold mb-3",children:" Treasury Holdings"}),j.jsxs("ul",{className:"list-group list-group-flush",children:[j.jsxs("li",{className:"list-group-item",children:["Common Moments: ",j.jsx("strong",{children:e.common_count})]}),j.jsxs("li",{className:"list-group-item",children:["Rare Moments: ",j.jsx("strong",{children:e.rare_count})]}),j.jsxs("li",{className:"list-group-item",children:["Top Shot Debut: ",j.jsx("strong",{children:e.tsd_count})]}),j.jsxs("li",{className:"list-group-item",children:["Legendary Moments: ",j.jsx("strong",{children:e.lego_count})]})]})]})})}),j.jsx("div",{className:"col-md-6 mb-3",children:j.jsx("div",{className:"card treasury-card h-100",children:j.jsxs("div",{className:"card-body",children:[j.jsx("h5",{className:"fw-bold mb-3",children:" Backed Supply"}),j.jsx("p",{className:"display-6",children:e.backed_supply}),j.jsxs("p",{children:["Calculated as:",j.jsx("br",{}),"2x Common + 100x Rare + 500x TSD + 2000x Legendary"]})]})})}),j.jsx("div",{className:"col-md-6 mb-3",children:j.jsx("div",{className:"card treasury-card h-100",children:j.jsxs("div",{className:"card-body",children:[j.jsx("h5",{className:"fw-bold mb-3",children:" Treasury Surplus"}),j.jsx("p",{className:"display-6",children:e.surplus}),j.jsx("p",{children:"Backed Supply minus Tokens in the Wild."})]})})})]})]})})}):j.jsx("div",{className:"container",children:j.jsx("p",{children:"Loading..."})})}function Nne(){const[e,t]=z.useState(!1),n=z.useRef(null),r=z.useRef(null),s=()=>{t(!0)},a=c=>{const u=Math.floor(Math.random()*200)-100,d=Math.floor(Math.random()*200)-100;c.current.style.transform=`translate(${u}px, ${d}px)`};return j.jsx("div",{className:"container",children:j.jsx("div",{className:"card shadow mb-4",children:j.jsxs("div",{className:"card-body text-center",children:[j.jsx("h2",{className:"mb-4",children:"Who is the only real $MVP of the past 5 seasons in the NBA?"}),j.jsx("p",{className:"text-muted mb-4",children:"Result of this vote will decide which player's moments the project will collect in the following period."}),e?j.jsxs("div",{id:"result-section",className:"mt-4",children:[j.jsx("h3",{className:"mb-3",children:" Voting Results:"}),j.jsxs("div",{className:"list-group w-50 mx-auto",children:[j.jsxs("div",{className:"list-group-item d-flex justify-content-between",children:[j.jsx("span",{children:"Joki"}),j.jsx("span",{children:"100%"})]}),j.jsxs("div",{className:"list-group-item d-flex justify-content-between",children:[j.jsx("span",{children:"Embiid"}),j.jsx("span",{children:"0%"})]}),j.jsxs("div",{className:"list-group-item d-flex justify-content-between",children:[j.jsx("span",{children:"SGA"}),j.jsx("span",{children:"0%"})]})]})]}):j.jsxs("div",{id:"vote-section",children:[j.jsx("button",{className:"btn btn-success btn-lg mb-3",onClick:s,children:"Joki"}),j.jsx("button",{ref:n,className:"btn btn-outline-secondary btn-lg mb-3",onMouseEnter:()=>a(n),children:"Embiid"}),j.jsx("button",{ref:r,className:"btn btn-outline-secondary btn-lg mb-3",onMouseEnter:()=>a(r),children:"SGA"})]})]})})})}function $ne(){const[e,t]=z.useState({loggedIn:null}),[n,r]=z.useState(""),[s,a]=z.useState(!1),[c,u]=z.useState([]),[d,h]=z.useState(null),[p,m]=z.useState(""),[y,v]=z.useState(null),[w,E]=z.useState(""),S="0x2459710b1d10aed0";z.useEffect(()=>{Qi().subscribe(t),A()},[]),z.useEffect(()=>{d&&I(d.id,e.addr)},[e,d]),z.useEffect(()=>{if(!d||!d.lock_timestamp){E("");return}const N=setInterval(()=>{const q=Math.floor(Date.now()/1e3),H=d.lock_timestamp-q;if(H<=0)E("Contest has started!"),clearInterval(N);else{const k=String(Math.floor(H/3600)).padStart(2,"0"),K=String(Math.floor(H%3600/60)).padStart(2,"0"),Y=String(H%60).padStart(2,"0");E(`${k}:${K}:${Y}`)}},1e3);return()=>clearInterval(N)},[d]);const A=async()=>{try{const q=await(await fetch("https://pjh-gzerbpd3gecjhab5.westus-01.azurewebsites.net/api/fastbreak/contests")).json();u(q),q.length>0&&h(q[0])}catch(N){console.error("Failed to load contests",N)}},I=async(N,q)=>{try{const k=await(await fetch(`https://pjh-gzerbpd3gecjhab5.westus-01.azurewebsites.net/api/fastbreak/contest/${N}/prediction-leaderboard?userWallet=${q}`)).json();v(k)}catch(H){console.error("Failed to load leaderboard",H)}},D=N=>{const q=parseInt(N.target.value),H=c.find(k=>k.id===q);h(H),v(null),H&&I(H.id,e.addr)},B=N=>String(N).includes(".")?String(N):`${N}.0`,$=async()=>{if(!e.loggedIn){r(" Please connect your wallet first.");return}if(!d){r(" Please select a contest.");return}if(!p.trim()){r(" Please enter your TopShot username.");return}try{a(!0),r("Waiting for wallet approval...");const N=await Lee({cadence:`
          import FungibleToken from 0xf233dcee88fe0abe
          import StorageRent from 0x707adbad1428c624
          import PetJokicsHorses from 0x6fd2465f3a22e34c

          transaction(amount: UFix64, recipient: Address) {
              let sentVault: @{FungibleToken.Vault}

              prepare(signer: auth(Storage, BorrowValue) &Account) {
                  let vaultRef = signer.storage.borrow<auth(FungibleToken.Withdraw) &PetJokicsHorses.Vault>(
                      from: /storage/PetJokicsHorsesVault
                  ) ?? panic("Could not borrow reference to the owner's Vault!")
                  self.sentVault <- vaultRef.withdraw(amount: amount)
              }

              execute {
                  let recipientAccount = getAccount(recipient)
                  let receiverRef = recipientAccount.capabilities.borrow<&{FungibleToken.Vault}>(
                      /public/PetJokicsHorsesReceiver
                  )!
                  receiverRef.deposit(from: <-self.sentVault)
                  StorageRent.tryRefill(recipient)
              }
          }
        `,args:(q,H)=>[q(B(d.buy_in_amount),H.UFix64),q(S,H.Address)],proposer:Qi().authorization,payer:Qi().authorization,authorizations:[Qi().authorization],limit:9999});r(` Transaction submitted! TX ID: <a href="https://flowscan.io/tx/${N}" target="_blank" rel="noopener noreferrer">${N}</a>`),await ra(N).onceSealed(),r(` Transaction sealed on-chain! View TX: <a href="https://flowscan.io/tx/${N}" target="_blank" rel="noopener noreferrer">${N}</a><br/>Registering your entry...`),await fetch(`https://pjh-gzerbpd3gecjhab5.westus-01.azurewebsites.net/api/fastbreak/contest/${d.id}/entries`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({topshotUsernamePrediction:p,userWalletAddress:e.addr})}),r(` Entry submitted! Thank you for joining.<br/>TX: <a href="https://flowscan.io/tx/${N}" target="_blank" rel="noopener noreferrer">${N}</a>`),a(!1),m(""),I(d.id,e.addr)}catch(N){console.error(N),a(!1),r(` Error: ${N.message}`)}};return j.jsxs("div",{className:"container",children:[j.jsx("div",{className:"card shadow mb-4",children:j.jsxs("div",{className:"card-body",children:[j.jsx("h2",{className:"mb-4 text-center",children:"Fastbreak Horse Race"}),j.jsx("p",{className:"text-center mb-4",children:"Pick the top-ranked NBA Top Shot user in the NBA Fastbreak. Buy in, submit your pick before lock, and if your horse is the fastest, i.e. ranks better than everyone else's pick, you win the pot!"}),e.loggedIn&&j.jsxs("p",{className:"text-muted text-center",children:["Connected as: ",j.jsx("strong",{children:e.addr})]}),w&&j.jsxs("p",{className:"text-center text-muted mb-2",children:["Contest starts in: ",j.jsx("strong",{children:w})]}),j.jsxs("div",{className:"mb-3",children:[j.jsx("label",{children:"Select Contest"}),j.jsx("select",{className:"form-select",onChange:D,value:d?.id||"",children:c.map(N=>j.jsxs("option",{value:N.id,children:[N.display_name||N.fastbreak_id,` (Buy-in: ${N.buy_in_amount} ${N.buy_in_currency})`]},N.id))})]}),j.jsxs("div",{className:"mb-3",children:[j.jsx("label",{children:"TopShot Username Prediction"}),j.jsx("input",{type:"text",className:"form-control",value:p,onChange:N=>m(N.target.value),placeholder:"Enter TopShot username of your champion"})]}),j.jsx("button",{className:"btn btn-primary btn-lg w-100",onClick:$,disabled:!e.loggedIn||s||y?.status==="STARTED",children:s?"Processing...":`Buy In for ${d?.buy_in_amount||""} ${d?.buy_in_currency||""}`}),!e.loggedIn&&j.jsx("p",{className:"text-muted text-center mt-2",children:"Please connect your wallet using the top-right button to buy in."}),y?.status==="STARTED"&&j.jsx("p",{className:"text-danger mt-2 text-center",children:" This contest is locked for new entries."}),n&&j.jsx("div",{className:"mt-3 text-center",children:j.jsx("p",{dangerouslySetInnerHTML:{__html:n}})})]})}),y&&j.jsx("div",{className:"card shadow mb-4",children:j.jsxs("div",{className:"card-body",children:[j.jsx("h4",{className:"mb-3 text-center",children:" Contest Info"}),w&&j.jsxs("p",{children:[j.jsx("strong",{children:"Contest locks in:"})," ",w]}),j.jsxs("p",{children:[j.jsx("strong",{children:"Total entries:"})," ",y.totalEntries]}),j.jsxs("p",{children:[j.jsx("strong",{children:"Total pot:"})," ",y.totalPot," $MVP"]}),y.status==="STARTED"?j.jsxs(j.Fragment,{children:[j.jsx("h4",{className:"mt-4 mb-3 text-center",children:" Contest Leaderboard"}),j.jsx("div",{className:"table-responsive",children:j.jsxs("table",{className:"mvp-table",children:[j.jsx("thead",{children:j.jsxs("tr",{children:[j.jsx("th",{children:"Rank"}),j.jsx("th",{children:"Wallet"}),j.jsx("th",{children:"Prediction"}),j.jsx("th",{children:"Fastbreak Rank"}),j.jsx("th",{children:"Lineup"})]})}),j.jsx("tbody",{children:y.entries.map(N=>j.jsxs("tr",{className:N.isUser?"table-success":"",children:[j.jsx("td",{children:N.position}),j.jsx("td",{children:N.wallet}),j.jsx("td",{children:N.prediction}),j.jsx("td",{children:N.rank}),j.jsx("td",{children:N.lineup?N.lineup.join(", "):"N/A"})]},`${N.wallet}-${N.prediction}`))})]})})]}):j.jsx(j.Fragment,{children:y.userEntries.length>0?j.jsxs(j.Fragment,{children:[j.jsx("h5",{className:"mt-4",children:"Your Entries:"}),j.jsx("div",{className:"table-responsive",children:j.jsxs("table",{className:"table table-striped table-bordered",children:[j.jsx("thead",{children:j.jsxs("tr",{children:[j.jsx("th",{children:"Prediction"}),j.jsx("th",{children:"Fastbreak Rank"}),j.jsx("th",{children:"Lineup"})]})}),j.jsx("tbody",{children:y.userEntries.map((N,q)=>j.jsxs("tr",{children:[j.jsx("td",{children:N.prediction}),j.jsx("td",{children:N.rank!==void 0?N.rank:"N/A"}),j.jsx("td",{children:N.lineup?N.lineup.join(", "):"N/A"})]},q))})]})})]}):j.jsx("p",{className:"text-muted mt-3",children:"You have not submitted any entries yet."})})]})})]})}function Une(){return j.jsx(a6,{children:j.jsx(k4,{children:j.jsxs(Io,{path:"/",element:j.jsx(Tne,{}),children:[j.jsx(Io,{index:!0,element:j.jsx(Dne,{})}),j.jsx(Io,{path:"swapfest",element:j.jsx(Ine,{})}),j.jsx(Io,{path:"treasury",element:j.jsx(Cne,{})}),j.jsx(Io,{path:"vote",element:j.jsx(Nne,{})}),j.jsx(Io,{path:"fastbreak",element:j.jsx($ne,{})})]})})})}q8.createRoot(document.getElementById("root")).render(j.jsx(z.StrictMode,{children:j.jsx(Une,{})}));export{OM as H,IT as _,p_ as a,Mu as b,Mne as c,EM as d,zT as e,TM as f,kne as g,vh as h,zne as i,jne as j,Qs as k,Lne as r,qT as t};
